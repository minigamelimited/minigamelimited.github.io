var g=function(){};g.iswxgame=function(){return cc.sys.platform==cc.sys.WECHAT_GAME};var _G=window||this;function isEmpty(t){return null==t||"string"==typeof t&&(""===t||new RegExp("^([ ]+)|([\u3000]+)$").test(t))}function range(t,n,e){t=Number(t),n=Number(n);let o=[];e=e||1;for(let r=t;r<=n;r++)r%e==0&&o.push(r);return o}g.setGlobalInstance=function(t,n){console.log("g.setGlobalInstance",t),n?_G[n]=t:t.__classname__?_G[t.__classname__]=t:console.warn("g.setGlobalInstance:register failed")},g.getGlobal=function(t){return null==t||null==t?_G:_G[t]},g.randomInt=function(t,n){null==n&&(n=t,t=0);var e=Math.random()*(n-t);return Math.floor(e)+t},g.getRandomInArray=function(t){if(t)return t[g.randomInt(0,t.length)]},g.getRandom=function(t){if(t)return t[g.randomInt(0,t.length)]},g.randomFloat=function(t,n){return Math.random()*(n-t)+t},g.foreachNode=function(t,n,e){if(null!=t&&null!=t)for(var o=0;o<t.childrenCount;o++){var r=t.children[o];n.call(e,r),r.childrenCount>0&&g.foreachNode(r,n,e)}},g.uuid=function(t,n){var e,o,r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),a=[];if(n=n||r.length,t)for(e=0;e<t;e++)a[e]=r[0|Math.random()*n];else for(a[8]=a[13]=a[18]=a[23]="-",a[14]="4",e=0;e<36;e++)a[e]||(o=0|16*Math.random(),a[e]=r[19==e?3&o|8:o]);return a.join("")},g.fbToJson=function(){},g._dumpBuffer=function(t,n){for(var e="",o=0;o<n;o++)e+="    ";for(var r in e+="-",t)if("bb"!=r&&"bb_pos"!=r&&"__init"!=r){var a=t[r].call(t);if("[object Object]"==a){console.log(cc.js.formatStr(e+"[%s] : ",r));var c=t[r+"Length"],i=t[r];if(c){var l=c.call(t);for(o=0;o<l;o++){var s=i.call(t,o);console.log(e+" "+o+":"),this._dumpBuffer(s,n+1)}}else this._dumpBuffer(a,n+1)}else null!=a&&console.log(e+cc.js.formatStr("[%s] : %s ",r,a))}},g.logColor=function(t,n){n=n||"#0092c3",console.log("%c | "+t+" |","background-color: "+n+"; background-image: -webkit-linear-gradient(top, "+n+", #eee); background-image: linear-gradient(to bottom, "+n+", #eee); padding: 5px 10px; color: #333")},g.dumpBuffer=function(t){g.logColor("======= dump buffer============================================"),g._dumpBuffer(t,0),g.logColor("================================================================")},g.increaseFomula=function(t,n,e,o){return t+e/(e+o)*(n-t)},g.decreaseFomula=function(t,n,e,o){return t-e/(e+o)*(t-n)},g.gcd=function(t){let n=t.map(t=>t);function e(t,n){return t%n==0?n:arguments.callee(n,t%n)}for(;n.length>1;)n.push(e(n.pop(),n.pop()));return n[0]},g.isNextDay=function(t){return g.isGreaterDate(new Date,new Date(t))},g.isGreaterDate=function(t,n){var e=t.getTime()-n.getTime();return e>864e5||e>0&&t.getDate()!=n.getDate()},g.map=function(t,n,e,o,r){let a=(r-o)*t/(e-n)+o;return Math.max(o,Math.min(a,r))},g.allPossibles=function(t,n){for(var e=[],o=4-Math.round(t/2),r=4-Math.round(n/2),a=o;a<=o+t-1;a++)for(var c=r;c<=r+n-1;c++)e.push([a,c]);return e},g.execScript=function(t){var n=t.split(".");if(n.length>=2){var e=n[0],o=n[1].replace(/\(.*\)/,""),r=_G[e];if(r){var a=r[o];a&&a.call(r)}}},g.fadeAndDestroy=function(t,n){n=n||.3;var e=cc.sequence(cc.fadeOut(n),cc.callFunc(t.destroy,t));t.runAction(e)},g.extendArray=function(t,n){n.forEach(function(n){t.push(n)},t)},g.getRandomUniqueArray=function(t,n){var e=new Array,o=t;if(Array.isArray(t)){o=t.length;for(var r=0;r<o;r++)e.push(t[r])}else for(r=0;r<o;r++)e.push(r);var a=new Array;for(r=0;r<n&&e.length>0;r++){var c=Math.floor(Math.random()*e.length);a[r]=e[c],e.splice(c,1)}return a},g.prefixInteger=function(t,n){return("0000000000000000"+t).substr(-n)},_G.isEmpty=isEmpty,_G.range=range,Function.prototype.getName=function(){return this.name||this.toString().match(/function\s*([^(]*)\(/)[1]},Date.prototype.format=function(t){var n={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var e in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[e]:("00"+n[e]).substr((""+n[e]).length)));return t},String.prototype.format=function(t){var n=this;if(arguments.length>0)if(1==arguments.length&&"object"==typeof t){for(var e in t)if(null!=t[e]){var o=new RegExp("({"+e+"})","g");n=n.replace(o,t[e])}}else for(var r=0;r<arguments.length;r++)null!=arguments[r]&&(o=new RegExp("({)"+r+"(})","g"),n=n.replace(o,arguments[r]));return n};var g_units=["N","K","M","B","T","aa","ab","ac","ad","ae","af","ag","ah","ai","aj","ak","al","am","an","ao","ap","aq","ar","as","at","au","av","aw","ax","ay","az"];Number.prototype.toUnitString=function(t){null==t&&(t=2);let n=this;for(var e=0,o=Math.round(n);o>500&&e<30;)e++,o/=1e3;for(;o>0&&o<1&&e>0;)e--,o*=1e3;return 0==e?Math.round(n):o.toFixed(t)+g_units[e]},g.v2=function(t){return cc.v2(t.x,t.y)},g.shuffle=function(t,n){(void 0===n||0>=n||n>t.length)&&(n=t.length);var e=0;for(n-=1;0<=n;n--){var o=0|16777215*Math.random()%(n+1);e=t[n],t[n]=t[o],t[o]=e}},cc.Node.prototype.getComponentInParent=function(t){var n=this.getComponent(t);return n instanceof t?n:(parent=this.getParent(),null==parent||parent instanceof cc.Scene?null:parent.getComponentInParent(t))},cc.Component.prototype.getComponentInParent=function(t){var n=this.getComponent(t);return n instanceof t?n:(parent=this.node.getParent(),null==parent?null:parent.getComponentInParent(t))},cc.Node.prototype.getWorldBoundingBox=function(){let t=this.parent;if(null==t)return cc.rect();let n=this.getBoundingBox(),e=cc.v2(n.xMin,n.yMin),o=cc.v2(n.xMax,n.yMax);e=t.convertToWorldSpaceAR(e);let r=(o=t.convertToWorldSpaceAR(o)).subSelf(e);return cc.rect(e.x,e.y,r.x,r.y)},cc.Camera.prototype.canSee=function(t){var n=t.getWorldBoundingBox(),e=n.origin;let o=cc.v2(n.xMax,n.yMax);var r=this.getWorldToScreenPoint(e,cc.Vec2.ZERO),a=this.getWorldToScreenPoint(o,cc.Vec2.ZERO);return!(r.y>cc.visibleRect.height||a.y<0||a.x<0||r.x>cc.visibleRect.width)},cc.ScrollView.prototype.showlist=function(t,n,e){e||(e=this.content.children[0]),this.content.children.forEach(t=>t!=e&&t.destroy()),e&&(e.active=!1);for(var o=0;o<n.length;o++){var r=n[o],a=cc.instantiate(e);a.active=!0,this.content.addChild(a),t&&t(a,r,o)}},cc.Layout.prototype.showlist=function(t,n,e){e||(e=this.node.children[0]);var o=this["node-pool"];o||(o=new cc.NodePool,this["node-pool"]=o);for(var r=0;r<this.node.children.length;r++){let t=this.node.children[r];t!=e&&(o.put(t),r--)}for(e&&(e.active=!1),r=0;r<n.length;r++){var a=n[r],c=o.get();null==c&&(c=cc.instantiate(e)),c.active=!0,c.parent=this.node,t&&t(c,a,r)}},cc.Component.prototype.log=function(){cc.sys.isMobile?console.log(...arguments):console.log("%c"+(new Date).toLocaleTimeString()+":","border:1px solid green;padding: 5px;",...arguments,this)},cc.Component.prototype.warn=function(){cc.sys.isMobile?console.log(...arguments):console.warn("%c"+(new Date).toLocaleTimeString()+":","border:1px solid orange;padding: 5px;",...arguments,this)},cc.Component.prototype.error=function(){cc.sys.isMobile?console.log(...arguments):console.error("%c"+(new Date).toLocaleTimeString()+":","border:1px solid red;padding: 5px;",...arguments,this)},cc.Component.prototype.getOrAddComponent=function(t){let n=this.getComponent(t);return n||(n=this.addComponent(t)),n},cc._BaseNode.prototype.getOrAddComponent=function(t){let n=this.getComponent(t);return n||(n=this.addComponent(t)),n},cc.Animation.prototype.stepTo=function(t,n){let e=this.play(n);e&&(this.setCurrentTime(e.duration*t,n),e.step())},cc.warnID=function(){},_G&&(_G.g=g);