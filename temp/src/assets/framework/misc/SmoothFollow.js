cc.SmoothFollow=cc.Class({name:"cc.SmoothFollow",extends:cc.Action,ctor:function(t,o,e){this._followedNode=null,this._boundarySet=!1,this._boundaryFullyCovered=!1,this._halfScreenSize=null,this._fullScreenSize=null,this.leftBoundary=0,this.rightBoundary=0,this.topBoundary=0,this.bottomBoundary=0,this._worldRect=cc.rect(0,0,0,0),this.moveSpeed=0,t&&(o?this.initWithTarget(t,o,e):this.initWithTarget(t,e))},clone:function(){var t=new cc.Follow,o=this._worldRect,e=new cc.Rect(o.x,o.y,o.width,o.height);return t.initWithTarget(this.moveSpeed,this._followedNode,e),t},isBoundarySet:function(){return this._boundarySet},setBoudarySet:function(t){this._boundarySet=t},initWithTarget:function(t,o,e){if(!t)return cc.errorID(1022),!1;this.moveSpeed=e||.05,o=o||cc.rect(0,0,0,0),this._followedNode=t,this._worldRect=o,this._boundarySet=!(0===o.width&&0===o.height),this._boundaryFullyCovered=!1;var i=cc.winSize;return this._fullScreenSize=cc.v2(i.width,i.height),this._halfScreenSize=this._fullScreenSize.mul(.5),this._boundarySet&&(this.leftBoundary=-(o.x+o.width-this._fullScreenSize.x),this.rightBoundary=-o.x,this.topBoundary=-o.y,this.bottomBoundary=-(o.y+o.height-this._fullScreenSize.y),this.rightBoundary<this.leftBoundary&&(this.rightBoundary=this.leftBoundary=(this.leftBoundary+this.rightBoundary)/2),this.topBoundary<this.bottomBoundary&&(this.topBoundary=this.bottomBoundary=(this.topBoundary+this.bottomBoundary)/2),this.topBoundary===this.bottomBoundary&&this.leftBoundary===this.rightBoundary&&(this._boundaryFullyCovered=!0)),!0},step:function(){var t=this.target.convertToWorldSpaceAR(cc.Vec2.ZERO),o=this._followedNode.convertToWorldSpaceAR(cc.Vec2.ZERO),e=t.sub(o),i=this.target.parent.convertToNodeSpaceAR(e.add(this._halfScreenSize));let r;if(this._boundarySet){if(this._boundaryFullyCovered)return;r=cc.v2(cc.misc.clampf(i.x,this.leftBoundary,this.rightBoundary),cc.misc.clampf(i.y,this.bottomBoundary,this.topBoundary))}else r=cc.v2(i.x,i.y);let h=cc.Vec2.ZERO,n=this.target.position;(h=r.sub(n)).mag()>1&&(h.mulSelf(this.moveSpeed),n.addSelf(h),this.target.setPosition(n))},isDone:function(){return!this._followedNode.activeInHierarchy},stop:function(){this.target=null,cc.Action.prototype.stop.call(this)}}),cc.smoothFollow=function(t,o,e){return new cc.SmoothFollow(t,o,e)};