window.__require=function e(t,o,n){function i(c,a){if(!o[c]){if(!t[c]){var s=c.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var u=o[c]={exports:{}};t[c][0].call(u.exports,function(e){return i(t[c][1][e]||e)},u,u.exports,e,t,o,n)}return o[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<n.length;c++)i(n[c]);return i}({AIEnemy:[function(e,t,o){"use strict";cc._RF.push(t,"425a3RrnxpLRqOxZzJgmSVB","AIEnemy");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c,a,s=e("../../framework/core/FSM"),l=e("./Role"),u=e("../../framework/core/event"),h=e("./SkeletonBase"),f=e("../../framework/misc/Device"),p=e("./RemoveOutOfView"),d=e("./Bomb"),y=e("./BombTooltip"),v=e("./Game"),_=cc._decorator,m=_.ccclass,g=_.property;(function(e){e[e.Idle=0]="Idle",e[e.Seek=1]="Seek",e[e.Judge=2]="Judge",e[e.Detected=3]="Detected",e[e.Chase=4]="Chase",e[e.Catch=5]="Catch",e[e.Freezed=6]="Freezed",e[e.LoseTarget=7]="LoseTarget",e[e.Dead=8]="Dead"})(c||(c={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right"}(a||(a={}));var w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.faceDir=a.Right,t._dir=1,t.baseScale=0,t.speed=1,t.detected_audio=null,t.audio_bite=null,t.audio_catched=null,t.audio_seek=null,t.anim=null,t.audio_dead=null,t.audio_walk=null,t.audio_question=null,t.dead_with_fall=!1,t.bombTooltip=null,t._catchedRole=null,t}var o;return i(t,e),o=t,Object.defineProperty(t.prototype,"dir",{get:function(){return this._dir},set:function(e){this._dir=e;var t=1;this.faceDir==a.Left&&(t=-1),this.bombTooltip&&(this.bombTooltip.dir=e),this.node.scaleX=this.baseScale*e*t},enumerable:!1,configurable:!0}),t.prototype.start=function(){o.allEnemies.push(this),this.fsm=this.addComponent(s.default),this.fsm.init(this,c),u.evt.on("Game.keyMoved",this.onKeyMove,this),u.evt.on("Game.bomb",this.goDead,this),this.fsm.enterState(c.Seek),this.baseScale=this.node.scale,this.collider=this.getComponent(cc.PhysicsCollider),this.faceDir==a.Left&&(this._dir=-1),this.addComponent(p.default),this.anim=this.getComponent(cc.Animation),this.loseBomb()},t.prototype.onDestroy=function(){this.bombTooltip&&this.bombTooltip.node&&this.bombTooltip.node.destroy(),u.evt.off(this);var e=o.allEnemies.indexOf(this);o.allEnemies.splice(e,1),this.removeBomb()},Object.defineProperty(t.prototype,"enableCollide",{set:function(e){this.collider.enabled=e,this.collider.sensor=!e,this.fsm.enabled=e,this.fsm.pause()},enumerable:!1,configurable:!0}),t.prototype.removeBomb=function(){this.bombTooltip&&this.bombTooltip.node&&(this.bombTooltip.node.active=!1),cc.isValid(this.bomb)&&this.bomb.node.destroy()},t.prototype.onEnter_Seek=function(e){this.speed=1,e.setInterval(.5,this.seek_l_r,this),e.setInterval(2,this.needHavaRest,this),this.playAnim("walk"),this.audio_walk&&(e.audio=f.default.playEffect(this.audio_walk,!0))},t.prototype.onExit_Seek=function(e){f.default.stopEffect(e.audio)},t.prototype.onKeyMove=function(){(this.fsm.isInState(c.Seek)||this.fsm.isInState(c.Idle))&&this.fsm.changeState(c.Judge)},t.prototype.seek_l_r=function(){v.default.instance.isOver||this.raycast(this.dir)||this.raycast(-this.dir)},t.prototype.onEnter_Judge=function(){this.playAnim("idle"),this.raycast()||(this.dir=-this.dir,this.raycast())},t.prototype.onUpdate_Judge=function(){this.fsm.timeElapsed>.5&&this.fsm.changeState(c.Seek)},t.prototype.onExit_Judge=function(){console.log("\u9009\u62e9\u65b9\u5411"),this.dir=-this.dir},t.prototype.checkIsWall=function(e,t){void 0===e&&(e=100),void 0===t&&(t=this.dir);var o=this.worldCenter(),n=cc.v2(o.x+t*e,o.y),i=this._world.rayCast(o,n,cc.RayCastType.Closest)[0];if(i){var r=i.collider.node.group;if("wall"==r||"pin"==r)return!0}return!1},t.prototype.raycast=function(e){e=e||this.dir;var t=this.worldCenter(),o=cc.v2(t.x+800*this.dir,t.y),n=this._world.rayCast(t,o,cc.RayCastType.Closest);for(var i in n){var r=n[i].collider.getComponent(l.default);if(r)return this.fsm.changeState(c.Detected),r.beDetected(this),this._dectedRole=r,!0}return!1},t.prototype.needHavaRest=function(){Math.random()<.5&&(this.fsm.changeState(c.Idle),this.audio_seek&&f.default.playEffect(this.audio_seek))},t.prototype.onEnter_Idle=function(){this.speed=0,this.playAnim("idle")},t.prototype.onUpdate_Idle=function(){this.fsm.timeElapsed>1&&this.fsm.revertState()},t.prototype.go_frozen=function(){this.fsm.changeState(c.Freezed)},t.prototype.exit_frozen=function(){this.fsm.changeState(c.Judge)},t.prototype.onEnter_Freezed=function(){this.skeleton.timeScale=0},t.prototype.onExit_Freezed=function(){this.skeleton.timeScale=1},t.prototype.onUpdate_Seek=function(){this.move()},t.prototype.onEnter_Detected=function(){this.anim.play("inform"),this.detected_audio&&f.default.playEffect(this.detected_audio,!1)},t.prototype.onUpdate_Detected=function(){this.fsm.timeElapsed>.3&&this.fsm.changeState(c.Chase)},t.prototype.onExit_Detected=function(e){f.default.stopSfx(e.sfx)},t.prototype.onEnter_Chase=function(){this.playAnim("pursue"),this.audio_walk&&f.default.playEffect(this.audio_walk),this._dectedRole&&(this.dir=this._dectedRole.node.x<this.node.x?-1:1),this.speed=2,this.armature.animation.timeScale=2},t.prototype.onUpdate_Chase=function(){this.move(),this.fsm.timeElapsed>2.5&&this.fsm.changeState(c.LoseTarget)},t.prototype.onEnter_LoseTarget=function(){console.log("\u76ee\u6807\u4e22\u5931!"),this.anim.play("question"),this.audio_question&&f.default.playEffect(this.audio_question),u.evt.emit("Game.loseTarget",this)},t.prototype.onUpdate_LoseTarget=function(){this.fsm.timeElapsed>0&&this.fsm.changeState(c.Seek)},t.prototype.onExit_LoseTarget=function(){this.dir*=-1,this.armature.animation.timeScale=1},t.prototype.onEnter_Catch=function(e,t){u.evt.emit("Game.catch",t),this.playAnim("idle"),this.audio_catched&&f.default.playEffect(this.audio_catched,!1),this._catchedRole&&(this.dir=this._catchedRole.node.x<this.node.x?-1:1)},t.prototype.bite=function(){this.fadeIn("bite",2),this.audio_bite&&f.default.playEffect(this.audio_bite,!1)},t.prototype.onUpdate_Catch=function(){},t.prototype.onBeginContact=function(e,t,o){if(!(this.collider&&0==this.collider.enabled||this.fsm.isInState(c.Freezed)||v.default.instance.isOver)){var n=o.node.group;if("role"==n){if(this.isDead())return;return this._catchedRole=o.getComponent(l.default),void this.fsm.changeState(c.Catch,"role")}if("target"!=n){if("bomb"==n){if(e.disabled=!0,this.isDead())return;if("badman"==this.node.name){var i=o.getComponent(d.default);return void this.getBomb(i)}}else if("spike"==n){if(f.default.playSfx("arrow_hit_body"),this.isDead())return;return void this.goDead()}var r=e.getWorldManifold();r.normal.x>=.98?this.dir=-1:r.normal.x<=-.98&&(this.dir=1)}else{if(this.isDead())return;this.fsm.changeState(c.Catch,"target")}}},t.prototype.getBomb=function(e){this.bomb||e.holder||(this.bomb=e,e.holder=this.node,e.hide(),this.handSlot.displayIndex=0,this.bombTooltip&&(this.bombTooltip.bomb=e))},t.prototype.loseBomb=function(){if(this.handSlot&&(this.handSlot.displayIndex=-1),this.bombTooltip&&(this.bombTooltip.bomb=null),cc.isValid(this.bomb)){if(this.bomb.isExploded)return;var e=this.node.position;e.y+=100,this.bomb.drop(e),this.bomb.holder=null,this.bomb=null}},t.prototype.move=function(){var e=this.body.linearVelocity;this.body.linearVelocity=cc.v2(this.dir*this.speed*150,e.y)},t.prototype.onEnter_Dead=function(){},t.prototype.onUpdate_Dead=function(){},t.prototype.removeSelf=function(){this.node.destroy()},t.prototype.goDead=function(e){void 0===e&&(e="dead"),"dead"!=e&&(this.armature.animation.hasAnimation(e)||(e="dead")),this.playAnim(e,1),this.audio_dead&&f.default.playEffect(this.audio_dead),this.dead_with_fall?(this.fsm.changeState(c.Dead),this.body.gravityScale=10,this.body.linearDamping=0,this.body.linearVelocity=cc.v2(0,1e3),this.body.angularVelocity=1500,this.collider.enabled=!1):(this.fsm.changeState(c.Dead),this.scheduleOnce(this.removeSelf,1.5)),this.loseBomb(),u.evt.emit("Game.enemyDead",this)},t.prototype.isDead=function(){return this.fsm.isInState(c.Dead)},t.allEnemies=[],r([g({type:cc.Enum(a)})],t.prototype,"faceDir",void 0),r([g],t.prototype,"_dir",void 0),r([g(cc.AudioClip)],t.prototype,"detected_audio",void 0),r([g(cc.AudioClip)],t.prototype,"audio_bite",void 0),r([g(cc.AudioClip)],t.prototype,"audio_catched",void 0),r([g(cc.AudioClip)],t.prototype,"audio_seek",void 0),r([g(cc.AudioClip)],t.prototype,"audio_dead",void 0),r([g(cc.AudioClip)],t.prototype,"audio_walk",void 0),r([g(cc.AudioClip)],t.prototype,"audio_question",void 0),r([g],t.prototype,"dead_with_fall",void 0),r([g(y.default)],t.prototype,"bombTooltip",void 0),o=r([m],t)}(h.default);o.default=w,cc._RF.pop()},{"../../framework/core/FSM":"FSM","../../framework/core/event":"event","../../framework/misc/Device":"Device","./Bomb":"Bomb","./BombTooltip":"BombTooltip","./Game":"Game","./RemoveOutOfView":"RemoveOutOfView","./Role":"Role","./SkeletonBase":"SkeletonBase"}],ArrowMachine:[function(e,t,o){"use strict";cc._RF.push(t,"f2cd9nhkCtFw5Q8WNck+sNk","ArrowMachine");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./KeyToggle"),a=e("./Arrow"),s=e("../../framework/misc/Device"),l=cc._decorator,u=l.ccclass,h=l.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.keyActivator=null,t.wood=null,t.arrows=[],t._activated=!1,t}return i(t,e),t.prototype.onLoad=function(){this.arrows=this.getComponentsInChildren(a.default),this.wood=this.node.getChildByName("wood")},t.prototype.start=function(){this.keyActivator.onToggleSwitched.add(this.onToggleSwitched,this)},t.prototype.onDestroy=function(){this.keyActivator.onToggleSwitched&&this.keyActivator.onToggleSwitched.off(this.onToggleSwitched,this)},t.prototype.onToggleSwitched=function(){this.keyActivator.isOpen&&this.activate()},t.prototype.activate=function(){this._activated||(this._activated=!0,this.arrows.forEach(function(e){return e.go()}),s.default.playSfx("arrow_launch"),cc.tween(this.wood).to(1,{opacity:0}).start())},r([h({type:c.default,displayName:"\u89e6\u53d1\u7684\u94a5\u5319"})],t.prototype,"keyActivator",void 0),r([u],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../framework/misc/Device":"Device","./Arrow":"Arrow","./KeyToggle":"KeyToggle"}],Arrow:[function(e,t,o){"use strict";cc._RF.push(t,"4672eLYLCdHurz5iOTsLGL0","Arrow");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./RemoveOutOfView"),a=e("./AIEnemy"),s=e("./Role"),l=e("../../framework/misc/Device"),u=e("./Target"),h=e("./Ballon"),f=cc._decorator,p=f.ccclass,d=(f.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.speed=1500,t._isMoving=!1,t._vel=cc.v2(),t}return i(t,e),t.prototype.onLoad=function(){this.body=this.getComponent(cc.RigidBody),this.addComponent(c.default).usingWorldSpace=!0},t.prototype.start=function(){},t.prototype.go=function(){this._isMoving=!0;var e=this.node.angle*cc.macro.RAD;this._vel=cc.v2(Math.cos(e),Math.sin(e)),this._vel.mulSelf(this.speed)},t.prototype.stop=function(){this._isMoving=!1,this.body.linearVelocity=cc.v2(0,0)},t.prototype.stopWithInetia=function(e){void 0===e&&(e=.9),this._vel.mulSelf(e)},t.prototype.update=function(){this._isMoving&&(this.body.linearVelocity=this._vel)},t.prototype.fadeAfter=function(e,t){var o=this;void 0===e&&(e=.5),void 0===t&&(t=.6),cc.tween(this.node).delay(e).to(t,{opacity:0}).call(function(){return o.node.destroy()}).start()},t.prototype.onBeginContact=function(e,t,o){console.log(o.name);var n=o.node.group;if("wall"==n||"pin"==n)l.default.playSfx("arrow_hit"),this.stop(),this.fadeAfter();else if("enemy"==n){var i=o.getComponent(a.default);i.isDead()||(l.default.playSfx("arrow_hit_body"),i.goDead())}else if("role"==n){var r=o.getComponent(s.default);l.default.playSfx("arrow_hit_body"),r.goDead()}else if("target"==n){var c=o.getComponent(u.default);l.default.playSfx("arrow_hit_body"),this.stopWithInetia(.1),this.schedule(this.stop,.3),c.goDead()}else"ballon"==n&&o.getComponent(h.default).goDead()},r([p],t)}(cc.Component));o.default=d,cc._RF.pop()},{"../../framework/misc/Device":"Device","./AIEnemy":"AIEnemy","./Ballon":"Ballon","./RemoveOutOfView":"RemoveOutOfView","./Role":"Role","./Target":"Target"}],AutoLabour:[function(e,t,o){"use strict";cc._RF.push(t,"4e3f0RaDhxIubqRxrKSav/2","AutoLabour");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Common/Base/PlayerInfo"),c=e("../Main"),a=e("../../../framework/extension/buffs/Buff"),s=e("../../../framework/extension/buffs/BuffSystem"),l=function(e){function t(){return e.call(this)||this}return i(t,e),t.prototype.onTimeLeftChanged=function(){},t.prototype.onEnabled=function(){r.PlayerInfo.buff_labour=this.timeLeft,c.default.instance.daojishi&&(c.default.instance.daojishi.active=!0)},t.prototype.onDisabled=function(){r.PlayerInfo.labour+=1,r.PlayerInfo.labour<csv.Config.Max_Energy?s.buffSystem.startBuff("AutoLabour",60*csv.Config.LabourRecoveryTime):c.default.instance.daojishi&&(c.default.instance.daojishi.active=!1),r.PlayerInfo.save("labour")},t.prototype.step=function(){r.PlayerInfo.buff_labour=this.timeLeft,c.default.instance.label_timeLeft&&(c.default.instance.label_timeLeft.string=new Date(1e3*r.PlayerInfo.buff_labour).format("mm:ss"))},t}(a.default);o.default=l,cc._RF.pop()},{"../../../framework/extension/buffs/Buff":"Buff","../../../framework/extension/buffs/BuffSystem":"BuffSystem","../Common/Base/PlayerInfo":"PlayerInfo","../Main":"Main"}],AutoSwitch:[function(e,t,o){"use strict";cc._RF.push(t,"43be6tov0ZPHKS4hB5GBpDY","AutoSwitch");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./Switcher"),a=e("../../core/Signal"),s=cc._decorator,l=s.ccclass,u=s.property,h=s.menu,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.switcher=null,t.interval=1,t.onFinish=new a.default,t.loop=!1,t.isPlaying=!1,t.c=0,t}return i(t,e),t.prototype.onLoad=function(){this.switcher=this.getComponent(c.default),this.isPlaying=!1},t.prototype.play=function(e){return void 0===e&&(e=0),this.isPlaying=!0,this.interval=e||this.interval,this.c=0,this.switch(),this.stop(),this.schedule(this.switch,this.interval),this.onFinish.wait()},t.prototype.stop=function(){this.unschedule(this.switch)},t.prototype.switch=function(){this.switcher.switch(),this.c++,this.loop||this.c>=this.switcher._childrenCount&&(this.unschedule(this.switch),this.isPlaying=!1,this.onFinish.fire())},r([u],t.prototype,"interval",void 0),r([u],t.prototype,"loop",void 0),r([l,h("Controller/AutoSwitch")],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../core/Signal":"Signal","./Switcher":"Switcher"}],BKTool:[function(e,t,o){"use strict";cc._RF.push(t,"313f56eFUNNW6GE0RObNSkH","BKTool"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.PUIN="2896237320",e.headUrl="",e.nickName="",e.videoAd=void 0,e.bannerAd=void 0,e.videoAdLoadCount=0,e.viewAdLoadCount=0,e.bannerAdLoadCount=0,e}(),i=function(){function e(){}return e.skipGame=function(e){BK.QQ.skipGame(e,"IJPay")},e.versionCompare=function(e,t){return(e=parseInt(e.replace(/\./g,"").substring(0,3)))>=parseInt(t.replace(/\./g,"").substring(0,3))},e.shareToArk=function(){BK.Share.share({qqImgUrl:"http://hudong.qq.com/docs/engine/img/848B76B5530AA7EE7B38E9A1267D7086.png",isToFriend:!0,summary:"\u5355\u6e20\u9053\u5206\u4eab-By Javen",extendInfo:"IJPay",success:function(e){console.log("\u5206\u4eab\u6210\u529f",e.code,JSON.stringify(e.data))},fail:function(e){console.log("\u5206\u4eab\u5931\u8d25",e.code,JSON.stringify(e.msg))},complete:function(){console.log("\u5206\u4eab\u5b8c\u6210\uff0c\b\u4e0d\u8bba\u6210\u529f\u5931\u8d25")}})},e.share=function(e){BK.Share.share({qqImgUrl:"http://hudong.qq.com/docs/engine/img/848B76B5530AA7EE7B38E9A1267D7086.png",socialPicPath:"GameRes://qrcode.png",title:"\u6d4b\u8bd5\u8f7b\u6e38\u620f",summary:"\u591a\u6e20\u9053\u5206\u4eab-By Javen",extendInfo:"IJPay",success:function(t){console.log("\u5206\u4eab\u6210\u529f",t.code,JSON.stringify(t.data)),0==t.data.ret?e&&e("success",t.data):e&&e("fail",t.data)},fail:function(t){console.log("\u5206\u4eab\u5931\u8d25",t.code,JSON.stringify(t.msg)),e&&e("fail")},complete:function(){console.log("\u5206\u4eab\u5b8c\u6210\uff0c\b\u4e0d\u8bba\u6210\u529f\u5931\u8d25")}})},e.shareLink=function(){BK.Share.share({qqImgUrl:"http://hudong.qq.com/docs/engine/img/848B76B5530AA7EE7B38E9A1267D7086.png",msgUrl:"https://gitee.com/javen205/Brickengine_Guide?",title:"\u6d4b\u8bd5\u8f7b\u6e38\u620f",summary:"H5\u94fe\u63a5\u5206\u4eab-By Javen"})},e.screenShotShare=function(){var e=BK.Director.screenPixelSize,t=e.width,o=e.height;BK.Share.share({range:{x:t/2,y:o/2,width:t,height:o},qqImgUrl:"",title:"\u6d4b\u8bd5\u8f7b\u6e38\u620f",summary:"\u622a\u56fe\u5206\u4eab-By Javen",extendInfo:"IJPay",success:function(e){console.log("\u5206\u4eab\u6210\u529f",e.code,JSON.stringify(e.data))},fail:function(e){console.log("\u5206\u4eab\u5931\u8d25",e.code,JSON.stringify(e.msg))},complete:function(){console.log("\u5206\u4eab\u5b8c\u6210,\u4e0d\u8bba\u6210\u529f\u5931\u8d25")}})},e.follow=function(){console.log("Global.PUIN>"+n.PUIN),BK.QQ.enterPubAccountCard(n.PUIN)},e.getNick=function(){return n.nickName},e.createShortCut=function(){BK.QQ.createShortCut("")},e.getHead=function(){return n.headUrl},e.prototype.openUrl=function(e){BK.MQQ.Webview.open(e)},e.prototype.saveGameData=function(e){return new Promise(function(t){BK.QQ.saveGameData(e,function(e,o,n){BK.Console.log(1,1,"saveGameData : "+e+", "+o+", "+n),t({errCode:e,cmd:o,data:n})})})},e.prototype.loadGameData=function(){return new Promise(function(e){BK.QQ.loadGameData(function(t,o,n){BK.Console.log(1,1,"loadGameData : "+t+", "+o+", "+n),e({errCode:t,cmd:o,data:n})})})},e.prototype.sendB2CRedPacket=function(e){return new Promise(function(t){BK.QQ.sendB2CRedPacket(e,function(e,o,n){BK.Script.log(1,1,"sendB2CRedPacket : "+e+", "+o+", "+JSON.stringify(n)),t({errCode:e,cmd:o,data:n})})})},e.login=function(){BK.MQQ.Account.getHead(GameStatusInfo.openId,function(e,t){n.headUrl=t}),BK.MQQ.Account.getNick(GameStatusInfo.openId,function(e,t){n.nickName=t})},e.test=function(){var e=GameStatusInfo.openId;console.log("openId:",e);var t=BK.getSystemInfoSync();BK.Console.log("\u6e38\u620f\u7248\u672c\u53f7:"+t.gameVersion),BK.Console.log("\u662f\u5426\u623f\u4e3b:"+t.isMaster),BK.Console.log("\u623f\u95f4\u53f7:"+t.roomId),BK.Console.log("\u7cfb\u7edf\u7248\u672c:"+t.osVersion),BK.Console.log("\u7f51\u7edc\u7c7b\u578b:"+t.networkType),BK.Console.log("\u5e73\u53f0:"+t.platform),BK.Console.log("\u5f53\u524d\u7528\u6237\u7684\u6807\u8bc6:"+t.openId),BK.Console.log("\u624b\u673aqq\u7248\u672c:"+t.QQVer),BK.Console.log("\u662f\u5426\u9996\u6b21\u5b89\u88c5:"+t.isFirstInstall),BK.Console.log("\u5f53\u524d\u804a\u5929\u7a97\u7c7b\u578b:"+t.aioType),BK.Console.log("\u6e38\u620f\u542f\u52a8\u5165\u53e3:"+t.src),BK.Console.log("\u662f\u5426\u4e3a\u7ba1\u7406\u8d26\u53f7:"+t.isWhiteUser),BK.Console.log("\u6e38\u620f\u7c7b\u578b:"+t.gameType),BK.Console.log("\u5177\u4f53\u673a\u578b:"+t.model),BK.Console.log("\u6027\u522b:"+t.sex)},e.uploadScore=function(e,t){var o={userData:[{openId:GameStatusInfo.openId,startMs:((new Date).getTime()-3e5).toString(),endMs:(new Date).getTime().toString(),scoreInfo:{score:e}}],attr:{score:{type:"rank",order:1}}};BK.QQ.uploadScoreWithoutRoom(1,o,function(e,o,n){console.log("-------------uploadScoreWithoutRoom callback  cmd"+o+" errCode:"+e+"  data:"+JSON.stringify(n)),t&&t(e,n)})},e.getRankList=function(e){BK.QQ.getRankListWithoutRoom("score",1,0,function(t,o,n){if(console.log("--------------------getRankListWithoutRoom callback  cmd"+o+" errCode:"+t),0==t){if(n){var i=n.data.ranking_list;console.log("=====data not null "+i.length),console.log(JSON.stringify(n)),e&&e(t,i)}}else e&&e(t)})},e.loadVideoAd=function(t){console.log("============BKTOOl.loadVideoAD",n.videoAd);var o=BK.Advertisement.createVideoAd();o.onError(function(o){console.log(">>>>>>>>>BKTools onError code:"+o.code+" msg:"+o.msg),n.viewAdLoadCount+=1,n.viewAdLoadCount<4&&e.loadVideoAd(t),t&&t("error")}),o.onPlayFinish(function(){console.log("BKTools onPlayFinish..."),n.videoAd=void 0,t&&t("finish")}),o.onClose(function(){console.log("BKTools onClose..."),t&&t("close"),n.videoAd=void 0}),o.onLoad(function(){console.log("BKTools onLoad"),n.videoAd=o,n.videoAdLoadCount=0,t&&t("load",o)})},e.loadBannerAd=function(t,o){if(!o){var i=BK.getSystemInfoSync().QQVer;console.log("\u5f53\u524d\u624bQ\u7248\u672c:"+i);var r=e.versionCompare(i,"7.8.5");console.log("\u5f53\u524d\u7248\u672c\u5927\u4e8e7.8.5:"+r),o=r?1003:1002}console.log("loadBannerAd viewId:"+o);var c=BK.Advertisement.createBannerAd({viewId:o});c.onError(function(i){console.log("BKTools onError code:"+i.code+" msg:"+i.msg),n.bannerAdLoadCount+=1,n.bannerAdLoadCount<4&&e.loadBannerAd(t,o),t&&t("error")}),c.onLoad(function(){console.log("BKTools onLoad"),n.bannerAd=c,n.viewAdLoadCount=0,t&&t("load",c)})},e.showBannerAd=function(){console.log("BKTools \u663e\u793abanner\u5e7f\u544a"),n.bannerAd?n.bannerAd.show():(console.log("BKTools \u4e0d\u5b58\u5728banner\u8d44\u6e90...."),e.loadBannerAd(function(t){"load"==t&&e.showBannerAd()}))},e.hideBannerAd=function(){n.bannerAd?(n.bannerAd.hide(),n.bannerAd=void 0):console.log("BKTools \u4e0d\u5b58\u5728banner\u8d44\u6e90\u65e0\u6cd5\u5173\u95ed....")},e.showToast=function(e,t){t||(t=3e3),cc.sys.platform==cc.sys.QQ_PLAY&&BK.UI.showToast({title:e,duration:t,complete:function(){console.log("BKTools showToast complete:"+e)}})},e.keepScreenOn=function(){BK.Device.keepScreenOn({isKeepOn:!0})},e.cancelKeepScreenOn=function(){BK.Device.keepScreenOn({isKeepOn:!1})},e}();o.default=i,cc._RF.pop()},{}],BallSkill:[function(e,t,o){"use strict";cc._RF.push(t,"9bbd3+AyDRLnYjo4lZsYKNC","BallSkill");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../framework/extension/movement/MoveEngine"),a=e("./EnemyBallUp"),s=cc._decorator,l=s.ccclass,u=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.target=null,t.moveEngine=null,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){this.moveEngine=this.addComponent(c.default),this.moveEngine.maxSpeed=25},t.prototype.update=function(){if(cc.isValid(this.target)){var e=this.target.position,t=this.moveEngine.seek(e);this.moveEngine.applyForce(t),e.subSelf(this.node.position).magSqr()<100&&(this.target.getOrAddComponent(a.default),this.node.destroy())}},t.prototype.trigger=function(e){this.target=e},r([l],t)}(cc.Component));o.default=u,cc._RF.pop()},{"../../framework/extension/movement/MoveEngine":"MoveEngine","./EnemyBallUp":"EnemyBallUp"}],Ballon:[function(e,t,o){"use strict";cc._RF.push(t,"358f1qIG4JC3oIJ6SV8FVQO","Ballon");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./SkeletonBase"),a=e("./RemoveOutOfView"),s=e("../../framework/misc/Device"),l=e("../../framework/core/event"),u=cc._decorator,h=u.ccclass,f=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._fly=!1,t._dead=!1,t}return i(t,e),t.prototype.start=function(){this.armature.animation.timeScale=.5,this.collider=this.getComponent(cc.PhysicsCollider),this.addComponent(a.default)},t.prototype.flyAway=function(e){var t=this;s.default.playSfx("ballon_flyaway"),this.node.active=!0,this.collider.enabled=!1,e&&this.scheduleOnce(function(){t.node.position=e},0),this.skeleton.playAnimation("up",0),this._fly=!0},t.prototype.update=function(){this._fly&&(this.body.linearVelocity=cc.v2(0,180))},t.prototype.onDestroy=function(){l.evt.emit("Game.boollonDes")},t.prototype.isDead=function(){return this._dead},t.prototype.goDead=function(){this._dead||(this._dead=!0,s.default.playSfx("ballon_bomb"),this.skeleton.timeScale=1,this.stopAnim(),this.playAnim("dead",1),this.scheduleOnce(this.dispose,1))},t.prototype.dispose=function(){this.node.destroy()},r([h],t)}(c.default));o.default=f,cc._RF.pop()},{"../../framework/core/event":"event","../../framework/misc/Device":"Device","./RemoveOutOfView":"RemoveOutOfView","./SkeletonBase":"SkeletonBase"}],BombTooltip:[function(e,t,o){"use strict";cc._RF.push(t,"808ccyb329AArUN9k5jByHr","BombTooltip");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.baseScale=0,t}return i(t,e),t.prototype.onLoad=function(){this.baseScale=this.node.scaleX},Object.defineProperty(t.prototype,"dir",{set:function(e){this.node.scaleX=e*this.baseScale},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bomb",{set:function(e){e?(this.node.active=!0,e.onTimeLeftChanged.on(this.onTimeLeft,this),this.bombRef=e,this.label.string=e.timeLeft+""):(this.bombRef&&this.bombRef.onTimeLeftChanged.off(this.onTimeLeft,this),this.node.active=!1)},enumerable:!1,configurable:!0}),t.prototype.onDestroy=function(){this.bombRef&&this.bombRef.onTimeLeftChanged&&this.bombRef.onTimeLeftChanged.off(this.onTimeLeft,this)},t.prototype.onTimeLeft=function(e){this.label.string=e,e<=0&&(this.node.active=!1,this.bomb=null)},t.prototype.start=function(){},r([s(cc.Label)],t.prototype,"label",void 0),r([a],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],Bomb:[function(e,t,o){"use strict";cc._RF.push(t,"f18b5j+0yhGi51AISgM2sHK","Bomb");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../framework/misc/BoostsAction"),a=e("../../framework/core/event"),s=e("./SkeletonBase"),l=e("../../framework/misc/Device"),u=e("./RemoveOutOfView"),h=e("../../framework/core/Signal"),f=e("./Game"),p=cc._decorator,d=p.ccclass,y=p.property,v=p.executeInEditMode,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t._timeLeft=0,t.onTimeLeftChanged=new h.default,t.bombExplosion=null,t.preExplosion=null,t.node_tooltip=null,t.node_light=null,t.holder=null,t.onece=!0,t.isExploded=!1,t}return i(t,e),Object.defineProperty(t.prototype,"timeLeft",{get:function(){return this._timeLeft},set:function(e){this._timeLeft=e,this.onTimeLeftChanged.fire(e),this.label.string=e.toString()},enumerable:!1,configurable:!0}),t.prototype.onDestroy=function(){a.evt.emit("Game.bombDes"),a.evt.off(this)},t.prototype.start=function(){a.evt.on("Game.onStarted",this.onGameStarted,this),a.evt.on("Game.win",this.onWin,this),a.evt.on("Game.lose",this.onGameLose,this),a.evt.on("Game.pause",this.onGameLose,this),a.evt.on("Game.resume",this.onGameStarted,this),this.label.string=this._timeLeft.toString(),this.preExplosion.on("finished",this.playSecondExplode,this),this.collider=this.getComponent(cc.PhysicsCollider),f.default.instance.isOver||this.schedule(this.countdown,1),this.getOrAddComponent(u.default).onOffScreen.on(this.onOffScreen,this)},t.prototype.onWin=function(){this.unschedule(this.countdown)},t.prototype.onGameLose=function(){this.unschedule(this.countdown)},t.prototype.onGameStarted=function(){this.schedule(this.countdown,1)},t.prototype.onOffScreen=function(){},t.prototype.countdown=function(){this.timeLeft--,this.timeLeft<=3?(this.label.node.color=cc.Color.RED,this.startShake()):(this.label.node.color=cc.Color.WHITE,this.stopShake()),this.timeLeft<=0&&(this.unschedule(this.countdown),this.explode())},Object.defineProperty(t.prototype,"isHiding",{get:function(){return 0==this.node_tooltip.active},enumerable:!1,configurable:!0}),t.prototype.hide=function(){this.node.stopAllActions(),this.node_tooltip.active=!1;var e=this.getComponent(cc.Sprite);e&&(e.enabled=!1),this.node_light.active=!1},t.prototype.show=function(){this.node_tooltip.active=!0;var e=this.getComponent(cc.Sprite);e&&(e.enabled=!0),this.node_light.active=!0},t.prototype.goAway=function(e){this.collider.enabled=!1,this.unschedule(this.countdown),this.stopShake(),this.body.linearDamping=0,this.body.linearVelocity=cc.v2(1e3*e,1e3)},t.prototype.startShake=function(){this.shakeAction||(this.shakeAction=this.node.runAction(c.Shake.create(3,2,0)))},t.prototype.stopShake=function(){this.node.stopAction(this.shakeAction),this.shakeAction=null},t.prototype.drop=function(e){this.show(),this.scheduleOnce(this.doDrop.bind(this,e))},t.prototype.doDrop=function(e){this.node.setPosition(e),this.body.gravityScale=10,this.body.linearDamping=0,this.body.linearVelocity=cc.v2(0,1e3)},t.prototype.explode=function(){this.isExploded=!0,this.bombExplosion&&(this.getComponent(cc.Sprite).enabled=!1,this.node_tooltip.active=!1,this.node_light.active=!1,cc.isValid(this.holder)&&(this.node.position=this.holder.position),this.preExplosion.play("pre_explode"))},t.prototype.playSecondExplode=function(){this.onece&&(this.onece=!1,this.bombExplosion.play("explode"),this.preExplosion.play("pre_explode2"),l.default.playSfx("bomb_explode"),cc.Camera.main.node.runAction(cc.sequence(c.Shake.create(.5,5,5),cc.callFunc(this.loseGame,this))),a.evt.emit("Game.bomb"))},t.prototype.loseGame=function(){this.node&&this.node.destroy(),a.evt.emit("Game.lose")},t.prototype.update=function(){0!=this.body.linearVelocity.y&&this.node.stopAllActions()},r([y(cc.Label)],t.prototype,"label",void 0),r([y({displayName:"\u5269\u4f59\u65f6\u95f4"})],t.prototype,"_timeLeft",void 0),r([y],t.prototype,"timeLeft",null),r([y(cc.Animation)],t.prototype,"bombExplosion",void 0),r([y(cc.Animation)],t.prototype,"preExplosion",void 0),r([y(cc.Node)],t.prototype,"node_tooltip",void 0),r([y(cc.Node)],t.prototype,"node_light",void 0),r([d,v],t)}(s.default);o.default=_,cc._RF.pop()},{"../../framework/core/Signal":"Signal","../../framework/core/event":"event","../../framework/misc/BoostsAction":"BoostsAction","../../framework/misc/Device":"Device","./Game":"Game","./RemoveOutOfView":"RemoveOutOfView","./SkeletonBase":"SkeletonBase"}],BoostsAction:[function(e,t,o){"use strict";cc._RF.push(t,"47da3PXgqdE55aSvY0ox9B4","BoostsAction");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.changeTo=o.Shake=o.V2ChangeAction=o.ValueChangeAction=void 0;var r=function(e){function t(t,o,n,i,r){var c=e.call(this)||this;return c.delta=c.sub(n,o),c.setDuration(t),c.callback=i,c.start=o,c.end=n,c.callbackTarget=r,c}return i(t,e),t.prototype.sub=function(e,t){return e-t},t.prototype.add=function(e,t){return e+t},t.prototype.mul=function(e,t){return e*t},t.prototype.update=function(e){e=this._computeEaseTime(e);var t=this.add(this.start,this.mul(this.delta,e));this.callback.call(this.callbackTarget,t)},t.create=function(e,o,n,i,r){return new t(e,o,n,i,r)},t}(cc.ActionInterval);o.ValueChangeAction=r;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.sub=function(e,t){return e.sub(e,t)},t.prototype.add=function(e,t){return e.add(e,t)},t.prototype.mul=function(e,t){return e.mul(e,t)},t}(r);o.V2ChangeAction=c;var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._initial_x=0,t._initial_y=0,t._strength_x=0,t._strength_y=0,t}return i(t,e),t.create=function(e,o,n){var i=new t;return i.initWithDuration(e,o,n),i},t.prototype.initWithDuration=function(e,t,o){return cc.ActionInterval.prototype.initWithDuration.apply(this,arguments),this._strength_x=t,this._strength_y=o,!0},t.prototype.fgRangeRand=function(e,t){return Math.random()*(t-e)+e},t.prototype.update=function(){var e=this.fgRangeRand(-this._strength_x,this._strength_x),t=this.fgRangeRand(-this._strength_y,this._strength_y);this.getTarget().setPosition(e+this._initial_x,t+this._initial_y)},t.prototype.startWithTarget=function(e){cc.ActionInterval.prototype.startWithTarget.apply(this,arguments),this._initial_x=e.x,this._initial_y=e.y},t.prototype.stop=function(){this.getTarget().setPosition(new cc.Vec2(this._initial_x,this._initial_y)),cc.ActionInterval.prototype.stop.apply(this)},t}(cc.ActionInterval);o.Shake=a,o.changeTo=function(e,t,o,n){return r.create(e,t,o,function(e){return n(e)})},cc._RF.pop()},{}],Bounce:[function(e,t,o){"use strict";cc._RF.push(t,"beadecgi5RENYX9UGdR2FgV","Bounce");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/core/Signal"),a=cc._decorator,s=a.ccclass,l=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_bounces=0,t.m_coinVerticalVelocity=0,t.m_vel=cc.v2(0,0),t.timeout=0,t.onFinish=new c.default,t.onBounce=new c.default,t.once=!0,t.bRotate=!1,t.bounceBaseY=0,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.onEnable=function(){this.once=!0,this.m_bounces=0,this.m_coinVerticalVelocity=0,this.m_vel.mulSelf(0)},t.prototype.go=function(e,t,o){this.m_vel.x=e,this.m_vel.y=t,this.bounceBaseY=o},t.prototype.update=function(e){this.m_bounces<3?(this.node.y<this.bounceBaseY&&(this.m_bounces++,this.m_coinVerticalVelocity=-.4*this.m_coinVerticalVelocity,this.node.y=this.bounceBaseY,this.m_vel.x=.5*this.m_vel.x,this.m_vel.y=.1*this.m_vel.y,this.bRotate&&(this.node.angle+=60),this.onBounce.fire(this)),this.node.x+=this.m_vel.x,this.node.y+=this.m_vel.y,this.m_coinVerticalVelocity=this.m_coinVerticalVelocity+100*e,this.node.y-=this.m_coinVerticalVelocity):this.once&&(this.once=!1,this.timeout>0?this.scheduleOnce(this.emitFinish,this.timeout):this.emitFinish())},t.prototype.emitFinish=function(){try{this.onFinish.fire(this)}catch(e){console.error(e)}},r([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../../../framework/core/Signal":"Signal"}],Box:[function(e,t,o){"use strict";cc._RF.push(t,"4c126i1qjBAroThxPAYe8kc","Box");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c},c=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function c(e){try{s(n.next(e))}catch(t){r(t)}}function a(e){try{s(n.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,a)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return s([e,t])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./SkeletonBase"),l=e("../../framework/core/event"),u=e("../../framework/utils/ccUtil"),h=e("../../framework/ui/ToastManager"),f=e("../../framework/misc/Device"),p=cc._decorator,d=p.ccclass,y=p.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani_node=null,t.open_status=!1,t.isover=!1,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.onBeginContact=function(){if("box"==this.node.name){if(this.isover)return;this.isover=!0,this.onOpenBox()}else this.onOpenjiaBox()},t.prototype.onOpenBox=function(){return c(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return this.ani_node.active=!0,[4,l.evt.sleep(1)];case 1:return e.sent(),f.default.playSfx("open-box"),vm.show("Prefabs/UI/UIBoxAward"),[2]}})})},t.prototype.onOpenjiaBox=function(){if(!this.open_status){var e=this.node.getComponent(cc.Sprite);u.default.setDisplay(e,"Img/"+e.spriteFrame.name+"_kong"),this.open_status=!0,h.Toast.make("\u53ef\u60dc\u3002\u3002\u3002\u7bb1\u5b50\u662f\u7a7a\u7684")}},t.prototype.onDestroy=function(){l.evt.off(this)},r([y(cc.Node)],t.prototype,"ani_node",void 0),r([d],t)}(s.default);o.default=v,cc._RF.pop()},{"../../framework/core/event":"event","../../framework/misc/Device":"Device","../../framework/ui/ToastManager":"ToastManager","../../framework/utils/ccUtil":"ccUtil","./SkeletonBase":"SkeletonBase"}],BreathAnim:[function(e,t,o){"use strict";cc._RF.push(t,"c64ecgCUqdJY7vIv+kBf4+Y","BreathAnim");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./EaseType"),a=e("../../misc/PasrTimer"),s=e("./Extension"),l=cc._decorator,u=l.ccclass,h=l.property,f=l.menu,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pasrTimer=null,t.duration=1,t.minScale=cc.v2(),t.maxScale=cc.v2(),t.easeType=c.EaseType.linear,t.tmp_scale=cc.v2(),t}return i(t,e),t.prototype.start=function(){this.pasrTimer=new a.PasrTimer(0,this.duration/2,0,this.duration/2),this.pasrTimer.reset()},t.prototype.update=function(e){var t=this.pasrTimer.Tick(e);t=cc.easing[c.EaseType[this.easeType]](t),this.node.scale=s.lerpVec2(this.tmp_scale,this.maxScale,this.minScale,t),this.pasrTimer.isFinished()&&this.pasrTimer.reset()},r([h],t.prototype,"duration",void 0),r([h(cc.Vec2)],t.prototype,"minScale",void 0),r([h(cc.Vec2)],t.prototype,"maxScale",void 0),r([h({type:cc.Enum(c.EaseType)})],t.prototype,"easeType",void 0),r([u("BreathAnim"),f("\u57fa\u7840\u52a8\u753b/BreathAnim")],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../misc/PasrTimer":"PasrTimer","./EaseType":"EaseType","./Extension":"Extension"}],BuffSystem:[function(e,t,o){"use strict";cc._RF.push(t,"dd6449kM+ZJj6PrSquOOOZI","BuffSystem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.buffSystem=void 0;var c=e("./EmptyBuff"),a=cc._decorator,s=a.ccclass;a.property,o.buffSystem=null;var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buffs={},t}var n;return i(t,e),n=t,t.prototype.onLoad=function(){o.buffSystem=this,this.load()},t.prototype.onEnable=function(){this.schedule(this.step,1)},t.prototype.onDisable=function(){this.unschedule(this.step)},t.prototype.step=function(){var e=Date.now()/1e3;for(var t in this.buffs){var o=this.buffs[t];o.isEnabled&&(o.doStep(e),o.isEnabled||o.disable())}},t.register=function(e,t,o){void 0===o&&(o=null),n.buff_cls[e]=t,n.buff_cls_data[e]=o},t.prototype._create=function(e){var t=n.buff_cls[e];if(null==t)return"string"==typeof e?(console.error("[BuffSystem]:"+e+"\u672a\u6ce8\u518c \uff01"),new c.default):new e;var o=n.buff_cls_data[e],i=new t;return i.name=e,i.data=o,i},t.prototype.getBuff=function(e){var t=this.buffs[e];return t||(t=this._create(e),this.buffs[e]=t),t},t.prototype.startBuff=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var n=this.getBuff(e);return n.isEnabled?n.canAdd?n.addLife(t[0]):n.resetLife():n.enable.apply(n,t),n},t.prototype.stop=function(e){var t=this.getBuff(e);t.isEnabled&&t.disable()},t.prototype.save=function(){for(var e in console.log(this.buffs),this.buffs)this.buffs[e].save();localStorage.setItem("buffSys.lastTime",Date.now().toString())},t.prototype.load=function(){var e,t=localStorage.getItem("buffSys.lastTime");e=null==t||""==t?Date.now():parseInt(t);var o=(Date.now()-e)/1e3;if(!(o<0))for(var i in n.buff_cls){var r=this.getBuff(i);r?(r.load(o),r.recovery()):console.warn("error load buff:"+i)}},t.buff_cls={},t.buff_cls_data={},n=r([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{"./EmptyBuff":"EmptyBuff"}],Buff:[function(e,t,o){"use strict";cc._RF.push(t,"277f8bZ6jxEILrygYg/BjNi","Buff"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=e("../../core/Signal");(function(e){e[e.Start=0]="Start",e[e.End=1]="End",e[e.Update=2]="Update"})(n||(n={}));var r=function(){function e(){var e;this.duration=10,this.finished=!0,this.timeLeft=0,this.name="",this.canAdd=!1,this.maxDuration=0,this.interval=1,this.signals=((e={})[n.Start]=new i.default,e[n.End]=new i.default,e[n.Update]=new i.default,e),this.beganTimeSec=0}return Object.defineProperty(e.prototype,"isEnabled",{get:function(){return this.timeLeft>0},enumerable:!1,configurable:!0}),e.prototype.step=function(){},e.prototype.onRecovery=function(){},e.prototype.onReset=function(){},e.prototype.save=function(){},e.prototype.load=function(){},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.on=function(e,t,o){this.signals[e].add(t,o)},e.prototype.off=function(e,t,o){this.signals[e].remove(t,o)},e.prototype._emit=function(e){for(var t,o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];(t=this.signals[e]).fire.apply(t,o)},e.prototype.addLife=function(e){this.duration+=e,this.timeLeft+=e},e.prototype.recovery=function(){this.timeLeft<=0||(this.duration=this.timeLeft,this.finished=!1,this.beganTimeSec=Date.now()/1e3,this.onRecovery(),this.onTimeLeftChanged(),console.warn("[BuffSystem]\u6062\u590dbuff:["+this.name+"]",this.duration))},e.prototype.resetLife=function(){this.beganTimeSec=Date.now()/1e3,this.finished=!1,this.timeLeft=this.duration,this.onReset()},e.prototype.enable=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];this.duration=parseInt(e)||this.duration,this.resetLife(),this.onEnabled.apply(this,t),this.onTimeLeftChanged(),this._emit(n.Start,this),console.warn("[BuffSystem]\u5f00\u542fbuff:["+this.name+"]",this.duration)},e.prototype.disable=function(){this.finished=!0,this.timeLeft=0;try{this.onDisabled(),this.onTimeLeftChanged()}catch(e){console.warn(e)}this._emit(n.End,this),console.warn("[BuffSystem]\u5173\u95edbuff:["+this.name+"]")},e.prototype.doStep=function(e){this.finished||this.timeLeft>0&&(this.timeLeft=this.duration-(e-this.beganTimeSec),this.step(),this._emit(n.Update,this),this.onTimeLeftChanged())},e.EventType=n,e}();o.default=r,cc._RF.pop()},{"../../core/Signal":"Signal"}],Chain:[function(e,t,o){"use strict";cc._RF.push(t,"93535grvz9AKr3xcwnR7gk7","Chain");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../framework/utils/ccUtil"),a=e("./Common/Base/PlayerInfo"),s=cc._decorator,l=s.ccclass,u=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tielian=null,t.chain_item=null,t.handler=null,t.currentLen=0,t.maxLen=0,t.isMove=!0,t}return i(t,e),t.prototype.onLoad=function(){this.handler.on(cc.Node.EventType.TOUCH_START,this.click,this),this.handler.on(cc.Node.EventType.TOUCH_MOVE,this.click_move,this),this.handler.on(cc.Node.EventType.TOUCH_END,this.over,this),this.handler.on(cc.Node.EventType.TOUCH_CANCEL,this.over,this),this.showCurrent()},t.prototype.start=function(){if(a.PlayerInfo.isPlayingDaily){var e=this.getComponent(cc.Sprite);c.default.setDisplay(e,"/Img/chain/yuan_2")}},t.prototype.showCurrent=function(){var e=this.currentLen-this.tielian.height;this.tielian.height=this.currentLen,this.tielian.y-=e,this.collider=this.tielian.getComponent(cc.PhysicsBoxCollider),this.collider.offset=cc.v2(0,this.maxLen/2),this.collider.size.height=this.maxLen,this.tielian.getComponent(cc.RigidBody).syncPosition(!0)},t.prototype.click=function(){this.isMove=!0},t.prototype.click_move=function(e){var t=e.touch.getDelta();this.tielian.height-t.y<=0||this.tielian.height-t.y>=this.maxLen||(this.tielian.height-=t.y,this.tielian.y+=t.y)},t.prototype.over=function(){},r([u(cc.Node)],t.prototype,"tielian",void 0),r([u(cc.Node)],t.prototype,"chain_item",void 0),r([u(cc.Node)],t.prototype,"handler",void 0),r([u(Number)],t.prototype,"currentLen",void 0),r([u(Number)],t.prototype,"maxLen",void 0),r([l],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../framework/utils/ccUtil":"ccUtil","./Common/Base/PlayerInfo":"PlayerInfo"}],ChapterlInfo:[function(e,t,o){"use strict";cc._RF.push(t,"31f41YK4edMrqza0HFHytb8","ChapterlInfo");var n=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.ChapterlInfo=void 0;var i=cc._decorator,r=i.ccclass,c=(i.property,function(){function e(e){this.id=0,this.name="",this.chapter="",this.title="";var t=csv.Chapter.get(e);if(t){this.id=t.id,this.name=t.name;var o=t.name.split(" ");this.chapter=o[0],this.title=o[1]}}return n([r],e)}());o.ChapterlInfo=c,cc._RF.pop()},{}],ClickAudioManager:[function(e,t,o){"use strict";cc._RF.push(t,"07370C2pxVARaAQdaoGGWKa","ClickAudioManager");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./ClickAudio"),a=cc._decorator,s=a.ccclass,l=a.property,u=a.disallowMultiple,h=a.menu,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.audio=null,t.audio_down=null,t.withSiblings=!0,t.withChildren=!0,t}return i(t,e),t.prototype.onLoad=function(){this.withSiblings&&this.make(this.node.parent),this.withChildren&&this.make(this.node)},t.prototype.make=function(e){e.walk(this.each.bind(this),function(){return 0}),e.on(cc.Node.EventType.CHILD_ADDED,this.onChildAdd,this)},t.prototype.onChildAdd=function(e){e.walk(this.each.bind(this),function(){return 0})},t.prototype.onDestroy=function(){this.node.parent.off(cc.Node.EventType.CHILD_ADDED,this.onChildAdd,this),this.node.off(cc.Node.EventType.CHILD_ADDED,this.onChildAdd,this)},t.prototype.each=function(e){if(e.getComponent(cc.Button)){var t=e.getComponent(c.default);null==t&&((t=e.addComponent(c.default)).audio=this.audio,t.audio_down=this.audio_down)}},t.prototype.start=function(){},r([l(cc.AudioClip)],t.prototype,"audio",void 0),r([l(cc.AudioClip)],t.prototype,"audio_down",void 0),r([l],t.prototype,"withSiblings",void 0),r([l],t.prototype,"withChildren",void 0),r([s,u,h("gamelib/ClickAudioManager")],t)}(cc.Component);o.default=f,cc._RF.pop()},{"./ClickAudio":"ClickAudio"}],ClickAudio:[function(e,t,o){"use strict";cc._RF.push(t,"79f2ailkJpKCb/aXocZslku","ClickAudio");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./Device"),a=cc._decorator,s=a.ccclass,l=a.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.audio=null,t.audio_down=null,t}return i(t,e),t.prototype.onLoad=function(){var e=this;this.node.on("touchstart",function(){c.default.playEffect(e.audio_down,!1)},this.node),this.node.on("touchend",function(){c.default.playEffect(e.audio,!1)}),this.node.on("touchcancel",function(){})},r([l(cc.AudioClip)],t.prototype,"audio",void 0),r([l(cc.AudioClip)],t.prototype,"audio_down",void 0),r([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./Device":"Device"}],CloudFuncTypes:[function(e,t,o){"use strict";cc._RF.push(t,"e295azR1O1IK5Mu54R6GBtP","CloudFuncTypes"),Object.defineProperty(o,"__esModule",{value:!0}),o.CloudFuncType=void 0;var n,i=e("../sdk/wegame");(function(e){e[e.Banner_move=1]="Banner_move",e[e.Energey_LinkWin=2]="Energey_LinkWin",e[e.Energy_Package=3]="Energy_Package",e[e.BannerInGame=4]="BannerInGame",e[e.ShareFail=5]="ShareFail",e[e.Banner_Refresh=6]="Banner_Refresh",e[e.user_OpenDraw=7]="user_OpenDraw",e[e.user_Next_OpenDraw=8]="user_Next_OpenDraw",e[e.Gun_View=9]="Gun_View",e[e.Close_Btn_Show=10]="Close_Btn_Show",e[e.Manual_Egg=11]="Manual_Egg",e[e.interfull_banner=12]="interfull_banner"})(n=o.CloudFuncType||(o.CloudFuncType={})),i.default.registerUI(n.Energey_LinkWin,"Prefabs/UI/UILinkWinReward"),i.default.registerUI(n.Energy_Package,"Prefabs/UI/UIEnergyPackage"),cc._RF.pop()},{"../sdk/wegame":"wegame"}],Cloud:[function(e,t,o){"use strict";cc._RF.push(t,"7c085dP4YRA054yTY9zuuVM","Cloud");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function c(e){try{s(n.next(e))}catch(t){r(t)}}function a(e){try{s(n.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,a)}s((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return s([e,t])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../misc/Net"),c=e("../SDKInterafce"),a=function(){function e(){}return e.getCloudConfig=function(){var e=c.SDKBase.gameConfig;CC_WECHATGAME;var t=new r.default;return CC_WECHATGAME||t.setHeader("Referer","https://servicewechat.com/"+e.appId+"/30/page-frame.html"),new Promise(function(o,n){var i={scene:1001,version:e.version,channel:"",game:e.gameId};t.httpGet(e.cloudUrl,i).then(function(e){if(e){var t=JSON.parse(e);if(0!=t.errno)return void n(t.errmsg);o(t.data)}else e==r.default.Code.Timeout&&n("timeout")})})},e.reload=function(){return n(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return[4,this.getCloudConfig().catch(function(e){console.error(e)})];case 1:return(e=t.sent())?this.config=e:e=JSON.parse(this.test).data,this.process(e),[2]}})})},e.process=function(e){this.funcs=e.disFunc},e.config={globalSwitch:1,disFunc:{}},e.funcs=null,e.appid="",e.test='{\n    "code": 200,\n    "msg": "",\n    "data": {\n        "disFunc": {\n            "1": {\n                "name": "banner\u4f4d\u79fb",\n                "status": 1,\n                "show_num": "100",\n                "show_per": "1"\n            },\n            "2": {\n                "name": "\u8fde\u80dc\u5956\u52b1",\n                "status": 1,\n                "show_num": "100",\n                "show_per": "1"\n            },\n            "3": {\n                "name": "\u4f53\u529b\u5927\u793c\u5305",\n                "status": 1,\n                "show_num": "100",\n                "show_per": "1"\n            },\n            "4": {\n                "name": "\u6e38\u620f\u9875\u9762banner",\n                "status": 1,\n                "show_num": "1000",\n                "show_per": "1"\n            },\n            "5": {\n                "name": "\u5047\u5206\u4eab\u5931\u8d25\u63a7\u5236",\n                "status": 1,\n                "show_num": "3",\n                "show_per": "1"\n            },\n            "6": {\n                "name": "banner\u5237\u65b0",\n                "status": 1,\n                "show_num": "3",\n                "show_per": "1"\n            },\n            "7": {\n                "name": "\u6295\u653e\u7528\u6237\u62c9\u62bd\u5c49",\n                "status": 1,\n                "show_num": "3",\n                "show_per": "1"\n            },\n            "8": {\n                "name": "\u6295\u653e\u7528\u6237\u7ee7\u7eed\u6e38\u620f\u62c9\u62bd\u5c49",\n                "status": 1,\n                "show_num": "3",\n                "show_per": "0.5"\n            },\n            "9": {\n                "name": "\u7535\u51fb\u67aa\u9886\u53d6\u5f39\u7a97",\n                "status": 1,\n                "show_num": "999",\n                "show_per": "1"\n            },\n            "10": {\n                "name": "\u5173\u95ed\u6309\u94ae\u5c55\u793a",\n                "status": 1,\n                "show_num": "3",\n                "show_per": "1"\n            }\n        },\n        "adSwitch": 1,\n    }\n}',e}();o.default=a,cc._RF.pop()},{"../../misc/Net":"Net","../SDKInterafce":"SDKInterafce"}],CollectionInfo:[function(e,t,o){"use strict";cc._RF.push(t,"6f75bjPjARDULt4zgs/pFxb","CollectionInfo");var n=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.CollectionInfo=void 0;var i=cc._decorator,r=i.ccclass,c=(i.property,function(){function e(e){this.id=0,this.name="",this.type=0,this.res="",this.thumbnail="";var t=csv.Collection.get(e);t&&(this.id=t.id,this.type=t.type,this.name=t.name,this.res=t.res,this.thumbnail="Img/decorate/thumbnail/"+t.thumbnail)}return n([r],e)}());o.CollectionInfo=c,cc._RF.pop()},{}],Const:[function(e,t,o){"use strict";cc._RF.push(t,"48b6bn0TRFDqYZh8CpSlhMn","Const");var n=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,c=(i.property,function(){function e(){}return e.Chapter_Unlock=12,n([r],e)}());o.default=c,cc._RF.pop()},{}],CrossPad:[function(e,t,o){"use strict";cc._RF.push(t,"db0f4Bp9ElBipwcPzo5kwtp","CrossPad");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c,a=e("./Switcher"),s=e("../../core/Signal"),l=cc._decorator,u=l.ccclass,h=l.property,f=l.menu;(function(e){e[e.Idle=0]="Idle",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.Up=3]="Up",e[e.Down=4]="Down"})(c||(c={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.left=null,t.right=null,t.up=null,t.down=null,t.onTouchUp=new s.default,t.dirs=[],t}return i(t,e),t.prototype.start=function(){this.switcher=this.getComponentInChildren(a.default),this.dirs=[this.left,this.right,this.up,this.down];for(var e=0;e<4;e++){var t=this.dirs[e];t.dir=e+1,t.on(cc.Node.EventType.TOUCH_END,this.onTouchUpC,this),t.on(cc.Node.EventType.TOUCH_START,this.onTouchDownC,this)}},t.prototype.onTouchDownC=function(e){var t=e.target.dir;this.switcher.index=t},t.prototype.onTouchUpC=function(){this.switcher.index=0;var e=event.target.dir;e==c.Left?console.log("touch left "):e==c.Right&&console.log("touch Right "),this.onTouchUp.fire(e)},t.Dir=c,r([h(cc.Node)],t.prototype,"left",void 0),r([h(cc.Node)],t.prototype,"right",void 0),r([h(cc.Node)],t.prototype,"up",void 0),r([h(cc.Node)],t.prototype,"down",void 0),r([u,f("Controller/CrossPad")],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../core/Signal":"Signal","./Switcher":"Switcher"}],DCLabel:[function(e,t,o){"use strict";cc._RF.push(t,"a56c0Fh1bpDto6UwDov+u7M","DCLabel");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./DCUI"),a=cc._decorator,s=a.ccclass,l=a.property,u=a.requireComponent,h=a.menu,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.str="%s",t.hasAnim=!0,t.dur=.1,t.scale=1.2,t.formatUnit=!0,t}return i(t,e),t.prototype.onLoad=function(){this.label=this.getComponent(cc.Label)},t.prototype.onValueChanged=function(e){if(null==e&&(console.log("[DCLabel] warn!","not found field "+this.dataBind),e="0"),this.formatUnit?this.label.string=cc.js.formatStr(this.str,e.toUnitString()):this.label.string=cc.js.formatStr(this.str,e),this.hasAnim){this.node.stopActionByTag(1e3);var t=cc.scaleTo(this.dur,this.scale).easing(cc.easeSineInOut()),o=cc.scaleTo(this.dur,1,1),n=cc.sequence(t,o);n.setTag(1e3),this.node.runAction(n)}},r([l],t.prototype,"str",void 0),r([l],t.prototype,"hasAnim",void 0),r([l({visible:function(){return this.hasAnim}})],t.prototype,"dur",void 0),r([l({visible:function(){return this.hasAnim}})],t.prototype,"scale",void 0),r([l({displayName:"\u5355\u4f4d\u683c\u5f0f\u5316"})],t.prototype,"formatUnit",void 0),r([s,h("DCUI/DCLable"),u(cc.Label)],t)}(c.default);o.default=f,cc._RF.pop()},{"./DCUI":"DCUI"}],DCPandoraPoint:[function(e,t,o){"use strict";cc._RF.push(t,"7213alSGlhOObvGLLyQvhtZ","DCPandoraPoint");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./DCUI"),a=e("./controller/PandoraPoint"),s=cc._decorator,l=s.ccclass,u=(s.property,s.requireComponent),h=s.menu,f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){this.point=this.getComponent(a.default)},t.prototype.onValueChanged=function(e){this.point.setNumber(e)},r([l,h("DCUI/DCPandoraPoint"),u(a.default)],t)}(c.default);o.default=f,cc._RF.pop()},{"./DCUI":"DCUI","./controller/PandoraPoint":"PandoraPoint"}],DCSprite:[function(e,t,o){"use strict";cc._RF.push(t,"82b09vMdyFCOb0NEdBTtZHy","DCSprite");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./DCUI"),a=e("../misc/SpriteFrameCache"),s=cc._decorator,l=s.ccclass,u=(s.property,s.requireComponent),h=s.menu,f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){this.sprite=this.getComponent(cc.Sprite)},t.prototype.refreshSpriteFrame=function(e){var t=this;a.default.instance.getSpriteFrame(e).then(function(e){t.sprite.spriteFrame=e}).catch(function(){console.log("request imageUrl error :"+e)})},t.prototype.onValueChanged=function(e){this.refreshSpriteFrame(e)},r([l,h("DCUI/DCSprite"),u(cc.Sprite)],t)}(c.default);o.default=f,cc._RF.pop()},{"../misc/SpriteFrameCache":"SpriteFrameCache","./DCUI":"DCUI"}],DCToggle:[function(e,t,o){"use strict";cc._RF.push(t,"f9e52WLze5MBrhxXx/fWqyL","DCToggle");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./DCUI"),a=cc._decorator,s=a.ccclass,l=a.property,u=a.menu,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.revserse=!1,t.autosync=!0,t}return i(t,e),t.prototype.onLoad=function(){if(this.toggle=this.getComponent(cc.Toggle),this.autosync){var e=new cc.Component.EventHandler;e.component="DCToggle",e.target=this.node,e.handler="onChecked",this.toggle.checkEvents.push(e)}},t.prototype.onChecked=function(e){this.isFromSelf||(this.revserse?this.setDCValue(!e.isChecked):this.setDCValue(e.isChecked))},t.prototype.setChecked=function(e){this.isFromSelf=!0,e?this.toggle.check():this.toggle.uncheck(),this.isFromSelf=!1},t.prototype.onValueChanged=function(e){this.revserse?this.setChecked(!e):this.setChecked(e)},r([l({tooltip:"If reverse is enabled ,checked is false !, unchecked is true"})],t.prototype,"revserse",void 0),r([l({tooltip:" Make sure data bind type should be boolean"})],t.prototype,"autosync",void 0),r([s,u("DCUI/DCToggle")],t)}(c.default);o.default=h,cc._RF.pop()},{"./DCUI":"DCUI"}],DCUI:[function(e,t,o){"use strict";cc._RF.push(t,"e4171eQC3dMO4x8/Td1XV1Y","DCUI");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../core/DataCenter"),a=cc._decorator,s=a.ccclass,l=a.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dataBind="",t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.setDCKey=function(e){this.dataBind=e,this.setListener()},t.prototype.setListener=function(){c.default.off(this.dataBind,this.dataChanged,this),c.default.on(this.dataBind,this.dataChanged,this)},t.prototype.onValueChanged=function(){},t.prototype.setDCValue=function(e){c.default.set(this.dataBind,e)},t.prototype.dataChanged=function(e){this.onValueChanged(e)},t.prototype.onEnable=function(){this.setListener(),this.onValueChanged(c.default.get(this.dataBind))},t.prototype.onDisable=function(){c.default.off(this.dataBind,this.dataChanged,this)},t.prototype.onDestroy=function(){evt.off(this)},r([l()],t.prototype,"dataBind",void 0),r([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../core/DataCenter":"DataCenter"}],DailyLevelInfo:[function(e,t,o){"use strict";cc._RF.push(t,"7c7d3qZnXtO8ogQimsHNCS4","DailyLevelInfo");var n=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.DailyLevelInfo=void 0;var i=cc._decorator,r=i.ccclass,c=(i.property,function(){function e(e){this.id=0,this.day="",this.number="",this.hint_video="";var t=csv.daily_level.get(e);t&&(this.id=t.id,this.day=t.day,this.number=t.number,this.hint_video=t.hint_video)}return n([r],e)}());o.DailyLevelInfo=c,cc._RF.pop()},{}],DataCenter:[function(e,t,o){"use strict";cc._RF.push(t,"34270jeq1hAaJ89PC+A7ClS","DataCenter"),Object.defineProperty(o,"__esModule",{value:!0}),o.field=o.dc=void 0;var n=e("./event"),i={},r={};o.dc=function(e,t){return void 0===t&&(t=!0),function(o){r[o]={name:e,serializable:t}}},o.field=function(e){return function(t,o){var n=t.constructor,r=i[n];null==r&&(r=[],i[n]=r),(e=e||{})&&(e.persistent=null==e.persistent||e.persistent,e.enumerable=null==e.enumerable||e.enumerable,e.readonly=e.readonly||!1,e.default&&(t[o]=e.default));var c={propertyName:o,persistent:e.persistent,enumerable:e.enumerable,readonly:e.readonly};r.push(c)}};var c=function(){function e(){this.__namespace="DataCenter",this.kvs={},this.kts={},this.defaultKvs={},this.kOptions={},this.save_timestamps=0,this.kvs={},this.kts={}}return e.prototype.toFormData=function(){var e=this;return this.allkeys.map(function(t){return t+"="+e.kvs[t]}).join("&")},Object.defineProperty(e.prototype,"allkeys",{get:function(){return Object.keys(this.kvs)},enumerable:!1,configurable:!0}),e.prototype.defaultValue=function(e){return this.defaultKvs[e]},e.prototype.resetValue=function(e){this.setData(e,this.defaultKvs[e])},e.prototype.registerFields=function(e){var t=this.__proto__.constructor,o=i[t],n=r[t];for(var c in o){var a=o[c],s=a.propertyName;this.kOptions[s]=a,"function"!=typeof s&&(this.register(s,this[s]),delete this[s])}this.kOptions.save_timestamps={propertyName:"save_timestamps",persistent:!0,enumerable:!0,readonly:!1},this.register("save_timestamps",0),delete this.save_timestamps,e=e||n.name,this.endRegister(e,n.serializable)},e.prototype.register=function(e,t){var o=this.constructor.prototype,n=this;o.__defineGetter__(e,function(){return n.getData(e)}),o.__defineSetter__(e,function(t){n.setData(e,t)}),this.defaultKvs[e]=t;var i=this.kOptions[e];Object.defineProperty(this.kvs,e,{value:t,enumerable:i.enumerable,writable:!0});var r="";"object"==(r=typeof t)&&Array.isArray(t)&&(r="array"),this.kts[e]=r,console.log("[DataCenter] register :"+e+":"+t+"("+r+")")},e.prototype.setValue=function(e,t){this.kvs[e]=t},e.prototype.setData=function(e,t){var o=this.kvs[e];if(o!=t&&!this.kOptions[e].readonly){var i=this.kts[e],r=this._field_(e);i!=typeof t&&("number"==i?(console.warn("[DataCenter] wrong type <"+typeof t+"> for :"+r+"<"+i+"> ,converting..."),t=null==t?0:Number(t)):"boolean"==i?(console.warn("[DataCenter] wrong type <"+typeof t+"> for :"+r+"<"+i+"> ,converting..."),t="true"==t):"object"==i?(console.warn("[DataCenter] wrong type <"+typeof t+"> for :"+r+"<"+i+"> ,converting..."),t=t&&this.parseJson(t)||{}):"array"==i&&Array.isArray(t)&&(t=t)),this.kvs[e]=t,n.evt.emit(r,t,o)}},e.prototype._field_=function(e){return this.__namespace+"."+e},e.prototype.getData=function(e){return this.kvs[e]},e.prototype.limit=function(e,t,o){return e>o?o:e<t?0:e},e.prototype.addData=function(e,t,o){if(void 0===o&&(o=!1),null!=(t=Number(t))){var i=this.kvs[e],r=Number(i)+t;this.kvs[e]=r,n.evt.emit(this._field_(e),r,i),o&&this.save(e)}},e.prototype.onLoad=function(){},e.prototype.onLoadAll=function(){},e.prototype.onBeforeSave=function(){},e.prototype.onAfterSave=function(){},e.prototype.onBeforeSaveAll=function(){},e.prototype.onAfterSaveAll=function(){},e.prototype.load=function(){for(var e in this.kvs){var t=localStorage.getItem(this._field_(e)),o=t;if(t){var n=this.kts[e];"number"==n?o=Number(t):"boolean"==n?o="true"==t:"object"!=n&&"array"!=n||(o=this.parseJson(t))}else o=this.getData(e);this.kvs[e]=o,this.onLoad(e)}this.onLoadAll()},e.prototype._saveAll=function(){for(var e in this.save_timestamps=Date.now(),this.kvs){var t=this.kOptions[e];if(0!=t.persistent&&1!=t.readonly){var o=this.kvs[e],n=this.kts[e],i=this._field_(e);this.onBeforeSave(e),null!=o&&("object"==n||"array"==n?localStorage.setItem(i,JSON.stringify(o)):localStorage.setItem(i,o.toString())),this.onAfterSave(e),console.log(i,o)}}},e.prototype.save=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(console.log("[DataCenter] save :=================================="),0==e.length)this.onBeforeSaveAll(),this._saveAll(),this.onAfterSaveAll();else for(var o in e){var n=e[o],i=this.kOptions[n];if(null==i)return console.warn("[DataCenter]: can't find the key :"+n);if(0!=i.persistent&&1!=i.readonly){var r=this.kvs[n],c=this.kts[n],a=this._field_(n);this.onBeforeSave(n),"object"==c||"array"==c?localStorage.setItem(a,JSON.stringify(r)):null!=r?localStorage.setItem(a,r.toString()):console.warn("[DataCenter] "+a+" \u4fdd\u5b58\u5931\u8d25"),this.onAfterSave(n),console.log(a,r)}}console.log("[DataCenter] save succ :==================================")},e.prototype.toString=function(){var e=JSON.stringify(this.kvs,function(e,t){return"string"==typeof t?t.replace(/\\?\"/g,"'"):t});return console.log("dc.tostring:",e),e},e.prototype.loadFromJsonObject=function(e){for(var t in this.kvs){var o=e[t];null!=o&&(this.setValue(t,o),this.onLoad(t))}this.onLoadAll()},e.prototype.loadFromString=function(e){var t=JSON.parse(e);this.loadFromJsonObject(t)},e.prototype.resetAndSave=function(e){for(var t in this.reset(),e)this.setValue(t,e[t]);return this.save(),!0},e.prototype.reset=function(){for(var e in this.kvs)this.setValue(e,this.defaultKvs[e]),this.onLoad(e);this.onLoadAll()},e.prototype.parseJson=function(e){try{return JSON.parse(e.replace(/\\?\'/g,'"'))}catch(t){return null}},e.prototype.endRegister=function(t,o){void 0===o&&(o=!0),this.__namespace=t,e.alldata[t]=this,o&&this.load()},e.off=function(e,t,o){n.evt.off(e,t,o)},e.on=function(e,t,o){n.evt.on(e,t,o),this.set(e,this.get(e))},e.get=function(t){var o=t.split("."),n=o[0],i=o[1],r=e.alldata[n];return r?r[i]:null},e.set=function(t,o){var n=t.split("."),i=n[0],r=n[1],c=e.alldata[i];c&&(c[r]=o)},e.register=function(e){var t=new e,o=r[e];return window[o.name]=t,t.registerFields(),t},e.alldata={},e}();o.default=c,cc._RF.pop()},{"./event":"event"}],Device:[function(e,t,o){"use strict";cc._RF.push(t,"24210hhDfpAgLyIkM7QznF8","Device"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.setSoundsEnable=function(t){e.setSFXEnable(t),e.setBGMEnable(t)},e.setSFXEnable=function(t){e.isSfxEnabled=t},e.setVibrateEnable=function(e){this.isVibrateEnabled=e},e.setBGMEnable=function(t){e.isBgmEnabled=t,t?this.playBGM(e.tmp_bgm_url):cc.audioEngine.stopMusic()},e.playSfx=function(t,o,n){var i=this;void 0===o&&(o=!1),void 0===n&&(n=1),this.stopSfx(t),e.isSfxEnabled&&cc.resources.load(e.audio_path+t,cc.AudioClip,function(e,r){e?console.warn(e):i._clips[t]=i.playEffect(r,o,n)})},e.stopSfx=function(e){var t=this._clips[e];cc.audioEngine.stopEffect(t)},e.stopAllEffect=function(){cc.audioEngine.stopAllEffects()},e.playBGM=function(t,o){var n=this;void 0===o&&(o=!0),this.tmp_bgm_url=t,e.isBgmEnabled&&(this.stopMusic(),cc.resources.load(e.audio_path+t,cc.AudioClip,function(e,t){e?console.log(e):n.playMusic(t,o)}))},e.setAudioPath=function(t){e.audio_path=t},e.playEffect=function(t,o,n){if(void 0===o&&(o=!1),void 0===n&&(n=1),e.isSfxEnabled)return cc.audioEngine.playEffect(t,o)},e.stopEffect=function(e){cc.audioEngine.stopEffect(e)},e.stopMusic=function(){cc.audioEngine.stopMusic()},e.playMusic=function(t,o){void 0===o&&(o=!0),e.isBgmEnabled&&(this.bgm_clip=cc.audioEngine.playMusic(t,o))},e.vibrate=function(e){this.isVibrateEnabled&&cc.sys.WECHAT_GAME==cc.sys.platform&&(e?wx.vibrateLong():wx.vibrateShort())},e.isSfxEnabled=!0,e.isBgmEnabled=!0,e.isVibrateEnabled=!0,e.audio_path="Audio/",e.tmp_bgm_url=null,e._clips={},e.bgm_clip=null,e}();o.default=n,cc._RF.pop()},{}],Door:[function(e,t,o){"use strict";cc._RF.push(t,"891b5WiKtdA/rjgKEjEmtMH","Door");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../framework/misc/Device"),a=e("../../framework/utils/ccUtil"),s=e("../../framework/extension/weak_net_game/UserInfo"),l=cc._decorator,u=l.ccclass,h=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.anim=null,t.collider=null,t}return i(t,e),t.prototype.onLoad=function(){this.anim=this.getComponent(cc.Animation),this.collider=this.getComponent(cc.PhysicsCollider);var e=this.node.getChildByName("door"),t=this.node.getChildByName("door2");a.default.setDisplay(e.getComponent(cc.Sprite),"Img/level/theme/men_"+s.UserInfo.theme),a.default.setDisplay(t.getComponent(cc.Sprite),"Img/level/theme/men_"+s.UserInfo.theme)},t.prototype.start=function(){},t.prototype.unlock=function(){c.default.playSfx("openthedoor"),this.anim.play("unlock"),this.collider&&(this.collider.enabled=!1)},r([u],t)}(cc.Component));o.default=h,cc._RF.pop()},{"../../framework/extension/weak_net_game/UserInfo":"UserInfo","../../framework/misc/Device":"Device","../../framework/utils/ccUtil":"ccUtil"}],DoubleClick:[function(e,t,o){"use strict";cc._RF.push(t,"0225f1cu7dK1ooJ3wkdH2Vn","DoubleClick");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._lastClickedTime=0,t}return i(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onClick,this)},t.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onClick,this)},t.prototype.onClick=function(){var e=Date.now();e-this._lastClickedTime<300&&this.getComponents(cc.Component).forEach(function(e){var t=e.onDoubleClick;t&&t.call(e)}),this._lastClickedTime=e},t.prototype.start=function(){},r([a],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],DouyinStorage:[function(e,t,o){"use strict";cc._RF.push(t,"b2499718ypLOra9FRRpHGRV","DouyinStorage");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../core/DataCenter"),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isFromSidebar=!1,t.sidebarAvailable=!1,t.sidebarRewardClaimed=!1,t}return i(t,e),r([c.field()],t.prototype,"sidebarRewardClaimed",void 0),r([c.dc("dy")],t)}(c.default);o.default=c.default.register(a),cc._RF.pop()},{"../../core/DataCenter":"DataCenter"}],Draggable:[function(e,t,o){"use strict";cc._RF.push(t,"ae201qBMYJC+7BxBZ/bTft5","Draggable");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../core/Signal"),a=cc._decorator,s=a.ccclass,l=a.property,u=a.menu,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onDragStart=new c.default,t.onDragMove=new c.default,t.onDragEnd=new c.default,t.onDragCancel=new c.default,t.oosEnabled=!1,t.yEnabled=!0,t.moveBackDur=.5,t.isDrag=!1,t.isDragging=!1,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMoved,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnded,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCanceled,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMoved,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnded,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCanceled,this)},t.prototype.onTouchBegan=function(e){var t=e.getLocation();this.dragStartPos=this.node.position,this.onDragStart.fire(t),e.stopPropagation(),this.isDrag=!1,this.isDragging=!0,this.last=this.node.parent.convertToNodeSpaceAR(t),this.offset=this.node.position.sub(this.last)},t.prototype.onTouchMoved=function(e){var t=e.getLocation();if(this.yEnabled){var o=this.node.parent.convertToNodeSpaceAR(t),n=o.addSelf(this.offset);return this.node.position=n,this.isDrag=!0,void(this.last=o)}if(e.touch.getDelta().x>20){var i=cc.v2(20,e.touch.getDelta().y);this.node.x+=i.x}else e.touch.getDelta().x<-20?(i=cc.v2(-20,e.touch.getDelta().y),this.node.x+=i.x):this.node.x+=e.touch.getDelta().x;this.onDragMove.fire(e.touch.getDelta()),this.isDrag=!0},t.prototype.onTouchEnded=function(e){if(this.isDragging=!1,0!=this.isDrag){var t=e.getLocation();this.onDragEnd.fire(t),this.oosEnabled||cc.Camera.main.canSee(this.node)||this.moveBack()}},t.prototype.onTouchCanceled=function(e){this.isDragging=!1;var t=e.getLocation();this.onDragCancel.fire(t),this.oosEnabled||cc.Camera.main.canSee(this.node)||this.moveBack()},t.prototype.moveBack=function(){this.node.runAction(cc.moveTo(this.moveBackDur,this.dragStartPos).easing(cc.easeBackInOut))},r([l({displayName:"\u662f\u5426\u53ef\u4ee5\u62d6\u51fa\u5c4f\u5e55"})],t.prototype,"oosEnabled",void 0),r([l({displayName:"\u662f\u5426\u53ef\u4ee5\u62d6\u52a8Y"})],t.prototype,"yEnabled",void 0),r([l],t.prototype,"moveBackDur",void 0),r([s,u("Controller/Draggable")],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../core/Signal":"Signal"}],DrawCallOptimizer:[function(e,t,o){"use strict";cc._RF.push(t,"ace46M1kFFEY7tlAwiT2i1A","DrawCallOptimizer");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.DCIndex=void 0;var c,a=e("./DrawCallReorder"),s=e("../core/event"),l=e("../utils/ccUtil"),u=cc._decorator,h=u.ccclass,f=u.property;(function(e){e[e.index0=0]="index0",e[e.index1=1]="index1",e[e.index2=2]="index2",e[e.index3=3]="index3",e[e.index4=4]="index4",e[e.index5=5]="index5",e[e.index6=6]="index6",e[e.index7=7]="index7",e[e.index8=8]="index8",e[e.index9=9]="index9"})(c=o.DCIndex||(o.DCIndex={}));var p={},d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tobeOptimizeNodes=[],t.newLayer=null,t.orderId=c.index0,t}return i(t,e),t.prototype.onLoad=function(){this.newLayer=this.newLayer||this.node,s.evt.on("DC.optimize",this.optimize,this),s.evt.on("DC.optimizeAll",this.optimizeAll,this),p[this.orderId]=this},t.getOptimizer=function(e){return p[e]},t.prototype.onDestroy=function(){delete p[this.orderId],event.off(this)},t.prototype.start=function(){var e=this;this.tobeOptimizeNodes.forEach(function(t){return l.default.changeParent(t,e.newLayer)}),this.optimizeAll()},t.prototype.optimize=function(e){var t=this;e.forEach(function(e){e.orderId==t.orderId&&l.default.changeParent(e.node,t.newLayer)})},t.prototype.optimizeAll=function(){var e=cc.director.getScene().getComponentsInChildren(a.default);this.optimize(e)},t.prototype.optimizeTarget=function(e){l.default.changeParent(e,this.newLayer)},r([f([cc.Node])],t.prototype,"tobeOptimizeNodes",void 0),r([f(cc.Node)],t.prototype,"newLayer",void 0),r([f({type:cc.Enum(c)})],t.prototype,"orderId",void 0),r([h],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../core/event":"event","../utils/ccUtil":"ccUtil","./DrawCallReorder":"DrawCallReorder"}],DrawCallReorder:[function(e,t,o){"use strict";cc._RF.push(t,"b3a85+0BDNLALxTeNtup6wM","DrawCallReorder");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.orderId=0,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},r([s],t.prototype,"orderId",void 0),r([a],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],DynamicMap:[function(e,t,o){"use strict";cc._RF.push(t,"23eb46/5IRC34xGYDEq3IH4","DynamicMap");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c,a=e("../core/Signal"),s=e("../utils/ccUtil"),l=cc._decorator,u=l.ccclass,h=l.property,f=l.menu;(function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical"})(c||(c={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nextSeg=null,t.segIdx=-1,t.segments=[],t.cursor=-1,t.isInfinite=!1,t.dir=c.Horizontal,t.signal=new a.default,t.isEnd=!1,t.running=!1,t.isLoadOnce=!1,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.onDestroy=function(){this.signal.clear()},t.prototype.start=function(){this.dir==c.Horizontal?this.cursor<0&&(this.cursor=cc.visibleRect.width):this.cursor<0&&(this.cursor=cc.visibleRect.height)},t.prototype.begin=function(e){this.running=!0,this.isLoadOnce=e,console.warn("\u5f00\u59cb\u751f\u6210\u5173\u5361");var t=this.segments.length;if(e)for(var o=0;o<t+1;o++)this.curSeg=this.createNextSeg();else null==this.curSeg&&(this.curSeg=this.createNextSeg())},t.prototype.addSements=function(){for(var e,t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];(e=this.segments).push.apply(e,t)},t.prototype._addToSeg=function(){},t.prototype.next=function(){},t.prototype.createNextSeg=function(){var e=this.segIdx+1;if(e>this.segments.length-1){if(!this.isInfinite)return console.log("\u6ca1\u6709\u5173\u5361\u6bb5\u4e86"),this.isEnd=!0,void this.signal.fire("end",this.cursor);this.next()}this.segIdx=cc.misc.clampf(e,0,this.segments.length-1);var t=this.segments[this.segIdx];console.warn("create next level:",t.name);var o=cc.instantiate(t);return null==o?(console.error("create segment failed:",this.segments,this.segIdx),null):(this.dir==c.Horizontal?(o.setPosition(this.cursor,0),this.cursor+=o.width-8):(o.setPosition(0,this.cursor),this.cursor+=o.height-8),this.signal.fire("newSegCreated",o),this.segments.shift(),this.segIdx-=1,o.name=t.name,o.setParent(this.node),o)},t.prototype.isOutOfCameraLeft=function(e){var t=cc.Camera.main,o=s.default.getWorldBoundingBox(e);return t.getWorldToCameraPoint(cc.v2(o.xMax,0),cc.Vec2.ZERO).x<0},t.prototype.update=function(){if(!this.isLoadOnce&&this.running){for(var e=0;e<this.node.childrenCount;e++){var t=this.node.children[e];this.curSeg!=t&&this.nextSeg!=t&&this.isOutOfCameraLeft(t)&&(console.warn("remove segment"),this.signal.fire("removeSeg",t),t.destroy())}if(!this.isEnd){var o,n;if(this.dir==c.Horizontal){var i=cc.visibleRect.width;o=cc.Camera.main.getCameraToWorldPoint(cc.v2(i,0),cc.Vec2.ZERO).x,n=s.default.getWorldBoundingBox(this.curSeg).xMax}else{var r=cc.visibleRect.height;o=cc.Camera.main.getCameraToWorldPoint(cc.v2(0,r),cc.Vec2.ZERO).y,n=s.default.getWorldBoundingBox(this.curSeg).yMax}n-o<=10&&null==this.nextSeg&&(this.nextSeg=this.createNextSeg()),n-o<=0&&(this.curSeg=this.nextSeg,this.nextSeg=null)}}},r([h(cc.Prefab)],t.prototype,"segments",void 0),r([h({displayName:"start"})],t.prototype,"cursor",void 0),r([h({type:cc.Enum(c)})],t.prototype,"dir",void 0),r([u,f("gamelib/DynamicMap")],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../core/Signal":"Signal","../utils/ccUtil":"ccUtil"}],EaseType:[function(e,t,o){"use strict";cc._RF.push(t,"92165U/0DtL2ISOJsM2RL4i","EaseType"),Object.defineProperty(o,"__esModule",{value:!0}),o.EaseType=void 0,function(e){e[e.constant=0]="constant",e[e.linear=1]="linear",e[e.quadIn=2]="quadIn",e[e.quadOut=3]="quadOut",e[e.quadInOut=4]="quadInOut",e[e.cubicIn=5]="cubicIn",e[e.cubicOut=6]="cubicOut",e[e.cubicInOut=7]="cubicInOut",e[e.quartIn=8]="quartIn",e[e.quartOut=9]="quartOut",e[e.quartInOut=10]="quartInOut",e[e.quintIn=11]="quintIn",e[e.quintOut=12]="quintOut",e[e.quintInOut=13]="quintInOut",e[e.sineIn=14]="sineIn",e[e.sineOut=15]="sineOut",e[e.sineInOut=16]="sineInOut",e[e.expoIn=17]="expoIn",e[e.expoOut=18]="expoOut",e[e.expoInOut=19]="expoInOut",e[e.circIn=20]="circIn",e[e.circOut=21]="circOut",e[e.circInOut=22]="circInOut",e[e.elasticIn=23]="elasticIn",e[e.elasticOut=24]="elasticOut",e[e.elasticInOut=25]="elasticInOut",e[e.backIn=26]="backIn",e[e.backOut=27]="backOut",e[e.backInOut=28]="backInOut",e[e.bounceIn=29]="bounceIn",e[e.bounceOut=30]="bounceOut",e[e.bounceInOut=31]="bounceInOut",e[e.smooth=32]="smooth",e[e.fade=33]="fade",e[e.quadOutIn=34]="quadOutIn",e[e.cubicOutIn=35]="cubicOutIn",e[e.quartOutIn=36]="quartOutIn",e[e.quintOutIn=37]="quintOutIn",e[e.sineOutIn=38]="sineOutIn",e[e.expoOutIn=39]="expoOutIn",e[e.circOutIn=40]="circOutIn",e[e.backOutIn=41]="backOutIn",e[e.bounceOutIn=42]="bounceOutIn"}(o.EaseType||(o.EaseType={})),cc._RF.pop()},{}],EffectLoader:[function(e,t,o){"use strict";cc._RF.push(t,"545f7vJGkJFTJqgF1+IFtC8","EffectLoader");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/utils/ccUtil"),a=cc._decorator,s=a.ccclass,l=a.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.path="",t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){var e=this;c.default.getRes(this.path,cc.Prefab).then(function(t){cc.instantiate(t).parent=e.node})},r([l],t.prototype,"path",void 0),r([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../framework/utils/ccUtil":"ccUtil"}],Effect:[function(e,t,o){"use strict";cc._RF.push(t,"a07baB3hTdNoI94e+/5sX7q","Effect"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../framework/core/PoolManager"),i=e("../Role"),r=e("../../../framework/core/event"),c=e("../AIEnemy"),a=e("../items/SnowBall"),s=e("../items/ItemStar"),l=e("../items/FlyToMagnet"),u=e("../Game"),h=e("../../../framework/ui/ToastManager"),f=function(){function e(){}return e.showMagnet=function(e){void 0===e&&(e=1);var t=n.default.get("Pool").get("magnet-indicator");t.position=cc.v3(0,200,0),t.parent=i.default.self.node,t.getComponent(cc.Animation).play(),r.evt.sleep(e).then(function(){n.default.get("Pool").put(t)})},e.do_magnet=function(){var t=cc.director.getScene().getComponentsInChildren(s.default);e.showMagnet(),t.forEach(function(e){e.getOrAddComponent(l.default)})},e.throw_snowballs=function(){var e=u.default.instance.node;if(c.default.allEnemies.length<=0)return h.Toast.make("\u672a\u53d1\u73b0\u654c\u4eba"),!1;for(var t=0;t<c.default.allEnemies.length;t++){var o=c.default.allEnemies[t];this.addTargetBall(o,e)}return!0},e.addTargetBall=function(e,t){var o=i.default.self.node.position;cc.resources.load("Prefabs/effect/snowball",cc.Prefab,function(n,i){var r=cc.instantiate(i);r.getComponent(a.default).target=e.node,r.parent=t,o.addSelf(cc.v3(0,80,0)),r.position=o})},e}();o.default=f,cc._RF.pop()},{"../../../framework/core/PoolManager":"PoolManager","../../../framework/core/event":"event","../../../framework/ui/ToastManager":"ToastManager","../AIEnemy":"AIEnemy","../Game":"Game","../Role":"Role","../items/FlyToMagnet":"FlyToMagnet","../items/ItemStar":"ItemStar","../items/SnowBall":"SnowBall"}],EmptyBuff:[function(e,t,o){"use strict";cc._RF.push(t,"1ea85M78IFKBKPCSgHygUEE","EmptyBuff");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnabled=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.onDisabled=function(){},t.prototype.onTimeLeftChanged=function(){},t.prototype.save=function(){},t.prototype.load=function(){},t}(e("./Buff").default);o.default=r,cc._RF.pop()},{"./Buff":"Buff"}],EnemyBallUp:[function(e,t,o){"use strict";cc._RF.push(t,"7540d6G2QlFTI3vzQjuYVVO","EnemyBallUp");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./AIEnemy"),a=e("../../framework/misc/Device"),s=cc._decorator,l=s.ccclass,u=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enemy=null,t.body=null,t.bubble=null,t}return i(t,e),t.prototype.onLoad=function(){this.enemy=this.getComponent(c.default),this.body=this.getComponent(cc.RigidBody)},t.prototype.start=function(){var e=this;cc.resources.load("Prefabs/effect/bubble",cc.Prefab,function(t,o){a.default.playSfx("bubble"),e.bubble=cc.instantiate(o),e.node.addChild(e.bubble);var n=Math.max(e.node.width,e.node.height);e.bubble.width=n+20,e.bubble.height=e.bubble.width}),this.enemy.enableCollide=!1,this.enemy.removeBomb(),this.body.linearDamping=0,this.body.gravityScale=-1},t.prototype.onEnable=function(){},r([l],t)}(cc.Component));o.default=u,cc._RF.pop()},{"../../framework/misc/Device":"Device","./AIEnemy":"AIEnemy"}],EvtType:[function(e,t,o){"use strict";cc._RF.push(t,"1d87fWflfhAoYw8cOWW/hj0","EvtType"),Object.defineProperty(o,"__esModule",{value:!0}),o.EvtType=void 0,function(e){e[e.Win=0]="Win"}(o.EvtType||(o.EvtType={})),cc._RF.pop()},{}],Extension:[function(e,t,o){"use strict";cc._RF.push(t,"fc89b0eIsBEuLdLeboqapuA","Extension"),Object.defineProperty(o,"__esModule",{value:!0}),o.lerpf=o.lerpVec3=o.lerpVec2=void 0,o.lerpVec2=function(e,t,o,n){var i=t.x,r=t.y;return e.x=i+n*(o.x-i),e.y=r+n*(o.y-r),e},o.lerpVec3=function(e,t,o,n){var i=t.x,r=t.y,c=t.z;return e.x=i+n*(o.x-i),e.y=r+n*(o.y-r),e.z=c+n*(o.z-c),e},o.lerpf=function(e,t,o){return cc.misc.lerp(e,t,o)},cc._RF.pop()},{}],FSM:[function(e,t,o){"use strict";cc._RF.push(t,"2339dXROBhBn5TGqU7N6oRO","FSM");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.State=void 0;var r=cc._decorator,c=(r.ccclass,r.property,function(){function e(e,t){this.__interval_callbacks=[],this.interval_id=0,this.id=e,this.name=t}return e.prototype.onEnter=function(){},e.prototype.onExit=function(){},e.prototype.onUpdate=function(){},e.prototype.on=function(){},e.prototype.off=function(){},e.prototype.clearIntervals=function(){this.__interval_callbacks.splice(0,this.__interval_callbacks.length)},e.prototype.setInterval=function(e,t,o){var n=++this.interval_id;return this.__interval_callbacks.push({id:n,callback:t,target:o,interval:e,timer:0}),n},e.prototype.clearInterval=function(e){this.__interval_callbacks.splice(this.__interval_callbacks.indexOf(e))},e.prototype.setTimeout=function(e,t,o){var n=++this.interval_id;return this.__interval_callbacks.push({id:n,callback:t,target:o,delay:e,timer:0}),n},e.prototype.clearTimeout=function(e){this.clearInterval(e)},e.prototype.invokeIntervals=function(e){for(var t=0;t<this.__interval_callbacks.length;t++){var o=this.__interval_callbacks[t];o.timer=o.timer+e,o.interval?o.timer>=o.interval&&(o.timer=0,o.callback.call(o.target)):o.delay&&o.timer>=o.delay&&(o.callback.call(o.target),this.__interval_callbacks.splice(t),t--)}},e}());o.State=c;var a=function(e){function t(t,o,n,i){var r=e.call(this,o,n)||this,c=cc.js.formatStr(i,"onEnter",r.name),a=cc.js.formatStr(i,"onUpdate",r.name),s=cc.js.formatStr(i,"onExit",r.name);return r.__target=t,r.__enterFunc=r.__target[c],r.__updateFunc=r.__target[a],r.__exitFunc=r.__target[s],r}return i(t,e),t.prototype.onEnter=function(e){this.clearIntervals(),this.__enterFunc&&this.__enterFunc.call(this.__target,this,e)},t.prototype.onExit=function(){this.__exitFunc&&this.__exitFunc.call(this.__target,this)},t.prototype.onUpdate=function(e){this.invokeIntervals(e),this.__updateFunc&&this.__updateFunc.call(this.__target,this,e)},t}(c),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeElapsed=0,t._states={},t._isPaused=!1,t._log=!1,t}return i(t,e),Object.defineProperty(t.prototype,"target",{get:function(){return this._target},enumerable:!1,configurable:!0}),t.prototype.getState=function(e){return this._states[e]},t.prototype.getCurrentState=function(){return this.c},t.prototype.getPreviousState=function(){return this.p},t.prototype.init=function(e,t,o){void 0===o&&(o="%s_%s"),this._target=e,this.timeElapsed=0,t&&this.addStates(t,o)},t.prototype.addStates=function(e,t){void 0===t&&(t="%s_%sState");var o=Object.keys(e),n=o.length/2;this.namePattern=t;for(var i=0;i<n;i++){var r=o[i],c=e[r];this.addState(r,c)}},t.prototype.addState=function(e,t,o,n,i,r){this._log&&console.log("[FSM]"+this.target.__classname__+"("+this.target.name+") Add State :",e,t);var c=new a(this.target,e,t,this.namePattern);this._states[e]=c,o&&(c.__enterFunc=o),n&&(c.__exitFunc=n),i&&(c.__updateFunc=i),r&&(c.__target=r)},t.prototype.enterState=function(e,t){this.timeElapsed=0;var o=this._states[e];this.c=o,o.onEnter(t),this._log&&console.log("[FSM]"+this.target.__classname__+" First State:",o.name)},t.prototype.revertState=function(){this.changeState(this.p.id)},t.prototype.pause=function(){this._isPaused=!0},t.prototype.resume=function(){this._isPaused=!1},t.prototype.resetCurrentState=function(){this.timeElapsed=0,console.log(cc.js.formatStr("[FSM] %s reset currentState",this.target.__classname__)),this.c.onExit(),this.c.onEnter()},t.prototype.changeState=function(e,t){var o=this._states[e];if(null!=o)if(this._isPaused)console.warn("[FSM] fsm is paused ! "+this.target.__classname__+" changeState to <"+o.name+"> failed!");else{if(this.c){if(e==this.c.id)return void(this._log&&console.log(this.target.__classname__+" already in state :"+o.name));this.c.onExit(),this.p=this.c}this.timeElapsed=0,this.c=o,this._log&&console.log(cc.js.formatStr("[FSM] %s (%s): %s -> %s",this.target.__classname__,this.name,this.p.name,o.name)),this.c.onEnter(t)}else console.warn("[FSM] invalid state for stateId "+e+" of : "+this.target.__classname__)},t.prototype.isInState=function(e){return this.c==this._states[e]},t.prototype.update=function(e){this._isPaused||(t.debug&&(e=.016),this.timeElapsed+=e,this.c&&this.c.onUpdate(e))},t.debug=!1,t}(cc.Component);o.default=s,cc._RF.pop()},{}],FlyToMagnet:[function(e,t,o){"use strict";cc._RF.push(t,"b62dd4Yqn9N25kPcL9wVfsH","FlyToMagnet");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/extension/movement/MoveEngine"),a=e("../Role"),s=cc._decorator,l=s.ccclass,u=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.moveEngine=null,t}return i(t,e),t.prototype.onLoad=function(){this.moveEngine=this.getOrAddComponent(c.default)},t.prototype.onEnable=function(){this.moveEngine.changeBeheavior(c.Behavior.Arrive)},t.prototype.onDisable=function(){this.moveEngine.changeBeheavior(c.Behavior.Simple)},t.prototype.update=function(){var e=a.default.self.node.getPosition();e.y+=100,this.moveEngine.target=e},r([l],t)}(cc.Component));o.default=u,cc._RF.pop()},{"../../../framework/extension/movement/MoveEngine":"MoveEngine","../Role":"Role"}],FourComics:[function(e,t,o){"use strict";cc._RF.push(t,"ce156bqwhtLC6L/Vabhh8hK","FourComics");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c,a=e("../../../framework/extension/qanim/EaseType"),s=cc._decorator,l=s.ccclass,u=s.property;function h(e){return e==c.Fade?"opacity":e==c.Scale?"scale":"position"}(function(e){e[e.Slide=0]="Slide",e[e.Scale=1]="Scale",e[e.Fade=2]="Fade"})(c||(c={}));var f=function(){function e(){this.type=c.Fade,this.dur=1,this.from=0,this.to=1,this.easeType=a.EaseType.linear,this.slideBy=cc.v2()}return r([u({type:cc.Enum(c)})],e.prototype,"type",void 0),r([u()],e.prototype,"dur",void 0),r([u()],e.prototype,"from",void 0),r([u()],e.prototype,"to",void 0),r([u({type:cc.Enum(a.EaseType)})],e.prototype,"easeType",void 0),r([u({type:cc.Vec2,visible:function(){return this.type==c.Slide}})],e.prototype,"slideBy",void 0),r([l("ShowConfig")],e)}(),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cells=[],t.cursor=0,t.configs=[],t.onFinishes=[],t.interval=3,t}return i(t,e),t.prototype.onLoad=function(){this.cells=this.node.children,this.cursor=0,this.node.on(cc.Node.EventType.TOUCH_END,this.next,this)},t.prototype.start=function(){this.prepare(),this.next(),this.schedule(this.next,this.interval)},t.prototype.next=function(){this.cursor>=this.configs.length||(this.play(),this.cursor++,this.cursor>=this.configs.length&&this.unschedule(this.next))},t.prototype.prepare=function(){var e=this;this.cells.forEach(function(t,o){var n=e.configs[o];t[h(n.type)]=n.from})},t.prototype.play=function(){var e,t,o=this,n=this.cursor,i=this.cells[n],r=this.configs[n],s=null;if(r.type==c.Slide){var l=i.getPosition();i.setPosition(l.x+r.slideBy.x,l.y+r.slideBy.y),s=cc.tween(i).to(r.dur,{position:l},{easing:a.EaseType[r.easeType]})}else r.type==c.Fade?s=cc.tween(i).to(r.dur,((e={})[h(r.type)]=255*r.to,e),{easing:a.EaseType[r.easeType]}):r.type==c.Scale&&(s=cc.tween(i).to(r.dur,((t={})[h(r.type)]=r.to,t),{easing:a.EaseType[r.easeType]}));n==this.cells.length-1?s.delay(2).call(function(){o.onFinishes.forEach(function(e){return e.emit([o])})}).start():s.start()},r([u([f])],t.prototype,"configs",void 0),r([u([cc.Component.EventHandler])],t.prototype,"onFinishes",void 0),r([u],t.prototype,"interval",void 0),r([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../framework/extension/qanim/EaseType":"EaseType"}],FrameSwitch:[function(e,t,o){"use strict";cc._RF.push(t,"5c1b6NpjU9OVYdNX6jc7+Qv","FrameSwitch");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=(c.requireComponent,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.frames=[],t.target=null,t._index=0,t.randomOnLoad=!1,t}return i(t,e),t.prototype.onLoad=function(){null==this.target&&(this.target=this.getComponent(cc.Sprite)),this.randomOnLoad&&this.switchRandom()},t.prototype.switchRandom=function(){this.index=g.randomInt(0,this.frames.length)},Object.defineProperty(t.prototype,"index",{get:function(){return this._index},set:function(e){this.switch(e)},enumerable:!1,configurable:!0}),t.prototype.switch=function(e){var t=this.frames.length,o=Math.min(Math.max(0,e),t-1);this.target.spriteFrame=this.frames[o],this._index=o},t.prototype.start=function(){},r([s([cc.SpriteFrame])],t.prototype,"frames",void 0),r([s(cc.Sprite)],t.prototype,"target",void 0),r([s],t.prototype,"randomOnLoad",void 0),r([a],t)}(cc.Component));o.default=l,cc._RF.pop()},{}],FreezeTarget:[function(e,t,o){"use strict";cc._RF.push(t,"863b2axkS1AToFMdctqXni9","FreezeTarget");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../AIEnemy"),a=e("../../../framework/misc/Device"),s=cc._decorator,l=s.ccclass,u=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ice=null,t.duration=10,t.enemy=null,t.label=null,t.timeleft=0,t}return i(t,e),t.prototype.onLoad=function(){this.ice=this.node.getChildByName("ice"),this.enemy=this.getComponent(c.default),this.label=this.getComponentInChildren(cc.Label)},t.prototype.start=function(){},t.prototype.cast=function(){a.default.playSfx("ice"),this.timeleft<=0&&(this.ice.opacity=0,cc.tween(this.ice).to(1,{opacity:255}).start()),this.ice.active=!0,this.unschedule(this.hide),this.scheduleOnce(this.hide,this.duration),this.timeleft=this.duration,this.label.string=this.timeleft.toString(),this.label.node.scaleX=Math.sign(this.node.scaleX*this.enemy.baseScale),this.enemy.go_frozen(),this.unschedule(this.countdown),this.schedule(this.countdown,1)},t.prototype.countdown=function(){this.timeleft-=1,this.label.string=this.timeleft.toFixed()},t.prototype.hide=function(){this.ice.active=!1,this.enemy.exit_frozen()},r([l],t)}(cc.Component));o.default=u,cc._RF.pop()},{"../../../framework/misc/Device":"Device","../AIEnemy":"AIEnemy"}],GameConfigs:[function(e,t,o){"use strict";cc._RF.push(t,"0ff8cbMXJFLVaQF1Sqnm6gc","GameConfigs"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameConfig=void 0;var n=e("../../../Game/Scripts/Common/Base/ServerConfig");o.GameConfig={gameId:"helpher",appId:"123456",banner_ad_id:"",banner_ad_id1:"",video_ad_id:"",interstitial_ad_id:"",portal_id:"",tmplIds:[""],version:n.ServerConfig.version,cloudUrl:""},cc._RF.pop()},{"../../../Game/Scripts/Common/Base/ServerConfig":"ServerConfig"}],Game:[function(e,t,o){"use strict";cc._RF.push(t,"48e3dwvCYhKg51q7xsnrrYc","Game");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c},c=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function c(e){try{s(n.next(e))}catch(t){r(t)}}function a(e){try{s(n.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,a)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return s([e,t])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s,l=e("../../framework/core/event"),u=e("./LevelLoader"),h=e("./Common/Base/PlayerInfo"),f=e("../../framework/misc/Device"),p=e("../../framework/utils/ccUtil"),d=e("../../framework/extension/Platform"),y=e("./Common/Base/LoadingScene"),v=e("../../framework/extension/render/mesh-sprite"),_=e("../../framework/extension/weak_net_game/UserInfo"),m=e("../../framework/extension/aldsdk/StatHelper"),g=e("../../framework/core/FSM"),w=e("../../framework/ui/controller/Switcher"),b=e("../../framework/extension/aldsdk/umeng"),k=e("../../framework/extension/mmcloud/mmgame"),S=cc._decorator,C=S.ccclass,I=S.property;(function(e){e[e.Normal=0]="Normal",e[e.Hint=1]="Hint"})(s||(s={}));var P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.guide=null,t.tili=null,t.xingxing=null,t.bg=null,t.close_btn=null,t.level_str=null,t.tip_str=null,t.star_switch=null,t.loader=null,t.isOver=!0,t.wallbg=null,t.star=0,t.isUsedMagnet=!1,t.lastKey=null,t.sameKeyCount=0,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){o.instance=this,cc.director.getCollisionManager().enabled=!0,cc.director.getPhysicsManager().enabled=!0,this.fsm=this.addComponent(g.default),this.fsm.init(this,s),this.fsm.enterState(s.Normal);var e=new cc.Node;e.addComponent(cc.RigidBody).type=cc.RigidBodyType.Static,e.parent=this.node,l.evt.on("Game.win",this.onWin,this),l.evt.on("Game.lose",this.onLose,this),l.evt.on("Game.catch",this.onCatched,this),l.evt.on("Game.hello",this.onSayHello,this),l.evt.on("Game.keyMoved",this.onKeyMoved,this),l.evt.on("Game.getTili",this.onGetTili,this),l.evt.on("Game.getstar",this.onGetStar,this),l.evt.on("PlayerInfo.star",this.onChangeStar,this),l.evt.on("UISkin.checkLock",this.check_lockSkin,this),l.evt.on("Main.skin",this.onMainSkin,this),this.loader=this.getComponentInChildren(u.default),this.loader.delegate=this,this.loader.onLevelLoaded.add(this.onLevelLoaded,this),o.debug||(0==h.PlayerInfo.guide?(h.PlayerInfo.playinglevel=1,this.loader.level=1,h.PlayerInfo.guide=1,h.PlayerInfo.save("guide")):this.loader.level=h.PlayerInfo.getCurrentPlayingLevel()),this.node.getChildByName("bg").on(cc.Node.EventType.TOUCH_END,this.onClickBg,this),d.default.hideBannerAd()},t.prototype.onLoadPrefab=function(e,t){if(h.PlayerInfo.isPlayingDaily){var o=csv.daily_level.get(e);return p.default.getRes(t+"/"+o.number,cc.Prefab)}return o=csv.level.get(e),p.default.getRes(t+"/"+o.number,cc.Prefab)},t.prototype.onClickBg=function(){l.evt.emit("Game.changeRoleDir"),this.activeGame()},t.prototype.onMainSkin=function(){y.default.goto("Skin")},t.prototype.onGetStar=function(e){return c(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return this.star+=1,p.default.playFlyCoin(this.xingxing,this.xingxing.parent,p.default.getWorldPosition(e),p.default.getWorldPosition(this.star_switch.node),{num:1}),[4,l.evt.sleep(.3)];case 1:return t.sent(),this.star_switch.index=Math.min(this.star,3),[2]}})})},t.prototype.onChangeStar=function(){csv.Skin.values.forEach(function(e){2==e.unlockType&&!h.PlayerInfo.isSkinUnlocked(e.id)&&h.PlayerInfo.star>=e.unlock2&&vm.show("Prefabs/UI/UIUnlockSkin",e.id)})},t.prototype.onGetTili=function(e,t){p.default.playFly(this.tili,1,t)},t.prototype.onKeyMoved=function(){this.isOver},t.prototype.startGame=function(){l.evt.emit("Game.onStarted",this),this.isOver=!1,h.PlayerInfo.resetLevel(),b.umeng.startLevel("level"+(h.PlayerInfo.getCurrentPlayingLevel()+(h.PlayerInfo.isPlayingDaily?300:0)))},t.prototype.onSayHello=function(){f.default.playSfx("hello")},t.prototype.onLoadFinished=function(e){e&&this.loader.loadPrefab("Prefabs/Levels/"+e)},t.prototype.onDestroy=function(){o.instance=null,o.debug=!1,l.evt.off(this),cc.audioEngine.stopAll()},t.prototype.start=function(){if(this.close_btn.active=!1,cc.winSize.width/cc.winSize.height>.7){var e=this.node.getComponent(cc.Canvas);e.fitHeight=!0,e.fitWidth=!1}},t.prototype.check_lockSkin=function(){_.UserInfo.isunlock_men=0,_.UserInfo.isunlock_girl=0,_.UserInfo.isunlock_theme=0;for(var e=1;e<=5;e++)_.UserInfo["isunlock_girl"+e]=0,_.UserInfo["isunlock_men"+e]=0;for(e=1;e<=csv.Skin.values.length;e++){var t=csv.Skin.get(e);(h.PlayerInfo.level>=t.unlock1&&1==t.unlockType||2==t.unlockType&&h.PlayerInfo.star>=t.unlock2)&&!h.PlayerInfo.isSkinUnlocked(t.id)&&(1==t.type?_.UserInfo.isunlock_girl=1:2==t.type?_.UserInfo.isunlock_men=1:3==t.type&&(_.UserInfo.isunlock_theme=1),t.subType<5&&(1==t.type?_.UserInfo["isunlock_girl"+(t.subType+1)]=1:2==t.type&&(_.UserInfo["isunlock_men"+(t.subType+1)]=1)))}},t.prototype.onWin=function(){b.umeng.finishLevel("level"+(h.PlayerInfo.getCurrentPlayingLevel()+(h.PlayerInfo.isPlayingDaily?300:0))),this.isOver||(f.default.playSfx("hug"),this.isOver=!0,this.scheduleOnce(this.openWin,.5))},t.prototype.openWin=function(){k.default.isCheatOpen("interstitial_on_level_end")&&d.default.showInterstitial(),h.PlayerInfo.playinglevel==h.PlayerInfo.level&&10==h.PlayerInfo.playinglevel?vm.show("Prefabs/UI/UIFreeProp",function(){vm.show("Prefabs/UI/UIWin")}):vm.show("Prefabs/UI/UIWin")},t.prototype.changeBg=function(){Math.ceil(4*Math.random()),Math.ceil(3*Math.random()),p.default.setDisplay(this.bg,"Img/level/theme/bg_"+_.UserInfo.theme)},t.prototype.onCatched=function(e){l.evt.emit("Game.lose",e)},t.prototype.onLevelLoaded=function(e,t){var o=this;h.PlayerInfo.isPlayingSpecial=!1;var n=e.getChildByName("bg");n&&(this.wallbg=n.getComponent(v.default),this.wallbg.diffuseColor=cc.color(83,130,151,255),p.default.getRes("Prefabs/shadow",cc.Prefab).then(function(e){cc.instantiate(e).parent=o.wallbg.node})),this.changeBg(),this.level_str.string=(h.PlayerInfo.isPlayingDaily?"\u6311\u6218-":"\u5173\u5361-")+h.PlayerInfo.getCurrentPlayingLevel(),_.UserInfo.isNew&&m.default.sendPath("\u65b0\u7528\u6237\u5173\u5361\u5f00\u59cb\u4eba\u6570","\u5173\u5361",h.PlayerInfo.playinglevel),m.default.sendPath("\u6240\u6709\u7528\u6237\u5173\u5361\u5f00\u59cb\u4eba\u6570","\u5173\u5361",h.PlayerInfo.playinglevel),l.evt.emit("Game.onLevelLoaded",t),h.PlayerInfo.onStartLevel(),cc.director.getPhysicsManager().enabled=!1,this.startGame(),f.default.playBGM("BGM"+_.UserInfo.theme),_.UserInfo.isNew?d.default.sendUmengEvt("level_start_new",h.PlayerInfo.playinglevel.toString()):d.default.sendUmengEvt("level_start_all",h.PlayerInfo.playinglevel.toString()),this.star=0,this.star_switch.index=0;for(var i=this.loader.node.children[0].getChildByName("walls"),r=0;r<i.childrenCount;r++)(s=i.children[r].getComponent(cc.Sprite)).type=cc.Sprite.Type.TILED,s.node.width<s.node.height?(s.node.width=35,p.default.setDisplay(s,"Img/level/theme/zhuan_"+_.UserInfo.theme)):(s.node.height=40,p.default.setDisplay(s,"Img/level/theme/zhuan_v_"+_.UserInfo.theme));var c=this.loader.node.children[0].getChildByName("cao");for(r=0;r<c.childrenCount;r++){var a=c.children[r],s=a.getComponent(cc.Sprite);p.default.setDisplay(s,"Img/level/theme/jinshucao_"+_.UserInfo.theme),a.name.indexOf("short")>=0?90==a.angle?a.height=30:a.height=40:(p.default.changeParent(a,i,-1),r--)}var u=this.loader.node.children[0].getChildByName("bg");if(u.getComponent(v.default),p.default.setDisplay(u.getComponent(v.default),"textures/tietu_"+_.UserInfo.theme),this.isUsedMagnet=!1,h.PlayerInfo.isPlayingDaily&&h.PlayerInfo.playingDailyLevel%5==0){h.PlayerInfo.isPlayingSpecial=!0;var y=csv.daily_level.get(h.PlayerInfo.playingDailyLevel);this.tip_str.active=!0,this.tip_str.getComponentInChildren(cc.Label).string="\u4efb\u52a1\uff1a"+y.task,vm.show("Prefabs/UI/UIMission","\u4efb\u52a1\uff1a"+y.task)}else this.tip_str.active=!1;h.PlayerInfo.isPlayingDaily||5!==h.PlayerInfo.playinglevel||5!==h.PlayerInfo.level||vm.show("Prefabs/UI/UIBoxGuide",0),h.PlayerInfo.level>10&&!h.PlayerInfo.isPlayingDaily&&(h.PlayerInfo.isUnlock_Prop=!0,this.node.getChildByName("ItemsGroup").active=!0)},t.prototype.activeGame=function(){0==cc.director.getPhysicsManager().enabled&&(cc.director.getPhysicsManager().enabled=!0)},t.prototype.onLose=function(){b.umeng.failLevel("level"+(h.PlayerInfo.getCurrentPlayingLevel()+(h.PlayerInfo.isPlayingDaily?300:0))),this.isOver||(this.isOver=!0,k.default.isCheatOpen("interstitial_on_level_end")&&d.default.showInterstitial(),_.UserInfo.lose_num>=csv.Config.Show_AD_Lose?(_.UserInfo.lose_num=1,csv.Config.Show_AD_Lose_Skip?d.default.showInterstitial(function(){f.default.playSfx("ohno"),vm.show("Prefabs/UI/UILose")},this,function(){f.default.playSfx("ohno"),vm.show("Prefabs/UI/UILose")}):d.default.watch_video(function(){f.default.playSfx("ohno"),vm.show("Prefabs/UI/UILose")},this,function(){f.default.playSfx("ohno"),vm.show("Prefabs/UI/UILose")})):(_.UserInfo.lose_num+=1,f.default.playSfx("ohno"),vm.show("Prefabs/UI/UILose")))},t.prototype.click_pause=function(){vm.show("Prefabs/UI/UIPause")},t.prototype.click_skip=function(){vm.show("Prefabs/UI/UISkip")},t.prototype.click_return=function(){h.PlayerInfo.labour<=0?vm.show("Prefabs/UI/UIGetLabour",null,!0):(h.PlayerInfo.labour--,h.PlayerInfo.save("labour"),y.default.goto("Game"))},t.prototype.click_labour=function(){vm.show("Prefabs/UI/UIGetLabour",null,!0)},t.prototype.hideGuide=function(){},t.prototype.onEnter_Normal=function(){},t.prototype.onUpdate_Normal=function(){this.fsm.timeElapsed>20&&this.fsm.changeState(s.Hint)},t.prototype.onEnter_Hint=function(){l.evt.emit("Game.hintUser")},t.instance=null,t.debug=!1,r([I(cc.Node)],t.prototype,"guide",void 0),r([I(cc.Node)],t.prototype,"tili",void 0),r([I(cc.Node)],t.prototype,"xingxing",void 0),r([I(cc.Sprite)],t.prototype,"bg",void 0),r([I(cc.Node)],t.prototype,"close_btn",void 0),r([I(cc.Label)],t.prototype,"level_str",void 0),r([I(cc.Node)],t.prototype,"tip_str",void 0),r([I(w.default)],t.prototype,"star_switch",void 0),o=r([C],t)}(cc.Component);o.default=P,cc._RF.pop()},{"../../framework/core/FSM":"FSM","../../framework/core/event":"event","../../framework/extension/Platform":"Platform","../../framework/extension/aldsdk/StatHelper":"StatHelper","../../framework/extension/aldsdk/umeng":"umeng","../../framework/extension/mmcloud/mmgame":"mmgame","../../framework/extension/render/mesh-sprite":"mesh-sprite","../../framework/extension/weak_net_game/UserInfo":"UserInfo","../../framework/misc/Device":"Device","../../framework/ui/controller/Switcher":"Switcher","../../framework/utils/ccUtil":"ccUtil","./Common/Base/LoadingScene":"LoadingScene","./Common/Base/PlayerInfo":"PlayerInfo","./LevelLoader":"LevelLoader"}],GenericBuff:[function(e,t,o){"use strict";cc._RF.push(t,"62b6am+j4hEkrq6fMH+DNwy","GenericBuff");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t.prototype,"dcInstance",{get:function(){return this.data.dcInstance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dcField",{get:function(){return this.data.dcField},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"countOffline",{get:function(){return this.data.offline},enumerable:!1,configurable:!0}),t.prototype.onEnabled=function(){var e=this.data.onEnable;e&&e.call(this)},t.prototype.onRecovery=function(){var e=this.data.onRecovery;e&&e.call(this)},t.prototype.onDisabled=function(){var e=this.data.onDisable;e&&e.call(this)},t.prototype.step=function(){var e=this.data.onStep;e&&e.call(this)},t.prototype.onTimeLeftChanged=function(){this.dcInstance&&this.dcInstance.setData(this.dcField,this.timeLeft)},t.prototype.save=function(){this.dcInstance&&this.dcInstance.save(this.dcField)},t.prototype.load=function(e){this.dcInstance&&(this.timeLeft=this.dcInstance.getData(this.dcField),this.countOffline&&(this.timeLeft-=e))},t}(e("./Buff").default);o.default=r,cc._RF.pop()},{"./Buff":"Buff"}],Guide0:[function(e,t,o){"use strict";cc._RF.push(t,"dace2JEk6dMlaNuxA5sryEl","Guide0");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c},c=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function c(e){try{s(n.next(e))}catch(t){r(t)}}function a(e){try{s(n.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,a)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return s([e,t])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../framework/core/event"),l=cc._decorator,u=l.ccclass,h=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.highlight=null,t.msg=null,t.continue=null,t.msgLabel=null,t}return i(t,e),t.prototype.onLoad=function(){this.highlight=this.node.getChildByName("highlight"),this.msg=this.node.getChildByName("msg"),this.msgLabel=this.msg.getComponentInChildren(cc.Label),this.continue=this.node.getChildByName("continue")},t.prototype.start=function(){this.routine()},t.prototype.goon=function(){s.evt.emit("Guide.next")},t.prototype.tip=function(e,t,o){this.msgLabel.string=e,this.msg.x=t||this.msg.x,this.msg.y=o||this.msg.y},t.prototype.hide=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var o in e){var n=e[o];n.active=!1}},t.prototype.show=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var o in e){var n=e[o];n.active=!0}},t.prototype.routine=function(){return c(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return this.hide(this.continue),this.tip("\u70b9\u51fb\u6b64\u5904\u62d4\u8d77\u673a\u5173!"),[4,s.evt.wait("Game.keyMoved")];case 1:return e.sent(),s.evt.emit("Game.keyMoved"),this.hide(this.continue,this.highlight),this.tip("\u62d4\u8d77\u6240\u6709\u7684\u673a\u5173\uff0c\u8ba9\u5973\u5b69\u5230\u8fbe\u7ec8\u70b9!"),[4,s.evt.wait("Game.keyMoved")];case 2:return e.sent(),s.evt.emit("Game.keyMoved"),this.highlight.x=-1e3,this.show(this.highlight),this.tip("\u70b9\u51fb\u4efb\u610f\u4f4d\u7f6e\uff0c\u53ef\u4ee5\u6539\u53d8\u884c\u8d70\u65b9\u5411\u54e6!"),[4,s.evt.wait("Game.changeRoleDir")];case 3:return e.sent(),cc.isValid(this)?(this.hide(this.msg,this.continue,this.highlight),[2]):[2]}})})},r([u],t)}(cc.Component));o.default=h,cc._RF.pop()},{"../../../framework/core/event":"event"}],Guide4:[function(e,t,o){"use strict";cc._RF.push(t,"149c3pHaW5C55CAtc10Ji5T","Guide4");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../Common/Base/PlayerInfo"),a=e("../../../framework/core/event"),s=cc._decorator,l=s.ccclass,u=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.guideNode=null,t}return i(t,e),t.prototype.onLoad=function(){this.getComponent(cc.RigidBody).enabledContactListener=!0,a.evt.on("Game.win",this.hideGuide,this),a.evt.on("Game.lose",this.hideGuide,this)},t.prototype.onDisable=function(){a.evt.off(this)},t.prototype.start=function(){this.hideGuide()},t.prototype.onBeginContact=function(e,t,o){"role"!=o.node.group||c.PlayerInfo.is_guide_4||(c.PlayerInfo.is_guide_4=!0,c.PlayerInfo.isInGuide=!0,this.guideNode.active=!0)},t.prototype.onkeyClick=function(){c.PlayerInfo.isInGuide&&this.hideGuide()},t.prototype.hideGuide=function(){this.guideNode.active=!1,c.PlayerInfo.isInGuide=!1},r([u(cc.Node)],t.prototype,"guideNode",void 0),r([l],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../framework/core/event":"event","../Common/Base/PlayerInfo":"PlayerInfo"}],Guide5:[function(e,t,o){"use strict";cc._RF.push(t,"7053bfBiddBja/kjGOrXKC8","Guide5");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/core/event"),a=e("../Common/Base/PlayerInfo"),s=cc._decorator,l=s.ccclass,u=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){c.evt.on("Game.onStarted",this.onGameStarted,this)},t.prototype.onDestroy=function(){c.evt.off(this)},t.prototype.close=function(){this.node.active=!1},t.prototype.onGameStarted=function(){a.PlayerInfo.isguided_badman||(a.PlayerInfo.isguided_badman=!0,this.node.active=!0)},t.prototype.start=function(){this.node.active=!1},r([l],t)}(cc.Component));o.default=u,cc._RF.pop()},{"../../../framework/core/event":"event","../Common/Base/PlayerInfo":"PlayerInfo"}],GuideProp:[function(e,t,o){"use strict";cc._RF.push(t,"107c32dpelLzI0UdYHvf0lp","GuideProp");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../Common/Base/PlayerInfo"),a=cc._decorator,s=a.ccclass,l=a.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=null,t}return i(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onClick,this)},t.prototype.start=function(){c.PlayerInfo.playinglevel==c.PlayerInfo.level?(this.node.zIndex=1e4,this.node.opacity=0,this.content.width=100,cc.tween(this.node).to(.5,{opacity:255}).start(),cc.tween(this.content).to(.5,{width:1e3}).start()):this.node.active=!1},t.prototype.onClick=function(){this.node.active=!1},r([l(cc.Node)],t.prototype,"content",void 0),r([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../Common/Base/PlayerInfo":"PlayerInfo"}],GuideStory:[function(e,t,o){"use strict";cc._RF.push(t,"f2171kZuH9DWbdl9r3gU+W9","GuideStory");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../Common/Base/LoadingScene"),a=cc._decorator,s=a.ccclass,l=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.onShown=function(){"comics2"==this.node.name&&vm.hide("Prefabs/story/comics1")},t.prototype.click_go=function(){c.default.goto("Game")},t.prototype.click_skip=function(){c.default.goto("Game")},r([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../Common/Base/LoadingScene":"LoadingScene"}],HintButton:[function(e,t,o){"use strict";cc._RF.push(t,"e8322y95RJEnaGi+kL+OU8h","HintButton");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/ui/mvcView"),a=e("../../../framework/extension/weak_net_game/IconSov"),s=e("../../../framework/core/event"),l=e("../Common/Base/PlayerInfo"),u=e("../../../framework/extension/weak_net_game/WeakNetGame"),h=cc._decorator,f=h.ccclass,p=h.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hintAnim=null,t.isInHint=!1,t}return i(t,e),t.prototype.onLoad=function(){this.registerSubViews(a.default),this.onClick(this.node,this.click_hint),s.evt.on("Game.onLevelLoaded",this.onLevelChanged,this)},t.prototype.onDestroy=function(){s.evt.off(this)},t.prototype.start=function(){},t.prototype.onHintUser=function(){},t.prototype.hint=function(){},t.prototype.click_hint=function(){u.default.doChoice("SOV_Level_Hint",this.hint,this)},t.prototype.onLevelChanged=function(e){if(window.tt||window.qq)this.node.active=!1;else{var t=(l.PlayerInfo.isPlayingDaily?csv.daily_level.get(e):csv.level.get(e)).hint_video;this.node.active=!!t,this.render()}},t.prototype.onShown=function(){},r([p(cc.Animation)],t.prototype,"hintAnim",void 0),r([f],t)}(c.default);o.default=d,cc._RF.pop()},{"../../../framework/core/event":"event","../../../framework/extension/weak_net_game/IconSov":"IconSov","../../../framework/extension/weak_net_game/WeakNetGame":"WeakNetGame","../../../framework/ui/mvcView":"mvcView","../Common/Base/PlayerInfo":"PlayerInfo"}],HpBar:[function(e,t,o){"use strict";cc._RF.push(t,"5ec641civBJM6w3EDr17oq7","HpBar");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=c.menu,u=c.executeInEditMode,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._maxHp=0,t.hpLayout=null,t._hp=0,t}return i(t,e),Object.defineProperty(t.prototype,"maxHp",{get:function(){return this._maxHp},set:function(e){this._maxHp=e,this.hpLayout=this.getComponent(cc.Layout);var t=this.hpLayout.node.children[0];this.hpLayout.node.children.length>1&&(this.hpLayout.node.removeAllChildren(),this.hpLayout.node.addChild(t)),this.hpLayout.showlist(this.createHpNodes.bind(this),range(0,this._maxHp-1,1)),this.updateHp()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hp",{get:function(){return this._hp},set:function(e){this._hp=e,this.updateHp()},enumerable:!1,configurable:!0}),t.prototype.get=function(e){return this.hpLayout.node.children[e]},t.prototype.cur=function(){return this.get(this.hp).children[0]},t.prototype.onLoad=function(){this.hpLayout=this.getComponent(cc.Layout)},t.prototype.createHpNodes=function(e){e.children[0].active=!0},t.prototype.updateHp=function(){var e=this;this.hpLayout.node.children.forEach(function(t,o){t.children[0].active=o<e.hp+1})},t.prototype.start=function(){},t.prototype.onDisable=function(){},r([s()],t.prototype,"_maxHp",void 0),r([s()],t.prototype,"maxHp",null),r([s],t.prototype,"_hp",void 0),r([s],t.prototype,"hp",null),r([a,u(),l("Controller/HpBar")],t)}(cc.Component);o.default=h,cc._RF.pop()},{}],HurtableArea:[function(e,t,o){"use strict";cc._RF.push(t,"40899LTADJDoIl5lWHCKDeG","HurtableArea");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./SGameEntity"),a=cc._decorator,s=a.ccclass,l=a.property,u=a.menu,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.absoluteKill=!0,t.damage=10,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.onCollisionEnter=function(e){var t=e.getComponent(c.default);t&&t.isActive&&(this.absoluteKill?t.decreaseHp(t.hp,this.name):t.decreaseHp(this.damage,this.name))},r([l],t.prototype,"absoluteKill",void 0),r([l({visible:function(){return!this.absoluteKill}})],t.prototype,"damage",void 0),r([s,u("shooter/HurtableArea")],t)}(cc.Component);o.default=h,cc._RF.pop()},{"./SGameEntity":"SGameEntity"}],IconSov:[function(e,t,o){"use strict";cc._RF.push(t,"304c05WgkRMGI+yG5+X8WrK","IconSov");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../ui/controller/Switcher"),a=e("./WeakNetGame"),s=e("../../ui/mvcView"),l=cc._decorator,u=l.ccclass,h=l.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.sovName="",t}return i(t,e),t.prototype.onLoad=function(){var e=this;this.icon=this.getComponent(c.default),this.register(this.icon,function(){return a.default.getChoice(e.sovName)})},r([h],t.prototype,"sovName",void 0),r([u],t)}(s.default);o.default=f,cc._RF.pop()},{"../../ui/controller/Switcher":"Switcher","../../ui/mvcView":"mvcView","./WeakNetGame":"WeakNetGame"}],InputSystem:[function(e,t,o){"use strict";cc._RF.push(t,"82d9d5+5xRIPLM32BWl70Qz","InputSystem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.InputSystem=o.Input=void 0;var c=e("./JoyStick"),a=cc._decorator,s=a.ccclass,l=a.property;o.Input=null;var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._target={},t.keys={},t.__touchVec=cc.Vec2.ZERO,t.radius_axis=256,t.joyStick=null,t.__lastTouch=cc.Vec2.ZERO,t.moveOffset=cc.Vec2.ZERO,t.__curTouchId=-1,t}return i(t,e),t.prototype.setDelegate=function(e){this._target=e},t.prototype.onLoad=function(){o.Input=this;for(var e=this.getComponents(cc.Component),t=0;t<e.length;t++){var n=e[t];if(n!=this&&(n.onTouchBegan||n.onTouchEnded||n.onTouchMoved)){this._target=n;break}}console.log("InputSystem Component -> target:",this._target)},t.prototype.start=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.triggerKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.triggerKeyUp,this),this.node.on(cc.Node.EventType.TOUCH_START,this.triggerTouchBegan,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.triggerTouchMoved,this),this.node.on(cc.Node.EventType.TOUCH_END,this.triggerTouchEnded,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.triggerTouchCanceled,this)},Object.defineProperty(t.prototype,"touch",{get:function(){return this.__touch},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"axis",{get:function(){return this.joyStick?this.joyStick.axis:this.__touchVec},enumerable:!1,configurable:!0}),t.prototype.getKey=function(e){return this.keys[e]},t.prototype.triggerKeyUp=function(){this._target.onKeyUp&&this._target.onKeyUp(event),this.keys[event.key]=!1},t.prototype.triggerKeyDown=function(){this._target.onKeyDown&&this._target.onKeyDown(event),this.keys[event.key]=!0},t.prototype.triggerTouchEnded=function(e){-1!=this.__curTouchId&&e.getID()!=this.__curTouchId||(this.__curTouchId=-1,this._target.onTouchEnded&&this._target.onTouchEnded(e),this.__touch=null,this.__touchVec=cc.Vec2.ZERO,e.currentTouch&&this.joyStick&&this.joyStick.touchEnd(e.currentTouch.getLocation()),this.moveOffset=cc.Vec2.ZERO)},t.prototype.triggerTouchMoved=function(e){-1!=this.__curTouchId&&e.getID()!=this.__curTouchId||(this._target.onTouchMoved&&this._target.onTouchMoved(e),this.__touch=e.currentTouch.getLocation(),this.moveOffset=this.__touch.sub(this.__lastTouch),this.__touch&&this.__startLocation&&(this.__touchVec=this.__touch.sub(this.__startLocation),this.joyStick&&this.joyStick.touchMove(this.__touch)),this.__lastTouch=this.__touch)},t.prototype.triggerTouchBegan=function(e){-1!=this.__curTouchId&&e.getID()!=this.__curTouchId||null!=this._target&&(this._target.onTouchBegan&&this._target.onTouchBegan(e),this.__curTouchId=e.getID(),this.__startLocation=e.currentTouch.getLocation(),this.__touch=e.currentTouch.getLocation(),this.__lastTouch=this.__touch,this.joyStick&&this.joyStick.touchStart(this.__startLocation))},t.prototype.triggerTouchCanceled=function(e){this.triggerTouchEnded(e)},t.prototype.onEnable=function(){this.schedule(this.checkTouch,.02)},t.prototype.onDisable=function(){this.unschedule(this.checkTouch)},t.prototype.checkTouch=function(){this.__touch&&(this.moveOffset=this.__touch.sub(this.__lastTouch))},r([l(c.default)],t.prototype,"joyStick",void 0),r([s],t)}(cc.Component);o.InputSystem=u,cc._RF.pop()},{"./JoyStick":"JoyStick"}],IpChecker:[function(e,t,o){"use strict";cc._RF.push(t,"8ff07iYVWhNhamOtohW6ykB","IpChecker");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function c(e){try{s(n.next(e))}catch(t){r(t)}}function a(e){try{s(n.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,a)}s((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return s([e,t])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./ServerConfig"),c=e("../../../../framework/misc/Net"),a=e("../../../../framework/extension/weak_net_game/WeakNetGame"),s=e("./PlayerInfo"),l=e("../../../../framework/extension/weak_net_game/UserInfo"),u=function(){function e(){}return e.checkSceneFobidden=function(e){if(csv.Config.Scene_Forbid_Switch){var t=csv.Config.Scene_Forbid_IDs.indexOf(e+"");a.default.is_forbidden=t>=0}else a.default.is_forbidden=!1},e.checkForbidden=function(e){csv.Config.IP_Forbid_Switch&&csv.Config.IP_Forbid_City.split(",").some(function(t){return e.cname.indexOf(t)>=0})?a.default.is_forbidden=!0:this.checkSceneFobidden(e.scene),console.log("WeakNetGame.scene",e.scene),console.warn("WeakNetGame.is_forbidden",a.default.is_forbidden),console.warn("WeakNetGame.is_safe_mode",a.default.is_safe_mode)},e.check_safe_mode=function(){return!!csv.Config.Safe_Mode&&1==s.PlayerInfo.playinglevel},e.checkIp=function(){return n(this,void 0,void 0,function(){var e,t,o,n,s,u;return i(this,function(i){switch(i.label){case 0:return a.default.set_safe_check_callback(this.check_safe_mode),e={cip:"",cname:"",scene:0},t=Date.now()-l.UserInfo.ip_s,console.log(l.UserInfo.ip_cname,l.UserInfo.ip_addr,t,csv.Config.IP_Refresh_Interval),""==l.UserInfo.ip_cname||""==l.UserInfo.ip_addr||t>864e5*csv.Config.IP_Refresh_Interval?[4,c.net.httpGet(r.ServerConfig.ip_api)]:[3,8];case 1:return(o=i.sent())!=c.default.Code.Timeout?[3,2]:[2,this.checkIp()];case 2:if(!o)return[3,7];i.label=3;case 3:return i.trys.push([3,5,,6]),n=o.substring(o.indexOf("{"),o.indexOf("}")+1),e=JSON.parse(n),l.UserInfo.ip_addr=e.cip,l.UserInfo.save("ip_addr"),[4,c.net.httpGet(r.ServerConfig.ip_query+e.cip)];case 4:return(s=i.sent())==c.default.Code.Timeout?[2,this.checkIp()]:(s&&0==(u=JSON.parse(s)).error_code&&(e.cname=u.result.City,l.UserInfo.ip_cname=e.cname,l.UserInfo.ip_s=Date.now(),l.UserInfo.save("ip_s"),l.UserInfo.save("ip_cname")),[3,6]);case 5:return i.sent(),[3,6];case 6:return[3,7];case 7:return[3,9];case 8:e.cip=l.UserInfo.ip_addr,e.cname=l.UserInfo.ip_cname,i.label=9;case 9:return CC_WECHATGAME?e.scene=wx.getLaunchOptionsSync().scene:e.scene=-1,this.checkForbidden(e),[2]}})})},e}();o.default=u,cc._RF.pop()},{"../../../../framework/extension/weak_net_game/UserInfo":"UserInfo","../../../../framework/extension/weak_net_game/WeakNetGame":"WeakNetGame","../../../../framework/misc/Net":"Net","./PlayerInfo":"PlayerInfo","./ServerConfig":"ServerConfig"}],ItemBall:[function(e,t,o){"use strict";cc._RF.push(t,"02da4XUgcpGwq7X1icaYL7h","ItemBall");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./AIEnemy"),a=e("./BallSkill"),s=cc._decorator,l=s.ccclass,u=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.light=null,t.moveEngine=null,t.once=!0,t}return i(t,e),t.prototype.onLoad=function(){this.light=this.node.getChildByName("light")},t.prototype.start=function(){},t.prototype.go=function(){if(this.once){for(var e=0;e<c.default.allEnemies.length;e++){var t=c.default.allEnemies[e];this.addBallSkill(t)}this.once=!1,this.light.destroy(),this.node.destroy()}},t.prototype.addBallSkill=function(e){var t=this.node.parent,o=this.node.position;cc.resources.load("Prefabs/effect/ball_skill",cc.Prefab,function(n,i){var r=cc.instantiate(i);r.getComponent(a.default).trigger(e.node),r.parent=t,r.position=o})},r([l],t)}(cc.Component));o.default=u,cc._RF.pop()},{"./AIEnemy":"AIEnemy","./BallSkill":"BallSkill"}],ItemKey:[function(e,t,o){"use strict";cc._RF.push(t,"c0cb0VvZCNA8q3LL+7jUnQZ","ItemKey");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./Door"),a=cc._decorator,s=a.ccclass,l=a.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.door=null,t.light=null,t.once=!0,t}return i(t,e),t.prototype.onLoad=function(){this.light=this.node.getChildByName("light")},t.prototype.start=function(){},t.prototype.go=function(){if(this.once){this.light.destroy();var e=this.door.node.position;cc.tween(this.node).to(.5,{position:e},{easing:"sineInOut"}).call(this.onReachTarget.bind(this)).start()}},t.prototype.onReachTarget=function(){this.door.unlock(),this.node.destroy()},r([l(c.default)],t.prototype,"door",void 0),r([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./Door":"Door"}],ItemMagnet:[function(e,t,o){"use strict";cc._RF.push(t,"1fe6aFodS1EcbSxWYGSDHc9","ItemMagnet");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},r([a],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],ItemStar:[function(e,t,o){"use strict";cc._RF.push(t,"4d846r9p4NIy6Weroi0pEoG","ItemStar");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/core/PoolManager"),a=e("../../../framework/misc/Device"),s=e("../../../framework/core/event"),l=cc._decorator,u=l.ccclass,h=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isOffTime=!1,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.playFx=function(e){a.default.playSfx("star"),c.default.get("Pool").get("get-star").position=e.position},t.prototype.onBeginContact=function(){var e=this;this.playFx(this.node),this.node.destroy(),this.scheduleOnce(function(){e.isOffTime=!1},.6),this.isOffTime||s.evt.emit("Game.getstar",this.node),this.isOffTime=!0},r([u],t)}(cc.Component));o.default=h,cc._RF.pop()},{"../../../framework/core/PoolManager":"PoolManager","../../../framework/core/event":"event","../../../framework/misc/Device":"Device"}],ItemsGroupView:[function(e,t,o){"use strict";cc._RF.push(t,"49e7ek80NVNJrZWdYpYSmVw","ItemsGroupView");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../Role"),a=e("../Levels/Effect"),s=e("../Game"),l=e("../../../framework/extension/weak_net_game/UserInfo"),u=e("../Common/Base/PlayerInfo"),h=e("../../../framework/ui/ToastManager"),f=e("../../../framework/ui/ViewManager"),p=cc._decorator,d=p.ccclass,y=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){u.PlayerInfo.isUnlock_Prop||(this.node.active=!1)},t.prototype.click_magnet=function(){u.PlayerInfo.isPlayingDaily?h.Toast.make("\u6311\u6218\u6a21\u5f0f\u4e0d\u53ef\u7528"):l.UserInfo.magnet_num>0?s.default.instance.isUsedMagnet?h.Toast.make("\u672c\u5173\u4f7f\u7528\u8fc7\u4e86"):(s.default.instance.isUsedMagnet=!0,l.UserInfo.magnet_num-=1,a.default.do_magnet()):f.default.instance.show("Prefabs/UI/UIGetProp")},t.prototype.click_snowball=function(){u.PlayerInfo.isPlayingSpecial?h.Toast.make("\u7279\u6b8a\u5173\u5361\u4e0d\u53ef\u7528"):l.UserInfo.snowball_num>0?a.default.throw_snowballs()&&(l.UserInfo.snowball_num-=1):f.default.instance.show("Prefabs/UI/UIGetProp")},t.prototype.click_gun=function(){u.PlayerInfo.isPlayingSpecial?h.Toast.make("\u7279\u6b8a\u5173\u5361\u4e0d\u53ef\u7528"):l.UserInfo.gun_num>0?c.default.self.open_fire():f.default.instance.show("Prefabs/UI/UIGetProp")},t.prototype.click_getProp=function(){f.default.instance.show("Prefabs/UI/UIGetProp")},r([d],t)}(cc.Component));o.default=y,cc._RF.pop()},{"../../../framework/extension/weak_net_game/UserInfo":"UserInfo","../../../framework/ui/ToastManager":"ToastManager","../../../framework/ui/ViewManager":"ViewManager","../Common/Base/PlayerInfo":"PlayerInfo","../Game":"Game","../Levels/Effect":"Effect","../Role":"Role"}],JoyStick:[function(e,t,o){"use strict";cc._RF.push(t,"19443OQA0RF8oVduF4TUKvS","JoyStick");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../core/Signal"),a=cc._decorator,s=a.ccclass,l=a.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.outterCircle=null,t.innerCircle=null,t.radius=250,t.innerCircleRadius=20,t.real_radius=100,t.dynamicJoystick=!1,t.autoRadius=!0,t._isReleased=!0,t.bmove=!1,t.onMove=new c.default,t._axis=cc.v2(),t._power=0,t._tmp_moveOffset=cc.v2(),t._startPos=cc.Vec2.ZERO,t.touch_id=null,t}return i(t,e),t.prototype.onLoad=function(){this.autoRadius&&(this.radius=this.outterCircle.width/2,this.innerCircleRadius=this.innerCircle.width/2),this.real_radius=this.outterCircle.width/2,this.innerCircle.setPosition(cc.Vec3.ZERO),this.node.active=!1},Object.defineProperty(t.prototype,"target",{set:function(e){e.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),e.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),e.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),e.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel,this)},enumerable:!1,configurable:!0}),t.prototype.start=function(){},t.prototype.releaseStick=function(){this.innerCircle.setPosition(cc.Vec3.ZERO),this._isReleased=!0,this.dynamicJoystick&&this.scheduleOnce(this.delayClose,.1)},t.prototype.delayClose=function(){this.node.active=!1},Object.defineProperty(t.prototype,"power",{get:function(){return this._power},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"axis",{get:function(){if(this._isReleased)return cc.Vec2.ZERO;var e=this.innerCircle.getPosition(),t=e.mag();if(0==t)return cc.Vec2.ZERO;var o=t/this.radius;return e.multiplyScalar(1/t),this._axis=cc.Vec2.multiplyScalar(this._axis,e,o),this._power=o,this._axis},enumerable:!1,configurable:!0}),t.prototype.move=function(e){var t=e.clone(),o=e.subtract(this._startPos),n=o.mag(),i=n-this.radius;if(i>0){if(o.normalizeSelf(),this.bmove&&(cc.Vec2.copy(this._tmp_moveOffset,o),(i=n-this.real_radius)>0)){this._tmp_moveOffset.multiplyScalar(i);var r=this.innerCircle.getPosition();this._startPos.x=t.x-r.x,this._startPos.y=t.y-r.y;var c=this.node.parent.convertToNodeSpaceAR(cc.v3(this._startPos.x,this._startPos.y,0));this.node.position=c}o.multiplyScalar(this.radius)}this.innerCircle.setPosition(o.x,o.y)},t.prototype.touchStart=function(e){if(null==this.touch_id||e.getID()==this.touch_id){var t=e.getLocation();if(this._startPos=t,this._isReleased=!1,this.unschedule(this.delayClose),this.node.active=!0,this.dynamicJoystick){var o=this.node.getParent().convertToNodeSpaceAR(t);this.node.setPosition(o)}}},t.prototype.touchMove=function(e){if(null==this.touch_id||e.getID()==this.touch_id){var t=e.getLocation(),o=e.getPreviousLocation(),n=t.x-o.x,i=t.y-o.y;this.onMove.fire(n,i),this.move(t)}},t.prototype.touchEnd=function(){this.releaseStick(),this.touch_id=null},t.prototype.touchCancel=function(){this.releaseStick(),this.touch_id=null},r([l(cc.Node)],t.prototype,"outterCircle",void 0),r([l(cc.Node)],t.prototype,"innerCircle",void 0),r([l({visible:function(){return!this.autoRadius}})],t.prototype,"radius",void 0),r([l({visible:function(){return!this.autoRadius}})],t.prototype,"innerCircleRadius",void 0),r([l],t.prototype,"dynamicJoystick",void 0),r([l],t.prototype,"autoRadius",void 0),r([l({displayName:"\u662f\u5426\u53ef\u79fb\u52a8",tooltip:"\u8d85\u8fc7\u8303\u56f4\u65f6\uff0c\u5c06\u968f\u624b\u6307\u79fb\u52a8"})],t.prototype,"bmove",void 0),r([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../core/Signal":"Signal"}],KeyToggle:[function(e,t,o){"use strict";cc._RF.push(t,"17eba1jqutBlKt36AWl2l0q","KeyToggle");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c},c=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function c(e){try{s(n.next(e))}catch(t){r(t)}}function a(e){try{s(n.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,a)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return s([e,t])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.KeyShape=o.KeyDir=void 0;var s,l,u=e("../../framework/core/event"),h=e("../../framework/utils/ccUtil"),f=e("../../framework/misc/Device"),p=e("../../framework/core/Signal"),d=e("../../framework/extension/weak_net_game/UserInfo"),y=e("./Game"),v=cc._decorator,_=v.ccclass,m=v.property;(function(e){e[e.Left_To_Right=0]="Left_To_Right",e[e.Right_To_Left=1]="Right_To_Left",e[e.Top_To_Bottom=2]="Top_To_Bottom",e[e.Bottom_To_Top=3]="Bottom_To_Top"})(s=o.KeyDir||(o.KeyDir={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.H=1]="H",e[e.V=2]="V",e[e.DOOR=3]="DOOR",e[e.LEFTDOOR=4]="LEFTDOOR",e[e.RIGHTDOOR=5]="RIGHTDOOR"}(l=o.KeyShape||(o.KeyShape={}));var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.joint=null,t.keyDir=s.Bottom_To_Top,t.shape=l.UNKNOWN,t.originPos=cc.v3(),t.openPos=cc.v3(),t.body=null,t.handler=null,t.collider=null,t.strongArea=!1,t.onToggleSwitched=new p.default,t.stopSign=null,t._isOpen=!1,t.curDir=cc.v2(),t._canceled=!1,t}return i(t,e),t.prototype.onLoad=function(){null==this.joint&&(this.joint=this.node.getComponentInChildren(cc.PrismaticJoint)),this.body=this.getComponent(cc.RigidBody),this.body.type=cc.RigidBodyType.Static,this.originPos=this.node.position,this.openPos=this.node.position,this.keyDir==s.Bottom_To_Top?this.openPos.y+=this.joint.upperLimit:this.keyDir==s.Left_To_Right?this.openPos.x+=this.joint.upperLimit:this.keyDir==s.Top_To_Bottom?this.openPos.y-=this.joint.upperLimit:this.keyDir==s.Right_To_Left&&(this.openPos.x-=this.joint.upperLimit),this.handler.on(cc.Node.EventType.TOUCH_START,this.click,this);var e=this.handler.getComponent(cc.PhysicsCollider);e&&e.destroy();var t=this.handler.getComponent(cc.RigidBody);if(t&&t.destroy(),this.collider=this.getComponent(cc.PhysicsCollider),this.collider.friction=.2,this.shape==l.UNKNOWN)if(0==this.node.angle)(o=this.node.width/this.node.height)<2&&o>1?this.shape=l.DOOR:o>2?(this.shape=l.H,this.node.height=13):this.shape=l.V;else if(90==this.node.angle){var o;(o=this.node.width/this.node.height)<2?(this.shape=l.H,this.node.width=13):this.shape=l.V}console.log(l[this.shape]),this.shape==l.H?this.getInvisibleHandler():this.shape==l.V?(this.getInvisibleHandler(),this.node.height=13):this.shape==l.DOOR?(this.createEdge(cc.v2(0,1)),this.createEdge(cc.v2(-1,0)),this.createEdge(cc.v2(1,0))):this.shape==l.LEFTDOOR?(this.createEdge(cc.v2(0,1)),this.createEdge(cc.v2(-1,0)),this.createEdge(cc.v2(1,0))):this.shape==l.RIGHTDOOR&&(this.createEdge(cc.v2(0,1)),this.createEdge(cc.v2(-1,0)),this.createEdge(cc.v2(1,0)));for(var n=this.getComponentsInChildren(cc.Sprite),i=0;i<n.length;i++)h.default.setDisplay(n[i],"Img/level/"+n[i].spriteFrame.name+d.UserInfo.theme_key)},t.prototype.createEdge=function(e){var t=new cc.Node;t.parent=this.node,0!=e.y?(t.width=this.node.width,t.height=50):0!=e.x&&(t.width=50,t.height=this.node.height);var o=t.getPosition();o.addSelf(e.multiply(cc.v2(this.node.width/2,this.node.height/2))),t.setPosition(o),t.on(cc.Node.EventType.TOUCH_START,this.click,this)},t.prototype.createStopSign=function(){return c(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return[4,h.default.getRes("Prefabs/misc/stop",cc.Prefab)];case 1:return e=t.sent(),this.stopSign=cc.instantiate(e),this.node.addChild(this.stopSign),[2]}})})},t.prototype.start=function(){},Object.defineProperty(t.prototype,"isOpen",{get:function(){return this._isOpen},enumerable:!1,configurable:!0}),t.prototype._switch=function(){this._isOpen?(cc.tween(this.node).to(.5,{position:this.openPos},{easing:"sineInOut"}).call(this.onFinish.bind(this)).start(),this.curDir.y=this.openPos.y-this.node.y):(cc.tween(this.node).to(.5,{position:this.originPos},{easing:"sineInOut"}).call(this.onFinish.bind(this)).start(),this.curDir.y=this.originPos.y-this.node.y)},t.prototype.getInvisibleHandler=function(){if(null==this._invisibleHandler){var e=new cc.Node;e.width=this.node.width,e.height=this.node.height,this.node.width<this.node.height?e.width=50:e.height=50,e.parent=this.node,e.on(cc.Node.EventType.TOUCH_START,this.click,this),this._invisibleHandler=e}return this._invisibleHandler},t.prototype.checkNeedMoveBack=function(){this._invisibleHandler&&(this._invisibleHandler.active=!0)},t.prototype.toggle=function(){this._canceled=!1,this._isOpen=!this._isOpen,this._switch()},t.prototype.cancel=function(){this._canceled=!0,this._switch()},t.prototype.onFinish=function(){this._canceled||(this.checkNeedMoveBack(),this.curDir.y=0,u.evt.emit("Game.keyMoved",this),this.onToggleSwitched.fire(this))},t.prototype.click=function(){y.default.instance.activeGame(),f.default.playSfx("key"),u.evt.emit("Game.keyClick"),this.toggle()},r([m(cc.PrismaticJoint)],t.prototype,"joint",void 0),r([m({type:cc.Enum(s),displayName:"\u79fb\u52a8\u65b9\u5411"})],t.prototype,"keyDir",void 0),r([m({type:cc.Enum(l),displayName:"\u6c34\u5e73/\u5782\u76f4"})],t.prototype,"shape",void 0),r([m(cc.RigidBody)],t.prototype,"body",void 0),r([m(cc.Node)],t.prototype,"handler",void 0),r([m({displayName:"\u589e\u5f3a\u70ed\u533a"})],t.prototype,"strongArea",void 0),r([_],t)}(cc.Component);o.default=g,cc._RF.pop()},{"../../framework/core/Signal":"Signal","../../framework/core/event":"event","../../framework/extension/weak_net_game/UserInfo":"UserInfo","../../framework/misc/Device":"Device","../../framework/utils/ccUtil":"ccUtil","./Game":"Game"}],LabelAnim:[function(e,t,o){"use strict";cc._RF.push(t,"0d9c5C1JZxCCaI1096eaH/G","LabelAnim");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./UIBaseAnim"),a=cc._decorator,s=a.ccclass,l=(a.property,a.menu),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.duration=1,t.from=0,t.to=0,t.label=null,t}return i(t,e),t.prototype.onLoad=function(){this.label=this.getComponent(cc.Label)},t.prototype.start=function(){},t.prototype.play=function(e,t,o){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===o&&(o=0),this.from=t,this.to=o,this.duration=e||this.duration,this.pasr.a=this.duration,this.pasr.reset(),this.onFinish.wait()},t.prototype.onTick=function(e){var t=cc.misc.lerp(this.from,this.to,e);this.label.string=t.toFixed()},r([s,l("\u57fa\u7840\u52a8\u753b/LabelAnim")],t)}(c.default);o.default=u,cc._RF.pop()},{"./UIBaseAnim":"UIBaseAnim"}],LabelPlayer:[function(e,t,o){"use strict";cc._RF.push(t,"3b8f1hzBQ5C761ZuzaFRz7h","LabelPlayer");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=c.menu,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.framePerSec=15,t.cursor=0,t.end=0,t.isLoop=!1,t._start=0,t.isPlaying=!1,t.animations=[],t.index2Frames=[],t.currentFrames=[],t.playOnLoad=!1,t}return i(t,e),t.prototype.onLoad=function(){var e=this;this.label=this.getComponent(cc.Label),this.animations.forEach(function(t){var o,n=t.split("-"),i=n[0],r=n[1];o=r?range(i,r):t.split(",").map(function(e){return Number(e)}),e.index2Frames.push(o)})},Object.defineProperty(t.prototype,"interval",{get:function(){return 1/this.framePerSec},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.playOnLoad&&this.playWithIndex(0,!0)},t.prototype._play=function(e,t,o){void 0===o&&(o=!1),this.isPlaying=!0,this._start=e,this.cursor=e,this.end=t,this.isLoop=o},t.prototype.play=function(e,t,o){void 0===o&&(o=!1);var n=range(e,t);this.playArray(n,o)},t.prototype.playIndexLoop=function(e){this.playArray(this.index2Frames[e],!0)},t.prototype.playIndex=function(e){this.playArray(this.index2Frames[e],!1)},t.prototype.playWithIndex=function(e,t){void 0===t&&(t=!1),this.playArray(this.index2Frames[e],t)},t.prototype.setInterval=function(){this.unschedule(this.step),this.schedule(this.step,this.interval)},t.prototype.playArray=function(e,t){void 0===t&&(t=!1),this.currentFrames=e,this._play(0,e.length-1,t)},t.prototype.onEnable=function(){this.schedule(this.step,this.interval)},t.prototype.onDisable=function(){this.unschedule(this.step)},t.prototype.step=function(){if(this.isPlaying){var e=this.currentFrames[this.cursor];this.label.string=e.toString(),this.cursor++,this.cursor>this.end&&(this.isLoop?this.cursor=this._start:this.isPlaying=!1)}},r([s({slide:!0,range:[1,60],step:1})],t.prototype,"framePerSec",void 0),r([s({type:[cc.String]})],t.prototype,"animations",void 0),r([s],t.prototype,"playOnLoad",void 0),r([a,l("gamelib/LabelPlayer")],t)}(cc.Component);o.default=u,cc._RF.pop()},{}],LayerRenderToTexture:[function(e,t,o){"use strict";cc._RF.push(t,"632eeBT909AKJLQqhX9Jmtg","LayerRenderToTexture");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.camera=null,t.display=null,t}return i(t,e),t.prototype.onLoad=function(){var e=new cc.RenderTexture;e.initWithSize(cc.winSize.width,cc.winSize.height),this.display.node.width=cc.winSize.width,this.display.node.height=cc.winSize.height;var t=new cc.SpriteFrame;t.setTexture(e),this.camera.targetTexture=e,this.display.spriteFrame=t,this.display.node.scaleY=-1},r([s(cc.Camera)],t.prototype,"camera",void 0),r([s(cc.Sprite)],t.prototype,"display",void 0),r([a],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],LevelInfo:[function(e,t,o){"use strict";cc._RF.push(t,"bc98dB2EZJKyKRZHoS2DtzF","LevelInfo");var n=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.LevelInfo=void 0;var i=cc._decorator,r=i.ccclass,c=(i.property,function(){function e(e){this.id=0,this.chapter=0,this.isNew=!1;var t=csv.level.get(e);t&&(this.id=t.id,this.chapter=t.chapter,this.isNew=1==t.isNew)}return n([r],e)}());o.LevelInfo=c,cc._RF.pop()},{}],LevelLoader:[function(e,t,o){"use strict";cc._RF.push(t,"c54a7cm6XlB2b3eaP/Cgyq4","LevelLoader");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../framework/ui/controller/PrefabLoader"),a=cc._decorator,s=a.ccclass,l=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},r([s],t)}(c.default));o.default=l,c.default.register(l,"Prefabs/Levels"),cc._RF.pop()},{"../../framework/ui/controller/PrefabLoader":"PrefabLoader"}],LevelSelector:[function(e,t,o){"use strict";cc._RF.push(t,"b7942O9SJ1JFpcT0/D7YiFO","LevelSelector");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=(c.help,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pageview=null,t.template=null,t.onSelectLevel=new cc.Component.EventHandler,t.onRefreshItem=new cc.Component.EventHandler,t.index=0,t.max=9,t.itemCountPerPage=0,t.pages=[],t.currentLevel=1,t.autoScrollToCurrentLevel=!0,t}return i(t,e),t.prototype.selectLevel=function(e){this.onSelectLevel?this.onSelectLevel.emit([e.target,Number(e.target.name)]):console.warn("LevelSelector: onSelectLevel callback is nil")},t.prototype.onLoad=function(){this.pages.splice(0,this.pages.length),this.itemCountPerPage=this.template.childrenCount;var e=Math.floor(this.max/this.itemCountPerPage);this.max%this.itemCountPerPage>0&&(e+=1);for(var t=0;t<e-1;t++){var o=cc.instantiate(this.template);this.pageview.addPage(o),this.pages.push(o)}this.pages.push(this.template);for(var n=0;n<e;n++){o=this.pages[n];for(var i=0;i<o.childrenCount;i++){var r=o.children[i],c=r.getChildByName("label"),a=n*this.itemCountPerPage+Number(i)+1;a>this.max&&(r.active=!1),r.name=a+"",c.getComponent(cc.Label).string=r.name}}},t.prototype.refreshItem=function(e,t){t>this.currentLevel?(e.opacity=100,e.getComponent(cc.Button).enabled=!1):(e.opacity=255,e.getComponent(cc.Button).enabled=!0)},t.prototype.refresh=function(){console.log("LevelSelctor: refresh");for(var e=0;e<this.pages.length;e++)for(var t=this.pages[e],o=0;o<t.childrenCount;o++){var n=t.children[o],i=e*this.itemCountPerPage+Number(o)+1;this.refreshItem(n,i),this.onRefreshItem.emit([n,i])}this.autoScrollToCurrentLevel&&this.scrollToCurrentLevel()},t.prototype.start=function(){},t.prototype.scrollToCurrentLevel=function(){var e=this.currentLevel,t=Math.floor(e/this.itemCountPerPage);0==e%this.itemCountPerPage&&(t-=1),this.pageview.scrollToPage(t,.3)},t.prototype.nextPage=function(){this.pageview.scrollToPage(this.pageview.getCurrentPageIndex()+1,.3)},t.prototype.prevPage=function(){this.pageview.scrollToPage(this.pageview.getCurrentPageIndex()-1,.3)},r([s(cc.PageView)],t.prototype,"pageview",void 0),r([s(cc.Node)],t.prototype,"template",void 0),r([s(cc.Component.EventHandler)],t.prototype,"onSelectLevel",void 0),r([s(cc.Component.EventHandler)],t.prototype,"onRefreshItem",void 0),r([s],t.prototype,"index",void 0),r([s],t.prototype,"max",void 0),r([a],t)}(cc.Component));o.default=l,cc._RF.pop()},{}],ListItem:[function(e,t,o){"use strict";cc._RF.push(t,"88b9fHxkEhFTYhFm2LPriaB","ListItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c,a=cc._decorator,s=a.ccclass,l=a.property,u=a.disallowMultiple,h=a.menu,f=a.executionOrder;(function(e){e[e.NONE=0]="NONE",e[e.TOGGLE=1]="TOGGLE",e[e.SWITCH=2]="SWITCH"})(c||(c={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.title=null,t.selectedMode=c.NONE,t.selectedFlag=null,t.selectedSpriteFrame=null,t._unselectedSpriteFrame=null,t.adaptiveSize=!1,t._selected=!1,t._eventReg=!1,t}return i(t,e),Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},set:function(e){if(this._selected=e,this.selectedFlag)switch(this.selectedMode){case c.TOGGLE:this.selectedFlag.active=e;break;case c.SWITCH:var t=this.selectedFlag.getComponent(cc.Sprite);t&&(t.spriteFrame=e?this.selectedSpriteFrame:this._unselectedSpriteFrame)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"btnCom",{get:function(){return this._btnCom||(this._btnCom=this.node.getComponent(cc.Button)),this._btnCom},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){if(this.selectedMode==c.SWITCH){var e=this.selectedFlag.getComponent(cc.Sprite);this._unselectedSpriteFrame=e.spriteFrame}},t.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this)},t.prototype._registerEvent=function(){this._eventReg||(this.btnCom&&this.list.selectedMode>0&&this.btnCom.clickEvents.unshift(this.createEvt(this,"onClickThis")),this.adaptiveSize&&this.node.on(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this),this._eventReg=!0)},t.prototype._onSizeChange=function(){this.list._onItemAdaptive(this.node)},t.prototype.createEvt=function(e,t,o){if(void 0===o&&(o=null),e.isValid){e.comName=e.comName||e.name.match(/\<(.*?)\>/g).pop().replace(/\<|>/g,"");var n=new cc.Component.EventHandler;return n.target=o||e.node,n.component=e.comName,n.handler=t,n}},t.prototype.showAni=function(e,t,o){var n,i=this;switch(e){case 0:n=[cc.scaleTo(.2,.7),cc.moveBy(.3,0,2*this.node.height)];break;case 1:n=[cc.scaleTo(.2,.7),cc.moveBy(.3,2*this.node.width,0)];break;case 2:n=[cc.scaleTo(.2,.7),cc.moveBy(.3,0,-2*this.node.height)];break;case 3:n=[cc.scaleTo(.2,.7),cc.moveBy(.3,-2*this.node.width,0)];break;default:n=[cc.scaleTo(.3,.1)]}(t||o)&&n.push(cc.callFunc(function(){if(o){i.list._delSingleItem(i.node);for(var e=i.list.displayData.length-1;e>=0;e--)if(i.list.displayData[e].id==i.listId){i.list.displayData.splice(e,1);break}}t()})),this.node.runAction(cc.sequence(n))},t.prototype.onClickThis=function(){this.list.selectedId=this.listId},r([l({type:cc.Sprite,tooltip:!1})],t.prototype,"icon",void 0),r([l({type:cc.Node,tooltip:!1})],t.prototype,"title",void 0),r([l({type:cc.Enum(c),tooltip:!1})],t.prototype,"selectedMode",void 0),r([l({type:cc.Node,tooltip:!1,visible:function(){return this.selectedMode>c.NONE}})],t.prototype,"selectedFlag",void 0),r([l({type:cc.SpriteFrame,tooltip:!1,visible:function(){return this.selectedMode==c.SWITCH}})],t.prototype,"selectedSpriteFrame",void 0),r([l({tooltip:!1})],t.prototype,"adaptiveSize",void 0),r([s,u(),h("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/List Item"),f(-5001)],t)}(cc.Component);o.default=p,cc._RF.pop()},{}],ListView:[function(e,t,o){"use strict";cc._RF.push(t,"bedbcoNM1VGbaPc9u1t4F8y","ListView");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c,a,s,l=cc._decorator,u=l.ccclass,h=l.property,f=l.disallowMultiple,p=l.menu,d=l.executionOrder,y=l.requireComponent,v=e("./ListItem");(function(e){e[e.NODE=1]="NODE",e[e.PREFAB=2]="PREFAB"})(c||(c={})),function(e){e[e.NORMAL=1]="NORMAL",e[e.ADHERING=2]="ADHERING",e[e.PAGE=3]="PAGE"}(a||(a={})),function(e){e[e.NONE=0]="NONE",e[e.SINGLE=1]="SINGLE",e[e.MULT=2]="MULT"}(s||(s={}));var _=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.templateType=c.NODE,t.tmpNode=null,t.tmpPrefab=null,t._slideMode=a.NORMAL,t.pageDistance=.3,t.pageChangeEvent=new cc.Component.EventHandler,t._virtual=!0,t.cyclic=!1,t.lackCenter=!1,t.lackSlide=!1,t._updateRate=0,t.frameByFrameRenderNum=0,t.renderEvent=new cc.Component.EventHandler,t.selectedMode=s.NONE,t.repeatEventSingle=!1,t.selectedEvent=null,t._selectedId=-1,t._forceUpdate=!1,t._updateDone=!0,t._numItems=0,t._inited=!1,t._needUpdateWidget=!1,t._aniDelRuning=!1,t._doneAfterUpdate=!1,t.adhering=!1,t._adheringBarrier=!1,t.curPageNum=0,t}return i(t,e),Object.defineProperty(t.prototype,"slideMode",{get:function(){return this._slideMode},set:function(e){this._slideMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"virtual",{get:function(){return this._virtual},set:function(e){null!=e&&(this._virtual=e),0!=this._numItems&&this._onScrolling()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateRate",{get:function(){return this._updateRate},set:function(e){e>=0&&e<=6&&(this._updateRate=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedId",{get:function(){return this._selectedId},set:function(e){var t,o=this;switch(o.selectedMode){case s.SINGLE:if(!o.repeatEventSingle&&e==o._selectedId)return;t=o.getItemByListId(e);var n=void 0;if(o._selectedId>=0?o._lastSelectedId=o._selectedId:o._lastSelectedId=null,o._selectedId=e,t&&((n=t.getComponent(v.default)).selected=!0),o._lastSelectedId>=0&&o._lastSelectedId!=o._selectedId){var i=o.getItemByListId(o._lastSelectedId);i&&(i.getComponent(v.default).selected=!1)}o.selectedEvent&&cc.Component.EventHandler.emitEvents([o.selectedEvent],t,e%this._actualNumItems,null==o._lastSelectedId?null:o._lastSelectedId%this._actualNumItems);break;case s.MULT:if(!(t=o.getItemByListId(e)))return;n=t.getComponent(v.default),o._selectedId>=0&&(o._lastSelectedId=o._selectedId),o._selectedId=e;var r=!n.selected;n.selected=r;var c=o.multSelected.indexOf(e);r&&c<0?o.multSelected.push(e):!r&&c>=0&&o.multSelected.splice(c,1),o.selectedEvent&&cc.Component.EventHandler.emitEvents([o.selectedEvent],t,e%this._actualNumItems,null==o._lastSelectedId?null:o._lastSelectedId%this._actualNumItems,r)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"numItems",{get:function(){return this._actualNumItems},set:function(e){var t=this;if(t.checkInited(!1))if(null==e||e<0)cc.error("numItems set the wrong::",e);else if(t._actualNumItems=t._numItems=e,t._forceUpdate=!0,t._virtual)t._resizeContent(),t.cyclic&&(t._numItems=t._cyclicNum*t._numItems),t._onScrolling(),t.frameByFrameRenderNum||t.slideMode!=a.PAGE||(t.curPageNum=t.nearestListId);else{var o=t.content.getComponent(cc.Layout);if(o&&(o.enabled=!0),t._delRedundantItem(),t.firstListId=0,t.frameByFrameRenderNum>0){for(var n=t.frameByFrameRenderNum>t._numItems?t._numItems:t.frameByFrameRenderNum,i=0;i<n;i++)t._createOrUpdateItem2(i);t.frameByFrameRenderNum<t._numItems&&(t._updateCounter=t.frameByFrameRenderNum,t._updateDone=!1)}else{for(i=0;i<e;i++)t._createOrUpdateItem2(i);t.displayItemNum=e}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scrollView",{get:function(){return this._scrollView},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this._init()},t.prototype.onDestroy=function(){var e=this;for(e._itemTmp&&e._itemTmp.isValid&&e._itemTmp.destroy(),e.tmpNode&&e.tmpNode.isValid&&e.tmpNode.destroy();e._pool.size();)e._pool.get().destroy()},t.prototype.onEnable=function(){this._registerEvent(),this._init()},t.prototype.onDisable=function(){this._unregisterEvent()},t.prototype._registerEvent=function(){var e=this;e.node.on(cc.Node.EventType.TOUCH_START,e._onTouchStart,e,!0),e.node.on("touch-up",e._onTouchUp,e),e.node.on(cc.Node.EventType.TOUCH_CANCEL,e._onTouchCancelled,e,!0),e.node.on("scroll-began",e._onScrollBegan,e,!0),e.node.on("scroll-ended",e._onScrollEnded,e,!0),e.node.on("scrolling",e._onScrolling,e,!0),e.node.on(cc.Node.EventType.SIZE_CHANGED,e._onSizeChanged,e)},t.prototype._unregisterEvent=function(){var e=this;e.node.off(cc.Node.EventType.TOUCH_START,e._onTouchStart,e,!0),e.node.off("touch-up",e._onTouchUp,e),e.node.off(cc.Node.EventType.TOUCH_CANCEL,e._onTouchCancelled,e,!0),e.node.off("scroll-began",e._onScrollBegan,e,!0),e.node.off("scroll-ended",e._onScrollEnded,e,!0),e.node.off("scrolling",e._onScrolling,e,!0),e.node.off(cc.Node.EventType.SIZE_CHANGED,e._onSizeChanged,e)},t.prototype._init=function(){var e=this;if(!e._inited)if(e._scrollView=e.node.getComponent(cc.ScrollView),e.content=e._scrollView.content,e.content){switch(e._layout=e.content.getComponent(cc.Layout),e._align=e._layout.type,e._resizeMode=e._layout.resizeMode,e._startAxis=e._layout.startAxis,e._topGap=e._layout.paddingTop,e._rightGap=e._layout.paddingRight,e._bottomGap=e._layout.paddingBottom,e._leftGap=e._layout.paddingLeft,e._columnGap=e._layout.spacingX,e._lineGap=e._layout.spacingY,e._colLineNum,e._verticalDir=e._layout.verticalDirection,e._horizontalDir=e._layout.horizontalDirection,e.setTemplateItem(cc.instantiate(e.templateType==c.PREFAB?e.tmpPrefab:e.tmpNode)),e._slideMode!=a.ADHERING&&e._slideMode!=a.PAGE||(e._scrollView.inertia=!1,e._scrollView._onMouseWheel=function(){}),e.virtual||(e.lackCenter=!1),e._lastDisplayData=[],e.displayData=[],e._pool=new cc.NodePool,e._forceUpdate=!1,e._updateCounter=0,e._updateDone=!0,e.curPageNum=0,e.cyclic&&(e._scrollView._processAutoScrolling=this._processAutoScrolling.bind(e),e._scrollView._startBounceBackIfNeeded=function(){return!1}),e._align){case cc.Layout.Type.HORIZONTAL:switch(e._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:e._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:e._alignCalcType=2}break;case cc.Layout.Type.VERTICAL:switch(e._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:e._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:e._alignCalcType=4}break;case cc.Layout.Type.GRID:switch(e._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(e._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:e._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:e._alignCalcType=4}break;case cc.Layout.AxisDirection.VERTICAL:switch(e._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:e._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:e._alignCalcType=2}}}e.content.removeAllChildren(),e._inited=!0}else cc.error(e.node.name+"'s cc.ScrollView unset content!")},t.prototype._processAutoScrolling=function(e){this._scrollView._autoScrollAccumulatedTime+=1*e;var t=Math.min(1,this._scrollView._autoScrollAccumulatedTime/this._scrollView._autoScrollTotalTime);if(this._scrollView._autoScrollAttenuate){var o=t-1;t=o*o*o*o*o+1}var n=this._scrollView._autoScrollStartPosition.add(this._scrollView._autoScrollTargetDelta.mul(t)),i=this._scrollView.getScrollEndedEventTiming(),r=Math.abs(t-1)<=i;Math.abs(t-1)<=this._scrollView.getScrollEndedEventTiming()&&!this._scrollView._isScrollEndedWithThresholdEventFired&&(this._scrollView._dispatchEvent("scroll-ended-with-threshold"),this._scrollView._isScrollEndedWithThresholdEventFired=!0),r&&(this._scrollView._autoScrolling=!1);var c=n.sub(this._scrollView.getContentPosition());this._scrollView._moveContent(this._scrollView._clampDelta(c),r),this._scrollView._dispatchEvent("scrolling"),this._scrollView._autoScrolling||(this._scrollView._isBouncing=!1,this._scrollView._scrolling=!1,this._scrollView._dispatchEvent("scroll-ended"))},t.prototype.setTemplateItem=function(e){if(e){var t=this;t._itemTmp=e,t._resizeMode==cc.Layout.ResizeMode.CHILDREN?t._itemSize=t._layout.cellSize:t._itemSize=cc.size(e.width,e.height);var o=e.getComponent(v.default),n=!1;switch(o||(n=!0),n&&(t.selectedMode=s.NONE),(o=e.getComponent(cc.Widget))&&o.enabled&&(t._needUpdateWidget=!0),t.selectedMode==s.MULT&&(t.multSelected=[]),t._align){case cc.Layout.Type.HORIZONTAL:t._colLineNum=1,t._sizeType=!1;break;case cc.Layout.Type.VERTICAL:t._colLineNum=1,t._sizeType=!0;break;case cc.Layout.Type.GRID:switch(t._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var i=t.content.width-t._leftGap-t._rightGap;t._colLineNum=Math.floor((i+t._columnGap)/(t._itemSize.width+t._columnGap)),t._sizeType=!0;break;case cc.Layout.AxisDirection.VERTICAL:var r=t.content.height-t._topGap-t._bottomGap;t._colLineNum=Math.floor((r+t._lineGap)/(t._itemSize.height+t._lineGap)),t._sizeType=!1}}}},t.prototype.checkInited=function(e){return void 0===e&&(e=!0),!!this._inited||(e&&cc.error("List initialization not completed!"),!1)},t.prototype._resizeContent=function(){var e,t=this;switch(t._align){case cc.Layout.Type.HORIZONTAL:if(t._customSize){var o=t._getFixedSize(null);e=t._leftGap+o.val+t._itemSize.width*(t._numItems-o.count)+t._columnGap*(t._numItems-1)+t._rightGap}else e=t._leftGap+t._itemSize.width*t._numItems+t._columnGap*(t._numItems-1)+t._rightGap;break;case cc.Layout.Type.VERTICAL:t._customSize?(o=t._getFixedSize(null),e=t._topGap+o.val+t._itemSize.height*(t._numItems-o.count)+t._lineGap*(t._numItems-1)+t._bottomGap):e=t._topGap+t._itemSize.height*t._numItems+t._lineGap*(t._numItems-1)+t._bottomGap;break;case cc.Layout.Type.GRID:switch(t.lackCenter&&(t.lackCenter=!1),t._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var n=Math.ceil(t._numItems/t._colLineNum);e=t._topGap+t._itemSize.height*n+t._lineGap*(n-1)+t._bottomGap;break;case cc.Layout.AxisDirection.VERTICAL:var i=Math.ceil(t._numItems/t._colLineNum);e=t._leftGap+t._itemSize.width*i+t._columnGap*(i-1)+t._rightGap}}var r=t.content.getComponent(cc.Layout);if(r&&(r.enabled=!1),t._allItemSize=e,t._allItemSizeNoEdge=t._allItemSize-(t._sizeType?t._topGap+t._bottomGap:t._leftGap+t._rightGap),t.cyclic){var c=t._sizeType?t.node.height:t.node.width;t._cyclicPos1=0,c-=t._cyclicPos1,t._cyclicNum=Math.ceil(c/t._allItemSizeNoEdge)+1;var a=t._sizeType?t._lineGap:t._columnGap;t._cyclicPos2=t._cyclicPos1+t._allItemSizeNoEdge+a,t._cyclicAllItemSize=t._allItemSize+t._allItemSizeNoEdge*(t._cyclicNum-1)+a*(t._cyclicNum-1),t._cycilcAllItemSizeNoEdge=t._allItemSizeNoEdge*t._cyclicNum,t._cycilcAllItemSizeNoEdge+=a*(t._cyclicNum-1)}t._lack=!t.cyclic&&t._allItemSize<(t._sizeType?t.node.height:t.node.width);var s=t._lack&&t.lackCenter||!t.lackSlide?.1:0,l=t._lack?(t._sizeType?t.node.height:t.node.width)-s:t.cyclic?t._cyclicAllItemSize:t._allItemSize;l<0&&(l=0),t._sizeType?t.content.height=l:t.content.width=l},t.prototype._onScrolling=function(e){if(void 0===e&&(e=null),null==this.frameCount&&(this.frameCount=this._updateRate),!this._forceUpdate&&e&&"scroll-ended"!=e.type&&this.frameCount>0)this.frameCount--;else if(this.frameCount=this._updateRate,!this._aniDelRuning){if(this.cyclic){var t=this.content.getPosition();t=this._sizeType?t.y:t.x;var o=this._allItemSizeNoEdge+(this._sizeType?this._lineGap:this._columnGap),n=this._sizeType?cc.v2(0,o):cc.v2(o,0);switch(this._alignCalcType){case 1:t>-this._cyclicPos1?(this.content.x=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(n))):t<-this._cyclicPos2&&(this.content.x=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(n)));break;case 2:t<this._cyclicPos1?(this.content.x=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(n))):t>this._cyclicPos2&&(this.content.x=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(n)));break;case 3:t<this._cyclicPos1?(this.content.y=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(n))):t>this._cyclicPos2&&(this.content.y=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(n)));break;case 4:t>-this._cyclicPos1?(this.content.y=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(n))):t<-this._cyclicPos2&&(this.content.y=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(n)))}}var i,r,c,a;if(this._calcViewPos(),this._sizeType?(i=this.viewTop,c=this.viewBottom):(r=this.viewRight,a=this.viewLeft),this._virtual){this.displayData=[];var s=void 0,l=0,u=this._numItems-1;if(this._customSize)for(var h=!1;l<=u&&!h;l++)switch(s=this._calcItemPos(l),this._align){case cc.Layout.Type.HORIZONTAL:s.right>=a&&s.left<=r?this.displayData.push(s):0!=l&&this.displayData.length>0&&(h=!0);break;case cc.Layout.Type.VERTICAL:s.bottom<=i&&s.top>=c?this.displayData.push(s):0!=l&&this.displayData.length>0&&(h=!0);break;case cc.Layout.Type.GRID:switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:s.bottom<=i&&s.top>=c?this.displayData.push(s):0!=l&&this.displayData.length>0&&(h=!0);break;case cc.Layout.AxisDirection.VERTICAL:s.right>=a&&s.left<=r?this.displayData.push(s):0!=l&&this.displayData.length>0&&(h=!0)}}else{var f=this._itemSize.width+this._columnGap,p=this._itemSize.height+this._lineGap;switch(this._alignCalcType){case 1:l=(a+this._leftGap)/f,u=(r+this._rightGap)/f;break;case 2:l=(-r-this._rightGap)/f,u=(-a-this._leftGap)/f;break;case 3:l=(-i-this._topGap)/p,u=(-c-this._bottomGap)/p;break;case 4:l=(c+this._bottomGap)/p,u=(i+this._topGap)/p}for(l=Math.floor(l)*this._colLineNum,u=Math.ceil(u)*this._colLineNum,l<0&&(l=0),--u>=this._numItems&&(u=this._numItems-1);l<=u;l++)this.displayData.push(this._calcItemPos(l))}if(this._delRedundantItem(),this.displayData.length<=0||!this._numItems)return void(this._lastDisplayData=[]);this.firstListId=this.displayData[0].id,this.displayItemNum=this.displayData.length;var d=this._lastDisplayData.length,y=this.displayItemNum!=d;if(y&&(this.frameByFrameRenderNum>0&&this._lastDisplayData.sort(function(e,t){return e-t}),y=this.firstListId!=this._lastDisplayData[0]||this.displayData[this.displayItemNum-1].id!=this._lastDisplayData[d-1]),this._forceUpdate||y)if(this.frameByFrameRenderNum>0)this._numItems>0?(this._updateDone?this._updateCounter=0:this._doneAfterUpdate=!0,this._updateDone=!1):(this._updateCounter=0,this._updateDone=!0);else{this._lastDisplayData=[];for(var v=0;v<this.displayItemNum;v++)this._createOrUpdateItem(this.displayData[v]);this._forceUpdate=!1}this._calcNearestItem()}}},t.prototype._calcViewPos=function(){var e=this.content.getPosition();switch(this._alignCalcType){case 1:this.elasticLeft=e.x>0?e.x:0,this.viewLeft=(e.x<0?-e.x:0)-this.elasticLeft,this.viewRight=this.viewLeft+this.node.width,this.elasticRight=this.viewRight>this.content.width?Math.abs(this.viewRight-this.content.width):0,this.viewRight+=this.elasticRight;break;case 2:this.elasticRight=e.x<0?-e.x:0,this.viewRight=(e.x>0?-e.x:0)+this.elasticRight,this.viewLeft=this.viewRight-this.node.width,this.elasticLeft=this.viewLeft<-this.content.width?Math.abs(this.viewLeft+this.content.width):0,this.viewLeft-=this.elasticLeft;break;case 3:this.elasticTop=e.y<0?Math.abs(e.y):0,this.viewTop=(e.y>0?-e.y:0)+this.elasticTop,this.viewBottom=this.viewTop-this.node.height,this.elasticBottom=this.viewBottom<-this.content.height?Math.abs(this.viewBottom+this.content.height):0,this.viewBottom+=this.elasticBottom;break;case 4:this.elasticBottom=e.y>0?Math.abs(e.y):0,this.viewBottom=(e.y<0?-e.y:0)-this.elasticBottom,this.viewTop=this.viewBottom+this.node.height,this.elasticTop=this.viewTop>this.content.height?Math.abs(this.viewTop-this.content.height):0,this.viewTop-=this.elasticTop}},t.prototype._calcItemPos=function(e){var t,o,n,i,r,c,a,s;switch(this._align){case cc.Layout.Type.HORIZONTAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:if(this._customSize){var l=this._getFixedSize(e);r=this._leftGap+(this._itemSize.width+this._columnGap)*(e-l.count)+(l.val+this._columnGap*l.count),t=(u=this._customSize[e])>0?u:this._itemSize.width}else r=this._leftGap+(this._itemSize.width+this._columnGap)*e,t=this._itemSize.width;return c=r+t,this.lackCenter&&(r+=h=this.content.width/2-this._allItemSizeNoEdge/2,c+=h),{id:e,left:r,right:c,x:r+this._itemTmp.anchorX*t,y:this._itemTmp.y};case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:return this._customSize?(l=this._getFixedSize(e),c=-this._rightGap-(this._itemSize.width+this._columnGap)*(e-l.count)-(l.val+this._columnGap*l.count),t=(u=this._customSize[e])>0?u:this._itemSize.width):(c=-this._rightGap-(this._itemSize.width+this._columnGap)*e,t=this._itemSize.width),r=c-t,this.lackCenter&&(r-=h=this.content.width/2-this._allItemSizeNoEdge/2,c-=h),{id:e,right:c,left:r,x:r+this._itemTmp.anchorX*t,y:this._itemTmp.y}}break;case cc.Layout.Type.VERTICAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:return this._customSize?(l=this._getFixedSize(e),n=-this._topGap-(this._itemSize.height+this._lineGap)*(e-l.count)-(l.val+this._lineGap*l.count),o=(u=this._customSize[e])>0?u:this._itemSize.height):(n=-this._topGap-(this._itemSize.height+this._lineGap)*e,o=this._itemSize.height),i=n-o,this.lackCenter&&(n-=h=this.content.height/2-this._allItemSizeNoEdge/2,i-=h),{id:e,top:n,bottom:i,x:this._itemTmp.x,y:i+this._itemTmp.anchorY*o};case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:var u,h;if(this._customSize)l=this._getFixedSize(e),i=this._bottomGap+(this._itemSize.height+this._lineGap)*(e-l.count)+(l.val+this._lineGap*l.count),o=(u=this._customSize[e])>0?u:this._itemSize.height;else i=this._bottomGap+(this._itemSize.height+this._lineGap)*e,o=this._itemSize.height;return n=i+o,this.lackCenter&&(n+=h=this.content.height/2-this._allItemSizeNoEdge/2,i+=h),{id:e,top:n,bottom:i,x:this._itemTmp.x,y:i+this._itemTmp.anchorY*o}}case cc.Layout.Type.GRID:var f=Math.floor(e/this._colLineNum);switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:s=(i=(n=-this._topGap-(this._itemSize.height+this._lineGap)*f)-this._itemSize.height)+this._itemTmp.anchorY*this._itemSize.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:n=(i=this._bottomGap+(this._itemSize.height+this._lineGap)*f)+this._itemSize.height,s=i+this._itemTmp.anchorY*this._itemSize.height}switch(a=this._leftGap+e%this._colLineNum*(this._itemSize.width+this._columnGap),this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:a+=this._itemTmp.anchorX*this._itemSize.width,a-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:a+=(1-this._itemTmp.anchorX)*this._itemSize.width,a-=(1-this.content.anchorX)*this.content.width,a*=-1}return{id:e,top:n,bottom:i,x:a,y:s};case cc.Layout.AxisDirection.VERTICAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:c=(r=this._leftGap+(this._itemSize.width+this._columnGap)*f)+this._itemSize.width,a=r+this._itemTmp.anchorX*this._itemSize.width,a-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:a=(r=(c=-this._rightGap-(this._itemSize.width+this._columnGap)*f)-this._itemSize.width)+this._itemTmp.anchorX*this._itemSize.width,a+=(1-this.content.anchorX)*this.content.width}switch(s=-this._topGap-e%this._colLineNum*(this._itemSize.height+this._lineGap),this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:s-=(1-this._itemTmp.anchorY)*this._itemSize.height,s+=(1-this.content.anchorY)*this.content.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:s-=this._itemTmp.anchorY*this._itemSize.height,s+=this.content.anchorY*this.content.height,s*=-1}return{id:e,left:r,right:c,x:a,y:s}}}},t.prototype._calcExistItemPos=function(e){var t=this.getItemByListId(e);if(!t)return null;var o={id:e,x:t.x,y:t.y};return this._sizeType?(o.top=t.y+t.height*(1-t.anchorY),o.bottom=t.y-t.height*t.anchorY):(o.left=t.x-t.width*t.anchorX,o.right=t.x+t.width*(1-t.anchorX)),o},t.prototype.getItemPos=function(e){return this._virtual?this._calcItemPos(e):this.frameByFrameRenderNum?this._calcItemPos(e):this._calcExistItemPos(e)},t.prototype._getFixedSize=function(e){if(!this._customSize)return null;null==e&&(e=this._numItems);var t=0,o=0;for(var n in this._customSize)parseInt(n)<e&&(t+=this._customSize[n],o++);return{val:t,count:o}},t.prototype._onScrollBegan=function(){this._beganPos=this._sizeType?this.viewTop:this.viewLeft},t.prototype._onScrollEnded=function(){var e=this;if(null!=e.scrollToListId){var t=e.getItemByListId(e.scrollToListId);e.scrollToListId=null,t&&t.runAction(cc.sequence(cc.scaleTo(.1,1.06),cc.scaleTo(.1,1)))}e._onScrolling(),e._slideMode!=a.ADHERING||e.adhering?e._slideMode==a.PAGE&&(null!=e._beganPos?this._pageAdhere():e.adhere()):e.adhere()},t.prototype._onTouchStart=function(e,t){if(!this._scrollView._hasNestedViewGroup(e,t)&&(e.eventPhase!==cc.Event.AT_TARGET||e.target!==this.node)){for(var o=e.target;null==o._listId&&o.parent;)o=o.parent;this._scrollItem=null!=o._listId?o:e.target}},t.prototype._onTouchUp=function(){var e=this;e._scrollPos=null,e._slideMode==a.ADHERING?(this.adhering&&(this._adheringBarrier=!0),e.adhere()):e._slideMode==a.PAGE&&(null!=e._beganPos?this._pageAdhere():e.adhere()),this._scrollItem=null},t.prototype._onTouchCancelled=function(e,t){var o=this;o._scrollView._hasNestedViewGroup(e,t)||e.simulate||(o._scrollPos=null,o._slideMode==a.ADHERING?(o.adhering&&(o._adheringBarrier=!0),o.adhere()):o._slideMode==a.PAGE&&(null!=o._beganPos?o._pageAdhere():o.adhere()),this._scrollItem=null)},t.prototype._onSizeChanged=function(){this.checkInited(!1)&&this._onScrolling()},t.prototype._onItemAdaptive=function(e){if(!this._sizeType&&e.width!=this._itemSize.width||this._sizeType&&e.height!=this._itemSize.height){this._customSize||(this._customSize={});var t=this._sizeType?e.height:e.width;this._customSize[e._listId]!=t&&(this._customSize[e._listId]=t,this._resizeContent(),this.updateAll(),null!=this._scrollToListId&&(this._scrollPos=null,this.unschedule(this._scrollToSo),this.scrollTo(this._scrollToListId,Math.max(0,this._scrollToEndTime-(new Date).getTime()/1e3))))}},t.prototype._pageAdhere=function(){var e=this;if(e.cyclic||!(e.elasticTop>0||e.elasticRight>0||e.elasticBottom>0||e.elasticLeft>0)){var t=e._sizeType?e.viewTop:e.viewLeft,o=(e._sizeType?e.node.height:e.node.width)*e.pageDistance;if(Math.abs(e._beganPos-t)>o)switch(e._alignCalcType){case 1:case 4:e._beganPos>t?e.prePage(.5):e.nextPage(.5);break;case 2:case 3:e._beganPos<t?e.prePage(.5):e.nextPage(.5)}else e.elasticTop<=0&&e.elasticRight<=0&&e.elasticBottom<=0&&e.elasticLeft<=0&&e.adhere();e._beganPos=null}},t.prototype.adhere=function(){var e=this;if(e.checkInited()&&!(e.elasticTop>0||e.elasticRight>0||e.elasticBottom>0||e.elasticLeft>0)){e.adhering=!0,e._calcNearestItem();var t=(e._sizeType?e._topGap:e._leftGap)/(e._sizeType?e.node.height:e.node.width);e.scrollTo(e.nearestListId,.7,t)}},t.prototype.update=function(){if(!(this.frameByFrameRenderNum<=0||this._updateDone))if(this._virtual){for(var e=this._updateCounter+this.frameByFrameRenderNum>this.displayItemNum?this.displayItemNum:this._updateCounter+this.frameByFrameRenderNum,t=this._updateCounter;t<e;t++){var o=this.displayData[t];o&&this._createOrUpdateItem(o)}this._updateCounter>=this.displayItemNum-1?this._doneAfterUpdate?(this._updateCounter=0,this._updateDone=!1,this._doneAfterUpdate=!1):(this._updateDone=!0,this._delRedundantItem(),this._forceUpdate=!1,this._calcNearestItem(),this.slideMode==a.PAGE&&(this.curPageNum=this.nearestListId)):this._updateCounter+=this.frameByFrameRenderNum}else if(this._updateCounter<this._numItems){for(e=this._updateCounter+this.frameByFrameRenderNum>this._numItems?this._numItems:this._updateCounter+this.frameByFrameRenderNum,t=this._updateCounter;t<e;t++)this._createOrUpdateItem2(t);this._updateCounter+=this.frameByFrameRenderNum}else this._updateDone=!0,this._calcNearestItem(),this.slideMode==a.PAGE&&(this.curPageNum=this.nearestListId)},t.prototype._createOrUpdateItem=function(e){var t=this.getItemByListId(e.id);if(t)this._forceUpdate&&this.renderEvent&&(t.setPosition(cc.v2(e.x,e.y)),this._resetItemSize(t),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],t,e.id%this._actualNumItems));else{var o=this._pool.size()>0;if((t=o?this._pool.get():cc.instantiate(this._itemTmp))._listId!=e.id&&(t._listId=e.id,t.setContentSize(this._itemSize)),t.setPosition(cc.v2(e.x,e.y)),this._resetItemSize(t),this.content.addChild(t),o&&this._needUpdateWidget){var n=t.getComponent(cc.Widget);n&&n.updateAlignment()}t.setSiblingIndex(this.content.childrenCount-1);var i=t.getComponent(v.default);t.listItem=i,i&&(i.listId=e.id,i.list=this,i._registerEvent()),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],t,e.id%this._actualNumItems)}this._resetItemSize(t),this._updateListItem(t.listItem),this._lastDisplayData.indexOf(e.id)<0&&this._lastDisplayData.push(e.id)},t.prototype._createOrUpdateItem2=function(e){var t,o=this.content.children[e];o?this._forceUpdate&&this.renderEvent&&(o._listId=e,t&&(t.listId=e),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],o,e)):((o=cc.instantiate(this._itemTmp))._listId=e,this.content.addChild(o),t=o.getComponent(v.default),o.listItem=t,t&&(t.listId=e,t.list=this,t._registerEvent()),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],o,e)),this._updateListItem(t),this._lastDisplayData.indexOf(e)<0&&this._lastDisplayData.push(e)},t.prototype._updateListItem=function(e){if(e&&this.selectedMode>s.NONE){var t=e.node;switch(this.selectedMode){case s.SINGLE:e.selected=this.selectedId==t._listId;break;case s.MULT:e.selected=this.multSelected.indexOf(t._listId)>=0}}},t.prototype._resetItemSize=function(){},t.prototype._updateItemPos=function(e){var t=isNaN(e)?e:this.getItemByListId(e),o=this.getItemPos(t._listId);t.setPosition(o.x,o.y)},t.prototype.setMultSelected=function(e,t){var o=this;if(o.checkInited()){if(Array.isArray(e)||(e=[e]),null==t)o.multSelected=e;else{var n=void 0,i=void 0;if(t)for(var r=e.length-1;r>=0;r--)n=e[r],(i=o.multSelected.indexOf(n))<0&&o.multSelected.push(n);else for(r=e.length-1;r>=0;r--)n=e[r],(i=o.multSelected.indexOf(n))>=0&&o.multSelected.splice(i,1)}o._forceUpdate=!0,o._onScrolling()}},t.prototype.updateItem=function(e){if(this.checkInited()){Array.isArray(e)||(e=[e]);for(var t=0,o=e.length;t<o;t++){var n=e[t],i=this.getItemByListId(n);i&&cc.Component.EventHandler.emitEvents([this.renderEvent],i,n%this._actualNumItems)}}},t.prototype.updateAll=function(){this.checkInited()&&(this.numItems=this.numItems)},t.prototype.getItemByListId=function(e){for(var t=this.content.childrenCount-1;t>=0;t--){var o=this.content.children[t];if(o._listId==e)return o}},t.prototype._getOutsideItem=function(){for(var e,t=[],o=this.content.childrenCount-1;o>=0;o--)e=this.content.children[o],this.displayData.find(function(t){return t.id==e._listId})||t.push(e);return t},t.prototype._delRedundantItem=function(){if(this._virtual)for(var e=this._getOutsideItem(),t=e.length-1;t>=0;t--){var o=e[t];if(!this._scrollItem||o._listId!=this._scrollItem._listId){this._pool.put(o);for(var n=this._lastDisplayData.length-1;n>=0;n--)if(this._lastDisplayData[n]==o._listId){this._lastDisplayData.splice(n,1);break}}}else for(;this.content.childrenCount>this._numItems;)this._delSingleItem(this.content.children[this.content.childrenCount-1])},t.prototype._delSingleItem=function(e){e.removeFromParent(),e.destroy&&e.destroy(),e=null},t.prototype.aniDelItem=function(e,t,o){var n=this;if(!n.checkInited()||n.cyclic||!n._virtual)return cc.error("This function is not allowed to be called!");if(n._aniDelRuning)return cc.warn("Please wait for the current deletion to finish!");var i,r=n.getItemByListId(e);if(r){i=r.getComponent(v.default),n._aniDelRuning=!0;var c=n.displayData[n.displayData.length-1].id,a=i.selected;i.showAni(o,function(){var o,i,l;if(c<n._numItems-2&&(o=c+1),null!=o){var u=n._calcItemPos(o);n.displayData.push(u),n._virtual?n._createOrUpdateItem(u):n._createOrUpdateItem2(o)}else n._numItems--;if(n.selectedMode==s.SINGLE)a?n._selectedId=-1:n._selectedId-1>=0&&n._selectedId--;else if(n.selectedMode==s.MULT&&n.multSelected.length){var h=n.multSelected.indexOf(e);h>=0&&n.multSelected.splice(h,1);for(var f=n.multSelected.length-1;f>=0;f--)(y=n.multSelected[f])>=e&&n.multSelected[f]--}if(n._customSize){n._customSize[e]&&delete n._customSize[e];var p={},d=void 0;for(var y in n._customSize){d=n._customSize[y];var v=parseInt(y);p[v-(v>=e?1:0)]=d}n._customSize=p}for(f=null!=o?o:c;f>=e+1;f--)if(r=n.getItemByListId(f)){var _=n._calcItemPos(f-1);i=[cc.moveTo(.2333,cc.v2(_.x,_.y))],f<=e+1&&(l=!0,i.push(cc.callFunc(function(){n._aniDelRuning=!1,t(e)}))),i.length>1?r.runAction(cc.sequence(i)):r.runAction(i[0])}l||(n._aniDelRuning=!1,t(e))},!0)}else t(e)},t.prototype.scrollTo=function(e,t,o,n){void 0===t&&(t=.5),void 0===o&&(o=null),void 0===n&&(n=!1);var i=this;if(i.checkInited(!1)){null==t?t=.5:t<0&&(t=0),e<0?e=0:e>=i._numItems&&(e=i._numItems-1),!i._virtual&&i._layout&&i._layout.enabled&&i._layout.updateLayout();var r,c,a=i.getItemPos(e);switch(i._alignCalcType){case 1:r=a.left,r-=null!=o?i.node.width*o:i._leftGap,a=cc.v2(r,0);break;case 2:r=a.right-i.node.width,r+=null!=o?i.node.width*o:i._rightGap,a=cc.v2(r+i.content.width,0);break;case 3:c=a.top,c+=null!=o?i.node.height*o:i._topGap,a=cc.v2(0,-c);break;case 4:c=a.bottom+i.node.height,c-=null!=o?i.node.height*o:i._bottomGap,a=cc.v2(0,-c+i.content.height)}var s=i.content.getPosition();s=Math.abs(i._sizeType?s.y:s.x);var l=i._sizeType?a.y:a.x;Math.abs((null!=i._scrollPos?i._scrollPos:s)-l)>.5&&(i._scrollView.scrollToOffset(a,t),i._scrollToListId=e,i._scrollToEndTime=(new Date).getTime()/1e3+t,i._scrollToSo=i.scheduleOnce(function(){if(i._adheringBarrier||(i.adhering=i._adheringBarrier=!1),i._scrollPos=i._scrollToListId=i._scrollToEndTime=i._scrollToSo=null,n){var t=i.getItemByListId(e);t&&t.runAction(cc.sequence(cc.scaleTo(.1,1.05),cc.scaleTo(.1,1)))}},t+.1),t<=0&&i._onScrolling())}},t.prototype._calcNearestItem=function(){var e,t,o,n,i,r,c=this;c.nearestListId=null,c._virtual&&c._calcViewPos(),o=c.viewTop,n=c.viewRight,i=c.viewBottom,r=c.viewLeft;for(var a=!1,s=0;s<c.content.childrenCount&&!a;s+=c._colLineNum)if(e=c._virtual?c.displayData[s]:c._calcExistItemPos(s))switch(t=c._sizeType?(e.top+e.bottom)/2:t=(e.left+e.right)/2,c._alignCalcType){case 1:e.right>=r&&(c.nearestListId=e.id,r>t&&(c.nearestListId+=c._colLineNum),a=!0);break;case 2:e.left<=n&&(c.nearestListId=e.id,n<t&&(c.nearestListId+=c._colLineNum),a=!0);break;case 3:e.bottom<=o&&(c.nearestListId=e.id,o<t&&(c.nearestListId+=c._colLineNum),a=!0);break;case 4:e.top>=i&&(c.nearestListId=e.id,i>t&&(c.nearestListId+=c._colLineNum),a=!0)}if((e=c._virtual?c.displayData[c.displayItemNum-1]:c._calcExistItemPos(c._numItems-1))&&e.id==c._numItems-1)switch(t=c._sizeType?(e.top+e.bottom)/2:t=(e.left+e.right)/2,c._alignCalcType){case 1:n>t&&(c.nearestListId=e.id);break;case 2:r<t&&(c.nearestListId=e.id);break;case 3:i<t&&(c.nearestListId=e.id);break;case 4:o>t&&(c.nearestListId=e.id)}},t.prototype.prePage=function(e){void 0===e&&(e=.5),this.checkInited()&&this.skipPage(this.curPageNum-1,e)},t.prototype.nextPage=function(e){void 0===e&&(e=.5),this.checkInited()&&this.skipPage(this.curPageNum+1,e)},t.prototype.skipPage=function(e,t){var o=this;if(o.checkInited())return o._slideMode!=a.PAGE?cc.error("This function is not allowed to be called, Must SlideMode = PAGE!"):void(e<0||e>=o._numItems||o.curPageNum!=e&&(o.curPageNum=e,o.pageChangeEvent&&cc.Component.EventHandler.emitEvents([o.pageChangeEvent],e),o.scrollTo(e,t)))},t.prototype.calcCustomSize=function(e){var t=this;if(t.checkInited()){if(!t._itemTmp)return cc.error("Unset template item!");if(!t.renderEvent)return cc.error("Unset Render-Event!");t._customSize={};var o=cc.instantiate(t._itemTmp);t.content.addChild(o);for(var n=0;n<e;n++)cc.Component.EventHandler.emitEvents([t.renderEvent],o,n),o.height==t._itemSize.height&&o.width==t._itemSize.width||(t._customSize[n]=t._sizeType?o.height:o.width);return Object.keys(t._customSize).length||(t._customSize=null),o.removeFromParent(),o.destroy&&o.destroy(),t._customSize}},r([h({type:cc.Enum(c),tooltip:!1})],t.prototype,"templateType",void 0),r([h({type:cc.Node,tooltip:!1,visible:function(){return this.templateType==c.NODE}})],t.prototype,"tmpNode",void 0),r([h({type:cc.Prefab,tooltip:!1,visible:function(){return this.templateType==c.PREFAB}})],t.prototype,"tmpPrefab",void 0),r([h()],t.prototype,"_slideMode",void 0),r([h({type:cc.Enum(a),tooltip:!1})],t.prototype,"slideMode",null),r([h({type:cc.Float,range:[0,1,.1],tooltip:!1,slide:!0,visible:function(){return this._slideMode==a.PAGE}})],t.prototype,"pageDistance",void 0),r([h({type:cc.Component.EventHandler,tooltip:!1,visible:function(){return this._slideMode==a.PAGE}})],t.prototype,"pageChangeEvent",void 0),r([h()],t.prototype,"_virtual",void 0),r([h({type:cc.Boolean,tooltip:!1})],t.prototype,"virtual",null),r([h({tooltip:!1,visible:function(){var e=this.virtual&&this.slideMode==a.NORMAL;return e||(this.cyclic=!1),e}})],t.prototype,"cyclic",void 0),r([h({tooltip:!1,visible:function(){return this.virtual}})],t.prototype,"lackCenter",void 0),r([h({tooltip:!1,visible:function(){var e=this.virtual&&!this.lackCenter;return e||(this.lackSlide=!1),e}})],t.prototype,"lackSlide",void 0),r([h({type:cc.Integer})],t.prototype,"_updateRate",void 0),r([h({type:cc.Integer,range:[0,6,1],tooltip:!1,slide:!0})],t.prototype,"updateRate",null),r([h({type:cc.Integer,range:[0,12,1],tooltip:!1,slide:!0})],t.prototype,"frameByFrameRenderNum",void 0),r([h({type:cc.Component.EventHandler,tooltip:!1})],t.prototype,"renderEvent",void 0),r([h({type:cc.Enum(s),tooltip:!1})],t.prototype,"selectedMode",void 0),r([h({tooltip:!1,visible:function(){return this.selectedMode==s.SINGLE}})],t.prototype,"repeatEventSingle",void 0),r([h({type:cc.Component.EventHandler,tooltip:!1,visible:function(){return this.selectedMode>s.NONE}})],t.prototype,"selectedEvent",void 0),r([h({serializable:!1})],t.prototype,"_numItems",void 0),r([u,f(),p("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/ListView"),y(cc.ScrollView),d(-5e3)],t)}(cc.Component);o.default=_,cc._RF.pop()},{"./ListItem":"ListItem"}],LoadingManager:[function(e,t,o){"use strict";cc._RF.push(t,"48049jD6zJMmoi+cPkRhX7D","LoadingManager");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.Loading=void 0;var c=cc._decorator,a=c.ccclass,s=c.property;o.Loading=null;var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefab=null,t.loadingNode=null,t.loadingSprite=null,t.loadingText=null,t.blockEventComp=null,t._callback=null,t._target=null,t}return i(t,e),t.prototype.onLoad=function(){this.loadingNode=cc.instantiate(this.prefab),this.blockEventComp=this.loadingNode.getComponent(cc.BlockInputEvents),this.loadingNode.parent=this.node,this.loadingNode.zIndex=9999,this.loadingSprite=this.loadingNode.getComponentInChildren(cc.Sprite),this.loadingText=this.loadingNode.getComponentInChildren(cc.Label),this.hide(),o.Loading=this},t.prototype.start=function(){this.loadingSprite.node.runAction(cc.rotateBy(4,360).repeatForever())},t.prototype.dealyClose=function(){this.hide(),this._callback&&this._callback.call(this._target)},t.prototype.show=function(e,t,o,n,i){void 0===t&&(t=null),void 0===o&&(o=!0),void 0===n&&(n=null),void 0===i&&(i=null),this.loadingNode&&(this.loadingNode.active=!0,this.loadingNode.resumeAllActions(),this.blockEventComp.enabled=o,this._callback=n,this._target=i,t&&(this.loadingText.string=t),e>0&&(this.unschedule(this.dealyClose),this.scheduleOnce(this.dealyClose,e)))},t.prototype.hide=function(){this.loadingNode.active=!1,this.loadingNode.pauseAllActions()},r([s(cc.Prefab)],t.prototype,"prefab",void 0),r([a],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],LoadingSceneBase:[function(e,t,o){"use strict";cc._RF.push(t,"de58fTQvohHOIGkmPk32Yk3","LoadingSceneBase");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c},c=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function c(e){try{s(n.next(e))}catch(t){r(t)}}function a(e){try{s(n.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,a)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return s([e,t])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../extension/Platform"),l=cc._decorator,u=l.ccclass,h=l.property,f=null,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultSceneName="Home",t.label=null,t.percentLabel=null,t.bar=null,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){f=f||this.defaultSceneName},t.prototype.start=function(){this.bar.progress=0,this.label.string="\u52a0\u8f7d\u4e2d..."},Object.defineProperty(t.prototype,"progress",{set:function(e){this.bar&&(this.bar.progress=e,this.percentLabel.string=Math.floor(100*e)+"%")},enumerable:!1,configurable:!0}),t.prototype.loadNextScene=function(e){var t=this;return f=f||this.defaultSceneName,this.label.string="\u52a0\u8f7d\u573a\u666f\u8d44\u6e90",new Promise(function(){cc.director.preloadScene(f,function(e,o){t.percentLabel.string=(e/o*100).toFixed(1)+"%",t.bar.progress=e/o},function(){e?cc.resources.load(e,cc.Prefab,function(e,o){cc.director.loadScene(f,function(){var e=cc.instantiate(o);cc.director.getScene().addChild(e,-1),t.onLoadFinished()})}):cc.director.loadScene(f,function(){t.onLoadFinished()})})})},t.prototype.onLoadFinished=function(e){var t=cc.find("Canvas");t&&t.getComponents(cc.Component).forEach(function(t){t.onLoadFinished&&t.onLoadFinished(o.param,e)})},t.prototype.loadSubPackage=function(e,t){return c(this,void 0,void 0,function(){var o=this;return a(this,function(n){switch(n.label){case 0:return this.label&&(this.label.string=t),[4,s.default.loadSubPackage(e,function(e){o.progress&&(o.progress=e/100)})];case 1:return n.sent(),[2]}})})},t.setNextScene=function(e){f=e},t.getNextScene=function(){return f},t.goto=function(e,t){void 0===t&&(t=null),o.param=t,f=e,cc.director.loadScene("LoadingScene")},t.param=null,t.ResPrefab=null,r([h],t.prototype,"defaultSceneName",void 0),r([h(cc.Label)],t.prototype,"label",void 0),r([h(cc.Label)],t.prototype,"percentLabel",void 0),r([h(cc.ProgressBar)],t.prototype,"bar",void 0),o=r([u],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../extension/Platform":"Platform"}],LoadingScene:[function(e,t,o){"use strict";cc._RF.push(t,"de9c0ThpIRLg5fl6xvliSXs","LoadingScene");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c},c=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function c(e){try{s(n.next(e))}catch(t){r(t)}}function a(e){try{s(n.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,a)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return s([e,t])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../../framework/misc/LoadingSceneBase"),l=e("./ServerConfig"),u=e("../../../../framework/core/event"),h=e("./PlayerInfo"),f=e("../../../../framework/extension/weak_net_game/WeakNetGame"),p=e("../../../../framework/extension/weak_net_game/UserInfo"),d=e("../../../../framework/extension/aldsdk/StatHelper"),y=e("../../../../framework/extension/Platform"),v=cc._decorator,_=v.ccclass,m=(v.property,!1),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.canRetry=!1,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.node.on(cc.Node.EventType.TOUCH_END,this.onClick,this)},t.prototype.nextScene=function(){return c(this,void 0,void 0,function(){return a(this,function(){return m&&window.tt,this.loadNextScene(),u.evt.emit("Loading.Success"),csv.Config.Forbid_Banner?y.default._bannerEnabled=!1:y.default._bannerEnabled=!0,cc.sys.os==cc.sys.OS_IOS&&p.UserInfo.kaipingcount<csv.Config.Show_Kaiping_AD&&(p.UserInfo.kaipingcount+=1,p.UserInfo.save("kaipingcount")),[2]})})},t.prototype.loginProgress=function(e){switch(e){case"login":this.label.string="\u767b\u5f55\u4e2d",this.progress=.1;break;case"config":this.label.string="\u52a0\u8f7d\u914d\u7f6e",this.progress=.2;break;case"local_csv":this.label.string="\u52a0\u8f7d\u672c\u5730\u914d\u7f6e",this.progress=.3;break;case"csv":this.label.string="\u52a0\u8f7d\u7f51\u7edc\u914d\u7f6e",this.progress=.5;break;case"share_config":this.label.string="\u52a0\u8f7d\u5206\u4eab\u914d\u7f6e",this.progress=.7;break;case"complete":this.label.string="\u8fdb\u5165\u6e38\u620f...",this.progress=.8}},t.prototype.onClick=function(){this.canRetry&&(this.startLogin(),this.canRetry=!1)},t.prototype.start=function(){this.startLogin()},t.prototype.onDestroy=function(){},t.prototype.checkScene=function(){if(CC_WECHATGAME){var e=wx.getLaunchOptionsSync();if(1008==e.scene){var t=e.query.id;t&&d.default.sendPath("\u5206\u4eab\u5361\u7247\u70b9\u51fb\u4eba\u6570",t)}}},t.prototype.startLogin=function(){var e=this;m||(f.default.initConfig(l.ServerConfig),this.checkScene(),l.ServerConfig.is_local_game||f.default.downloadCsv("Config").then(function(){console.log("\u52a0\u8f7dConfig\u6210\u529f\uff01\uff01"),csv.removeIndex("Config","Key"),csv.createIndex("Config","Key","config_data")})),m?(this.loadNextScene(),this.canRetry=!0):(console.log("loading init !!!!!"),f.default.doLogin(this.loginProgress.bind(this)).then(function(t){if(m=!0,csv.removeIndex("Config","Key"),csv.createIndex("Config","Key","config_data"),!t)return u.evt.emit("Loading.Login"),void e.nextScene();var o=t.save_timestamps;null!=o?o>h.PlayerInfo.save_timestamps?h.PlayerInfo.loadFromJsonObject(t):console.log("\u4f7f\u7528\u672c\u5730\u6570\u636e \uff0c\u670d\u52a1\u5668\u4e0d\u662f\u6700\u65b0\u7684"):0==h.PlayerInfo.inited?h.PlayerInfo.loadFromJsonObject(t):h.PlayerInfo.openId=t.openId,p.UserInfo.isDy=!!t.isDy&&t.isDy,u.evt.emit("Loading.Login",!0),e.nextScene()}).catch(function(t){console.error(t),e.progress=0,e.label.string="\u767b\u5f55\u5931\u8d25\uff0c\u70b9\u51fb\u5c4f\u5e55\u91cd\u8bd5\uff01("+t+")"}))},r([_],t)}(s.default);o.default=g,cc._RF.pop()},{"../../../../framework/core/event":"event","../../../../framework/extension/Platform":"Platform","../../../../framework/extension/aldsdk/StatHelper":"StatHelper","../../../../framework/extension/weak_net_game/UserInfo":"UserInfo","../../../../framework/extension/weak_net_game/WeakNetGame":"WeakNetGame","../../../../framework/misc/LoadingSceneBase":"LoadingSceneBase","./PlayerInfo":"PlayerInfo","./ServerConfig":"ServerConfig"}],LocalLifeSystem:[function(e,t,o){"use strict";cc._RF.push(t,"959459BZRhJIbg8xlNUWIJQ","LocalLifeSystem"),Object.defineProperty(o,"__esModule",{value:!0}),o.LifeSystem=o.LocalLifeSystem=void 0;var n=e("../core/event"),i=e("../core/Signal"),r=function(){function e(){this.sec_per_live=300,this.live_free_get=5,this.max_freeLives_seconds=this.live_free_get*this.sec_per_live,this.livesSeconds=0,this.isEnabledAutoRecovery=!0,this.recoverySignal=new i.default}return e.prototype.init=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.sec_per_live=e||this.sec_per_live,this.live_free_get=t||this.live_free_get,this.max_freeLives_seconds=this.sec_per_live*this.live_free_get,this.livesSeconds=0,this.lastLifeSaveTime=Number(localStorage.getItem("sys_life_lastLifeSaveTime")||(new Date).getTime()),g.setGlobalInstance(o.LifeSystem,"LocalLifeSystem"),n.evt.on("onEnterForeground",this.onEnterForeground,this),this.onTimeRequested((new Date).getTime()),console.log("\u4f53\u529b\u7cfb\u7edf\u521d\u59cb\u5316",this)},e.prototype.onEnterForeground=function(){this.onTimeRequested((new Date).getTime())},Object.defineProperty(e.prototype,"nextLifeTime",{get:function(){return(this.lives+1)*this.sec_per_live-this.livesSeconds},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lives",{get:function(){return Math.floor(this.livesSeconds/this.sec_per_live)},enumerable:!1,configurable:!0}),e.prototype.save=function(){this.lastLifeSaveTime=(new Date).getTime(),localStorage.setItem("sys_life_lastLifeSaveTime",this.lastLifeSaveTime+"")},e.prototype.onTimeRequested=function(e){if(this.lastLifeSaveTime){var t=Math.floor((e-this.lastLifeSaveTime)/1e3);this.livesSeconds=Math.min(this.max_freeLives_seconds,t)}},e.prototype.startCheck=function(e,t){var o=this;if(!this.task_checkLives){var n=e.call(t);this.task_checkLives=setInterval(function(){var i=e.call(t);n!=i&&i==o.live_free_get-1&&(o.livesSeconds=0,o.save()),i<o.live_free_get&&(o.livesSeconds=o.livesSeconds+1,i+o.lives>i&&(console.log("\u83b7\u5f97\u5728\u7ebf\u5956\u52b1\u4e00\u9897\u661f",o.lives),o.recoverySignal.fire(o.lives),o.livesSeconds=0,o.save())),n=i},1e3)}},e}();o.LocalLifeSystem=r,o.LifeSystem=new r,cc._RF.pop()},{"../core/Signal":"Signal","../core/event":"event"}],LocalTimeSystem:[function(e,t,o){"use strict";cc._RF.push(t,"8385eiFRKxL5o1AHXxP+bVl","LocalTimeSystem"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.init=function(t){null!=t&&null!=t&&(e.utc_sec=t,cc.sys.WECHAT_GAME==cc.sys.platform&&(wx.onHide(this.onHidden),wx.onShow(this.onShown)),g.setGlobalInstance(e))},e.startTimer=function(){this.timer=setInterval(function(){e.utc_sec+=1e3},1e3)},e.stopTimer=function(){clearInterval(this.timer)},e.getSec=function(){return e.utc_sec||(new Date).getTime()/1e3},e.getDate=function(){if(e.utc_sec){var t=new Date;return t.setTime(1e3*e.utc_sec),t}return new Date},e.onHidden=function(){console.log("game enter background")},e.onShown=function(){console.log("game enter foreground")},e}();o.default=n,cc._RF.pop()},{}],Locker:[function(e,t,o){"use strict";cc._RF.push(t,"6315frODjtDP5L26E4YpAcQ","Locker");var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<o;t++)for(var r=arguments[t],c=0,a=r.length;c<a;c++,i++)n[i]=r[c];return n};Object.defineProperty(o,"__esModule",{value:!0});var i={},r=function(){function e(t,o,r){this.activated=!1,this.func_name=o,this.real_func=t[o];var c=new Proxy(this.real_func,{apply:function(t,o,i){if(this.activated=!0,r!=e.Prevent)return t.apply.apply(t,n([this],i))}});t[o]=c,this.target=t,i[t]=this}return e.intercept=function(t,o){return i[t]?i[t]:new e(t,o,e.Prevent)},e.prototype.release=function(){this.target[this.func_name]=this.real_func,this.activated&&this.real_func.apply(this.target),delete i[this.target]},e.Prevent=0,e.Before=1,e.After=2,e}();o.default=r,cc._RF.pop()},{}],LongTouch:[function(e,t,o){"use strict";cc._RF.push(t,"828e0jqHZ1IU5KmJfkZXpaH","LongTouch");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../core/Signal"),a=cc._decorator,s=a.ccclass,l=a.property,u=(a.menu,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pressedTime=0,t.isPressing=!1,t.targetTime=1,t.onLongTouch=new c.default,t}return i(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnded,this)},t.prototype.start=function(){},t.prototype.onTouchBegan=function(e){this.pressedTime=0,this.isPressing=!0,e.stopPropagation()},t.prototype.update=function(e){this.isPressing&&(this.pressedTime+=e,this.pressedTime>=this.targetTime&&(this.onLongTouch.fire(),this.pressedTime=0))},t.prototype.onTouchEnded=function(){this.isPressing=!1},t.prototype.waitForPress=function(e){return this.targetTime=e,this.onLongTouch.wait()},r([l],t.prototype,"targetTime",void 0),r([s],t)}(cc.Component));o.default=u,cc._RF.pop()},{"../core/Signal":"Signal"}],Main:[function(e,t,o){"use strict";cc._RF.push(t,"452dcM/WRZDLpN5bLukXPR9","Main");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c},c=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function c(e){try{s(n.next(e))}catch(t){r(t)}}function a(e){try{s(n.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,a)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return s([e,t])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./Common/Base/LoadingScene"),l=e("../../framework/misc/Device"),u=e("./Common/Base/PlayerInfo"),h=e("../../framework/extension/weak_net_game/UserInfo"),f=e("../../framework/extension/Platform"),p=e("../../framework/utils/ccUtil"),d=e("../../framework/core/event"),y=e("../../framework/misc/Net"),v=e("../../framework/extension/weak_net_game/WeakNetGame"),_=e("./Common/Base/ServerConfig"),m=e("../../framework/ui/controller/PandoraPoint"),w=e("./UI/UIConfirm"),b=e("./Game"),k=e("./Common/Unity"),S=e("./UI/UIPersonSkin"),C=e("../../framework/extension/buffs/BuffSystem"),I=e("../../framework/extension/ttsdk/DouyinStorage"),P=cc._decorator,O=P.ccclass,x=P.property,R=!1,T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tili=null,t.btn_play=null,t.daojishi=null,t.label_timeLeft=null,t.label_level=null,t.guideNode=null,t.qiandao_hongdian=null,t.zhuanpan_hongdian=null,t.theme_hongdian=null,t.skin_hongdian=null,t.node_sidebar_icon=null,t.isclick=!1,t.girl=null,t.redpoint=null,t.drawer=null,t.btn_challange=null,t.challene_unlockTip=null,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){o.instance=this,cc.director.getPhysicsManager().enabled=!0,d.evt.on("PersistNode.onViewHidden",this.onViewHidden,this),d.evt.on("Game.getTili",this.playAddTili,this),d.evt.on("Game.friendTili",this.calcRedpoint,this),d.evt.on("UISkin.onHidden",this.onChangeSkin,this),d.evt.on("PlayerInfo.star",this.onChangeStar,this),d.evt.on("UISkin.checkLock",this.check_lockSkin,this),d.evt.on("UILucky.redPoint",this.luckyRedPoint,this),d.evt.on("Main.skin",this.onMainSkin,this),0==R&&(R=!0,u.PlayerInfo.updateBuffs(),this.checkDaily()),l.default.playBGM("BGM0"),u.PlayerInfo.level<(csv.Config.Chanllenge_Unlock_Level||25)?(this.challene_unlockTip.string=((csv.Config.Chanllenge_Unlock_Level||25)-u.PlayerInfo.level).toFixed()+"\u5173\u540e\u89e3\u9501!",this.btn_challange.interactable=!1):(this.btn_challange.interactable=!0,this.challene_unlockTip.node.parent.active=!1),this.node_sidebar_icon&&(I.default.sidebarAvailable&&!u.PlayerInfo.isFavClaimed?this.node_sidebar_icon.active=!0:this.node_sidebar_icon.active=!1)},t.prototype.onChangeSkin=function(){k.default.loadSkins(this.girl,1)},t.prototype.onChangeStar=function(){csv.Skin.values.forEach(function(e){2==e.unlockType&&!u.PlayerInfo.isSkinUnlocked(e.id)&&u.PlayerInfo.star>=e.unlock2&&vm.show("Prefabs/UI/UIUnlockSkin",e.id)});var e=u.PlayerInfo.getChapter(u.PlayerInfo.level);if(u.PlayerInfo.star>=csv.star.get(e).demand){var t=u.PlayerInfo.isChapterNew(e);e>1&&t&&(vm.show("Prefabs/story/help",e),u.PlayerInfo.markChapterOld(e))}},t.prototype.onLoadFinished=function(e){e&&vm.show(e)},t.prototype.start=function(){u.PlayerInfo.init(),C.buffSystem.getBuff("AutoLabour").isEnabled?this.daojishi.active=!0:this.daojishi.active=!1,this.label_timeLeft.string=new Date(1e3*u.PlayerInfo.buff_labour).format("mm:ss"),u.PlayerInfo.labour<csv.Config.Max_Energy&&!C.buffSystem.getBuff("AutoLabour").isEnabled?u.PlayerInfo.buff_labour>0?C.buffSystem.startBuff("AutoLabour",u.PlayerInfo.buff_labour):C.buffSystem.startBuff("AutoLabour",60*csv.Config.LabourRecoveryTime||300):C.buffSystem.stop("AutoLabour"),this.girl.armature().animation.fadeIn("frightened",.2,0,"1"),k.default.loadSkins(this.girl,1),this.isclick=!1,this.label_level.string="\u5173\u5361\u8fdb\u5ea6:"+u.PlayerInfo.level,f.default.hideBannerAd(),u.PlayerInfo.isInGuide&&!u.PlayerInfo.is_guide_15&&(this.guideNode.active=!0);for(var e=1;e<=csv.level.values.length;e++)u.PlayerInfo.level_star[e]||(u.PlayerInfo.level_star[e]=0);this.qiandao_hongdian.active=g.isNextDay(u.PlayerInfo.signTime),this.zhuanpan_hongdian.active=g.isNextDay(h.UserInfo.freedrawTime),this.check_lockSkin(),0==u.PlayerInfo.guide?vm.show("Prefabs/story/comics1"):g.isNextDay(u.PlayerInfo.signTime)&&vm.show("Prefabs/UI/UISign")},t.prototype.checkDaily=function(){csv.daily_level.values.forEach(function(e){u.PlayerInfo.isGreaterDate(e.day)&&(u.PlayerInfo.maxDailyLv=e.id)}),console.log("\u6bcf\u65e5\u6311\u6218\u6700\u5927\u5173\u5361\u6570\uff1a"+u.PlayerInfo.maxDailyLv)},t.prototype.calcRedpoint=function(e,t){var o=0;for(var n in e){var i=e[n];i&&0==i.status&&o++}var r=t;r.claimedCount=r.claimedCount||0,r.claimedCount<r.inviteeCount&&o++,this.redpoint.setNumber(o)},t.prototype.luckyRedPoint=function(){this.zhuanpan_hongdian.active=!1},t.prototype.checkTili=function(){var e=this;v.default.client.httpGet(_.Api.invite_get).then(function(t){if(t==y.default.Code.Timeout);else if(t){var o=JSON.parse(t);0==o.errno&&(o=o.data,e.calcRedpoint(o.day_invite,o.sum_invite))}})},t.prototype.onConfirm=function(e){if(e==w.ConfirmOption.Yes){u.PlayerInfo.isRandomLevel=!0;var t=csv.level.get(g.randomInt(2,csv.level.size));this.flytili(t.id)}else u.PlayerInfo.isRandomLevel=!1},t.prototype.onConfirm_challenge=function(e){e==w.ConfirmOption.Yes?(u.PlayerInfo.isPlayingDaily=!0,vm.show("Prefabs/UI/UIChallengeChapter")):vm.show("Prefabs/UI/UIConfirm","\u662f\u5426\u968f\u673a\u5f00\u59cb\u4e4b\u524d\u7684\u5173\u5361",this.onConfirm,this)},t.prototype.confirm=function(){if(u.PlayerInfo.level>=csv.level.size){if(!(u.PlayerInfo.dailylevel<=u.PlayerInfo.maxDailyLv))return void vm.show("Prefabs/UI/UIConfirm","\u662f\u5426\u968f\u673a\u5f00\u59cb\u4e4b\u524d\u7684\u5173\u5361",this.onConfirm,this);vm.show("Prefabs/UI/UIConfirm","\u662f\u5426\u524d\u5f80\u6311\u6218\u5173\u5361\uff1f",this.onConfirm_challenge,this)}else this.flytili()},t.prototype.onMainSkin=function(){s.default.goto("Skin")},t.prototype.check_lockSkin=function(){h.UserInfo.isunlock_men=0,h.UserInfo.isunlock_girl=0,h.UserInfo.isunlock_theme=0;for(var e=1;e<=5;e++)h.UserInfo["isunlock_girl"+e]=0,h.UserInfo["isunlock_men"+e]=0;for(this.theme_hongdian.active=!1,this.skin_hongdian.active=!1,e=1;e<=csv.Skin.values.length;e++){var t=csv.Skin.get(e);(u.PlayerInfo.level>=t.unlock1&&1==t.unlockType||2==t.unlockType&&u.PlayerInfo.star>=t.unlock2)&&!u.PlayerInfo.isSkinUnlocked(t.id)&&(1==t.type?h.UserInfo.isunlock_girl=1:2==t.type?h.UserInfo.isunlock_men=1:3==t.type&&(h.UserInfo.isunlock_theme=1),t.subType<5&&(1==t.type?h.UserInfo["isunlock_girl"+(t.subType+1)]=1:2==t.type&&(h.UserInfo["isunlock_men"+(t.subType+1)]=1)))}h.UserInfo.isunlock_theme&&(this.theme_hongdian.active=!0),(h.UserInfo.isunlock_men||h.UserInfo.isunlock_girl)&&(this.skin_hongdian.active=!0)},t.prototype.click_sidebar=function(){cc.sys.BYTEDANCE_GAME==cc.sys.platform&&(I.default.isFromSidebar?vm.show("Prefabs/UI/BD_Guide_Sidebar","claim"):vm.show("Prefabs/UI/BD_Guide_Sidebar","sidebar"))},t.prototype.click_play=function(){var e=this;if(!this.isclick){if(0==u.PlayerInfo.guide)return s.default.goto("Game"),void(this.isclick=!0);if(u.PlayerInfo.labour>0){if(!h.UserInfo.gun_num&&!h.UserInfo.isGetGunStart){var t=Math.random();if(u.PlayerInfo.level>=csv.Config.Start_Lv_Get_Gun&&h.UserInfo.gunViewDay<csv.Config.Get_Gun_Limt_Day&&h.UserInfo.gunView<csv.Config.Get_Gun_Limt&&t<csv.Config.Get_Gun_Pro)return void vm.show("Prefabs/UI/UIGetGun",function(){e.confirm()},"isGetGunStart")}this.confirm()}else vm.show("Prefabs/UI/UIGetLabour",function(){e.confirm()},!1)}},t.prototype.test=function(e){b.default.debug=!0,s.default.goto("Game",e)},t.prototype.click_daily=function(){u.PlayerInfo.isPlayingDaily=!0,vm.show("Prefabs/UI/UIChallengeChapter"),u.PlayerInfo.isInGuide&&!u.PlayerInfo.is_guide_15&&(this.guideNode.active=!1)},t.prototype.click_level=function(){return c(this,void 0,void 0,function(){return a(this,function(){return u.PlayerInfo.isPlayingDaily=!1,vm.show("Prefabs/UI/UIChapter"),[2]})})},t.prototype.click_setting=function(){vm.show("Prefabs/UI/UISetting")},t.prototype.click_rank=function(){},t.prototype.click_labour=function(){vm.show("Prefabs/UI/UIGetLabour",null,!0)},t.prototype.click_draw=function(){vm.show("Prefabs/UI/UILucky")},t.prototype.click_gettili=function(){vm.show("Prefabs/UI/UIFreeGetLabour")},t.prototype.click_friend=function(){vm.show("Prefabs/UI/UIFriendHelp")},t.prototype.click_theme=function(){vm.show("Prefabs/UI/UISkin")},t.prototype.click_shouchang=function(){s.default.goto("Skin",S.TwoType.Collection)},t.prototype.click_skin=function(){s.default.goto("Skin",S.TwoType.Skin)},t.prototype.click_sign=function(){vm.show("Prefabs/UI/UISign")},t.prototype.playAddTili=function(e,t){p.default.playFly(this.tili,1,t)},t.prototype.click_world_wx=function(e){return c(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return e?[4,h.UserInfo.openRankAndUpload({level:u.PlayerInfo.level,challengelevel:u.PlayerInfo.dailylevel},e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.flytili=function(e){var t=cc.instantiate(this.tili),o=new cc.Vec2(this.btn_play.position.x,this.btn_play.position.y),n=this.tili.getBoundingBoxToWorld().center,i=this.btn_play.parent.convertToNodeSpaceAR(n),r=cc.moveTo(.5,o).easing(cc.easeSineOut()),c=cc.sequence(r,cc.callFunc(function(){t.destroy(),u.PlayerInfo.isPlayingDaily=!1,u.PlayerInfo.labour--,u.PlayerInfo.save("labour"),u.PlayerInfo.labour<=csv.Config.Max_Energy-1&&C.buffSystem.startBuff("AutoLabour",u.PlayerInfo.buff_labour||300),u.PlayerInfo.playinglevel=e||u.PlayerInfo.level,s.default.goto("Game")}));t.parent=this.btn_play.parent,t.setPosition(i),t.runAction(c),this.isclick=!0},t.prototype.onDestroy=function(){cc.audioEngine.stopAll(),d.evt.off(this)},t.instance=null,r([x(cc.Node)],t.prototype,"tili",void 0),r([x(cc.Node)],t.prototype,"btn_play",void 0),r([x(cc.Node)],t.prototype,"daojishi",void 0),r([x(cc.Label)],t.prototype,"label_timeLeft",void 0),r([x(cc.Label)],t.prototype,"label_level",void 0),r([x(cc.Node)],t.prototype,"guideNode",void 0),r([x(cc.Node)],t.prototype,"qiandao_hongdian",void 0),r([x(cc.Node)],t.prototype,"zhuanpan_hongdian",void 0),r([x(cc.Node)],t.prototype,"theme_hongdian",void 0),r([x(cc.Node)],t.prototype,"skin_hongdian",void 0),r([x(cc.Node)],t.prototype,"node_sidebar_icon",void 0),r([x(dragonBones.ArmatureDisplay)],t.prototype,"girl",void 0),r([x(m.default)],t.prototype,"redpoint",void 0),r([x(cc.Button)],t.prototype,"btn_challange",void 0),r([x(cc.Label)],t.prototype,"challene_unlockTip",void 0),o=r([O],t)}(cc.Component);o.default=T,cc._RF.pop()},{"../../framework/core/event":"event","../../framework/extension/Platform":"Platform","../../framework/extension/buffs/BuffSystem":"BuffSystem","../../framework/extension/ttsdk/DouyinStorage":"DouyinStorage","../../framework/extension/weak_net_game/UserInfo":"UserInfo","../../framework/extension/weak_net_game/WeakNetGame":"WeakNetGame","../../framework/misc/Device":"Device","../../framework/misc/Net":"Net","../../framework/ui/controller/PandoraPoint":"PandoraPoint","../../framework/utils/ccUtil":"ccUtil","./Common/Base/LoadingScene":"LoadingScene","./Common/Base/PlayerInfo":"PlayerInfo","./Common/Base/ServerConfig":"ServerConfig","./Common/Unity":"Unity","./Game":"Game","./UI/UIConfirm":"UIConfirm","./UI/UIPersonSkin":"UIPersonSkin"}],MessageBoxComponent:[function(e,t,o){"use strict";cc._RF.push(t,"5d14c63Zc1PupexE+EkksQp","MessageBoxComponent");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./View"),a=e("./MessageBoxManager"),s=cc._decorator,l=s.ccclass,u=s.property,h=(s.executeInEditMode,s.playOnFocus,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.node_title=null,t.node_content=null,t.btn_ok=null,t.btn_cancel=null,t.messageBoxCallback=null,t.label_ok=null,t.label_cancel=null,t.group_ok_cancel=null,t.group_ok=null,t}return i(t,e),t.prototype.onLoad=function(){this.label_ok=this.btn_ok.getChildByName("Label").getComponent(cc.Label),this.label_cancel=this.btn_cancel.getChildByName("Label").getComponent(cc.Label),this.getComponent(c.default).setDelegate(this),this.bgAnimation=this.node.getChildByName("bg").getComponent(cc.Animation)},t.prototype.onHidden=function(){},t.prototype.onShown=function(e){this.node_title.string=e.title,this.node_content.string=e.content,this.messageBoxCallback=e.callback,e.extra&&(this.label_ok.string=e.extra.okText,this.label_cancel.string=e.extra.cancelText),e.buttons==a.MessageBox.OK_CANCEL?(this.group_ok_cancel.active=!0,this.group_ok.active=!1):(this.group_ok.active=!0,this.group_ok_cancel.active=!1)},t.prototype.start=function(){},t.prototype.on_btn_ok_clicked=function(){this.messageBoxCallback&&this.messageBoxCallback.call(null,a.MessageBox.OK),this.getComponent(c.default).hide()},t.prototype.on_btn_cancel_clicked=function(){this.messageBoxCallback&&this.messageBoxCallback.call(null,a.MessageBox.CANCEL),this.getComponent(c.default).hide()},r([u(cc.Label)],t.prototype,"node_title",void 0),r([u(cc.Label)],t.prototype,"node_content",void 0),r([u(cc.Node)],t.prototype,"btn_ok",void 0),r([u(cc.Node)],t.prototype,"btn_cancel",void 0),r([u(cc.Node)],t.prototype,"group_ok_cancel",void 0),r([u(cc.Node)],t.prototype,"group_ok",void 0),r([l],t)}(cc.Component));o.default=h,cc._RF.pop()},{"./MessageBoxManager":"MessageBoxManager","./View":"View"}],MessageBoxManager:[function(e,t,o){"use strict";cc._RF.push(t,"bc48cBqkERHuJx+iKzOzwOV","MessageBoxManager");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.MessageBox=void 0;var c=e("./ViewManager"),a=cc._decorator,s=a.ccclass,l=a.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefab=null,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){o.instance=this},t.instance=null,r([l(cc.Prefab)],t.prototype,"prefab",void 0),o=r([s],t)}(cc.Component);o.default=u;var h=function(){function e(){}return e.prototype.start=function(){},e.show=function(e,t,o,n){return t=null==t||null==t?"\u63d0\u793a":t,new Promise(function(i){c.default.instance.showFromPrefab(u.instance.prefab,"MessageBox",{title:t,content:e,buttons:o,extra:n,callback:function(e){i(e)}})})},e.raise=function(e,t){return new Promise(function(o){c.default.instance.show(e,{text:t,callback:function(e){o(e)}})})},e.OK=1,e.CANCEL=0,e.OK_CANCEL=2,e}();o.MessageBox=h,cc._RF.pop()},{"./ViewManager":"ViewManager"}],MoveEngine:[function(e,t,o){"use strict";cc._RF.push(t,"7671cg+6/9FY5+/MGGxplsg","MoveEngine");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.Behavior=void 0;var c,a,s=e("./SMoveBase"),l=cc._decorator,u=l.ccclass,h=l.property,f=l.menu;(function(e){e[e.Simple=0]="Simple",e[e.FixedPosition=1]="FixedPosition",e[e.Seek=2]="Seek",e[e.Arrive=3]="Arrive",e[e.Wander=4]="Wander",e[e.Bezeir=5]="Bezeir",e[e.Path=6]="Path"})(c=o.Behavior||(o.Behavior={})),function(e){e[e.Load=0]="Load",e[e.FirstShow=1]="FirstShow",e[e.Delay=2]="Delay"}(a||(a={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.moveType=c.Simple,t.maxSpeed=15,t.forceWeight=.1,t.acc=cc.Vec2.ZERO,t.gravity=new cc.Vec2(0,0),t.path=[],t._runningPath=[],t.pathRadius=10,t.isPathLoop=!0,t._currentPathIndex=0,t.wanderAngle=0,t._tmp_vec2=cc.v2(),t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){},t.prototype.start=function(){this.rotateByVelocity&&(this.node.angle=-(this.rotationOffset+this.velocity.signAngle(cc.Vec2.RIGHT)*cc.macro.DEG)),this.setPath(this.path,this.isPathLoop,!0)},t.prototype.setPath=function(e,t,o){void 0===t&&(t=!1),void 0===o&&(o=!0),this.isPathLoop=t,this._runningPath.splice(0,this._runningPath.length);for(var n=0;n<e.length;n++){var i=e[n].clone();o&&i.addSelf(this.node.position),this._runningPath.push(i)}if(this.isPathLoop&&this._runningPath.length>0){var r=this._runningPath[0];this._runningPath.push(r)}this._currentPathIndex=0},t.prototype.resetPath=function(){this.setPath(this.path,this.isPathLoop,!0)},t.prototype.reset=function(){this.target=null,this.velocity=cc.Vec2.ZERO,this.resetPath()},t.prototype.changeBeheavior=function(e,t){void 0===t&&(t=null),this.moveType=e,t&&(this.target=t)},t.prototype.applyForce=function(e,t){var o=e;e instanceof cc.Vec2&&(o=e.x,t=e.y),this.acc.x+=o,this.acc.y+=t},t.prototype.getNormalPoint=function(e,t,o){var n=o.sub(t),i=e.sub(t).project(n);return t.add(i)},t.prototype.drawPath=function(e){e.moveTo(this._runningPath[0].x,this._runningPath[0].y);for(var t=0;t<this._runningPath.length-1;t++){this._runningPath[t];var o=this._runningPath[t+1];e.lineTo(o.x,o.y)}e.stroke()},t.prototype.followPath=function(e,t){if(this._currentPathIndex==e.length-1)return cc.Vec2.ZERO;var n,i=this.velocity.clone();i.normalizeSelf(),i.mulSelf(o.PathPredictLength),i.addSelf(this.node.position);var r=e[this._currentPathIndex],c=e[this._currentPathIndex+1],a=this.getNormalPoint(i,r,c),s=a.sub(c).magSqr();return s<o.ReachPathEndThreshold&&(this._currentPathIndex+=1,this.isPathLoop&&this._currentPathIndex>=e.length-1&&(this._currentPathIndex=0)),n=a.addSelf(c.sub(r).normalizeSelf().mulSelf(o.PathPredictLength+10)),s>t*t?this.seek(n):cc.Vec2.ZERO},t.prototype.seek=function(e){var t=this._tmp_vec2;return t.x=e.x,t.y=e.y,t.subSelf(this.node.position),t.normalizeSelf(),t.mulSelf(this.maxSpeed),t.subSelf(this.velocity),t},t.prototype.arrive=function(e){var t=e.clone();t.subSelf(this.node.position);var o=t.mag();if(t.normalizeSelf(),o<100){var n=this.map(o,0,100,0,this.maxSpeed);t.mulSelf(n)}else t.mulSelf(this.maxSpeed);return t.subSelf(this.velocity),t},t.prototype.wander=function(){var e=this.node.position,t=this.node.parent.getContentSize();if(e.x<-t.width/2||e.y<-t.height/2||e.x>t.width/2||e.y>t.height/2)return this.seek(cc.v2(0,0));var o=this.velocity.clone();o.normalize(),o.mulSelf(0);var n=cc.v2(-1,0);return n.mulSelf(1),n.rotateSelf(this.wanderAngle),this.wanderAngle+=g.randomFloat(-1,1),o.add(n)},t.prototype._applyForces=function(){var e=cc.Vec2.ZERO,t=this.tarPos;this.target&&this.target.activeInHierarchy&&(t=this.target.position),this.moveType==c.Seek?e.addSelf(this.seek(t)):this.moveType==c.Arrive&&e.addSelf(this.arrive(t)),this.moveType==c.Path&&this._runningPath.length>0?e.addSelf(this.followPath(this._runningPath,this.pathRadius)):this.moveType==c.Wander&&e.addSelf(this.wander()),this.applyForce(this.gravity.x,this.gravity.y),this.applyForce(e.x,e.y)},t.prototype.limitVec2=function(e,t){var o=e.magSqr();return o>t*t&&e.mulSelf(t/Math.sqrt(o)),o},t.prototype.map=function(e,t,o,n,i){var r=(i-n)*e/(o-t)+n;return Math.max(n,Math.min(r,i))},t.prototype._step=function(){this._applyForces();var e=this.acc.mul(this.forceWeight);this.velocity.addSelf(e),this.limitVec2(this.velocity,this.maxSpeed),this.node.setPosition(this.node.position.add(this.velocity)),this.acc.set(cc.Vec2.ZERO),this.rotateByVelocity&&this.moveType!=c.Simple&&(this.node.angle=-(this.rotationOffset+this.velocity.signAngle(cc.Vec2.RIGHT)*cc.macro.DEG))},t.Behavior=c,t.ReachPathEndThreshold=400,t.PathPredictLength=25,r([h({type:cc.Enum(c)})],t.prototype,"moveType",void 0),r([h],t.prototype,"maxSpeed",void 0),r([h],t.prototype,"forceWeight",void 0),r([h({type:[cc.Vec2],visible:function(){return this.moveType==c.Path}})],t.prototype,"path",void 0),r([h({visible:function(){return this.moveType==c.Path}})],t.prototype,"pathRadius",void 0),r([h({visible:function(){return this.moveType==c.Path}})],t.prototype,"isPathLoop",void 0),o=r([u,f("movement/MoveEngine")],t)}(s.default);o.default=p,cc._RF.pop()},{"./SMoveBase":"SMoveBase"}],MsgBox:[function(e,t,o){"use strict";cc._RF.push(t,"80286DRY89Mi4zsQlde8jnL","MsgBox");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c},c=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<o;t++)for(var r=arguments[t],c=0,a=r.length;c<a;c++,i++)n[i]=r[c];return n};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./View"),s=e("../utils/ccUtil"),l=cc._decorator,u=l.ccclass,h=l.property,f=(l.requireComponent,l.playOnFocus,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_ok=null,t.btn_cancel=null,t.defaultStrings={},t.text=[],t.messageBoxCallback=null,t.label_ok=null,t.label_cancel=null,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){s.default.newButton(this.btn_ok,"MsgBox","on_btn_ok_clicked",this.node),s.default.newButton(this.btn_cancel,"MsgBox","on_btn_cancel_clicked",this.node)},t.prototype.onHidden=function(){},t.prototype.onShown=function(e){var t=this;this.messageBoxCallback=e.callback,Object.keys(e.text).forEach(function(o){var n,i=s.default.find(o,t.node,cc.Label),r=t.defaultStrings[o];null==r&&(r=i.string,t.defaultStrings[o]=r),i?i.string=(n=cc.js).formatStr.apply(n,c([r],e.text[o])):console.warn("label not found",o)})},t.prototype.start=function(){},t.prototype.on_btn_ok_clicked=function(){this.messageBoxCallback&&this.messageBoxCallback.call(null,o.OK),this.getComponent(a.default).hide()},t.prototype.on_btn_cancel_clicked=function(){this.messageBoxCallback&&this.messageBoxCallback.call(null,o.CANCEL),this.getComponent(a.default).hide()},t.OK=1,t.CANCEL=0,r([h(cc.Node)],t.prototype,"btn_ok",void 0),r([h(cc.Node)],t.prototype,"btn_cancel",void 0),o=r([u],t)}(cc.Component));o.default=f,cc._RF.pop()},{"../utils/ccUtil":"ccUtil","./View":"View"}],Net:[function(e,t,o){"use strict";cc._RF.push(t,"9e139lB+RRCNpxXRSqgoURG","Net"),Object.defineProperty(o,"__esModule",{value:!0}),o.net=void 0;var n=function(){function e(){this._timeout=8e3,this.headers={}}return e.prototype.setTimeout=function(e){this._timeout=e},e.prototype.httpRequest=function(t,o,n){var i=this;return console.log("["+o+"]: "+t),new Promise(function(r){var c=!1,a=setTimeout(function(){c=!0,s.abort(),r(e.Code.Timeout)},i._timeout),s=new XMLHttpRequest;s.onreadystatechange=function(){if(4===s.readyState)if(s.status>=200&&s.status<300){var e=s.responseText;if(c)return;clearTimeout(a),r(e)}else r(null)},s.open(o,t,!0),cc.sys.isNative&&s.setRequestHeader("Accept-Encoding","gzip,deflate"),Object.keys(i.headers).forEach(function(e){var t=i.headers[e];s.setRequestHeader(e,t)}),s.timeout=i._timeout,"POST"==o||"PUT"==o?(s.setRequestHeader("Content-Type","application/json"),s.send(n)):s.send()})},e.prototype.setHeader=function(e,t){this.headers[e]=t},e.prototype.httpGet=function(e,t){return t&&-1==e.indexOf("?")&&Object.keys(t).length>0&&(e+="?"),t&&(e+=Object.keys(t).map(function(e){return e+"="+t[e]}).join("&")),this.httpRequest(e,"GET")},e.prototype.httpPost=function(e,t){return this.httpRequest(e,"POST",t)},e.prototype.httpPut=function(e,t){return this.httpRequest(e,"PUT",t)},e.Code={Error:"__error__",Success:1,Timeout:"__timeout__"},e}();o.default=n,o.net=new n,cc._RF.pop()},{}],NoobGuider:[function(e,t,o){"use strict";cc._RF.push(t,"f45ceLsf9ROtbvY0c2dQB9F","NoobGuider");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c},c=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function c(e){try{s(n.next(e))}catch(t){r(t)}}function a(e){try{s(n.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,a)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return s([e,t])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},s=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<o;t++)for(var r=arguments[t],c=0,a=r.length;c<a;c++,i++)n[i]=r[c];return n};Object.defineProperty(o,"__esModule",{value:!0}),o.Guider=void 0;var l=e("../core/Signal"),u=e("../ui/ViewManager"),h=cc._decorator,f=h.ccclass,p=h.property;o.Guider=null;var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._lastClickedTime=0,t.wholeHotRect=null,t.hotRect=null,t.highlight=null,t.highlight_border=null,t.finger=null,t.glow=null,t.motionStreak=null,t.msgNode=null,t.msgLabel=null,t.clickSignal=new l.default,t.clickBackground=new l.default,t.doubleClickSignal=new l.default,t.background=null,t.maskStencilSp1=null,t.msgTitleLabel=null,t.msgButtonLabel=null,t.msgButton=null,t.node_anyKey=null,t.msgButtonCallback=null,t.maskComp=null,t.msgTitle="",t.validRect=null,t}return i(t,e),t.prototype.onLoad=function(){this.maskComp=this.highlight.getComponent(cc.Mask),this.hotRect.on(cc.Node.EventType.TOUCH_START,this.onPointTouchBegan,this),this.hotRect.on(cc.Node.EventType.TOUCH_END,this.onPointClick,this),this.background.on(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this),this.background.on(cc.Node.EventType.TOUCH_END,this.clickBackground.fire,this.clickBackground),this.hidePointer(),this.hideMessage(),this.motionStreak=this.finger.getComponentInChildren(cc.MotionStreak)},t.prototype.onDestroy=function(){this.hotRect.off(cc.Node.EventType.TOUCH_END,this.onPointClick,this),this.background.off(cc.Node.EventType.TOUCH_END,this.clickBackground.fire,this.clickBackground),this.hotRect.off(cc.Node.EventType.TOUCH_START,this.onPointTouchBegan,this),this.background.off(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this)},t.prototype.onShown=function(){},t.prototype.onPointTouchBegan=function(){return!1},t.prototype.onTouchBegan=function(e){if(!this.validRect)return!1;var t=e.currentTouch.getLocation;return!this.validRect.contains(t)},t.prototype.hideMask=function(){this.background.active=!1},t.prototype.showMask=function(){this.background.active=!0},t.prototype.hidePointer=function(){this.wholeHotRect.x=-1e3,this.background.getComponent(cc.Widget).updateAlignment(),this.motionStreak&&this.motionStreak.reset()},t.prototype.hideRect=function(){this.highlight_border.node.active=!1},t.prototype.showRect=function(e,t){"string"==typeof e&&(e=this.findUINode(e).getBoundingBoxToWorld());var o=this.node.convertToNodeSpaceAR(e.center);this.highlight.width=e.width,this.highlight.height=e.height,this.highlight_border.node.width=e.width+2,this.highlight_border.node.height=e.height+2,this.wholeHotRect.active=!0,this.wholeHotRect.x=o.x,this.wholeHotRect.y=o.y,this.validRect=e,this.highlight_border.node.active=!0,t?(this.hotRect.width=e.width,this.hotRect.height=e.height):(this.hotRect.width=0,this.hotRect.height=0),this.background.getComponent(cc.Widget).updateAlignment()},t.prototype.showFinger=function(e){void 0===e&&(e=!0),this.finger.position=cc.Vec2.ZERO,this.motionStreak&&this.motionStreak.reset(),this.finger.active=!0,e?(this.finger.getComponent(cc.Animation).play("hand_click"),this.glow.active=!0):(this.finger.getComponent(cc.Animation).stop("hand_click"),this.glow.active=!1)},t.prototype.showPointer=function(e,t){if(void 0===e&&(e=cc.Vec2.ZERO),void 0===t&&(t=!0),e instanceof cc.Node){var o=e.getBoundingBoxToWorld();this.showRect(o,t),e.getComponent(cc.Sprite)?this.maskComp.spriteFrame=e.getComponent(cc.Sprite).spriteFrame:this.maskStencilSp1&&(this.maskComp.spriteFrame=this.maskStencilSp1),this.showFinger()}this.showMask()},t.prototype.hideMessage=function(){this.msgNode.active=!1},t.prototype.setMessageTitle=function(e){this.msgTitle=e},t.prototype.showMessage=function(e,t,o,n,i){e=e.replace(/\/r?\/n/g,"\n"),this.msgNode.x=t||0,this.msgNode.y=o||0,this.msgNode.width=n,this.msgNode.height=i,this.msgNode.active=!0,this.msgLabel.string=e,null==this.msgTitle||""==this.msgTitle?this.msgTitleLabel.node.active=!1:(this.msgTitleLabel.node.active=!0,this.msgTitleLabel.string=this.msgTitle),this.msgTitle="",this.msgButton.node.active=!1,this.node_anyKey.active=!1},t.prototype.showMessageButton=function(e,t){this.msgButton.node.active=!0,this.msgButtonLabel.string=e,this.msgButtonCallback=t},t.prototype.showMessageButtonEx=function(e){var t=this;return new Promise(function(o){e&&t.showMessageButton(e,function(){o()})})},t.prototype.showMessageEx=function(e,t,o,n,i,r,c,a){if(this.setMessageTitle(e),this.showMessage(t,i,r,c,a),o)return this.showMessageButtonEx(o,n)},t.prototype.click_msgButton=function(){this.hideMessage(),this.msgButtonCallback&&this.msgButtonCallback()},t.prototype.onPointClick=function(){var e=Date.now();e-this._lastClickedTime<300?this.doubleClickSignal.fire():this.clickSignal.fire(),this._lastClickedTime=e},t.prototype.waitClick=function(e,t,o){return void 0===t&&(t=!0),void 0===o&&(o=!0),c(this,void 0,void 0,function(){var n=this;return a(this,function(){return this.showPointer(e),o||this.hideFinger(),[2,new Promise(function(o,i){n.clickSignal.on(function(){if(t){var r=e.getComponent(cc.Button)||e.getComponentInChildren(cc.Button);try{r?cc.Component.EventHandler.emitEvents(r.clickEvents,{target:r.node}):e.emit(cc.Node.EventType.TOUCH_END,{target:e})}catch(c){i(c)}n.clickSignal.clear()}o()})})]})})},t.prototype.waitDoubleClick=function(e){return c(this,void 0,void 0,function(){var t=this;return a(this,function(){return this.showPointer(e),[2,new Promise(function(o){t.doubleClickSignal.on(function(){e.getComponents(cc.Component).forEach(function(e){var t=e.onDoubleClick;t&&t.call(e)}),o()})})]})})},t.prototype.waitAnyKey=function(e){return c(this,void 0,void 0,function(){var t=this;return a(this,function(){return this.node_anyKey.active=!0,[2,new Promise(function(o){t.clickBackground.on(function(){t.clickBackground.clear(),o()}),e&&t.waitClick(e,!1,!1).then(function(){o()})})]})})},t.prototype.moveFinger=function(e,t,o){var n=this;void 0===o&&(o=cc.macro.REPEAT_FOREVER),this.showFinger(!1),e=this.hotRect.convertToNodeSpaceAR(e),t=this.hotRect.convertToNodeSpaceAR(t),e.subSelf(cc.v2(0,50)),t.subSelf(cc.v2(0,50));var i=cc.callFunc(function(){n.finger.position=e,n.motionStreak&&n.motionStreak.reset()}),r=cc.moveTo(1,t).easing(cc.easeSineInOut()),c=cc.delayTime(1),a=cc.sequence(i,r,c).repeat(o);a.setTag(1e3),this.finger.runAction(a)},t.prototype.startDrag=function(e,t,o){void 0===o&&(o=!0);var n=this.findUINode(e),i=this.findUINode(t),r=n.getBoundingBoxToWorld(),c=i.getBoundingBoxToWorld();o?(this.showMask(),this.showRect(r.union(cc.rect(),c))):(this.hideMask(),this.hideRect()),this.moveFinger(r.center,c.center)},t.prototype.stopDrag=function(){this.finger.stopActionByTag(1e3),this.hidePointer()},t.prototype.findUINode=function(e,t){return"UI"==t?cc.find("Canvas/ViewManager/"+e):cc.find(e)},t.prototype.waitClickEx=function(e,t,o,n,i,r){return void 0===n&&(n=0),void 0===i&&(i=0),c(this,void 0,void 0,function(){var c;return a(this,function(a){switch(a.label){case 0:return[4,event.sleep(.1)];case 1:if(a.sent(),e instanceof cc.Node)c=e;else{if(null==e)return[2,console.error("waitClickEx:"+e+" null ")];if(null==(c=this.findUINode(e)))return[2,console.error(e+" not found ")]}return t&&this.setMessageTitle(t),o&&this.showMessage(o,n,i),this.showMask(),r?(this.showRect(c.getBoundingBoxToWorld()),this.hideFinger(),[4,this.waitAnyKey(c)]):[3,3];case 2:return a.sent(),[3,5];case 3:return[4,this.waitClick(c).catch(function(e){return console.error(e)})];case 4:a.sent(),a.label=5;case 5:return this.hideMask(),this.hidePointer(),this.hideMessage(),[2]}})})},t.prototype.hideFinger=function(){this.finger.active=!1},t.prototype.hideAll=function(){this.hideMask(),this.hideRect(),this.hideMessage(),this.hideFinger()},t.prototype.waitAnyInput=function(e,t,o,n){return c(this,void 0,void 0,function(){return a(this,function(i){switch(i.label){case 0:return this.showMessage(e,t,o,n),this.hidePointer(),this.hideMask(),[4,this.waitAnyKey()];case 1:return i.sent(),this.hideMessage(),[4,event.sleep(.3)];case 2:return i.sent(),[2]}})})},t.prototype.waitOpen=function(e,t){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];return c(this,void 0,void 0,function(){var n,i,r;return a(this,function(c){switch(c.label){case 0:return null!=(n=u.default.instance.view("UI/"+e))?[3,2]:(t&&(i=u.default.instance).show.apply(i,s(["UI/"+e],o)),[4,event.wait(e+".onShown.After")]);case 1:return n=c.sent()[0],[3,4];case 2:return(r=u.default.instance).show.apply(r,s([n],o)),[4,event.wait(e+".onShown.After")];case 3:n=c.sent()[0],c.label=4;case 4:return[2,n]}})})},t.prototype.waitClickUI=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];return this.waitClickEx.apply(this,s(["Canvas/ViewManager/"+e],t))},t.prototype.waitClickLayoutUI=function(e,t,o){var n=cc.find("Canvas/ViewManager/"+e);if(n){var i=cc.find(o,n.children[t]);if(i)return this.waitClickEx(i)}},r([p(cc.Node)],t.prototype,"wholeHotRect",void 0),r([p(cc.Node)],t.prototype,"hotRect",void 0),r([p(cc.Node)],t.prototype,"highlight",void 0),r([p(cc.Sprite)],t.prototype,"highlight_border",void 0),r([p(cc.Node)],t.prototype,"finger",void 0),r([p(cc.Node)],t.prototype,"glow",void 0),r([p(cc.Node)],t.prototype,"msgNode",void 0),r([p(cc.Label)],t.prototype,"msgLabel",void 0),r([p(cc.Node)],t.prototype,"background",void 0),r([p(cc.SpriteFrame)],t.prototype,"maskStencilSp1",void 0),r([p(cc.Label)],t.prototype,"msgTitleLabel",void 0),r([p(cc.Label)],t.prototype,"msgButtonLabel",void 0),r([p(cc.Button)],t.prototype,"msgButton",void 0),r([p(cc.Node)],t.prototype,"node_anyKey",void 0),r([f],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../core/Signal":"Signal","../ui/ViewManager":"ViewManager"}],NumTrigger:[function(e,t,o){"use strict";cc._RF.push(t,"54a31TIZXNNEZ83Ojhn4FS4","NumTrigger");var n=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.TriggerTimes=void 0;var i,r=cc._decorator,c=r.ccclass,a=(r.property,function(e,t,o){this.min=Number.MIN_VALUE,this.max=Number.MAX_VALUE,this.id=0,this.triggered=!1,this.min=e,this.max=t,this.callback=o});(function(e){e[e.ONCE=1]="ONCE",e[e.UNLIMITED=-1]="UNLIMITED"})(i=o.TriggerTimes||(o.TriggerTimes={}));var s=function(){function e(){this.points=[],this.triggerType=i.ONCE}return e.prototype.add=function(e,t,o){var n=new a(e,t,o);this.points.push(n)},e.prototype.reset=function(){this.points.forEach(function(e){return e.triggered=!1})},e.prototype.trigger=function(e,t){return!t.triggered&&e>=t.min&&e<=t.max&&(this.triggerType==i.UNLIMITED&&this.reset(),t.triggered=!0,t.callback(),!0)},e.prototype.update=function(e){var t=this;this.points.some(function(o){return t.trigger(e,o)})},n([c],e)}();o.default=s,cc._RF.pop()},{}],OneWayPlatform:[function(e,t,o){"use strict";cc._RF.push(t,"ce5ccFric9B9KY9ytogxnMh","OneWayPlatform");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){this.pointVelPlatform=cc.v2(),this.pointVelOther=cc.v2(),this.relativeVel=cc.v2(),this.relativePoint=cc.v2(),this.body=this.getComponent(cc.RigidBody),this.body.enabledContactListener=!0},t.prototype.start=function(){},t.prototype.onBeginContact=function(e,t,o){for(var n=o.body,i=t.body,r=e.getWorldManifold().points,c=this.pointVelPlatform,a=this.pointVelOther,s=this.relativeVel,l=this.relativePoint,u=0;u<r.length;u++){if(i.getLinearVelocityFromWorldPoint(r[u],c),n.getLinearVelocityFromWorldPoint(r[u],a),i.getLocalVector(a.subSelf(c),s),s.y<-32)return;if(s.y<32){i.getLocalPoint(r[u],l);var h=t.getAABB().height/2;if(l.y>h-3.2)return}}e.disabled=!0},r([a],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],PandoraPoint:[function(e,t,o){"use strict";cc._RF.push(t,"0d12fW+y7pPaL/wROjL6izJ","PandoraPoint");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../core/Signal"),a=cc._decorator,s=a.ccclass,l=a.property,u=a.menu,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.numberVisible=!0,t.subPoints=[],t.n=0,t.signal=new c.default,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){var e=this;this.sprite=this.getComponent(cc.Sprite),this.label=this.getComponentInChildren(cc.Label),this.label&&(this.label.node.active=this.numberVisible),this.subPoints.forEach(function(t){t.signal.add(e.onSubChanged,e)})},t.prototype.onSubChanged=function(){var e=this.subPoints.some(function(e){return e.n>0});this.setNumber(e?1:0)},t.prototype.start=function(){},t.prototype.setNumber=function(e){this.label&&(this.numberVisible&&(this.label.string=e+""),this.numberVisible&&(this.label.node.active=0!=e)),this.sprite.enabled=0!=e,this.n=e,this.signal.fire(e)},r([l],t.prototype,"numberVisible",void 0),r([l([o])],t.prototype,"subPoints",void 0),r([s,u("Controller/PandoraPoint")],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../core/Signal":"Signal"}],ParallaxNode:[function(e,t,o){"use strict";cc._RF.push(t,"80e24UZAb5GD7eLDz/q0KWt","ParallaxNode");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../utils/ccUtil"),a=cc._decorator,s=a.ccclass,l=a.property,u=a.menu,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.offset=cc.v2(1,1),t.refrenceNode=null,t.refrecenOffset=cc.Vec2.ZERO,t.size=cc.winSize,t.horizontal_repeat=!0,t.vertical_repeat=!1,t.inverted=!1,t.dir=1,t}return i(t,e),t.prototype.onLoad=function(){this.dir=this.inverted?-1:1},t.prototype.start=function(){this.refrecenOffset=this.refrenceNode.position;var e=this.node.children[0];if(this.size=e.getContentSize(),this.horizontal_repeat){var t=cc.instantiate(e),o=cc.instantiate(e);t.parent=this.node,o.parent=this.node,t.x=-e.width,o.x=e.width}else this.vertical_repeat&&(t=cc.instantiate(e),o=cc.instantiate(e),t.parent=this.node,o.parent=this.node,t.y=-e.height,o.y=e.height)},t.prototype.setBackground=function(e){this.node.children.forEach(function(t){var o=t.getComponent(cc.Sprite);c.default.setDisplay(o,e)})},t.prototype.update=function(){this.horizontal_repeat?(this.node.x=this.dir*(this.refrenceNode.x-this.refrecenOffset.x)*this.offset.x,this.node.x=this.node.x%this.size.width):this.vertical_repeat&&(this.node.y=this.dir*(this.refrenceNode.y-this.refrecenOffset.y)*this.offset.y,this.node.y=this.node.y%this.size.height)},r([l],t.prototype,"offset",void 0),r([l(cc.Node)],t.prototype,"refrenceNode",void 0),r([l],t.prototype,"horizontal_repeat",void 0),r([l],t.prototype,"vertical_repeat",void 0),r([l],t.prototype,"inverted",void 0),r([s,u("\u5176\u5b83/ParallaxNode")],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../utils/ccUtil":"ccUtil"}],PasrTimer:[function(e,t,o){"use strict";cc._RF.push(t,"bd732ZZcyNCcKzuEddP93qx","PasrTimer"),Object.defineProperty(o,"__esModule",{value:!0}),o.PasrTimer=void 0;var n=function(){function e(e,t,o,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===o&&(o=0),void 0===n&&(n=0),this.stage=0,this.stageTime=[],this.timer=0,this.value=0,this.queriedSustain=!1,this.queriedRelease=!1,this.queriedFinished=!1,this.stageTime=new Array,this.stageTime[0]=e,this.stageTime[1]=t,this.stageTime[2]=o,this.stageTime[3]=n,this.stage=4,this.queriedFinished=!0}return Object.defineProperty(e.prototype,"p",{get:function(){return this.stageTime[0]},set:function(e){this.stageTime[0]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"a",{get:function(){return this.stageTime[1]},set:function(e){this.stageTime[1]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"s",{get:function(){return this.stageTime[2]},set:function(e){this.stageTime[2]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"r",{get:function(){return this.stageTime[3]},set:function(e){this.stageTime[3]=e},enumerable:!1,configurable:!0}),e.prototype.setStateTime=function(e,t){this.stageTime[e]=t},e.prototype.Tick=function(e){if(4==this.stage)return this.value=0,0;for(;this.stage<4&&(this.timer>=1||0==this.stageTime[this.stage]);)this.timer=0,this.stage++;return this.stage<4&&(this.timer+=e/this.stageTime[this.stage],this.timer>1&&(this.timer=1)),0==this.stage?this.value=0:1==this.stage?this.value=this.timer:2==this.stage?this.value=1:3==this.stage?this.value=1-this.timer:this.value=0,this.value},e.prototype.GetValue=function(){return this.value},e.prototype.reachedSustain=function(){return!this.queriedSustain&&this.stage>=2&&(this.queriedSustain=!0,!0)},e.prototype.reachedRelease=function(){return!this.queriedRelease&&this.stage>=3&&(this.queriedRelease=!0,!0)},e.prototype.isFinished=function(){return 4==this.stage},e.prototype.reachedFinished=function(){return 4==this.stage&&!this.queriedFinished&&(this.queriedFinished=!0,!0)},e.prototype.reset=function(){this.stage=0,this.timer=0,this.value=0,this.queriedSustain=!1,this.queriedFinished=!1},e.prototype.Stop=function(){this.stage=4},e.prototype.GetStage=function(){return this.stage},e.prototype.SetStage=function(e){this.stage=e,this.timer=0},e.prototype.TotalTime=function(){return this.stageTime[0]+this.stageTime[1]+this.stageTime[2]+this.stageTime[3]},e}();o.PasrTimer=n,cc._RF.pop()},{}],PersistNode:[function(e,t,o){"use strict";cc._RF.push(t,"bee3b2VIFhPNJDQUGW7mTDp","PersistNode");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../../framework/extension/aldsdk/StatHelper"),a=e("../../../../framework/misc/Device"),s=e("../../../../framework/ui/ViewManager"),l=e("../../../../framework/core/event"),u=e("../../../../framework/extension/Platform"),h=e("./PlayerInfo"),f=e("../../../../framework/extension/weak_net_game/UserInfo"),p=e("../../../../framework/extension/buffs/BuffSystem"),d=e("../../level/AutoLabour"),y=e("../../../../framework/extension/SDKInterafce"),v=e("../../../../framework/extension/wxsdk/GameConfigs"),_=e("../../../../framework/extension/ttsdk/ttsdk"),m=cc._decorator,g=m.ccclass,w=(m.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isNewUser=!0,t.isHidding=!1,t}return i(t,e),t.prototype.onLoad=function(){cc.game.addPersistRootNode(this.node),cc.game.on(cc.game.EVENT_SHOW,this.onShow,this,!1),cc.game.on(cc.game.EVENT_HIDE,this.onHide,this,!1),a.default.setAudioPath("Audio/"),y.SDKBase.initConfig(v.GameConfig),csv.setParser(function(e,t){if("item"==e&&"string"==typeof t){var o=t.split(",");return{type:o[0],id:o[1],count:parseInt(o[2])}}}),p.default.register("AutoLabour",d.default),l.evt.on("wxsdk.BannerReady",this.onBannerReady,this),l.evt.on("View.onShow",this.onViewShow,this),l.evt.on("View.onHidden",this.onViewHidden,this),l.evt.on("Loading.Success",this.onLoadingSuccess,this),this.addComponent(p.default),l.evt.on("wx.shareMessageToFriend",this.onShareToFriend,this),l.evt.on("WeakNetGame.ShareSuccess",this.onShareSuccess,this),l.evt.on("WeakNetGame.ShareFail",this.onShareFail,this),l.evt.on("PlayerInfo.labour",this.onLabour,this),cc.sys.BYTEDANCE_GAME==cc.sys.platform&&_.ttsdk.douyin_sidebar_check()},t.prototype.onLabour=function(e){console.log("\u4f53\u529b"+e),!f.UserInfo.isUse&&e<h.PlayerInfo.nowTili&&(f.UserInfo.isUse=!0,f.UserInfo.save("isUse")),h.PlayerInfo.nowTili=e},t.prototype.onShareFail=function(e){c.default.sendPath("\u7528\u6237\u5206\u4eab\u5931\u8d25\u6b21\u6570\uff08\u83b7\u5229\u70b9\u5206\u4eab\uff09",e)},t.prototype.onShareSuccess=function(e){c.default.sendPath("\u7528\u6237\u5206\u4eab\u6210\u529f\u6b21\u6570\uff08\u83b7\u5229\u70b9\u5206\u4eab\uff09",e)},t.prototype.onShareToFriend=function(e){u.default.share(function(t){t&&e()})},t.prototype.onViewShow=function(){u.default.hideBannerAd()},t.prototype.onViewHidden=function(){u.default.hideBannerAd()},t.prototype.onDestroy=function(){l.evt.off(this)},t.prototype.onBannerReady=function(){s.default.instance&&s.default.instance.allViews.forEach(function(e){e.node.active&&csv.Config.BannerAdWhiteList&&-1==csv.Config.BannerAdWhiteList.indexOf(e.node.name)&&(console.log(e.node.name+"\u672a\u5728\u767d\u540d\u5355\u91cc\uff0c\u9690\u85cfbanner"),u.default.hideBannerAd())})},t.prototype.onShow=function(){this.isHidding&&(l.evt.emit("Game.Resume"),this.isHidding=!1)},t.prototype.onHide=function(){h.PlayerInfo.saveExit(),h.PlayerInfo.save(null,!0),this.isHidding=!0,this.unschedule(this.time30),this.unschedule(this.time45),this.unschedule(this.time60),u.default.hideBannerAd()},t.prototype.start=function(){},t.prototype.onLoadingSuccess=function(){l.evt.off("Loading.Success",this.onLoadingSuccess,this),this.isNewUser&&(this.scheduleOnce(this.time30,30),this.scheduleOnce(this.time45,45),this.scheduleOnce(this.time60,60),c.default.userAction("\u52a0\u8f7d\u6210\u529f"))},t.prototype.time30=function(){c.default.userAction("30s\u672a\u9000\u51fa")},t.prototype.time45=function(){c.default.userAction("45s\u672a\u9000\u51fa")},t.prototype.time60=function(){c.default.userAction("60s\u672a\u9000\u51fa")},r([g],t)}(cc.Component));o.default=w,cc._RF.pop()},{"../../../../framework/core/event":"event","../../../../framework/extension/Platform":"Platform","../../../../framework/extension/SDKInterafce":"SDKInterafce","../../../../framework/extension/aldsdk/StatHelper":"StatHelper","../../../../framework/extension/buffs/BuffSystem":"BuffSystem","../../../../framework/extension/ttsdk/ttsdk":"ttsdk","../../../../framework/extension/weak_net_game/UserInfo":"UserInfo","../../../../framework/extension/wxsdk/GameConfigs":"GameConfigs","../../../../framework/misc/Device":"Device","../../../../framework/ui/ViewManager":"ViewManager","../../level/AutoLabour":"AutoLabour","./PlayerInfo":"PlayerInfo"}],Platform:[function(e,t,o){"use strict";cc._RF.push(t,"7af6a7t0ilNfpjqyX0Z3HeA","Platform"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=e("../core/Signal"),r=e("./wxsdk/sdk"),c=e("../misc/SpriteFrameCache"),a=e("../ui/ToastManager"),s=e("../core/event"),l=e("./wxsdk/GameConfigs"),u=e("./qq/qqsdk"),h=e("./ttsdk/ttsdk");(function(e){e[e.Hide=99]="Hide",e[e.Next=100]="Next",e[e.RankSmall=101]="RankSmall",e[e.Rank=102]="Rank"})(n||(n={}));var f=function(){function e(){}return e.getOpenID=function(){if(cc.sys.WECHAT_GAME==cc.sys.platform){var e=r.wxsdk.userInfo;return e&&e.openID?e.openID:""}return cc.sys.QQ_PLAY==cc.sys.platform?void 0:"123"},e.getNick=function(){return cc.sys.QQ_PLAY==cc.sys.platform?void 0:cc.sys.WECHAT_GAME==cc.sys.platform?r.wxsdk.userInfo&&r.wxsdk.userInfo.nickName||"\u81ea\u5df2":"\u73a9\u5bb6\u81ea\u5df2"},e.getHead=function(){if(cc.sys.QQ_PLAY!=cc.sys.platform){if(cc.sys.WECHAT_GAME==cc.sys.platform){var e=r.wxsdk.userInfo;return e&&e.avatarUrl?e.avatarUrl:"https://tank.wdfunny.com/speed_logo/2.jpg"}return"https://tank.wdfunny.com/speed_logo/1.jpg"}},e.loadSelfHead=function(t){cc.sys.QQ_PLAY==cc.sys.platform||c.default.instance.getSpriteFrame(e.getHead()).then(function(e){return t.spriteFrame=e})},e.exit=function(){cc.sys.WECHAT_GAME==cc.sys.platform?(wx.offShow(e.onEnterForeground),wx.offHide(e.onEnterBackground)):(cc.sys.QQ_PLAY,cc.sys.platform)},e.login=function(e){cc.sys.WECHAT_GAME==cc.sys.platform?r.wxsdk.login(e):(cc.sys.QQ_PLAY,cc.sys.platform)},e.checkAuth=function(){if(cc.sys.WECHAT_GAME==cc.sys.platform)return r.wxsdk.checkAuth();return Promise.resolve({avatarUrl:"https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1030399321,1493970029&fm=27&gp=0.jpg",city:"WuHan",gender:1,nickName:"aliwangzai"})},e.fix_wechat_subContext=function(e,t){e.node.active=!1,t.scheduleOnce(function(){e.node.active=!0},.1)},e.setUserId=function(e){this.userId=e},e.initShare=function(t,o){this.defaultShareConfig=t,this.userId=o,this.isAndroid="Android"==cc.sys.os,console.log("================= os",cc.sys.os),this.isIOS="iOS"==cc.sys.os,cc.sys.WECHAT_GAME==cc.sys.platform?(r.wxsdk.showShareMenu(t[0]),wx.onShow(e.onEnterForeground),wx.onHide(e.onEnterBackground)):(cc.sys.QQ_PLAY,cc.sys.platform),this.initUpdate()},e.getGameID=function(){return cc.sys.QQ_PLAY,cc.sys.platform,"speed_wanyiwan"},e.getLaunchOptions=function(){return cc.sys.WECHAT_GAME==cc.sys.platform?wx.getLaunchOptionsSync():{scene:0,query:{}}},e.getCity=function(){return""},e.doShare=function(e,t,o){void 0===o&&(o=3e3),this.doShareWithParams(null,e,t,o)},e.share=function(e){this.doShare(this.defaultShareConfig,e)},e.doShareWithParams=function(t,o,n,i,c){var a;if(void 0===c&&(c=2e3),o=o||this.defaultShareConfig,Array.isArray(o)&&(a=g.getRandomInArray(o)),console.log("######\u5f00\u59cb\u5206\u4eab"),cc.sys.WECHAT_GAME==cc.sys.platform){var s=void 0;s=window.qq?u.qqsdk:window.tt?h.ttsdk:r.wxsdk,(t=t||{}).userId=this.userId,s.openShare(a,t);var l=(new Date).getTime();e.onEnterForegroundSignal.on(function(){e.onEnterForegroundSignal.clear(),(new Date).getTime()-l>c?setTimeout(function(){n&&n.call(i,1)},500):n&&n.call(i,0)})}else cc.sys.QQ_PLAY==cc.sys.platform||n&&n.call(i,1)},e.setAdEnabled=function(e){this._videoEnabled=e,this._bannerEnabled=e},e.isVideoAdEnabled=function(){return this._videoEnabled},e.isBannerAdEnabled=function(){return this._bannerEnabled},e.sendUmengEvt=function(e,t){cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative&&jsb.reflection.callStaticMethod("Umeng","umengEvt:count:",e,t)},e.watch_video=function(t,o,n){if(console.log("######\u5f00\u59cb\u770b\u89c6\u9891"),this._videoEnabled)if(cc.sys.isNative)if(cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative){cc.audioEngine.setMusicVolume(0),jsb.reflection.callStaticMethod("TXsdk","showRewardedVideo");var i=function(){t&&t.call(o),console.log(t,name),cc.audioEngine.setMusicVolume(1)};e.video_callback.on(i);var c=function(){cc.audioEngine.setMusicVolume(1),n&&n.call(o)};e.video_failcallback.on(c)}else cc.sys.os==cc.sys.OS_ANDROID&&cc.sys.isNative?(jsb.reflection.callStaticMethod("com/mimgame/sdk/BytedanceAdSdk","loadAd","()V"),i=function(){t&&t.call(o),console.log(t,name),name&&console.log("\u8fdb\u5165\u57cb\u70b9\u4e0a\u4f201")},e.video_callback.on(i),c=function(){n&&n.call(o),name&&console.log("\u8fdb\u5165\u57cb\u70b9\u4e0a\u4f202")},e.video_failcallback.on(c)):t&&t.call(o);else{var s=void 0;if(window.qq)s=u.qqsdk;else if(window.tt)s=h.ttsdk;else{if(!window.wx)return void(t&&t.call(o));s=r.wxsdk}s&&s.loadVideoAd(function(i,r){"load"==i?e._refreshEnabled=!1:"show"==i?cc.audioEngine.pauseMusic():"close"==i?(e._refreshEnabled=!0,cc.audioEngine.pauseMusic(),cc.audioEngine.resumeMusic(),r?t&&t.call(o):(a.Toast.make("\u5fc5\u987b\u770b\u5b8c\u89c6\u9891,\u624d\u80fd\u83b7\u53d6\u5956\u52b1"),wx.showModal({title:"\u63d0\u793a",content:"\u770b\u5b8c\u5e7f\u544a\u624d\u80fd\u83b7\u5f97\u5956\u52b1\u54e6",showCancel:!1}))):"error"==i&&n&&n.call(o)})}},e.initSDK=function(){cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative&&(jsb.reflection.callStaticMethod("GDTSdk","init"),jsb.reflection.callStaticMethod("Umeng","init"))},e.showInterstitial=function(t,o,n){if(console.log("####\u663e\u793a\u63d2\u5c4f\u5e7f\u544a"),this.hideBannerAd(),!cc.sys.isNative)return window.qq?u.qqsdk.showInterstitial(n):window.tt?h.ttsdk.showInterstitial(n):r.wxsdk.showInterstitial(n);if(cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative){cc.audioEngine.setMusicVolume(0),jsb.reflection.callStaticMethod("TXsdk","showFullScreeAd");var i=function(){t&&t.call(o),console.log(t,name),cc.audioEngine.setMusicVolume(1)};e.interstitial_callback.on(i)}else cc.sys.os==cc.sys.OS_ANDROID&&cc.sys.isNative&&(jsb.reflection.callStaticMethod("com/mimgame/sdk/BytedanceAdSdk","loadFullscreenAd","()V"),cc.audioEngine.setMusicVolume(0),i=function(){t&&t.call(o),console.log(t,name),cc.audioEngine.setMusicVolume(1)},e.interstitial_callback.on(i));return Promise.resolve()},e.showGamePortal=function(e){var t=null;console.log("\u521b\u5efa\u63a8\u8350\u4f4d\u5b9e\u4f8b-----"),wx.createGamePortal?t=wx.createGamePortal({adUnitId:l.GameConfig.portal_id}):(console.error("\u4e0d\u652f\u6301wx.createGamePortal"),e&&e(0)),t&&t.load().then(function(){t.show()}).catch(function(t){console.error("createGamePortal:"+t),e&&e(1,t)})},e.showBannerAd=function(e){if(console.log("######\u663e\u793aBanner\u5e7f\u544a"),this._bannerEnabled)if(cc.sys.isNative)cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative||cc.sys.QQ_PLAY==cc.sys.platform||cc.sys.os==cc.sys.OS_ANDROID&&cc.sys.isNative||Math.random()<.5&&(console.log("\u663e\u793a\u5e7f\u544a\u5931\u8d25(\u6a21\u62df)"),e&&e());else{if(window.qq)return u.qqsdk.showBannerAd(e);if(window.tt)return h.ttsdk.showBannerAd(e);if(window.wx)return r.wxsdk.showBannerAd(e)}},e.isBannerShow=function(){if(CC_WECHATGAME)return r.wxsdk.isBannerShow()},e.hideBannerAd=function(){if(console.log("######\u9690\u85cfBanner\u5e7f\u544a"),cc.sys.WECHAT_GAME==cc.sys.platform){if(window.qq)return void u.qqsdk.hideBannerAd();if(window.tt)return h.ttsdk.hideBannerAd();r.wxsdk.hideBannerAd()}else cc.sys.QQ_PLAY==cc.sys.platform||(cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative?jsb.reflection.callStaticMethod("TXsdk","hideBanner"):cc.sys.os==cc.sys.OS_ANDROID&&cc.sys.isNative&&jsb.reflection.callStaticMethod("com/mimgame/sdk/BytedanceAdSdk","closeBanner","()V"))},e.refreshBannerAd=function(){if(console.log("\u5237\u65b0 banner "),CC_WECHATGAME){if(window.qq)return void u.qqsdk.loadBannerAd();if(window.tt)return h.ttsdk.destroy();r.wxsdk.loadBannerAd()}},e.reloadBannerAd=function(e,t){void 0===e&&(e=!1),CC_WECHATGAME?(r.wxsdk.hideBannerAd(),r.wxsdk.loadBannerAd(function(o){"load"==o&&(e?r.wxsdk.showBannerAd():"error"==o&&t&&t())})):console.log("####reload Banner.....")},e.initBannerAd=function(t){void 0===t&&(t=1),0!=t&&(cc.sys.QQ_PLAY==cc.sys.platform||cc.sys.WECHAT_GAME==cc.sys.platform&&setInterval(function(){e.bannnerRefreshEnabled&&e._refreshEnabled&&(console.log("######\u52a0\u8f7dWX Banner\u5e7f\u544a"),r.wxsdk.hideBannerAd(),r.wxsdk.loadBannerAd(function(e){"load"==e&&r.wxsdk.showBannerAd()}))},4e4))},e.jumpTo=function(){},e.showRankDialog=function(){console.log("[Platform]#showRankDialog"),a.Toast.make("#[Platform]#showRankDialog")},e.onEnterForeground=function(t){console.log("=====================onEnterForeground====================="),cc.sys.platform==cc.sys.QQ_PLAY&&cc.audioEngine.resumeMusic(),e.onEnterForegroundSignal.fire(t),s.evt.emit("onEnterForeground")},e.onEnterBackground=function(){s.evt.emit("onEnterBackground")},e.onGameExit=function(){},e.sendMessageToOpen=function(e,t){CC_WECHATGAME&&r.wxsdk.postMessage(e,t)},e.showSmallRank=function(e,t){r.wxsdk.postMessage(n.RankSmall,{rankName:e,rankType:t})},e.showRank=function(e,t){r.wxsdk.postMessage(n.Rank,{rankName:e,rankType:t})},e.hideRank=function(){r.wxsdk.postMessage(n.Hide)},e.getRankList=function(){console.log("[Platform]#\u83b7\u53d6\u6392\u884c\u699c\u6570\u636e"),cc.sys.platform==cc.sys.QQ_PLAY||(cc.sys.platform,cc.sys.WECHAT_GAME)},e.uploadScore=function(e,t){if(console.log("[Platform]#\u4e0a\u4f20\u5206\u6570"),cc.sys.platform==cc.sys.QQ_PLAY);else if(cc.sys.WECHAT_GAME==cc.sys.platform){var o=JSON.stringify(t);r.wxsdk.uploadScore(e,o)}},e.uploadScores=function(e){if(cc.sys.platform!=cc.sys.QQ_PLAY)return cc.sys.WECHAT_GAME==cc.sys.platform?r.wxsdk.uploadScores(e):Promise.resolve({})},Object.defineProperty(e,"launch_options",{get:function(){return CC_WECHATGAME?(null==this._launch_options&&(this._launch_options=wx.getLaunchOptionsSync()),this._launch_options):null},enumerable:!1,configurable:!0}),e.matchPath=function(e){var t=this;return null!=this.launch_options&&(e+"").split(/[,\s]+/).some(function(e){var o=e.split(/[\?&@\*]/);return(o=o.filter(function(e){return""!=e})).every(function(e){var o=e.split("="),n=o[0],i=o[1],r=t.launch_options.query[n];return(null!=r||null!=i)&&r==i})})},e.loadSubPackage=function(e,t){return CC_WECHATGAME?window.qq?new Promise(function(o,n){qq.loadSubpackage({name:e,success:function(){o()},fail:function(){n()}}).onProgressUpdate(function(e){t&&t(e.progress,e.totalBytesWritten,e.totalBytesExpectedToWrite)})}):window.wx?new Promise(function(o,n){var i=0,r=wx.loadSubpackage({name:e,success:function(){clearInterval(i),o()},fail:function(t){clearInterval(i),n(t+":"+e)}}),c=0;i=setInterval(function(){c+=5,t&&t(c,c,100),c>=100&&clearInterval(i)},20),r.onProgressUpdate(function(e){0!=i&&(clearInterval(i),i=0),t&&t(e.progress,e.totalBytesWritten,e.totalBytesExpectedToWrite)})}):void 0:new Promise(function(e){var o=0,n=setInterval(function(){o+=10,t&&t(o,o,100),o>=100&&(clearInterval(n),e())},50)})},e.initUpdate=function(){if(CC_WECHATGAME){var e=wx.getUpdateManager();e.onCheckForUpdate(function(e){console.log(e.hasUpdate)}),e.onUpdateReady(function(){wx.showModal({title:"\u66f4\u65b0\u63d0\u793a",content:"\u65b0\u7248\u672c\u5df2\u7ecf\u51c6\u5907\u597d\uff0c\u662f\u5426\u91cd\u542f\u5e94\u7528\uff1f",success:function(t){t.confirm&&e.applyUpdate()}})}),e.onUpdateFailed(function(){})}},e.gc=function(){CC_WECHATGAME&&wx.triggerGC()},e.bannnerRefreshEnabled=!0,e._refreshEnabled=!1,e.onEnterForegroundSignal=new i.default,e.isAndroid=!1,e.isIOS=!1,e.configGetSignal=new i.default,e.userId="0",e.defaultShareConfig=null,e._videoEnabled=!0,e._bannerEnabled=!0,e.video_callback=new i.default,e.video_failcallback=new i.default,e.interstitial_callback=new i.default,e}();o.default=f,window.pause=function(){cc.game.pause(),console.log("\u6e38\u620f\u6682\u505c")},window.resume=function(){cc.game.resume(),console.log("\u6e38\u620f\u7ee7\u7eed")},window.pausemusic=function(){cc.audioEngine.setMusicVolume(0),console.log("\u6e38\u620f\u97f3\u4e50\u6682\u505c")},window.resumemusic=function(){cc.audioEngine.setMusicVolume(1),console.log("\u6e38\u620f\u97f3\u4e50\u7ee7\u7eed")},cc._RF.pop()},{"../core/Signal":"Signal","../core/event":"event","../misc/SpriteFrameCache":"SpriteFrameCache","../ui/ToastManager":"ToastManager","./qq/qqsdk":"qqsdk","./ttsdk/ttsdk":"ttsdk","./wxsdk/GameConfigs":"GameConfigs","./wxsdk/sdk":"sdk"}],PlayController:[function(e,t,o){"use strict";cc._RF.push(t,"12cddjcqlBFPppBdtcH47dW","PlayController");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../core/Signal"),a=cc._decorator,s=a.ccclass,l=a.property,u=a.menu,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isTouching=!1,t.canHolding=!1,t.holdingSigal=new c.default,t.pressSignal=new c.default,t.releaseSignal=new c.default,t.pos=cc.Vec2.ZERO,t}return i(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onBegan,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onEnd,this)},t.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onBegan,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onEnd,this)},t.prototype.start=function(){},t.prototype.onBegan=function(e){this.isTouching=!0,this.pressSignal.fire();var t=e.touch.getLocation();t=this.node.convertToNodeSpaceAR(t),this.pos=t},t.prototype.onMove=function(e){var t=e.touch.getLocation();t=this.node.convertToNodeSpaceAR(t),this.pos=t},t.prototype.onEnd=function(){this.isTouching=!1,this.releaseSignal.fire()},t.prototype.update=function(){this.canHolding&&this.isTouching&&this.holdingSigal.fire(this.pos)},r([l],t.prototype,"canHolding",void 0),r([l(cc.Vec2)],t.prototype,"pos",void 0),r([s,u("\u5176\u5b83/PlayController")],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../core/Signal":"Signal"}],PlayerInfo:[function(e,t,o){"use strict";cc._RF.push(t,"52354lZ+KNEUIfTnhd3AFTV","PlayerInfo");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.PlayerInfo=void 0;var c=e("../../../../framework/core/DataCenter"),a=e("../../../../framework/utils/gameUtil"),s=e("../../../../framework/extension/Platform"),l=e("../../../../framework/extension/weak_net_game/UserInfo"),u=e("../../../../framework/extension/weak_net_game/WeakNetGame"),h=[1,2,3,4],f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.level=1,t.playinglevel=1,t.isPlayingDaily=!1,t.isPlayingSpecial=!1,t.dailylevel=1,t.playingDailyLevel=0,t.labour=10,t.buff_labour=0,t.lastExitTime=0,t.challenge_level_unlocked=!1,t.inviterId=0,t.openId="",t.version=3,t.inited=!1,t.is_guide_4=!1,t.challenge_gift=[],t.level_star={},t.collections={},t.is_guide_15=!1,t.isInGuide=!1,t.isguided_badman=!1,t.isUnlock_Prop=!1,t.guide=1,t.boxProgress=0,t.winStatus=0,t.newchapter={},t.skins={},t.isFavClaimed=!1,t.signCount=0,t.signTime=0,t.star=0,t.winLink=0,t.lld=new Date,t.nowTili=0,t.isUse=!1,t.maxDailyLv=0,t.playTime=0,t.isRandomLevel=!1,t}return i(t,e),t.prototype.claimFav=function(){this.isFavClaimed=!0,this.save("isFavClaimed")},t.prototype.initSkinData=function(){var e=this;csv.on("load",function(t){"Skin"==t&&csv.Skin.values.forEach(function(t){4==t.unlockType&&null==e.skins[t.id]&&(e.skins[t.id]=2)})})},t.prototype.isSkinUnlocked=function(e){return this.skins[e]>=1},t.prototype.isSkinUsing=function(e){return 2==this.skins[e]},t.prototype.isAllSkinUnlocked=function(){var e=this;return csv.Skin.values.filter(function(e){return h.indexOf(e.subType)>-1&&3===e.unlockType}).every(function(t){return e.isSkinUnlocked(t.id)})},t.prototype.unlockSkin=function(e){this.isSkinUnlocked(e)||(this.skins[e]=1,this.save("skins"))},t.prototype.randomVideoSkin=function(){var e=csv.Skin.values.filter(function(e){return h.indexOf(e.subType)>-1&&3===e.unlockType});g.shuffle(e);for(var t=0;t<e.length;t++)if(!this.skins[e[t].id])return e[t].id;return 0},t.prototype.useSkin=function(e){if(this.isSkinUnlocked(e)){var t=csv.Skin.get(e);csv.Skin.search(function(o){return o.type==t.type&&o.subType==t.subType&&o.id!=e}).forEach(function(e){2==o.PlayerInfo.skins[e.id]&&(o.PlayerInfo.skins[e.id]=1)}),this.skins[e]=2,this.save("skins")}},t.prototype.initDecoreateData=function(){var e=this;csv.on("load",function(t){"Collection"==t&&csv.Collection.values.forEach(function(t){1==t.unlockType&&null==e.collections[t.id]&&(e.collections[t.id]=2)})})},t.prototype.isDecorateUnlocked=function(e){return this.collections[e]>=1},t.prototype.isDecorateUsing=function(e){return 2===this.collections[e]},t.prototype.unlockDecorate=function(e){this.isDecorateUnlocked(e)||(this.collections[e]=1,this.save("collections"))},t.prototype.useDecorate=function(e){if(this.isDecorateUnlocked(e)){var t=csv.Collection.get(e);csv.Collection.search(function(o){return o.type==t.type&&o.id!=e}).forEach(function(e){1!==t.type&&2==o.PlayerInfo.collections[e.id]&&(o.PlayerInfo.collections[e.id]=1)}),this.collections[e]=2,this.save("collections")}},t.prototype.init=function(){l.UserInfo.isNew&&0==this.inited&&(this.inited=!0,this.labour=csv.Config.Init_Energy||5,this.guide=0,this.save())},t.prototype.onStartLevel=function(){this.playTime=0},t.prototype.onLoadAll=function(){this.initSkinData(),this.initDecoreateData()},t.prototype.saveExit=function(){this.lastExitTime=Date.now()/1e3,this.save("buff_labour"),console.log(this.buff_labour),this.save("lastExitTime")},t.prototype.updateBuffs=function(){if(this.buff_labour>0){var e=Date.now()/1e3-this.lastExitTime;console.log("\u79bb\u7ebf\u65f6\u4f53\u529b"+this.labour),console.log("\u79bb\u7ebf\u65f6\u957f:"+e),this.labour;var t=a.default.calcOfflineReward(this.labour,this.buff_labour,e,csv.Config.Max_Energy,300),n=t[0],i=t[1];n>=0&&(this.buff_labour=i,this.labour=n),(Date.now()-this.lld.getTime())/1e3>600*csv.Config.Max_Energy&&(this.labour=csv.Config.Max_Energy),console.log("\u73b0\u5728\u4f53\u529b"+this.labour),o.PlayerInfo.nowTili=this.labour}},t.prototype.upRank=function(){var e=[{key:"level",value:JSON.stringify({level:o.PlayerInfo.level,challengelevel:o.PlayerInfo.dailylevel})}];s.default.uploadScores(e)},t.prototype.addLabour=function(e){var t=o.PlayerInfo.labour+e;o.PlayerInfo.labour=t,o.PlayerInfo.save("labour")},t.prototype.isShowSDK=function(){return!window.qq&&!window.tt&&!!window.wx},t.prototype.isWechat=function(){return!window.qq&&!window.tt&&(!!window.wx||void 0)},t.prototype.save=function(t,o){if(void 0===o&&(o=!1),t)return e.prototype.save.call(this,t),this.save_timestamps=Date.now(),void e.prototype.save.call(this,"save_timestamps");e.prototype.save.call(this);var n=this.save_timestamps;if(!o&&Date.now()-n<1e3*csv.Config.Sync_User_Data_Time)console.log("\u4e0a\u62a5\u592a\u9891\u7e41\uff0c\u4e0b\u6b21\u540c\u6b65\u3002\u3002\u3002\u3002");else{var i=this.toString();null==t&&(console.warn("Start sync to server!",i),u.default.syncData(i).then(function(e){e&&console.log("\u4e0a\u62a5\u7528\u6237\u6570\u636e\u6210\u529f")}))}},t.prototype.claimInviteReward=function(){},t.prototype.getChapter=function(e){var t=e||this.level;return Math.floor((t-1)/10)+1},t.prototype.isChapterNew=function(e){return null==this.newchapter[e]},t.prototype.markChapterOld=function(e){this.newchapter[e]=1,o.PlayerInfo.save("newchapter")},t.prototype.getCurrentLevel=function(){return this.isPlayingDaily?o.PlayerInfo.dailylevel:o.PlayerInfo.level},t.prototype.getCurrentPlayingLevel=function(){return this.isPlayingDaily?o.PlayerInfo.playingDailyLevel:o.PlayerInfo.playinglevel},t.prototype.resetLevel=function(){this.winStatus=0},t.prototype.lose=function(){this.winStatus=-1},t.prototype.nextLevel=function(){var e=this;this.winStatus=1;var t=!1;if(this.isPlayingDaily)this.playingDailyLevel+=1,this.playingDailyLevel>this.dailylevel&&(this.dailylevel=this.playingDailyLevel,window.tt||(l.UserInfo.uploadUserInfo({level:this.level,challengelevel:this.dailylevel}),this.upRank()));else if(this.playinglevel+=1,this.playinglevel>this.level&&0==this.challenge_level_unlocked){this.level=this.playinglevel,this.level===(csv.Config.Chanllenge_Unlock_Level||25)&&(vm.show("Prefabs/UI/UIUnlockMode"),this.challenge_level_unlocked=!0,t=!0),csv.Skin.values.forEach(function(n){1!=n.unlockType||o.PlayerInfo.isSkinUnlocked(n.id)||e.level!=n.unlock1||(vm.show("Prefabs/UI/UIUnlockSkin",n.id),t=!0)});var n=o.PlayerInfo.getChapter(this.level);if(o.PlayerInfo.star>=csv.star.get(n).demand){var i=o.PlayerInfo.isChapterNew(n);n>1&&i&&(vm.show("Prefabs/story/help",n),t=!0,o.PlayerInfo.markChapterOld(n))}window.tt||(l.UserInfo.uploadUserInfo({level:this.level,challengelevel:this.dailylevel}),this.upRank())}return this.save(),t},t.prototype.isGreaterDate=function(e){var t=this.lld,o=new Date(e);return t.getTime()>=o.getTime()},t.prototype.isNewLevel=function(e){var t=this.lld,o=new Date(e);return t.toDateString()==o.toDateString()},r([c.field()],t.prototype,"level",void 0),r([c.field()],t.prototype,"playinglevel",void 0),r([c.field()],t.prototype,"isPlayingDaily",void 0),r([c.field()],t.prototype,"isPlayingSpecial",void 0),r([c.field()],t.prototype,"dailylevel",void 0),r([c.field()],t.prototype,"playingDailyLevel",void 0),r([c.field()],t.prototype,"labour",void 0),r([c.field()],t.prototype,"buff_labour",void 0),r([c.field()],t.prototype,"lastExitTime",void 0),r([c.field()],t.prototype,"challenge_level_unlocked",void 0),r([c.field()],t.prototype,"inviterId",void 0),r([c.field()],t.prototype,"openId",void 0),r([c.field()],t.prototype,"version",void 0),r([c.field()],t.prototype,"inited",void 0),r([c.field()],t.prototype,"is_guide_4",void 0),r([c.field()],t.prototype,"challenge_gift",void 0),r([c.field()],t.prototype,"level_star",void 0),r([c.field()],t.prototype,"collections",void 0),r([c.field()],t.prototype,"is_guide_15",void 0),r([c.field()],t.prototype,"isguided_badman",void 0),r([c.field()],t.prototype,"isUnlock_Prop",void 0),r([c.field()],t.prototype,"guide",void 0),r([c.field()],t.prototype,"boxProgress",void 0),r([c.field()],t.prototype,"newchapter",void 0),r([c.field()],t.prototype,"skins",void 0),r([c.field()],t.prototype,"isFavClaimed",void 0),r([c.field()],t.prototype,"signCount",void 0),r([c.field()],t.prototype,"signTime",void 0),r([c.field()],t.prototype,"star",void 0),r([c.field({persistent:!1,enumerable:!1,readonly:!0})],t.prototype,"lld",void 0),r([c.field()],t.prototype,"isUse",void 0),r([c.dc("PlayerInfo")],t)}(c.default);o.default=f,o.PlayerInfo=c.default.register(f),cc._RF.pop()},{"../../../../framework/core/DataCenter":"DataCenter","../../../../framework/extension/Platform":"Platform","../../../../framework/extension/weak_net_game/UserInfo":"UserInfo","../../../../framework/extension/weak_net_game/WeakNetGame":"WeakNetGame","../../../../framework/utils/gameUtil":"gameUtil"}],PoolManager:[function(e,t,o){"use strict";cc._RF.push(t,"556f8ibqJNPUI2mQ/u6qxBX","PoolManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Signal"),i=function(){function e(t,o,i){this.nodePool={},this.nodes={},this.managed=!1,this.aliveObjects=[],this.onRecycleSignal=new n.default,this._id="0",this._autoRecycle=!1,this.onCreateObject=o,this.target=i,this.root=t,this._id=e._idInc+++"",e._instances[this._id]=this}return Object.defineProperty(e.prototype,"autoRecycle",{set:function(e){e?this.root&&this.root.on(cc.Node.EventType.CHILD_REMOVED,this.onNodeRemove,this):this.root&&this.root.off(cc.Node.EventType.CHILD_REMOVED,this.onNodeRemove,this),this._autoRecycle=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{set:function(t){delete e._instances[this._id],this._id=t,e._instances[this._id]=this},enumerable:!1,configurable:!0}),e.get=function(t){return e._instances[t]},e.prototype.destroy=function(){this.clear(),delete e._instances[this._id]},e.prototype.onNodeRemove=function(e){this.put(e),this.onRecycleSignal.fire(e)},e.prototype.objects=function(){return this.aliveObjects},e.prototype.clearAlives=function(){for(;0<this.aliveObjects.length;){var e=this.aliveObjects[0];e.destroy(),e.destroyAllChildren(),delete this.aliveObjects[0]}},e.prototype.getPool=function(e){"object"==typeof e&&(e=e._uuid||e.name);var t=this.nodePool[e];return null==t&&(t=new cc.NodePool,this.nodePool[e]=t),t},e.prototype.getAsync=function(e,t){var o=this;return new Promise(function(n,i){var r=o.getPool(e).get();o.onCreateObject&&null==r&&cc.resources.load(t,cc.Prefab,function(t,c){if(t)return i(t);r=cc.instantiate(c),o.root&&r.setParent(o.root),o.managed&&o.aliveObjects.push(r),o.nodes[r.uuid]=e,n(r)}),o.root&&(r.active=!0,r.setParent(o.root)),o.managed&&o.aliveObjects.push(r),n(r)})},e.prototype.get=function(e){var t=this.getPool(e).get();return this.onCreateObject&&null==t?(t=this.onCreateObject.call(this.target,e),this.root&&(t.parent=this.root),t||console.warn(t,"onCreateObject must return an object"),this.managed&&this.aliveObjects.push(t),this.nodes[t.uuid]=e,t):(this.root&&(t.active=!0,t.parent=this.root),this.managed&&this.aliveObjects.push(t),t)},e.prototype.tag=function(e,t){this.nodes[e.uuid]=t},e.prototype.put=function(e,t){void 0===t&&(t=null),null==t&&(t=this.nodes[e.uuid]),this.getPool(t).put(e),this.managed&&this.aliveObjects.splice(this.aliveObjects.indexOf(e),1)},e.prototype.clear=function(e){if(this.managed&&this.clearAlives(),e)this.getPool(e).clear();else{for(var t in this.nodePool)this.nodePool[t].clear(),delete this.nodePool[t];for(var o in this.nodes)delete this.nodes[o]}},e.prototype.size=function(e){return this.getPool(e).size()},e._instances={},e._idInc=0,e}();o.default=i,window.PoolManager=i,cc._RF.pop()},{"./Signal":"Signal"}],PoolSpawner:[function(e,t,o){"use strict";cc._RF.push(t,"d13dd9reWlE1qv2Q1ip62WB","PoolSpawner");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.Spawner=void 0;var c=e("../core/PoolManager"),a=e("../utils/ccUtil"),s=cc._decorator,l=s.ccclass,u=s.property,h=s.menu,f=function(){function e(){this.spawnerName="",this.template=null,this.prefab=null,this.usePrefab=!0}return r([u()],e.prototype,"spawnerName",void 0),r([u({type:cc.Node,visible:function(){return!this.usePrefab}})],e.prototype,"template",void 0),r([u({type:cc.Prefab,visible:function(){return this.usePrefab}})],e.prototype,"prefab",void 0),r([u()],e.prototype,"usePrefab",void 0),r([l("Spawner")],e)}();o.Spawner=f;var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.poolManager=null,t.target=null,t.poolName="",t.spawners=[],t.dynamicPrefabs={},t.dynamicPrefabs_loaded={},t._spawners={},t}return i(t,e),t.prototype.addSpawner=function(e,t){var o=this._spawners[e];null==o&&((o=new f).usePrefab=!0,o.prefab=t,this._spawners[e]=o)},t.prototype.hasSpawner=function(e){return null!=this._spawners[e]},t.prototype.onLoad=function(){var e=this;this.poolManager=new c.default(this.target||this.node,this.onCreateObject,this),this.poolManager.name=this.poolName,this.spawners.forEach(function(t){e._spawners[t.spawnerName]=t})},t.prototype.preload=function(e,t){this.dynamicPrefabs[e]=t,this.dynamicPrefabs_loaded[e]=!1},t.prototype.preloadPrefabs=function(){var e=this,t=[],o=function(o){var i=n.dynamicPrefabs[o];if(!n.dynamicPrefabs_loaded[o]){var r=a.default.getRes(i,cc.Prefab).then(function(t){var n=new f;n.usePrefab=!0,n.prefab=t,e._spawners[o]=n,e.dynamicPrefabs_loaded[o]=!0});t.push(r)}},n=this;for(var i in this.dynamicPrefabs)o(i);return Promise.all(t)},t.prototype.onDestroy=function(){this.poolManager.destroy()},t.prototype.onCreateObject=function(e){var t=this._spawners[e];return null==t?console.error("Cannot get node from ["+this.poolName+"] pool by "+e):cc.instantiate(t.usePrefab&&t.prefab||t.template)},t.prototype.start=function(){this.preloadPrefabs()},t._instances={},r([u(cc.Node)],t.prototype,"target",void 0),r([u],t.prototype,"poolName",void 0),r([u([f])],t.prototype,"spawners",void 0),r([l,h("mimgame/PoolSpawner")],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../core/PoolManager":"PoolManager","../utils/ccUtil":"ccUtil"}],Portal:[function(e,t,o){"use strict";cc._RF.push(t,"fddcaRUintOTaigxk1Xrt0Q","Portal");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./RoleLoader"),a=cc._decorator,s=a.ccclass,l=a.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.anotherDoor=null,t.isTransfer=!1,t.targetDoorNode=null,t.targetPortal=null,t.targetPortalCollider=null,t.self_collider=null,t.isEndContact=!0,t.endContactNumber=0,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){},t.prototype.start=function(){this.targetDoorNode=this.anotherDoor.getComponent(c.default).self_door,this.fx=this.getComponentInChildren(cc.ParticleSystem),this.targetPortal=this.targetDoorNode.getComponent(o),this.targetPortalCollider=this.targetPortal.getComponent(cc.Collider),this.self_collider=this.getComponent(cc.Collider)},t.prototype.go=function(e){var t=this;this.scheduleOnce(function(){cc.tween(e).to(.5,{opacity:0}).call(function(){var o=t.targetDoorNode.getPosition();e.setPosition(o.x,o.y)}).to(.5,{opacity:255}).start()},0)},t.prototype.onBeginContact=function(e,t,o){var n=this;!this.isTransfer&&this.isEndContact&&(this.isTransfer=!0,this.go(o.node),this.fx.resetSystem(),this.targetPortal.isTransfer=!0,this.targetPortal.fx.resetSystem(),this.scheduleOnce(function(){n.isTransfer=!1,n.targetPortal.isTransfer=!1},2),this.isEndContact=!1)},t.prototype.onEndContact=function(){this.endContactNumber+=1,this.endContactNumber>=3&&(this.endContactNumber=0,this.isEndContact=!0)},r([l(cc.Node)],t.prototype,"anotherDoor",void 0),o=r([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./RoleLoader":"RoleLoader"}],PrefabLoader:[function(e,t,o){"use strict";cc._RF.push(t,"a89e7xVGZhIwaVYblCrxa5e","PrefabLoader");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../core/Signal"),a=e("../../utils/ccUtil"),s=cc._decorator,l=s.ccclass,u=s.property,h=(s.menu,s.executeInEditMode),f=cc.Enum({}),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefix="Lv",t._resIndex=1,t._delegate=null,t.onLevelLoaded=new c.default,t}var o;return i(t,e),o=t,Object.defineProperty(t.prototype,"level",{get:function(){return this._resIndex},set:function(e){this._resIndex=e,this._resIndex=this._resIndex<0?0:this._resIndex,this.reloadLevel()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"delegate",{set:function(e){this._delegate=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"assets",{get:function(){if(null!=o.path_assets){var e=this.__proto__.constructor;return o.path_assets[e.path]}},enumerable:!1,configurable:!0}),t.prototype.loadLevelInstance=function(e){var t=cc.instantiate(e);t.setParent(this.node);try{this.onLevelLoaded.fire(t,this._resIndex)}catch(o){console.error(o)}},t.prototype.loadPrefab=function(e){var t=this;this.node.destroyAllChildren(),cc.resources.release(e),a.default.getRes(e,cc.Prefab).then(function(e){t.loadLevelInstance(e)})},t.prototype.reloadLevel=function(){this.node.destroyAllChildren(),this.scheduleOnce(this.loadLevel)},t.prototype.loadLevel=function(){var e=this;if(this.assets){var t=this.assets[this._resIndex];this.loadLevelInstance(t)}else{var o=this.__proto__.constructor;if(this._delegate){var n=this._delegate.onLoadPrefab(this._resIndex,o.path);n instanceof Promise?n.then(function(t){e.loadLevelInstance(t)}):this.loadLevelInstance(n)}else cc.resources.loadDir(o.path+"/"+this.prefix+this._resIndex,cc.Prefab,function(t,o){t?console.error(t):(console.log(o),e.loadLevelInstance(o))})}},t.prototype.nextLevel=function(){this.level++},t.prototype.prevLevel=function(){this.level--},t.loadPrefabList=function(e){var t=this;cc.resources.loadDir(e,cc.Prefab,function(o,n){t.path_assets[e]=n;var i=n.map(function(e,t){return{name:e.name,value:t}});cc.Class.Attr.setClassAttr(t,"level","enumList",i)})},t.register=function(e,t){e.path=t,cc.game.on(cc.game.EVENT_ENGINE_INITED,function(){})},t.path_assets={},t.path="",r([u],t.prototype,"prefix",void 0),r([u],t.prototype,"_resIndex",void 0),r([u({type:f})],t.prototype,"level",null),o=r([l,h()],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../core/Signal":"Signal","../../utils/ccUtil":"ccUtil"}],ProgressBarAnim:[function(e,t,o){"use strict";cc._RF.push(t,"bf34fmd6qtFTqTAZraQS1HP","ProgressBarAnim");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./UIBaseAnim"),a=e("./Extension"),s=cc._decorator,l=s.ccclass,u=s.property,h=s.menu,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bar=null,t.from=0,t.to=1,t}return i(t,e),t.prototype.onLoad=function(){this.bar=this.getComponent(cc.ProgressBar)},t.prototype.start=function(){},t.prototype.onTick=function(e){this.bar&&(this.bar.progress=a.lerpf(this.from,this.to,e))},t.prototype.doPlay=function(t,o,n){return this.pasr.a=t,this.from=o,this.to=n,e.prototype.play.call(this)},r([u],t.prototype,"from",void 0),r([u],t.prototype,"to",void 0),r([l,h("\u57fa\u7840\u52a8\u753b/ProgressBarAnim")],t)}(c.default);o.default=f,cc._RF.pop()},{"./Extension":"Extension","./UIBaseAnim":"UIBaseAnim"}],PropInfo:[function(e,t,o){"use strict";cc._RF.push(t,"fc20a6uBPlL0Zp4JJDm+6o1","PropInfo");var n=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.PropInfo=void 0;var i=cc._decorator,r=i.ccclass,c=(i.property,function(){function e(e){this.id=0,this.icon="",this.desc="",this.name="";var t=csv.Prop.get(e);t&&(this.id=t.id,this.icon=t.icon,this.desc=t.desc,this.name=t.name)}return n([r],e)}());o.PropInfo=c,cc._RF.pop()},{}],PsFxPlayer:[function(e,t,o){"use strict";cc._RF.push(t,"3c0b8VvOVhJXKj7ZG3hrVct","PsFxPlayer");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c},c=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function c(e){try{s(n.next(e))}catch(t){r(t)}}function a(e){try{s(n.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,a)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return s([e,t])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./PsFx"),l=e("./Device"),u=cc._decorator,h=u.ccclass,f=u.property,p=u.menu,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefab=null,t.prefabPath="",t.defaultFx=null,t.spriteFrame=null,t.duration=-1,t.randomRotaion=!1,t.scale=1,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.loadPrefab=function(){var e=this;return null==this.prefabPath||isEmpty(this.prefabPath)?Promise.resolve():new Promise(function(t,o){cc.resources.load(e.prefabPath,function(n,i){n&&o(n),e.prefab=i,t(i)})})},t.prototype.clear=function(){this.defaultFx&&this.defaultFx.node.destroy(),this.defaultFx=null,this.prefab=null},Object.defineProperty(t.prototype,"fx",{get:function(){if(null==this.defaultFx&&this.prefab){var e=cc.instantiate(this.prefab);if(null==e)return null;var t=e.getComponent(s.default);null==t&&(t=e.addComponent(s.default)),e.setPosition(0,0),e.setParent(this.node),this.defaultFx=t}return this.defaultFx},enumerable:!1,configurable:!0}),t.prototype.preload=function(){var e=this;this.loadPrefab().then(function(){e.fx.node.active=!1}).catch(function(e){return console.error(e)})},Object.defineProperty(t.prototype,"isPlaying",{get:function(){return!!this.fx&&this.fx.isPlaying},enumerable:!1,configurable:!0}),t.prototype.onEnable=function(){},t.prototype.onDisable=function(){var e=this.defaultFx;e&&(e.node.active=!1)},t.prototype.sleep=function(e){return new Promise(function(t){setTimeout(function(){t()},e)})},t.prototype.hide=function(){this.fx&&this.fx.node&&(this.fx.node.active=!1)},t.prototype.setOptions=function(e,t){t&&(e.node.x=t.x||e.node.x,e.node.y=t.y||e.node.y,e.label&&(e.label.string=t.label||e.label.string))},t.prototype.play=function(e,t){return c(this,void 0,void 0,function(){var o;return a(this,function(n){switch(n.label){case 0:return l.default.playEffect(this.audioClip,!1),(o=this.fx)?[3,2]:null!=this.prefab||null==this.prefabPath?[3,2]:[4,this.loadPrefab()];case 1:n.sent(),n.label=2;case 2:return(o=this.fx)?(this.randomRotaion&&(o.node.rotation=g.randomInt(0,360)),o.reset(),this.setOptions(o,e),o.node.scale=this.scale,[2,o.play(t||this.audioClip,e&&e.spriteFrame||this.spriteFrame)]):[3,3];case 3:return this.duration>0?[4,this.sleep(1e3*this.duration)]:[3,5];case 4:n.sent(),n.label=5;case 5:this.hide(),n.label=6;case 6:return[2]}})})},r([f(cc.Prefab)],t.prototype,"prefab",void 0),r([f],t.prototype,"prefabPath",void 0),r([f(cc.SpriteFrame)],t.prototype,"spriteFrame",void 0),r([f(cc.AudioClip)],t.prototype,"audioClip",void 0),r([f],t.prototype,"duration",void 0),r([f],t.prototype,"randomRotaion",void 0),r([f],t.prototype,"scale",void 0),r([h,p("\u52a8\u753b\u7279\u6548/PsFxPlayer")],t)}(cc.Component);o.default=d,cc._RF.pop()},{"./Device":"Device","./PsFx":"PsFx"}],PsFx:[function(e,t,o){"use strict";cc._RF.push(t,"8f976MS9EZH87zQZWSJbWFP","PsFx");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./Device"),a=e("../utils/ccUtil"),s=cc._decorator,l=s.ccclass,u=s.property,h=s.menu,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.particles=[],t.animations=[],t.armature=null,t.defaultAnim="",t.isPlaying=!1,t.sfx=null,t.sprite=null,t.childAnimation=!0,t.duration=-1,t.fadeAfterFinish=-1,t.repeatTime=1,t.removeAfterFinish=!1,t.hideAfterFinish=!0,t._label=null,t.resetOrigin=!0,t}return i(t,e),Object.defineProperty(t.prototype,"label",{get:function(){return null==this._label&&(this._label=this.getComponentInChildren(cc.Label)),this._label},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){null==this.sprite&&(this.sprite=this.getComponent(cc.Sprite),this.sprite=this.sprite||this.node.getComponentInChildren(cc.Sprite));var e=this.getComponent(cc.Animation);e&&this.animations.push(e);var t=this.getComponent(cc.ParticleSystem);t&&this.particles.push(t);for(var o=0;o<this.node.childrenCount;o++){var n=this.node.children[o],i=n.getComponent(cc.ParticleSystem);if(i)this.particles.push(i);else if(this.childAnimation){var r=n.getComponent(cc.Animation);r&&this.animations.push(r)}}"undefined"!=typeof dragonBones&&(this.armature=this.getComponent(dragonBones.ArmatureDisplay),this.armature&&(this.defaultAnim=this.armature.animationName))},t.prototype.play=function(e,t){var o=this;void 0===e&&(e=null),void 0===t&&(t=null),this.isPlaying=!0;var n=0;e&&(this.sfx=e),t&&("string"==typeof t?a.default.setDisplay(this.sprite,t):this.sprite.spriteFrame=t),this.node.active=!0;for(var i=0;i<this.particles.length;i++)(r=this.particles[i]).resetSystem(),n<r.duration&&(n=r.duration+r.life+r.lifeVar);for(i=0;i<this.animations.length;i++){var r,s=(r=this.animations[i]).getClips();if(s&&s.length>0){var l=s[0],u=l.duration/l.speed;u>n&&(n=u),r.play(l.name)}}if(this.sfx&&c.default.playEffect(this.sfx,!1),this.armature){if(this.armature.playAnimation(this.defaultAnim,this.repeatTime),(n=this.duration)<=0)return new Promise(function(e){o.armature.addEventListener(dragonBones.EventObject.COMPLETE,function(){console.log("armature play complete"),o.removeAfterFinish?o.node.removeFromParent():o.fadeOnFinish(e)})})}else this.duration>0?n=this.duration:n+=.1;return new Promise(function(e){o.scheduleOnce(function(){if(!o.isValid)return e();o.removeAfterFinish?(o.node.removeFromParent(),e()):o.fadeOnFinish(e)},n)})},t.prototype.fadeOnFinish=function(e){this.isPlaying=!1;for(var t=0;t<this.particles.length;t++)this.particles[t].stopSystem();if(this.fadeAfterFinish>0){var o=cc.sequence(cc.fadeOut(this.fadeAfterFinish),cc.callFunc(e));this.node.runAction(o)}else this.hideAfterFinish&&(this.node.active=!1),e()},t.prototype.reset=function(){this.resetOrigin&&(this.node.position=cc.Vec2.ZERO),this.node.opacity=255,this.animations.forEach(function(e){return e.stepTo(0)})},t.prototype.start=function(){},r([u({type:cc.AudioClip})],t.prototype,"sfx",void 0),r([u(cc.Sprite)],t.prototype,"sprite",void 0),r([u],t.prototype,"childAnimation",void 0),r([u],t.prototype,"duration",void 0),r([u],t.prototype,"fadeAfterFinish",void 0),r([u],t.prototype,"repeatTime",void 0),r([u],t.prototype,"removeAfterFinish",void 0),r([u],t.prototype,"hideAfterFinish",void 0),r([u],t.prototype,"resetOrigin",void 0),r([l,h("\u52a8\u753b\u7279\u6548/PSFX")],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../utils/ccUtil":"ccUtil","./Device":"Device"}],PsSpawner:[function(e,t,o){"use strict";cc._RF.push(t,"6f3546H/GpLgpM4JFNb6hcn","PsSpawner");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c},c=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function c(e){try{s(n.next(e))}catch(t){r(t)}}function a(e){try{s(n.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,a)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return s([e,t])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./PsFx"),l=e("../core/PoolManager"),u=cc._decorator,h=u.ccclass,f=(u.property,u.menu),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){this.poolmgr=new l.default},t.prototype.start=function(){},t.prototype.clear=function(){this.poolmgr&&this.poolmgr.clear()},t.prototype.getFx=function(e){var t=this;return new Promise(function(o){var n=t.poolmgr.get(e);if(null==n){if(!(e instanceof cc.Prefab))return void cc.resources.load(e,cc.Prefab,function(i,r){(n=cc.instantiate(r)).setParent(t.node);var c=n.getOrAddComponent(s.default);c.name=e,o(c)});n=cc.instantiate(e),t.poolmgr.tag(n,e)}n.setParent(t.node),n.active=!1;var i=n.getOrAddComponent(s.default);i.reset(),o(i)})},t.prototype.preload=function(e,t){for(var o=this,n=0;n<t;n++)this.getFx(e).then(function(e){o.onFxFinshPlay(e)})},t.prototype.onFxFinshPlay=function(e){this.poolmgr.put(e.node)},t.prototype.finish=function(e){this.poolmgr.put(e.node)},t.prototype.play=function(e,t,o,n,i){return void 0===t&&(t=cc.Vec2.ZERO),void 0===o&&(o=0),c(this,void 0,void 0,function(){var r;return a(this,function(c){switch(c.label){case 0:return[4,this.getFx(e)];case 1:return(r=c.sent()).node.position=t,r.node.angle=o,[4,r.play(n,i)];case 2:return c.sent(),this.onFxFinshPlay(r),[2]}})})},t.prototype.playWithoutFinish=function(e,t,o,n,i){return void 0===t&&(t=cc.Vec2.ZERO),void 0===o&&(o=0),c(this,void 0,void 0,function(){var r;return a(this,function(c){switch(c.label){case 0:return[4,this.getFx(e)];case 1:return(r=c.sent()).node.position=t,r.node.angle=o,[4,r.play(n,i)];case 2:return c.sent(),[2]}})})},t.prototype.play2=function(e,t,o,n){return void 0===t&&(t=cc.Vec2.ZERO),void 0===o&&(o=0),void 0===n&&(n=0),c(this,void 0,void 0,function(){var i;return a(this,function(r){switch(r.label){case 0:return[4,this.getFx(e)];case 1:return(i=r.sent()).node.position=t,i.node.scale=n,i.node.angle=o,[4,i.play()];case 2:return r.sent(),this.onFxFinshPlay(i),[2]}})})},t.prototype.play3=function(e,t){return void 0===t&&(t=cc.Vec2.ZERO),c(this,void 0,void 0,function(){var o,n=this;return a(this,function(i){switch(i.label){case 0:return[4,this.getFx(e)];case 1:return(o=i.sent()).node.position=t,o.play().then(function(){return n.onFxFinshPlay(o)}),[2,o]}})})},r([h,f("\u52a8\u753b\u7279\u6548/PsSpawner")],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../core/PoolManager":"PoolManager","./PsFx":"PsFx"}],QQGameConfigs:[function(e,t,o){"use strict";cc._RF.push(t,"fad1eJW9M9LXpt0jl8beW3f","QQGameConfigs"),Object.defineProperty(o,"__esModule",{value:!0}),o.QQGameConfig=void 0,o.QQGameConfig={game_id:"brickbird",qq_appid:"1110302857",default_share_title:"brickbird",deafult_share_imgUrl:"resources/wechat_share.jpg",banner_ad_id:"cd93d036bce0712c57361baba09da9ab",video_ad_id:"0773b31f0c113dbafcaf1e32b9647c7a",interstitial_ad_id:"27ce4717f44766f13c192fc9bebe1e04",box_ad_id:"68f9580349b69d779d48a3320d09ae87",portal_id:""},cc._RF.pop()},{}],RemoveOutOfView:[function(e,t,o){"use strict";cc._RF.push(t,"a537fCNm/hKzLebsq+eZ3m/","RemoveOutOfView");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../framework/core/Signal"),a=e("../../framework/utils/ccUtil"),s=cc._decorator,l=s.ccclass,u=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lx=0,t.ly=0,t.rx=0,t.ry=0,t.usingWorldSpace=!1,t.onOffScreen=new c.default,t}return i(t,e),t.prototype.onLoad=function(){var e=cc.winSize.width,t=cc.winSize.height;this.lx=-e/2,this.rx=e/2,this.ly=-t/2,this.ry=t/2},t.prototype.start=function(){},t.prototype.update=function(){var e=this.node.getPosition();this.usingWorldSpace?((e=a.default.getWorldPosition(this.node)).x<0||e.x>cc.winSize.width||e.y<0||e.y>cc.winSize.height)&&(this.onOffScreen.fire(),this.node.destroy()):(e.x<this.lx||e.x>this.rx||e.y>this.ry||e.y<this.ly)&&(this.onOffScreen.fire(),this.node.destroy())},r([l],t)}(cc.Component));o.default=u,cc._RF.pop()},{"../../framework/core/Signal":"Signal","../../framework/utils/ccUtil":"ccUtil"}],RoleLoader:[function(e,t,o){"use strict";cc._RF.push(t,"8cd51PJOu5O/ZXeqsKp9ma+","RoleLoader");var n,i,r,c=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.RoleType=void 0;var s,l=e("./Bomb"),u=e("./Portal"),h=e("./Common/Base/PlayerInfo"),f=cc._decorator,p=f.ccclass,d=f.property,y=f.executeInEditMode;(function(e){e[e.Girl=0]="Girl",e[e.Older=1]="Older",e[e.Badman=2]="Badman",e[e.Dog=3]="Dog",e[e.Bat=4]="Bat",e[e.Balloon=5]="Balloon",e[e.Bomb=6]="Bomb",e[e.Door=7]="Door",e[e.Box=8]="Box",e[e.Box_jia=9]="Box_jia"})(s=o.RoleType||(o.RoleType={}));var v=((i={})[s.Girl]="Prefabs/roles/girl",i[s.Older]="Prefabs/roles/older",i[s.Badman]="Prefabs/roles/badman",i[s.Dog]="Prefabs/roles/dog",i[s.Bat]="Prefabs/roles/bat",i[s.Balloon]="Prefabs/roles/ballon",i[s.Bomb]="Prefabs/roles/bomb",i[s.Door]="Prefabs/roles/men",i[s.Box]="Prefabs/roles/box",i[s.Box_jia]="Prefabs/roles/box_jia",i),_=((r={})[s.Badman]=cc.Color.RED,r[s.Dog]=cc.Color.GRAY,r[s.Girl]=cc.Color.WHITE,r[s.Older]=cc.Color.GREEN,r[s.Bat]=cc.Color.BLACK,r[s.Balloon]=cc.Color.YELLOW,r[s.Bomb]=cc.Color.GRAY,r[s.Door]=cc.Color.CYAN,r[s.Box]=cc.Color.ORANGE,r[s.Box_jia]=cc.Color.BLUE,r),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._type=s.Girl,t.isClaim=!1,t.time=15,t}return c(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e,this.updateIndicator()},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.indicator=this.getComponent(cc.Sprite)},t.prototype.updateIndicator=function(){this.node.color=_[this.type],this.node.width=50,this.node.height=50},Object.defineProperty(t.prototype,"path",{get:function(){return this.isClaim?v[this.type]:(this.type==s.Dog||this.type==s.Badman?this.type=g.getRandomInArray([s.Dog,s.Badman]):this.type==s.Older&&(!h.PlayerInfo.isPlayingDaily&&csv.level.get(h.PlayerInfo.playinglevel).treasure||h.PlayerInfo.isPlayingDaily&&csv.daily_level.get(h.PlayerInfo.playingDailyLevel).treasure)&&(this.type=s.Box),v[this.type])},enumerable:!1,configurable:!0}),t.prototype.start=function(){var e=this;cc.resources.load(this.path,cc.Prefab,function(t,o){var n=cc.instantiate(o);n.parent=e.node.parent,n.position=e.node.position,n.scaleX=n.scaleX*e.node.scaleX,"bomb"==n.name?(console.log(n.name),n.getComponent(l.default)._timeLeft=e.time):"men"==n.name&&(e.self_door=n,n.getComponent(u.default).anotherDoor=e.another_door)}),this.indicator.enabled=!1},a([d({type:cc.Enum(s)})],t.prototype,"_type",void 0),a([d({type:cc.Enum(s)})],t.prototype,"type",null),a([d({displayName:"\u4e0d\u968f\u673a"})],t.prototype,"isClaim",void 0),a([d({displayName:"\u70b8\u5f39\u5269\u4f59\u65f6\u95f4"})],t.prototype,"time",void 0),a([d(cc.Node)],t.prototype,"another_door",void 0),a([p,y],t)}(cc.Component);o.default=m,cc._RF.pop()},{"./Bomb":"Bomb","./Common/Base/PlayerInfo":"PlayerInfo","./Portal":"Portal"}],Role:[function(e,t,o){"use strict";cc._RF.push(t,"e6410CDlzFNeqtE1V959ydK","Role");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c},c=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function c(e){try{s(n.next(e))}catch(t){r(t)}}function a(e){try{s(n.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,a)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return s([e,t])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s,l,u=e("./AIEnemy"),h=e("../../framework/core/FSM"),f=e("../../framework/core/event"),p=e("./ItemBall"),d=e("./ItemKey"),y=e("../../framework/utils/ccUtil"),v=e("./SkeletonBase"),_=e("./KeyToggle"),m=e("../../framework/misc/Device"),w=e("./RemoveOutOfView"),b=e("./Levels/Thunder"),k=e("../../framework/extension/weak_net_game/UserInfo"),S=e("./Ballon"),C=e("./Bomb"),I=e("../../framework/ui/ToastManager"),P=e("./Common/Unity"),O=e("./Levels/Effect"),x=cc._decorator,R=x.ccclass,T=x.property;(function(e){e[e.Breath=0]="Breath",e[e.Idle=1]="Idle",e[e.Move=2]="Move",e[e.Shocked=3]="Shocked",e[e.Cliff=4]="Cliff",e[e.Flee=5]="Flee",e[e.Lose=6]="Lose",e[e.Win=7]="Win",e[e.Dead=8]="Dead",e[e.PrepareGun=9]="PrepareGun",e[e.Fly=10]="Fly",e[e.Trigger=11]="Trigger",e[e.Kick=12]="Kick"})(s||(s={})),function(e){e[e.Normal=0]="Normal",e[e.Happy=1]="Happy",e[e.Frightened=2]="Frightened"}(l||(l={}));var D=["enheng","laugh"],j=["dead","dead2"],L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._dir=1,t.speed=1,t.baseScale=0,t.isLose=!1,t.audio_cry=null,t.audio_laugh=null,t.hasGun=!1,t.inHandObject=null,t.ballon=null,t._thunderPrefab=null,t._dectedDir=0,t._dectedEnemy=null,t._thunder=null,t.playEmmmCD=0,t.tmp_enemies=[],t}var o;return i(t,e),o=t,Object.defineProperty(t.prototype,"dir",{get:function(){return this._dir},set:function(e){this._dir=e,this.node.scaleX=this.baseScale*e},enumerable:!1,configurable:!0}),t.prototype.start=function(){o.self=this,f.evt.on("Game.keyMoved",this.checkMove,this),f.evt.on("Game.hello",this.sayHelloBack,this),f.evt.on("Game.loseTarget",this.onLoseTarget,this),f.evt.on("Game.catch",this.beCatched,this),f.evt.on("Game.bomb",this.goDead,this),f.evt.on("Game.changeRoleDir",this.changeDirManually,this),f.evt.on("Game.enemyDead",this.onEnemyDead,this),this.colliders=this.getComponents(cc.PhysicsCollider),this.baseScale=this.node.scale,this.fsm=this.addComponent(h.default),this.fsm.init(this,s),this.fsm.enterState(s.Idle),this.emotionState=this.addComponent(h.default),this.emotionState.init(this,l),this.emotionState.enterState(l.Normal),this.addComponent(w.default).onOffScreen.on(this.onOutOfScreen,this),this.equipGun(),P.default.loadSkins(this.skeleton,1)},t.prototype.onOutOfScreen=function(){f.evt.emit("Game.lose")},t.prototype.changeDirManually=function(){this.fsm.isInState(s.Idle)?this.checkMove():this.fsm.isInState(s.Move)&&(this.dir*=-1)},t.prototype.onLoseTarget=function(){this.armature.animation.timeScale=1},t.prototype.onDestroy=function(){f.evt.off(this),o.self=null},t.prototype.equipGun=function(){var e=this;this.hasGun=!0,y.default.getRes("Prefabs/effect/thunder",cc.Prefab).then(function(t){e._thunderPrefab=t})},t.prototype.onBeginContact=function(e,t,o){var n=o.node.group;if("enemy"==n)o.getComponent(u.default)&&(e.disabled=!0);else if("target"==n)e.disabled=!0,this.fsm.changeState(s.Win);else if("pin"==n){this.fsm.isInState(s.Fly)&&(e.disabled=!0);var i=o.getComponent(_.default);i&&(i.curDir.y<0?y.default.getWorldPosition(o.node).y>=this.worldCenter().y&&(e.disabled=!0):i.curDir.y>0&&this.fsm.changeState(s.Idle))}else if("item"==n){var r=o.node.name;"ball"==r?(o.node.getOrAddComponent(p.default).go(),m.default.playSfx("pickup")):"key"==r?o.node.getOrAddComponent(d.default).go():"xuehua"==r?(O.default.throw_snowballs(),o.node.destroy()):"gun"==r?(k.UserInfo.gun_num+=1,this.fsm.changeState(s.Idle),this.fastFadeIn("gun_out",1),this.scheduleOnce(this.open_fire,.5),o.node.destroy()):"magnet"==r&&(O.default.do_magnet(),o.node.destroy())}else if("wall"==n)this.fsm.isInState(s.Fly)&&(e.disabled=!0),m.default.playSfx("fall");else if("stop"==n)this.fsm.changeState(s.Idle,.5);else if("ballon"==n){var c=o.getComponent(S.default);if(cc.isValid(c)){if(c.isDead())return;var a=this.handSlot;if(null==this.inHandObject){var l=dragonBones.CCFactory.getInstance();a.childArmature=l.buildArmature("Armature",c.skeleton.getArmatureKey()),a.childArmature.animation.play("up",0),this.inHandObject=a.childArmature}else a.childArmature=this.inHandObject;if(cc.isValid(this.ballon))try{var h=cc.v2(this.node.x+25*this.dir,this.node.y+100);this.ballon.flyAway(h)}catch(v){console.error(v)}this.ballon=c,this.fsm.changeState(s.Fly),this.fsm.getState(s.Fly).fly_startY=this.ballon.node.y,c.node.active=!1,m.default.playSfx("pickup")}}else if("spike"==n)m.default.playSfx("arrow_hit_body"),this.goDead();else if("bomb"==n){var f=o.getComponent(C.default);if(f.isHiding)return;this.fsm.changeState(s.Kick,f)}},t.prototype.onEnter_Kick=function(e,t){this.playAnim("kick",1),this.body.linearVelocity=cc.v2(0,0),this.skeleton.addEventListener(dragonBones.EventObject.COMPLETE,function(){}),e.bomb=t},t.prototype.onUpdate_Kick=function(){this.fsm.timeElapsed>.5&&this.fsm.changeState(s.Idle)},t.prototype.onExit_Kick=function(e){m.default.playSfx("kick_bomb"),e.bomb.goAway(this.dir)},t.prototype.beCatched=function(){console.log("lose game!!!!"),m.default.playSfx("ough"),this.fsm.changeState(s.Lose)},t.prototype.beDetected=function(e){console.log("be detected "),f.evt.emit("Game.beDected"),this._dectedDir=this.node.x>e.node.x?1:-1,this._dectedEnemy=e,this.dir=-this._dectedDir,this.fsm.changeState(s.Shocked)},t.prototype.onEnter_Shocked=function(){this.hasGun||cc.audioEngine.playEffect(this.audio_cry,!1),this.playAnim("shocked",1)},t.prototype.open_fire=function(){this.playAnim("idle"),this.fsm.changeState(s.Trigger)},t.prototype.onEnter_Trigger=function(){var e=this.checkEnemy();0==e.length&&(e=this.checkEnemy(null,-this.dir)).length>0&&(this.dir=-this.dir),0!=e.length?(this.stopAnim(),this.playAnim("gun",1),this.lightEnemies(e),f.evt.emit("Game.UseGun"),k.UserInfo.gun_num-=1):I.Toast.make("\u524d\u65b9\u6ca1\u6709\u654c\u4eba\uff0c\u65e0\u6cd5\u4f7f\u7528\uff01")},t.prototype.lightEnemies=function(e){return c(this,void 0,void 0,function(){var t,o,n;return a(this,function(i){switch(i.label){case 0:t=this.node,o=0,i.label=1;case 1:return o<e.length?((n=e[o]).goDead("dead_smoke"),[4,this.getThunder().play(t,n.node,cc.v3(0,60,0))]):[3,4];case 2:i.sent(),t=n.node,i.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},t.prototype.onUpdate_Trigger=function(){this.fsm.timeElapsed>1.5&&this.fsm.changeState(s.Idle)},t.prototype.getThunder=function(){if(null==this._thunder){var e=cc.instantiate(this._thunderPrefab);e.parent=this.node.parent,this._thunder=e.getComponent(b.default)}return this._thunder},t.prototype.onUpdate_Shocked=function(){this.fsm.timeElapsed>.5&&(this.isLose||this.fsm.changeState(s.Flee))},t.prototype.onEnter_Flee=function(){this.dir=this._dectedDir,this.playAnim("walk"),this.armature.animation.timeScale=2,this.changeEmotionState(l.Frightened)},t.prototype.onUpdate_Flee=function(){this.checkIsCliff(0)&&this.fsm.changeState(s.Cliff),this.fsm.timeElapsed>2.5&&this.fsm.changeState(s.Breath),this.move()},t.prototype.onExit_Flee=function(){this.armature.animation.timeScale=1},t.prototype.onEnter_Move=function(){this.playAnim("walk"),this.fadeIn("normal",1)},t.prototype.onUpdate_Move=function(){this.move(),this.checkIsCliff(0)?this.fsm.changeState(s.Idle):this.checkIsWall()&&(this.fsm.changeState(s.Idle),this.dir*=-1)},t.prototype.onExit_Move=function(){this.stopAnim()},t.prototype.onEnter_Breath=function(e){var t=this;this.playAnim("breath"),m.default.playSfx("breath"),e.setTimeout(1,function(){return t.fsm.changeState(s.Idle)})},t.prototype.onEnter_Cliff=function(){},t.prototype.onUpdate_Cliff=function(){this.fsm.timeElapsed>1&&this.fsm.changeState(s.Idle)},t.prototype.onEnter_Idle=function(e,t){this.playAnim("idle"),e.timeout=t,e.setInterval(.75,this.checkTarget,this)},t.prototype.onExit_Idle=function(){this.stopAnim()},t.prototype.onUpdate_Idle=function(e){e.timeout&&this.fsm.timeElapsed>e.timeout&&this.fsm.revertState()},t.prototype.onEnter_Fly=function(e){this.fsm.getPreviousState().id!=s.Fly&&(this.playAnim("fly_idle"),this.fastFadeIn("fly_enter",1)),e.gravityScale=this.body.gravityScale,this.body.gravityScale=0,e.fly_startY=this.ballon.node.y},t.prototype.onUpdate_Fly=function(e){this.fsm.timeElapsed<.5?this.body.linearVelocity=cc.v2(75*this.dir,100):this.body.linearVelocity=cc.v2(0,100),this.node.y-e.fly_startY>222&&this.fsm.changeState(s.Idle)},t.prototype.onExit_Fly=function(e){this.body.gravityScale=e.gravityScale,this.handSlot.childArmature=null;var t=cc.v2(this.node.x+25*this.dir,this.node.y+100);this.ballon.flyAway(t)},t.prototype.checkTarget=function(){this.raycast()},t.prototype.raycast=function(){if(this.checkIsCliff(0))return!1;var e=this.worldCenter(),t=cc.v2(e.x+800*this.dir,e.y),o=this._world.rayCast(e,t,cc.RayCastType.Closest)[0];return!(!o||"target"!=o.collider.node.group)&&(this.fsm.changeState(s.Move),f.evt.emit("Game.seeTarget",this),!0)},t.prototype.onEnter_Lose=function(){this.isLose=!0,this.changeEmotionState(l.Frightened)},t.prototype.onEnter_Win=function(){this.playAnim2("idle","happy"),f.evt.emit("Game.win")},t.prototype.move=function(){var e=this.body.linearVelocity;this.body.linearVelocity=cc.v2(this.dir*this.speed*180,e.y)},t.prototype.playEmmm=function(){this.playEmmmCD<=0&&(m.default.playSfx("eh"),this.playEmmmCD=5)},t.prototype.checkMove=function(){this.fsm.isInState(s.Shocked)||this.fsm.isInState(s.PrepareGun)||this.fsm.isInState(s.Flee)||this.fsm.isInState(s.Trigger)||this.fsm.isInState(s.Fly)||this.fsm.isInState(s.Dead)||this.isLose||(this.checkIsWall(60,this.dir)?this.checkIsWall(60,-this.dir)?this.playEmmm():(this.dir*=-1,this.changeToMove()):this.checkIsCliff(0)?this.checkIsCliff(0,-this.dir)||(this.dir*=-1,this.changeToMove()):this.changeToMove(),this.playEmmmCD-=1)},t.prototype.changeToMove=function(){this.isLose||(Math.random()<.5&&m.default.playSfx(g.getRandomInArray(D)),this.fsm.changeState(s.Move))},t.prototype.checkIsWall=function(e,t){void 0===e&&(e=60),void 0===t&&(t=this.dir);var o=this.worldCenter(),n=cc.v2(o.x+t*e,o.y),i=this._world.rayCast(o,n,cc.RayCastType.Closest)[0];if(i){var r=i.collider.node.group;if("wall"==r||"pin"==r||"obstacle"==r||"weapon"==r)return!0}return!1},t.prototype.checkIsCliff=function(e,t){void 0===t&&(t=this.dir);var o=(e=e||100)/Math.sin(cc.misc.degreesToRadians(45)),n=this.node.getBoundingBoxToWorld(),i=cc.v2(n.center.x,n.origin.y+e),r=cc.v2(i.x+t*o,i.y-o);return null==this._world.rayCast(i,r,cc.RayCastType.Closest)[0]},t.prototype.checkEnemy=function(e,t){void 0===e&&(e=null),void 0===t&&(t=this.dir),e=e||90;var o=this.node.getBoundingBoxToWorld(),n=cc.v2(o.center.x,o.origin.y+e),i=cc.v2(n.x+800*t,n.y),r=this._world.rayCast(n,i,cc.RayCastType.All);this.tmp_enemies.splice(0);for(var c=0;c<r.length;c++){var a=r[c];if(a&&a.collider){var s=a.collider.getComponent(u.default);s&&this.tmp_enemies.push(s)}}return this.tmp_enemies},t.prototype.onEnemyDead=function(){var e=this;this.scheduleOnce(function(){e.changeEmotionState(l.Happy)},1),m.default.playEffect(this.audio_laugh)},t.prototype.onEnter_Happy=function(e,t){this.isDead()||(t?this.fadeIn(t,1):this.fadeIn("happy",1))},t.prototype.onEnter_Normal=function(){this.isDead()||this.fadeIn("normal",1)},t.prototype.onEnter_Frightened=function(){this.isDead()||this.fadeIn("frightened",1)},t.prototype.onUpdate_Frightened=function(){this.emotionState.timeElapsed>3&&this.changeEmotionState(l.Normal)},t.prototype.onUpdate_Happy=function(){this.emotionState.timeElapsed>3&&this.changeEmotionState(l.Normal)},t.prototype.changeEmotionState=function(e,t){this.isDead()||this.emotionState.changeState(e,t)},t.prototype.sayHelloBack=function(e){if(this.fsm.isInState(s.Idle)){var t=e.dir;this.dir=-t,this.changeEmotionState(l.Happy,"hello"),m.default.playSfx("hi")}else this.changeEmotionState(l.Happy)},t.prototype.goDead=function(){this.fsm.changeState(s.Dead)},t.prototype.onUpdate_Dead=function(){},t.prototype.onEnter_Dead=function(e){var t=this;m.default.playSfx(g.getRandomInArray(j)),this.playAnim("dead",1),e.setTimeout(.5,function(){f.evt.emit("Game.lose"),t.fadeIn("eye_close",1)})},t.prototype.isDead=function(){return this.fsm.isInState(s.Dead)},t.self=null,r([T(cc.AudioClip)],t.prototype,"audio_cry",void 0),r([T(cc.AudioClip)],t.prototype,"audio_laugh",void 0),o=r([R],t)}(v.default);o.default=L,cc._RF.pop()},{"../../framework/core/FSM":"FSM","../../framework/core/event":"event","../../framework/extension/weak_net_game/UserInfo":"UserInfo","../../framework/misc/Device":"Device","../../framework/ui/ToastManager":"ToastManager","../../framework/utils/ccUtil":"ccUtil","./AIEnemy":"AIEnemy","./Ballon":"Ballon","./Bomb":"Bomb","./Common/Unity":"Unity","./ItemBall":"ItemBall","./ItemKey":"ItemKey","./KeyToggle":"KeyToggle","./Levels/Effect":"Effect","./Levels/Thunder":"Thunder","./RemoveOutOfView":"RemoveOutOfView","./SkeletonBase":"SkeletonBase"}],SAutoRotate:[function(e,t,o){"use strict";cc._RF.push(t,"4f0f8BSL8VHbKF2xS0xZF6k","SAutoRotate");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c,a=e("./SGameEntity"),s=e("../../utils/ccUtil"),l=cc._decorator,u=l.ccclass,h=l.property,f=l.menu;(function(e){e[e.Idle=0]="Idle",e[e.Rotate=1]="Rotate"})(c||(c={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.target=null,t.maxTurnRate=.02,t.heading=cc.v2(1,0),t.isRotating=!1,t.canRotateBack=!1,t}return i(t,e),t.prototype.onLoad=function(){this.node.scaleX<0&&(this.heading=cc.v2(-1,0))},t.prototype.isBackRotate=function(e){if(!this.canRotateBack)if(this.node.scaleX<0){if(e.x>0)return!0}else if(e.x<0)return!0;return!1},t.prototype.rotate=function(){if(!cc.isValid(this.target))return this.rotateToVec(),0;if(this.target&&this.target.isDead())return this.rotateToVec(),0;var e=s.default.getWorldBoundingBox(this.node),t=s.default.getWorldPosition(this.target.node).sub(e.center);if(!this.isBackRotate(t))return t.normalizeSelf(),this.rotateToVec(t);this.rotateToVec()},t.prototype.signVec2=function(e,t){return e.y*t.x>e.x*t.y?-1:1},t.prototype.rotateToVec=function(e){void 0===e&&(e=null),null==e&&(e=this.node.scaleX<0?cc.v2(-1,0):cc.Vec2.RIGHT);var t=this.signVec2(this.heading,e),o=Math.acos(this.heading.dot(e));if(o<1e-4)return 0;isNaN(o)&&(o=0),o>this.maxTurnRate&&(o=this.maxTurnRate),this.heading.rotateSelf(t*o);var n=this.heading.signAngle(cc.Vec2.RIGHT);return this.node.angle=cc.macro.DEG*n,this.node.scaleX<0&&(this.node.angle+=180),1},t.prototype.update=function(){this.isRotating=!!this.rotate()},t.inaccuracyScalar=3,r([h(a.default)],t.prototype,"target",void 0),r([h],t.prototype,"maxTurnRate",void 0),r([u,f("shooter/AutoRotate")],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../utils/ccUtil":"ccUtil","./SGameEntity":"SGameEntity"}],SBullet2:[function(e,t,o){"use strict";cc._RF.push(t,"b7dd8ihOSxNFqJGAlsmqCjA","SBullet2");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./SGameEntity"),a=cc._decorator,s=a.ccclass,l=a.property,u=a.menu,h=a.requireComponent,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.speed=5,t.tails=[],t.def_opacity=155,t.entity=null,t}return i(t,e),Object.defineProperty(t.prototype,"damage",{set:function(e){this.entity.damage=e},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){var e=this;this.entity=this.getComponent(c.default),this.entity.on(c.default.Event.Dead,this.onDead,this),0==this.tails.length&&(this.tails=this.getComponentsInChildren(cc.Sprite),this.tails=this.tails.filter(function(t){return t.node!=e.node}))},t.prototype.onDestroy=function(){this.entity.off(c.default.Event.Dead,this.onDead,this)},t.prototype.onEnable=function(){var e=this;this.tails.forEach(function(t){t.node.width=0,t.node.opacity=e.def_opacity})},t.prototype.onDead=function(){this.tails.forEach(function(e){e.node.runAction(cc.fadeOut(.2))})},t.prototype.onCollisionEnter=function(e){var t=e.getComponent(c.default);null==t&&(t=e.getComponentInParent(c.default)),t.isActive&&this.entity.isActive&&(t.decreaseHp(this.entity.damage),this.entity.decreaseHp(t.damage),this.onHitEntity(t,e))},t.prototype.onHitEntity=function(){},t.prototype.fire=function(e){this.entity.moveEngine&&(this.entity.moveEngine.velocity=e),this.entity.run()},t.prototype.update=function(){var e=this;this.tails.forEach(function(t){t.node.width+=e.speed})},r([l],t.prototype,"speed",void 0),r([l([cc.Sprite])],t.prototype,"tails",void 0),r([l],t.prototype,"def_opacity",void 0),r([s,u("shooter/BulletWithEntity"),h(c.default)],t)}(cc.Component);o.default=f,cc._RF.pop()},{"./SGameEntity":"SGameEntity"}],SBullet:[function(e,t,o){"use strict";cc._RF.push(t,"9c351+bI0tPqbc0vLxFTH7n","SBullet");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./SGameEntity"),a=cc._decorator,s=a.ccclass,l=a.property,u=a.menu,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.speed=5,t.tails=[],t.def_opacity=155,t}return i(t,e),t.prototype.onDead=function(){this.tails.forEach(function(e){e.node.runAction(cc.fadeOut(.2))})},t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),0==this.tails.length&&(this.tails=this.getComponentsInChildren(cc.Sprite),this.tails=this.tails.filter(function(e){return e.node!=t.node}))},t.prototype.onEnable=function(){var t=this;e.prototype.onEnable.call(this),this.tails.forEach(function(e){e.node.width=0,e.node.opacity=t.def_opacity})},t.prototype.onCollisionEnter=function(e){var t=e.getComponent(c.default);null==t&&(t=e.getComponentInParent(c.default)),t.isActive&&this.isActive&&(t.decreaseHp(this.damage),this.decreaseHp(t.damage),this.onHitEntity(t,e))},t.prototype.onHitEntity=function(){},t.prototype.fire=function(e){this.moveEngine.velocity=e,this.run()},t.prototype.update=function(){var e=this;this.tails.forEach(function(t){t.node.width+=e.speed})},r([l],t.prototype,"speed",void 0),r([l([cc.Sprite])],t.prototype,"tails",void 0),r([l],t.prototype,"def_opacity",void 0),r([s,u("shooter/Bullet")],t)}(c.default);o.default=h,cc._RF.pop()},{"./SGameEntity":"SGameEntity"}],SDKInterafce:[function(e,t,o){"use strict";cc._RF.push(t,"0712eFvzaNE1JyVQ55Hw/6B","SDKInterafce"),Object.defineProperty(o,"__esModule",{value:!0}),o.SDKBase=void 0;var n=function(){function e(){e.instance=this}return e.initConfig=function(e){this._gameConf=e},Object.defineProperty(e,"gameConfig",{get:function(){return e._gameConf},enumerable:!1,configurable:!0}),e._gameConf=null,e.instance=null,e}();o.SDKBase=n,cc._RF.pop()},{}],SElegantFollow:[function(e,t,o){"use strict";cc._RF.push(t,"2439fBM+7VCRYPbogT9Q/b7","SElegantFollow");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./SMoveBase"),a=cc._decorator,s=a.ccclass,l=a.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.maxSpeed=10,t.dir=cc.Vec2.UP,t.enableTarget=!0,t.targetAngle=0,t.rotateSpeed=10,t.intervalCheckTarget=1,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.reset=function(){this.dir=cc.Vec2.UP,this.node.rotation=0,this.targetAngle=0,this.tar=null},t.prototype.onTargetChanged=function(){if(this.target){var e=this.node.getBoundingBoxToWorld(),t=this.target.getBoundingBoxToWorld().center.sub(e.center);this.targetAngle=t.signAngle(cc.Vec2.RIGHT)*cc.macro.DEG}},t.prototype._step=function(){var e=this.dir.signAngle(cc.Vec2.RIGHT)*cc.macro.DEG;this.enableTarget&&(Math.abs(e%360-this.targetAngle)>30?this.dir=this.dir.rotateSelf(-cc.macro.RAD*this.rotateSpeed):this.onTargetChanged()),this.velocity=this.dir.mul(this.maxSpeed),this.node.setPosition(this.node.position.add(this.velocity)),this.rotateByVelocity&&(this.node.rotation=this.rotationOffset+e)},t.prototype.onEnable=function(){},t.prototype.onDisable=function(){},r([l({tooltip:"0-1 is appropriate value range"})],t.prototype,"intervalCheckTarget",void 0),r([s],t)}(c.default);o.default=u,cc._RF.pop()},{"./SMoveBase":"SMoveBase"}],SEquipSystem:[function(e,t,o){"use strict";cc._RF.push(t,"aa221tK42VAnbWR7mYHwCkT","SEquipSystem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./SWeapon"),a=cc._decorator,s=a.ccclass,l=a.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.weaponPrefab=null,t.weapon=null,t.weapons={},t}return i(t,e),t.prototype.start=function(){this.switchWeapon(this.weaponPrefab)},t.prototype.onDisable=function(){this.removeMainWeapon()},t.prototype.createWeapon=function(e){var t=cc.instantiate(e);t.setParent(this.node),t.setPosition(0,0);var o=t.getComponent(c.default);return o||(console.log("[SEquipSystem] target node is not a SWeapon"),o=t.addComponent(c.default)),o},t.prototype.addWeapon=function(e,t){this.removeWeapon(e);var o=this.createWeapon(t);this.weapons[e]=o},t.prototype.removeMainWeapon=function(){this.weapon&&this.weapon.node.destroy()},t.prototype.removeWeapon=function(e){var t=this.weapons[e];t&&t.node.destroy(),this.weapons[e]=null},t.prototype.switchWeapon=function(e){null!=e&&(this.weapon&&this.weapon.node.destroy(),this.weapon=this.createWeapon(e))},r([l(cc.Prefab)],t.prototype,"weaponPrefab",void 0),r([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./SWeapon":"SWeapon"}],SExplode:[function(e,t,o){"use strict";cc._RF.push(t,"f8697pU05hC1rwIAF4ytfNT","SExplode");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./SGameEntity"),a=cc._decorator,s=a.ccclass,l=a.property,u=a.menu,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.speed=5,t.damage=200,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.onDead=function(){},t.prototype.onCollisionEnter=function(e){var t=e.getComponent(c.default);null==t&&(t=e.getComponentInParent(c.default)),t.isActive&&this.isActive&&(t.decreaseHp(this.damage),this.onHitEntity(t,e))},t.prototype.onHitEntity=function(){},r([l],t.prototype,"speed",void 0),r([l],t.prototype,"damage",void 0),r([s,u("shooter/Explode")],t)}(c.default);o.default=h,cc._RF.pop()},{"./SGameEntity":"SGameEntity"}],SFireAgent:[function(e,t,o){"use strict";cc._RF.push(t,"6fc8eboP6dCloNCWK5kdA/5","SFireAgent");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c,a=e("./ShootManager"),s=e("./SGameEntity"),l=e("../../misc/PsFxPlayer"),u=e("../../core/Signal"),h=cc._decorator,f=h.ccclass,p=h.property,d=h.menu;(function(e){e[e.FixDir=0]="FixDir",e[e.SelfRotation=1]="SelfRotation",e[e.ParentRotation=2]="ParentRotation",e[e.Target=3]="Target"})(c||(c={}));var y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dirType=c.SelfRotation,t.aimTarget=null,t.rotation=-90,t.auto_fire=!0,t.paused=!1,t.fireInterval=.1,t.fireFx=null,t.initSpeed=5,t.host=null,t.fireTimestamp=0,t.bulletDamage=10,t.numOfFire=1,t.anglePadding=4,t.reloadTimestamp=0,t.bullet_capcity=-1,t.bullets_left=1,t.auto_reload=!0,t.dur_reload=0,t.ran=1,t.fireSignal=new u.default,t.reloadStartSignal=new u.default,t.reloadEndSignal=new u.default,t.bulletCompTypeName=null,t}return i(t,e),t.prototype.onLoad=function(){this.fireFx||(this.fireFx=this.getComponent(l.default),this.fireFx&&this.fireFx.preload()),null==this.host&&(this.host=this.getComponentInParent(s.default)),this.ran=Math.ceil(4*Math.random())},t.prototype.setMuzzleFlash=function(e,t){void 0===t&&(t=1),this.fireFx.clear(),"string"==typeof e?this.fireFx.prefabPath=e:this.fireFx.prefab=e,this.fireFx.scale=t},t.prototype.createBullet=function(){if(null==this.bulletPrefab)return null;var e=this.node.getParent().convertToWorldSpaceAR(this.node.getPosition()),t=a.default.instance.createBullet(this.bulletPrefab,e);if(null==this.bulletCompTypeName){var o=t.getComponents(cc.Component).find(function(e){return null!=e.fire});o&&(this.bulletCompTypeName=o.__proto__.__classname__)}return t},t.prototype.onDoFire=function(){var e=0;this.numOfFire>1&&(e=Math.floor(this.numOfFire/2));for(var t=[],o=0;o<this.numOfFire;o++){var n=this.createBullet();if(n){var i=n.getComponent(this.bulletCompTypeName);if(i){i.damage=this.bulletDamage;var r=this.rotation+this.anglePadding*(o-e),c=cc.Vec2.RIGHT;c.rotateSelf(cc.macro.RAD*r),c.mulSelf(this.initSpeed),i.fire(c),n.angle=r,t.push(i),this.bullet_capcity>0&&this.bullets_left--}}else console.warn("[SFireAgent ] create bullet failed, check prefab nil and prefab if has[SBullet] !")}return this.fireSignal.fire(t),t},t.prototype.fire=function(e){if(this.paused)return[];if(this.bullets_left<=0)return[];if(this.host&&!this.host.isActive)return[];if(null!=e)this.rotation=e;else if(this.dirType==c.SelfRotation)this.rotation=this.node.rotation;else if(this.dirType==c.Target){var t=ccUtil.getWorldPosition(this.aimTarget).sub(ccUtil.getWorldPosition(this.node));this.rotation=Math.atan2(-t.y,t.x)*cc.macro.DEG,this.node.rotation=this.rotation}else this.dirType==c.ParentRotation&&(this.rotation=this.node.parent.rotation-this.node.rotation,this.node.parent.scaleX<0&&(this.rotation+=180));return this.fireFx&&this.fireFx.play(),this.onDoFire()},t.prototype.start=function(){},t.prototype.fillBullets=function(){this.bullets_left=this.bullet_capcity},Object.defineProperty(t.prototype,"autoFire",{set:function(e){this.auto_fire=e},enumerable:!1,configurable:!0}),t.prototype.reload_succ=function(){this.bullet_capcity<=0||(this.reloadTimestamp=0,this.bullets_left=this.bullet_capcity,this.reloadEndSignal.fire(this))},t.prototype.isReloading=function(){return this.reloadTimestamp>0},t.prototype.reloadManually=function(){this.bullet_capcity<=0||(this.onReloadStart(),this.reloadTimestamp=1,this.scheduleOnce(this.reload_succ,this.dur_reload))},t.prototype.onReloadStart=function(){this.reloadStartSignal.fire(this)},t.prototype.update=function(e){this.paused||(this.auto_fire&&(this.fireTimestamp+=e,this.fireTimestamp>this.fireInterval&&(this.fireTimestamp=0,this.fire())),this.bullets_left<=0&&this.auto_reload&&(0==this.reloadTimestamp&&this.onReloadStart(),this.reloadTimestamp+=e,this.reloadTimestamp>this.dur_reload&&(this.reloadTimestamp=0,this.reload_succ())))},t.prototype.onDisable=function(){},r([p(cc.Prefab)],t.prototype,"bulletPrefab",void 0),r([p({type:cc.Enum(c)})],t.prototype,"dirType",void 0),r([p({type:cc.Node,visible:function(){return this.dirType==c.Target}})],t.prototype,"aimTarget",void 0),r([p({visible:function(){return this.dirType==c.FixDir}})],t.prototype,"rotation",void 0),r([p],t.prototype,"auto_fire",void 0),r([p({visible:function(){return this.auto_fire}})],t.prototype,"fireInterval",void 0),r([p(l.default)],t.prototype,"fireFx",void 0),r([p],t.prototype,"initSpeed",void 0),r([p],t.prototype,"bulletDamage",void 0),r([p],t.prototype,"anglePadding",void 0),r([f,d("shooter/FireAgent")],t)}(cc.Component);o.default=y,cc._RF.pop()},{"../../core/Signal":"Signal","../../misc/PsFxPlayer":"PsFxPlayer","./SGameEntity":"SGameEntity","./ShootManager":"ShootManager"}],SFollowCamera:[function(e,t,o){"use strict";cc._RF.push(t,"ab1bdx+TzJO9rfqJ75XWBg+","SFollowCamera");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../misc/BoostsAction"),a=cc._decorator,s=a.ccclass,l=a.property,u=a.requireComponent,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.target=null,t.offset=cc.Vec2.ZERO,t.velocity=cc.Vec2.ZERO,t}return i(t,e),t.prototype.onLoad=function(){this.camera=this.getComponent(cc.Camera)},t.prototype.start=function(){},t.prototype.reset=function(){this.node.y=0,this.offset=cc.Vec2.ZERO},t.prototype.startFollow=function(e){this.target=e},t.prototype.animOffset=function(e,t){var o=this;void 0===t&&(t=1);var n=c.ValueChangeAction.create(t,this.offset.y,e,function(e){o.offset.y=e}).easing(cc.easeSineInOut());this.node.runAction(n)},t.prototype.canSee=function(e){var t=e.position.add(cc.v3(0,e.height/2));return this.camera.getWorldToCameraPoint(t,cc.Vec2.ZERO).y>-cc.visibleRect.height/2},t.prototype.update=function(){this.target&&(this.camera.node.x=this.target.x+this.offset.x)},r([l(cc.Node)],t.prototype,"target",void 0),r([s,u(cc.Camera)],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../misc/BoostsAction":"BoostsAction"}],SGameEntity:[function(e,t,o){"use strict";cc._RF.push(t,"dec38NrArVCjZbUKAJHeA/m","SGameEntity");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.EntityState=void 0;var c,a,s,l,u,h=e("./ShootManager"),f=e("../movement/MoveEngine"),p=e("../../core/FSM"),d=e("../../core/Signal"),y=e("../../misc/PsFxPlayer"),v=cc._decorator,_=v.ccclass,m=v.property,g=(v.requireComponent,v.menu);(function(e){e[e.Default=0]="Default",e[e.Run=1]="Run",e[e.Dead=2]="Dead",e[e.Disapear=3]="Disapear",e[e.Remove=4]="Remove"})(c=o.EntityState||(o.EntityState={})),function(e){e[e.Invalid=0]="Invalid",e[e.Check=1]="Check",e[e.Visible=2]="Visible",e[e.Invisible=3]="Invisible"}(a||(a={})),function(e){e[e.Dead=0]="Dead",e[e.Remove=1]="Remove",e[e.Appear=2]="Appear",e[e.Active=3]="Active",e[e.Disapear=4]="Disapear",e[e.Hurt=5]="Hurt",e[e.HpChanged=6]="HpChanged"}(s||(s={})),function(e){e[e.RemoveNode=0]="RemoveNode",e[e.Destroy=1]="Destroy"}(l||(l={})),function(e){e[e.DontDelete=0]="DontDelete",e[e.Delete=1]="Delete",e[e.DelayDelete=2]="DelayDelete"}(u||(u={}));var w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.uid=0,t.mHp=10,t.damage=10,t.invisibleDelete=!1,t.invisibleDeleteDelay=0,t.deletePolicy=l.RemoveNode,t.deadDeletePolicy=u.Delete,t.deadDeleteDelay=0,t.has_shown=!1,t.ps=[],t._hp=0,t.signals=[],t.sm=null,t.suicide=!1,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){this.deadFx=this.getComponent(y.default),this.moveEngine=this.getComponent(f.default),this.ps=this.getComponentsInChildren(cc.ParticleSystem),this.onInitFSM(),this.fsm_visible=this.addComponent(p.default),this.fsm_visible.init(this),this.fsm_visible.addStates(a),this.fsm_visible.enterState(a.Check)},t.prototype.start=function(){this.sm=h.default.instance},t.prototype.onInitFSM=function(){var e=this.addComponent(p.default);e.init(this),e.addStates(c),e.enterState(c.Default),this.__fsm=e},Object.defineProperty(t.prototype,"isActive",{get:function(){return null==this.__fsm?console.warn("Have you foggot to call super.start or super.onLoad in inherit class which derived from GameEntity!"):this.__fsm.isInState(c.Run)},set:function(e){e?this.run():this.stopRun()},enumerable:!1,configurable:!0}),t.prototype.onEnable=function(){this._hp=this.mHp,this.suicide=!1,this.node.angle=0,this.run()},t.prototype.onDisable=function(){this.clear()},Object.defineProperty(t.prototype,"hp",{get:function(){return this._hp},set:function(e){var t=this._hp;e>this.maxHp||t!=e&&(this._hp=e,this.emitEvents(s.HpChanged,e,t),this.onHpChanged(this._hp,t))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxHp",{get:function(){return this.mHp},set:function(e){this.mHp=e},enumerable:!1,configurable:!0}),t.prototype.respawn=function(e){e?this.hp=this.maxHp:this._hp=this.maxHp,this.isActive=!0},t.prototype.isDead=function(){return this._hp<=0},t.prototype.onHpChanged=function(){},t.prototype.onDead=function(){},t.prototype.onDelete=function(){},t.prototype.onActive=function(){},t.prototype.canHurt=function(){return!0},t.prototype.decreaseHp=function(e,t){if(0!=this.hp&&this.canHurt(t)&&(this.hp-=e,this.emitEvents(s.Hurt,this.hp,e),this.hp<=0)){if(this.hp=0,this.__fsm.isInState(c.Dead))return;this.__fsm.changeState(c.Dead)}},t.prototype.run=function(){this.__fsm.changeState(c.Run)},t.prototype.stopRun=function(){this.__fsm.changeState(c.Default)},t.prototype.onEnter_CheckState=function(){},t.prototype.onExit_CheckState=function(){},t.prototype.onUpdate_CheckState=function(){this.sm.canSee(this.node)?this.fsm_visible.changeState(a.Visible):this.fsm_visible.changeState(a.Invisible)},t.prototype.onEnter_VisibleState=function(){0==this.has_shown&&this.emitEvents(s.Appear,this),this.has_shown=!0},t.prototype.onUpdate_VisibleState=function(){this.sm.canSee(this.node)||this.fsm_visible.changeState(a.Invisible)},t.prototype.onUpdate_InvisibleState=function(){this.has_shown&&this.invisibleDelete&&this.fsm_visible.timeElapsed>this.invisibleDeleteDelay?this.__fsm.changeState(c.Disapear):this.sm.canSee(this.node)&&this.fsm_visible.changeState(a.Visible)},t.prototype.checkVisible=function(){this.fsm_visible.isInState(a.Visible)&&this.run()},t.prototype.onEnter_DefaultState=function(){},t.prototype.onUpdate_DefaultState=function(){},t.prototype.onEnter_RunState=function(e){this.onActive(e),this.emitEvents(s.Active,this),this.ps.forEach(function(e){return e.resetSystem()})},t.prototype.onUpdate_RunState=function(e,t){this.moveEngine&&this.moveEngine.step(t)},t.prototype.onEnter_DeadState=function(e,t){var o=this;this.ps.forEach(function(e){return e.stopSystem()}),t?t.play().then(function(){o.deadDeletePolicy!=u.DontDelete&&o.__fsm.changeState(c.Default)}):this.deadFx&&this.deadFx.play().then(function(){o.deadDeletePolicy!=u.DontDelete&&o.__fsm.changeState(c.Default)}),this.clear(),this.emitDeadEvents()},t.prototype.onUpdate_DeadState=function(){this.deadDeletePolicy==u.DelayDelete?this.__fsm.timeElapsed>this.deadDeleteDelay&&this.__fsm.changeState(c.Default):this.deadDeletePolicy==u.Delete&&this.__fsm.changeState(c.Default)},t.prototype.onExit_DeadState=function(){this.doDelete()},t.prototype.clear=function(){this.has_shown=!1,this.fsm_visible&&this.fsm_visible.changeState(a.Check),this.moveEngine&&this.moveEngine.reset()},t.prototype.doDelete=function(){this.deadDeletePolicy==u.DontDelete?this.onDelete():(this.deletePolicy==l.RemoveNode?this.node.removeFromParent():this.node.destroy(),this.onDelete())},t.prototype.onDestroy=function(){this.signals.forEach(function(e){return e.clear()})},t.prototype.onEnter_DisapearState=function(){this.clear(),this.doDelete()},t.prototype.onExit_DisapearState=function(){},t.prototype.onUpdate_DisapearState=function(){},t.prototype.emitDeadEvents=function(){this.onDead(),this.emitEvents(s.Dead,this)},t.prototype.on=function(e,t,o){this.getEventSignal(e).add(t,o)},t.prototype.off=function(e,t,o){this.getEventSignal(e).remove(t,o)},t.prototype.getEventSignal=function(e){var t=this.signals[e];return null==t&&(t=new d.default,this.signals[e]=t),t},t.prototype.emitEvents=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var n=this.getEventSignal(e);n.fire.apply(n,t)},t.prototype.kill=function(e){void 0===e&&(e=null),this._hp=0,this.suicide=!0,this.__fsm.changeState(c.Dead,e)},t.prototype.remove=function(){this.doDelete()},t.prototype.onCollisionEnter=function(e){if(this.isActive){var t=e.getComponent(o);null==t&&(t=e.getComponentInParent(o)),t&&t.isActive&&(t.decreaseHp(this.damage,this),this.decreaseHp(t.damage,t))}},t.Event=s,t.States=c,r([m({displayName:"\u6700\u5927\u751f\u547d\u503c"})],t.prototype,"mHp",void 0),r([m({displayName:"\u4f24\u5bb3\u503c"})],t.prototype,"damage",void 0),r([m({displayName:"\u770b\u4e0d\u89c1\u540e\u5220\u9664"})],t.prototype,"invisibleDelete",void 0),r([m({displayName:"delay",tooltip:"\u770b\u4e0d\u89c1\u5ef6\u8fdf\u5220\u9664\u65f6\u95f4",visible:function(){return this.invisibleDelete}})],t.prototype,"invisibleDeleteDelay",void 0),r([m({type:cc.Enum(l),displayName:"\u5220\u9664\u65b9\u5f0f"})],t.prototype,"deletePolicy",void 0),r([m({displayName:"\u6b7b\u4ea1\u540e\u5220\u9664\u7b56\u7565",type:cc.Enum(u)})],t.prototype,"deadDeletePolicy",void 0),r([m({displayName:"delay",visible:function(){return this.deadDeletePolicy==u.DelayDelete}})],t.prototype,"deadDeleteDelay",void 0),o=r([_,g("shooter/GameEntity")],t)}(cc.Component);o.default=w,cc._RF.pop()},{"../../core/FSM":"FSM","../../core/Signal":"Signal","../../misc/PsFxPlayer":"PsFxPlayer","../movement/MoveEngine":"MoveEngine","./ShootManager":"ShootManager"}],SItem:[function(e,t,o){"use strict";cc._RF.push(t,"93f07uu37RHT4vqNhQtuSLc","SItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./SGameEntity"),a=e("./ShootManager"),s=cc._decorator,l=s.ccclass,u=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onCollisionEnter=function(){console.log("eat item 11111111111"),this.fsm.changeState(c.EntityState.Dead)},t.prototype.onActive=function(){a.default.instance.addItem(this.node)},t.prototype.onDelete=function(){e.prototype.onDelete.call(this),a.default.instance.removeItem(this.node)},r([l],t)}(c.default));o.default=u,cc._RF.pop()},{"./SGameEntity":"SGameEntity","./ShootManager":"ShootManager"}],SMoveBase:[function(e,t,o){"use strict";cc._RF.push(t,"51afcUiRwROj7mCYywhsGlR","SMoveBase");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.moveOnLoad=!0,t.velocity=cc.Vec2.RIGHT,t.tar=null,t.rotateByVelocity=!1,t.rotationOffset=0,t._paused=!1,t.tarPos=cc.Vec2.ZERO,t}return i(t,e),t.prototype.onTargetChanged=function(){},Object.defineProperty(t.prototype,"target",{get:function(){return this.tar},set:function(e){e instanceof cc.Vec3||e instanceof cc.Vec2?this.tarPos=e:this.tar=e,this.onTargetChanged(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"targetPosition",{get:function(){return this.tarPos},enumerable:!1,configurable:!0}),t.prototype.reset=function(){},t.prototype._step=function(){},t.prototype.onBeforeUpdate=function(e,t,o){void 0===o&&(o=-1)},t.prototype.onDisable=function(){},t.prototype.update=function(){},t.prototype.isInDistance=function(e,t){var o=ccUtil.getWorldPosition(this.node);return e.sub(o).magSqr()<t},t.prototype.isStatic=function(e){return void 0===e&&(e=1),this.velocity.fuzzyEquals(cc.Vec2.ZERO,e)},t.prototype.step=function(e){this.moveOnLoad||this._paused||this._step(e)},t.prototype.pause=function(){this._paused=!0},t.prototype.resume=function(){this._paused=!1},t.prototype.lateUpdate=function(){this.moveOnLoad&&!this._paused&&this._step()},r([s],t.prototype,"moveOnLoad",void 0),r([s],t.prototype,"velocity",void 0),r([s({type:cc.Node,displayName:"target"})],t.prototype,"tar",void 0),r([s],t.prototype,"rotateByVelocity",void 0),r([s],t.prototype,"rotationOffset",void 0),r([a],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],STargetEnemies:[function(e,t,o){"use strict";cc._RF.push(t,"605ae73CBxEz4HS7tGfUegA","STargetEnemies");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../movement/SMoveBase"),a=e("./ShootManager"),s=cc._decorator,l=s.ccclass,u=s.property,h=(s.requireComponent,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.targetInterval=.2,t}return i(t,e),t.prototype.onLoad=function(){this.moveEntity=this.getComponent(c.default)},Object.defineProperty(t.prototype,"interval",{set:function(e){this.targetInterval=e,this.onDisable(),this.onEnable()},enumerable:!1,configurable:!0}),t.prototype.random=function(e){return Math.floor(Math.random()*e)},t.prototype.seekTarget=function(){if(!this.moveEntity.target||!this.moveEntity.target.activeInHierarchy){var e=a.default.instance.allEnemies,t=this.random(e.length);this.moveEntity.target=e[t]}},t.prototype.onEnable=function(){this.schedule(this.seekTarget,this.targetInterval)},t.prototype.onDisable=function(){this.unschedule(this.seekTarget)},r([u],t.prototype,"targetInterval",void 0),r([l],t)}(cc.Component));o.default=h,cc._RF.pop()},{"../movement/SMoveBase":"SMoveBase","./ShootManager":"ShootManager"}],STargetPlayer:[function(e,t,o){"use strict";cc._RF.push(t,"cc787x1xu1OCamO8vAZfoDH","STargetPlayer");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../movement/MoveEngine"),a=e("./ShootManager"),s=cc._decorator,l=s.ccclass,u=s.property,h=s.requireComponent,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.alwaysPointTarget=!1,t.rotationOffset=0,t.duration=4,t.lastVel=cc.Vec2.ZERO,t}return i(t,e),t.prototype.start=function(){},t.prototype.onLoad=function(){this.moveEntity=this.getComponent(c.default)},t.prototype.onEnable=function(){this.lastVel=cc.Vec2.ZERO,this.target=a.default.instance.player,this.moveEntity.target=this.target,this.scheduleOnce(this.disableTarget,this.duration)},t.prototype.onDisable=function(){this.unschedule(this.disableTarget)},t.prototype.disableTarget=function(){this.moveEntity.target=null;var e=cc.misc.degreesToRadians(this.rotationOffset-this.node.rotation);this.lastVel=cc.v2(Math.cos(e),Math.sin(e))},t.prototype.update=function(){var e=this.target.position.sub(this.node.position);null!=this.moveEntity.target?this.alwaysPointTarget&&(this.node.rotation=this.rotationOffset+e.signAngle(cc.Vec2.RIGHT)*cc.macro.DEG):this.moveEntity.applyForce(this.lastVel)},r([u],t.prototype,"alwaysPointTarget",void 0),r([u],t.prototype,"rotationOffset",void 0),r([u],t.prototype,"duration",void 0),r([l,h(c.default)],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../movement/MoveEngine":"MoveEngine","./ShootManager":"ShootManager"}],SWeapon:[function(e,t,o){"use strict";cc._RF.push(t,"977e10uu7ZMsqqaBe5sSFqA","SWeapon");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./SFireAgent"),a=cc._decorator,s=a.ccclass,l=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fireAgents=[],t}return i(t,e),t.prototype.onLoad=function(){this.fireAgents=this.getComponentsInChildren(c.default)},t.prototype.fire=function(e){for(var t in this.fireAgents)this.fireAgents[t].fire(e)},t.prototype.pause=function(){this.fireAgents.forEach(function(e){return e.paused=!0})},t.prototype.resume=function(){this.fireAgents.forEach(function(e){return e.paused=!1})},r([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"./SFireAgent":"SFireAgent"}],ScaleAnim:[function(e,t,o){"use strict";cc._RF.push(t,"09546do5HREQ6WDm6UpmZHA","ScaleAnim");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./UIBaseAnim"),a=e("./Extension"),s=cc._decorator,l=s.ccclass,u=s.property,h=s.menu,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.from=cc.v3(),t.to=cc.v3(),t.tmp_scale=cc.v3(),t}return i(t,e),t.prototype.onTick=function(e){this.node.scale=a.lerpVec3(this.tmp_scale,this.from,this.to,e)},t.prototype.start=function(){this.pasr.reset()},t.prototype.play=function(){return e.prototype.play.call(this)},t.prototype.onEnable=function(){this.pasr&&this.pasr.reset()},t.prototype.onDisable=function(){},r([u(cc.Vec3)],t.prototype,"from",void 0),r([u(cc.Vec3)],t.prototype,"to",void 0),r([l("ScaleAnim"),h("\u57fa\u7840\u52a8\u753b/ScaleAnim")],t)}(c.default);o.default=f,cc._RF.pop()},{"./Extension":"Extension","./UIBaseAnim":"UIBaseAnim"}],ServerConfig:[function(e,t,o){"use strict";cc._RF.push(t,"105e1Oqtb1OtbPhRmZfoTX8","ServerConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.Api=o.ServerConfig=void 0;var n=e("../../UI/UIRank");function i(e){return o.ServerConfig.root_url+"/"+e}o.ServerConfig={version:"apk2.0.0",root_url:"",force_url:"",cdn_url:"",ip_api:"https://pv.sohu.com/cityjson?ie=utf-8",ip_query:"",config_url:"config.json",is_local_game:!0,openId:"111",is_normal_login:!1},cc.sys.isNative?o.ServerConfig.is_normal_login=!1:window.tt?(o.ServerConfig.root_url="",o.ServerConfig.is_normal_login=!1):window.qq?(o.ServerConfig.root_url="",o.ServerConfig.is_normal_login=!1):(o.ServerConfig.root_url="",o.ServerConfig.is_normal_login=!0),o.ServerConfig.cdn_url=o.ServerConfig.cdn_url+"/"+o.ServerConfig.version+"/",o.ServerConfig.config_url=o.ServerConfig.cdn_url+o.ServerConfig.config_url,n.default.rankUrl=o.ServerConfig.root_url+"/game/rank",o.Api=i,i.invite_get=i("invite/get"),i.invite_claim_day=i("invite/claim_day"),i.invite_claim_new=i("invite/claim_new"),i.subscribe=i("subscribe"),i.claimReward=i("free_energy/claim"),i.subscribeState=i("subscribe/status"),cc._RF.pop()},{"../../UI/UIRank":"UIRank"}],SettingInfo:[function(e,t,o){"use strict";cc._RF.push(t,"dd0afi5IoZLuLT9UMhemhBT","SettingInfo");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.SettingInfo=void 0;var c=e("../../core/DataCenter"),a=e("../../misc/Device"),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.music=!0,t.effect=!0,t.vibrate=!0,t.shake=!0,t.isfirst=!1,t}return i(t,e),t.prototype.onLoadAll=function(){a.default.setBGMEnable(this.music),a.default.setSFXEnable(this.effect),a.default.isVibrateEnabled=this.vibrate,console.log("load settings:---------------"),console.log("music:",this.music),console.log("effect:",this.effect),console.log("vibrate:",this.vibrate)},t.prototype.saveSettings=function(){this.music=a.default.isBgmEnabled,this.effect=a.default.isSfxEnabled,this.vibrate=a.default.isVibrateEnabled,this.save()},r([c.field()],t.prototype,"music",void 0),r([c.field()],t.prototype,"effect",void 0),r([c.field()],t.prototype,"vibrate",void 0),r([c.field()],t.prototype,"shake",void 0),r([c.dc("SettingInfo")],t)}(c.default);o.default=s,o.SettingInfo=c.default.register(s),cc._RF.pop()},{"../../core/DataCenter":"DataCenter","../../misc/Device":"Device"}],ShootManager:[function(e,t,o){"use strict";cc._RF.push(t,"162c1rUSW1Pzogn/l0WTpO6","ShootManager");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c,a=e("../../core/PoolManager"),s=cc._decorator,l=s.ccclass,u=s.property,h=s.menu;(function(e){e[e.SelfBounding=0]="SelfBounding",e[e.Camera=1]="Camera"})(c||(c={}));var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.camera=null,t.player=null,t.halfSize=cc.size(0,0),t.prefabs={},t.canseeType=c.SelfBounding,t.allEnemies=[],t.allItems=[],t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){this.camera||(this.camera=cc.Camera.main),o.instance=this,this.bulletPool=new a.default(this.node,this.onCreateObject,this),this.bulletPool.name="ShootManager",g.setGlobalInstance(this),this.halfSize.width=cc.visibleRect.width/2,this.halfSize.height=cc.visibleRect.height/2},t.prototype.onDestroy=function(){this.bulletPool.destroy()},Object.defineProperty(t.prototype,"bullets",{get:function(){return this.node.children},enumerable:!1,configurable:!0}),t.prototype.removeEnemy=function(e){this.allEnemies.splice(this.allEnemies.indexOf(e),1)},t.prototype.addEnemy=function(e){this.allEnemies.push(e)},t.prototype.addItem=function(e){this.allItems.push(e)},t.prototype.removeItem=function(e){this.allItems.splice(this.allItems.indexOf(e),1)},t.prototype.onCreateObject=function(e){var t=this.prefabs[e];return cc.instantiate(t)},t.prototype.createBullet=function(e,t){var o=this.get(e);return t=this.node.convertToNodeSpaceAR(t),o.setPosition(t),o},t.prototype.get=function(e){return this.prefabs[e._uuid]=e,this.bulletPool.get(e._uuid)},t.prototype.start=function(){},t.prototype.canSee=function(e){if(this.canseeType==c.SelfBounding){var t=e.getBoundingBox(),o=this.node.width/2,n=this.node.height/2;return!(t.xMax<-o||t.xMin>o||t.yMax<-n||t.yMin>n)}if(this.canseeType==c.Camera)return this.camera.canSee(e)},r([u(cc.Camera)],t.prototype,"camera",void 0),r([u(cc.Node)],t.prototype,"player",void 0),r([u({type:cc.Enum(c)})],t.prototype,"canseeType",void 0),o=r([l,h("shooter/ShootManager")],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../core/PoolManager":"PoolManager"}],Signal:[function(e,t,o){"use strict";cc._RF.push(t,"50577U0PIBPf7an/3VlOADJ","Signal");var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<o;t++)for(var r=arguments[t],c=0,a=r.length;c<a;c++,i++)n[i]=r[c];return n};Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function e(){this.allReceivers=[],this.rejectCallback=null}return e.prototype.add=function(e,t){this.allReceivers.find(function(o){return o.c==e&&o.t==t})||this.allReceivers.push({c:e,t:t})},e.prototype.remove=function(e,t){this.allReceivers=this.allReceivers.filter(function(o){return o.c!=e&&o.t!=t})},e.prototype.fire=function(){for(var e,t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];for(var i=0;i<this.allReceivers.length;i++){var r=this.allReceivers[i];r.c?(e=r.c).call.apply(e,n([r.t],t)):console.warn("not found callback ",r.c,r.t)}},e.prototype.on=function(e,t){this.remove(e,t),this.add(e,t)},e.prototype.off=function(e,t){this.remove(e,t)},e.prototype.clear=function(){this.allReceivers.splice(0),this.rejectCallback=null},e.prototype.once=function(e,t){var o=this,n=function(){o.remove(n),e&&e()};this.rejectCallback=t,this.add(n)},e.prototype.cancel=function(){this.rejectCallback&&(this.rejectCallback("canceled"),this.rejectCallback=null)},e.prototype.wait=function(){var e=this;return new Promise(function(t,o){e.once(t,o)})},e}();o.default=i,cc._RF.pop()},{}],SkeletonBase:[function(e,t,o){"use strict";cc._RF.push(t,"136d2Hvn6BNOL0h0MuQISH6","SkeletonBase");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../framework/utils/ccUtil"),a=cc._decorator,s=a.ccclass,l=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skeleton=null,t}return i(t,e),t.prototype.onLoad=function(){this._world=cc.director.getPhysicsManager(),this.skeleton=this.getComponent(dragonBones.ArmatureDisplay),this.skeleton&&(this.armature=this.skeleton.armature()),this.body=this.getComponent(cc.RigidBody)},t.prototype.start=function(){},t.prototype.playAnim=function(e,t){return void 0===t&&(t=0),this.animState=this.armature.animation.fadeIn(e,.1,t,0,"1",dragonBones.AnimationFadeOutMode.SameLayerAndGroup),this.animState},t.prototype.playAnim2=function(e,t,o){void 0===o&&(o=0),this.animState=this.skeleton.playAnimation(e,o),this.animState2=this.armature.animation.fadeIn(t,.2,o,0,"2",dragonBones.AnimationFadeOutMode.SameLayerAndGroup)},t.prototype.fadeIn=function(e,t){return void 0===t&&(t=0),this.animState2=this.armature.animation.fadeIn(e,.2,t,0,"2",dragonBones.AnimationFadeOutMode.SameLayerAndGroup),this.animState2},t.prototype.fastFadeIn=function(e,t){return void 0===t&&(t=0),this.animState2=this.armature.animation.fadeIn(e,0,t,0,"2",dragonBones.AnimationFadeOutMode.SameLayerAndGroup),this.animState2},t.prototype.stopAnim=function(){this.animState&&this.animState.stop(),this.animState2&&this.animState2.stop()},t.prototype.worldCenter=function(){var e=g.v2(c.default.getWorldPosition(this.node));return e.y+=50,e},Object.defineProperty(t.prototype,"handSlot",{get:function(){if(null==this._handSlot){var e=this.armature.getSlot("hand");return this._handSlot=e,e}return this._handSlot},enumerable:!1,configurable:!0}),r([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../../framework/utils/ccUtil":"ccUtil"}],SnowBall:[function(e,t,o){"use strict";cc._RF.push(t,"10a57CnyShPsqlidF8RwuEY","SnowBall");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/extension/movement/MoveEngine"),a=e("./FreezeTarget"),s=e("../../../framework/core/PoolManager"),l=cc._decorator,u=l.ccclass,h=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.moveEngine=null,t.target=null,t.fx=null,t}return i(t,e),t.prototype.onLoad=function(){this.moveEngine=this.getOrAddComponent(c.default),this.moveEngine.maxSpeed=34},t.prototype.onEnable=function(){},t.prototype.onDisable=function(){},t.prototype.update=function(){if(cc.isValid(this.target)){var e=this.target.getPosition();e.addSelf(cc.v2(0,80));var t=this.moveEngine.seek(e);if(this.moveEngine.applyForce(t),e.subSelf(this.node.getPosition()).magSqr()<1e3){var o=this.target.getOrAddComponent(a.default),n=s.default.get("Pool").get("snowball-hit");n.setPosition(this.node.position),this.fx=n,o.cast(),this.node.destroy()}}},r([u],t)}(cc.Component));o.default=h,cc._RF.pop()},{"../../../framework/core/PoolManager":"PoolManager","../../../framework/extension/movement/MoveEngine":"MoveEngine","./FreezeTarget":"FreezeTarget"}],SoundHelper:[function(e,t,o){"use strict";cc._RF.push(t,"09a8fa41vxIUZkdgCG77DBM","SoundHelper"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.int=function(){for(var e=0;e<this.music.length;e++)this.music[e].id=-1;cc.sys.platform===cc.sys.QQ_PLAY&&(this.QQMusic=[new BK.Audio(0,"GameRes://"+this.music[0].nativeUrl,-1),new BK.Audio(0,"GameRes://"+this.music[1].nativeUrl,-1),new BK.Audio(0,"GameRes://"+this.music[2].nativeUrl,-1)])},e.playMusic=function(e){if(e=void 0===e?0:e,cc.sys.platform===cc.sys.QQ_PLAY)return-1===this.music[e].id?(this.QQMusic[e].startMusic(),this.music[e].id=1):this.QQMusic[e].resumeMusic(),void(0!==e&&(this.qqFlag=!1));-1===this.music[e].id?this.music[e].id=cc.audioEngine.play(this.music[e],!0,this.musicVolume):cc.audioEngine.resume(this.music[e].id)},e.getSoundContext=function(){var e=this._soundContext[this._soundContext.length];return e?this._soundContext.pop():e=BK.createAudioContext(),e},e.playSound2=function(e){new BK.Audio(1,"GameRes://"+e.toString(),1).startMusic(e)},e.playSound=function(e){null==this.QQSoundContext&&(this.QQSoundContext=BK.createAudioContext({type:"effect"})),this.QQSoundContext.src="GameRes://"+e.toString(),this.QQSoundContext.play()},e.stopMusic=function(e){if(e=void 0===e?0:e,-1!==this.music[e].id){if(cc.sys.platform===cc.sys.QQ_PLAY)return this.QQMusic[e].stopMusic(),this.music[e].id=-1,void(this.QQMusic[e]=new BK.Audio(0,"GameRes://"+this.music[e].nativeUrl,-1));cc.audioEngine.stop(this.music[e].id),this.music[e].id=-1}},e.pauseMusic=function(e){e=void 0===e?0:e,cc.sys.platform!==cc.sys.QQ_PLAY?-1!==this.music[e].id&&cc.audioEngine.AudioState.PLAYING===cc.audioEngine.getState(this.music[e].id)&&cc.audioEngine.pause(this.music[e].id):this.QQMusic[e].pauseMusic()},e.setMusicOff=function(e){if(e)this.playMusic();else for(var t=0;t<this.music.length;t++)this.pauseMusic(t)},e.setSoundOff=function(){},e.setMusicVolume=function(e){this.musicVolume=e;for(var t=0;t<this.music.length;t++)-1!==this.music[t].id&&cc.audioEngine.AudioState.PLAYING===cc.audioEngine.getState(this.music[t].id)&&cc.audioEngine.setVolume(this.music[t].id,this.musicVolume)},e.setSoundVolume=function(){},e.qqMusicResume=function(){cc.sys.platform===cc.sys.QQ_PLAY&&(-1!==this.music[1].id||-1!==this.music[2].id||this.qqFlag||this.playMusic(0))},e.musicVolume=1,e.music=[],e.QQSoundContext=null,e.qqFlag=!0,e._soundContext=[],e}();o.default=n,cc._RF.pop()},{}],SovInfo:[function(e,t,o){"use strict";cc._RF.push(t,"187abeaJAVKGqLjC4CXigcf","SovInfo");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.SovInfo=void 0;var c=e("../../core/DataCenter"),a=e("../../utils/gameUtil"),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sovInvokeCounts={},t}return i(t,e),t.prototype.onLoadAll=function(){if(a.default.isNextDay(this.save_timestamps))for(var e in this.sovInvokeCounts)this.sovInvokeCounts[e]=0},t.prototype.getCount=function(e){var t=this.sovInvokeCounts[e];return null==t&&(t=0,this.sovInvokeCounts[e]=t),t},t.prototype.invoke=function(e){var t=this.getCount(e);this.sovInvokeCounts[e]=++t,this.save()},r([c.field()],t.prototype,"sovInvokeCounts",void 0),r([c.dc("Sov")],t)}(c.default);o.default=s,o.SovInfo=c.default.register(s),cc._RF.pop()},{"../../core/DataCenter":"DataCenter","../../utils/gameUtil":"gameUtil"}],SpecialLevel:[function(e,t,o){"use strict";cc._RF.push(t,"6aa9eOCPdZJqYbbqXGDQ8Fm","SpecialLevel");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.RoleType=void 0;var c,a=e("../../../framework/core/event"),s=e("../../../framework/ui/ToastManager"),l=e("../../../framework/misc/Device"),u=cc._decorator,h=u.ccclass,f=u.property;(function(e){e[e.Balloon=0]="Balloon",e[e.Enemy=1]="Enemy",e[e.Star=2]="Star",e[e.Box=3]="Box",e[e.Bomb=4]="Bomb"})(c=o.RoleType||(o.RoleType={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._type=c.Balloon,t.nodes=null,t.count=0,t.node_Counts=0,t}var o;return i(t,e),o=t,Object.defineProperty(t.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){o.instance=this},t.prototype.gameOver=function(){a.evt.off(this)},t.prototype.start=function(){if(this.type==c.Enemy)a.evt.on("Game.enemyDead",this.check_enemy,this);else if(this.type==c.Balloon)a.evt.on("Game.boollonDes",this.check_enemy,this);else if(this.type==c.Star)a.evt.on("Game.getstar",this.check_enemy,this);else{if(this.type==c.Box)return;this.type==c.Bomb&&(console.log("sd"),a.evt.on("Game.bombDes",this.check_enemy,this))}this.node_Counts=this.nodes.childrenCount},t.prototype.check_enemy=function(){console.log("sd"),this.enabledInHierarchy&&(this.count+=1,this.node_Counts<=this.count&&(s.Toast.make("\u4efb\u52a1\u5b8c\u6210"),l.default.playSfx("finish-mission"),a.evt.emit("Game.win")))},t.prototype.onDestroy=function(){a.evt.off(this),o.instance=null},t.instance=null,r([f({type:cc.Enum(c)})],t.prototype,"_type",void 0),r([f({type:cc.Enum(c)})],t.prototype,"type",null),r([f(cc.Node)],t.prototype,"nodes",void 0),o=r([h],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../framework/core/event":"event","../../../framework/misc/Device":"Device","../../../framework/ui/ToastManager":"ToastManager"}],Spike:[function(e,t,o){"use strict";cc._RF.push(t,"bff89TrfjpJ0IqOQOdpY+n3","Spike");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c,a=e("../../../framework/core/FSM"),s=e("../../../framework/misc/Device"),l=cc._decorator,u=l.ccclass;l.property,function(e){e[e.Hide=0]="Hide",e[e.Show=1]="Show"}(c||(c={}));var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fsm=null,t.collider=null,t.spikeNode=null,t}return i(t,e),t.prototype.onLoad=function(){this.spikeNode=this.node.getChildByName("spike"),this.collider=this.getComponentInChildren(cc.PhysicsCollider),this.fsm=this.addComponent(a.default),this.fsm.init(this,c),this.fsm.enterState(c.Hide)},t.prototype.start=function(){this.node.height=40},t.prototype.onEnter_Show=function(){this.spikeNode.group="spike",this.collider.enabled=!0,this.spikeNode.scaleY=0,s.default.playSfx("spike"),cc.tween(this.spikeNode).to(.2,{scaleY:1}).start()},t.prototype.onUpdate_Show=function(){this.fsm.timeElapsed>2&&this.fsm.changeState(c.Hide)},t.prototype.onEnter_Hide=function(){this.spikeNode.group="default",this.spikeNode.scaleY=1,cc.tween(this.spikeNode).to(.2,{scaleY:0}).start(),this.collider.enabled=!1},t.prototype.onUpdate_Hide=function(){this.fsm.timeElapsed>5&&this.fsm.changeState(c.Show)},t.prototype.onExit_Show=function(){},t.prototype.update=function(){},r([u],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../framework/core/FSM":"FSM","../../../framework/misc/Device":"Device"}],SpriteFrameCache:[function(e,t,o){"use strict";cc._RF.push(t,"8756by7qCVIPpJ06/9qmobv","SpriteFrameCache");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function c(e){try{s(n.next(e))}catch(t){r(t)}}function a(e){try{s(n.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,a)}s((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return s([e,t])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var r=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.getSpriteFrame=function(e){return n(this,void 0,Promise,function(){return i(this,function(){return[2,new Promise(function(t,o){e&&""!=e?-1==e.indexOf("http")?cc.resources.load(e,cc.SpriteFrame,function(e,n){e?o(e):n?t(n):o("frameNull")}):cc.loader.load({url:e,type:"png"},function(e,n){if(e)o(e);else if(n){var i=new cc.SpriteFrame(n);t(i)}else o("frameNull")}):o("empty-url")})]})})},e}();o.default=r,cc._RF.pop()},{}],StarInfo:[function(e,t,o){"use strict";cc._RF.push(t,"aff5aemZVpFG7J/a8OBLsoH","StarInfo");var n=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.StarInfo=void 0;var i=cc._decorator,r=i.ccclass,c=(i.property,function(){function e(e){this.id=0,this.type=0,this.chapter=0,this.demand=0,this.reward=0;var t=csv.star.get(e);t&&(this.id=t.id,this.type=t.type,this.chapter=t.chapter,this.demand=t.demand,this.reward=t.reward)}return n([r],e)}());o.StarInfo=c,cc._RF.pop()},{}],StatHelper:[function(e,t,o){"use strict";cc._RF.push(t,"ffea2zBSx5P+ouhn0URQW2m","StatHelper");var n=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.LevelEndEventType=o.EventType=void 0;var i,r,c=e("../../misc/Net"),a=cc._decorator,s=a.ccclass;a.property,function(e){e[e.paySuccess=0]="paySuccess",e[e.payFail=1]="payFail",e[e.tools=2]="tools",e[e.revive=3]="revive",e[e.award=4]="award"}(i=o.EventType||(o.EventType={})),function(e){e[e.Exit=0]="Exit",e[e.Win=1]="Win",e[e.Lose=2]="Lose"}(r=o.LevelEndEventType||(o.LevelEndEventType={}));var l=function(){function e(){}var t;return t=e,e.init=function(e){this._userId=e},e.startLevel=function(e,o){this.levelId=e,this.current_lv_desc=o,t.level_end_event=r.Exit,cc.sys.platform==cc.sys.WECHAT_GAME&&wx.aldStage.onStart({stageId:e,stageName:this.current_lv_desc,userId:this._userId}),this.isInLevel=!0},e.setLevelEndEvent=function(e){t.level_end_event=e},e.userAction=function(e,t,o){var n;cc.sys.platform==cc.sys.WECHAT_GAME&&(t?((n={})[t]=o,wx.aldSendEvent(e,n)):((n={}).userId=this._userId,wx.aldSendEvent(e)))},e.sendPath=function(){cc.sys.os,cc.sys.OS_IOS},e.doLevelEvent=function(e,t,o,n,r){void 0===n&&(n=1),void 0===r&&(r="1"),this.isInLevel&&cc.sys.platform==cc.sys.WECHAT_GAME&&wx.aldStage.onRunning({stageId:this.levelId,stageName:this.current_lv_desc,userId:this._userId,event:i[e],params:{itemName:t,itemId:o,itemCount:n,itemMoney:r}})},e.endLevel=function(){var e="",o="";switch(t.level_end_event){case r.Win:e="\u5b8c\u6210\u5173\u5361",o="complete";break;case r.Lose:e="\u5173\u5361\u5931\u8d25",o="fail";break;case r.Exit:return e="\u4e2d\u9014\u9000\u51fa",void(o="fail")}cc.sys.platform==cc.sys.WECHAT_GAME&&wx.aldStage.onEnd({stageId:this.levelId,stageName:this.current_lv_desc,userId:this._userId,event:o,params:{desc:e}}),this.isInLevel=!1},e.level_end_event=r.Exit,e.current_lv_desc="",e.isInLevel=!1,e._userId="",e.levelId="0",e.client=new c.default,t=n([s],e)}();o.default=l,cc._RF.pop()},{"../../misc/Net":"Net"}],SubpackageLoader:[function(e,t,o){"use strict";cc._RF.push(t,"518cdzeB/VJIYD2yZxm+mOJ","SubpackageLoader");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c},c=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function c(e){try{s(n.next(e))}catch(t){r(t)}}function a(e){try{s(n.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,a)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return s([e,t])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../core/Signal"),l=e("../../extension/Platform"),u=cc._decorator,h=u.ccclass,f=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label_progress=null,t.bar=null,t.label=null,t.btn_retry=null,t.btn_close=null,t.onSuccess=new s.default,t.names=[],t.hideOnFinish=!0,t}return i(t,e),t.prototype.onLoad=function(){this.btn_retry.node.on(cc.Node.EventType.TOUCH_END,this.click_retry,this),this.btn_close&&this.btn_close.node.on(cc.Node.EventType.TOUCH_END,this.click_close,this)},t.prototype.onShown=function(e,t,o,n){if(this.hideOnFinish=t,this.onSuccess.clear(),this.onSuccess.on(o,n),this.names.splice(0),Array.isArray(e))this.names=e;else{if("string"!=typeof e)return void console.error("[SubpackageLoader] fail to load : params error");this.names.push(e)}this.startLoad()},t.prototype.showStatus=function(e,t){this.label_progress&&(this.label_progress.string=t+"%"),this.bar&&(this.bar.progress=t/100),this.label&&(this.label.string="\u52a0\u8f7d["+e+"]\u4e2d")},t.prototype.startLoad=function(){return c(this,void 0,void 0,function(){var e,t,o,n,i=this;return a(this,function(r){switch(r.label){case 0:this.btn_retry.node.active=!1,this.btn_close.node.active=!1,r.label=1;case 1:r.trys.push([1,6,,7]),e=function(){var e;return a(this,function(n){switch(n.label){case 0:return e=t.names[o],[4,l.default.loadSubPackage(e,function(t,o,n){i.showStatus(e,t,o,n)})];case 1:return n.sent(),[2]}})},t=this,o=0,r.label=2;case 2:return o<this.names.length?[5,e()]:[3,5];case 3:r.sent(),r.label=4;case 4:return o++,[3,2];case 5:return this.onSuccess.fire(this),this.hideOnFinish&&vm.hide(this),[3,7];case 6:return n=r.sent(),console.error(n),this.label&&(this.label.string="\u52a0\u8f7d\u5931\u8d25,\u8bf7\u70b9\u51fb\u91cd\u8bd5!"),this.btn_retry.node.active=!0,this.btn_close.node.active=!0,[3,7];case 7:return[2]}})})},t.prototype.cancel=function(){this.onSuccess.clear(),vm.hide(this)},t.prototype.click_close=function(){vm.hide(this)},t.prototype.onHidden=function(){this.cancel()},t.prototype.click_retry=function(){this.btn_retry.node.active=!1},r([f(cc.Label)],t.prototype,"label_progress",void 0),r([f(cc.ProgressBar)],t.prototype,"bar",void 0),r([f(cc.Label)],t.prototype,"label",void 0),r([f(cc.Button)],t.prototype,"btn_retry",void 0),r([f(cc.Button)],t.prototype,"btn_close",void 0),r([h],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../core/Signal":"Signal","../../extension/Platform":"Platform"}],Switcher:[function(e,t,o){"use strict";cc._RF.push(t,"d228eRfHv1KB4qxEM9MtnXC","Switcher");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../core/Signal"),a=cc._decorator,s=a.ccclass,l=a.property,u=a.menu,h=a.executeInEditMode,f=a.inspector,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.children=null,t.onValueChanged=new c.default,t._childrenCount=0,t._currentIndex=0,t.interactable=!1,t._currentChild=null,t.btn=null,t}return i(t,e),Object.defineProperty(t.prototype,"currentIndex",{get:function(){return this._currentIndex},set:function(e){e=cc.misc.clampf(e,0,this.children.length-1),e=Math.floor(e),this._select(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this.currentIndex},set:function(e){this.children||(this._currentIndex=e),this.currentIndex!=e&&(this._select(e),this.onValueChanged.fire(e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resizeToCurrent",{set:function(e){e&&this.node.setContentSize(this._currentChild.getContentSize())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_checkInteractive",{set:function(e){if(e){if(this.btn=this.getComponent(cc.Button),null==this.btn){this.btn=this.addComponent(cc.Button),this.btn.target=this._currentChild;var t=new cc.Component.EventHandler;t.target=this.node,t.component="Switcher",t.handler="switch",this.btn.clickEvents.push(t)}}else this.btn&&this.btn.destroy()},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){},t.prototype.resetInEditor=function(){},t.prototype.start=function(){this.children=this.node.children,this._childrenCount=this.children.length,this._select(this.currentIndex),this._checkInteractive=this.interactable},t.prototype._select=function(e){this._currentIndex=e,this._currentChild=this.children[e];for(var t=0;t<this.children.length;t++){this.children[t].active=t==e}},t.prototype.switch=function(){this.index=(this.currentIndex+1)%this._childrenCount},r([l()],t.prototype,"_childrenCount",void 0),r([l()],t.prototype,"_currentIndex",void 0),r([l({displayName:"\u4ea4\u4e92"})],t.prototype,"interactable",void 0),r([l({displayName:"\u5f53\u524d\u503c"})],t.prototype,"currentIndex",null),r([l(cc.Node)],t.prototype,"_currentChild",void 0),r([s,u("Controller/Switcher"),h(),f("packages://qcontroller/inspector/switcher.js")],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../core/Signal":"Signal"}],TTGameConfigs:[function(e,t,o){"use strict";cc._RF.push(t,"ef77cLy7+JAy43b8d520p61","TTGameConfigs"),Object.defineProperty(o,"__esModule",{value:!0}),o.TTGameConfig=void 0,o.TTGameConfig={game_id:"helpher",tt_appid:"tta265d4d83d547af602",default_share_title:"helpher",deafult_share_imgUrl:"resources/wechat_share.jpg",banner_ad_id:"aa0jddine2cd74monh",video_ad_id:"bgrgf88hd53hknl4fi",interstitial_ad_id:"2l3cvir2aiq4i639k4",portal_id:""},cc._RF.pop()},{}],Target:[function(e,t,o){"use strict";cc._RF.push(t,"bd7b1tgUE5NurcrQniSYrVo","Target");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c,a=e("../../framework/core/event"),s=e("./SkeletonBase"),l=e("../../framework/core/FSM"),u=e("../../framework/utils/ccUtil"),h=e("../../framework/misc/Device"),f=e("./AIEnemy"),p=e("./Role"),d=e("./Common/Unity");(function(e){e[e.Normal=0]="Normal",e[e.Happy=1]="Happy",e[e.Frightened=2]="Frightened"})(c||(c={}));var y=cc._decorator,v=y.ccclass,_=y.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dir=-1,t.cd=0,t._statusWin=!1,t._statusLose=!1,t.baseScale=0,t.shockedAnim=null,t.timer=0,t.isDead=!1,t}return i(t,e),t.prototype.start=function(){a.evt.on("Game.beDected",this.onDetected,this),a.evt.on("Game.win",this.onWin,this),a.evt.on("Game.lose",this.onGameLose,this),a.evt.on("Game.bomb",this.goDead,this),a.evt.on("Game.catch",this.onCatched,this),a.evt.on("Game.loseTarget",this.onLoseTarget,this),a.evt.on("Game.enemyDead",this.onEnemyDead,this),this.playAnim("idle"),this.schedule(this.checkSight,2),this.baseScale=Math.abs(this.node.scale),this.emotionState=this.addComponent(l.default),this.emotionState.init(this,c),this.emotionState.enterState(c.Normal),this.schedule(this.checkFace,1),d.default.loadSkins(this.skeleton,2)},t.prototype.onEnable=function(){},t.prototype.onDetected=function(){this.shockedAnim=this.playAnim("shocked"),this.scheduleOnce(this.checkEmotion,4)},t.prototype.checkEmotion=function(){f.default.allEnemies.length<=0&&(this.stopAnim(),this.playAnim("idle"))},t.prototype.onCatched=function(e){"target"==e&&this.playAnim("shocked")},t.prototype.onLoseTarget=function(){this.playAnim("idle")},t.prototype.onEnemyDead=function(){this.stopAnim(),this.playAnim("idle")},t.prototype.onDestroy=function(){a.evt.off(this)},t.prototype.onWin=function(){this.fadeIn("happy",0),this._statusWin=!0},t.prototype.onGameLose=function(){this._statusLose=!0},t.prototype.checkSight=function(){if(!(this._statusWin||this._statusLose||(this.timer+=2,this.timer<this.cd))){this.timer=0;var e=g.v2(u.default.getWorldPosition(this.node));e.y+=60;var t=e.clone();t.x=250*this.dir;var o=this._world.rayCast(e,t,cc.RayCastType.Any);for(var n in o)if("role"==o[n].collider.node.group){this.sayHello(),this.cd=10;break}}},t.prototype.sayHello=function(){this.fadeIn("hello",1),a.evt.emit("Game.hello",this)},t.prototype.onEnter_Happy=function(e,t){t?this.fadeIn(t,1):this.fadeIn("happy",1)},t.prototype.onEnter_Normal=function(){this.fadeIn("normal",1)},t.prototype.onEnter_Frightened=function(){this.fadeIn("frightened",1)},t.prototype.onUpdate_Frightened=function(){this.emotionState.timeElapsed>2&&this.emotionState.changeState(c.Normal)},t.prototype.onUpdate_Happy=function(){this.emotionState.timeElapsed>4&&this.emotionState.changeState(c.Normal)},t.prototype.goDead=function(){this.isDead||(this.isDead=!0,this.playAnim("shocked"),h.default.playSfx("ohoh"),this.scheduleOnce(this.loseGame,.5))},t.prototype.loseGame=function(){a.evt.emit("Game.lose")},t.prototype.checkFace=function(){var e=p.default.self;e&&(Math.abs(e.node.y-this.node.y)>200||(e.node.x>this.node.x?this.node.scaleX=-1*this.baseScale:this.node.scaleX=1*this.baseScale))},r([_],t.prototype,"dir",void 0),r([v],t)}(s.default);o.default=m,cc._RF.pop()},{"../../framework/core/FSM":"FSM","../../framework/core/event":"event","../../framework/misc/Device":"Device","../../framework/utils/ccUtil":"ccUtil","./AIEnemy":"AIEnemy","./Common/Unity":"Unity","./Role":"Role","./SkeletonBase":"SkeletonBase"}],Thunder:[function(e,t,o){"use strict";cc._RF.push(t,"bb872SONn1GWLqiBQ6LN12m","Thunder");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/core/event"),a=e("../../../framework/misc/Device"),s=cc._decorator,l=s.ccclass,u=s.property,h=s.menu,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.animation=null,t.explode=null,t.light_width=50,t}return i(t,e),t.prototype.onLoad=function(){this.animation=this.getComponent(cc.Animation),this.explode=this.node.getChildByName("0")},t.prototype.play=function(e,t,o){this.animation.play(),a.default.playSfx("lightling");var n=e.position.add(o),i=t.position.add(o);this.node.setPosition(n);var r=i.sub(n),s=4*r.mag()/5;return this.node.setContentSize(s,this.light_width),this.explode.setPosition(s,0),this.node.angle=Math.atan2(r.y,r.x)*cc.macro.DEG,c.evt.sleep(.2)},t.prototype.update=function(){},r([u],t.prototype,"light_width",void 0),r([l("Thunder"),h("Game/Effect/Thunder")],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../../framework/core/event":"event","../../../framework/misc/Device":"Device"}],TiledLayer2Objects:[function(e,t,o){"use strict";cc._RF.push(t,"8ba77gH8QZHvZusJPKNyE8e","TiledLayer2Objects");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,c.menu),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mw=0,t.mh=0,t.tw=0,t.th=0,t}return i(t,e),t.prototype.onLoad=function(){this.tiledmap=this.getComponent(cc.TiledMap);var e=this.tiledmap.getMapSize();this.mw=e.width,this.mh=e.height;var t=this.tiledmap.getTileSize();this.tw=t.width,this.th=t.height,this.ht=cc.v2(this.tw/2,this.th/2)},t.prototype.start=function(){},t.prototype.IDX=function(e,t){return e instanceof cc.Vec2&&(t=e.y,e=e.x),t*this.mw+e},t.prototype.createObjects=function(e,t){if(null==this._objectFactory)return console.log("[Tiledlayer2object] no factory provided!"),Promise.reject("no factory provided!");this.objectLayer=this.tiledmap.getLayer(e),this.objectLayer.enabled=!1;for(var o=0,n=[],i=0,r=0;r<this.mw;r++)for(var c=0;c<this.mh;c++){var a=cc.v2(r,c),s=this.objectLayer.getTileGIDAt(a);if(0!=s){var l=this.createObj(s,a);l&&(l.then(function(){return t&&t(++i,o)}).catch(function(e){return console.log(e)}),n.push(l))}}return o=n.length,Promise.all(n)},t.prototype.setFactory=function(e){this._objectFactory=e},t.prototype.createObj=function(e,t){var o=this.tiledmap.getPropertiesForGID(e);if(e){var n=this.objectLayer.getPositionAt(t);n.addSelf(cc.v2(this.ht.x,this.ht.y));var i={pos:n,gid:e,tileId:this.IDX(t),properties:o,tilexy:t};return this._objectFactory.createObject(this.objectLayer,i)}},r([a,s("Tiledmap\u5de5\u5177/TiledLayer2Objects")],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],ToastComponent:[function(e,t,o){"use strict";cc._RF.push(t,"c4ad6Rf0DpFeay8D3aly6IU","ToastComponent");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./UIFunctions"),a=cc._decorator,s=a.ccclass,l=a.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t}return i(t,e),t.prototype.onLoad=function(){this.animations=c.default.getChildrenAnimations(this.node)},t.prototype.start=function(){},t.prototype.hide=function(e){this.node.active=!0,c.default.doHideAnimations(this.animations,e)||(this.node.active=!1,e&&e(this))},t.prototype.show=function(e){this.label.string=e,c.default.doShowAnimations(this.animations)},r([l(cc.Label)],t.prototype,"label",void 0),r([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./UIFunctions":"UIFunctions"}],ToastManager:[function(e,t,o){"use strict";cc._RF.push(t,"129ed5o6uNHDKhz6KoueBpN","ToastManager");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.Toast=void 0;var c=e("./ToastComponent"),a=cc._decorator,s=a.ccclass,l=a.property;o.Toast=null;var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.offset=cc.v2(),t}return i(t,e),t.prototype.onLoad=function(){o.Toast=this},t.prototype.start=function(){this.toastPool=new cc.NodePool},t.prototype.onDestroy=function(){this.toastPool.clear()},t.prototype.make=function(e,t){void 0===t&&(t=2);var o=this.toastPool.get(),n=null;return null==o?(null==(n=(o=cc.instantiate(this.prefab)).getComponent(c.default))&&console.warn("Toast.make : Toast Prefab must contains ToastComponent"),o.setPosition(o.x+this.offset.x,o.y+this.offset.y)):n=o.getComponent(c.default),null==o.parent&&this.node.addChild(o,99999),this.show(n,e,t),n},t.prototype.show=function(e,t,o){var n=this;e.show(t),this.scheduleOnce(function(){e.hide(function(){n.toastPool.put(e.node),console.log("Toast.hide toastpool size:",n.toastPool.size())})},o)},r([l(cc.Prefab)],t.prototype,"prefab",void 0),r([l(cc.Vec2)],t.prototype,"offset",void 0),r([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./ToastComponent":"ToastComponent"}],TopRightWdiget:[function(e,t,o){"use strict";cc._RF.push(t,"6a79ckOuqlKR79rhBCHopTY","TopRightWdiget");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.widget=null,t}return i(t,e),t.prototype.onLoad=function(){this.widget=this.getComponent(cc.Widget),cc.winSize.width/cc.winSize.height<.5?this.widget.top=180:this.widget.top=120,this.widget.updateAlignment()},t.prototype.start=function(){},r([a],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],TouchStartGame:[function(e,t,o){"use strict";cc._RF.push(t,"3e365Py/V5DA6ZR5xNadqew","TouchStartGame");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startBtn=null,t.moveMaxDistance=100,t._distance=0,t._x=0,t._y=0,t}return i(t,e),t.prototype.onLoad=function(){this.node.on("touchstart",this.onBgTouchStart,this),this.node.on("touchend",this.onBgTouchEnd,this)},t.prototype.onDestroy=function(){this.node.off("touchstart",this.onBgTouchStart,this),this.node.off("touchend",this.onBgTouchEnd,this)},t.prototype.onBgTouchStart=function(e){var t=e.getLocation();this._x=t.x,this._y=t.y},t.prototype.onBgTouchEnd=function(e){var t=e.getLocation(),o=Math.abs(t.x-this._x),n=Math.abs(t.y-this._y);o<this.moveMaxDistance&&n<this.moveMaxDistance&&this.startBtn.clickEvents[0].emit(["click"])},r([s({type:cc.Button,tooltip:"\u6a21\u62df\u70b9\u51fb\u7684\u6309\u94ae\uff0c**\u8bb0\u5f97\u53bb\u6389Button\u524d\u9762\u7684\u52fe**"})],t.prototype,"startBtn",void 0),r([s({tooltip:"\u4e0a\u4e0b\u6700\u5927\u79fb\u52a8\u8ddd\u79bb"})],t.prototype,"moveMaxDistance",void 0),r([a],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],TurntableInfo:[function(e,t,o){"use strict";cc._RF.push(t,"75538dcMglHWrGRfjAabgdw","TurntableInfo");var n=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.TurntableInfo=void 0;var i=cc._decorator,r=i.ccclass,c=(i.property,function(){function e(e){this.id=0,this.type=0,this.content="",this.num=0,this.text="",this.chance=0,this.path="";var t=csv.turntable.get(e);t&&(this.id=t.id,this.type=t.type,this.content=t.content,this.num=t.num,this.text=t.text,this.chance=t.chance,this.path="Img/"+t.thumbnail)}return n([r],e)}());o.TurntableInfo=c,cc._RF.pop()},{}],UIAnimHelper:[function(e,t,o){"use strict";cc._RF.push(t,"8cfe68IQLBKK52W7zCfw20R","UIAnimHelper"),Object.defineProperty(o,"__esModule",{value:!0}),o.UIAnimType=void 0;var n,i=e("./ScaleAnim"),r=e("./EaseType");(function(e){e[e.Position=0]="Position",e[e.Fade=1]="Fade",e[e.ScaleIn=2]="ScaleIn",e[e.ScaleOut=3]="ScaleOut"})(n=o.UIAnimType||(o.UIAnimType={}));var c=function(){function e(){}return e.play=function(e,t,o,r){var c;return t==n.ScaleIn?(e.scale=0,null==(c=e.getComponent(i.default))&&(c=e.addComponent(i.default)),c.pasr.p=r,c.pasr.a=o,c.pasr.s=0,c.from=cc.Vec3.ZERO,c.to=cc.Vec3.ONE,c.enabled=!0,c):t==n.ScaleOut?(e.scale=1,null==(c=e.getComponent(i.default))&&(c=e.addComponent(i.default)),c.pasr.p=r,c.pasr.a=o,c.pasr.s=0,c.pasr.r=0,c.from=cc.Vec3.ONE,c.to=cc.Vec3.ZERO,c.enabled=!0,c):void 0},e.fadeIn=function(t){t.children.forEach(function(t,o){e.play(t,n.ScaleIn,.2,.06*o).easeType=r.EaseType.backOut})},e.fadeOut=function(t){var o=t.children.length;return t.children.forEach(function(t,i){e.play(t,n.ScaleOut,.2,.06*(o-i)).easeType=r.EaseType.backIn}),event.sleep(.06*o+.2)},e}();o.default=c,cc._RF.pop()},{"./EaseType":"EaseType","./ScaleAnim":"ScaleAnim"}],UIBaseAnim:[function(e,t,o){"use strict";cc._RF.push(t,"d128d8EHFFKJr4q2gDSWpo2","UIBaseAnim");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./EaseType"),a=e("../../misc/PasrTimer"),s=e("../../core/Signal"),l=cc._decorator,u=l.ccclass,h=l.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pasr=new a.PasrTimer(0,0,0,0),t.easeType=c.EaseType.linear,t.onFinish=new s.default,t}return i(t,e),t.prototype.onFinished=function(){this.enabled=!1},t.prototype.onLoad=function(){this.onFinish.add(this.onFinished,this)},t.prototype.onDestroy=function(){this.onFinish.remove(this.onFinished,this)},t.prototype.start=function(){},t.prototype.play=function(){return this.enabled=!0,this.pasr.reset(),this.onFinish.wait()},t.prototype.update=function(e){if(!this.pasr.isFinished()){var t=this.pasr.Tick(e);if(this.pasr.isFinished())return void this.onFinish.fire();t=(0,cc.easing[c.EaseType[this.easeType]])(t),this.onTick(t)}},r([h({type:cc.Enum(c.EaseType)})],t.prototype,"easeType",void 0),r([u],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../core/Signal":"Signal","../../misc/PasrTimer":"PasrTimer","./EaseType":"EaseType"}],UIBoxAward:[function(e,t,o){"use strict";cc._RF.push(t,"fdfe4adZTZIIKMg7g5itn0V","UIBoxAward");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/ui/mvcView"),a=e("../../../framework/core/event"),s=e("../Common/Base/PlayerInfo"),l=e("../../../framework/utils/actionUtil"),u=e("../../../framework/utils/ccUtil"),h=e("../Common/CollectionInfo"),f=e("../../../framework/ui/ToastManager"),p=cc._decorator,d=p.ccclass,y=p.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.num_label=null,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.onShown=function(){var e;l.default.jellyJump2(this.node),this.num_label.string="x  3",e=s.PlayerInfo.isPlayingDaily?csv.daily_level.get(s.PlayerInfo.playingDailyLevel):csv.level.get(s.PlayerInfo.playinglevel);var t=u.default.get(h.CollectionInfo,e.treasure);f.Toast.make("\u83b7\u5f97"+t.name),u.default.setDisplay(this.icon,t.thumbnail),s.PlayerInfo.unlockDecorate(t.id)},t.prototype.click_close=function(){a.evt.emit("Game.win"),vm.hide(this)},r([y(cc.Sprite)],t.prototype,"icon",void 0),r([y(cc.Label)],t.prototype,"num_label",void 0),r([d],t)}(c.default);o.default=v,cc._RF.pop()},{"../../../framework/core/event":"event","../../../framework/ui/ToastManager":"ToastManager","../../../framework/ui/mvcView":"mvcView","../../../framework/utils/actionUtil":"actionUtil","../../../framework/utils/ccUtil":"ccUtil","../Common/Base/PlayerInfo":"PlayerInfo","../Common/CollectionInfo":"CollectionInfo"}],UIBoxGuide:[function(e,t,o){"use strict";cc._RF.push(t,"46ee9xjh6pBwqSO38ROu0Yr","UIBoxGuide");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/ui/mvcView"),a=e("../Game"),s=cc._decorator,l=s.ccclass,u=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.onShown=function(e){e&&(this.label.string=e)},t.prototype.click_close=function(){vm.hide(this)},t.prototype.onHidden=function(){a.default.instance.startGame()},r([u(cc.Label)],t.prototype,"label",void 0),r([l],t)}(c.default);o.default=h,cc._RF.pop()},{"../../../framework/ui/mvcView":"mvcView","../Game":"Game"}],UIChallengeChapterItem:[function(e,t,o){"use strict";cc._RF.push(t,"dc9e8mUsKpJgrxAEluJYFGQ","UIChallengeChapterItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/ui/mvcView"),a=e("../Common/Base/PlayerInfo"),s=e("../../../framework/ui/ToastManager"),l=e("../Common/Base/LoadingScene"),u=e("../../../framework/extension/weak_net_game/WeakNetGame"),h=e("../../../framework/extension/Platform"),f=e("./UIChallengeChapter"),p=cc._decorator,d=p.ccclass,y=p.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label_chapter=null,t.level_node=null,t}return i(t,e),t.prototype.onLoad=function(){var e=this;this.register(this.label_chapter,function(){return e.showLabel()})},t.prototype.onLaterRender=function(){this.refresh_level()},t.prototype.refresh_level=function(){for(var e=this,t=this.getData(),o=csv.daily_level.values.length,n=function(n){var r=(t-1)*f.ROW+(n+1);i.onClick(i.level_node.children[n],function(){return e.click_startGame(r)}),i.level_node.children[n].getChildByName("dangqian"),i.level_node.children[n].getChildByName("t1").getComponent(cc.Label).string=5*(t-1)+n+1+"";var c=i.level_node.children[n].getChildByName("weijisuo");r>a.PlayerInfo.dailylevel?c.active=!0:(4==n&&-1==a.PlayerInfo.challenge_gift.indexOf(t)?(i.level_node.children[n].getChildByName("kelingqu").active=!0,i.level_node.children[n].getChildByName("libao").active=!0,i.onClick(i.level_node.children[n].getChildByName("libao"),function(){return e.click_gift(t)})):4==n&&(i.level_node.children[n].getChildByName("libao").active=!1,i.level_node.children[n].getChildByName("kelingqu").active=!1),c.active=!1),i.level_node.children[n].opacity=o<r?0:255},i=this,r=0;r<this.level_node.children.length;r++)n(r)},t.prototype.showLabel=function(){return"\u9636\u6bb5"+this.getData()},t.prototype.click_gift=function(e){this.level_node.children[4].getChildByName("libao").active=!1,this.level_node.children[4].getChildByName("kelingqu").active=!1,vm.show("Prefabs/UI/UIGetGift",e)},t.prototype.click_startGame=function(e){a.PlayerInfo.isPlayingDaily=!0,e>a.PlayerInfo.dailylevel?s.Toast.make("\u672a\u89e3\u9501"):a.PlayerInfo.labour>0?(a.PlayerInfo.labour--,a.PlayerInfo.isPlayingDaily?(a.PlayerInfo.playingDailyLevel=e,csv.Config.Challenge_Level_Show_AD==a.PlayerInfo.playingDailyLevel||(a.PlayerInfo.playingDailyLevel-csv.Config.Challenge_Level_Show_AD)%csv.Config.Challenge_Level_Show_AD_Interval==0&&a.PlayerInfo.playingDailyLevel>csv.Config.Challenge_Level_Show_AD?u.default.doChoice("SOV_ShowAD",function(){a.PlayerInfo.save(),l.default.goto("Game")},this):csv.Config.Challenge_Level_Show_AD_Skip==a.PlayerInfo.playingDailyLevel||(a.PlayerInfo.playingDailyLevel-csv.Config.Challenge_Level_Show_AD_Skip)%csv.Config.Challenge_Level_Show_AD_Skip_Interval==0&&a.PlayerInfo.playingDailyLevel>csv.Config.Challenge_Level_Show_AD_Skip?h.default.showInterstitial(function(){a.PlayerInfo.save(),l.default.goto("Game")},this):(a.PlayerInfo.save(),l.default.goto("Game"))):(a.PlayerInfo.playinglevel=e,a.PlayerInfo.save(),l.default.goto("Game"))):vm.show("Prefabs/UI/UIGetLabour",function(){a.PlayerInfo.labour--,a.PlayerInfo.isPlayingDaily?a.PlayerInfo.playingDailyLevel=e:a.PlayerInfo.playinglevel=e,a.PlayerInfo.save(),l.default.goto("Game")},!1)},r([y(cc.Label)],t.prototype,"label_chapter",void 0),r([y(cc.Node)],t.prototype,"level_node",void 0),r([d],t)}(c.default);o.default=v,cc._RF.pop()},{"../../../framework/extension/Platform":"Platform","../../../framework/extension/weak_net_game/WeakNetGame":"WeakNetGame","../../../framework/ui/ToastManager":"ToastManager","../../../framework/ui/mvcView":"mvcView","../Common/Base/LoadingScene":"LoadingScene","../Common/Base/PlayerInfo":"PlayerInfo","./UIChallengeChapter":"UIChallengeChapter"}],UIChallengeChapter:[function(e,t,o){"use strict";cc._RF.push(t,"53967AcfvlPuJ+s525to4rc","UIChallengeChapter");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.ROW=void 0;var c=e("../../../framework/ui/mvcView"),a=e("../Common/Base/PlayerInfo"),s=e("./UIChallengeChapterItem"),l=cc._decorator,u=l.ccclass,h=l.property;o.ROW=5;var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.layout=null,t.scoreView=null,t.datas=[],t}return i(t,e),t.prototype.onLoad=function(){var e=this;this.register(this.layout,function(){return e.datas})},t.prototype.onShow=function(){!a.PlayerInfo.playingDailyLevel&&(a.PlayerInfo.playingDailyLevel=a.PlayerInfo.dailylevel),this.datas.splice(0);for(var e=Math.ceil(csv.daily_level.values.length/o.ROW),t=1;t<=e;t++)this.datas.push(t);this.render(),this.scoreView.scrollToPercentVertical(1-a.PlayerInfo.playingDailyLevel/o.ROW/e,.2)},t.prototype.start=function(){},t.prototype.click_play=function(){var e=this.layout.node.getComponentInChildren(s.default);e&&e.click_startGame(a.PlayerInfo.playingDailyLevel)},t.prototype.clic_close=function(){vm.hide(this)},r([h(cc.Layout)],t.prototype,"layout",void 0),r([h(cc.ScrollView)],t.prototype,"scoreView",void 0),r([u],t)}(c.default);o.default=f,cc._RF.pop()},{"../../../framework/ui/mvcView":"mvcView","../Common/Base/PlayerInfo":"PlayerInfo","./UIChallengeChapterItem":"UIChallengeChapterItem"}],UIChallengeLevel:[function(e,t,o){"use strict";cc._RF.push(t,"3c4fcd3UwRNk54DwAHrsrG6","UIChallengeLevel");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/ui/mvcView"),a=e("../../../framework/utils/ccUtil"),s=e("../Common/DailyLevelInfo"),l=e("../Common/Base/PlayerInfo"),u=cc._decorator,h=u.ccclass,f=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pageview=null,t.layout=null,t.num=0,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.onShow=function(){var e=this,t=0,o=[[]];csv.daily_level.values.map(function(n){if(l.PlayerInfo.isGreaterDate(n.day)){e.num>=20&&(t+=1,e.num=0,o.push([])),e.num+=1;var i=a.default.get(s.DailyLevelInfo,n.id);o[t].push(i)}});for(var n=function(e){var t=cc.instantiate(i.layout);t.active=!0,i.pageview.addPage(t),i.register(t.getComponent(cc.Layout),function(){return o[e]})},i=this,r=0;r<o.length;r++)n(r);this.pageview.setCurrentPageIndex(Math.floor(l.PlayerInfo.dailylevel/20)),this.render(),l.PlayerInfo.isInGuide&&!l.PlayerInfo.is_guide_15&&(l.PlayerInfo.isInGuide=!1,l.PlayerInfo.is_guide_15=!0,vm.show("Prefabs/UI/UIGetPresent"))},t.prototype.start=function(){},t.prototype.clic_close=function(){vm.hide(this)},t.prototype.onHidden=function(){this.pageview.removeAllPages(),this.num=0},r([f(cc.PageView)],t.prototype,"pageview",void 0),r([f(cc.Node)],t.prototype,"layout",void 0),r([h],t)}(c.default);o.default=p,cc._RF.pop()},{"../../../framework/ui/mvcView":"mvcView","../../../framework/utils/ccUtil":"ccUtil","../Common/Base/PlayerInfo":"PlayerInfo","../Common/DailyLevelInfo":"DailyLevelInfo"}],UIChapterClues:[function(e,t,o){"use strict";cc._RF.push(t,"f7a29efMb9JvpCUBVmsU8ev","UIChapterClues");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/ui/mvcView"),a=e("../../../framework/utils/ccUtil"),s=e("../Common/ChapterlInfo"),l=e("../Common/Base/PlayerInfo"),u=e("../../../framework/ui/controller/Switcher"),h=cc._decorator,f=h.ccclass,p=h.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bar_chapter=null,t.left_chapter=null,t.right_chapter=null,t.left_chapterNum=null,t.right_chapterNum=null,t.left_name=null,t.right_name=null,t.tip=null,t.right_swtich=null,t.leftData=null,t.rightData=null,t}return i(t,e),t.prototype.onLoad=function(){var e=this;this.initData(),this.registerSwitcher(this.right_swtich,function(){return e.rightSwtich()}),this.registerLabel(this.tip,function(){return e.showTip()}),this.registerLabel(this.left_chapterNum,function(){return e.leftData.chapter}),this.registerLabel(this.left_name,function(){return e.leftData.title}),this.registerSprite(this.left_chapter,function(){return"Img/chapter/zj_"+e.leftData.id}),this.rightData&&(this.registerLabel(this.right_chapterNum,function(){return e.rightData.chapter}),this.registerLabel(this.right_name,function(){return e.rightData.title}),this.registerSprite(this.right_chapter,function(){return"Img/chapter/zj_"+e.rightData.id}))},t.prototype.initData=function(){var e=l.PlayerInfo.getChapter(l.PlayerInfo.playinglevel);this.leftData=a.default.get(s.ChapterlInfo,e),this.rightData=e+1>5?null:a.default.get(s.ChapterlInfo,e+1)},t.prototype.showBar=function(){var e=l.PlayerInfo.playinglevel,t=10*l.PlayerInfo.getChapter(l.PlayerInfo.playinglevel);return e==t?1:(10-(t-e))/10},t.prototype.showTip=function(){var e=l.PlayerInfo.playinglevel,t=10*l.PlayerInfo.getChapter(l.PlayerInfo.playinglevel);return e==t&&this.rightData?"\u606d\u559c\u4f60\uff01"+this.rightData.chapter+"\u5df2\u89e3\u9501":"\u7ee7\u7eed\u6311\u6218"+(t-e)+"\u5173\uff0c\u89e3\u9501\u4e0b\u4e00\u7ae0"},t.prototype.rightSwtich=function(){return l.PlayerInfo.getChapter(l.PlayerInfo.playinglevel)+1>5?(this.tip.string="\u66f4\u591a\u5173\u5361\uff0c\u5373\u5c06\u4e0a\u7ebf",1):0},t.prototype.onEnable=function(){this.bar_chapter.progress=this.showBar(),this.render()},t.prototype.clic_close=function(){vm.hide(this)},r([p(cc.ProgressBar)],t.prototype,"bar_chapter",void 0),r([p(cc.Sprite)],t.prototype,"left_chapter",void 0),r([p(cc.Sprite)],t.prototype,"right_chapter",void 0),r([p(cc.Label)],t.prototype,"left_chapterNum",void 0),r([p(cc.Label)],t.prototype,"right_chapterNum",void 0),r([p(cc.Label)],t.prototype,"left_name",void 0),r([p(cc.Label)],t.prototype,"right_name",void 0),r([p(cc.Label)],t.prototype,"tip",void 0),r([p(u.default)],t.prototype,"right_swtich",void 0),r([f],t)}(c.default);o.default=d,cc._RF.pop()},{"../../../framework/ui/controller/Switcher":"Switcher","../../../framework/ui/mvcView":"mvcView","../../../framework/utils/ccUtil":"ccUtil","../Common/Base/PlayerInfo":"PlayerInfo","../Common/ChapterlInfo":"ChapterlInfo"}],UIChapterHelp:[function(e,t,o){"use strict";cc._RF.push(t,"b2e40lsG+lFOodZ1m6Sz1vu","UIChapterHelp");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../Game"),a=e("../../../framework/utils/ccUtil"),s=cc._decorator,l=s.ccclass,u=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mainbg=null,t.title1=null,t}return i(t,e),t.prototype.onLoad=function(){this.mainbg.node.opacity=0},t.prototype.start=function(){},t.prototype.onShown=function(e){var t=this;a.default.setDisplay(this.mainbg,"ImgComics/chapter/"+(e-1)).then(function(){cc.tween(t.mainbg.node).to(.5,{opacity:255}).start()})},t.prototype.click_go=function(){c.default.instance.startGame()},r([u(cc.Sprite)],t.prototype,"mainbg",void 0),r([u(cc.Sprite)],t.prototype,"title1",void 0),r([l],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../framework/utils/ccUtil":"ccUtil","../Game":"Game"}],UIChapterItem:[function(e,t,o){"use strict";cc._RF.push(t,"7f4586+4zJMZ4x7HSDe9hQj","UIChapterItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/ui/mvcView"),a=e("../Common/Base/PlayerInfo"),s=e("../../../framework/ui/ToastManager"),l=e("../Common/Base/LoadingScene"),u=e("../../../framework/ui/controller/Switcher"),h=e("../Common/Const"),f=e("../../../framework/utils/ccUtil"),p=e("../Common/StarInfo"),d=cc._decorator,y=d.ccclass,v=d.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label_chapter=null,t.icon=null,t.level_node=null,t.lock_node=null,t.unlock_node=null,t.lock_label=null,t.star_label=null,t.left=null,t.right=null,t.page=0,t}return i(t,e),t.prototype.onLoad=function(){var e=this;this.register(this.label_chapter,function(){return e.showLabel()}),this.register(this.icon,function(){return e.showIcon()})},t.prototype.onLaterRender=function(){var e=this.getData();a.PlayerInfo.star>=f.default.get(p.StarInfo,e.id).demand&&10*(e.id-1)<a.PlayerInfo.level?(this.lock_node.active=!1,this.unlock_node.active=!0):(this.lock_node.active=!0,this.unlock_node.active=!1,this.lock_label.string="\u8fbe\u5230"+f.default.get(p.StarInfo,e.id).demand+"\u661f\u89e3\u9501"),a.PlayerInfo.level-10*(e.id-1)>5&&a.PlayerInfo.level>10*(e.id-1)?(this.page=1,this.right.active=!1,this.left.active=!0):(this.page=0,this.right.active=!0,this.left.active=!1),this.refresh_level(),this.starNum()},t.prototype.refresh_level=function(){var e=this,t=this.getData();if(!(10*(t.id-1)>a.PlayerInfo.level))for(var o=function(o){var i=10*(t.id-1)+(5*n.page+o+1);n.onClick(n.level_node.children[o],function(){return e.click_Chapter(i)}),n.level_node.children[o].getComponentInChildren(u.default).index=a.PlayerInfo.level_star[i],n.level_node.children[o].getComponentInChildren(cc.Label).string=i+"";var r=n.level_node.children[o].getChildByName("dangqian");i==a.PlayerInfo.level?r.color=cc.color(235,113,0,255):i<a.PlayerInfo.level?r.color=cc.color(105,185,30,255):r.color=cc.Color.GRAY},n=this,i=0;i<this.level_node.children.length;i++)o(i)},t.prototype.starNum=function(){for(var e=this.getData(),t=0,o=10*(e.id-1)+1;o<=10*e.id;o++)t+=a.PlayerInfo.level_star[o];this.star_label.string=t+"/30"},t.prototype.showIcon=function(){var e=this.getData();return a.PlayerInfo.getChapter()<e.id?"ImagePart/chapter/jingqingqidai":h.default.Chapter_Unlock<e.id?"ImagePart/chapter/1":"ImagePart/chapter/"+e.id},t.prototype.showLabel=function(){return"\u7b2c"+this.getData().id+"\u7ae0"},t.prototype.click_left=function(){1==this.page&&(this.page=0,this.right.active=!0,this.left.active=!1,this.refresh_level())},t.prototype.click_right=function(){0==this.page&&(this.page=1,this.right.active=!1,this.left.active=!0,this.refresh_level())},t.prototype.click_Chapter=function(e){console.log(e),a.PlayerInfo.getCurrentLevel()<e?s.Toast.make("\u672a\u89e3\u9501"):a.PlayerInfo.labour>0?(a.PlayerInfo.labour--,a.PlayerInfo.playinglevel=e,a.PlayerInfo.save(),l.default.goto("Game")):vm.show("Prefabs/UI/UIGetLabour",function(){a.PlayerInfo.labour--,a.PlayerInfo.isPlayingDaily?a.PlayerInfo.playingDailyLevel=e:a.PlayerInfo.playinglevel=e,a.PlayerInfo.save(),l.default.goto("Game")},!1)},r([v(cc.Label)],t.prototype,"label_chapter",void 0),r([v(cc.Sprite)],t.prototype,"icon",void 0),r([v(cc.Node)],t.prototype,"level_node",void 0),r([v(cc.Node)],t.prototype,"lock_node",void 0),r([v(cc.Node)],t.prototype,"unlock_node",void 0),r([v(cc.Label)],t.prototype,"lock_label",void 0),r([v(cc.Label)],t.prototype,"star_label",void 0),r([v(cc.Node)],t.prototype,"left",void 0),r([v(cc.Node)],t.prototype,"right",void 0),r([y],t)}(c.default);o.default=_,cc._RF.pop()},{"../../../framework/ui/ToastManager":"ToastManager","../../../framework/ui/controller/Switcher":"Switcher","../../../framework/ui/mvcView":"mvcView","../../../framework/utils/ccUtil":"ccUtil","../Common/Base/LoadingScene":"LoadingScene","../Common/Base/PlayerInfo":"PlayerInfo","../Common/Const":"Const","../Common/StarInfo":"StarInfo"}],UIChapter:[function(e,t,o){"use strict";cc._RF.push(t,"c04a36zMD1BpKcHR/Vicg4F","UIChapter");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/ui/mvcView"),a=e("../../../framework/utils/ccUtil"),s=e("../Common/ChapterlInfo"),l=e("../Common/Const"),u=e("../Common/Base/PlayerInfo"),h=e("../../../framework/extension/weak_net_game/UserInfo"),f=e("./UIConfirm"),p=e("../Common/Base/LoadingScene"),d=e("../../../framework/extension/buffs/BuffSystem"),y=cc._decorator,v=y.ccclass,_=y.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.layout=null,t.scoreView=null,t.datas=[],t}return i(t,e),t.prototype.onLoad=function(){var e=this;this.register(this.layout,function(){return e.datas})},t.prototype.onShow=function(){var e=this;this.datas.splice(0),csv.Chapter.values.map(function(t){var o=a.default.get(s.ChapterlInfo,t.id);o.id<=l.default.Chapter_Unlock+1&&e.datas.push(o)}),this.render(),u.PlayerInfo.level>20?this.scoreView.scrollToPercentVertical(1-u.PlayerInfo.level/10/12,.2):this.scoreView.scrollToPercentVertical(1,.2)},t.prototype.start=function(){},t.prototype.click_play=function(){var e=this;if(u.PlayerInfo.labour>0){if(!h.UserInfo.gun_num&&!h.UserInfo.isGetGunStart){var t=Math.random();if(u.PlayerInfo.level>=csv.Config.Start_Lv_Get_Gun&&h.UserInfo.gunViewDay<csv.Config.Get_Gun_Limt_Day&&h.UserInfo.gunView<csv.Config.Get_Gun_Limt&&t<csv.Config.Get_Gun_Pro)return void vm.show("Prefabs/UI/UIGetGun",function(){e.confirm()},"isGetGunStart")}this.confirm()}else vm.show("Prefabs/UI/UIGetLabour",function(){e.confirm()},!1)},t.prototype.confirm=function(){if(u.PlayerInfo.level>=csv.level.size){if(!(u.PlayerInfo.dailylevel<=u.PlayerInfo.maxDailyLv))return void vm.show("Prefabs/UI/UIConfirm","\u662f\u5426\u968f\u673a\u5f00\u59cb\u4e4b\u524d\u7684\u5173\u5361",this.onConfirm,this);vm.show("Prefabs/UI/UIConfirm","\u662f\u5426\u524d\u5f80\u6311\u6218\u5173\u5361\uff1f",this.onConfirm_challenge,this)}else this.flytili()},t.prototype.onConfirm_challenge=function(e){e==f.ConfirmOption.Yes?(u.PlayerInfo.isPlayingDaily=!0,vm.show("Prefabs/UI/UIChallengeChapter")):vm.show("Prefabs/UI/UIConfirm","\u662f\u5426\u968f\u673a\u5f00\u59cb\u4e4b\u524d\u7684\u5173\u5361",this.onConfirm,this)},t.prototype.onConfirm=function(e){if(e==f.ConfirmOption.Yes){u.PlayerInfo.isRandomLevel=!0;var t=csv.level.get(g.randomInt(2,csv.level.size));this.flytili(t.id)}else u.PlayerInfo.isRandomLevel=!1},t.prototype.flytili=function(e){u.PlayerInfo.isPlayingDaily=!1,u.PlayerInfo.labour--,u.PlayerInfo.save("labour"),u.PlayerInfo.labour<=csv.Config.Max_Energy-1&&d.buffSystem.startBuff("AutoLabour",u.PlayerInfo.buff_labour||300),u.PlayerInfo.playinglevel=e||u.PlayerInfo.level,p.default.goto("Game")},t.prototype.clic_close=function(){vm.hide(this)},r([_(cc.Layout)],t.prototype,"layout",void 0),r([_(cc.ScrollView)],t.prototype,"scoreView",void 0),r([v],t)}(c.default);o.default=m,cc._RF.pop()},{"../../../framework/extension/buffs/BuffSystem":"BuffSystem","../../../framework/extension/weak_net_game/UserInfo":"UserInfo","../../../framework/ui/mvcView":"mvcView","../../../framework/utils/ccUtil":"ccUtil","../Common/Base/LoadingScene":"LoadingScene","../Common/Base/PlayerInfo":"PlayerInfo","../Common/ChapterlInfo":"ChapterlInfo","../Common/Const":"Const","./UIConfirm":"UIConfirm"}],UICollection:[function(e,t,o){"use strict";cc._RF.push(t,"e15c4lULtJElJBzayTDrBtU","UICollection");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/ui/mvcView"),a=e("../Common/Base/PlayerInfo"),s=cc._decorator,l=s.ccclass,u=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_close=null,t.btn_sidebar=null,t}return i(t,e),t.prototype.onLoad=function(){var e=this;this.onClick(this.btn_close,function(){return e.click_close()}),this.onClick(this.btn_sidebar,function(){return e.click_sidebar()}),this.onClick(this.btn_claim,function(){return e.click_claim()}),this.onVisible(this.btn_claim,function(){return!a.PlayerInfo.isFavClaimed&&"claim"==e.type}),this.onVisible(this.btn_claim,function(){return"sidebar"==e.type})},t.prototype.onShow=function(e){this.type=e,this.render()},t.prototype.click_close=function(){vm.hide(this)},t.prototype.click_claim=function(){a.PlayerInfo.claimFav(),this.render()},t.prototype.click_sidebar=function(){tt.navigateToScene({scene:"sidebar",success:function(){console.log("navigate to scene success")},fail:function(e){console.log("navigate to scene fail: ",e)}})},r([u(cc.Node)],t.prototype,"btn_close",void 0),r([u(cc.Node)],t.prototype,"btn_claim",void 0),r([u(cc.Node)],t.prototype,"btn_sidebar",void 0),r([l],t)}(c.default);o.default=h,cc._RF.pop()},{"../../../framework/ui/mvcView":"mvcView","../Common/Base/PlayerInfo":"PlayerInfo"}],UIConfirm:[function(e,t,o){"use strict";cc._RF.push(t,"5d511lA/mZOVoM0CptHQELT","UIConfirm");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.ConfirmOption=void 0;var c,a=e("../../../framework/core/Signal"),s=e("../../../framework/ui/mvcView"),l=cc._decorator,u=l.ccclass,h=l.property;(function(e){e[e.Default=0]="Default",e[e.No=1]="No",e[e.Yes=2]="Yes"})(c=o.ConfirmOption||(o.ConfirmOption={}));var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelContent=null,t.btn_yes=null,t.btn_no=null,t.btn_close=null,t.onConfirm=new a.default,t.option=c.Default,t}return i(t,e),t.prototype.onLoad=function(){this.register(this.btn_yes,this.click_yes),this.register(this.btn_no,this.click_no),this.register(this.btn_close,this.click_close)},t.prototype.onShown=function(e,t,o){this.labelContent.string=e,this.onConfirm.on(t,o)},t.prototype.click_yes=function(){this.option=c.Yes,vm.hide(this)},t.prototype.click_no=function(){this.option=c.No,vm.hide(this)},t.prototype.click_close=function(){this.option=c.Default,vm.hide(this)},t.prototype.onHidden=function(){this.onConfirm.fire(this.option)},r([h(cc.Label)],t.prototype,"labelContent",void 0),r([h(cc.Button)],t.prototype,"btn_yes",void 0),r([h(cc.Button)],t.prototype,"btn_no",void 0),r([h(cc.Button)],t.prototype,"btn_close",void 0),r([u],t)}(s.default);o.default=f,cc._RF.pop()},{"../../../framework/core/Signal":"Signal","../../../framework/ui/mvcView":"mvcView"}],"UICustomer ":[function(e,t,o){"use strict";cc._RF.push(t,"c7c85YJUnNB5LL5Imt3zcGk","UICustomer ");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/ui/mvcView"),a=e("../../../framework/extension/wxsdk/sdk"),s=e("../../../framework/extension/weak_net_game/UserInfo"),l=cc._decorator,u=l.ccclass,h=l.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_close=null,t.isSuccess=!1,t}return i(t,e),t.prototype.onLoad=function(){var e=this;this.onClick(this.btn_close,function(){return e.click_close()})},t.prototype.onShow=function(e){this.callback=e,this.render()},t.prototype.click_close=function(){vm.hide(this)},t.prototype.click_customer=function(){var e=this;s.UserInfo.tmpIskf=!1,a.wxsdk.openCustomerServiceConversation(function(){s.UserInfo.tmpIskf=!0,vm.hide(e)},function(){})},r([h(cc.Node)],t.prototype,"btn_close",void 0),r([u],t)}(c.default);o.default=f,cc._RF.pop()},{"../../../framework/extension/weak_net_game/UserInfo":"UserInfo","../../../framework/extension/wxsdk/sdk":"sdk","../../../framework/ui/mvcView":"mvcView"}],UIDayInviteItem:[function(e,t,o){"use strict";cc._RF.push(t,"24aa7TdxfpLUoWUzV4/AQBt","UIDayInviteItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/ui/mvcView"),a=e("../../../framework/extension/Platform"),s=e("../../../framework/ui/controller/Switcher"),l=e("../../../framework/extension/weak_net_game/WeakNetGame"),u=e("../Common/Base/ServerConfig"),h=e("../../../framework/misc/Net"),f=e("../../../framework/ui/ToastManager"),p=e("./UIFriendHelp"),d=e("../Common/Base/PlayerInfo"),y=e("../../../framework/core/event"),v=cc._decorator,_=v.ccclass,m=v.property,g=[3,1,1],w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label_count=null,t.icon=null,t.tg_btn=null,t.index=0,t}return i(t,e),t.prototype.onLoad=function(){var e=this;this.register(this.tg_btn,function(){return null==e.data?0:0==e.data.status?1:2}),this.register(this.label_count,function(){return e.data&&e.data.count?"x"+e.data.count:g[e.index]}),this.register(this.icon,function(){return e.data?e.data.avatarUrl||"Img/rank/moren":"Img/all/empty"})},t.prototype.setData=function(e,t){this.index=t,this.render(e)},Object.defineProperty(t.prototype,"data",{get:function(){return this.getData()},enumerable:!1,configurable:!0}),t.prototype.click_invite=function(){a.default.share()},t.prototype.click_claim=function(){var e=this;l.default.client.httpGet(u.Api.invite_claim_day,{id:this.data._id}).then(function(t){if(t!=h.default.Code.Timeout)if(t){var o=JSON.parse(t);if(0==o.errno){var n=o.data.num||g[e.index],i=d.PlayerInfo.labour+n;d.PlayerInfo.labour=i,d.PlayerInfo.save("labour"),f.Toast.make("\u6210\u529f\u9886\u53d6"+n+"\u4e2a\u4f53\u529b"),e.data.status=1,e.render(e.data),y.evt.emit("Game.friendTili",p.default.day_invite,p.default.sum_invite)}else console.log(o.errno),f.Toast.make("\u9886\u53d6\u5931\u8d25:"+o.errno)}else f.Toast.make("\u670d\u52a1\u5668\u51fa\u9519!");else f.Toast.make("\u9886\u53d6\u8d85\u65f6!")})},r([m(cc.Label)],t.prototype,"label_count",void 0),r([m(cc.Sprite)],t.prototype,"icon",void 0),r([m(s.default)],t.prototype,"tg_btn",void 0),r([_],t)}(c.default);o.default=w,cc._RF.pop()},{"../../../framework/core/event":"event","../../../framework/extension/Platform":"Platform","../../../framework/extension/weak_net_game/WeakNetGame":"WeakNetGame","../../../framework/misc/Net":"Net","../../../framework/ui/ToastManager":"ToastManager","../../../framework/ui/controller/Switcher":"Switcher","../../../framework/ui/mvcView":"mvcView","../Common/Base/PlayerInfo":"PlayerInfo","../Common/Base/ServerConfig":"ServerConfig","./UIFriendHelp":"UIFriendHelp"}],UIDecorateItem:[function(e,t,o){"use strict";cc._RF.push(t,"2f693J3bUFBQbn7+A7Ga7gi","UIDecorateItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c,a=e("../../../framework/ui/mvcView"),s=e("../../../framework/ui/controller/Switcher"),l=e("../Common/Base/PlayerInfo"),u=e("../../../framework/core/event"),h=e("../../../framework/ui/ToastManager"),f=e("./UIPersonSkin"),p=cc._decorator,d=p.ccclass,y=p.property;(function(e){e[e.Choosed=0]="Choosed",e[e.Unlocked=1]="Unlocked",e[e.Locked=2]="Locked"})(c||(c={}));var v=(new cc.Color).fromHEX("#FFFBDA"),_=((new cc.Color).fromHEX("#504B68"),(new cc.Color).fromHEX("#82FF52")),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nameLabel=null,t.switcher=null,t.icon=null,t.btn_select=null,t.btn_unlock=null,t.btn_choosed=null,t.redPoint=null,t}return i(t,e),t.prototype.onLoad=function(){var e=this;this.register(this.switcher,function(t){if(e.node.color=cc.Color.WHITE,e.btn_unlock.node.color=cc.Color.WHITE,e.node.opacity=255,l.PlayerInfo.isDecorateUnlocked(t.id))return l.PlayerInfo.isDecorateUsing(t.id)?(e.node.color=v,c.Choosed):c.Unlocked;var o=e.canUnlock();return e.redPoint.active=o,o?(e.btn_unlock.interactable=!1,e.btn_unlock.node.color=_):e.node.opacity=222,c.Locked}),this.register(this.nameLabel,function(e){return e.name}),this.register(this.icon,function(e){return cc.log(""+e.thumbnail),e.thumbnail?"Img/decorate/thumbnail/"+e.thumbnail:""}),this.register(this.btn_unlock,this.click_unlock),this.register(this.btn_select,this.click_select),this.register(this.btn_choosed,this.click_choosed)},t.prototype.canUnlock=function(){return!1},t.prototype.unlock=function(){var e=this.getData();l.PlayerInfo.unlockDecorate(e.id),h.Toast.make("\u5df2\u89e3\u9501\uff1a"+e.name),this.render(e)},t.prototype.onvideocallback=function(){this.unlock()},t.prototype.click_unlock=function(){var e=this.getData();this.canUnlock()&&(l.PlayerInfo.unlockDecorate(e.id),h.Toast.make("\u5df2\u89e3\u9501\uff1a"+e.name),u.evt.emit("UISkin.checkLock"),this.render(e))},t.prototype.click_select=function(){var e=this.getData();l.PlayerInfo.isDecorateUnlocked(e.id)&&(l.PlayerInfo.useDecorate(e.id),u.evt.emit("Decorate.select",e))},t.prototype.click_choosed=function(){var e=this.getData();e.type===f.DecorateType.BaiJian&&(l.PlayerInfo.collections[e.id]=1,l.PlayerInfo.save(),u.evt.emit("Decorate.select",e))},r([y(cc.Label)],t.prototype,"nameLabel",void 0),r([y(s.default)],t.prototype,"switcher",void 0),r([y(cc.Sprite)],t.prototype,"icon",void 0),r([y(cc.Button)],t.prototype,"btn_select",void 0),r([y(cc.Button)],t.prototype,"btn_unlock",void 0),r([y(cc.Button)],t.prototype,"btn_choosed",void 0),r([y(cc.Node)],t.prototype,"redPoint",void 0),r([d],t)}(a.default);o.default=m,cc._RF.pop()},{"../../../framework/core/event":"event","../../../framework/ui/ToastManager":"ToastManager","../../../framework/ui/controller/Switcher":"Switcher","../../../framework/ui/mvcView":"mvcView","../Common/Base/PlayerInfo":"PlayerInfo","./UIPersonSkin":"UIPersonSkin"}],UIEgg:[function(e,t,o){"use strict";cc._RF.push(t,"79587TMbvtBvI5lnIp+UrOm","UIEgg");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c},c=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function c(e){try{s(n.next(e))}catch(t){r(t)}}function a(e){try{s(n.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,a)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return s([e,t])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../framework/ui/mvcView"),l=e("../../../framework/ui/ToastManager"),u=e("../../../framework/core/event"),h=e("../../../framework/extension/Platform"),f=e("../Common/Base/PlayerInfo"),p=e("../../../framework/misc/display"),d=cc._decorator,y=d.ccclass,v=d.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Bar=null,t.egg_ani=null,t.lizi=null,t.egg1=null,t.get_but=null,t.isbanner=!1,t.isshowed=!1,t.randomNum=0,t.view="",t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.onShow=function(e){u.evt.on("Game.Resume",this.onResume,this),this.egg_ani.on(cc.Animation.EventType.FINISHED,this.finsh,this),this.Bar.progress=0,this.view=e,this.isshowed=!1,this.randomNum=g.randomFloat(.4,.6),h.default.refreshBannerAd()},t.prototype.onResume=function(){h.default.hideBannerAd()},t.prototype.onDestroy=function(){},t.prototype.click_egg=function(){return c(this,void 0,void 0,function(){var e=this;return a(this,function(){return this.unschedule(this.reduce_propress),this.Bar.progress+=.1,this.Bar.progress>=this.randomNum&&!this.isshowed&&(this.isshowed=!0,this.egg1.y+=10,h.default.showBannerAd(),this.isbanner=!0,this.scheduleOnce(function(){cc.isValid(e)&&(e.isbanner=!1,h.default.hideBannerAd())},2)),this.Bar.progress>=1?(this.unscheduleAllCallbacks(),this.get_but.active=!1,l.Toast.make("\u606d\u559c\u83b7\u5f97\u4f53\u529b 1"),u.evt.emit("Game.getTili",p.default.center,1),f.PlayerInfo.labour+=1,this.egg_ani.play("egg2"),[2]):(this.schedule(this.reduce_propress,.1),[2])})})},t.prototype.reduce_propress=function(){this.isbanner||(this.Bar.progress-=.01,this.Bar.progress<=0&&(this.Bar.progress=0))},t.prototype.onHidden=function(){u.evt.off(this),this.egg_ani.off(cc.Animation.EventType.FINISHED,this.finsh,this),h.default.hideBannerAd(),this.isbanner=!1},t.prototype.finsh=function(){vm.hide(this),"win"==this.view?vm.show("Prefabs/UI/UIWin"):"lose"==this.view&&vm.show("Prefabs/UI/UILose")},r([v(cc.ProgressBar)],t.prototype,"Bar",void 0),r([v(cc.Animation)],t.prototype,"egg_ani",void 0),r([v(cc.ParticleSystem)],t.prototype,"lizi",void 0),r([v(cc.Node)],t.prototype,"egg1",void 0),r([v(cc.Node)],t.prototype,"get_but",void 0),r([y],t)}(s.default);o.default=_,cc._RF.pop()},{"../../../framework/core/event":"event","../../../framework/extension/Platform":"Platform","../../../framework/misc/display":"display","../../../framework/ui/ToastManager":"ToastManager","../../../framework/ui/mvcView":"mvcView","../Common/Base/PlayerInfo":"PlayerInfo"}],UIEnergeyPackage:[function(e,t,o){"use strict";cc._RF.push(t,"f2448CUAlJFk6s9frbtdrWA","UIEnergeyPackage");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/ui/mvcView"),a=e("../../../framework/extension/weak_net_game/IconSov"),s=e("../../../framework/extension/weak_net_game/WeakNetGame"),l=e("../Common/Base/PlayerInfo"),u=e("../../../framework/ui/ToastManager"),h=e("../../../framework/core/event"),f=e("../../../framework/misc/display"),p=e("../../../framework/extension/aldsdk/StatHelper"),d=e("../../../framework/extension/Platform"),y=cc._decorator,v=y.ccclass,_=y.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label_tips=null,t.label_energy=null,t.btn_claim=null,t.btn_double=null,t.btn_nothanks=null,t.btn_jia=null,t.sdk=null,t.youlike=null,t.successClaim=!1,t}return i(t,e),t.prototype.onLoad=function(){this.register(this.label_tips,function(){return"\u606d\u559c\u4f60\u83b7\u5f97"+csv.Config.EneryPackage_Count+"\u4f53\u529b\uff0c\u5feb\u6765\u9886\u53d6\u5427\uff01"}),this.register(this.label_energy,function(){return csv.Config.EneryPackage_Count}),this.register(this.btn_claim,this.click_claim),this.register(this.btn_double,this.click_double),this.register(this.btn_nothanks,this.click_cancel),this.registerSubViews(a.default)},t.prototype.start=function(){},t.prototype.onHidden=function(){h.evt.off(this)},t.prototype.onDestroy=function(){h.evt.off(this)},t.prototype.onResume=function(){d.default.reloadBannerAd()},t.prototype.onShown=function(){if(h.evt.on("Game.Resume",this.onResume,this),this.render(),this.successClaim=!1,window.qq||window.tt)return this.btn_nothanks.node.active=!0,this.btn_jia.active=!1,void d.default.showBannerAd();this.btn_nothanks.node.active=!0,this.btn_jia.active=!1},t.prototype.click_cancel=function(){vm.hide(this)},t.prototype.click_claim=function(){this.claim()},t.prototype.click_double=function(){s.default.doChoice("SOV_EneryPackage",this.onClaimDouble,this,function(){p.default.sendPath("\u9886\u53d6\u4f53\u529b\u5927\u793c\u5305","\u72b6\u6001","\u9886\u53d6\u5931\u8d25")})},t.prototype.checkEnergyFull=function(){return l.PlayerInfo.labour>=csv.Config.Max_Energy&&(u.Toast.make("\u4f53\u529b\u5df2\u6ee1!"),!0)},t.prototype.onClaimDouble=function(){this.claim(1)},t.prototype.claim=function(e){if(void 0===e&&(e=1),!this.successClaim){var t=e*csv.Config.EneryPackage_Count,o=l.PlayerInfo.labour,n=l.PlayerInfo.labour+t;l.PlayerInfo.labour=n,l.PlayerInfo.save("labour"),h.evt.emit("Game.getTili",f.default.center,l.PlayerInfo.labour-o),u.Toast.make("\u83b7\u5f97"+t+"\u70b9\u4f53\u529b"),this.successClaim=!0,p.default.sendPath("\u9886\u53d6\u4f53\u529b\u5927\u793c\u5305","\u72b6\u6001","\u9886\u53d6\u6210\u529f")}},r([_(cc.Label)],t.prototype,"label_tips",void 0),r([_(cc.Label)],t.prototype,"label_energy",void 0),r([_(cc.Button)],t.prototype,"btn_claim",void 0),r([_(cc.Button)],t.prototype,"btn_double",void 0),r([_(cc.Button)],t.prototype,"btn_nothanks",void 0),r([_(cc.Node)],t.prototype,"btn_jia",void 0),r([_(cc.Node)],t.prototype,"sdk",void 0),r([v],t)}(c.default);o.default=m,cc._RF.pop()},{"../../../framework/core/event":"event","../../../framework/extension/Platform":"Platform","../../../framework/extension/aldsdk/StatHelper":"StatHelper","../../../framework/extension/weak_net_game/IconSov":"IconSov","../../../framework/extension/weak_net_game/WeakNetGame":"WeakNetGame","../../../framework/misc/display":"display","../../../framework/ui/ToastManager":"ToastManager","../../../framework/ui/mvcView":"mvcView","../Common/Base/PlayerInfo":"PlayerInfo"}],UIForcedUpdata:[function(e,t,o){"use strict";cc._RF.push(t,"c4bf8utPgxD67UVIghBwuDe","UIForcedUpdata");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.ConfirmOption=void 0;var c,a=e("../../../framework/core/Signal"),s=e("../../../framework/ui/mvcView"),l=cc._decorator,u=l.ccclass,h=l.property;(function(e){e[e.Default=0]="Default",e[e.No=1]="No",e[e.Yes=2]="Yes"})(c=o.ConfirmOption||(o.ConfirmOption={}));var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelContent=null,t.btn_yes=null,t.btn_no=null,t.btn_close=null,t.onConfirm=new a.default,t.option=c.Default,t}return i(t,e),t.prototype.onLoad=function(){this.register(this.btn_yes,this.click_yes),this.register(this.btn_no,this.click_no),this.register(this.btn_close,this.click_close)},t.prototype.onShown=function(e,t,o){this.labelContent.string=e,this.onConfirm.on(t,o)},t.prototype.click_yes=function(){this.option=c.Yes,vm.hide(this)},t.prototype.click_no=function(){this.option=c.No,vm.hide(this)},t.prototype.click_close=function(){this.option=c.Default,vm.hide(this)},t.prototype.onHidden=function(){this.onConfirm.fire(this.option)},r([h(cc.Label)],t.prototype,"labelContent",void 0),r([h(cc.Button)],t.prototype,"btn_yes",void 0),r([h(cc.Button)],t.prototype,"btn_no",void 0),r([h(cc.Button)],t.prototype,"btn_close",void 0),r([u],t)}(s.default);o.default=f,cc._RF.pop()},{"../../../framework/core/Signal":"Signal","../../../framework/ui/mvcView":"mvcView"}],UIFreeGetLabour:[function(e,t,o){"use strict";cc._RF.push(t,"6f1e8XLN/BKobzVLgkNM77D","UIFreeGetLabour");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c,a=e("../../../framework/ui/mvcView"),s=e("../../../framework/ui/controller/Switcher"),l=e("../../../framework/extension/weak_net_game/UserInfo"),u=e("../../../framework/core/event"),h=cc._decorator,f=h.ccclass,p=h.property;(function(e){e[e.Red=0]="Red",e[e.Blue=1]="Blue"})(c||(c={}));var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_close=null,t.switcher_yaoqin=null,t.switcher_subscriber=null,t.switcher_kefu=null,t.switcher_shoucang=null,t}return i(t,e),t.prototype.onLoad=function(){this.registerSwitcher(this.switcher_yaoqin,function(){return 0}),this.registerSwitcher(this.switcher_subscriber,function(){return l.UserInfo.isDy?1:0}),this.registerSwitcher(this.switcher_kefu,function(){return l.UserInfo.isKf?1:0}),this.registerSwitcher(this.switcher_shoucang,function(){return l.UserInfo.isSc?1:0}),u.evt.on("View.onHidden",this.onViewHidden,this),u.evt.on("UserInfo.isKf",this.render,this),u.evt.on("UserInfo.isDy",this.render,this)},t.prototype.onShow=function(){this.render()},t.prototype.onViewHidden=function(e){"UIGetSuccess"==e.node.name&&this.render()},t.prototype.click_close=function(){vm.hide(this)},t.prototype.click_yaoqin=function(e,t){t==c.Red?vm.show("Prefabs/UI/UIFriendHelp"):t==c.Blue||console.log("\u6709\u95ee\u9898")},t.prototype.click_subscriber=function(e,t){var o=this;t==c.Red?vm.show("Prefabs/UI/UISubscriber",function(){return o.render()}):t==c.Blue?(this.render(),vm.show("Prefabs/UI/UIGetSuccess",csv.Config.Subscriber_Success)):console.log("\u6709\u95ee\u9898")},t.prototype.click_kefu=function(e,t){var o=this;t==c.Red?vm.show("Prefabs/UI/UICustomer",function(){return o.render()}):t==c.Blue?(l.UserInfo.isGetKf=!0,this.render(),vm.show("Prefabs/UI/UIGetSuccess",csv.Config.Customer_Success)):console.log("\u6709\u95ee\u9898")},t.prototype.click_shoucang=function(e,t){var o=this;t==c.Red?vm.show("Prefabs/UI/UICollection",function(){return o.render()}):t==c.Blue?vm.show("Prefabs/UI/UIGetSuccess",csv.Config.Collection_Success,function(){l.UserInfo.isGetSc=!0,o.render()}):console.log("\u6709\u95ee\u9898")},t.prototype.onDestroy=function(){u.evt.off(this)},r([p(cc.Node)],t.prototype,"btn_close",void 0),r([p(s.default)],t.prototype,"switcher_yaoqin",void 0),r([p(s.default)],t.prototype,"switcher_subscriber",void 0),r([p(s.default)],t.prototype,"switcher_kefu",void 0),r([p(s.default)],t.prototype,"switcher_shoucang",void 0),r([f],t)}(a.default);o.default=d,cc._RF.pop()},{"../../../framework/core/event":"event","../../../framework/extension/weak_net_game/UserInfo":"UserInfo","../../../framework/ui/controller/Switcher":"Switcher","../../../framework/ui/mvcView":"mvcView"}],UIFreeProp:[function(e,t,o){"use strict";cc._RF.push(t,"dc341fggZxGOb4PoTLDQlBi","UIFreeProp");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c},c=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function c(e){try{s(n.next(e))}catch(t){r(t)}}function a(e){try{s(n.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,a)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return s([e,t])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../framework/utils/ccUtil"),l=e("../../../framework/extension/weak_net_game/UserInfo"),u=cc._decorator,h=u.ccclass,f=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemLayout=null,t.dialog=null,t.particle=null,t.iconNode=null,t.btn_get=null,t.node_btn_close=null,t.res_names=["snowball_num","magnet_num","gun_num"],t}return i(t,e),t.prototype.onLoad=function(){this.node_btn_close.active=!1},t.prototype.onShown=function(e){var t=this;this.hideCallback=e;var o=this.itemLayout.position;this.dialog.active=!1,this.itemLayout.setPosition(0,0),this.itemLayout.scale=0,cc.tween(this.itemLayout).to(.5,{scale:1},{easing:"backInOut"}).delay(1).to(.5,{position:o},{easing:"sineInOut"}).call(function(){t.dialog.active=!0,t.dialog.scale=0,cc.tween(t.dialog).to(.5,{scale:1},{easing:"sineInOut"}).start()}).start()},t.prototype.click_get=function(){return c(this,void 0,void 0,function(){var e,t,o;return a(this,function(n){switch(n.label){case 0:this.btn_get.interactable=!1,e=this.itemLayout.children,t=0,n.label=1;case 1:return t<3?(o=e[t],[4,s.default.playFlyCoin(this.particle,o,s.default.getWorldPosition(this.iconNode),s.default.getWorldPosition(o),{num:1,dur:.8})]):[3,4];case 2:n.sent(),l.UserInfo.addData(this.res_names[t],3,!0),cc.tween(o).to(.2,{scale:1.3}).to(.1,{scale:1}).start(),n.label=3;case 3:return t++,[3,1];case 4:return this.node_btn_close.active=!0,[2]}})})},t.prototype.click_close=function(){vm.hide(this)},t.prototype.onHidden=function(){this.hideCallback&&this.hideCallback.call(this)},r([f(cc.Node)],t.prototype,"itemLayout",void 0),r([f(cc.Node)],t.prototype,"dialog",void 0),r([f(cc.Node)],t.prototype,"particle",void 0),r([f(cc.Node)],t.prototype,"iconNode",void 0),r([f(cc.Button)],t.prototype,"btn_get",void 0),r([f(cc.Node)],t.prototype,"node_btn_close",void 0),r([h],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../framework/extension/weak_net_game/UserInfo":"UserInfo","../../../framework/utils/ccUtil":"ccUtil"}],UIFriendHelpItem:[function(e,t,o){"use strict";cc._RF.push(t,"aae0boKDwBKsJJzzN3Z90y0","UIFriendHelpItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/ui/mvcView"),a=e("../../../framework/misc/Net"),s=e("../Common/Base/ServerConfig"),l=e("../../../framework/ui/ToastManager"),u=e("../Common/Base/PlayerInfo"),h=e("./UIFriendHelp"),f=e("../../../framework/ui/controller/Switcher"),p=e("../../../framework/extension/weak_net_game/WeakNetGame"),d=e("../../../framework/extension/Platform"),y=e("../../../framework/core/event"),v=cc._decorator,_=v.ccclass,m=v.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_claim=null,t.btn_invite=null,t.label_text=null,t.label_c=null,t.tg_status=null,t}return i(t,e),t.prototype.onLoad=function(){this.register(this.btn_claim,this.click_claim),this.register(this.btn_invite,this.click_share)},t.prototype.start=function(){},t.prototype.setData=function(e,t){this.label_text.string="\u7b2c"+(t+1)+"\u4f4d\u65b0\u597d\u53cb",this.label_c.string="x2",t>=e.claimedCount&&t<e.inviteeCount?this.tg_status.index=1:t<e.claimedCount?this.tg_status.index=2:this.tg_status.index=0},t.prototype.click_share=function(){d.default.share()},t.prototype.click_claim=function(){var e=this;p.default.client.httpGet(s.Api.invite_claim_new).then(function(t){if(t==a.default.Code.Timeout)l.Toast.make("\u9886\u53d6\u8d85\u65f6!");else if(t){var o=JSON.parse(t),n=o.data;if(0!=o.errno)l.Toast.make("\u9886\u53d6\u5931\u8d25:"+o.errno);else{var i=n.num||2;u.PlayerInfo.addLabour(i),l.Toast.make("\u6210\u529f\u9886\u53d6"+i+"\u4e2a\u4f53\u529b"),e.tg_status.index=2,h.default.sum_invite.claimedCount++,y.evt.emit("Game.friendTili",h.default.day_invite,h.default.sum_invite)}}else l.Toast.make("\u670d\u52a1\u5668\u51fa\u9519!")})},r([m(cc.Button)],t.prototype,"btn_claim",void 0),r([m(cc.Button)],t.prototype,"btn_invite",void 0),r([m(cc.Label)],t.prototype,"label_text",void 0),r([m(cc.Label)],t.prototype,"label_c",void 0),r([m(f.default)],t.prototype,"tg_status",void 0),r([_],t)}(c.default);o.default=g,cc._RF.pop()},{"../../../framework/core/event":"event","../../../framework/extension/Platform":"Platform","../../../framework/extension/weak_net_game/WeakNetGame":"WeakNetGame","../../../framework/misc/Net":"Net","../../../framework/ui/ToastManager":"ToastManager","../../../framework/ui/controller/Switcher":"Switcher","../../../framework/ui/mvcView":"mvcView","../Common/Base/PlayerInfo":"PlayerInfo","../Common/Base/ServerConfig":"ServerConfig","./UIFriendHelp":"UIFriendHelp"}],UIFriendHelp:[function(e,t,o){"use strict";cc._RF.push(t,"9549byzl1pK745kPIjVkTVK","UIFriendHelp");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/misc/Net"),a=e("../Common/Base/ServerConfig"),s=e("../../../framework/ui/mvcView"),l=e("../../../framework/ui/controller/ListView"),u=e("./UIFriendHelpItem"),h=e("../../../framework/extension/weak_net_game/WeakNetGame"),f=e("./UIDayInviteItem"),p=e("../../../framework/ui/ToastManager"),d=cc._decorator,y=d.ccclass,v=d.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.layout=null,t.listview=null,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){this.register(this.layout,function(){return o.day_invite},this.setItem.bind(this))},t.prototype.start=function(){this.listview.numItems=0},t.prototype.setItem=function(e,t,o){e.getComponent(f.default).setData(t,o)},t.prototype.onShown=function(){var e=this;h.default.client.httpGet(a.Api.invite_get).then(function(t){if(t==c.default.Code.Timeout)p.Toast.make("\u9080\u8bf7\u4fe1\u606f\u8bfb\u53d6\u5931\u8d25!");else if(t){var o=JSON.parse(t);console.log(o),e.onRequested(o.data)}else p.Toast.make("\u670d\u52a1\u5668\u51fa\u9519!")})},t.prototype.onRequested=function(e){o.day_invite.splice(0);for(var t=0;t<3;t++){var n=e.day_invite[t];o.day_invite.push(n)}o.sum_invite=e.sum_invite,null==o.sum_invite.claimedCount&&(o.sum_invite.claimedCount=0),this.render(e.day_items),this.listview.numItems=100},t.prototype.onRender=function(e,t){e.getComponent(u.default).setData(o.sum_invite,t)},t.prototype.click_close=function(){vm.hide(this)},t.sum_invite=null,t.day_invite=[],r([v(cc.Layout)],t.prototype,"layout",void 0),r([v(l.default)],t.prototype,"listview",void 0),o=r([y],t)}(s.default);o.default=_,cc._RF.pop()},{"../../../framework/extension/weak_net_game/WeakNetGame":"WeakNetGame","../../../framework/misc/Net":"Net","../../../framework/ui/ToastManager":"ToastManager","../../../framework/ui/controller/ListView":"ListView","../../../framework/ui/mvcView":"mvcView","../Common/Base/ServerConfig":"ServerConfig","./UIDayInviteItem":"UIDayInviteItem","./UIFriendHelpItem":"UIFriendHelpItem"}],UIFunctions:[function(e,t,o){"use strict";cc._RF.push(t,"10205trRZVOELcrvc3TW2mW","UIFunctions"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.getChildrenAnimations=function(e){var t=[];(n=e.getComponent(cc.Animation))&&t.push(n);for(var o=0;o<e.childrenCount;o++){var n;(n=e.children[o].getComponent(cc.Animation))&&t.push(n)}return t},e.stopAnimations=function(e){e.forEach(function(e){e.stop()})},e.doShowAnimations=function(e,t,o){var n,i=0;if(e.forEach(function(e){var t=e.getClips();if(t.length>0){var o=t[0];e.play(o.name).wrapMode=cc.WrapMode.Normal,o.duration>i&&(i=o.duration,n=e)}}),t){var r=function(){n&&n.off("finished",r),t.call(o)};n?n.on("finished",r):t.call(o)}},e.isAnimationRunning=function(){return!1},e.doHideAnimations=function(e,t,o){var n,i=!1,r=0;if(e.forEach(function(e){var t=e.getClips();if(2==t.length){var o=t[t.length-1];i=!0,e.play(o.name),o.duration>r&&(r=o.duration,n=e)}else 1==t.length&&(o=t[0],i=!0,e.play(o.name).wrapMode=cc.WrapMode.Reverse,o.duration>r&&(r=o.duration,n=e))}),n&&t){var c=function(){n.off("finished",c),t.call(o)};n.on("finished",c)}return i},e.getToggleIndex=function(e){for(var t=e.node.getParent(),o=0;o<t.childrenCount;o++){var n=t.children[o];if(e.node==n)return o}return-1},e.selectToggleIndex=function(e,t){if(null!=e){var o=e.children[t];if(o){var n=o.getComponent(cc.Toggle);n&&(console.log("[UIFunction.selectToggleIndex] :"+t),n.check())}else console.warn("[UIFunction.selectToggleIndex] :cannot find toggle with index:"+t)}else console.warn("[UIFunction.selectToggleIndex] : invalid toggleContainer :")},e.setTouchEnabled=function(e,t){g.foreachNode(e,function(e){var o=e.getComponent(cc.Button);o&&(console.log("[UIFunction] "+e.name+" touch : "+t),o.interactable=t)})},e}();o.default=n,cc._RF.pop()},{}],UIGetGift:[function(e,t,o){"use strict";cc._RF.push(t,"f1b12WMwzFI2JdyDYdFUmT8","UIGetGift");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../Common/Base/PlayerInfo"),a=e("../../../framework/ui/ToastManager"),s=e("../../../framework/ui/mvcView"),l=e("../../../framework/utils/actionUtil"),u=cc._decorator,h=u.ccclass,f=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.num_label=null,t._num=0,t._reward=0,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.onShown=function(e){l.default.jellyJump2(this.node);var t=csv.star.get(e+12);if(this.num_label.string="\u606d\u559c\u4f60\u83b7\u5f97"+t.reward+"\u9897\u661f\u661f",-1!=c.PlayerInfo.challenge_gift.indexOf(e))return a.Toast.make("\u5df2\u9886\u53d6\u8fc7\u8be5\u793c\u5305"),void vm.hide(this);this._num=e,this._reward=t.reward},t.prototype.click_close=function(){c.PlayerInfo.challenge_gift.push(this._num),c.PlayerInfo.star+=this._reward,c.PlayerInfo.save(),vm.hide(this)},r([f(cc.Label)],t.prototype,"num_label",void 0),r([h],t)}(s.default);o.default=p,cc._RF.pop()},{"../../../framework/ui/ToastManager":"ToastManager","../../../framework/ui/mvcView":"mvcView","../../../framework/utils/actionUtil":"actionUtil","../Common/Base/PlayerInfo":"PlayerInfo"}],UIGetGun:[function(e,t,o){"use strict";cc._RF.push(t,"d0185xh9BdOkbkHRPDQvft4","UIGetGun");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/ui/ToastManager"),a=e("../../../framework/extension/weak_net_game/UserInfo"),s=e("../../../framework/ui/mvcView"),l=e("../../../framework/extension/weak_net_game/IconSov"),u=e("../../../framework/extension/weak_net_game/WeakNetGame"),h=e("../Common/PropInfo"),f=e("../../../framework/utils/ccUtil"),p=cc._decorator,d=p.ccclass,y=p.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.label_name=null,t.label_desc=null,t.scene_label="",t.data=null,t.propList={1:"gun_num",2:"snowball_num",3:"magnet_num"},t}return i(t,e),t.prototype.onLoad=function(){var e=this;this.registerSubViews(l.default),this.register(this.label_name,function(){return e.data.name}),this.register(this.icon,function(){return e.data.icon}),this.register(this.label_desc,function(){return e.data.desc})},t.prototype.onShown=function(e,t){this.callback=e,this.scene_label=t,a.UserInfo.gunView++,a.UserInfo.save("gunView"),a.UserInfo.gunViewDay++,a.UserInfo.save("gunViewDay");var o=g.randomInt(1,4);this.data=f.default.get(h.PropInfo,o),this.render()},t.prototype.click_close=function(){vm.hide(this)},t.prototype.click_getGun=function(){var e=this;u.default.doChoice("Start_Get_Gun",function(){a.UserInfo[e.propList[e.data.id]]+=1,a.UserInfo[e.scene_label]=!0,a.UserInfo.save(),c.Toast.make("\u5df2\u9886\u53d6"+e.data.name),vm.hide(e)},this)},t.prototype.onHidden=function(){this.callback&&this.callback()},r([y(cc.Sprite)],t.prototype,"icon",void 0),r([y(cc.Label)],t.prototype,"label_name",void 0),r([y(cc.Label)],t.prototype,"label_desc",void 0),r([d],t)}(s.default);o.default=v,cc._RF.pop()},{"../../../framework/extension/weak_net_game/IconSov":"IconSov","../../../framework/extension/weak_net_game/UserInfo":"UserInfo","../../../framework/extension/weak_net_game/WeakNetGame":"WeakNetGame","../../../framework/ui/ToastManager":"ToastManager","../../../framework/ui/mvcView":"mvcView","../../../framework/utils/ccUtil":"ccUtil","../Common/PropInfo":"PropInfo"}],UIGetLabour:[function(e,t,o){"use strict";cc._RF.push(t,"cc5f94l4m1LpIYa8UIX4oXW","UIGetLabour");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/ui/mvcView"),a=e("../Common/Base/PlayerInfo"),s=e("../../../framework/core/event"),l=e("../../../framework/extension/weak_net_game/WeakNetGame"),u=e("../../../framework/ui/ToastManager"),h=e("../../../framework/misc/display"),f=e("../../../framework/extension/qq/qqsdk"),p=e("../../../framework/extension/weak_net_game/IconSov"),d=e("../../../framework/extension/Platform"),y=e("../../../framework/extension/aldsdk/umeng"),v=cc._decorator,_=v.ccclass,m=v.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_moregame=null,t.sdk=null,t.btn_nothanks=null,t.btn_ok=null,t.btn_jia=null,t.isVideo=!1,t.youlike=null,t.isActive=!0,t}return i(t,e),t.prototype.onLoad=function(){this.btn_moregame.active=!!window.qq,this.registerSubViews(p.default)},t.prototype.onDestroy=function(){s.evt.off(this)},t.prototype.onResume=function(){d.default.reloadBannerAd()},t.prototype.onShow=function(e,t){void 0===t&&(t=!1),s.evt.on("Game.Resume",this.onResume,this),this.callback=e,this.isActive=t,this.isVideo=!1,this.render(),this.btn_nothanks.node.active=!0,this.btn_jia.active=!1},t.prototype.start=function(){},t.prototype.click_close=function(){vm.hide(this)},t.prototype.click_get=function(){var e=this;a.PlayerInfo.labour>=csv.Config.Max_Energy&&this.isActive?u.Toast.make("\u4f53\u529b\u5df2\u6ee1\uff0c\u5feb\u53bb\u5e2e\u5e2e\u5c0f\u59d0\u59d0\u5427"):(this.btn_ok.interactable=!1,this.scheduleOnce(function(){return e.btn_ok.interactable=!0},3),y.umeng.onEvent("rewardAd","labourShow"),l.default.doChoice("SOV_Get_Labour",function(){console.log("\u5956\u52b1\u4f53\u529b");var t=csv.Config.Energy_Get_Num,o=a.PlayerInfo.labour,n=a.PlayerInfo.labour+t;a.PlayerInfo.labour=n,a.PlayerInfo.save("labour"),y.umeng.onEvent("rewardAd","labourRewarded"),s.evt.emit("Game.getTili",h.default.center,a.PlayerInfo.labour-o),u.Toast.make("\u83b7\u5f97"+t+"\u70b9\u4f53\u529b"),e.isVideo=!0,vm.hide(e)},this))},t.prototype.onHidden=function(){this.isVideo&&this.callback&&this.callback(),s.evt.off(this)},t.prototype.click_moregame=function(){f.qqsdk.showAppBox()},r([m(cc.Node)],t.prototype,"btn_moregame",void 0),r([m(cc.Node)],t.prototype,"sdk",void 0),r([m(cc.Button)],t.prototype,"btn_nothanks",void 0),r([m(cc.Button)],t.prototype,"btn_ok",void 0),r([m(cc.Node)],t.prototype,"btn_jia",void 0),r([_],t)}(c.default);o.default=g,cc._RF.pop()},{"../../../framework/core/event":"event","../../../framework/extension/Platform":"Platform","../../../framework/extension/aldsdk/umeng":"umeng","../../../framework/extension/qq/qqsdk":"qqsdk","../../../framework/extension/weak_net_game/IconSov":"IconSov","../../../framework/extension/weak_net_game/WeakNetGame":"WeakNetGame","../../../framework/misc/display":"display","../../../framework/ui/ToastManager":"ToastManager","../../../framework/ui/mvcView":"mvcView","../Common/Base/PlayerInfo":"PlayerInfo"}],UIGetLuckyItem:[function(e,t,o){"use strict";cc._RF.push(t,"c72aejnUD1OCJFpwwrfl/bT","UIGetLuckyItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/ui/mvcView"),a=e("../../../framework/utils/ccUtil"),s=cc._decorator,l=s.ccclass,u=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tiliLabel=null,t.icon=null,t}return i(t,e),t.prototype.onLaterRender=function(){var e=this.getData();this.tiliLabel.string=e.content+"x"+e.num,a.default.setDisplay(this.icon,e.path)},r([u(cc.Label)],t.prototype,"tiliLabel",void 0),r([u(cc.Sprite)],t.prototype,"icon",void 0),r([l],t)}(c.default);o.default=h,cc._RF.pop()},{"../../../framework/ui/mvcView":"mvcView","../../../framework/utils/ccUtil":"ccUtil"}],UIGetLucky:[function(e,t,o){"use strict";cc._RF.push(t,"9c877jPKqBOSorMM6RQ8Ese","UIGetLucky");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/ui/mvcView"),a=e("../../../framework/core/Signal"),s=e("../../../framework/utils/ccUtil"),l=e("../Common/TurntableInfo"),u=e("../Common/Base/PlayerInfo"),h=e("./UILucky"),f=e("../../../framework/core/event"),p=e("../../../framework/misc/display"),d=cc._decorator,y=d.ccclass,v=d.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.node_close=null,t.layout=null,t.item_id=0,t._closeSignal=new a.default,t.datas=[],t}return i(t,e),t.prototype.onLoad=function(){var e=this;this.register(this.layout,function(){return e.datas})},t.prototype.onShown=function(e,t){var o=this;this._closeSignal.on(t,this),this.item_id=e,this.datas.splice(0);var n=s.default.get(l.TurntableInfo,e);n.type===h.DrawType.Gift?csv.turntable.values.filter(function(e){return h.DrawType.Gun===e.type||h.DrawType.Frozen===e.type||h.DrawType.Magnet===e.type}).forEach(function(e){var t=s.default.get(l.TurntableInfo,e.id);t.num=1,o.datas.push(t)}):this.datas.push(n),this.render()},t.prototype.click_no=function(){var e=s.default.get(l.TurntableInfo,this.item_id);vm.hide(this),1!==this.item_id&&3!==this.item_id||(u.PlayerInfo.addLabour(e.num),f.evt.emit("Game.getTili",p.default.center,e.num))},t.prototype.onHidden=function(){var e=this,t=s.default.get(l.TurntableInfo,this.item_id);1!==this.item_id&&3!==this.item_id?this._closeSignal.fire(t):this.scheduleOnce(function(){return e._closeSignal.fire(t)},1)},r([v(cc.Node)],t.prototype,"node_close",void 0),r([v(cc.Layout)],t.prototype,"layout",void 0),r([y],t)}(c.default);o.default=_,cc._RF.pop()},{"../../../framework/core/Signal":"Signal","../../../framework/core/event":"event","../../../framework/misc/display":"display","../../../framework/ui/mvcView":"mvcView","../../../framework/utils/ccUtil":"ccUtil","../Common/Base/PlayerInfo":"PlayerInfo","../Common/TurntableInfo":"TurntableInfo","./UILucky":"UILucky"}],UIGetPersent:[function(e,t,o){"use strict";cc._RF.push(t,"d19e0BatXFBtaE40FCr2Tnn","UIGetPersent");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/ui/mvcView"),a=e("../Common/Base/PlayerInfo"),s=e("../../../framework/core/event"),l=e("../../../framework/misc/display"),u=cc._decorator,h=u.ccclass,f=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isclick=!1,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.onShow=function(){this.isclick=!1},t.prototype.click_get=function(){this.isclick||(this.isclick=!0,a.PlayerInfo.labour+=3,s.evt.emit("Game.getTili",l.default.center,3),vm.hide(this))},r([h],t)}(c.default));o.default=f,cc._RF.pop()},{"../../../framework/core/event":"event","../../../framework/misc/display":"display","../../../framework/ui/mvcView":"mvcView","../Common/Base/PlayerInfo":"PlayerInfo"}],UIGetProp:[function(e,t,o){"use strict";cc._RF.push(t,"5faf3qgeh5N+J+UZZigl45H","UIGetProp");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/ui/mvcView"),a=e("../Common/PropInfo"),s=e("../../../framework/utils/ccUtil"),l=e("../Common/Const"),u=e("../../../framework/utils/actionUtil"),h=cc._decorator,f=h.ccclass,p=h.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.propsData=[],t}return i(t,e),t.prototype.onLoad=function(){var e=this;this.register(this.layout,function(){return e.propsData}),this.propsData=csv.Prop.values.map(function(e){var t=s.default.get(a.PropInfo,e.id);if(t.id<=l.default.Chapter_Unlock+1)return t}),this.render()},t.prototype.onShow=function(){u.default.jellyJump2(this.node)},t.prototype.click_close=function(){vm.hide(this)},t.prototype.onHidden=function(){},r([p(cc.Layout)],t.prototype,"layout",void 0),r([p(cc.Sprite)],t.prototype,"title_sprite",void 0),r([f],t)}(c.default);o.default=d,cc._RF.pop()},{"../../../framework/ui/mvcView":"mvcView","../../../framework/utils/actionUtil":"actionUtil","../../../framework/utils/ccUtil":"ccUtil","../Common/Const":"Const","../Common/PropInfo":"PropInfo"}],UIGetSuccesss:[function(e,t,o){"use strict";cc._RF.push(t,"b9582VfxLRPR61EjSxKxBgp","UIGetSuccesss");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/ui/mvcView"),a=e("../../../framework/core/event"),s=e("../../../framework/misc/display"),l=e("../Common/Base/PlayerInfo"),u=cc._decorator,h=u.ccclass,f=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_close=null,t.label_num=null,t}return i(t,e),t.prototype.onLoad=function(){var e=this;this.onClick(this.btn_close,function(){return e.click_close()})},t.prototype.onShow=function(e){this.label_num.string=e.toString(),!isNaN(e)&&e>0&&(l.PlayerInfo.labour+=e,l.PlayerInfo.save("labour"),a.evt.emit("Game.getTili",s.default.center,e))},t.prototype.click_close=function(){vm.hide(this)},t.prototype.onHidden=function(){},r([f(cc.Node)],t.prototype,"btn_close",void 0),r([f(cc.Label)],t.prototype,"label_num",void 0),r([h],t)}(c.default);o.default=p,cc._RF.pop()},{"../../../framework/core/event":"event","../../../framework/misc/display":"display","../../../framework/ui/mvcView":"mvcView","../Common/Base/PlayerInfo":"PlayerInfo"}],UIGunShow:[function(e,t,o){"use strict";cc._RF.push(t,"f0dcevptxhLMZVSzE59V/OO","UIGunShow");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c},c=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function c(e){try{s(n.next(e))}catch(t){r(t)}}function a(e){try{s(n.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,a)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return s([e,t])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../Levels/Thunder"),l=e("../../../framework/core/event"),u=e("../../../framework/ui/mvcView"),h=e("../../../framework/extension/weak_net_game/IconSov"),f=e("../../../framework/ui/controller/Switcher"),p=e("../Main"),d=cc._decorator,y=d.ccclass,v=d.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skeleton_girl=null,t.skeleton_man=null,t}return i(t,e),t.prototype.onLoad=function(){var e=this;this.registerSubViews(h.default),this.registerSwitcher(this.switch,function(){return e.showBtn()})},t.prototype.showBtn=function(){},t.prototype.onShown=function(){this.playAnim(),this.schedule(this.playAnim,1.5),this.render()},t.prototype.playAnim=function(){return c(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return this.skeleton_man.playAnimation("idle",0),this.skeleton_girl.playAnimation("gun_out",1),[4,l.evt.sleep(.5)];case 1:return e.sent(),this.skeleton_girl.playAnimation("gun",1),this.thunder.node.active=!0,this.thunder.play(this.skeleton_girl.node,this.skeleton_man.node,cc.v3(30,80,0)),this.skeleton_man.playAnimation("dead_smoke",1),[4,l.evt.sleep(.5)];case 2:return e.sent(),this.thunder.node.active=!1,[2]}})})},t.prototype.click_close=function(){vm.hide(this)},t.prototype.click_getGun=function(){},t.prototype.click_goto=function(){vm.hide(this),p.default.instance.click_play()},t.prototype.onHidden=function(){this.thunder.node.active=!1,this.unschedule(this.playAnim)},r([v(s.default)],t.prototype,"thunder",void 0),r([v(dragonBones.ArmatureDisplay)],t.prototype,"skeleton_girl",void 0),r([v(dragonBones.ArmatureDisplay)],t.prototype,"skeleton_man",void 0),r([v(cc.Node)],t.prototype,"tips",void 0),r([v(cc.Node)],t.prototype,"btn",void 0),r([v(f.default)],t.prototype,"switch",void 0),r([y],t)}(u.default);o.default=_,cc._RF.pop()},{"../../../framework/core/event":"event","../../../framework/extension/weak_net_game/IconSov":"IconSov","../../../framework/ui/controller/Switcher":"Switcher","../../../framework/ui/mvcView":"mvcView","../Levels/Thunder":"Thunder","../Main":"Main"}],UILevelItem:[function(e,t,o){"use strict";cc._RF.push(t,"4032fjUf9lFooZXP/BDN2G4","UILevelItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/ui/mvcView"),a=e("../Common/Base/PlayerInfo"),s=e("../../../framework/ui/ToastManager"),l=e("../Common/Base/LoadingScene"),u=e("../Common/LevelInfo"),h=e("../../../framework/utils/ccUtil"),f=e("../Common/DailyLevelInfo"),p=e("../../../framework/extension/weak_net_game/WeakNetGame"),d=e("../../../framework/extension/Platform"),y=cc._decorator,v=y.ccclass,_=y.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dangqian=null,t.level=null,t.lock=null,t.jiaobiao=null,t.lv=0,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.showjiaobiao=function(){var e=this.getData();if(a.PlayerInfo.isPlayingDaily){var t=h.default.get(f.DailyLevelInfo,e.id);return!(e.id<=a.PlayerInfo.dailylevel||!a.PlayerInfo.isNewLevel(t.day))}var o=h.default.get(u.LevelInfo,e.id);return!(e.id<=a.PlayerInfo.level||!o.isNew)},t.prototype.start=function(){var e=this;this.lv=a.PlayerInfo.getCurrentLevel();var t=this.getData();this.level.string=t.id.toString(),t.id==this.lv&&(this.dangqian.active=!0),t.id<=this.lv&&(this.lock.active=!1),this.onVisible(this.jiaobiao,function(){return e.showjiaobiao()}),this.render()},t.prototype.click_startGame=function(){var e=this.getData();this.lv<e.id?s.Toast.make("\u672a\u89e3\u9501"):a.PlayerInfo.labour>0?(a.PlayerInfo.labour--,a.PlayerInfo.isPlayingDaily?(a.PlayerInfo.playingDailyLevel=e.id,csv.Config.Challenge_Level_Show_AD==a.PlayerInfo.playingDailyLevel||(a.PlayerInfo.playingDailyLevel-csv.Config.Challenge_Level_Show_AD)%csv.Config.Challenge_Level_Show_AD_Interval==0&&a.PlayerInfo.playingDailyLevel>csv.Config.Challenge_Level_Show_AD?p.default.doChoice("SOV_ShowAD",function(){a.PlayerInfo.save(),l.default.goto("Game")},this):csv.Config.Challenge_Level_Show_AD_Skip==a.PlayerInfo.playingDailyLevel||(a.PlayerInfo.playingDailyLevel-csv.Config.Challenge_Level_Show_AD_Skip)%csv.Config.Challenge_Level_Show_AD_Skip_Interval==0&&a.PlayerInfo.playingDailyLevel>csv.Config.Challenge_Level_Show_AD_Skip?d.default.showInterstitial(function(){a.PlayerInfo.save(),l.default.goto("Game")},this):(a.PlayerInfo.save(),l.default.goto("Game"))):(a.PlayerInfo.playinglevel=e.id,a.PlayerInfo.save(),l.default.goto("Game"))):vm.show("Prefabs/UI/UIGetLabour",function(){a.PlayerInfo.labour--,a.PlayerInfo.isPlayingDaily?a.PlayerInfo.playingDailyLevel=e.id:a.PlayerInfo.playinglevel=e.id,a.PlayerInfo.save(),l.default.goto("Game")},!1)},r([_(cc.Node)],t.prototype,"dangqian",void 0),r([_(cc.Label)],t.prototype,"level",void 0),r([_(cc.Node)],t.prototype,"lock",void 0),r([_(cc.Node)],t.prototype,"jiaobiao",void 0),r([v],t)}(c.default);o.default=m,cc._RF.pop()},{"../../../framework/extension/Platform":"Platform","../../../framework/extension/weak_net_game/WeakNetGame":"WeakNetGame","../../../framework/ui/ToastManager":"ToastManager","../../../framework/ui/mvcView":"mvcView","../../../framework/utils/ccUtil":"ccUtil","../Common/Base/LoadingScene":"LoadingScene","../Common/Base/PlayerInfo":"PlayerInfo","../Common/DailyLevelInfo":"DailyLevelInfo","../Common/LevelInfo":"LevelInfo"}],UILevel:[function(e,t,o){"use strict";cc._RF.push(t,"ac17aoDmSBFApIPkIySQQCb","UILevel");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/ui/mvcView"),a=e("../Common/LevelInfo"),s=e("../../../framework/utils/ccUtil"),l=e("../Common/DailyLevelInfo"),u=e("../Common/Base/PlayerInfo"),h=e("../Common/ChapterlInfo"),f=e("../Common/Const"),p=cc._decorator,d=p.ccclass,y=p.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.layout=null,t.title=null,t.last_btn=null,t.next_btn=null,t.datas=[],t.id=0,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.onShow=function(e){var t=this;if(u.PlayerInfo.isPlayingDaily){var o=[];csv.daily_level.values.map(function(e){if(u.PlayerInfo.isGreaterDate(e.day)){var t=s.default.get(l.DailyLevelInfo,e.id);o.push(t)}}),this.register(this.layout,function(){return o}),this.title.string="\u5173\u5361\u6311\u6218",this.last_btn.node.active=!1,this.next_btn.node.active=!1}else this.datas=[],this.id=e,csv.level.values.map(function(o){var n=s.default.get(a.LevelInfo,o.id);n.chapter==e&&t.datas.push(n)}),this.register(this.layout,function(){return t.datas}),this.title.string=s.default.get(h.ChapterlInfo,e).name,console.log(Math.ceil(u.PlayerInfo.level/10),e),1==e?(this.next_btn.interactable=!0,this.last_btn.node.active=!1):e==f.default.Chapter_Unlock||e>=Math.ceil(u.PlayerInfo.level/10)?(this.last_btn.node.active=!0,this.next_btn.interactable=!1):(this.last_btn.node.active=!0,this.next_btn.interactable=!0);this.render()},t.prototype.start=function(){},t.prototype.clic_close=function(){vm.hide(this)},t.prototype.click_last=function(){this.id-=1,vm.show("Prefabs/UI/UILevel",this.id)},t.prototype.click_next=function(){this.id+=1,vm.show("Prefabs/UI/UILevel",this.id)},r([y(cc.Layout)],t.prototype,"layout",void 0),r([y(cc.Label)],t.prototype,"title",void 0),r([y(cc.Button)],t.prototype,"last_btn",void 0),r([y(cc.Button)],t.prototype,"next_btn",void 0),r([d],t)}(c.default);o.default=v,cc._RF.pop()},{"../../../framework/ui/mvcView":"mvcView","../../../framework/utils/ccUtil":"ccUtil","../Common/Base/PlayerInfo":"PlayerInfo","../Common/ChapterlInfo":"ChapterlInfo","../Common/Const":"Const","../Common/DailyLevelInfo":"DailyLevelInfo","../Common/LevelInfo":"LevelInfo"}],UILose:[function(e,t,o){"use strict";cc._RF.push(t,"9c025w6RKxIqZwav5hBusoc","UILose");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c},c=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function c(e){try{s(n.next(e))}catch(t){r(t)}}function a(e){try{s(n.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,a)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return s([e,t])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../framework/ui/mvcView"),l=e("../Common/Base/LoadingScene"),u=e("../../../framework/misc/Device"),h=e("../Common/Base/PlayerInfo"),f=e("../../../framework/ui/ToastManager"),p=e("../Game"),d=e("../sdk/wegame"),y=e("../Common/CloudFuncTypes"),v=e("../../../framework/extension/qq/qqsdk"),_=e("../../../framework/extension/Platform"),m=e("../../../framework/extension/weak_net_game/UserInfo"),g=e("../../../framework/extension/ttsdk/ttsdk"),w=e("../../../framework/core/event"),b=e("../../../framework/extension/weak_net_game/WeakNetGame"),k=e("../Common/Unity"),S=e("../../../framework/misc/display"),C=e("../../../framework/extension/aldsdk/umeng"),I=cc._decorator,P=I.ccclass,O=I.property,x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sdk=null,t.setting=null,t.btn_get=null,t.rank=null,t.share_video=null,t.level_label=null,t.youlike=null,t.isGetLabour=!1,t.drawer=null,t.dialogToShow=null,t}return i(t,e),t.prototype.onLoad=function(){var e=this;this.register(this.share_video,function(){return k.default.iconSOV(b.default.getChoice("SOV_Lose_Get"))}),this.register(this.level_label,function(){return e.showLevelLabel()}),this.onClick(this.btn_get,function(){return e.click_getLabour()}),this.onInteractable(this.btn_get,function(){return!e.isGetLabour})},t.prototype.start=function(){},t.prototype.onHidden=function(){w.evt.off(this)},t.prototype.onResume=function(){_.default.reloadBannerAd()},t.prototype.init=function(){this.isGetLabour=!1,this.render(),this.btn_get.active=!0,this.dialogToShow=null,h.PlayerInfo.lose(),u.default.playSfx("lose")},t.prototype.showEnergyPackage=function(){var e=this;h.PlayerInfo.labour<=2&&d.default.tryOpenCheat(y.CloudFuncType.Energy_Package).then(function(){h.PlayerInfo.winLink=0,e.dialogToShow="UIEnergyPackage"})},t.prototype.onShow=function(){w.evt.on("Game.Resume",this.onResume,this),g.ttsdk.stop_recorder(),this.init(),cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_ANDROID||(this.rank.active=!1,this.setting.active=!0)},t.prototype.showLevelLabel=function(){return"\u7b2c"+h.PlayerInfo.getCurrentPlayingLevel()+"\u5173"},t.prototype.showSequencely=function(e){return void 0===e&&(e=!1),c(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,w.evt.sleep(.1)];case 1:return e.sent(),this.dialogToShow?[4,w.evt.wait(this.dialogToShow+".onHidden")]:[3,3];case 2:e.sent(),e.label=3;case 3:return[2]}})})},t.prototype.isShowKf=function(){return!(!m.UserInfo.isFirstGameOver||1e4==p.default.instance.loader.level||(m.UserInfo.isFirstGameOver=!1,m.UserInfo.FirstGameOverTime=Date.now(),m.UserInfo.save(),m.UserInfo.isKf||!h.PlayerInfo.isWechat()))},t.prototype.showDialog=function(){h.PlayerInfo.is_guide_15||15!=h.PlayerInfo.playinglevel||15!=h.PlayerInfo.level?this.showEnergyPackage():vm.show("Prefabs/UI/UIUnlock")},t.prototype.showInterstitial=function(e){void 0===e&&(e=!1);var t=this;_.default.showInterstitial(function(){t.showDialog(),t.showSequencely(e)}).then(function(){t.showDialog(),t.showSequencely(e)})},t.prototype.err=function(){},t.prototype.click_showsdk=function(){},t.prototype.click_moregame=function(){v.qqsdk.showAppBox()},t.prototype.click_share=function(e){window.tt?this.click_shareRecorder(e):(_.default.share(),e.active=!1,this.render())},t.prototype.click_shareRecorder=function(e){m.UserInfo.sharecount>(csv.Config.max_share_count||10)?f.Toast.make("\u4eca\u65e5\u5206\u4eab\u6b21\u6570\u5df2\u8fbe\u4e0a\u9650!"):m.UserInfo.record_time<=3?f.Toast.make("\u5f55\u5c4f\u8d85\u8fc73s\u624d\u80fd\u5206\u4eab\u54e6"):window.tt.shareAppMessage({channel:"video",query:"",templateId:"vy1r1dacvr62684a1e",title:"\u5e2e\u5979\u8131\u9669",desc:"\u60f3\u73a9\u5c31\u641c\u7d22\u6e38\u620f\u540d\uff1a\u5e2e\u5979\u8131\u9669\u6e38\u620f\u8f6f\u4ef6",extra:{videoPath:m.UserInfo.record_path,videoTopics:["\u5e2e\u5979\u8131\u9669","\u8d62\u5728\u601d\u7ef4"]},success:function(){e.target.active=!1,h.PlayerInfo.labour+=3,h.PlayerInfo.save("labour"),m.UserInfo.sharecount++,m.UserInfo.save("sharecount"),f.Toast.make("\u5206\u4eab\u6210\u529f\uff0c\u5956\u52b13\u70b9\u4f53\u529b!")},fail:function(){console.log("\u5206\u4eab\u89c6\u9891\u5931\u8d25"),f.Toast.make("\u6210\u529f\u5206\u4eab\u624d\u80fd\u83b7\u5f97\u5956\u52b1\u54e6")}})},t.prototype.click_level=function(){h.PlayerInfo.isPlayingDaily?vm.show("Prefabs/UI/UIChallengeChapter"):vm.show("Prefabs/UI/UIChapter")},t.prototype.click_setting=function(){vm.show("Prefabs/UI/UISetting")},t.prototype.click_skin=function(){w.evt.emit("Main.skin")},t.prototype.click_rank=function(){},t.prototype.click_again=function(){if(h.PlayerInfo.labour>0){if(!m.UserInfo.gun_num&&!m.UserInfo.isGetGunEnd){var e=Math.random();if(h.PlayerInfo.level>=csv.Config.Start_Lv_Get_Gun&&m.UserInfo.gunViewDay<csv.Config.Get_Gun_Limt_Day&&m.UserInfo.gunView<csv.Config.Get_Gun_Limt&&e<csv.Config.Get_Gun_Pro)return void vm.show("Prefabs/UI/UIGetGun",function(){h.PlayerInfo.labour--,h.PlayerInfo.save("labour"),l.default.goto("Game")},"isGetGunEnd")}h.PlayerInfo.labour--,h.PlayerInfo.save("labour"),l.default.goto("Game")}else vm.show("Prefabs/UI/UIGetLabour",function(){h.PlayerInfo.labour--,h.PlayerInfo.save("labour"),l.default.goto("Game")},!1)},t.prototype.click_home=function(){l.default.goto("Main")},t.prototype.onDestroy=function(){w.evt.off(this)},t.prototype.click_getLabour=function(){var e=this;C.umeng.onEvent("rewardAd","labourLoseShow"),b.default.doChoice("SOV_Lose_Get",function(){e.isGetLabour=!0;var t=csv.Config.Get_Energey_Count||2;h.PlayerInfo.labour+=t,h.PlayerInfo.save("labour"),C.umeng.onEvent("rewardAd","labourLoseRewarded"),w.evt.emit("Game.getTili",S.default.center,t),f.Toast.make("\u83b7\u5f97"+t+"\u70b9\u4f53\u529b"),e.render()},this)},t.prototype.click_back=function(){},r([O(cc.Node)],t.prototype,"sdk",void 0),r([O(cc.Node)],t.prototype,"setting",void 0),r([O(cc.Node)],t.prototype,"btn_get",void 0),r([O(cc.Node)],t.prototype,"rank",void 0),r([O(cc.Sprite)],t.prototype,"share_video",void 0),r([O(cc.Label)],t.prototype,"level_label",void 0),r([P],t)}(s.default);o.default=x,cc._RF.pop()},{"../../../framework/core/event":"event","../../../framework/extension/Platform":"Platform","../../../framework/extension/aldsdk/umeng":"umeng","../../../framework/extension/qq/qqsdk":"qqsdk","../../../framework/extension/ttsdk/ttsdk":"ttsdk","../../../framework/extension/weak_net_game/UserInfo":"UserInfo","../../../framework/extension/weak_net_game/WeakNetGame":"WeakNetGame","../../../framework/misc/Device":"Device","../../../framework/misc/display":"display","../../../framework/ui/ToastManager":"ToastManager","../../../framework/ui/mvcView":"mvcView","../Common/Base/LoadingScene":"LoadingScene","../Common/Base/PlayerInfo":"PlayerInfo","../Common/CloudFuncTypes":"CloudFuncTypes","../Common/Unity":"Unity","../Game":"Game","../sdk/wegame":"wegame"}],UILucky:[function(e,t,o){"use strict";cc._RF.push(t,"77fd5DILZVFnINnShtqeF4o","UILucky");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.DrawType=void 0;var c,a=e("../../../framework/ui/mvcView"),s=e("../../../framework/misc/Device"),l=e("../../../framework/ui/ToastManager"),u=e("../../../framework/extension/weak_net_game/UserInfo"),h=e("../../../framework/utils/actionUtil"),f=e("../../../framework/utils/ccUtil"),p=e("../Common/TurntableInfo"),d=e("../../../framework/misc/FrameSwitch"),y=e("../../../framework/extension/Platform"),v=e("../Common/Base/PlayerInfo"),_=e("../Main"),m=e("../../../framework/core/event"),w=cc._decorator,b=w.ccclass,k=w.property;(function(e){e[e.FreeOnce=1]="FreeOnce",e[e.TiLi=2]="TiLi",e[e.Gift=3]="Gift",e[e.Gun=4]="Gun",e[e.Skin=5]="Skin",e[e.Frozen=6]="Frozen",e[e.Magnet=7]="Magnet"})(c=o.DrawType||(o.DrawType={}));var S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.wheelSp=null,t.sprites=[],t.labels=[],t.btn_draw=null,t.switcherTip=null,t.switcherTxt=null,t.videoIcon=null,t.drawBtn=null,t._canRotate=!0,t.pool=[],t._oneMore=!1,t.skinId=0,t}return i(t,e),t.prototype.onLoad=function(){var e=this;this.skinId=v.PlayerInfo.randomVideoSkin(),csv.turntable.values.map(function(t,o){for(var n=f.default.get(p.TurntableInfo,t.id),i=0;i<200*n.chance;i++)0===e.skinId&&n.type===c.Skin?e.pool.push(7):e.pool.push(o+1)}),g.shuffle(this.pool),console.log(this.pool),this.flashLight()},t.prototype.onShown=function(){var e=this;h.default.jellyJump2(this.node,.8,1),csv.turntable.values.map(function(t,o){var n=f.default.get(p.TurntableInfo,t.id);e.labels[o].string=n.text;var i=e.sprites[o];f.default.setDisplay(i,n.path)}),this.refreshView()},t.prototype.share_succ=function(){this.startDraw()},t.prototype.click_draw=function(){this._canRotate?g.isNextDay(u.UserInfo.freedrawTime)?(m.evt.emit("UILucky.redPoint"),u.UserInfo.freedrawTime=(new Date).getTime(),_.default.instance.zhuanpan_hongdian.active=!1,u.UserInfo.save(),this.share_succ()):this.videoIcon.active?y.default.watch_video(this.startDraw,this):this.startDraw():l.Toast.make("\u6b63\u5728\u7ed9\u60a8\u6311\u9009\u5956\u54c1...")},t.prototype.startDraw=function(){var e=g.getRandomInArray(this.pool);this.startWheel(e),s.default.playSfx("draw")},t.prototype.calculateAngle=function(e){return 1440+45*e-23},t.prototype.refreshView=function(){g.isGreaterDate(new Date,new Date(u.UserInfo.freedrawTime))?(this.switcherTip.index=0,this.switcherTxt.index=0,this.videoIcon.active=!1):(this.switcherTip.index=1,this.switcherTxt.index=1,this.videoIcon.active=!0),this._oneMore&&(this.switcherTxt.index=0,this.videoIcon.active=!1)},t.prototype.flashLight=function(){var e=this.wheelSp.node.children.filter(function(e){return"guang"===e.name});cc.tween(this.node).repeatForever(cc.tween(this.node).call(function(){e.forEach(function(e,t){return e.active=t%2==0})}).delay(.5).call(function(){e.forEach(function(e,t){return e.active=t%2==1})}).delay(.5)).start()},t.prototype.startWheel=function(e){console.log("target wheel:",e);var t=this.calculateAngle(e);if(this._canRotate){this._canRotate=!1,this.drawBtn.interactable=!1,this.wheelSp.node.rotation=0;var o=cc.rotateBy(Math.abs(t/400),t),n=cc.callFunc(function(){this._canRotate=!0,this._oneMore=!1,this.showRes(e),this.refreshView(),this.skinId=v.PlayerInfo.randomVideoSkin(),this.drawBtn.interactable=!0}.bind(this)),i=cc.sequence(o,n);this.wheelSp.node.runAction(i.easing(cc.easeQuadraticActionInOut()))}else l.Toast.make("\u6b63\u5728\u7ed9\u60a8\u6311\u9009\u5956\u54c1...")},t.prototype.showRes=function(e){var t=f.default.get(p.TurntableInfo,e);switch(t.type){case c.FreeOnce:this._oneMore=!0,l.Toast.make("\u83b7\u5f97"+t.text);break;case c.TiLi:this.getLuckyItem(e);break;case c.Gift:u.UserInfo.gun_num+=t.num,u.UserInfo.snowball_num+=t.num,u.UserInfo.magnet_num,t.num,this.getLuckyItem(e);break;case c.Gun:u.UserInfo.gun_num+=t.num,this.getLuckyItem(e);break;case c.Frozen:u.UserInfo.snowball_num+=t.num,this.getLuckyItem(e);break;case c.Skin:v.PlayerInfo.unlockSkin(this.skinId),vm.show("Prefabs/UI/UIUnlockSkin",this.skinId);break;case c.Magnet:u.UserInfo.magnet_num+=t.num,this.getLuckyItem(e)}u.UserInfo.save()},t.prototype.onGetReward=function(e){vm.show("Prefabs/UI/UILucky"),l.Toast.make("\u83b7\u5f97"+e.content+"x"+e.num)},t.prototype.getLuckyItem=function(e){vm.hide(this),vm.show("Prefabs/UI/UIGetLucky",e,this.onGetReward)},t.prototype.clic_close=function(){this._canRotate?vm.hide(this):l.Toast.make("\u6b63\u5728\u7ed9\u60a8\u6311\u9009\u5956\u54c1...")},r([k(cc.Sprite)],t.prototype,"wheelSp",void 0),r([k([cc.Sprite])],t.prototype,"sprites",void 0),r([k([cc.Label])],t.prototype,"labels",void 0),r([k(cc.Button)],t.prototype,"btn_draw",void 0),r([k(d.default)],t.prototype,"switcherTip",void 0),r([k(d.default)],t.prototype,"switcherTxt",void 0),r([k(cc.Node)],t.prototype,"videoIcon",void 0),r([k(cc.Button)],t.prototype,"drawBtn",void 0),r([b],t)}(a.default);o.default=S,cc._RF.pop()},{"../../../framework/core/event":"event","../../../framework/extension/Platform":"Platform","../../../framework/extension/weak_net_game/UserInfo":"UserInfo","../../../framework/misc/Device":"Device","../../../framework/misc/FrameSwitch":"FrameSwitch","../../../framework/ui/ToastManager":"ToastManager","../../../framework/ui/mvcView":"mvcView","../../../framework/utils/actionUtil":"actionUtil","../../../framework/utils/ccUtil":"ccUtil","../Common/Base/PlayerInfo":"PlayerInfo","../Common/TurntableInfo":"TurntableInfo","../Main":"Main"}],UIManual_Egg:[function(e,t,o){"use strict";cc._RF.push(t,"1f3196wW/ZI56hwvioBYU0W","UIManual_Egg");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c},c=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function c(e){try{s(n.next(e))}catch(t){r(t)}}function a(e){try{s(n.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,a)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return s([e,t])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../framework/ui/mvcView"),l=e("../../../framework/ui/ToastManager"),u=e("../../../framework/core/event"),h=e("../../../framework/extension/Platform"),f=e("../Common/Base/PlayerInfo"),p=e("../../../framework/misc/display"),d=cc._decorator,y=d.ccclass,v=d.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Bar=null,t.egg_ani=null,t.lizi=null,t.egg1=null,t.get_but=null,t.isleave=!1,t.isbanner=!1,t.isshowed=!1,t.isplay=!1,t.randomNum=0,t.view="",t}return i(t,e),t.prototype.onLoad=function(){this.egg_ani.on(cc.Animation.EventType.FINISHED,this.finsh,this)},t.prototype.onShow=function(e){u.evt.on("Game.Resume",this.onResume,this),this.Bar.progress=0,this.view=e,this.randomNum=g.randomFloat(.4,.6),h.default.refreshBannerAd()},t.prototype.onResume=function(){h.default.hideBannerAd()},t.prototype.onDestroy=function(){},t.prototype.click_egg=function(){return c(this,void 0,void 0,function(){var e=this;return a(this,function(){return this.unschedule(this.reduce_propress),this.Bar.progress+=.1,this.Bar.progress>=this.randomNum&&!this.isshowed&&(this.isshowed=!0,this.egg1.y+=10,h.default.showBannerAd(),this.isbanner=!0,this.scheduleOnce(function(){cc.isValid(e)&&(e.isbanner=!1,h.default.hideBannerAd())},2)),this.Bar.progress>=1?(this.unscheduleAllCallbacks(),this.egg_ani.play("egg2"),l.Toast.make("\u606d\u559c\u83b7\u5f97\u4f53\u529b 1"),u.evt.emit("Game.getTili",p.default.center,1),f.PlayerInfo.labour+=1,this.get_but.active=!1,[2]):(this.schedule(this.reduce_propress,0,1e3,.5),[2])})})},t.prototype.reduce_propress=function(){this.isbanner||(this.Bar.progress-=.001,this.Bar.progress<=0&&(this.unschedule(this.reduce_propress),this.Bar.progress=0))},t.prototype.onHide=function(){u.evt.off(this),h.default.hideBannerAd(),this.isbanner=!1,this.isleave=!0},t.prototype.finsh=function(){console.log("\u52a8\u753b\u7ed3\u675f"),vm.hide(this),"win"==this.view?vm.show("Prefabs/UI/UIWin"):"lose"==this.view&&vm.show("Prefabs/UI/UILose")},r([v(cc.ProgressBar)],t.prototype,"Bar",void 0),r([v(cc.Animation)],t.prototype,"egg_ani",void 0),r([v(cc.ParticleSystem)],t.prototype,"lizi",void 0),r([v(cc.Node)],t.prototype,"egg1",void 0),r([v(cc.Node)],t.prototype,"get_but",void 0),r([y],t)}(s.default);o.default=_,cc._RF.pop()},{"../../../framework/core/event":"event","../../../framework/extension/Platform":"Platform","../../../framework/misc/display":"display","../../../framework/ui/ToastManager":"ToastManager","../../../framework/ui/mvcView":"mvcView","../Common/Base/PlayerInfo":"PlayerInfo"}],UIMission:[function(e,t,o){"use strict";cc._RF.push(t,"2a575O5zWlCzopIb9O9lPHR","UIMission");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/ui/mvcView"),a=e("../../../framework/utils/actionUtil"),s=e("../Game"),l=cc._decorator,u=l.ccclass,h=l.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.onShown=function(e){a.default.jellyJump2(this.node),this.label.string=e},t.prototype.click_close=function(){vm.hide(this)},t.prototype.onHidden=function(){s.default.instance.startGame()},r([h(cc.Label)],t.prototype,"label",void 0),r([u],t)}(c.default);o.default=f,cc._RF.pop()},{"../../../framework/ui/mvcView":"mvcView","../../../framework/utils/actionUtil":"actionUtil","../Game":"Game"}],UIOffLine:[function(e,t,o){"use strict";cc._RF.push(t,"0af08ptRkBIy7gzoiKHutrO","UIOffLine");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/ui/mvcView"),a=e("../Common/Base/PlayerInfo"),s=e("../sdk/wegame"),l=e("../Common/CloudFuncTypes"),u=e("../../../framework/extension/Platform"),h=e("../../../framework/core/event"),f=e("../../../framework/extension/weak_net_game/WeakNetGame"),p=e("../../../framework/misc/display"),d=cc._decorator,y=d.ccclass,v=d.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_get=null,t.btn_getjia=null,t.sdk=null,t.tili_label=null,t.youlike=null,t.tili=0,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.onShow=function(e){this.tili=e,this.bannerMove(!0),this.tili_label.string="+"+e},t.prototype.bannerMove=function(e){void 0===e&&(e=!1),e&&s.default.isCheatOpen(l.CloudFuncType.Banner_move)?s.default.enableFakeForAdClick(this.btn_get,this.btn_getjia,2,this.err.bind(this)):(this.btn_get.active=!0,this.btn_getjia.active=!1,u.default.showBannerAd())},t.prototype.err=function(){},t.prototype.onDestroy=function(){},t.prototype.click_get=function(){h.evt.emit("Game.getTili",p.default.center,this.tili),a.PlayerInfo.labour+=this.tili,vm.hide(this)},t.prototype.click_getDouble=function(){var e=this;f.default.doChoice("SOV_Double_Offline",function(){h.evt.emit("Game.getTili",p.default.center,2*e.tili),a.PlayerInfo.labour+=2*e.tili,vm.hide(e)},this)},r([v(cc.Node)],t.prototype,"btn_get",void 0),r([v(cc.Node)],t.prototype,"btn_getjia",void 0),r([v(cc.Node)],t.prototype,"sdk",void 0),r([v(cc.Label)],t.prototype,"tili_label",void 0),r([y],t)}(c.default);o.default=_,cc._RF.pop()},{"../../../framework/core/event":"event","../../../framework/extension/Platform":"Platform","../../../framework/extension/weak_net_game/WeakNetGame":"WeakNetGame","../../../framework/misc/display":"display","../../../framework/ui/mvcView":"mvcView","../Common/Base/PlayerInfo":"PlayerInfo","../Common/CloudFuncTypes":"CloudFuncTypes","../sdk/wegame":"wegame"}],UIPause:[function(e,t,o){"use strict";cc._RF.push(t,"e7961Uqj2hNTZXvc+XPGOGR","UIPause");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/misc/Device"),a=e("../../../framework/extension/weak_net_game/SettingInfo"),s=e("../../../framework/ui/mvcView"),l=e("../Common/Base/LoadingScene"),u=e("../Common/Base/PlayerInfo"),h=e("../../../framework/utils/actionUtil"),f=e("../../../framework/core/event"),p=cc._decorator,d=p.ccclass,y=p.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.music=null,t.effect=null,t.sdk=null,t.interfull_datu=null,t}return i(t,e),t.prototype.onLoad=function(){this.musicOff=this.music.getChildByName("off"),this.effectOff=this.effect.getChildByName("off")},t.prototype.start=function(){},t.prototype.onShow=function(){h.default.jellyJump2(this.node),this.musicOff.active=!a.SettingInfo.music,this.effectOff.active=!a.SettingInfo.effect,this.scheduleOnce(function(){return cc.director.pause()},.8)},t.prototype.click_music=function(){cc.director.resume(),f.evt.emit("Game.pause"),c.default.setBGMEnable(!a.SettingInfo.music),a.SettingInfo.saveSettings(),this.musicOff.active=!a.SettingInfo.music},t.prototype.click_effect=function(){cc.director.resume(),f.evt.emit("Game.pause"),c.default.setSFXEnable(!a.SettingInfo.effect),a.SettingInfo.saveSettings(),this.effectOff.active=!a.SettingInfo.effect},t.prototype.click_close=function(){cc.director.resume(),vm.hide(this),f.evt.emit("Game.resume")},t.prototype.click_level=function(){cc.director.resume(),u.PlayerInfo.isPlayingDaily?vm.show("Prefabs/UI/UIChallengeChapter"):vm.show("Prefabs/UI/UIChapter"),f.evt.emit("Game.pause")},t.prototype.click_home=function(){cc.director.resume(),l.default.goto("Main")},t.prototype.click_homedatu=function(){cc.director.resume(),l.default.goto("Main")},t.prototype.onDestroy=function(){cc.director.resume()},r([y(cc.Node)],t.prototype,"music",void 0),r([y(cc.Node)],t.prototype,"effect",void 0),r([y(cc.Node)],t.prototype,"sdk",void 0),r([y(cc.Node)],t.prototype,"interfull_datu",void 0),r([d],t)}(s.default);o.default=v,cc._RF.pop()},{"../../../framework/core/event":"event","../../../framework/extension/weak_net_game/SettingInfo":"SettingInfo","../../../framework/misc/Device":"Device","../../../framework/ui/mvcView":"mvcView","../../../framework/utils/actionUtil":"actionUtil","../Common/Base/LoadingScene":"LoadingScene","../Common/Base/PlayerInfo":"PlayerInfo"}],UIPersonSkin:[function(e,t,o){"use strict";cc._RF.push(t,"1b17carlihPO5d0gz69nKHV","UIPersonSkin");var n,i,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),c=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.DecorateType=o.SkinType=o.TwoType=void 0;var a,s,l,u,h=e("../../../framework/ui/mvcView"),f=e("../../../framework/core/event"),p=e("../Common/Base/PlayerInfo"),d=e("../../../framework/ui/ToastManager"),y=e("../../../framework/extension/weak_net_game/UserInfo"),v=e("../../../framework/extension/Platform"),_=e("../Common/Unity"),m=e("../Common/Base/LoadingScene"),g=cc._decorator,w=g.ccclass,b=g.property;(function(e){e[e.Female=1]="Female",e[e.Male=2]="Male"})(a||(a={})),function(e){e[e.Skin=0]="Skin",e[e.Collection=1]="Collection"}(s=o.TwoType||(o.TwoType={})),function(e){e[e.Hair=0]="Hair",e[e.Hat=1]="Hat",e[e.Up=2]="Up",e[e.Down=3]="Down",e[e.Misc=4]="Misc",e[e.Theme=5]="Theme",e[e.Key=6]="Key"}(l=o.SkinType||(o.SkinType={})),(i={})[l.Hair]={name:"\u5934\u53d1",color:"#FA8F4A"},i[l.Hat]={name:"\u5e3d\u5b50",color:"#FA8F4A"},i[l.Up]={name:"\u4e0a\u8eab",color:"#FA8F4A"},i[l.Down]={name:"\u4e0b\u8eab",color:"#FA8F4A"},i[l.Misc]={name:"\u9644\u4ef6",color:"#00D893"},i[l.Theme]={name:"\u4e3b\u9898\u80cc\u666f",color:"#0B88FF"},i[l.Key]={name:"\u94a5\u5319",color:"#00D893"},function(e){e[e.BaiJian=1]="BaiJian",e[e.DiBan=2]="DiBan",e[e.QiangZhi=3]="QiangZhi",e[e.DiTan=4]="DiTan",e[e.GuiZhi=5]="GuiZhi",e[e.ChuangLian=6]="ChuangLian",e[e.ShaFa=7]="ShaFa"}(u=o.DecorateType||(o.DecorateType={}));var k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.listLayout=null,t.decorateListLayout=null,t.layout=null,t.label_star_free=null,t.skeleton_1=null,t.skeleton_2=null,t.qiangzhi=null,t.diban=null,t.guizhi=null,t.baijians=[],t.chuanglian=null,t.shafa=null,t.ditan=null,t.zhezhao=null,t._tab=-1,t.tabs_loaded=[],t.all_cls={},t._first=!0,t._skins=[],t._decorates=[],t.path="Img/decorate",t}return r(t,e),Object.defineProperty(t.prototype,"tabIndex",{get:function(){return this._tab},set:function(e){-1==e&&(e=a.Female),this._tab!=e&&(this._tab=e,this.selectTab(e))},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){var e=this;this.register(this.label_star_free,function(){return"\u83b7\u53d6"+csv.Config.skin_store_free_star}),m.default.param==s.Collection?this.initDecorateClass(1):this.initClass(0),this._tab=1,this.updateTab(this._tab),f.evt.on("Skin.select",this.onSelect,this),f.evt.on("Decorate.select",this.onDecorateSelect,this),f.evt.on("UISkin.checkLock",this.check_lockSkin,this),this._skins=this.skinsForType(0),this.register(this.listLayout,function(){return e._skins}),this.register(this.decorateListLayout,function(){return e._decorates}),this.register(this.qiangzhi,function(){return e.decoratePathForType(u.QiangZhi,e.path+"/qiangzhi/")}),this.register(this.diban,function(){return e.decoratePathForType(u.DiBan,e.path+"/diban/")}),this.register(this.guizhi,function(){return e.decoratePathForType(u.GuiZhi,e.path+"/guizi/")}),this.baijians.forEach(function(t,o){e.onVisible(t.node,function(){return p.PlayerInfo.isDecorateUsing(o+1)})}),this.register(this.chuanglian,function(){return e.decoratePathForType(u.ChuangLian,e.path+"/chuanglian/")}),this.register(this.shafa,function(){return e.decoratePathForType(u.ShaFa,e.path+"/shafa/")}),this.register(this.ditan,function(){return e.decoratePathForType(u.DiTan,e.path+"/ditan/")})},t.prototype.start=function(){_.default.loadSkins(this["skeleton_"+this.tabIndex],this.tabIndex),this.selectTab(this.tabIndex),this.layout.children.forEach(function(e,t){m.default.param==s.Collection?t<12&&(e.active=!1):t>=12&&(e.active=!1)})},t.prototype.onEnable=function(){},t.prototype.onDestroy=function(){f.evt.off(this)},t.prototype.onSelect=function(e){d.Toast.make("\u5df2\u9009\u62e9:"+e.name),_.default.loadSkins(this["skeleton_"+this.tabIndex],this.tabIndex),this.render()},t.prototype.onDecorateSelect=function(){this.render()},t.prototype.selectTab=function(e){this.tabIndex=e,this.updateTab(e)},t.prototype.enableCls=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var o in this.all_cls){var n=parseInt(o),i=this.all_cls[o],r=e.indexOf(n)>=0;i.title.active=r,i.content.active=r}},t.prototype.updateTab=function(){this.enableCls(l.Hair,l.Hat,l.Up,l.Down,l.Misc),1!=this._first?this.render():this._first=!1},t.prototype.initClass=function(e){this.listLayout.node.parent.parent.active=!0,this.decorateListLayout.node.parent.parent.active=!1,this._skins=this.skinsForType(e)},t.prototype.initDecorateClass=function(e){this.listLayout.node.parent.parent.active=!1,this.decorateListLayout.node.parent.parent.active=!0,this._decorates=this.decoratesForType(e)},t.prototype.skinsForType=function(e){var t=this;return csv.Skin.search(function(o){return o.type==t.tabIndex&&o.subType==e})},t.prototype.decoratesForType=function(e){return csv.Collection.search(function(t){return t.type==e})},t.prototype.decoratePathForType=function(e,t){var o=this.decoratesForType(e).find(function(e){return p.PlayerInfo.isDecorateUsing(e.id)});return o&&o.res?""+t+o.res:""},t.prototype.onToggle=function(e,t){(t=parseInt(t))<10?(t<5?(this.tabIndex=1,this.initClass(t),this.selectTab(1)):(this.tabIndex=2,this.initClass(t-5),this.selectTab(2)),_.default.loadSkins(this["skeleton_"+this.tabIndex],this.tabIndex)):(this.initDecorateClass(t-9),this.render())},t.prototype.onShow=function(){f.evt.emit("UISkin.checkLock"),this.render()},t.prototype.onHidden=function(){y.UserInfo.save(),p.PlayerInfo.save()},t.prototype.click_guideBtn=function(){if(p.PlayerInfo.skins[20])f.evt.emit("Guide.useSkin"),this.zhezhao.active=!1;else{f.evt.emit("Guide.unlockSkin");var e=this.zhezhao.getComponentInChildren(cc.Label);e&&(e.string="\u518d\u6b21\u70b9\u51fb\u9009\u62e9\u53ef\u4f7f\u7528\u8be5\u76ae\u80a4")}},t.prototype.click_close=function(){m.default.goto("Main")},t.prototype.click_getstar=function(){v.default.watch_video(this.video_callback,this)},t.prototype.video_callback=function(){p.PlayerInfo.star+=csv.Config.skin_store_free_star||3,p.PlayerInfo.save("star")},t.prototype.check_lockSkin=function(){y.UserInfo.isunlock_men=0,y.UserInfo.isunlock_girl=0;for(var e=1;e<=5;e++)y.UserInfo["isunlock_girl"+e]=0,y.UserInfo["isunlock_men"+e]=0;for(e=1;e<=csv.Skin.values.length;e++){var t=csv.Skin.get(e);(p.PlayerInfo.level>=t.unlock1&&1==t.unlockType||2==t.unlockType&&p.PlayerInfo.star>=t.unlock2)&&!p.PlayerInfo.isSkinUnlocked(t.id)&&(1==t.type?y.UserInfo.isunlock_girl=1:2==t.type&&(y.UserInfo.isunlock_men=1),t.subType<5&&(1==t.type?y.UserInfo["isunlock_girl"+(t.subType+1)]=1:2==t.type&&(y.UserInfo["isunlock_men"+(t.subType+1)]=1)))}},c([b(cc.Layout)],t.prototype,"listLayout",void 0),c([b(cc.Layout)],t.prototype,"decorateListLayout",void 0),c([b(cc.Node)],t.prototype,"layout",void 0),c([b(cc.Label)],t.prototype,"label_star_free",void 0),c([b(dragonBones.ArmatureDisplay)],t.prototype,"skeleton_1",void 0),c([b(dragonBones.ArmatureDisplay)],t.prototype,"skeleton_2",void 0),c([b(cc.Sprite)],t.prototype,"qiangzhi",void 0),c([b(cc.Sprite)],t.prototype,"diban",void 0),c([b(cc.Sprite)],t.prototype,"guizhi",void 0),c([b({type:cc.Sprite})],t.prototype,"baijians",void 0),c([b(cc.Sprite)],t.prototype,"chuanglian",void 0),c([b(cc.Sprite)],t.prototype,"shafa",void 0),c([b(cc.Sprite)],t.prototype,"ditan",void 0),c([b(cc.Node)],t.prototype,"zhezhao",void 0),c([w],t)}(h.default);o.default=k,cc._RF.pop()},{"../../../framework/core/event":"event","../../../framework/extension/Platform":"Platform","../../../framework/extension/weak_net_game/UserInfo":"UserInfo","../../../framework/ui/ToastManager":"ToastManager","../../../framework/ui/mvcView":"mvcView","../Common/Base/LoadingScene":"LoadingScene","../Common/Base/PlayerInfo":"PlayerInfo","../Common/Unity":"Unity"}],UIProgressRewardGet:[function(e,t,o){"use strict";cc._RF.push(t,"edf6fREfQxFr7fFDq1yfXUK","UIProgressRewardGet");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../Common/Base/PlayerInfo"),a=e("../../../framework/ui/ToastManager"),s=e("../../../framework/utils/ccUtil"),l=e("../../../framework/extension/weak_net_game/UserInfo"),u=e("../../../framework/extension/weak_net_game/WeakNetGame"),h=e("../../../framework/utils/actionUtil"),f=e("../../../framework/core/event"),p=cc._decorator,d=p.ccclass,y=p.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t.title2=null,t.icon=null,t.videoIcon=null,t.node_no=null,t.type="",t.skin_id=0,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.onShown=function(e){if(f.evt.emit("UIProgressRewardGet.show"),h.default.jellyJump2(this.node),this.type=e,this.videoIcon.active=!1,this.node_no.active=!1,"Energy"==e)this.title.string="\u4f53\u529b\u793c\u5305",s.default.setDisplay(this.icon,"Img/icon/tili"),this.title2.string="\u4f53\u529bx3";else if("Skin"==e){this.skin_id=c.PlayerInfo.randomVideoSkin(),this.title.string="\u65b0\u76ae\u80a4",this.videoIcon.active=!0;var t=csv.Skin.get(this.skin_id);this.title2.string=t.name,s.default.setDisplay(this.icon,"Img/skin/thumbnail/"+t.type+"/"+t.thumbnail),this.unschedule(this.show_no),this.scheduleOnce(this.show_no,1)}else"Prop"==e&&(this.title.string="\u9053\u5177\u793c\u5305",s.default.setDisplay(this.icon,"Img/icon/xianding"),this.title2.string="\u4e09\u79cd\u9053\u5177\u6570\u91cf +1")},t.prototype.show_no=function(){this.node_no.active=!0},t.prototype.unlockSkin=function(){if(0!=this.skin_id){var e=csv.Skin.get(this.skin_id);a.Toast.make("\u83b7\u5f97\u76ae\u80a4 : "+e.name),c.PlayerInfo.unlockSkin(this.skin_id)}},t.prototype.click_get=function(){"Skin"==this.type?u.default.doChoice("SOV_ProgressReward_Skin",this.unlockSkin,this):"Energy"==this.type?(a.Toast.make("\u83b7\u5f97\u4f53\u529bx3"),c.PlayerInfo.labour+=3,c.PlayerInfo.save("labour")):"Prop"==this.type&&(a.Toast.make("\u83b7\u5f97\u9053\u5177\u5927\u793c\u5305 "),l.UserInfo.gun_num++,l.UserInfo.snowball_num++,l.UserInfo.magnet_num++,l.UserInfo.save()),vm.hide(this)},t.prototype.click_no=function(){vm.hide(this)},r([y(cc.Label)],t.prototype,"title",void 0),r([y(cc.Label)],t.prototype,"title2",void 0),r([y(cc.Sprite)],t.prototype,"icon",void 0),r([y(cc.Node)],t.prototype,"videoIcon",void 0),r([y(cc.Node)],t.prototype,"node_no",void 0),r([d],t)}(cc.Component);o.default=v,cc._RF.pop()},{"../../../framework/core/event":"event","../../../framework/extension/weak_net_game/UserInfo":"UserInfo","../../../framework/extension/weak_net_game/WeakNetGame":"WeakNetGame","../../../framework/ui/ToastManager":"ToastManager","../../../framework/utils/actionUtil":"actionUtil","../../../framework/utils/ccUtil":"ccUtil","../Common/Base/PlayerInfo":"PlayerInfo"}],UIProgressReward:[function(e,t,o){"use strict";cc._RF.push(t,"3b1021yBMtAYo3JPepa8CDD","UIProgressReward");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../Common/Base/PlayerInfo"),a=cc._decorator,s=a.ccclass,l=a.property,u={Skin:{percent:45},Energy:{percent:30,num:3},Prop:{percent:25}},h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.layout=null,t.pool=[],t.once=!0,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.onShown=function(){if(this.once=!0,this.layout.children.forEach(function(e){return e.getChildByName("box").active=!1}),this.pool.splice(0),!c.PlayerInfo.isAllSkinUnlocked())for(var e in u)for(var t=u[e],o=0;o<t.percent;o++)this.pool.push(e)},t.prototype.click_box=function(e,t){if(this.once){this.once=!1;var o=parseInt(t),n=this.layout.children[o].getChildByName("box");n.active=!0,n.getComponent(dragonBones.ArmatureDisplay).playAnimation("open",1),this.scheduleOnce(this.openBox,.5)}},t.prototype.openBox=function(){var e="Energy";this.pool.length>0?e=g.getRandom(this.pool):Math.random()>.5&&(e="Prop");var t=u[e];vm.show("Prefabs/UI/UIProgressRewardGet",e,t),this.scheduleOnce(this.hide,1)},t.prototype.hide=function(){vm.hide(this)},r([l(cc.Node)],t.prototype,"layout",void 0),r([s],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../Common/Base/PlayerInfo":"PlayerInfo"}],UIPropItem:[function(e,t,o){"use strict";cc._RF.push(t,"afdeeOTHcZAoo9wQLgzmKVQ","UIPropItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/ui/mvcView"),a=e("../../../framework/extension/weak_net_game/WeakNetGame"),s=e("../../../framework/extension/weak_net_game/UserInfo"),l=e("../../../framework/ui/ToastManager"),u=cc._decorator,h=u.ccclass,f=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.desc_label=null,t.count_label=null,t.icon=null,t.btn_get=null,t.data=null,t.propList={1:"gun_num",2:"snowball_num",3:"magnet_num"},t}return i(t,e),t.prototype.onLoad=function(){this.register(this.desc_label,function(e){return e.desc}),this.register(this.icon,function(e){return e.icon})},t.prototype.start=function(){this.data=this.getData(),this.count_label.string=s.UserInfo[this.propList[this.data.id]]},t.prototype.click_get=function(){var e=this;a.default.doChoice("SOV_GetPropItem",function(){s.UserInfo[e.propList[e.data.id]]+=2,l.Toast.make("\u5df2\u9886\u53d6"+e.data.name),e.count_label.string=s.UserInfo[e.propList[e.data.id]],s.UserInfo.save()},this)},r([f(cc.Label)],t.prototype,"desc_label",void 0),r([f(cc.Label)],t.prototype,"count_label",void 0),r([f(cc.Sprite)],t.prototype,"icon",void 0),r([f(cc.Node)],t.prototype,"btn_get",void 0),r([h],t)}(c.default);o.default=p,cc._RF.pop()},{"../../../framework/extension/weak_net_game/UserInfo":"UserInfo","../../../framework/extension/weak_net_game/WeakNetGame":"WeakNetGame","../../../framework/ui/ToastManager":"ToastManager","../../../framework/ui/mvcView":"mvcView"}],UIRank:[function(e,t,o){"use strict";cc._RF.push(t,"335d579hzlCrqUGnN6tZ5Zx","UIRank");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c},c=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function c(e){try{s(n.next(e))}catch(t){r(t)}}function a(e){try{s(n.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,a)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return s([e,t])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../framework/ui/mvcView"),l=e("./wxRankList"),u=e("../../../framework/utils/ccUtil"),h=e("../../../framework/ui/UIFunctions"),f=e("../../../framework/extension/weak_net_game/UserInfo"),p=e("../Common/Base/PlayerInfo"),d=e("../../../framework/extension/weak_net_game/WeakNetGame"),y=e("../../../framework/misc/Net"),v=e("../../../framework/misc/Device"),_=e("../../../framework/extension/Platform"),m=cc._decorator,g=m.ccclass,w=m.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.layout=null,t.radioGroup=null,t.modelGroup=null,t.node_worldRank=null,t.subContext=null,t.myRank={},t.lvRank=0,t.isPlayingDaily=!1,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){var e=this;this.register(this.layout,function(){return e.ranklist},this.itemAtIndex.bind(this)),this.register("panel/my/head",function(){return f.UserInfo.avatarUrl?f.UserInfo.avatarUrl:"Img/rank/moren"}),this.register("panel/my/rankIcon",function(){return 0==e.lvRank?"Img/rank/moren":"Img/rank/"+e.lvRank}),this.register("panel/my/score",function(){return((e.isPlayingDaily?p.PlayerInfo.dailylevel:p.PlayerInfo.level)||0)+"\u5173"}),this.register("panel/my/name",function(){return f.UserInfo.nickName?f.UserInfo.nickName.length<=10?f.UserInfo.nickName:f.UserInfo.nickName.substr(0,10):"\u81ea\u5df2"}),this.register("panel/my/rank",function(){return 0==e.lvRank?"\u672a\u4e0a\u699c":e.lvRank}),this.onVisible("panel/my/rankIcon",function(){return e.lvRank<4&&0!=e.lvRank}),this.onVisible("panel/my/rank",function(){return e.lvRank>3||0==e.lvRank})},t.prototype.start=function(){},t.prototype.onShow=function(){var e=this.modelGroup.toggleItems.find(function(e){return e.isChecked});0==h.default.getToggleIndex(e)?this.isPlayingDaily=!1:this.isPlayingDaily=!0;var t=this.radioGroup.toggleItems.find(function(e){return e.isChecked});0==h.default.getToggleIndex(t)?this.click_friend():this.click_world()},t.prototype.click_close=function(){l.default.instance.onClose(),vm.hide(this)},t.prototype.click_friend=function(){this.node_worldRank.active=!1,this.isPlayingDaily?l.default.instance.loadChallengLevelOpenRank():l.default.instance.loadLevelOpenRank(),this.subContext.active=!0},t.prototype.click_world=function(){l.default.instance.onClose(),this.click_world_wx()},t.prototype.click_world_wx=function(e,t){return c(this,void 0,void 0,function(){return a(this,function(o){switch(o.label){case 0:return t&&h.default.selectToggleIndex(this.radioGroup.node,1),this.node_worldRank.active=!0,e?[4,f.UserInfo.openRankAndUpload({level:p.PlayerInfo.level,challengelevel:p.PlayerInfo.dailylevel},e)]:[3,2];case 1:o.sent(),o.label=2;case 2:return this.ranklist||this.requestRank(),this.render(),this.subContext.active=!1,[2]}})})},t.prototype.requestRank=function(){var e=this,t={orderBy:this.isPlayingDaily?"challengelevel":"level",page:1,row:20};d.default.client.httpGet(o.rankUrl,t).then(function(t){if(t==y.default.Code.Timeout);else if(t){console.log(t);var o=JSON.parse(t).data;if(o){e.ranklist=o.list;for(var n=0;n<o.list.length;n++)o.list[n].avatarUrl==f.UserInfo.avatarUrl&&(e.myRank=o.list[n],e.lvRank=n);e.checkUserRank(),e.scheduleOnce(function(){return e.ranklist=null},60),console.log(o),o&&e.render()}}})},t.prototype.itemAtIndex=function(e,t,o){var n=t.nickName||t._id||"\u672a\u6388\u6743\u73a9\u5bb6",i=n.length<=5?n:n.substr(0,10),r=u.default.find("head",e,cc.Sprite),c=u.default.find("name",e,cc.Label),a=u.default.find("rank",e,cc.Label),s=u.default.find("score",e,cc.Label),l=u.default.find("rankIcon",e,cc.Sprite);l.node.active=!1,a.node.active=!1,o<3?(u.default.setDisplay(l,"Img/rank/"+(o+1)),l.node.active=!0):(a.string=o+1,a.node.active=!0),t.avatarUrl?u.default.setDisplay(r,t.avatarUrl):u.default.setDisplay(r,"Img/rank/moren"),c.string=i,s.string=(this.isPlayingDaily?t.challengelevel:t.level||0)+"\u5173"},t.prototype.checkUserRank=function(){for(var e in this.ranklist){if(this.ranklist[e].openId==p.PlayerInfo.openId)return void(this.lvRank=parseInt(e)+1);this.lvRank=0}},t.prototype.click_share=function(){v.default.playSfx("button"),_.default.share()},t.prototype.click_challenge=function(){this.isPlayingDaily=!0;var e=this.radioGroup.toggleItems.find(function(e){return e.isChecked});0==h.default.getToggleIndex(e)?this.click_friend():(this.ranklist=null,this.click_world())},t.prototype.click_normal=function(){this.isPlayingDaily=!1;var e=this.radioGroup.toggleItems.find(function(e){return e.isChecked});0==h.default.getToggleIndex(e)?this.click_friend():(this.ranklist=null,this.click_world())},t.rankUrl="",r([w(cc.Layout)],t.prototype,"layout",void 0),r([w(cc.ToggleContainer)],t.prototype,"radioGroup",void 0),r([w(cc.ToggleContainer)],t.prototype,"modelGroup",void 0),r([w(cc.Node)],t.prototype,"node_worldRank",void 0),r([w(cc.Node)],t.prototype,"subContext",void 0),o=r([g],t)}(s.default);o.default=b,cc._RF.pop()},{"../../../framework/extension/Platform":"Platform","../../../framework/extension/weak_net_game/UserInfo":"UserInfo","../../../framework/extension/weak_net_game/WeakNetGame":"WeakNetGame","../../../framework/misc/Device":"Device","../../../framework/misc/Net":"Net","../../../framework/ui/UIFunctions":"UIFunctions","../../../framework/ui/mvcView":"mvcView","../../../framework/utils/ccUtil":"ccUtil","../Common/Base/PlayerInfo":"PlayerInfo","./wxRankList":"wxRankList"}],UISetting:[function(e,t,o){"use strict";cc._RF.push(t,"e22497NQ6dNwoa3P66Mifgy","UISetting");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/misc/Device"),a=e("../../../framework/extension/weak_net_game/SettingInfo"),s=e("../../../framework/ui/mvcView"),l=e("../../../framework/utils/actionUtil"),u=cc._decorator,h=u.ccclass,f=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.music=null,t.effect=null,t.sdk=null,t}return i(t,e),t.prototype.onLoad=function(){this.musicOff=this.music.getChildByName("off"),this.effectOff=this.effect.getChildByName("off")},t.prototype.start=function(){},t.prototype.onShow=function(){l.default.jellyJump2(this.node),this.musicOff.active=!a.SettingInfo.music,this.effectOff.active=!a.SettingInfo.effect},t.prototype.click_music=function(){c.default.setBGMEnable(!a.SettingInfo.music),a.SettingInfo.saveSettings(),this.musicOff.active=!a.SettingInfo.music},t.prototype.click_effect=function(){c.default.setSFXEnable(!a.SettingInfo.effect),a.SettingInfo.saveSettings(),this.effectOff.active=!a.SettingInfo.effect},t.prototype.click_close=function(){vm.hide(this)},t.prototype.onDestroy=function(){},r([f(cc.Node)],t.prototype,"music",void 0),r([f(cc.Node)],t.prototype,"effect",void 0),r([f(cc.Node)],t.prototype,"sdk",void 0),r([h],t)}(s.default);o.default=p,cc._RF.pop()},{"../../../framework/extension/weak_net_game/SettingInfo":"SettingInfo","../../../framework/misc/Device":"Device","../../../framework/ui/mvcView":"mvcView","../../../framework/utils/actionUtil":"actionUtil"}],UISign:[function(e,t,o){"use strict";cc._RF.push(t,"def1dPA325M7pKG0xS3zYXZ","UISign");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/utils/ccUtil"),a=e("../Common/Base/PlayerInfo"),s=e("../../../framework/utils/gameUtil"),l=e("../../../framework/extension/weak_net_game/WeakNetGame"),u=e("../../../framework/core/event"),h=e("../../../framework/ui/mvcView"),f=e("../../../framework/utils/mathf"),p=e("../../../framework/misc/display"),d=e("../../../framework/extension/weak_net_game/UserInfo"),y=e("../../../framework/ui/ToastManager"),v=e("../../../framework/utils/actionUtil"),_=e("../Main"),m=cc._decorator,g=m.ccclass,w=m.property,b=function(){function e(e){this.label_title=null,this.icon=null,this.label_num=null,this.node_claimed=null,this.label_title=c.default.find("title",e,cc.Label),this.icon=c.default.find("icon",e,cc.Sprite),this.label_num=c.default.find("num",e,cc.Label),this.node_claimed=e.getChildByName("claimed")}return e.prototype.setData=function(e,t,o){void 0===o&&(o=!1),this.node_claimed.active=t,o&&(e.imageUrl=e.iconLoop),e.imageUrl&&c.default.setDisplay(this.icon,e.imageUrl),this.label_title.string="\u7b2c"+e.day+"\u65e5",this.label_num&&(this.label_num.string="x"+e.num)},e}(),k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dayContainer=null,t.days=[],t.daysData=[],t.toggle=null,t.btnstring_label=null,t.seven_label=null,t.btn_claim=null,t.claimedTip_label=null,t.claimedTip=null,t.icon_ad=null,t.isLoop=!1,t}return i(t,e),t.prototype.onLoad=function(){var e=this;this.dayContainer.children.forEach(function(t){var o=new b(t);e.days.push(o)}),csv.Sign.values.forEach(function(t,o){e.daysData.push({type:t.type,day:o+1,imageUrl:t.icon,num:t.number,btnString:t.btnString,iconLoop:t.iconLoop,typeLoop:t.typeLoop,btnLoopString:t.btnLoopString})}),this.register(this.btn_claim,this.click_checkIn),this.icon_ad.active=!1},t.prototype.onShown=function(){v.default.jellyJump2(this.node);var e=0;a.PlayerInfo.signCount>=7&&(this.isLoop=!0);for(var t=0;t<this.days.length;t++){var o=t,n=this.days[t],i=o<f.default.Repeat(a.PlayerInfo.signCount,7);e=i?e+1:e,n.setData(this.daysData[t],i,this.isLoop)}if(e==this.days.length)return this.btn_claim.node.active=!1,this.claimedTip.active=!1,void(this.claimedTip_label.active=!0);var r=f.default.Repeat(a.PlayerInfo.signCount,7),c=this.daysData[r];this.isLoop?(this.btnstring_label.string=c.btnLoopString,this.seven_label.node.active=!1):this.btnstring_label.string=c.btnString,this.updateStatus()},t.prototype.updateStatus=function(e){if(s.default.isNextDay(a.PlayerInfo.signTime)?(this.btn_claim.node.active=!0,this.claimedTip.active=!1,this.claimedTip_label.active=!0):(this.btn_claim.node.active=!1,this.claimedTip.active=!0,this.claimedTip_label.active=!1),e){var t=this.days[e],o=this.daysData[e];t.setData(o,e<f.default.Repeat(a.PlayerInfo.signCount,7),this.isLoop)}},t.prototype.check_double=function(){this.icon_ad.active=this.toggle.isChecked},t.prototype.click_checkIn=function(){this.toggle.isChecked?l.default.doChoice("SOV_Sign_Double",this.claimDouble,this):this.claim(),vm.hide(this)},t.prototype.claimDouble=function(){this.claim(2),vm.hide(this)},t.prototype.claim=function(e){void 0===e&&(e=1);var t=f.default.Repeat(a.PlayerInfo.signCount,7);_.default.instance.qiandao_hongdian.active=!1,a.PlayerInfo.signTime=Date.now(),a.PlayerInfo.signCount++,a.PlayerInfo.save();var o=this.daysData[t];this.isLoop&&(o.type=o.typeLoop),1==o.type?(a.PlayerInfo.labour+=o.num*e,u.evt.emit("Game.getTili",p.default.center,o.num*e)):2==o.type?(d.UserInfo.gun_num+=o.num*e,d.UserInfo.snowball_num+=o.num*e,d.UserInfo.magnet_num+=o.num*e,y.Toast.make("\u606d\u559c\u83b7\u5f97\u9053\u5177\u793c\u5305"),d.UserInfo.save()):(a.PlayerInfo.unlockSkin(13),y.Toast.make("\u606d\u559c\u83b7\u5f97\u9650\u5b9a\u76ae\u80a4")),this.updateStatus(t)},t.prototype.click_close=function(){vm.hide(this)},r([w(cc.Node)],t.prototype,"dayContainer",void 0),r([w(cc.Toggle)],t.prototype,"toggle",void 0),r([w(cc.Label)],t.prototype,"btnstring_label",void 0),r([w(cc.Label)],t.prototype,"seven_label",void 0),r([w(cc.Button)],t.prototype,"btn_claim",void 0),r([w(cc.Node)],t.prototype,"claimedTip_label",void 0),r([w(cc.Node)],t.prototype,"claimedTip",void 0),r([w(cc.Node)],t.prototype,"icon_ad",void 0),r([g],t)}(h.default);o.default=k,cc._RF.pop()},{"../../../framework/core/event":"event","../../../framework/extension/weak_net_game/UserInfo":"UserInfo","../../../framework/extension/weak_net_game/WeakNetGame":"WeakNetGame","../../../framework/misc/display":"display","../../../framework/ui/ToastManager":"ToastManager","../../../framework/ui/mvcView":"mvcView","../../../framework/utils/actionUtil":"actionUtil","../../../framework/utils/ccUtil":"ccUtil","../../../framework/utils/gameUtil":"gameUtil","../../../framework/utils/mathf":"mathf","../Common/Base/PlayerInfo":"PlayerInfo","../Main":"Main"}],UISkinItem:[function(e,t,o){"use strict";cc._RF.push(t,"f9266mBnQxD75ShE+Sk+oL5","UISkinItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c,a,s=e("../../../framework/ui/mvcView"),l=e("../../../framework/ui/controller/Switcher"),u=e("../Common/Base/PlayerInfo"),h=e("../../../framework/extension/Platform"),f=e("../../../framework/core/event"),p=e("../../../framework/ui/ToastManager"),d=e("./UISkin"),y=e("../../../framework/extension/weak_net_game/UserInfo"),v=cc._decorator,_=v.ccclass,m=v.property;(function(e){e[e.Level=1]="Level",e[e.Star=2]="Star",e[e.Video=3]="Video",e[e.Default=4]="Default"})(c||(c={})),function(e){e[e.Choosed=0]="Choosed",e[e.Locked=1]="Locked",e[e.UnlockVideo=2]="UnlockVideo",e[e.Unlocked=3]="Unlocked"}(a||(a={}));var g=(new cc.Color).fromHEX("#FFFBDA"),w=((new cc.Color).fromHEX("#504B68"),(new cc.Color).fromHEX("#82FF52")),b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nameLabel=null,t.switcher=null,t.unlockDesc=null,t.unlockIcon=null,t.icon=null,t.btn_unlock_video=null,t.btn_unlock=null,t.btn_select=null,t.redPoint=null,t}return i(t,e),t.prototype.onLoad=function(){var e=this;f.evt.on("Guide.unlockSkin",this.onGuideUnlock,this),f.evt.on("Guide.useSkin",this.onGuideSelect,this),this.register(this.switcher,function(t){if(e.node.color=cc.Color.WHITE,e.btn_unlock.node.color=cc.Color.WHITE,e.node.opacity=255,u.PlayerInfo.isSkinUnlocked(t.id))return u.PlayerInfo.isSkinUsing(t.id)?(e.node.color=g,a.Choosed):a.Unlocked;if(t.unlockType==c.Video)return a.UnlockVideo;if(t.unlockType==c.Level||t.unlockType==c.Star){var o=e.canUnlock();e.redPoint.active=o,o?e.btn_unlock.node.color=w:e.node.opacity=222}return a.Locked}),this.register(this.unlockDesc,function(e){return e.unlockType==c.Star?" x"+e.unlock2+"\u9897\u89e3\u9501":"Lv"+e.unlock1+"\u5173\u89e3\u9501 "}),this.register(this.nameLabel,function(e){return e.name}),this.register(this.icon,function(e){return"Img/skin/thumbnail/"+e.type+"/"+e.thumbnail}),this.onVisible(this.unlockIcon.node,function(e){return e.unlockType==c.Star}),this.register(this.btn_unlock_video,this.click_unlockvideo),this.register(this.btn_unlock,this.click_unlock),this.register(this.btn_select,this.click_select)},t.prototype.onDestroy=function(){f.evt.off(this)},t.prototype.canUnlock=function(){var e=this.getData();return e.unlockType==c.Level&&u.PlayerInfo.level>=e.unlock1||e.unlockType==c.Star&&u.PlayerInfo.star>=e.unlock2||e.unlockType==c.Video},t.prototype.click_unlockvideo=function(){h.default.watch_video(this.onvideocallback,this)},t.prototype.unlock=function(){var e=this.getData();u.PlayerInfo.unlockSkin(e.id),p.Toast.make("\u5df2\u89e3\u9501\uff1a"+e.name),this.render(e)},t.prototype.onvideocallback=function(){this.unlock()},t.prototype.click_unlock=function(){var e=this.getData();this.canUnlock()?(u.PlayerInfo.unlockSkin(e.id),p.Toast.make("\u5df2\u89e3\u9501\uff1a"+e.name),f.evt.emit("UISkin.checkLock"),this.render(e)):1==e.unlockType?p.Toast.make("\u8fbe\u5230"+e.unlock1+"\u5173\u89e3\u9501"):2==e.unlockType&&p.Toast.make("\u83b7\u53d6"+e.unlock2+"\u9897\u661f\u661f\u89e3\u9501")},t.prototype.click_select=function(){var e=this.getData();e.type==d.SkinType.Theme?y.UserInfo.theme=e.data:u.PlayerInfo.isSkinUnlocked(e.id)&&(u.PlayerInfo.useSkin(e.id),this.render(e),f.evt.emit("Skin.select",e))},t.prototype.click_unlockstar=function(){},t.prototype.onGuideUnlock=function(){var e=this.getData();e&&20===e.id&&this.click_unlock()},t.prototype.onGuideSelect=function(){var e=this.getData();e&&20===e.id&&this.click_select()},r([m(cc.Label)],t.prototype,"nameLabel",void 0),r([m(l.default)],t.prototype,"switcher",void 0),r([m(cc.Label)],t.prototype,"unlockDesc",void 0),r([m(cc.Sprite)],t.prototype,"unlockIcon",void 0),r([m(cc.Sprite)],t.prototype,"icon",void 0),r([m(cc.Button)],t.prototype,"btn_unlock_video",void 0),r([m(cc.Button)],t.prototype,"btn_unlock",void 0),r([m(cc.Button)],t.prototype,"btn_select",void 0),r([m(cc.Node)],t.prototype,"redPoint",void 0),r([_],t)}(s.default);o.default=b,cc._RF.pop()},{"../../../framework/core/event":"event","../../../framework/extension/Platform":"Platform","../../../framework/extension/weak_net_game/UserInfo":"UserInfo","../../../framework/ui/ToastManager":"ToastManager","../../../framework/ui/controller/Switcher":"Switcher","../../../framework/ui/mvcView":"mvcView","../Common/Base/PlayerInfo":"PlayerInfo","./UISkin":"UISkin"}],UISkin:[function(e,t,o){"use strict";cc._RF.push(t,"1f339zSGzVJeKBnaWMjJbHU","UISkin");var n,i,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),c=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.SkinType=void 0;var a,s,l=e("../../../framework/ui/mvcView"),u=e("../../../framework/utils/ccUtil"),h=e("../../../framework/core/event"),f=e("../Common/Base/PlayerInfo"),p=e("../../../framework/ui/ToastManager"),d=e("../../../framework/extension/weak_net_game/UserInfo"),y=e("../../../framework/extension/Platform"),v=cc._decorator,_=v.ccclass,m=v.property;(function(e){e[e.Female=1]="Female",e[e.Male=2]="Male",e[e.Theme=3]="Theme"})(a||(a={})),function(e){e[e.Hair=0]="Hair",e[e.Hat=1]="Hat",e[e.Up=2]="Up",e[e.Down=3]="Down",e[e.Misc=4]="Misc",e[e.Theme=5]="Theme",e[e.Key=6]="Key"}(s=o.SkinType||(o.SkinType={}));var g=((i={})[s.Hair]={name:"\u5934\u53d1",color:"#FA8F4A"},i[s.Hat]={name:"\u5e3d\u5b50",color:"#FA8F4A"},i[s.Up]={name:"\u4e0a\u8eab",color:"#FA8F4A"},i[s.Down]={name:"\u4e0b\u8eab",color:"#FA8F4A"},i[s.Misc]={name:"\u9644\u4ef6",color:"#00D893"},i[s.Theme]={name:"\u4e3b\u9898\u80cc\u666f",color:"#0B88FF"},i[s.Key]={name:"\u94a5\u5319",color:"#00D893"},i),w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.layout=null,t.titleNode=null,t.listLayout=null,t.label_star_free=null,t._tab=2,t.tabs_loaded=[],t.all_cls={},t._first=!0,t}return r(t,e),Object.defineProperty(t.prototype,"tabIndex",{get:function(){return this._tab},set:function(e){-1==e&&(e=a.Theme),this._tab!=e&&(this._tab=e,this.selectTab(e))},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.register(this.label_star_free,function(){return"\u83b7\u53d6"+csv.Config.skin_store_free_star}),this.loadTab(),this._tab=3,this.updateTab(this._tab),h.evt.on("Skin.select",this.onSelect,this),y.default.hideBannerAd()},t.prototype.onDestroy=function(){h.evt.off("Skin.select",this.onSelect,this)},t.prototype.onSelect=function(e){var t=this.all_cls[e.subType].content.getComponent(cc.Layout);this.renderLayout(t),p.Toast.make("\u5df2\u9009\u62e9:"+e.name),e.subType==s.Theme?d.UserInfo.theme=e.data:e.subType==s.Key&&(d.UserInfo.theme_key=e.data),d.UserInfo.save("theme"),d.UserInfo.save("theme_key")},t.prototype.loadTab=function(){for(var e=0;e<=s.Key;e++)this.initClass(e);this.titleNode.active=!1,this.listLayout.node.active=!1},t.prototype.selectTab=function(e){this.tabIndex=e,this.updateTab(e)},t.prototype.enableCls=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var o in this.all_cls){var n=parseInt(o),i=this.all_cls[o],r=e.indexOf(n)>=0;i.title.active=r,i.content.active=r}},t.prototype.updateTab=function(e){e==a.Theme?this.enableCls(s.Theme,s.Key):this.enableCls(s.Hair,s.Hat,s.Up,s.Down,s.Misc),1!=this._first?this.render():this._first=!1},t.prototype.initClass=function(e){var t=g[e],o=cc.instantiate(this.titleNode);this.layout.node.addChild(o),u.default.find("label",o,cc.Label).string=t.name,t.color&&(o.color=(new cc.Color).fromHEX(t.color));var n=cc.instantiate(this.listLayout.node);this.layout.node.addChild(n);var i=n.getComponent(cc.Layout);this.register(i,this.skinsForType.bind(this,e)),this.all_cls[e]={title:o,content:n}},t.prototype.skinsForType=function(e){var t=this;return csv.Skin.search(function(o){return o.type==t.tabIndex&&o.subType==e})},t.prototype.onToggle=function(e,t){this.tabIndex=parseInt(t)},t.prototype.onShow=function(){h.evt.emit("UISkin.checkLock"),this.render()},t.prototype.click_close=function(){vm.hide(this)},t.prototype.click_getstar=function(){y.default.watch_video(this.video_callback,this)},t.prototype.video_callback=function(){f.PlayerInfo.star+=csv.Config.skin_store_free_star||3,f.PlayerInfo.save("star")},c([m(cc.Layout)],t.prototype,"layout",void 0),c([m(cc.Node)],t.prototype,"titleNode",void 0),c([m(cc.Layout)],t.prototype,"listLayout",void 0),c([m(cc.Label)],t.prototype,"label_star_free",void 0),c([_],t)}(l.default);o.default=w,cc._RF.pop()},{"../../../framework/core/event":"event","../../../framework/extension/Platform":"Platform","../../../framework/extension/weak_net_game/UserInfo":"UserInfo","../../../framework/ui/ToastManager":"ToastManager","../../../framework/ui/mvcView":"mvcView","../../../framework/utils/ccUtil":"ccUtil","../Common/Base/PlayerInfo":"PlayerInfo"}],UISkip:[function(e,t,o){"use strict";cc._RF.push(t,"1fff0lSIdFN15dcQJQ9V+vD","UISkip");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/ui/mvcView"),a=e("../Common/Base/PlayerInfo"),s=e("../Game"),l=e("../../../framework/extension/weak_net_game/WeakNetGame"),u=e("../../../framework/extension/aldsdk/StatHelper"),h=e("../../../framework/extension/weak_net_game/UserInfo"),f=e("../../../framework/extension/weak_net_game/IconSov"),p=e("../../../framework/utils/actionUtil"),d=cc._decorator,y=d.ccclass,v=d.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.close_btn=null,t.sdk=null,t.isVideo=!1,t}return i(t,e),t.prototype.onLoad=function(){this.registerSubViews(f.default)},t.prototype.onShow=function(e){p.default.jellyJump2(this.node),this.callback=e,this.isVideo=!1,this.render(),this.close_btn.active=!0},t.prototype.start=function(){},t.prototype.click_close=function(){vm.hide(this)},t.prototype.click_skip=function(){var e=this;cc.director.pause(),l.default.doChoice("SOV_Skip_Level",function(){cc.director.resume(),h.UserInfo.isNew&&u.default.sendPath("\u65b0\u7528\u6237\u8df3\u5173\u4eba\u6570","\u5173\u5361",a.PlayerInfo.playinglevel),vm.hide(e),s.default.instance.onWin()},this)},t.prototype.onHidden=function(){this.isVideo&&this.callback&&this.callback()},r([v(cc.Node)],t.prototype,"close_btn",void 0),r([v(cc.Node)],t.prototype,"sdk",void 0),r([y],t)}(c.default);o.default=_,cc._RF.pop()},{"../../../framework/extension/aldsdk/StatHelper":"StatHelper","../../../framework/extension/weak_net_game/IconSov":"IconSov","../../../framework/extension/weak_net_game/UserInfo":"UserInfo","../../../framework/extension/weak_net_game/WeakNetGame":"WeakNetGame","../../../framework/ui/mvcView":"mvcView","../../../framework/utils/actionUtil":"actionUtil","../Common/Base/PlayerInfo":"PlayerInfo","../Game":"Game"}],UISubscriber:[function(e,t,o){"use strict";cc._RF.push(t,"01b50uXqhxIy6wZH0bb5lx1","UISubscriber");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/ui/mvcView"),a=e("../../../framework/extension/wxsdk/sdk"),s=e("../../../framework/ui/ToastManager"),l=e("../../../framework/extension/weak_net_game/UserInfo"),u=e("../../../framework/extension/weak_net_game/WeakNetGame"),h=e("../Common/Base/ServerConfig"),f=e("../../../framework/misc/Net"),p=e("../Common/code"),d=cc._decorator,y=d.ccclass,v=d.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_close=null,t.isSuccess=!1,t}return i(t,e),t.prototype.onLoad=function(){var e=this;this.onClick(this.btn_close,function(){return e.click_close()})},t.prototype.onShow=function(e){this.callback=e,this.render()},t.prototype.click_close=function(){vm.hide(this)},t.prototype.click_subscriber=function(){var e=this;a.wxsdk.requestSubscribeMessage().then(function(){return e.notifyServer()}).catch(function(){s.Toast.make("\u8ba2\u9605\u5931\u8d25!")})},t.prototype.notifyServer=function(){vm.hide(this),u.default.client.httpGet(h.Api.subscribe).then(function(e){if(e==f.default.Code.Timeout)console.log("\u8fde\u63a5\u8d85\u65f6\uff01");else if(e){var t=JSON.parse(e);0==t.errno?(t=t.data,console.log("\u8fd4\u56de\u6570\u636e",t),s.Toast.make("\u8ba2\u9605\u6210\u529f"),l.UserInfo.isDy=!0,l.UserInfo.save(),vm.show("Prefabs/UI/UIGetSuccess",csv.Config.Subscriber_Success)):(console.log("\u8fd4\u56de\u9519\u8bef\u7801"+t.errno),t.errno==p.Code.Subscribe_ERROR&&(s.Toast.make(t.errmsg),l.UserInfo.isDy=!0,l.UserInfo.save()))}})},r([v(cc.Node)],t.prototype,"btn_close",void 0),r([y],t)}(c.default);o.default=_,cc._RF.pop()},{"../../../framework/extension/weak_net_game/UserInfo":"UserInfo","../../../framework/extension/weak_net_game/WeakNetGame":"WeakNetGame","../../../framework/extension/wxsdk/sdk":"sdk","../../../framework/misc/Net":"Net","../../../framework/ui/ToastManager":"ToastManager","../../../framework/ui/mvcView":"mvcView","../Common/Base/ServerConfig":"ServerConfig","../Common/code":"code"}],UIUnlockMode:[function(e,t,o){"use strict";cc._RF.push(t,"ae375vdSw9CYaa3R4KPbiQl","UIUnlockMode");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../Common/Base/LoadingScene"),a=cc._decorator,s=a.ccclass,l=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.onShown=function(){},t.prototype.click_enterChallenge=function(){c.default.goto("Main","Prefabs/UI/UIChallengeChapter")},t.prototype.click_exit=function(){vm.hide(this)},r([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../Common/Base/LoadingScene":"LoadingScene"}],UIUnlockSkin:[function(e,t,o){"use strict";cc._RF.push(t,"82fd0OPCltNVZ97it2ny6YA","UIUnlockSkin");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/ui/mvcView"),a=e("./UIPersonSkin"),s=e("../../../framework/core/event"),l=e("../Common/Base/PlayerInfo"),u=cc._decorator,h=u.ccclass,f=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.shouzhi=null,t.data=null,t}return i(t,e),t.prototype.onLoad=function(){var e=this;this.register(this.icon,function(){return"Img/skin/thumbnail/"+e.data.type+"/"+e.data.thumbnail})},t.prototype.onShow=function(e){this.data=csv.Skin.get(e),this.render()},t.prototype.click_tomain=function(){this.data.subType===a.SkinType.Theme||this.data.subType===a.SkinType.Key?(vm.hide(this),vm.show("Prefabs/UI/UISkin")):s.evt.emit("Main.skin")},t.prototype.click_close=function(){this.data&&this.data.id&&l.PlayerInfo.unlockSkin(this.data.id),vm.hide(this)},r([f(cc.Sprite)],t.prototype,"icon",void 0),r([f(cc.Animation)],t.prototype,"shouzhi",void 0),r([h],t)}(c.default);o.default=p,cc._RF.pop()},{"../../../framework/core/event":"event","../../../framework/ui/mvcView":"mvcView","../Common/Base/PlayerInfo":"PlayerInfo","./UIPersonSkin":"UIPersonSkin"}],UIUnlock:[function(e,t,o){"use strict";cc._RF.push(t,"2c6e3bF5fxEQr95FFZZfR5D","UIUnlock");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../framework/ui/mvcView"),a=e("../Common/Base/LoadingScene"),s=e("../Common/Base/PlayerInfo"),l=cc._decorator,u=l.ccclass,h=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){},t.prototype.onShow=function(){},t.prototype.click_tomain=function(){a.default.goto("Main"),s.PlayerInfo.isInGuide=!0},r([u],t)}(c.default));o.default=h,cc._RF.pop()},{"../../../framework/ui/mvcView":"mvcView","../Common/Base/LoadingScene":"LoadingScene","../Common/Base/PlayerInfo":"PlayerInfo"}],UIWin:[function(e,t,o){"use strict";cc._RF.push(t,"e7107epGuFLy5NGrPQkHzLS","UIWin");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c},c=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function c(e){try{s(n.next(e))}catch(t){r(t)}}function a(e){try{s(n.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,a)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return s([e,t])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../framework/ui/mvcView"),l=e("../Common/Base/LoadingScene"),u=e("../Game"),h=e("../../../framework/core/event"),f=e("../../../framework/misc/Device"),p=e("../../../framework/ui/ToastManager"),d=e("../../../framework/extension/weak_net_game/UserInfo"),y=e("../../../framework/extension/Platform"),v=e("../sdk/wegame"),_=e("../Common/CloudFuncTypes"),m=e("../Common/Base/PlayerInfo"),w=e("../../../framework/extension/weak_net_game/WeakNetGame"),b=e("../Common/Unity"),k=e("../../../framework/misc/display"),S=e("../Common/Const"),C=e("../../../framework/ui/controller/Switcher"),I=e("../views/WinGift"),P=e("../../../framework/extension/aldsdk/umeng"),O=cc._decorator,x=O.ccclass,R=O.property,T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_next=null,t.next_btn=null,t.btn_get=null,t.isclick=!1,t.isNextDraw=!1,t.again_btn=null,t.switch=null,t.setting=null,t.hint_label=null,t.level_label=null,t.switcher=null,t.share_video=null,t.youlike=null,t.drawer=null,t.isGetLabour=!1,t.winGift=null,t.dialogToShow=null,t}return i(t,e),t.prototype.onLoad=function(){var e=this;this.register(this.share_video,function(){return b.default.iconSOV(w.default.getChoice("SOV_Win_Get"))}),this.register(this.hint_label,function(){return e.showHintLabel()}),this.register(this.level_label,function(){return e.showLevelLabel()}),this.onClick(this.btn_get,function(){return e.click_getLabour()}),this.onInteractable(this.btn_get,function(){return!e.isGetLabour}),this.winGift_OriginPos=this.winGift.node.position},t.prototype.openEnergyPackage=function(){var e=this;m.PlayerInfo.labour<=2&&v.default.tryOpenCheat(_.CloudFuncType.Energy_Package).then(function(){m.PlayerInfo.winLink=0,e.dialogToShow="UIEnergyPackage"})},t.prototype.onDisable=function(){this.switch.index=0},t.prototype.onResume=function(){y.default.reloadBannerAd()},t.prototype.init=function(){return c(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return this.isGetLabour=!1,this.render(),this.isclick=!1,this.isNextDraw=!1,this.dialogToShow=null,f.default.playSfx("win"),m.PlayerInfo.nextLevel()?[4,h.evt.wait("View.onHidden")]:[3,2];case 1:e.sent(),e.label=2;case 2:return m.PlayerInfo.level>11?(this.winGift.node.position=this.winGift_OriginPos,this.winGift.show()):this.winGift.hide(),[2]}})})},t.prototype.onShown=function(){var e=this;h.evt.on("Game.Resume",this.onResume,this);var t=this.getComponentInChildren(cc.ParticleSystem);if(t&&t.resetSystem(),m.PlayerInfo.isPlayingDaily)this.switch.node.active=!1;else{this.switch.node.active=!0;var o=0;this.schedule(function(){var t=e.switch.children[o].getChildByName("xxing");cc.tween(t).to(.2,{scale:1.6}).to(.2,{scale:1}).start(),e.switch.index=o,++o>Math.min(u.default.instance.star,3)&&e.unscheduleAllCallbacks()},.3),m.PlayerInfo.level_star[m.PlayerInfo.playinglevel]<u.default.instance.star&&(m.PlayerInfo.star+=u.default.instance.star-m.PlayerInfo.level_star[m.PlayerInfo.playinglevel],m.PlayerInfo.level_star[m.PlayerInfo.playinglevel]=u.default.instance.star)}this.init(),cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_ANDROID||(this.next_btn.active=!0)},t.prototype.start=function(){},t.prototype.showHintLabel=function(){return m.PlayerInfo.playinglevel!=m.PlayerInfo.level||m.PlayerInfo.isPlayingDaily?(this.hint_label.node.active=!1,""):m.PlayerInfo.playinglevel==10*S.default.Chapter_Unlock?"\u66f4\u591a\u5173\u5361\uff01\u5373\u5c06\u4e0a\u7ebf":m.PlayerInfo.playinglevel%10==0?"\u65b0\u7ae0\u8282\u5df2\u89e3\u9501":"\u8fd8\u5dee"+(10-m.PlayerInfo.level%10)+"\u5173\u89e3\u9501\u7b2c"+(Math.ceil(m.PlayerInfo.level/10)+1)+"\u7ae0"},t.prototype.showLevelLabel=function(){return"\u7b2c"+m.PlayerInfo.getCurrentPlayingLevel()+"\u5173"},t.prototype.click_level=function(){m.PlayerInfo.isPlayingDaily?vm.show("Prefabs/UI/UIChallengeChapter"):vm.show("Prefabs/UI/UIChapter")},t.prototype.click_setting=function(){vm.show("Prefabs/UI/UISetting")},t.prototype.click_skin=function(){h.evt.emit("Main.skin")},t.prototype.nextRandomLevel=function(){return console.log("\u968f\u673a\u5173\u5361"),m.PlayerInfo.isPlayingDaily?csv.daily_level.get(g.randomInt(1,m.PlayerInfo.maxDailyLv)).id:csv.level.get(g.randomInt(2,csv.level.size)).id},t.prototype.click_next=function(){this.continue()},t.prototype.check_getgun=function(){var e=this;if(!d.UserInfo.gun_num&&!d.UserInfo.isGetGunEnd){var t=Math.random();if(m.PlayerInfo.level>=csv.Config.Start_Lv_Get_Gun&&d.UserInfo.gunViewDay<csv.Config.Get_Gun_Limt_Day&&d.UserInfo.gunView<csv.Config.Get_Gun_Limt&&t<csv.Config.Get_Gun_Pro)return void vm.show("Prefabs/UI/UIGetGun",function(){e.continue()},"isGetGunEnd")}this.continue()},t.prototype.continue=function(){var e=this;if(!this.isclick){if(m.PlayerInfo.isPlayingDaily){if(m.PlayerInfo.playingDailyLevel>m.PlayerInfo.maxDailyLv)return vm.show("Prefabs/UI/UIChallengeChapter"),void p.Toast.make("\u5df2\u6311\u6218\u81f3\u6700\u65b0\u8fdb\u5ea6")}else if(m.PlayerInfo.playinglevel>csv.level.size)return void l.default.goto("Main");m.PlayerInfo.labour>0?(this.isclick=!0,this.flytili()):vm.show("Prefabs/UI/UIGetLabour",function(){e.flytili()},!1)}},t.prototype.goNext=function(){return c(this,void 0,void 0,function(){return a(this,function(){return m.PlayerInfo.isPlayingDaily?m.PlayerInfo.isRandomLevel&&(m.PlayerInfo.playingDailyLevel=this.nextRandomLevel()):m.PlayerInfo.isRandomLevel&&(m.PlayerInfo.playinglevel=this.nextRandomLevel()),u.default.instance.loader.level=m.PlayerInfo.getCurrentPlayingLevel(),m.PlayerInfo.save(),vm.hide(this),[2]})})},t.prototype.flytili=function(){var e=this,t=cc.instantiate(u.default.instance.tili),o=new cc.Vec2(this.btn_next.position.x,this.btn_next.position.y),n=u.default.instance.tili.getBoundingBoxToWorld().center,i=this.btn_next.parent.convertToNodeSpaceAR(n),r=cc.moveTo(.5,o).easing(cc.easeSineOut()),c=cc.sequence(r,cc.callFunc(function(){t.destroy(),m.PlayerInfo.labour--,e.goNext()}));t.parent=this.btn_next.parent,t.setPosition(i),t.runAction(c)},t.prototype.click_home=function(){l.default.goto("Main")},t.prototype.onHidden=function(){h.evt.off(this)},t.prototype.onDestroy=function(){h.evt.off(this)},t.prototype.click_getLabour=function(){var e=this;P.umeng.onEvent("rewardAd","labourWinShow"),w.default.doChoice("SOV_Win_Get",function(){e.isGetLabour=!0;var t=csv.Config.Get_Energey_Count||3;m.PlayerInfo.labour+=t,m.PlayerInfo.save("labour"),P.umeng.onEvent("rewardAd","labourWinRewarded"),h.evt.emit("Game.getTili",k.default.center,t),p.Toast.make("\u83b7\u5f97"+t+"\u70b9\u4f53\u529b"),e.render()},this)},r([R(cc.Node)],t.prototype,"btn_next",void 0),r([R(cc.Node)],t.prototype,"next_btn",void 0),r([R(cc.Node)],t.prototype,"btn_get",void 0),r([R(cc.Node)],t.prototype,"again_btn",void 0),r([R(C.default)],t.prototype,"switch",void 0),r([R(cc.Node)],t.prototype,"setting",void 0),r([R(cc.Label)],t.prototype,"hint_label",void 0),r([R(cc.Label)],t.prototype,"level_label",void 0),r([R(C.default)],t.prototype,"switcher",void 0),r([R(cc.Sprite)],t.prototype,"share_video",void 0),r([R(I.default)],t.prototype,"winGift",void 0),r([x],t)}(s.default);o.default=T,cc._RF.pop()},{"../../../framework/core/event":"event","../../../framework/extension/Platform":"Platform","../../../framework/extension/aldsdk/umeng":"umeng","../../../framework/extension/weak_net_game/UserInfo":"UserInfo","../../../framework/extension/weak_net_game/WeakNetGame":"WeakNetGame","../../../framework/misc/Device":"Device","../../../framework/misc/display":"display","../../../framework/ui/ToastManager":"ToastManager","../../../framework/ui/controller/Switcher":"Switcher","../../../framework/ui/mvcView":"mvcView","../Common/Base/LoadingScene":"LoadingScene","../Common/Base/PlayerInfo":"PlayerInfo","../Common/CloudFuncTypes":"CloudFuncTypes","../Common/Const":"Const","../Common/Unity":"Unity","../Game":"Game","../sdk/wegame":"wegame","../views/WinGift":"WinGift"}],Unity:[function(e,t,o){"use strict";cc._RF.push(t,"36ba05JWY9AWqyBI3uQZhxn","Unity"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Base/PlayerInfo"),i=function(){function e(){}return e.iconSOV=function(e){return 0==e?this.Icon_Share:this.Icon_Video},e.loadSkin=function(e,t){var o=e.armature();t.res&&t.res.split("/").map(function(e){return e.split(":")}).forEach(function(e){var t=e[0],n=parseInt(e[1]);o.getSlot(t).displayIndex=n})},e.loadSkins=function(e,t){for(var o in n.PlayerInfo.skins)if(2==n.PlayerInfo.skins[o]){var i=csv.Skin.get(o);i.type==t&&this.loadSkin(e,i)}},e.Icon_Share="Img/share",e.Icon_Video="Img/shipin",e}();o.default=i,cc._RF.pop()},{"./Base/PlayerInfo":"PlayerInfo"}],UserInfo:[function(e,t,o){"use strict";cc._RF.push(t,"2abb5gr/JJEPpb5X5GoI1Nr","UserInfo");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c},c=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function c(e){try{s(n.next(e))}catch(t){r(t)}}function a(e){try{s(n.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,a)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return s([e,t])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.UserInfo=void 0;var s=e("../../core/DataCenter"),l=e("./WeakNetGame"),u=e("../../utils/gameUtil"),h=e("../Platform"),f=!0,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lastLoginTime=0,t.isFirstLoginToday=!1,t.isFirstEnterGame=!0,t.sharecount=0,t.nickName="",t.kaipingcount=0,t.userId="",t.avatarUrl="",t.lose_num=1,t.firstLoginTime=0,t.lastExitTime=0,t.gender=0,t.isNew=!1,t.isFirstGameOver=!0,t.FirstGameOverTime=0,t.isDy=!1,t.isKf=!1,t.tmpIskf=!1,t.tmpIsSc=!1,t.isGetKf=!1,t.kfTime=0,t.isSc=!1,t.isGetSc=!1,t.isUse=!1,t.gun_num=0,t.snowball_num=0,t.magnet_num=0,t.isGetGunStart=!1,t.isGetGunEnd=!1,t.getGunTime=0,t.return_num=1,t.return_level=0,t.record_path="",t.start_time=0,t.record_time=0,t.freedrawTime=0,t.auth=!1,t.gunView=0,t.gunViewDay=0,t.theme=1,t.isunlock_girl=0,t.isunlock_girl1=0,t.isunlock_girl2=0,t.isunlock_girl3=0,t.isunlock_girl4=0,t.isunlock_girl5=0,t.isunlock_men=0,t.isunlock_men1=0,t.isunlock_men2=0,t.isunlock_men3=0,t.isunlock_men4=0,t.isunlock_men5=0,t.isunlock_theme=0,t.theme_key=1,t}return i(t,e),Object.defineProperty(t.prototype,"userType",{get:function(){return this.isNew?"(\u65b0\u73a9\u5bb6)":"(\u8001\u73a9\u5bb6)"},enumerable:!1,configurable:!0}),t.prototype.exitGame=function(){this.lastExitTime=Date.now()/1e3,this.save("lastExitTime")},t.prototype.onLoadAll=function(){0==this.firstLoginTime&&(this.firstLoginTime=Date.now()),u.default.isNextDay(this.firstLoginTime)?this.isNew=!1:this.isNew=!0,u.default.isNextDay(this.lastLoginTime)?(this.lastLoginTime=Date.now(),this.isFirstLoginToday=!0,this.isUse=!1,this.isGetGunStart=!1,this.isGetGunEnd=!1,this.sharecount=0,this.kaipingcount=0,this.lose_num=1,this.return_num=1,this.gunViewDay=0):this.isFirstLoginToday=!1,u.default.isNextDay(this.kfTime)&&(this.isKf=!1),u.default.isNextDay(this.FirstGameOverTime)?this.isFirstGameOver=!0:this.isFirstGameOver=!1,isEmpty(this.userId)&&(this.userId=g.uuid(32,16)),this.save()},t.prototype.uploadUserInfo=function(e){return c(this,void 0,void 0,function(){var t,n,i;return a(this,function(r){switch(r.label){case 0:if(isEmpty(o.UserInfo.userId))return[2,-1];r.label=1;case 1:for(n in r.trys.push([1,3,,4]),t={},e)t[n]=e[n];return[4,l.default.syncData(JSON.stringify(t))];case 2:return r.sent(),[3,4];case 3:return i=r.sent(),console.error("\u4e0a\u4f20\u6570\u636e\u5931\u8d25"+i),[2,-2];case 4:return[2,0]}})})},t.prototype.openRankAndUpload=function(e,t){return c(this,void 0,void 0,function(){var n;return a(this,function(i){switch(i.label){case 0:return 0!=o.UserInfo.auth?[3,3]:t?[3,2]:[4,h.default.checkAuth()];case 1:t=i.sent(),i.label=2;case 2:return null==t?[2,-1]:(o.UserInfo.nickName=t.nickName,isEmpty(o.UserInfo.userId)&&(o.UserInfo.userId=g.uuid(32,16)),o.UserInfo.gender=t.gender,o.UserInfo.avatarUrl=t.avatarUrl,o.UserInfo.auth=!0,o.UserInfo.save(),"",n=CC_WECHATGAME?window.tt?"tt":window.qq?"qq":"wx":"sim",null==e&&(e={}),e.nickName=o.UserInfo.nickName,e.avatarUrl=o.UserInfo.avatarUrl,e.gender=o.UserInfo.gender,e.channel=n,e.auth=!0,[2,this.uploadUserInfo(e)]);case 3:return[2]}})})},t.prototype.isAuthOk=function(){return!isEmpty(o.UserInfo.nickName)},t.prototype.checkOffline=function(){if(f){f=!1;var e=Date.now()/1e3-o.UserInfo.lastExitTime;return e>60?e:0}},r([s.field()],t.prototype,"lastLoginTime",void 0),r([s.field()],t.prototype,"isFirstLoginToday",void 0),r([s.field()],t.prototype,"isFirstEnterGame",void 0),r([s.field()],t.prototype,"sharecount",void 0),r([s.field()],t.prototype,"nickName",void 0),r([s.field()],t.prototype,"kaipingcount",void 0),r([s.field()],t.prototype,"userId",void 0),r([s.field()],t.prototype,"avatarUrl",void 0),r([s.field()],t.prototype,"lose_num",void 0),r([s.field()],t.prototype,"firstLoginTime",void 0),r([s.field()],t.prototype,"lastExitTime",void 0),r([s.field()],t.prototype,"gender",void 0),r([s.field()],t.prototype,"FirstGameOverTime",void 0),r([s.field()],t.prototype,"isDy",void 0),r([s.field()],t.prototype,"isKf",void 0),r([s.field()],t.prototype,"isGetKf",void 0),r([s.field()],t.prototype,"kfTime",void 0),r([s.field()],t.prototype,"isSc",void 0),r([s.field()],t.prototype,"isGetSc",void 0),r([s.field()],t.prototype,"isUse",void 0),r([s.field()],t.prototype,"gun_num",void 0),r([s.field()],t.prototype,"snowball_num",void 0),r([s.field()],t.prototype,"magnet_num",void 0),r([s.field()],t.prototype,"isGetGunStart",void 0),r([s.field()],t.prototype,"isGetGunEnd",void 0),r([s.field()],t.prototype,"getGunTime",void 0),r([s.field()],t.prototype,"return_num",void 0),r([s.field()],t.prototype,"return_level",void 0),r([s.field()],t.prototype,"freedrawTime",void 0),r([s.field()],t.prototype,"auth",void 0),r([s.field()],t.prototype,"gunView",void 0),r([s.field()],t.prototype,"gunViewDay",void 0),r([s.field()],t.prototype,"theme",void 0),r([s.field()],t.prototype,"isunlock_girl",void 0),r([s.field()],t.prototype,"isunlock_girl1",void 0),r([s.field()],t.prototype,"isunlock_girl2",void 0),r([s.field()],t.prototype,"isunlock_girl3",void 0),r([s.field()],t.prototype,"isunlock_girl4",void 0),r([s.field()],t.prototype,"isunlock_girl5",void 0),r([s.field()],t.prototype,"isunlock_men",void 0),r([s.field()],t.prototype,"isunlock_men1",void 0),r([s.field()],t.prototype,"isunlock_men2",void 0),r([s.field()],t.prototype,"isunlock_men3",void 0),r([s.field()],t.prototype,"isunlock_men4",void 0),r([s.field()],t.prototype,"isunlock_men5",void 0),r([s.field()],t.prototype,"isunlock_theme",void 0),r([s.field()],t.prototype,"theme_key",void 0),r([s.dc("UserInfo")],t)}(s.default);o.default=p,o.UserInfo=s.default.register(p),cc._RF.pop()},{"../../core/DataCenter":"DataCenter","../../utils/gameUtil":"gameUtil","../Platform":"Platform","./WeakNetGame":"WeakNetGame"}],ViewManager:[function(e,t,o){"use strict";cc._RF.push(t,"c0f79TopoBICobmtQjrjutG","ViewManager");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c},c=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<o;t++)for(var r=arguments[t],c=0,a=r.length;c<a;c++,i++)n[i]=r[c];return n};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./View"),s=e("../core/event"),l=e("../misc/Device"),u=cc._decorator,h=u.ccclass,f=u.property,p="[ViewManager]",d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._views={},t.modal=null,t.modalOpacity=160,t.audio_show=null,t.audio_hide=null,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){o.instance=this,this.modal.active=!1,window.vm=this},Object.defineProperty(t.prototype,"allViews",{get:function(){var e=this;return Object.keys(this._views).map(function(t){return e._views[t]})},enumerable:!1,configurable:!0}),t.prototype.onEnable=function(){},t.prototype.onDestroy=function(){for(var e in this._views)delete this._views[e]},t.prototype.start=function(){},t.prototype.getVisibleDialog=function(){var e=this;return Object.keys(this._views).map(function(t){return e._views[t]}).sort(function(e,t){return t.node.zIndex-e.node.zIndex}).find(function(e){return e.isDialog&&e.node.active})},t.prototype.hasVisibleDialog=function(){for(var e in this._views)if(this._views[e].isDialog&&this.isVisible(e))return!0;return!1},t.prototype.isVisible=function(e){var t;return!!(t="string"==typeof e?this._views[e]:e)&&t.node.active},t.prototype.view=function(e){return this._views[e]},t.prototype.attachViewComp=function(e){var t=null;return null!=t&&null!=t||(null==(t=e.getComponent(a.default))&&(t=e.addComponent(a.default)).init(e.name),this._views[t.name]=t),t},t.prototype.showView=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];return this.modal.active=e.isDialog,(this.hasVisibleDialog()||e.isDialog)&&(this.modal.active=!0),e.isDialog&&(this.modal.opacity=e.opacity),this.updateZIndex(e),this.audio_show&&l.default.playEffect(this.audio_show),e.show.apply(e,t)},t.prototype.showFromPrefab=function(e,t){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];var i=this._views[t];if(null==i){var r=cc.instantiate(e);if(null==r)throw new Error("Error Occurs While Creating View:"+t);null==(i=r.getComponent(a.default))&&((i=r.addComponent(a.default)).isDialog=!0);var s=i.getComponent(cc.Widget);s&&(s.target=cc.find("Canvas")),i.init(t),this._views[t]=i,i.isDialog,this.node.addChild(r,1e3)}return this.node.color.setA(255),this.log(p,"show view:"+t),this.showView.apply(this,c([i],o))},t.prototype.showFromPrefabPath=function(e){for(var t=this,o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];var i=this._views[e];if(null==i||null==i){this.log("start load prefab:"+e);var r=(new Date).getTime();return new Promise(function(n){cc.resources.load(e,cc.Prefab,function(i,a){t.log(p,"prefab loaded : "+e+" "+((new Date).getTime()-r)+"ms"),t.showFromPrefab.apply(t,c([a,e],o)).then(n)})})}return this.modal.active=i.isDialog,(this.hasVisibleDialog()||i.isDialog)&&(this.modal.active=!0,this.modal.opacity=i.opacity),this.log(p,"show view:"+e,o),this.updateZIndex(i),this.audio_show&&l.default.playEffect(this.audio_show),i.show.apply(i,o)},t.prototype.preload=function(e){var t=this,o=this._views[e];null!=o&&null!=o||cc.resources.load(e,cc.Prefab,function(n,i){t.log(p,"preload view"+e);var r=cc.instantiate(i),c=(o=r.getComponent(a.default)).getComponent(cc.Widget);c&&(c.target=cc.find("Canvas")),o.init(e),t._views[e]=o,o.isDialog,t.node.addChild(r,1e3),o.hide()})},t.prototype.disableTouch=function(e){var t=e.getComponent(a.default);t&&(t.touchEnabled=!1)},t.prototype.enableTouch=function(e){var t=e.getComponent(a.default);t&&(t.touchEnabled=!0)},t.prototype.show=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];e instanceof cc.Component&&(r=e.getComponent(a.default)).isDialog;for(var n=0;n<this.node.childrenCount;n++){var i=(r=this.node.children[n]).getComponent(a.default);i?i.topMost?r.zIndex=9999:r.zIndex=2*n:r.zIndex=n}if("string"==typeof e)return this.showFromPrefabPath.apply(this,c([e],t));if(null!=e&&null!=e){e.node&&(e=e.node);var r=this.attachViewComp(e);return this.showView.apply(this,c([r],t))}},t.prototype.updateZIndex=function(e){e.topMost||e.isDialog&&(e.node.zIndex=1e3,this.modal.zIndex=999)},t.prototype.hide=function(e,t){if(void 0===t&&(t=!0),"string"!=typeof e){if(null==e||null==e)return;e=this.attachViewComp(e).name}var o=this._views[e];if(null!=o&&null!=o){if(0==o.node.active)return;o.node.active=!1,o.isDialog&&(this.modal.active=!1),this.hasVisibleDialog()&&(this.modal.active=!0),t&&o.doHideAnimation(),o.onHidden(),this.audio_hide&&l.default.playEffect(this.audio_hide),s.evt.emit(o.node.name+".onHidden"),s.evt.emit("View.onHidden",o)}},t.prototype.checkViewStacks=function(){var e=this.getVisibleDialog();e&&(this.modal.active=!0,this.modal.opacity=e.opacity,this.updateZIndex(e))},t.prototype.hideAll=function(){for(var e in this._views)this.hide(e)},r([f(cc.Node)],t.prototype,"modal",void 0),r([f],t.prototype,"modalOpacity",void 0),r([f(cc.AudioClip)],t.prototype,"audio_show",void 0),r([f(cc.AudioClip)],t.prototype,"audio_hide",void 0),o=r([h],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../core/event":"event","../misc/Device":"Device","./View":"View"}],View:[function(e,t,o){"use strict";cc._RF.push(t,"e1217OaHDFCEbPP4vjLJXLh","View");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./ViewManager"),a=e("../core/event"),s=e("./UIFunctions"),l=cc._decorator,u=l.ccclass,h=l.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isDialog=!1,t.closeOnClick=!1,t.opacity=200,t.childrenAnimation=!1,t._topMost=!1,t.touchBlocker=null,t.touchBlockerComp=null,t.animations=[],t._isHiding=!1,t}return i(t,e),t.prototype.emit=function(e,t){a.evt.emit(t)},t.prototype.call=function(e,t){g.execScript(t)},t.prototype.setDelegate=function(e){this.target=e},t.prototype.emitEvent=function(e,t){a.evt.emit(t)},t.prototype.showUI=function(e,t){c.default.instance.show(t)},t.prototype.onLoad=function(){if(this.childrenAnimation)this.animations=s.default.getChildrenAnimations(this.node);else{var e=this.node.getComponent(cc.Animation);e&&this.animations.push(e)}for(var t=this.getComponents(cc.Component),o=0;o<t.length;o++){var n=t[o];if(n!=this&&(n.onShown||n.onShow||n.onHidden)){this.target=n;break}}this.isDialog&&this.closeOnClick&&(this.node.on(cc.Node.EventType.TOUCH_END,this.hide,this),this.node.children[0]&&this.node.children[0].addComponent(cc.BlockInputEvents)),this.animations.length},t.prototype.start=function(){this.touchEnabled=!0},t.prototype.init=function(e){this.name=e;var t=e.lastIndexOf("/")+1;this.node.name=e.substr(t)},t.prototype.hideAnimationCallback=function(){this.node.active=this.visible,c.default.instance.checkViewStacks()},t.prototype.doHideAnimation=function(){this.node.active=!0,this._isHiding=!0,s.default.doHideAnimations(this.animations,this.hideAnimationCallback,this)||(this.node.active=!1,this._isHiding=!1,c.default.instance.checkViewStacks()),this.log("[View] hide:",this.name),this._visibleDirty=!1},t.prototype.isInHideAnimation=function(){return this._isHiding},t.prototype.onHidden=function(){this._visibleDirty=!1,this.target&&this.target.onHidden&&this.target.onHidden()},t.prototype.hide=function(){this.touchEnabled=!1,c.default.instance.hide(this.node)},Object.defineProperty(t.prototype,"visible",{get:function(){return this._visibleDirty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topMost",{get:function(){return this._topMost},set:function(e){this._topMost&&(this._topMost=e),this.node.zIndex=9999},enumerable:!1,configurable:!0}),t.prototype.showAnimationNextFrame=function(e){var t=this;this.scheduleOnce(function(){s.default.doShowAnimations(t.animations,e)},0)},Object.defineProperty(t.prototype,"touchEnabled",{get:function(){return!this.touchBlocker||!this.touchBlocker.active},set:function(e){this.touchBlocker&&(this.touchBlocker.active=!e)},enumerable:!1,configurable:!0}),t.prototype.show=function(){for(var e=this,t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];return this.node.active=!0,this.topMost&&(this.node.zIndex=9999),this.log("[View] show:",this.name,t),s.default.stopAnimations(this.animations),new Promise(function(o){var n,i=e;if(e.showAnimationNextFrame(function(){var e;i.touchEnabled||(i.touchEnabled=!0);var n=null;if(i.target&&i.target.onShown)try{n=(e=i.target).onShown.apply(e,t)}catch(r){i.error(r)}a.evt.emit(i.node.name+".onShown",i,n,t),a.evt.emit("View.onShown",i,n,t),o(i)}),e._visibleDirty=!0,a.evt.emitDelay(0,i.node.name+".onShown.Before",i,t),a.evt.emit("View.onShow",i,t),e.target&&e.target.onShow)try{(n=e.target).onShow.apply(n,t)}catch(r){e.error(r)}})},r([h],t.prototype,"isDialog",void 0),r([h],t.prototype,"closeOnClick",void 0),r([h],t.prototype,"opacity",void 0),r([h],t.prototype,"childrenAnimation",void 0),r([h({visible:!0,displayName:"topMost"})],t.prototype,"_topMost",void 0),r([u],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../core/event":"event","./UIFunctions":"UIFunctions","./ViewManager":"ViewManager"}],WeakNetConf:[function(e,t){"use strict";cc._RF.push(t,"4481b8s/VJPaKfilvw1r7Oe","WeakNetConf"),cc._RF.pop()},{}],WeakNetGame:[function(e,t,o){"use strict";cc._RF.push(t,"0bcf4uw82lEiZu0xHGC+nQ4","WeakNetGame");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function c(e){try{s(n.next(e))}catch(t){r(t)}}function a(e){try{s(n.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,a)}s((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return s([e,t])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Platform"),c=e("../../misc/Net"),a=e("../../core/event"),s=e("./SovInfo"),l=e("../../utils/gameUtil"),u=e("../../ui/ToastManager"),h=function(){function e(){}return Object.defineProperty(e,"isLoggedIn",{get:function(){return null!=this.logined_useId},enumerable:!1,configurable:!0}),e.requestConfig=function(){var e=this;if(!this.config_inited)return new Promise(function(t,o){c.net.httpGet(e.serverConfig.config_url+"?r="+Date.now()).then(function(n){n==c.default.Code.Timeout?o("timeout"):n?(e.config=JSON.parse(n),e.config_inited=!0,console.log("\u914d\u7f6e",e.config),t()):t()})})},e.requestShareConfig=function(){var e=this;if(!this.shareConfig_inited)return new Promise(function(t){c.net.httpGet(e.serverConfig.cdn_url+e.config.share_config_url+"?t="+Date.now()).then(function(o){o==c.default.Code.Timeout?t():o?(e.shareConfigs=JSON.parse(o),e.shareConfig_inited=!0,console.log("\u5206\u4eab\u914d\u7f6e",e.shareConfigs),t()):t()})})},e.downloadCsv=function(e){var t=this,o=Date.now(),n=this._configstr_cache[e];if(n&&o-n.timestamp<=1e4)return console.log("\u521a\u5df2\u4e0b\u8f7d\u5e76\u52a0\u8f7d\u8868\uff1a "+e),Promise.resolve();var i=this.serverConfig.cdn_url+this.config.csv_url+e+".csv?t="+Date.now();return new Promise(function(o){console.log("download csv:"+e),c.net.httpGet(i).then(function(n){n==c.default.Code.Timeout?csv.load("Config/csv/"+e,o):n?(csv.loadString(e,n,o),delete t._configstr_cache[e],t._configstr_cache[e]={timestamp:Date.now(),data:n}):csv.load("Config/csv/"+e,o)})})},e.loadLocalCsv=function(e,t){return new Promise(function(o){console.log("load local csv:"+e),csv.load("Config/csv/"+e,o),t&&t(e)})},e.loadLocalCsvs=function(e){var t=this;if(null==this.config.local_csv)return new Promise(function(e){csv.loadDir("Config/csv",e)});if(this.config.local_csv.length>0){var o=[];return this.config.local_csv.forEach(function(n){var i=t.loadLocalCsv(n,e);o.push(i)}),Promise.all(o)}},e.downloadCsvs=function(){var e=this;if(0!=this.config.csv.length){var t=[];return this.config.csv.forEach(function(o){var n=e.downloadCsv(o);t.push(n)}),Promise.all(t)}csv.loadDir("Config/csv")},e.login=function(){return n(this,void 0,void 0,function(){var e,t,o,n,s;return i(this,function(i){switch(i.label){case 0:return e={openId:this.serverConfig.openId},CC_WECHATGAME?(r.default.login(),[4,a.evt.wait("wxlogin")]):[3,2];case 1:t=i.sent()[0],o=wx.getLaunchOptionsSync(),e={code:t,type:"wxlogin",query:JSON.stringify(o.query),scene:o.scene},i.label=2;case 2:return[4,this.client.httpGet(this.serverConfig.root_url+"/game/login",e)];case 3:return(n=i.sent())==c.default.Code.Timeout?(console.log("\u767b\u9646\u5931\u8d25",this.retry_count),[2,!1]):n?(s=JSON.parse(n),console.log("\u767b\u9646\u8fd4\u56de",s),s.data?(this.client.setHeader("Authorization",s.data.token),console.log("\u767b\u9646\u6210\u529f",s.data),this.logined_useId=s.data.openId,this.retry_count=0,this.userInfo=s.data,[2,!0]):(console.log("\u767b\u9646\u5931\u8d25"),[2,!1])):(console.log("\u767b\u9646\u5931\u8d25",this.retry_count),[2,!1])}})})},e.syncData=function(t,o){return n(this,void 0,void 0,function(){return i(this,function(){if(null==o){if(!e.isLoggedIn)return[2,console.warn("\u4e0a\u4f20\u6570\u636e\uff01\uff0c\u672a\u767b\u9646\u4e14\u672a\u6307\u5b9a\u7528\u6237id")];o=this.logined_useId}return[2,this.syncDataToTable(t,"user",o)]})})},e.syncDataToTable=function(e,t,o){return n(this,void 0,void 0,function(){var n,r;return i(this,function(i){switch(i.label){case 0:return null==o?[2,console.warn("\u4e0a\u4f20\u6570\u636e\uff01\u672a\u6307\u5b9aid !")]:[4,this.client.httpPut(this.serverConfig.root_url+"/"+t+"/"+o,e)];case 1:return(n=i.sent())==c.default.Code.Timeout?(console.log("\u4e0a\u4f20\u6570\u636e \u8d85\u65f6...."),[2,!1]):n?(r=JSON.parse(n),console.log(r),[2,r]):(console.warn("\u540c\u6b65\u6570\u636e\u5931\u8d25"),[2,!1])}})})},e.loadUserInfo=function(){return n(this,void 0,void 0,function(){var e,t;return i(this,function(o){switch(o.label){case 0:return this.isLoggedIn?this.userInfo?[2,this.userInfo]:(console.log("\u62c9\u53d6\u7528\u6237\u6570\u636e"),[4,this.client.httpGet(this.serverConfig.root_url+"/user/"+this.logined_useId)]):[2,console.warn("\u62c9\u53d6\u6570\u636e\u65f6\uff1a\u672a\u767b\u5f55")];case 1:return(e=o.sent())==c.default.Code.Timeout?[2,this.userInfo]:e?(t=JSON.parse(e)).errno?[2]:[2,t.data]:[2,this.userInfo]}})})},e.setVideoWatchedCount=function(e){this.video_watched_count=e,localStorage.setItem("__video_watched_count__",this.video_watched_count+""),localStorage.setItem("__video_watched_date__",Date.now().toString())},e.setShareFailCount=function(e){this.share_fail_count=e,localStorage.setItem("_share_fail_count_",this.share_fail_count+""),localStorage.setItem("_share_fail_date_",Date.now().toString())},e.setShareSuccCount=function(e){this.share_succ_count=e,localStorage.setItem("_share_succ_count_",this.share_succ_count+""),localStorage.setItem("_share_succ_date_",Date.now().toString())},e.initUserData=function(){var e=localStorage.getItem("__video_watched_count__"),t=localStorage.getItem("__video_watched_date__"),o=localStorage.getItem("_share_fail_count_"),n=localStorage.getItem("_share_fail_date_"),i=localStorage.getItem("_share_succ_count_"),r=localStorage.getItem("_share_succ_date_"),c=parseInt(t),a=parseInt(e);isNaN(a)?this.setVideoWatchedCount(0):this.video_watched_count=a,isNaN(c)||l.default.isNextDay(c)&&this.setVideoWatchedCount(0),c=parseInt(n),a=parseInt(o),isNaN(a)?this.setShareFailCount(0):this.share_fail_count=a,isNaN(c)||l.default.isNextDay(c)&&this.setShareFailCount(0),c=parseInt(i),a=parseInt(r),isNaN(a)?this.setShareSuccCount(0):this.share_succ_count=a,isNaN(c)||l.default.isNextDay(c)&&this.setShareSuccCount(0)},e.initConfig=function(e){this.serverConfig=e,this.client.setTimeout(2500),console.log("[WeakNetGame]\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6"),console.log(e)},e.doLogin=function(t){return n(this,void 0,Promise,function(){return i(this,function(o){switch(o.label){case 0:return this.isInit?[3,10]:(console.log("[WeakNetGame]\u5f00\u59cb\u767b\u9646"),e.initUserData(),this.serverConfig.is_local_game?[3,9]:(t&&t("config"),[4,e.requestConfig()]));case 1:return o.sent(),t&&t("local_csv"),[4,e.loadLocalCsvs(function(){})];case 2:return o.sent(),t&&t("csv"),[4,e.downloadCsvs()];case 3:return o.sent(),this.serverConfig.is_normal_login?(t&&t("login"),[4,e.login()]):[3,5];case 4:o.sent(),o.label=5;case 5:return CC_WECHATGAME?(t&&t("share_config"),[4,e.requestShareConfig()]):[3,7];case 6:o.sent(),r.default.initShare(this.shareConfigs.default,this.logined_useId),o.label=7;case 7:return this.isLoggedIn?(this.isInit=!0,t&&t("complete"),[4,e.loadUserInfo()]):[2,!1];case 8:return[2,o.sent()];case 9:return this.isInit=!0,[2,new Promise(function(e){csv.loadDir("Config/csv",e)})];case 10:return[2]}})})},e.check=function(e,t,o,n,i){return(e%=o+i+1)>=o?n:e<=o?t:void 0},e.getChoice=function(e){if(this.video_watched_count>=this.max_video_watch)return 0;var t=e;"string"==typeof e&&(t=csv.Config?csv.Config[e]:0);var o=Number(t);if(isNaN(o))try{var n=t.split(",").map(function(e){return e.split("=").map(function(e){return parseInt(e)})}),i=n[0],r=i[0],c=i[1],a=n[1],l=a[0],u=a[1],h=s.SovInfo.getCount(e);o=this.check(h,r,c,l,u)}catch(f){console.error("\u914d\u7f6e\u9519\u8bef\uff1a\u8bf7\u68c0\u6d4b\u540e\u53f0\u914d\u7f6e\uff01["+e+"] = "+t),o=0}return 2==t&&(o=g.randomInt(0,2)),o},e.set_safe_check_callback=function(e){this._check_safe_callback=e},Object.defineProperty(e,"is_safe_mode",{get:function(){return!!this._check_safe_callback&&this._check_safe_callback()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"sharedUUIDs",{get:function(){return this._sharedUUIDs},enumerable:!1,configurable:!0}),e.isValidShare=function(e){return null!=this._sharedUUIDs[e]},e.isClaimedShare=function(e){return null!=this.claimedUUIDs[e]},e.claimShare=function(e){this.claimedUUIDs[e]=e;var t=this._sharedUUIDs[e];t&&t()},e.doChoice=function(e,t,o,n){var i=this,c=this.getChoice(e),l=function(){r.default.watch_video(function(){s.SovInfo.invoke(e),i.video_watched_count++,i.setVideoWatchedCount(i.video_watched_count),a.evt.emit("WeakNetGame.watch_video",i.video_watched_count),t&&t.call(o,"video")},o,function(){i.share_succ_count>=3?(u.Toast.make("\u6682\u65e0\u53ef\u7528\u89c6\u9891\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5 !"),n&&n.call()):h()})},h=function(c){if(void 0===c&&(c=!1),i.is_safe_mode)l();else if(i.is_forbidden)l();else if(c){var u=g.uuid(8,16);i._sharedUUIDs[u]=t.bind(o,"share_link_click"),r.default.doShareWithParams({uuid:u,share_link:!0},i.shareConfigs[e],function(){t&&t.call(o,"share_link")},i)}else r.default.doShare(i.shareConfigs[e],function(r){var c=!0;CC_WECHATGAME&&Math.random()<i.share_fail_rate&&(c=!1),r&&c?(i.setShareSuccCount(++i.share_succ_count),a.evt.emit("WeakNetGame.ShareSuccess",e),t&&t.call(o,"share"),s.SovInfo.invoke(e)):(i.setShareFailCount(++i.share_fail_count),n&&n.call(),a.evt.emit("WeakNetGame.ShareFail",e),CC_WECHATGAME?wx.showModal({title:"\u63d0\u793a",content:g.getRandom(i.share_fail_texts),showCancel:!0,cancelText:"\u53d6\u6d88",confirmText:"\u53bb\u5206\u4eab",success:function(e){e.cancel||h()}}):console.warn("\u5206\u4eab\u5931\u8d25! ,\u8bf7\u91cd\u8bd5!"))},i.share_succ_delay)};0==c?h():1==c?this.video_watched_count>=this.max_video_watch?h():l():3==c?t&&t.call(o):4==c&&h(!0)},e.shareConfigs={},e.config={share_config_url:"share_config.json",csv_url:"csv/",csv:[],local_csv:[]},e.isInit=!1,e.config_inited=!1,e.shareConfig_inited=!1,e.logined_useId=null,e.video_watched_count=0,e.share_fail_count=0,e.share_succ_count=0,e.is_forbidden=!1,e.max_video_watch=99,e.share_succ_delay=2e3,e.share_fail_rate=.05,e.max_share_fail=3,e._check_safe_callback=null,e._configstr_cache={},e.client=new c.default,e.retry_count=0,e.userInfo=null,e._sharedUUIDs={},e.claimedUUIDs={},e.share_fail_texts=["\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u5206\u4eab\u523030\u4eba\u7fa4","\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u5206\u4eab\u5230\u65b0\u7684\u7fa4"],e}();o.default=h,window.WeakNetGame=h,cc._RF.pop()},{"../../core/event":"event","../../misc/Net":"Net","../../ui/ToastManager":"ToastManager","../../utils/gameUtil":"gameUtil","../Platform":"Platform","./SovInfo":"SovInfo"}],WinGift:[function(e,t,o){"use strict";cc._RF.push(t,"ef6e2MzTyhP3piIfV0yaWi6","WinGift");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../Common/Base/PlayerInfo"),a=e("../../../framework/core/event"),s=cc._decorator,l=s.ccclass,u=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.progress=null,t.node_bg=null,t}return i(t,e),t.prototype.onLoad=function(){a.evt.on("UIProgressRewardGet.show",this.onShownReward,this)},t.prototype.onDestroy=function(){a.evt.off(this)},t.prototype.preAddProgress=function(){c.PlayerInfo.boxProgress+=.25,c.PlayerInfo.save("boxProgress")},t.prototype.postAddProgress=function(){c.PlayerInfo.boxProgress>=1&&(c.PlayerInfo.boxProgress=0,this.showGift())},t.prototype.onShownReward=function(){this.node_bg.opacity=0},t.prototype.showGift=function(){var e=this;this.node_bg.opacity=0,cc.tween(this.node_bg).to(1,{opacity:255}).start(),cc.tween(this.node).to(1,{position:cc.v2(0,0)},{easing:"sineInOut"}).call(function(){e.node.setPosition(-1e3,-1e4),vm.show("Prefabs/UI/UIProgressReward")}).start()},t.prototype.show=function(){this.node.active=!0,this.node_bg.opacity=0,1==c.PlayerInfo.winStatus&&this.shouldAddProgress()?(this.preAddProgress(),this.updateProgress(),this.postAddProgress()):this.updateProgress()},t.prototype.hide=function(){this.node_bg.opacity=0,this.node.active=!1},t.prototype.updateProgress=function(){var e=c.PlayerInfo.boxProgress-.25;e=Math.max(0,e),this.label.string=100*c.PlayerInfo.boxProgress+"%",this.progress.fillRange=e,cc.tween(this.progress).to(.5,{fillRange:c.PlayerInfo.boxProgress}).start()},t.prototype.shouldAddProgress=function(){if(-1!=c.PlayerInfo.winStatus)return c.PlayerInfo.isPlayingDaily?c.PlayerInfo.playingDailyLevel==c.PlayerInfo.dailylevel:c.PlayerInfo.playinglevel==c.PlayerInfo.level},r([u(cc.Label)],t.prototype,"label",void 0),r([u(cc.Sprite)],t.prototype,"progress",void 0),r([u(cc.Node)],t.prototype,"node_bg",void 0),r([l],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../framework/core/event":"event","../Common/Base/PlayerInfo":"PlayerInfo"}],WxFeedbackButton:[function(e,t,o){"use strict";cc._RF.push(t,"56c5dQwMDVIbZzexb7961L/","WxFeedbackButton");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c,a=cc._decorator,s=a.ccclass,l=a.property,u=a.menu,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handler=new cc.Component.EventHandler,t.button=null,t.width=200,t.height=40,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.onEnable=function(){this.button&&this.button.show()},t.prototype.onDisable=function(){this.button&&this.button.hide()},t.prototype.onDestroy=function(){this.button&&this.button.destroy()},t.prototype.createButton=function(e){c||(c=wx.getSystemInfoSync());var t=(c.windowWidth,this.width),o=(c.windowHeight,this.height),n=this.width,i=this.height;this.button&&this.button.destroy();var r=this.node.getBoundingBoxToWorld(),a=cc.view.getDevicePixelRatio(),s=cc.view.getScaleX()/a;t=r.x*s,o=c.screenHeight-(r.y+r.height)*s,n=r.width*s,i=r.height*s,this.button=wx.createFeedbackButton({type:"text",text:"        ",style:{left:t,top:o,width:n,height:i,lineHeight:60,textAlign:"center",backgroundColor:"#00000000",color:"#ffffff"}}),this.button.onTap(function(t){t?e&&e(t):e&&e(null)})},t.prototype.start=function(){var e=this;CC_WECHATGAME&&this.createButton(function(t){e.handler.emit([t])})},r([l(cc.Component.EventHandler)],t.prototype,"handler",void 0),r([l],t.prototype,"width",void 0),r([l],t.prototype,"height",void 0),r([s,u("Wxsdk/WxFeedbackButton")],t)}(cc.Component);o.default=h,cc._RF.pop()},{}],WxGameClubButton:[function(e,t,o){"use strict";cc._RF.push(t,"5d2056QWo9E57D39508Sok/","WxGameClubButton");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c,a=cc._decorator,s=a.ccclass,l=a.property,u=a.menu,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handler=new cc.Component.EventHandler,t.button=null,t.width=200,t.height=40,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){o.instance=this},t.prototype.onEnable=function(){this.button&&this.button.show()},t.prototype.onDisable=function(){this.button&&this.button.hide()},t.prototype.onDestroy=function(){this.button&&this.button.destroy(),o.instance=null},t.prototype.createButton=function(e){c||(c=wx.getSystemInfoSync());var t=(c.windowWidth,this.width),o=(c.windowHeight,this.height),n=this.width,i=this.height;this.button&&this.button.destroy();var r=this.node.getBoundingBoxToWorld(),a=cc.view.getDevicePixelRatio(),s=cc.view.getScaleX()/a;t=r.x*s,o=c.screenHeight-(r.y+r.height)*s,n=r.width*s,i=r.height*s,this.button=wx.createGameClubButton({icon:"light",style:{left:t,top:o,width:n,height:i}}),this.button.onTap(function(t){t?e&&e(t):e&&e(null)})},t.prototype.start=function(){var e=this;CC_WECHATGAME&&this.createButton(function(t){e.handler.emit([t])})},t.instance=null,r([l(cc.Component.EventHandler)],t.prototype,"handler",void 0),r([l],t.prototype,"width",void 0),r([l],t.prototype,"height",void 0),o=r([s,u("Wxsdk/WxGameClubButton")],t)}(cc.Component);o.default=h,cc._RF.pop()},{}],WxgetInfoButton:[function(e,t,o){"use strict";cc._RF.push(t,"ec38chyDftF94LQwttCl+9C","WxgetInfoButton");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c,a=e("../Platform"),s=cc._decorator,l=s.ccclass,u=s.property,h=s.menu,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handler=new cc.Component.EventHandler,t.button=null,t.width=200,t.height=40,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.onEnable=function(){this.button&&this.button.show()},t.prototype.onDisable=function(){this.button&&this.button.hide()},t.prototype.onDestroy=function(){this.button&&this.button.destroy()},t.prototype.createButton=function(e){var t=this;c||(c=wx.getSystemInfoSync()),console.log("------\u672a\u6388\u6743! \u8c03\u7528wx.createUserInfoButton-------",wx.getSystemInfoSync().windowWidth);var o=(c.windowWidth,this.width),n=(c.windowHeight,this.height),i=this.width,r=this.height;this.button&&this.button.destroy();var a=this.node.getBoundingBoxToWorld(),s=cc.view.getDevicePixelRatio(),l=cc.view.getScaleX()/s;o=a.x*l,n=c.screenHeight-(a.y+a.height)*l,i=a.width*l,r=a.height*l,this.button=wx.createUserInfoButton({type:"text",text:"        ",style:{left:o,top:n,width:i,height:r,lineHeight:60,textAlign:"center",backgroundColor:"#00000000",color:"#ffffff"}}),this.button.onTap(function(o){o&&o.userInfo?(console.log("res",o),t.button.destroy(),e&&e(o.userInfo)):e&&e(null)})},t.prototype.start=function(){var e=this;a.default.checkAuth().then(function(t){t?e.node.on(cc.Node.EventType.TOUCH_END,e.onClick.bind(e,t,!1)):CC_WECHATGAME&&e.createButton(function(t){e.onClick(t,!0)})})},t.prototype.onClick=function(e,t){this.handler.emit([e,t])},r([u(cc.Component.EventHandler)],t.prototype,"handler",void 0),r([u],t.prototype,"width",void 0),r([u],t.prototype,"height",void 0),r([l,h("Wxsdk/WxgetInfoButton")],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../Platform":"Platform"}],actionUtil:[function(e,t,o){"use strict";cc._RF.push(t,"6c55d3/OGBIep18yzuO93C7","actionUtil"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.jellyJump=function(e){var t=cc.scaleTo(.06,1.6,.8),o=cc.scaleTo(.07,1,1.2),n=cc.scaleTo(.1,1).easing(cc.easeElasticOut(.3)),i=cc.sequence(t,o,n);e.runAction(i)},e.jellyJump2=function(e,t,o,n){void 0===t&&(t=.9),void 0===o&&(o=1),void 0===n&&(n=.8),e.scale=t;var i=cc.scaleTo(n,o,o).easing(cc.easeElasticOut(.3));e.runAction(i)},e.moveToCenter=function(e){if(e.parent){var t=e.parent.getBoundingBox();e.position=cc.v2(t.width/2,t.height/2)}},e.flyNode=function(t,o,n,i,r,c,a,s,l){void 0===c&&(c=cc.v2(0,1)),void 0===a&&(a=null),void 0===s&&(s=600),void 0===l&&(l=700);var u=cc.Vec2.RIGHT.rotate(cc.macro.RAD*i);u.mulSelf(r);var h=r/s,f=cc.moveBy(h,u).easing(cc.easeSineOut()),p=cc.sequence(f,cc.callFunc(function(){var o=t.getBoundingBoxToWorld().center,i=n.sub(o).mag()/l;e.moveBezier2(t,o,n,c,function(e){e.destroy(),a&&a()},i)}));t.parent=o,t.runAction(p)},e.moveBezier2=function(e,t,o,n,i,r,c){void 0===n&&(n=cc.Vec2.RIGHT),void 0===i&&(i=null),void 0===r&&(r=1),void 0===c&&(c=0);var a=[],s=t.x,l=t.y,u=o.x,h=o.y;a[0]=cc.v2(s,l),a[1]=cc.v2(s+(u-s)*n.x,l+(h-l)*n.y),a[2]=cc.v2(u,h),e.runAction(cc.sequence(cc.delayTime(c),cc.bezierTo(r,a).easing(cc.easeSineInOut()),cc.fadeOut(.3),cc.callFunc(i&&i.bind(e))))},e.moveBezier=function(e,t,o,n,i,r){void 0===n&&(n=null),void 0===i&&(i=1),void 0===r&&(r=0);var c=cc.instantiate(e);return c.opacity=255,c.setPosition(t),this.moveBezier2(c,t,o,cc.Vec2.RIGHT,n,i,r),c},e}();o.default=n,cc._RF.pop()},{}],calc:[function(e,t){"use strict";cc._RF.push(t,"6e0d3V+NORCMYJVFQ7j6FEk","calc");var o={"+":{type:"Operator",value:"+",asso:"left",prec:2},"-":{type:"Operator",value:"-",asso:"left",prec:2},"*":{type:"Operator",value:"*",asso:"left",prec:3},"/":{type:"Operator",value:"/",asso:"left",prec:3},"^":{type:"Operator",value:"^",asso:"right",prec:4},number:function(e){if(!isNaN(e)&&isFinite(e))return{type:"Literal",value:e+""}},"(":{type:"Left Parenthesis",value:"("},")":{type:"Right Parenthesis",value:")"}};function n(e){e=e.replace(/(\t|\s)/g,"");for(var t=[],n="",i=0;i<e.length;i++)c(e.charAt(i))?(n+=e.charAt(i),c(e.charAt(i+1))||(t.push(o.number(n)),n="")):a(e.charAt(i))?"-"==e.charAt(i)&&(""==e.charAt(i-1)||a(e.charAt(i-1))||"("==e.charAt(i-1))&&c(e.charAt(i+1))?n+="-":t.push(o[e.charAt(i)]):r(e.charAt(i),["(",")"])&&("("==e.charAt(i)?((c(e.charAt(i-1))||")"==e.charAt(i-1))&&t.push(o["*"]),t.push(o["("])):t.push(o[")"]));function r(e,t){for(var o=0;o<t.length;o++)if(e===t[o])return!0;return!1}function c(e){return r(e,["0","1","2","3","4","5","6","7","8","9","."])}function a(e){return r(e,["+","-","*","/","^"])}return t}function i(e){for(var t=[],o=[],n=0;n<e.length;n++){var i=e[n],r=!!o.length&&o[o.length-1];if("Literal"==i.type)t.push(i);else if("Operator"==i.type){for(;r&&"("!=r.value&&(i.prec<r.prec||"left"==i.asso&&i.prec==r.prec);)t.push(o.pop()),r=!!o.length&&o[o.length];o.push(i)}else if("Left Parenthesis"==i.type)o.push(i);else if("Right Parenthesis"==i.type){for(;r&&"("!=r.value;)t.push(o.pop()),r=!!o.length&&o[o.length-1];o.pop()}}return t.concat(o.reverse())}function r(e){for(var t=[],o=0;o<e.length;o++)if("Literal"==e[o].type)t.push(parseFloat(e[o].value));else if("Operator"==e[o].type)switch(e[o].value){case"+":t[t.length-2]=parseFloat((1e4*t[t.length-2]+1e4*t[t.length-1])/1e4),t.pop();break;case"-":t[t.length-2]=parseFloat((1e4*t[t.length-2]-1e4*t[t.length-1])/1e4),t.pop();break;case"*":t[t.length-2]=parseFloat(t[t.length-2]*t[t.length-1]),t.pop();break;case"/":t[t.length-2]=parseFloat(t[t.length-2]/t[t.length-1]),t.pop();break;case"^":t[t.length-2]=parseFloat(Math.pow(t[t.length-2],t[t.length-1])),t.pop()}return t.length?t[0]:0}window.calc=function(e){return r(i(n(e))).toString()},cc._RF.pop()},{}],ccUtil:[function(e,t,o){"use strict";cc._RF.push(t,"cb2d7HHjkdALre9lNwktqW8","ccUtil");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function c(e){try{s(n.next(e))}catch(t){r(t)}}function a(e){try{s(n.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,a)}s((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return s([e,t])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},r=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<o;t++)for(var r=arguments[t],c=0,a=r.length;c<a;c++,i++)n[i]=r[c];return n};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../misc/SpriteFrameCache"),a=e("../core/event"),s=e("../misc/display"),l=function(){function e(){}return e.Instantiate=function(e,t,o){var n=cc.instantiate(e);return t&&(n.position=t),o&&(n.rotation=o),n},e.loadJson=function(e){return new Promise(function(t){cc.resources.load(e,cc.JsonAsset,function(e,o){t(o.json)})})},e.playParticles=function(e){var t=e._subParticles;null==t&&(t=e.node.getComponentsInChildren(cc.ParticleSystem),e._subParticles=t),t.forEach(function(e){e.play()})},e.playAnimation=function(e,t){e.play(),t>0&&a.evt.sleep(t).then(function(){e.stop()})},e.newButton=function(t,o,n,i,r){i=i||t;var c=t.getOrAddComponent(cc.Button);if(c.transition=cc.Button.Transition.SCALE,c.clickEvents.length>0){var a=c.clickEvents[0];a.target=i,a.customEventData=r,a.component=o,a.handler=n}else c.clickEvents.push(e.handler(i,o,n,r));return c},e.handler=function(e,t,o,n){var i=new cc.Component.EventHandler;return i.component=t,i.target=e,i.handler=o,i.customEventData=n,i},e.get=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var n=e.prototype,i=this.types.indexOf(n);-1==i&&(this.types.push(n),i=this.types.length-1);var r=this.allInfos[i];r||(r={},this.allInfos[i]=r);var c=t.join("-"),a=r[c];if(!a){var s=e;a=new s(t),r[c]=a}return a},e.isGreaterDays=function(e,t){if(void 0===t&&(t=7),(new Date).getTime()-e>864e5*t)return!0},e.setDisplay=function(e,t,o){if("string"==typeof t)return c.default.instance.getSpriteFrame(t).then(function(t){try{e.spriteFrame=t,o&&o()}catch(n){console.warn(n)}}).catch(function(e){return console.warn(e)});t instanceof cc.SpriteFrame&&(e.spriteFrame=t)},e.getOrAddComponent=function(e,t){return e.getOrAddComponent(t)},e.formatSeconds=function(e){var t=Math.floor(e/3600),o=Math.floor(e/60-60*t),n=Math.floor(e-60*o-3600*t);return(t>0?(t<10?"0"+t:t)+":":"")+o+":"+(n<10?"0"+n:n)},e.convertCameraWorldPosition=function(e,t,o){var n=t.getWorldToScreenPoint(e,cc.Vec2.ZERO);return o.getScreenToWorldPoint(n,cc.Vec2.ZERO)},e.setButtonEnabled=function(e,t){var o=e.node;e instanceof cc.Node&&(o=e=e.getComponent(cc.Button)),e&&(o.opacity=t?255:155,e.interactable=t)},e.find=function(e,t,o){return cc.find(e,t).getComponent(o)},e.sign=function(e){return e>0?1:-1},e.broadCast=function(e,t){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];return Promise.race(e.getComponents(cc.Component).filter(function(e){return null!=e[t]}).map(function(e){return new Promise(function(n){var i;n((i=e[t]).call.apply(i,r([e],o)))})}))},e.sendMessage=function(e,t){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];var i=null;return e.getComponents(cc.Component).some(function(e){var n=e[t];return!!n&&(i=n.call.apply(n,r([e],o)),!0)}),i},e.getWorldBoundingBox=function(e){var t=e.parent;if(null!=t){var o=e.getBoundingBox(),n=cc.v2(o.xMin,o.yMin),i=cc.v2(o.xMax,o.yMax);n=t.convertToWorldSpaceAR(n);var r=(i=t.convertToWorldSpaceAR(i)).subSelf(n);return cc.rect(n.x,n.y,r.x,r.y)}},e.setParent=function(e,t,o){void 0===o&&(o=!1);var n=e.parent;if(null!=n){var i=n.convertToWorldSpaceAR(e.position);e.removeFromParent(),e.parent=t,o&&(e.position=t.convertToNodeSpaceAR(i))}},e.getWorldPosition=function(e){if(null!=e.parent){var t=cc.v2(e.x,e.y);return e.parent.convertToWorldSpaceAR(t)}},e.changeParent=function(t,o,n){void 0===n&&(n=0);var i=e.getWorldPosition(t);t.removeFromParent(),o.addChild(t,n),i=o.convertToNodeSpaceAR(i),t.setPosition(i)},e.moveToOrigin=function(e,t,o){e.runAction(cc.moveTo(t,cc.Vec2.ZERO).easing(o||cc.easeSineOut()))},e.playFly=function(t,o,r,c){return n(this,void 0,void 0,function(){return i(this,function(){return this.playFlyCoin(t,t.parent,s.default.center,e.getWorldPosition(t),{dur:o,num:r,interval:c}),[2]})})},e.playFlyCoin=function(t,o,r,c,l){return void 0===t&&(t=null),void 0===o&&(o=null),void 0===r&&(r=s.default.center),void 0===c&&(c=s.default.leftTop),n(this,void 0,void 0,function(){var n,s,u,h;return i(this,function(f){switch(f.label){case 0:f.trys.push([0,5,,6]),null==l&&(l=this.default_flycoin_config),l.num=l.num||this.default_flycoin_config.num,n=function(){var n,u,h,f,p;return i(this,function(i){switch(i.label){case 0:return(n=cc.instantiate(t)).parent=o,u=r,u=r instanceof cc.Node?e.getWorldPosition(r):r,u=o.convertToNodeSpaceAR(u),h=o.convertToNodeSpaceAR(c),l.random_length>0?(f=cc.Vec2.random(s._tmp_vec2,l.random_length||s.default_flycoin_config.random_length),n.setPosition(u.add(f))):n.setPosition(u),p=l.dur||s.default_flycoin_config.dur,cc.tween(n).to(p,{position:h},{easing:"sineInOut"}).call(function(){n.destroy()}).start(),l.scale&&(n.scale=l.scale,cc.tween(n).to(p,{scale:l.scaleTo}).start()),[4,a.evt.sleep(l.interval||s.default_flycoin_config.interval)];case 1:return i.sent(),[2]}})},s=this,u=0,f.label=1;case 1:return u<l.num?[5,n()]:[3,4];case 2:f.sent(),f.label=3;case 3:return u++,[3,1];case 4:return[3,6];case 5:return h=f.sent(),console.warn(h),[3,6];case 6:return[2]}})})},e.getRes=function(e,t){return new Promise(function(o,n){cc.resources.load(e,t,function(e,t){if(e)return n(e);o(t)})})},e.allInfos={},e.types=[],e._tmp_vec2=cc.v2(),e.default_flycoin_config={dur:.5,num:5,interval:.1,random_length:0,scale:1,scaleTo:1},e}();o.default=l,cc._RF.pop()},{"../core/event":"event","../misc/SpriteFrameCache":"SpriteFrameCache","../misc/display":"display"}],cheatInfoDC:[function(e,t,o){"use strict";cc._RF.push(t,"b605c0DfSREDLHF/SeiT7C6","cheatInfoDC");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.CheatInfo=void 0;var c=e("../../core/DataCenter"),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.open_nums={},t.open_date={},t}return i(t,e),t.prototype.getCount=function(e){var t=this.open_nums[e];return t||(t=0,this.open_nums[e]=0),t},t.prototype.markOpen=function(e){o.CheatInfo.open_nums[e]++,o.CheatInfo.open_date[e]=Date.now(),o.CheatInfo.save()},t.prototype.onLoadAll=function(){for(var e in this.open_nums){var t=this.open_date[e];t&&g.isNextDay(t)&&(this.open_nums[e]=0)}},r([c.field()],t.prototype,"open_nums",void 0),r([c.field()],t.prototype,"open_date",void 0),r([c.dc("CheatInfo")],t)}(c.default);o.default=a,o.CheatInfo=c.default.register(a),cc._RF.pop()},{"../../core/DataCenter":"DataCenter"}],cheatInfo:[function(e,t,o){"use strict";cc._RF.push(t,"ab389aq1fdAQbyPS/CFrAqT","cheatInfo");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.CheatInfo=void 0;var c=e("../../../framework/core/DataCenter"),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.open_nums={},t.open_date={},t}return i(t,e),t.prototype.getCount=function(e){var t=this.open_nums[e];return t||(t=0,this.open_nums[e]=0),t},t.prototype.markOpen=function(e){o.CheatInfo.open_nums[e]++,o.CheatInfo.open_date[e]=Date.now(),o.CheatInfo.save()},t.prototype.onLoadAll=function(){for(var e in this.open_nums){var t=this.open_date[e];t&&g.isNextDay(t)&&(this.open_nums[e]=0)}},r([c.field()],t.prototype,"open_nums",void 0),r([c.field()],t.prototype,"open_date",void 0),r([c.dc("CheatInfo")],t)}(c.default);o.default=a,o.CheatInfo=c.default.register(a),cc._RF.pop()},{"../../../framework/core/DataCenter":"DataCenter"}],code:[function(e,t,o){"use strict";cc._RF.push(t,"c90c4SggIxEkY3ed9GUZWY/","code"),Object.defineProperty(o,"__esModule",{value:!0}),o.Code=void 0,function(e){e[e.Succ=0]="Succ",e[e.Claimed=1]="Claimed",e[e.NoRecord=1001]="NoRecord",e[e.ParamError=1002]="ParamError",e[e.DayInvite_Claim_EmptyIndex=2e3]="DayInvite_Claim_EmptyIndex",e[e.DayInvite_Claim_IndexError=2001]="DayInvite_Claim_IndexError",e[e.DayInvite_Claim_Claimed=2002]="DayInvite_Claim_Claimed",e[e.DayInvite_Claim_ParamError=2003]="DayInvite_Claim_ParamError",e[e.SumInvite_Claim_Empty=2004]="SumInvite_Claim_Empty",e[e.SumInvite_Claim_Claimed=2005]="SumInvite_Claim_Claimed",e[e.FreeEnergy_NoEntry=2100]="FreeEnergy_NoEntry",e[e.FreeEnergy_Claimed=2101]="FreeEnergy_Claimed",e[e.Subscribe_ERROR=2200]="Subscribe_ERROR"}(o.Code||(o.Code={})),cc._RF.pop()},{}],display:[function(e,t,o){"use strict";cc._RF.push(t,"07ab0RTdNlM0ZZ3ioGfIlMT","display"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.lazyInit=function(){if(!this._inited){var e=cc.director.getWinSize();this._width=e.width,this._height=e.height,this._hw=this._width/2,this._hh=this._height/2,this._inited=!0}},Object.defineProperty(e,"center",{get:function(){return this.lazyInit(),cc.v2(this.hw,this.hh,0)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"leftTop",{get:function(){return this.lazyInit(),cc.v2(0,this._height,0)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"hw",{get:function(){return this.lazyInit(),this._hw},enumerable:!1,configurable:!0}),Object.defineProperty(e,"hh",{get:function(){return this.lazyInit(),this._hh},enumerable:!1,configurable:!0}),e._width=0,e._height=0,e._hw=0,e._hh=0,e._inited=!1,e}();o.default=n,cc._RF.pop()},{}],easing:[function(e,t){"use strict";cc._RF.push(t,"fb37cTMzy1FE7s38uP5RmKL","easing");var o={constant:function(){return 0},linear:function(e){return e},quadIn:function(e){return e*e},quadOut:function(e){return e*(2-e)},quadInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},quartIn:function(e){return e*e*e*e},quartOut:function(e){return 1- --e*e*e*e},quartInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},quintIn:function(e){return e*e*e*e*e},quintOut:function(e){return--e*e*e*e*e+1},quintInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},sineIn:function(e){return 1-Math.cos(e*Math.PI/2)},sineOut:function(e){return Math.sin(e*Math.PI/2)},sineInOut:function(e){return.5*(1-Math.cos(Math.PI*e))},expoIn:function(e){return 0===e?0:Math.pow(1024,e-1)},expoOut:function(e){return 1===e?1:1-Math.pow(2,-10*e)},expoInOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))},circIn:function(e){return 1-Math.sqrt(1-e*e)},circOut:function(e){return Math.sqrt(1- --e*e)},circInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){var t,o=.1;return 0===e?0:1===e?1:(!o||o<1?(o=1,t=.1):t=.4*Math.asin(1/o)/(2*Math.PI),-o*Math.pow(2,10*(e-=1))*Math.sin(2*(e-t)*Math.PI/.4))},elasticOut:function(e){var t,o=.1;return 0===e?0:1===e?1:(!o||o<1?(o=1,t=.1):t=.4*Math.asin(1/o)/(2*Math.PI),o*Math.pow(2,-10*e)*Math.sin(2*(e-t)*Math.PI/.4)+1)},elasticInOut:function(e){var t,o=.1;return 0===e?0:1===e?1:(!o||o<1?(o=1,t=.1):t=.4*Math.asin(1/o)/(2*Math.PI),(e*=2)<1?o*Math.pow(2,10*(e-=1))*Math.sin(2*(e-t)*Math.PI/.4)*-.5:o*Math.pow(2,-10*(e-=1))*Math.sin(2*(e-t)*Math.PI/.4)*.5+1)},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},backInOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)},bounceIn:function(e){return 1-o.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bounceInOut:function(e){return e<.5?.5*o.bounceIn(2*e):.5*o.bounceOut(2*e-1)+.5},smooth:function(e){return e<=0?0:e>=1?1:e*e*(3-2*e)},fade:function(e){return e<=0?0:e>=1?1:e*e*e*(e*(6*e-15)+10)}};function n(e,t){return function(o){return o<.5?t(2*o)/2:e(2*o-1)/2+.5}}o.quadOutIn=n(o.quadIn,o.quadOut),o.cubicOutIn=n(o.cubicIn,o.cubicOut),o.quartOutIn=n(o.quartIn,o.quartOut),o.quintOutIn=n(o.quintIn,o.quintOut),o.sineOutIn=n(o.sineIn,o.sineOut),o.expoOutIn=n(o.expoIn,o.expoOut),o.circOutIn=n(o.circIn,o.circOut),o.backOutIn=n(o.backIn,o.backOut),o.bounceIn=function(e){return 1-o.bounceOut(1-e)},o.bounceInOut=function(e){return e<.5?.5*o.bounceIn(2*e):.5*o.bounceOut(2*e-1)+.5},o.bounceOutIn=n(o.bounceIn,o.bounceOut),cc.easing=o,cc._RF.pop()},{}],event:[function(e,t,o){"use strict";cc._RF.push(t,"0cf66K7vRxKfKCRFczebJno","event");var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<o;t++)for(var r=arguments[t],c=0,a=r.length;c<a;c++,i++)n[i]=r[c];return n};Object.defineProperty(o,"__esModule",{value:!0}),o.evt=void 0;var i=function(){function e(){this._eventList={}}return e.prototype.on=function(e,t,o){var n;null!=this._eventList[e]?(n=this._eventList[e]).push({listen:t,target:o}):((n=new Array).push({listen:t,target:o}),this._eventList[e]=n)},e.prototype.off=function(e,t,o){if(null==t||t instanceof Function||(o=t,t=null),null!=this._eventList[e])if(null==t&&null==o)delete this._eventList[e];else{for(var n=this._eventList[e],i=n.length-1;i>=0;i--)null!=t&&null!=o?n[i].listen==t&&n[i].target==o&&n.splice(i,1):null!=t&&n[i].listen==t?n.splice(i,1):null!=o&&n[i].target==o&&n.splice(i,1);0==n.length&&delete this._eventList[e]}else this.offTarget(e)},e.prototype.offTarget=function(e){for(var t in this._eventList){var o=this._eventList[t];this._eventList[t]=o.filter(function(t){return t.target!=e}),0==this._eventList[t].length&&delete this._eventList[t]}},e.prototype.emitDelay=function(e,t){for(var o=this,i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];setTimeout(function(){o.emit.apply(o,n([t],i))},1e3*e)},e.prototype.emit=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var n=!1;if(null!=this._eventList[e])for(var i=this._eventList[e],r=0;r<i.length;r++){var c=i[r];null!=c.target?c.listen.apply(c.target,t)&&(n=!0):c.listen.apply(this,t)&&(n=!0)}return n},e.prototype.wait=function(e,t){var n=this;return void 0===t&&(t=0),new Promise(function(i){var r=n,c=0,a=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];o.evt.off(e,a,r),c&&clearTimeout(c),i(t)};t>0&&(c=setTimeout(function(){o.evt.off(e,a,r),i("timeout")},1e3*t)),o.evt.on(e,a,n)})},e.prototype.sleep=function(e){return new Promise(function(t){e=e<0?0:e,setTimeout(function(){t()},1e3*e)})},e.prototype.sleepSafe=function(e,t){return new Promise(function(o){t=t<0?0:t,e.scheduleOnce(function(){o()},t)})},e}();o.evt=new i,window.evt=o.evt,cc._RF.pop()},{}],gameUtil:[function(e,t,o){"use strict";cc._RF.push(t,"fd3fbeRYElF2LD1BNBqy3uS","gameUtil"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.calcOfflineReward=function(e,t,o,n,i){if(e>n)return[];var r=e,c=0,a=t-o;if(a<0){var s=Math.floor(o/i);if(s<=0&&(s=1),(r+=Math.min(s,n-r))>=n)c=0;else{var l=t-o%i;l<0&&(l=i+l),c=l}}else c=a;return[r,c]},e.isNextDay=function(e){return this.isGreaterDate(new Date,new Date(e))},e.isGreaterDate=function(e,t){var o=e.getTime()-t.getTime();return o>864e5||o>0&&e.getDate()!=t.getDate()},e.formatSeconds=function(e){var t=Math.floor(e/3600),o=Math.floor(e/60-60*t),n=Math.floor(e-60*o-3600*t);return(t>0?(t<10?"0"+t:t)+":":"")+o+":"+(n<10?"0"+n:n)},e}();o.default=n,cc._RF.pop()},{}],mathf:[function(e,t,o){"use strict";cc._RF.push(t,"b53f27NZV1LdYvkPZFRbz31","mathf"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.Clamp=function(e,t,o){return e<t?e=t:e>o&&(e=o),e},e.Repeat=function(t,o){return e.Clamp(t-Math.floor(t/o)*o,0,o)},e.PingPong=function(t,o){return t=e.Repeat(t,2*o),o-Math.abs(t-o)},e.InverseLerp=function(t,o,n){return t!=o?e.Clamp01((n-t)/(o-t)):0},e.DeltaAngle=function(t,o){var n=e.Repeat(o-t,360);return n>180&&(n-=360),n},e.Clamp01=function(e){return e<0?0:e>1?1:e},e.Lerp=function(t,o,n){return t+(o-t)*e.Clamp01(n)},e.LerpAngle=function(t,o,n){var i=e.Repeat(o-t,360);return i>180&&(i-=360),t+i*e.Clamp01(n)},e}();o.default=n,cc._RF.pop()},{}],md5:[function(e,t){"use strict";cc._RF.push(t,"6078b7IQshCZLOPiqtGQ6px","md5");var o=0,n=8;function i(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var o=1732584193,n=-271733879,i=-1732584194,r=271733878,h=0;h<e.length;h+=16){var f=o,p=n,d=i,y=r;o=c(o,n,i,r,e[h+0],7,-680876936),r=c(r,o,n,i,e[h+1],12,-389564586),i=c(i,r,o,n,e[h+2],17,606105819),n=c(n,i,r,o,e[h+3],22,-1044525330),o=c(o,n,i,r,e[h+4],7,-176418897),r=c(r,o,n,i,e[h+5],12,1200080426),i=c(i,r,o,n,e[h+6],17,-1473231341),n=c(n,i,r,o,e[h+7],22,-45705983),o=c(o,n,i,r,e[h+8],7,1770035416),r=c(r,o,n,i,e[h+9],12,-1958414417),i=c(i,r,o,n,e[h+10],17,-42063),n=c(n,i,r,o,e[h+11],22,-1990404162),o=c(o,n,i,r,e[h+12],7,1804603682),r=c(r,o,n,i,e[h+13],12,-40341101),i=c(i,r,o,n,e[h+14],17,-1502002290),o=a(o,n=c(n,i,r,o,e[h+15],22,1236535329),i,r,e[h+1],5,-165796510),r=a(r,o,n,i,e[h+6],9,-1069501632),i=a(i,r,o,n,e[h+11],14,643717713),n=a(n,i,r,o,e[h+0],20,-373897302),o=a(o,n,i,r,e[h+5],5,-701558691),r=a(r,o,n,i,e[h+10],9,38016083),i=a(i,r,o,n,e[h+15],14,-660478335),n=a(n,i,r,o,e[h+4],20,-405537848),o=a(o,n,i,r,e[h+9],5,568446438),r=a(r,o,n,i,e[h+14],9,-1019803690),i=a(i,r,o,n,e[h+3],14,-187363961),n=a(n,i,r,o,e[h+8],20,1163531501),o=a(o,n,i,r,e[h+13],5,-1444681467),r=a(r,o,n,i,e[h+2],9,-51403784),i=a(i,r,o,n,e[h+7],14,1735328473),o=s(o,n=a(n,i,r,o,e[h+12],20,-1926607734),i,r,e[h+5],4,-378558),r=s(r,o,n,i,e[h+8],11,-2022574463),i=s(i,r,o,n,e[h+11],16,1839030562),n=s(n,i,r,o,e[h+14],23,-35309556),o=s(o,n,i,r,e[h+1],4,-1530992060),r=s(r,o,n,i,e[h+4],11,1272893353),i=s(i,r,o,n,e[h+7],16,-155497632),n=s(n,i,r,o,e[h+10],23,-1094730640),o=s(o,n,i,r,e[h+13],4,681279174),r=s(r,o,n,i,e[h+0],11,-358537222),i=s(i,r,o,n,e[h+3],16,-722521979),n=s(n,i,r,o,e[h+6],23,76029189),o=s(o,n,i,r,e[h+9],4,-640364487),r=s(r,o,n,i,e[h+12],11,-421815835),i=s(i,r,o,n,e[h+15],16,530742520),o=l(o,n=s(n,i,r,o,e[h+2],23,-995338651),i,r,e[h+0],6,-198630844),r=l(r,o,n,i,e[h+7],10,1126891415),i=l(i,r,o,n,e[h+14],15,-1416354905),n=l(n,i,r,o,e[h+5],21,-57434055),o=l(o,n,i,r,e[h+12],6,1700485571),r=l(r,o,n,i,e[h+3],10,-1894986606),i=l(i,r,o,n,e[h+10],15,-1051523),n=l(n,i,r,o,e[h+1],21,-2054922799),o=l(o,n,i,r,e[h+8],6,1873313359),r=l(r,o,n,i,e[h+15],10,-30611744),i=l(i,r,o,n,e[h+6],15,-1560198380),n=l(n,i,r,o,e[h+13],21,1309151649),o=l(o,n,i,r,e[h+4],6,-145523070),r=l(r,o,n,i,e[h+11],10,-1120210379),i=l(i,r,o,n,e[h+2],15,718787259),n=l(n,i,r,o,e[h+9],21,-343485551),o=u(o,f),n=u(n,p),i=u(i,d),r=u(r,y)}return Array(o,n,i,r)}function r(e,t,o,n,i,r){return u((c=u(u(t,e),u(n,r)))<<(a=i)|c>>>32-a,o);var c,a}function c(e,t,o,n,i,c,a){return r(t&o|~t&n,e,t,i,c,a)}function a(e,t,o,n,i,c,a){return r(t&n|o&~n,e,t,i,c,a)}function s(e,t,o,n,i,c,a){return r(t^o^n,e,t,i,c,a)}function l(e,t,o,n,i,c,a){return r(o^(t|~n),e,t,i,c,a)}function u(e,t){var o=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(o>>16)<<16|65535&o}function h(e){for(var t=Array(),o=(1<<n)-1,i=0;i<e.length*n;i+=n)t[i>>5]|=(e.charCodeAt(i/n)&o)<<i%32;return t}function f(e){for(var t=o?"0123456789ABCDEF":"0123456789abcdef",n="",i=0;i<4*e.length;i++)n+=t.charAt(e[i>>2]>>i%4*8+4&15)+t.charAt(e[i>>2]>>i%4*8&15);return n}window.md5=function(e){return f(i(h(e),e.length*n))},cc._RF.pop()},{}],"mesh-sprite":[function(e,t,o){"use strict";cc._RF.push(t,"2d1a6xPlClHaZRixXbEU8jk","mesh-sprite");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc.gfx,a=cc._decorator,s=a.executeInEditMode,l=a.ccclass,u=a.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._temp_refresh=!0,t._offset=cc.v2(),t._spriteFrame=null,t._vertexes=[cc.v2(-100,-100),cc.v2(100,-100),cc.v2(100,100),cc.v2(-100,100)],t.customShader=!1,t.deleteMode=!1,t._color=cc.color(255,255,255,255),t}return i(t,e),Object.defineProperty(t.prototype,"temp_refresh",{get:function(){return this._temp_refresh},set:function(e){this._temp_refresh=e,this._applyVertexes()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offset",{get:function(){return this._offset},set:function(e){this._offset=e,this.temp_refresh,this._applyVertexes()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"spriteFrame",{get:function(){return this._spriteFrame},set:function(e){this._spriteFrame=e,this._applySpriteFrame()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vertexes",{get:function(){return this._vertexes},set:function(e){this._vertexes=e,this._updateMesh(),this.temp_refresh,this._applyVertexes()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"diffuseColor",{set:function(e){if(null!=e){var t=this.renderer;if(cc.isValid(t)){var o=t.getMaterial(0);cc.isValid(o)&&(o.setProperty("diffuseColor",e),this._color=e)}}},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this._meshCache={},this._updateMesh();var e=this.node.getComponent(cc.MeshRenderer);if(e||(e=this.node.addComponent(cc.MeshRenderer)),e.mesh=null,this.renderer=e,!this.customShader){var t=new cc.Material;t.copy(cc.Material.getInstantiatedBuiltinMaterial("unlit",this)),e.setMaterial(0,t)}this._applySpriteFrame(),this._applyVertexes()},t.prototype.onDestroy=function(){this.mesh.destroy()},t.prototype._updateMesh=function(){var e=this._meshCache[this.vertexes.length];e||((e=new cc.Mesh).init(new c.VertexFormat([{name:c.ATTR_POSITION,type:c.ATTR_TYPE_FLOAT32,num:2},{name:c.ATTR_UV0,type:c.ATTR_TYPE_FLOAT32,num:2}]),this.vertexes.length,!0),this._meshCache[this.vertexes.length]=e),this.mesh=e},t.prototype._applyVertexes=function(){var e=this,t=this.mesh;if(t.setVertices(c.ATTR_POSITION,this.vertexes),this.texture){for(var o=[],n=0,i=this.vertexes;n<i.length;n++){var r=i[n],a=(r.x+this.texture.width/2+this.offset.x)/this.texture.width,s=1-(r.y+this.texture.height/2+this.offset.y)/this.texture.height;o.push(cc.v2(a,s))}t.setVertices(c.ATTR_UV0,o)}if(this.vertexes.length>=3){for(var l=[],u=[].concat(this.vertexes),h=0,f=-1;u.length>3;){var p=u[h],d=u[(h+1)%u.length],y=u[(h+2)%u.length],v=d.sub(p),_=y.sub(d);if(v.cross(_)>=0){for(var m=!1,g=0,w=u;g<w.length;g++){var b=w[g];if(b!==p&&b!==d&&b!==y&&this._testInTriangle(b,p,d,y)){m=!0;break}}if(m){if((h=(h+1)%u.length)===f){cc.log("\u5faa\u73af\u4e00\u5708\u672a\u53d1\u73b0");break}}else l=l.concat([this.vertexes.indexOf(p),this.vertexes.indexOf(d),this.vertexes.indexOf(y)]),u.splice(u.indexOf(d),1),f=h}else if((h=(h+1)%u.length)===f){cc.log("\u5faa\u73af\u4e00\u5708\u672a\u53d1\u73b0");break}}l=l.concat(u.map(function(t){return e.vertexes.indexOf(t)})),t.setIndices(l),this.renderer.mesh!=t&&(this.renderer.mesh=t)}},t.prototype._testInTriangle=function(e,t,o,n){var i=o.sub(t),r=n.sub(t),c=n.sub(o),a=e.sub(t),s=e.sub(o);return i.cross(r)>=0^i.cross(a)<0&&i.cross(r)>=0^r.cross(a)>=0&&c.cross(i)>0^c.cross(s)>=0},t.prototype._applySpriteFrame=function(){if(this.spriteFrame){var e=this.renderer.getMaterial(0),t=this.spriteFrame.getTexture();e.define("USE_DIFFUSE_TEXTURE",!0),e.setProperty("diffuseTexture",t),this.texture=t,e.setProperty("diffuseColor",this.node.color)}},r([u({displayName:"\u5237\u65b0"})],t.prototype,"_temp_refresh",void 0),r([u({displayName:"\u5237\u65b0"})],t.prototype,"temp_refresh",null),r([u(cc.Vec2)],t.prototype,"_offset",void 0),r([u({type:cc.Vec2})],t.prototype,"offset",null),r([u(cc.SpriteFrame)],t.prototype,"_spriteFrame",void 0),r([u({type:cc.SpriteFrame})],t.prototype,"spriteFrame",null),r([u([cc.Vec2])],t.prototype,"_vertexes",void 0),r([u({type:[cc.Vec2]})],t.prototype,"vertexes",null),r([u],t.prototype,"customShader",void 0),r([u],t.prototype,"deleteMode",void 0),r([u(cc.Color)],t.prototype,"_color",void 0),r([l,s],t)}(cc.Component);o.default=h,cc._RF.pop()},{}],mmgame:[function(e,t,o){"use strict";cc._RF.push(t,"c89d2F9doxIWJBTiiRe+voV","mmgame"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Platform"),i=e("./cheatInfoDC"),r=e("./Cloud"),c=function(){function e(){}return e.init=function(e){this.comp=e},e.enableFakeForAdClick=function(e,t,o,i){try{e.active=!1,t.active=!0;var r=cc.director.getScene().name,c=function(){cc.director.getScene().name==r&&(console.log("*************banner---------5"),n.default.showBannerAd(i),t.active=!1,e.active=!0)};return this.timer_fake=setTimeout(c,1e3*o),c}catch(a){console.warn(a)}},e.clear=function(){clearTimeout(this.timer_fake)},e.getStatus=function(e){if(0==r.default.config.globalSwitch)return 0;if(null==r.default.funcs)return-1;var t=r.default.funcs[e];return t?t.status:-1},e.isCheatOpen=function(e){if(0==r.default.config.globalSwitch)return!1;if(null==r.default.funcs)return!1;var t=r.default.funcs[e];if(!t)return!1;if(1==t.status){var o=parseInt(t.max);if(isNaN(o))return!0;if(i.CheatInfo.getCount(e)<o){var n=parseFloat(t.ratio);return!!isNaN(o)||Math.random()<n||(console.log("[wegame]\u5c4f\u853did:"+e+"\u672a\u8fc7\u6982\u7387"),!1)}return console.log("[wegame]\u5c4f\u853did:"+e+"\u6b21\u6570\u5df2\u6c11\u8fbe\u4e0a\u9650"+i.CheatInfo.getCount(e)),!1}return console.log("[wegame]\u5c4f\u853did:"+e+"\u672a\u5f00\u542f"),!1},e.markOpen=function(e){i.CheatInfo.markOpen(e)},e.registerUI=function(e,t){this.view_paths[e]=t},e.openFeature=function(e,t,o,n,r){var c=i.CheatInfo.getCount(e);if(c<t){var a=this.view_paths[e];return a&&vm.show(a,o,n,r),i.CheatInfo.markOpen(e),!0}return console.log("[wegame]\u6253\u5f00\u529f\u80fd\u5931\u8d25: ["+e+"]\uff0c\u5df2\u8d85\u8fc7\u4eca\u5929\u4f7f\u7528\u6b21\u6570\uff01("+c+"/"+t+")"),!1},e.tryOpenFeature=function(e,t,o){var n=this;return new Promise(function(i){n.openFeature(e,t,o,i)||Promise.reject(!1)})},e.openCheat=function(e,t,o,n){if(this.isCheatOpen(e)){var r=this.view_paths[e];if(r)return vm.show(r,t,o,n),i.CheatInfo.markOpen(e),!0}return console.log("[wegame]\u6253\u5f00\u5c4f\u853d\u529f\u80fd\u5931\u8d25: ["+e+"]\uff0c\u672a\u5f00\u542f\uff0c\u6216\u8005\u8d85\u8fc7\u4f7f\u7528\u6b21\u6570\uff0c\u6216\u8005\u6982\u7387"),!1},e.tryOpenCheat=function(e,t,o,n){var i=this;return new Promise(function(r,c){i.openCheat(e,t,o,n)?r(!0):c(!1)})},e.comp=null,e.timer_fake=0,e.view_paths={},e}();o.default=c,window.mmgame=c,cc._RF.pop()},{"../Platform":"Platform","./Cloud":"Cloud","./cheatInfoDC":"cheatInfoDC"}],mvcView:[function(e,t,o){"use strict";cc._RF.push(t,"7b5b2DZoE5HXZCM6T5GOlEU","mvcView");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../utils/ccUtil"),a=e("./controller/Switcher"),s=cc._decorator,l=s.ccclass,u=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.render_interval=o.DisableAutoRender,t.auto_render_list=!0,t.labels=[],t.sprites=[],t.bars=[],t.buttons=[],t.nodes=[],t.subViews=[],t.events=[],t.switchers=[],t.layouts=[],t}var o;return i(t,e),o=t,t.prototype.getData=function(){return this.__data},t.prototype.registerSubViews=function(e,t){var o=this;try{var n=this.getComponentsInChildren(e);n&&(n=n.filter(function(e){return e!=o})),this.registerMvcView(n,t)}catch(i){console.error(i)}},t.prototype.registerMvcView=function(e,t){this.subViews.push({views:e,exp:t})},t.prototype.register=function(e,t,o){if("string"==typeof e){var n=cc.find(e,this.node);if(!n)throw new Error(e+" not found");var i=n.getComponent(cc.Label);if(i)this.registerLabel(i,t);else{var r=n.getComponent(cc.ProgressBar);if(r)this.registerProgressBar(r,t);else{var c=n.getComponent(cc.Sprite);c?this.registerSprite(c,t):console.warn("[mvc-View] not found : "+e)}}}else e instanceof cc.Label||cc.RichText&&e instanceof cc.RichText?this.registerLabel(e,t):e instanceof a.default?this.registerSwitcher(e,t):e instanceof cc.ProgressBar?this.registerProgressBar(e,t):e instanceof cc.Sprite?this.registerSprite(e,t):e instanceof cc.Button?this.onClick(e.node,t):e instanceof cc.Layout||e instanceof cc.ScrollView?this.registerList(e,t,o):Array.isArray(e)&&this.registerMvcView(e,t)},t.prototype.registerSwitcher=function(e,t){return e.node.which=t,this.switchers.push(e),e},t.prototype.registerList=function(e,t,n){null==n&&(n=function(e,t){var n=e.getComponent(o);n&&n.render(t)}),e.node.attr({dataBind:t,setItemCallback:n}),this.layouts.push(e)},t.prototype.registerLabel=function(e,t){e.node.attr({getViewString:t}),this.labels.push(e)},t.prototype.onClick=function(e,t){if("string"==typeof e&&(e=cc.find(e,this.node)),e){var o=c.default.newButton(e,"mvcView","__onButtonClicked",this.node);return e.attr({onClick:t.bind(this)}),o}},t.prototype.__onButtonClicked=function(e){e.target.onClick(this.__data,this.__data2)},t.prototype.onVisible=function(e,t){"string"!=typeof e||(e=cc.find(e,this.node))?(e.attr({isVisible:t}),this.nodes.push(e)):console.warn("[mvc-View] not found : "+e)},t.prototype.onInteractable=function(e,t){"string"!=typeof e||(e=cc.find(e,this.node))?(e instanceof cc.Node&&(e=e.getComponent(cc.Button)),e.node.attr({isInteractable:t}),this.buttons.push(e)):console.warn("[mvc-View] not found : "+e)},t.prototype.observe=function(e,t,o){var n={exp:e,callback:t,policy:o,triggered:!1};this.events.push(n)},t.prototype.registerSprite=function(e,t){return e.node.attr({url:t}),this.sprites.push(e),e},t.prototype.registerProgressBar=function(e,t){return e.node.attr({progress:t}),this.bars.push(e),e},t.prototype.renderLayout=function(e,t,o){if(e.node.activeInHierarchy){var n=e.node.dataBind(t,o),i=e.node.setItemCallback;e.showlist(i,n||[])}},t.prototype.renderList=function(e,t){var o=this;this.layouts.forEach(function(n){o.renderLayout(n,e,t)})},t.prototype.disableAutoRender=function(){this.render_interval=o.DisableAutoRender},t.prototype.onLaterRender=function(){},t.prototype._updateView=function(e,t){var o=this;0!=this.node.active&&(this.auto_render_list&&this.renderList(e,t),this.nodes.forEach(function(o){var n=o.isVisible(e,t);o.active=n}),this.labels.forEach(function(o){if(o.node.active){var n=o.node.getViewString(e,t);null==n&&console.warn("[mvc_View] failed to render label:"+o.node.name,o.node.getViewString),o.string=n||"0"}}),this.sprites.forEach(function(o){if(o.node.activeInHierarchy){var n=o.node.url(e,t);n?c.default.setDisplay(o,n):o.spriteFrame=null}}),this.events.forEach(function(n){!n.triggered&&n.exp(e,t)&&(n.callback&&n.callback.call(o),n.policy,n.triggered=!0)}),this.events.forEach(function(o){o.triggered&&!o.exp(e,t)&&(o.triggered=!1)}),this.subViews.forEach(function(o){var n;o.exp&&(n=o.exp(e,t)),o.views.forEach(function(t,o){return t.render(n&&n[o],e)})}),this.buttons.forEach(function(o){if(o.node.activeInHierarchy){var n=o.node.isInteractable(e,t);o.interactable=n,o.node.opacity=n?255:120}}),this.switchers.forEach(function(o){if(o.node.activeInHierarchy){var n=(0,o.node.which)(e,t);o.index=n}}),this._renderBars(e,t),this.onLaterRender())},t.prototype._renderBars=function(e,t){this.bars.forEach(function(o){var n=o.node.progress(e,t);o.progress=n})},t.prototype.update=function(){},t.prototype.render=function(e,t){this.__data=e||this.__data,this.__data2=t||this.__data2,this._updateView(this.__data,this.__data2)},t.prototype.renderLabel=function(e){var t=e.node.getViewString();e.string=t},t.prototype.onEnable=function(){-1!=this.render_interval&&this.schedule(this.render,this.render_interval)},t.prototype.onDisable=function(){this.unschedule(this.render),this.__data=null},t.DisableAutoRender=-1,r([u],t.prototype,"render_interval",void 0),r([u],t.prototype,"auto_render_list",void 0),o=r([l],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../utils/ccUtil":"ccUtil","./controller/Switcher":"Switcher"}],qqsdk:[function(e,t,o){"use strict";cc._RF.push(t,"142e16VnE1LvasACrUA3ZmV","qqsdk");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function c(e){try{s(n.next(e))}catch(t){r(t)}}function a(e){try{s(n.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,a)}s((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return s([e,t])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.qqsdk=void 0;var r=e("../../core/event"),c=e("./QQGameConfigs"),a=function(){function e(){}return e.videoAd=void 0,e.bannerAd=void 0,e.interstitialAd=void 0,e.isBannerShow=!1,e.videoAdLoadCount=0,e.bannerAdLoadCount=0,e}(),s=function(){function e(){if(this._userInfo=null,this._openId="",CC_WECHATGAME&&null==this._version&&window.qq){this._systemInfo=qq.getSystemInfoSync();var e=this._systemInfo.SDKVersion.replace(/\./g,"");this._version=parseInt(e)}}return Object.defineProperty(e.prototype,"Ver",{get:function(){return this._version},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userInfo",{get:function(){return this._userInfo},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){if(!CC_WECHATGAME)return"";var e=qq.getLaunchOptionsSync();return 1007==e.scene||1008==e.scene?e.query.user_id:""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"openId",{get:function(){return this._openId},set:function(e){this._openId=e},enumerable:!1,configurable:!0}),e.prototype.requestDB=function(e,t,o){this._db.collection(e).get({success:function(n){console.log("get "+e+" succ:",n.data),t&&t.call(o,n.data)},fail:function(){console.log("get "+e+" fail:"),t&&t.call(o)}})},e.prototype.requestConfig=function(e){this._db.collection("t_conf").get({success:function(t){console.log("get configs succ:",t.data),e&&e(t.data)},fail:function(t){console.log("get configs fail:",t),e&&e(null)}})},e.prototype.openShare=function(e,t){return n(this,void 0,void 0,function(){var o,n,r;return i(this,function(){return(o={}).title=e.title,o.imageUrl=e.imageUrl,n=o.queryObjects||{},console.log("qqsdk",o),null!=o&&(r="",t=t||{},Object.keys(t).forEach(function(e){n[e]=t[e]}),r=Object.keys(n).reduce(function(e,t){return e+(t+"=")+n[t]+"&"},r),o.query=r+"time="+(new Date).getTime(),o.ald_desc=e.ald_desc,console.log("open Share",o),qq.aldShareAppMessage(o)),[2]})})},e.prototype.createButton=function(e,t,o,n,i){console.log("-------------createButton");var r=qq.createUserInfoButton({type:"text",text:"     ",style:{x:t||0,y:o||0,width:n||cc.winSize.width,height:i||cc.winSize.height,lineHeight:40,backgroundColor:"#00000000",color:"#ffffff"}});r.onTap(function(t){r.destroy(),t&&t?e&&e(t):e&&e(null)})},e.prototype.getUserInfo=function(e){console.warn("-------------getUserInfo"),qq.getUserInfo({withCredentials:!0,lang:"zh_CN",success:function(t){console.log("getUserInfo success.",t),e&&e(t)},fail:function(t){console.log("getUserInfo:",t),e&&e(null)},complete:null})},e.prototype.oldAuthUser=function(e){qq.authorize({scope:"scope.userInfo",success:function(t){console.log(t),e&&e(!0)},fail:function(t){console.log(t),e&&e(!1)},complete:null})},e.prototype.showShareMenu=function(e){qq.showShareMenu({withShareTicket:!0,success:function(e){console.log(e)},fail:function(e){console.log(e)},complete:null}),qq.aldOnShareAppMessage(function(){return e})},e.prototype.wxLogin=function(e){var t=this;qq.login({success:function(o){console.log("code ",o.code),t._loginCode=o.code,r.evt.emit("wxlogin",o.code),e&&e(!0)},fail:function(){e&&e(!1)},complete:null})},e.prototype.startAuth=function(){var e=this,t=this;return new Promise(function(o,n){t._version>=220?t.createButton(function(i){t.loginToServer(i),i?o(e._userInfo):n()}):t.oldAuthUser(function(i){i?t.getUserInfo(function(n){t.loginToServer(n),o(e._userInfo)}):n()})})},e.prototype.checkAuth=function(){var e=this;return o.qqsdk.userInfo?Promise.resolve(o.qqsdk.userInfo):new Promise(function(t){qq.getSetting({success:function(o){o.authSetting["scope.userInfo"]?e.getUserInfo(function(o){e.loginToServer(o),t(e._userInfo)}):t(null)},fail:null,complete:null})})},e.prototype.loginToServer=function(e){console.log("loginToServer",e),e&&e.userInfo&&(this._userInfo=e.userInfo),r.evt.emit("wxUserInfo",this._userInfo,this._loginCode)},e.prototype.login=function(e){var t=this;CC_WECHATGAME&&this.wxLogin(function(o){o&&e&&t.startAuth()})},e.prototype.postMessage=function(e,t){if(CC_WECHATGAME){var o={cmd:e};t&&Object.keys(t).forEach(function(e){o[e]=t[e]}),qq.getOpenDataContext().postMessage(o)}},e.prototype.uploadScores=function(e){return new Promise(function(t,o){var n={KVDataList:e,success:function(e){t(e)},fail:function(){o()},complete:function(){}};console.warn("-------uploadScores",e),qq.setUserCloudStorage(n)})},e.prototype.uploadScore=function(e,t,o){var n=new Array;n.push({key:e,value:t});var i={KVDataList:n,success:function(e){o&&o(e)},fail:function(){},complete:function(){}};qq.setUserCloudStorage(i)},e.prototype.loadBannerAd=function(e){var t=this;a.bannerAd&&a.bannerAd.destroy(),this._systemInfo||(this._systemInfo=qq.getSystemInfoSync());var o=this._systemInfo.screenWidth/2,n=this._systemInfo.screenHeight,i=this._systemInfo.screenWidth<=this._systemInfo.screenHeight?this._systemInfo.screenWidth:this._systemInfo.screenHeight/3,r=this._systemInfo.model,s=!1;r&&-1!=r.indexOf("iPhone")&&(s=!0);var l=qq.createBannerAd({adUnitId:c.QQGameConfig.banner_ad_id,style:{left:0,top:0,width:i}});a.bannerAd=l,l.onLoad(function(){a.bannerAdLoadCount=0,l.style.left=o-l.style.realWidth/2,l.style.top=s?n-l.style.realHeight-13:n-l.style.realHeight,e&&e("load",l)}),l.onError(function(o){console.log("wxsdk bannerAd onError code:"+o.code+" msg:"+o.msg),a.bannerAdLoadCount+=1,a.bannerAdLoadCount<4&&t.loadBannerAd(e),a.bannerAd=null,e&&e("error")})},e.prototype.showBannerAd=function(e){var t=this;console.log("Wxsdk \u663e\u793abanner\u5e7f\u544a",a.bannerAd),a.bannerAd?(a.bannerAd.show(),a.isBannerShow=!0,r.evt.emit("wxsdk.BannerReady")):(console.log("Wxsdk \u4e0d\u5b58\u5728banner\u8d44\u6e90...."),this.loadBannerAd(function(o){"load"==o?t.showBannerAd():"error"==o&&e&&e()}))},e.prototype.isBannerShow=function(){return a.isBannerShow},e.prototype.hideBannerAd=function(){a.bannerAd&&(a.bannerAd.hide(),a.isBannerShow=!1)},e.prototype.showInterstitial=function(e){return qq.createInterstitialAd?a.interstitialAd=qq.createInterstitialAd({adUnitId:c.QQGameConfig.interstitial_ad_id}):(console.log("\u4e0d\u652f\u6301\u63d2\u5c4f\u5e7f\u544a"),e&&e("notsupport")),a.interstitialAd?(a.interstitialAd.show().catch(function(t){console.error(t),e&&e("err",t)}),new Promise(function(e){a.interstitialAd.onClose(function(){e()})})):Promise.resolve()},e.prototype.loadVideoAd=function(e){console.log("============wxsdk.loadVideoAD");var t=this,o=a.videoAd;o?(o.offClose(a.video_close_callback),o.offError(a.video_error_callback),o.offLoad(a.video_load_callback)):o=qq.createRewardedVideoAd({adUnitId:c.QQGameConfig.video_ad_id}),a.video_error_callback=function(){a.videoAdLoadCount+=1,a.videoAdLoadCount<4?t.loadVideoAd(e):e&&e("error")},a.video_close_callback=function(t){console.log("wxsdk onClose..."),a.videoAdLoadCount=0,e&&e("close",t.isEnded),a.videoAd=null},a.video_load_callback=function(){console.log("wxsdk onLoad"),a.videoAd=o,a.videoAdLoadCount=0,e&&e("load",o)},o.show().catch(function(){o.load().then(function(){o.show(),e&&e("show")}).catch(function(){a.videoAdLoadCount+=1})}),o.onError(a.video_error_callback),o.onClose(a.video_close_callback),o.onLoad(a.video_load_callback),a.videoAd=o},e.prototype.showAppBox=function(){if(window.qq){var e=qq.createAppBox({adUnitId:c.QQGameConfig.box_ad_id});e.load().then(function(){e.show()})}},e}();o.qqsdk=new s,cc._RF.pop()},{"../../core/event":"event","./QQGameConfigs":"QQGameConfigs"}],sdk:[function(e,t,o){"use strict";cc._RF.push(t,"39d4a0B6RRGXqBM/1udBqAy","sdk");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function c(e){try{s(n.next(e))}catch(t){r(t)}}function a(e){try{s(n.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,a)}s((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return s([e,t])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.wxsdk=void 0;var r=e("../../core/event"),c=e("./GameConfigs"),a=e("../../core/Signal"),s=function(){function e(){}return e.videoAd=void 0,e.bannerAd=void 0,e.interstitialAd=void 0,e.isBannerShow=!1,e.videoAdLoadCount=0,e.bannerAdLoadCount=0,e}(),l=function(){function e(){if(this._userInfo=null,this._openId="",this.desurl="",CC_WECHATGAME&&null==this._version){this._systemInfo=wx.getSystemInfoSync();var e=this._systemInfo.SDKVersion.replace(/\./g,"");this._version=parseInt(e)}}return Object.defineProperty(e.prototype,"Ver",{get:function(){return this._version},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userInfo",{get:function(){return this._userInfo},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){if(!CC_WECHATGAME)return"";var e=wx.getLaunchOptionsSync();return 1007==e.scene||1008==e.scene?e.query.user_id:""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"openId",{get:function(){return this._openId},set:function(e){this._openId=e},enumerable:!1,configurable:!0}),e.prototype.requestDB=function(e,t,o){this._db.collection(e).get({success:function(n){console.log("get "+e+" succ:",n.data),t&&t.call(o,n.data)},fail:function(){console.log("get "+e+" fail:"),t&&t.call(o)}})},e.prototype.requestConfig=function(e){this._db.collection("t_conf").get({success:function(t){console.log("get configs succ:",t.data),e&&e(t.data)},fail:function(t){console.log("get configs fail:",t),e&&e(null)}})},e.prototype.compareVersion=function(e,t){e=e.split("."),t=t.split(".");for(var o=Math.max(e.length,t.length);e.length<o;)e.push("0");for(;t.length<o;)t.push("0");for(var n=0;n<o;n++){var i=parseInt(e[n]),r=parseInt(t[n]);if(i>r)return 1;if(i<r)return-1}return 0},e.prototype.openShare=function(e,t){return n(this,void 0,void 0,function(){var o,n,r;return i(this,function(){return g.iswxgame()?(o={},console.log("sdsdsd",o,o.title),o.title=e.title,o.imageUrl=e.imageUrl,n=o.queryObjects||{},null!=o&&(r="",t=t||{},Object.keys(t).forEach(function(e){n[e]=t[e]}),r=Object.keys(n).reduce(function(e,t){return e+(t+"=")+n[t]+"&"},r),o.query=r+"time="+(new Date).getTime(),o.ald_desc=e.ald_desc,console.log("open Share",o),wx.aldShareAppMessage(o)),[2]):[2]})})},e.prototype.createButton=function(e,t,o,n,i){console.log("-------------createButton");var r=wx.createUserInfoButton({type:"text",text:"     ",style:{x:t||0,y:o||0,width:n||cc.winSize.width,height:i||cc.winSize.height,lineHeight:40,backgroundColor:"#00000000",color:"#ffffff"}});r.onTap(function(t){r.destroy(),t&&t?e&&e(t):e&&e(null)})},e.prototype.getUserInfo=function(e){console.warn("-------------getUserInfo"),wx.getUserInfo({withCredentials:!0,lang:"zh_CN",success:function(t){console.log("getUserInfo success.",t),e&&e(t)},fail:function(t){console.log("getUserInfo:",t),e&&e(null)},complete:null})},e.prototype.oldAuthUser=function(e){wx.authorize({scope:"scope.userInfo",success:function(t){console.log(t),e&&e(!0)},fail:function(t){console.log(t),e&&e(!1)},complete:null})},e.prototype.showShareMenu=function(e){wx.showShareMenu({withShareTicket:!0,success:function(e){console.log(e)},fail:function(e){console.log(e)},complete:null}),wx.aldOnShareAppMessage(function(){return e})},e.prototype.wxLogin=function(e){var t=this;wx.login({success:function(o){console.log("code ",o.code),t._loginCode=o.code,r.evt.emit("wxlogin",o.code),e&&e(!0)},fail:function(){e&&e(!1)},complete:null})},e.prototype.startAuth=function(){var e=this,t=this;return new Promise(function(o,n){t._version>=220?t.createButton(function(i){t.loginToServer(i),i?o(e._userInfo):n()}):t.oldAuthUser(function(i){i?t.getUserInfo(function(n){t.loginToServer(n),o(e._userInfo)}):n()})})},e.prototype.checkAuth=function(){var e=this;return o.wxsdk.userInfo?Promise.resolve(o.wxsdk.userInfo):new Promise(function(t){wx.getSetting({success:function(o){o.authSetting["scope.userInfo"]?e.getUserInfo(function(o){e.loginToServer(o),t(e._userInfo)}):t(null)},fail:null,complete:null})})},e.prototype.loginToServer=function(e){e&&e.userInfo&&(this._userInfo=e.userInfo),r.evt.emit("wxUserInfo",this._userInfo,this._loginCode)},e.prototype.login=function(e){var t=this;CC_WECHATGAME&&this.wxLogin(function(o){o&&e&&t.startAuth()})},e.prototype.postMessage=function(e,t){if(CC_WECHATGAME){var o={cmd:e};t&&Object.keys(t).forEach(function(e){o[e]=t[e]}),wx.getOpenDataContext().postMessage(o)}},e.prototype.uploadScores=function(e){return new Promise(function(t,o){var n={KVDataList:e,success:function(e){t(e)},fail:function(){o()},complete:function(){}};console.warn("-------uploadScores",e),wx.setUserCloudStorage(n)})},e.prototype.uploadScore=function(e,t,o){var n=new Array;n.push({key:e,value:t});var i={KVDataList:n,success:function(e){o&&o(e)},fail:function(){},complete:function(){}};wx.setUserCloudStorage(i)},e.prototype.loadBannerAd=function(e){var t=this;s.bannerAd&&s.bannerAd.destroy(),this._systemInfo||(this._systemInfo=wx.getSystemInfoSync());var o=this._systemInfo.screenWidth/2,n=this._systemInfo.screenHeight,i=this._systemInfo.screenWidth<=this._systemInfo.screenHeight?this._systemInfo.screenWidth:this._systemInfo.screenHeight/3,r=this._systemInfo.model,a=!1;r&&-1!=r.indexOf("iPhone")&&(a=!0);var l=wx.createBannerAd({adUnitId:c.GameConfig.banner_ad_id,style:{left:0,top:0,width:i}});s.bannerAd=l,l.onLoad(function(){s.bannerAdLoadCount=0,l.style.left=o-l.style.realWidth/2,l.style.top=a?n-l.style.realHeight-13:n-l.style.realHeight,e&&e("load",l)}),l.onError(function(o){console.log("wxsdk bannerAd onError code:"+o.code+" msg:"+o.msg),s.bannerAdLoadCount+=1,s.bannerAdLoadCount<4&&t.loadBannerAd(e),s.bannerAd=null,e&&e("error")})},e.prototype.showBannerAd=function(e){var t=this;console.log("Wxsdk \u663e\u793abanner\u5e7f\u544a",s.bannerAd),s.bannerAd?(s.bannerAd.show(),s.isBannerShow=!0,r.evt.emit("wxsdk.BannerReady")):(console.log("Wxsdk \u4e0d\u5b58\u5728banner\u8d44\u6e90...."),this.loadBannerAd(function(o){"load"==o?t.showBannerAd():"error"==o&&e&&e()}))},e.prototype.isBannerShow=function(){return s.isBannerShow},e.prototype.hideBannerAd=function(){s.bannerAd&&(s.bannerAd.hide(),s.isBannerShow=!1)},e.prototype.showInterstitial=function(e){if(wx.createInterstitialAd?s.interstitialAd=wx.createInterstitialAd({adUnitId:c.GameConfig.interstitial_ad_id}):(console.log("\u4e0d\u652f\u6301\u63d2\u5c4f\u5e7f\u544a"),e&&e("notsupport")),s.interstitialAd)return s.interstitialAd.show().catch(function(t){console.error(t),e&&e("err",t)}),new Promise(function(e){s.interstitialAd.onClose(function(){e()})})},e.prototype.loadVideoAd=function(e){console.log("============wxsdk.loadVideoAD");var t=this,o=s.videoAd;o?(o.offClose(s.video_close_callback),o.offError(s.video_error_callback),o.offLoad(s.video_load_callback)):o=wx.createRewardedVideoAd({adUnitId:c.GameConfig.video_ad_id}),s.video_error_callback=function(){s.videoAdLoadCount+=1,s.videoAdLoadCount<1?t.loadVideoAd(e):e&&e("error")},s.video_close_callback=function(t){console.log("wxsdk onClose..."),s.videoAdLoadCount=0,e&&e("close",t.isEnded),s.videoAd=null},s.video_load_callback=function(){console.log("wxsdk onLoad"),s.videoAd=o,s.videoAdLoadCount=0,e&&e("load",o)},o.show().catch(function(){o.load().then(function(){o.show(),e&&e("show")}).catch(function(){s.videoAdLoadCount+=1})}),o.onError(s.video_error_callback),o.onClose(s.video_close_callback),o.onLoad(s.video_load_callback),s.videoAd=o},e.prototype.requestSubscribeMessage=function(){var e=wx.getSystemInfoSync().SDKVersion;if(o.wxsdk.compareVersion(e,"2.8.4")>0)return new Promise(function(e,t){wx.requestSubscribeMessage({tmplIds:c.GameConfig.tmplIds,success:function(t){console.log(t);var o=[];c.GameConfig.tmplIds.map(function(e){"accept"==t[e]&&o.push(e)}),e(o)},fail:function(e){wx.showModal({title:"\u5931\u8d25\u63d0\u793a",content:"\u9519\u8bef\u4fe1\u606f\uff1a"+e.errMsg+"\u9519\u8bef\u7801\uff1a"+e.errCode}),t(e.errCode)}})});wx.showModal({title:"\u63d0\u793a",content:"\u5f53\u524d\u5fae\u4fe1\u7248\u672c\u8fc7\u4f4e\uff0c\u65e0\u6cd5\u4f7f\u7528\u8be5\u529f\u80fd\uff0c\u8bf7\u5347\u7ea7\u5230\u6700\u65b0\u5fae\u4fe1\u7248\u672c\u540e\u91cd\u8bd5\u3002"})},e.prototype.openCustomerServiceConversation=function(e,t){var n=wx.getSystemInfoSync().SDKVersion;o.wxsdk.compareVersion(n,"2.0.3")>0?wx.openCustomerServiceConversation({showMessageCard:!0,sendMessageTitle:"\u5e2e\u5979\u8131\u9669",sendMessageImg:"https://www.mimgame.com/games/helpher/share/customer-claim.png",success:function(t){console.log("success =",t),e&&e()},fail:function(e){console.log("fail =",e),t&&t()},complete:function(e){console.log("complete =",e)}}):wx.showModal({title:"\u63d0\u793a",content:"\u5f53\u524d\u5fae\u4fe1\u7248\u672c\u8fc7\u4f4e\uff0c\u65e0\u6cd5\u4f7f\u7528\u8be5\u529f\u80fd\uff0c\u8bf7\u5347\u7ea7\u5230\u6700\u65b0\u5fae\u4fe1\u7248\u672c\u540e\u91cd\u8bd5\u3002"})},e.prototype.showVideo=function(e,t){console.log("showVideo ===>"),this.desurl=t;var o=this,n="https://vv.video.qq.com/getinfo?vids="+e+"&platform=101001&charge=0&otype=json&defn=shd";return console.log("start_url  ",n),new Promise(function(){window.wx.request({url:n,success:function(e){var t=(e.data.replace(/QZOutputJson=/,"")+"qwe").replace(/;qwe/,""),n=JSON.parse(t);if(console.log("data  ",n),n.em)return console.log("getVideoInfoB error  ===========>> !!!!!  em",n.em),o.goSafeVideo(o.desurl);var i=n.vl.vi[0].ul.ui[0].url+n.vl.vi[0].fn+"?vkey="+n.vl.vi[0].fvkey;return console.log("theurl   ",i),o.goFreeVideo(i)},fail:function(){return console.log("getVideoInfoB error  ===========>> !!!!!"),o.goSafeVideo(o.desurl)}})})},e.prototype.showVideoG=function(e,t){console.log("showVideo ===>"),t&&(this.desurl=t.toString());var o=this,n="https://vv.video.qq.com/getinfo?vids="+e+"&platform=101001&charge=0&otype=json&defn=shd";console.log("start_url  ",n);var i=new a.default;return window.wx.request({url:n,success:function(t){var n=(t.data.replace(/QZOutputJson=/,"")+"qwe").replace(/;qwe/,""),r=JSON.parse(n);if(console.log("data  ",r),r.em)console.log("getVideoInfoB error  ===========>> !!!!!  em",r.em),o.goSafeVideo(o.desurl).then(function(){return i.fire()}).catch(function(){return i.cancel()});else{var c="https://vv.video.qq.com/getkey?format=2&otype=json&vt=150&vid="+e+"&ran=0%2E9477521511726081\\&charge=0&filename="+e+".mp4&platform=11";window.wx.request({url:c,success:function(t){var n=(t.data.replace(/QZOutputJson=/,"")+"qwe").replace(/;qwe/,""),c=JSON.parse(n);console.log("data1   ",c);var a=r.vl.vi[0].ul.ui[0].url+(e+".mp4")+"?vkey="+c.key;console.log("theurl   ",a),o.goFreeVideo(a).then(function(){return i.fire()}).catch(function(){return i.cancel()})},fail:function(){console.log("getkey error  ===========>> !!!!!"),o.goSafeVideo(o.desurl).then(function(){return i.fire()}).catch(function(){return i.cancel()})}})}},fail:function(){console.log("getVideoInfoB error  ===========>> !!!!!"),o.goSafeVideo(o.desurl).then(function(){return i.fire()}).catch(function(){return i.cancel()})}}),i.wait()},e.prototype.goSafeVideo=function(e){var t=this;if(console.log("goVideo  ===>  ",e),!e)return Promise.resolve();var o=window.wx,n=new a.default;if(o){var i=this.getSystemInfo(),r=o.createVideo({x:0,y:0,width:i.windowWidth,height:i.windowHeight,src:e,objectFit:"fill",controls:!0,autoplay:!0,showCenterPlayBtn:!1,enableProgressGesture:!1});r.requestFullScreen(),r.onEnded(function(){console.log("\u64ad\u653e\u5b8c\u6210"),r.destroy(),n.fire()}),r.onError(function(){r.destroy(),t.goSafeVideo(e),n.cancel()})}return n.wait()},e.prototype.goFreeVideo=function(e){var t=this,o=window.wx;if(o){var n=this.getSystemInfo(),i=o.createVideo({x:0,y:0,width:n.windowWidth,height:n.windowHeight,src:e,objectFit:"contain",controls:!0,autoplay:!0,showCenterPlayBtn:!1,enableProgressGesture:!1});i.requestFullScreen();var r=new a.default;return i.onEnded(function(){console.log("\u64ad\u653e\u5b8c\u6210"),i.destroy(),r.fire()}),i.onError(function(){console.log("goNewVideo  error  ===========>> !!!!!"),i.destroy(),t.goSafeVideo(t.desurl)}),r.wait()}return Promise.resolve()},e.prototype.getSystemInfo=function(){return this._systemInfo||(this._systemInfo=wx.getSystemInfoSync()),this._systemInfo},e}();o.wxsdk=new l,cc._RF.pop()},{"../../core/Signal":"Signal","../../core/event":"event","./GameConfigs":"GameConfigs"}],ttsdk:[function(e,t,o){"use strict";cc._RF.push(t,"74264peqDZIvqYpYdaXztFZ","ttsdk");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function c(e){try{s(n.next(e))}catch(t){r(t)}}function a(e){try{s(n.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,a)}s((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return s([e,t])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.ttsdk=void 0;var r=e("../../core/event"),c=e("./TTGameConfigs"),a=e("../weak_net_game/UserInfo"),s=e("./DouyinStorage"),l=function(){function e(){}return e.videoAd=void 0,e.bannerAd=void 0,e.interstitialAd=void 0,e.isBannerShow=!1,e.videoAdLoadCount=0,e.bannerAdLoadCount=0,e}(),u=function(){function e(){if(this._userInfo=null,this._openId="",window.tt&&null==this._version){this._systemInfo=tt.getSystemInfoSync();var e=this._systemInfo.SDKVersion.replace(/\./g,"");this._version=parseInt(e)}}return Object.defineProperty(e.prototype,"Ver",{get:function(){return this._version},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userInfo",{get:function(){return this._userInfo},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){if(!window.tt)return"";var e=tt.getLaunchOptionsSync();return 1007==e.scene||1008==e.scene?e.query.user_id:""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"openId",{get:function(){return this._openId},set:function(e){this._openId=e},enumerable:!1,configurable:!0}),e.prototype.requestDB=function(e,t,o){this._db.collection(e).get({success:function(n){console.log("get "+e+" succ:",n.data),t&&t.call(o,n.data)},fail:function(){console.log("get "+e+" fail:"),t&&t.call(o)}})},e.prototype.requestConfig=function(e){this._db.collection("t_conf").get({success:function(t){console.log("get configs succ:",t.data),e&&e(t.data)},fail:function(t){console.log("get configs fail:",t),e&&e(null)}})},e.prototype.openShare=function(e,t){return n(this,void 0,void 0,function(){var o,n,r;return i(this,function(){return g.iswxgame()?((o={}).title=e.title,o.imageUrl=e.imageUrl,n=o.queryObjects||{},null!=o&&(r="",t=t||{},Object.keys(t).forEach(function(e){n[e]=t[e]}),r=Object.keys(n).reduce(function(e,t){return e+(t+"=")+n[t]+"&"},r),o.query=r+"time="+(new Date).getTime(),o.ald_desc=e.ald_desc,console.log("open Share",o),tt.aldShareAppMessage(o)),[2]):[2]})})},e.prototype.createButton=function(e,t,o,n,i){console.log("-------------createButton");var r=tt.createUserInfoButton({type:"text",text:"     ",style:{x:t||0,y:o||0,width:n||cc.winSize.width,height:i||cc.winSize.height,lineHeight:40,backgroundColor:"#00000000",color:"#ffffff"}});r.onTap(function(t){r.destroy(),t&&t?e&&e(t):e&&e(null)})},e.prototype.getUserInfo=function(e){console.warn("-------------getUserInfo"),tt.getUserInfo({withCredentials:!0,lang:"zh_CN",success:function(t){console.log("getUserInfo success.",t),e&&e(t)},fail:function(t){console.log("getUserInfo:",t),e&&e(null)},complete:null})},e.prototype.oldAuthUser=function(e){tt.authorize({scope:"scope.userInfo",success:function(t){console.log(t),e&&e(!0)},fail:function(t){console.log(t),e&&e(!1)},complete:null})},e.prototype.showShareMenu=function(e){tt.showShareMenu({withShareTicket:!0,success:function(e){console.log(e)},fail:function(e){console.log(e)},complete:null}),tt.aldOnShareAppMessage(function(){return e})},e.prototype.start_recorder=function(){if(window.tt){var e=tt.getGameRecorderManager();e.onStart(function(){console.log("\u5f00\u59cb\u5f55\u5c4f\u3002\u3002\u3002"),a.UserInfo.start_time=Date.now()/1e3,a.UserInfo.record_time=0}),e.start({duration:20}),e.onPause(function(){a.UserInfo.record_time=Date.now()/1e3-a.UserInfo.start_time,console.log("\u6682\u505c\u5f55\u5c4f\u3002\u3002\u3002")}),e.onResume(function(){a.UserInfo.start_time=Date.now()/1e3,console.log("\u6062\u590d\u5f55\u5c4f\u3002\u3002\u3002")}),e.onStop(function(e){console.log(e.videoPath),a.UserInfo.record_path=e.videoPath,a.UserInfo.record_time=Date.now()/1e3-a.UserInfo.start_time+a.UserInfo.record_time,console.log("\u7ed3\u675f\u5f55\u5c4f\u65f6\u957f:"+a.UserInfo.record_time)}),e.onError(function(e){console.log("\u5f55\u5c4f\u62a5\u9519=",e)})}},e.prototype.stop_recorder=function(){window.tt&&tt.getGameRecorderManager().stop()},e.prototype.checkSidebarOk=function(){return n(this,void 0,Promise,function(){return i(this,function(){return[2,new Promise(function(e){tt.checkScene({scene:"sidebar",success:function(){e(!0)},fail:function(){e(!1)}})})]})})},e.prototype.douyin_sidebar_check=function(){return n(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return[4,this.checkSidebarOk()];case 1:return e=t.sent(),s.default.sidebarAvailable=e,tt.onShow(function(t){"021036"==t.scene&&"homepage"==t.launch_from&&"sidebar_card"==t.location?(s.default.isFromSidebar=!0,s.default.sidebarAvailable=e):s.default.isFromSidebar=!1}),[2]}})})},e.prototype.wxLogin=function(e){var t=this;tt.login({success:function(o){console.log("code ",o.code),t._loginCode=o.code,r.evt.emit("wxlogin",o.code),e&&e(!0)},fail:function(){e&&e(!1)},complete:null})},e.prototype.startAuth=function(){var e=this,t=this;return new Promise(function(o,n){t._version>=220?t.createButton(function(i){t.loginToServer(i),i?o(e._userInfo):n()}):t.oldAuthUser(function(i){i?t.getUserInfo(function(n){t.loginToServer(n),o(e._userInfo)}):n()})})},e.prototype.checkAuth=function(){var e=this;return o.ttsdk.userInfo?Promise.resolve(o.ttsdk.userInfo):new Promise(function(t){tt.getSetting({success:function(o){o.authSetting["scope.userInfo"]?e.getUserInfo(function(o){e.loginToServer(o),t(e._userInfo)}):t(null)},fail:null,complete:null})})},e.prototype.loginToServer=function(e){console.log("loginToServer",e),e&&e.userInfo&&(this._userInfo=e.userInfo),r.evt.emit("wxUserInfo",this._userInfo,this._loginCode)},e.prototype.login=function(e){var t=this;window.tt&&this.wxLogin(function(o){o&&e&&t.startAuth()})},e.prototype.postMessage=function(e,t){if(window.tt){var o={cmd:e};t&&Object.keys(t).forEach(function(e){o[e]=t[e]}),tt.getOpenDataContext().postMessage(o)}},e.prototype.uploadScores=function(e){return new Promise(function(t,o){var n={KVDataList:e,success:function(e){t(e)},fail:function(){o()},complete:function(){}};console.warn("-------uploadScores",e),tt.setUserCloudStorage(n)})},e.prototype.uploadScore=function(e,t,o){var n=new Array;n.push({key:e,value:t});var i={KVDataList:n,success:function(e){o&&o(e)},fail:function(){},complete:function(){}};tt.setUserCloudStorage(i)},e.prototype.loadBannerAd=function(e){var t=this;l.bannerAd&&l.bannerAd.destroy(),this._systemInfo||(this._systemInfo=tt.getSystemInfoSync());var o=this._systemInfo.screenWidth/2,n=this._systemInfo.screenHeight,i=this._systemInfo.screenWidth<=this._systemInfo.screenHeight?this._systemInfo.screenWidth:this._systemInfo.screenHeight/3,r=this._systemInfo.model;r&&r.indexOf("iPhone");var a=tt.createBannerAd({adUnitId:c.TTGameConfig.banner_ad_id,style:{left:0,top:0,width:i}});l.bannerAd=a,a.onResize(function(e){a.style.left=o-e.width/2,a.style.top=n-e.height-10}),a.onLoad(function(){l.bannerAdLoadCount=0,e&&e("load",a)}),a.onError(function(o){console.log("ttsdk bannerAd onError code:"+o.errCode+" \u5f53\u524d\u6b21\u6570"+l.bannerAdLoadCount),l.bannerAdLoadCount+=1,l.bannerAdLoadCount<4&&t.loadBannerAd(e),l.bannerAd=null,e&&e("error")})},e.prototype.showBannerAd=function(e){var t=this;console.log("ttsdk \u663e\u793abanner\u5e7f\u544a",l.bannerAd),l.bannerAd?(l.bannerAd.show(),l.isBannerShow=!0,r.evt.emit("ttsdk.BannerReady")):(console.log("ttsdk \u4e0d\u5b58\u5728banner\u8d44\u6e90...."),this.loadBannerAd(function(o){"load"==o?t.showBannerAd():"error"==o&&e&&e()}))},e.prototype.isBannerShow=function(){return l.isBannerShow},e.prototype.hideBannerAd=function(){l.bannerAd&&(l.bannerAd.hide(),l.isBannerShow=!1)},e.prototype.destroy=function(){l.bannerAd&&(l.bannerAd.destroy(),l.isBannerShow=!1,l.bannerAd=null)},e.prototype.showInterstitial=function(){if("Toutiao"===tt.getSystemInfoSync().appName)return l.interstitialAd&&(l.interstitialAd.destroy(),l.interstitialAd=null),l.interstitialAd=tt.createInterstitialAd({adUnitId:c.TTGameConfig.interstitial_ad_id}),l.interstitialAd?(l.interstitialAd.load().then(function(){l.interstitialAd.show()}).catch(function(e){console.log(e)}),new Promise(function(e){l.interstitialAd.onClose(function(){e()})})):Promise.resolve()},e.prototype.loadVideoAd=function(e){console.log("============ttsdk.loadVideoAD");var t=this,o=l.videoAd;o?(o.offClose(l.video_close_callback),o.offError(l.video_error_callback),o.offLoad(l.video_load_callback)):o=tt.createRewardedVideoAd({adUnitId:c.TTGameConfig.video_ad_id}),l.video_error_callback=function(){l.videoAdLoadCount+=1,l.videoAdLoadCount<4?t.loadVideoAd(e):e&&e("error")},l.video_close_callback=function(t){console.log("ttsdk onClose..."),l.videoAdLoadCount=0,e&&e("close",t.isEnded),l.videoAd=null},l.video_load_callback=function(){console.log("ttsdk onLoad"),l.videoAd=o,l.videoAdLoadCount=0,e&&e("load",o)},o.show().catch(function(){o.load().then(function(){o.show(),e&&e("show")}).catch(function(){l.videoAdLoadCount+=1})}),o.onError(l.video_error_callback),o.onClose(l.video_close_callback),o.onLoad(l.video_load_callback),l.videoAd=o},e}();o.ttsdk=new u,cc._RF.pop()},{"../../core/event":"event","../weak_net_game/UserInfo":"UserInfo","./DouyinStorage":"DouyinStorage","./TTGameConfigs":"TTGameConfigs"}],umeng:[function(e,t,o){"use strict";cc._RF.push(t,"5c88ahIRmdIHrRKH74EDr/t","umeng"),Object.defineProperty(o,"__esModule",{value:!0}),o.umeng=void 0;var n=function(){function e(){}return e.startLevel=function(e){return cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS?jsb.reflection.callStaticMethod("Umeng","startLevel:",e):cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("com/game/sdk/Umeng","startLevel","(Ljava/lang/String;)V",e):void 0},e.finishLevel=function(e){return cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS?jsb.reflection.callStaticMethod("Umeng","finishLevel:",e):cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("com/game/sdk/Umeng","finishLevel","(Ljava/lang/String;)V",e):void 0},e.failLevel=function(e){return cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS?jsb.reflection.callStaticMethod("Umeng","failLevel:",e):cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("com/game/sdk/Umeng","failLevel","(Ljava/lang/String;)V",e):void 0},e.onEvent=function(e,t){return cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS?jsb.reflection.callStaticMethod("Umeng","onEvent:status:",e,t):cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("com/game/sdk/Umeng","onEvent","(Ljava/lang/String;Ljava/lang/String;)V",e,t):void 0},e}();o.umeng=n,cc._RF.pop()},{}],wegame:[function(e,t,o){"use strict";cc._RF.push(t,"7fa33NMd3RHcYUYiSc3UXdG","wegame"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../framework/extension/Platform"),i=e("./Cloud"),r=e("./cheatInfo"),c=function(){function e(){}return e.init=function(e){this.comp=e},e.enableFakeForAdClick=function(e,t,o,i){try{e.active=!1,t.active=!0,n.default.hideBannerAd();var r=cc.director.getScene().name,c=function(){cc.director.getScene().name==r&&(n.default.showBannerAd(i),t.active=!1,e.active=!0)};return this.timer_fake=setTimeout(c,1e3*o),c}catch(a){console.warn(a)}},e.clear=function(){clearTimeout(this.timer_fake)},e.getStatus=function(e){if(null==i.default.funcs)return-1;var t=i.default.funcs[e];return t?t.status:-1},e.isCheatOpen=function(e){if(null==i.default.funcs)return!1;var t=i.default.funcs[e];if(!t)return!1;if(1==t.status){var o=parseInt(t.show_num);if(isNaN(o))return!0;if(r.CheatInfo.getCount(e)<o){var n=parseFloat(t.show_per);return!!isNaN(o)||Math.random()<n||(console.log("[wegame]\u5c4f\u853did:"+e+"\u672a\u8fc7\u6982\u7387"),!1)}return console.log("[wegame]\u5c4f\u853did:"+e+"\u6b21\u6570\u5df2\u6c11\u8fbe\u4e0a\u9650"),!1}return console.log("[wegame]\u5c4f\u853did:"+e+"\u672a\u5f00\u542f"),!1},e.markOpen=function(e){r.CheatInfo.markOpen(e)},e.registerUI=function(e,t){this.view_paths[e]=t},e.openFeature=function(e,t,o,n,i){var c=r.CheatInfo.getCount(e);if(c<t){var a=this.view_paths[e];return a&&vm.show(a,o,n,i),r.CheatInfo.markOpen(e),!0}return console.log("[wegame]\u6253\u5f00\u529f\u80fd\u5931\u8d25: ["+e+"]\uff0c\u5df2\u8d85\u8fc7\u4eca\u5929\u4f7f\u7528\u6b21\u6570\uff01("+c+"/"+t+")"),!1},e.tryOpenFeature=function(e,t,o){var n=this;return new Promise(function(i){n.openFeature(e,t,o,i)||Promise.reject(!1)})},e.openCheat=function(e,t,o,n){if(this.isCheatOpen(e)){var i=this.view_paths[e];if(i)return vm.show(i,t,o,n),r.CheatInfo.markOpen(e),!0}return console.log("[wegame]\u6253\u5f00\u5c4f\u853d\u529f\u80fd\u5931\u8d25: ["+e+"]\uff0c\u672a\u5f00\u542f\uff0c\u6216\u8005\u8d85\u8fc7\u4f7f\u7528\u6b21\u6570\uff0c\u6216\u8005\u6982\u7387"),!1},e.tryOpenCheat=function(e,t,o,n){var i=this;return new Promise(function(r,c){i.openCheat(e,t,o,n)?r(!0):c(!1)})},e.comp=null,e.timer_fake=0,e.view_paths={},e}();o.default=c,cc._RF.pop()},{"../../../framework/extension/Platform":"Platform","./Cloud":void 0,"./cheatInfo":"cheatInfo"}],wxRankList:[function(e,t,o){"use strict";cc._RF.push(t,"b9c3e2G9W1Czq9FyCjPGN5q","wxRankList");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c="reachlevel",a="levelScore",s="FriendRank",l="FriendChallengRank",u="HorConmpar",h="EndRank",f="EndChallengRank",p=cc._decorator,d=p.ccclass,y=p.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rankRender=null,t.rankListNode=null,t.rankBgNode=null,t.touchLayer=null,t.enableScroll=!0,t._timeCounter=0,t.rendInterval=.5,t.rankTexture=null,t.rankSpriteFrame=null,t.closeBackRank=0,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){o.instance=this,this._timeCounter=0,this.rankTexture=new cc.Texture2D,this.rankSpriteFrame=new cc.SpriteFrame,this.resizeSharedCanvas(this.rankRender.node.width,this.rankRender.node.height)},t.prototype.update=function(){this.updateRankList()},t.prototype.resizeSharedCanvas=function(e,t){if(window.wx){var o=window.wx.getOpenDataContext().canvas;o.width=e,o.height=t,console.log(o)}},t.prototype.changeRender=function(e){"sprHorRank"===e.name?(this.rankListNode.active=!1,this.rankBgNode.active=!1):"sprRankList"===e.name&&(this.rankListNode.active=!0,this.rankBgNode.active=!0),this.rankRender.node.width=e.width,this.rankRender.node.height=e.height,this.rankRender.node.position=e.position,this.resizeSharedCanvas(e.width,e.height)},t.prototype.updateRankList=function(){if(window.wx&&this.rankTexture){var e=window.wx.getOpenDataContext().canvas;this.rankTexture.initWithElement(e),this.rankTexture.handleLoadedTexture(),this.rankSpriteFrame.setTexture(this.rankTexture),this.rankRender.spriteFrame=this.rankSpriteFrame}},t.prototype.onEnable=function(){this.touchLayer.active=!0,this.enableScroll&&this.rankRender.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this)},t.prototype.onDisable=function(){this.enableScroll&&this.rankRender.node.off(cc.Node.EventType.TOUCH_MOVE)},t.prototype.onPageUp=function(){console.log(this),this.postMessage("Paging",-1)},t.prototype.onPageDown=function(){this.postMessage("Paging",1)},t.prototype.onClose=function(){if(1===this.closeBackRank)return this.closeBackRank=0,void this.loadHorRank(1);this.node.active=!1},t.prototype.onTouchMove=function(e){var t=e.getDeltaY();this.postMessage("Scrolling",t)},t.prototype.loadLevelScoreRank=function(){this.node.active=!0,this.touchLayer.active=!0,this.onEnable(),this.changeRender(this.rankListNode),this.postMessage(h)},t.prototype.loadChallengLevelScoreRank=function(){this.node.active=!0,this.touchLayer.active=!0,this.onEnable(),this.changeRender(this.rankListNode),this.postMessage(f)},t.prototype.loadLevelOpenRank=function(){this.node.active=!0,this.touchLayer.active=!0,this.onEnable(),this.changeRender(this.rankListNode),this.postMessage(s)},t.prototype.loadChallengLevelOpenRank=function(){this.node.active=!0,this.touchLayer.active=!0,this.onEnable(),this.changeRender(this.rankListNode),this.postMessage(l)},t.prototype.loadHorRank=function(e){void 0===e&&(e=1),this.node.active=!0,this.touchLayer.active=!1,this.onDisable(),this.postMessage(u,e,1)},t.prototype.postMessage=function(e,t,o){void 0===t&&(t=null),void 0===o&&(o=null),window.wx&&window.wx.getOpenDataContext().postMessage({action:e,data:t,dataEx:o})},t.prototype.uploadScore=function(e,t){window.wx&&(t=t.toString(),window.wx.setUserCloudStorage({KVDataList:[{key:a+e,value:t}],success:function(e){console.log("uploadScore success:res=>",e)},fail:function(e){console.log("uploadScore fail:res=>",e)}}))},t.prototype.uploadLevelOpen=function(e){window.window.wx&&(e=e.toString(),window.wx.setUserCloudStorage({KVDataList:[{key:c,value:e}],success:function(e){console.log("uploadScore success:res=>",e)},fail:function(e){console.log("uploadScore fail:res=>",e)}}))},t.prototype.removeUserKey=function(e){window.window.wx&&("string"==typeof e&&(e=[e]),window.wx.removeUserCloudStorage({keyList:e,success:function(e){console.log("uploadScore success:res=>",e)},fail:function(e){console.log("uploadScore fail:res=>",e)}}))},t.prototype.share=function(e){window.window.wx&&(e||(e={}),e.imageUrl=e.imageUrl||"http://img.zcool.cn/community/01c2ac57beb18d0000012e7eaa6d19.jpg@1280w_1l_2o_100sh.jpg",window.wx.shareAppMessage({title:"",imageUrl:e.imageUrl,query:"key=testshare",success:function(t){console.log("success:",t),e.success&&e.success(t)},fail:function(t){console.log("fail:",t),e.fail&&e.fail(t)}}))},t.prototype.initRank=function(){},t.prototype.snapshotSync=function(){if(window.wx){var e=cc.game.canvas,t=cc.winSize.width,o=cc.winSize.height;return e.toTempFilePathSync({x:0,y:0,width:1.5*t,height:o,destWidth:1.5*t,destHeight:o})}},t.instance=null,r([y(cc.Sprite)],t.prototype,"rankRender",void 0),r([y(cc.Node)],t.prototype,"rankListNode",void 0),r([y(cc.Node)],t.prototype,"rankBgNode",void 0),r([y(cc.Node)],t.prototype,"touchLayer",void 0),o=r([d],t)}(cc.Component);o.default=v,cc._RF.pop()},{}],zzcloud:[function(e,t,o){"use strict";cc._RF.push(t,"45fc7bKcaZDC4AGLyMRm9Sc","zzcloud"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],zzsdkui_item:[function(e,t){"use strict";cc._RF.push(t,"399e20P2xhD5ax/pizj4jfL","zzsdkui_item");var o=cc.Class({extends:cc.Component,properties:{_frames:[],_framesindex:0,_framestime:0},statics:{self:null,getInstance:function(){return null==o.self&&(o.self=new o),o.self}},start:function(){},youlikeItem:function(e,t,o,n,i){this.adtype=e,this.tagtype=t,this.data=o,this.itemChange=n,this.failCb=i,this.node.width=172,this.node.height=172,this.node.anchorX=0,this.node.anchorY=1,window.zzsdkui.z_sign==1&&(this.node.scaleX=this.node.scaleY=.9);var r,c,a=new cc.Node("bg"),s=a.addComponent(cc.Sprite);a.width=this.node.width,a.height=this.node.height,a.anchorX=0,a.anchorY=1,this.node.addChild(a),cc.loader.loadRes((r="adver/",c=this.itemChange&&this.itemChange.bg?this.itemChange.bg:"youlike_item_bg",r+c),cc.SpriteFrame,function(e,t){e?console.log("err:",e):s&&(s.spriteFrame=t)});var l,u,h=new cc.Node("mask");h.width=h.height=142,h.anchorX=0,h.anchorY=1,h.x=(l=this.node.width,u=h.width,(l-u)*.5),h.y=-h.x+2,this.node.addChild(h);var f=h.addComponent(cc.Mask);this.updateMask(.08,f);var p=new cc.Node("icon");p.setContentSize(h.width,h.height),p.anchorX=0,p.anchorY=1,h.addChild(p);var d=p.addComponent(cc.Sprite);d.sizeMode=cc.Sprite.SizeMode.CUSTOM,this.loadImg(d),this.schedule(this.updateImg,.008),this.node.on(cc.Node.EventType.TOUCH_END,this.ontap,this)},drawerItem:function(e,t,o,n,i){void 0===i&&(i=null);var r=function(e,t){return e-t};this.adtype=e,this.tagtype=t,this.data=o,this.failCb=n,this.index=i,this.node.width=200,this.node.height=257,this.node.anchorX=0,this.node.anchorY=1;var c=new cc.Node("bg");c.width=this.node.width,c.height=this.node.height,c.anchorX=0,c.anchorY=1,this.node.addChild(c);var a=c.addComponent(cc.Sprite);cc.loader.loadRes("adver/drawer_itembg",cc.SpriteFrame,function(e,t){e?console.log("err:",e):a&&(a.spriteFrame=t)});var s,l,u=new cc.Node("mask");u.width=u.height=166,u.anchorX=0,u.anchorY=1,u.x=(s=this.node.width,l=u.width,(s-l)*.5),u.y=-u.x+2,this.node.addChild(u);var h=u.addComponent(cc.Mask);this.updateMask(.05,h);var f=new cc.Node("icon");f.setContentSize(u.width,u.height),f.anchorX=0,f.anchorY=1,u.addChild(f);var p=f.addComponent(cc.Sprite);p.sizeMode=cc.Sprite.SizeMode.CUSTOM,this.loadImg(p);var d=new cc.Node("text");d.width=this.node.width,d.height=26,d.color=new cc.Color(0,0,0),d.y=r(r(u.y,u.height),30),d.x=this.node.width*.5,this.node.addChild(d);var y=d.addComponent(cc.Label);y.fontSize=24,y.lineHeight=25,y.overflow=cc.Label.Overflow.SHRINK,y.horizontalAlign=cc.Label.HorizontalAlign.CENTER,y.string=this.data.appname,this.schedule(this.updateImg,.008),this.node.on(cc.Node.EventType.TOUCH_END,this.ontap,this)},floatItem:function(e,t,o,n,i){var r=function(e,t){return e-t};this.adtype=e,this.tagtype=t,this.data=o,this.itemChange=n,this.failCb=i,this.node.width=120,this.node.height=158,this.node.anchorX=0,this.node.anchorY=1;var c,a=new cc.Node("bg"),s=a.addComponent(cc.Sprite);a.width=this.node.width,a.height=this.node.height,a.anchorX=0,a.anchorY=1,this.node.addChild(a),c=this.itemChange&&this.itemChange._bgurl?this.itemChange._bgurl:Math.random()<.5?"float_bg1":"float_bg2",cc.loader.loadRes("adver/"+c,cc.SpriteFrame,function(e,t){e?console.log("err:",e):s&&(s.spriteFrame=t)});var l,u,h=new cc.Node("mask");h.width=h.height=106,h.anchorX=0,h.anchorY=1,h.x=(l=this.node.width,u=h.width,(l-u)*.5),h.y=-h.x+2,this.node.addChild(h);var f=h.addComponent(cc.Mask);this.updateMask(.05,f);var p=new cc.Node("icon");p.setContentSize(h.width,h.height),p.anchorX=0,p.anchorY=1,h.addChild(p);var d=p.addComponent(cc.Sprite);d.sizeMode=cc.Sprite.SizeMode.CUSTOM,this.loadImg(d);var y=new cc.Node("text");if(this.itemChange&&this.itemChange._textColor!=null){var v=this.itemChange._textColor.split(",");y.color=new cc.Color(v[0],v[1],v[2])}y.width=this.node.width,y.height=22,y.y=r(r(h.y,h.height),21),y.x=this.node.width*.5,this.node.addChild(y);var _=y.addComponent(cc.Label);_.fontSize=20,_.lineHeight=21,_.overflow=cc.Label.Overflow.SHRINK,_.horizontalAlign=cc.Label.HorizontalAlign.CENTER,_.string=this.data.appname,this.schedule(this.updateImg,.008),this.node.on(cc.Node.EventType.TOUCH_END,this.ontap,this)},interItem:function(e,t,o,n,i){void 0===i&&(i=null);this.adtype=e,this.tagtype=t,this.data=o,this.failCb=n,this.index=i,this.node.width=229,this.node.height=248,this.node.anchorX=0,this.node.anchorY=1;var r=new cc.Node("bg");r.anchorX=0,r.anchorY=1,this.node.addChild(r);var c=r.addComponent(cc.Sprite);cc.loader.loadRes("adver/inter_itembg",cc.SpriteFrame,function(e,t){e?console.log("err:",e):c&&(c.spriteFrame=t)});var a,s,l=new cc.Node("mask");l.width=l.height=180,l.anchorX=0,l.anchorY=1,l.x=(a=this.node.width,s=l.width,(a-s)*.5),l.y=-l.x+5,this.node.addChild(l);var u=l.addComponent(cc.Mask);this.updateMask(.05,u);var h=new cc.Node("icon");h.setContentSize(l.width,l.height),h.anchorX=0,h.anchorY=1,l.addChild(h);var f=h.addComponent(cc.Sprite);f.sizeMode=cc.Sprite.SizeMode.CUSTOM,this.loadImg(f),this.schedule(this.updateImg,.008),this.node.on(cc.Node.EventType.TOUCH_END,this.ontap,this)},interfullItem_top:function(e,t,o,n,i){var r=function(e,t){return e+t},c=function(e,t){return e+t},a=function(e,t){return e-t},s=function(e,t){return e*t},l=function(e,t){return e+t},u=function(e,t){return e+t},h=function(e,t){return e(t)},f=function(e,t){return e+t};this.adtype=e,this.tagtype=t,this.data=o,this.failCb=i,this.node.width=365,this.node.height=185,this.node.anchorX=0,this.node.anchorY=1;var p=new cc.Node("bg"),d=p.addComponent(cc.Sprite);p.width=this.node.width,p.height=this.node.height,p.anchorX=0,p.anchorY=1,this.node.addChild(p),cc.loader.loadRes("adver/"+(n!=null?n:"newInter_rect1"),cc.SpriteFrame,function(e,t){e?console.log("err:",e):d&&(d.spriteFrame=t)});var y=new cc.Node("mask");y.width=y.height=140,y.anchorX=0,y.anchorY=1,y.x=20,y.y=-10,this.node.addChild(y);var v=y.addComponent(cc.Mask);this.updateMask(.05,v);var _=new cc.Node("icon");_.setContentSize(y.width,y.height),_.anchorX=0,_.anchorY=1,y.addChild(_);var m=_.addComponent(cc.Sprite);m.sizeMode=cc.Sprite.SizeMode.CUSTOM,this.loadImg(m);var g,w,b,k,S=new cc.Node("text");S.color=new cc.Color(0,0,0),S.width=(b=this.node.width,k=y.width,g=b-k,w=y.x,g-w-10),S.height=26,S.x=r(r(c(S.width*.5,y.x),y.width),5),S.y=a(y.y,20),this.node.addChild(S);var C=S.addComponent(cc.Label);C.fontSize=24,C.lineHeight=25,C.overflow=cc.Label.Overflow.SHRINK,C.horizontalAlign=cc.Label.HorizontalAlign.LEFT,C.string=this.data.appname;var I=new cc.Node("playNum");I.width=S.width,I.height=25,I.x=S.x,I.y=a(a(S.y,s(S.height,.5)),20),I.color=new cc.Color(156,156,156),this.node.addChild(I);var P=I.addComponent(cc.Label),O=Math.floor(c(s(Math.random(),201),200));P.overflow=cc.Label.Overflow.SHRINK,P.horizontalAlign=cc.Label.HorizontalAlign.LEFT,P.fontSize=23,P.lineHeight=24,P.string=l(O,"\u4e07\u4eba\u5728\u73a9");var x=new cc.Node("score");x.color=new cc.Color(156,156,156),x.anchorX=0,x.width=I.width,x.height=25,x.x=l(u(y.x,y.width),5),x.y=u(-this.node.height,60),this.node.addChild(x);var R,T,D,j,L,E=x.addComponent(cc.Label);E.horizontalAlign=cc.Label.HorizontalAlign.LEFT,E.fontSize=23,E.lineHeight=24,window.wx?window.wx.getStorageSync(this.data.appname)?R=window.wx.getStorageSync(this.data.appname):(R=a((j=4,L=h(Number,Math.random().toFixed(1)),j+L),.1).toFixed(1),window.wx.setStorageSync(this.data.appname,R)):R=(T=f(4,h(Number,Math.random().toFixed(1))),D=.1,T-D).toFixed(1),E.string=f("\u8bc4\u5206\uff1a"+R,"\u5206"),this.schedule(this.updateImg,.008),this.node.on(cc.Node.EventType.TOUCH_END,this.ontap,this)},interfullItem_bot:function(e,t,o,n,i){var r=function(e,t){return e*t},c=function(e,t){return e-t};this.adtype=e,this.tagtype=t,this.data=o,this.failCb=i,this.node.width=182,this.node.height=221,this.node.anchorX=0,this.node.anchorY=1;var a=new cc.Node("bg"),s=a.addComponent(cc.Sprite);a.width=this.node.width,a.height=this.node.height,a.anchorX=0,a.anchorY=1,this.node.addChild(a),cc.loader.loadRes("adver/"+(n!=null?n:"newInter_itembg"),cc.SpriteFrame,function(e,t){e?console.log("err:",e):s&&(s.spriteFrame=t)});var l,u,h=new cc.Node("mask");h.width=h.height=140,h.anchorX=0,h.anchorY=1,h.x=r((l=this.node.width,u=h.width,l-u),.5),h.y=-10,this.node.addChild(h);var f=h.addComponent(cc.Mask);this.updateMask(.05,f);var p=new cc.Node("icon");p.setContentSize(h.width,h.height),p.anchorX=0,p.anchorY=1,h.addChild(p);var d=p.addComponent(cc.Sprite);d.sizeMode=cc.Sprite.SizeMode.CUSTOM,this.loadImg(d);var y=new cc.Node("text");y.color=new cc.Color(0,0,0),y.width=this.node.width-40,y.height=26,y.anchorX=0,y.x=r(c(this.node.width,y.width),.5),y.y=c(c(h.y,h.height),25),this.node.addChild(y);var v=y.addComponent(cc.Label);v.fontSize=24,v.lineHeight=25,v.overflow=cc.Label.Overflow.SHRINK,v.horizontalAlign=cc.Label.HorizontalAlign.CENTER,v.string=this.data.appname,this.schedule(this.updateImg,.008),this.node.on(cc.Node.EventType.TOUCH_END,this.ontap,this)},tryItem:function(e,t,o,n,i,r,c){var a={nskwb:"err:",NEnRh:"1|2|4|0|3",IEsKA:function(e,t){return e*t},UJKpD:function(e,t){return e-t},fiWFU:"1|2|3|0|4",iZAhd:function(e,t){return e+t},wWlaw:"0|2|5|6|1|4|3",gMQzH:function(e,t){return e+t},hdqFe:"adver/",RTXFg:function(e,t){return e-t},KzZel:"adver/try_itembg",HYrQT:"mask",YacYT:function(e,t){return e*t},ooJVw:"icon",qZIzA:"text",jEKOg:function(e,t){return e-t},jwbZH:function(e,t){return e+t},KEQnX:"rebox",kdQUg:"reicon",ccrTb:"renum",oIVZx:"getre",XWZBK:function(e,t){return e<t},PKgQA:function(e,t){return e==t},HwHGt:"yilinqu",ynRmX:"\u5df2\u9886\u53d6",omDVk:"trybtn",kraLv:"try_tryplay",MGJZu:"try_goplay",ozgSq:function(e,t){return e+t},VgeRJ:"adver/try_rewardbg"};this.adtype=e,this.tagtype=t,this.data=o,this.failCb=n,this.getRewardCb=c;var s=this;s.node.width=563,s.node.height=120,s.node.anchorX=0,s.node.anchorY=1,s.node.active=!1;var l=new cc.Node("bg"),u=l.addComponent(cc.Sprite);l.width=s.node.width,l.height=s.node.height,l.anchorX=0,l.anchorY=1,s.node.addChild(l),cc.loader.loadRes(a.KzZel,cc.SpriteFrame,function(e,t){e?console.log(a.nskwb,e):u&&(u.spriteFrame=t)});var h=new cc.Node(a.HYrQT);h.width=h.height=100,h.anchorX=0,h.anchorY=1,h.x=10,h.y=a.YacYT(-a.RTXFg(s.node.height,h.height),.5),s.node.addChild(h);var f=h.addComponent(cc.Mask);this.updateMask(.05,f);var p=new cc.Node(a.ooJVw);p.setContentSize(h.width,h.height),p.anchorX=0,p.anchorY=1,h.addChild(p);var d=p.addComponent(cc.Sprite);d.sizeMode=cc.Sprite.SizeMode.CUSTOM,s.loadImg(d);var y=new cc.Node(a.qZIzA);y.anchorX=0,y.color=new cc.Color(0,0,0),y.width=a.RTXFg(a.jEKOg(s.node.width,h.width),20),y.height=30,y.y=a.jEKOg(h.y,28),y.x=a.gMQzH(a.jwbZH(h.width,h.x),20),s.node.addChild(y);var v=y.addComponent(cc.Label);v.fontSize=28,v.lineHeight=29,v.overflow=cc.Label.Overflow.SHRINK,v.horizontalAlign=cc.Label.HorizontalAlign.LEFT,v.string=s.data.appname;var _=new cc.Node(a.KEQnX);_.anchorX=0,s.node.addChild(_);var m=_.addComponent(cc.Sprite),g=new cc.Node(a.kdQUg);_.addChild(g);var w=g.addComponent(cc.Sprite),b=new cc.Node(a.ccrTb);b.anchorX=0,_.addChild(b);var k,S=b.addComponent(cc.Label);if(S.string=r,b.height=S.fontSize=S.lineHeight=22,S.horizontalAlign=cc.Label.HorizontalAlign.LEFT,this.isGet=!1,window.wx&&window.wx.getStorageSync(a.oIVZx)){k=window.wx.getStorageSync(a.oIVZx).split("&");for(var C=0;a.XWZBK(C,k.length);C++)if(a.PKgQA(k[C],s.data.creative_id)){this.isGet=!0;break}}var I=new cc.Node(a.HwHGt);I.anchorX=0,I.color=new cc.Color(108,130,172),s.node.addChild(I);var P=I.addComponent(cc.Label);P.string=a.ynRmX,P.fontSize=22,P.lineHeight=23,P.horizontalAlign=cc.Label.HorizontalAlign.LEFT;var O=new cc.Node(a.omDVk);O.anchorX=0,s.node.addChild(O);var x,R=O.addComponent(cc.Sprite);O.on(cc.Node.EventType.TOUCH_END,this.onTryplay,this),this.isGet?x=a.MGJZu:(x=a.kraLv,I.active=!1),cc.loader.loadRes(a.ozgSq(a.hdqFe,x),cc.SpriteFrame,function(e,t){for(var o=a.NEnRh.split("|"),n=0;;){switch(o[n++]){case"0":continue;case"1":if(e)return void console.log(a.nskwb,e);continue;case"2":R&&(R.spriteFrame=t);continue;case"3":O.y=a.IEsKA(-s.node.height,.5);continue;case"4":O.x=a.UJKpD(a.UJKpD(s.node.width,O.width),30);continue}break}}),cc.loader.loadRes(a.VgeRJ,cc.SpriteFrame,function(e,t){for(var o=a.wWlaw.split("|"),n=0;;){switch(o[n++]){case"0":if(e)return void console.log(a.nskwb,e);continue;case"1":I.x=a.iZAhd(a.gMQzH(_.width,_.x),30);continue;case"2":m.spriteFrame=t;continue;case"3":cc.loader.loadRes(a.gMQzH(a.hdqFe,i),cc.SpriteFrame,function(e,t){for(var o=a.fiWFU.split("|"),n=0;;){switch(o[n++]){case"0":b.x=a.iZAhd(a.iZAhd(g.x,g.width),8);continue;case"1":if(e)return void console.log(a.nskwb,e);continue;case"2":w&&(w.spriteFrame=t);continue;case"3":g.x=a.iZAhd(a.IEsKA(g.width,.5),15);continue;case"4":s.node.active=!0;continue}break}});continue;case"4":I.y=_.y;continue;case"5":_.x=y.x;continue;case"6":_.y=a.RTXFg(y.y,50);continue}break}}),this.schedule(this.updateImg,.008)},changeTrybtn:function(){var e;this.getRewardCb&&this.getRewardCb(),this.isGet=!0,this.isGet?e="try_goplay":(e="try_tryplay",yilinqu.active=!1),window.tryitem.node.getChildByName("yilinqu").active=!0;var t=window.tryitem.node.getChildByName("trybtn").getComponent(cc.Sprite);cc.loader.loadRes("adver/"+e,cc.SpriteFrame,function(e,o){e?console.log("err:",e):t&&(t.spriteFrame=o)})},tryyoulikeItem:function(e,t,o,n){var i=function(e,t){return e-t};this.adtype=e,this.tagtype=t,this.data=o,this.failCb=n,this.node.width=135,this.node.height=165,this.node.anchorX=0,this.node.anchorY=1;var r=new cc.Node("bg");r.width=this.node.width,r.height=this.node.height,r.anchorX=0,r.anchorY=1,this.node.addChild(r);var c=r.addComponent(cc.Sprite);cc.loader.loadRes("adver/try_iconbg",cc.SpriteFrame,function(e,t){e?console.log("err:",e):c&&(c.spriteFrame=t)});var a,s,l=new cc.Node("mask");l.width=l.height=118,l.anchorX=0,l.anchorY=1,l.x=(a=this.node.width,s=l.width,(a-s)*.5),l.y=-l.x+2,this.node.addChild(l);var u=l.addComponent(cc.Mask);this.updateMask(.05,u);var h=new cc.Node("icon");h.setContentSize(l.width,l.height),h.anchorX=0,h.anchorY=1,l.addChild(h);var f=h.addComponent(cc.Sprite);f.sizeMode=cc.Sprite.SizeMode.CUSTOM,this.loadImg(f);var p=new cc.Node("text");p.color=new cc.Color(51,51,51),p.width=this.node.width-5,p.height=22,p.y=i(i(l.y,l.height),15),p.x=this.node.width*.5,this.node.addChild(p);var d=p.addComponent(cc.Label);d.fontSize=20,d.lineHeight=21,d.overflow=cc.Label.Overflow.SHRINK,d.horizontalAlign=cc.Label.HorizontalAlign.CENTER,d.string=this.data.appname,this.schedule(this.updateImg,.008),this.node.on(cc.Node.EventType.TOUCH_END,this.ontap,this)},onTryplay:function(){this.isGet||(window.tryitem=this,window.clickTry=!0),this.ontap()},box_youlikeItem:function(e,t,o,n){var i=function(e,t){return e-t};this.adtype=e,this.tagtype=t,this.data=o,this.failCb=n,this.node.width=120,this.node.height=160,this.node.anchorX=0,this.node.anchorY=1;var r=new cc.Node("bg");r.anchorX=0,r.anchorY=1,this.node.addChild(r);var c=r.addComponent(cc.Sprite);cc.loader.loadRes("adver/sdk_kuang",cc.SpriteFrame,function(e,t){e?console.log("err:",e):c&&(c.spriteFrame=t)});var a,s,l=new cc.Node("mask");l.width=l.height=110,l.anchorX=0,l.anchorY=1,l.x=(a=this.node.width,s=l.width,(a-s)*.5),l.y=-l.x,this.node.addChild(l);var u=l.addComponent(cc.Mask);this.updateMask(.05,u);var h=new cc.Node("icon");h.setContentSize(l.width,l.height),h.anchorX=0,h.anchorY=1,l.addChild(h);var f=h.addComponent(cc.Sprite);f.sizeMode=cc.Sprite.SizeMode.CUSTOM,this.loadImg(f);var p=new cc.Node("text");p.color=new cc.Color(51,51,51),p.width=this.node.width-5,p.height=22,p.y=i(i(l.y,l.height),25),p.x=this.node.width*.5,this.node.addChild(p);var d=p.addComponent(cc.Label);d.fontSize=20,d.lineHeight=21,d.overflow=cc.Label.Overflow.SHRINK,d.horizontalAlign=cc.Label.HorizontalAlign.CENTER,d.string=this.data.appname,this.schedule(this.updateImg,.008),this.node.on(cc.Node.EventType.TOUCH_END,this.ontap,this)},box_hotItem:function(e,t,o,n){var i=function(e,t){return e-t};this.adtype=e,this.tagtype=t,this.data=o,this.failCb=n,this.node.width=250,this.node.height=300,this.node.anchorX=0,this.node.anchorY=1;var r=new cc.Node("bg");r.anchorX=0,r.anchorY=1,this.node.addChild(r);var c=r.addComponent(cc.Sprite);cc.loader.loadRes("adver/sdk_kuang_1",cc.SpriteFrame,function(e,t){e?console.log("err:",e):c&&(c.spriteFrame=t)});var a=new cc.Node("mask");a.width=250,a.height=235,a.anchorX=0,a.anchorY=1,this.node.addChild(a);var s=a.addComponent(cc.Mask);this.updateMask(.05,s);var l=new cc.Node("icon");l.setContentSize(a.width,a.height),l.anchorX=0,l.anchorY=1,a.addChild(l);var u=l.addComponent(cc.Sprite);u.sizeMode=cc.Sprite.SizeMode.CUSTOM,this.loadImg(u);var h=new cc.Node("text");h.color=new cc.Color(0,0,0),h.width=i(this.node.width,5),h.height=30,h.y=i(i(a.y,a.height),45),h.x=this.node.width*.5,this.node.addChild(h);var f=h.addComponent(cc.Label);f.fontSize=28,f.lineHeight=29,f.overflow=cc.Label.Overflow.SHRINK,f.horizontalAlign=cc.Label.HorizontalAlign.CENTER,f.string=this.data.appname,this.schedule(this.updateImg,.008),this.node.on(cc.Node.EventType.TOUCH_END,this.ontap,this)},box_tjItem:function(e,t,o,n){var i=function(e,t){return e-t};this.adtype=e,this.tagtype=t,this.data=o,this.failCb=n,this.node.width=150,this.node.height=200,this.node.anchorX=0,this.node.anchorY=1;var r=new cc.Node("mask");r.width=150,r.height=150,r.anchorX=0,r.anchorY=1,this.node.addChild(r);var c=r.addComponent(cc.Mask);this.updateMask(.05,c);var a=new cc.Node("icon");a.setContentSize(r.width,r.height),a.anchorX=0,a.anchorY=1,r.addChild(a);var s=a.addComponent(cc.Sprite);s.sizeMode=cc.Sprite.SizeMode.CUSTOM,this.loadImg(s);var l=new cc.Node("text");l.color=new cc.Color(255,255,255),l.width=this.node.width-5,l.height=26,l.y=i(i(r.y,r.height),20),l.x=this.node.width*.5,this.node.addChild(l);var u=l.addComponent(cc.Label);u.fontSize=24,u.lineHeight=25,u.overflow=cc.Label.Overflow.SHRINK,u.horizontalAlign=cc.Label.HorizontalAlign.CENTER,u.string=this.data.appname,this.schedule(this.updateImg,.008),this.node.on(cc.Node.EventType.TOUCH_END,this.ontap,this)},fullLarge_item:function(e,t,o,n){var i={QCEZP:"err:",oSsVS:"1|0|3|4|2|5",AQMtf:function(e,t){return e-t},zXdPr:function(e,t){return e*t},EpxDJ:function(e,t){return e*t},bORLa:function(e,t){return e+t},KKjpf:function(e,t){return e<t},OMDxJ:"adver/large_itembg_1",sPRrK:"mask",bKtLS:function(e,t){return e-t},igzZr:"icon",gNWTR:"labelBg",OFGcL:"text",iXqDB:function(e,t){return e-t},zNLZh:function(e,t){return e+t},ZCNWd:"adver/large_box_"};this.adtype=e,this.tagtype=t,this.data=o,this.failCb=n;var r=this;r.node.width=313,r.node.height=388,r.node.anchorX=0,r.node.anchorY=1,i.KKjpf(cc.winSize.width,660)&&(r.node.scaleX=r.node.scaleY=.95);var c=new cc.Node("bg"),a=c.addComponent(cc.Sprite);c.width=r.node.width,c.height=r.node.height,c.anchorX=0,c.anchorY=1,r.node.addChild(c),cc.loader.loadRes(i.OMDxJ,cc.SpriteFrame,function(e,t){e?console.log(i.QCEZP,e):a&&(a.spriteFrame=t)});var s=new cc.Node(i.sPRrK);s.width=290,s.height=300,s.anchorX=0,s.anchorY=1,s.x=i.EpxDJ(i.bKtLS(r.node.width,s.width),.5),r.node.addChild(s);var l=s.addComponent(cc.Mask);this.updateMask(.05,l);var u=new cc.Node(i.igzZr);u.setContentSize(s.width,s.height),u.anchorX=0,u.anchorY=1,s.addChild(u);var h=u.addComponent(cc.Sprite);h.sizeMode=cc.Sprite.SizeMode.CUSTOM,r.loadImg(h);var f=new cc.Node(i.gNWTR);f.anchorX=0,f.anchorY=1,r.node.addChild(f);var p=f.addComponent(cc.Sprite),d=new cc.Node(i.OFGcL);d.color=new cc.Color(255,255,255),d.width=i.iXqDB(r.node.width,5),d.height=30,d.x=i.EpxDJ(r.node.width,.5);var y=d.addComponent(cc.Label);y.fontSize=28,y.lineHeight=29,y.overflow=cc.Label.Overflow.SHRINK,y.horizontalAlign=cc.Label.HorizontalAlign.CENTER,y.string=r.data.appname;var v=Math.floor(i.zNLZh(i.EpxDJ(Math.random(),4),1));cc.loader.loadRes(i.zNLZh(i.ZCNWd,v),cc.SpriteFrame,function(e,t){for(var o=i.oSsVS.split("|"),n=0;;){switch(o[n++]){case"0":p&&(p.spriteFrame=t);continue;case"1":if(e)return void console.log(i.QCEZP,e);continue;case"2":d.y=i.AQMtf(i.AQMtf(f.y,i.zXdPr(i.AQMtf(f.height,d.height),.5)),i.EpxDJ(d.height,.5));continue;case"3":f.x=i.EpxDJ(i.AQMtf(r.node.width,f.width),.5);continue;case"4":f.y=i.AQMtf(i.bORLa(-r.node.height,i.EpxDJ(f.height,1.5)),5);continue;case"5":r.node.addChild(d);continue}break}}),this.schedule(this.updateImg,.008),this.node.on(cc.Node.EventType.TOUCH_END,this.ontap,this)},single_icon:function(e,t,o,n,i,r){void 0===i&&(i=null),void 0===r&&(r=null);var c=function(e,t){return e==t};this.adtype=e,this.tagtype=t,this.data=o,this.failCb=n,this.node.width=c(i,null)?120:i,this.node.height=c(r,null)?120:r,this.node.anchorX=0,this.node.anchorY=1;var a,s,l=new cc.Node("mask");l.width=l.height=i==null?110:i,l.anchorX=0,l.anchorY=1,l.x=(a=this.node.width,s=l.width,(a-s)*.5),l.y=-l.x,this.node.addChild(l);var u=l.addComponent(cc.Mask);this.updateMask(.2,u);var h=new cc.Node("icon");h.setContentSize(l.width,l.height),h.anchorX=0,h.anchorY=1,l.addChild(h);var f=h.addComponent(cc.Sprite);f.sizeMode=cc.Sprite.SizeMode.CUSTOM,this.loadImg(f),this.schedule(this.updateImg,.008),this.node.on(cc.Node.EventType.TOUCH_END,this.ontap,this)},hotItem:function(e,t,o,n){var i=function(e,t){return e-t},r=function(e,t){return e*t},c=function(e,t){return e*t},a=function(e,t){return e+t},s=function(e,t){return e+t},l=function(e,t){return e==t};this.adtype=e,this.tagtype=t,this.data=o,this.failCb=n;var u=this;u.node.width=220,u.node.height=268,u.node.anchorX=0,u.node.anchorY=1;var h=new cc.Node("bg");h.width=u.node.width,h.height=u.node.height,h.anchorX=0,h.anchorY=1,u.node.addChild(h);var f=h.addComponent(cc.Sprite);cc.loader.loadRes("adver/new_bg1",cc.SpriteFrame,function(e,t){e?console.log("err:",e):f&&(f.spriteFrame=t)});var p=new cc.Node("mask");p.width=p.height=208,p.anchorX=0,p.anchorY=1,p.x=c(i(u.node.width,p.width),.5),p.y=-p.x,u.node.addChild(p);var d=p.addComponent(cc.Mask);this.updateMask(.05,d);var y=new cc.Node("icon");y.setContentSize(p.width,p.height),y.anchorX=0,y.anchorY=1,p.addChild(y);var v=y.addComponent(cc.Sprite);v.sizeMode=cc.Sprite.SizeMode.CUSTOM,u.loadImg(v);var _,m,g=Math.floor(a(Math.random()*6,1)),w=new cc.Node("namebg");w.width=208,w.height=49,w.x=a(p.x,w.width*.5),w.y=a((_=-u.node.height,m=w.height,_+m*.5),p.x),u.node.addChild(w);var b=w.addComponent(cc.Sprite);cc.loader.loadRes(s("adver/new_rect_",g),cc.SpriteFrame,function(e,t){e?console.log("err:",e):b&&(b.spriteFrame=t)});var k=new cc.Node("text");k.width=w.width,k.height=w.height,w.addChild(k);var S=k.addComponent(cc.Label);if(S.fontSize=24,S.lineHeight=25,S.overflow=cc.Label.Overflow.SHRINK,S.horizontalAlign=cc.Label.HorizontalAlign.CENTER,S.verticalAlign=cc.Label.VerticalAlign.CENTER,S.string=u.data.appname,u.data.heat!="0"){var C=new cc.Node("icontag");C.anchorX=0,C.anchorY=0,C.scaleX=C.scaleY=1.3,u.node.addChild(C);var I,P=C.addComponent(cc.Sprite);u.data.heat=="1"?I="interB_icon_1":l(u.data.heat,"2")?I="interB_icon_2":l(u.data.heat,"3")?I="interB_icon_3":l(u.data.heat,"4")&&(I="interB_icon_4"),cc.loader.loadRes(s("adver/",I),cc.SpriteFrame,function(e,t){e?console.log("err:",e):(P&&(P.spriteFrame=t),C.x=i(u.node.width,r(r(C.width,C.scaleX),.5)),C.y=i(c(c(-C.height,C.scaleY),.5),6))})}this.schedule(this.updateImg,.008),this.node.on(cc.Node.EventType.TOUCH_END,this.ontap,this)},interFullListItem:function(e,t,o,n,i,r){var c=function(e,t){return e==t},a=function(e,t){return e-t},s=function(e,t){return e+t},l=function(e,t){return e+t};this.adtype=e,this.tagtype=t,this.data=o,this.failCb=n,c(window.zzsdkui.z_sign,0)?(this.node.width=cc.winSize.width,this.node.height=150):(this.node.width=cc.winSize.height,this.node.height=150),this.node.anchorX=0,this.node.anchorY=1;var u=new cc.Node("mask");u.width=u.height=91,u.anchorX=0,u.anchorY=1,u.x=30,u.y=-a(this.node.height,u.height)*.5,this.node.addChild(u);var h=u.addComponent(cc.Mask);this.updateMask(.5,h);var f=new cc.Node("icon");f.setContentSize(u.width,u.height),f.anchorX=0,f.anchorY=1,u.addChild(f);var p=f.addComponent(cc.Sprite);p.sizeMode=cc.Sprite.SizeMode.CUSTOM,this.loadImg(p);var d,y,v=new cc.Node("text");v.color=new cc.Color(0,0,0),v.width=a(this.node.width,(d=u.x,y=u.width,d+y+30)),v.anchorX=0,v.anchorY=1,v.height=32,v.y=-a(this.node.height,v.height)*.5,v.x=s(u.x,u.width)+30,this.node.addChild(v);var _=v.addComponent(cc.Label);_.fontSize=29,_.lineHeight=30,_.overflow=cc.Label.Overflow.SHRINK,_.horizontalAlign=cc.Label.HorizontalAlign.LEFT,_.string=this.data.appname;var m=new cc.Node("line");this.node.addChild(m),m.width=this.node.width,m.height=2,m.anchorY=1,m.anchorX=0,m.x=s(l(u.x,u.width),30),m.y=l(-this.node.height,20);var g=m.addComponent(cc.Sprite);if(g.sizeMode=cc.Sprite.SizeMode.CUSTOM,cc.loader.loadRes("adver/list_line",cc.SpriteFrame,function(e,t){e?console.log("err:",e):g&&(g.spriteFrame=t)}),c(i%(r+1),0)){var w=new cc.Node("star");w.width=53,w.height=50,this.node.addChild(w),w.y=-a(this.node.height,w.height)*.5,w.x=a(a(this.node.width,w.width),80),w.anchorX=0,w.anchorY=1;var b=w.addComponent(cc.Sprite);cc.loader.loadRes("adver/list_star",cc.SpriteFrame,function(e,t){e?console.log("err:",e):b&&(b.spriteFrame=t)})}this.schedule(this.updateImg,.008),this.node.on(cc.Node.EventType.TOUCH_END,this.ontap,this)},interFullListItem_ver:function(e,t,o,n,i,r){var c=function(e,t){return e+t},a=function(e,t){return e-t},s=function(e,t){return e*t};this.adtype=e,this.tagtype=t,this.data=o,this.failCb=n,this.node.height=cc.winSize.height,this.node.width=150,this.node.anchorX=0,this.node.anchorY=1;var l=new cc.Node("mask");l.width=l.height=91,l.rotation=-90,l.y=c(c(-this.node.height,l.height),10),l.x=c(a(this.node.width,l.width)*.5,l.width*.5),this.node.addChild(l);var u=l.addComponent(cc.Mask);this.updateMask(.5,u);var h=new cc.Node("icon");h.setContentSize(l.width,l.height),l.addChild(h);var f=h.addComponent(cc.Sprite);f.sizeMode=cc.Sprite.SizeMode.CUSTOM,this.loadImg(f);var p=new cc.Node("text");p.color=new cc.Color(0,0,0),p.rotation=-90,p.width=400,p.x=s(this.node.width,.5),p.y=c(l.y,150),this.node.addChild(p);var d=p.addComponent(cc.Label);d.fontSize=29,d.lineHeight=30,d.horizontalAlign=cc.Label.HorizontalAlign.LEFT,d.string=this.data.appname;var y=new cc.Node("line");this.node.addChild(y),y.height=cc.winSize.width,y.width=2,y.anchorY=1,y.anchorX=0,y.y=l.height+30,y.x=this.node.width;var v=y.addComponent(cc.Sprite);if(v.sizeMode=cc.Sprite.SizeMode.CUSTOM,cc.loader.loadRes("adver/list_line",cc.SpriteFrame,function(e,t){e?console.log("err:",e):v&&(v.spriteFrame=t)}),i%(r+1)==0){var _=new cc.Node("star");_.width=53,_.height=50,this.node.addChild(_),_.rotation=-90,_.x=s(a(this.node.width,_.width),.5),_.y=a(-_.width,80),_.anchorX=0,_.anchorY=1;var m=_.addComponent(cc.Sprite);cc.loader.loadRes("adver/list_star",cc.SpriteFrame,function(e,t){e?console.log("err:",e):(m&&(m.spriteFrame=t),_.y-=_.height*.5)})}this.schedule(this.updateImg,.008),this.node.on(cc.Node.EventType.TOUCH_END,this.ontap,this)},friPlayItem:function(e,t,o,n,i){this.adtype=e,this.tagtype=t,this.data=o,this.failCb=n,this.node.width=110,this.node.height=150,this.node.anchorX=0,this.node.anchorY=1,cc.winSize.width<660&&(this.node.scaleX=this.node.scaleY=.88);var r=new cc.Node("mask");r.width=r.height=110,r.anchorX=0,r.anchorY=1,this.node.addChild(r);var c=r.addComponent(cc.Mask);this.updateMask(.05,c);var a=new cc.Node("icon");a.setContentSize(r.width,r.height),a.anchorX=0,a.anchorY=1,r.addChild(a);var s=a.addComponent(cc.Sprite);s.sizeMode=cc.Sprite.SizeMode.CUSTOM,this.loadImg(s);var l,u,h,f,p,d,y,v,_,m=new cc.Node("text");l=i!=null?i.split(","):[0,0,0],m.color=new cc.Color((v=Number,_=l[0],v(_)),(d=Number,y=l[1],d(y)),(f=Number,p=l[2],f(p))),m.width=this.node.width-5,m.height=22,m.x=this.node.width*.5,m.y=(u=r.y,h=r.height,u-h-18),this.node.addChild(m);var g=m.addComponent(cc.Label);g.fontSize=20,g.lineHeight=21,g.overflow=cc.Label.Overflow.SHRINK,g.horizontalAlign=cc.Label.HorizontalAlign.CENTER,g.string=this.data.appname,this.schedule(this.updateImg,.008),this.node.on(cc.Node.EventType.TOUCH_END,this.ontap,this)},singleItem:function(e,t,o,n){var i=function(e,t){return e-t};this.adtype=e,this.tagtype=t,this.data=o,this.failCb=n,this.node.width=150,this.node.height=175,this.node.anchorX=0,this.node.anchorY=1;var r=new cc.Node("bg"),c=r.addComponent(cc.Sprite);r.width=this.node.width,r.height=this.node.height,r.anchorX=0,r.anchorY=1,this.node.addChild(r),c.sizeMode=cc.Sprite.SizeMode.CUSTOM,cc.loader.loadRes("adver/youlike_item_bg2",cc.SpriteFrame,function(e,t){e?console.log("err:",e):c&&(c.spriteFrame=t)});var a=new cc.Node("mask");a.width=a.height=140,a.anchorX=0,a.anchorY=1,a.x=i(this.node.width,a.width)*.5,a.y=-a.x,this.node.addChild(a);var s=a.addComponent(cc.Mask);this.updateMask(.05,s);var l=new cc.Node("icon");l.setContentSize(a.width,a.height),l.anchorX=0,l.anchorY=1,a.addChild(l);var u=l.addComponent(cc.Sprite);u.sizeMode=cc.Sprite.SizeMode.CUSTOM,this.loadImg(u);var h=new cc.Node("text");h.color=new cc.Color(0,0,0),h.width=this.node.width,h.height=22,h.y=i(i(a.y,a.height),15),h.x=this.node.width*.5,this.node.addChild(h);var f=h.addComponent(cc.Label);f.fontSize=20,f.lineHeight=21,f.overflow=cc.Label.Overflow.SHRINK,f.horizontalAlign=cc.Label.HorizontalAlign.CENTER,f.string=this.data.appname,this.schedule(this.updateImg,.008),this.node.on(cc.Node.EventType.TOUCH_END,this.ontap,this)},updateMask:function(e,t){var o=e>=0?e:0;o<1&&(o=Math.min(this.node.width,this.node.height)*o),this.radius=o,t.radius=o,t.onDraw=this.onDraw.bind(t),t._updateGraphics=this._updateGraphics.bind(t),t.type=cc.Mask.Type.RECT},onDraw:function(e){e.clear(!1);var t,o,n,i,r,c,a=this.node,s=a.width,l=a.height,u=(n=-s,i=a.anchorX,n*i),h=(t=-l,o=a.anchorY,t*o);e.roundRect(u,h,s,l,this.radius||0),r=cc.game.renderType,c=cc.game.RENDER_TYPE_CANVAS,r===c?e.stroke():e.fill()},_updateGraphics:function(){var e=this._graphics;e&&this.onDraw(e)},ontap:function(e){window.zzsdkui.game_open_tip||(window.zzsdkui.game_open_tip=!0,e.stopPropagation(),window.zzsdkui.openGame(this.data,this.adtype,this.tagtype,this.failCb))},loadImg:function(e){var t=function(e,t){return e<t},o=this;cc.loader.load(o.data.image,function(n,i){for(var r=[],c=0;c<3;c++)for(var a=0;t(a,3)&&o.data;a++)t(r.length,o.data.frame)&&r.push([(u=160,h=a,u*h),(s=160,l=c,s*l)]);var s,l,u,h;for(c=0;t(c,r.length);c++){var f=new cc.SpriteFrame(i,new cc.Rect(r[c][0],r[c][1],160,160),!1,cc.Vec2.ZERO,new cc.Size(1080,1e3));o._frames.push(f)}e&&o._frames&&(e.spriteFrame=o._frames[0])})},updateImg:function(){var e,t;0==this._frames.length||(this._framestime++,this._framestime>8&&(this._framestime=0,this._framesindex++,e=this._framesindex,t=this._frames.length,e>=t&&(this._framesindex=0),this.node.getChildByName("mask").getChildByName("icon").getComponent(cc.Sprite)&&(this.node.getChildByName("mask").getChildByName("icon").getComponent(cc.Sprite).spriteFrame=this._frames[this._framesindex])))},update:function(){}});t.exports=o,window.zzsdk_item=o,cc._RF.pop()},{}],zzsdkui:[function(e,t){"use strict";cc._RF.push(t,"5499cotyT9E6Z88sNoCDX6G","zzsdkui");var o=e("zzsdkui_item"),n=cc.Class({extends:cc.Component,properties:{z_adurl:"https://wxa.332831.com/xsl/wx791c9814ea515099/v1.0.0/config.json",z_from:"appid",z_gameVer:"1.0.0",z_frontAppid:"",z_openid:"",z_scene:"",z_channel:"",z_validAd:1,z_adSwitch:1,z_sdkVer:"v2.3.2",game_open_tip:!1},statics:{self:null,getInstance:function(){return null==n.self&&(n.self=new n),n.self}},initSDK:function(e,t,o,n,i,r){var c,a,s,l,u=function(e,t){return e/t},h=function(e,t){return e==t};if(this.youlikeSchArr=[],this.newDrawerSchArr=[],this.newDrawerSchArr_pull=[],this.floatSchArr=[],this.fullBoxSchArr=[],this.fulltopSchArr=[],this.fullBotSchArr=[],this.fulltopSchArr_ver=[],this.fullBotSchArr_ver=[],this.newInterSchArr=[],this.newLargeSchArr=[],this.loadFinishCb=r,this.z_sign=e,this.z_gameVer=t,this.z_adurl=o,this.z_appid_self=n,this.z_from=n,this.z_openid=i,console.log("---------------------\u521d\u59cb\u5316sdk------------------",this.z_sdkVer),s=this.z_sign,l=0,this.offsetX=u(cc.winSize.width,s==l?750:1334),window.loadSDK);else{if(window.wx){c=window.wx.getSystemInfoSync().model.indexOf("iPhone"),a=-1,this.curModel=c!=a?"ios":"android";var f=window.wx.getLaunchOptionsSync();console.log("options: ",f),this.z_scene=f.scene,f.query&&f.query.appid&&h(f.query.appid.indexOf("undefined"),-1)?(this.z_from=f.query.appid,window.wx.setStorageSync("xsl_from",this.z_from)):window.wx.getStorageSync("xsl_from")&&h(window.wx.getStorageSync("xsl_from").indexOf("undefined"),-1)?this.z_from=window.wx.getStorageSync("xsl_from"):f.referrerInfo&&f.referrerInfo.appId&&(this.z_from=f.referrerInfo.appId),console.log("xsl_from: ",this.z_from),f.query&&f.query.channel&&(this.z_channel=f.query.channel),f.referrerInfo&&f.referrerInfo.appId&&(this.z_frontAppid=f.referrerInfo.appId)}else this.curModel="all";this.shieldRequest()}this.onshow()},onshow:function(){window.wx&&window.wx.onShow(function(e){if(console.log("wx.onShow  ",e),window.clickTryTime){var t=(new Date).getTime();if(c=t,a=window.clickTryTime,c-a>=6e4){if(window.wx.getStorageSync("getre")){var o=window.wx.getStorageSync("getre");i=o+"&",r=window.tryitem.data.creative_id,o=i+r,window.wx.setStorageSync("getre",o)}else{var n=window.tryitem.data.creative_id;window.wx.setStorageSync("getre",n)}window.tryitem.changeTrybtn(),window.wx.showToast({title:"\u6210\u529f\u83b7\u53d6\u5956\u52b1",duration:1e3})}else window.wx.showToast({title:"\u8bd5\u73a9\u6e38\u620f\u65f6\u95f4\u592a\u77ed",duration:1e3});window.clickTryTime=null,window.tryitem=null}var i,r,c,a})},youlike:function(e,t,n,i,r,c,a,s){void 0===t&&(t=null),void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r=null),void 0===c&&(c=null),void 0===a&&(a=null),void 0===s&&(s=!0);var l,u,h,f,p,d,y,v=function(e,t){return e==t},_=function(e,t){return e*t},m=function(e,t){return e+t},g=function(e,t){return e-t},w=function(e,t){return e*t},b=function(e,t){return e==t},k=function(e,t){return e+t},S=function(e,t){return e*t},C=function(e,t){return e*t},I=function(e,t){return e*t},P=function(e,t){return e*t},O=function(e,t){return e-t},x="youlike_normal";if(v(this.z_adSwitch,0))console.log("sdk\u603b\u5f00\u5173\u5173\u95ed\uff0c\u4e0d\u5c55\u793asdk");else if(window.loadSDK){if(this.checkShow(x)){var R,T=this;if(T.youlikeSch=!0,T.youlikeRefData={adtype:x,tagtype:i,itemCon:{bg:c,textcolor:a},failCb:r},s){var D="";window.wx&&(window.wx.getStorageSync("data_chain_youlike")&&(D=window.wx.getStorageSync("data_chain_youlike")),window.wx.removeStorage({key:"data_chain_youlike"})),R=this.getData_local_others(D)}else R=T.ad_Data;var j=new cc.Node("youlikeNode");j.width=cc.winSize.width,j.height=180,j.scaleX=j.scaleY=T.offsetX>1?1.3:T.offsetX,j.x=t!=null?t:0,j.y=n!=null?n:-g(_(cc.winSize.height,.5),w(w(j.height,j.scaleY),.5)),j.addComponent(cc.BlockInputEvents);var L=new cc.Node("scrollView");L.anchorY=1,L.anchorX=0,b(T.z_sign,0)?L.width=j.width:L.width=k(S(S(172,.9),5),S(10,6)),L.height=j.height,L.x=-L.width*.5,L.y=C(L.height,.5),j.addChild(L);var E=L.addComponent(cc.ScrollView);E.vertical=!1,E.cancelInnerEvents=!0;var A=new cc.Node("view");A.setContentSize(g(L.width,10),L.height),A.x=5,A.anchorY=1,A.anchorX=0,A.addComponent(cc.Mask),L.addChild(A);var N,U=new cc.Node("content");U.setContentSize(L.width-10,L.height),U.anchorX=0,U.anchorY=1,U.x=0,U.y=C(U.height,.5),A.addChild(U),E.content=A.getChildByName("content");for(var F=0;d=F,y=R.length,d<y;F++){var M=new cc.Node("item");M.addComponent(o),M.getComponent(o).youlikeItem(x,i,R[F],{bg:c,textcolor:a},r),M.x=k(I(10,F+1),I(I(M.width,M.scaleX),F)),M.y=I((h=A.getChildByName("content").height,f=M.height,p=M.scaleY,-(h-f*p)),.5),N=P(M.width,M.scaleX),A.getChildByName("content").addChild(M)}A.getChildByName("content").width=(l=P(R.length,N),u=R.length,l+(u+1)*20);var B=0,G=O(R.length,4);b(this.z_sign,1)&&(G=O(R.length,7));var V=1;return T.youlikeSchArr[e]=function(){if(T.youlikeSch){v(B,-G)?V=1:v(B,0)&&(V=-1);var t=cc.moveBy(.3,cc.v2(_(V,N+10),0));A.getChildByName("content").runAction(t),B+=V}else T.unschedule(T.youlikeSchArr[e])},T.schedule(T.youlikeSchArr[e],2),j}console.log(m(m("\u540e\u53f0\u6ca1\u6709",x),"\u5e7f\u544a\u4f4d"))}else console.log("SDK\u672a\u521d\u59cb\u5316\u6216\u521d\u59cb\u5316\u5931\u8d25")},youlikeRefresh:function(e){var t,n,i,r,c,a,s=function(e,t){return e*t},l=function(e,t){return e+t};if(e){var u="";window.wx&&(window.wx.getStorageSync("data_chain_youlike")&&(u=window.wx.getStorageSync("data_chain_youlike")),window.wx.removeStorage({key:"data_chain_youlike"}));var h,f=this.getData_local_others(u),p=e.getChildByName("scrollView").getChildByName("view").getChildByName("content");p.removeAllChildren();for(var d=0;c=d,a=f.length,c<a;d++){var y=new cc.Node("item");y.addComponent(o),y.getComponent(o).youlikeItem(this.youlikeRefData.adtype,this.youlikeRefData.tagtype,f[d],this.youlikeRefData.itemCon,this.youlikeRefData.failCb),y.x=(i=s(20,d+1),r=s(y.width,d),i+r),y.y=s((t=p.height,n=y.height,-(t-n)),.5),h=y.width,p.addChild(y)}p.width=l(s(f.length,h),l(f.length,1)*20)}},drawer:function(e,t,o,n,i,r,c,a,s,l,u,h){void 0===o&&(o=null),void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r=null),void 0===c&&(c=null),void 0===a&&(a=null),void 0===s&&(s=[]),void 0===l&&(l=null),void 0===u&&(u=!1),void 0===h&&(h=null);var f=function(e,t){return e==t};if(f(this.z_adSwitch,0))console.log("sdk\u603b\u5f00\u5173\u5173\u95ed\uff0c\u4e0d\u5c55\u793asdk");else if(window.loadSDK){if(this.checkShow(t))return f(this.z_validAd,1)?this.violateDrawer(e,t,o,n,i,r,c,a,s,l,u,h):void f(this.z_validAd,0);console.log("\u540e\u53f0\u6ca1\u6709"+t+"\u5e7f\u544a\u4f4d")}else console.log("SDK\u672a\u521d\u59cb\u5316\u6216\u521d\u59cb\u5316\u5931\u8d25")},drawerOpen:function(e){for(var t={JglZK:"0|1|5|3|4|2|6",GZlQu:"box",AXdbx:"scrollView",mxjBa:"view",VGxLS:"content",wzEgA:"btnbox",OSMNG:"rect"},o=t.JglZK.split("|"),n=0;;){switch(o[n++]){case"0":var i={jkhJx:t.GZlQu};continue;case"1":if(!e)return;continue;case"2":e.getChildByName(t.GZlQu).getChildByName(t.AXdbx).getChildByName(t.mxjBa).getChildByName(t.VGxLS).children.forEach(function(t){t.active=e.getChildByName(i.jkhJx).active});continue;case"3":e.getChildByName(t.GZlQu).active=!e.getChildByName(t.GZlQu).active;continue;case"4":e.getChildByName(t.wzEgA).active=!e.getChildByName(t.wzEgA).active;continue;case"5":e.getChildByName(t.OSMNG).active=!e.getChildByName(t.OSMNG).active;continue;case"6":this.drawerShowCb&&this.drawerShowCb(e.getChildByName(t.OSMNG).active);continue}break}},violateDrawer:function(e,t,n,i,r,c,a,s,l,u,h,f){void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r=null),void 0===c&&(c=null),void 0===a&&(a=null),void 0===s&&(s=null),void 0===l&&(l=[]),void 0===u&&(u=null),void 0===h&&(h=!1),void 0===f&&(f=null);var p={oSupz:"err:",XBYUh:function(e,t){return e==t},aAZDP:function(e,t){return e+t},fAYkH:function(e,t){return e*t},fDLkD:"bottom",Esmyb:function(e,t){return e==t},ETmfm:"top",JfZQu:function(e,t){return e<=t},SQfDM:function(e,t){return e>=t},qBnhA:function(e,t){return e-t},TJJSi:function(e,t){return e>=t},OYikC:function(e,t){return e>t},dqmgP:function(e,t){return e+t},AGNFn:function(e,t){return e<t},QjeIi:function(e,t){return e+t},GUAid:"adver/",zMyIe:function(e,t){return e==t},gQcEC:"drawer_tit",JSTze:"drawer_txt",mXZXv:function(e,t){return e!=t},QFmDd:function(e,t){return e-t},vtRsF:function(e,t){return e*t},vlHTs:function(e,t){return e+t},KvFhM:function(e,t){return e+t},oCTcP:function(e,t){return e*t},qyjOl:function(e,t){return e+t},ktTUe:function(e,t){return e!=t},CQEco:"drawer_clos",wumRr:"scrollView",atCDg:function(e,t){return e==t},KhcqT:function(e,t){return e-t},WovMi:function(e,t){return e+t},NhuqC:function(e,t){return e+t},EKlyl:function(e,t){return e-t},ATPFO:function(e,t){return e+t},Xwhss:function(e,t){return e*t},zDbZq:function(e,t){return e*t},VEVnl:"view",rvmbT:"content",dZlDE:function(e,t){return e==t},bGulo:"item",yNCRO:function(e,t){return e/t},fcRvS:function(e,t){return e-t},iIZBh:function(e,t){return e*t},sOdeP:function(e,t){return e*t},mwkRS:function(e,t){return e+t},RTGqk:function(e,t){return e*t},CjMqo:function(e,t){return e-t},hfXrm:function(e,t){return e/t},LMjPw:function(e,t){return e+t},ylqmA:function(e,t){return e*t},kHgwL:function(e,t){return e*t},ROIJx:function(e,t){return e/t},EKbbl:function(e,t){return e+t},cqgRN:function(e,t){return e/t},ZzTLD:"btnicon",dsJTH:"adver/interB_icon_4",xgxdm:function(e,t){return e-t},auAxe:"3|2|1|0|4",bmWsF:"4|3|2|0|1",JzrYy:"drawer",kroEF:"rect",GuBBo:function(e,t){return e==t},ypBKS:"adver/blackbg",NxOjG:"box",wWrtT:function(e,t){return e+t},wkDTa:"tit",OfRic:"closebtn",OQjPO:function(e,t){return e+t},kbqYH:function(e,t){return e==t},HLXua:"drawer_bg",YxWeB:"drawer_bg_1",SMlbG:"btnbox",YksmV:function(e,t){return e*t},sqFjt:function(e,t){return e==t},HwWMr:function(e,t){return e==t},StpTx:"drawer_pic",mUExc:"drawer_icon_jiantou",NtXCw:"drawer_word",InbYg:"drawer_icon_more"},d=this,y=d.ad_Data,v=new cc.Node(p.JzrYy);v.scaleX=v.scaleY=d.offsetX,d.drawerShowCb=u;var _=new cc.Node(p.kroEF);h||(_.active=!1),_.opacity=200,v.addChild(_);var m=_.addComponent(cc.Sprite);m.sizeMode=cc.Sprite.SizeMode.CUSTOM,_.addComponent(cc.BlockInputEvents),p.GuBBo(d.z_sign,0)?(v.setContentSize(750,1334),_.setContentSize(1e3,2e3)):(v.setContentSize(1334,750),_.setContentSize(2e3,1e3)),cc.loader.loadRes(p.ypBKS,cc.SpriteFrame,function(e,t){e?console.log(p.oSupz,e):m.spriteFrame=t});var g=new cc.Node(p.NxOjG);h||(g.active=!1),v.addChild(g),p.ktTUe(f,null)&&(g.y=p.wWrtT(g.y,f)),g.scaleX=g.scaleY=p.OYikC(d.offsetX,1)?.85:1;var w=new cc.Node("bg");g.addChild(w);var b=w.addComponent(cc.Sprite),k=new cc.Node(p.wkDTa);g.addChild(k);var S=k.addComponent(cc.Sprite),C=new cc.Node(p.OfRic);g.addChild(C);var I=new cc.Node(p.rvmbT);cc.loader.loadRes(p.OQjPO(p.GUAid,p.ktTUe(c,null)?c:p.kbqYH(d.z_sign,0)?p.HLXua:p.YxWeB),cc.SpriteFrame,function(r,c){var a=function(e,t){return p.dqmgP(e,t)};if(r)console.log(p.oSupz,r);else{b.spriteFrame=c,g.setContentSize(w.width,w.height),cc.loader.loadRes(p.QjeIi(p.GUAid,p.zMyIe(d.z_sign,0)?p.gQcEC:p.JSTze),cc.SpriteFrame,function(e,t){e?console.log(p.oSupz,e):(S.spriteFrame=t,p.XBYUh(d.z_sign,0)?k.y=p.aAZDP(p.fAYkH(w.height,.5),10):k.x=p.fAYkH(-w.width,.5))}),p.zMyIe(l,null)&&(l=[]),p.mXZXv(l.length,0)?(C.x=l[0],C.y=l[1]):p.zMyIe(d.z_sign,0)?(C.x=p.QFmDd(p.vtRsF(w.width,.5),30),C.y=p.vlHTs(p.vtRsF(w.height,.5),50)):(C.x=p.vlHTs(p.vtRsF(-w.width,.5),30),C.y=p.KvFhM(p.oCTcP(w.height,.5),30));var u=C.addComponent(cc.Sprite);cc.loader.loadRes(p.qyjOl(p.GUAid,p.ktTUe(s,null)?s:p.CQEco),cc.SpriteFrame,function(e,t){e?console.log(p.oSupz,e):u.spriteFrame=t});var h=new cc.Node(p.wumRr);h.anchorY=1,h.anchorX=0,p.atCDg(d.z_sign,0)?(h.width=g.width,h.height=p.KhcqT(g.height,100),h.x=p.oCTcP(-h.width,.5),h.y=p.WovMi(p.NhuqC(p.oCTcP(-g.height,.5),h.height),10)):(h.width=p.EKlyl(g.width,170),h.height=p.EKlyl(g.height,30),h.x=p.ATPFO(p.Xwhss(-g.width,.5),160),h.y=p.zDbZq(h.height,.5)),g.addChild(h);var f=h.addComponent(cc.ScrollView);f.horizontal=!1,f.cancelInnerEvents=!0;var v,_=new cc.Node(p.VEVnl);_.setContentSize(p.EKlyl(h.width,10),h.height),_.anchorY=1,_.anchorX=0,_.addComponent(cc.Mask),h.addChild(_),I.setContentSize(p.EKlyl(h.width,10),h.height),I.anchorX=0,I.anchorY=1,I.x=0,I.y=p.zDbZq(I.height,.5),_.addChild(I),f.content=_.getChildByName(p.rvmbT);for(var m=p.dZlDE(d.z_sign,0)?3:4,P=0;p.AGNFn(P,y.length);P++){var O=new cc.Node(p.bGulo);O.addComponent(o),O.getComponent(o).drawerItem(t,n,y[P],i,P);var x=p.yNCRO(p.fcRvS(_.getChildByName(p.rvmbT).width,p.iIZBh(m,O.width)),p.ATPFO(m,1));O.x=p.ATPFO(p.sOdeP(x,p.fcRvS(p.mwkRS(P,1),p.sOdeP(Math.floor(p.yNCRO(P,m)),m))),p.RTGqk(p.CjMqo(P,p.RTGqk(Math.floor(p.hfXrm(P,m)),m)),O.width)),O.y=-p.LMjPw(p.ylqmA(20,Math.floor(p.hfXrm(P,m))),p.kHgwL(O.height,Math.floor(p.ROIJx(P,m)))),v=O.height,_.getChildByName(p.rvmbT).addChild(O)}_.getChildByName(p.rvmbT).height=p.EKbbl(p.kHgwL(v,Math.ceil(p.ROIJx(y.length,m))),p.kHgwL(20,p.EKbbl(Math.ceil(p.cqgRN(y.length,m)),1)));var R=p.ETmfm,T=40,D=function(){var e;p.XBYUh(R,p.fDLkD)?e=-1:p.Esmyb(R,p.ETmfm)&&(e=1),I.y+=e,p.JfZQu(I.y,0)?R=p.ETmfm:p.SQfDM(I.y,p.qBnhA(I.height,h.height))&&(R=p.fDLkD),T++,p.TJJSi(T,20)&&(T=0,I.children.forEach(function(e){var t,o,n,i;n=a(I.y,e.y),i=v,p.OYikC(n,i)||(t=a(I.y,e.y),o=-h.height,p.AGNFn(t,o))?e.active=!1:e.active=!0}))};d.newDrawerSchArr[e]=D,d.schedule(D,.005)}});var P=new cc.Node(p.SMlbG);P.anchorX=0,P.x=p.YksmV(-v.width,.5),p.sqFjt(d.z_sign,1)&&window.wx&&p.OYikC(p.YksmV(window.wx.getSystemInfoSync().windowWidth,2),1500)&&(P.x+=50),p.ktTUe(a,null)&&(P.y=a);var O,x=P.addComponent(cc.Sprite);return p.ktTUe(r,null)?O=r:p.HwWMr(t,p.StpTx)?O=p.mUExc:p.HwWMr(t,p.NtXCw)&&(O=p.InbYg),cc.loader.loadRes(p.OQjPO(p.GUAid,O),cc.SpriteFrame,function(e,t){var o={pciit:p.oSupz};if(e)console.log(p.oSupz,e);else{x.spriteFrame=t;var n=new cc.Node(p.ZzTLD),i=n.addComponent(cc.Sprite);cc.loader.loadRes(p.dsJTH,cc.SpriteFrame,function(e,t){e?console.log(o.pciit,e):i.spriteFrame=t}),n.x=p.xgxdm(P.width,8),n.y=p.xgxdm(p.kHgwL(P.height,.5),10),P.addChild(n),v.addChild(P);var r=cc.scaleTo(.6,1),c=cc.scaleTo(.6,1.2),a=cc.sequence([r,c]),s=cc.repeatForever(a);P.runAction(s);var l=cc.rotateTo(.2,-20),u=cc.rotateTo(.2,20),f=cc.rotateTo(.2,0),d=cc.rotateTo(1,0),y=cc.sequence([l,u,l,f,d]),_=cc.repeatForever(y);n.runAction(_),h&&(P.active=!1)}}),h&&this.drawerShowCb&&this.drawerShowCb(_.active),P.on(cc.Node.EventType.TOUCH_START,function(){for(var e=p.auAxe.split("|"),t=0;;){switch(e[t++]){case"0":I.children.forEach(function(e){e.active=g.active});continue;case"1":P.active=!P.active;continue;case"2":g.active=!g.active;continue;case"3":_.active=!_.active;continue;case"4":this.drawerShowCb&&this.drawerShowCb(_.active);continue}break}},this),C.on(cc.Node.EventType.TOUCH_START,function(){for(var e=p.bmWsF.split("|"),t=0;;){switch(e[t++]){case"0":I.children.forEach(function(e){e.active=g.active});continue;case"1":this.drawerShowCb&&this.drawerShowCb(_.active);continue;case"2":P.active=!P.active;continue;case"3":g.active=!g.active;continue;case"4":_.active=!_.active;continue}break}},this),v},drawer_pull:function(e,t,o,n,i,r,c,a,s,l,u,h){void 0===o&&(o=null),void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r=null),void 0===c&&(c=null),void 0===a&&(a=null),void 0===s&&(s=[]),void 0===l&&(l=null),void 0===u&&(u=!1),void 0===h&&(h=null);var f=function(e,t){return e+t},p=function(e,t){return e==t};if(0==this.z_adSwitch)console.log("sdk\u603b\u5f00\u5173\u5173\u95ed\uff0c\u4e0d\u5c55\u793asdk");else if(window.loadSDK){if(this.checkShow(t))return p(this.z_validAd,1)?this.violateDrawer_pull(e,t,o,n,i,r,c,a,s,l,u,h):void p(this.z_validAd,0);console.log(f(f("\u540e\u53f0\u6ca1\u6709",t),"\u5e7f\u544a\u4f4d"))}else console.log("SDK\u672a\u521d\u59cb\u5316\u6216\u521d\u59cb\u5316\u5931\u8d25")},drawerOpen_pull:function(e){var t,o,n=function(e,t){return e*t};if(e){if(e.getChildByName("rect").active=!e.getChildByName("rect").active,e.getChildByName("box").active=!e.getChildByName("box").active,e.getChildByName("btnbox").active=!e.getChildByName("btnbox").active,e.getChildByName("box").getChildByName("scrollView").getChildByName("view").getChildByName("content").children.forEach(function(t){t.active=e.getChildByName("box").active}),e.getChildByName("box").active){var i=cc.moveTo(.3,cc.v2((t=n(-e.width,.5),o=n(n(box.width,box.scaleX),.5),t+o),box.y));box.runAction(i)}else{var r=cc.moveTo(.3,cc.v2(-e.width-100,box.y));box.runAction(r)}this.drawerShowCb&&this.drawerShowCb(e.getChildByName("rect").active)}},violateDrawer_pull:function(e,t,n,i,r,c,a,s,l,u,h,f){void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r=null),void 0===c&&(c=null),void 0===a&&(a=null),void 0===s&&(s=null),void 0===l&&(l=[]),void 0===u&&(u=null),void 0===h&&(h=!1),void 0===f&&(f=null);var p=function(e,t){return e*t},d=function(e,t){return e>t},y=function(e,t){return e<t},v=function(e,t){return e+t},_=function(e,t){return e==t},m=function(e,t){return e>=t},g=function(e,t){return e-t},w=function(e,t){return e*t},b=function(e,t){return e!=t},k=function(e,t){return e+t},S=function(e,t){return e+t},C=function(e,t){return e*t},I=function(e,t){return e==t},P=function(e,t){return e*t},O=function(e,t){return e+t},x=function(e,t){return e*t},R=function(e,t){return e/t},T=function(e,t){return e/t},D=function(e,t){return e*t},j=function(e,t){return e*t},L=function(e,t){return e+t},E=this,A=E.ad_Data,N=new cc.Node("drawer");N.scaleX=N.scaleY=E.offsetX,E.drawerShowCb=u;var U=new cc.Node("rect");h||(U.active=!1),U.opacity=200,N.addChild(U);var F=U.addComponent(cc.Sprite);F.sizeMode=cc.Sprite.SizeMode.CUSTOM,U.addComponent(cc.BlockInputEvents),I(E.z_sign,0)?(N.setContentSize(750,1334),U.setContentSize(1e3,2e3)):(N.setContentSize(1334,750),U.setContentSize(2e3,1e3)),cc.loader.loadRes("adver/blackbg",cc.SpriteFrame,function(e,t){e?console.log("err:",e):F.spriteFrame=t});var M=new cc.Node("box");h||(M.active=!1),N.addChild(M),b(f,null)&&(M.y=L(M.y,f)),M.scaleX=M.scaleY=d(E.offsetX,1)?.85:1;var B=new cc.Node("bg");M.addChild(B);var G=B.addComponent(cc.Sprite),V=new cc.Node("closebtn");M.addChild(V);var z=new cc.Node("content");cc.loader.loadRes(L("adver/",b(c,null)?c:"hezi1111"),cc.SpriteFrame,function(r,c){var a,u,f,U,F,H,q,W,K="err:",X=function(e,t){return e-t},Y=function(e,t){return p(e,t)},Q=function(e,t){return d(e,t)},J=function(e,t){return e+t},Z=function(e,t){return y(e,t)},$=function(e,t){return v(e,t)},ee=function(e,t){return _(e,t)},te="bottom",oe=function(e,t){return _(e,t)},ne="top",ie=function(e,t){return e<=t},re=function(e,t){return m(e,t)},ce=function(e,t){return g(e,t)},ae=function(e,t){return m(e,t)};if(r)console.log("err:",r);else{G.spriteFrame=c,M.setContentSize(B.width,B.height),M.x=g(-N.width,100),h&&(M.x=v(p(-N.width,.5),w(M.width,M.scaleX)*.5)),_(l,null)&&(l=[]),b(l.length,0)?(V.x=l[0],V.y=l[1]):_(E.z_sign,0)?(V.x=w(B.width,.5),V.y=0):(V.x=(W=-B.width,W*.5+30),V.y=k(B.height*.5,30));var se=V.addComponent(cc.Sprite);cc.loader.loadRes(k("adver/",b(s,null)?s:"hezi2"),cc.SpriteFrame,function(e,t){e?console.log(K,e):(se.spriteFrame=t,V.x+=X(Y(V.width,.5),10))});var le=new cc.Node("scrollView");le.anchorY=1,le.anchorX=0,_(E.z_sign,0)?(le.width=M.width,le.height=g(M.height,20),le.x=-le.width*.5,le.y=(q=-M.height,F=q*.5,H=le.height,F+H+10)):(le.width=g(M.width,170),le.height=g(M.height,30),le.x=S(C(-M.width,.5),160),le.y=C(le.height,.5)),M.addChild(le);var ue=le.addComponent(cc.ScrollView);ue.horizontal=!1,ue.cancelInnerEvents=!0;var he,fe=new cc.Node("view");fe.setContentSize(g(le.width,10),le.height),fe.anchorY=1,fe.anchorX=0,fe.addComponent(cc.Mask),le.addChild(fe),z.setContentSize(g(le.width,10),le.height),z.anchorX=0,z.anchorY=1,z.x=0,z.y=z.height*.5,fe.addChild(z),ue.content=fe.getChildByName("content");for(var pe=I(E.z_sign,0)?3:4,de=0;y(de,A.length);de++){var ye=new cc.Node("item");ye.addComponent(o),ye.getComponent(o).drawerItem(t,n,A[de],i,de),ye.scaleX=ye.scaleY=.8;var ve=(f=g(fe.getChildByName("content").width,P(P(pe,ye.width),.8)),U=S(pe,1),f/U);ye.x=O(P(ve,g(O(de,1),P(Math.floor(de/pe),pe))),P(P((a=de,u=x(Math.floor(R(de,pe)),pe),a-u),ye.width),.8)),ye.y=-O(x(20,Math.floor(R(de,pe))),x(x(ye.height,.8),Math.floor(T(de,pe)))),he=D(ye.height,.8),fe.getChildByName("content").addChild(ye)}fe.getChildByName("content").height=O(D(he,Math.ceil(T(A.length,pe))),j(20,L(Math.ceil(T(A.length,pe)),1)));var _e="top",me=40,ge=function(){var e;ee(_e,te)?e=-1:oe(_e,ne)&&(e=1),z.y+=e,ie(z.y,0)?_e=ne:re(z.y,ce(z.height,le.height))&&(_e=te),ae(++me,20)&&(me=0,z.children.forEach(function(e){Q(J(z.y,e.y),he)||Z($(z.y,e.y),-le.height)?e.active=!1:e.active=!0}))};E.newDrawerSchArr_pull[e]=ge,E.schedule(ge,.005)}});var H,q=new cc.Node("btnbox");q.anchorX=0,q.x=-N.width*.5,I(E.z_sign,1)&&window.wx&&(H=window.wx.getSystemInfoSync().windowWidth,H*2>1500)&&(q.x+=50),a!=null&&(q.y=a);var W,K=q.addComponent(cc.Sprite);return W=r!=null?r:"ggan",cc.loader.loadRes("adver/"+W,cc.SpriteFrame,function(e,t){e?console.log("err:",e):(K.spriteFrame=t,N.addChild(q),h&&(q.active=!1))}),h&&this.drawerShowCb&&this.drawerShowCb(U.active),q.on(cc.Node.EventType.TOUCH_START,function(){U.active=!U.active,M.active=!M.active,q.active=!q.active,z.children.forEach(function(e){e.active=M.active});var e,t,o=cc.moveTo(.3,cc.v2(L(j(-N.width,.5),j((e=M.width,t=M.scaleX,e*t),.5)),M.y));M.runAction(o),this.drawerShowCb&&this.drawerShowCb(U.active)},this),V.on(cc.Node.EventType.TOUCH_START,function(){E.scheduleOnce(function(){U.active=!U.active,M.active=!M.active,q.active=!q.active,z.children.forEach(function(e){e.active=M.active})},.3);var e=cc.moveTo(.3,cc.v2(-N.width-100,M.y));M.runAction(e),this.drawerShowCb&&this.drawerShowCb(U.active)},this),N},float:function(e,t,n,i,r,c,a,s,l,u,h){void 0===i&&(i=null),void 0===r&&(r=null),void 0===c&&(c=null),void 0===a&&(a=null),void 0===s&&(s=!0),void 0===l&&(l=5),void 0===u&&(u=null),void 0===h&&(h=!0);var f=function(e,t){return e>=t},p=function(e,t){return e==t},d=function(e,t){return e!=t},y=function(e,t){return e*t};if(p(this.z_adSwitch,0))console.log("sdk\u603b\u5f00\u5173\u5173\u95ed\uff0c\u4e0d\u5c55\u793asdk");else if(window.loadSDK){if(this.checkShow("float")){var v=this,_=new cc.Node("floatNode");_.scaleX=_.scaleY=v.offsetX,_.x=p(t,null)?0:t,_.y=p(n,null)?0:n,_.width=120,_.height=158;var m=d(a,null)?a:0;f(m,v.ad_Data.length)&&(m=0);var g=new cc.Node("adbox");g.width=_.width,g.height=_.height,g.anchorX=0,g.anchorY=1,g.x=y(-g.width,.5),g.y=y(g.height,.5),_.addChild(g),v.floatSch=!0;var w=function(){if(v.floatSch&&g.children){g.removeAllChildren();var t=v.ad_Data[m],n=new cc.Node("item");n.addComponent(o),n.getComponent(o).floatItem("float",i,t,{_bgurl:c,_textColor:u},r),g.addChild(n),f(++m,v.ad_Data.length)&&(m=0)}else v.unschedule(v.floatSchArr[e])};if(w(),d(s,!1)&&(v.floatSchArr[e]=w,v.schedule(v.floatSchArr[e],l!=null?l:5)),h!=!1){var b=cc.rotateTo(.2,-10),k=cc.rotateTo(.2,10),S=cc.rotateTo(.2,0),C=cc.rotateTo(1,0),I=cc.sequence([b,k,b,S,C]),P=cc.repeatForever(I);_.runAction(P)}return _}console.log("\u540e\u53f0\u6ca1\u6709"+"float"+"\u5e7f\u544a\u4f4d")}else console.log("SDK\u672a\u521d\u59cb\u5316\u6216\u521d\u59cb\u5316\u5931\u8d25")},inter:function(e,t,n,i,r){void 0===t&&(t=null),void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r=null);var c,a,s,l,u=function(e,t){return e*t},h=function(e,t){return e==t},f=function(e,t){return e<t},p=function(e,t){return e==t},d=function(e,t){return e*t},y=function(e,t){return e==t},v=function(e,t){return e+t},_=function(e,t){return e==t},m=function(e,t){return e*t},g=function(e,t){return e*t},w=function(e,t){return e/t},b=function(e,t){return e-t},k=function(e,t){return e*t},S=function(e,t){return e+t},C=h(e,"3*3")?"inter_nine":h(e,"3*2")?"inter_six":"";if(h(this.z_adSwitch,0))console.log("sdk\u603b\u5f00\u5173\u5173\u95ed\uff0c\u4e0d\u5c55\u793asdk");else if(h(this.z_validAd,0))console.log("sdk\u5c4f\u853d\u63a5\u53e3\u5c4f\u853d\u4e86\u6b64\u5e7f\u544a\u7ec4\u4ef6");else if(window.loadSDK){if(this.checkShow(C)){var I;if(this.interSixRefData={adtype:C,tagtype:i,failCb:r},h(C,"inter_six"))if(window.wx){window.wx.getStorageSync("create_localData")?(I=this.getData_local(window.wx.getStorageSync("create_localData"))).length<6&&(I=this.getData(0,6,"create_localNum")):(I=this.getData(0,6,"create_localNum"),window.wx.setStorageSync("create_localNum",6));for(var P="",O=0;f(O,I.length);O++)P+=I[O].creative_id+"&";window.wx.setStorageSync("create_localData",P),window.wx.setStorageSync("data_chain_youlike",P)}else I=this.randomGetData(6);else h(C,"inter_nine")&&(I=h(this.z_sign,0)?this.randomGetData(9):this.randomGetData(8));this.interNode=new cc.Node("inter"),this.interNode.scaleX=this.interNode.scaleY=this.offsetX>1?1.3:this.offsetX,this.interNode.x=h(t,null)?0:t,this.interNode.y=p(n,null)?0:n,this.interNode.active=!1,this.interNode.addComponent(cc.BlockInputEvents);var x=new cc.Node("box");this.interNode.addChild(x);var R,T=p(this.z_sign,0)?3:4,D=(s=d(229,T),l=d(T+1,10),s+l);y(C,"inter_six")?(T=3,R=v(2*248,3*8)):y(C,"inter_nine")&&(R=_(this.z_sign,0)?v(3*248,4*8):v(m(2,248),m(3,8)));var j=new cc.Node("adbox");j.anchorX=0,j.anchorY=1,x.addChild(j),x.setContentSize(D,R),_(C,"inter_six")&&this.interNode.setContentSize(D,R),j.setContentSize(x.width,x.height),j.x=g(-j.width,.5),j.y=g(j.height,.5),this.interNode.active=!0;for(var L=Math.floor((c=Math.random(),a=I.length,c*a)),E=new cc.Node("finger"),A=function(){var e,t,n,c,a,s,l,h,f,p=new cc.Node("item");p.addComponent(o),p.getComponent(o).interItem(C,i,I[N],r,N,d),w(b(j.width,k(T,p.width)),v(T,1)),p.x=S(k(10,b(S(N,1),Math.floor(w(N,T))*T)),(h=N,f=Math.floor(w(N,T)),s=h-f*T,l=p.width,s*l)),p.y=(c=8,a=Math.floor(w(N,T)),e=c*(a+1),t=p.height,n=Math.floor(N/T),-(e+t*n)),j.addChild(p);var d=!(L!=N);if(d){var y=[];E.anchorX=1,E.anchorY=0;var _=E.addComponent(cc.Sprite);cc.loader.loadRes("adver/finger1",cc.SpriteFrame,function(e,t){var o,n,i,r,c,a,s,l,h,f,d="err:",v="fingerAni";e?console.log("err:",e):(E.x=(h=p.x,f=u(p.width,.6),s=h+f,l=E.width,c=s+l,a=u(p.width,.5),c+a),E.y=(i=p.y,r=p.height,o=i-r,n=E.height,o-n),_.spriteFrame=t,y.push(t),cc.loader.loadRes("adver/finger2",cc.SpriteFrame,function(e,t){if(e)console.log(d,e);else{y.push(t);var o=E.addComponent(cc.Animation),n=cc.AnimationClip.createWithSpriteFrames(y,y.length);n.name=v,n.wrapMode=cc.WrapMode.Loop,n.speed=3,o.addClip(n),o.play(v)}}))})}},N=0;f(N,I.length);N++)A();return j.addChild(E),this.interNode}console.log("\u540e\u53f0\u6ca1\u6709"+C+"\u5e7f\u544a\u4f4d")}else console.log("SDK\u672a\u521d\u59cb\u5316\u6216\u521d\u59cb\u5316\u5931\u8d25")},interSixRefresh:function(e){var t,n,i,r,c,a,s=function(e,t){return e*t},l=function(e,t){return e-t},u=function(e,t){return e==t},h=function(e,t){return e==t},f=function(e,t){return e*t},p=function(e,t){return e+t},d=function(e,t){return e-t},y=function(e,t){return e*t},v=function(e,t){return e+t},_=this;if(console.log("=------",e,_.interNode),_.interNode){var m,g=6;u(e,"3*3")&&(g=u(_.z_sign,0)?9:8);var w=_.z_sign==0?3:4;if(window.wx&&h(e,"3*2")){window.wx.getStorageSync("create_localNum")&&(c=Number,a=window.wx.getStorageSync("create_localNum"),g=c(a)+6),window.wx.setStorageSync("create_localNum",g),m=_.getData(l(g,6),g,"create_localNum");for(var b="",k=0;i=k,r=m.length,i<r;k++)b+=m[k].creative_id+"&";window.wx.setStorageSync("create_localData",b),window.wx.setStorageSync("data_chain_youlike",b)}else m=_.randomGetData(g);var S=_.interNode.getChildByName("box").getChildByName("adbox");S.removeAllChildren();for(var C=Math.floor(f(Math.random(),m.length)),I=new cc.Node("finger"),P=function(){var e=new cc.Node("item");e.addComponent(o),e.getComponent(o).interItem(_.interSixRefData.adtype,_.interSixRefData.tagtype,m[O],_.interSixRefData.failCb,O);var t,n,i,r,c,a,u,g,b,k,P=(t=l(S.width,f(w,e.width)),n=p(w,1),t/n);e.x=p(f(P,d(O+1,Math.floor(O/w)*w)),(b=d(O,y(Math.floor(O/w),w)),k=e.width,b*k)),e.y=-v(y(20,v(Math.floor((u=O,g=w,u/g)),1)),(i=e.height,r=Math.floor((c=O,a=w,c/a)),i*r)),S.addChild(e);var R=!!h(C,O);if(console.log("showFinger: ",R),R){x=[],I.anchorX=1,I.anchorY=0;var T=I.addComponent(cc.Sprite);cc.loader.loadRes("adver/finger1",cc.SpriteFrame,function(t,o){var n,i,r,c,a,u,h,f;t?console.log("err:",t):(I.x=(h=e.x,f=s(e.width,.6),a=h+f,u=I.width,r=a+u,c=s(e.width,.5),r+c),I.y=(n=l(e.y,e.height),i=I.height,n-i),T.spriteFrame=o,x.push(o),cc.loader.loadRes("adver/finger2",cc.SpriteFrame,function(e,t){if(e)console.log("err:",e);else{x.push(t);var o=I.addComponent(cc.Animation),n=cc.AnimationClip.createWithSpriteFrames(x,x.length);n.name="fingerAni",n.wrapMode=cc.WrapMode.Loop,n.speed=3,o.addClip(n),o.play("fingerAni")}}))})}},O=0;t=O,n=m.length,t<n;O++){var x;P()}S.addChild(I)}},tryplay:function(e,t,n,i,r,c,a){void 0===r&&(r=null),void 0===c&&(c=!0),void 0===a&&(a=null);var s=function(e,t){return e*t},l=function(e,t){return e-t},u=function(e,t){return e-t},h=function(e,t){return e*t},f=function(e,t){return e+t},p=function(e,t){return e*t},d=function(e,t){return e*t},y=function(e,t){return e+t};if(0==this.z_adSwitch)console.log("sdk\u603b\u5f00\u5173\u5173\u95ed\uff0c\u4e0d\u5c55\u793asdk");else if(this.z_validAd==0)console.log("sdk\u5c4f\u853d\u63a5\u53e3\u5c4f\u853d\u4e86\u6b64\u5e7f\u544a\u7ec4\u4ef6");else if(window.loadSDK){if(this.checkShow(e)){var v,_=this.ad_Data;(c==null||c)&&(_=this.getData(0,u(this.ad_Data.length,4)),v=this.getData(u(this.ad_Data.length,4),this.ad_Data.length));var m=new cc.Node("tryplay");m.active=!1,m.setContentSize(750,1334),m.scaleX=m.scaleY=this.offsetX;var g=new cc.Node("rect");g.setContentSize(1e3,2e3),g.opacity=200,m.addChild(g);var w=g.addComponent(cc.Sprite);w.sizeMode=cc.Sprite.SizeMode.CUSTOM,cc.loader.loadRes("adver/blackbg",cc.SpriteFrame,function(e,t){e?console.log("err:",e):w.spriteFrame=t}),g.addComponent(cc.BlockInputEvents);var b=new cc.Node("bigbox");b.y+=50,m.addChild(b);var k=b.addComponent(cc.Sprite),S=new cc.Node("closebtn");b.addChild(S);var C=S.addComponent(cc.Sprite);S.on(cc.Node.EventType.TOUCH_START,function(){m.removeFromParent()},this);var I=new cc.Node("adbox");b.addChild(I),I.anchorY=1;var P,O,x=new cc.Node("trybox");if(b.addChild(x),c){P=new cc.Node("line"),b.addChild(P);var R=P.addComponent(cc.Sprite);cc.loader.loadRes("adver/try_line",cc.SpriteFrame,function(e,t){e?console.log("err:",e):R.spriteFrame=t}),(O=new cc.Node("youlikeBox")).anchorY=1,O.anchorX=0,b.addChild(O)}return cc.loader.loadRes("adver/try_bg",cc.SpriteFrame,function(g,w){var R="err:",T=function(e,t){return e-t},D=function(e,t){return s(e,t)},j=function(e,t){return s(e,t)},L=function(e,t){return l(e,t)},E=function(e,t){return l(e,t)},A=function(e,t){return u(e,t)},N=function(e,t){return e+t},U=function(e,t){return e*t},F=function(e,t){return u(e,t)},M=function(e,t){return e<t},B="item",G=function(e,t){return e/t},V=function(e,t){return h(e,t)},z=function(e,t){return h(e,t)},H=function(e,t){return f(e,t)},q=function(e,t){return p(e,t)},W="scrollView",K=function(e,t){return p(e,t)},X="view",Y=function(e,t){return u(e,t)},Q="content",J=function(e,t){return u(e,t)},Z=function(e,t){return e<t},$=function(e,t){return d(e,t)},ee=function(e,t){return f(e,t)},te=function(e,t){return e+t},oe=function(e,t){return d(e,t)},ne=function(e,t){return e+t},ie=function(e,t){return d(e,t)},re=function(e,t){return y(e,t)};g?console.log("err:",g):(k.spriteFrame=w,cc.loader.loadRes("adver/try_close",cc.SpriteFrame,function(s,l){if(s)console.log(R,s);else{if(C.spriteFrame=l,S.x=T(D(b.width,.5),100),S.y=T(j(b.height,.5),180),I.setContentSize(L(b.width,120),E(b.height,245)),I.y=E(S.y,60),c?x.setContentSize(I.width,A(I.height,235)):(x.setContentSize(I.width,I.height),x.y-=110),P){P.y=-N(U(x.height,.5),25),O.setContentSize(I.width,180),O.x=U(-O.width,.5),O.y=F(P.y,30);for(var u=0;M(u,v.length);u++){var h=new cc.Node(B);h.addComponent(o),h.getComponent(o).tryyoulikeItem(e,r,v[u],a);var f=G(F(O.width,V(h.width,4)),5);h.x=N(z(H(u,1),f),q(u,h.width)),h.y=q(-F(O.height,h.height),.5),g=h.height,O.addChild(h)}}var p=new cc.Node(W);p.setContentSize(x.width,x.height),p.anchorY=1,p.anchorX=0,p.x=K(-p.width,.5),p.y=K(p.height,.5),x.addChild(p);var d=p.addComponent(cc.ScrollView);d.horizontal=!1,d.cancelInnerEvents=!0;var y=new cc.Node(X);y.setContentSize(Y(p.width,10),p.height),y.anchorY=1,y.anchorX=0,y.addComponent(cc.Mask),p.addChild(y);var g,w=new cc.Node(Q);w.setContentSize(J(p.width,10),p.height),w.anchorX=0,w.anchorY=1,w.x=0,w.y=K(w.height,.5),y.addChild(w),d.content=y.getChildByName(Q);for(var k=0;Z(k,_.length);k++){var ce=new cc.Node(B);ce.addComponent(o),ce.getComponent(o).tryItem(e,r,_[k],a,t,n,i),ce.x=$(J(y.getChildByName(Q).width,ce.width),.5),ce.y=-ee($(20,te(k,1)),oe(ce.height,k)),g=ce.height,y.getChildByName(Q).addChild(ce)}y.getChildByName(Q).height=ne(oe(g,_.length),ie(20,re(_.length,1))),m.active=!0}}))}),m}console.log(y("\u540e\u53f0\u6ca1\u6709"+e,"\u5e7f\u544a\u4f4d"))}else console.log("SDK\u672a\u521d\u59cb\u5316\u6216\u521d\u59cb\u5316\u5931\u8d25")},interFull_scroll:function(e,t,n,i,r,c){void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r=null),void 0===c&&(c=null);var a=function(e,t){return e<t},s=function(e,t){return e+t},l=function(e,t){return e+t},u=function(e,t){return e-t},h=function(e,t){return e+t},f=function(e,t){return e*t},p=function(e,t){return e+t},d=function(e,t){return e-t},y=function(e,t){return e*t},v=function(e,t){return e-t},_=function(e,t){return e+t},m=function(e,t){return e*t},g=function(e,t){return e+t},w=function(e,t){return e==t},b=function(e,t){return e<=t},k=function(e,t){return e-t},S=function(e,t){return e*t},C=function(e,t){return e+t},I=function(e,t){return e>=t},P=function(e,t){return e*t},O=function(e,t){return e+t},x=function(e,t){return e+t},R=function(e,t){return e-t},T=function(e,t){return e/t},D=function(e,t){return e*t},j=function(e,t){return e-t},L=function(e,t){return e+t},E=function(e,t){return e*t},A=function(e,t){return e/t},N=function(e,t){return e+t},U=function(e,t){return e==t},F=function(e,t){return e*t};if(U(this.z_adSwitch,0))console.log("sdk\u603b\u5f00\u5173\u5173\u95ed\uff0c\u4e0d\u5c55\u793asdk");else if(U(this.z_validAd,0))console.log("sdk\u5c4f\u853d\u63a5\u53e3\u5c4f\u853d\u4e86\u6b64\u5e7f\u544a\u7ec4\u4ef6");else if(window.loadSDK){if(this.checkShow(t)){var M=this;M.interYouSch=!0,M.interOthSch=!0;var B=M.ad_Data,G=new cc.Node("interBox");G.setContentSize(cc.winSize.width,n!=null?n:cc.winSize.height),i!=null&&(G.y=i);var V=new cc.Node("youlikeBox");V.setContentSize(G.width,163),G.addChild(V),V.y=j(j(F(G.height,.5),F(V.height,.5)),50);var z=new cc.Node("youlikeTitle");V.addChild(z);var H=z.addComponent(cc.Sprite),q=new cc.Node("youlikeAdbox");V.addChild(q),q.anchorX=0;var W=q.addComponent(cc.Sprite),K=new cc.Node("hottag");K.anchorX=0,K.anchorY=1,G.addChild(K);var X=K.addComponent(cc.Sprite);cc.loader.loadRes("adver/new_bg2",cc.SpriteFrame,function(n,i){var C=function(e,t){return w(e,t)},I="right",P="left",O="content",x=function(e,t){return b(e,t)},R=function(e,t){return k(e,t)},T=function(e,t){return S(e,t)},D=function(e,t){return e>=t};n?console.log("err:",n):(W&&(W.spriteFrame=i),q.x=S(-q.width,.5),cc.loader.loadRes("adver/new_icon1",cc.SpriteFrame,function(n,i){var w,b,k=function(e,t){return a(e,t)},S=function(e,t){return s(e,t)},j="content",L=function(e,t){return e-t},E=function(e,t){return e>t},A=function(e,t){return s(e,t)};if(n)console.log("err:",n);else{H.spriteFrame=i,z.x=s(l(-V.width*.5,z.width*.5),20),z.y=l(u(V.height*.5,z.height*.5),2);var N=new cc.Node("play1");N.width=300,N.height=26;var U=N.addComponent(cc.Label);U.string=h(Math.floor(h(f(Math.random(),u(100,30)+1),30)),"\u4e2a\u597d\u53cb\u73a9\u8fc7"),U.fontSize=24,U.lineHeight=24,U.horizontalAlign=cc.Label.HorizontalAlign.LEFT,N.x=p(z.x,f(z.width,.5))+95,N.y=u(z.y,d(z.height,N.height)*.5),q.y=d(d((w=z.y,b=z.height,w-b*.5),y(q.height,.5)),20);var F=new cc.Node("scrollView");F.width=q.width,F.height=q.height,F.anchorY=1,F.anchorX=0,F.x=0,F.y=y(F.height,.5),q.addChild(F);var G=F.addComponent(cc.ScrollView);G.vertical=!1,G.cancelInnerEvents=!0;var W=new cc.Node("view");W.setContentSize(v(F.width,10),F.height),W.x=5,W.anchorY=1,W.anchorX=0,W.addComponent(cc.Mask),F.addChild(W);var K,X=new cc.Node("content");X.setContentSize(v(F.width,10),F.height),X.anchorX=0,X.anchorY=1,X.x=0,X.y=y(X.height,.5),W.addChild(X),G.content=W.getChildByName("content");for(var Y=0;a(Y,B.length);Y++){var Q=new cc.Node("item");Q.addComponent(o),Q.getComponent(o).single_icon(t,r,B[Y],c),Q.x=p(y(20,_(Y,1)),Q.width*Y),Q.y=m(-v(W.getChildByName("content").height,Q.height),.5),K=Q.width,W.getChildByName("content").addChild(Q)}W.getChildByName("content").width=_(m(B.length,K),g(B.length,1)*20);var J="left",Z=0,$=function e(){var t;M.interYouSch?(C(J,I)?t=-1:C(J,P)&&(t=1),W.getChildByName(O).x+=t,x(W.getChildByName(O).x,-R(W.getChildByName(O).width,T(K,5)))?J=P:D(W.getChildByName(O).x,0)&&(J=I),D(++Z,40)&&(Z=0,W.getChildByName(O).children.forEach(function(e){k(S(W.getChildByName(j).x,e.x),L(-K,50))||E(S(W.getChildByName(j).x,e.x),A(F.width,50))?e.active=!1:e.active=!0}))):M.unschedule(e)};M.fulltopSchArr[e]=$,M.schedule($,.005)}}))});var Y=new cc.Node("btmbox");return Y.width=G.width,G.addChild(Y),Y.anchorY=1,cc.loader.loadRes("adver/new_icon2",cc.SpriteFrame,function(n,i){if(n)console.log("err:",n);else{X&&(X.spriteFrame=i),K.x=C(-G.width*.5,20),K.y=(se=V.y,le=P(V.height,.5),se-le-80),Y.height=(ce=G.height,ae=V.height,ie=ce-ae,re=K.height,ie-re-160),Y.y=C(O(P(-G.height,.5),Y.height),20);var s=new cc.Node("play2");s.width=300,s.height=26;var l=s.addComponent(cc.Label);l.string=O(Math.floor(O(P(Math.random(),O(100-50,1)),50)),"\u4e07\u4eba\u5728\u73a9"),l.fontSize=24,l.lineHeight=24,l.horizontalAlign=cc.Label.HorizontalAlign.LEFT,s.x=x(K.x,K.width)+85,s.y=x((oe=R(K.y,K.height),ne=P(s.height,.5),oe+ne),2);var u=new cc.Node("scroll2");u.height=Y.height,u.width=Y.width,u.anchorX=0,u.anchorY=1,u.x=P(-u.width,.5),u.y=0,Y.addChild(u);var h=u.addComponent(cc.ScrollView);h.horizontal=!1;var f=new cc.Node("view2");f.width=u.width,f.height=u.height,f.anchorX=0,f.anchorY=1,f.addComponent(cc.Mask),u.addChild(f);var p,d=new cc.Node("con2");d.anchorX=0,d.anchorY=1,d.width=f.width,d.x=0,d.y=0,f.addChild(d),h.content=d;for(var y=0;a(y,B.length);y++){var v=new cc.Node("item_btm");v.addComponent(o),a(cc.winSize.width,750)&&(v.scaleY=v.scaleX=.8),v.getComponent(o).hotItem(t,r,B[y],c);var _=T(R((ee=d.width,te=P(D(3,v.width),v.scaleX),ee-te),10),3+1);v.x=(W=D(_,j(y+1,Math.floor(T(y,3))*3)),Z=j(y,Math.floor(T(y,3))*3),$=v.width,Q=Z*$,J=v.scaleX,W+Q*J),v.y=-L(E(20,L(Math.floor((H=y,q=3,H/q)),1)),E(E(v.height,v.scaleY),Math.floor((F=y,z=3,F/z)))),p=E(v.height,v.scaleY),d.addChild(v)}d.height=L(E(p,Math.ceil(A(B.length,3))),E(20,N(Math.ceil(A(B.length,3)),1)));var m="top",S=40,U=function e(){var t;M.interOthSch?(w(m,"bottom")?t=-1:m=="top"&&(t=1),d.y+=t,b(d.y,0)?m="top":I(d.y,k(d.height,u.height))&&(m="bottom"),I(++S,20)&&(S=0,d.children.forEach(function(e){var t,o,n,i,r,c;r=d.y,c=e.y,g(r,c)>p||(n=d.y,i=e.y,t=C(n,i),o=-u.height,a(t,o))?e.active=!1:e.active=!0}))):M.unschedule(e)};M.fullBotSchArr[e]=U,M.schedule(U,.005)}var F,z,H,q,W,Q,J,Z,$,ee,te,oe,ne,ie,re,ce,ae,se,le}),G}console.log(N("\u540e\u53f0\u6ca1\u6709"+t,"\u5e7f\u544a\u4f4d"))}else console.log("SDK\u672a\u521d\u59cb\u5316\u6216\u521d\u59cb\u5316\u5931\u8d25")},interFull_large:function(e,t,n,i,r,c){void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r=null),void 0===c&&(c=null);var a,s,l,u,h,f,p,d,y,v,_=function(e,t){return e+t},m=function(e,t){return e<t},g=function(e,t){return e-t},w=function(e,t){return e==t},b=function(e,t){return e-t},k=function(e,t){return e*t},S=function(e,t){return e/t},C=function(e,t){return e*t},I=function(e,t){return e+t},P=function(e,t){return e*t},O=function(e,t){return e/t};if(w(this.z_adSwitch,0))console.log("sdk\u603b\u5f00\u5173\u5173\u95ed\uff0c\u4e0d\u5c55\u793asdk");else if(w(this.z_validAd,0))console.log("sdk\u5c4f\u853d\u63a5\u53e3\u5c4f\u853d\u4e86\u6b64\u5e7f\u544a\u7ec4\u4ef6");else if(window.loadSDK){if(this.checkShow(t)){var x=this.ad_Data,R=new cc.Node("fullNode");R.setContentSize(cc.winSize.width,n!=null?(y=n,v=cc.winSize.height,y>v?cc.winSize.height:n):cc.winSize.height),i!=null&&(R.y=i);var T=new cc.Node("bigbox");R.addChild(T),T.width=R.width,T.height=R.height;var D=new cc.Node("scrollView");D.width=T.width,D.height=b(T.height,20),console.log("scrollNode: ",D.height),D.anchorY=1,D.anchorX=0,D.x=k(-D.width,.5),D.y=k(D.height,.5),T.addChild(D);var j=D.addComponent(cc.ScrollView);j.horizontal=!1,j.cancelInnerEvents=!0;var L=new cc.Node("view");L.setContentSize(D.width,D.height),L.x=5,L.anchorY=1,L.anchorX=0,L.addComponent(cc.Mask),D.addChild(L);var E=new cc.Node("content");E.setContentSize(D.width,D.height),E.anchorX=0,E.anchorY=1,E.x=0,E.y=E.height*.5,L.addChild(E),j.content=L.getChildByName("content");for(var A,N=this.z_sign==0?2:4,U=0;m(U,x.length);U++){var F=new cc.Node("item");F.addComponent(o),F.getComponent(o).fullLarge_item(t,r,x[U],c);var M=(p=F.width,d=F.scaleX,p*d),B=S(b(E.width,M*N),_(N,1));F.x=_(C(B,(h=I(U,1),f=C(Math.floor(S(U,N)),N),h-f)),C((l=U,u=C(Math.floor(S(U,N)),N),l-u),M)),F.y=-I(P(8,I(Math.floor(S(U,N)),1)),P(F.height,Math.floor(O(U,N)))),A=F.height,E.addChild(F)}E.height=I(P(A,Math.ceil(O(x.length,N))),(a=30,s=I(Math.ceil(x.length/N),1),a*s));var G="top",V=40,z=function(){var e,t,o,n=function(e,t){return _(e,t)};G=="bottom"?e=-1:G=="top"&&(e=1),E.y+=e,E.y<=0?G="top":(t=E.y,o=g(g(E.height,D.height),80),t>=o&&(G="bottom")),++V>=20&&(V=0,E.children.forEach(function(e){var t,o;n(E.y,e.y)>A||(t=n(E.y,e.y),o=-D.height,m(t,o))?e.active=!1:e.active=!0}))};return this.newLargeSchArr[e]=z,this.schedule(z,.005),R}console.log(_(_("\u540e\u53f0\u6ca1\u6709",t),"\u5e7f\u544a\u4f4d"))}else console.log("SDK\u672a\u521d\u59cb\u5316\u6216\u521d\u59cb\u5316\u5931\u8d25")},inter_scroll:function(e,t,n,i,r,c,a){void 0===n&&(n=550),void 0===i&&(i=null),void 0===r&&(r=null),void 0===c&&(c=null),void 0===a&&(a=null);var s,l,u,h,f,p,d,y,v,_,m,g,w,b,k,S,C=function(e,t){return e+t},I=function(e,t){return e==t},P=function(e,t){return e-t},O=function(e,t){return e*t},x=function(e,t){return e/t},R=function(e,t){return e/t},T=function(e,t){return e*t},D=function(e,t){return e+t},j=function(e,t){return e/t};if(I(this.z_adSwitch,0))console.log("sdk\u603b\u5f00\u5173\u5173\u95ed\uff0c\u4e0d\u5c55\u793asdk");else if(this.z_validAd==0)console.log("sdk\u5c4f\u853d\u63a5\u53e3\u5c4f\u853d\u4e86\u6b64\u5e7f\u544a\u7ec4\u4ef6");else if(window.loadSDK){if(this.checkShow(t)){var L=this.ad_Data,E=new cc.Node("interNode");n||(n=550),E.setContentSize(650,n);var A=new cc.Node("scrollView");A.width=E.width,A.height=E.height,A.anchorX=0,A.anchorY=1,A.x=O(-A.width,.5),A.y=O(A.height,.5),E.addChild(A);var N=A.addComponent(cc.ScrollView);N.horizontal=!1,N.cancelInnerEvents=!0;var U=new cc.Node("view");U.setContentSize(P(A.width,10),A.height),U.anchorY=1,U.anchorX=0,U.addComponent(cc.Mask),A.addChild(U);var F,M,B=new cc.Node("content");B.setContentSize(P(A.width,10),A.height),B.anchorX=0,B.anchorY=1,U.addChild(B),N.content=U.getChildByName("content");for(var G=0;k=G,S=L.length,k<S;G++){var V=new cc.Node("item");V.addComponent(o),V.getComponent(o).interfullItem_bot(t,c,L[G],null,a,G);var z=x(P(U.getChildByName("content").width,O(3,V.width)),3+1);V.x=(v=O(z,(w=G+1,b=O(Math.floor(x(G,3)),3),w-b)),_=O((m=G,g=Math.floor(R(G,3)),m-g*3),V.width),v+_),V.y=(d=T(4,D(Math.floor(R(G,3)),1)),y=T(V.height,Math.floor(R(G,3))),-(d+y)),U.getChildByName("content").addChild(V),F=V.height,f=V.height,p=V.scaleY,M=f*p}U.getChildByName("content").height=D((u=F,h=Math.ceil(j(L.length,3)),u*h),(s=4,l=Math.ceil(j(L.length,3)),s*(l+1)));var H="top",q=40,W=function(){var e,t,o;H=="bottom"?e=-1:I(H,"top")&&(e=1),B.y+=e,B.y<=0?H="top":(t=B.y,o=P(B.height,A.height),t>=o&&(H="bottom")),++q>=20&&(q=0,B.children.forEach(function(e){var t,o,n,i,r,c;r=B.y,c=e.y,C(r,c)>M||(n=B.y,i=e.y,t=C(n,i),o=-A.height,t<o)?e.active=!1:e.active=!0}))};return this.newInterSchArr[e]=W,this.schedule(W,.005),E}console.log(C("\u540e\u53f0\u6ca1\u6709"+t,"\u5e7f\u544a\u4f4d"))}else console.log("SDK\u672a\u521d\u59cb\u5316\u6216\u521d\u59cb\u5316\u5931\u8d25")},interFull_list:function(e,t,o,n){void 0===o&&(o=null),void 0===n&&(n=null);if(window.loadSDK){if(this.checkShow(e))return this.z_sign==0?this.createList(e,t,o,n):this.z_sign==1?this.createList_ver(e,t,o,n):void 0;console.log("\u540e\u53f0\u6ca1\u6709"+e+"\u5e7f\u544a\u4f4d")}else console.log("SDK\u672a\u521d\u59cb\u5316\u6216\u521d\u59cb\u5316\u5931\u8d25")},createList:function(e,t,n,i){var r=function(e,t){return e+t},c=function(e,t){return e*t},a=function(e,t){return e-t},s=function(e,t){return e-t},l=function(e,t){return e*t},u=function(e,t){return e-t},h=function(e,t){return e-t},f=function(e,t){return e-t},p=function(e,t){return e*t},d=function(e,t){return e*t},y=this.ad_Data,v=new cc.Node("interBox");v.setContentSize(cc.winSize.width,cc.winSize.height);var _=new cc.Node("bigbg");v.addChild(_),_.setContentSize(1e3,2e3),_.color=new cc.Color(237,237,237),_.addComponent(cc.BlockInputEvents);var m=_.addComponent(cc.Sprite);m.sizeMode=cc.Sprite.SizeMode.CUSTOM,cc.loader.loadRes("adver/item_bg",cc.SpriteFrame,function(e,t){e?console.log("err:",e):m.spriteFrame=t});var g=new cc.Node("title");g.color=new cc.Color(0,0,0),v.addChild(g);var w,b=g.addComponent(cc.Label);b.fontSize=40,b.lineHeight=41,b.string="\u5c0f\u7a0b\u5e8f",g.x=0,g.y=a(a(c(v.height,.5),g.height),50),window.wx&&(w=window.wx.getSystemInfoSync().windowHeight,w*2>1500)&&(g.y=s(l(v.height,.5),g.height)-100);var k=new cc.Node("btnback");v.addChild(k);var S=k.addComponent(cc.Sprite);cc.loader.loadRes("adver/list_arr",cc.SpriteFrame,function(e,t){e?console.log("err:",e):(S.spriteFrame=t,k.x=r(c(-v.width,.5),k.width)+10,k.y=g.y)}),k.on(cc.Node.EventType.TOUCH_START,function(){t()},this);var C=new cc.Node("whitebg");v.addChild(C),C.y=s(g.y,60),C.anchorY=1,C.setContentSize(1e3,2e3),C.color=new cc.Color(255,255,255);var I=C.addComponent(cc.Sprite);I.sizeMode=cc.Sprite.SizeMode.CUSTOM,cc.loader.loadRes("adver/item_bg",cc.SpriteFrame,function(e,t){e?console.log("err:",e):I.spriteFrame=t});var P=new cc.Node("textLabel");P.color=new cc.Color(130,130,130),v.addChild(P);var O=P.addComponent(cc.Label);O.fontSize=30,O.lineHeight=31,O.string="\u6700\u8fd1\u4f7f\u7528",P.anchorX=0,P.x=r(l(-v.width,.5),30),P.y=u(u(C.y,l(P.height,.5)),50);var x=new cc.Node("line");x.width=v.width,x.height=2,x.anchorX=0,x.x=P.x,x.y=h(h(P.y,P.height),35),v.addChild(x);var R=x.addComponent(cc.Sprite);R.sizeMode=cc.Sprite.SizeMode.CUSTOM,cc.loader.loadRes("adver/list_line",cc.SpriteFrame,function(e,t){e?console.log("err:",e):R.spriteFrame=t});var T=new cc.Node("adbox");T.x=0,T.y=x.y-20,T.width=v.width,T.height=f(v.height,f(p(v.height,.5),T.y)),T.anchorX=0,T.anchorY=1,v.addChild(T);var D=new cc.Node("scrollView");D.width=T.width,D.height=T.height,D.anchorY=1,D.anchorX=0,D.x=p(-D.width,.5),D.y=0,T.addChild(D);var j=D.addComponent(cc.ScrollView);j.horizontal=!1,j.cancelInnerEvents=!0;var L=new cc.Node("view");L.setContentSize(D.width,D.height),L.x=5,L.anchorY=1,L.anchorX=0,L.addComponent(cc.Mask),D.addChild(L);var E,A,N,U,F,M=new cc.Node("content");M.setContentSize(D.width,D.height),M.anchorX=0,M.anchorY=1,M.x=0,M.y=p(M.height,.5),L.addChild(M),j.content=L.getChildByName("content");for(var B=Math.floor(r(p(Math.random(),3),1)),G=0;U=G,F=y.length,U<F;G++){var V=new cc.Node("item");V.addComponent(o),V.getComponent(o).interFullListItem(e,n,y[G],i,G,B),V.x=0,V.y=-r((A=30,N=G,A*N),d(V.height,G)),E=V.height,M.addChild(V)}return M.height=r(d(E,y.length),d(30,y.length+1)),v},createList_ver:function(e,t,n,i){var r=function(e,t){return e*t},c=function(e,t){return e+t},a=function(e,t){return e*t},s=function(e,t){return e+t},l=function(e,t){return e*t},u=this.ad_Data,h=new cc.Node("interBox");h.setContentSize(cc.winSize.width,cc.winSize.height);var f=new cc.Node("bigbg");h.addChild(f),f.setContentSize(2e3,1e3),f.color=new cc.Color(237,237,237),f.addComponent(cc.BlockInputEvents);var p=f.addComponent(cc.Sprite);p.sizeMode=cc.Sprite.SizeMode.CUSTOM,cc.loader.loadRes("adver/item_bg",cc.SpriteFrame,function(e,t){e?console.log("err:",e):p.spriteFrame=t});var d=new cc.Node("title");d.color=new cc.Color(0,0,0),h.addChild(d);var y,v,_=d.addComponent(cc.Label);_.fontSize=40,_.lineHeight=41,_.string="\u5c0f\u7a0b\u5e8f",d.rotation=-90,d.x=c(r(-h.width,.5),d.width)+50,d.y=0,window.wx&&r(window.wx.getSystemInfoSync().windowWidth,2)>1500&&(d.x=c((y=r(-h.width,.5),v=d.width,y+v),100));var m=new cc.Node("btnback");h.addChild(m),m.rotation=-90;var g=m.addComponent(cc.Sprite);cc.loader.loadRes("adver/list_arr",cc.SpriteFrame,function(e,t){e?console.log("err:",e):(g.spriteFrame=t,m.x=d.x,m.y=r(-h.height,.5)+50)}),m.on(cc.Node.EventType.TOUCH_START,function(){t()},this);var w=new cc.Node("whitebg");h.addChild(w),w.x=d.x+60,w.anchorX=0,w.setContentSize(cc.winSize.width,cc.winSize.height),w.color=new cc.Color(255,255,255);var b=w.addComponent(cc.Sprite);b.sizeMode=cc.Sprite.SizeMode.CUSTOM,cc.loader.loadRes("adver/item_bg",cc.SpriteFrame,function(e,t){e?console.log("err:",e):b.spriteFrame=t});var k=new cc.Node("textLabel");k.color=new cc.Color(130,130,130),h.addChild(k);var S,C,I=k.addComponent(cc.Label);I.fontSize=30,I.lineHeight=31,I.string="\u6700\u8fd1\u4f7f\u7528",k.anchorX=0,k.rotation=-90,k.x=(S=w.x,C=r(k.width,.5),S+C+30),k.y=r(-h.height,.5)+30;var P,O,x=new cc.Node("line");x.width=h.width,x.height=2,x.rotation=-90,x.anchorX=0,x.x=(P=k.x,O=k.width,P+O+35),x.y=k.y,h.addChild(x);var R=x.addComponent(cc.Sprite);R.sizeMode=cc.Sprite.SizeMode.CUSTOM,cc.loader.loadRes("adver/list_line",cc.SpriteFrame,function(e,t){e?console.log("err:",e):R.spriteFrame=t});var T,D,j=new cc.Node("adbox");j.x=x.x+20,j.width=(T=h.width,D=j.x,T-D-10),j.height=h.height,j.y=a(j.height,.5),j.anchorX=0,j.anchorY=1,h.addChild(j),console.log("adbox.width: ",j.width);var L=new cc.Node("scrollView");L.width=j.width,L.height=j.height,L.anchorY=1,L.anchorX=0,L.x=0,L.y=0,j.addChild(L);var E=L.addComponent(cc.ScrollView);E.horizontal=!0,E.vertical=!1,E.cancelInnerEvents=!0;var A=new cc.Node("view");A.setContentSize(L.width,L.height),A.x=5,A.anchorY=1,A.anchorX=0,A.addComponent(cc.Mask),L.addChild(A);var N,U,F,M=new cc.Node("content");M.setContentSize(L.width,L.height),M.anchorX=0,M.anchorY=1,M.y=0,M.x=0,A.addChild(M),E.content=A.getChildByName("content");for(var B=Math.floor(a(Math.random(),3)+1),G=0;U=G,F=u.length,U<F;G++){var V=new cc.Node("item");V.addComponent(o),V.getComponent(o).interFullListItem_ver(e,n,u[G],i,G,B),V.y=0,V.x=s(30*G,V.width*G),N=V.width,M.addChild(V)}return M.width=s(l(N,u.length),l(30,s(u.length,1))),h},interFull_scroll_ver:function(e,t,o,n,i,r,c,a){void 0===o&&(o=null),void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r=null),void 0===c&&(c=null),void 0===a&&(a=null);var s={haxGY:"err:",WfODO:function(e){return e()},URjWr:function(e,t){return e==t},UUwPL:"right",MMDUl:"left",lNZNt:"content",IOGca:function(e,t){return e<=t},jFmlI:function(e,t){return e-t},VvyIx:function(e,t){return e>=t},rvRnQ:function(e,t){return e<t},Ndzto:function(e,t){return e+t},BmJof:function(e,t){return e>t},ZJJCu:function(e,t){return e-t},CEgkC:function(e,t){return e*t},WwOyR:function(e,t){return e+t},VPoNf:"scrollView",XAwLU:function(e,t){return e*t},PEuVI:"view",icSaQ:"item",hQUPc:"zzsdk_item",kqFbk:function(e,t){return e*t},uxErf:function(e,t){return e==t},Mcpmf:"3|4|2|1|0",wRkGg:"Custom",mpbBN:"adver/new_icon1",pOXQw:"1|3|4|0|2",dKaYm:function(e,t){return e+t},rRuZh:function(e,t){return e/t},CwRrO:function(e,t){return e-t},PpDCz:function(e,t){return e+t},tYGTv:function(e,t){return e<t},rDKGn:function(e,t){return e+t},AnGdh:function(e,t){return e-t},xwzSj:function(e,t){return e*t},zpzbI:function(e,t){return e-t},LKnwW:function(e,t){return e-t},JGaXp:function(e,t){return e/t},LCHfU:function(e,t){return e/t},DepkN:"top",FlCaN:function(e,t){return e*t},dCbfw:function(e,t){return e*t},nSOub:function(e,t){return e*t},AhJaL:function(e,t){return e*t},Ropbd:"adver/new_icon2",QVizf:"sdk\u603b\u5f00\u5173\u5173\u95ed\uff0c\u4e0d\u5c55\u793asdk",ysckl:function(e,t){return e==t},IHWdR:"sdk\u5c4f\u853d\u63a5\u53e3\u5c4f\u853d\u4e86\u6b64\u5e7f\u544a\u7ec4\u4ef6",HOLxw:"loadSDK",KRncq:"SDK\u672a\u521d\u59cb\u5316\u6216\u521d\u59cb\u5316\u5931\u8d25",yubor:function(e,t){return e+t},AbPnf:"\u540e\u53f0\u6ca1\u6709",aTNzB:"\u5e7f\u544a\u4f4d",mVCRS:"interBox",oqBVs:function(e,t){return e!=t},hMneF:function(e,t){return e!=t},LqVjh:"bgImg",ZwmNL:"adver/sdk_bg",lPtGB:function(e,t){return e==t},RDzGb:"btnback",MnocQ:"youlikeBox",xDEGf:"youlikeTitle",zYKbo:"youlikeAdbox",sZLjt:"hottag",dCCbv:"adver/new_bg2",evdAE:"other",iQQfE:function(e,t){return e+t},ibbLF:"adver/",OTgRM:"sdk_button"};if(s.uxErf(this.z_adSwitch,0))console.log(s.QVizf);else if(s.ysckl(this.z_validAd,0))console.log(s.IHWdR);else if(window[s.HOLxw]){if(this.checkShow(t)){var l=this;l.interOthSch=!0;var u=l.ad_Data;l.interFullNode_ver=new cc.Node(s.mVCRS),l.interFullNode_ver.setContentSize(cc.winSize.width,s.oqBVs(n,null)?n:cc.winSize.height),s.hMneF(i,null)&&(l.interFullNode_ver.y=i);var h=new cc.Node(s.LqVjh);l.interFullNode_ver.addChild(h);var f=h.addComponent(cc.Sprite);cc.loader.loadRes(s.ZwmNL,cc.SpriteFrame,function(e,t){e?console.log(s.haxGY,e):f.spriteFrame=t}),s.lPtGB(this.z_sign,1)&&(h.angle=90),h.addComponent(cc.BlockInputEvents);var p=new cc.Node(s.RDzGb);l.interFullNode_ver.addChild(p);var d=p.addComponent(cc.Sprite);p.on(cc.Node.EventType.TOUCH_START,function(){s.WfODO(o)},l);var y=new cc.Node(s.MnocQ);y.setContentSize(l.interFullNode_ver.width,100),l.interFullNode_ver.addChild(y);var v=new cc.Node(s.xDEGf);y.addChild(v);var _=new cc.Node(s.zYKbo);y.addChild(_),_.anchorX=0;var m=_.addComponent(cc.Sprite),g=new cc.Node(s.sZLjt);g.anchorX=0,g.anchorY=1,l.interFullNode_ver.addChild(g);var w=g.addComponent(cc.Sprite);cc.loader.loadRes(s.dCCbv,cc.SpriteFrame,function(o,n){var i={EZaja:function(e,t){return s.URjWr(e,t)},QLQWw:s.UUwPL,mSQEb:s.MMDUl,frQsh:s.lNZNt,kBUXM:function(e,t){return s.IOGca(e,t)},EXZfm:function(e,t){return s.jFmlI(e,t)},pRXBe:function(e,t){return s.VvyIx(e,t)},onBzy:function(e,t){return s.VvyIx(e,t)},HZsgl:function(e,t){return s.rvRnQ(e,t)},icbow:function(e,t){return s.Ndzto(e,t)},fiszi:function(e,t){return s.BmJof(e,t)},ULAIE:function(e,t){return s.Ndzto(e,t)},AMOOe:s.haxGY,PcmkG:function(e,t){return s.ZJJCu(e,t)},rMGCJ:function(e,t){return s.CEgkC(e,t)},LmeyO:function(e,t){return s.CEgkC(e,t)},zeuEy:function(e,t){return s.WwOyR(e,t)},DcJos:s.VPoNf,TdBaK:function(e,t){return s.XAwLU(e,t)},iLBVa:s.PEuVI,AsDwd:function(e,t){return s.rvRnQ(e,t)},JyIvy:s.icSaQ,HfDPE:s.hQUPc,mRftT:function(e,t){return s.WwOyR(e,t)},AKfSz:function(e,t){return s.XAwLU(e,t)},tLYRs:function(e,t){return s.kqFbk(e,t)},qNxmP:function(e,t){return s.kqFbk(e,t)}};if(o)console.log(s.haxGY,o);else{if(m&&(m.spriteFrame=n),s.uxErf(l.z_sign,1))for(var a=s.Mcpmf.split("|"),h=0;;){switch(a[h++]){case"0":_.width=s.ZJJCu(l.interFullNode_ver.width,400);continue;case"1":m.spriteFrame.insetRight=100;continue;case"2":m.spriteFrame.insetLeft=100;continue;case"3":m.type=cc.Sprite.Type.SLICED;continue;case"4":m.sizeMode=s.wRkGg;continue}break}_.x=s.ZJJCu(s.kqFbk(-_.width,.5),150),cc.loader.loadRes(s.mpbBN,cc.SpriteFrame,function(o){var n={YeJSY:function(e,t){return i.HZsgl(e,t)},TOggN:function(e,t){return i.icbow(e,t)},PxDQO:i.frQsh,xMlFv:function(e,t){return i.EXZfm(e,t)},XPzDV:function(e,t){return i.fiszi(e,t)},SbyQw:function(e,t){return i.ULAIE(e,t)}};if(o)console.log(i.AMOOe,o);else{v.height=0,v.y=i.PcmkG(i.rMGCJ(y.height,.5),i.LmeyO(v.height,.5)),_.y=i.zeuEy(i.PcmkG(i.PcmkG(v.y,i.LmeyO(v.height,.5)),i.LmeyO(_.height,.5)),10);var a=new cc.Node(i.DcJos);a.width=_.width,a.height=_.height,a.anchorY=1,a.anchorX=0,a.x=0,a.y=i.TdBaK(a.height,.5),_.addChild(a);var s=a.addComponent(cc.ScrollView);s.vertical=!1,s.cancelInnerEvents=!0;var h=new cc.Node(i.iLBVa);h.setContentSize(i.PcmkG(a.width,10),a.height),h.x=5,h.anchorY=1,h.anchorX=0,h.addComponent(cc.Mask),a.addChild(h);var f,p=new cc.Node(i.frQsh);p.setContentSize(i.PcmkG(a.width,10),a.height),p.anchorX=0,p.anchorY=1,p.x=0,p.y=i.TdBaK(p.height,.5),h.addChild(p),s.content=h.getChildByName(i.frQsh);for(var d=0;i.AsDwd(d,u.length);d++){var m=new cc.Node(i.JyIvy);m.addComponent(window[i.HfDPE]),m.getComponent(window[i.HfDPE]).single_icon(t,r,u[d],c),m.x=i.zeuEy(i.TdBaK(20,i.mRftT(d,1)),i.AKfSz(m.width,d)),m.y=i.tLYRs(-i.PcmkG(h.getChildByName(i.frQsh).height,m.height),.5),f=m.width,h.getChildByName(i.frQsh).addChild(m)}h.getChildByName(i.frQsh).width=i.mRftT(i.qNxmP(u.length,f),i.qNxmP(i.mRftT(u.length,1),20));var g=i.mSQEb,w=0,b=function(){var e;i.EZaja(g,i.QLQWw)?e=-1:i.EZaja(g,i.mSQEb)&&(e=1),h.getChildByName(i.frQsh).x+=e,i.kBUXM(h.getChildByName(i.frQsh).x,-i.EXZfm(h.getChildByName(i.frQsh).width,l.interFullNode_ver.width))?g=i.mSQEb:i.pRXBe(h.getChildByName(i.frQsh).x,0)&&(g=i.QLQWw),i.onBzy(++w,40)&&(w=0,h.getChildByName(i.frQsh).children.forEach(function(e){n.YeJSY(n.TOggN(h.getChildByName(n.PxDQO).x,e.x),n.xMlFv(-f,50))||n.XPzDV(n.TOggN(h.getChildByName(n.PxDQO).x,e.x),n.SbyQw(a.width,50))?e.active=!1:e.active=!0}))};l.fulltopSchArr_ver[e]=b,l.schedule(b,.005)}})}});var b=new cc.Node(s.evdAE);return b.anchorY=1,b.anchorX=0,b.width=l.interFullNode_ver.width,b.x=s.AhJaL(-b.width,.5),l.interFullNode_ver.addChild(b),cc.loader.loadRes(s.iQQfE(s.ibbLF,s.hMneF(a,null)?a:s.OTgRM),cc.SpriteFrame,function(o,n){var i={ozHrq:function(e,t){return s.BmJof(e,t)},JwIco:function(e,t){return s.WwOyR(e,t)},hdIco:s.pOXQw,AHOtx:s.lNZNt,biQrj:function(e,t){return s.kqFbk(e,t)},xUZwg:function(e,t){return s.ZJJCu(e,t)},EKLvP:function(e,t){return s.dKaYm(e,t)},WksOk:function(e,t){return s.rRuZh(e,t)},RVsvF:function(e,t){return s.CwRrO(e,t)},kNqaS:function(e,t){return s.PpDCz(e,t)},nCEvj:function(e,t){return s.tYGTv(e,t)},SUPgV:function(e,t){return s.rDKGn(e,t)},qjTsY:function(e,t){return s.kqFbk(e,t)},RRzhI:function(e,t){return s.rRuZh(e,t)},IAMny:function(e,t){return s.VvyIx(e,t)},BNpEM:s.haxGY,OfsMS:function(e,t){return s.rDKGn(e,t)},WWfSM:function(e,t){return s.CwRrO(e,t)},xlENN:function(e,t){return s.AnGdh(e,t)},qjevP:function(e,t){return s.AnGdh(e,t)},MKtAZ:function(e,t){return s.xwzSj(e,t)},rYDFO:function(e,t){return s.uxErf(e,t)},pXWad:function(e,t){return s.tYGTv(e,t)},HASVJ:s.icSaQ,EAkcg:s.hQUPc,WOOUZ:function(e,t){return s.zpzbI(e,t)},qAJhd:function(e,t){return s.xwzSj(e,t)},VtQDJ:function(e,t){return s.LKnwW(e,t)},ehgXf:function(e,t){return s.JGaXp(e,t)},UovQd:function(e,t){return s.xwzSj(e,t)},thlqC:function(e,t){return s.LCHfU(e,t)},hgfzF:s.DepkN};if(o)console.log(s.haxGY,o);else{d.spriteFrame=n,p.x=s.rDKGn(s.rDKGn(s.FlCaN(-l.interFullNode_ver.width,.5),s.dCbfw(p.width,.5)),20),p.y=s.LKnwW(s.LKnwW(s.nSOub(l.interFullNode_ver.height,.5),s.AhJaL(p.height,.5)),30),y.width=s.LKnwW(l.interFullNode_ver.width,d.width),y.x=p.width,y.y=p.y;var a=new cc.Node(s.VPoNf);a.width=b.width,a.anchorX=0,a.anchorY=1,a.x=0,a.y=s.AhJaL(a.height,.5),b.addChild(a);var h=a.addComponent(cc.ScrollView);h.horizontal=!1,h.cancelInnerEvents=!0;var f=new cc.Node(s.PEuVI);f.anchorX=0,f.anchorY=1,f.addComponent(cc.Mask),a.addChild(f);var v=new cc.Node(s.lNZNt);v.setContentSize(a.width,a.height),v.anchorX=0,v.anchorY=1,v.x=0,f.addChild(v),h.content=f.getChildByName(s.lNZNt);var _,m=u.length;cc.loader.loadRes(s.Ropbd,cc.SpriteFrame,function(o,n){var s={BhsBP:function(e,t){return i.ozHrq(e,t)},MTjXg:function(e,t){return i.JwIco(e,t)},JvrZG:i.hdIco,xUjKq:i.AHOtx,PNHXL:function(e,t){return i.biQrj(e,t)},KWxnD:function(e,t){return i.JwIco(e,t)},KLygf:function(e,t){return i.xUZwg(e,t)},RBrSe:function(e,t){return i.EKLvP(e,t)},ucpNk:function(e,t){return i.WksOk(e,t)},jvGgQ:function(e,t){return i.RVsvF(e,t)},MNAFt:function(e,t){return i.biQrj(e,t)},XmGdk:function(e,t){return i.WksOk(e,t)},PHazi:function(e,t){return i.kNqaS(e,t)},qhHGx:function(e,t){return i.biQrj(e,t)},CPhMh:function(e,t){return i.kNqaS(e,t)},jPAjh:function(e,t){return i.nCEvj(e,t)},rTndI:function(e,t){return i.nCEvj(e,t)},qgRMj:function(e,t){return i.SUPgV(e,t)},qsIsa:function(e,t){return i.SUPgV(e,t)},uAkOK:function(e,t){return i.SUPgV(e,t)},cbHdZ:function(e,t){return i.WksOk(e,t)},NMhmN:function(e,t){return i.qjTsY(e,t)},ZsoYS:function(e,t){return i.RVsvF(e,t)},SxsXQ:function(e,t){return i.qjTsY(e,t)},vUZzE:function(e,t){return i.SUPgV(e,t)},pWscm:function(e,t){return i.SUPgV(e,t)},LDSiF:function(e,t){return i.RRzhI(e,t)},SDDqd:function(e,t){return i.IAMny(e,t)},MvBsW:function(e,t){return i.IAMny(e,t)}};if(o)console.log(i.BNpEM,o);else{var h;w&&(w.spriteFrame=n),g.y=i.RVsvF(i.RVsvF(y.y,i.qjTsY(y.height,.5)),g.height),g.x=i.OfsMS(i.qjTsY(-l.interFullNode_ver.width,.5),20),b.height=i.WWfSM(i.xlENN(l.interFullNode_ver.height,p.height),150),b.y=i.qjevP(i.MKtAZ(l.interFullNode_ver.height,.5),i.OfsMS(p.height,140)),a.height=b.height,f.setContentSize(a.width,a.height);var d=3;i.rYDFO(l.z_sign,1)&&(d=5);for(var k=0;i.pXWad(k,u.length);k++){var S=new cc.Node(i.HASVJ);S.addComponent(window[i.EAkcg]),S.getComponent(window[i.EAkcg]).hotItem(t,r,u[k],c),_=i.RRzhI(i.WOOUZ(f.getChildByName(i.AHOtx).width,i.qAJhd(d,S.width)),i.OfsMS(d,1)),S.x=i.OfsMS(i.qAJhd(_,i.VtQDJ(i.OfsMS(k,1),i.qAJhd(Math.floor(i.ehgXf(k,d)),d))),i.UovQd(i.VtQDJ(k,i.UovQd(Math.floor(i.ehgXf(k,d)),d)),S.width)),S.y=-i.OfsMS(i.UovQd(30,i.OfsMS(Math.floor(i.ehgXf(k,d)),1)),i.UovQd(S.height,Math.floor(i.thlqC(k,d)))),h=S.height,f.getChildByName(i.AHOtx).addChild(S)}f.getChildByName(i.AHOtx).height=1e5;var C=0,I=0,P=function(){var e;v.y+=1,C++,s.SDDqd(C,40)&&(C=0,e=!s.MvBsW(I,v.y),I=v.y,v.children.forEach(function(t){if(e)if(s.BhsBP(s.MTjXg(v.y,t.y),h))for(var o=s.JvrZG.split("|"),n=0;;){switch(o[n++]){case"0":m++;continue;case"1":t.active=!1;continue;case"2":f.getChildByName(s.xUjKq).height=s.MTjXg(1e5,s.PNHXL(h,m));continue;case"3":t.x=s.KWxnD(s.PNHXL(_,s.KLygf(s.RBrSe(m,1),s.PNHXL(Math.floor(s.ucpNk(m,d)),d))),s.PNHXL(s.jvGgQ(m,s.MNAFt(Math.floor(s.XmGdk(m,d)),d)),t.width));continue;case"4":t.y=-s.PHazi(s.qhHGx(30,s.CPhMh(Math.floor(s.XmGdk(m,d)),1)),s.qhHGx(t.height,Math.floor(s.XmGdk(m,d))));continue}break}else s.jPAjh(s.CPhMh(v.y,t.y),-a.height)?t.active=!1:t.active=!0;else if(s.rTndI(s.qgRMj(v.y,t.y),-a.height)){t.active=!1;var i=s.jvGgQ(m,u.length);t.x=s.qsIsa(s.qhHGx(_,s.jvGgQ(s.uAkOK(i,1),s.qhHGx(Math.floor(s.cbHdZ(i,d)),d))),s.NMhmN(s.ZsoYS(i,s.SxsXQ(Math.floor(s.cbHdZ(i,d)),d)),t.width)),t.y=-s.vUZzE(s.SxsXQ(30,s.pWscm(Math.floor(s.LDSiF(i,d)),1)),s.SxsXQ(t.height,Math.floor(s.LDSiF(i,d)))),m--}else s.BhsBP(s.pWscm(v.y,t.y),h)?t.active=!1:t.active=!0}))};l.fullBotSchArr_ver[e]=P,l.schedule(P,.005)}})}}),l.interFullNode_ver}console.log(s.yubor(s.yubor(s.AbPnf,t),s.aTNzB))}else console.log(s.KRncq)},interBoxNodeOpen:function(){for(var e={pLjlw:"1|6|4|0|5|3|2",fzpkx:"youlikeBox",ghiAb:"btnbox",weLBj:"other",ZSahv:"btnback",QWIJF:"hottag",YgnAU:"bgImg"},t=e.pLjlw.split("|"),o=0;;){switch(t[o++]){case"0":this.interFullNode_ver.getChildByName(e.fzpkx).active=!this.interFullNode_ver.getChildByName(e.fzpkx).active;continue;case"1":if(!this.interFullNode_ver)return;continue;case"2":this.interFullNode_ver.getChildByName(e.ghiAb)&&(this.interFullNode_ver.getChildByName(e.ghiAb).active=!this.interFullNode_ver.getChildByName(e.ghiAb).active);continue;case"3":this.interFullNode_ver.getChildByName(e.weLBj).active=!this.interFullNode_ver.getChildByName(e.weLBj).active;continue;case"4":this.interFullNode_ver.getChildByName(e.ZSahv).active=!this.interFullNode_ver.getChildByName(e.ZSahv).active;continue;case"5":this.interFullNode_ver.getChildByName(e.QWIJF).active=!this.interFullNode_ver.getChildByName(e.QWIJF).active;continue;case"6":this.interFullNode_ver.getChildByName(e.YgnAU).active=!this.interFullNode_ver.getChildByName(e.YgnAU).active;continue}break}},friPlaying:function(e,t,n,i,r,c){void 0===e&&(e=null),void 0===t&&(t=null),void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r=null),void 0===c&&(c=null);var a=function(e,t){return e-t},s=function(e,t){return e*t},l=function(e,t){return e/t},u=function(e,t){return e-t},h=function(e,t){return e+t},f=function(e,t){return e*t},p=function(e,t){return e+t},d=function(e,t){return e+t},y=function(e,t){return e<t},v="youlike_couplet";if(0==this.z_adSwitch)console.log("sdk\u603b\u5f00\u5173\u5173\u95ed\uff0c\u4e0d\u5c55\u793asdk");else if(window.loadSDK){if(this.checkShow(v)){var _,m=this;if(m.friPlayRefData={adtype:v,tagtype:i,failCb:n,itemTextColor:c},window.wx){window.wx.getStorageSync("create_localData")?y((_=m.getData_local(window.wx.getStorageSync("create_localData"))).length,6)&&(_=m.getData(0,6,"create_localNum")):(_=m.getData(0,6,"create_localNum"),window.wx.setStorageSync("create_localNum",6));for(var g="",w=0;y(w,_.length);w++)g+=d(_[w].creative_id,"&");window.wx.setStorageSync("create_localData",g),window.wx.setStorageSync("data_chain_youlike",g)}else _=m.randomGetData(6);m.playNode=new cc.Node("playNode"),m.playNode.x=e==null?0:e,m.playNode.y=t==null?0:t,m.playNode.scaleX=m.playNode.scaleY=m.offsetX;var b=new cc.Node("bg");m.playNode.addChild(b);var k=b.addComponent(cc.Sprite);return cc.loader.loadRes(d("adver/",r!=null?r:"double_bg"),cc.SpriteFrame,function(e,t){if(e)console.log("err:",e);else{k.spriteFrame=t,m.playNode.setContentSize(b.width,b.height);var r=new cc.Node("adbox");m.playNode.addChild(r),r.anchorX=0,r.anchorY=1,r.width=a(m.playNode.width,10),r.height=a(m.playNode.height,68),r.x=s(-r.width,.5),r.y=a(s(m.playNode.height,.5),60),r.addComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.CUSTOM;for(var d=0;L=d,E=_.length,L<E;d++){var y=new cc.Node("item");y.addComponent(o),y.getComponent(o).friPlayItem(v,i,_[d],n,c);var g=l(a(r.width,s(2,y.width)),3),w=l(u(r.height,(D=3,j=y.height,D*j)),4);y.x=h((R=g,T=u(h(d,1),Math.floor(l(d,2))*2),R*T),(O=u(d,f(Math.floor(l(d,2)),2)),x=y.width,O*x)),y.y=-h(f(w,p(Math.floor((I=d,P=2,I/P)),1)),f(y.height,Math.floor((S=d,C=2,S/C)))),r.addChild(y)}}var S,C,I,P,O,x,R,T,D,j,L,E}),m.playNode}console.log(p(d("\u540e\u53f0\u6ca1\u6709",v),"\u5e7f\u544a\u4f4d"))}else console.log("SDK\u672a\u521d\u59cb\u5316\u6216\u521d\u59cb\u5316\u5931\u8d25")},friPlayRefresh:function(){var e,t,n,i,r,c=function(e,t){return e+t},a=function(e,t){return e*t},s=function(e,t){return e-t},l=function(e,t){return e/t},u=function(e,t){return e*t},h=6;if(window.wx){window.wx.getStorageSync("create_localNum")&&(i=Number,r=window.wx.getStorageSync("create_localNum"),h=i(r)+6),window.wx.setStorageSync("create_localNum",h),e=this.getData(h-6,h,"create_localNum");for(var f="",p=0;t=p,n=e.length,t<n;p++)f+=c(e[p].creative_id,"&");window.wx.setStorageSync("create_localData",f),window.wx.setStorageSync("data_chain_youlike",f)}else e=this.randomGetData("6");var d,y,v,_,m,g,w,b,k,S,C,I=this.playNode.getChildByName("adbox");I.removeAllChildren();for(var P=0;S=P,C=e.length,S<C;P++){var O=new cc.Node("item");O.addComponent(o),O.getComponent(o).friPlayItem(this.friPlayRefData.adtype,this.friPlayRefData.tagtype,e[P],this.friPlayRefData.failCb,this.friPlayRefData.itemTextColor);var x=(w=I.width,b=2,k=O.width,(w-b*k)/3),R=(m=I.height,g=a(3,O.height),(m-g)/4);O.x=c(a(x,s(c(P,1),a(Math.floor(l(P,2)),2))),(v=s(P,u(Math.floor(l(P,2)),2)),_=O.width,v*_)),O.y=-c(u(R,c(Math.floor(l(P,2)),1)),u(O.height,Math.floor((d=P,y=2,d/y)))),I.addChild(O)}},singleRow:function(e,t,n,i,r){void 0===e&&(e=null),void 0===t&&(t=null),void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r=null);var c=function(e,t){return e*t},a=function(e,t){return e+t},s=function(e,t){return e==t};if(0==this.z_adSwitch)console.log("sdk\u603b\u5f00\u5173\u5173\u95ed\uff0c\u4e0d\u5c55\u793asdk");else if(window.loadSDK){if(this.checkShow("youlike_couplet")){var l=this.randomGetData(3),u=new cc.Node("singleNode");u.x=s(e,null)?0:e,u.y=s(t,null)?0:t,u.scaleX=u.scaleY=this.offsetX;var h=new cc.Node("bg");u.addChild(h);var f=h.addComponent(cc.Sprite);return cc.loader.loadRes("adver/"+(r!=null?r:"single_bg"),cc.SpriteFrame,function(e,t){if(e)console.log("err:",e);else{f.spriteFrame=t,u.setContentSize(h.width,h.height);var r=new cc.Node("adbox");u.addChild(r),r.anchorX=0,r.anchorY=1,r.width=u.width-10,r.height=u.height-10,r.x=c(-r.width,.5),r.y=c(u.height,.5)-5,r.addComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.CUSTOM;for(var s=0;I=s,P=l.length,I<P;s++){var p=new cc.Node("item");p.addComponent(o),p.getComponent(o).singleItem("youlike_couplet",n,l[s],i);var d=(S=r.width,C=p.width,(S-C)/2),y=(w=r.height,b=3,k=p.height,(w-b*k)/4);p.x=d,p.y=-a((m=y,g=a(s,1),m*g),(v=p.height,_=s,v*_)),r.addChild(p)}}var v,_,m,g,w,b,k,S,C,I,P}),u}console.log(a(a("\u540e\u53f0\u6ca1\u6709","youlike_couplet"),"\u5e7f\u544a\u4f4d"))}else console.log("SDK\u672a\u521d\u59cb\u5316\u6216\u521d\u59cb\u5316\u5931\u8d25")},youlikeItem:function(e,t,n,i){var r=new cc.Node("item");return r.addComponent(o),r.getComponent(o).youlikeItem(e,t,n,null,i),r},drawerItem:function(e,t,n,i){var r=new cc.Node("item");return r.addComponent(o),r.getComponent(o).drawerItem(e,t,n,i),r},interItem:function(e,t,n,i){var r=new cc.Node("item");return r.addComponent(o),r.getComponent(o).interItem(e,t,n,i),r},sendPath:function(e){var t={xsl_uuid:this.z_uuid,xsl_appid:this.z_appid_self,xsl_from:this.z_from,xsl_newuser:this.z_newuser};if(e!=null)for(var o in e)t[o]=e[o];this.httpRequest("sendPath","https://r.qpzq.net/r.gif",t,null,null)},adlTag:function(e,t){window.wx&&window.wx.aldSendEvent&&window.wx.aldSendEvent(e,t)},aliEvent:function(e,t){var o=function(e,t){return e+t},n=function(e,t){return e+t},i=o(o(o(o(n(n(n(n(n("https://r.qpzq.net/r.gif?xsl_uuid=",window.uuid),"&xsl_appid="),this.z_appid_self),"&xsl_from="),this.z_from)+"&xsl_newuser=",this.z_newuser),"&xsl_event="),e),"&xsl_param=")+JSON.stringify(t);this.httpRequest("sendPath",i,null,null,null)},addLogData:function(e,t){var o,n,i,r;if(this.aliyun_log_field)for(var c=0;i=c,r=this.aliyun_log_field.length,i<r;c++){var a=(o="xsl_",n=this.aliyun_log_field[c],o+n),s=t[this.aliyun_log_field[c]];e[a]=s}return e},create_uuid:function(){var e={aIPLM:function(e,t){return e*t},ZRHIf:function(e,t){return e+t},lojXn:function(e,t){return e+t},XBUSn:function(e,t){return e+t},SPGxn:function(e,t){return e+t},xMIfg:function(e,t){return e+t},PBIEc:function(e,t){return e+t},YWFkW:function(e){return e()},KpeQR:function(e){return e()},wYDAN:function(e){return e()},zGpFJ:function(e){return e()},YIOzm:function(e){return e()},CWQMw:function(e){return e()}};function t(){return Math.floor(e.aIPLM(65536,e.ZRHIf(1,Math.random()))).toString(16).substring(1)}return e.lojXn(e.XBUSn(e.SPGxn(e.SPGxn(e.xMIfg(e.xMIfg(e.PBIEc(e.YWFkW(t),e.KpeQR(t)),e.wYDAN(t)),e.wYDAN(t)),e.zGpFJ(t)),e.zGpFJ(t)),e.YIOzm(t)),e.CWQMw(t))},getIP:function(){window.wx&&window.wx.getStorageSync("uuid")?(this.z_uuid=window.wx.getStorageSync("uuid"),this.z_newuser=0):(this.z_uuid=this.create_uuid(),window.wx&&window.wx.setStorageSync("uuid",this.z_uuid),this.z_newuser=1),window.uuid=this.z_uuid,console.log("\u83b7\u53d6uuid\uff1a",this.z_uuid);var e={xsl_t:(new Date).getTime(),xsl_action:"init"};this.sendPath(e),this.getAdData()},shieldRequest:function(){var e,t,o=function(e,t){return e(t)},n=function(e,t){return e+t},i=this;this.httpRequest(null,n(n(n(n((e="https://wxa.639311.com/api/ban?scene=",t=i.z_scene,e+t),"&reviewVer="),i.z_gameVer),"&channel="),i.z_channel),null,function(e){e.code==200&&(window.shieldData=e.data,i.z_validAd=o(Number,e.data.validAd),i.z_adSwitch=o(Number,e.data.adSwitch)),i.getIP()},function(e){console.log("get \u5c4f\u853d\u63a5\u53e3 fail: ",e)})},getAdData:function(){var e={PWUAO:"4|2|3|1|5|6|0",dtraQ:"---------------------sdk\u521d\u59cb\u5316\u5b8c\u6210------------------",CEyNN:"ad_Data",jUwoP:"loadSDK",nelUG:"\u914d\u7f6e\u52a0\u8f7d\u9519\u8bef\uff1a ",HRkTx:"4|1|2|0|3",tlIyJ:"config.json"},t=this;window.wx?t.httpRequest(null,t.z_adurl,null,function(o){for(var n=e.PWUAO.split("|"),i=0;;){switch(n[i++]){case"0":console.log(e.dtraQ);continue;case"1":console.log(t.aliyun_log_field,t.space,t.ad_Data);continue;case"2":t.space=o.data.space;continue;case"3":t.ad_Data=window[e.CEyNN]=t.handleData(o.data.creative);continue;case"4":t.aliyun_log_field=o.data.aliyun_log_field;continue;case"5":window[e.jUwoP]=!0;continue;case"6":t.loadFinishCb();continue}break}}):cc.loader.loadRes(e.tlIyJ,function(o,n){if(o)console.log(e.nelUG,o);else for(var i=e.HRkTx.split("|"),r=0;;){switch(i[r++]){case"0":console.log(t.aliyun_log_field,t.space,t.ad_Data);continue;case"1":t.space=n.json.space;continue;case"2":t.ad_Data=window[e.CEyNN]=t.handleData(n.json.creative);continue;case"3":window[e.jUwoP]=!0;continue;case"4":t.aliyun_log_field=n.json.aliyun_log_field;continue}break}})},uniq:function(e){for(var t=[],o=0;n=o,i=e.length,n<i;o++)t.indexOf(e[o])==-1&&t.push(e[o]);var n,i;return t},handleData:function(e){for(var t=function(e,t){return e<t},o=function(e,t){return e<t},n=[],i=0;t(i,e.length);i++)r=e[i].device,c=this.curModel,(r==c||e[i].device=="all")&&n.push(e[i]);for(var r,c,a,s,l,u,h,f,p=this.sort(n),d=[],y=[],v=0;t(v,p.length);v++){for(var _=!0,m=0;t(m,y.length);m++)if(a=p[v].weight,s=y[m],a==s){_=!1;break}_&&y.push(p[v].weight)}for(var g=0;t(g,y.length);g++)d[g]=[];for(var w=0;t(w,y.length);w++)for(var b=0;h=b,f=p.length,h<f;b++)l=y[w],u=p[b].weight,l==u&&d[w].push(p[b]);for(var k=0;o(k,d.length);k++)d[k]=this.luanxu(d[k]);for(var S=[],C=0;o(C,d.length);C++)for(var I=0;o(I,d[C].length);I++)S.push(d[C][I]);return S},sort:function(e){for(var t,o=function(e,t){return e<t},n=0;f=n,p=e.length,f<p-1;n++)for(var i=0;o(i,(h=e.length,h-1-n));i++)o(e[i].weight,e[(l=i,u=1,l+u)].weight)&&(t=e[i],e[i]=e[(a=i,s=1,a+s)],e[(r=i,c=1,r+c)]=t);var r,c,a,s,l,u,h,f,p;return e},luanxu:function(e){var t=e;return t.sort(function(){return Math.random()>.5?-1:1}),t},getData:function(e,t,o){for(var n=0,i=[],r=e;r<t;r++)c=r,a=window.ad_Data.length,c>=a?(i.push(window.ad_Data[n]),n++,o&&window.wx&&window.wx.setStorageSync(o,n)):i.push(window.ad_Data[r]);var c,a;return i},getData_local:function(e){for(var t=function(e,t){return e<t},o=e.split("&"),n=[],i=0;t(i,window.ad_Data.length);i++)for(var r=0;t(r,o.length);r++)o[r]!=""&&(c=window.ad_Data[i].creative_id,a=o[r],c==a)&&n.push(window.ad_Data[i]);var c,a;return n},getData_local_others:function(e){for(var t=function(e,t){return e<t},o=e.split("&"),n=[],i=0;t(i,window.ad_Data.length);i++){for(var r=!1,c=0;t(c,o.length);c++)a=window.ad_Data[i].creative_id,s=o[c],a==s&&(r=!0);r||n.push(window.ad_Data[i])}var a,s;return n},randomGetData:function(e){for(var t=function(e,t){return e<t},o=function(e,t){return e==t},n=[];n.length<e;){for(var i=Math.floor((c=Math.random(),a=window.ad_Data.length,c*a)),r=0;t(r,n.length)&&!o(n[r],i);r++);o(r,n.length)&&n.push(i)}for(var c,a,s=[],l=0;t(l,n.length);l++)s.push(window.ad_Data[n[l]]);return s},checkShow:function(e){var t,o,n,i;if(!window.ad_Data)return!1;for(var r=!1,c=0;n=c,i=this.space.length,n<i;c++)if(this.space[c].type==e&&(t=this.curModel,o=this.space[c].device,t==o||this.space[c].device=="all")){r=!0;break}return r},openGame:function(e,t,o,n){var i={UwiPH:"0|5|4|2|3|1",nzWrM:"zzsdkui",RRQzr:"clickTry",BNnXD:"clickTryTime",FxnEi:"clickok",mvspQ:function(e){return e()},bUXhn:"click",MGecy:function(e,t){return e!=t},gDlpy:"iPhone"},r=this,c=(new Date).getTime(),a={xsl_unit:t,xsl_unit_type:o,xsl_creative:e.appname,xsl_t:c,xsl_action:i.bUXhn};a=r.addLogData(a,e),r.sendPath(a);try{var s=e.appid,l=e.path;if(window.wx){var u=window.wx.getSystemInfoSync().model;i.MGecy(u.indexOf(i.gDlpy),-1)||e.android_appid&&(s=e.android_appid,l=e.android_path)}if(!window.wx)return;window.wx.navigateToMiniProgram({appId:s,path:l,success:function(){for(var n=i.UwiPH.split("|"),c=0;;){switch(n[c++]){case"0":var a=(new Date).getTime();continue;case"1":window[i.nzWrM].game_open_tip=!1;continue;case"2":r.sendPath(s);continue;case"3":window[i.RRQzr]&&(window[i.RRQzr]=!1,window[i.BNnXD]=(new Date).getTime());continue;case"4":s=r.addLogData(s,e);continue;case"5":var s={xsl_unit:t,xsl_unit_type:o,xsl_creative:e.appname,xsl_t:a,xsl_action:i.FxnEi};continue}break}},fail:function(){window[i.nzWrM].game_open_tip=!1,n&&i.mvspQ(n)}})}catch(h){console.log(h)}},httpRequest:function(e,t,o,n){void 0===o&&(o=null);var i=function(e,t){return e(t)},r=new XMLHttpRequest;r?(r.onreadystatechange=function(){if(o=r.readyState,c=XMLHttpRequest.DONE,o==c&&e!="sendPath")if(r.status===200){var t=r.responseText;try{t=JSON.parse(t)}catch(a){t=r.responseText}i(n,t)}else console.log("There was a problem with the request.");var o,c},r.open("GET",t),o!=null?r.send(o):r.send()):i(alert,"Giving up :( Cannot create an XMLHTTP instance")}});t.exports=n,window.zzsdkui=n.getInstance(),cc._RF.pop()},{zzsdkui_item:"zzsdkui_item"}]},{},["AIEnemy","Arrow","ArrowMachine","BallSkill","Ballon","Bomb","BombTooltip","Box","Chain","EvtType","IpChecker","LoadingScene","PersistNode","PlayerInfo","ServerConfig","ChapterlInfo","CloudFuncTypes","CollectionInfo","Const","DailyLevelInfo","LayerRenderToTexture","LevelInfo","PropInfo","StarInfo","TopRightWdiget","TurntableInfo","Unity","code","Door","EnemyBallUp","Game","ItemBall","ItemKey","KeyToggle","LevelLoader","Effect","EffectLoader","SpecialLevel","Spike","Thunder","Main","OneWayPlatform","Portal","RemoveOutOfView","Role","RoleLoader","SkeletonBase","Target","TouchStartGame","UIBoxAward","UIBoxGuide","UIChallengeChapter","UIChallengeChapterItem","UIChallengeLevel","UIChapter","UIChapterClues","UIChapterHelp","UIChapterItem","UICollection","UIConfirm","UICustomer ","UIDayInviteItem","UIDecorateItem","UIEgg","UIEnergeyPackage","UIForcedUpdata","UIFreeGetLabour","UIFreeProp","UIFriendHelp","UIFriendHelpItem","UIGetGift","UIGetGun","UIGetLabour","UIGetLucky","UIGetLuckyItem","UIGetPersent","UIGetProp","UIGetSuccesss","UIGunShow","UILevel","UILevelItem","UILose","UILucky","UIManual_Egg","UIMission","UIOffLine","UIPause","UIPersonSkin","UIProgressReward","UIProgressRewardGet","UIPropItem","UIRank","UISetting","UISign","UISkin","UISkinItem","UISkip","UISubscriber","UIUnlock","UIUnlockMode","UIUnlockSkin","UIWin","wxRankList","Guide0","Guide4","Guide5","GuideProp","GuideStory","FlyToMagnet","FreezeTarget","ItemMagnet","ItemStar","SnowBall","AutoLabour","HintButton","cheatInfo","md5","wegame","zzcloud","zzsdkui","zzsdkui_item","FourComics","ItemsGroupView","WinGift","DataCenter","FSM","PoolManager","Signal","calc","easing","event","Platform","SDKInterafce","StatHelper","umeng","Buff","BuffSystem","EmptyBuff","GenericBuff","Cloud","cheatInfoDC","mmgame","Bounce","MoveEngine","SElegantFollow","SFollowCamera","SMoveBase","BreathAnim","EaseType","Extension","LabelAnim","ProgressBarAnim","ScaleAnim","UIAnimHelper","UIBaseAnim","BKTool","QQGameConfigs","SoundHelper","qqsdk","mesh-sprite","HurtableArea","SAutoRotate","SBullet","SBullet2","SEquipSystem","SExplode","SFireAgent","SGameEntity","SItem","STargetEnemies","STargetPlayer","SWeapon","ShootManager","DouyinStorage","TTGameConfigs","ttsdk","IconSov","SettingInfo","SovInfo","UserInfo","WeakNetConf","WeakNetGame","GameConfigs","WxFeedbackButton","WxGameClubButton","WxgetInfoButton","sdk","BoostsAction","ClickAudio","ClickAudioManager","Device","DoubleClick","DrawCallOptimizer","DrawCallReorder","DynamicMap","FrameSwitch","InputSystem","JoyStick","LabelPlayer","LoadingSceneBase","LocalLifeSystem","LocalTimeSystem","Locker","LongTouch","Net","NoobGuider","NumTrigger","ParallaxNode","PasrTimer","PlayController","PoolSpawner","PsFx","PsFxPlayer","PsSpawner","SpriteFrameCache","TiledLayer2Objects","display","DCLabel","DCPandoraPoint","DCSprite","DCToggle","DCUI","LoadingManager","MessageBoxComponent","MessageBoxManager","MsgBox","ToastComponent","ToastManager","UIFunctions","View","ViewManager","AutoSwitch","CrossPad","Draggable","HpBar","ListItem","ListView","PandoraPoint","PrefabLoader","Switcher","LevelSelector","SubpackageLoader","mvcView","actionUtil","ccUtil","gameUtil","mathf"]);