window.__require=function e(t,i,a){function n(s,r){if(!i[s]){if(!t[s]){var c=s.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!r&&l)return l(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var d=i[s]={exports:{}};t[s][0].call(d.exports,function(e){return n(t[s][1][e]||e)},d,d.exports,e,t,i,a)}return i[s].exports}for(var o="function"==typeof __require&&__require,s=0;s<a.length;s++)n(a[s]);return n}({Aft:[function(e,t){"use strict";cc._RF.push(t,"f450ayCuj5OE7MSM8F8qmnU","Aft");var i=e,a=t,n={};(window.aft=n).JsonData={},n.constant=i("GameConst"),n.EventBus=i("EventBus"),n.eventBus=n.EventBus.getInstance(),n.GameEventType=i("GameEventType"),n.pageConstant=i("PageConstant"),n.Logger=i("Logger"),n.BaseHandler=i("BaseHandler"),n.ByteBuf=i("ByteBuf"),n.HttpClient=i("HttpClient"),n.StorageUtil=i("StorageUtil"),n.BaseUI=i("BaseUI"),n.BaseScrollView=i("BaseScrollView"),n.Utils=i("Utils"),n.timeUtil=i("TimeUtil"),n.SoundsUtil=i("SoundsUtil"),n.soundsUtil=new n.SoundsUtil,n.BigNumber=i("bignumber.min"),n.BigNumber.config({ROUNDING_MODE:n.BigNumber.ROUND_FLOOR}),n.lang=i("LanguageUtils"),n.newBigNumber=function(e){return isNaN(e)?(n.Logger.debug("number is NaN."),new n.BigNumber(0)):new n.BigNumber(e)},cc.sys.isNative&&jsb.Device.setKeepScreenOn(!0),a.exports=n,cc._RF.pop()},{}],AllianceExitPage:[function(e,t){"use strict";cc._RF.push(t,"b9760mW54hJkruftm6MN9hZ","AllianceExitPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{},registerGameListener:function(){},onLoadPage:function(){this.tipsNode=cc.find("content/tips",this.node),this.outTipsLabel=cc.find("content/outTips",this.node).getComponent(cc.Label),this.redDoubleNode=cc.find("content/giveUpTips",this.node)},showPageBegan:function(){this._type=this.data.type,this._index=this.data.index,this.tipsNode.active=this._type==i.constant.ALLIANCE_EXIT_TYPE_SELF,this.outTipsLabel.node.active=this._type==i.constant.ALLIANCE_EXIT_TYPE_OTHER,this.redDoubleNode.active=this._type==i.constant.ALLIANCE_EXIT_TYPE_RED_DOUBLE,i.lang.updateLabelString(this.outTipsLabel,[this.data.name])},showPageEnded:function(){},onClickExit:function(){var e=this;this._type==i.constant.ALLIANCE_EXIT_TYPE_SELF?i.player.allianceModule.serverExitAlliance(function(){e.closePage(),i.gameScene.closePage(i.pageConstant.PAGE_TYPE_ALLIANCE)},function(){}):this._type==i.constant.ALLIANCE_EXIT_TYPE_OTHER?i.player.allianceModule.serverKickOutAlliance(this.data.otherAccount,function(){i.eventBus.dispatchEvent(i.GameEventType.REFRESH_ALLIANCE_MEMBER),e.closePage()},function(){}):this._type==i.constant.ALLIANCE_EXIT_TYPE_RED_DOUBLE&&(this.closePage(),i.gameScene.closePage(i.pageConstant.PAGE_TYPE_ALLIANCE_RED),i.player.allianceModule.serverGetAllianceReceiveRedList(this._index,function(){i.gameScene.showPage(i.pageConstant.PAGE_TYPE_ALLIANCE_RED_LOOK,{index:e._index})},function(){}))},update:function(){}}),cc._RF.pop()},{}],AllianceJoinPage:[function(e,t){"use strict";cc._RF.push(t,"b3f4bfSiw9O9oRPGSsjs3Eh","AllianceJoinPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{},registerGameListener:function(){},onLoadPage:function(){this.btnNodeSprite=cc.find("content/joinButton/background",this.node).getComponent(cc.Sprite),this.cdTimeLabel=cc.find("labelCD",this.node).getComponent(cc.Label),this.cdTimeLabel.node.active=!1,this.btnIsGay=!1},showPageBegan:function(){this.updateTime=0,this.cdTime=i.player.allianceModule.getAllianceCdTime(),this.updateInfo()},showPageEnded:function(){},updateInfo:function(){0<this.cdTime?(this.cdTimeLabel.node.active||(this.cdTimeLabel.node.active=!0),this.btnIsGay||this.btnNodeSprite.setMaterial(0,cc.Material.getBuiltinMaterial("2d-gray-sprite")),i.lang.updateLabelString(this.cdTimeLabel,[i.timeUtil.secondFormat(this.cdTime)]),this.btnIsGay=!0):(this.cdTimeLabel.node.active&&(this.cdTimeLabel.node.active=!1),this.btnIsGay&&this.btnNodeSprite.setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite")),this.btnIsGay=!1)},onClickJoin:function(){var e=this;0<this.cdTime||i.player.allianceModule.serverPlayerJoinAlliance(function(){e.closePage(),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_ALLIANCE)},function(){})},update:function(e){this.updateTime+=e,this.updateTime<1||(this.updateTime=0,--this.cdTime,this.updateInfo())}}),cc._RF.pop()},{}],AllianceModule:[function(e,t){"use strict";cc._RF.push(t,"fa6acxSH4JA6ps6giy24bms","AllianceModule");var i=e("Aft");cc.Class({extends:i.BaseHandler,init:function(e){this.player=e;var t=i.StorageUtil.getData(i.constant.SAVE_ALLIANCE_DATA);t||(this.player.saveGameData(i.constant.SAVE_ALLIANCE_DATA,e={joinAllianceCount:0,rewardRedPackCount:0}),t=JSON.stringify(e)),i.Logger.debug("init allianceData : "+t),this.player._gameData.allianceData=JSON.parse(t)},loadData:function(){this.allianceController=null,this.allianceState=i.constant.ALLIANCE_STATE_NONE,this.player._gameData.allianceData.hasOwnProperty("joinAllianceCount")||(this.player._gameData.allianceData.joinAllianceCount=0),this.player._gameData.allianceData.hasOwnProperty("rewardRedPackCount")||(this.player._gameData.allianceData.rewardRedPackCount=0)},restoreData:function(e){e&&e.allianceData&&(i.StorageUtil.save(i.constant.SAVE_ALLIANCE_DATA,e.allianceData,!0),i.Logger.debug("restoreData data  allianceData :",JSON.stringify(e.allianceData)))},saveAllianceData:function(e){this.player.saveGameData(i.constant.SAVE_ALLIANCE_DATA,this.player._gameData.allianceData,e)},getAllianceData:function(){return this.player._gameData.allianceData},resetServerAllianceData:function(){this.setServerBaseDataStatus(!1),this.setServerRedDataStatus(!1),this.setServerMemberDataStatus(!1),this.setServerRankDataStatus(!1)},setServerBaseDataStatus:function(e){this.isHaveServerBaseData=e},checkHaveServerBaseData:function(){return this.isHaveServerBaseData},setServerRedDataStatus:function(e){this.isHaveServerRedData=e},checkHaveServerRedData:function(){return this.isHaveServerRedData},setServerMemberDataStatus:function(e){this.isHaveServerMemberData=e},checkHaveServerMemberData:function(){return this.isHaveServerMemberData},setServerRankDataStatus:function(e){this.isHaveServerRankData=e},checkHaveServerRankData:function(){return this.isHaveServerRankData},setServerAllianceBaseInfoData:function(e){this.setServerBaseDataStatus(!0),this.serverBaseInfoData=e,i.eventBus.dispatchEvent(i.GameEventType.UPDATE_ALLIANCE_RED),i.Logger.debug("setServerAllianceInfoData success - ",JSON.stringify(e))},setServerAllianceReceiveRedList:function(e){this.setServerRedDataStatus(!0),this.serverRedData=e},getServerAllianceReceiveRedList:function(e){return e+="",this.serverRedData&&this.serverRedData.hasOwnProperty(e)?this.serverRedData[e]:[]},setServerAllianceMemberData:function(e){this.setServerMemberDataStatus(!0),this.serverMemberData=e},getServerAllianceMemberData:function(){return this.serverMemberData&&this.serverMemberData.list?this.serverMemberData.list:[]},setServerAllianceRankData:function(e){this.setServerRankDataStatus(!0),this.serverRankData=e},getServerAllianceRankData:function(){return this.serverRankData&&this.serverRankData.list?this.serverRankData.list:[]},getServerAllianceBaseInfoData:function(e,t){var a=this;e&&i.gameScene.showLoadingCycle(),i.player.serviceModule.getPlayerAlliance(function(t){return t.hasOwnProperty("errorCode")?i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,i.player.allianceModule.getServerErrorText(t.errorCode)):(a.setServerAllianceBaseInfoData(t),e&&e()),void i.gameScene.hideLoadingCycle()},function(e){i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,i.player.allianceModule.getServerErrorText(e,!0)),t&&t(e),i.gameScene.hideLoadingCycle()})},serverPlayerJoinAlliance:function(e,t){var a=this;i.gameScene.showLoadingCycle(),i.player.serviceModule.joinPlayerAlliance(function(t){return t.hasOwnProperty("errorCode")?i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,i.player.allianceModule.getServerErrorText(t.errorCode)):(a.setServerAllianceBaseInfoData(t),a.getAllianceData().joinAllianceCount+=1,a.saveAllianceData(),i.BI.onEvent(i.biConstant.EVENT_TYPE_COUNT,i.biConstant.EVENT_ID_COUNT_JOIN_ALLIANCE,a.getAllianceData().joinAllianceCount),e&&e()),void i.gameScene.hideLoadingCycle()},function(e){i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,i.player.allianceModule.getServerErrorText(e,!0)),t&&t(e),i.gameScene.hideLoadingCycle()})},serverAddAllianceCp:function(e,t,a){var n=this;i.gameScene.showLoadingCycle();var o=i.templateManager.getGameParamValue("adHelp");"share"==e&&(o=i.templateManager.getGameParamValue("shareHelp")),e===i.constant.ALLIANCE_CP_TYPE_SHARE?(i.player.commonModule.addTodayAllianceShareCount(),i.player.taskModule.onNewYearTaskEvent(i.constant.NEW_YEAR_TASK_TYPE_GROUP_SHARE,1)):(i.player.commonModule.addTodayAllianceAdCount(),i.player.taskModule.onNewYearTaskEvent(i.constant.NEW_YEAR_TASK_TYPE_GROUP_HELP,1)),i.player.serviceModule.addAllianceCp(e,o[0],o[1],function(a){return a.hasOwnProperty("errorCode")?i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,i.player.allianceModule.getServerErrorText(a.errorCode)):(n.setServerAllianceBaseInfoData(a),e===i.constant.ALLIANCE_CP_TYPE_SHARE?i.BI.onEvent(i.biConstant.EVENT_TYPE_COUNT,i.biConstant.EVENT_ID_COUNT_ALLIANCE_SHARE,n.getSelfHelpShareTimes()):i.BI.onEvent(i.biConstant.EVENT_TYPE_COUNT,i.biConstant.EVENT_ID_COUNT_ALLIANCE_AD,n.getSelfHelpAdTimes()),t&&t()),void i.gameScene.hideLoadingCycle()},function(e){i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,i.player.allianceModule.getServerErrorText(e,!0)),a&&a(e),i.gameScene.hideLoadingCycle()})},serverReceiveAllianceRed:function(e,t,a,n){var o=this;i.gameScene.showLoadingCycle(),i.player.serviceModule.receiveAllianceRed(e,t,function(e){return e.hasOwnProperty("errorCode")?i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,i.player.allianceModule.getServerErrorText(e.errorCode)):(o.setServerAllianceBaseInfoData(e),o.setServerRedDataStatus(!1),o.getAllianceData().rewardRedPackCount+=1,o.saveAllianceData(),i.BI.onEvent(i.biConstant.EVENT_TYPE_COUNT,i.biConstant.EVENT_ID_COUNT_ALLIANCE_OPEN_RED,o.getAllianceData().rewardRedPackCount),i.eventBus.dispatchEvent(i.GameEventType.REFRESH_ALLIANCE_INFO_PAGE),a&&a()),void i.gameScene.hideLoadingCycle()},function(e){i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,i.player.allianceModule.getServerErrorText(e,!0)),n&&n(e),i.gameScene.hideLoadingCycle()})},serverReceiveAllianceRedRatio:function(e,t,a,n,o){var s=this;i.gameScene.showLoadingCycle(),i.player.serviceModule.receiveAllianceRedRatio(e,t,a,function(e){return e.hasOwnProperty("errorCode")?i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,i.player.allianceModule.getServerErrorText(e.errorCode)):(s.setServerAllianceBaseInfoData(e),s.setServerRedDataStatus(!1),i.BI.onEvent(i.biConstant.EVENT_TYPE_COUNT,i.biConstant.EVENT_ID_COUNT_ALLIANCE_OPEN_RED,s.getAllianceData().rewardRedPackCount),i.eventBus.dispatchEvent(i.GameEventType.REFRESH_ALLIANCE_INFO_PAGE),n&&n()),void i.gameScene.hideLoadingCycle()},function(e){i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,i.player.allianceModule.getServerErrorText(e,!0)),o&&o(e),i.gameScene.hideLoadingCycle()})},serverGetAllianceReceiveRedList:function(e,t,a){var n=this;this.checkHaveServerRedData()?t&&t():(i.gameScene.showLoadingCycle(),i.player.serviceModule.getAllianceReceiveRedList(e,function(e){return e.hasOwnProperty("errorCode")?i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,i.player.allianceModule.getServerErrorText(e.errorCode)):(n.setServerAllianceReceiveRedList(e),t&&t()),void i.gameScene.hideLoadingCycle()},function(e){i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,i.player.allianceModule.getServerErrorText(e,!0)),a&&a(e),i.gameScene.hideLoadingCycle()}))},serverExitAlliance:function(e,t){i.gameScene.showLoadingCycle(),i.player.serviceModule.exitAlliance(function(t){return t.hasOwnProperty("errorCode")?i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,i.player.allianceModule.getServerErrorText(t.errorCode)):e&&e(),void i.gameScene.hideLoadingCycle()},function(e){i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,i.player.allianceModule.getServerErrorText(e,!0)),t&&t(e),i.gameScene.hideLoadingCycle()})},serverKickOutAlliance:function(e,t,a){var n=this;i.gameScene.showLoadingCycle(),i.player.serviceModule.kickOutAlliance(e,function(e){return e.hasOwnProperty("errorCode")?i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,i.player.allianceModule.getServerErrorText(e.errorCode)):(n.setServerAllianceMemberData(e),t&&t()),void i.gameScene.hideLoadingCycle()},function(e){i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,i.player.allianceModule.getServerErrorText(e,!0)),a&&a(e),i.gameScene.hideLoadingCycle()})},serverGetAllianceAllMember:function(e,t){var a=this;this.checkHaveServerMemberData()?e&&e():(i.gameScene.showLoadingCycle(),i.player.serviceModule.getAllianceAllMember(function(t){return t.hasOwnProperty("errorCode")?i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,i.player.allianceModule.getServerErrorText(t.errorCode)):(a.setServerAllianceMemberData(t),e&&e()),void i.gameScene.hideLoadingCycle()},function(e){i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,i.player.allianceModule.getServerErrorText(e,!0)),t&&t(e),i.gameScene.hideLoadingCycle()}))},serverGetAllianceRank:function(e,t){var a=this;this.checkHaveServerRankData()?e&&e():(i.gameScene.showLoadingCycle(),i.player.serviceModule.getAllianceRank(function(t){return t.hasOwnProperty("errorCode")?i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,i.player.allianceModule.getServerErrorText(t.errorCode)):(a.setServerAllianceRankData(t),e&&e()),void i.gameScene.hideLoadingCycle()},function(e){i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,i.player.allianceModule.getServerErrorText(e,!0)),t&&t(e),i.gameScene.hideLoadingCycle()}))},serverClearDataExitAlliance:function(e,t){i.player.serviceModule.clearDataExitAlliance(function(t){return t.hasOwnProperty("errorCode")?i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,i.player.allianceModule.getServerErrorText(t.errorCode)):e&&e(),void i.gameScene.hideLoadingCycle()},function(e){i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,i.player.allianceModule.getServerErrorText(e,!0)),t&&t(e),i.gameScene.hideLoadingCycle()})},getServerDataValue:function(e){return this.checkHaveServerBaseData()&&this.serverBaseInfoData&&this.serverBaseInfoData.hasOwnProperty(e)?this.serverBaseInfoData[e]:null},getAllianceCdTime:function(){var e=this.getServerDataValue("cdTime"),t=0;try{t=parseInt(e)}catch(e){}return t},getAllianceId:function(){return this.getServerDataValue("id")},getAllianceName:function(){return this.getServerDataValue("tName")},getAllianceIcon:function(){return this.getServerDataValue("tIcon")},getAllianceCp:function(){return this.getServerDataValue("tCp")},getAllianceMembers:function(){return this.getServerDataValue("tMembers")},getAllianceHelpPeoples:function(){return this.getServerDataValue("tHelpPeoples")},getAllianceHelpProgress:function(){return this.getServerDataValue("tHelpProgress")},getSelfHelpAdTimes:function(){return this.getServerDataValue("pAd")},getSelfHelpShareTimes:function(){return this.getServerDataValue("pShare")},getReceiveRed:function(){return this.getServerDataValue("receiveRed")},getReceiveRedRatioTimes:function(){return this.getServerDataValue("redRatioTimes")},checkCanAddAd:function(){var e=i.templateManager.getGameParamValue("adHelp");return this.getSelfHelpAdTimes()<e[2]},checkCanAddShare:function(){var e=i.templateManager.getGameParamValue("shareHelp");return this.getSelfHelpShareTimes()<e[2]},checkAlreadyReceiveRed:function(e){return 0<=this.getReceiveRed().indexOf(e)},checkArriveReceiveCp:function(){return this.getSelfCp()>=i.templateManager.getGameParamValue("guildMinContribution")},checkArriveReceiveProgress:function(e){return e=this.getAllianceCfg().redPacketList[e],this.getAllianceHelpProgress()>=e[0]},checkCanReceiveRed:function(e){return!this.checkAlreadyReceiveRed(e)&&this.checkArriveReceiveCp(e)&&this.checkArriveReceiveProgress(e)},getSelfCp:function(){var e=i.templateManager.getGameParamValue("adHelp"),t=i.templateManager.getGameParamValue("shareHelp"),a=0;this.getSelfHelpAdTimes()&&(a=parseInt(this.getSelfHelpAdTimes()));var n=0;return this.getSelfHelpShareTimes()&&(n=parseInt(this.getSelfHelpShareTimes())),a*e[0]+n*t[0]},getSelfHelpProgress:function(){var e=i.templateManager.getGameParamValue("adHelp"),t=i.templateManager.getGameParamValue("shareHelp"),a=0;this.getSelfHelpAdTimes()&&(a=parseInt(this.getSelfHelpAdTimes()));var n=0;return this.getSelfHelpShareTimes()&&(n=parseInt(this.getSelfHelpShareTimes())),a*e[1]+n*t[1]},getAllianceLevelList:function(){var e=0;return this.getAllianceCp()&&(e=parseInt(this.getAllianceCp())),this.getAllianceLevelListByCp(e)},getAllianceLevelListByCp:function(e){var t=1,a=0,n=i.JsonData.Guild;if(!e)return[1,0,n[0].upgradeContribution,!1];for(var o=0;o<n.length&&!(e<(a=n[o].upgradeContribution))&&(e-=a,t!=n.length);o++)t+=1;return[t,e,a,t>=n.length]},getAllianceCfg:function(){var e=this.getAllianceLevelList();return i.templateManager.getGuildData(e[0])||i.JsonData.Guild[0]},isHaveAllianceRed:function(){if(!this.checkAllianceControllerIsOpen())return!1;if(!this.checkHaveServerBaseData())return!1;if(null==this.getAllianceId())return!0;for(var e=!1,t=i.JsonData.Guild[0],a=0;a<t.redPacketList.length;a++)if(this.checkCanReceiveRed(a)){e=!0;break}return e},getServerErrorText:function(e,t){var a=null;return e==i.constant.ALLIANCE_SERVER_ERROR_CODE_10000?a=i.GameTextCode.GUILD_ERROR_1:e==i.constant.ALLIANCE_SERVER_ERROR_CODE_10001?a=i.GameTextCode.GUILD_ERROR_2:e==i.constant.ALLIANCE_SERVER_ERROR_CODE_10002?a=i.GameTextCode.GUILD_ERROR_3:e==i.constant.ALLIANCE_SERVER_ERROR_CODE_10003?a=i.GameTextCode.GUILD_ERROR_4:e==i.constant.ALLIANCE_SERVER_ERROR_CODE_10004?a=i.GameTextCode.GUILD_ERROR_5:e==i.constant.ALLIANCE_SERVER_ERROR_CODE_10005?a=i.GameTextCode.GUILD_ERROR_6:e==i.constant.ALLIANCE_SERVER_ERROR_CODE_10006?a=i.GameTextCode.GUILD_ERROR_7:e==i.constant.ALLIANCE_SERVER_ERROR_CODE_10007?a=i.GameTextCode.GUILD_ERROR_8:e==i.constant.ALLIANCE_SERVER_ERROR_CODE_10008?a=i.GameTextCode.GUILD_ERROR_9:e==i.constant.ALLIANCE_SERVER_ERROR_CODE_10009?a=i.GameTextCode.GUILD_ERROR_10:e==i.constant.ALLIANCE_SERVER_ERROR_CODE_10010?a=i.GameTextCode.GUILD_ERROR_11:e==i.constant.ALLIANCE_SERVER_ERROR_CODE_10011?a=i.GameTextCode.GUILD_ERROR_12:e==i.constant.ALLIANCE_SERVER_ERROR_CODE_10012?a=i.GameTextCode.GUILD_ERROR_13:e==i.constant.ALLIANCE_SERVER_ERROR_CODE_10013?a=i.GameTextCode.GUILD_ERROR_14:e==i.constant.ALLIANCE_SERVER_ERROR_CODE_10014?a=i.GameTextCode.GUILD_ERROR_15:e==i.constant.ALLIANCE_SERVER_ERROR_CODE_10015?a=i.GameTextCode.GUILD_ERROR_16:e==i.constant.ALLIANCE_SERVER_ERROR_CODE_10016?a=i.GameTextCode.GUILD_ERROR_17:e==i.constant.ALLIANCE_SERVER_ERROR_CODE_10017&&(a=i.GameTextCode.GUILD_ERROR_18),t&&(e=i.lang.getGameText(i.GameTextCode.GUILD_ERROR_0)),a?i.lang.getGameText(a):e},setAllianceController:function(e,t){try{e?(this.allianceController=JSON.parse(e),0<=this.allianceController.indexOf(i.config.packageId)?this.allianceState=i.constant.ALLIANCE_STATE_OPEN:this.allianceState=i.constant.ALLIANCE_STATE_CLOSE,i.eventBus.dispatchEvent(i.GameEventType.UPDATE_ALLIANCE_BTN),t&&this.allianceState===i.constant.ALLIANCE_STATE_OPEN&&this.getServerAllianceBaseInfoData()):this.allianceState=i.constant.ALLIANCE_STATE_NONE}catch(e){this.allianceState=i.constant.ALLIANCE_STATE_CLOSE,i.eventBus.dispatchEvent(i.GameEventType.UPDATE_ALLIANCE_BTN)}i.player.taskModule.resetNewYearTaskStage()},checkAllianceControllerIsOpen:function(){return this.allianceState===i.constant.ALLIANCE_STATE_OPEN},getAllianceControllerState:function(){return this.allianceState},getJoinAllianceCount:function(){return this.getAllianceData().joinAllianceCount}}),cc._RF.pop()},{}],AlliancePageMemberItemRender:[function(e,t){"use strict";cc._RF.push(t,"4ceacHQZeVJ+rSdRrHnqR1y","AlliancePageMemberItemRender"),cc.Class({extends:cc.Component,properties:{iconAtlas:{type:cc.SpriteAtlas,default:null}},onLoad:function(){this.bgNode=cc.find("bg",this.node),this.bg1Node=cc.find("bg_own",this.node),this.iconSprite=cc.find("head/icon",this.node).getComponent(cc.Sprite),this.wxIconSprite=cc.find("head/wxIcon",this.node).getComponent(cc.Sprite),this.iconBgNode=cc.find("head/bg",this.node),this.nameLabel=cc.find("nameLayout/name",this.node).getComponent(cc.Label),this.leaderNode=cc.find("nameLayout/captain",this.node),this.cpTotalLabel=cc.find("totalDevote",this.node).getComponent(cc.Label),this.cpYesterDayLabel=cc.find("yesterdayDevote",this.node).getComponent(cc.Label),this.outBtnNode=cc.find("kickOutButton",this.node),this.outBtnNode.active=!1},setData:function(e){var t=this;this._data=e,this.bgNode.active=aft.player.playerModule.getPlayerId()!=this._data.account,this.bg1Node.active=aft.player.playerModule.getPlayerId()==this._data.account;var i,a,n=aft.templateManager.getHeroDataById(e.icon);this.iconSprite.node.active=!1,this.wxIconSprite.node.active=!1,n?(this.iconSprite.node.active=!0,i=this.iconAtlas.getSpriteFrame(n.heroHead),a=this.iconBgNode.height,n=i.getOriginalSize().height,this.iconSprite.spriteFrame=i,this.iconSprite.node.y=n<=a?-2:(n-a)/2-3):cc.loader.load({url:e.icon,type:"png"},function(i,a){i&&console.error(i),a.url&&e.icon==a.url&&(t.wxIconSprite.node.active=!0,t.wxIconSprite.spriteFrame=new cc.SpriteFrame(a))}),this.nameLabel.string=aft.Utils.getNameLimitLength(e.name,20),this.leaderNode.active=e.isLeader,this.outBtnNode.active=e.canOut,aft.lang.updateLabelString(this.cpTotalLabel,[aft.Utils.formatBigNumberForLabel(e.cp)]),aft.lang.updateLabelString(this.cpYesterDayLabel,[aft.Utils.formatBigNumberForLabel(e.yesterdayCp)])},onClickOut:function(){aft.gameScene.showPage(aft.pageConstant.PAGE_TYPE_ALLIANCE_EXIT,{type:aft.constant.ALLIANCE_EXIT_TYPE_OTHER,otherAccount:this._data.account,name:this._data.name})}}),cc._RF.pop()},{}],AlliancePageMember:[function(e,t){"use strict";cc._RF.push(t,"f6a6dVyBMxCdKvEvqqwHs/c","AlliancePageMember"),cc.Class({extends:aft.BaseScrollView,properties:{},onLoad:function(){this.memberNumberLabel=cc.find("title/memberLabel",this.node).getComponent(cc.Label)},initData:function(){this.memberNumberLabel.node.active=!1,this.getServerData()},getServerData:function(){var e=this;aft.player.allianceModule.serverGetAllianceAllMember(function(){e.memberList=aft.player.allianceModule.getServerAllianceMemberData(),e.initMemberData()},function(){})},initMemberData:function(){this.memberNumberLabel.node.active=!0,aft.lang.updateLabelString(this.memberNumberLabel,[this.memberList.length,aft.templateManager.getGameParamValue("guildMemberNum")]),this.init(this.memberList,"AlliancePageMemberItemRender"),this.showView()},clearMemberView:function(){this.clearView()},onClickExit:function(){aft.gameScene.showPage(aft.pageConstant.PAGE_TYPE_ALLIANCE_EXIT,{type:aft.constant.ALLIANCE_EXIT_TYPE_SELF})},beforeUpdate:function(){}}),cc._RF.pop()},{}],AlliancePageRankItemRender:[function(e,t){"use strict";cc._RF.push(t,"9be16qSF6BKwKhwwrtn6wco","AlliancePageRankItemRender"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.rankIconNode=cc.find("rankIcon",this.node),this.rankIcon1Node=cc.find("icon1",this.rankIconNode),this.rankIcon2Node=cc.find("icon2",this.rankIconNode),this.rankIcon3Node=cc.find("icon3",this.rankIconNode),this.rankLabel=cc.find("rankLabel",this.node).getComponent(cc.Label),this.allianceIconSprite=cc.find("badge/icon",this.node).getComponent(cc.Sprite),this.levelLabel=cc.find("badge/level/number",this.node).getComponent(cc.Label),this.allianceNameLabel=cc.find("armyGroupname",this.node).getComponent(cc.Label),this.leaderLabel=cc.find("captain",this.node).getComponent(cc.Label),this.memberLabel=cc.find("member",this.node).getComponent(cc.Label),this.cpLabel=cc.find("devoteNumber/number",this.node).getComponent(cc.Label)},setData:function(e){this.rankIconNode.active=!1,this.rankLabel.node.active=!1,this.rankIcon1Node.active=!1,this.rankIcon2Node.active=!1,this.rankIcon3Node.active=!1,1==e.rank?(this.rankIconNode.active=!0,this.rankIcon1Node.active=!0):2==e.rank?(this.rankIconNode.active=!0,this.rankIcon2Node.active=!0):3==e.rank?(this.rankIconNode.active=!0,this.rankIcon3Node.active=!0):(this.rankLabel.node.active=!0,this.rankLabel.string=e.rank);var t=aft.templateManager.getGameParamValue("guildFlagList"),i=t[0];e.icon&&e.icon<t.length&&(i=t[e.icon]),this.allianceIconSprite.spriteFrame=this.host.iconAtlas.getSpriteFrame(i),this.levelLabel.string=aft.player.allianceModule.getAllianceLevelListByCp(e.score)[0],this.allianceNameLabel.string=e.name,i=e.leader?e.leaderName:aft.lang.getGameText(aft.GameTextCode.LEADER_VACANCY),aft.lang.updateLabelString(this.leaderLabel,[aft.Utils.getNameLimitLength(i)]),aft.lang.updateLabelString(this.memberLabel,[e.number,aft.templateManager.getGameParamValue("guildMemberNum")]),this.cpLabel.string=aft.Utils.formatBigNumberForLabel(e.score)}}),cc._RF.pop()},{}],AlliancePageRank:[function(e,t){"use strict";cc._RF.push(t,"e02c28vfa9C8badBqGVkotL","AlliancePageRank"),cc.Class({extends:aft.BaseScrollView,properties:{iconAtlas:{type:cc.SpriteAtlas,default:null}},onLoad:function(){this.selfRankNode=cc.find("self",this.node),this.selfIconSprite=cc.find("badge/icon",this.selfRankNode).getComponent(cc.Sprite),this.selfLevelLabel=cc.find("badge/level/number",this.selfRankNode).getComponent(cc.Label),this.selfRankLabel=cc.find("rank",this.selfRankNode).getComponent(cc.Label),this.selfCpLabel=cc.find("devote",this.selfRankNode).getComponent(cc.Label)},initData:function(){this.selfRankNode.active=!1,this.getServerData()},getServerData:function(){var e=this;aft.player.allianceModule.serverGetAllianceRank(function(){e.rankList=aft.player.allianceModule.getServerAllianceRankData(),e.initRankData()},function(){})},initRankData:function(){if(0!=this.rankList.length){for(var e=[],t=0;t<this.rankList.length;t++)e.push(this.rankList[t]);var i=e[0];e.splice(0,1),this.selfRankNode.active=!0;var a=aft.templateManager.getGameParamValue("guildFlagList"),n=a[0];i.icon&&i.icon<a.length&&(n=a[i.icon]),this.selfIconSprite.spriteFrame=this.iconAtlas.getSpriteFrame(n),this.selfLevelLabel.string=aft.player.allianceModule.getAllianceLevelListByCp(i.score)[0],aft.lang.updateLabelString(this.selfRankLabel,[i.rank]),aft.lang.updateLabelString(this.selfCpLabel,[aft.Utils.formatBigNumberForLabel(i.score)]),this.init(e,"AlliancePageRankItemRender"),this.showView()}},clearRankView:function(){this.clearView()},beforeUpdate:function(){}}),cc._RF.pop()},{}],AlliancePage:[function(e,t){"use strict";cc._RF.push(t,"6d19cMn+jhIDKrUI7mjkx0h","AlliancePage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{iconAtlas:{type:cc.SpriteAtlas,default:null}},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.SHOW_AD_OVER_ALLIANCE_AD,function(){return e.onShowAdOver(i.constant.ALLIANCE_CP_TYPE_AD)}),this.registerListener(i.GameEventType.SHOW_SHARE_ALLIANCE_SHARE,function(){return e.onShowAdOver(i.constant.ALLIANCE_CP_TYPE_SHARE)}),this.registerListener(i.GameEventType.REFRESH_ALLIANCE_INFO_PAGE,function(){return e.initData()}),this.registerListener(i.GameEventType.REFRESH_ALLIANCE_MEMBER,function(){e.pageTabType==e.pageTabTypeConstant.MEMBER&&e.memberNodeObj&&(e.memberNodeObj.clearMemberView(),e.memberNodeObj.initData())})},onLoadPage:function(){this.contentNode=cc.find("content",this.node),this.tabNode=cc.find("tab",this.contentNode),this.tabInfoBtnNode=cc.find("infoButton",this.tabNode),this.tabInfoBtnChooseNode=cc.find("Background/choose",this.tabInfoBtnNode),this.tabInfoBtnLabelNode=cc.find("Background/label",this.tabInfoBtnNode),this.tabMemberBtnNode=cc.find("memberButton",this.tabNode),this.tabMemberBtnChooseNode=cc.find("Background/choose",this.tabMemberBtnNode),this.tabMemberBtnLabelNode=cc.find("Background/label",this.tabMemberBtnNode),this.tabRankBtnNode=cc.find("rankButton",this.tabNode),this.tabRankBtnChooseNode=cc.find("Background/choose",this.tabRankBtnNode),this.tabRankBtnLabelNode=cc.find("Background/label",this.tabRankBtnNode),this.infoNode=cc.find("info",this.contentNode),this.infoHelpNumberLabel=cc.find("helpProgress",this.infoNode).getComponent(cc.Label),this.infoHelpPeopleLabel=cc.find("helpPeople",this.infoNode).getComponent(cc.Label),this.infoNameLabel=cc.find("information/name",this.infoNode).getComponent(cc.Label),this.infoLevelLabel=cc.find("information/level/levelLabel",this.infoNode).getComponent(cc.Label),this.infoLevelProgress=cc.find("information/level/progressBar",this.infoNode).getComponent(cc.ProgressBar),this.infoLevelProgressLabel=cc.find("information/level/progressBar/number",this.infoNode).getComponent(cc.Label),this.infoLevelMaxNode=cc.find("information/level/progressBar/maxLevel",this.infoNode),this.infoMemberLabel=cc.find("information/memberLabel",this.infoNode).getComponent(cc.Label),this.infoIconSprite=cc.find("information/bagde",this.infoNode).getComponent(cc.Sprite),this.infoShareNode=cc.find("shareHelp",this.infoNode),this.infoShareCpLabel=cc.find("devote",this.infoShareNode).getComponent(cc.Label),this.infoShareProgressLabel=cc.find("helpProgress",this.infoShareNode).getComponent(cc.Label),this.infoShareTimesLabel=cc.find("helpTimes",this.infoShareNode).getComponent(cc.Label),this.infoShareBtnSprite=cc.find("shareButton/Background",this.infoShareNode).getComponent(cc.Sprite),this.infoShareBtnIconSprite=cc.find("shareButton/Background/layout/share",this.infoShareNode).getComponent(cc.Sprite),this.infoAdNode=cc.find("adHelp",this.infoNode),this.infoAdCpLabel=cc.find("devote",this.infoAdNode).getComponent(cc.Label),this.infoAdProgressLabel=cc.find("helpProgress",this.infoAdNode).getComponent(cc.Label),this.infoAdTimesLabel=cc.find("helpTimes",this.infoAdNode).getComponent(cc.Label),this.infoAdBtnSprite=cc.find("adButton/Background",this.infoAdNode).getComponent(cc.Sprite),this.infoAdBtnIconSprite=cc.find("adButton/Background/layout/ad",this.infoAdNode).getComponent(cc.Sprite),this.infoProgressNode=cc.find("progress",this.infoNode),this.infoProgressBar=cc.find("progressBar",this.infoProgressNode).getComponent(cc.ProgressBar),this.infoProgressRedNodeList=[],this.infoProgressRedNodeList.push(cc.find("redpack1",this.infoProgressNode)),this.infoProgressRedNodeList.push(cc.find("redpack2",this.infoProgressNode)),this.infoProgressRedNodeList.push(cc.find("redpack3",this.infoProgressNode)),this.infoTipsNode=cc.find("ruleLayout",this.infoNode),this.infoTipsNode.active=!1,this.memberNode=cc.find("member",this.contentNode),this.memberNodeObj=this.memberNode.getComponent("AlliancePageMember"),this.rankNode=cc.find("rank",this.contentNode),this.rankNodeObj=this.rankNode.getComponent("AlliancePageRank"),this.pageTabTypeConstant={INFO:1,MEMBER:2,RANK:3},this.node.on("touchstart",this.hideTips,this)},showPageBegan:function(){this.hideTips(),this.pageTabType=this.pageTabTypeConstant.INFO,this.initData(),i.player.taskModule.checkAllianceTaskTip()},showPageEnded:function(){},initData:function(){this.updateTabInfo(),this.pageTabType==this.pageTabTypeConstant.INFO?this.updateInfoNode():this.pageTabType==this.pageTabTypeConstant.MEMBER?this.updateMemberNode():this.pageTabType==this.pageTabTypeConstant.RANK&&this.updateRanNode()},updateTabInfo:function(){this.tabInfoBtnChooseNode.active=this.pageTabType==this.pageTabTypeConstant.INFO,this.tabMemberBtnChooseNode.active=this.pageTabType==this.pageTabTypeConstant.MEMBER,this.tabRankBtnChooseNode.active=this.pageTabType==this.pageTabTypeConstant.RANK,this.tabInfoBtnLabelNode.color=cc.color(this.pageTabType==this.pageTabTypeConstant.INFO?"#480600":"#F1D182"),this.tabMemberBtnLabelNode.color=cc.color(this.pageTabType==this.pageTabTypeConstant.MEMBER?"#480600":"#F1D182"),this.tabRankBtnLabelNode.color=cc.color(this.pageTabType==this.pageTabTypeConstant.RANK?"#480600":"#F1D182")},updateInfoNode:function(){this.infoNode.active=!0,this.memberNode.active=!1,this.rankNode.active=!1;var e=i.templateManager.getGameParamValue("guildFlagList"),t=e[0];(a=i.player.allianceModule.getAllianceIcon())&&a<e.length&&(t=e[a]),this.infoIconSprite.spriteFrame=this.iconAtlas.getSpriteFrame(t),i.lang.updateLabelString(this.infoHelpNumberLabel,[i.player.allianceModule.getAllianceHelpProgress()]),i.lang.updateLabelString(this.infoHelpPeopleLabel,[i.player.allianceModule.getAllianceHelpPeoples()]),this.infoNameLabel.string=i.player.allianceModule.getAllianceName(),i.lang.updateLabelString(this.infoMemberLabel,[i.player.allianceModule.getAllianceMembers(),i.templateManager.getGameParamValue("guildMemberNum")]),a=i.player.allianceModule.getAllianceLevelList(),i.lang.updateLabelString(this.infoLevelLabel,[a[0]]),this.infoLevelProgress.progress=1==a[3]?1:a[1]/a[2],this.infoLevelMaxNode.active=1==a[3],this.infoLevelProgressLabel.node.active=0==a[3],i.lang.updateLabelString(this.infoLevelProgressLabel,[i.Utils.formatBigNumberForLabel(a[1]),i.Utils.formatBigNumberForLabel(a[2])]),t=i.templateManager.getGameParamValue("shareHelp"),i.lang.updateLabelString(this.infoShareCpLabel,[t[0]]),i.lang.updateLabelString(this.infoShareProgressLabel,[t[1]]),i.lang.updateLabelString(this.infoShareTimesLabel,[i.player.allianceModule.getSelfHelpShareTimes(),t[2]]),a=i.player.allianceModule.checkCanAddShare()?"2d-sprite":"2d-gray-sprite",this.infoShareBtnSprite.setMaterial(0,cc.Material.getBuiltinMaterial(a)),this.infoShareBtnIconSprite.setMaterial(0,cc.Material.getBuiltinMaterial(a)),t=i.templateManager.getGameParamValue("adHelp"),i.lang.updateLabelString(this.infoAdCpLabel,[t[0]]),i.lang.updateLabelString(this.infoAdProgressLabel,[t[1]]),i.lang.updateLabelString(this.infoAdTimesLabel,[i.player.allianceModule.getSelfHelpAdTimes(),t[2]]),a=i.player.allianceModule.checkCanAddAd()?"2d-sprite":"2d-gray-sprite",this.infoAdBtnSprite.setMaterial(0,cc.Material.getBuiltinMaterial(a)),this.infoAdBtnIconSprite.setMaterial(0,cc.Material.getBuiltinMaterial(a)),t=i.player.allianceModule.getAllianceHelpProgress(),this.allianceCfg=i.player.allianceModule.getAllianceCfg();var a,n=this.allianceCfg.redPacketList;t=(a=n[n.length-1][0])<t?a:t,this.infoProgressBar.progress=t/a;for(var o=i.player.allianceModule.getReceiveRed(),s=0;s<this.infoProgressRedNodeList.length;s++){var r=this.infoProgressRedNodeList[s],c=r.getChildByName("label").getComponent(cc.Label),l=r.getChildByName("get");c.string=n[s][0],l.active=0<=o.indexOf(s),r=r.getChildByName("effect_box_light"),!i.player.allianceModule.checkAlreadyReceiveRed(s)&&i.player.allianceModule.checkArriveReceiveProgress(s)?(r.active=!0,r.getComponent(cc.Animation).play("effect_box_light")):r.active=!1}this.memberNodeObj.clearMemberView(),this.rankNodeObj.clearRankView()},updateMemberNode:function(){this.infoNode.active=!1,this.memberNode.active=!0,this.rankNode.active=!1,this.memberNodeObj.initData(),this.rankNodeObj.clearRankView()},updateRanNode:function(){this.infoNode.active=!1,this.memberNode.active=!1,this.rankNode.active=!0,this.rankNodeObj.initData(),this.memberNodeObj.clearMemberView()},onClickInfo:function(){this.hideTips(),this.pageTabType!=this.pageTabTypeConstant.INFO&&(this.pageTabType=this.pageTabTypeConstant.INFO,this.initData())},onClickMember:function(){this.hideTips(),this.pageTabType!=this.pageTabTypeConstant.MEMBER&&(this.pageTabType=this.pageTabTypeConstant.MEMBER,this.initData())},onClickRank:function(){this.hideTips(),this.pageTabType!=this.pageTabTypeConstant.RANK&&(this.pageTabType=this.pageTabTypeConstant.RANK,this.initData())},onClickRed:function(e,t){this.hideTips();var a=0;try{a=parseInt(t)}catch(e){return}i.player.allianceModule.checkAlreadyReceiveRed(a)?i.player.allianceModule.serverGetAllianceReceiveRedList(a,function(){i.gameScene.showPage(i.pageConstant.PAGE_TYPE_ALLIANCE_RED_LOOK,{index:a})},function(){}):i.gameScene.showPage(i.pageConstant.PAGE_TYPE_ALLIANCE_RED,{index:a})},onClickShare:function(){this.hideTips(),i.player.allianceModule.checkCanAddShare()&&i.gameScene.gotoAdShare(i.GameEventType.SHOW_SHARE_ALLIANCE_SHARE)},onClickAd:function(){this.hideTips(),i.player.allianceModule.checkCanAddAd()&&i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,i.GameEventType.SHOW_AD_OVER_ALLIANCE_AD)},onShowAdOver:function(e){var t=this;i.player.allianceModule.serverAddAllianceCp(e,function(){t.initData()},function(){})},onClickTips:function(){this.infoTipsNode.active=!0,this.infoTipsNode.stopAllActions(),this.infoTipsNode.opacity=0,this.infoTipsNode.scale=0;var e=cc.scaleTo(.1,1.1),t=cc.scaleTo(.1,1),i=cc.fadeTo(.2,255);t=cc.sequence(e,t),this.infoTipsNode.runAction(cc.spawn(t,i))},hideTips:function(){this.infoTipsNode.stopAllActions(),this.infoTipsNode.active=!1},closePageEnded:function(){i.player.allianceModule.resetServerAllianceData()},update:function(){}}),cc._RF.pop()},{}],AllianceRedpackLookItemRender:[function(e,t){"use strict";cc._RF.push(t,"b1ab5lCqD9PMK78grqNBMMy","AllianceRedpackLookItemRender"),cc.Class({extends:aft.BaseUI,properties:{},afterLoad:function(){this.nameLabel=cc.find("nameLayout/name",this.node).getComponent(cc.Label),this.selfNode=cc.find("nameLayout/captain",this.node),this.goldLabel=cc.find("rewardLayout/label",this.node).getComponent(cc.Label)},initData:function(e){this._infoData=e,this.nameLabel.string=this._infoData.name,this.goldLabel.string=this._infoData.number,this.selfNode.active=aft.player.playerModule.getPlayerId()==this._infoData.account}}),cc._RF.pop()},{}],AllianceRedpackLookPage:[function(e,t){"use strict";cc._RF.push(t,"7f7d357Ly5M/aCRgO3cJPir","AllianceRedpackLookPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{itemPrefab:{type:cc.Prefab,default:null}},registerGameListener:function(){},onLoadPage:function(){this.contentNode=cc.find("content/ScrollView/view/content",this.node),this.itemIndex=0,this.itemObjList=[]},showPageBegan:function(){this._index=this.data.index,this.allRedList=i.player.allianceModule.getServerAllianceReceiveRedList(this._index),this.hideAllItem(),this.itemIndex=0},showPageEnded:function(){},hideAllItem:function(){for(var e=0;e<this.itemObjList.length;e++)this.itemObjList[e].node.active=!1},update:function(){var e;this.itemIndex<this.allRedList.length&&(this.allRedList[this.itemIndex],this.itemIndex>=this.itemObjList.length&&(e=cc.instantiate(this.itemPrefab),this.contentNode.addChild(e),((e=e.getComponent("AllianceRedpackLookItemRender")).host=this).itemObjList.push(e)),(e=this.itemObjList[this.itemIndex]).node.active=!0,e.initData(this.allRedList[this.itemIndex]),this.itemIndex++)}}),cc._RF.pop()},{}],AllianceRedpackPage:[function(e,t){"use strict";cc._RF.push(t,"ec80cX97KhPQ4qpP8yT3geP","AllianceRedpackPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.SHOW_AD_OVER_ALLIANCE_RED_DOUBLE,function(){return e.onShowAdOver()})},onLoadPage:function(){this.openNode=cc.find("open",this.node),this.openNumberLabel=cc.find("number",this.openNode).getComponent(cc.Label),this.closeNode=cc.find("close",this.node),this.closeTipsLabel=cc.find("tips",this.closeNode).getComponent(cc.Label),this.receiveEffect=cc.find("Effect_Ribbon",this.node).getComponent(cc.ParticleSystem),this.receiveEffect.node.active=!1,this.bottomTipsLabel=cc.find("leftGold/tips",this.closeNode).getComponent(cc.Label),this.rewardLabelNode=cc.find("rewardLabel",this.node),this.adBtnNode=cc.find("open/adButton",this.node),this.muitipleLabel=cc.find("/multiple/label",this.adBtnNode).getComponent(cc.Label),this.adButtonRatioNode=cc.find("multiple",this.adBtnNode),this.adButtonRatioNode.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.8,1.2),cc.scaleTo(.8,1)))),this.closeBtnNode=cc.find("closeButton",this.node)},showPageBegan:function(){this._index=this.data.index,this.adBtnNode.active=!0,this.openNode.active=!1,this.closeNode.active=!0,this.closeNode.getComponent(cc.Animation).play("close"),this.closeBtnNode.active=!0,this.rewardLabelNode.active=!1;var e=i.player.allianceModule.getAllianceCfg();this.redList=e.redPacketList,this.redNum=i.Utils.getRandomInt(this.redList[this._index][1],this.redList[this._index][2]),i.lang.updateLabelString(this.closeTipsLabel,[10*this.redList[this._index][2]]),e=i.templateManager.getGameParamValue("guildMemberNum"),i.lang.updateLabelString(this.bottomTipsLabel,[10*this.redList[this._index][2]*e])},showPageEnded:function(){},openRed:function(){this.openNode.active=!0,this.closeNode.active=!1,this.openNumberLabel.string=this.redNum,this.closeBtnNode.active=!1,this.rewardLabelNode.active=!1;var e=i.JsonData.GuildRewardRatio[0].ratio,t=i.JsonData.GuildRewardRatio[i.JsonData.GuildRewardRatio.length-1].ratio;i.lang.updateLabelString(this.muitipleLabel,[e,t]),e=cc.delayTime(2),t=cc.callFunc(function(){this.rewardLabelNode.active=!0},this),t=cc.sequence(e,t),this.openNode.stopAllActions(),this.openNode.runAction(t)},onClickOpen:function(){var e,t=this;i.player.allianceModule.checkArriveReceiveProgress(this._index)?i.player.allianceModule.checkArriveReceiveCp(this._index)?i.player.allianceModule.serverReceiveAllianceRed(this._index,this.redNum,function(){t.receiveEffect.node.active=!0,t.receiveEffect.resetSystem(),t.openRed(),i.player.itemModule.dropItem(i.constant.COIN_TYPE_GOLD_BULLION,t.redNum,!1,i.constant.ITEM_ADD_SOURCE_ALLIANCE_RED)},function(){}):(e=i.lang.getArgGameText(i.GameTextCode.GUILD_CONTRIBUTION_ENOUGH,[i.templateManager.getGameParamValue("guildRewardContribution")]),i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,e)):(e=i.lang.getGameText(i.GameTextCode.GUILD_PROGRESS_ENOUGH),i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,e))},getRedRatioCfg:function(){for(var e=i.player.allianceModule.getReceiveRedRatioTimes(),t=[],a=0;a<i.JsonData.GuildRewardRatio.length;a++){var n=i.JsonData.GuildRewardRatio[a],o=n.baseWeight,s=n.weightChangeTimes;s=o+n.variableWeight*Math.max(0,e-s),t.push({key:a,value:s})}var r=i.Utils.getRandomKeyByValue(t),c=i.JsonData.GuildRewardRatio[0];return r<i.JsonData.GuildRewardRatio.length?i.JsonData.GuildRewardRatio[r]:c},onClickLook:function(){var e=this;this.adBtnNode.active?i.gameScene.showPage(i.pageConstant.PAGE_TYPE_ALLIANCE_EXIT,{type:i.constant.ALLIANCE_EXIT_TYPE_RED_DOUBLE,index:this._index}):(this.closePage(),i.player.allianceModule.serverGetAllianceReceiveRedList(this._index,function(){i.gameScene.showPage(i.pageConstant.PAGE_TYPE_ALLIANCE_RED_LOOK,{index:e._index})},function(){}))},onClickDouble:function(){i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,i.GameEventType.SHOW_AD_OVER_ALLIANCE_RED_DOUBLE)},onShowAdOver:function(){var e=this,t=this.getRedRatioCfg(),a=0!=t.isReset;i.player.allianceModule.serverReceiveAllianceRedRatio(this._index,t.ratio,a,function(){i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_TASK_LOTTERY,{rewards:[[i.constant.COIN_TYPE_GOLD_BULLION,e.redNum]],ratioCfg:t,itemDataList:i.JsonData.GuildRewardRatio,callBack:function(){i.player.itemModule.dropItem(i.constant.COIN_TYPE_GOLD_BULLION,e.redNum*(t.ratio-1),!1,i.constant.ITEM_ADD_SOURCE_ALLIANCE_RED),e.adBtnNode.active=!1,e.openNumberLabel.string=e.redNum*t.ratio,e.closeBtnNode.active=!0,e.rewardLabelNode.active=!1}})},function(){})},update:function(){}}),cc._RF.pop()},{}],AppointGarrisonHeroItemRender:[function(e,t){"use strict";cc._RF.push(t,"9d146+Qwd1BB7jDYen3Tii3","AppointGarrisonHeroItemRender");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{heroItemPrefab:{type:cc.Prefab,default:null}},afterLoad:function(){this.heroNode=cc.find("hero",this.node),this.expTotalLabel=cc.find("expLayout/label",this.node).getComponent(cc.Label),this.timeLabel=cc.find("time",this.node).getComponent(cc.Label),this.buttonNode=cc.find("button",this.node),this.descLabel=cc.find("desc",this.node).getComponent(cc.Label)},initData:function(e,t){this._chapterId=e,this._heroId=t,this._heroCfg=i.templateManager.getHeroDataById(this._heroId),this._defendId=i.player.heroModule.getHeroDefendInfo(t),this._defendCfg=i.templateManager.getDefendDataById(this._defendId),this._heroLevel=i.player.heroModule.getHeroLevel(this._heroId),i.templateManager.getDefendLevelRewardByLevel(this._heroLevel),this.updateHeroItem(),t=i.player.instanceModule.getLevelAddRatio(this._heroId),i.Logger.debug("AppointGarrisonHeroItemRender addNum : "+t),0==t?this.descLabel.node.active=!1:(this.descLabel.node.active=!0,i.lang.updateLabelString(this.descLabel,[i.lang.getGameText(this._heroCfg.name),Math.floor(100*t)])),i.lang.updateLabelString(this.timeLabel,[this._defendCfg.defendTime]),t=i.player.instanceModule.getRealDefendSecondReward(this._chapterId,this._heroId,this._defendId,this._heroLevel),this.expTotalLabel.string=i.Utils.formatNumberForLabel(Math.floor(60*this._defendCfg.defendTime*t))},updateHeroItem:function(){var e;this.heroItemObj||((e=cc.instantiate(this.heroItemPrefab)).scale=.6,this.heroNode.addChild(e),this.heroItemObj=e.getComponent("MainHeroItemRender")),this.heroItemObj.initData(this,i.constant.HERO_ITEM_TYPE_MAP,this._heroId)},onClickOk:function(){var e,t;i.player.heroModule.isHeroMaxLevel(this._heroId)?(e=i.lang.getGameText(i.GameTextCode.HEROLEVEL_FULL),i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,e)):i.player.heroModule.getTodayCanDefend(this._heroId)?(i.player.instanceModule.setChapterHeroInfo(this._chapterId,this._heroId,this._defendId,this._heroLevel),i.gameScene.closePage(i.pageConstant.PAGE_TYPE_MAP_GARRISON_LIST),i.eventBus.dispatchEvent(i.GameEventType.REFRESH_WORLD_DEFEND_ITEM,this._chapterId),(t=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_WORLD))&&t.updateQuickGarrisonInfo()):(t=i.lang.getGameText(i.GameTextCode.DEFEND_MAX_NUM),i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,t))}}),cc._RF.pop()},{}],AppointGarrisonHeroPopUp:[function(e,t){"use strict";cc._RF.push(t,"52a4c9hbWdDeKIUDLT4O6gp","AppointGarrisonHeroPopUp");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{itemPrefab:{type:cc.Prefab,default:null}},onLoadPage:function(){this.contentNode=cc.find("content/scrollView/view/content",this.node),this.itemIndex=0,this.itemObjList=[]},showPageBegan:function(){this._chapterId=this.data,this.allHeroList=i.player.heroModule.getCanGarrisonHeros(),this.hideAllItem(),this.itemIndex=0,i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_IN_MAP)},showPageEnded:function(){var e=this;this.scheduleOnce(function(){i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_UNLOCK_MAP_1_3)&&i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_UNLOCK_MAP_1_3,e.itemObjList[0].buttonNode)},.2),i.ttAdManager.showBannerAd(cc.find("adNode",this.node),this.getPageType())},closePageBegan:function(){i.ttAdManager.hideBannerAd()},hideAllItem:function(){for(var e=0;e<this.itemObjList.length;e++)this.itemObjList[e].node.active=!1},update:function(){var e,t;this.itemIndex<this.allHeroList.length&&(e=this.allHeroList[this.itemIndex],this.itemIndex>=this.itemObjList.length&&(t=cc.instantiate(this.itemPrefab),this.contentNode.addChild(t),t=t.getComponent("AppointGarrisonHeroItemRender"),this.itemObjList.push(t)),(t=this.itemObjList[this.itemIndex]).node.active=!0,t.initData(this._chapterId,e),this.itemIndex++)}}),cc._RF.pop()},{}],AppointGayFriendItemRender:[function(e,t){"use strict";cc._RF.push(t,"cf7b9ehJyhPAL/w/l+QiKva","AppointGayFriendItemRender"),cc.Class({extends:aft.BaseUI,properties:{gayFriendAtlas:{default:null,type:cc.SpriteAtlas}},afterLoad:function(){this.iconSprite=cc.find("luckyChance/icon",this.node).getComponent(cc.Sprite),this.starLayoutNode=cc.find("luckyChance/starLayout",this.node),this.nameLabel=cc.find("name",this.node).getComponent(cc.Label),this.descLayoutNode=cc.find("descLayout",this.node)},initData:function(e){this._gayFriendId=e,this.gayFriendLevel=aft.player.heroModule.getGayFriendLevel(this._gayFriendId),this.gayFriendLevel=-1===this.gayFriendLevel?0:this.gayFriendLevel,this.gayFriendCfg=aft.templateManager.getHeroRestrainByGroupIdAndLevel(this._gayFriendId,this.gayFriendLevel),this.nextGayFriendCfg=aft.templateManager.getHeroRestrainByGroupIdAndLevel(this._gayFriendId,1),this.iconSprite.spriteFrame=this.gayFriendAtlas.getSpriteFrame((this._gayFriendCfg||this.nextGayFriendCfg).img),this.nameLabel.string=aft.lang.getGameText((this._gayFriendCfg?this.gayFriendCfg:this.nextGayFriendCfg).name),this.updateStarNode(),this.updateDescNode()},updateStarNode:function(){for(var e=this.starLayoutNode.children,t=0;t<e.length;t++)e[t].getChildByName("icon").active=this.gayFriendLevel>t},updateDescNode:function(){for(var e=aft.templateManager.getHeroRestrainListByGroupId(this._gayFriendId),t=this.descLayoutNode.children,i=0;i<e.length;i++){var a=e[i];if(i>=t.length)break;var n=t[i],o=this.gayFriendLevel>i?"#995737":"#8B8B8B";n.color=cc.color(o),o=n.getComponent(cc.Label),n=aft.player.heroModule.getGayFriendSkillDescArgs(a.levelOneSkill),o.string=aft.lang.getFormatString(a.skillDesc,n)}},onClick:function(){aft.player.heroModule.resetFightAdGayFriend(this._gayFriendId),this.host.closePage();var e=aft.gameScene.getPage(aft.pageConstant.PAGE_TYPE_MAIN_HERO);e&&e.initData(),e&&e.gayFriendFightAdItemObj&&e.gayFriendFightAdItemObj.showEffect()}}),cc._RF.pop()},{}],AppointGayFriendPopUp:[function(e,t){"use strict";cc._RF.push(t,"f29beHDI7VLobFlh30+iBrn","AppointGayFriendPopUp");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{itemPrefab:{type:cc.Prefab,default:null}},registerGameListener:function(){},onLoadPage:function(){this.contentNode=cc.find("content/scrollView/view/content",this.node),this.itemIndex=0,this.itemObjList=[]},showPageBegan:function(){this.allHeroList=i.player.heroModule.getNoBattleGayFriendList(),this.hideAllItem(),this.itemIndex=0},showPageEnded:function(){},hideAllItem:function(){for(var e=0;e<this.itemObjList.length;e++)this.itemObjList[e].node.active=!1},update:function(){var e;this.itemIndex<this.allHeroList.length&&(this.allHeroList[this.itemIndex],this.itemIndex>=this.itemObjList.length&&(e=cc.instantiate(this.itemPrefab),this.contentNode.addChild(e),((e=e.getComponent("AppointGayFriendItemRender")).host=this).itemObjList.push(e)),(e=this.itemObjList[this.itemIndex]).node.active=!0,e.initData(this.allHeroList[this.itemIndex]),this.itemIndex++)}}),cc._RF.pop()},{}],AppointHeroItemRender:[function(e,t){"use strict";cc._RF.push(t,"6dc4e3RFgxNAZ3Sl5vk/7Bk","AppointHeroItemRender"),cc.Class({extends:aft.BaseUI,properties:{heroItemPrefab:{type:cc.Prefab,default:null}},afterLoad:function(){this.heroNode=cc.find("hero",this.node),this.fightingPowerLabel=cc.find("fightingPower/layout/labelNumber",this.node).getComponent(cc.Label),this.attrAllLayoutNode=cc.find("attr/layout",this.node),this.attrHpLabel=cc.find("hpLayout/numberLabel",this.attrAllLayoutNode).getComponent(cc.Label),this.physicalAttackIcon=cc.find("attackLayout/nameLayout/icon",this.attrAllLayoutNode),this.spellAttackIcon=cc.find("attackLayout/nameLayout/icon1",this.attrAllLayoutNode),this.attrAttackLabel=cc.find("attackLayout/numberLabel",this.attrAllLayoutNode).getComponent(cc.Label),this.attrPhysicalLabel=cc.find("physicalDefenseLayout/numberLabel",this.attrAllLayoutNode).getComponent(cc.Label),this.attrSpellLabel=cc.find("spellDefenseLayout/numberLabel",this.attrAllLayoutNode).getComponent(cc.Label),this.skilIconSprite=cc.find("skill/skillIcon",this.node).getComponent(cc.Sprite),this.skillNameLabel=cc.find("skill/skillName",this.node).getComponent(cc.Label),this.skillDescLabel=cc.find("skill/desc",this.node).getComponent(cc.Label)},initData:function(e){this._heroId=e,this.heroLevel=aft.player.heroModule.getHeroLevel(this._heroId),this.qualityLevel=aft.player.heroModule.getHeroQuality(this._heroId),this.levelDataCfg=aft.templateManager.getHeroLevelDataByLevel(this._heroId,this.heroLevel),this.updateAttr(),this.updateHeroItem(),this.updateSkillInfo()},updateAttr:function(){var e=aft.player.heroModule.getHeroPowerValue(this._heroId,this.heroLevel,this.qualityLevel);this.fightingPowerLabel.string=aft.Utils.formatBigNumberForLabel(e),this.attrHpLabel.string=aft.Utils.formatBigNumberForLabel(this.levelDataCfg.hp),0<this.levelDataCfg.aggressivity?(this.physicalAttackIcon.active=!0,this.spellAttackIcon.active=!1,this.attrAttackLabel.string=aft.Utils.formatBigNumberForLabel(this.levelDataCfg.aggressivity)):(this.physicalAttackIcon.active=!1,this.spellAttackIcon.active=!0,this.attrAttackLabel.string=aft.Utils.formatBigNumberForLabel(this.levelDataCfg.aggressivityMagic)),this.attrPhysicalLabel.string=aft.Utils.formatBigNumberForLabel(this.levelDataCfg.defense),this.attrSpellLabel.string=aft.Utils.formatBigNumberForLabel(this.levelDataCfg.defenseMagic)},updateHeroItem:function(){var e;this.heroItemObj||((e=cc.instantiate(this.heroItemPrefab)).scale=.6,this.heroNode.addChild(e),this.heroItemObj=e.getComponent("MainHeroItemRender")),this.heroItemObj.initData(this,aft.constant.HERO_ITEM_TYPE_APPOINT,this._heroId)},updateSkillInfo:function(){var e=aft.templateManager.getHeroSkillByType(this._heroId,aft.constant.HERO_SKILL_TYPE_VAN);this.skillCfg=aft.templateManager.getHeroSkillDataById(e[0]),this.skillNameLabel.string=aft.lang.getGameText(this.skillCfg.name),this.skillDescLabel.string=aft.lang.getGameText(this.skillCfg.desc),this.updateSkillIcon()},updateSkillIcon:function(e){(e=this.host.getSkillAtlas()?this.host.getSkillAtlas():e)&&(this.skilIconSprite.spriteFrame=e.getSpriteFrame(this.skillCfg.icon.split("/")[1]))},onClick:function(){aft.player.heroModule.setBattleAdPioneerHero(this._heroId),this.host.closePage();var e=aft.gameScene.getPage(aft.pageConstant.PAGE_TYPE_MAIN_HERO);e&&e.initData(),e&&e.updateHeroVanItem(!0)}}),cc._RF.pop()},{}],AppointHeroPopUp:[function(e,t){"use strict";cc._RF.push(t,"9270b9L2VxEWoHmt3qIXO/Y","AppointHeroPopUp");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{itemPrefab:{type:cc.Prefab,default:null}},registerGameListener:function(){},onLoadPage:function(){this.contentNode=cc.find("content/scrollView/view/content",this.node),this.itemIndex=0,this.itemObjList=[]},showPageBegan:function(){this.allHeroList=i.player.heroModule.getAlreadyUnlockHeroList(null,!0),this.hideAllItem(),this.itemIndex=0,this.checkSkillAtlas()},showPageEnded:function(){},checkSkillAtlas:function(){var e=this,t=i.player.commonModule.isLowIosDevice()?"textures/skill/skill_small":"textures/skill/skill";this.skillAtlas?e.updateSkillFrame():cc.loader.loadRes(t,cc.SpriteAtlas,function(t,i){t?cc.error(t):(e.skillAtlas=i,e.updateSkillFrame())})},getSkillAtlas:function(){return this.skillAtlas},updateSkillFrame:function(){for(var e=0;e<this.itemObjList.length;e++)this.itemObjList[e].updateSkillIcon(this.skillAtlas)},hideAllItem:function(){for(var e=0;e<this.itemObjList.length;e++)this.itemObjList[e].node.active=!1},closePageEnded:function(){this.skillAtlas&&i.player.commonModule.isLowIosDevice()&&(cc.loader.release(cc.loader.getDependsRecursively(this.skillAtlas)),this.skillAtlas=null)},update:function(){var e;this.itemIndex<this.allHeroList.length&&(this.allHeroList[this.itemIndex],this.itemIndex>=this.itemObjList.length&&(e=cc.instantiate(this.itemPrefab),this.contentNode.addChild(e),((e=e.getComponent("AppointHeroItemRender")).host=this).itemObjList.push(e)),(e=this.itemObjList[this.itemIndex]).node.active=!0,e.initData(this.allHeroList[this.itemIndex]),this.itemIndex++)}}),cc._RF.pop()},{}],AttributeItem:[function(e,t){"use strict";cc._RF.push(t,"32974489u5BCIgXQzBPG3Bn","AttributeItem");var i=e("Aft");cc.Class({extends:cc.Component,properties:{heroNode:cc.Node,heroNameLabel:cc.Label,heroHpLabel:cc.Label,heroAtkLabel:cc.Label,heroPhyDefLabel:cc.Label,heroMagDefLabel:cc.Label,skillNode:cc.Node,skillNameLabel:cc.Label,skillDescLabel:cc.Label,physicalAttackIcon:cc.Node,spellAttackIcon:cc.Node},onLoad:function(){this.showIndex=-1,this.status=0,this.isChoose=!1,this.chooseIndex=-1},updateHp:function(e,t){this.showIndex===t&&(this.heroHpLabel.string=i.Utils.formatBigNumberForLabel(e))},showDetails:function(e,t,a){var n=this;2!==this.status||this.showIndex!==e?(this.showIndex=e,this.status=1,this.node.stopAllActions(),cc.tween(this.node).call(function(){n.node.x=-n.node.width,n.node.y=0}).to(.3,{x:0}).call(function(){return n.status=2}).start(),i.Logger.debug("heroDetail:",t,"skillDetail:",a),t?(this.heroNode.active=!0,this.skillNode.active=!1,this.heroNameLabel.string=t.name,this.heroHpLabel.string=i.Utils.formatBigNumberForLabel(t.hp),this.heroPhyDefLabel.string=new i.BigNumber(t.phyDef).toFixed(0),this.heroMagDefLabel.string=new i.BigNumber(t.magDef).toFixed(0),0<t.physicalAtk?(this.physicalAttackIcon.active=!0,this.spellAttackIcon.active=!1,this.heroAtkLabel.string=i.Utils.formatBigNumberForLabel(new i.BigNumber(t.physicalAtk).toFixed(0))):(this.physicalAttackIcon.active=!1,this.spellAttackIcon.active=!0,this.heroAtkLabel.string=i.Utils.formatBigNumberForLabel(new i.BigNumber(t.magicAtk).toFixed(0)))):(this.heroNode.active=!1,this.skillNode.active=!0,this.skillNameLabel.string=a.name,this.skillDescLabel.string=a.desc)):this.hideDetails()},setChoice:function(e){for(var t=0;t<this.host.skillObjList.length;t++)this.host.skillObjList[t].setChoice(!1);for(var i=0;i<this.host.headObjList.length;i++)this.host.headObjList[i].setChoice(!1);e||(10<=this.chooseIndex?this.host.skillObjList[this.chooseIndex-10]:this.host.headObjList[this.chooseIndex]).setChoice(!0)},hideDetails:function(){var e=this;this.node.stopAllActions(),this.status=3,cc.tween(this.node).to(.3,{x:-this.node.width-10}).call(function(){e.status=0,e.showIndex=-1,e.host.hideDetailOver()}).start()},onClickChoose:function(e){if(this.hideDetails(),this.isChoose&&this.chooseIndex===e)return this.setChoice(!0),this.isChoose=!1,this.chooseIndex=-1,void i.battleScene.setOperateState(i.constant.OPERATE_STATE_TOWER);this.chooseIndex=e,this.setChoice(!1),this.isChoose=!0},cancelChoose:function(){this.isChoose=!1,this.chooseIndex=-1,this.setChoice(!0),i.battleScene.setOperateState(i.constant.OPERATE_STATE_TOWER)},interruptDetail:function(){this.hideDetails(),this.showIndex=-1,this.isChoose=!1,this.chooseIndex=-1,this.setChoice(!0),i.battleScene.setOperateState(i.constant.OPERATE_STATE_TOWER)}}),cc._RF.pop()},{}],BIManager:[function(e,t){"use strict";cc._RF.push(t,"ba57asAjTJEiLtZDpxDgV3L","BIManager");var i=e("Aft"),a=cc.Class({extends:cc.Object,statics:{_instance:null,getInstance:function(){return this._instance||(this._instance=new a),this._instance}},onEvent:function(e,t,a){a=a||"1",i.tdManager.onCustEvent(t+"",a+"",e+""),this.sendBiData(e+"",t+"",a),i.Logger.debug("BI event eventType :"+e+" eventName : "+t+" eventValue :"+a)},onLogin:function(){i.tdManager.setAccount(i.player.playerModule.getPlayerId(),i.player.playerModule.getPlayerLevel()),i.tdManager.onCustEvent(i.biConstant.EVENT_ID_LOGIN_LOGIN,"1",i.biConstant.EVENT_TYPE_LOGIN),this.sendBiData(i.biConstant.EVENT_TYPE_LOGIN,i.biConstant.EVENT_ID_LOGIN_LOGIN,"1"),this.sendBiData(i.biConstant.EVENT_TYPE_INSTANCE_LEVEL,i.biConstant.EVENT_ID_INSTANCE_LEVEL,i.player.instanceModule.getTempInstanceId()),this.sendBiData(i.biConstant.EVENT_TYPE_PLAYER_LEVEL,i.biConstant.EVENT_ID_PLAYER_LEVEL,i.player.playerModule.getPlayerLevel());var e,t,a=i.nativeManager.getWxRealUserInfo();a&&(e=JSON.stringify({headUrl:a.headUrl,name:a.nickName}),t=i.constant.rankBigType.WORLD+i.constant.rankType.STAR,a=i.constant.rankBigType.WORLD+i.constant.rankType.INSTANCE,i.player.serviceModule.putLeaderboard(t,i.player.instanceModule.getRankStarNum(),e),i.player.serviceModule.putLeaderboard(a,i.player.instanceModule.getRankPassInstanceNum(),e),(t=i.player.commonModule.getPlayerCityData())&&(a=i.constant.rankBigType.AREA+t.cityCode+i.constant.rankType.STAR,t=i.constant.rankBigType.AREA+t.cityCode+i.constant.rankType.INSTANCE,i.player.serviceModule.putLeaderboard(a,i.player.instanceModule.getRankStarNum(),e),i.player.serviceModule.putLeaderboard(t,i.player.instanceModule.getRankPassInstanceNum(),e)))},getRealAdRewardId:function(e){return i.biConstant.EVENT_ID_AD_REWARD_BASE+parseInt(e)+""},getRealAdRewardCallBackId:function(e){return i.biConstant.EVENT_ID_AD_REWARD_CALLBACK_BASE+parseInt(e)+""},getRealAdShowId:function(e){return i.biConstant.EVENT_ID_AD_SHOW_BASE+parseInt(e)+""},getRealAdSkipId:function(e){return i.biConstant.EVENT_ID_AD_SKIP_BASE+parseInt(e)+""},getRealAdClickId:function(e){return i.biConstant.EVENT_ID_AD_CLICK_BASE+parseInt(e)+""},getRealAdNoId:function(e){return i.biConstant.EVENT_ID_NO_AD_BASE+parseInt(e)+""},getRealStartShareId:function(e){return i.biConstant.EVENT_ID_START_SHARE_BASE+parseInt(e)+""},getRealShareTimeOutId:function(e){return i.biConstant.EVENT_ID_SHARE_TIME_OUT_BASE+parseInt(e)+""},getRealShareTimeShortId:function(e){return i.biConstant.EVENT_ID_SHARE_TIME_SHORT_BASE+parseInt(e)+""},getRealShareRewardId:function(e){return i.biConstant.EVENT_ID_SHARE_REWARD_BASE+parseInt(e)+""},getRealShareRandomFailId:function(e){return i.biConstant.EVENT_ID_SHARE_RANDOM_FAIL_BASE+parseInt(e)+""},getRealAdCallSdkShowId:function(e){return i.biConstant.EVENT_ID_CALL_SDK_SHOW_AD_BASE+parseInt(e)+""},getRealAdShowErrorId:function(e){return i.biConstant.EVENT_ID_AD_SHOW_ERROR_BASE+parseInt(e)+""},getRealAdClickBarId:function(e){return i.biConstant.EVENT_ID_AD_CLICK_BAR_BASE+parseInt(e)+""},getRealAdFinishId:function(e){return i.biConstant.EVENT_ID_AD_FINISH_BASE+parseInt(e)+""},getRealAdCloseId:function(e){return i.biConstant.EVENT_ID_AD_CLOSE_BASE+parseInt(e)+""},getAdEventValue:function(e){var t,a;return 500<=e&&(t=i.battleScene.curChapter,a=i.battleScene.curInstance),i.player.instanceModule.getTempInstanceId(t,a)},getCurAdType:function(e){var t=e.split("-");return 2===t.length&&i.Utils.isNumber(t[1])?parseInt(t[1]):(i.Logger.error("getCurAdType error :",e),null)},onNoAds:function(e){!e||(e=this.getCurAdType(e))&&i.BI.onEvent(i.biConstant.EVENT_TYPE_NO_AD,this.getRealAdNoId(e),this.getAdEventValue(e))},startShare:function(e,t){!e||(e=this.getCurAdType(e))&&(i.BI.onEvent(i.biConstant.EVENT_TYPE_START_SHARE,this.getRealStartShareId(e),t),i.BI.onEvent(i.biConstant.EVENT_TYPE_ALL_SHARE,i.biConstant.EVENT_ID_ALL_SHARE_START,t))},shareTimeOut:function(e,t){!e||(e=this.getCurAdType(e))&&(i.BI.onEvent(i.biConstant.EVENT_TYPE_SHARE_TIME_OUT,this.getRealShareTimeOutId(e),t),i.BI.onEvent(i.biConstant.EVENT_TYPE_ALL_SHARE,i.biConstant.EVENT_ID_ALL_SHARE_TIME_OUT,t))},shareTimeShort:function(e,t){!e||(e=this.getCurAdType(e))&&(i.BI.onEvent(i.biConstant.EVENT_TYPE_SHARE_TIME_SHORT,this.getRealShareTimeShortId(e),t),i.BI.onEvent(i.biConstant.EVENT_TYPE_ALL_SHARE,i.biConstant.EVENT_ID_ALL_SHARE_TIME_SHORT,t))},shareReward:function(e,t){!e||(e=this.getCurAdType(e))&&(i.BI.onEvent(i.biConstant.EVENT_TYPE_SHARE_REWARD,this.getRealShareRewardId(e),t),i.BI.onEvent(i.biConstant.EVENT_TYPE_ALL_SHARE,i.biConstant.EVENT_ID_ALL_SHARE_REWARD,t))},shareRandomFail:function(e,t){!e||(e=this.getCurAdType(e))&&(i.BI.onEvent(i.biConstant.EVENT_TYPE_SHARE_RANDOM_FAIL,this.getRealShareRandomFailId(e),t),i.BI.onEvent(i.biConstant.EVENT_TYPE_ALL_SHARE,i.biConstant.EVENT_ID_ALL_SHARE_RANDOM_FAIL,t))},onCallShowAds:function(e){e&&this.getCurAdType(e)},onShowAdsError:function(e){!e||(e=this.getCurAdType(e))&&i.BI.onEvent(i.biConstant.EVENT_TYPE_SHOW_AD_ERROR,this.getRealAdShowErrorId(e),this.getAdEventValue(e))},onShowADStart:function(e){!e||(e=this.getCurAdType(e))&&i.BI.onEvent(i.biConstant.EVENT_TYPE_AD_SHOW,this.getRealAdShowId(e),this.getAdEventValue(e))},onADSkip:function(e){e&&this.getCurAdType(e)},onClickAdShow:function(e){!e||(e=this.getCurAdType(e))&&i.BI.onEvent(i.biConstant.EVENT_TYPE_AD_CLICK,this.getRealAdClickId(e),this.getAdEventValue(e))},onAdClickBar:function(e){e&&this.getCurAdType(e)},onAdFinish:function(e){e&&this.getCurAdType(e)},onAdRewardCallBack:function(e){!e||(e=this.getCurAdType(e))&&i.BI.onEvent(i.biConstant.EVENT_TYPE_AD_REWARD_CALLBACK,this.getRealAdRewardCallBackId(e),this.getAdEventValue(e))},onAdReward:function(e){!e||(e=this.getCurAdType(e))&&i.BI.onEvent(i.biConstant.EVENT_TYPE_AD_REWARD,this.getRealAdRewardId(e),this.getAdEventValue(e))},onAdClose:function(e){!e||(e=this.getCurAdType(e))&&i.BI.onEvent(i.biConstant.EVENT_TYPE_AD_CLOSE,this.getRealAdCloseId(e),this.getAdEventValue(e))},initInfoData:function(e,t,a){var n=i.nativeManager.getDeviceType(),o=cc.sys.isBrowser?cc.sys.browserType:n,s=cc.sys.isBrowser?cc.sys.browserVersion:cc.sys.osVersion,r=e||i.biConstant.EVENT_TYPE_DEFAULT,c=t||i.biConstant.EVENT_ID_DEFAULT_UNKNOW,l=a||"1";return n=i.nativeManager.getDeviceId(),e=cc.sys.os,t=i.config.channel,a=i.config.version,{sendTime:i.timeUtil.getTime(),os:e,sysVersion:s,models:o,deviceId:n,eventType:r,eventId:c,value:l,level:1,channel:t,version:a}},sendBiData:function(){}});i.BI=a.getInstance(),cc._RF.pop()},{}],BaseHandler:[function(e,t){"use strict";cc._RF.push(t,"68946LFSwdPzKSv/AIkXVjL","BaseHandler"),cc.Class({extends:cc.Object,ctor:function(){this.registerSelf()},registerSelf:function(){}}),cc._RF.pop()},{}],BasePage:[function(e,t){"use strict";cc._RF.push(t,"662f7zv6A5Lp51iLWNr9Th+","BasePage");var i=(a=e)("Aft"),a=cc.Class({extends:i.BaseUI,properties:{pageManager:{default:null,visible:!1},data:{default:null,visible:!1},blackNode:{default:null,visible:!1},pageType:{default:-1,visible:!1}},afterLoad:function(){this.onLoadPage()},onLoadPage:function(){},setPageType:function(e){this.pageType=e},getPageType:function(){return this.pageType},setPageManager:function(e){this.pageManager=e},getPageManager:function(){return this.pageManager},getData:function(){return this.data},setData:function(e){this.data=e},setBlackNode:function(e){this.blackNode=e},getBlackNode:function(){return this.blackNode},setSkipCloseSound:function(e){this.skipCloseSound=e},showPage:function(e,t){var a,n,o,s;this.animType=t,this.node.active=!0,this.blackNode&&(this.blackNode.active=!0),this.setData(e),this.showPageBegan(),t===i.pageConstant.OPEN_PAGE_ANIMATION_NONE?(this.node.scale=1,this.showPageEnded()):t===i.pageConstant.OPEN_PAGE_ANIMATION_SCALE?(i.gameScene&&i.gameScene.showPopUpLimit(),this.node.scale=0,a=cc.scaleTo(.1,1.1),n=cc.scaleTo(.1,1),o=cc.callFunc(function(){this.showPageEnded(),i.gameScene&&i.gameScene.hidePopUpLimit()},this),s=cc.sequence(a,n,o),this.node.stopAllActions(),this.node.runAction(s)):t===i.pageConstant.OPEN_PAGE_ANIMATION_SCALE_MOVE&&(i.gameScene&&i.gameScene.showPopUpLimit(),this.node.scale=0,this.node.position=cc.v2(0,0),a=cc.scaleTo(.1,1.1),n=cc.scaleTo(.1,1),o=cc.callFunc(function(){this.showPageEnded(),i.gameScene&&i.gameScene.hidePopUpLimit()},this),s=cc.sequence(a,n,o),this.node.stopAllActions(),this.node.runAction(s))},showPageBegan:function(){},showPageEnded:function(){},closePage:function(e){var t,a,n;this.closePageBegan(),this.blackNode&&(this.blackNode.active=!1),this.skipCloseSound||i.soundsUtil.playSoundEffect("common_panel_close"),this.animType===i.pageConstant.OPEN_PAGE_ANIMATION_NONE?(this.node.active=!1,this.pageManager.removePageInOpened(this.pageType),this.closePageEnded()):this.animType===i.pageConstant.OPEN_PAGE_ANIMATION_SCALE?(i.gameScene&&i.gameScene.showPopUpLimit(),t=cc.scaleTo(.1,0),a=cc.callFunc(function(){this.node.active=!1,this.pageManager.removePageInOpened(this.pageType),this.closePageEnded(),i.gameScene&&i.gameScene.hidePopUpLimit()},this),n=cc.sequence(t,a),this.node.stopAllActions(),this.node.runAction(n)):this.animType===i.pageConstant.OPEN_PAGE_ANIMATION_SCALE_MOVE&&(i.gameScene&&i.gameScene.showPopUpLimit(),t=cc.scaleTo(.1,0),a=cc.callFunc(function(){this.node.active=!1,this.pageManager.removePageInOpened(this.pageType),this.closePageEnded(),i.gameScene&&i.gameScene.hidePopUpLimit()},this),n=cc.sequence(t,a),e&&(e=e.convertToWorldSpaceAR(cc.v2(0,0)),e=this.node.convertToNodeSpaceAR(e),e=cc.moveTo(.1,e),n=cc.sequence(cc.spawn(t,e),a)),this.node.stopAllActions(),this.node.runAction(n))},closePageBegan:function(){},closePageEnded:function(){}});i.BasePage=a,cc._RF.pop()},{}],BaseScrollView:[function(e,t){"use strict";cc._RF.push(t,"03437jinl5Ez6xD/F1Y8rHB","BaseScrollView"),cc.Class({extends:cc.Component,properties:{itemScrollView:{default:null,type:cc.ScrollView,tooltip:"ScrollView\u8282\u70b9"},itemPrefab:{default:null,type:cc.Prefab,tooltip:"ScrollView\u4e2d\u5143\u7d20\u7684\u9884\u5236\u4f53"},updateInterval:{default:.2,tooltip:"\u5217\u8868\u5237\u65b0\u95f4\u9694"},itemHeight:{default:60,tooltip:"\u5143\u7d20\u7684\u9ad8\u5ea6"},spacing:{default:10,tooltip:"\u5143\u7d20\u95f4\u9694"},itemPoolSize:{default:10,tooltip:"\u7528\u4e8e\u5faa\u73af\u7684\u5143\u7d20\u4e2a\u6570"},_itemList:[],_itemComponentName:"",_dataList:null,_outViewLength:0,_updateTimer:0,_lastPosition:0},init:function(e,t){this.itemScrollView.scrollToTop(),this._dataList=e,this._itemComponentName=t,this._lastPosition=this.itemScrollView.content.y,this.itemScrollView.content.height=(this.itemHeight+this.spacing)*e.length-this.spacing,this._outViewLength=this.itemScrollView.node.height+this.itemHeight},showView:function(){for(var e=0;e<this.itemPoolSize;e++){(new Date).getTime();var t=this._itemList[e];if(t){var i=this._dataList[t.itemId];return t.getComponent(this._itemComponentName).host=this,void t.getComponent(this._itemComponentName).setData(i)}(t=cc.instantiate(this.itemPrefab)).y=0-(t.height/2+e*(t.height+this.spacing)),null!=(i=this._dataList[e])&&(t.itemId=e,this.itemScrollView.content.addChild(t),t.getComponent(this._itemComponentName).host=this,t.getComponent(this._itemComponentName).setData(i),this._itemList.push(t))}},clearView:function(){this.itemScrollView.stopAutoScroll();for(var e=0;e<this._itemList.length;e++){var t=this._itemList[e];t&&t.destroy()}this._itemList=[]},updateScroll:function(){for(var e=this.itemScrollView.content.y-this._lastPosition,t=0;t<this._itemList.length;t++)0<e?this.checkThenMoveToLast(this._itemList[t]):e<0&&this.checkThenMoveToFirst(this._itemList[t]);this._lastPosition=this.itemScrollView.content.y},checkThenMoveToLast:function(e){this.itemCheckThenMoveBySymbol(e,1)},checkThenMoveToFirst:function(e){this.itemCheckThenMoveBySymbol(e,-1)},itemCheckThenMoveBySymbol:function(e,t){var i=this.itemScrollView.content.convertToWorldSpaceAR(e.position),a=this.itemScrollView.node.convertToNodeSpaceAR(i);1===t&&a.y<2*this.itemHeight||-1===t&&a.y>-this._outViewLength||(i=e.itemId+t*this.itemPoolSize,!this._dataList||void 0!==(a=this._dataList[i])&&null!=a&&(e.y=e.y-t*(e.height+this.spacing)*this.itemPoolSize,e.itemId=i,e.getComponent(this._itemComponentName).host=this,e.getComponent(this._itemComponentName).setData(a)))},beforeUpdate:function(){},update:function(e){this.beforeUpdate(e),this._updateTimer+=e,this._updateTimer<this.updateInterval||(this._updateTimer=0,this.updateScroll())}}),cc._RF.pop()},{}],BaseUI:[function(e,t){"use strict";cc._RF.push(t,"b8c839sWcZF+qbYdwOs9y3i","BaseUI");var i=e("EventBus");cc.Class({extends:cc.Component,properties:{_listenerRemoves:{default:{}}},onLoad:function(){this.registerSysEvent(),this.registerGameListener(),this.afterLoad()},onDestroy:function(){this.removeAllGameListener()},registerSysEvent:function(){},registerGameListener:function(){},afterLoad:function(){},registerListener:function(e,t){this._listenerRemoves[e]=i.getInstance().addListener(e,t)},removeAllGameListener:function(){for(var e in this._listenerRemoves)this._listenerRemoves.hasOwnProperty(e)&&this.removeGameListener(e)},removeGameListener:function(e){var t=this._listenerRemoves[e];t&&t(),delete this._listenerRemoves[e]}}),cc._RF.pop()},{}],BattleBoxPage:[function(e,t){"use strict";cc._RF.push(t,"593f7GW0rhNsqk4V7HEHzMC","BattleBoxPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{boxItemRender:cc.Prefab,rewardItemRender:cc.Prefab,rewardBestRender:cc.Prefab,initCount:5,bestRewardIconSp:cc.Sprite,bestRewardLabel:cc.Label,bestRewardBgSp:cc.Sprite,key1Node:cc.Node,key2Node:cc.Node,key3Node:cc.Node,keyNode:cc.Node,adButtonNode:cc.Node,noNode:cc.Node,closeBtnNode:cc.Node,boxLayoutNode:cc.Node,heroIconAtlas:cc.SpriteAtlas,commonAtlas:cc.SpriteAtlas,vipAtlas:cc.SpriteAtlas,adButtonLabel:cc.Label,topExpNode:cc.Node,topExpIconNode:cc.Node,topExpLabel:cc.Label,topSilverNode:cc.Node,topSilverIconNode:cc.Node,topSilverLabel:cc.Label,topGoldNode:cc.Node,topGoldIconNode:cc.Node,topGoldLabel:cc.Label},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.SHOW_AD_OVER_BATTLE_BOX,function(){return e.onShowAdOver()})},afterLoad:function(){var e=this;this.bestRewardNameLabel=cc.find("title/bestReward/name",this.node).getComponent(cc.Label),this.leftTimesLabel=cc.find("leftTimesLayout/TimesLayout/number/mask/label",this.node).getComponent(cc.Label),this.countimeLabel=cc.find("leftTimesLayout/countimeTime",this.node).getComponent(cc.Label),this.richText=cc.find("RichText",this.node).getComponent(cc.RichText),this.leftTimesAnim=cc.find("leftTimesLayout",this.node).getComponent(cc.Animation),this.boxItemObjList=[],this.rewardItemsList=[],this.initRewardNodeList(),this.node.getComponent(cc.Animation).on("finished",function(){e.node.getComponent(cc.Animation).play("battleBoxPage_stand"),e.scheduleOnce(function(){e.isClicking=!1,e.showButton()},.6)},this)},initRewardNodeList:function(){for(var e=0;e<this.initCount;e++){var t=cc.instantiate(this.rewardItemRender);this.rewardItemsList.push(t),t.active=!1,t.parent=this.node}},showRewardNodes:function(e,t){var a,n=this;switch(e){case"Icon_Exp":s=this.topExpIconNode.position,a=this.topExpNode;break;case"Icon_Silver":s=this.topExpIconNode.position,a=this.topSilverNode;break;case"Icon_Ingot":break;default:i.Logger.debug("BattleBoxPage showRewardNodes name Error!")}if(s&&a)for(var o=a.convertToWorldSpaceAR(s),s=this.node.convertToNodeSpaceAR(o),r=this.node.convertToNodeSpaceAR(t),c=0;c<this.initCount;c++)!function(t){var o=n.rewardItemsList[t];cc.find("openIcon",o).getComponent(cc.Sprite).spriteFrame=n.getItemIconByName(e),o.active=!0,o.opacity=1,o.position=r,o.scale=.8,o.stopAllActions(),cc.tween(o).to(.1*t,{opacity:255,y:r.y+50},{easing:"sineOutIn"}).call(function(){0===t&&i.soundsUtil.playSoundEffect("gold_end")}).to(.5,{position:s},{easing:function(e){return e*e}}).call(function(){t===n.initCount-1&&cc.tween(a).to(.05,{scale:1.2}).to(.05,{scale:1}).to(.05,{scale:1.2}).to(.05,{scale:1}).call(function(){n.updateTopLabel()}).start(),o.active=!1}).start()}(c)},showPageBegan:function(){i.Logger.debug("show battle box page "),i.battleScene.revertBattleSpeedPercent(),this.updateTopLabel(!0),this.initData(),this.isClicking=!0,this.showingAd=!1,this.showingAdTime=0,this.checkJumpTime=0},showPageEnded:function(){i.ttAdManager.showBannerAd(cc.find("adNode",this.node),this.getPageType())},updateTopLabel:function(e){this.topExpLabel.string=i.Utils.formatBigNumberForLabel(i.player.heroModule.getHeroGeneralExp()),this.topSilverLabel.string=i.Utils.formatBigNumberForLabel(i.player.playerModule.getSilverNum()),this.topGoldLabel.string=i.Utils.formatBigNumberForLabel(i.player.playerModule.getGoldBullionNum()),e&&(e=i.player.commonModule.getTodayPopUpBattleBoxCount(),this.leftTimesLabel.string=e+1,e=i.player.vipModule.getVipBattleBoxTimes()===e,i.player.commonModule.addBattleBoxPlayerRate(e),e=i.player.commonModule.getBattleBoxPlayerRate(),this.richText.string=i.lang.getFormatString(i.GameTextCode.PEOPLE_BEST_REWARD,[e/100+"%"]),e=i.templateManager.getGameParamValue("instanceBoxCountdownHour"),this.needShowCountimeTime=3600*e,this.updateCountdownTimeLabel())},updateCountdownTimeLabel:function(){var e=i.timeUtil.getZeroHourTime()+864e5,t=(new Date).getTime();e-t>1e3*this.needShowCountimeTime?this.countimeLabel.node.active=!1:(this.countimeLabel.node.active=!0,this.countimeLabel.string=i.timeUtil.secondFormat(Math.ceil((e-t)/1e3),!0),this.updateTimeTime=1,this.canUpdateCountdowm=!0)},initData:function(){var e=i.templateManager.getShopTypeBoxListByType(i.constant.BOX_TYPE_BATTLE);this.boxWeigtList=[];for(var t=99999999,a=i.player.playerModule.getPlayerLevel(),n=0;n<e.length;n++){var o=e[n];a>=o.minRoleLevel&&a<=o.maxRoleLevel&&(this.boxWeigtList.push({key:o.highDrop,value:o.weight}),o.weight<t&&(this.bestBoxId=o.highDrop,t=o.weight))}this.keysNum=i.battleScene.gameBattleUIObj.boxNum,this.initBestReward(),this.dealUI()},getRandomReward:function(e){var t,a,n=i.templateManager.getDropListByDropId(e),o=[],s=!1;this.bestBoxId===e&&(t=i.player.instanceModule.getMaxChapter(),a=i.player.instanceModule.getChapterMaxLevel(t),s=!0);for(var r=0;r<n.length;r++){var c,l,d,h,u=n[r],p=parseInt(u.weight);s?(c=(h=u.battleBoxInstanceNum)[1][0],l=h[1][1],d=h[0][0],h=h[0][1],(t<c&&d<t||t<c&&t===d&&h<=a||t===c&&a<=l&&d<t||t===c&&a<=l&&t===d&&h<=a)&&o.push({key:u,value:p})):o.push({key:u,value:p})}return i.Utils.getRandomKeyByValue(o)},initBestReward:function(){var e,t,a;switch(this.needAddBestNumId=-1,53004===this.bestBoxId?(t=i.player.shopModule.getNeedBattleBoxRewardIdData()).type!==i.constant.BATTLE_BOX_REWARD_TYPE_NORMAL?this.bestRewardId=t.id:(e=i.templateManager.getInstanceBoxRewardById(t.id),this.bestRewardId=e.cardId,this.needAddBestNumId=t.id):(t=this.getRandomReward(this.bestBoxId),this.bestRewardId=t.itemId),i.player.itemModule.getItemType(this.bestRewardId)){case i.constant.ITEM_TYPE_BAG:n=(o=i.templateManager.getItemDataById(this.bestRewardId)).dropIcon.split("/")[1],a=i.lang.getGameText(o.name);break;case i.constant.ITEM_TYPE_HERO_PIECE:var n=(o=i.templateManager.getHeroCardDataById(this.bestRewardId)).icon,o=i.templateManager.getHeroDataById(o.heroId);o&&(a=i.lang.getGameText(o.name));break;default:i.Logger.debug("battleBoxPage bestRewardType error")}this.bestRewardSpriteFrame=this.commonAtlas.getSpriteFrame(n),this.bestRewardNum=1,i.lang.updateLabelString(this.bestRewardLabel,[this.bestRewardNum]),this.bestRewardNameLabel.string=a},dealUI:function(){if(this.boxItemObjList.length)for(var e=0;e<this.boxItemObjList.length;e++)this.boxItemObjList[e].refresh();else for(var t=0;t<this.boxWeigtList.length;t++){var a=cc.instantiate(this.boxItemRender),n=a.getComponent("BoxItemRender");a.parent=this.boxLayoutNode,n.host=this,n.init(),this.boxItemObjList.push(n)}this.bestRewardIconSp.spriteFrame=this.bestRewardSpriteFrame,i.lang.updateLabelString(this.adButtonLabel,[3]),this.closeBtnNode.active=!1,this.keyNode.active=!1,this.adButtonNode.active=!1,this.noNode.active=!1,this.showPageAni()},showPageAni:function(){var e=this;this.node.getComponent(cc.Animation).play("battleBoxPage"),this.leftTimesAnim.play("leftTimesLayout_appear").once(cc.Animation.EventType.FINISHED,function(){e.scheduleOnce(function(){e.leftTimesAnim.play("leftTimesLayout_swicth"),e.scheduleOnce(function(){e.leftTimesLabel.string=i.player.commonModule.getTodayPopUpBattleBoxCount()},.33)},1)},this)},showButton:function(){var e,t,a,n,o,s;if(this.keysNum=i.battleScene.gameBattleUIObj.boxNum,this.keysNum<=0)this.closeBtnNode.active=this.boxWeigtList.length<=0,this.closeBtnNode.active&&(this.closeBtnNode.opacity=1,e=cc.delayTime(.7),t=cc.fadeIn(.7),a=cc.callFunc(function(){},this),a=cc.sequence(e,t,a),this.closeBtnNode.stopAllActions(),this.closeBtnNode.runAction(a)),this.keyNode.active=!1,this.adButtonNode.active=0<this.boxWeigtList.length,this.noNode.active=0<this.boxWeigtList.length,this.noNode.active&&(this.noNode.opacity=1,n=cc.delayTime(3),o=cc.callFunc(function(){this.noNode.opacity=255},this),s=cc.sequence(n,o),this.noNode.stopAllActions(),this.noNode.runAction(s));else switch(this.closeBtnNode.actvie=!this.checkHaveNotOpen(),this.closeBtnNode.active&&(this.closeBtnNode.opacity=1,n=cc.delayTime(.7),o=cc.fadeIn(.7),s=cc.callFunc(function(){},this),s=cc.sequence(n,o,s),this.closeBtnNode.stopAllActions(),this.closeBtnNode.runAction(s)),this.keyNode.active=!0,this.adButtonNode.active=!1,this.noNode.active=!1,this.keysNum){case 1:this.key1Node.active=!0,this.key2Node.active=!1,this.key3Node.active=!1;break;case 2:this.key1Node.active=!0,this.key2Node.active=!0,this.key3Node.active=!1;break;default:this.key1Node.active=!0,this.key2Node.active=!0,this.key3Node.active=!0}},checkHaveNotOpen:function(){for(var e=!1,t=0;t<this.boxItemObjList.length;t++)if(!this.boxItemObjList[t].status){e=!0;break}return e},getRandomBox:function(){var e=i.Utils.getRandomKeyByValue(this.boxWeigtList);if(i.battleScene.gameBattleUIObj.useBox()){for(var t=0;t<this.boxWeigtList.length;t++)if(this.boxWeigtList[t].key===e)return this.boxWeigtList.splice(t,1),e;i.Logger.debug("BattleBoxPage \u7528\u4e86\u94a5\u5319\uff0c\u4f46\u662f\u968f\u673a\u51fa\u6765\u4e0d\u8be5\u51fa\u6765\u7684\u4e1c\u897f")}else i.gameScene.showTipsItemRender(i.lang.getGameText(i.GameTextCode.NO_MORE_KEY));return-1},runBestAction:function(){var e=cc.delayTime(.5),t=cc.callFunc(function(){i.soundsUtil.playSoundEffect("getcard");var e=cc.instantiate(this.rewardBestRender);this.node.addChild(e);var t=e.getComponent(cc.Animation);cc.find("icon/openIcon",e).getComponent(cc.Sprite).spriteFrame=this.getBestPieceSpriteFrame(),t.stop(),t.setCurrentTime(0),t.play("battleBoxRewardShow"),i.gameScene.showGuideLimit(),t.on("finished",function(){i.gameScene.hideGuideLimit(),e.destroy()})},this);t=cc.sequence(e,t),this.topGoldIconNode.stopAllActions(),this.topGoldIconNode.runAction(t)},getBestBoxId:function(){return this.bestBoxId},getBestRewardId:function(){return this.bestRewardId},getBestNum:function(){return this.bestRewardNum},getNeedAddBestNumId:function(){return this.needAddBestNumId},getBestPieceSpriteFrame:function(){return this.bestRewardSpriteFrame},getItemIconByName:function(e){return this.commonAtlas.getSpriteFrame(e)},onClickClose:function(){this.noNode.opacity<255||this.closePage()},closePageBegan:function(){i.battleScene.gameBattleUIObj.resetBox();for(var e=0;e<this.boxItemObjList.length;e++)this.boxItemObjList[e].stopAni();for(var t=0;t<this.rewardItemsList.length;t++)this.rewardItemsList[t].stopAllActions(),this.rewardItemsList[t].active=!1;this.topGoldNode.stopAllActions(),this.topExpNode.stopAllActions(),this.topSilverNode.stopAllActions(),i.ttAdManager.hideBannerAd()},closePageEnded:function(){this.canUpdateCountdowm=!1,i.battleScene.showBoxPageEnd=!0,i.battleScene.restoreBattleSpeedPercent()},onClickAd:function(){this.showingAd||(this.showingAd=!0,this.showingAdTime=2,i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,i.GameEventType.SHOW_AD_OVER_BATTLE_BOX))},onShowAdOver:function(){i.battleScene.gameBattleUIObj.showAdOverBox(),this.showButton(),this.showingAd=!1},update:function(e){if(this.canUpdateCountdowm&&(this.updateTimeTime-=e,this.updateTimeTime<=0&&(this.updateTimeTime=1,this.updateCountdownTimeLabel())),!this.isClicking&&this.boxWeigtList&&0<this.boxWeigtList.length&&(this.checkJumpTime+=e,1<this.checkJumpTime))for(--this.checkJumpTime;;){var t=i.Utils.getRandomInt(0,this.boxItemObjList.length-1);if(t!==this.lastJumpIndex||1===this.boxWeigtList.length){var a=this.boxItemObjList[t];if(!a.status){this.lastJumpIndex=t,a.showJumpAni();break}}}0<this.showingAdTime&&(this.showingAdTime-=e,this.showingAdTime<=0&&(this.showingAd=!1))}}),cc._RF.pop()},{}],BattleGayFriendItemRender:[function(e,t){"use strict";cc._RF.push(t,"7fdf7IeK8tMzIR/rmuPWZIs","BattleGayFriendItemRender");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{gayFriendAtlas:{default:null,type:cc.SpriteAtlas},iconSprite:{default:null,type:cc.Sprite}},afterLoad:function(){},initData:function(e){this.gayFriendGroupIdId=e,e=i.player.heroModule.getGayFriendLevel(this.gayFriendGroupIdId),this.gayFriendCfg=i.templateManager.getHeroRestrainByGroupIdAndLevel(this.gayFriendGroupIdId,e),this.gayFriendCfg&&(this.iconSprite.spriteFrame=this.gayFriendAtlas.getSpriteFrame(this.gayFriendCfg.img))},onClick:function(){var e=this.node.convertToWorldSpaceAR(cc.v2(0,0));i.battleScene.gameBattleUIObj.showGayFriendTips(this.gayFriendGroupIdId,e),i.battleScene.gameBattleUIObj.hideGayFriendTriggerTips()}}),cc._RF.pop()},{}],BattlePiggyBankPage:[function(e,t){"use strict";cc._RF.push(t,"9146dhdb0VF9qKK1FYbd26U","BattlePiggyBankPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{},onLoadPage:function(){var e=this;this.spine=cc.find("piggyBank",this.node).getComponent(sp.Skeleton),this.spineNew=cc.find("fireworks",this.node).getComponent(sp.Skeleton),this.label=cc.find("label",this.node).getComponent(cc.Label),this.animation=this.node.getComponent(cc.Animation),this.spine.setEventListener(function(t,i){t&&"addNum"===i.data.name&&(e.canChange=!0)})},showPageBegan:function(){i.battleScene.revertBattleSpeedPercent()},showPageEnded:function(){var e=this;this.curMoney=i.player.piggyBankModule.getPiggyBankMoney();var t=i.templateManager.getGameParamValue("potMaxIngot"),a=i.templateManager.getGameParamValue("potPerIngot");a=this.curMoney+a>t?t-this.curMoney:a,this.label.string=this.curMoney,this.maxNum=this.curMoney+a,this.needAddCount=60,this.addOnceNum=a/this.needAddCount,this.curAddCount=0,this.canChange=!1,this.closeTime=3.5,this.isGm=this.data,this.spine.node.active=!1,this.animation.node.active=!1,this.label.node.active=!1,this.spineNew.node.active=!1,this.scheduleOnce(function(){e.spine.node.active=!0,e.spineNew.node.active=!0,e.animation.node.active=!0,e.label.node.active=!0,e.spine.setAnimation(0,"appear",!1),e.spineNew.setAnimation(0,"run",!1),e.animation.play("battlePiggyBank_numb"),i.soundsUtil.playSoundEffect("gold_drop")},.5),this.initFinish=!0},update:function(e){if(this.initFinish){if(this.closeTime-=e,this.closeTime<0)return this.closePage(),void(this.isGm?i.battleScene.gmWin():i.battleScene.checkGameWin());!this.canChange||this.curAddCount>=this.needAddCount||(this.curMoney+=this.addOnceNum,this.label.string=Math.min(Math.ceil(this.curMoney),this.maxNum),this.curAddCount++,this.curAddCount===this.needAddCount&&(this.canChange=!1))}}}),cc._RF.pop()},{}],BattleScene:[function(e,t){"use strict";cc._RF.push(t,"e29c1Zr0jpPl6jPRWxNCvjt","BattleScene");var i=e("Aft");cc.Class({extends:cc.Component,properties:{battleAtlas:{default:null,type:cc.SpriteAtlas},commonAtlas:{default:null,type:cc.SpriteAtlas},skillAtlas:{default:null,type:cc.SpriteAtlas},gameMapPrefab:{default:null,type:cc.Prefab},gameEffectPrefab:{default:null,type:cc.Prefab},gameEffectDownPrefab:{default:null,type:cc.Prefab},gameTowerPrefab:{default:null,type:cc.Prefab},gameTowerControlPrefab:{default:null,type:cc.Prefab},gameHeroPrefab:{default:null,type:cc.Prefab},heroHaloPrefab:{default:null,type:cc.Prefab},gameEnemyPrefab:{default:null,type:cc.Prefab},gameBulletPrefab:{default:null,type:cc.Prefab},gameBulletEffectPrefab:{default:null,type:cc.Prefab},gameFlyHpPrefab:{default:null,type:cc.Prefab},gameSkillTipsPrefab:{default:null,type:cc.Prefab},gameIconTipsPrefab:{default:null,type:cc.Prefab},gameHeroOperatePrefab:{default:null,type:cc.Prefab},gameBattleUIPrefab:{default:null,type:cc.Prefab},waveStartTipsPrefab:{default:null,type:cc.Prefab},waveStartTipsIntroducePrefab:{default:null,type:cc.Prefab},gameDropPrefab:{default:null,type:cc.Prefab},gameDropTipsPrefab:{default:null,type:cc.Prefab}},onLoad:function(){},start:function(){},addLoadingPercent:function(e){this.loadPercent+=e,this.loadPercent<0?this.loadPercent=0:100<this.loadPercent&&(this.loadPercent=100),i.gameScene.setLoadingPercent(this.loadPercent)},initData:function(e,t){this.battleStartTime=(new Date).getTime(),this.battleFrame=0,this.enterBattleTime=i.timeUtil.getTime(),this.skillCount=0,this.gameBossWarnAni&&(this.gameBossWarnAni.node.active=!1),this.isCanShowBossWarn=!0,this.cacheUpdateNum=0,this.skillEnemySlowData=null,this.skillHeroQuickData=null,this.loadIndex=-1,this.loadPercent=0,this.enemySlowEffect=null,this.heroQuickEffect=null,this.addLoadingPercent(i.constant.LOADING_CLEAN),i.battleScene.battleSpeedPercent=1,i.battleNode.setPosition(cc.v2(0,0)),this.showPiggyBankOver=!1,this.curChapter=e,this.curInstance=t,this.newCreateEnemy=null,this.isCanShowSecondHero=!0,this.firstEnemyId=-1,this.firstEnemyRouteId=-1,this.killMonsterCount=0,this.showAdCount=0,this.initBattleData(),this.curState=-1,this.setGameState(i.constant.GAME_STATE_LOAD),this.setOperateState(i.constant.OPERATE_STATE_TOWER);for(var a=i.player.heroModule.getAllBattleGayFriend(),n=0;n<a.length;n++)i.BI.onEvent(i.biConstant.EVENT_TYPE_GAY_FRIEND_USE,i.player.heroModule.getGayFriendBiEventId(i.biConstant.EVENT_ID_GAY_FRIEND_USE_BASE,a[n]),i.player.instanceModule.getTempInstanceId(this.curChapter,this.curInstance));this.tryHeroId=-1,this.checkTryHeroId()},initBattleData:function(){this.closeAllBattlePage(),this.showHeroTowerIdList=[],this.plotList=[],this.isCanCheckPlotEnter=!0,this.isCanCheckPlotStart=!0,this.isCanCheckPlotWin=!0,this.isCanCheckPlotLose=!0,this.curTime=0,this.updateTime=0,this.isCheckTowerUpgradeGuide=!1,this.enemyId=1,this.enemyList=[],this.curSelectEnemyObj=null,this.bulletList=[],this.gameHeroObjList=[],this.soldierId=10,this.curSelectSoldierObj=null,this.soldierList=[],this.iconEffectList=[],this.curTowerObj=null,this.rewardsList=[],this.startBuffs={},this.dropMoneyPercent=1,this.sellMoneyPercent=1,this.isBattleRestore=0<this.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_HP_BACK),i.Logger.debug("\u7f81\u7eca\u6280\u80fd \u6218\u4e2d\u56de\u8840 = "+this.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_HP_BACK)),this.skillCDTimePercent=1;var e=i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_SKILL_CD);0!=e&&(i.Logger.debug("\u7f81\u7eca\u6280\u80fd \u4e3b\u52a8\u6280\u80fdcd + "+e),this.skillCDTimePercent=1+e),this.initInstanceData(),this.initInstanceBaseData()},closeAllBattlePage:function(){for(var e=0;e<i.gameScene.pausePageList.length;e++)i.gameScene.closePage(i.gameScene.pausePageList[e])},initInstanceData:function(){this.chapterData=i.templateManager.getChapterDataById(this.curChapter);var e=i.templateManager.getInstanceListByChapterId(this.curChapter);this.instanceData=e[this.curInstance-1],e=this.instanceData.wellen,this.waveDataList=i.templateManager.getWaveListByGroupID(e),e=this.instanceData.wellenNature,1==this.curChapter&&2==this.curInstance&&i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_INSTANCE_2)&&(e=99992),this.waveNatureDataList=i.templateManager.getWaveNatureListByGroupID(e),i.tdManager.onMissionBagin(this.instanceData.id)},initInstanceBaseData:function(){var e=i.player.gmModule.isUnlimitedMoney()?9999:this.instanceData.initialIron;this.instanceBaseData={lastHp:i.templateManager.getGameParamValue("basicLife"),ironNum:e},this.areadyOpenStarBuff=!1,this.isCheckHeroTry=!0,this.isCheckLimitTower=!0,this.alreadyRevivalTimes=0,this.instanceSkillMap={},this.taskCacheMap={},this.randomSkillTimes=0,this.tryHeros=[],this.areadyShowGayFriendTips=[],this.waveAreadyDropKey=!1,this.isDropBoxKey=!1;for(var t=0;t<this.waveDataList.length;t++)if(this.waveDataList[t].isDropKey){this.isDropBoxKey=!0;break}this.battleSkillAllChooseTimes=0},checkBattleMusic:function(){i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_INSTANCE_1)||this.playBattleMusic()},playBattleMusic:function(){i.soundsUtil.playMusic(this.chapterData.bgm)},dropItems:function(e,t,a){var n=1;a&&(n=a.itemNum);var o=null,s=null;if(e==i.constant.BATTLE_FLY_TYPE_KEY)o=this.gameBattleUIObj.boxIconNode.convertToWorldSpaceAR(cc.v2(0,0));else if(e==i.constant.BATTLE_FLY_TYPE_PIECE){var r=a.itemId;if(!(r=i.templateManager.getHeroCardDataById(r)))return;for(var c=r.heroId,l=0,d=0;d<this.gameBattleUIObj.headObjList.length;d++)if(this.gameBattleUIObj.headObjList[d].obj.heroData.id==c){l=d;break}if(i.Logger.debug("fly hero piece headIndex = "+l),l>=this.gameBattleUIObj.headObjList.length)return;o=this.gameBattleUIObj.headObjList[l].node.convertToWorldSpaceAR(cc.v2(0,0)),s={obj:this.gameBattleUIObj.headObjList[l],headIndex:l}}else if(e==i.constant.BATTLE_FLY_TYPE_SKILL_PIECE){if(0==this.gameBattleUIObj.headObjList.length)return;if(r=a.itemId,!i.templateManager.getSkillCardById(r))return;i.Logger.debug("fly skill piece headIndex = 0"),o=this.gameBattleUIObj.headObjList[0].node.convertToWorldSpaceAR(cc.v2(0,0)),s={obj:this.gameBattleUIObj.headObjList[0],headIndex:0}}for(var h=0;h<n;h++)this.getDropNode().getComponent("DropItemRender").init(e,t,a,o,h,s)},getDropNode:function(){if(!this.dropPool){this.dropPool=[];for(var e=0;e<i.constant.DROP_POOL_SIZE;e++){var t=cc.instantiate(this.gameDropPrefab);this.dropPool.push(t),t.active=!1,this.gameBattleUI.addChild(t,i.constant.LAYER_GAME_UI)}}if(this.dropItemStrat=!0,this.dropPool.length<=0){var a=cc.instantiate(this.gameDropPrefab);return this.gameBattleUI.addChild(a,i.constant.LAYER_GAME_UI),a}return a=this.dropPool[0],this.dropPool.splice(0,1),a},pushDropNode:function(e){this.dropItemStrat=!1,e.active=!1,this.dropPool.push(e)},getWaveRatio:function(){return 0==this.curWaveIndex?0:this.curWaveIndex/this.waveDataList.length},updateNextWave:function(){var e=this.curWaveIndex;return this.updateWave(++e)},updateWave:function(e){if(i.battleScene.setWaveAreadyDropKey(!1),e<this.waveDataList.length){this.isCheckSkillPageShow=!0,this.isCheckBoxPageShow=!0,this.showBoxPageEnd=!1,this.nextWaveStartTime=-1,this.curWaveIndex=e,this.curWaveData=this.waveDataList[this.curWaveIndex],this.curWaveNatureData=this.waveNatureDataList[this.curWaveIndex],this.hpRate=this.curWaveNatureData.hpRate/1e4,this.attackRate=this.curWaveNatureData.attackRate/1e4,this.ironRate=this.curWaveNatureData.ironRate/1e4,this.isAllEnemyCreateOver=!1,this.maxNextWaveTime=this.curWaveData.wellenTimeInterval/1e3,this.curNextWaveTime=-1,this.nextWaveHeart=this.curWaveData.lifeTrigger;for(var t=0;t<this.gameHeroObjList.length;t++)this.gameHeroObjList[t].updatePhysicalAtk(),this.gameHeroObjList[t].updateMagicAtk();this.curCreateEnemyDataList=[];for(var a=0;a<this.curWaveData.troopList.length;a++){var n={troopId:this.curWaveData.troopList[a][0],routeGroup:i.templateManager.getRouteDataById(this.curWaveData.troopList[a][1]).routeGroup,needTime:this.curWaveData.troopList[a][2]/1e3,curTime:0,curFrameIndex:0,isOver:!1,enemyList:this.curWaveData.enemyList[a]};this.curCreateEnemyDataList.push(n)}return!0}return!1},setOperateState:function(e){switch(this.curOperateState=e,this.curOperateState){case i.constant.OPERATE_STATE_TOWER:i.battleScene.setCurHeroIndex(-1),this.showGameHeroOperate(!1),i.battleScene.gameMapObj&&i.battleScene.gameMapObj.hideRedLine(!0);break;case i.constant.OPERATE_STATE_HERO:this.showGameHeroOperate(!1),i.battleScene.gameTowerControl.active&&i.battleScene.gameTowerControlObj.hideControl();break;case i.constant.OPERATE_STATE_SKILL:this.showGameHeroOperate(!0),i.battleScene.gameMapObj&&i.battleScene.gameMapObj.hideRedLine(!0),i.battleScene.gameTowerControl.active&&i.battleScene.gameTowerControlObj.hideControl(),i.battleScene.setCurHeroIndex(-1)}},setGameState:function(e){if(this.curState!=e)switch(this.curState=e,this.curState){case i.constant.GAME_STATE_READY:i.guideManager.cleanGuideData(),i.gameScene.removeAllBubble(),i.battleScene.gameBattleUIObj.checkBoxBubble(),this.checkStartPopUp(),this.checkBattleGuide(),this.checkBattleMusic();break;case i.constant.GAME_STATE_START:i.battleScene.gameBattleUIObj.battleStartBubbleObj&&(i.battleScene.gameBattleUIObj.battleStartBubbleObj.closeOtherBubble(),i.battleScene.gameBattleUIObj.battleStartBubbleObj=null),this.hidWaveStartTips();break;case i.constant.GAME_STATE_OVER:}else i.Logger.debug("\u5e72\u561b\u8981\u91cd\u590d\u8bbe\u7f6e\u72b6\u6001 state = "+e)},checkBattleTriggerGuide:function(){if(i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_SKILL_CALL_2)){i.guideManager.m_guideSkillEnemyObj=null;for(var e=!1,t=0;t<this.enemyList.length;t++){var a=this.enemyList[t].getComponent("GameEnemy");if(a.isNearEnd(i.constant.DISTANCE_TYPE_CALL_2)){i.guideManager.skillTargetEnemyObj=a,e=!0,i.guideManager.m_guideSkillEnemyObj=a;break}}e&&(i.battleScene.gameBattleUIObj.attrNodeObj.interruptDetail(),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_SKILL_CALL_2_1,i.battleScene.gameBattleUIObj.skillObjList[1].node))}if(i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_SKILL_SEND_1)){i.guideManager.m_guideSkillEnemyObj=null;for(var n=!1,o=0;o<this.enemyList.length;o++){var s=this.enemyList[o].getComponent("GameEnemy");if(s.isNearEnd(i.constant.DISTANCE_TYPE_SEND_1)){i.guideManager.skillTargetEnemyObj=s,n=!0,i.guideManager.m_guideSkillEnemyObj=s;break}}n&&i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_SKILL_SEND_1_1,i.battleScene.gameBattleUIObj.skillObjList[2].node)}if(i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_SKILL_SEND_2)){i.guideManager.m_guideSkillEnemyObj=null;for(var r=!1,c=0;c<this.enemyList.length;c++){var l=this.enemyList[c].getComponent("GameEnemy");if(l.isNearEnd(i.constant.DISTANCE_TYPE_SEND_2)){i.guideManager.skillTargetEnemyObj=l,r=!0,i.guideManager.m_guideSkillEnemyObj=l;break}}r&&(i.battleScene.gameBattleUIObj.attrNodeObj.interruptDetail(),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_SKILL_SEND_2_1,i.battleScene.gameBattleUIObj.skillObjList[2].node))}},checkBattleGuide:function(){var e=!1;if(i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_INSTANCE_1)?(i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_1_1),e=!0):i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_INSTANCE_2)&&1===this.curChapter&&2===this.curInstance&&(this.gameTowerList[1].setTowerShow(!1),this.gameTowerList[2].setTowerShow(!1),this.gameTowerList[7].setTowerShow(!1),this.gameTowerList[8].setTowerShow(!1),this.gameTowerList[9].setTowerShow(!1)),1===this.curChapter&&(this.curInstance<=2&&!i.guideManager.isOtherGuideFinished(i.constant.GUIDE_TYPE_INSTANCE_3)&&0<i.battleScene.gameBattleUIObj.skillObjList.length&&i.battleScene.gameBattleUIObj.skillObjList[0].setLock(),this.curInstance<=3&&!i.guideManager.isOtherGuideFinished(i.constant.GUIDE_TYPE_SKILL_CALL_1)&&1<i.battleScene.gameBattleUIObj.skillObjList.length&&i.battleScene.gameBattleUIObj.skillObjList[1].setLock(),this.curInstance<=5&&!i.guideManager.isOtherGuideFinished(i.constant.GUIDE_TYPE_SKILL_SEND_1)&&2<i.battleScene.gameBattleUIObj.skillObjList.length&&i.battleScene.gameBattleUIObj.skillObjList[2].setLock()),i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_SKILL_CALL_1)&&1===this.curChapter&&4===this.curInstance&&i.battleScene.gameBattleUIObj.skillObjList[1].setLock(),i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_SKILL_SEND_1)&&1===this.curChapter&&6===this.curInstance&&i.battleScene.gameBattleUIObj.skillObjList[2].setLock(),i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_INSTANCE_2)&&1===this.curChapter&&2===this.curInstance&&i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_2_1),i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_INSTANCE_3)&&1===this.curChapter&&3===this.curInstance&&(i.battleScene.gameBattleUIObj.skillObjList[0].setLock(),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_3_1)),e)for(var t=0;t<this.gameTowerList.length;t++)this.gameTowerList[t].setTowerShow(!1)},showAllTower:function(){for(var e=0;e<this.gameTowerList.length;e++)this.gameTowerList[e].setTowerShow(!0)},guideOver:function(e){if(e===i.constant.GUIDE_TYPE_INSTANCE_4_6)for(var t=0;t<this.gameTowerList.length;t++)this.gameTowerList[t].updateArrow()},isCanTryHero:function(e,t){return i.player.heroModule.getHeroTryCount(e)<t},getTryHeroId:function(e,t,a){var n=i.templateManager.getGameParamValue("tryMaxTimes"),o=a?n[1]:n[0];i.battleScene.curChapter==i.constant.YEAR_MONSTER_CHAPTER_ID&&(o=i.templateManager.getGameParamValue("nianTryMaxTimes"));for(var s=0;s<5;s++){var r=e[i.Utils.getRandomInt(0,e.length-1)];if(t.indexOf(r)<0&&this.isCanTryHero(r,o))return r}for(var c=0;c<e.length;c++){var l=e[c];if(t.indexOf(l)<0&&this.isCanTryHero(l,o))return l}return-1},checkTryHeroId:function(){if(0<this.tryHeroId)return this.tryHeroId;var e=!i.player.instanceModule.isPassInstance(this.curChapter,this.curInstance),t=this.instanceData.loseTryTimes||99999,a=this.instanceData.tryHeroList||[],n=this.instanceData.loseTryHeroList||[],o=i.player.heroModule.getAlreadyUnlockHeroList(),s=i.player.instanceModule.getNewInstanceLoseCount(),r=!1;return(a=(r=!!(e&&t<=s)||r)?n:a)&&0<a.length&&(this.tryHeroId=this.getTryHeroId(a,o,r),i.Logger.debug("isNeedShowTryHero this.tryHeroId = "+this.tryHeroId),this.tryHeroId),this.tryHeroId},isNeedShowTryHero:function(){return i.Logger.debug("isNeedShowTryHero"),!!this.isCheckHeroTry&&(this.isCheckHeroTry=!1,0<this.tryHeroId)},isCanUseTower:function(e,t){for(var i=0;i<e.length;i++)if(e[i][0]==t&&0<e[i][1])return!0;return!1},isNeedLimitTower:function(){if(!this.isCheckLimitTower)return!1;if(this.isCheckLimitTower=!1,i.battleScene.curChapter!=i.constant.YEAR_MONSTER_CHAPTER_ID)return!1;this.limitTowerList=[];for(var e=i.battleScene.instanceData.towerMaxLevel,t=i.constant.TOWER_TYPE_ARROW;t<=i.constant.TOWER_TYPE_MAGIC;t++){var a=t;this.isCanUseTower(e,a)||this.limitTowerList.push(a)}return 0<this.limitTowerList.length},checkStartPopUp:function(){if(!this.areadyOpenStarBuff&&this.instanceData.isStartBuff)i.gameScene.showPage(i.pageConstant.PAGE_TYPE_BATTLE_START_BUFF,{buffsDataList:this.instanceData.startBuffList}),this.areadyOpenStarBuff=!0;else if(this.isNeedLimitTower())i.gameScene.showPage(i.pageConstant.PAGE_TYPE_LIMIT_TOWER,{limitTowerList:this.limitTowerList});else if(this.isNeedShowTryHero())i.Logger.debug("show PAGE_TYPE_HERO_TRY"),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_HERO_TRY,{heroId:this.tryHeroId});else if(0<i.player.towerModule.getIsHaveWait()){var e=i.player.towerModule.getIsHaveWait();i.gameScene.showPage(i.pageConstant.PAGE_TYPE_HERO_TOWER_UNLOCK,{heroId:e,type:i.constant.TOWER_UNLOCK_PAGE_UNLOCK}),i.player.towerModule.putAreadyOpenList(e)}else if(this.instanceData.newEnemy&&i.player.instanceModule.getInstanceCanShow(this.curChapter,this.curInstance))i.gameScene.showPage(i.pageConstant.PAGE_TYPE_BATTLE_NEW_ENEMY,{instanceData:this.instanceData}),i.player.instanceModule.setInstanceShowMap(this.curChapter,this.curInstance);else if(1===this.curChapter&&4===this.curInstance&&i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_INSTANCE_4))i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_4_1);else if(1===this.curChapter&&5===this.curInstance&&i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_INSTANCE_5)&&!this.isGuide_5_1)i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_5_0),this.isGuide_5_1=!0;else if(1===this.curChapter&&4===this.curInstance&&i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_INSTANCE_4_4))i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_4_4,i.battleScene.gameTowerList[2].node);else if(1===this.curChapter&&6===this.curInstance&&i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_INSTANCE_6)&&0<this.gameHeroObjList.length)i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_6_1,this.gameHeroObjList[0].node);else if(1===this.curChapter&&7===this.curInstance&&i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_INSTANCE_7)&&!this.isGuide_7_1){this.isCheckTowerUpgradeGuide=!0,this.isGuide_7_1=!0;for(var t=0;t<i.battleScene.gameTowerList.length;t++){var a=i.battleScene.gameTowerList[t];a.getLevel()===i.constant.TOWER_STATE_BUILD_3&&3===a.curType&&a.arrowNode.active&&i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_7_1,a.node)}}else this.gameBattleUIObj.checkVipAddIron(i.player.vipModule.getVipOutIronNum()),this.checkPlotGroup(i.constant.PLOT_TYPE_ENTER),1===this.curChapter&&(e=i.templateManager.getGameParamValue("instanceButtonTipsNum"),this.curInstance>=e[0]&&this.curInstance<=e[1]&&this.gameBattleUIObj.showBattleStartBubble())},setStartBuffs:function(e,t){for(var a=[],n=[],o=0;o<e.length;o++){var s=e[o];this.startBuffs[s.id]=s.num,s.id===i.constant.START_BUFF_IRON&&this.addIron(s.num),a.push(s.id)}for(var r=0;r<t.length;r++){var c=t[r];n.push(c.id)}},getStartBuffs:function(){return this.startBuffs},onLoadRes:function(){(new Date).getTime(),i.gameScene.startBattleTime,this.addLoadingPercent(i.constant.LOADING_INIT_DATA),this.gameMap=cc.instantiate(this.gameMapPrefab),i.battleNode.addChild(this.gameMap,i.constant.LAYER_GAME_BG),this.gameMapObj=this.gameMap.getComponent("GameMap"),this.gameMapObj.initData(),this.gameMapObj.loadMapAtlas(),this.gameMapObj.loadMapData(),this.loadGameSpine(),this.loadGameBulletPrefab(),(new Date).getTime(),this.loadIndex=1,this.initWaveStartTips(),(new Date).getTime()},cleanBattleRes:function(){if(i.Logger.debug("cleanBattleRes"),this.tryHeros=[],this.gameHeroObjList=[],this.gameMapObj&&this.gameMapObj.cleanRes(),this.needReleaseAniList){for(var e=0;e<this.needReleaseAniList.length;e++){var t=this.bulletPrefabMap[this.needReleaseAniList[e]];t&&(i.Logger.debug("release prefab key = "+this.needReleaseAniList[e]),cc.loader.release(cc.loader.getDependsRecursively(t)),this.bulletPrefabMap[this.needReleaseAniList[e]]=null)}this.needReleaseAniList=[]}var a=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_BATTLE_NEW_ENEMY);if(a&&a.node.destroy(),i.gameScene.pageMap[i.pageConstant.PAGE_TYPE_BATTLE_NEW_ENEMY]=null,this.needReleaseSpineList&&this.spineMap){for(var n=0;n<this.needReleaseSpineList.length;n++){var o=this.spineMap[this.needReleaseSpineList[n]];o&&(i.Logger.debug("release spine key = "+this.needReleaseSpineList[n]),o=cc.loader.getDependsRecursively(o),cc.loader.release(o),this.spineMap[this.needReleaseSpineList[n]]=null,i.mainScene._towerSpineCache&&(i.mainScene._towerSpineCache[this.needReleaseSpineList[n]]=null))}this.needReleaseSpineList=[]}if(i.battleNode.destroyAllChildren(),this.spineMap&&i.player.commonModule.isLowIosDevice())for(var s in this.spineMap){var r=s.substring(0,19);("effect/battle/enemy"==r||"effect/battle/hero/"==r&&"effect/battle/hero/hero9"!=s)&&(r=this.spineMap[s],r=cc.loader.getDependsRecursively(r),cc.loader.release(r),this.spineMap[s]=null,i.mainScene._towerSpineCache&&i.mainScene._towerSpineCache[s]&&(i.mainScene._towerSpineCache[s]=null))}this.gameBossWarn&&(cc.loader.release(cc.loader.getDependsRecursively("effect/ui/BossPage")),this.gameBossWarn=null,this.gameBossWarnAni=null),this.waveStartTipsList=[],this.cacheBulletList=[],this.cacheSoldierList=[],this.cacheFlyHpList=[],this.cacheDropTipsList=[],this.cacheSkillTipsList=[],this.cacheIconTipsList=[],this.cacheEffectDownList=[],this.cacheBulletEffectList=[],this.cacheEnemyList=[],this.soldierList=[],this.bulletList=[],this.gameTowerList=[]},addReleaseAni:function(e){this.needReleaseAniList.indexOf(e)<0&&this.needReleaseAniList.push(e)},loadGameBulletPrefab:function(){var e=this,t=1!=this.curChapter||1!=this.curInstance;this.gameMapObj.setInitBulletFinish(!1),this.bulletPrefabMap||(this.bulletPrefabMap={});var a=[{path:i.constant.PREFAB_PATH_BULLET,name:"tower_bullet01_1_hit"},{path:i.constant.PREFAB_PATH_BATTLE,name:"battle_death"}];t&&(a.push({path:i.constant.PREFAB_PATH_BULLET,name:"tower_bullet01_2_hit"}),a.push({path:i.constant.PREFAB_PATH_BULLET,name:"tower_bullet01_3_hit"}),a.push({path:i.constant.PREFAB_PATH_BULLET,name:"tower_bullet03_hit"}),a.push({path:i.constant.PREFAB_PATH_BULLET,name:"tower_bullet02_hit"}),a.push({path:i.constant.PREFAB_PATH_BULLET,name:"tower_bullet02_1_hit"}),a.push({path:i.constant.PREFAB_PATH_BULLET,name:"tower_bullet02_2_hit"}),a.push({path:i.constant.PREFAB_PATH_BATTLE,name:"battle_dizziness"}),a.push({path:i.constant.PREFAB_PATH_BATTLE,name:"battle_palsy"}),a.push({path:i.constant.PREFAB_PATH_BATTLE,name:"battle_ice"}),a.push({path:i.constant.PREFAB_PATH_BATTLE,name:"battle_charm"}),a.push({path:i.constant.PREFAB_PATH_BATTLE,name:"battle_fire"}),a.push({path:i.constant.PREFAB_PATH_BATTLE,name:"battle_poison"}),a.push({path:i.constant.PREFAB_PATH_BATTLE,name:"enemy_speedup"}),a.push({path:i.constant.PREFAB_PATH_BATTLE,name:"battle_slowdown"}),a.push({path:i.constant.PREFAB_PATH_BATTLE,name:"battle_cure"}),a.push({path:i.constant.PREFAB_PATH_BATTLE,name:"battle_fear"}),a.push({path:i.constant.PREFAB_PATH_BATTLE,name:"battle_silence"}),a.push({path:i.constant.PREFAB_PATH_BATTLE,name:"hero_deliver"}),a.push({path:i.constant.PREFAB_PATH_BATTLE,name:"enemy_call"}),a.push({path:i.constant.PREFAB_PATH_BATTLE,name:"tower_upgrade"})),this.needReleaseAniList=[],this.needReleaseAniList.push(i.constant.PREFAB_PATH_BULLET+"tower_bullet03_hit"),this.needReleaseAniList.push(i.constant.PREFAB_PATH_BATTLE+"battle_fire"),this.needReleaseAniList.push(i.constant.PREFAB_PATH_BATTLE+"battle_dizziness"),this.needReleaseAniList.push(i.constant.PREFAB_PATH_BATTLE+"battle_death"),this.isHaveDrivingSkill(i.constant.DRIVING_SKILL_BLOW)&&a.push({path:i.constant.PREFAB_PATH_BULLET,name:"hero1_skill"}),this.isHaveDrivingSkill(i.constant.DRIVING_SKILL_SEND)&&a.push({path:i.constant.PREFAB_PATH_BULLET,name:"skill_runes"}),this.isHaveDrivingSkill(i.constant.DRIVING_SKILL_LANDMINE)&&(o=this.getPrefabName("skill_boom"),a.push({path:i.constant.PREFAB_PATH_BULLET,name:o}),this.needReleaseAniList.push(i.constant.PREFAB_PATH_BULLET+o)),this.isHaveDrivingSkill(i.constant.DRIVING_SKILL_ARROW_RAIN)&&(a.push({path:i.constant.PREFAB_PATH_BULLET,name:"skill_poisonArrow"}),this.needReleaseAniList.push(i.constant.PREFAB_PATH_BULLET+"skill_poisonArrow")),this.isHaveDrivingSkill(i.constant.DRIVING_SKILL_ENEMY_SLOW)&&a.push({path:i.constant.PREFAB_PATH_BULLET,name:"skill_blizzard"}),this.isHaveDrivingSkill(i.constant.DRIVING_SKILL_HERO_QUICK)&&(s=this.getPrefabName("skill_speedUp"),a.push({path:i.constant.PREFAB_PATH_BULLET,name:s}),this.needReleaseAniList.push(i.constant.PREFAB_PATH_BULLET+s));var n=this.getCurAllTowerHeros(),o=(t=i.player.heroModule.getBattlePioneerHero(),i.player.heroModule.getBattleAdPioneerHero()),s=[];t&&s.push(Math.floor(t)),o&&s.push(Math.floor(o)),i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_INSTANCE_3)&&1===this.curChapter&&3===this.curInstance&&s.push(i.constant.HERO_ID_LVBU),this.checkLoadHeroPrefab(a,n,!1),this.checkLoadHeroPrefab(a,s,!0);for(var r=0,c=a.length;r<c;r++)for(var l=r+1,d=a.length;l<d;l++)a[r].path==a[l].path&&a[r].name==a[l].name&&(a.splice(l,1),i.Logger.debug("\u6709\u91cd\u590d\u9884\u5236\uff01 path = "+a[r].path+" name = "+a[r].name),l--,d--);for(var h=0,u=0,p=0;p<a.length;p++)!function(t){var n=a[t].name,o=a[t].path+n;e.bulletPrefabMap[n]||(h++,cc.loader.loadRes(o,cc.Prefab,function(t,a){t?(cc.error(t),i.Logger.debug("loadGameBulletPrefab error prefabUrl = "+o)):i.Logger.debug("loadGameBulletPrefab success prefabUrl = "+o),e.addBulletPrefab(o,a,t),++u===h&&(e.gameMapObj.setInitBulletFinish(!0),e.gameMapObj.checkMapCreate())}))}(p);u===h&&(this.gameMapObj.setInitBulletFinish(!0),this.gameMapObj.checkMapCreate())},checkLoadHeroPrefab:function(e,t,a){for(var n=0;n<t.length;n++)switch(t[n]){case i.constant.HERO_ID_GUANYU:case i.constant.HERO_ID_GUANYU_VIP:i.Logger.debug("\u5173\u7fbd\u6280\u80fd\u7279\u6548 isBattleHero = "+a),a?e.push({path:i.constant.PREFAB_PATH_BULLET,name:"hero1_slash_hit"}):(e.push({path:i.constant.PREFAB_PATH_BULLET,name:"tower_bullet03_4"}),e.push({path:i.constant.PREFAB_PATH_BULLET,name:"tower_bullet03_5"}),e.push({path:i.constant.PREFAB_PATH_BULLET,name:"tower_bullet03_4_boomUp"}),e.push({path:i.constant.PREFAB_PATH_BULLET,name:"tnt_smoke_big"}),e.push({path:i.constant.PREFAB_PATH_BULLET,name:"tnt_smoke"}),this.needReleaseAniList.push(i.constant.PREFAB_PATH_BULLET+"tower_bullet03_4_boomUp"));break;case i.constant.HERO_ID_ZHANGFEI:case i.constant.HERO_ID_ZHANGFEI_VIP:break;case i.constant.HERO_ID_LIUBEI:i.Logger.debug("\u5218\u5907\u6280\u80fd\u7279\u6548 isBattleHero = "+a),a?e.push({path:i.constant.PREFAB_PATH_BULLET,name:"hero3_skill_sword"}):(e.push({path:i.constant.PREFAB_PATH_BULLET,name:"tower_bullet03_6_stand"}),e.push({path:i.constant.PREFAB_PATH_BULLET,name:this.getPrefabName("tower_bullet03_6_hit_up")}),e.push({path:i.constant.PREFAB_PATH_BULLET,name:this.getPrefabName("tower_bullet03_6_hit_down")}),this.needReleaseAniList.push(i.constant.PREFAB_PATH_BULLET+this.getPrefabName("tower_bullet03_6_hit_up")),this.needReleaseAniList.push(i.constant.PREFAB_PATH_BULLET+this.getPrefabName("tower_bullet03_6_hit_down")));break;case i.constant.HERO_ID_XIAOQIAO:i.Logger.debug("\u5c0f\u4e54\u6280\u80fd\u7279\u6548 isBattleHero = "+a),a?(e.push({path:i.constant.PREFAB_PATH_BULLET,name:"hero7_skill_hit"}),this.needReleaseAniList.push(i.constant.PREFAB_PATH_BULLET+"hero7_skill_hit")):(e.push({path:i.constant.PREFAB_PATH_BULLET,name:this.getPrefabName("hero7_tower_skill_hit")}),e.push({path:i.constant.PREFAB_PATH_BULLET,name:this.getPrefabName("hero7_tower_skill_hit_down")}),e.push({path:i.constant.PREFAB_PATH_BULLET,name:this.getPrefabName("battle_poisonring")}),this.needReleaseAniList.push(i.constant.PREFAB_PATH_BULLET+this.getPrefabName("hero7_tower_skill_hit")),this.needReleaseAniList.push(i.constant.PREFAB_PATH_BULLET+this.getPrefabName("battle_poisonring")),this.needReleaseAniList.push(i.constant.PREFAB_PATH_BULLET+this.getPrefabName("hero7_tower_skill_hit_down"))),e.push({path:i.constant.PREFAB_PATH_BULLET,name:"tower_bullet01_11"}),e.push({path:i.constant.PREFAB_PATH_BULLET,name:"tower_bullet01_11_hit"}),e.push({path:i.constant.PREFAB_PATH_BULLET,name:"tower_bullet01_11_Insert"});break;case i.constant.HERO_ID_HUANGZHONG:i.Logger.debug("\u9ec4\u5fe0\u6280\u80fd\u7279\u6548 isBattleHero = "+a),a||(e.push({path:i.constant.PREFAB_PATH_BULLET,name:"tower_bullet01_10"}),e.push({path:i.constant.PREFAB_PATH_BULLET,name:"tower_bullet01_10_hit"}),e.push({path:i.constant.PREFAB_PATH_BULLET,name:"hero5_tower_skill_aim"})),e.push({path:i.constant.PREFAB_PATH_BULLET,name:"tower_bullet01_5_hit"}),e.push({path:i.constant.PREFAB_PATH_BULLET,name:"tower_bullet01_9_hit"});break;case i.constant.HERO_ID_LVBU:i.Logger.debug("\u5415\u5e03\u6280\u80fd\u7279\u6548 isBattleHero = "+a),a&&(e.push({path:i.constant.PREFAB_PATH_BULLET,name:"hero8_skill_hit"}),this.needReleaseAniList.push(i.constant.PREFAB_PATH_BULLET+"hero8_skill_hit"));break;case i.constant.HERO_ID_ZHUGELIANG:case i.constant.HERO_ID_ZHUGELIANG_VIP:i.Logger.debug("\u8bf8\u845b\u4eae\u6280\u80fd\u7279\u6548 isBattleHero = "+a),a?e.push({path:i.constant.PREFAB_PATH_BULLET,name:"skill_lighting"}):(e.push({path:i.constant.PREFAB_PATH_BULLET,name:"hero6_tower_skill_hit"}),e.push({path:i.constant.PREFAB_PATH_BULLET,name:"hero6_tower_skill_hit_down"}),this.needReleaseAniList.push(i.constant.PREFAB_PATH_BULLET+"hero6_tower_skill_hit"),this.needReleaseAniList.push(i.constant.PREFAB_PATH_BULLET+"hero6_tower_skill_hit_down")),e.push({path:i.constant.PREFAB_PATH_BULLET,name:"tower_bullet02_3_sputtering"}),e.push({path:i.constant.PREFAB_PATH_BULLET,name:"bullet_zgl"});break;case i.constant.HERO_ID_DIAOCHAN:i.Logger.debug("\u8c82\u8749\u6280\u80fd\u7279\u6548 isBattleHero = "+a),a?e.push({path:i.constant.PREFAB_PATH_BULLET,name:"tower_bullet06_hit"}):(e.push({path:i.constant.PREFAB_PATH_BULLET,name:"hero9_tower_skill_blizzard"}),this.needReleaseAniList.push(i.constant.PREFAB_PATH_BULLET+"hero9_tower_skill_blizzard")),e.push({path:i.constant.PREFAB_PATH_BULLET,name:"tower_bullet06"}),e.push({path:i.constant.PREFAB_PATH_BULLET,name:"bullet_dc"});break;case i.constant.HERO_ID_ZHANGJIAO:i.Logger.debug("\u5f20\u89d2\u6280\u80fd\u7279\u6548 isBattleHero = "+a),a||(e.push({path:i.constant.PREFAB_PATH_BULLET,name:"hero10_skill_lightningChain"}),this.needReleaseAniList.push(i.constant.PREFAB_PATH_BULLET+"hero10_skill_lightningChain")),e.push({path:i.constant.PREFAB_PATH_BULLET,name:"hero10_lighting"}),this.needReleaseAniList.push(i.constant.PREFAB_PATH_BULLET+"hero10_lighting");break;case i.constant.HERO_ID_CAOCAO:i.Logger.debug("\u66f9\u64cd\u6280\u80fd\u7279\u6548 isBattleHero = "+a),a||(e.push({path:i.constant.PREFAB_PATH_BULLET,name:"tower_bullet09"}),e.push({path:i.constant.PREFAB_PATH_BULLET,name:"tower_bullet09_1"}),e.push({path:i.constant.PREFAB_PATH_BULLET,name:"hero12_tower_skill_smoke"}),this.needReleaseAniList.push(i.constant.PREFAB_PATH_BULLET+"hero12_tower_skill_smoke"));break;case i.constant.HERO_ID_SUNSHANGXIANG:i.Logger.debug("\u5b59\u5c1a\u9999\u6280\u80fd\u7279\u6548 isBattleHero = "+a),a||(e.push({path:i.constant.PREFAB_PATH_BULLET,name:"tower_bullet10"}),e.push({path:i.constant.PREFAB_PATH_BULLET,name:"tower_bullet10_hit"}),this.needReleaseAniList.push(i.constant.PREFAB_PATH_BULLET+"kill_boom")),e.push({path:i.constant.PREFAB_PATH_BULLET,name:"tower_bullet07_hit"});break;case i.constant.HERO_ID_ZHAOYUN:case i.constant.HERO_ID_DIANWEI:}},addBulletPrefab:function(e,t,i){this.bulletPrefabMap||(this.bulletPrefabMap={}),this.bulletPrefabMap[e]||i||(this.bulletPrefabMap[e]=t)},getBulletPrefab:function(e,t){var a,n=this,o=this,s=this.bulletPrefabMap[e];s?t(s):(i.Logger.warn("prefab not found, prefabUrl = "+(a=e)),cc.loader.loadRes(a,cc.Prefab,function(s,r){return s?(i.Logger.error("==== load prefab error: ====\n",s.stack),void o.getBulletPrefab(e,t)):(n.bulletPrefabMap[a]=r,void t(r))}))},isHaveDrivingSkill:function(e){for(var t=i.player.skillModule.getBattleUseSkillList(),a=0;a<t.length;a++){var n=t[a].skillId;if(i.Logger.debug("i = "+a+" skillId = "+n),n==e)return!0}return!1},loadGameSpine:function(){var e=this,t=1!=this.curChapter||1!=this.curInstance;this.spineMap||(this.spineMap={}),this.gameMapObj.setLoadSpineState(!1),this.needReleaseSpineList=[];var a=[{path:i.constant.SPINE_PATH_HERO,name:"tower3_1_soldier"}];t&&(a.push({path:i.constant.SPINE_PATH_HERO,name:"tower3_2_soldier"}),a.push({path:i.constant.SPINE_PATH_HERO,name:"tower3_3_soldier"})),this.isHaveDrivingSkill(i.constant.DRIVING_SKILL_RECRUIT)&&(a.push({path:i.constant.SPINE_PATH_HERO,name:"soldier1"}),this.needReleaseSpineList.push(i.constant.SPINE_PATH_HERO+"soldier1")),this.isHaveDrivingSkill(i.constant.DRIVING_SKILL_RECRUIT_FAR)&&(a.push({path:i.constant.SPINE_PATH_HERO,name:"soldier2"}),this.needReleaseSpineList.push(i.constant.SPINE_PATH_HERO+"soldier2"));var n=i.player.heroModule.getBattlePioneerHero(),o=i.player.heroModule.getBattleAdPioneerHero(),s=[];n&&s.push(n),o&&s.push(o),0<this.tryHeroId&&s.indexOf(this.tryHeroId)<0&&s.push(this.tryHeroId);for(var r=0;r<s.length;r++){var c=i.templateManager.getSoldierDataById(s[r]);c&&(a.push({path:i.constant.SPINE_PATH_HERO,name:c.appearance}),s[r]==i.constant.HERO_ID_SUNSHANGXIANG&&a.push({path:i.constant.SPINE_PATH_HERO,name:"hero4_pet"}))}for(var l=this.getCurAllTowerHeros(),d=0;d<l.length;d++)switch(l[d]){case i.constant.HERO_ID_GUANYU:a.push({path:i.constant.SPINE_PATH_HERO,name:"hero_tower2"}),a.push({path:i.constant.SPINE_PATH_TOWER,name:"tower2_5"}),this.needReleaseSpineList.push(i.constant.SPINE_PATH_TOWER+"tower2_5");break;case i.constant.HERO_ID_GUANYU_VIP:a.push({path:i.constant.SPINE_PATH_HERO,name:"hero_tower2_vip"}),a.push({path:i.constant.SPINE_PATH_TOWER,name:"tower2_5"}),this.needReleaseSpineList.push(i.constant.SPINE_PATH_TOWER+"tower2_5");break;case i.constant.HERO_ID_ZHANGFEI:a.push({path:i.constant.SPINE_PATH_HERO,name:"hero_tower4"}),a.push({path:i.constant.SPINE_PATH_TOWER,name:"tower3_4"}),this.needReleaseSpineList.push(i.constant.SPINE_PATH_TOWER+"tower3_4");break;case i.constant.HERO_ID_ZHANGFEI_VIP:a.push({path:i.constant.SPINE_PATH_HERO,name:"hero_tower4_vip"}),a.push({path:i.constant.SPINE_PATH_TOWER,name:"tower3_4"}),this.needReleaseSpineList.push(i.constant.SPINE_PATH_TOWER+"tower3_4");break;case i.constant.HERO_ID_LIUBEI:a.push({path:i.constant.SPINE_PATH_HERO,name:"hero_tower1"}),a.push({path:i.constant.SPINE_PATH_TOWER,name:"tower2_4"}),this.needReleaseSpineList.push(i.constant.SPINE_PATH_TOWER+"tower2_4");break;case i.constant.HERO_ID_XIAOQIAO:a.push({path:i.constant.SPINE_PATH_HERO,name:"hero_tower7"}),a.push({path:i.constant.SPINE_PATH_TOWER,name:"tower1_5"}),this.needReleaseSpineList.push(i.constant.SPINE_PATH_TOWER+"tower1_5");break;case i.constant.HERO_ID_HUANGZHONG:a.push({path:i.constant.SPINE_PATH_HERO,name:"hero_tower3"}),a.push({path:i.constant.SPINE_PATH_TOWER,name:"tower1_4"}),this.needReleaseSpineList.push(i.constant.SPINE_PATH_TOWER+"tower1_4");break;case i.constant.HERO_ID_LVBU:a.push({path:i.constant.SPINE_PATH_HERO,name:"hero_tower5"}),a.push({path:i.constant.SPINE_PATH_TOWER,name:"tower3_5"}),this.needReleaseSpineList.push(i.constant.SPINE_PATH_TOWER+"tower3_5");break;case i.constant.HERO_ID_ZHUGELIANG:a.push({path:i.constant.SPINE_PATH_HERO,name:"hero_tower8"}),a.push({path:i.constant.SPINE_PATH_TOWER,name:"tower4_5"}),this.needReleaseSpineList.push(i.constant.SPINE_PATH_TOWER+"tower4_5");break;case i.constant.HERO_ID_ZHUGELIANG_VIP:a.push({path:i.constant.SPINE_PATH_HERO,name:"hero_tower8_vip"}),a.push({path:i.constant.SPINE_PATH_TOWER,name:"tower4_5"}),this.needReleaseSpineList.push(i.constant.SPINE_PATH_TOWER+"tower4_5");break;case i.constant.HERO_ID_DIAOCHAN:a.push({path:i.constant.SPINE_PATH_HERO,name:"hero_tower6"}),a.push({path:i.constant.SPINE_PATH_TOWER,name:"tower4_4"}),this.needReleaseSpineList.push(i.constant.SPINE_PATH_TOWER+"tower4_4");break;case i.constant.HERO_ID_SUNSHANGXIANG:a.push({path:i.constant.SPINE_PATH_HERO,name:"hero_tower12"}),a.push({path:i.constant.SPINE_PATH_TOWER,name:"tower1_6"}),this.needReleaseSpineList.push(i.constant.SPINE_PATH_TOWER+"tower1_6");break;case i.constant.HERO_ID_ZHAOYUN:a.push({path:i.constant.SPINE_PATH_HERO,name:"hero_tower9"}),a.push({path:i.constant.SPINE_PATH_TOWER,name:"tower3_6"}),this.needReleaseSpineList.push(i.constant.SPINE_PATH_TOWER+"tower3_6");break;case i.constant.HERO_ID_CAOCAO:a.push({path:i.constant.SPINE_PATH_HERO,name:"hero_tower10"}),a.push({path:i.constant.SPINE_PATH_TOWER,name:"tower2_6"}),this.needReleaseSpineList.push(i.constant.SPINE_PATH_TOWER+"tower2_6");break;case i.constant.HERO_ID_ZHANGJIAO:a.push({path:i.constant.SPINE_PATH_HERO,name:"hero_tower11"}),a.push({path:i.constant.SPINE_PATH_TOWER,name:"tower4_6"}),this.needReleaseSpineList.push(i.constant.SPINE_PATH_TOWER+"tower4_6");break;case i.constant.HERO_ID_DIANWEI:a.push({path:i.constant.SPINE_PATH_HERO,name:"hero_tower13"}),a.push({path:i.constant.SPINE_PATH_TOWER,name:"tower3_7"}),this.needReleaseSpineList.push(i.constant.SPINE_PATH_TOWER+"tower3_7")}for(var h={},u=0;u<this.waveDataList.length;u++)for(var p=this.waveDataList[u].enemyList,g=0;g<p.length;g++)for(var _=0;_<p[g].length;_++)h[p[g][_]]=p[g][_];for(var m=Object.keys(h),E=0;E<m.length;E++){var T=i.templateManager.getEnemyDataById(m[E]),f={path:i.constant.SPINE_PATH_COMMON+T.path+"/",name:T.appearance};i.Logger.debug("i = "+E+" enemyData.appearance = "+T.appearance),a.push(f),this.needReleaseSpineList.push(i.constant.SPINE_PATH_COMMON+T.path+"/"+T.appearance);var S=T.nextEnemy;S&&(f=i.templateManager.getEnemyDataById(S),T={path:i.constant.SPINE_PATH_COMMON+f.path+"/",name:f.appearance},a.push(T),this.needReleaseSpineList.push(i.constant.SPINE_PATH_COMMON+f.path+"/"+f.appearance),i.Logger.debug("nextEnemy = "+S+" nextEnemyData.path = "+f.path+" nextEnemyData.appearance = "+f.appearance))}for(var A=t?3:1,I=i.JsonData.Tower,y=0;y<I.length;y++){var P,v=I[y];v.level<=A&&(P={path:i.constant.SPINE_PATH_TOWER,name:v.appearance},a.push(P),1<v.level&&this.needReleaseSpineList.push(i.constant.SPINE_PATH_TOWER+v.appearance))}for(var L=0,N=a.length;L<N;L++)for(var b=L+1,R=a.length;b<R;b++)a[L].path==a[b].path&&a[L].name==a[b].name&&(a.splice(b,1),i.Logger.debug("\u6709\u91cd\u590dspine\uff01 = "+a[L].name),b--,R--);for(var C=0,D=0,k=0;k<a.length;k++)!function(t){var n=a[t].name,o=a[t].path+n;e.spineMap[o]||(C++,i.Logger.debug("start load spineUrl = "+o),cc.loader.loadRes(o,sp.SkeletonData,function(t,a){t?(i.Logger.debug("loadGameSpine error spineUrl = "+o),cc.error(t)):i.Logger.debug("loadGameSpine success spineUrl = "+o),e.addSpine(o,a,t),++D===C&&(e.gameMapObj.setLoadSpineState(!0),e.gameMapObj.checkMapCreate())}))}(k);D===C&&(this.gameMapObj.setLoadSpineState(!0),this.gameMapObj.checkMapCreate())},addSpine:function(e,t,i){this.spineMap||(this.spineMap={}),this.spineMap[e]||i||(this.spineMap[e]=t)},getSpineData:function(e,t){var a=this,n=this,o=this.spineMap[e];o?t(o):(i.Logger.warn("SkeletonData not found, spineUrl = "+(o=e)),cc.loader.loadRes(o,sp.SkeletonData,function(o,s){return o?(i.Logger.error("==== load flower spine error: ====\n",o.stack),void n.getSpineData(e,t)):(a.spineMap[e]=s,void t(s))}))},initEnemyPool:function(){this.cacheEnemyList=[];for(var e=0;e<20;e++){var t=cc.instantiate(this.gameEnemyPrefab);i.battleNode.addChild(t,i.constant.LAYER_GAME_ENEMY),this.cacheEnemyList.push(t),t.active=!1}},getCacheEnemy:function(){if(this.cacheEnemyList&&0<this.cacheEnemyList.length){var e=this.cacheEnemyList[0];return this.cacheEnemyList.splice(0,1),e.active=!0,e}return e=cc.instantiate(this.gameEnemyPrefab),i.battleNode.addChild(e,i.constant.LAYER_GAME_ENEMY),e.getComponent("GameEnemy"),i.Logger.debug("create2 enemy"),e},giveBackEnemy:function(e){this.giveBackShadow(e.getComponent("GameEnemy").shadowNode),e.active=!1,this.cacheEnemyList.push(e)},createEnemyByData:function(e){(new Date).getTime();var t=this.getCacheEnemy(),i=t.getComponent("GameEnemy"),a=this.getCacheShadow();return i.shadowNode=a,i.initData(e),i.setEnemyCountId(this.enemyId),this.enemyId++,this.enemyList.push(t),(new Date).getTime(),t},initShadowPool:function(){this.cacheShadowList=[];for(var e=0;e<25;e++){var t=new cc.Node,a=this.battleAtlas.getSpriteFrame("enemy_shadow");t.addComponent(cc.Sprite).spriteFrame=a,i.battleNode.addChild(t,i.constant.LAYER_GAME_BG_UP),this.cacheShadowList.push(t),t.active=!1}},getCacheShadow:function(){if(this.cacheShadowList&&0<this.cacheShadowList.length){var e=this.cacheShadowList[0];return this.cacheShadowList.splice(0,1),e.active=!0,e.stopAllActions(),e.opacity=255,e}var t=new cc.Node;return e=this.battleAtlas.getSpriteFrame("enemy_shadow"),t.addComponent(cc.Sprite).spriteFrame=e,i.battleNode.addChild(t,i.constant.LAYER_GAME_BG_UP),i.Logger.debug("create shadow"),t},giveBackShadow:function(e){e.stopAllActions(),e.opacity=255,e.active=!1,this.cacheShadowList.push(e)},initPointPool:function(){this.cachePointList=[];for(var e=0;e<10;e++){var t=new cc.Node,a=this.battleAtlas.getSpriteFrame("move_lightring");t.addComponent(cc.Sprite).spriteFrame=a,i.battleNode.addChild(t,i.constant.LAYER_GAME_BG_UP),this.cachePointList.push(t),t.active=!1}},getCachePoint:function(){if(this.cachePointList&&0<this.cachePointList.length){var e=this.cachePointList[0];return this.cachePointList.splice(0,1),e.active=!0,e.stopAllActions(),e.opacity=255,e}var t=new cc.Node;return e=this.battleAtlas.getSpriteFrame("move_lightring"),t.addComponent(cc.Sprite).spriteFrame=e,i.battleNode.addChild(t,i.constant.LAYER_GAME_BG_UP),i.Logger.debug("create point"),t},giveBackPoint:function(e){e.stopAllActions(),e.opacity=255,e.active=!1,this.cachePointList.push(e)},initBulletPool:function(){this.cacheBulletList=[];for(var e=0;e<30;e++){var t=cc.instantiate(this.gameBulletPrefab);i.battleNode.addChild(t,i.constant.LAYER_PLAYER_BULLET),this.cacheBulletList.push(t),t.active=!1}},getCacheBullet:function(){if(this.cacheBulletList&&0<this.cacheBulletList.length){var e=this.cacheBulletList[0];return this.cacheBulletList.splice(0,1),e.active=!0,e}return e=cc.instantiate(this.gameBulletPrefab),i.battleNode.addChild(e,i.constant.LAYER_PLAYER_BULLET),i.Logger.debug("create bullet"),e},giveBackBullet:function(e){e.active=!1,this.cacheBulletList.push(e)},createBulletByData:function(e){try{var t=this.getCacheBullet();return t.setPosition(e.curPos),t.getComponent("GameBullet").initData(e),this.bulletList.push(t),t}catch(e){return null}},initSkillTipsPool:function(){this.cacheSkillTipsList=[];for(var e=0;e<6;e++){var t=cc.instantiate(this.gameSkillTipsPrefab);i.battleNode.addChild(t,i.constant.LAYER_FLY_HP),this.cacheSkillTipsList.push(t),t.active=!1}},getCacheSkillTips:function(){if(this.cacheSkillTipsList&&0<this.cacheSkillTipsList.length){var e=this.cacheSkillTipsList[0];return this.cacheSkillTipsList.splice(0,1),e.active=!0,e}return e=cc.instantiate(this.gameSkillTipsPrefab),i.battleNode.addChild(e,i.constant.LAYER_FLY_HP),i.Logger.debug("create skillTips"),e},giveBackSkillTips:function(e){e.active=!1,this.cacheSkillTipsList.push(e)},createSkillTipsByData:function(e){var t=this.getCacheSkillTips();return t.setPosition(e.pos),t.getComponent("GameSkillTips").initData(e),t},initFlyHpPool:function(){this.cacheFlyHpList=[];for(var e=0;e<40;e++){var t=cc.instantiate(this.gameFlyHpPrefab);i.battleNode.addChild(t,i.constant.LAYER_FLY_HP),this.cacheFlyHpList.push(t),t.active=!1}},getCacheFlyHp:function(){if(this.cacheFlyHpList&&0<this.cacheFlyHpList.length){var e=this.cacheFlyHpList[0];return this.cacheFlyHpList.splice(0,1),e.active=!0,e}return e=cc.instantiate(this.gameFlyHpPrefab),i.battleNode.addChild(e,i.constant.LAYER_FLY_HP),i.Logger.debug("create flyHp"),e},giveBackFlyHp:function(e){e.active=!1,this.cacheFlyHpList.push(e)},createFlyHpByData:function(e){var t=this.getCacheFlyHp();return e.pos.x<-250?e.pos.x=-250:250<e.pos.x&&(e.pos.x=250),t.setPosition(e.pos),t.getComponent("GameFlyHp").initData(e),t},initDropTipsPool:function(){this.cacheDropTipsList=[];for(var e=0;e<10;e++){var t=cc.instantiate(this.gameDropTipsPrefab);i.battleNode.addChild(t,i.constant.LAYER_FLY_HP),this.cacheDropTipsList.push(t),t.active=!1}},getCacheDropTips:function(){if(this.cacheDropTipsList&&0<this.cacheDropTipsList.length){var e=this.cacheDropTipsList[0];return this.cacheDropTipsList.splice(0,1),e}return e=cc.instantiate(this.gameDropTipsPrefab),i.battleNode.addChild(e,i.constant.LAYER_FLY_HP),i.Logger.debug("create dropTips"),e},giveBackDropTips:function(e){e.active=!1,this.cacheDropTipsList.push(e)},createDropTipsByData:function(e){var t=this.getCacheDropTips();return t.getComponent("DropTips").initData(e),t},initIconTipsPool:function(){this.cacheIconTipsList=[];for(var e=0;e<6;e++){var t=cc.instantiate(this.gameIconTipsPrefab);i.battleNode.addChild(t,i.constant.LAYER_WAVE_TIPS),this.cacheIconTipsList.push(t),t.active=!1}},getCacheIconTips:function(){if(this.cacheIconTipsList&&0<this.cacheIconTipsList.length){var e=this.cacheIconTipsList[0];return this.cacheIconTipsList.splice(0,1),e.active=!0,e}return e=cc.instantiate(this.gameIconTipsPrefab),i.battleNode.addChild(e,i.constant.LAYER_WAVE_TIPS),i.Logger.debug("create iconTips"),e},giveBackIconTips:function(e){e.active=!1,this.cacheIconTipsList.push(e),e=this.iconEffectList.indexOf(e),this.iconEffectList.splice(e,1)},createIconTipsByData:function(e){var t=this.getCacheIconTips();return t.setPosition(e.pos),t.getComponent("GameIconTips").initData(e),this.iconEffectList.push(t),t},initEffectDownPool:function(){this.cacheEffectDownList=[];for(var e=0;e<5;e++){var t=cc.instantiate(this.gameEffectDownPrefab);i.battleNode.addChild(t,i.constant.LAYER_GAME_TOWER),this.cacheEffectDownList.push(t),t.active=!1}},getCacheEffectDown:function(){if(this.cacheEffectDownList&&0<this.cacheEffectDownList.length){var e=this.cacheEffectDownList[0];return this.cacheEffectDownList.splice(0,1),e.active=!0,e}return e=cc.instantiate(this.gameEffectDownPrefab),i.battleNode.addChild(e,i.constant.LAYER_GAME_BG_UP),i.Logger.debug("create effect down"),e},giveBackEffectDown:function(e){e.active=!1,this.cacheEffectDownList.push(e)},createEffectDownByData:function(e){var t=this.getCacheEffectDown();return t.setPosition(e.pos),t.getComponent("GameMapEffectDown").initData(e),t},initBulletEffectPool:function(){this.cacheBulletEffectList=[];for(var e=0;e<80;e++){var t=cc.instantiate(this.gameBulletEffectPrefab);i.battleNode.addChild(t,i.constant.LAYER_BULLET_EFFECT),this.cacheBulletEffectList.push(t),t.active=!1}},getCacheBulletEffect:function(){if(this.cacheBulletEffectList&&0<this.cacheBulletEffectList.length){var e=this.cacheBulletEffectList[0];return this.cacheBulletEffectList.splice(0,1),e.active=!0,e}return e=cc.instantiate(this.gameBulletEffectPrefab),i.battleNode.addChild(e,i.constant.LAYER_BULLET_EFFECT),i.Logger.debug("create bullet effect"),e},giveBackBulletEffect:function(e){e.active=!1,this.cacheBulletEffectList.push(e)},createBulletEffectByData:function(e){var t=this.getCacheBulletEffect();return t.setPosition(e.pos),t.getComponent("GameBulletEffect").initData(e),t},initSoldierPool:function(){this.cacheSoldierList=[];for(var e=0;e<15;e++){var t=cc.instantiate(this.gameHeroPrefab);i.battleNode.addChild(t,i.constant.LAYER_HERO),this.cacheSoldierList.push(t),t.active=!1}},getCacheSoldier:function(){if(this.cacheSoldierList&&0<this.cacheSoldierList.length){var e=this.cacheSoldierList[0];return this.cacheSoldierList.splice(0,1),e.active=!0,e}return e=cc.instantiate(this.gameHeroPrefab),i.battleNode.addChild(e,i.constant.LAYER_HERO),e.getComponent("GameHero"),i.Logger.debug("create2 soldier"),e},giveBackSoldier:function(e){this.giveBackShadow(e.getComponent("GameHero").shadowNode),this.giveBackPoint(e.getComponent("GameHero").pointNode),e.active=!1,this.cacheSoldierList.push(e)},createSoldierByData:function(e){var t=this.getCacheSoldier(),i=t.getComponent("GameHero"),a=this.getCacheShadow();return i.shadowNode=a,a=this.getCachePoint(),i.pointNode=a,i.initData(e),i.setSoldierCountId(this.soldierId),this.soldierId++,this.soldierList.push(t),t},initGameHero:function(){this.setCurHeroIndex(0),this.gameHeroObjList=[];var e=[],t=i.player.heroModule.getBattlePioneerHero();t&&e.push(Math.floor(t)),(t=i.player.heroModule.getBattleAdPioneerHero())&&e.push(Math.floor(t));for(var a=0;a<e.length;a++){var n=e[a];this.createHero(n,a)}},getTryHeroLevel:function(e){var t=-1;if(i.battleScene.checkIsTryHero(e))for(var a=0;a<i.battleScene.gameHeroObjList.length;a++)if(i.battleScene.gameHeroObjList[a].tryData&&i.battleScene.gameHeroObjList[a].soldierId==e){t=i.battleScene.gameHeroObjList[a].tryData.tryLevel;break}return t},getTryHeroQuality:function(e){var t=-1;if(i.battleScene.checkIsTryHero(e))for(var a=0;a<i.battleScene.gameHeroObjList.length;a++)if(i.battleScene.gameHeroObjList[a].tryData&&i.battleScene.gameHeroObjList[a].soldierId==e){t=i.battleScene.gameHeroObjList[a].tryData.tryQuality;break}return t},createHero:function(e,t,a,n){var o=this.gameMapObj.mapHeroList[t],s=cc.v2(o.x-320,o.y-568);a&&(s=a);var r=cc.instantiate(this.gameHeroPrefab);return i.battleNode.addChild(r,i.constant.LAYER_HERO),o=r.getComponent("GameHero"),a=this.getCacheShadow(),o.shadowNode=a,a=this.getCachePoint(),o.pointNode=a,r.setPosition(s),n={soldierId:e,curPos:s,originPos:null,source:i.constant.HERO_SOURCE_HERO,tryData:n||null},o.initData(n),o.setSoldierCountId(t+1),this.soldierList.push(r),this.gameHeroObjList.push(o),43003==e&&(e=cc.instantiate(this.heroHaloPrefab),i.battleNode.addChild(e,i.constant.LAYER_MAP_DECORATE),e=e.getComponent("GameHeroHalo"),o.setHeroHalo(e)),o},updateHeroPoint:function(){if(this.gameHeroObjList)for(var e=0;e<this.gameHeroObjList.length;e++)this.gameHeroObjList[e].pointNode.active=this.curHeroIndex==e},setCurHeroIndex:function(e){this.curHeroIndex=e,this.updateHeroPoint()},getCurHeroObj:function(){return this.curHeroIndex<0||this.curHeroIndex>=this.gameHeroObjList.length?null:this.gameHeroObjList[this.curHeroIndex]},showYearMonsterWarn:function(){var e=this,t=this,a="prefab/effectPrefab/battle/newYearMonster";cc.loader.loadRes(a,cc.Prefab,function(n,o){return n?(cc.error(n),i.Logger.debug("loadGamePrefab error prefabUrl = "+a),void t.showYearMonsterWarn()):(e.gameYearMonsterWarn=cc.instantiate(o),i.gameScene.gameNode.addChild(e.gameYearMonsterWarn,i.constant.LAYER_GAME_BOSS_WARN),e.gameYearMonsterWarnAni=e.gameYearMonsterWarn.getComponent(cc.Animation),e.gameYearMonsterWarnAni.node.active=!0,e.gameYearMonsterWarnAni.stop(),e.gameYearMonsterWarnAni.setCurrentTime(0),e.gameYearMonsterWarnAni.play("newYearMonster"),e.gameYearMonsterWarnAni.on("finished",e.onFinished,e),void i.soundsUtil.playSoundEffect("bossComing"))})},showGameBossWarn:function(){var e,t=this;this.isCanShowBossWarn&&(this.gameBossWarn=null,e=this,cc.loader.loadRes("effect/ui/BossPage",cc.Prefab,function(a,n){return a?(cc.error(a),i.Logger.debug("loadGamePrefab error prefabUrl = effect/ui/BossPage"),void e.showGameBossWarn()):(t.gameBossWarn=cc.instantiate(n),i.gameScene.gameNode.addChild(t.gameBossWarn,i.constant.LAYER_GAME_BOSS_WARN),t.gameBossWarnAni=t.gameBossWarn.getComponent(cc.Animation),t.gameBossWarnAni.node.active=!0,t.gameBossWarnAni.stop(),t.gameBossWarnAni.setCurrentTime(0),t.gameBossWarnAni.play("BossPage"),t.gameBossWarnAni.on("finished",t.onFinished,t),t.isCanShowBossWarn=!1,void i.soundsUtil.playSoundEffect("bossComing"))}))},onFinished:function(e,t){"BossPage"==(t=t.name)?this.gameBossWarnAni&&(this.gameBossWarnAni.node.active=!1):"newYearMonster"==t&&this.gameYearMonsterWarnAni&&(this.gameYearMonsterWarnAni.node.active=!1)},initGameBattleUI:function(){this.gameBattleUI||(this.gameBattleUI=cc.instantiate(this.gameBattleUIPrefab),i.gameScene.gameNode.addChild(this.gameBattleUI,i.constant.LAYER_GAME_UI),this.gameBattleUIObj=this.gameBattleUI.getComponent("GameBattleUI")),this.gameBattleUIObj.initData(),this.gameBattleUIObj.topNode.stopAllActions(),this.setBattleSlow(!1,1),this.updateWave(0);var e=this.curWaveData.routeTips;this.gameBattleUIObj.updateWaveItem(!0);var t=this.getWillCreateEnemyDataList(this.curWaveData,e);this.curWaveTips=this.showWaveStartTips(e,-1,t,!0),this.initRouteEndPoint(this.curWaveData.routeEnd)},initRouteEndPoint:function(e){for(var t=0;t<e.length;t++){var a=e[t],n=i.battleScene.gameMapObj.getRouteMoveLength(a),o=i.battleScene.gameMapObj.getRouteMovePos(a,n-100);n=i.battleScene.gameMapObj.getRouteMovePos(a,n-1),n=i.Utils.getRotation(o,n),this.gameMapObj.createRouteEndPoint(n)}},initGameHeroOperate:function(){this.gameHeroOperate=cc.instantiate(this.gameHeroOperatePrefab),i.battleNode.addChild(this.gameHeroOperate,i.constant.LAYER_HERO_SKILL),this.gameHeroOperateObj=this.gameHeroOperate.getComponent("GameHeroOperate"),this.gameHeroOperateObj.initData(),this.gameHeroOperate.active=!1},showGameHeroOperate:function(e){this.gameHeroOperate||this.initGameHeroOperate(),this.gameHeroOperate.active=e},initMapEffect:function(e){for(var t=0;t<e.length;t++){var a,n,o=e[t];o.effectType!=i.constant.MAP_EFFECT_FLAG&&o.effectType!=i.constant.MAP_EFFECT_FLOWER||(a=cc.instantiate(this.gameEffectPrefab),i.battleNode.addChild(a),n=a.getComponent("GameMapEffect"),a.setPosition(cc.v2(o.x-320,o.y-568)),n.initData({objData:o}),i.battleScene.updateZIndex(a))}},initGameTower:function(e){this.gameTowerList=[];for(var t=0;t<e.length;t++){var a=cc.instantiate(this.gameTowerPrefab);i.battleNode.addChild(a,i.constant.LAYER_GAME_TOWER);var n=a.getComponent("GameTower"),o=e[t],s=i.battleScene.gameMapObj.createTowerArrow(cc.v2(o.x-320,o.y-568));n.arrowNode=s,a.setPosition(cc.v2(o.x-320,o.y-568)),n.initData({index:t,objData:o}),i.battleScene.updateZIndex(a),this.gameTowerList.push(n)}for(var r=0;r<e.length;r++){var c=e[r];c=i.battleScene.gameMapObj.createTowerFloor(cc.v2(c.x-320,c.y-568)),this.gameTowerList[r].floor=c}},initGameTowerControl:function(){this.gameTowerControl=cc.instantiate(this.gameTowerControlPrefab),i.battleNode.addChild(this.gameTowerControl,i.constant.LAYER_GAME_POWER_CONTROL),this.gameTowerControlObj=this.gameTowerControl.getComponent("GameTowerControl"),this.gameTowerControlObj.initData(),this.gameTowerControl.active=!1},initWaveStartTips:function(){this.waveStartTipsList=[];for(var e=0;e<10;e++){var t=cc.instantiate(this.waveStartTipsPrefab);i.battleNode.addChild(t,i.constant.LAYER_WAVE_TIPS);var a=t.getComponent("WaveStartTipsItemRender");this.waveStartTipsList.push(a),t.active=!1}var n=cc.instantiate(this.waveStartTipsIntroducePrefab);i.battleNode.addChild(n,i.constant.LAYER_WAVE_TIPS),this.WaveStartTipsIntroduceObj=n.getComponent("WaveStartTipsIntroduceItemRender"),this.WaveStartTipsIntroduceObj.hideTips()},getWaveStartTipsObj:function(){for(var e=0;e<this.waveStartTipsList.length;e++)if(!this.waveStartTipsList[e].node.active)return this.waveStartTipsList[e].node.active=!0,this.waveStartTipsList[e];return null},hidWaveStartTips:function(){for(var e=0;e<this.waveStartTipsList.length;e++)this.waveStartTipsList[e].node.active=!1;this.WaveStartTipsIntroduceObj.hideTips(),i.gameScene.removeBubble(i.constant.GUIDE_TYPE_INSTANCE_2_9),i.gameScene.removeBubble(i.constant.GUIDE_TYPE_INSTANCE_3_4_2),i.gameScene.removeBubble(i.constant.GUIDE_TYPE_INSTANCE_7_1)},setGamePause:function(e){this.gamePause=e,i.Logger.debug("setGamePause this.gamePause = "+this.gamePause)},addRevivalTimes:function(){this.alreadyRevivalTimes+=1},getStarNumWithHp:function(){for(var e=i.templateManager.getGameParamValue("starRating"),t=e.length,a=0;a<e.length&&!(this.getLastHp()>=e[a]);a++)--t;return t},subLastHp:function(e,t,a){i.player.gmModule.isLimitShootEnemy()||(this.lastEnemyId=t,this.lastRouteId=a,i.player.settingModule.getShakeIsOpen()&&i.nativeManager.shock(100),this.instanceBaseData.lastHp-=e,this.instanceBaseData.lastHp=this.instanceBaseData.lastHp<0?0:this.instanceBaseData.lastHp,this.gameBattleUIObj.updateHpLabel(!1),this.isAllEnemyCreateOver&&this.curWaveIndex==this.waveDataList.length-1&&this.enemyList.length,this.instanceBaseData.lastHp<=0&&(this.alreadyRevivalTimes<i.templateManager.getGameParamValue("resurgenceTimes")?i.gameScene.showPage(i.pageConstant.PAGE_TYPE_REVIVAL):this.showResultPage(!0)))},addLastHp:function(e){this.instanceBaseData.lastHp+=e,this.gameBattleUIObj.updateHpLabel(!0);for(var t=i.templateManager.getHeroSkillDataByGroupId(i.constant.DRIVING_SKILL_SEND),a=(e=t.specialParameter?t.specialParameter[0]:null)[1],n=e[2]/1e3,o=this.enemyList,s=0;s<o.length;s++){var r=o[s].getComponent("GameEnemy");r.isAlive()&&r.sendEnemy(a,n)}for(var c=0;c<this.gameBattleUIObj.skillObjList.length;c++)this.gameBattleUIObj.skillObjList[c].setCdOver();this.isAllEnemyCreateOver&&this.curWaveIndex==this.waveDataList.length-1&&this.enemyList.length<=0&&(t=this.lastEnemyId||this.firstEnemyId,e=this.lastRouteId||this.firstEnemyRouteId,this.createEnemyByData({enemyId:t,routeId:e}))},getLastHp:function(){return this.instanceBaseData.lastHp},showResultPage:function(e,t){e&&this.checkPlotGroup(i.constant.PLOT_TYPE_LOSE)||(i.gameScene.removeAllBubble(),this.setGameState(i.constant.GAME_STATE_OVER),e=!i.player.instanceModule.isPassInstance(this.curChapter,this.curInstance),t={isWin:!1,star:this.getStarNumWithHp(),rewards:this.rewardsList,isFirst:e,isBack:t},i.battleScene.curChapter==i.constant.YEAR_MONSTER_CHAPTER_ID?i.gameScene.showPage(i.pageConstant.PAGE_TYPE_YEAR_MONSTER_RESULT,t):i.gameScene.showPage(i.pageConstant.PAGE_TYPE_RESULT,t))},addIron:function(e){this.instanceBaseData.ironNum+=e,this.gameBattleUIObj.updateIronLabel(!0),this.updateTowerArrow()},consumeIron:function(e){if(e<=0){var t=i.lang.getGameText(i.GameTextCode.DATA_ERROR);return i.gameScene.showTipsItemRender(t),!1}var a=this.instanceBaseData.ironNum;return this.instanceBaseData.ironNum-=e,this.instanceBaseData.ironNum=this.instanceBaseData.ironNum<0?0:this.instanceBaseData.ironNum,t=this.instanceBaseData.ironNum,this.gameBattleUIObj.updateIronLabel(!1),this.updateTowerArrow(),a<t&&(i.BI.onEvent(i.biConstant.EVENT_TYPE_ERROR,i.biConstant.EVENT_ID_ERROR_FIX_DATA_USER,i.player.playerModule.getPlayerId()+"#"+i.biConstant.EVENT_ID_ERROR_TYPE_INSTANCE_IRON),i.BI.onEvent(i.biConstant.EVENT_TYPE_ERROR,i.biConstant.EVENT_ID_ERROR_FIX_DATA_INFO,i.player.playerModule.getPlayerId()+"#"+i.biConstant.EVENT_ID_ERROR_TYPE_INSTANCE_IRON+"#"+a+"#"+t+"#"+e+"#"+this.curChapter+"#"+this.curInstance)),!0},checkIronEnough:function(e){return this.instanceBaseData.ironNum>=e},getIron:function(){return this.instanceBaseData.ironNum},setWaveAreadyDropKey:function(e){this.waveAreadyDropKey=e},getWaveAreadyDropKey:function(){return this.waveAreadyDropKey},putTaskCacheItem:function(e,t,i){e=i?e+"-"+i:e,this.taskCacheMap.hasOwnProperty(e)?this.taskCacheMap[e]+=t:this.taskCacheMap[e]=t},dealTaskCacheData:function(){i.player.taskModule.putCacheBattleMap(this.taskCacheMap),this.taskCacheMap={}},putAreadyShowGayFriendTips:function(e){0<=this.areadyShowGayFriendTips.indexOf(e)||this.areadyShowGayFriendTips.push(e)},checkAreadyShowGayFriendTips:function(e){return 0<=this.areadyShowGayFriendTips.indexOf(e)},getBattleSkillAllChooseTimes:function(){return this.battleSkillAllChooseTimes},addBattleSkillAllChooseTimes:function(){this.battleSkillAllChooseTimes+=1},resetBattleSkillAllChooseTimes:function(){this.battleSkillAllChooseTimes=0},getInstanceSkillByAttr:function(e,t){var a,n,o,s=[];for(a in this.instanceSkillMap)this.instanceSkillMap.hasOwnProperty(a)&&(o=this.instanceSkillMap[a].level,(n=i.templateManager.getTipsSkillByTypeLevel(a,o))&&(o=n.typeList||[],t&&-1===o.indexOf(t)||(o=n.natureList[0])!==e&&(o!==i.constant.SKILL_ATTR_ALL_ATTACK||e!==i.constant.SKILL_ATTR_PHYSICAL_ATK&&e!==i.constant.SKILL_ATTR_MAGIC_ATK)&&(o!==i.constant.SKILL_ATTR_ALL_DEFENSE||e!==i.constant.SKILL_ATTR_PHYSICAL_DEFENSE&&e!==i.constant.SKILL_ATTR_MAGIC_DEFENSE)||s.push(n)));return s},getCurTowerTypeList:function(){for(var e=[],t=0;t<this.gameTowerList.length;t++){var i=this.gameTowerList[t];i.curType&&e.indexOf(i.curType)<0&&e.push(i.curType)}return e},getInstanceSkill:function(e){return this.instanceSkillMap.hasOwnProperty(e)?this.instanceSkillMap[e]:void 0},putInstanceSkill:function(e,t){i.Logger.debug("putInstanceSkill groupId = "+e+" isAdOver = "+t);var a=i.templateManager.getTipsSkillListByGroupId(e);if(a){if(this.instanceSkillMap.hasOwnProperty(e)){if(this.instanceSkillMap[e].level>=a.length)return void i.Logger.debug("putInstanceSkill \u5df2\u7ecf\u5230\u8fbe\u6700\u5927\u7b49\u7ea7: "+e);this.instanceSkillMap[e].level+=1}else a=Object.keys(this.instanceSkillMap).length+1,this.instanceSkillMap[e]={level:1,index:a};t&&(this.instanceSkillMap[e].level+=1),t=this.instanceSkillMap[e].level,(t=i.templateManager.getTipsSkillByTypeLevel(e,t))&&t.natureList&&t.natureList[0]&&this.updateTowerAttr(t)}else i.Logger.debug("putInstanceSkill no have groupId: "+e)},addRandomSkillTimes:function(){this.randomSkillTimes+=1},getRandomSkillTimes:function(){return this.randomSkillTimes},updateTowerAttr:function(e){switch(e.natureList[0]){case i.constant.SKILL_ATTR_PHYSICAL_ATK:for(var t=0;t<this.gameTowerList.length;t++)this.gameTowerList[t].isHaveTower()&&this.gameTowerList[t].updatePhysicalAtk();for(var a=0;a<this.gameHeroObjList.length;a++)this.gameHeroObjList[a].updatePhysicalAtk();break;case i.constant.SKILL_ATTR_MAGIC_ATK:for(var n=0;n<this.gameTowerList.length;n++)this.gameTowerList[n].isHaveTower()&&this.gameTowerList[n].updateMagicAtk();for(var o=0;o<this.gameHeroObjList.length;o++)this.gameHeroObjList[o].updateMagicAtk();break;case i.constant.SKILL_ATTR_PHYSICAL_DEFENSE:for(var s=0;s<this.gameTowerList.length;s++)this.gameTowerList[s].isHaveTower()&&this.gameTowerList[s].updatePhysicalDef();for(var r=0;r<this.gameHeroObjList.length;r++)this.gameHeroObjList[r].updatePhysicalDef();break;case i.constant.SKILL_ATTR_MAGIC_DEFENSE:for(var c=0;c<this.gameTowerList.length;c++)this.gameTowerList[c].isHaveTower()&&this.gameTowerList[c].updateMagicDef();for(var l=0;l<this.gameHeroObjList.length;l++)this.gameHeroObjList[l].updateMagicDef();break;case i.constant.SKILL_ATTR_CRIT_PROBABILITY:for(var d=0;d<this.gameTowerList.length;d++)this.gameTowerList[d].isHaveTower()&&this.gameTowerList[d].updateCritRate();for(var h=0;h<this.gameHeroObjList.length;h++)this.gameHeroObjList[h].updateCritRate();break;case i.constant.SKILL_ATTR_CRIT_HURT:for(var u=0;u<this.gameTowerList.length;u++)this.gameTowerList[u].isHaveTower()&&this.gameTowerList[u].updateCritHurt();for(var p=0;p<this.gameHeroObjList.length;p++)this.gameHeroObjList[p].updateCritHurt();break;case i.constant.SKILL_ATTR_ATK_SPEED:for(var g=0;g<this.gameTowerList.length;g++)this.gameTowerList[g].isHaveTower()&&this.gameTowerList[g].updateShootWaitTime();for(var _=0;_<this.gameHeroObjList.length;_++)this.gameHeroObjList[_].updateShootWaitTime();break;case i.constant.SKILL_ATTR_ATK_DISTANCE:for(var m=0;m<this.gameTowerList.length;m++)this.gameTowerList[m].isHaveTower()&&this.gameTowerList[m].updateShootDistance();break;case i.constant.SKILL_ATTR_ALL_ATTACK:for(var E=0;E<this.gameTowerList.length;E++)this.gameTowerList[E].isHaveTower()&&(this.gameTowerList[E].updatePhysicalAtk(),this.gameTowerList[E].updateMagicAtk());for(var T=0;T<this.gameHeroObjList.length;T++)this.gameHeroObjList[T].updatePhysicalAtk(),this.gameHeroObjList[T].updateMagicAtk();break;case i.constant.SKILL_ATTR_ALL_DEFENSE:for(var f=0;f<this.gameTowerList.length;f++)this.gameTowerList[f].isHaveTower()&&(this.gameTowerList[f].updatePhysicalDef(),this.gameTowerList[f].updateMagicDef());for(var S=0;S<this.gameHeroObjList.length;S++)this.gameHeroObjList[S].updatePhysicalDef(),this.gameHeroObjList[S].updateMagicDef();break;case i.constant.SKILL_ATTR_ENEMY_GOSH:for(var A=0;A<this.gameTowerList.length;A++)this.gameTowerList[A].isHaveTower()&&this.gameTowerList[A].updateFaintedRate();for(var I=0;I<this.gameHeroObjList.length;I++)this.gameHeroObjList[I].updateFaintedRate();break;case i.constant.SKILL_ATTR_DOUBLE_ATK:for(var y=0;y<this.gameTowerList.length;y++)this.gameTowerList[y].isHaveTower()&&this.gameTowerList[y].updateDoubleHit();break;case i.constant.SKILL_ATTR_FIRE_ARROW:for(var P=0;P<this.gameTowerList.length;P++)this.gameTowerList[P].isHaveTower()&&this.gameTowerList[P].updateFireArrow();break;case i.constant.SKILL_ATTR_REBOUND_DAMAGE:for(var v=0;v<this.soldierList.length;v++)this.soldierList[v].getComponent("GameHero").updateReboundDamage();for(var L=0;L<this.gameHeroObjList.length;L++)this.gameHeroObjList[L].updateReboundDamage();break;case i.constant.SKILL_ATTR_IGNORE_ARMOR:for(var N=0;N<this.gameTowerList.length;N++)this.gameTowerList[N].isHaveTower()&&this.gameTowerList[N].updateIgnoreArmor();for(var b=0;b<this.gameHeroObjList.length;b++)this.gameHeroObjList[b].updateIgnoreArmor();break;case i.constant.SKILL_ATR_DROP_MONEY:this.dropMoneyPercent=1+e.natureList[2]/1e4,this.dropMoneyRota=e.triggerProbability/100;break;case i.constant.SKILL_ATR_SELL_MONEY:this.sellMoneyPercent=1+e.natureList[2]/1e4;break;case i.constant.SKILL_ATR_BATTLE_BLOOD:this.isBattleRestore=!0;break;case i.constant.SKILL_ATR_CD_TIME:this.skillCDTimePercent=1-e.natureList[2]/1e4}},setCurTowerObj:function(e){this.curTowerObj=e},setCurEnemyObj:function(e){e&&this.setCurSoldierObj(null),this.curSelectEnemyObj&&this.curSelectEnemyObj.hidePoint(),this.curSelectEnemyObj=e},setCurSoldierObj:function(e){e&&this.setCurEnemyObj(null),this.curSelectSoldierObj&&this.curSelectSoldierObj.hidePoint(),this.curSelectSoldierObj=e},getTowerNumById:function(e){for(var t=0,i=0;i<this.gameTowerList.length;i++){var a=this.gameTowerList[i];a.towerData&&a.towerData.id==e&&(t+=1)}return t},getTowerTypeNumByType:function(e){for(var t=0,i=0;i<this.gameTowerList.length;i++){var a=this.gameTowerList[i];a.curType&&a.curType==e&&(t+=1)}return t},logicGameReady:function(){},logicGameStart:function(e){for(var t=!1,a=0,n=0;n<this.curCreateEnemyDataList.length;n++){var o=this.curCreateEnemyDataList[n].troopId,s=this.curCreateEnemyDataList[n].routeGroup,r=this.curCreateEnemyDataList[n].enemyList;if(this.curCreateEnemyDataList[n].isOver)a++;else if(this.curCreateEnemyDataList[n].curTime>=this.curCreateEnemyDataList[n].needTime){for(var c=i.templateManager.getTroopDataById(o).troopGroup,l=0;l<c.length;l++){var d=c[l],h=d[0]-1,u=d[1]-1;h>=s.length&&i.Logger.debug("error \u8fd9\u91cc\u7edd\u58c1\u662f\u914d\u8868\u914d\u9519\u4e86\uff01 routeIndex = "+(h=0)+" routeGroup = "+s),u>=r.length&&i.Logger.debug("error \u8fd9\u91cc\u7edd\u58c1\u662f\u914d\u8868\u914d\u9519\u4e86\uff01enemyIndex = "+(u=0)+" enemyList = "+r),h=s[h],u=r[u],d=d[2],this.curCreateEnemyDataList[n].curFrameIndex==d&&(0<(d=i.player.gmModule.getShowEnemyNum())&&d<100&&this.enemyList.length>=d||(d=this.createEnemyByData({enemyId:u,routeId:h}),this.newCreateEnemy=d.getComponent("GameEnemy"),l==c.length-1&&(this.curCreateEnemyDataList[n].isOver=!0),i.player.instanceModule.addUnlockEnemy(u),this.firstEnemyId<0&&this.firstEnemyRouteId<0&&(this.firstEnemyId=u,this.firstEnemyRouteId=h)))}this.curCreateEnemyDataList[n].curFrameIndex++}else this.curCreateEnemyDataList[n].curTime+=e}a==this.curCreateEnemyDataList.length&&(t=!0,this.newCreateEnemy&&(this.newCreateEnemy.setWaveLastEnemy(!0),this.newCreateEnemy=null)),t&&this.checkNextWaveStart(e)},checkSkillPageShow:function(){var e,t,a;this.isCheckBoxPageShow&&(this.isCheckBoxPageShow=!1,this.gameBattleUIObj.boxNum>=i.templateManager.getGameParamValue("battleBoxOpenKey")?(i.gameScene.showGuideLimit(),e=cc.delayTime(this.getBulletOverWaitTime()+.3),t=cc.callFunc(function(){this.showOverBoxPage=!0,i.gameScene.hideGuideLimit(),this.gameBattleUIObj.onClickBox()},this),a=cc.sequence(e,t),this.gameBattleUIObj.topNode.stopAllActions(),this.gameBattleUIObj.topNode.runAction(a),this.getBulletOverWaitTime()):this.showBoxPageEnd=!0),this.isCheckSkillPageShow&&this.showBoxPageEnd&&(this.isCheckSkillPageShow=e=!1,0<this.curWaveData.isRoguelike&&this.curState==i.constant.GAME_STATE_START&&(i.gameScene.showGuideLimit(),t=cc.delayTime(this.getBulletOverWaitTime()+.3),a=cc.callFunc(function(){i.gameScene.showPage(i.pageConstant.PAGE_TYPE_BATTLE_SKILL),this.addRandomSkillTimes(),i.gameScene.hideGuideLimit()},this),a=cc.sequence(t,a),this.gameBattleUIObj.topNode.stopAllActions(),this.gameBattleUIObj.topNode.runAction(a),this.getBulletOverWaitTime(),e=!0),e||this.checkNextWaveStartTipsShow())},getRouteType:function(e,t){for(var i=0;i<t.length;i++)for(var a=t[i],n=1;n<a.length;n++)if(a[n]==e)return a[0]},getWaveType:function(e){if(e<0||e>=this.waveDataList.length)return i.Logger.debug("error getWaveType index = "+e+" this.waveDataList.length = "+this.waveDataList.length),i.constant.ENEMY_TYPE_NORMAL;for(var t,a=(e=this.waveDataList[e]).routeTips,n=this.getWillCreateEnemyDataList(e,a),o=!1,s=!1,r=0;r<a.length;r++)for(t in n[r]){var c=Math.floor(t);c=i.templateManager.getEnemyDataById(c),o=o||c.type==i.constant.ENEMY_TYPE_BOSS,s=s||c.type==i.constant.ENEMY_TYPE_ELITE}return o?i.constant.ENEMY_TYPE_BOSS:s?i.constant.ENEMY_TYPE_ELITE:i.constant.ENEMY_TYPE_NORMAL},getWillCreateEnemyDataList:function(e,t){for(var a=e.troopList,n=e.enemyList,o=e.tipsNum,s={},r=0;r<a.length;r++){var c=a[r][1],l=this.getRouteType(c,o);s[l]||(s[l]=[]),c={troopId:a[r][0],enemyList:n[r]},s[l].push(c)}for(var d=[],h=0;h<t.length;h++){for(var u={},p=s[t[h][0]],g=0;g<p.length;g++)for(var _=p[g],m=_.troopId,E=_.enemyList,T=i.templateManager.getTroopDataById(m).troopGroup,f=0;f<T.length;f++){var S=E[T[f][1]-1];u[S]?u[S]++:u[S]=1}d.push(u)}return d},checkNextWaveStartTipsShow:function(){var e,t,a;this.curWaveIndex<this.waveDataList.length-1?(e=this.curWaveIndex+1,a=this.waveDataList[e],this.nextWaveStartTime=this.curWaveData.countDown/1e3,t=a.routeTips,a=this.getWillCreateEnemyDataList(a,t),this.curWaveTips=this.showWaveStartTips(t,this.nextWaveStartTime,a),1===this.curChapter&&1===this.curInstance&&i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_INSTANCE_1)&&(1===e&&i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_1_e,this.curWaveTips.node),2===e&&i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_1_e_1,this.curWaveTips.node)),1===this.curChapter&&5===this.curInstance&&2===e&&i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_INSTANCE_5_1)&&i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_5_1),1===this.curChapter&&10===this.curInstance&&2===e&&i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_INSTANCE_10)&&i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_10_1)):this.gotoNextWave()},showWaveStartTips:function(e,t,a,n){for(var o=null,s=0;s<e.length;s++){var r=e[s][0],c=this.getWaveStartTipsObj();if(!c)return void i.Logger.debug("error showWaveStartTips waveStartTipsObj = null");var l=i.battleScene.gameMapObj.getRouteMovePos(r,150),d=i.battleScene.gameMapObj.getRouteMovePos(r,50);r=cc.v2((l.x+d.x)/2,(l.y+d.y)/2),d=i.Utils.getRotation(l,d),r.x+=e[s][1],r.y+=e[s][2],c.node.setPosition(r);var h,u=a[s],p=[];for(h in u)p.push({enemyId:Math.floor(h),enemyNum:u[h]});c.startTips(t,d,p),o=c}return n||1!=i.player.vipModule.getVipWaveIronNum()||(n=Math.floor(this.curWaveData.countDown/1e3*this.curWaveData.ironPerSecond),i.battleScene.gameBattleUIObj.checkVipAddIron(n,!0)),o},clickWaveTips:function(e){var t=this.nextWaveStartTime;if(1==i.player.vipModule.getVipWaveIronNum()&&(t=this.curWaveData.countDown/1e3),!e)for(var a=0;a<this.waveStartTipsList.length;a++)this.waveStartTipsList[a].node.active&&(e=this.waveStartTipsList[a].node.position);if(0<t){var n=Math.floor(t*this.curWaveData.ironPerSecond);0==i.player.vipModule.getVipWaveIronNum()&&(i.battleScene.addIron(n),n={pos:e,num:Math.floor(n),type:i.constant.COIN_TYPE_IRON,delayTime:0},i.battleScene.createDropTipsByData(n));for(var o=Math.floor(t),s=0;s<o;s++)for(var r=0;r<this.gameBattleUIObj.skillObjList.length;r++)this.gameBattleUIObj.skillObjList[r].updateCd(1);this.gotoNextWave(),i.player.commonModule.isLowIosDevice()&&cc.sys.garbageCollect(),i.battleScene.putTaskCacheItem(i.constant.TASK_TYPE_CALL_ENEMY,1)}},gotoNextWave:function(){this.hidWaveStartTips(),this.updateNextWave()&&this.gameBattleUIObj.updateWaveItem(),this.dealTaskCacheData()},checkNextWaveStart:function(e){this.isAllEnemyCreateOver||(this.isAllEnemyCreateOver=!0,this.curNextWaveTime=0);var t=!1;0<=this.curNextWaveTime&&(this.curNextWaveTime+=e,this.curNextWaveTime>=this.maxNextWaveTime&&(t=!0));for(var a=0,n=0;n<this.enemyList.length;n++){var o=this.enemyList[n].getComponent("GameEnemy");o.isNoDie()&&(a+=o.getHeart())}(t=a<=this.nextWaveHeart||t)&&!this.dropItemStrat&&this.checkSkillPageShow(),0<this.nextWaveStartTime&&(this.nextWaveStartTime-=e,this.nextWaveStartTime<=0&&(this.nextWaveStartTime=-1,1==i.player.vipModule.getVipWaveIronNum()?this.clickWaveTips():this.gotoNextWave()))},checkShowTryHero:function(){if(this.instanceData.tryTowerList)for(var e=0;e<this.instanceData.tryTowerList.length;e++){var t=this.instanceData.tryTowerList[e];if(t[0]==this.curWaveIndex){var a=t[1],n=t[2],o=t[3];if((a=i.templateManager.getTowerDataById(a))&&a.heroId&&!(i.player.heroModule.isHeroUnlock(a.heroId)||0<=this.tryHeros.indexOf(a.heroId))){this.putTryHero(a.heroId),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_SOLDIER_TRIAL,{heroId:a.heroId,towerIndex:n,headQuadrant:o,info:t});break}}}},putTryHero:function(e){0<=this.tryHeros.indexOf(e)||this.tryHeros.push(e)},getCanUpTowerHeros:function(e){for(var t=i.player.towerModule.getTowerHeros(e),a=0;a<this.tryHeros.length;a++){var n=this.tryHeros[a];i.templateManager.getTowerDataByHeroId(n).typeID==e&&t.indexOf(n)<0&&t.push(n)}return t},getCurAllTowerHeros:function(){var e=i.player.towerModule.getAllTowerHeros();if(this.instanceData.sceneTowerID)for(var t=0;t<this.instanceData.sceneTowerID.length;t++){var a=this.instanceData.sceneTowerID[t];a=i.templateManager.getTowerDataById(a).heroId,e.indexOf(a)<0&&e.push(a)}if(0<this.tryHeroId&&e.indexOf(this.tryHeroId)<0&&e.push(this.tryHeroId),!this.instanceData.tryTowerList)return e;for(var n=0;n<this.instanceData.tryTowerList.length;n++){var o=this.instanceData.tryTowerList[n];!(o=i.templateManager.getTowerDataById(o[1])).heroId||0<=e.indexOf(o.heroId)||e.push(o.heroId)}return e},checkIsTryHero:function(e){return!(!this.tryHeros||this.tryHeros.indexOf(e)<0)},cleanTryHeros:function(){this.tryHeros=[]},sendBattleDoneInfo:function(e,t){for(var a={tower:{}},n=0;n<this.gameTowerList.length;n++){var o=this.gameTowerList[n];o&&(o.curType<=0||(a.tower[o.curindex]={},a.tower[o.curindex].type=o.curType,a.tower[o.curindex].towerHeroId=o.inTowerHeroId,a.tower[o.curindex].level=o.curState))}a.win=e,a.instance=i.player.instanceModule.getTempInstanceId(this.curChapter,this.curInstance),a.star=t},enemyWillDie:function(){},checkEnemyDieOver:function(){this.checkGameWin()},checkGameWin:function(){var e,t,a,n;this.isAllEnemyCreateOver&&this.curWaveIndex==this.waveDataList.length-1&&this.enemyList.length<=0&&0<this.instanceBaseData.lastHp&&(i.Logger.debug("\u4f60\u592a\u725b\u903c\u4e86 \u6e38\u620f\u80dc\u5229\uff01"),i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_INSTANCE_1_f)?i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_1_f):i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_INSTANCE_5_3)?i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_5_3):i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_INSTANCE_3_e)?i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_3_e):i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_INSTANCE_10_3)?i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_10_3):this.checkPlotGroup(i.constant.PLOT_TYPE_WIN)||(this.setGameState(i.constant.GAME_STATE_OVER),this.checkShowOverPiggyBank()||(e=this.gameBattleUIObj.isGuideBattle?3:this.getStarNumWithHp(),t=(n=i.templateManager.getGameParamValue("defaultFullStarInstance"))[0],a=n[1],(n=!i.player.instanceModule.isPassInstance(this.curChapter,this.curInstance))&&this.curChapter===t&&this.curInstance<=a&&(e=3),i.player.instanceModule.setInstanceStar(this.curChapter,this.curInstance,e),n={isWin:!0,star:e,rewards:this.rewardsList,isFirst:n},i.battleScene.curChapter==i.constant.YEAR_MONSTER_CHAPTER_ID?i.gameScene.showPage(i.pageConstant.PAGE_TYPE_YEAR_MONSTER_RESULT,n):(i.player.instanceModule.setInstanceStar(this.curChapter,this.curInstance,e),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_RESULT,n)))))},checkShowOverPiggyBank:function(e){if(this.showPiggyBankOver||i.battleScene.curChapter==i.constant.YEAR_MONSTER_CHAPTER_ID)return!1;var t=!i.player.instanceModule.isPassInstance(this.curChapter,this.curInstance),a=i.player.piggyBankModule.isPiggyBankActive(),n=i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_PIGGY_BANK),o=i.player.piggyBankModule.getPiggyBankMoney(),s=i.templateManager.getGameParamValue("potMaxIngot");return(o=t&&a&&n&&!(s<=o))&&(i.gameScene.showPage(i.pageConstant.PAGE_TYPE_BATTLE_PIGGY_BANK,e),this.showPiggyBankOver=!0),o},gmWin:function(){var e;this.setGameState(i.constant.GAME_STATE_OVER),this.checkShowOverPiggyBank(!0)||(e=!i.player.instanceModule.isPassInstance(this.curChapter,this.curInstance),i.player.instanceModule.setInstanceStar(this.curChapter,this.curInstance,3),e={isWin:!0,star:3,rewards:this.rewardsList,isFirst:e},i.battleScene.curChapter==i.constant.YEAR_MONSTER_CHAPTER_ID?i.gameScene.showPage(i.pageConstant.PAGE_TYPE_YEAR_MONSTER_RESULT,e):(i.player.instanceModule.setInstanceStar(this.curChapter,this.curInstance,3),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_RESULT,e)))},pauseAll:function(){if(this.gamePause)i.Logger.debug("set battleScene pauseAll return");else{if(i.Logger.debug("pauseAll this.gamePause = true"),this.gamePause=!0,this.node.pauseAllActions(),this.gameBattleUIObj&&this.gameBattleUIObj.topNode.pauseAllActions(),this.bulletList)for(var e=0;e<this.bulletList.length;e++)this.bulletList[e].pauseAllActions();if(this.iconEffectList)for(var t=0;t<this.iconEffectList.length;t++)this.iconEffectList[t].pauseAllActions()}},resumeAll:function(){if(this.gamePause){if(i.Logger.debug("resumeAll this.gamePause = false"),this.gamePause=!1,this.node.resumeAllActions(),this.gameBattleUIObj&&this.gameBattleUIObj.topNode.resumeAllActions(),this.bulletList)for(var e=0;e<this.bulletList.length;e++)this.bulletList[e].resumeAllActions();if(this.iconEffectList)for(var t=0;t<this.iconEffectList.length;t++)this.iconEffectList[t].resumeAllActions()}else i.Logger.debug("set battleScene resumeAll return")},updateZIndex:function(e){var t=1136-(e.y+568);t<0&&(t=0),t=Math.floor(t),e.zIndex=i.constant.LAYER_HERO+t},getBlowPosInRoad:function(e,t,a){for(var n=0;;){var o=cc.v2(e.x+i.Utils.getRandomInt(-t,t),e.y+i.Utils.getRandomInt(-t,t));if(i.battleScene.gameMapObj.isBattlePosCanMove(o)){if(!a)return o;if(i.battleScene.gameMapObj.isBattlePosCanMove(cc.v2(o.x-32,o.y))&&i.battleScene.gameMapObj.isBattlePosCanMove(cc.v2(o.x+32,o.y))&&i.battleScene.gameMapObj.isBattlePosCanMove(cc.v2(o.x,o.y+32))&&i.battleScene.gameMapObj.isBattlePosCanMove(cc.v2(o.x,o.y-32)))return o}if(999<++n)return e}},getBlowPos:function(e,t,a,n,o,s){if(s)return cc.v2(e.x+i.Utils.getRandomInt(-t,t),e.y+i.Utils.getRandomInt(-t,t));var r=this.getBlowPosInRoad(e,t,n);if(a&&0<a.length){for(var c=0,l=0;l<a.length;l++){var d=i.Utils.getDistance(a[l],r);if(0<o&&d<o&&(r=this.getBlowPosInRoad(e,t,n),l=-1,30<++c))return r}return r}return r},getBulletOverWaitTime:function(){var e=0;if(this.bulletList)for(var t=0;t<this.bulletList.length;t++){var i=this.bulletList[t].getComponent("GameBullet").getOverWaitTime();e<i&&(e=i)}return e},showHeroSkillEffect:function(e,t){var a={type:i.constant.GAME_TIPS_TYPE_TARGET,pos:t,zIndex:i.constant.LAYER_HERO_SKILL,time:50/30};i.battleScene.createIconTipsByData(a),this.gameBattleUIObj.countCDSkill();for(var n=this.gameHeroObjList[0],o=0;o<this.gameHeroObjList.length;o++)e==this.gameHeroObjList[o].heroData.groupID&&(n=this.gameHeroObjList[o]);a=i.templateManager.getHeroSkillDataByGroupId(e),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_HERO_SKILL,{heroObj:n,skillData:a,type:e,pos:t})},startHeroSkill:function(e,t){i.battleScene.putTaskCacheItem(i.constant.TASK_TYPE_USE_SKILL,1),this.gameBattleUIObj.countCDSkill();var a=i.player.skillModule.getSkillInfo(e).level;i.battleScene.curChapter==i.constant.YEAR_MONSTER_CHAPTER_ID&&(a=1),a=i.templateManager.getHeroSkillLevelData(e,a);var n=i.templateManager.getHeroSkillDataById(a.relationSkillId);n.skillAudio&&i.soundsUtil.playSoundEffect(n.skillAudio),this.instanceData.skillAtk;var o=this.curWaveData.skillAttackRate/1e4,s=n.radius,r=n.atkParameter?n.atkParameter[0]:null,c=n.effectParameter||null;switch(this.skillCount+=1,i.BI.onEvent(i.biConstant.EVENT_TYPE_SKILL_USE,i.player.skillModule.getSkillBiEventId(i.biConstant.EVENT_ID_SKILL_USE_BASE,e),i.player.instanceModule.getTempInstanceId(this.curChapter,this.curInstance)),e){case i.constant.DRIVING_SKILL_BLOW:case i.constant.DRIVING_SKILL_LANDMINE:case i.constant.DRIVING_SKILL_ARROW_RAIN:var l=Math.floor(r[1]),d=Math.floor(r[2]),h=(Math.floor(r[3]),Math.floor(r[4])/1e3),u=(Math.floor(r[6]),Math.floor(r[7])/1e3),p=Math.floor(n.bulletID);d*=o,d=Math.floor(d);var g,_=(g=this.getSkillEffectData(c,i.constant.HERO_SKILL_EFFECT_SWOON))?g[1]/1e3:0,m=g?g[2]:0,E=g?g[3]/100:100,T=(g=this.getSkillEffectData(c,i.constant.HERO_SKILL_EFFECT_FORMATION))?{continueTime:g[1]/1e3,checkTime:g[2]/1e3}:null,f=null;(g=this.getSkillEffectData(c,i.constant.HERO_SKILL_EFFECT_CONTINUE_2))&&(f={hurtNum:g[1]*o,hurtTime:g[3]/1e3,totalTime:g[4]/1e3,isRealHurt:!0,physicalAtk:0,magicAtk:0});for(var S=0;S<l;S++){var A=u+h*S,I=this.getBlowPos(t,s);i.guideManager.isOtherGuideFinished(i.constant.GUIDE_TYPE_INSTANCE_1)||(1==S&&1<i.battleScene.enemyList.length?I=i.battleScene.enemyList[1].getComponent("GameEnemy").getShootTarPos(A,!1):2==S&&2<i.battleScene.enemyList.length&&(I=i.battleScene.enemyList[2].getComponent("GameEnemy").getShootTarPos(A,!1))),A={source:i.constant.SHOOT_SOURCE_SKILL,bulletId:p,towerType:-1,curPos:I,tarPos:I,physicalAtk:0,magicAtk:0,critRate:0,realHurt:d,formationData:T,faintedTime:_,faintedType:m,faintedRate:E,poisonData:f,delay:A},i.battleScene.createBulletByData(A)}break;case i.constant.DRIVING_SKILL_RECRUIT:case i.constant.DRIVING_SKILL_RECRUIT_FAR:var y=n.specialParameter?n.specialParameter[0]:null,P=Math.floor(y[1]),v=Math.floor(y[2]),L=Math.floor(y[3])/1e3,N=Math.floor(y[4])/1e4,b={recruitTime:L,addPhysicalAtk:o*(x=Math.floor(y[5])/1e4),addMagicAtk:o*x,addHp:N},R=t,C=t,D=i.Utils.getRandomInt(1,360);y={type:i.constant.GAME_TIPS_TYPE_HERO_CALL,pos:C,zIndex:i.constant.LAYER_HERO_SKILL,time:1},i.battleScene.createIconTipsByData(y);for(var k=[],O=0;O<v;O++){var w=i.Utils.getOffsetByRotationAndDistance(D,30);w={soldierId:P,curPos:C,originPos:cc.v2(R.x+w.x,R.y+w.y),source:i.constant.HERO_SOURCE_HERO_RECRUIT},(w=i.battleScene.createSoldierByData(w).getComponent("GameHero")).setRecruitData(b,!0),360<(D+=360/v)&&(D-=360),k.push(w)}for(var M=0;M<k.length;M++){for(var B=k[M],H=[],G=0;G<k.length;G++)G!=M&&H.push(k[G]);B.setCallSoldierList(H)}break;case i.constant.DRIVING_SKILL_SEND:L=n.specialParameter?n.specialParameter[0]:null;var U=Math.floor(L[1]),x=Math.floor(L[2])/1e3;N=Math.floor(L[3]),y=Math.floor(n.bulletID),L={distance:U,time:x,num:N},x=(U=this.getSkillEffectData(c,i.constant.HERO_SKILL_EFFECT_SWOON))?U[1]/1e3:0,N=U?U[2]:0,U=U?U[3]/100:100,U={source:i.constant.SHOOT_SOURCE_SKILL,bulletId:y,towerType:-1,curPos:t,tarPos:t,physicalAtk:0,magicAtk:0,critRate:0,realHurt:0,sendData:L,faintedTime:x,faintedType:N,faintedRate:U,delay:0},i.battleScene.createBulletByData(U);break;case i.constant.DRIVING_SKILL_ENEMY_SLOW:var F=this.getSkillEffectData(c,i.constant.HERO_SKILL_EFFECT_FORMATION),Y=this.getSkillEffectData(c,i.constant.HERO_SKILL_EFFECT_MOVE_SPEED),V=this.getSkillEffectData(c,i.constant.HERO_SKILL_EFFECT_ATK_SPEED)[1]/1e4,W=F[1]/1e3,K=Y[1]/1e4,j=F[1]/1e3;if(this.skillEnemySlowData={atkSpeedTime:W,atkSpeedPercent:V,moveSpeedPercent:K},this.enemyList)for(var Q=0;Q<this.enemyList.length;Q++){var q=this.enemyList[Q].getComponent("GameEnemy");q.skillSlowAtkSpeed(V,W),q.updateSpeed(K,j)}this.showEnemySlowEffect(!0),n.lastSkillAudio&&(this.skillEnemySlowSoundId=i.soundsUtil.playSoundEffect(n.lastSkillAudio,!0));break;case i.constant.DRIVING_SKILL_HERO_QUICK:U=this.getSkillEffectData(c,i.constant.HERO_SKILL_EFFECT_FORMATION),Y=this.getSkillEffectData(c,i.constant.HERO_SKILL_EFFECT_ATK_SPEED),F=this.getSkillEffectData(c,i.constant.HERO_SKILL_EFFECT_ATK_1);var J=(this.getSkillEffectData(c,i.constant.HERO_SKILL_EFFECT_ATK_2),Y[1]/1e4),X=U[1]/1e3,z=F[1]/1e4,Z=U[1]/1e3;if(this.skillHeroQuickData={atkSpeedTime:X,atkSpeedPercent:J,atkHurtPercent:z},this.soldierList)for(var $=0;$<this.soldierList.length;$++){var ee=this.soldierList[$].getComponent("GameHero");ee.skillAddAtkSpeed(J,X),ee.skillAddAtk1(z,Z),ee.skillAddAtk2(z,Z)}if(this.gameTowerList)for(var te=0;te<this.gameTowerList.length;te++){var ie=this.gameTowerList[te];ie.skillAddAtkSpeed(J,X),ie.skillAddAtk1(z,Z),ie.skillAddAtk2(z,Z)}this.showHeroQuickEffect(!0),n.lastSkillAudio&&(this.skillHeroQuickSoundId=i.soundsUtil.playSoundEffect(n.lastSkillAudio,!0))}},showEnemySlowEffect:function(e){var t,a=this;this.enemySlowEffect?(this.enemySlowEffect.active=e)||this.skillEnemySlowSoundId&&(i.soundsUtil.stopSoundEffect(this.skillEnemySlowSoundId),this.skillEnemySlowSoundId=null):e&&(t=i.constant.PREFAB_PATH_BULLET+"skill_blizzard",i.battleScene.getBulletPrefab(t,function(e){e?(a.enemySlowEffect=cc.instantiate(e),i.battleNode.addChild(a.enemySlowEffect,i.constant.LAYER_BATTLE_SKILL)):i.Logger.debug("error prefabName = "+t)}))},showHeroQuickEffect:function(e){var t,a=this;this.heroQuickEffect?(this.heroQuickEffect.active=e)?this.heroQuickEffect.getComponent("cc.Animation").play(this.getPrefabName("skill_speedUp")):this.skillHeroQuickSoundId&&(i.soundsUtil.stopSoundEffect(this.skillHeroQuickSoundId),this.skillHeroQuickSoundId=null):e&&(t=i.constant.PREFAB_PATH_BULLET+this.getPrefabName("skill_speedUp"),i.battleScene.getBulletPrefab(t,function(e){e?(a.heroQuickEffect=cc.instantiate(e),i.battleNode.addChild(a.heroQuickEffect,i.constant.LAYER_BATTLE_SKILL),a.heroQuickEffect.getComponent("cc.Animation").play(a.getPrefabName("skill_speedUp"))):i.Logger.debug("error prefabName = "+t)}))},getSkillEffectData:function(e,t){if(!e)return null;for(var i=0;i<e.length;i++)if(e[i][0]==t)return e[i];return null},getShakeAction:function(e,t){var i=cc.delayTime(t||0),a=cc.moveTo(1/30,cc.v2(-10*e,20*e)),n=cc.moveTo(.1,cc.v2(0,0)),o=cc.moveTo(2/30,cc.v2(5*e,10*e));return t=cc.moveTo(4/30,cc.v2(0,0)),e=cc.callFunc(function(){this.isShaking=!1},this),cc.sequence(i,a,n,o,t,e)},boxShake:function(e){this.isShaking||(i.battleNode.stopAllActions(),i.battleNode.setPosition(cc.v2(0,0)),i.battleNode.runAction(this.getShakeAction(.5,e)),this.isShaking=!0)},noticeEnemyDie:function(e){for(var t=0;t<this.soldierList.length;t++)this.soldierList[t].getComponent("GameHero").checkTarEnemyDie(e)},noticeHeroDie:function(e){for(var t=0;t<this.enemyList.length;t++)this.enemyList[t].getComponent("GameEnemy").checkTarHeroDie(e);for(var i=0;i<this.soldierList.length;i++)this.soldierList[i].getComponent("GameHero").checkDieRestoreHp()},playInstanceSoundEffect:function(e){this.lastPlaySoundEffect||(this.lastPlaySoundEffect=0),this.lastPlaySoundEffect+=e,this.lastPlaySoundEffect>=this.instanceData.audioInterval&&(i.soundsUtil.playSoundEffect(this.instanceData.audio),this.lastPlaySoundEffect=0)},revertBattleSpeedPercent:function(){cc.director.getScheduler().setTimeScale(1)},restoreBattleSpeedPercent:function(){cc.director.getScheduler().setTimeScale(this.battleSpeedPercent)},setBattleSlow:function(e,t){this.isBattleSlow=e,this.slowSpeedPercent=this.isBattleSlow?.2:1,0<t?this.setBattleSpeedPercent(t):this.setBattleSpeedPercent(this.battleSpeedPercent)},setBattleSpeedPercent:function(e){if(i.Logger.debug("setBattleSpeedPercent = "+e),this.battleSpeedPercent=e,this.gameBattleUIObj.setBattleSpeedPercent(this.battleSpeedPercent),cc.director.getScheduler().setTimeScale(this.battleSpeedPercent*this.slowSpeedPercent),this.soldierList)for(var t=0;t<this.soldierList.length;t++)this.soldierList[t].getComponent("GameHero").updateBattleSpeedPercent();if(this.enemyList)for(var a=0;a<this.enemyList.length;a++)this.enemyList[a].getComponent("GameEnemy").updateBattleSpeedPercent();if(this.gameTowerList)for(var n=0;n<this.gameTowerList.length;n++)this.gameTowerList[n].updateBattleSpeedPercent()},getTarEnemyShootPos:function(e,t,i,a,n){return e=e.getShootPos(),this.getTarEnemyWillPos(e,t,i,a,n)},getTarEnemyWillPos:function(e,t,a,n,o){var s=t.getShootTarPos(.4+n,o),r=i.templateManager.getBulletDataById(a),c=r.high;return a=r.speed/1e3,0==c&&(a=i.Utils.getDistance(e,s)/r.speed),t.getShootTarPos(a+=n,o)},getMapInitTower:function(e,t){if(this.gameTowerList){if(0<t&&(t=this.gameTowerList[t-1])&&t.isMapInitTower&&e==t.curType)return t;for(var i=0;i<this.gameTowerList.length;i++){var a=this.gameTowerList[i];if(a.isMapInitTower&&0<a.getLevel()&&e==a.curType)return a}}return null},updateTowerArrow:function(){if(this.gameTowerList)for(var e=0;e<this.gameTowerList.length;e++)this.gameTowerList[e].updateArrow()},checkPlotGroup:function(){return!1},checkNextPlot:function(){var e,t,a;0<this.plotList.length?(i.battleScene.pauseAll(),e=this.plotList[0],this.curPlotType=e.afterStage,this.plotList.splice(0,1),t=e.skipTime/1e3,a=e.respondTime/1e3,a={type:i.constant.DIALOG_TYPE_PLOT,autoTime:t,limitTime:a,plotId:e.id},i.gameScene.showGuideDialog(a),this.curPlotType==i.constant.PLOT_TYPE_WIN&&i.player.guideModule.setPlotFinish(e.stageId[0],e.stageId[1])):(i.gameScene.checkGameResume(),this.curPlotType==i.constant.PLOT_TYPE_WIN?this.checkGameWin():this.curPlotType==i.constant.PLOT_TYPE_LOSE&&this.showResultPage())},getHeroRestrainSkillData:function(e){for(var t=i.player.heroModule.getAllBattleGayFriend(),a=[],n=0;n<t.length;n++)for(var o=i.player.heroModule.getRestrainSkillList(t[n]),s=0;s<o.length;s++)a.push(o[s]);this.curRestrainIdList=a;for(var r=[],c=0;c<a.length;c++)for(var l=a[c],d=i.templateManager.getHeroRestrainById(l).levelOneSkill,h=0;h<d.length;h++){var u=d[h];u[0]==e&&r.push(u)}return r},getBattleHeroRestrainList:function(){for(var e=[],t=0;t<i.battleScene.gameHeroObjList.length;t++)e.push(i.battleScene.gameHeroObjList[t].soldierId);for(var a=[],n=0;n<this.curRestrainIdList.length;n++){var o=this.curRestrainIdList[n],s=i.templateManager.getHeroRestrainById(o).levelOneSkill[0];s[0]!=i.constant.RESTRAIN_ATTR_TYPE_BATTLE_HERO||((s=s[3])<0||0<=e.indexOf(s))&&a.push(o)}return a},getHeroTowerRestrainList:function(e){for(var t=[],a=0;a<this.curRestrainIdList.length;a++){var n=this.curRestrainIdList[a],o=i.templateManager.getHeroRestrainById(n).levelOneSkill[0],s=o[0];80==n||81==n||83==n||83==n?207==e&&t.push(n):s!=i.constant.RESTRAIN_ATTR_TYPE_HERO_TOWER||((o=o[3])<0||o==e)&&t.push(n)}return t},getHeroRestrainValue:function(e,t,a,n){switch(e){case i.constant.RESTRAIN_ATTR_TYPE_BARRACK:for(var o=0,s=this.getHeroRestrainSkillData(i.constant.RESTRAIN_ATTR_TYPE_BARRACK),r=0;r<s.length;r++)o+=s[r][1];return o;case i.constant.RESTRAIN_ATTR_TYPE_HP_BACK:for(var c=0,l=this.getHeroRestrainSkillData(i.constant.RESTRAIN_ATTR_TYPE_HP_BACK),d=0;d<l.length;d++)c+=l[d][1];return c/1e4;case i.constant.RESTRAIN_ATTR_TYPE_ENEMY_WEAK:for(var h=0,u=t,p=a,g=this.getHeroRestrainSkillData(i.constant.RESTRAIN_ATTR_TYPE_ENEMY_WEAK),_=0;_<g.length;_++){var m=g[_],E=m[1],T=m[2];if(u==E)for(var f=3;f<m.length;f++)if(p==m[f]){h+=T;break}}return h/1e4;case i.constant.RESTRAIN_ATTR_TYPE_TOWER_STRONG:for(var S=this.getHeroRestrainSkillData(i.constant.RESTRAIN_ATTR_TYPE_TOWER_STRONG),A=t,I=a,y=n,P=0,v=0;v<S.length;v++){var L=(R=S[v])[1],N=R[2],b=R[3],R=R[4]/1e4;(L<0||L==I)&&N<=y&&b==A&&(P+=R)}return P;case i.constant.RESTRAIN_ATTR_TYPE_REVIVE_TIME:for(var C=0,D=this.getHeroRestrainSkillData(i.constant.RESTRAIN_ATTR_TYPE_REVIVE_TIME),k=0;k<D.length;k++)C+=D[k][2];return C/1e4;case i.constant.RESTRAIN_ATTR_TYPE_SKILL_CD:for(var O=0,w=this.getHeroRestrainSkillData(i.constant.RESTRAIN_ATTR_TYPE_SKILL_CD),M=0;M<w.length;M++)O+=w[M][1];return O/1e4;case i.constant.RESTRAIN_ATTR_TYPE_SPECIAL_HURT:for(var B=this.getHeroRestrainSkillData(i.constant.RESTRAIN_ATTR_TYPE_SPECIAL_HURT),H=t,G=0,U=0;U<B.length;U++){var x=B[U],F=x[1]/1e4;x[2]==H&&(G+=F)}return G;case i.constant.RESTRAIN_ATTR_TYPE_BATTLE_HERO:for(var Y=this.getHeroRestrainSkillData(i.constant.RESTRAIN_ATTR_TYPE_BATTLE_HERO),V=t,W=a,K=0,j=0;j<Y.length;j++){var Q,q=(Q=Y[j])[1],J=Q[2]/1e4;((Q=Q[3])<0||Q==W)&&q==V&&(K+=J)}return K;case i.constant.RESTRAIN_ATTR_TYPE_HERO_TOWER:for(var X=this.getHeroRestrainSkillData(i.constant.RESTRAIN_ATTR_TYPE_HERO_TOWER),z=t,Z=a,$=0,ee=0;ee<X.length;ee++){var te,ie=(te=X[ee])[1],ae=te[2]/1e4;((te=te[3])<0||te==Z)&&ie==z&&($+=ae)}return $;case i.constant.RESTRAIN_ATTR_TYPE_HERO_REVIVE:for(var ne=0,oe=0,se=this.getHeroRestrainSkillData(i.constant.RESTRAIN_ATTR_TYPE_HERO_REVIVE),re=0;re<se.length;re++)ne+=se[re][1]/100,oe=se[re][2];return[ne,oe];case i.constant.RESTRAIN_ATTR_TYPE_SUNDER_ARMOR:for(var ce=0,le=this.getHeroRestrainSkillData(i.constant.RESTRAIN_ATTR_TYPE_SUNDER_ARMOR),de=0;de<le.length;de++)ce+=le[de][1];return ce/1e4}},loadRes:function(){switch(this.loadIndex++,this.loadIndex){case 2:this.initWaveStartTips(),this.initShadowPool(),this.initPointPool(),i.battleScene.addLoadingPercent(i.constant.LOADING_POOL_TIPS);break;case 3:this.initBulletPool(),i.battleScene.addLoadingPercent(i.constant.LOADING_POOL_BULLET);break;case 4:this.initSoldierPool(),i.battleScene.addLoadingPercent(i.constant.LOADING_POOL_SOLDIER);break;case 5:this.initFlyHpPool(),this.initDropTipsPool(),this.initSkillTipsPool(),this.initIconTipsPool(),this.initEffectDownPool(),this.initBulletEffectPool(),i.battleScene.addLoadingPercent(i.constant.LOADING_POOL_FLY);break;case 6:this.initGameTowerControl(),this.initGameHeroOperate(),i.battleScene.addLoadingPercent(i.constant.LOADING_UI_CONTROL);break;case 7:this.initEnemyPool(),i.battleScene.addLoadingPercent(i.constant.LOADING_POOL_ENEMY)}},getBattleSpriteFrame:function(e){return this.battleAtlas.getSpriteFrame(e)},getPrefabName:function(e){return this.checkPrefabList||(this.checkPrefabList=["tower_bullet03_6_hit_down","tower_bullet03_6_hit_up","battle_poisonring","hero7_tower_skill_hit","hero7_tower_skill_hit_down","skill_speedUp"]),0<=this.checkPrefabList.indexOf(e)&&i.player.commonModule.isLowIosDevice()&&(e+="_small"),e},getTowerInfoList:function(){for(var e=[],t=0;t<this.gameTowerList.length;t++){var i=this.gameTowerList[t];i.isHaveTower()&&(i={towerId:i.getTowerId(),level:i.getLevel()},e.push(i))}return e},update:function(e){if(this.battleFrame++,this.updateTime+=e,!(this.updateTime<1/i.constant.BATTLE_FRAME_RATE)){this.updateTime-=1/i.constant.BATTLE_FRAME_RATE,this.loadRes();var t=this.battleSpeedPercent;t+=this.cacheUpdateNum;var a=Math.floor(t);this.cacheUpdateNum=t-a;for(var n=e<1/i.constant.BATTLE_FRAME_RATE?1/i.constant.BATTLE_FRAME_RATE:e,o=0;o<a;o++)this.updateBattle(n)}},updateBattle:function(e){if(!this.gamePause&&this.curState!=i.constant.GAME_STATE_LOAD&&i.gameScene.gameState==i.constant.GAME_STATE_BATTLE){switch(this.curTime+=e,.5<this.curTime&&(this.curTime=0,this.checkBattleTriggerGuide()),this.curState){case i.constant.GAME_STATE_LOAD:break;case i.constant.GAME_STATE_READY:this.logicGameReady(e);break;case i.constant.GAME_STATE_START:this.logicGameStart(e);break;case i.constant.GAME_STATE_OVER:}if(this.skillEnemySlowData&&0<this.skillEnemySlowData.atkSpeedTime&&(this.skillEnemySlowData.atkSpeedTime-=e,this.skillEnemySlowData.atkSpeedTime<=0&&this.showEnemySlowEffect(!1)),this.skillHeroQuickData&&0<this.skillHeroQuickData.atkSpeedTime&&(this.skillHeroQuickData.atkSpeedTime-=e,this.skillHeroQuickData.atkSpeedTime<=0&&this.showHeroQuickEffect(!1)),this.soldierList)for(var t=0;t<this.soldierList.length;t++)this.soldierList[t].getComponent("GameHero").updateHero(e);if(this.enemyList)for(var a=0;a<this.enemyList.length;a++)this.enemyList[a].getComponent("GameEnemy").updateEnemy(e);if(this.bulletList)for(var n=0;n<this.bulletList.length;n++)this.bulletList[n].getComponent("GameBullet").updateBullet(e);if(this.gameTowerList)for(var o=0;o<this.gameTowerList.length;o++)this.gameTowerList[o].updateTower(e);for(var s=0;s<this.gameBattleUIObj.skillObjList.length;s++)this.gameBattleUIObj.skillObjList[s].updateCd(e);for(var r=0;r<this.gameBattleUIObj.headObjList.length;r++)this.gameBattleUIObj.headObjList[r].updateCd(e);if(this.waveStartTipsList)for(var c=0;c<this.waveStartTipsList.length;c++)this.waveStartTipsList[c].updateCd(e);this.playInstanceSoundEffect(e)}}}),cc._RF.pop()},{}],BiConstant:[function(e,t){"use strict";cc._RF.push(t,"61ebcCCasFG45hMcoWv+pPd","BiConstant"),e("Aft").biConstant={EVENT_TYPE_DEFAULT:"0",EVENT_TYPE_LOGIN:"1",EVENT_TYPE_ONLINE_TIME:"2",EVENT_TYPE_GUIDE:"3",EVENT_TYPE_INSTANCE_LEVEL:"4",EVENT_TYPE_WEAPONS_LEVEL:"5",EVENT_TYPE_PLAYER_LEVEL:"6",EVENT_TYPE_DIAMOND_CONSUME:"7",EVENT_TYPE_NEW_PLAYER:"8",EVENT_TYPE_SHOW_GUIDE:"9",EVENT_TYPE_OPEN_PAGE:"10",EVENT_TYPE_AD_REWARD:"12",EVENT_TYPE_BATTLE:"13",EVENT_TYPE_GM:"14",EVENT_TYPE_AD:"15",EVENT_TYPE_AD_CLICK:"16",EVENT_TYPE_AD_SHOW:"17",EVENT_TYPE_NO_AD:"19",EVENT_TYPE_CALL_SDK_SHOW_AD:"20",EVENT_TYPE_SHOW_AD_ERROR:"21",EVENT_TYPE_AD_CLICK_BAR:"23",EVENT_TYPE_SHOW_FULL_AD:"24",EVENT_TYPE_NO_FULL_AD:"25",EVENT_TYPE_CALL_SDK_SHOW_FULL_AD:"26",EVENT_TYPE_FULL_AD_CLICK_BAR:"27",EVENT_TYPE_FULL_AD_CLOSE:"28",EVENT_TYPE_FULL_AD_SKIP:"29",EVENT_TYPE_TIGER_FULL_AD:"30",EVENT_TYPE_AD_SKIP:"31",EVENT_TYPE_AD_FINISH:"32",EVENT_TYPE_AD_CLOSE:"33",EVENT_TYPE_AD_REWARD_CALLBACK:"34",EVENT_TYPE_GUIDE_TYPE:"36",EVENT_TYPE_COUNT:"37",EVENT_TYPE_CLICK:"38",EVENT_TYPE_USE_ITEM:"40",EVENT_TYPE_DROP_ITEM:"41",EVENT_TYPE_DIAMOND_DROP:"42",EVENT_TYPE_COIN_CONSUME:"43",EVENT_TYPE_COIN_DROP:"44",EVENT_TYPE_EXP_CONSUME:"45",EVENT_TYPE_EXP_DROP:"46",EVENT_TYPE_RECHARGE_BUTTON:"50",EVENT_TYPE_RECHARGE_CHANNEL:"51",EVENT_TYPE_HERO:"60",EVENT_TYPE_HERO_UP_LEVEL:"61",EVENT_TYPE_HERO_UP_STAR:"62",EVENT_TYPE_HERO_UP_QUALITY:"63",EVENT_TYPE_TOWER_UP_LEVEL:"65",EVENT_TYPE_TOWER_UP_QUALITY:"66",EVENT_TYPE_TASK:"68",EVENT_TYPE_BATTLE_TOWER_LEVEL:"70",EVENT_TYPE_BATTLE_MOVE_HERO:"71",EVENT_TYPE_BATTLE_HERO_DIE:"72",EVENT_TYPE_HERO_PIECE_DROP:"80",EVENT_TYPE_HERO_PIECE_COST:"81",EVENT_TYPE_SKILL_PIECE_DROP:"82",EVENT_TYPE_SKILL_PIECE_COST:"83",EVENT_TYPE_SKILL_UP_LEVEL:"84",EVENT_TYPE_SKILL_UP_STAR:"85",EVENT_TYPE_SKILL_USE:"86",EVENT_TYPE_GAY_FRIEND_UNLOCK:"87",EVENT_TYPE_GAY_FRIEND_USE:"88",EVENT_TYPE_START_SHARE:"89",EVENT_TYPE_SHARE_TIME_OUT:"90",EVENT_TYPE_SHARE_TIME_SHORT:"91",EVENT_TYPE_SHARE_REWARD:"92",EVENT_TYPE_SHARE_RANDOM_FAIL:"93",EVENT_TYPE_ALL_SHARE:"94",EVENT_TYPE_BANNER:"95",EVENT_TYPE_GRID:"96",EVENT_TYPE_INVITE:"97",EVENT_TYPE_SINGLE_GRID:"98",EVENT_TYPE_UNLOCK_HERO_PIECE_DROP:"99",EVENT_TYPE_YEAR_MONSTER_AD_OVER:"100",EVENT_TYPE_ERROR:"666",EVENT_ID_DEFAULT_UNKNOW:"10000001",EVENT_ID_LOGIN_LOGIN:"10001001",EVENT_ID_ONLINE_TIME:"10002001",EVENT_ID_GUIDE:"10003001",EVENT_ID_INSTANCE_LEVEL:"10004001",EVENT_ID_PLAYER_LEVEL:"10006001",EVENT_ID_DIAMOND_HERO_UP_STAR:"10007001",EVENT_ID_DIAMOND_TOWER_UP_QUALITY:"10007002",EVENT_ID_DIAMOND_BUY_POWER:"10007003",EVENT_ID_DIAMOND_SHOP_SILVER:"10007004",EVENT_ID_DIAMOND_SHOP_HERO_EXP:"10007005",EVENT_ID_DIAMOND_SHOP_BOX_PAGE:"10007006",EVENT_ID_DIAMOND_SHOP_BOX_REWARD_PAGE:"10007007",EVENT_ID_DIAMOND_REVIVAL:"10007008",EVENT_ID_DIAMOND_SKILL_ADD_STAR:"10007009",EVENT_ID_OPEN_LOADING_PAGE:"10010001",EVENT_ID_OPEN_HOT_UPDATE_PAGE:"10010002",EVENT_ID_OPEN_LOAD_SCENE_PAGE:"10010003",EVENT_ID_OPEN_MAIN_PAGE:"10010004",EVENT_ID_OPEN_TASK_PAGE:"10010005",EVENT_ID_OPEN_RANK_PAGE:"10010006",EVENT_ID_OPEN_WORLD_PAGE:"10010007",EVENT_ID_OPEN_POWER_PAGE:"10010008",EVENT_ID_OPEN_HANGUP_PAGE:"10010009",EVENT_ID_OPEN_HERO_PAGE:"10010010",EVENT_ID_OPEN_HERO_DETAIL_PAGE:"10010011",EVENT_ID_OPEN_HERO_DETAIL_PAGE_AD:"10010012",EVENT_ID_OPEN_TOWER_PAGE:"10010013",EVENT_ID_OPEN_TOWER_PAGE_AD:"10010014",EVENT_ID_OPEN_SHOP_PAGE:"10010015",EVENT_ID_OPEN_SHOP_BOX_REWARD_PAGE:"10010016",EVENT_ID_OPEN_OFFICE_PAGE:"10010017",EVENT_ID_OPEN_BATTLE_BUFF_PAGE:"10010018",EVENT_ID_OPEN_SKILL_PAGE:"10010019",EVENT_ID_OPEN_SKILL_UP_PAGE:"10010020",EVENT_ID_OPEN_BATTLE_BOX_PAGE:"10010021",EVENT_ID_OPEN_RESULT_SUCCESS_PAGE:"10010022",EVENT_ID_OPEN_RESULT_FAIL_PAGE:"10010023",EVENT_ID_OPEN_REVIVAL_PAGE:"10010024",EVENT_ID_OPEN_SIGN_PAGE:"10010025",EVENT_ID_OPEN_QUICK_HANGUP:"10010026",EVENT_ID_OPEN_CLEAR_ACCOUNT:"10010027",EVENT_ID_OPEN_TIME_ERROR_TIP:"10010028",EVENT_ID_OPEN_POWER_PAGE_AD:"10010029",EVENT_ID_OPEN_HANGUP_PAGE_AD:"10010030",EVENT_ID_OPEN_QUICK_HANGUP_CD_AD:"10010031",EVENT_ID_OPEN_QUICK_HANGUP_FIVE_AD:"10010032",EVENT_ID_OPEN_SKILL_PAGE_ALL_GET_AD:"10010033",EVENT_ID_OPEN_SKILL_PAGE_REFRESH_AD:"10010034",EVENT_ID_OPEN_SIGN_AGAIN_AD:"10010035",EVENT_ID_OPEN_PIGGY_BANK_NOT_ENOUGH:"10010036",EVENT_ID_OPEN_PIGGY_BANK_ENOUGH:"10010037",EVENT_ID_OPEN_PIGGY_BANK_MAX:"10010038",EVENT_ID_OPEN_VIP_PAGE:"10010039",EVENT_ID_OPEN_PICTORIAL_PAGE:"10010040",EVENT_ID_OPEN_PICTORIAL_DETAIL_PAGE:"10010041",EVENT_ID_OPEN_MAIL_PAGE:"10010042",EVENT_ID_OPEN_MAIL_FEEDBACK_PAGE:"10010043",EVENT_ID_OPEN_MAIL_GLOBAL_PAGE:"10010044",EVENT_ID_OPEN_ACTIVE_SKILL_PAGE:"10010045",EVENT_ID_OPEN_GAY_PAGE:"10010046",EVENT_ID_OPEN_GAY_AD_PAGE:"10010047",EVENT_ID_OPEN_MARK_PAGE:"10010048",EVENT_ID_OPEN_PIECE_CHANGE:"10010049",EVENT_ID_OPEN_GIFT_CODE:"10010050",EVENT_ID_OPEN_IN_MAP:"10010051",EVENT_ID_OPEN_IN_MAP_SPEED:"10010052",EVENT_ID_OPEN_IN_MAP_REWARD:"10010053",EVENT_ID_OPEN_IN_MAP_HERO_UPGRADE:"10010054",EVENT_ID_OPEN_HERO_LIST_SECOND_AD:"10010055",EVENT_ID_OPEN_MAIN_TASK_HAVE_AD:"10010056",EVENT_ID_OPEN_WORLD_RANK:"10010057",EVENT_ID_OPEN_CITY_RANK:"10010058",EVENT_ID_OPEN_SPEED_TRY:"10010059",EVENT_ID_OPEN_ONE_KEY_IN_MAP:"10010060",EVENT_ID_OPEN_SECOND_HERO_ADD_TIME_AD:"10010061",EVENT_ID_OPEN_SECOND_HERO_CHANGE_HERO_AD:"10010062",EVENT_ID_OPEN_YEAR_MONSTER:"10010063",EVENT_ID_OPEN_MONSTER_RESULT:"10010064",EVENT_ID_OPEN_ALLIANCE:"10010065",EVENT_ID_OPEN_ALLIANCE_JOIN:"10010066",EVENT_ID_OPEN_ALLIANCE_EXIT:"10010067",EVENT_ID_OPEN_ALLIANCE_RED:"10010068",EVENT_ID_OPEN_ALLIANCE_RED_LOOK:"10010069",EVENT_ID_OPEN_YEAR_TASK:"10010070",EVENT_ID_OPEN_YEAR_ACTIVITY:"10010071",EVENT_ID_OPEN_NEW_YEAR_MEDAL_UP:"10010072",EVENT_ID_OPEN_HERO_TRY:"10010073",EVENT_ID_OPEN_BATTLE_PHONE_SHARE:"10010074",EVENT_ID_OPEN_ALL_PAGE:"10010999",EVENT_ID_BATTLE_ENTER:"10013001",EVENT_ID_BATTLE_SUCCESS:"10013002",EVENT_ID_BATTLE_FAIL:"10013003",EVENT_ID_BATTLE_MOVE_SOLDIER:"10013004",EVENT_ID_BATTLE_SKILL_LIGHTNING:"10013005",EVENT_ID_BATTLE_SKILL_CALL:"10013006",EVENT_ID_BATTLE_SKILL_TRANSFER:"10013007",EVENT_ID_BATTLE_START_WAVE:"10013008",EVENT_ID_BATTLE_SPEED:"10013009",EVENT_ID_BATTLE_PAUSE:"10013010",EVENT_ID_BATTLE_SELL_TOWER:"10013011",EVENT_ID_BATTLE_ALL_INFO:"10013012",EVENT_ID_AD_LOAD_ERROR:"10015001",EVENT_ID_AD_SHOW_ERROR:"10015002",EVENT_ID_AD_SHOW_OVER:"10015003",EVENT_ID_AD_SHOW_START:"10015004",EVENT_ID_AD_LOAD_OVER:"10015005",EVENT_ID_AD_LOAD_START:"10015006",EVENT_ID_AD_CLICK_CLOSE:"10015007",EVENT_ID_AD_REWARD_VERIFY:"10015008",EVENT_ID_AD_CLICK_BAR:"10015009",EVENT_ID_AD_CLICK_SHOW:"10015010",EVENT_ID_AD_SKIP:"10015011",EVENT_ID_NEW_PLAYER_LOADING:"10018001",EVENT_ID_NEW_PLAYER_HOT_UPDATE:"10018002",EVENT_ID_NEW_PLAYER_LOAD_SCENE:"10018003",EVENT_ID_NEW_PLAYER_GAME_SCENE:"10018004",EVENT_ID_NEW_PLAYER_CHANGE_SCENE:"10018005",EVENT_ID_COUNT_VIP_LEVEL:"10037001",EVENT_ID_COUNT_MAIN_TASK_OVER:"10037002",EVENT_ID_COUNT_START_SHARE:"10037003",EVENT_ID_COUNT_SUBSCRIBE_OPEN:"10037004",EVENT_ID_COUNT_SUBSCRIBE_ENTER:"10037005",EVENT_ID_COUNT_SUBSCRIBE_REWARD_1:"10037006",EVENT_ID_COUNT_SUBSCRIBE_REWARD_2:"10037007",EVENT_ID_COUNT_SUBSCRIBE_REWARD_3:"10037008",EVENT_ID_COUNT_SUBSCRIBE_AGREE_1:"10037009",EVENT_ID_COUNT_SUBSCRIBE_AGREE_2:"10037010",EVENT_ID_COUNT_SUBSCRIBE_AGREE_3:"10037011",EVENT_ID_COUNT_SUBSCRIBE_SHOW_0:"10037012",EVENT_ID_COUNT_SUBSCRIBE_SHOW_1:"10037013",EVENT_ID_COUNT_SUBSCRIBE_SHOW_2:"10037014",EVENT_ID_COUNT_SUBSCRIBE_SHOW_3:"10037015",EVENT_ID_COUNT_SUBSCRIBE_ACCEPT_0:"10037016",EVENT_ID_COUNT_SUBSCRIBE_ACCEPT_1:"10037017",EVENT_ID_COUNT_SUBSCRIBE_ACCEPT_2:"10037018",EVENT_ID_COUNT_SUBSCRIBE_ACCEPT_3:"10037019",EVENT_ID_COUNT_SUBSCRIBE_REJECT_0:"10037020",EVENT_ID_COUNT_SUBSCRIBE_REJECT_1:"10037021",EVENT_ID_COUNT_SUBSCRIBE_REJECT_2:"10037022",EVENT_ID_COUNT_SUBSCRIBE_REJECT_3:"10037023",EVENT_ID_COUNT_SUBSCRIBE_SHOW_4:"10037024",EVENT_ID_COUNT_SUBSCRIBE_ACCEPT_4:"10037025",EVENT_ID_COUNT_JOIN_ALLIANCE:"10037026",EVENT_ID_COUNT_ALLIANCE_SHARE:"10037027",EVENT_ID_COUNT_ALLIANCE_AD:"10037028",EVENT_ID_COUNT_ALLIANCE_OPEN_RED:"10037029",EVENT_ID_COUNT_KILL_MONSTER:"10037030",EVENT_ID_COUNT_MONSTER_AD:"10037031",EVENT_ID_CLICK_CLEAR_ACCOUNT:"10038001",EVENT_ID_CLICK_GUIDE_ONE:"10038002",EVENT_ID_CLICK_SKILL_SELECT:"10038003",EVENT_ID_CLICK_SKILL_AD_UPGRADE:"10038004",EVENT_ID_CLICK_GET_REAL_HERO:"10038005",EVENT_ID_CLICK_MARK_SCORE:"10038006",EVENT_ID_CLICK_GET_GIFT_CODE:"10038007",EVENT_ID_CLICK_PRICE_CHANGE:"10038008",EVENT_ID_CLICK_ONE_KEY_IN_MAP:"10038009",EVENT_ID_CLICK_START_SHARE:"10038010",EVENT_ID_CLICK_BATTLE_FRIEND_SHARE:"10038011",EVENT_ID_CLICK_BATTLE_GROUP_SHARE:"10038012",EVENT_ID_CLICK_NEW_YEAR_ACTIVITY_OPEN:"10038013",EVENT_ID_CLICK_NEW_YEAR_MONSTER_REWARD:"10038014",EVENT_ID_CLICK_NEW_YEAR_TASK_OVER:"10038015",EVENT_ID_CLICK_NEW_YEAR_TASK_MEDAL:"10038016",EVENT_ID_CLICK_GAME_CLUB:"10038017",EVENT_ID_USE_ITEM_BOX_TICKET:"10040001",EVENT_ID_USE_ITEM_QUICK_BUY:"10040002",EVENT_ID_DROP_ITEM_BOX_TICKET:"10041001",EVENT_ID_DIAMOND_DROP_BASE:10042e3,EVENT_ID_COIN_CONSUME_BASE:10043e3,EVENT_ID_COIN_DROP_BASE:10044e3,EVENT_ID_EXP_CONSUME_BASE:10045e3,EVENT_ID_EXP_DROP_BASE:10046e3,EVENT_ID_AD_REWARD_BASE:10012e3,EVENT_ID_AD_CLICK_BASE:10016e3,EVENT_ID_AD_SHOW_BASE:10017e3,EVENT_ID_NO_AD_BASE:10019e3,EVENT_ID_CALL_SDK_SHOW_AD_BASE:1002e4,EVENT_ID_AD_SHOW_ERROR_BASE:10021e3,EVENT_ID_AD_CLICK_BAR_BASE:10023e3,EVENT_ID_AD_SKIP_BASE:10031e3,EVENT_ID_AD_FINISH_BASE:10032e3,EVENT_ID_AD_CLOSE_BASE:10033e3,EVENT_ID_AD_REWARD_CALLBACK_BASE:10034e3,EVENT_ID_HERO_RECRUIT:"10060001",EVENT_ID_HERO_UP_LEVEL_BASE:10061e3,EVENT_ID_HERO_UP_STAR_BASE:10062e3,EVENT_ID_HERO_UP_QUALITY_BASE:10063e3,EVENT_ID_TOWER_UP_LEVEL_BASE:10065e3,EVENT_ID_TOWER_UP_QUALITY_BASE:10066e3,EVENT_ID_TASK_REWARD:"10068001",EVENT_ID_TASK_REWARD_BOX:"10068002",EVENT_ID_BATTLE_TOWER_LEVEL_BASE:1007e4,EVENT_ID_BATTLE_MOVE_HERO_BASE:10071e3,EVENT_ID_BATTLE_HERO_DIE_BASE:10072e3,EVENT_ID_HERO_PIECE_DROP_BASE:1008e4,EVENT_ID_HERO_PIECE_COST_BASE:10081e3,EVENT_ID_SKILL_PIECE_DROP_BASE:10082e3,EVENT_ID_SKILL_PIECE_COST_BASE:10083e3,EVENT_ID_SKILL_UP_LEVEL_BASE:10084e3,EVENT_ID_SKILL_UP_STAR_BASE:10085e3,EVENT_ID_SKILL_USE_BASE:10086e3,EVENT_ID_GAY_FRIEND_UNLOCK:"10087001",EVENT_ID_GAY_FRIEND_USE_BASE:10088e3,EVENT_ID_START_SHARE_BASE:10089e3,EVENT_ID_SHARE_TIME_OUT_BASE:1009e4,EVENT_ID_SHARE_TIME_SHORT_BASE:10091e3,EVENT_ID_SHARE_REWARD_BASE:10092e3,EVENT_ID_SHARE_RANDOM_FAIL_BASE:10093e3,EVENT_ID_ALL_SHARE_START:"10094001",EVENT_ID_ALL_SHARE_TIME_OUT:"10094002",EVENT_ID_ALL_SHARE_TIME_SHORT:"10094003",EVENT_ID_ALL_SHARE_REWARD:"10094004",EVENT_ID_ALL_SHARE_RANDOM_FAIL:"10094005",EVENT_ID_ALL_BANNER_LOAD:"10095001",EVENT_ID_ALL_BANNER_LOAD_OVER:"10095002",EVENT_ID_ALL_BANNER_LOAD_ERROR:"10095003",EVENT_ID_ALL_BANNER_SHOW_SUCCESS:"10095004",EVENT_ID_ALL_BANNER_SHOW_ERROR:"10095005",EVENT_ID_ALL_BANNER_SHOW:"10095006",EVENT_ID_ALL_GRID_LOAD:"10096001",EVENT_ID_ALL_GRID_LOAD_OVER:"10096002",EVENT_ID_ALL_GRID_LOAD_ERROR:"10096003",EVENT_ID_ALL_GRID_SHOW_SUCCESS:"10096004",EVENT_ID_ALL_GRID_SHOW_ERROR:"10096005",EVENT_ID_ALL_GRID_SHOW:"10096006",EVENT_ID_INVITE_SUCCESS:"10097001",EVENT_ID_INVITE_ENTER:"10097002",EVENT_ID_INVITE_REWARD:"10097003",EVENT_ID_INVITE_SHARE:"10097004",EVENT_ID_ALL_SINGLE_GRID_SHOW:"10098001",EVENT_ID_ALL_SINGLE_GRID_LOAD_ERROR:"10098002",EVENT_ID_ALL_SINGLE_GRID_SHOW_ERROR:"10098003",EVENT_ID_UNLOCK_HERO_PIECE_DROP_BASE:10099e3,EVENT_ID_YEAR_MONSTER_AD_OVER_BASE:10092e3,EVENT_ID_ERROR_FIX_AD_TIME_USER:10666001,EVENT_ID_ERROR_FIX_AD_TIME:10666002,EVENT_ID_ERROR_FIX_LOCAL_TIME_USER:10666006,EVENT_ID_ERROR_FIX_LOCAL_TIME:10666007,EVENT_ID_ERROR_FIX_DATA_USER:10666008,EVENT_ID_ERROR_FIX_DATA_INFO:10666009,EVENT_ID_ERROR_TYPE_SUB_GOLD:1,EVENT_ID_ERROR_TYPE_SUB_DIAMOND:2,EVENT_ID_ERROR_TYPE_VIP_LEVEL:3,EVENT_ID_ERROR_TYPE_INSTANCE_IRON:4,EVENT_ID_ERROR_TYPE_VIP_TASK:5,EVENT_ID_ERROR_TYPE_VIP_AD:6,EVENT_ID_ERROR_TYPE_POWER:7,EVENT_ID_ERROR_TYPE_DIAMOND:8,EVENT_ID_ERROR_TYPE_GOLD:9,EVENT_ID_ERROR_TYPE_BOX_TICKET:10,EVENT_ID_ERROR_TYPE_HERO_EXP:11,EVENT_ID_ERROR_TYPE_COST_GOLD:12,EVENT_ID_ERROR_TYPE_COST_DIAMOND:13,EVENT_ID_ERROR_TYPE_COST_HERO_EXP:14},cc._RF.pop()},{}],BoxItemRender:[function(e,t){"use strict";cc._RF.push(t,"0bf28zZF2JA15tlXRcTetWO","BoxItemRender");var i=e("Aft");cc.Class({extends:cc.Component,properties:{boxSp:sp.Skeleton,rewardNode:cc.Node,rewardNumLabel:cc.Label,rewardIconSp:cc.Sprite},onLoad:function(){},init:function(){this.status=0,this.boxSp.clearTrack(0),this.boxSp.setAnimation(0,"stand",!0);var e=this;this.boxSp.setCompleteListener(function(t){"open"===(t=t.animation?t.animation.name:"")&&e.showOpenAniOver(),"jump"===t&&e.showJumpAniOver()}),this.rewardNode.opacity=1,this.updateOpenTime=-1},refresh:function(){this.status=0,this.rewardNode.opacity=1,this.updateOpenTime=-1,this.boxSp.clearTrack(0),this.boxSp.setAnimation(0,"stand",!0)},stopAni:function(){this.boxSp.clearTrack(0)},onClick:function(){var e,t;this.status||this.host.isClicking||(t=this.host.getRandomBox())<=0||(this.host.isClicking=!0,this.status=1,this.host.showButton(),this.host.getBestBoxId()===t?(this.rewardNum=this.host.getBestNum(),this.rewardIconSp.spriteFrame=this.host.getBestPieceSpriteFrame(),this.rewardId=this.host.getBestRewardId(),i.lang.updateLabelString(this.rewardNumLabel,[this.rewardNum]),this.flySpName=null,-1!==(e=this.host.getNeedAddBestNumId())&&i.player.shopModule.addBattleRewardCount(e),this.host.runBestAction()):(t=this.host.getRandomReward(t),this.rewardId=t.itemId,this.rewardNum=i.Utils.getRandomInt(t.num,t.maxNum),t.isMultiple&&1===t.isMultiple?this.rewardNum=Math.floor(this.rewardNum/1e4*i.player.commonModule.getHangUpReceiveCoin(3600)):t.isMultiple&&2===t.isMultiple&&(this.rewardNum=Math.floor(this.rewardNum/1e4*i.player.commonModule.getHangUpReceiveExp(3600))),t=i.templateManager.getItemDataById(this.rewardId).icon.split("/")[1],this.flySpName=t,i.lang.updateLabelString(this.rewardNumLabel,[i.Utils.formatNumberForLabel(this.rewardNum)]),this.rewardIconSp.spriteFrame=this.host.getItemIconByName(t)),this.showOpenAni(),i.soundsUtil.playSoundEffect("battle_box_open"))},showOpenAni:function(){this.boxSp.clearTrack(0),this.boxSp.setAnimation(0,"open",!1),this.updateOpenTime=0},showOpenAniOver:function(){this.boxSp.setAnimation(0,"open_stand",!0),this.host.isClicking=!1},showJumpAniOver:function(){this.boxSp.clearTrack(0),this.boxSp.setAnimation(0,"stand",!0)},showJumpAni:function(){this.boxSp.clearTrack(0),this.boxSp.setAnimation(0,"jump",!1)},showOpenAction:function(){i.player.itemModule.dropItem(this.rewardId,this.rewardNum,!1,i.constant.ITEM_ADD_SOURCE_KEY_BOX),this.rewardNode.opacity=255;var e=this.node.convertToWorldSpaceAR(cc.v2(0,0));this.flySpName?this.host.showRewardNodes(this.flySpName,e):this.host.isClicking=!1},update:function(e){this.updateOpenTime<0||(this.updateOpenTime+=e,.35<this.updateOpenTime&&(this.updateOpenTime=-1,this.showOpenAction()))}}),cc._RF.pop()},{}],BroadcastItemRender:[function(e,t){"use strict";cc._RF.push(t,"31312KmY5RP74gGOvI1ShVa","BroadcastItemRender");var i=e("Aft");cc.Class({extends:cc.Component,onLoad:function(){this.labelContent=cc.find("ContentLabel",this.node).getComponent("cc.RichText")},showContent:function(e){this.labelContent.string=e,this.labelContent.node.position=cc.v2(340,0),this.runCount=0},update:function(){this.labelContent.node.x-=3,this.labelContent.node.x+this.labelContent.node.width<=-340&&(this.labelContent.node.x=340,this.runCount++,1<=this.runCount&&(this.node.active=!1,i.gameScene.curBroadcastTime=0))}}),cc._RF.pop()},{}],BroadcastModule:[function(e,t){"use strict";cc._RF.push(t,"3e4225xkGdO87jUUWroYfQR","BroadcastModule");var i=e("Aft");cc.Class({extends:i.BaseHandler,init:function(e){this.player=e;var t=i.StorageUtil.getData(i.constant.SAVE_BROADCAST_DATA);t||(this.player.saveGameData(i.constant.SAVE_BROADCAST_DATA,e={saveBroadcastList:[]}),t=JSON.stringify(e)),i.Logger.debug("init broadcastData :",t),this.player._gameData.broadcastData=JSON.parse(t),this.allBroadcastList=[],this.curDownloadTime=-1},loadData:function(){},restoreData:function(e){e&&e.broadcastData&&(i.StorageUtil.save(i.constant.SAVE_BROADCAST_DATA,e.broadcastData,!0),i.Logger.debug("restoreData data  broadcastData :",JSON.stringify(e.broadcastData)))},saveBroadcastData:function(){this.player.saveGameData(i.constant.SAVE_BROADCAST_DATA,this.player._gameData.broadcastData)},getBroadcastData:function(){return this.player._gameData.broadcastData},getSaveBroadcastList:function(){return this.getBroadcastData().saveBroadcastList},setSaveBroadcastList:function(e){this.getBroadcastData().saveBroadcastList=e,this.saveBroadcastData(),this.synchronizeBroadcastData(),this.curDownloadTime=-1},getBroadcastDataFail:function(){this.synchronizeBroadcastData(),this.curDownloadTime=-1},synchronizeBroadcastData:function(){this.allBroadcastList=[];for(var e=this.getBroadcastData().saveBroadcastList,t=0;t<e.length;t++)this.allBroadcastList.push(e[t]),i.Logger.debug("\u540c\u6b65\u6570\u636e\u8dd1\u9a6c\u706f\u516c\u544a\u6570\u636e i = "+t+" data = "+e[t])},insertSelfBroadcastData:function(e){this.allBroadcastList.splice(0,0,e)},deleteTopBroadcastData:function(){this.allBroadcastList.splice(0,1)},getAllBroadcastList:function(){return this.allBroadcastList},uploadBroadcastData:function(e,t,a){var n=i.player.playerModule.getNickName(),o=[];o.push(e),o.push(n),t&&o.push(t),a&&o.push(a),this.insertSelfBroadcastData(o),i.Logger.debug("uploadBroadcastData start dataList = "+o),i.player.serviceModule.putBroadCast(o,function(){i.Logger.debug("uploadBroadcastData success dataList = "+o)})},downloadBroadcastData:function(){var e=this;i.Logger.debug("downloadBroadcastData start"),this.curDownloadTime=0,i.player.serviceModule.getBroadCast(function(t){i.Logger.debug("downloadBroadcastData success");var a=[];t&&t.list&&(a=t.list),e.setSaveBroadcastList(a)})}}),cc._RF.pop()},{}],BuffItemRender:[function(e,t){"use strict";cc._RF.push(t,"46af49T8QpHtoK/sZ+EmGFB","BuffItemRender");var i=e("Aft");cc.Class({extends:cc.Component,properties:{battleSkillAtlas:cc.SpriteAtlas,nameLabel:cc.Label,numberLabel:cc.Label,iconSp:cc.Sprite,arrowNode:cc.Node,descLabel:cc.Label},onLoad:function(){this.anim=this.node.getComponent(cc.Animation)},init:function(e,t){this.id=e.id,this.num=t,this.id===i.constant.START_BUFF_IRON?(this.descLabel.string=i.lang.getArgGameText(e.desc,[t]),i.lang.updateLabelString(this.numberLabel,[t])):(this.descLabel.string=i.lang.getArgGameText(e.desc,[t/100]),i.lang.updateLabelString(this.numberLabel,[t/100+"%"])),this.nameLabel.string=i.lang.getGameText(e.name),e=e.icon.split("/")[1],this.iconSp.spriteFrame=this.battleSkillAtlas.getSpriteFrame(e)},playAnim:function(){this.anim.play("giftItemRender")},onClick:function(){this.host.isCanClick()&&this.host.chooseOne(this.id,this.num)}}),cc._RF.pop()},{}],ByteBuf:[function(e,t){"use strict";cc._RF.push(t,"a5311PvIiZAqKHuPZgx3AYu","ByteBuf");var i=t,a=cc.Class({extends:cc.Object,properties:{buffers:{default:[]}},write:function(e){for(var t=0;t<e.length;t++)this.buffers.push(e[t])},writeInt:function(e){this.write(this.numToByte(e))},toUint8Array:function(){for(var e=new Uint8Array(this.buffers.length),t=0;t<this.buffers.length;t++)e[t]=this.buffers[t];return e},numToByte:function(e){for(var t=new Uint8Array(4),i=0;i<4;i++)t[i]=255&e>>8*(4-i-1);return t}});i.exports=a,cc._RF.pop()},{}],CaptureImagePage:[function(e,t){"use strict";cc._RF.push(t,"3ae04blsKNBLoyo4M9XGB0k","CaptureImagePage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{},onLoadPage:function(){this.blackBgNode=cc.find("blackBg",this.node),this.showCaptureNode=cc.find("show",this.node),this.captureSprite=cc.find("capture",this.showCaptureNode).getComponent(cc.Sprite),this.closeButtonNode=cc.find("closeButton",this.node),this.shareBtnNode=cc.find("share",this.node)},showPageBegan:function(){i.soundsUtil.playSoundEffect("share_photograph"),this.showCaptureNode.scale=1,this.showCaptureNode.active=!1,this.blackBgNode.active=!1,this.closeButtonNode.active=!1,this.shareBtnNode.active=!1,this.node.runAction(cc.sequence(cc.delayTime(.1),cc.callFunc(function(){i.nativeManager.captureImage(!1);var e,t=i.nativeManager.getCaptureData();t&&(this.showCaptureNode.active=!0,(e=new cc.Texture2D).initWithData(t,32,cc.visibleRect.width,cc.visibleRect.height),(t=new cc.SpriteFrame).setTexture(e),this.captureSprite.spriteFrame=t)},this),cc.delayTime(.1),cc.callFunc(function(){i.nativeManager.captureImage(!0)},this),cc.delayTime(.1),cc.callFunc(function(){this.blackBgNode.active=!0,this.showCaptureNode.runAction(cc.scaleTo(.35,.7))},this),cc.delayTime(.5),cc.callFunc(function(){this.shareBtnNode.active=!0,this.shareBtnNode.opacity=1,this.shareBtnNode.runAction(cc.fadeIn(.4)),this.closeButtonNode.active=!0,this.closeButtonNode.opacity=1,this.closeButtonNode.runAction(cc.fadeIn(.4))},this))),i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_BATTLE_PHONE_SHARE)},onClickShareToChat:function(){i.BI.onEvent(i.biConstant.EVENT_TYPE_CLICK,i.biConstant.EVENT_ID_CLICK_BATTLE_FRIEND_SHARE),i.nativeManager.shareCaptureImage(1)},onClickShareToTimeLine:function(){i.BI.onEvent(i.biConstant.EVENT_TYPE_CLICK,i.biConstant.EVENT_ID_CLICK_BATTLE_GROUP_SHARE),i.nativeManager.shareCaptureImage(2)},onClickClose:function(){this.closePage()}}),cc._RF.pop()},{}],ClearAccountPage:[function(e,t){"use strict";cc._RF.push(t,"bd620gz7vtE8ZJ2SBt4UHV5","ClearAccountPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{},onLoadPage:function(){},showPageBegan:function(){this.initData(),i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_CLEAR_ACCOUNT)},initData:function(){},onClickOK:function(){i.player.allianceModule.serverClearDataExitAlliance(function(){cc.game.pause(),i.BI.onEvent(i.biConstant.EVENT_TYPE_CLICK,i.biConstant.EVENT_ID_CLICK_CLEAR_ACCOUNT,i.player.instanceModule.getAllPassInstanceNum()),i.StorageUtil.clearAll();var e=i.player._gameData.playerBaseData,t=i.player.commonModule.getPlayerCityData();i.player._gameData={},e.dataIndex+=20,e.clearAccountCount+=1,e.playerLevel=1,e.playerExp=1,e.silver=i.templateManager.getGameParamValue("baseGold"),e.goldBullion=i.templateManager.getGameParamValue("baseDia"),e.power=i.templateManager.getGameParamValue("powerMaxNumAutoRecovery"),e.icon=i.templateManager.getGameParamValue("defaultHead"),e.loginTime=(new Date).getTime(),e.logoutTime=(new Date).getTime(),i.player._gameData.playerBaseData=e,i.StorageUtil.saveForceData(i.constant.SAVE_PLAYER_BASE_DATA,e),i.player.initModule(),i.player.commonModule.setPlayerCity(t),i.StorageUtil.saveForceData(i.constant.SAVE_COMMON_DATA,i.player._gameData.commonData),i.player.serviceModule.saveGameData(),i.player.resetInitFinish(),cc.director.loadScene("hotupdateScene")},function(){})},onClickCancel:function(){this.closePage()}}),cc._RF.pop()},{}],CommonBlackPage:[function(e,t){"use strict";cc._RF.push(t,"eb1afjHvDdF0LjYl6esz+Im","CommonBlackPage");var i=e("Aft");cc.Class({extends:cc.Component,properties:{},init:function(e){var t=cc.find("Splash",this.node),a=cc.find("mainTag",this.node),n=cc.find("heroBg",this.node);t.active=!1,a.active=!1,n.active=!1,e===i.pageConstant.BLACK_NODE_TYPE_BLACK?(t.active=!0,t.opacity=229.5):e===i.pageConstant.BLACK_NODE_TYPE_BLACK_85?(t.active=!0,t.opacity=216.75):e===i.pageConstant.BLACK_NODE_TYPE_BLACK_70?(t.active=!0,t.opacity=178.5):e===i.pageConstant.BLACK_NODE_TYPE_MAIN_TAG?a.active=!0:e===i.pageConstant.BLACK_NODE_TYPE_MAIN_HERO&&(n.active=!0)}}),cc._RF.pop()},{}],CommonCardItemRender:[function(e,t){"use strict";cc._RF.push(t,"57a6a7ZjzpOGKlxSxWTJ9JH","CommonCardItemRender");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{heroAtlas:{default:null,type:cc.SpriteAtlas}},afterLoad:function(){this.nameLabel=cc.find("name",this.node).getComponent(cc.Label),this.qualityLabel=cc.find("quality",this.node).getComponent(cc.Label),this.bgSprite=cc.find("cardAll/bg",this.node).getComponent(cc.Sprite),this.levelLabel=cc.find("cardAll/level",this.node).getComponent(cc.Label),this.towerSpine=cc.find("cardAll/towerSpine",this.node).getComponent(sp.Skeleton),this.powerLabel=cc.find("powerCapacityLayout/label",this.node).getComponent(cc.Label),this.heroIconSprite=cc.find("cardAll/heroIcon",this.node).getComponent(cc.Sprite),this.starLayoutNode=cc.find("starLayout",this.node),this.starNodeList=[],this.starNodeList.push(cc.find("icon1",this.starLayoutNode)),this.starNodeList.push(cc.find("icon2",this.starLayoutNode)),this.starNodeList.push(cc.find("icon3",this.starLayoutNode)),this.starNodeList.push(cc.find("icon4",this.starLayoutNode)),this.starNodeList.push(cc.find("icon5",this.starLayoutNode))},initData:function(e,t,a,n){i.Logger.debug("cardType: "+e+", id: "+t+", level: "+a),this._cardType=e,this._id=t,this._level=a,this._otherLevel=n,this._cardType==i.constant.MAIN_COMMON_CARD_TYPE_TOWER_LEVEL||this._cardType==i.constant.MAIN_COMMON_CARD_TYPE_TOWER_QUALITY?this.updateTower():this._cardType!=i.constant.MAIN_COMMON_CARD_TYPE_HERO_STAR&&this._cardType!=i.constant.MAIN_COMMON_CARD_TYPE_HERO_BREAK&&this._cardType!=i.constant.MAIN_COMMON_CARD_TYPE_HERO_WAKE||this.updateHero()},updateHero:function(){this.towerSpine.node.active=!1,this.heroIconSprite.node.active=!0;var e=i.templateManager.getHeroDataById(this._id),t=this._level,a=this._level;this.levelLabel.node.active=!1,this.starLayoutNode.active=!1,this.starLevel=this._level,this._cardType==i.constant.MAIN_COMMON_CARD_TYPE_HERO_STAR?(t=this._otherLevel||i.player.heroModule.getHeroLevel(this._id),a=i.player.heroModule.getHeroQuality(this._id)):this._cardType==i.constant.MAIN_COMMON_CARD_TYPE_HERO_BREAK?(this.starLevel=i.player.heroModule.getHeroStarLevel(this._id),a=i.player.heroModule.getHeroQuality(this._id),this.levelLabel.node.active=!0,i.lang.updateLabelString(this.levelLabel,[t])):this._cardType==i.constant.MAIN_COMMON_CARD_TYPE_HERO_WAKE&&(this.starLevel=i.player.heroModule.getHeroStarLevel(this._id),t=i.player.heroModule.getHeroLevel(this._id)),this.starLayoutNode.active=!0;for(var n=0;n<this.starNodeList.length;n++)this.starNodeList[n].getChildByName("icon").active=this.starLevel>n;var o=i.templateManager.getHeroQualityDataById(a);i.Logger.debug("qualityLevel: "+a+", heroQualityCfg: "+JSON.stringify(o)),this.nameLabel.string=i.lang.getGameText(e.name),this.nameLabel.node.color=cc.color(i.player.itemModule.getItemQualityColor(a)),this.qualityLabel.string=i.lang.getGameText(o.qualityName),this.qualityLabel.node.color=cc.color(i.player.itemModule.getItemQualityColor(a)),o=o.heroBg.split("/")[1],this.bgSprite.spriteFrame=this.heroAtlas.getSpriteFrame(o),a=i.player.heroModule.getHeroPowerValue(this._id,t,a),this.powerLabel.string=i.Utils.formatBigNumberForLabel(a),this.heroIconSprite.spriteFrame=i.heroHeadAtlas.getSpriteFrame(e.icon.split("/")[1])},updateTower:function(){var e=this;this.towerSpine.node.active=!1,this.heroIconSprite.node.active=!1,this.starLayoutNode.active=!1;var t=i.templateManager.getTowerTypeById(this._id),a=this._level,n=this._level;this.levelLabel.node.active=!1,this._cardType==i.constant.MAIN_COMMON_CARD_TYPE_TOWER_LEVEL?(this.levelLabel.node.active=!0,i.lang.updateLabelString(this.levelLabel,[n]),a=i.player.towerModule.getTowerQuality(this._id)):n=i.player.towerModule.getTowerLevel(this._id),n=i.templateManager.getTowerStarDataByLevel(this._id,n),a=i.templateManager.getTowerQualityDataByLevel(this._id,a),this.nameLabel.string=i.lang.getGameText(t.name),this.nameLabel.node.color=cc.color("#"+a.autoUpgradeFontColor),this.qualityLabel.string=i.lang.getGameText(a.qualityName),this.qualityLabel.node.color=cc.color("#"+a.autoUpgradeFontColor),this.bgSprite.spriteFrame=this.heroAtlas.getSpriteFrame(a.autoUpgradeBg),n=new i.BigNumber(n.ability).times(a.fightValue).div(1e4),this.powerLabel.string="x"+i.Utils.formatBigNumberForLabel(n.toFixed(0)),this.starLayoutNode.active=!0;for(var o=a.starNum,s=a.starBgNum,r=0;r<this.starNodeList.length;r++){var c=(l=this.starNodeList[r]).getChildByName("icon"),l=l.getChildByName("iconGrey");c.active=r<o,l.active=r<s}a="effect/battle/tower/"+t.spin,i.mainScene.getTowerSpineData(a,function(i){i&&(e.towerSpine.node.active=!0,e.towerSpine.node.scale=.65,e.towerSpine.skeletonData=i,e.towerSpine.premultipliedAlpha=t.isPremultipliedAlpha,e.towerSpine.clearTrack(0),e.towerSpine.setAnimation(0,t.actionName,!0))})}}),cc._RF.pop()},{}],CommonItemRender1:[function(e,t){"use strict";cc._RF.push(t,"372b5ByZ61Mo6doBLL5P1+E","CommonItemRender1");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{itemAtlas:{default:null,type:cc.SpriteAtlas},skillAtlas:{default:null,type:cc.SpriteAtlas}},afterLoad:function(){this.iconSprite=cc.find("label/icon",this.node).getComponent(cc.Sprite),this.countLabel=cc.find("label",this.node).getComponent(cc.Label)},initData:function(e,t){var a=null;switch(i.player.itemModule.getItemType(e)){case i.constant.ITEM_TYPE_COIN:case i.constant.ITEM_TYPE_BAG:var n=i.templateManager.getItemDataById(e);a=this.itemAtlas.getSpriteFrame(n.icon.split("/")[1]),i.lang.updateLabelString(this.countLabel,[i.Utils.formatBigNumberForLabel(t)]);break;case i.constant.ITEM_TYPE_HERO_PIECE:var o=i.templateManager.getHeroCardDataById(e);a=this.itemAtlas.getSpriteFrame(o.icon),this.countLabel.string=i.lang.getFormatString(i.GameTextCode.ITEM_SHOW,[i.lang.getGameText(o.name),i.Utils.formatBigNumberForLabel(t)]);break;case i.constant.ITEM_TYPE_SKILL_PIECE:o=i.templateManager.getSkillCardById(e),a=this.skillAtlas.getSpriteFrame(o.icon),this.countLabel.string=i.lang.getFormatString(i.GameTextCode.ITEM_SHOW,[i.lang.getGameText(o.name),i.Utils.formatBigNumberForLabel(t)])}!a||t<=0?this.node.active=!1:(this.countLabel.string.length<=6&&(this.countLabel.string="    "+this.countLabel.string+"    "),this.node.active||(this.node.active=!0),this.iconSprite.spriteFrame=a)}}),cc._RF.pop()},{}],CommonItemRender:[function(e,t){"use strict";cc._RF.push(t,"568d9kkDaFEFZEMnadGeyPN","CommonItemRender");var i=e("Aft");cc.Class({extends:cc.Component,properties:{commonAtlas:{default:null,type:cc.SpriteAtlas},skillAtlas:{default:null,type:cc.SpriteAtlas},vipAtlas:{default:null,type:cc.SpriteAtlas}},onLoad:function(){this.nodeAnimation=this.node.getComponent(cc.Animation),this.qualitySprite=cc.find("/rewards/bg",this.node).getComponent(cc.Sprite),this.iconSprite=cc.find("/rewards/icon",this.node).getComponent(cc.Sprite),this.numberLabel=cc.find("/rewards/label",this.node).getComponent(cc.Label),this.nameLabel=cc.find("/name",this.node).getComponent(cc.Label),this.firstPassNode=cc.find("/rewards/firstPass",this.node),this.gotNode=cc.find("/rewards/got",this.node),this.vipNode=cc.find("/rewards/vip",this.node),this.vipIcon=cc.find("/rewards/vip/vipIcon",this.node).getComponent(cc.Sprite),this.expiredNode=cc.find("/rewards/expired",this.node),this.timesNode=cc.find("times",this.node),this.timesLabel=cc.find("label",this.timesNode).getComponent(cc.Label),this.rewardEffectNode=cc.find("effect_icon_light",this.node),this.rewardNode=cc.find("rewards",this.node),this.rewardNode.on("touchstart",this.onTouchStart,this),this.curGray=!1},setHost:function(e){this.host=e},initData:function(e,t,a,n,o,s,r,c,l,d,h,u,p){this.nodeAnimation.stop(),this.nodeAnimation.setCurrentTime(0),this.nodeAnimation.play("CommonItemRender_fire"),this.itemId=e,this._number=t,this._isFirst=a,this._times=n,this._notShowName=o,this._notShowNumber=s,this._isGray=r,this.vipLevel=d,this.medalLevel=p,this.isCanReward=u,this.isLock=h,this.isPassTime=l,this.firstPassNode.active=a,a=i.player.itemModule.getItemType(this.itemId),this.nameLabel.node.active=!this._notShowName,this.numberLabel.node.active=!this._notShowNumber,this.vipNode.active=d,this.vipNode.active&&(this.vipNode.scale=1/.7,(d=i.templateManager.getVipDataByLevel(d))?this.vipIcon.spriteFrame=this.vipAtlas.getSpriteFrame(d.vipIconSmall):this.vipNode.active=!1),this.gotNode.active=!!c,this.expiredNode.active=!!l,this.rewardEffectNode.active=!!u,this.node.opacity=h?102:255,a===i.constant.ITEM_TYPE_NEW_YEAR_REWARD_BOX&&((T=i.templateManager.getNewYearTaskRewardBoxDataById(this.itemId)).icon||(g=T.reward,this.itemId=g[0].key,this._number=g[0].value,this.itemId===i.constant.COIN_TYPE_SILVER?this._number=i.player.commonModule.getHangUpReceiveCoin(this._number):this.itemId===i.constant.COIN_TYPE_HERO_EXP&&(this._number=i.player.commonModule.getHangUpReceiveExp(this._number)),a=i.player.itemModule.getItemType(this.itemId))),h="#FFFFFF";var g,_,m,E,T="Icon_Bg_Green";a===i.constant.ITEM_TYPE_COIN||a===i.constant.ITEM_TYPE_BAG?(g=(_=i.templateManager.getItemDataById(this.itemId)).icon.split("/")[1],this.iconSprite.spriteFrame=this.commonAtlas.getSpriteFrame(g),this.nameLabel.string=i.lang.getGameText(_.name),h="#"+_.qualityColor,T=_.qualityBg):a===i.constant.ITEM_TYPE_HERO_PIECE?(_=i.templateManager.getHeroCardDataById(this.itemId),this.iconSprite.spriteFrame=this.commonAtlas.getSpriteFrame(_.icon),this.nameLabel.string=i.lang.getGameText(_.name),m=i.player.heroModule.getHeroQuality(_.heroId),_.isChange||(m=_.color),h="#"+(m=i.templateManager.getHeroQualityDataById(m)).quality,T=m.itemBg):a===i.constant.ITEM_TYPE_SKILL_PIECE?(m=i.templateManager.getSkillCardById(this.itemId),this.iconSprite.spriteFrame=this.skillAtlas.getSpriteFrame(m.icon),this.nameLabel.string=i.lang.getGameText(m.name),h="#bf5dff",T="Icon_Bg_Purple"):a===i.constant.ITEM_TYPE_ROLE_HEAD?(E=i.templateManager.getHeadDataById(this.itemId).relationId,E=i.templateManager.getHeroDataById(E),this.iconSprite.spriteFrame=this.commonAtlas.getSpriteFrame(E.heroHead),this.nameLabel.string=i.lang.getGameText(E.name),h="#bf5dff",T="Icon_Bg_Purple"):a===i.constant.ITEM_TYPE_NEW_YEAR_REWARD_BOX&&(a=(E=i.templateManager.getNewYearTaskRewardBoxDataById(this.itemId)).icon,this.iconSprite.spriteFrame=this.commonAtlas.getSpriteFrame(a),this.nameLabel.string=i.lang.getGameText(E.name),h=i.player.itemModule.getItemQualityColor(E.quality),T=E.iconBg),this.nameLabel.node.color=cc.color(h),this.qualitySprite.spriteFrame=this.commonAtlas.getSpriteFrame(T),this.numberLabel.string=i.Utils.formatNumberForLabel(this._number),this._times?(this.timesNode.active=!0,i.lang.updateLabelString(this.timesLabel,[this._times])):this.timesNode.active=!1,this._isGray?(this.curGray||this.iconSprite.setMaterial(0,cc.Material.getBuiltinMaterial("2d-gray-sprite")),this.curGray||this.qualitySprite.setMaterial(0,cc.Material.getBuiltinMaterial("2d-gray-sprite"))):(this.curGray&&this.iconSprite.setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite")),this.curGray&&this.qualitySprite.setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite"))),this.curGray=this._isGray},updateData:function(){},onClickNode:function(){var e,t,a;this.isCanReward&&this.host&&this.host.rewardTask?this.host.rewardTask(this.medalLevel):this.host&&this.host.showTipsId===this.itemId?this.host&&this.host.hideTips():((e=this.node.convertToWorldSpaceAR(cc.v2(0,0))).y+=this.iconSprite.node.height/2,t="",!1===this.isCanReward&&!1===this.isLock&&!1===this.isPassTime&&(this.medalLevel&&i.player.taskModule.getNewYearTaskLevel()<this.medalLevel&&(a=i.templateManager.getNewYearTaskMedalById(this.medalLevel))&&(t+=i.lang.getFormatString(i.GameTextCode.SPRING_REWARD_TIPS,[i.lang.getGameText(a.name)])),this.vipLevel&&i.player.vipModule.getCurVipLevel()<this.vipLevel&&(0<t.length&&(t+=","),t+=i.lang.getFormatString(i.GameTextCode.SPRING_REWARD_TIPS,["VIP"+this.vipLevel]))),this.host&&this.host.showTips(this.itemId,e,i.constant.COMMON_TIPS_ITEM,t))},onTouchStart:function(){this.host&&this.host.onTouchStart&&this.host.onTouchStart()}}),cc._RF.pop()},{}],CommonModule:[function(e,t){"use strict";cc._RF.push(t,"4c04bH3aChF8L7hSF5S00tb","CommonModule");var i=e("Aft");cc.Class({extends:i.BaseHandler,init:function(e){this.player=e;var t=i.StorageUtil.getData(i.constant.SAVE_COMMON_DATA);t||(e={lastRefreshTime:i.timeUtil.getTime(),lastHangUpTime:i.timeUtil.getSecond(),todayBuyPowerCount:0,todayADPowerCount:0,nextRecoverPowerTime:0,lastMaxPowerLeftTime:0,hangUpTodayAdTimes:0,UsePowerGetRewardTimes:0,lastRecoverUsePowerTime:0,todayPopUpBattleBoxCount:0,areadyShowBubble:[],todayQuickHangUpAdTimes:0,mailRewardCacheData:[],lastMailList:[],rewardCache:[],todayWinCount:0,todayLoseCount:0,todayDiaRevivalTimes:0,todayAddPowerCount:0,todayAddGoldBullionCount:0,todayAddBoxTicketCount:0,todayAddSilverCount:0,todayAddHeroExpCount:0,todayCostHeroExpCount:0,totalCostHeroExpCount:0,todayCostSilverCount:0,totalCostSilverCount:0,todayCostGoldBullionCount:0,totalCostGoldBullionCount:0,pioneerHeroBattleCount:{},towerHeroBattleCount:{},heroInChapterCount:{},heroInChapterTotalCount:0,towerBreakCount:{},heroBreakCount:{},todayShareCount:0,curShareCheckCount:0,curShareFailCount:0,totalShareStartCount:0,showFreePowerIcon:!1,firstMyMiniPowerTime:0,lastMyMiniPowerTime:0,firstDestPowerTime:0,lastDestPowerTime:0,firstFloatWindowPowerTime:0,lastFloatWindowPowerTime:0,isCustomerPowerRewardOver:!1,isClickCustomerPower:!1,showFreePowerRedIndex:0,todayNewYearPopCount:0,hideGameIsSyncData:!1,todayFeedBackCount:0,todayAllianceShareCount:0,todayAllianceAdCount:0},this.player.saveGameData(i.constant.SAVE_COMMON_DATA,e),t=JSON.stringify(e)),i.Logger.debug("init common data  :",t),this.player._gameData.commonData=JSON.parse(t)},getCommonData:function(){return this.player._gameData.commonData},loadData:function(){console.log("=========== commonModule 111"),this.getCommonData().hangUpTodayAdTimes||(this.getCommonData().hangUpTodayAdTimes=0),this.getCommonData().UsePowerGetRewardTimes||(this.getCommonData().UsePowerGetRewardTimes=0),this.getCommonData().lastRecoverUsePowerTime||(this.getCommonData().lastRecoverUsePowerTime=0),this.getCommonData().todayPopUpBattleBoxCount||(this.getCommonData().todayPopUpBattleBoxCount=0),this.getCommonData().areadyShowBubble||(this.getCommonData().areadyShowBubble=[]),this.getCommonData().todayQuickHangUpAdTimes||(this.getCommonData().todayQuickHangUpAdTimes=0),this.getCommonData().mailRewardCacheData||(this.getCommonData().mailRewardCacheData=[]),this.getCommonData().lastMailList||(this.getCommonData().lastMailList=[]),this.getCommonData().todayWinCount||(this.getCommonData().todayWinCount=0),this.getCommonData().hasOwnProperty("rewardCache")||(this.getCommonData().rewardCache=[]),this.getCommonData().todayLoseCount||(this.getCommonData().todayLoseCount=0),this.getCommonData().todayDiaRevivalTimes||(this.getCommonData().todayDiaRevivalTimes=0),this.getCommonData().hasOwnProperty("todayAddPowerCount")||(this.getCommonData().todayAddPowerCount=0),this.getCommonData().hasOwnProperty("todayAddGoldBullionCount")||(this.getCommonData().todayAddGoldBullionCount=0),this.getCommonData().hasOwnProperty("todayAddBoxTicketCount")||(this.getCommonData().todayAddBoxTicketCount=0),this.getCommonData().hasOwnProperty("todayAddSilverCount")||(this.getCommonData().todayAddSilverCount=0),this.getCommonData().hasOwnProperty("todayAddHeroExpCount")||(this.getCommonData().todayAddHeroExpCount=0),this.getCommonData().hasOwnProperty("todayCostHeroExpCount")||(this.getCommonData().todayCostHeroExpCount=0),this.getCommonData().hasOwnProperty("todayCostSilverCount")||(this.getCommonData().todayCostSilverCount=0),this.getCommonData().hasOwnProperty("todayCostGoldBullionCount")||(this.getCommonData().todayCostGoldBullionCount=0),this.getCommonData().hasOwnProperty("totalCostHeroExpCount")||(this.getCommonData().totalCostHeroExpCount=0),this.getCommonData().hasOwnProperty("totalCostSilverCount")||(this.getCommonData().totalCostSilverCount=0),this.getCommonData().hasOwnProperty("totalCostGoldBullionCount")||(this.getCommonData().totalCostGoldBullionCount=0),this.getCommonData().hasOwnProperty("pioneerHeroBattleCount")||(this.getCommonData().pioneerHeroBattleCount={}),this.getCommonData().hasOwnProperty("towerHeroBattleCount")||(this.getCommonData().towerHeroBattleCount={}),this.getCommonData().hasOwnProperty("heroInChapterCount")||(this.getCommonData().heroInChapterCount={}),this.getCommonData().hasOwnProperty("heroInChapterTotalCount")||(this.getCommonData().heroInChapterTotalCount=0),this.getCommonData().hasOwnProperty("towerBreakCount")||(this.getCommonData().towerBreakCount={}),this.getCommonData().hasOwnProperty("heroBreakCount")||(this.getCommonData().heroBreakCount={}),this.getCommonData().hasOwnProperty("todayShareCount")||(this.getCommonData().todayShareCount=0),this.getCommonData().hasOwnProperty("curShareCheckCount")||(this.getCommonData().curShareCheckCount=0),this.getCommonData().hasOwnProperty("curShareFailCount")||(this.getCommonData().curShareFailCount=0),this.getCommonData().hasOwnProperty("totalShareStartCount")||(this.getCommonData().totalShareStartCount=0),this.getCommonData().hasOwnProperty("lastMyMiniPowerTime")||(this.getCommonData().lastMyMiniPowerTime=0),this.getCommonData().hasOwnProperty("lastDestPowerTime")||(this.getCommonData().lastDestPowerTime=0),this.getCommonData().hasOwnProperty("lastFloatWindowPowerTime")||(this.getCommonData().lastFloatWindowPowerTime=0),this.getCommonData().hasOwnProperty("firstMyMiniPowerTime")||(this.getCommonData().firstMyMiniPowerTime=0),this.getCommonData().hasOwnProperty("firstDestPowerTime")||(this.getCommonData().firstDestPowerTime=0),this.getCommonData().hasOwnProperty("firstFloatWindowPowerTime")||(this.getCommonData().firstFloatWindowPowerTime=0),this.getCommonData().hasOwnProperty("isCustomerPowerRewardOver")||(this.getCommonData().isCustomerPowerRewardOver=!1),this.getCommonData().hasOwnProperty("isClickCustomerPower")||(this.getCommonData().isClickCustomerPower=!1),this.getCommonData().hasOwnProperty("showFreePowerRedIndex")||(this.getCommonData().showFreePowerRedIndex=0),this.getCommonData().hasOwnProperty("todayFeedBackCount")||(this.getCommonData().todayFeedBackCount=0),this.getCommonData().hasOwnProperty("todayNewYearPopCount")||(this.getCommonData().todayNewYearPopCount=0),this.getCommonData().iosMark=!0,this.getCommonData().hasOwnProperty("battleBoxPlayerRate")||this.addBattleBoxPlayerRate(!0),this.getCommonData().hasOwnProperty("todayAllianceShareCount")||(this.getCommonData().todayAllianceShareCount=0),this.getCommonData().hasOwnProperty("todayAllianceAdCount")||(this.getCommonData().todayAllianceAdCount=0),this.offlineNextRecoverPowerTime=0,this.checkOfflinePowerFailCount=0,this.stopOfflineUpdateTime=0,this.checkServerTimeFailCount=0,this.stopUpdateTime=0,this.saveCommonData(),this.checkOfflinePower(),this.getMailInfo(!0),this.resetRegisterDay(),this._lastUpdateTime=0,this.rankDataMap={}},restoreData:function(e){e&&e.commonData&&(i.StorageUtil.save(i.constant.SAVE_COMMON_DATA,e.commonData,!0),i.Logger.debug("restoreData data  commonData :",JSON.stringify(e.commonData)))},saveCommonData:function(e){this.player.saveGameData(i.constant.SAVE_COMMON_DATA,this.getCommonData(),e)},resetPlayerData:function(){var e=this;this.checkFailOfflinePower();var t=i.timeUtil.getTodayHourTime(0);this.getCommonData().lastRefreshTime>=t||(this.stopUpdateTime=Math.max(0,this.stopUpdateTime-1),0===this.stopUpdateTime&&(this.isResetPlayerData||(this.isResetPlayerData=!0,i.Logger.debug("zero time refresh start !!!!!"),i.gameScene.checkServerTime(function(){e.checkServerTimeFailCount=0,e.stopUpdateTime=0,e.isResetPlayerData=!1,e.getCommonData().lastRefreshTime!==t&&(e.getCommonData().lastRefreshTime=t,e.getCommonData().todayAllianceShareCount=0,e.getCommonData().todayAllianceAdCount=0,e.resetRegisterDay(),i.player.shopModule.resetShopData(),i.player.taskModule.resetTodayTask(),i.player.taskModule.resetTodayNewYearTask(),i.player.pushModule.resetTodayPushData(),i.player.signModule.checkSignData(),i.player.heroModule.resetTodayHeroData(),i.player.vipModule.resetVipData(),i.player.instanceModule.resetInstanceData(),i.player.newYearModule.resetNewYearData(),e.getCommonData().hangUpTodayAdTimes=0,e.getCommonData().todayBuyPowerCount=0,e.getCommonData().todayADPowerCount=0,e.getCommonData().todayPopUpBattleBoxCount=0,e.getCommonData().todayQuickHangUpAdTimes=0,e.getCommonData().todayWinCount=0,e.getCommonData().todayLoseCount=0,e.getCommonData().todayDiaRevivalTimes=0,e.getCommonData().todayAddPowerCount=0,e.getCommonData().todayAddGoldBullionCount=0,e.getCommonData().todayAddBoxTicketCount=0,e.getCommonData().todayAddSilverCount=0,e.getCommonData().todayAddHeroExpCount=0,e.getCommonData().todayCostSilverCount=0,e.getCommonData().todayCostHeroExpCount=0,e.getCommonData().todayCostGoldBullionCount=0,e.getCommonData().todayShareCount=0,e.getCommonData().curShareCheckCount=0,e.getCommonData().curShareFailCount=0,e.getCommonData().isCustomerPowerRewardOver=!1,e.getCommonData().isClickCustomerPower=!1,e.getCommonData().todayFeedBackCount=0,e.getCommonData().todayNewYearPopCount=0,e.addBattleBoxPlayerRate(!0),e.saveCommonData(!0),i.Logger.debug("zero time refresh over !!!!!"),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_HANG_UP_PAGE))},!0,function(){e.isResetPlayerData=!1,e.checkServerTimeFailCount+=1,3<=e.checkServerTimeFailCount&&(e.checkServerTimeFailCount=0,e.stopUpdateTime=60)}))))},addBattleBoxPlayerRate:function(e){var t=i.templateManager.getGameParamValue("instanceBoxPeopleRange");e?this.getCommonData().battleBoxPlayerRate=i.Utils.getRandomInt(t[0][0],t[0][1]):(e=i.Utils.getRandomInt(t[1][0],t[1][1]),t=this.getCommonData().battleBoxPlayerRate,this.getCommonData().battleBoxPlayerRate=Math.min(9999,t+e))},getTodayNewYearPopCount:function(){return this.getCommonData().todayNewYearPopCount},addTodayNewYearPopCount:function(){this.getCommonData().todayNewYearPopCount++,this.saveCommonData()},getBattleBoxPlayerRate:function(){return this.getCommonData().battleBoxPlayerRate},resetCheckServerState:function(){this.stopUpdateTime=0},getMailInfo:function(e){var t=this;i.player.serviceModule.getMiniMail(function(a){a&&(t.miniMailList=a.list,t.setLastMailList(),t.mailOverdueDay=a.deleteDay||5,i.gameScene.pageIsOpened(i.pageConstant.PAGE_TYPE_EMAIL)&&i.eventBus.dispatchEvent(i.GameEventType.REFRESH_MAIL_PAGE),i.eventBus.dispatchEvent(i.GameEventType.Mail_UPDATE_EMAIL_RED),e&&t.checkNewMailOpen())})},setLastMailList:function(){for(var e=[],t=0;t<this.miniMailList.length;t++){var i=this.miniMailList[t],a=i.type+"-"+i.id;e.push(a),0<=this.getCommonData().lastMailList.indexOf(a)||(i.isNew=!0)}this.getCommonData().lastMailList=e,this.saveCommonData()},getMailOverdueDay:function(){return this.mailOverdueDay},formatMailDataList:function(){var e=[];if(!this.miniMailList)return this.getMailInfo(!0),e;for(var t=0;t<this.miniMailList.length;t++){var i,a=this.miniMailList[t];a.areadyDelete||(i=1e3*a.createTime,a.rewards&&0<a.rewards.length?i=a.areadyReceive?a.createTime:a.areadyRead?-i/100:-i:a.areadyRead?i/=10:i=-i,a.sortNum=i,e.push(a))}return e},getAllEmailList:function(){i.eventBus.dispatchEvent(i.GameEventType.Mail_UPDATE_EMAIL_RED);var e=this.formatMailDataList();return e.sort(function(e,t){return e.sortNum-t.sortNum}),e},checkNewMailOpen:function(){for(var e=this.getAllEmailList(),t=0;t<e.length;t++){var a=e[t];if(!a.areadyRead&&a.type==i.constant.MAIL_TYPE_GLOBAL){this.openMailPageCache=a;break}}},getOpenMailPageCache:function(){return this.openMailPageCache},cleanOpenMailPageCache:function(){this.openMailPageCache=null},readMiniMail:function(e,t){for(var a=[{type:e,id:t}],n=0;n<this.miniMailList.length;n++){var o=this.miniMailList[n];if(t==o.id&&e==o.type){if(o.areadyRead)break;o.areadyRead=!0,o.isNew=!1,o.readTime=i.timeUtil.getTime(),i.player.serviceModule.setMiniReadMail(a,function(){i.Logger.debug("readMiniMail fail - "+e+", id: "+t)})}}},deleteAloneMiniMail:function(e,t,a){for(var n=[],o=0;o<this.miniMailList.length;o++){var s=this.miniMailList[o];if(e==s.type&&t==s.id&&(!(0<this.getMailRewardValidList(s.rewards).length)||s.areadyReceive)&&s.areadyRead){n.push({type:s.type,id:s.id}),s.areadyDelete=!0,s.isNew=!1;break}}0!=n.length&&(a||i.player.serviceModule.deleteMiniMail(n,function(){i.Logger.debug("deleteAloneMiniMail - success ")}))},deleteAllMiniMail:function(){for(var e=[],t=0;t<this.miniMailList.length;t++){var a=this.miniMailList[t];0<this.getMailRewardValidList(a.rewards).length&&!a.areadyReceive||a.areadyRead&&(a.areadyDelete||(e.push({type:a.type,id:a.id}),a.areadyDelete=!0,a.isNew=!1))}return 0<e.length&&i.player.serviceModule.deleteMiniMail(e,function(){i.Logger.debug("deleteAllMiniMail - success ")}),e},dealMiniMailRewardList:function(e){for(var t=[],a=0;a<e.length;a++)t.push(e[a].type+"-"+e[a].id);for(var n=0;n<this.miniMailList.length;n++){var o=this.miniMailList[n],s=o.type+"-"+o.id;t.indexOf(s)<0||(o.areadyReceive=!0,o.areadyRead=!0,o.isNew=!1,o.readTime=i.timeUtil.getTime())}},getMiniMailRewardList:function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i].type+"-"+e[i].id);for(var a={},n=0;n<this.miniMailList.length;n++){var o=this.miniMailList[n],s=o.type+"-"+o.id;if(!(t.indexOf(s)<0))for(var r=0;r<o.rewards.length;r++){var c=o.rewards[r];a.hasOwnProperty(c.itemId)||(a[c.itemId]=0),a[c.itemId]+=c.itemValue}}var l,d=[];for(l in a)d.push({key:parseInt(l),value:a[l]});return d},getAllCanRewardMiniMail:function(){for(var e=[],t=0;t<this.miniMailList.length;t++){var i=this.miniMailList[t];0==this.getMailRewardValidList(i.rewards).length||i.areadyReceive||e.push({type:i.type,id:i.id})}return e},getMailRewardValidList:function(e){for(var t=[],a=0;a<e.length;a++){var n=e[a];i.player.itemModule.checkHaveItem(n.itemId)&&t.push(n)}return t},checkMiniMailRed:function(){var e=0;if(!this.miniMailList||0==this.miniMailList.length)return e;for(var t=0;t<this.miniMailList.length;t++){var i=this.miniMailList[t];if(0<this.getMailRewardValidList(i.rewards).length&&!i.areadyReceive)e+=1;else if(!i.areadyRead){e+=1;break}}return e},getTodayBuyPowerCount:function(){return this.getCommonData().todayBuyPowerCount},addTodayBuyPowerCount:function(){this.getCommonData().todayBuyPowerCount+=1,this.saveCommonData()},getTodayADPowerCount:function(){return this.getCommonData().todayADPowerCount},addTodayADPowerCount:function(){this.getCommonData().todayADPowerCount+=1,this.saveCommonData()},powerToMax:function(){var e=i.timeUtil.getTime();e=this.getCommonData().nextRecoverPowerTime-e,this.getCommonData().lastMaxPowerLeftTime=Math.max(0,e),this.saveCommonData()},getPowerBuyIsMax:function(){var e=i.templateManager.getGameParamValue("powerMaxTimeByDiamond"),t=i.player.vipModule.getVipFreePowerTimes();return this.getTodayBuyPowerCount()>=e&&this.getTodayADPowerCount()>=t},addPowerByTime:function(e){e===this.getCommonData().nextRecoverPowerTime&&(e=i.timeUtil.getTime()+1e3*i.templateManager.getGameParamValue("powerTimeAutoRecovery"),this.getCommonData().nextRecoverPowerTime=e,this.getCommonData().lastMaxPowerLeftTime=0,this.saveCommonData(),parseInt(i.player.playerModule.getPlayerPowerNum())>=i.templateManager.getGameParamValue("powerMaxNumAutoRecovery")||i.player.itemModule.dropItem(i.constant.COIN_TYPE_POWER,1,!1,i.constant.ITEM_ADD_SOURCE_POWER_RECOVER))},powerFromMax:function(){var e=i.timeUtil.getTime()+1e3*i.templateManager.getGameParamValue("powerTimeAutoRecovery");0<this.getCommonData().lastMaxPowerLeftTime&&(e=i.timeUtil.getTime()+this.getCommonData().lastMaxPowerLeftTime),this.getCommonData().lastMaxPowerLeftTime=0,this.getCommonData().nextRecoverPowerTime=e,this.saveCommonData()},checkFailOfflinePower:function(){0!==this.offlineNextRecoverPowerTime&&(this.offlineChecking||(this.stopOfflineUpdateTime=Math.max(0,this.stopOfflineUpdateTime-1),0===this.stopOfflineUpdateTime&&this.checkOfflinePower()))},checkOfflinePower:function(){console.log("============== check 111");var e,t=this;parseInt(i.player.playerModule.getPlayerPowerNum())>=i.templateManager.getGameParamValue("powerMaxNumAutoRecovery")||(e=i.timeUtil.getTime(),this.getCommonData().nextRecoverPowerTime>e||(this.offlineNextRecoverPowerTime=this.getCommonData().nextRecoverPowerTime,this.offlineChecking=!0,i.gameScene.checkServerTime(function(){0!==t.offlineNextRecoverPowerTime&&(t.addOfflinePower(),t.offlineNextRecoverPowerTime=0),t.checkOfflinePowerFailCount=0,t.stopOfflineUpdateTime=0,t.offlineChecking=!1},!0,function(){t.checkOfflinePowerFailCount+=1,3<=t.checkOfflinePowerFailCount&&(t.checkOfflinePowerFailCount=0,t.stopOfflineUpdateTime=180),t.offlineChecking=!1})))},addOfflinePower:function(){var e,t,a,n,o,s,r=parseInt(i.player.playerModule.getPlayerPowerNum()),c=i.templateManager.getGameParamValue("powerMaxNumAutoRecovery");c<=r||(e=i.timeUtil.getTime())<(t=this.offlineNextRecoverPowerTime)||(o=1e3*i.templateManager.getGameParamValue("powerTimeAutoRecovery"),a=1,n=e-t,a+=Math.floor(n/o),s=e+1e3*i.templateManager.getGameParamValue("powerTimeAutoRecovery"),c<=r+a?a=c-r:(o=n%o,s=e+1e3*i.templateManager.getGameParamValue("powerTimeAutoRecovery")-o),this.getCommonData().lastMaxPowerLeftTime=0,this.getCommonData().nextRecoverPowerTime=s,this.saveCommonData(),i.player.itemModule.dropItem(i.constant.COIN_TYPE_POWER,a,!1,i.constant.ITEM_ADD_SOURCE_POWER_OFFLINE),i.Logger.debug("checkOfflinePower curPower : "+r+" curTime :"+e+" lastTime :"+t+" subTime :"+n+" addCount :"+a+" after : "+i.player.playerModule.getPlayerPowerNum()))},getNextPowerTime:function(){return this.getCommonData().nextRecoverPowerTime},getHangUpTodayAdTimes:function(){return this.getCommonData().hangUpTodayAdTimes},getLastHangUpTodayAdTimes:function(){var e=i.player.vipModule.getCurVipCfg(),t=this.getHangUpTodayAdTimes();return(t=e.hangupNum[1]-t)<0?0:t},addHangUpTodayAdTimes:function(){this.getCommonData().hangUpTodayAdTimes+=1,this.saveCommonData()},getHangUpTime:function(){return this.getCommonData().lastHangUpTime||(this.getCommonData().lastHangUpTime=i.timeUtil.getSecond(),this.saveCommonData()),this.getCommonData().lastHangUpTime},resetHangUpTime:function(){this.getCommonData().lastHangUpTime=i.timeUtil.getSecond(),this.saveCommonData()},checkHangUpIsFull:function(){var e=this.getHangUpTime(),t=i.timeUtil.getSecond();return(-1!==e&&e<t?t-e:0)>i.templateManager.getGameParamValue("hangUpMaxTime")},getHangUpHeroIncome:function(){for(var e=i.player.heroModule.getAllUnlockList(),t=0,a=0;a<e.length;a++){var n=i.templateManager.getHeroDataById(e[a]);n&&(t+=n.heroIncome)}return new i.BigNumber(t).div(1e4).plus(1)},getHangUpReceiveCoin:function(e,t,a){return a=a||i.player.playerModule.getPlayerLevel(),(a=i.templateManager.getPlayerLevelDataByLevel(a))?(a=i.BigNumber(e).times(a.offlineCoin),t?a:a.times(this.getHangUpHeroIncome())):i.BigNumber(0)},getHangUpReceiveExp:function(e,t,a){return a=a||i.player.playerModule.getPlayerLevel(),(a=i.templateManager.getPlayerLevelDataByLevel(a))?(a=i.BigNumber(e).times(a.offlineHeroExp),t?a:a.times(this.getHangUpHeroIncome())):new i.BigNumber(0)},getCanUsePowerGetRewardTimes:function(){var e=this.getCommonData().UsePowerGetRewardTimes;return i.templateManager.getGameParamValue("quickHangUpTimes")>e},getCanUsePowerGetRewardCount:function(){var e=this.getCommonData().UsePowerGetRewardTimes;return i.templateManager.getGameParamValue("quickHangUpTimes")-e},addUsePowerGetRewardTimes:function(){var e=this.getCommonData().UsePowerGetRewardTimes,t=i.templateManager.getGameParamValue("quickHangUpTimes");return!(t<=e||(this.getCommonData().UsePowerGetRewardTimes+=1,t<=e+1&&(this.getCommonData().lastRecoverUsePowerTime=i.timeUtil.getSecond()),this.saveCommonData(),0))},recoverUsePowerGetRewardTime:function(){this.getCommonData().UsePowerGetRewardTimes=0,this.getCommonData().lastRecoverUsePowerTime=0,this.saveCommonData(),i.eventBus.dispatchEvent(i.GameEventType.MAIN_UPDATE_QUICKLY_BATTLE_CD)},getNeedTimeToRecover:function(){var e=this.getCommonData().lastRecoverUsePowerTime,t=i.timeUtil.getSecond(),a=3600*i.templateManager.getGameParamValue("quickHangUpTimeCd");return t-e<a?a-(t-e):0},checkRecoverTime:function(){return!this.getNeedTimeToRecover()&&(this.getCommonData().lastRecoverUsePowerTime&&this.recoverUsePowerGetRewardTime(),!0)},getRewardMap:function(){var e={},t=i.player.instanceModule.getMaxChapter();(s=i.player.instanceModule.getChapterMaxLevel(t))?--s:s=i.templateManager.getInstanceListByChapterId(--t).length-1;var a=i.templateManager.getInstanceListByChapterId(t)[s],n=i.lang.getGameText(i.templateManager.getChapterDataById(t).name),o=s+1,s=(t=i.templateManager.getGameParamValue("quickHangUpPowerNum"),i.templateManager.getGameParamValue("powerInstanceNum"));return s=Math.ceil(t/s),e.rewardList=[],e.rewardList.push({key:i.constant.COIN_TYPE_HERO_EXP,value:a.exp*s}),e.rewardList.push({key:i.constant.COIN_TYPE_SILVER,value:a.gold*s}),e.chapterName=n,e.instanceName=o,e},getTodayCanPopUpBattleBoxCount:function(){return this.getCommonData().todayPopUpBattleBoxCount<i.player.vipModule.getVipBattleBoxTimes()},getTodayPopUpBattleBoxCount:function(){var e=i.player.vipModule.getVipBattleBoxTimes()-this.getCommonData().todayPopUpBattleBoxCount;return e<0?0:e},addTodayPopUpBattleBoxCount:function(){this.getCommonData().todayPopUpBattleBoxCount+=1,this.saveCommonData()},getBubbleIsNotShow:function(e){return this.getCommonData().areadyShowBubble.indexOf(e)<0},putAreadyShowBubble:function(e){0<=this.getCommonData().areadyShowBubble.indexOf(e)||(this.getCommonData().areadyShowBubble.push(e),this.saveCommonData())},getTodayLastQuickHangUpAdTimes:function(){var e=i.templateManager.getGameParamValue("quickHangUpADTimes")-this.getCommonData().todayQuickHangUpAdTimes;return 0<e?e:0},addTodayQuickHangUpAdTimes:function(){this.getCommonData().todayQuickHangUpAdTimes+=1,this.saveCommonData()},setMailRewardCacheData:function(e){this.getCommonData().mailRewardCacheData=e,this.saveCommonData()},getMailRewardCacheData:function(){return this.getCommonData().mailRewardCacheData},cleanMailRewardCacheData:function(){this.getCommonData().mailRewardCacheData=[],this.saveCommonData()},setJoinQQGroupParams:function(e){try{var t=JSON.parse(e);i.Logger.debug("joinQQGroupParams: "+JSON.stringify(t)),this.joinQQGroupNumber=t.joinQQGroupNumber,this.joinQQGroupIosKey=t.joinQQGroupIosKey,this.joinQQGroupAndroidKey=t.joinQQGroupAndroidKey}catch(e){this.joinQQGroupNumber=null,this.joinQQGroupIosKey=null,this.joinQQGroupAndroidKey=null}},getJoinQQGroupNumber:function(){var e=this,t=this.joinQQGroupNumber;return this.joinQQGroupNumber||(t=i.templateManager.getGameParamValue("joinQQGroupNumber"),i.player.serviceModule.getServerGameParams("joinQQGroupParams",function(t){t&&e.setJoinQQGroupParams(t)})),t},getJoinQQGroupIosKey:function(){var e=this.joinQQGroupIosKey;return this.joinQQGroupIosKey?e:i.templateManager.getGameParamValue("joinQQGroupIosKey")},getJoinQQGroupAndroidKey:function(){var e=this.joinQQGroupAndroidKey;return this.joinQQGroupAndroidKey?e:i.templateManager.getGameParamValue("joinQQGroupAndroidKey")},setIsShowJoinQQ:function(e){try{var t=JSON.parse(e);this.isShowJoinQQ=!0;for(var a=0;a<t.length;a++)if(i.config.packageId==t[a]){this.isShowJoinQQ=!1;break}}catch(e){}},getIsShowJoinQQ:function(){var e=this;return null==this.isShowJoinQQ||null==this.isShowJoinQQ?(i.player.serviceModule.getServerGameParams("isShowJoinQQList",function(t){t&&e.setIsShowJoinQQ(t)}),cc.sys.os==cc.sys.OS_IOS?i.templateManager.getGameParamValue("isShowIosQQ"):cc.sys.os!=cc.sys.OS_ANDROID||i.templateManager.getGameParamValue("isShowAndroidQQ")):this.isShowJoinQQ},setBroadcastIntervalBegin:function(e){try{this.broadcastIntervalBegin=parseInt(e)}catch(e){}},getBroadcastIntervalBegin:function(){var e=this.broadcastIntervalBegin;return this.broadcastIntervalBegin?e:i.templateManager.getGameParamValue("BroadcastIntervalBegin")},addTodayWinCount:function(){return this.getCommonData().todayWinCount+=1,this.saveCommonData(),this.getCommonData().todayWinCount},addTodayLoseCount:function(){return this.getCommonData().todayLoseCount+=1,this.saveCommonData(),this.getCommonData().todayLoseCount},checkIosMark:function(){!i.config.openGM&&cc.sys.os!==cc.sys.OS_IOS||this.getCommonData().iosMark||i.guideManager.isLimitClick()||!this.getIsShowJoinQQ()||(this.getCommonData().iosMark=!0,this.saveCommonData(),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MARK))},addTodayDiaRevivalTimes:function(){this.getCommonData().todayDiaRevivalTimes+=1,this.saveCommonData()},getTodayLastRevivalTimes:function(){var e=i.templateManager.getGameParamValue("resurgenceIngotTimes")-this.getCommonData().todayDiaRevivalTimes;return e<0?0:e},resetRegisterDay:function(){var e=i.player.playerModule.getCreateTime(),t=i.timeUtil.getTime();this.registerDay=i.timeUtil.getIntervalDayByTimes(t,e)+1,i.Logger.debug("resetRegisterDay : "+this.registerDay+" createTime : "+i.timeUtil.getTimeFormat(e)+" curTime: "+i.timeUtil.getTimeFormat(t))},getRegisterDay:function(){return this.registerDay||1},getTodayAddPowerCount:function(){return this.getCommonData().todayAddPowerCount},addTodayAddPowerCount:function(e){e=Math.abs(Number(e)),this.getCommonData().todayAddPowerCount+=e,this.saveCommonData()},getTodayAddGoldBullionCount:function(){return this.getCommonData().todayAddGoldBullionCount},addTodayAddGoldBullionCount:function(e){e=Math.abs(Number(e)),this.getCommonData().todayAddGoldBullionCount+=e,this.saveCommonData()},getTodayAddSilverCount:function(){return this.getCommonData().todayAddSilverCount},addTodayAddSilverCount:function(e){e=Math.abs(Number(e)),this.getCommonData().todayAddSilverCount+=e,this.saveCommonData()},getTodayAddBoxTicketCount:function(){return this.getCommonData().todayAddBoxTicketCount},addTodayAddBoxTicketCount:function(e){e=Math.abs(Number(e)),this.getCommonData().todayAddBoxTicketCount+=e,this.saveCommonData()},getTodayAddHeroExpCount:function(){return this.getCommonData().todayAddHeroExpCount},addTodayAddHeroExpCount:function(e){e=Math.abs(Number(e)),this.getCommonData().todayAddHeroExpCount+=e,this.saveCommonData()},getTodayCostHeroExpCount:function(){return this.getCommonData().todayCostHeroExpCount},getTotalCostHeroExpCount:function(){return this.getCommonData().totalCostHeroExpCount},addTodayCostHeroExpCount:function(e){e=Math.abs(Number(e)),this.getCommonData().todayCostHeroExpCount+=e,this.getCommonData().totalCostHeroExpCount+=e,this.saveCommonData()},getTodayCostSilverCount:function(){return this.getCommonData().todayCostSilverCount},getTotalCostSilverCount:function(){return this.getCommonData().totalCostSilverCount},addTodayCostSilverCount:function(e){e=Math.abs(Number(e)),this.getCommonData().todayCostSilverCount+=e,this.getCommonData().totalCostSilverCount+=e,this.saveCommonData()},getTodayCostGoldBullionCount:function(){return this.getCommonData().todayCostGoldBullionCount},getTotalCostGoldBullionCount:function(){return this.getCommonData().totalCostGoldBullionCount},addTodayCostGoldBullionCount:function(e){e=Math.abs(Number(e)),this.getCommonData().todayCostGoldBullionCount+=e,this.getCommonData().totalCostGoldBullionCount+=e,this.saveCommonData()},addPioneerHeroBattleCount:function(e){e&&(this.getCommonData().pioneerHeroBattleCount.hasOwnProperty(e)||(this.getCommonData().pioneerHeroBattleCount[e]=0),this.getCommonData().pioneerHeroBattleCount[e]+=1,this.saveCommonData())},getPioneerHeroBattleCount:function(e){return this.getCommonData().pioneerHeroBattleCount.hasOwnProperty(e)?this.getCommonData().pioneerHeroBattleCount[e]:0},addTowerHeroBattleCount:function(e){e&&(this.getCommonData().towerHeroBattleCount.hasOwnProperty(e)||(this.getCommonData().towerHeroBattleCount[e]=0),this.getCommonData().towerHeroBattleCount[e]+=1,this.saveCommonData())},getTowerHeroBattleCount:function(e){return this.getCommonData().towerHeroBattleCount.hasOwnProperty(e)?this.getCommonData().towerHeroBattleCount[e]:0},addHeroInChapterCount:function(e){e&&(this.getCommonData().heroInChapterCount.hasOwnProperty(e)||(this.getCommonData().heroInChapterCount[e]=0),this.getCommonData().heroInChapterCount[e]+=1,this.getCommonData().heroInChapterTotalCount+=1,this.saveCommonData())},getHeroInChapterCount:function(e){return this.getCommonData().heroInChapterCount.hasOwnProperty(e)?this.getCommonData().heroInChapterCount[e]:0},getHeroInChapterTotalCount:function(){return this.getCommonData().heroInChapterTotalCount},addTowerBreakCount:function(e){e&&(this.getCommonData().towerBreakCount.hasOwnProperty(e)||(this.getCommonData().towerBreakCount[e]=0),this.getCommonData().towerBreakCount[e]+=1,this.saveCommonData())},getTowerBreakCount:function(e){return this.getCommonData().towerBreakCount.hasOwnProperty(e)?this.getCommonData().towerBreakCount[e]:0},addHeroBreakCount:function(e){e&&(this.getCommonData().heroBreakCount.hasOwnProperty(e)||(this.getCommonData().heroBreakCount[e]=0),this.getCommonData().heroBreakCount[e]+=1,this.saveCommonData())},getHeroBreakCount:function(e){return this.getCommonData().heroBreakCount.hasOwnProperty(e)?this.getCommonData().heroBreakCount[e]:0},isLowIosDevice:function(){return i.nativeManager.isLowIosDevice()},setWechatShareCountLimit:function(e){try{this.wechatShareCountLimit=parseInt(e)}catch(e){}},getWechatShareCountLimit:function(){var e=this.wechatShareCountLimit;return this.wechatShareCountLimit?e:i.templateManager.getShareLimitCount()},setWeChatOnlyShowBanner:function(e){try{"true"===e&&(this.wechatBannerOnlyShow=!0)}catch(e){}},getWeChatOnlyShowBanner:function(){return!!this.wechatBannerOnlyShow},getTodayShareCount:function(){return this.getCommonData().todayShareCount},isCanShare:function(){if(!i.config.needSDKUid)return!1;var e=this.getWechatShareCountLimit();return!(this.getCommonData().todayShareCount>=e)},isShareSuccess:function(e){return 0<this.getCommonData().curShareCheckCount||(this.getCommonData().curShareCheckCount+=1,this.saveCommonData(),i.Utils.getRandomInt(1,1e4)<=e)},addShareCount:function(){this.getCommonData().todayShareCount+=1,this.getCommonData().curShareCheckCount=0,this.getCommonData().curShareFailCount=0,this.saveCommonData()},addShareFailCount:function(){this.getCommonData().curShareFailCount+=1,this.saveCommonData()},getShareFailCount:function(){return this.getCommonData().curShareFailCount},addShareStartCount:function(e){this.getCommonData().totalShareStartCount+=1,this.saveCommonData(),i.BI.onEvent(i.biConstant.EVENT_TYPE_COUNT,i.biConstant.EVENT_ID_COUNT_START_SHARE,this.getCommonData().totalShareStartCount),i.BI.onEvent(i.biConstant.EVENT_TYPE_CLICK,i.biConstant.EVENT_ID_CLICK_START_SHARE,e)},setIsIntoFromDest:function(){this.isIntoFromDest=!0},getIsIntoFromDest:function(){return this.isIntoFromDest},setIsIntoFromMini:function(){this.isIntoFromMini=!0},getIsIntoFromMini:function(){return this.isIntoFromMini},setIsIntoFromFloatWindow:function(){console.log("setIsIntoFromFloatWindow"),this.isIntoFromFloatWindow=!0},getIsIntoFromFloatWindow:function(){return this.isIntoFromFloatWindow},getLastMyMiniPowerTime:function(){return this.getCommonData().lastMyMiniPowerTime},resetMyMiniPowerTime:function(){this.getCommonData().lastMyMiniPowerTime=i.timeUtil.getTodayHourTime(0),this.saveCommonData(),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_MAIN_FREE_POWER_RED)},checkAlreadyMyMiniPower:function(){return i.timeUtil.getTodayHourTime(0)==this.getLastMyMiniPowerTime()},checkCanMyMiniPower:function(){var e=i.timeUtil.getTodayHourTime(0);return this.getIsIntoFromMini()&&e>this.getLastMyMiniPowerTime()},getFirstMyMiniPowerTime:function(){return this.getCommonData().firstMyMiniPowerTime},restetFirstMyMiniPowerTime:function(){this.getCommonData().firstMyMiniPowerTime=i.timeUtil.getTodayHourTime(0),this.saveCommonData(),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_MAIN_FREE_POWER_RED)},checkIsMyMiniPowerFirst:function(){var e=i.timeUtil.getTodayHourTime(0);return 0==this.getFirstMyMiniPowerTime()||e==this.getFirstMyMiniPowerTime()},getLastFloatWindowPowerTime:function(){return this.getCommonData().lastFloatWindowPowerTime},resetFloatWindowPowerTime:function(){this.getCommonData().lastFloatWindowPowerTime=i.timeUtil.getTodayHourTime(0),this.saveCommonData(),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_MAIN_FREE_POWER_RED)},checkAlreadyFloatWindowPower:function(){return i.timeUtil.getTodayHourTime(0)==this.getLastFloatWindowPowerTime()},checkCanFloatWindowPower:function(){var e=i.timeUtil.getTodayHourTime(0);return this.getIsIntoFromFloatWindow()&&e>this.getLastFloatWindowPowerTime()},getFirstFloatWindowPowerTime:function(){return this.getCommonData().firstFloatWindowPowerTime},restetFirstFloatWindowPowerTime:function(){this.getCommonData().firstFloatWindowPowerTime=i.timeUtil.getTodayHourTime(0),this.saveCommonData(),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_MAIN_FREE_POWER_RED)},checkIsFloatWindowPowerFirst:function(){var e=i.timeUtil.getTodayHourTime(0);return 0==this.getFirstFloatWindowPowerTime()||e==this.getFirstFloatWindowPowerTime()},getPlayerCityData:function(){return this.getCommonData().playerCity?this.getCommonData().playerCity:null},setPlayerCity:function(e){this.getCommonData().playerCity=e,this.saveCommonData()},getLastDestPowerTime:function(){return this.getCommonData().lastDestPowerTime},resetDestPowerTime:function(){this.getCommonData().lastDestPowerTime=i.timeUtil.getTodayHourTime(0),this.saveCommonData(),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_MAIN_FREE_POWER_RED)},checkAlreadyDestPower:function(){return i.timeUtil.getTodayHourTime(0)==this.getLastDestPowerTime()},checkCanDestPower:function(){var e=i.timeUtil.getTodayHourTime(0);return this.getIsIntoFromDest()&&e>this.getLastDestPowerTime()},getFirstDestPowerTime:function(){return this.getCommonData().firstDestPowerTime},checkIsMyDestPowerFirst:function(){var e=i.timeUtil.getTodayHourTime(0);return 0==this.getFirstDestPowerTime()||e==this.getFirstDestPowerTime()},resetFirstDestPowerTime:function(){this.getCommonData().firstDestPowerTime=i.timeUtil.getTodayHourTime(0),this.saveCommonData(),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_MAIN_FREE_POWER_RED)},checkCanDestPowerFirst:function(){return this.getIsIntoFromDest()&&0==this.getLastDestPowerTime()},getShowFreePowerIcon:function(){return this.getCommonData().showFreePowerIcon},setShowFreePowerIcon:function(){this.getCommonData().showFreePowerIcon||i.player.playerModule.getPower()>i.templateManager.getGameParamValue("freePowerIconShow")||(this.getCommonData().showFreePowerIcon=!0,this.saveCommonData(),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_MAIN_FREE_POWER_ICON))},getHideGameIsSyncData:function(){return this.getCommonData().hideGameIsSyncData},setHideGameIsSyncData:function(e){this.getCommonData().hideGameIsSyncData=e,this.saveCommonData()},isCustomerRewardOver:function(){return this.getCommonData().isCustomerPowerRewardOver},saveCustomerRewardOver:function(){this.getCommonData().isCustomerPowerRewardOver=!0,this.saveCommonData()},isClickCustomer:function(){return this.getCommonData().isClickCustomerPower},setCustomerClick:function(e){this.getCommonData().isClickCustomerPower=e,this.saveCommonData()},getFreePowerRedIndex:function(){return this.getCommonData().showFreePowerRedIndex},saveFreePowerRedIndex:function(){this.getCommonData().showFreePowerRedIndex=i.constant.FREE_POWER_RED_INDEX,this.saveCommonData()},isCanFeedBack:function(){var e=i.templateManager.getGameParamValue("feebackMaxNumPerDay");return!(this.getCommonData().todayFeedBackCount>=e)},addFeedBackCount:function(){this.getCommonData().todayFeedBackCount+=1,this.saveCommonData()},addRewardCache:function(e){for(var t=0;t<e.length;t++){for(var i=e[t],a=this.getCommonData().rewardCache,n=!1,o=0;o<a.length;o++){var s=a[o];if(s.itemId==i.itemId){n=!0,s.number+=i.number;break}}n||this.getCommonData().rewardCache.push(i)}this.saveCommonData()},checkRewardCache:function(e){if(0!==this.getCommonData().rewardCache.length){for(var t=0;t<this.getCommonData().rewardCache.length;t++){var a=this.getCommonData().rewardCache[t];i.player.itemModule.dropItem(a.itemId,a.number,e,i.constant.ITEM_ADD_SOURCE_OFFICE)}this.getCommonData().rewardCache=[],this.saveCommonData()}},addTodayAllianceAdCount:function(){this.getCommonData().todayAllianceAdCount+=1,this.saveCommonData()},getTodayAllianceAdCount:function(){return this.getCommonData().todayAllianceAdCount},addTodayAllianceShareCount:function(){this.getCommonData().todayAllianceShareCount+=1,this.saveCommonData()},getTodayAllianceShareCount:function(){return this.getCommonData().todayAllianceShareCount}}),cc._RF.pop()},{}],CommonSelectNode:[function(e,t){"use strict";cc._RF.push(t,"5c414PODcpPyZJBx+LYzG/4","CommonSelectNode");var i=t;function a(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(i="Object"===i&&e.constructor?e.constructor.name:i)||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}(e))){var t=0,i=function(){};return{s:i,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o,s=!0,r=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return s=e.done,e},e:function(e){r=!0,o=e},f:function(){try{s||null==a.return||a.return()}finally{if(r)throw o}}}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}var o=cc.Class({extends:cc.Component,ctor:function(){this.buttonList=[]},statics:{Events:{SELECTTION_CHANGED:1}},properties:{optionButtonTemplate:cc.Prefab,titleButtonTemplate:{default:null,type:cc.Prefab},selectedOptionButtonTemplate:{default:null,type:cc.Prefab},placeHolder:"",hideSelectedOption:!1,paddingLeftAndRight:5,paddingTopAndBottom:5,spacingY:3,marginTop:0,maxListHeight:0,listBackground:cc.SpriteFrame,optionButtonSize:cc.Size,mask:cc.Sprite,titleContainer:cc.Node,listBacgroundNode:cc.Node,listContent:cc.Node,_foldFlg:!0,_selectionChangedHandler:null,_handlerThisObj:null,_optionDataList:null,_initialized:!1,_content:null,_selectedKey:""},initDropdownList:function(e,t,i,a){this.optionButtonTemplate=e||this.optionButtonTemplate,this.titleButtonTemplate=i||this.titleButtonTemplate,this.selectedOptionButtonTemplate=a||this.selectedOptionButtonTemplate,t&&(this.placeHolder=t.placeHolder||this.placeHolder,this.paddingLeftAndRight=(void 0===t.paddingLeftAndRight?this:t).paddingLeftAndRight,this.paddingTopAndBottom=(void 0===t.paddingTopAndBottom?this:t).paddingTopAndBottom,this.spacingY=(void 0===t.spacingY?this:t).spacingY,this.marginTop=(void 0===t.marginTop?this:t).marginTop,this.maxListHeight=(void 0===t.maxListHeight?this:t).maxListHeight,this.hideSelectedOption=(void 0===t.hideSelectedOption?this:t).hideSelectedOption,this.optionButtonSize=t.optionButtonSize||this.optionButtonSize,this.optionButtonSize||(this.optionButtonSize=new cc.size(this.node.width,this.node.height)),t.listBackground&&(this.listBacgroundNode.getComponent(cc.Sprite).SpriteFrame=t.listBackground)),this._content=this.listContent.getComponent(cc.ScrollView).content},getOptionDataList:function(){return this._optionDataList},getSelectKey:function(){return this._selectedKey},setSelection:function(e,t){var i,n,s=a(this._optionDataList);try{for(s.s();!(n=s.n()).done;){var r=n.value;if(r.key==e){i=r;break}}}catch(e){s.e(e)}finally{s.f()}this._initTitleButton(i),!0===t&&(this._selectionChangedHandler&&this._handlerThisObj?this._selectionChangedHandler.call(this._handlerThisObj,i):((t=new cc.Event(o.Events.SELECTTION_CHANGED,!1)).target=t.currentTarget=this,t.selection=i,this.node.emit(o.Events.SELECTTION_CHANGED,t)))},addSelectionChangedEventHandler:function(e,t){this._selectionChangedHandler=e,this._handlerThisObj=t},setOptionDataList:function(e,t){if(e&&!(e.length<=0)){var i,n=a(this._optionDataList=e);try{for(n.s();!(i=n.n()).done;)i.value.enabled=!0}catch(e){n.e(e)}finally{n.f()}this._selectedKey=t||null}},onLoad:function(){if(!this._initialized&&(this._initialized=!0,this.listBacgroundNode.parent=null,this.listBacgroundNode.getComponent(cc.Sprite).enabled=!0,this.listContent.parent=null,this.mask.node.parent=null,this.mask.node.on(cc.Node.EventType.TOUCH_END,this._fold,this),this.titleContainer.childrenCount<=0))if(this._selectedKey){var e,t,i=a(this._optionDataList);try{for(i.s();!(t=i.n()).done;){var n=t.value;if(n.key==this._selectedKey){e=n;break}}}catch(e){i.e(e)}finally{i.f()}this._initTitleButton(e)}else this._initTitleButton()},_initTitleButton:function(e){var t,i;e&&e.key===this._selectedKey&&0<this.titleContainer.childrenCount||(0<(t=this.titleContainer).childrenCount&&(t.children[0].off(cc.Node.EventType.TOUCH_END,this._onOptionTouched,this),this.titleContainer.removeAllChildren()),t=this._optionDataList,e?this._selectedKey=(i=e).key:this.placeHolder?i={key:null,label:this.placeHolder}:!t||t.length<=0?(i=t[0],this._selectedKey=i.key):i={key:null,label:""},i=this._createOneOption(i,!0),this.titleContainer.addChild(i))},reset:function(){this._fold();var e=this.titleContainer;0<e.childrenCount&&e.children[0].off(cc.Node.EventType.TOUCH_END,this._onOptionTouched,this),this.titleContainer.removeAllChildren(),this.selectedKey=null,this._initTitleButton()},_createOneOption:function(e,t){return t=!0===t?this.titleButtonTemplate?cc.instantiate(this.titleButtonTemplate):cc.instantiate(this.optionButtonTemplate):this._selectedKey===e.key&&this.selectedOptionButtonTemplate?cc.instantiate(this.selectedOptionButtonTemplate):cc.instantiate(this.optionButtonTemplate),!1===e.enabled?t.getComponent(cc.Button).interactable=!1:t.getComponent(cc.Button).interactable=!0,t.setContentSize(this.optionButtonSize.width,this.optionButtonSize.height),this._setBtnText(t,e.label),t.optionData=e,t.on(cc.Node.EventType.TOUCH_END,this._onOptionTouched,this),t},_setBtnText:function(e,t){var i;cc.isValid(e)&&null!=t?(i=null,(i=e instanceof cc.Button?cc.find("Background/Label",e.node):cc.find("Background/Label",e))&&(i.getComponent(cc.Label).string=t,this.font&&(i.getComponent(cc.Label).font=font))):console.error("setBtnText btnNode or str is null")},_onOptionTouched:function(e){var t,i=e.target;this._foldFlg?this._unfold():(t=i.optionData).key!=this._selectedKey&&!0===t.enabled?(this._selectedKey=t.key,e=this._createOneOption(t,!0),0<(i=this.titleContainer).childrenCount&&i.children[0].off(cc.Node.EventType.TOUCH_END,this._onOptionTouched,this),this.titleContainer.removeAllChildren(),this.titleContainer.addChild(e),this._selectionChangedHandler&&this._handlerThisObj?this._selectionChangedHandler.call(this._handlerThisObj,t):((e=new cc.Event(o.Events.SELECTTION_CHANGED,!1)).target=e.currentTarget=this,e.selection=t,this.node.emit(o.Events.SELECTTION_CHANGED,e)),this._fold()):!0===t.enabled&&this._fold()},_fold:function(){var e=this;this._foldFlg=!0;var t=this.mask,i=this.listBacgroundNode,a=this.listContent;if(t.node.parent=null,i.parent)cc.tween(a).to(.05,{opacity:0}).start(),cc.tween(i).delay(.05).to(.1,{scaleY:0}).call(function(){for(var t=e.buttonList,n=t.length-1;0<=n;n--){var o=t[n];o.optionData.key!==e._selectedKey&&o.targetOff(e)}t.splice(0),t=null,e._content.removeAllChildren(),a.parent=null,a.active=!1,i.parent=null,i.active=!1,e.mask.node.active=!1}).start();else{for(var n=this.buttonList,o=n.length-1;0<=o;o--){var s=n[o];s.optionData.key!==this._selectedKey&&s.targetOff(this)}n.splice(0),n=null,this._content.removeAllChildren(),a.parent=null,a.active=!1,i.parent=null,i.active=!1,this.mask.node.active=!1}},_unfold:function(){var e=this;this._foldFlg=!1;var t=cc.director.getScene(),i=this._content;(c=this.mask).node.parent=null,c.node.setContentSize(cc.winSize),c.node.setPosition(0,0),c.node.active=!0,t.addChild(c.node);var a=this.node.parent.convertToWorldSpaceAR(this.node.getPosition()),n=this.spacingY,o=this.listBacgroundNode;o.parent=null;var s=this.listContent;s.parent=null;var r=!!this._selectedKey,c=this.hideSelectedOption&&r?this._optionDataList.length-1:this._optionDataList.length;c=(r=(this.optionButtonSize.height+n)*c-n)+2*this.paddingTopAndBottom,0<this.maxListHeight&&c>this.maxListHeight&&(c=this.maxListHeight),o.setContentSize(this.optionButtonSize.width+2*this.paddingLeftAndRight,c),o.setAnchorPoint(.5,1),o.setPosition(cc.v2(a.x,a.y-.5*this.node.height-this.marginTop)),o.active=!0,t.addChild(o),i.setContentSize(this.optionButtonSize.width,r),s.setContentSize(this.optionButtonSize.width,c-2*this.paddingTopAndBottom),s.setAnchorPoint(.5,1),s.setPosition(cc.v2(a.x,a.y-.5*this.node.height-this.marginTop-this.paddingTopAndBottom)),i.removeAllChildren(),s.opacity=255,s.active=!0,t.addChild(s),o.scaleY=0,cc.tween(o).to(.1,{scaleY:1},{easing:"circOut"}).call(function(){s.getComponent(cc.ScrollView).scrollToTop();for(var t=e._optionDataList,a=e.buttonList,o=0,r=0;r<t.length;r++){var c=t[r];!0===e.hideSelectedOption&&c.key==e._selectedKey||(c=e._createOneOption(c),a.push(c),c.setPosition(0,.5*-c.height-(c.height+n)*o),i.addChild(c),c.opacity=0,cc.tween(c).delay(.02*o++).to(.06,{opacity:255}).start())}}).start()},start:function(){},onDestroy:function(){if(this.buttonList&&0<this.buttonList.length){var e,t=a(this.buttonList);try{for(t.s();!(e=t.n()).done;){var i=e.value;i.targetOff(this),i.destroy()}}catch(e){t.e(e)}finally{t.f()}}this._handlerThisObj=null,this._selectionChangedHandler=null,this.buttonList=null,this._optionDataList=null}});i.exports=o,cc._RF.pop()},{}],CommonSkillItemRender:[function(e,t){"use strict";cc._RF.push(t,"4fce29+WFxDz4bL/402lyQB","CommonSkillItemRender");var i=e("Aft");cc.Class({extends:cc.Component,properties:{battleAtlas:{default:null,type:cc.SpriteAtlas}},onLoad:function(){this.skillIcon=cc.find("skillIcon",this.node),this.skillIconSprite=this.skillIcon.getComponent(cc.Sprite),this.levelLabel=cc.find("level",this.node).getComponent(cc.Label),this.angleNode=cc.find("angle",this.node),this.angleSprite=this.angleNode.getComponent(cc.Sprite),this.skillIcon.on("touchstart",this.onTouchStart,this),this.skillIcon.on("touchend",this.onTouchEnd,this)},initData:function(e,t,a){this.touching=!1,this.skillLevel=t,this.tempSkillData=e,this.skillTipsObj=a,i.lang.updateLabelString(this.levelLabel,[this.skillLevel]),a=this.tempSkillData.icon.split("/")[1],a=this.battleAtlas.getSpriteFrame(a),this.skillIconSprite.spriteFrame=a,this.tempSkillData.subscript?(this.angleNode.active=!0,a=this.tempSkillData.subscript.split("/")[1],a=this.battleAtlas.getSpriteFrame(a),this.angleSprite.spriteFrame=a):this.angleNode.active=!1},onTouchStart:function(){this.skillTipsObj&&(this.skillTipsObj.node.active&&this.skillTipsObj.hideNode(),this.touchTime=0,this.touching=!0)},onTouchEnd:function(){this.skillTipsObj&&this.touching&&(this.touching=!1)},update:function(e){this.touching&&(this.touchTime+=e,.6<=this.touchTime)&&(this.touching=!1,this.touchTime=0,(e=this.node.convertToWorldSpaceAR(cc.v2(0,0))).y+=this.skillIcon.height/2,this.skillTipsObj.showNode(this.tempSkillData,e,i.constant.COMMON_TIPS_SKILL))}}),cc._RF.pop()},{}],CommonSkillTipsItemRender:[function(e,t){"use strict";cc._RF.push(t,"9843dqiDXVFI5iKfxI7HYYm","CommonSkillTipsItemRender");var i=e("Aft");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.layoutNode=cc.find("layout",this.node),this.bgNode=cc.find("layout/bg1",this.node),this.bgLayoutNode=cc.find("layout/bgLayout",this.node),this.richTextLabel=cc.find("layout/bgLayout/RichText",this.node).getComponent(cc.RichText),this.itemNameLabel=cc.find("thingName",this.bgLayoutNode).getComponent(cc.Label),this.itemDesLabel=cc.find("thingDescribe",this.bgLayoutNode).getComponent(cc.Label),this.tipLabel=cc.find("tips",this.bgLayoutNode).getComponent(cc.Label)},showNode:function(e,t,a,n){this.node.active=!0,this.node.opacity=1,this.richTextLabel.node.active=!1,this.itemNameLabel.node.active=!1,this.itemDesLabel.node.active=!1,this.tipLabel.node.active=!1;var o=this.node.parent.convertToNodeSpaceAR(t);if(this.node.y=o.y,t=0,o.x-this.bgLayoutNode.width/2<-cc.winSize.width/2?t=o.x-this.bgLayoutNode.width/2+cc.winSize.width/2-10:o.x+this.bgLayoutNode.width/2>cc.winSize.width/2&&(t=o.x+this.bgLayoutNode.width/2-cc.winSize.width/2+10),this.node.x=o.x-t,this.bgNode.x=t,a===i.constant.COMMON_TIPS_SKILL)this.richTextLabel.node.active=!0,this.host.showTipsing=!0,this.node.opacity=255,i.lang.updateLabelStringArgs(this.richTextLabel,e.desc,[e.natureList[2]/1e4*100,e.triggerProbability/1e4*100,e.lastTime/1e3,e.natureMax/1e4*100]);else if(a===i.constant.COMMON_TIPS_ITEM){if(this.itemNameLabel.node.active=!0,this.itemDesLabel.node.active=!0,(a=i.player.itemModule.getItemType(e))===i.constant.ITEM_TYPE_COIN||a===i.constant.ITEM_TYPE_BAG){var s=i.templateManager.getItemDataById(e);this.itemNameLabel.string=i.lang.getGameText(s.name),this.itemNameLabel.node.color=cc.color("#"+s.qualityColor),this.itemDesLabel.string=i.lang.getGameText(s.desc)}else if(a===i.constant.ITEM_TYPE_HERO_PIECE){var r=i.templateManager.getHeroCardDataById(e);this.itemNameLabel.string=i.lang.getGameText(r.name),s=i.player.heroModule.getHeroQuality(r.heroId),r.isChange||(s=r.color),s=i.templateManager.getHeroQualityDataById(s),this.itemNameLabel.node.color=cc.color("#"+s.quality),this.itemDesLabel.string=i.lang.getGameText(r.name)}else if(a===i.constant.ITEM_TYPE_SKILL_PIECE){var c=i.templateManager.getSkillCardById(e);this.itemNameLabel.string=i.lang.getGameText(c.name),this.itemNameLabel.node.color=cc.color("#bf5dff"),this.itemDesLabel.string=i.lang.getGameText(c.desc)}else if(a===i.constant.ITEM_TYPE_ROLE_HEAD)c=(r=i.templateManager.getHeadDataById(e)).relationId,c=i.templateManager.getHeroDataById(c),this.itemNameLabel.string=i.lang.getGameText(c.name),this.itemNameLabel.node.color=cc.color("#bf5dff"),this.itemDesLabel.string=i.lang.getFormatString(r.headDesc,[i.lang.getGameText(c.name)]);else if(a===i.constant.ITEM_TYPE_NEW_YEAR_REWARD_BOX){var l=i.templateManager.getNewYearTaskRewardBoxDataById(e);this.itemNameLabel.string=i.lang.getGameText(l.name),this.itemNameLabel.node.color=cc.color(i.player.itemModule.getItemQualityColor(l.quality));for(var d="",h=0;h<l.reward.length;h++){var u=(p=l.reward[h]).key,p=p.value;u===i.constant.COIN_TYPE_SILVER?p=i.player.commonModule.getHangUpReceiveCoin(p):u===i.constant.COIN_TYPE_HERO_EXP&&(p=i.player.commonModule.getHangUpReceiveExp(p)),u=i.templateManager.getItemDataById(u),d+=i.lang.getFormatString(i.GameTextCode.ITEM_SHOW,[i.lang.getGameText(u.name),i.Utils.formatBigNumberForLabel(p)]),h!==l.reward.length-1&&(d+="\n")}this.itemDesLabel.string=d}n&&0<n.length&&(this.tipLabel.node.active=!0,this.tipLabel.string=n),this.node.opacity=255}},hideNode:function(){this.host&&this.host.showTipsing&&(this.host.showTipsing=!1),this.node.active=!1}}),cc._RF.pop()},{}],CommonTipItemRender:[function(e,t){"use strict";cc._RF.push(t,"81ba21R1kdLLJgJkIiWqceY","CommonTipItemRender");var i=e("Aft");cc.Class({extends:cc.Component,properties:{tipNode:{default:null,type:cc.Node}},onLoad:function(){},start:function(){},initData:function(e){i.lang.setString(this.tipNode.getComponent(cc.Label),e)}}),cc._RF.pop()},{}],CryptoJS:[function(e,t){"use strict";cc._RF.push(t,"77f69NIsVZKeZfTwifS7Il0","CryptoJS");var i,a,n,o,s,r,c=t,l=l||function(e){function t(){}var i={},a=i.lib={},n=a.Base={extend:function(e){t.prototype=this;var i=new t;return e&&i.mixIn(e),i.hasOwnProperty("init")||(i.init=function(){i.$super.init.apply(this,arguments)}),(i.init.prototype=i).$super=this,i},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=a.WordArray=n.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||r).stringify(this)},concat:function(e){var t=this.words,i=e.words,a=this.sigBytes;if(e=e.sigBytes,this.clamp(),a%4)for(var n=0;n<e;n++)t[a+n>>>2]|=(i[n>>>2]>>>24-n%4*8&255)<<24-(a+n)%4*8;else if(65535<i.length)for(n=0;n<e;n+=4)t[a+n>>>2]=i[n>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=n.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i=[],a=0;a<t;a+=4)i.push(4294967296*e.random()|0);return new o.init(i,t)}}),s=i.enc={},r=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],a=0;a<e;a++){var n=t[a>>>2]>>>24-a%4*8&255;i.push((n>>>4).toString(16)),i.push((15&n).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],a=0;a<t;a+=2)i[a>>>3]|=parseInt(e.substr(a,2),16)<<24-a%8*4;return new o.init(i,t/2)}},c=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],a=0;a<e;a++)i.push(String.fromCharCode(t[a>>>2]>>>24-a%4*8&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],a=0;a<t;a++)i[a>>>2]|=(255&e.charCodeAt(a))<<24-a%4*8;return new o.init(i,t)}},l=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},d=a.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,a=i.words,n=i.sigBytes,s=this.blockSize,r=n/(4*s);if(t=(r=t?e.ceil(r):e.max((0|r)-this._minBufferSize,0))*s,n=e.min(4*t,n),t){for(var c=0;c<t;c+=s)this._doProcessBlock(a,c);c=a.splice(0,t),i.sigBytes-=n}return new o.init(c,n)},clone:function(){var e=n.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});a.Hasher=d.extend({cfg:n.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new h.HMAC.init(e,i).finalize(t)}}});var h=i.algo={};return i}(Math);r=(s=l).lib.WordArray,s.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,a=this._map;e.clamp(),e=[];for(var n=0;n<i;n+=3)for(var o=(t[n>>>2]>>>24-n%4*8&255)<<16|(t[n+1>>>2]>>>24-(n+1)%4*8&255)<<8|t[n+2>>>2]>>>24-(n+2)%4*8&255,s=0;s<4&&n+.75*s<i;s++)e.push(a.charAt(o>>>6*(3-s)&63));if(t=a.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var t=e.length,i=this._map;(o=i.charAt(64))&&-1!=(o=e.indexOf(o))&&(t=o);for(var a,n,o=[],s=0,c=0;c<t;c++)c%4&&(a=i.indexOf(e.charAt(c-1))<<c%4*2,n=i.indexOf(e.charAt(c))>>>6-c%4*2,o[s>>>2]|=(a|n)<<24-s%4*8,s++);return r.create(o,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(e){function t(e,t,i,a,n,o,s){return((e=e+(t&i|~t&a)+n+s)<<o|e>>>32-o)+t}function i(e,t,i,a,n,o,s){return((e=e+(t&a|i&~a)+n+s)<<o|e>>>32-o)+t}function a(e,t,i,a,n,o,s){return((e=e+(t^i^a)+n+s)<<o|e>>>32-o)+t}function n(e,t,i,a,n,o,s){return((e=e+(i^(t|~a))+n+s)<<o|e>>>32-o)+t}for(var o=l,s=(c=o.lib).WordArray,r=c.Hasher,c=o.algo,d=[],h=0;h<64;h++)d[h]=4294967296*e.abs(e.sin(h+1))|0;c=c.MD5=r.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,o){for(var s=0;s<16;s++){var r=e[h=o+s];e[h]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}s=this._hash.words;var c,l,h=e[o+0],u=(r=e[o+1],e[o+2]),p=e[o+3],g=e[o+4],_=e[o+5],m=e[o+6],E=e[o+7],T=e[o+8],f=e[o+9],S=e[o+10],A=e[o+11],I=e[o+12],y=e[o+13],P=e[o+14],v=e[o+15],L=s[0],N=n(N=n(N=n(N=n(N=a(N=a(N=a(N=a(N=i(N=i(N=i(N=i(N=t(N=t(N=t(N=t(N=s[1],l=t(l=s[2],c=t(c=s[3],L=t(L,N,l,c,h,7,d[0]),N,l,r,12,d[1]),L,N,u,17,d[2]),c,L,p,22,d[3]),l=t(l,c=t(c,L=t(L,N,l,c,g,7,d[4]),N,l,_,12,d[5]),L,N,m,17,d[6]),c,L,E,22,d[7]),l=t(l,c=t(c,L=t(L,N,l,c,T,7,d[8]),N,l,f,12,d[9]),L,N,S,17,d[10]),c,L,A,22,d[11]),l=t(l,c=t(c,L=t(L,N,l,c,I,7,d[12]),N,l,y,12,d[13]),L,N,P,17,d[14]),c,L,v,22,d[15]),l=i(l,c=i(c,L=i(L,N,l,c,r,5,d[16]),N,l,m,9,d[17]),L,N,A,14,d[18]),c,L,h,20,d[19]),l=i(l,c=i(c,L=i(L,N,l,c,_,5,d[20]),N,l,S,9,d[21]),L,N,v,14,d[22]),c,L,g,20,d[23]),l=i(l,c=i(c,L=i(L,N,l,c,f,5,d[24]),N,l,P,9,d[25]),L,N,p,14,d[26]),c,L,T,20,d[27]),l=i(l,c=i(c,L=i(L,N,l,c,y,5,d[28]),N,l,u,9,d[29]),L,N,E,14,d[30]),c,L,I,20,d[31]),l=a(l,c=a(c,L=a(L,N,l,c,_,4,d[32]),N,l,T,11,d[33]),L,N,A,16,d[34]),c,L,P,23,d[35]),l=a(l,c=a(c,L=a(L,N,l,c,r,4,d[36]),N,l,g,11,d[37]),L,N,E,16,d[38]),c,L,S,23,d[39]),l=a(l,c=a(c,L=a(L,N,l,c,y,4,d[40]),N,l,h,11,d[41]),L,N,p,16,d[42]),c,L,m,23,d[43]),l=a(l,c=a(c,L=a(L,N,l,c,f,4,d[44]),N,l,I,11,d[45]),L,N,v,16,d[46]),c,L,u,23,d[47]),l=n(l,c=n(c,L=n(L,N,l,c,h,6,d[48]),N,l,E,10,d[49]),L,N,P,15,d[50]),c,L,_,21,d[51]),l=n(l,c=n(c,L=n(L,N,l,c,I,6,d[52]),N,l,p,10,d[53]),L,N,S,15,d[54]),c,L,r,21,d[55]),l=n(l,c=n(c,L=n(L,N,l,c,T,6,d[56]),N,l,v,10,d[57]),L,N,m,15,d[58]),c,L,y,21,d[59]),l=n(l,c=n(c,L=n(L,N,l,c,g,6,d[60]),N,l,A,10,d[61]),L,N,u,15,d[62]),c,L,f,21,d[63]);s[0]=s[0]+L|0,s[1]=s[1]+N|0,s[2]=s[2]+l|0,s[3]=s[3]+c|0},_doFinalize:function(){var t=this._data,i=t.words,a=8*this._nDataBytes,n=8*t.sigBytes;i[n>>>5]|=128<<24-n%32;var o=e.floor(a/4294967296);for(i[15+(64+n>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),i[14+(64+n>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),t.sigBytes=4*(i.length+1),this._process(),i=(t=this._hash).words,a=0;a<4;a++)n=i[a],i[a]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8);return t},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}}),o.MD5=r._createHelper(c),o.HmacMD5=r._createHmacHelper(c)}(Math),s=(i=(a=l).lib).Base,n=i.WordArray,o=(i=a.algo).EvpKDF=s.extend({cfg:s.extend({keySize:4,hasher:i.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=(r=this.cfg).hasher.create(),a=n.create(),o=a.words,s=r.keySize,r=r.iterations;o.length<s;){c&&i.update(c);var c=i.update(e).finalize(t);i.reset();for(var l=1;l<r;l++)c=i.finalize(c),i.reset();a.concat(c)}return a.sigBytes=4*s,a}}),a.EvpKDF=function(e,t,i){return o.create(i).compute(e,t)},l.lib.Cipher||function(){var e=(p=l).lib,t=e.Base,i=e.WordArray,a=e.BufferedBlockAlgorithm,n=p.enc.Base64,o=p.algo.EvpKDF,s=e.Cipher=a.extend({cfg:t.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,i){this.cfg=this.cfg.extend(i),this._xformMode=e,this._key=t,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,i,a){return("string"==typeof i?g:u).encrypt(e,t,i,a)},decrypt:function(t,i,a){return("string"==typeof i?g:u).decrypt(e,t,i,a)}}}});function r(e,t,i){var a=this._iv;a?this._iv=void 0:a=this._prevBlock;for(var n=0;n<i;n++)e[t+n]^=a[n]}e.StreamCipher=s.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var c=p.mode={},d=(e.BlockCipherMode=t.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();d.Encryptor=d.extend({processBlock:function(e,t){var i=this._cipher,a=i.blockSize;r.call(this,e,t,a),i.encryptBlock(e,t),this._prevBlock=e.slice(t,t+a)}}),d.Decryptor=d.extend({processBlock:function(e,t){var i=this._cipher,a=i.blockSize,n=e.slice(t,t+a);i.decryptBlock(e,t),r.call(this,e,t,a),this._prevBlock=n}}),c=c.CBC=d,d=(p.pad={}).Pkcs7={pad:function(e,t){for(var a,n=(a=(a=4*t)-e.sigBytes%a)<<24|a<<16|a<<8|a,o=[],s=0;s<a;s+=4)o.push(n);a=i.create(o,a),e.concat(a)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},e.BlockCipher=s.extend({cfg:s.cfg.extend({mode:c,padding:d}),reset:function(){s.reset.call(this);var e,t=(i=this.cfg).iv,i=i.mode;this._xformMode==this._ENC_XFORM_MODE?e=i.createEncryptor:(e=i.createDecryptor,this._minBufferSize=1),this._mode=e.call(i,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4});var h=e.CipherParams=t.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),u=(c=(p.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?i.create([1398893684,1701076831]).concat(e).concat(t):t).toString(n)},parse:function(e){var t,a=(e=n.parse(e)).words;return 1398893684==a[0]&&1701076831==a[1]&&(t=i.create(a.slice(2,4)),a.splice(0,4),e.sigBytes-=16),h.create({ciphertext:e,salt:t})}},e.SerializableCipher=t.extend({cfg:t.extend({format:c}),encrypt:function(e,t,i,a){a=this.cfg.extend(a);var n=e.createEncryptor(i,a);return t=n.finalize(t),n=n.cfg,h.create({ciphertext:t,key:i,iv:n.iv,algorithm:e,mode:n.mode,padding:n.padding,blockSize:e.blockSize,formatter:a.format})},decrypt:function(e,t,i,a){return a=this.cfg.extend(a),t=this._parse(t,a.format),e.createDecryptor(i,a).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}})),p=(p.kdf={}).OpenSSL={execute:function(e,t,a,n){return n=n||i.random(8),e=o.create({keySize:t+a}).compute(e,n),a=i.create(e.words.slice(t),4*a),e.sigBytes=4*t,h.create({key:e,iv:a,salt:n})}},g=e.PasswordBasedCipher=u.extend({cfg:u.cfg.extend({kdf:p}),encrypt:function(e,t,i,a){return i=(a=this.cfg.extend(a)).kdf.execute(i,e.keySize,e.ivSize),a.iv=i.iv,(e=u.encrypt.call(this,e,t,i.key,a)).mixIn(i),e},decrypt:function(e,t,i,a){return a=this.cfg.extend(a),t=this._parse(t,a.format),i=a.kdf.execute(i,e.keySize,e.ivSize,t.salt),a.iv=i.iv,u.decrypt.call(this,e,t,i.key,a)}})}(),function(){for(var e=l,t=e.lib.BlockCipher,i=e.algo,a=[],n=[],o=[],s=[],r=[],c=[],d=[],h=[],u=[],p=[],g=[],_=0;_<256;_++)g[_]=_<128?_<<1:_<<1^283;var m=0,E=0;for(_=0;_<256;_++){var T=(T=E^E<<1^E<<2^E<<3^E<<4)>>>8^255&T^99;a[m]=T;var f=g[n[T]=m],S=g[f],A=g[S],I=257*g[T]^16843008*T;o[m]=I<<24|I>>>8,s[m]=I<<16|I>>>16,r[m]=I<<8|I>>>24,c[m]=I,d[T]=(I=16843009*A^65537*S^257*f^16843008*m)<<24|I>>>8,h[T]=I<<16|I>>>16,u[T]=I<<8|I>>>24,p[T]=I,m?(m=f^g[g[g[A^f]]],E^=g[g[E]]):m=E=1}var y=[0,1,2,4,8,16,32,64,128,27,54];i=i.AES=t.extend({_doReset:function(){for(var e,t=(n=this._key).words,i=n.sigBytes/4,n=4*((this._nRounds=i+6)+1),o=this._keySchedule=[],s=0;s<n;s++)s<i?o[s]=t[s]:(e=o[s-1],s%i?6<i&&4==s%i&&(e=a[e>>>24]<<24|a[e>>>16&255]<<16|a[e>>>8&255]<<8|a[255&e]):(e=a[(e=e<<8|e>>>24)>>>24]<<24|a[e>>>16&255]<<16|a[e>>>8&255]<<8|a[255&e],e^=y[s/i|0]<<24),o[s]=o[s-i]^e);for(t=this._invKeySchedule=[],i=0;i<n;i++)s=n-i,e=i%4?o[s]:o[s-4],t[i]=i<4||s<=4?e:d[a[e>>>24]]^h[a[e>>>16&255]]^u[a[e>>>8&255]]^p[a[255&e]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,o,s,r,c,a)},decryptBlock:function(e,t){var i=e[t+1];e[t+1]=e[t+3],e[t+3]=i,this._doCryptBlock(e,t,this._invKeySchedule,d,h,u,p,n),i=e[t+1],e[t+1]=e[t+3],e[t+3]=i},_doCryptBlock:function(e,t,i,a,n,o,s,r){for(var c=this._nRounds,l=e[t]^i[0],d=e[t+1]^i[1],h=e[t+2]^i[2],u=e[t+3]^i[3],p=4,g=1;g<c;g++){var _=a[l>>>24]^n[d>>>16&255]^o[h>>>8&255]^s[255&u]^i[p++],m=a[d>>>24]^n[h>>>16&255]^o[u>>>8&255]^s[255&l]^i[p++],E=a[h>>>24]^n[u>>>16&255]^o[l>>>8&255]^s[255&d]^i[p++];u=a[u>>>24]^n[l>>>16&255]^o[d>>>8&255]^s[255&h]^i[p++],l=_,d=m,h=E}_=(r[l>>>24]<<24|r[d>>>16&255]<<16|r[h>>>8&255]<<8|r[255&u])^i[p++],m=(r[d>>>24]<<24|r[h>>>16&255]<<16|r[u>>>8&255]<<8|r[255&l])^i[p++],E=(r[h>>>24]<<24|r[u>>>16&255]<<16|r[l>>>8&255]<<8|r[255&d])^i[p++],u=(r[u>>>24]<<24|r[l>>>16&255]<<16|r[d>>>8&255]<<8|r[255&h])^i[p++],e[t]=_,e[t+1]=m,e[t+2]=E,e[t+3]=u},keySize:8}),e.AES=t._createHelper(i)}(),l.pad.ZeroPadding={pad:function(e,t){t*=4,e.clamp(),e.sigBytes+=t-(e.sigBytes%t||t)},unpad:function(e){for(var t=e.words,i=e.sigBytes-1;!(t[i>>>2]>>>24-i%4*8&255);)i--;e.sigBytes=i+1}},c.exports=l,cc._RF.pop()},{}],DebugConstant:[function(e,t){"use strict";cc._RF.push(t,"67bcbaT4l9Ip6p4xmHHgQHu","DebugConstant"),t.exports={DEBUG_TYPE_ADD_GOLD:1,DEBUG_TYPE_ADD_DIAMOND:2,DEBUG_TYPE_ADD_POWER:3,DEBUG_TYPE_ADD_EXP:4,DEBUG_TYPE_ADD_HERO_EXP:5,DEBUG_TYPE_ADD_VIP_LEVEL:6,DEBUG_TYPE_ADD_VIP_AD_TIMES:7,DEBUG_TYPE_ADD_VIP_TASK:9,DEBUG_TYPE_SET_MAIN_TASK:10,DEBUG_TYPE_ADD_INVITE_NUM:11,DEBUG_TYPE_ADD_NEW_YEAR_TASK_SCORE:12,DEBUG_TYPE_ADD_NEW_YEAR_MONSTER_KILL:13,DEBUG_TYPE_ADD_VIP_DAY:14,DEBUG_TYPE_PASS_CHAPTER:101,DEBUG_TYPE_ADD_HERO_PIECE:102,DEBUG_TYPE_ADD_ITEM:103,DEBUG_TYPE_ADD_HERO_LEVEL:104,DEBUG_TYPE_ADD_HERO_QUALITY:105,DEBUG_TYPE_ADD_TOWER_LEVEL:106,DEBUG_TYPE_ADD_TOWER_QUALITY:107,DEBUG_TYPE_ADD_SKILL_PIECE:108,DEBUG_TYPE_ADD_SKILL_LEVEL:109,DEBUG_TYPE_SET_ENEMY_ID:110,DEBUG_TYPE_ADD_HEAD:111,DEBUG_TYPE_COMMAND_CLEAR:201,DEBUG_TYPE_COMMAND_SKIP_AD:202,DEBUG_TYPE_COMMAND_SKIP_TIME:203,DEBUG_TYPE_COMMAND_PASS_INSTANCE:204,DEBUG_TYPE_COMMAND_BATTLE_MONEY:205,DEBUG_TYPE_COMMAND_TASK:206,DEBUG_TYPE_COMMAND_QUIT_WIN:207,DEBUG_TYPE_COMMAND_SKIP_WAVE:208,DEBUG_TYPE_COMMAND_FOUR_SPEED:209,DEBUG_TYPE_COMMAND_HIDE_PIG:210,DEBUG_TYPE_COMMAND_HIDE_BATTLE_BOX:211,DEBUG_TYPE_COMMAND_SHOW_TOWER_NAME:212,DEBUG_TYPE_COMMAND_SKIP_GUIDE:213,DEBUG_TYPE_COMMAND_ADD_ALL_ITEM:214,DEBUG_TYPE_COMMAND_OPEN_ALL_FUNCTION:215,DEBUG_TYPE_COMMAND_GET_ALL_HERO:216,DEBUG_TYPE_COMMAND_GET_ALL_SKILL:217,DEBUG_TYPE_COMMAND_MAIN_TASK_PASS:218,DEBUG_TYPE_COMMAND_SKIP_BROAD_CAST:219,DEBUG_TYPE_COMMAND_WX_TOWER_SPINE:220,DEBUG_TYPE_COMMAND_NOT_SHOOT:221,DEBUG_TYPE_COMMAND_HIDE_ENEMY_SPINE:222,DEBUG_TYPE_COMMAND_HIDE_HERO_SPINE:223,DEBUG_TYPE_COMMAND_HIDE_TOWER_SPINE:224,DEBUG_TYPE_COMMAND_NO_AD:225,DEBUG_TYPE_COMMAND_NEW_YEAR_TASK_OVER:226,DEBUG_TYPE_COMMAND_NEW_YEAR_TASK_NEXT:227},cc._RF.pop()},{}],DebugItemRender:[function(e,t){"use strict";cc._RF.push(t,"0d8fa03tOhAZZzEhetrI6Mu","DebugItemRender");var i=e,a=i("Aft"),n=i("CommonSelectNode"),o=i("DebugConstant");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.initSelectionTemplate()},initData:function(e,t,i,a,n,o){this.type=t,this.nameLabel=cc.find("functionLabel",this.node).getComponent(cc.Label),this.numberNode=cc.find("numEditBox",this.node),this.numberEditBox=this.numberNode.getComponent("cc.EditBox"),this.plusNode=cc.find("plusBtn",this.node),this.plusIconNode=cc.find("Background",this.plusNode),this.toggle=cc.find("toggle",this.node).getComponent(cc.Toggle),this.selectNode=cc.find("CommonSelectNode",this.node),this.nameLabel.string=i,this.selectNode.active=!!n,this.numberNode.active=!!a,this.plusNode.active=!!n,this.plusNode.active&&(this.plusIconNode.active=!o,this.plusNode.getComponent(cc.Button).interactable=this.plusIconNode.active),this.addNode=e,this.functionName=i,this.isNeedAddNum=a,this.isNeedSelect=n,this.isSelect=!1,this.itemId=0,this.isEmpty=!0},updateData:function(){},onClickPlus:function(){this.host.plusItem(this)},getCount:function(){var e=this.numberEditBox.string;return""===e||null==e||NaN===e?0:parseInt(e)},onSelect:function(e){this.isSelect=e.isChecked},editEnd:function(){var e=this.numberEditBox.string;this.isEmpty=!1,""!==e&&null!=e&&NaN!==e||(this.isEmpty=!0),this.isNeedSelect||this.isEmpty||(this.toggle.isChecked=!0,this.isSelect=!0),this.isNeedSelect&&!this.isEmpty&&0!==this.itemId&&(this.toggle.isChecked=!0,this.isSelect=!0)},initSelectionTemplate:function(){var e=this,t=this.selectNode.getComponent("CommonSelectNode");t.initDropdownList(null,{placeHolder:"\u8bf7\u9009\u62e9",paddingLeftAndRight:8,paddingTopAndBottom:3,spacingY:1,marginTop:0,maxListHeight:500,hideSelectedOption:!1,optionButtonSize:new cc.size(200,40)},null,null);var i=this.getDataList();t.setOptionDataList(i),this.selectNode.on(n.Events.SELECTTION_CHANGED,function(t){e.itemId=t.selection.key,e.isNeedAddNum&&!e.isEmpty&&(e.toggle.isChecked=!0,e.isSelect=!0)},this)},getDataList:function(){var e=[];if(!this.isNeedSelect)return e;switch(this.type){case o.DEBUG_TYPE_PASS_CHAPTER:for(var t=a.JsonData.Chapter,i=0;i<3;i++){var n,s=t[i];s.id!==a.constant.YEAR_MONSTER_CHAPTER_ID&&(n=a.lang.getGameText(s.name),e.push({key:s.id,label:s.id+"_"+n}))}break;case o.DEBUG_TYPE_ADD_HERO_PIECE:for(var r=a.JsonData.HeroCard,c=0;c<r.length;c++){var l=r[c],d=l.heroId;(d=a.templateManager.getHeroDataById(d))&&(d=a.lang.getGameText(d.name),e.push({key:l.id,label:l.id+"_"+d}))}break;case o.DEBUG_TYPE_SET_ENEMY_ID:for(var h=a.JsonData.Enemy,u=0;u<21;u++){var p=h[u],g=a.lang.getGameText(p.name);e.push({key:p.id,label:p.id+"_"+g})}break;case o.DEBUG_TYPE_ADD_ITEM:for(var _=a.JsonData.Item,m=0;m<_.length;m++){var E=_[m],T=E.id;a.player.itemModule.getItemType(T)===a.constant.ITEM_TYPE_BAG&&(T=a.lang.getGameText(E.name),e.push({key:E.id,label:E.id+"_"+T}))}break;case o.DEBUG_TYPE_ADD_HERO_LEVEL:for(var f=a.JsonData.Hero,S=0;S<f.length;S++){var A,I=f[S];0===I.isComingSoon&&(A=a.lang.getGameText(I.name),e.push({key:I.id,label:I.id+"_"+A}))}break;case o.DEBUG_TYPE_ADD_HERO_QUALITY:f=a.JsonData.Hero;for(var y=0;y<f.length;y++){var P,v=f[y];0===v.isComingSoon&&(P=a.lang.getGameText(v.name),e.push({key:v.id,label:v.id+"_"+P}))}break;case o.DEBUG_TYPE_ADD_HEAD:for(var L=a.JsonData.Head,N=0;N<L.length;N++){var b,R=L[N];!R.isShow||R.type===a.constant.HEAD_TYPE_HERO||(b=a.templateManager.getHeroDataById(R.relationId))&&(b=a.lang.getGameText(b.name),e.push({key:R.id,label:R.id+"_"+b}))}break;case o.DEBUG_TYPE_ADD_TOWER_LEVEL:for(var C=a.JsonData.TowerType,D=0;D<C.length;D++){var k=C[D],O=a.lang.getGameText(k.name);e.push({key:k.id,label:k.id+"_"+O})}break;case o.DEBUG_TYPE_ADD_TOWER_QUALITY:C=a.JsonData.TowerType;for(var w=0;w<C.length;w++){var M=C[w],B=a.lang.getGameText(M.name);e.push({key:M.id,label:M.id+"_"+B})}break;case o.DEBUG_TYPE_ADD_SKILL_PIECE:for(var H=a.JsonData.SkillCard,G=0;G<H.length;G++){var U=H[G],x=a.lang.getGameText(U.name);e.push({key:U.id,label:U.id+"_"+x})}break;case o.DEBUG_TYPE_ADD_SKILL_LEVEL:for(var F=a.JsonData.SkillCard,Y=0;Y<F.length;Y++){var V=F[Y],W=a.lang.getGameText(V.name);e.push({key:V.skillId,label:V.skillId+"_"+W})}}return e}}),cc._RF.pop()},{}],DebugPage:[function(e,t){"use strict";cc._RF.push(t,"e37424EJc1Fm5e2kRLQdL8i","DebugPage");var i=e,a=i("Aft"),n=i("DebugConstant");cc.Class({extends:a.BasePage,properties:{debugItemPrefab:{type:cc.Prefab,default:null}},onLoad:function(){this.numLayoutNode=cc.find("scrollView/view/content/numLayout",this.node),this.commandLayoutNode=cc.find("scrollView/view/content/commandLayout",this.node),this.uuidLabel=cc.find("Button/Background/uuid_label",this.node).getComponent(cc.Label),this.serverTimeLabel=cc.find("buttonClose/Background/time_label",this.node).getComponent(cc.Label)},showPageBegan:function(){this.updateServerTime(),this.initDebug(),a.config.openGM||this.closePage()},initDebug:function(){this.numLayoutNode.removeAllChildren(),this.commandLayoutNode.removeAllChildren(),this.itemList=[],this.initDebugItemRender(this.numLayoutNode,n.DEBUG_TYPE_ADD_GOLD,"\u52a0\u94dc\u5e01",!0),this.initDebugItemRender(this.numLayoutNode,n.DEBUG_TYPE_ADD_DIAMOND,"\u52a0\u5143\u5b9d",!0),this.initDebugItemRender(this.numLayoutNode,n.DEBUG_TYPE_ADD_POWER,"\u52a0\u4f53\u529b",!0),this.initDebugItemRender(this.numLayoutNode,n.DEBUG_TYPE_ADD_EXP,"\u52a0\u7ecf\u9a8c",!0),this.initDebugItemRender(this.numLayoutNode,n.DEBUG_TYPE_ADD_HERO_EXP,"\u52a0\u82f1\u96c4\u7ecf\u9a8c",!0),this.initDebugItemRender(this.numLayoutNode,n.DEBUG_TYPE_ADD_VIP_LEVEL,"\u8bbe\u7f6evip\u7b49\u7ea7",!0),this.initDebugItemRender(this.numLayoutNode,n.DEBUG_TYPE_ADD_VIP_AD_TIMES,"\u589e\u52a0vip\u5e7f\u544a\u6570",!0),this.initDebugItemRender(this.numLayoutNode,n.DEBUG_TYPE_ADD_VIP_TASK,"\u589e\u52a0vip\u4efb\u52a1\u5206",!0),this.initDebugItemRender(this.numLayoutNode,n.DEBUG_TYPE_ADD_VIP_DAY,"\u589e\u52a0vip\u5929\u6570",!0),this.initDebugItemRender(this.numLayoutNode,n.DEBUG_TYPE_SET_MAIN_TASK,"\u8bbe\u7f6e\u4e3b\u7ebf\u4efb\u52a1",!0),this.initDebugItemRender(this.numLayoutNode,n.DEBUG_TYPE_ADD_NEW_YEAR_TASK_SCORE,"\u65b0\u5e74\u4efb\u52a1\u79ef\u5206",!0),this.initDebugItemRender(this.numLayoutNode,n.DEBUG_TYPE_ADD_NEW_YEAR_MONSTER_KILL,"\u5e74\u517d\u51fb\u6740\u6570",!0),this.initDebugItemRender(this.numLayoutNode,n.DEBUG_TYPE_ADD_INVITE_NUM,"\u9080\u8bf7\u597d\u53cb\u6570\u91cf",!0),this.initDebugItemRender(this.numLayoutNode,n.DEBUG_TYPE_PASS_CHAPTER,"\u8df3\u8fc7\u5173\u5361",!0,!0,!0),this.initDebugItemRender(this.numLayoutNode,n.DEBUG_TYPE_ADD_HERO_PIECE,"\u589e\u52a0\u82f1\u96c4\u788e\u7247",!0,!0),this.initDebugItemRender(this.numLayoutNode,n.DEBUG_TYPE_ADD_SKILL_PIECE,"\u589e\u52a0\u6280\u80fd\u788e\u7247",!0,!0),this.initDebugItemRender(this.numLayoutNode,n.DEBUG_TYPE_SET_ENEMY_ID,"\u8bbe\u7f6e\u654c\u4ebaid",!0,!0),this.initDebugItemRender(this.numLayoutNode,n.DEBUG_TYPE_ADD_ITEM,"\u589e\u52a0\u9053\u5177",!0,!0),this.initDebugItemRender(this.numLayoutNode,n.DEBUG_TYPE_ADD_HERO_LEVEL,"\u8bbe\u7f6e\u82f1\u96c4\u7b49\u7ea7",!0,!0),this.initDebugItemRender(this.numLayoutNode,n.DEBUG_TYPE_ADD_HEAD,"\u89e3\u9501\u5934\u50cf",!0,!0),this.initDebugItemRender(this.commandLayoutNode,n.DEBUG_TYPE_COMMAND_CLEAR,"\u6e05\u9664\u6570\u636e"),this.initDebugItemRender(this.commandLayoutNode,n.DEBUG_TYPE_COMMAND_SKIP_AD,"\u8df3\u8fc7\u5e7f\u544a"),this.initDebugItemRender(this.commandLayoutNode,n.DEBUG_TYPE_COMMAND_SKIP_TIME,"\u8df3\u8fc7\u65f6\u95f4\u68c0\u6d4b"),this.initDebugItemRender(this.commandLayoutNode,n.DEBUG_TYPE_COMMAND_BATTLE_MONEY,"\u6218\u6597\u571f\u8c6a"),this.initDebugItemRender(this.commandLayoutNode,n.DEBUG_TYPE_COMMAND_TASK,"\u4efb\u52a1\u901a"),this.initDebugItemRender(this.commandLayoutNode,n.DEBUG_TYPE_COMMAND_QUIT_WIN,"\u9000\u51fa\u80dc\u5229"),this.initDebugItemRender(this.commandLayoutNode,n.DEBUG_TYPE_COMMAND_SKIP_WAVE,"\u8df3\u8fc7\u6ce2\u6b21"),this.initDebugItemRender(this.commandLayoutNode,n.DEBUG_TYPE_COMMAND_FOUR_SPEED,"4\u500d\u901f"),this.initDebugItemRender(this.commandLayoutNode,n.DEBUG_TYPE_COMMAND_HIDE_PIG,"\u5b58\u94b1\u7f50\u4e0d\u4e3b\u73b0"),this.initDebugItemRender(this.commandLayoutNode,n.DEBUG_TYPE_COMMAND_HIDE_BATTLE_BOX,"\u9690\u85cf\u6218\u6597\u5b9d\u7bb1"),this.initDebugItemRender(this.commandLayoutNode,n.DEBUG_TYPE_COMMAND_SHOW_TOWER_NAME,"\u663e\u793a\u5854\u7f16\u53f7"),this.initDebugItemRender(this.commandLayoutNode,n.DEBUG_TYPE_COMMAND_SKIP_GUIDE,"\u8df3\u8fc7\u65b0\u624b"),this.initDebugItemRender(this.commandLayoutNode,n.DEBUG_TYPE_COMMAND_GET_ALL_HERO," \u4e00\u952e\u83b7\u5f97\u82f1\u96c4"),this.initDebugItemRender(this.commandLayoutNode,n.DEBUG_TYPE_COMMAND_SKIP_BROAD_CAST,"\u5c4f\u853d\u8dd1\u9a6c\u706f"),this.initDebugItemRender(this.commandLayoutNode,n.DEBUG_TYPE_COMMAND_WX_TOWER_SPINE,"\u65e0\u6df7\u5408\u5854\u8d44\u6e90"),this.initDebugItemRender(this.commandLayoutNode,n.DEBUG_TYPE_COMMAND_NOT_SHOOT,"\u4e0d\u68c0\u6d4b\u653b\u51fb"),this.initDebugItemRender(this.commandLayoutNode,n.DEBUG_TYPE_COMMAND_HIDE_ENEMY_SPINE,"\u9690\u85cf\u654c\u4eba"),this.initDebugItemRender(this.commandLayoutNode,n.DEBUG_TYPE_COMMAND_HIDE_HERO_SPINE,"\u9690\u85cf\u82f1\u96c4"),this.initDebugItemRender(this.commandLayoutNode,n.DEBUG_TYPE_COMMAND_HIDE_TOWER_SPINE,"\u9690\u85cf\u5854"),this.initDebugItemRender(this.commandLayoutNode,n.DEBUG_TYPE_COMMAND_NO_AD,"\u6ca1\u5e7f\u544a"),this.initDebugItemRender(this.commandLayoutNode,n.DEBUG_TYPE_COMMAND_NEW_YEAR_TASK_OVER,"\u6625\u8282\u4efb\u52a1\u901a"),this.initDebugItemRender(this.commandLayoutNode,n.DEBUG_TYPE_COMMAND_NEW_YEAR_TASK_NEXT,"\u6625\u8282\u4efb\u52a1\u4e0b\u4e00\u5929")},initDebugItemRender:function(e,t,i,a,n,o){var s=cc.instantiate(this.debugItemPrefab),r=s.getComponent("DebugItemRender");r.host=this,r.initData(e,t,i,a,n,o),e.addChild(s,t),this.itemList.push(r)},plusItem:function(e){this.initDebugItemRender(e.addNode,e.type,e.functionName,e.isNeedAddNum,e.isNeedSelect)},updateServerTime:function(){var e=this;a.player.serviceModule.getServerTime(function(t){t&&t[0]&&t[0].result?(t=Number(t[0].result),e.serverTimeLabel.string="server Time : "+a.timeUtil.getTimeFormat(t)):e.serverTimeLabel=" \u670d\u52a1\u5668\u5f02\u5e38"})},onClickClose:function(){this.closePage()},closePageEnded:function(){a.gameScene.mainPage.checkCachePage()},onClickGo:function(){for(var e=0;e<this.itemList.length;e++){var t=this.itemList[e];if(t.isSelect){var i=t.type,o=t.itemId,s=t.getCount();switch(i){case n.DEBUG_TYPE_ADD_GOLD:0<=s?a.player.itemModule.dropItem(a.constant.COIN_TYPE_SILVER,s,!0,a.constant.ITEM_ADD_SOURCE_GM):a.player.playerModule.costSilverNum(-s,a.constant.ITEM_CONSUME_SOURCE_GM);break;case n.DEBUG_TYPE_ADD_DIAMOND:0<=s?a.player.itemModule.dropItem(a.constant.COIN_TYPE_GOLD_BULLION,s,!0,a.constant.ITEM_ADD_SOURCE_GM):a.player.playerModule.costGoldBullionNum(-s,a.constant.ITEM_CONSUME_SOURCE_GM);break;case n.DEBUG_TYPE_ADD_POWER:0<=s?a.player.itemModule.dropItem(a.constant.COIN_TYPE_POWER,s,!0,a.constant.ITEM_ADD_SOURCE_GM):a.player.playerModule.costPowerNum(-s);break;case n.DEBUG_TYPE_ADD_EXP:0<=s&&a.player.playerModule.addPlayerExp(s,!0);break;case n.DEBUG_TYPE_ADD_HERO_EXP:0<=s?a.player.itemModule.dropItem(a.constant.COIN_TYPE_HERO_EXP,s,!0,a.constant.ITEM_ADD_SOURCE_GM):a.player.heroModule.subHeroGeneralExp(-s);break;case n.DEBUG_TYPE_ADD_VIP_LEVEL:0<s&&a.player.vipModule.gmSetVipLevel(s);break;case n.DEBUG_TYPE_ADD_VIP_AD_TIMES:0<s&&a.player.vipModule.gmAddAdTimes(s);break;case n.DEBUG_TYPE_ADD_VIP_TASK:0<s&&a.player.vipModule.addTaskActive(s);break;case n.DEBUG_TYPE_ADD_VIP_DAY:0<s&&a.player.vipModule.addLoginDays(s);break;case n.DEBUG_TYPE_SET_MAIN_TASK:0<s&&a.player.taskModule.gmSetCurMainTask(s);break;case n.DEBUG_TYPE_ADD_NEW_YEAR_TASK_SCORE:0<s&&a.player.taskModule.addNewYearTaskScore(s);break;case n.DEBUG_TYPE_ADD_NEW_YEAR_MONSTER_KILL:0<s&&a.player.newYearModule.addKillYearMonsterCount(s);break;case n.DEBUG_TYPE_ADD_INVITE_NUM:0<s&&a.player.gmModule.gmSetInviteNum(s);break;case n.DEBUG_TYPE_ADD_HERO_PIECE:0<s?a.player.itemModule.dropItem(o,s,!0,a.constant.ITEM_ADD_SOURCE_GM):a.player.itemModule.subHeroPiece(o,-s,a.constant.ITEM_CONSUME_SOURCE_GM);break;case n.DEBUG_TYPE_SET_ENEMY_ID:a.Logger.debug("itemId = "+o+" count = "+s),a.player.gmModule.battleShowEnemyId(o,s);break;case n.DEBUG_TYPE_ADD_SKILL_PIECE:0<s?a.player.itemModule.dropItem(o,s,!0,a.constant.ITEM_ADD_SOURCE_GM):a.player.itemModule.subSkillPiece(o,-s,a.constant.ITEM_CONSUME_SOURCE_GM);break;case n.DEBUG_TYPE_ADD_SKILL_LEVEL:0<s&&a.player.skillModule.gmSetSkillLevel(o,s);break;case n.DEBUG_TYPE_ADD_HERO_LEVEL:0<s&&a.player.heroModule.gmSetHeroLevel(o,s);break;case n.DEBUG_TYPE_ADD_HERO_QUALITY:0<s&&a.player.heroModule.gmSetHeroQuality(o,s);break;case n.DEBUG_TYPE_ADD_TOWER_LEVEL:0<s&&a.player.towerModule.gmSetTowerLevel(o,s);break;case n.DEBUG_TYPE_ADD_TOWER_QUALITY:0<s&&a.player.towerModule.gmSetTowerQuality(o,s);break;case n.DEBUG_TYPE_ADD_ITEM:0<s?a.player.itemModule.dropItem(o,s,!0,a.constant.ITEM_ADD_SOURCE_GM):a.player.itemModule.costItemCount(o,-s,a.constant.ITEM_CONSUME_SOURCE_GM);break;case n.DEBUG_TYPE_PASS_CHAPTER:0<s&&(a.player.instanceModule.gmPassChapter(o,s),a.player.guideModule.skipGuide());break;case n.DEBUG_TYPE_ADD_HEAD:0<s&&a.player.itemModule.dropItem(o,s,!1,a.constant.ITEM_ADD_SOURCE_GM);break;case n.DEBUG_TYPE_COMMAND_CLEAR:a.StorageUtil.clearAll(),cc.game.pause(),cc.game.end();break;case n.DEBUG_TYPE_COMMAND_SKIP_AD:a.player.gmModule.gmSkipAd();break;case n.DEBUG_TYPE_COMMAND_SKIP_TIME:a.player.gmModule.gmSkipTimeCheck();break;case n.DEBUG_TYPE_COMMAND_PASS_INSTANCE:a.player.instanceModule.gmPassInstance(),a.player.guideModule.skipGuide();break;case n.DEBUG_TYPE_COMMAND_BATTLE_MONEY:a.player.gmModule.battleUnlimitedMoney();break;case n.DEBUG_TYPE_COMMAND_TASK:a.player.taskModule.gmRewardTask();break;case n.DEBUG_TYPE_COMMAND_QUIT_WIN:a.player.gmModule.gmQuitWin();break;case n.DEBUG_TYPE_COMMAND_SKIP_WAVE:a.player.gmModule.gmSkipBattleWave();break;case n.DEBUG_TYPE_COMMAND_FOUR_SPEED:a.player.gmModule.gmFourSpeed();break;case n.DEBUG_TYPE_COMMAND_HIDE_PIG:a.player.gmModule.gmHidePig();break;case n.DEBUG_TYPE_COMMAND_HIDE_BATTLE_BOX:a.player.gmModule.gmHideBattleBox();break;case n.DEBUG_TYPE_COMMAND_SHOW_TOWER_NAME:a.player.gmModule.showTowerName();break;case n.DEBUG_TYPE_COMMAND_SKIP_GUIDE:a.player.guideModule.skipGuide();break;case n.DEBUG_TYPE_COMMAND_ADD_ALL_ITEM:a.player.itemModule.dropItem(a.constant.COIN_TYPE_POWER,1e3,!0,a.constant.ITEM_ADD_SOURCE_GM),a.player.itemModule.dropItem(a.constant.COIN_TYPE_GOLD_BULLION,1e5,!0,a.constant.ITEM_ADD_SOURCE_GM),a.player.itemModule.dropItem(a.constant.COIN_TYPE_SILVER,1e11,!0,a.constant.ITEM_ADD_SOURCE_GM),a.player.itemModule.dropItem(a.constant.COIN_TYPE_HERO_EXP,1e11,!0,a.constant.ITEM_ADD_SOURCE_GM);for(var r=a.JsonData.HeroCard,c=0;c<r.length;c++){var l=r[c];a.player.itemModule.dropItem(l.id,200,!0,a.constant.ITEM_ADD_SOURCE_GM)}for(var d=a.JsonData.SkillCard,h=0;h<d.length;h++){var u=d[h];a.player.itemModule.dropItem(u.id,1e3,!0,a.constant.ITEM_ADD_SOURCE_GM)}a.player.guideModule.skipGuide();break;case n.DEBUG_TYPE_COMMAND_OPEN_ALL_FUNCTION:a.player.gmModule.gmOpenAllFunction();break;case n.DEBUG_TYPE_COMMAND_GET_ALL_HERO:for(var p=a.JsonData.Hero,g=0;g<p.length;g++){var _=p[g];0===_.isComingSoon&&a.player.heroModule.gmGetHero(_.id)}a.player.guideModule.skipGuide();break;case n.DEBUG_TYPE_COMMAND_GET_ALL_SKILL:for(var m=a.templateManager.getHeroSkillLevelTypeList(),E=0;E<m.length;E++){var T=m[E],f=a.templateManager.getHeroSkillLevelData(T,1);if(1===f.type)for(var S=f.upgradeDemand,A=0;A<S.length;A++){var I=S[A][0],y=S[A][1];I===a.constant.SKILL_UP_CONDITION_HERO&&a.player.heroModule.gmGetHero(y)}a.player.skillModule.addNewSkill(T,!0)}a.player.guideModule.skipGuide();break;case n.DEBUG_TYPE_COMMAND_MAIN_TASK_PASS:a.player.gmModule.gmMainTaskReward();break;case n.DEBUG_TYPE_COMMAND_SKIP_BROAD_CAST:a.player.gmModule.gmSkipBroadCase();break;case n.DEBUG_TYPE_COMMAND_WX_TOWER_SPINE:a.player.gmModule.setWxTowerSpine();break;case n.DEBUG_TYPE_COMMAND_NOT_SHOOT:a.player.gmModule.setLimitAtkEnemy();break;case n.DEBUG_TYPE_COMMAND_HIDE_ENEMY_SPINE:a.player.gmModule.hideEnemySpine();break;case n.DEBUG_TYPE_COMMAND_HIDE_HERO_SPINE:a.player.gmModule.hideHeroSpine();break;case n.DEBUG_TYPE_COMMAND_HIDE_TOWER_SPINE:a.player.gmModule.hideTowerSpine();break;case n.DEBUG_TYPE_COMMAND_NO_AD:a.player.gmModule.gmNoAd();break;case n.DEBUG_TYPE_COMMAND_NEW_YEAR_TASK_OVER:for(var P=a.player.taskModule.getCurNewYearTaskList(),v=0;v<P.length;v++){var L=P[v],N=a.templateManager.getNewYearTaskDataById(L);N&&(L=a.player.taskModule.getNewYearTaskType(N),a.player.taskModule.onNewYearTaskEvent(L,N.taskValue[0]))}break;case n.DEBUG_TYPE_COMMAND_NEW_YEAR_TASK_NEXT:P=a.player.taskModule.getCurNewYearTaskList();for(var b=0;b<P.length;b++){var R=P[b],C=a.templateManager.getNewYearTaskDataById(R);C&&(R=a.player.taskModule.getNewYearTaskType(C),a.player.taskModule.onNewYearTaskEvent(R,C.taskValue[0]))}a.player.taskModule.resetTodayNewYearTask()}}}a.eventBus.dispatchEvent(a.GameEventType.UPDATE_MAIN_TASK),this.closePage()}}),cc._RF.pop()},{}],DropItemRender:[function(e,t){"use strict";cc._RF.push(t,"bee60hiwb9Le5iJ7M06A96h","DropItemRender");var i=e("Aft");cc.Class({extends:cc.Component,properties:{},init:function(e,t,a,n,o,s){var r=this;if(this.tarPos=n,this.tarWorldPos=n,this.flyType=e,this.otherData=s,this.itemData=a,this.iconSprite=cc.find("icon",this.node).getComponent(cc.Sprite),this.tailingNode=cc.find("tailing",this.node),this.effectNode=cc.find("effect_box_light",this.node),this.effectAni=this.effectNode.getComponent(cc.Animation),e=!1,a){var c=a.itemId,l=null;switch(i.player.itemModule.getItemType(c)){case i.constant.ITEM_TYPE_COIN:case i.constant.ITEM_TYPE_BAG:var d=i.templateManager.getItemDataById(c);l=i.battleScene.commonAtlas.getSpriteFrame(d.icon.split("/")[1]);break;case i.constant.ITEM_TYPE_HERO_PIECE:var h=i.templateManager.getHeroCardDataById(c);l=i.battleScene.commonAtlas.getSpriteFrame(h.icon);break;case i.constant.ITEM_TYPE_SKILL_PIECE:h=i.templateManager.getSkillCardById(c),l=i.battleScene.skillAtlas.getSpriteFrame(h.icon)}this.iconSprite.spriteFrame=l,this.iconSprite.node.scale=.5,e=!0}else this.iconSprite.spriteFrame=i.battleScene.battleAtlas.getSpriteFrame("Battle_Icon_key"),this.iconSprite.node.scale=1;this.tailingNode.active=!1,(this.effectNode.active=e)&&this.effectAni.play("effect_box_light"),s=i.Utils.getRandomInt(-100,100),a=i.Utils.getRandomInt(-50,50),this.briPos=this.node.parent.convertToNodeSpaceAR(t),this.node.x=this.briPos.x,this.node.y=this.briPos.y,this.node.active=!0,this.tarPos=this.node.parent.convertToNodeSpaceAR(this.tarPos),i.Logger.debug("reward this.briPos =",this.briPos,"this.tarPos =",this.tarPos),this.node.zIndex=i.constant.LAYER_GAME_UI,e?this.startJumpEffect(cc.v2(this.node.x+s,this.node.y+a),o):cc.tween(this.node).by(.5,{x:s,y:a}).call(function(){return r.jumpOver()}).delay(.3+.1*o).to(.5,{x:this.tarPos.x,y:this.tarPos.y}).call(function(){return r.moveOver()}).start()},startJumpEffect:function(e,t){this.node.scale=0,i.battleScene.updateZIndex(this.node);var a=cc.delayTime(t/30),n=cc.scaleTo(.15,1),o=cc.jumpTo(.5,cc.v2(e.x,e.y+10),200,1),s=cc.spawn(n,o),r=cc.jumpTo(.3,e,40,1),c=cc.callFunc(function(){i.battleScene.updateZIndex(this.node)},this);t=cc.delayTime(1.6),n=cc.callFunc(function(){this.tailingNode.active=!0,this.node.zIndex=i.constant.LAYER_GAME_UI},this),o=cc.moveTo(.5,this.tarPos),e=cc.callFunc(function(){this.moveOver()},this),e=cc.sequence(a,s,r,c,t,n,o,e),this.node.runAction(e)},jumpOver:function(){},moveOver:function(){var e,t,a;this.flyType==i.constant.BATTLE_FLY_TYPE_KEY?i.battleScene.gameBattleUIObj.updateBoxLabel(!0):this.flyType==i.constant.BATTLE_FLY_TYPE_PIECE&&(a=this.otherData.obj,e=this.otherData.headIndex,t=a.obj.heroData.id,a=i.templateManager.getHeroCardDataById(this.itemData.itemId).heroId,i.battleScene.gameBattleUIObj.showHeroDialog(e,t==a,this.tarWorldPos),i.Logger.debug("fly hero piece over headHeroId = "+t+" pieceHeroId = "+a)),i.battleScene.pushDropNode(this.node)}}),cc._RF.pop()},{}],DropTips:[function(e,t){"use strict";cc._RF.push(t,"d8e69XWEvlE95cH4KANPlR2","DropTips");var i=e("Aft");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.iconSprite=cc.find("icon",this.node).getComponent(cc.Sprite),this.numLabel=cc.find("label",this.node).getComponent(cc.Label)},initData:function(e){this._type=e.type,this.node.active=!0,this.node.opacity=1,this.node.scale=0,this.node.setPosition(e.pos),this.iconSprite.spriteFrame=i.mainScene.getItemIconFrame(e.type),e.type===i.constant.COIN_TYPE_IRON?(this.iconSprite.spriteFrame=i.battleScene.getBattleSpriteFrame("Battle_Icon2"),this.numLabel.node.color=i.constant.COLOR_MONEY):e.type===i.constant.COIN_TYPE_HEART&&(this.iconSprite.spriteFrame=i.battleScene.getBattleSpriteFrame("Battle_Icon3"),this.numLabel.node.color=i.constant.COLOR_HP_GENERAL);var t=e.num;i.lang.setString(this.numLabel,t=0<t?"+"+t:t),this.node.opacity=255,this.delayTime=e.delayTime||0,this.showTipsAnimation()},showTipsAnimation:function(){var e=2,t=1;switch(this._type){case i.constant.COIN_TYPE_IRON:e=2.5,t=1;break;case i.constant.COIN_TYPE_HEART:e=3,t=1.2}var a=this.node;a.scale=0,a.opacity=255;var n=cc.delayTime(this.delayTime),o=cc.callFunc(function(){},this),s=cc.scaleTo(2/30*e,1.7*t),r=cc.scaleTo(4/30*e,+t),c=cc.scaleTo(.4*e,+t),l=cc.sequence(s,r,c),d=cc.moveBy(.3*e,cc.v2(0,40));s=cc.delayTime(10/30*e),r=cc.fadeOut(8/30*e),c=cc.callFunc(function(){i.battleScene.giveBackDropTips(this.node)},this),c=cc.sequence(s,r,c),c=cc.spawn(l,d,c),c=cc.sequence(n,o,c),a.stopAllActions(),a.runAction(c)}}),cc._RF.pop()},{}],EmailFeedbackPage:[function(e,t){"use strict";cc._RF.push(t,"4a2c3SFflxDAIzA9Wl2kNR3","EmailFeedbackPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{},onLoadPage:function(){this.detailNode=cc.find("content/detail",this.node),this.scrollViewContentNode=cc.find("scrollView/view/content",this.detailNode),this.feedBackLabel=cc.find("feedbackLayout/label2",this.scrollViewContentNode).getComponent(cc.Label),this.replyLabel=cc.find("replyLayout/label2",this.scrollViewContentNode).getComponent(cc.Label),this.groupLayoutNode=cc.find("groupLayout",this.scrollViewContentNode),this.groupNumberLabel=cc.find("groupLayout/group",this.groupLayoutNode).getComponent(cc.Label),this.timeDayLabel=cc.find("timeDay",this.detailNode).getComponent(cc.Label),this.timeHourLabel=cc.find("timeHour",this.detailNode).getComponent(cc.Label),this.timeMinuteLabel=cc.find("timeMinute",this.detailNode).getComponent(cc.Label),this.deleteTimeDayLabel=cc.find("deleteTimeDay",this.detailNode).getComponent(cc.Label),this.deleteTimeHourLabel=cc.find("deleteTimeHour",this.detailNode).getComponent(cc.Label),this.deleteTimeMinuteLabel=cc.find("deleteTimeMinute",this.detailNode).getComponent(cc.Label)},showPageBegan:function(){this._data=this.data,this.notCanClick=!1,this._data.areadyRead||(i.player.commonModule.readMiniMail(this._data.type,this._data.id),i.eventBus.dispatchEvent(i.GameEventType.REFRESH_MAIL_PAGE)),this.feedBackLabel.string=this._data.backContent,this.replyLabel.string=this._data.content,this.updateTimeLabel(),this.groupLayoutNode.active=i.player.commonModule.getIsShowJoinQQ(),i.lang.updateLabelString(this.groupNumberLabel,[i.player.commonModule.getJoinQQGroupNumber()])},showPageEnded:function(){},updateTimeLabel:function(){this.timeDayLabel.node.active=!1,this.timeHourLabel.node.active=!1,this.timeMinuteLabel.node.active=!1,this.deleteTimeDayLabel.node.active=!1,this.deleteTimeHourLabel.node.active=!1,this.deleteTimeMinuteLabel.node.active=!1;var e=864e5*i.player.commonModule.getMailOverdueDay();if(this._data.areadyRead){var t=(this._data.readTime+e-i.timeUtil.getTime())/1e3;if(t<=0)return i.player.commonModule.deleteAloneMiniMail(this._data.type,this._data.id,!0),i.eventBus.dispatchEvent(i.GameEventType.REFRESH_MAIL_PAGE),void this.closePage();t<3600?(this.deleteTimeMinuteLabel.node.active=!0,i.lang.updateLabelString(this.deleteTimeMinuteLabel,[Math.ceil(t/60)])):t<86400?(this.deleteTimeHourLabel.node.active=!0,i.lang.updateLabelString(this.deleteTimeHourLabel,[Math.ceil(t/3600)])):(this.deleteTimeDayLabel.node.active=!0,i.lang.updateLabelString(this.deleteTimeDayLabel,[Math.ceil(t/86400)]))}else(t=(i.timeUtil.getTime()-this._data.createTime)/1e3)<3600?(this.timeMinuteLabel.node.active=!0,i.lang.updateLabelString(this.timeMinuteLabel,[Math.ceil(t/60)])):t<86400?(this.timeHourLabel.node.active=!0,i.lang.updateLabelString(this.timeHourLabel,[Math.ceil(t/3600)])):(this.timeDayLabel.node.active=!0,i.lang.updateLabelString(this.timeDayLabel,[Math.ceil(t/86400)]))},onClickJoinQQ:function(){i.oneClickEnterGroupManager.copyQQGroup()},onClickDelete:function(){this.notCanClick||(this.notCanClick=!0,i.player.commonModule.deleteAloneMiniMail(this._data.type,this._data.id),i.eventBus.dispatchEvent(i.GameEventType.REFRESH_MAIL_PAGE),this.closePage())},onClickClose:function(){this.closePage()},update:function(e){this.updateLabelTime||(this.updateLabelTime=0),this.updateLabelTime+=e,this.updateLabelTime<5||(this.updateLabelTime=0,this.updateTimeLabel())}}),cc._RF.pop()},{}],EmailGlobalPage:[function(e,t){"use strict";cc._RF.push(t,"862f0GMfYZEraXbkI818Mr+","EmailGlobalPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{commonItemPrefab:{default:null,type:cc.Prefab}},onLoadPage:function(){this.titleLabel=cc.find("content/title",this.node).getComponent(cc.Label),this.detailNode=cc.find("content/detail",this.node),this.rewardNode=cc.find("content/reward",this.node),this.detailBgWidget=cc.find("bg",this.detailNode).getComponent(cc.Widget),this.timeDayLabel=cc.find("timeDay",this.detailNode).getComponent(cc.Label),this.timeHourLabel=cc.find("timeHour",this.detailNode).getComponent(cc.Label),this.timeMinuteLabel=cc.find("timeMinute",this.detailNode).getComponent(cc.Label),this.deleteTimeDayLabel=cc.find("deleteTimeDay",this.detailNode).getComponent(cc.Label),this.deleteTimeHourLabel=cc.find("deleteTimeHour",this.detailNode).getComponent(cc.Label),this.deleteTimeMinuteLabel=cc.find("deleteTimeMinute",this.detailNode).getComponent(cc.Label),this.emailContentScrollView=cc.find("scrollView",this.detailNode),this.emailContentViewWidget=cc.find("view",this.emailContentScrollView).getComponent(cc.Widget),this.emailContentNode=cc.find("view/content",this.emailContentScrollView),this.emailContentLabel=cc.find("emailContent",this.emailContentNode).getComponent(cc.Label),this.originalSviewHeight=this.emailContentScrollView.height,this.originalDetailHeight=this.detailNode.height,this.originalRewardHeight=this.rewardNode.height,this.delateButtonNode=cc.find("/content/delateButton",this.node),this.getButtonNode=cc.find("/content/getButton",this.node),this.rewardLayoutNode=cc.find("content/reward/rewardLayout",this.node),this.rewardItemObjList=[]},showPageBegan:function(){this.notCanClick=!1,this._data=this.data,this._data.areadyRead||(i.player.commonModule.readMiniMail(this._data.type,this._data.id),i.eventBus.dispatchEvent(i.GameEventType.REFRESH_MAIL_PAGE)),this.initData()},showPageEnded:function(){},initData:function(){this.titleLabel.string=this._data.title,this.emailContentLabel.string=this._data.content,this._rewards=i.player.commonModule.getMailRewardValidList(this._data.rewards),this.updateTimeLabel(),this.delateButtonNode.active=0==this._rewards.length||this._data.areadyReceive,this.getButtonNode.active=0<this._rewards.length&&!this._data.areadyReceive,0<this._rewards.length?(this.rewardNode.active=!0,this.emailContentScrollView.height=this.originalSviewHeight,this.detailNode.height=this.originalDetailHeight,this.updateAllRewardItem()):(this.rewardNode.active=!1,this.emailContentScrollView.height=this.originalSviewHeight+this.originalRewardHeight+10,this.detailNode.height=this.originalDetailHeight+this.originalRewardHeight+10),this.emailContentViewWidget.updateAlignment(),this.detailBgWidget.updateAlignment()},updateTimeLabel:function(){this.timeDayLabel.node.active=!1,this.timeHourLabel.node.active=!1,this.timeMinuteLabel.node.active=!1,this.deleteTimeDayLabel.node.active=!1,this.deleteTimeHourLabel.node.active=!1,this.deleteTimeMinuteLabel.node.active=!1;var e=864e5*i.player.commonModule.getMailOverdueDay();if(0<this._rewards.length&&this._data.areadyReceive||0==this._rewards.length&&this._data.areadyRead){var t=(this._data.readTime+e-i.timeUtil.getTime())/1e3;if(t<=0)return i.player.commonModule.deleteAloneMiniMail(this._data.type,this._data.id,!0),i.eventBus.dispatchEvent(i.GameEventType.REFRESH_MAIL_PAGE),void this.closePage();t<3600?(this.deleteTimeMinuteLabel.node.active=!0,i.lang.updateLabelString(this.deleteTimeMinuteLabel,[Math.ceil(t/60)])):t<86400?(this.deleteTimeHourLabel.node.active=!0,i.lang.updateLabelString(this.deleteTimeHourLabel,[Math.ceil(t/3600)])):(this.deleteTimeDayLabel.node.active=!0,i.lang.updateLabelString(this.deleteTimeDayLabel,[Math.ceil(t/86400)]))}else(t=(i.timeUtil.getTime()-this._data.createTime)/1e3)<3600?(this.timeMinuteLabel.node.active=!0,i.lang.updateLabelString(this.timeMinuteLabel,[Math.ceil(t/60)])):t<86400?(this.timeHourLabel.node.active=!0,i.lang.updateLabelString(this.timeHourLabel,[Math.ceil(t/3600)])):(this.timeDayLabel.node.active=!0,i.lang.updateLabelString(this.timeDayLabel,[Math.ceil(t/86400)]))},updateAllRewardItem:function(){for(var e=0;e<this.rewardItemObjList.length;e++)this.rewardItemObjList[e].node.active=!1;for(var t=0;t<this._rewards.length;t++){var a,n,o=this._rewards[t];i.player.itemModule.checkHaveItem(o.itemId)&&(t>=this.rewardItemObjList.length&&((a=cc.instantiate(this.commonItemPrefab)).scale=.8,n=a.getComponent("CommonItemRender"),this.rewardLayoutNode.addChild(a),a.active=!1,this.rewardItemObjList.push(n)),(n=this.rewardItemObjList[t]).node.active=!0,n.initData(o.itemId,o.itemValue,null,null,!0,null,this._data.areadyReceive))}},onClickReceive:function(){var e,t=this;0==this._rewards.length||this._data.areadyReceive||this.notCanClick||(this.notCanClick=!0,e=[{type:this._data.type,id:this._data.id}],i.gameScene.showLoadingCycle(function(){i.player.serviceModule.rewardMiniMail(e,function(e){if(!e){var a=i.lang.getGameText(i.GameTextCode.NETWORK_NOT_CONNECTED);return i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,a),t.notCanClick=!1,void i.gameScene.hideLoadingCycle()}var n=e.list;if(!n){var o=i.lang.getGameText(i.GameTextCode.NETWORK_NOT_CONNECTED);return i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,o),t.notCanClick=!1,void i.gameScene.hideLoadingCycle()}0!=n.length?(o=i.player.commonModule.getMiniMailRewardList(n),i.player.commonModule.setMailRewardCacheData(o),o={type:i.constant.COMMON_REWARD_PAGE_MAIL,rewards:o,index:1,notHaveClose:!0,callBack:function(){t.notCanClick=!1,i.player.commonModule.cleanMailRewardCacheData(),i.player.commonModule.dealMiniMailRewardList(n),i.eventBus.dispatchEvent(i.GameEventType.REFRESH_MAIL_PAGE),t.initData()}},i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_INSTANCE_BOX_REWARD,o),i.gameScene.hideLoadingCycle(),t.notCanClick=!1):t.closePage()})}))},onClickDelete:function(){this.notCanClick||(this.notCanClick=!0,i.player.commonModule.deleteAloneMiniMail(this._data.type,this._data.id),i.eventBus.dispatchEvent(i.GameEventType.REFRESH_MAIL_PAGE),this.closePage())},onClickClose:function(){this.closePage()}}),cc._RF.pop()},{}],EmailItemRender:[function(e,t){"use strict";cc._RF.push(t,"0af3fM5K4lCI57AkIRCHbT5","EmailItemRender");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{commonItemPrefab:{default:null,type:cc.Prefab}},afterLoad:function(){this.bgNode=cc.find("bg",this.node),this.bgReadNode=cc.find("bgRead",this.node),this.emailIconNode=cc.find("emailIcon",this.node),this.emailReadIconNode=cc.find("emailIconRead",this.node),this.feedBackIconNode=cc.find("feedbackIcon",this.node),this.feedBackReadIconNode=cc.find("feedbackIconRead",this.node),this.titleLabel=cc.find("label",this.node).getComponent(cc.Label),this.timeDayLabel=cc.find("timeDay",this.node).getComponent(cc.Label),this.timeHourLabel=cc.find("timeHour",this.node).getComponent(cc.Label),this.timeMinuteLabel=cc.find("timeMinute",this.node).getComponent(cc.Label),this.deleteTimeDayLabel=cc.find("deleteTimeDay",this.node).getComponent(cc.Label),this.deleteTimeHourLabel=cc.find("deleteTimeHour",this.node).getComponent(cc.Label),this.deleteTimeMinuteLabel=cc.find("deleteTimeMinute",this.node).getComponent(cc.Label),this.newNode=cc.find("new",this.node),this.rewardLayoutNode=cc.find("rewardLayout",this.node),this.rewardItemObjList=[]},initData:function(e){this._data=e,this._data.type==i.constant.MAIL_TYPE_FEED_BACK?this.titleLabel.string=i.lang.getGameText(i.GameTextCode[1573]):this.titleLabel.string=this._data.title,this.newNode.active=this._data.isNew,this._data.isNew&&i.gameScene.redNodeAction(this.newNode),this.updateAllRewardItem(),this.updateTimeLabel(),this.itemAreadyRead=0<this.canRewards.length&&this._data.areadyReceive||0==this.canRewards.length&&this._data.areadyRead,this.emailIconNode.active=(this._data.type==i.constant.MAIL_TYPE_GLOBAL||this._data.type==i.constant.MAIL_TYPE_PERSON)&&!this.itemAreadyRead,this.emailReadIconNode.active=(this._data.type==i.constant.MAIL_TYPE_GLOBAL||this._data.type==i.constant.MAIL_TYPE_PERSON)&&this.itemAreadyRead,this.feedBackIconNode.active=this._data.type==i.constant.MAIL_TYPE_FEED_BACK&&!this.itemAreadyRead,this.feedBackReadIconNode.active=this._data.type==i.constant.MAIL_TYPE_FEED_BACK&&this.itemAreadyRead,this.bgNode.active=!this.itemAreadyRead,this.bgReadNode.active=this.itemAreadyRead},updateAllRewardItem:function(){for(var e=0;e<this.rewardItemObjList.length;e++)this.rewardItemObjList[e].node.active=!1;this.canRewards=i.player.commonModule.getMailRewardValidList(this._data.rewards);for(var t=0;t<this.canRewards.length;t++){var a,n=this.canRewards[t];t>=this.rewardItemObjList.length&&((a=cc.instantiate(this.commonItemPrefab)).scale=.5,o=a.getComponent("CommonItemRender"),this.rewardLayoutNode.addChild(a),a.active=!1,this.rewardItemObjList.push(o));var o=this.rewardItemObjList[t];o.node.active=!0,o.initData(n.itemId,n.itemValue,null,null,!0,!0,this._data.areadyReceive)}},updateTimeLabel:function(){this.timeDayLabel.node.active=!1,this.timeHourLabel.node.active=!1,this.timeMinuteLabel.node.active=!1,this.deleteTimeDayLabel.node.active=!1,this.deleteTimeHourLabel.node.active=!1,this.deleteTimeMinuteLabel.node.active=!1;var e=864e5*i.player.commonModule.getMailOverdueDay();if(0<this.canRewards.length&&this._data.areadyReceive||0==this.canRewards.length&&this._data.areadyRead){var t=(this._data.readTime+e-i.timeUtil.getTime())/1e3;if(t<=0)return i.player.commonModule.deleteAloneMiniMail(this._data.type,this._data.id,!0),void this.host.updateItem();t<3600?(this.deleteTimeMinuteLabel.node.active=!0,i.lang.updateLabelString(this.deleteTimeMinuteLabel,[Math.ceil(t/60)])):t<86400?(this.deleteTimeHourLabel.node.active=!0,i.lang.updateLabelString(this.deleteTimeHourLabel,[Math.ceil(t/3600)])):(this.deleteTimeDayLabel.node.active=!0,i.lang.updateLabelString(this.deleteTimeDayLabel,[Math.ceil(t/86400)]))}else(t=(i.timeUtil.getTime()-this._data.createTime)/1e3)<3600?(this.timeMinuteLabel.node.active=!0,i.lang.updateLabelString(this.timeMinuteLabel,[Math.ceil(t/60)])):t<86400?(this.timeHourLabel.node.active=!0,i.lang.updateLabelString(this.timeHourLabel,[Math.ceil(t/3600)])):(this.timeDayLabel.node.active=!0,i.lang.updateLabelString(this.timeDayLabel,[Math.ceil(t/86400)]))},onClick:function(){this._data.type==i.constant.MAIL_TYPE_FEED_BACK?i.gameScene.showPage(i.pageConstant.PAGE_TYPE_EMAIL_FEEDBACK,this._data):i.gameScene.showPage(i.pageConstant.PAGE_TYPE_EMAIL_GLOBAL,this._data)},update:function(e){this.updateLabelTime||(this.updateLabelTime=0),this.updateLabelTime+=e,this.updateLabelTime<5||(this.updateLabelTime=0,this.updateTimeLabel())}}),cc._RF.pop()},{}],EmailPage:[function(e,t){"use strict";cc._RF.push(t,"6f3ffEU+LpLa78JQ31ObH5X","EmailPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{itemPrefab:{default:null,type:cc.Prefab}},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.REFRESH_MAIL_PAGE,function(){return e.updateItem()})},onLoadPage:function(){this.scrollViewNode=cc.find("content/scrollView",this.node),this.scrollContentNode=cc.find("view/content",this.scrollViewNode),this.readButtonNode=cc.find("content/button",this.node),this.adGroupButtonNode=cc.find("content/adGroupButton",this.node),this.emptyNode=cc.find("content/empty",this.node),this.itemObjList=[],this.heroSpine=cc.find("content/empty/heroSpine",this.node).getComponent(sp.Skeleton)},showPageBegan:function(){var e=this;i.player.commonModule.cleanOpenMailPageCache(),this.updateItem(),this.heroSpine.node.active=!1;var t=i.constant.SPINE_PATH_HERO+"hero5";i.mainScene.getTowerSpineData(t,function(t){t&&(e.heroSpine.node.active=!0,e.heroSpine.skeletonData=t,e.heroSpine.setAnimation(0,"stand_down",!0),e.heroSpine.premultipliedAlpha=!0)})},showPageEnded:function(){},updateItem:function(){this.hideAllItem(),this.emailDataList=i.player.commonModule.getAllEmailList(),this.curIndex=0,this.emptyNode.active=0==this.emailDataList.length,this.readButtonNode.active=0!=this.emailDataList.length,this.adGroupButtonNode.active=0!=this.emailDataList.length},hideAllItem:function(){for(var e=0;e<this.itemObjList.length;e++)this.itemObjList[e].node.active=!1},buildAloneItem:function(){var e=cc.instantiate(this.itemPrefab);this.scrollContentNode.addChild(e);var t=e.getComponent("EmailItemRender");t.host=this,e.active=!1,this.itemObjList.push(t)},onClickDeleteAll:function(){var e;0!=i.player.commonModule.deleteAllMiniMail().length?this.updateItem():(e=i.lang.getGameText(i.GameTextCode.NO_EMAIL_READED),i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,e))},onClickRewardAll:function(){var e,t,a=this;this.rewarding||(this.rewarding=!0,0<(e=i.player.commonModule.getAllCanRewardMiniMail()).length?i.gameScene.showLoadingCycle(function(){i.player.serviceModule.rewardMiniMail(e,function(e){if(!e){var t=i.lang.getGameText(i.GameTextCode.NETWORK_NOT_CONNECTED);return i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,t),a.rewarding=!1,void i.gameScene.hideLoadingCycle()}var n=e.list;if(!n){var o=i.lang.getGameText(i.GameTextCode.NETWORK_NOT_CONNECTED);return i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,o),a.rewarding=!1,void i.gameScene.hideLoadingCycle()}0!=n.length?(o=i.player.commonModule.getMiniMailRewardList(n),i.player.commonModule.setMailRewardCacheData(o),o={type:i.constant.COMMON_REWARD_PAGE_MAIL,rewards:o,index:1,notHaveClose:!0,callBack:function(){i.player.commonModule.cleanMailRewardCacheData(),i.player.commonModule.dealMiniMailRewardList(n),a.updateItem(),a.rewarding=!1}},i.gameScene.hideLoadingCycle(),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_INSTANCE_BOX_REWARD,o)):a.closePage()})}):(this.rewarding=!1,t=i.lang.getGameText(i.GameTextCode.NO_EMAIL_REWARD),i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,t)))},onClickClose:function(){this.closePage()},update:function(){var e;this.curIndex<this.emailDataList.length&&(this.itemObjList.length<=this.curIndex&&this.buildAloneItem(),(e=this.itemObjList[this.curIndex]).node.active=!0,e.initData(this.emailDataList[this.curIndex]),this.curIndex++)}}),cc._RF.pop()},{}],EnemyDetailItem:[function(e,t){"use strict";cc._RF.push(t,"934ad3SwyxOFrys7toUp4fS","EnemyDetailItem");var i=e("Aft");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.status=0,this.nameLabel=cc.find("layout/name",this.node).getComponent(cc.Label),this.hpLabel=cc.find("layout/attribute/hp/number",this.node).getComponent(cc.Label),this.attackLabel=cc.find("layout/attribute/attack/number",this.node).getComponent(cc.Label),this.physicalAttackIcon=cc.find("layout/attribute/attack/icon",this.node),this.spellAttackIcon=cc.find("layout/attribute/attack/icon1",this.node),this.spellDefenseLabel=cc.find("layout/attribute/spellDefense/number",this.node).getComponent(cc.Label),this.physicalDefenseLabel=cc.find("layout/attribute/physicalDefense/number",this.node).getComponent(cc.Label),this.hurtLabel=cc.find("layout/hurtLayout/label",this.node).getComponent(cc.Label),this.hurtNode=cc.find("layout/hurtLayout",this.node)},showDetails:function(){var e=this;!i.battleScene.curSelectEnemyObj&&i.battleScene.curSelectSoldierObj&&this.hideDetails(),2===this.status&&this.hideDetails(),this.status=1,this.node.stopAllActions(),cc.tween(this.node).call(function(){e.node.x=-cc.winSize.width/2-e.node.width/2}).to(.3,{x:-cc.winSize.width/2+this.node.width/2}).call(function(){return e.status=2}).start(),i.battleScene.curSelectEnemyObj?(this.nameLabel.node.color=cc.color("#FA4724"),this.nameLabel.string=i.lang.getGameText(i.battleScene.curSelectEnemyObj.enemyData.name),this.hpLabel.string=i.Utils.formatBigNumberForLabel(i.battleScene.curSelectEnemyObj.maxHp),0<i.battleScene.curSelectEnemyObj.physicalAtk?(this.physicalAttackIcon.active=!0,this.spellAttackIcon.active=!1,this.attackLabel.string=i.Utils.formatBigNumberForLabel(new i.BigNumber(i.battleScene.curSelectEnemyObj.physicalAtk).toFixed(0))):(this.physicalAttackIcon.active=!1,this.spellAttackIcon.active=!0,this.attackLabel.string=i.Utils.formatBigNumberForLabel(new i.BigNumber(i.battleScene.curSelectEnemyObj.magicAtk).toFixed(0))),0<i.battleScene.curSelectEnemyObj.magicDef?this.spellDefenseLabel.string=new i.BigNumber(i.battleScene.curSelectEnemyObj.magicDef).toFixed(0):this.spellDefenseLabel.string=i.lang.getGameText(i.GameTextCode.NONE_LABEL),0<i.battleScene.curSelectEnemyObj.physicalDef?this.physicalDefenseLabel.string=new i.BigNumber(i.battleScene.curSelectEnemyObj.physicalDef).toFixed(0):this.physicalDefenseLabel.string=i.lang.getGameText(i.GameTextCode.NONE_LABEL),this.hurtNode.active=!0,i.lang.updateLabelString(this.hurtLabel,[i.battleScene.curSelectEnemyObj.hurtHeart])):(this.nameLabel.node.color=cc.color("#FFFF00"),this.nameLabel.string=i.lang.getGameText(i.battleScene.curSelectSoldierObj.heroData.name),this.hpLabel.string=i.Utils.formatBigNumberForLabel(i.battleScene.curSelectSoldierObj.maxHp),0<i.battleScene.curSelectSoldierObj.physicalAtk?(this.physicalAttackIcon.active=!0,this.spellAttackIcon.active=!1,this.attackLabel.string=i.Utils.formatBigNumberForLabel(new i.BigNumber(i.battleScene.curSelectSoldierObj.physicalAtk).toFixed(0))):(this.physicalAttackIcon.active=!1,this.spellAttackIcon.active=!0,this.attackLabel.string=i.Utils.formatBigNumberForLabel(new i.BigNumber(i.battleScene.curSelectSoldierObj.magicAtk).toFixed(0))),0<i.battleScene.curSelectSoldierObj.magicDef?this.spellDefenseLabel.string=new i.BigNumber(i.battleScene.curSelectSoldierObj.magicDef).toFixed(0):this.spellDefenseLabel.string=i.lang.getGameText(i.GameTextCode.NONE_LABEL),0<i.battleScene.curSelectSoldierObj.physicalDef?this.physicalDefenseLabel.string=new i.BigNumber(i.battleScene.curSelectSoldierObj.physicalDef).toFixed(0):this.physicalDefenseLabel.string=i.lang.getGameText(i.GameTextCode.NONE_LABEL),this.hurtNode.active=!1)},hideDetails:function(){var e=this;this.node.stopAllActions(),this.status=3,cc.tween(this.node).to(.3,{x:-cc.winSize.width/2-this.node.width/2}).call(function(){e.status=0,e.showIndex=-1}).start()}}),cc._RF.pop()},{}],EnterBattleTipPage:[function(e,t){"use strict";cc._RF.push(t,"ab6c2mhvG5Hh4klaJWPSRCw","EnterBattleTipPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{enemyItemRenderPrefab:cc.Prefab,recommendItemRenderPrefab:cc.Prefab},onLoadPage:function(){this.instanceNameLabel=cc.find("content/level",this.node).getComponent(cc.Label),this.starNodeList=[],this.starNodeList.push(cc.find("content/star/starLayout/star1",this.node)),this.starNodeList.push(cc.find("content/star/starLayout/star2",this.node)),this.starNodeList.push(cc.find("content/star/starLayout/star3",this.node)),this.enemyCountLabel=cc.find("content/enemy/title/enemyLabel",this.node).getComponent(cc.Label),this.enemyLayoutNode=cc.find("content/enemy/scrollView/view/content",this.node),this.enemyScrollView=cc.find("content/enemy/scrollView",this.node).getComponent(cc.ScrollView),this.heroLayoutNode=cc.find("content/hero/van/scrollView/view/content",this.node),this.heroLevelLabel=cc.find("content/hero/van/labelLayout/level",this.node).getComponent(cc.Label),this.heroTowerLayoutNode=cc.find("content/hero/soldier/scrollView/view/content",this.node),this.towerLayoutNode=cc.find("content/hero/tower/scrollView/view/content",this.node),this.towerLevelLabel=cc.find("content/hero/tower/labelLayout/level",this.node).getComponent(cc.Label),this.powerLabel=cc.find("content/button/background/powerLayout/number",this.node).getComponent(cc.Label),this.buttonNode=cc.find("content/button",this.node)},showPageBegan:function(){this.curChapter=this.data.chapterId,this.curInstance=this.data.instanceId,this.chapterData=i.templateManager.getChapterDataById(this.curChapter);var e=i.templateManager.getInstanceListByChapterId(this.curChapter);this.instanceData=e[this.curInstance-1],this.enemyList=i.templateManager.getInstanceEnemyListById(this.instanceData.id),this.sortEnemyList=[];for(var t=0;t<this.enemyList.length;t++){var a=this.enemyList[t],n=i.templateManager.getEnemyDataById(a);n={enemyId:a,score:1e3*(i.player.instanceModule.isNewEnemy(a)?1:0)+n.type},this.sortEnemyList.push(n)}this.sortEnemyList.sort(function(e,t){return t.score-e.score}),i.lang.updateLabelString(this.enemyCountLabel,[this.enemyList.length]),i.lang.updateLabelString(this.instanceNameLabel,[i.lang.getGameText(this.chapterData.name),this.curInstance]),this.powerLabel.string=i.templateManager.getGameParamValue("powerInstanceNum"),this.updateStarNode(),this.initEnemyList(),this.hideRecommendFrame();var o=this;e=i.player.commonModule.isLowIosDevice()?"textures/fightPowerRecommend/fightPowerRecommend_small":"textures/fightPowerRecommend/fightPowerRecommend",this.recommendAtlas?o.updateRecommendFrame():cc.loader.loadRes(e,cc.SpriteAtlas,function(e,t){e?cc.error(e):(o.recommendAtlas=t,o.updateRecommendFrame())})},closePageBegan:function(){i.ttAdManager.hideBannerAd()},hideRecommendFrame:function(){for(var e=0;e<this.heroLayoutNode.childrenCount;e++)this.heroLayoutNode.children[e].active=!1;for(var t=0;t<this.heroTowerLayoutNode.childrenCount;t++)this.heroTowerLayoutNode.children[t].active=!1;for(var i=0;i<this.towerLayoutNode.childrenCount;i++)this.towerLayoutNode.children[i].active=!1},updateRecommendFrame:function(){this.node&&this.node.active&&(this.initHeroList(),this.initHeroTowerList(),this.initTowerList())},showPageEnded:function(){i.ttAdManager.showBannerAd(cc.find("adNode",this.node),this.getPageType())},updateStarNode:function(){for(var e=i.player.instanceModule.getInstanceStarById(this.curChapter,this.curInstance),t=0;t<this.starNodeList.length;t++)this.starNodeList[t].active=t+1<=e},updateEnemyListIcon:function(e){for(var t=this.enemyList.length,i=0;i<this.enemyLayoutNode.childrenCount;i++){var a=this.enemyLayoutNode.children[i];t<=i?a.active=!1:(a.active=!0,a.getComponent("InstanceEnemyItemRender").updateEnemyShow(e))}},initEnemyList:function(){for(var e=this.enemyLayoutNode.childrenCount,t=this.enemyList.length,a=Math.max(0,t-e),n=0;n<a;n++){var o=cc.instantiate(this.enemyItemRenderPrefab);this.enemyLayoutNode.addChild(o)}for(var s=0;s<this.enemyLayoutNode.childrenCount;s++){var r=this.enemyLayoutNode.children[s];t<=s?r.active=!1:(r.active=!0,r.getComponent("InstanceEnemyItemRender").initData(this.sortEnemyList[s].enemyId,this.instanceData))}var c=this;this.enemyAtlas=null,e=i.player.commonModule.isLowIosDevice()?"textures/pictorial/pictorialEnemy1_small":"textures/pictorial/pictorialEnemy1",cc.loader.loadRes(e,cc.SpriteAtlas,function(e,t){e?cc.error(e):(i.Logger.debug("loadRes success enemyAtlas"),c.enemyAtlas=t,c.updateEnemyListIcon(t))}),this.enemyScrollView.scrollToLeft()},initHeroList:function(){var e=this.heroLayoutNode.childrenCount,t=1;this.instanceData.heroNeedLevel&&(t=this.instanceData.heroNeedLevel.length);for(var a=Math.max(0,t-e),n=0;n<a;n++){var o=cc.instantiate(this.recommendItemRenderPrefab);this.heroLayoutNode.addChild(o)}for(var s=0,r=0;r<this.heroLayoutNode.childrenCount;r++){var c,l=this.heroLayoutNode.children[r];t<=r?l.active=!1:(l.active=!0,c=0,this.instanceData.heroNeedLevel&&r<this.instanceData.heroNeedLevel.length&&(c=this.instanceData.heroNeedLevel[r][0],s=this.instanceData.heroNeedLevel[r][1]),l.getComponent("InstanceRecommendItemRender").initData(i.constant.RECOMMEND_TYPE_HERO,this.recommendAtlas,c,s))}0===s?this.heroLevelLabel.node.active=!1:(this.heroLevelLabel.node.active=!0,i.lang.updateLabelString(this.heroLevelLabel,[s]))},initHeroTowerList:function(){var e=this.heroTowerLayoutNode.childrenCount,t=1;this.instanceData.heroTowerId&&(t=this.instanceData.heroTowerId.length);for(var a=Math.max(0,t-e),n=0;n<a;n++){var o=cc.instantiate(this.recommendItemRenderPrefab);this.heroTowerLayoutNode.addChild(o)}for(var s=0;s<this.heroTowerLayoutNode.childrenCount;s++){var r,c=this.heroTowerLayoutNode.children[s];t<=s?c.active=!1:(c.active=!0,r=0,this.instanceData.heroTowerId&&s<this.instanceData.heroTowerId.length&&(r=this.instanceData.heroTowerId[s]),c.getComponent("InstanceRecommendItemRender").initData(i.constant.RECOMMEND_TYPE_HERO_TOWER,this.recommendAtlas,r))}},initTowerList:function(){for(var e=this.towerLayoutNode.childrenCount,t=i.JsonData.TowerType.length,a=Math.max(0,t-e),n=0;n<a;n++){var o=cc.instantiate(this.recommendItemRenderPrefab);this.towerLayoutNode.addChild(o)}for(var s=0;s<this.towerLayoutNode.childrenCount;s++){var r,c=this.towerLayoutNode.children[s];t<=s?c.active=!1:(c.active=!0,r=i.JsonData.TowerType[s],c.getComponent("InstanceRecommendItemRender").initData(i.constant.RECOMMEND_TYPE_TOWER,this.recommendAtlas,r,this.instanceData.towerNeedLevel))}i.lang.updateLabelString(this.towerLevelLabel,[this.instanceData.towerNeedLevel])},onClickEnterBattle:function(){var e;!i.player.commonModule.isLowIosDevice()||this.enemyAtlas&&this.recommendAtlas?(e=i.templateManager.getGameParamValue("powerInstanceNum"),i.player.playerModule.isPowerEnough(e)?(i.soundsUtil.playSoundEffect("common_button_click"),i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_TOWER)&&i.player.towerModule.getHaveCanChooseTowerHero()?i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_HERO_CONFIRM_PAGE,{chapter:this.curChapter,instance:this.curInstance,power:e}):(i.player.playerModule.costPowerNum(e),i.gameScene.mainPage.goToInstance(this.curChapter,this.curInstance,this.node,!1)),this.closePage()):i.player.commonModule.getPowerBuyIsMax()?(e=i.lang.getGameText(i.GameTextCode.POWER_NOT_ENOUGH),i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,e)):i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_POWER)):i.Logger.debug("onClickEnterBattle return")},closePageEnded:function(){this.enemyAtlas&&i.player.commonModule.isLowIosDevice()&&(cc.loader.release(cc.loader.getDependsRecursively(this.enemyAtlas)),this.enemyAtlas=null),this.recommendAtlas&&i.player.commonModule.isLowIosDevice()&&(cc.loader.release(cc.loader.getDependsRecursively(this.recommendAtlas)),this.recommendAtlas=null)}}),cc._RF.pop()},{}],EventBus:[function(e,t){"use strict";cc._RF.push(t,"c448cGzFlJMTr6+4t6zaLPG","EventBus");var i=e("Logger"),a=cc.Class({extends:cc.Object,properties:{eventListeners:{default:{}}},statics:{_instance:null,getInstance:function(){return this._instance||(this._instance=new a),this._instance}},addListener:function(e,t){this.eventListeners[e]||(this.eventListeners[e]=[]);var i=this.eventListeners[e];return i.push(t),function(){var e=i.indexOf(t);e<=-1||i.splice(e,1)}},dispatchEvent:function(e,t){var a=this.eventListeners[e];!a||a.length<=0?i.warn("Event not any listener. eventName:",e):a.forEach(function(e){e(t)})},destroy:function(){this.eventListeners={}}});cc._RF.pop()},{}],FeedBackPage:[function(e,t){"use strict";cc._RF.push(t,"d420eNPNNBBdrp9HE85HWeV","FeedBackPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{},onLoadPage:function(){this.editBox=cc.find("/content/EditBox",this.node).getComponent("cc.EditBox"),this.bugChoseNode=cc.find("/content/choseLayout/bugLayout/icon/chose",this.node),this.suggestionChoseNode=cc.find("/content/choseLayout/suggestionLayout/icon/chose",this.node),this.addGroupBtnNode=cc.find("content/btnLayout/adGroupButton",this.node),this.serverTimeLabel=cc.find("content/timeLayout/serverTimeLabel",this.node).getComponent(cc.Label),this.localTimeLabel=cc.find("content/timeLayout/localTimeLabel",this.node).getComponent(cc.Label)},registerGameListener:function(){},showPageBegan:function(){this.initData(),this.resetServerTime()},initData:function(e){this.closeHook=e,this.editBox.string="",this.optType="1",this.bugChoseNode.active=!0,this.suggestionChoseNode.active=!1,this.editBox.placeholder=i.lang.getGameText(i.GameTextCode.FEEDBACK_TIPS),this.addGroupBtnNode.active=!1},resetServerTime:function(){var e=this;this.updateTime=0,this.serverTime=null,i.player.serviceModule.getServerTime(function(t){if(!t||!t[0]||!t[0].result)return e.serverTime=null,void e.updateTimeLabel();t=Number(t[0].result),e.serverTime=t,e.updateTimeLabel()})},updateTimeLabel:function(){var e=i.timeUtil.getTime();this.localTimeLabel.string="\u672c\u5730\u65f6\u95f4: "+i.timeUtil.getTimeFormat(e),this.serverTime?(this.serverTime+=1e3,this.serverTimeLabel.string="\u670d\u52a1\u5668\u65f6\u95f4: "+i.timeUtil.getTimeFormat(this.serverTime)):this.serverTimeLabel.string=""},beginEditing:function(){this.editBox.placeholder=""},endEditing:function(){this.editBox.placeholder=i.lang.getGameText(i.GameTextCode.FEEDBACK_TIPS)},onClickBug:function(){this.optType="1",this.bugChoseNode.active=!0,this.suggestionChoseNode.active=!1,i.soundsUtil.playSoundEffect("common_button_click")},onClickSuggestion:function(){this.optType="2",this.bugChoseNode.active=!1,this.suggestionChoseNode.active=!0,i.soundsUtil.playSoundEffect("common_button_click")},onClickGo:function(){var e,t=this.editBox.string;0!==t.length?i.player.commonModule.isCanFeedBack()?(i.player.serviceModule.sendFeedBack(this.optType+"",t),t=i.lang.getGameText(i.GameTextCode.FEEDBACK_SUCCEED),i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,t),i.soundsUtil.playSoundEffect("common_button_click"),i.player.commonModule.addFeedBackCount(),this.closePage()):(e=i.lang.getGameText(i.GameTextCode.FEEDBACK_MAX_NUM),i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,e)):(e=i.lang.getGameText(i.GameTextCode.FEEDBACK_TIPS),i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,e))},onClickJoinQQ:function(){i.oneClickEnterGroupManager.copyQQGroup()},update:function(e){this.updateTime+=e,this.updateTime<1||(this.updateTime=0,this.updateTimeLabel())}}),cc._RF.pop()},{}],FreePowerAddPopup:[function(e,t){"use strict";cc._RF.push(t,"c694ebnbq5DS6fL64FXNt/+","FreePowerAddPopup");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{},onLoadPage:function(){this.miniNode=cc.find("content/mini",this.node),this.miniTitleNode=cc.find("title",this.miniNode),this.miniTitle1Node=cc.find("title1",this.miniNode),this.floatNode=cc.find("content/float",this.node),this.deskNode=cc.find("content/desk",this.node),this.deskTitleNode=cc.find("title",this.deskNode),this.deskTitle1Node=cc.find("title1",this.deskNode),this.customerServiceNode=cc.find("content/customerService",this.node),this.customerButtonNode=cc.find("content/customerService/pic/button",this.node)},showPageBegan:function(){var e,t;this._type=this.data.type,this.miniNode.active=!1,this.floatNode.active=!1,this.deskNode.active=!1,this.customerServiceNode.active=!1,this.miniTitleNode.active=!1,this.miniTitle1Node.active=!1,this.deskTitleNode.active=!1,this.deskTitle1Node.active=!1,this._type==i.constant.FREE_POWER_TYPE_MINI_FRIST?(this.miniTitleNode.active=!0,this.miniNode.active=!0):this._type==i.constant.FREE_POWER_TYPE_MINI?(this.miniTitle1Node.active=!0,this.miniNode.active=!0):this._type==i.constant.FREE_POWER_TYPE_DESK_FRIST?(this.deskTitleNode.active=!0,this.deskNode.active=!0):this._type==i.constant.FREE_POWER_TYPE_DESK?(this.deskTitle1Node.active=!0,this.deskNode.active=!0):this._type==i.constant.FREE_POWER_TYPE_FLOAT_FIRST||this._type==i.constant.FREE_POWER_TYPE_FLOAT?this.floatNode.active=!0:this._type==i.constant.FREE_POWER_TYPE_CUSTOMER_SERVICE&&(this.customerServiceNode.active=!0,e=cc.scaleTo(.5,1.03),t=cc.scaleTo(.5,.97),t=cc.sequence(e,t),t=cc.repeatForever(t),this.customerButtonNode.stopAllActions(),this.customerButtonNode.runAction(t))},showPageEnded:function(){},onClickCustomerService:function(){i.config.needSDKUid&&(i.ttAdManager.randomShareData(i.constant.SHARE_TYPE_POWER),wx&&wx.openCustomerServiceConversation&&(console.log("openCustomerServiceConversation"),i.player.commonModule.setCustomerClick(!0),this.closePage(),wx.openCustomerServiceConversation({showMessageCard:!0,sendMessageTitle:i.nativeManager.share_title,sendMessagePath:"gift",sendMessageImg:i.nativeManager.share_image,success:function(e){console.log("openCustomerServiceConversation success res = ",e)},fail:function(e){console.error(e)},complete:function(e){console.log("openCustomerServiceConversation complete res = ",e)}})))}}),cc._RF.pop()},{}],FreePowerRewardItemrender:[function(e,t){"use strict";cc._RF.push(t,"4a169zKE99Aia++qNuarpcO","FreePowerRewardItemrender"),cc.Class({extends:aft.BaseUI,properties:{freePowerAtlas:{default:null,type:cc.SpriteAtlas}},afterLoad:function(){this.iconSprite=cc.find("icon",this.node).getComponent(cc.Sprite),this.nameLabel=cc.find("name",this.node).getComponent(cc.Label),this.nameLabel_1=cc.find("name1",this.node).getComponent(cc.Label),this.rewardsNode=cc.find("rewards",this.node),this.numberLabel=cc.find("rewards/power/number",this.node).getComponent(cc.Label),this.getBtnNode=cc.find("getButton",this.node),this.getBtnLabelNode=cc.find("getButton/background/label",this.node),this.getBtnLabelNode_1=cc.find("getButton/background/label1",this.node),this.gotNode=cc.find("got",this.node)},initData:function(e){this._dataCfg=e,this.isHaveGift=this._dataCfg.gift&&0<this._dataCfg.gift.length,this.rewardsNode.active=this.isHaveGift,this.nameLabel.node.active=this.isHaveGift,this.nameLabel_1.node.active=!this.isHaveGift,this.getBtnLabelNode.active=this.isHaveGift,this.getBtnLabelNode_1.active=!this.isHaveGift,this.nameLabel.string=aft.lang.getGameText(this._dataCfg.desc),this.nameLabel_1.string=aft.lang.getGameText(this._dataCfg.desc),this.isHaveGift&&aft.lang.updateLabelString(this.numberLabel,[this._dataCfg.gift[0].value]),this.iconSprite.spriteFrame=this.freePowerAtlas.getSpriteFrame(this._dataCfg.icon),this.updateBtnNode()},updateBtnNode:function(){var e=!1;1==this._dataCfg.mainType?e=0==this._dataCfg.type?0!=aft.player.commonModule.getFirstMyMiniPowerTime():aft.player.commonModule.checkAlreadyMyMiniPower():2==this._dataCfg.mainType?e=0==this._dataCfg.type?0!=aft.player.commonModule.getFirstDestPowerTime():aft.player.commonModule.checkAlreadyDestPower():this._dataCfg.mainType==aft.constant.FREE_POWER_TYPE_FLOATING_WINDOW?0==this._dataCfg.type?(e=0!=aft.player.commonModule.getFirstFloatWindowPowerTime(),console.log("aft.player.commonModule.getFirstFloatWindowPowerTime() = "+aft.player.commonModule.getFirstFloatWindowPowerTime())):e=aft.player.commonModule.checkAlreadyFloatWindowPower():this._dataCfg.mainType==aft.constant.FREE_POWER_TYPE_CUSTOMER&&(e=aft.player.commonModule.isCustomerRewardOver()),this.getBtnNode.active=!e,this.gotNode.active=e,console.log("updateBtnNode this._dataCfg.mainType = "+this._dataCfg.mainType+" this._dataCfg.type = "+this._dataCfg.type+" isGet = "+e)},onClickReceive:function(){console.log("onClickReceive this._dataCfg.mainType = "+this._dataCfg.mainType+" this._dataCfg.type = "+this._dataCfg.type),1==this._dataCfg.mainType?0==this._dataCfg.type?this.dealMiniFirstClick():this.dealMiniClick():2==this._dataCfg.mainType?0==this._dataCfg.type?this.dealDestFirstClick():this.dealDestClick():this._dataCfg.mainType==aft.constant.FREE_POWER_TYPE_FLOATING_WINDOW?0==this._dataCfg.type?this.dealFloatWindowFirstClick():this.dealFloatWindowClick():this._dataCfg.mainType==aft.constant.FREE_POWER_TYPE_AD?(this.host.closePage(),this.gotoAdPower()):this._dataCfg.mainType==aft.constant.FREE_POWER_TYPE_RANK?(this.host.closePage(),this.gotoRank()):this._dataCfg.mainType==aft.constant.FREE_POWER_TYPE_CUSTOMER&&aft.gameScene.showPage(aft.pageConstant.PAGE_TYPE_FREE_POWER_ADD,{type:aft.constant.FREE_POWER_TYPE_CUSTOMER_SERVICE})},gotoRank:function(){aft.player.functionModule.isFuncOpened(aft.constant.MAIN_FUNCTION_RANK)&&aft.gameScene.showPage(aft.pageConstant.PAGE_TYPE_MAIN_RANK)},gotoAdPower:function(){aft.gameScene.showPage(aft.pageConstant.PAGE_TYPE_MAIN_POWER)},dealFloatWindowFirstClick:function(){var e=this;console.log("dealFloatWindowFirstClick"),0==aft.player.commonModule.getFirstFloatWindowPowerTime()&&(aft.player.commonModule.getIsIntoFromFloatWindow()?aft.gameScene.checkServerTime(function(){var t=e,i={type:aft.constant.COMMON_REWARD_PAGE_FREE_POWER,rewards:e._dataCfg.gift,index:1,notHaveClose:!0,textDesc:aft.lang.getGameText(e._dataCfg.giftDesc),callBack:function(){t.host.closePage(),aft.player.commonModule.restetFirstFloatWindowPowerTime()}};aft.gameScene.showPage(aft.pageConstant.PAGE_TYPE_MAIN_INSTANCE_BOX_REWARD,i)},!1,function(){}):aft.gameScene.showPage(aft.pageConstant.PAGE_TYPE_FREE_POWER_ADD,{type:aft.constant.FREE_POWER_TYPE_FLOAT_FIRST}))},dealFloatWindowClick:function(){var e,t=this;console.log("dealFloatWindowClick"),aft.player.commonModule.checkAlreadyFloatWindowPower()||(aft.player.commonModule.checkCanFloatWindowPower()?(e=this,aft.gameScene.checkServerTime(function(){var i={type:aft.constant.COMMON_REWARD_PAGE_FREE_POWER,rewards:t._dataCfg.gift,index:1,notHaveClose:!0,textDesc:aft.lang.getGameText(t._dataCfg.giftDesc),callBack:function(){e.host.closePage(),aft.player.commonModule.resetFloatWindowPowerTime()}};aft.gameScene.showPage(aft.pageConstant.PAGE_TYPE_MAIN_INSTANCE_BOX_REWARD,i)},!1,function(){})):aft.gameScene.showPage(aft.pageConstant.PAGE_TYPE_FREE_POWER_ADD,{type:aft.constant.FREE_POWER_TYPE_FLOAT}))},dealMiniFirstClick:function(){var e=this;0==aft.player.commonModule.getFirstMyMiniPowerTime()&&(aft.player.commonModule.getIsIntoFromMini()?aft.gameScene.checkServerTime(function(){var t=e,i={type:aft.constant.COMMON_REWARD_PAGE_FREE_POWER,rewards:e._dataCfg.gift,index:1,notHaveClose:!0,textDesc:aft.lang.getGameText(e._dataCfg.giftDesc),callBack:function(){t.host.closePage(),aft.player.commonModule.restetFirstMyMiniPowerTime()}};aft.gameScene.showPage(aft.pageConstant.PAGE_TYPE_MAIN_INSTANCE_BOX_REWARD,i)},!1,function(){}):aft.gameScene.showPage(aft.pageConstant.PAGE_TYPE_FREE_POWER_ADD,{type:aft.constant.FREE_POWER_TYPE_MINI_FRIST}))},dealMiniClick:function(){var e,t=this;aft.player.commonModule.checkAlreadyMyMiniPower()||(aft.player.commonModule.checkCanMyMiniPower()?(e=this,aft.gameScene.checkServerTime(function(){var i={type:aft.constant.COMMON_REWARD_PAGE_FREE_POWER,rewards:t._dataCfg.gift,index:1,notHaveClose:!0,textDesc:aft.lang.getGameText(t._dataCfg.giftDesc),callBack:function(){e.host.closePage(),aft.player.commonModule.resetMyMiniPowerTime()}};aft.gameScene.showPage(aft.pageConstant.PAGE_TYPE_MAIN_INSTANCE_BOX_REWARD,i)},!1,function(){})):aft.gameScene.showPage(aft.pageConstant.PAGE_TYPE_FREE_POWER_ADD,{type:aft.constant.FREE_POWER_TYPE_MINI}))},dealDestFirstClick:function(){var e=this;0==aft.player.commonModule.getFirstDestPowerTime()&&(aft.player.commonModule.getIsIntoFromDest()?aft.gameScene.checkServerTime(function(){var t=e,i={type:aft.constant.COMMON_REWARD_PAGE_FREE_POWER,rewards:e._dataCfg.gift,index:1,notHaveClose:!0,textDesc:aft.lang.getGameText(e._dataCfg.giftDesc),callBack:function(){t.host.closePage(),aft.player.commonModule.resetFirstDestPowerTime()}};aft.gameScene.showPage(aft.pageConstant.PAGE_TYPE_MAIN_INSTANCE_BOX_REWARD,i)},!1,function(){}):aft.gameScene.showPage(aft.pageConstant.PAGE_TYPE_FREE_POWER_ADD,{type:aft.constant.FREE_POWER_TYPE_DESK_FRIST}))},dealDestClick:function(){var e=this;aft.player.commonModule.checkAlreadyDestPower()||(aft.player.commonModule.checkCanDestPower()?aft.gameScene.checkServerTime(function(){var t=e,i={type:aft.constant.COMMON_REWARD_PAGE_FREE_POWER,rewards:e._dataCfg.gift,index:1,notHaveClose:!0,textDesc:aft.lang.getGameText(e._dataCfg.giftDesc),callBack:function(){t.host.closePage(),aft.player.commonModule.resetDestPowerTime()}};aft.gameScene.showPage(aft.pageConstant.PAGE_TYPE_MAIN_INSTANCE_BOX_REWARD,i)},!1,function(){}):aft.gameScene.showPage(aft.pageConstant.PAGE_TYPE_FREE_POWER_ADD,{type:aft.constant.FREE_POWER_TYPE_DESK}))}}),cc._RF.pop()},{}],FreePowerRewardPopup:[function(e,t){"use strict";cc._RF.push(t,"468a3hTrX5Czrfta0dGhBjw","FreePowerRewardPopup");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{itemPrefab:{type:cc.Prefab,default:null}},onLoadPage:function(){this.contentNode=cc.find("content/scrollView/view/content",this.node),this.itemDataList=i.JsonData.FreePower,this.contentItemObjList=[]},showPageBegan:function(){this.initData(),i.player.commonModule.saveFreePowerRedIndex(),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_MAIN_FREE_POWER_RED)},showPageEnded:function(){},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.UPDATE_CUSTOMER_REWARD,function(){return e.checkItemListShow()})},checkItemListShow:function(){for(var e=0;e<this.contentItemObjList.length;e++)this.contentItemObjList[e].updateBtnNode()},initData:function(){this.resetItemDataList(),this.resetItem()},resetItemDataList:function(){this.itemDataList=[];for(var e=0;e<i.JsonData.FreePower.length;e++){var t=i.JsonData.FreePower[e];t.mainType==i.constant.FREE_POWER_TYPE_SMALL_GAME?0==t.type?i.player.commonModule.checkIsMyMiniPowerFirst()&&this.itemDataList.push(t):i.player.commonModule.checkIsMyMiniPowerFirst()||this.itemDataList.push(t):t.mainType==i.constant.FREE_POWER_TYPE_DESKTOP?cc.sys.os==cc.sys.OS_ANDROID&&(0==t.type?i.player.commonModule.checkIsMyDestPowerFirst()&&this.itemDataList.push(t):i.player.commonModule.checkIsMyDestPowerFirst()||this.itemDataList.push(t)):t.mainType==i.constant.FREE_POWER_TYPE_FLOATING_WINDOW?cc.sys.os==cc.sys.OS_ANDROID&&(0==t.type?i.player.commonModule.checkIsFloatWindowPowerFirst()&&this.itemDataList.push(t):i.player.commonModule.checkIsFloatWindowPowerFirst()||this.itemDataList.push(t)):t.mainType!=i.constant.FREE_POWER_TYPE_CUSTOMER&&t.mainType!=i.constant.FREE_POWER_TYPE_AD&&t.mainType!=i.constant.FREE_POWER_TYPE_RANK||this.itemDataList.push(t)}},resetItem:function(){for(var e=0;e<this.contentItemObjList.length;e++)this.contentItemObjList[e].node.active=!1;this.checkIndex=0},update:function(){var e,t;this.checkIndex<this.itemDataList.length&&(this.checkIndex>=this.contentItemObjList.length&&(((t=(e=cc.instantiate(this.itemPrefab)).getComponent("FreePowerRewardItemrender")).host=this).contentNode.addChild(e),this.contentItemObjList.push(t)),(t=this.contentItemObjList[this.checkIndex]).node.active=!0,t.initData(this.itemDataList[this.checkIndex]),this.towerLayoutHeight+=t.node.height+5,this.checkIndex++)}}),cc._RF.pop()},{}],FunctionModule:[function(e,t){"use strict";cc._RF.push(t,"a4147ehjzpPnL9h4NFl94mm","FunctionModule");var i=e("Aft");cc.Class({extends:i.BaseHandler,init:function(e){this.player=e;var t=i.StorageUtil.getData(i.constant.SAVE_FUNCTION_DATA);t||(this.player.saveGameData(i.constant.SAVE_FUNCTION_DATA,e={openMap:{},alreadyGuide:[],unLockSkill:[]}),t=JSON.stringify(e)),i.Logger.debug("init function data  :",t),this.player._gameData.functionData=JSON.parse(t)},getFunctionData:function(){return this.player._gameData.functionData},loadData:function(){this.player._gameData.functionData.hasOwnProperty("unLockSkill")||(this.player._gameData.functionData.unLockSkill=[]),this.checkUnlockSkill()},restoreData:function(e){e&&e.functionData&&(i.StorageUtil.save(i.constant.SAVE_FUNCTION_DATA,e.functionData,!0),i.Logger.debug("restoreData data  functionData :",JSON.stringify(e.functionData)))},saveFunctionData:function(){this.player.saveGameData(i.constant.SAVE_FUNCTION_DATA,this.getFunctionData())},isFuncOpened:function(e,t){if(i.player.gmModule.isOpenAllFunction())return!0;var a=!1,n=i.templateManager.getFunctionDataById(e);return n&&(e!=i.constant.MAIN_FUNCTION_ALLIANCE||i.player.allianceModule.checkAllianceControllerIsOpen())&&(t||this.checkIsFunctionGuide(e)||1!==n.isShow)?((e=i.player.instanceModule.getMaxChapter())>n.instanceNum[0]?a=!0:e===n.instanceNum[0]&&(a=i.player.instanceModule.getChapterMaxLevel(e)>=n.instanceNum[1]),a):a},getFuncConditionStringById:function(e,t){var a=i.templateManager.getFunctionDataById(e),n=[];return a&&(e=i.templateManager.getChapterDataById(a.instanceNum[0]),n=[i.lang.getGameText(e.name),a.instanceNum[1],i.lang.getGameText(a.name)]),t=t||i.GameTextCode.UNLOCK_BY_INSTANCE,i.lang.getArgGameText(t,n)},getSkillConditionStringById:function(e){for(var t="",a=i.templateManager.getGameParamValue("mainSkillUnlock"),n=null,o=0;o<a.length;o++)if(e===a[o][0]){n=a[o];break}if(!n)return t;var s=i.templateManager.getHeroSkillDataByGroupId(e);return 0<=this.getFunctionData().unLockSkill.indexOf(e)?i.lang.getArgGameText(i.GameTextCode.UNLOCK_SKILL_BY_GUIDE,[i.lang.getGameText(s.name)]):(t=i.templateManager.getChapterDataById(n[1]),s=[i.lang.getGameText(t.name),n[2],i.lang.getGameText(s.name)],i.lang.getArgGameText(i.GameTextCode.UNLOCK_SKILL_BY_INSTANCE,s))},checkIsFunctionGuide:function(e){return this.getFunctionData().alreadyGuide||(this.getFunctionData().alreadyGuide=[],this.saveFunctionData()),0<=this.getFunctionData().alreadyGuide.indexOf(e)},setFunctionGuide:function(e){this.getFunctionData().alreadyGuide.indexOf(e)<0&&(this.getFunctionData().alreadyGuide.push(e),this.saveFunctionData())},pushCacheFunction:function(e){this.cacheFunctionList||(this.cacheFunctionList=[]),0<=this.cacheFunctionList.indexOf(parseInt(e))||this.cacheFunctionList.push(parseInt(e))},removeCacheFunction:function(e){this.areadyOpenFunctionId=!1,this.cacheFunctionList&&((e=this.cacheFunctionList.indexOf(parseInt(e)))<0||this.cacheFunctionList.splice(e,1))},checkOpenFunctionPage:function(){if(!this.areadyOpenFunctionId)if(this.cacheFunctionList){if(0!==this.cacheFunctionList.length){if(1===this.cacheFunctionList.length){var e=this.cacheFunctionList[0];return this.areadyOpenFunctionId=!0,i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_NEW_FUNCTION,{funcId:e}),!0}for(var t=[],a=0;a<this.cacheFunctionList.length;a++){var n,o,s=this.cacheFunctionList[a];this.checkIsFunctionGuide(s)||(n=i.templateManager.getFunctionDataById(s))&&(o=1e3,n.order&&(o=n.order),t.push([o,s]))}if(0!==t.length)return t.sort(function(e,t){return e[0]-t[0]}),e=t[0][1],this.areadyOpenFunctionId=!0,i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_NEW_FUNCTION,{funcId:e}),!0}}else this.cacheFunctionList=[]},checkUnlockSkill:function(){for(var e=i.templateManager.getGameParamValue("mainSkillUnlock"),t=!1,a=0;a<e.length;a++){var n,o=e[a],s=o[0],r=o[1],c=o[2];0<=this.getFunctionData().unLockSkill.indexOf(s)||(n=!1,r<(o=i.player.instanceModule.getMaxChapter())?n=!0:o===r&&(n=i.player.instanceModule.getChapterMaxLevel(o)>=c),n&&(this.getFunctionData().unLockSkill.push(s),t=!0))}t&&this.saveFunctionData()},getUnlockSkills:function(){return this.getFunctionData().unLockSkill}}),cc._RF.pop()},{}],GMModule:[function(e,t){"use strict";cc._RF.push(t,"e8f34sIrkpFYZGXY/tnKw/f","GMModule");var i=e("Aft");cc.Class({extends:i.BaseHandler,init:function(e){this.player=e,this.skipAd=!1,this.skipTimeCheck=!1,this.unlimitedMoney=!1,this.showEnemyId=-1,this.showEnemyNum=100,this.isUseWxSpine=!1,this.isLimitAtkEnemy=!1,this.isHideEnemy=!1,this.isHideHero=!1,this.isHideTower=!1,this.inviteNum=-1,this.quitWin=!1,this.skipBattleWave=!1,this.fourSpeed=!1,this.hidePig=!1,this.hideBattleBox=!1,this.isShowTowerName=!1,this.openAllFunction=!1,this.mainTaskReward=!1,this.skipBroadCase=!1,this.noAd=!1},restoreData:function(){},loadData:function(){},gmSkipAd:function(){this.skipAd=!0},battleUnlimitedMoney:function(){this.unlimitedMoney=!0},battleShowEnemyId:function(e,t){this.showEnemyId=e,this.showEnemyNum=t,i.Logger.debug("battleShowEnemyId enemyId = "+e)},gmSetInviteNum:function(e){this.inviteNum=e},getGmInviteNum:function(){return i.config.openGM?this.inviteNum:-1},getShowEnemyId:function(){return i.config.openGM?this.showEnemyId:-1},getShowEnemyNum:function(){return i.config.openGM?this.showEnemyNum:-1},setWxTowerSpine:function(){this.isUseWxSpine=!0,i.Logger.debug("setWxTowerSpine")},isWxTowerSpine:function(){return!!i.config.openGM&&this.isUseWxSpine},setLimitAtkEnemy:function(){this.isLimitAtkEnemy=!0,i.Logger.debug("isLimitAtkEnemy")},isLimitShootEnemy:function(){return!!i.config.openGM&&this.isLimitAtkEnemy},hideEnemySpine:function(){this.isHideEnemy=!0,i.Logger.debug("hideEnemySpine")},isHideEnemySpine:function(){return!!i.config.openGM&&this.isHideEnemy},hideHeroSpine:function(){this.isHideHero=!0,i.Logger.debug("hideHeroSpine")},isHideHeroSpine:function(){return!!i.config.openGM&&this.isHideHero},hideTowerSpine:function(){this.isHideTower=!0,i.Logger.debug("hideTowerSpine")},isHideTowerSpine:function(){return!!i.config.openGM&&this.isHideTower},showTowerName:function(){this.isShowTowerName=!0},isSkipAd:function(){return!!i.config.openGM&&this.skipAd},gmSkipTimeCheck:function(){this.skipTimeCheck=!0},isSkipTimeCheck:function(){return!!i.config.openGM&&this.skipTimeCheck},isUnlimitedMoney:function(){return!!i.config.openGM&&this.unlimitedMoney},isShowBattleTowerName:function(){return!!i.config.openGM&&this.isShowTowerName},gmQuitWin:function(){this.quitWin=!0},isQuitWin:function(){return!!i.config.openGM&&this.quitWin},gmSkipBattleWave:function(){this.skipBattleWave=!0},isSkipBattleWave:function(){return!!i.config.openGM&&this.skipBattleWave},gmFourSpeed:function(){this.fourSpeed=!0},isFourSpeed:function(){return!!i.config.openGM&&this.fourSpeed},gmHidePig:function(){this.hidePig=!0},isHidePig:function(){return!!i.config.openGM&&this.hidePig},gmHideBattleBox:function(){this.hideBattleBox=!0},isHideBattleBox:function(){return!!i.config.openGM&&this.hideBattleBox},gmOpenAllFunction:function(){this.openAllFunction=!0},isOpenAllFunction:function(){return!!i.config.openGM&&this.openAllFunction},gmMainTaskReward:function(){this.mainTaskReward=!0},isMainTaskReward:function(){return!!i.config.openGM&&this.mainTaskReward},gmSkipBroadCase:function(){this.skipBroadCase=!0},isSkipBroadCase:function(){return!!i.config.openGM&&this.skipBroadCase},gmNoAd:function(){this.noAd=!0},isNoAd:function(){return!!i.config.openGM&&this.noAd}}),cc._RF.pop()},{}],GameBattleSkillAdUpPage:[function(e,t){"use strict";cc._RF.push(t,"f1a68rE64JMqJ2a5KgVmdDA","GameBattleSkillAdUpPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{skillItemRender:cc.Prefab,skillTipsItemRenderPrefab:cc.Prefab,lowSkillNode:cc.Node,highSkillNode:cc.Node},onLoadPage:function(){this.pageAnim=this.node.getComponent(cc.Animation);var e=cc.instantiate(this.skillTipsItemRenderPrefab);e.active=!1,this.node.addChild(e),this.skillTipsObj=e.getComponent("CommonSkillTipsItemRender"),(this.skillTipsObj.host=this).adButtonNode=cc.find("content/adButton",this.node),this.getButtonNode=cc.find("content/getButton",this.node)},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.SHOW_AD_OVER_SKILL_UP,function(){return e.onShowAdOver()})},showPageBegan:function(){this.groupIdList=this.data.groupIdList,this.groupId=this.groupIdList[0],i.Logger.debug("show skill Ad Up page this.data.groupIdList =",this.data.groupIdList),this.init()},showPageEnded:function(){i.ttAdManager.showGridAd(cc.find("adNode",this.node),this.getPageType())},init:function(){var e=this,t=cc.instantiate(this.skillItemRender),i=cc.instantiate(this.skillItemRender);t.parent=this.lowSkillNode,i.parent=this.highSkillNode,t=t.getComponent("GameBattleSkillItemRender"),i=i.getComponent("GameBattleSkillItemRender"),t.initData(this.groupId,!0,!1),i.initData(this.groupId,!0,!0),t.host=this,i.host=this,i.playEffect(35/60),this.adButtonNode.active=!1,this.getButtonNode.active=!1,this.pageAnim.stop(),this.pageAnim.setCurrentTime(0),this.pageAnim.play("GameBattleSkillUpgradeTipsPage"),this.pageAnim.on("finished",function(){e.adButtonNode.active=!0,e.getButtonNode.active=!0})},onChooseDone:function(e,t){i.Logger.debug("onChooseDone groupIdList = "+e);var a=e[0];i.soundsUtil.playSoundEffect("common_button_click"),i.battleScene.putInstanceSkill(a,t),i.battleScene.gameBattleUIObj.showSkillTips(a),1==e.length&&this.refreshBattle()},refreshBattle:function(){i.battleScene.checkNextWaveStartTipsShow(),i.battleScene.restoreBattleSpeedPercent()},onClickGet:function(){this.onChooseDone(this.groupIdList,!1),this.closePage()},onClickAd:function(){i.soundsUtil.playSoundEffect("common_button_click"),i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,i.GameEventType.SHOW_AD_OVER_SKILL_UP)},onShowAdOver:function(){i.BI.onEvent(i.biConstant.EVENT_TYPE_CLICK,i.biConstant.EVENT_ID_CLICK_SKILL_AD_UPGRADE,this.groupId),this.onChooseDone(this.groupIdList,!0),this.closePage()},closePageBegan:function(){this.lowSkillNode.removeAllChildren(!0),this.highSkillNode.removeAllChildren(!0),i.ttAdManager.hideGridAd()},closePageEnded:function(){i.Logger.debug("closePageEnded this.groupIdList = "+this.groupIdList),this.groupIdList.splice(0,1),0<this.groupIdList.length&&i.gameScene.showPage(i.pageConstant.PAGE_TYPE_BATTLE_SKILL_AD_UP,{groupIdList:this.groupIdList})}}),cc._RF.pop()},{}],GameBattleSkillItemRender:[function(e,t){"use strict";cc._RF.push(t,"28a8bwZgsVM0I2osSVogEBj","GameBattleSkillItemRender");var i=e("Aft");cc.Class({extends:cc.Component,properties:{battleSkillAtlas:{default:null,type:cc.SpriteAtlas}},onLoad:function(){var e=this;this.nodeEffect=this.node.getComponent(cc.Animation),this.lightNode=cc.find("light_up",this.node),this.bgSprite=cc.find("bg",this.node).getComponent(cc.Sprite),this.skillNameLabel=cc.find("skillName",this.node).getComponent(cc.Label),this.skillIconSprite=cc.find("skillIcon",this.node).getComponent(cc.Sprite),this.skillBgSprite=cc.find("skillIconBg",this.node).getComponent(cc.Sprite),this.levelLabel=cc.find("level",this.node).getComponent(cc.Label),this.angleSprite=cc.find("angle",this.node).getComponent(cc.Sprite),this.upgradeNode=cc.find("upgrade",this.node),this.attNumLabel=cc.find("number",this.upgradeNode).getComponent(cc.Label),this.recommendNode=cc.find("recommend",this.node),this.richText=cc.find("RichTextZ/RichText",this.node).getComponent(cc.RichText),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(){e.host&&e.host.skillTipsObj&&e.host.skillTipsObj.node.active&&e.host.skillTipsObj.hideNode(),e.touching=!1},this)},initData:function(e,t,a,n){this.node.stopAllActions(),this._groupId=e,this._isInAdPage=t,this.recommendNode.active=n;var o,s=i.templateManager.getTipsSkillListByGroupId(this._groupId);n=0,i.battleScene.instanceSkillMap.hasOwnProperty(this._groupId)&&(n=i.battleScene.instanceSkillMap[this._groupId].level),a&&t&&(o=s[n],n+=1),i.Logger.debug("level = "+n+" isHigh = "+a+" isInAdPage = "+t+" groupId = "+e),this.tempSkillData=s[n],i.lang.updateLabelString(this.levelLabel,[n+1]),this.lightNode.active=!t,this.richText.string=i.lang.getFormatString(this.tempSkillData.superShortDesc,[this.tempSkillData.natureList[2]/1e4*100,this.tempSkillData.triggerProbability/1e4*100,this.tempSkillData.lastTime/1e3,this.tempSkillData.natureMax/1e4*100]),this.skillNameLabel.string=i.lang.getGameText(this.tempSkillData.name),n=this.tempSkillData.icon.split("/")[1],this.skillIconSprite.spriteFrame=this.battleSkillAtlas.getSpriteFrame(n),this.skillBgSprite.spriteFrame=this.battleSkillAtlas.getSpriteFrame(this.tempSkillData.stopTipsSkillBg),this.bgSprite.spriteFrame=this.battleSkillAtlas.getSpriteFrame(this.tempSkillData.tipsSkillBg),this.tempSkillData.subscript?(this.angleSprite.node.active=!0,n=this.tempSkillData.subscript.split("/")[1],this.angleSprite.spriteFrame=this.battleSkillAtlas.getSpriteFrame(n)):this.angleSprite.node.active=!1,this.richText.node.active=t&&a,t&&a&&i.lang.updateLabelString(this.attNumLabel,[o.tipsUpgradeByAd/100]),this.canShowAd=!!this.tempSkillData.isUpgradeByAd},playEffect:function(e){this.node.opacity=1;var t=cc.delayTime(e);e=cc.callFunc(function(){this.node.opacity=255;var e=this.richText.node.active?"GameBattleSkillItemRender_levelup":"GameBattleSkillItemRender";this.nodeEffect.play(e)},this),e=cc.sequence(t,e),this.node.stopAllActions(),this.node.runAction(e)},onClickChoose:function(){this._isInAdPage||this.host.canClickChoose&&(this.host.addChooseSkill(this._groupId),this.host.selectPoint(),this.host.closePage(),i.BI.onEvent(i.biConstant.EVENT_TYPE_CLICK,i.biConstant.EVENT_ID_CLICK_SKILL_SELECT,this._groupId),this.canShowAd?i.gameScene.showPage(i.pageConstant.PAGE_TYPE_BATTLE_SKILL_AD_UP,{groupIdList:[this._groupId]}):this.host.onChooseDone([this._groupId],!1))},onTouchStart:function(){i.Logger.debug("onTouchStart"),(this.host.canClickChoose||this._isInAdPage)&&this.host.skillTipsObj&&(this.host.skillTipsObj.node.active&&this.host.skillTipsObj.hideNode(),this.touchTime=0,this.touching=!0)},onTouchEnd:function(){i.Logger.debug("onTouchEnd"),this.host&&this.host.skillTipsObj&&this.host.skillTipsObj.node.active&&this.host.skillTipsObj.hideNode(),!this._isInAdPage&&this.host.canClickChoose&&this.touching&&this.onClickChoose(),this.touching=!1},update:function(e){this.touching&&(this.touchTime+=e,.6<=this.touchTime)&&(this.touching=!1,this.touchTime=0,(e=this.node.convertToWorldSpaceAR(cc.v2(0,0))).y+=this.node.height/2,this.host.skillTipsObj.showNode(this.tempSkillData,e,i.constant.COMMON_TIPS_SKILL))}}),cc._RF.pop()},{}],GameBattleSkillPage:[function(e,t){"use strict";cc._RF.push(t,"41b44Y9jjtB2bJPXszVY6E8","GameBattleSkillPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{itemRenderPrefab:{default:null,type:cc.Prefab},skillTipsItemRenderPrefab:{default:null,type:cc.Prefab}},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.SHOW_AD_OVER_CHOOSE_SKILL,function(){return e.showAdOver()}),this.registerListener(i.GameEventType.SHOW_AD_OVER_SKILL_ALL_GET,function(){return e.showAdAllGetOver()})},onLoadPage:function(){this.skillLayout=cc.find("content/skillLayout",this.node),this.contentNode=cc.find("content",this.node),this.refreshBtnNode=cc.find("refreshButton",this.contentNode),this.allGetBtnNode=cc.find("adButton",this.contentNode),this.battleBagNode=cc.find("battle_bag",this.node),this.battleBagSke=this.battleBagNode.getComponent(sp.Skeleton),this.battleBagNode.active=!0,this.pageAnim=this.node.getComponent(cc.Animation),this.canClickChoose=!1,this.showNum=3;var e=cc.instantiate(this.skillTipsItemRenderPrefab);e.active=!1,this.node.addChild(e),this.skillTipsObj=e.getComponent("CommonSkillTipsItemRender"),(this.skillTipsObj.host=this).createItemRender()},showPageBegan:function(){this.adButtonShow=!1,this.isShowAllGet=!1,this.randomSkillTimes=i.battleScene.getRandomSkillTimes(),i.battleScene.revertBattleSpeedPercent(),this.contentNode.opacity=1,this.blackNode.opacity=1,this.battleBagNode.opacity=255,this.canClickChoose=!1,this.showSkillList=[],this.showAllSkillList=[],this.selectAllSkillList=[],this.updateItemRender(),this.refreshBtnNode.active=!1,this.allGetBtnNode.active=!1},showPageEnded:function(){this.showOpenEffect(),i.battleScene.gameTowerControlObj.hideControl(),i.battleScene.gameBattleUIObj.attrNodeObj.interruptDetail(),i.ttAdManager.showGridAd(cc.find("adNode",this.node),this.getPageType())},closePageBegan:function(){i.ttAdManager.hideGridAd()},showOpenEffect:function(){var e=this;i.soundsUtil.playSoundEffect("skill_tips_show");var t=i.battleScene.gameBattleUIObj.waveItemObjList[2],a=t.getIconWorldPosition();this.battleBagNode.position=this.node.convertToNodeSpaceAR(a),t.curWaveBoxNode.active=!1,this.battleBagSke.clearTrack(0),this.battleBagSke.setAnimation(0,"fall",!1)&&this.battleBagSke.setEventListener(function(t,a){if(t&&"fall"===(t.animation?t.animation.name:"")&&"showPageEvent"===a.data.name){e.contentNode.opacity=255,e.blackNode.opacity=255,e.battleBagNode.opacity=1,e.pageAnim.play("GameBattleSkillPage");for(var n=0;n<e.showItemObjList.length;n++)e.showItemObjList[n].playEffect(20*n/60+20/60);t=cc.delayTime(1.5),a=cc.callFunc(function(){this.canClickChoose=!0,this.refreshBtnNode.active=this.adButtonShow,this.allGetBtnNode.active=this.isShowAllGet,this.refreshBtnNode.active&&i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_SKILL_PAGE_REFRESH_AD),this.allGetBtnNode.active&&i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_SKILL_PAGE_ALL_GET_AD)},e),e.node.runAction(cc.sequence(t,a))}})},createItemRender:function(){this.itemList=[];for(var e=0;e<this.showNum;e++){var t=cc.instantiate(this.itemRenderPrefab);this.skillLayout.addChild(t),((t=t.getComponent("GameBattleSkillItemRender")).host=this).itemList.push(t)}},updateItemRender:function(e){var t,a;e&&(this.canClickChoose=!1,t=cc.delayTime(1),a=cc.callFunc(function(){this.canClickChoose=!0,this.allGetBtnNode.active=this.isRandomShowAllGet,this.allGetBtnNode.active&&i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_SKILL_PAGE_ALL_GET_AD)},this),a=cc.sequence(t,a),this.node.stopAllActions(),this.node.runAction(a)),this.showItemObjList=[],this.getRandomSkillList();for(var n=this.getRecommendId(),o=0;o<this.itemList.length;o++){var s,r=this.itemList[o];this.showSkillList.length-1>=o?(s=this.showSkillList[o],r.node.active=!0,r.initData(this.showSkillList[o],!1,!1,s==n),e&&r.playEffect(20*o/60),this.showItemObjList.push(r)):r.node.active=!1}},getRecommendId:function(){for(var e=[],t=0;t<this.showSkillList.length;t++){var a=this.showSkillList[t],n=i.battleScene.getInstanceSkill(a),o=1;n&&(o=n.level+1);var s=i.templateManager.getTipsSkillByTypeLevel(a,o);if(s){o=s.recommendValue;for(var r=0,c=0;c<s.typeList.length;c++)r+=i.battleScene.getTowerTypeNumByType(s.typeList[c]);e.push([o*(1+r),a])}}return e.length<=0?0:(e.sort(function(e,t){return t[0]-e[0]}),e[0][1])},getRandomSkillList:function(){var e,t=[],a=[],n=[],o=i.templateManager.getCanTipsSkillByChapter(i.battleScene.curChapter,this.randomSkillTimes),s=i.battleScene.getCurTowerTypeList();for(e in i.battleScene.instanceSkillMap){var r=i.battleScene.instanceSkillMap[e],c=i.templateManager.getTipsSkillListByGroupId(e);c&&(r.level<c.length||!o.hasOwnProperty(e)||delete o[e])}for(;;){var l=this.getSortGroupList(o);if(l.length<=0||a.length>=this.showNum)break;var d=i.Utils.getRandomKeyByValue(l);if(0<=this.showSkillList.indexOf(d))delete o[d];else{if(0!=this.showSkillList.length&&a.length==this.showNum-1){for(var h=!1,u=0;u<t.length;u++){var p=t[u];if(this.checkIsHighQuality(p)){h=!0;break}}if(!h&&!this.checkIsHighQuality(d)){delete o[d];continue}}(1===(l=i.templateManager.getTipsSkillListByGroupId(d)[0]).typeList.length&&0<=s.indexOf(l.typeList[0])?a:4<=l.typeList.length?n:t).push(d),delete o[d]}}var g=!1;0===this.showSkillList.length&&(g=!0),this.showSkillList=[];for(var _=0;_<this.showNum&&!(_>=a.length+t.length+n.length);_++)_<=a.length-1?(this.showSkillList.push(a[_]),this.showAllSkillList.push(a[_])):_<=a.length+n.length-1?(this.showSkillList.push(n[_-a.length]),this.showAllSkillList.push(n[_-a.length])):(this.showSkillList.push(t[_-a.length-n.length]),this.showAllSkillList.push(t[_-a.length-n.length]));g&&this.getCanAdButtonShow()},getSortGroupList:function(e){var t=[],i=Object.keys(e);i.sort(function(e,t){return parseInt(e)-parseInt(t)});for(var a=0;a<i.length;a++){var n=i[a];t.push(e[n])}return t},checkIsHighQuality:function(e){return i.Logger.debug("groupId: "+e),3<=i.templateManager.getTipsSkillListByGroupId(e)[0].quality},getCanAdButtonShow:function(){for(var e=0,t=0;t<this.showSkillList.length;t++){var a=this.showSkillList[t];e+=i.templateManager.getTipsSkillListByGroupId(a)[0].quality}this.adButtonShow=e<=i.templateManager.getGameParamValue("rlRefreshValue");var n=Math.floor(i.templateManager.getGameParamValue("rlAllSelectProbability")/100);this.isRandomShowAllGet=i.Utils.getRandomInt(1,100)<=n,this.adButtonShow||(i.battleScene.getBattleSkillAllChooseTimes()<i.templateManager.getGameParamValue("rlAllSelectDefaultShow")?(this.isShowAllGet=this.isRandomShowAllGet,this.isRandomShowAllGet?i.battleScene.resetBattleSkillAllChooseTimes():i.battleScene.addBattleSkillAllChooseTimes()):(this.isShowAllGet=!0,i.battleScene.resetBattleSkillAllChooseTimes()))},onClickAllGet:function(){this.canClickChoose&&(i.soundsUtil.playSoundEffect("common_button_click"),i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,i.GameEventType.SHOW_AD_OVER_SKILL_ALL_GET))},showAdAllGetOver:function(){if(this.canClickChoose){for(var e=[],t=i.templateManager.getGameParamValue("rlUpdateMaxNum"),a=0;a<this.itemList.length;a++){var n=this.itemList[a];n.canShowAd&&e.length<t?(e.push(n._groupId),i.Logger.debug("\u6280\u80fd\u80fd\u5347\u7ea7 curObj._groupId = "+n._groupId)):(this.onChooseDone([n._groupId],!1),i.Logger.debug("\u6280\u80fd\u4e0d\u80fd\u5347\u7ea7 \u76f4\u63a5\u83b7\u5f97 curObj._groupId = "+n._groupId)),this.addChooseSkill(n._groupId),i.BI.onEvent(i.biConstant.EVENT_TYPE_CLICK,i.biConstant.EVENT_ID_CLICK_SKILL_SELECT,n._groupId)}this.selectPoint(),0<e.length&&(i.Logger.debug("showAdList = "+e),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_BATTLE_SKILL_AD_UP,{groupIdList:e})),this.closePage()}},onClickAd:function(){this.canClickChoose&&(i.soundsUtil.playSoundEffect("common_button_click"),i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,i.GameEventType.SHOW_AD_OVER_CHOOSE_SKILL))},showAdOver:function(){this.canClickChoose&&(this.refreshBtnNode.active=!1,this.updateItemRender(!0))},onChooseDone:function(e,t){var a;this.canClickChoose&&(i.Logger.debug("onChooseDone groupIdList = "+e),a=e[0],i.soundsUtil.playSoundEffect("common_button_click"),i.battleScene.putInstanceSkill(a,t),i.battleScene.gameBattleUIObj.showSkillTips(a),1==e.length&&this.refreshBattle())},refreshBattle:function(){i.battleScene.checkNextWaveStartTipsShow(),i.battleScene.restoreBattleSpeedPercent()},addChooseSkill:function(e){this.selectAllSkillList.push(e)},selectPoint:function(){this.selectAllSkillList.length},onClickClose:function(){this.closePage()}}),cc._RF.pop()},{}],GameBattleUI:[function(e,t){"use strict";cc._RF.push(t,"ba5f3GHvStHd4FHXpJjtly6","GameBattleUI");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{iconAtlas:cc.SpriteAtlas,battleAtlas:cc.SpriteAtlas,vipAtlas:cc.SpriteAtlas,gayFriendAtlas:cc.SpriteAtlas,heroHeadPrefab:cc.Prefab,heroSkillPrefab:cc.Prefab,attributePrefab:cc.Prefab,waveItemPrefab:cc.Prefab,enemyDetailPrefab:cc.Prefab,bubblePrefab:cc.Prefab,heroDialogPrefab:cc.Prefab,gayFriendPrefab:cc.Prefab,gayFriendTipPrefab:cc.Prefab},afterLoad:function(){this.topNode=cc.find("top",this.node),this.topParentNode=cc.find("top/top",this.node),this.topLeftParentNode=cc.find("top/topLeft",this.node),this.bottomParentNode=cc.find("bottom",this.node),this.hpLabel=cc.find("top/topLeft/hp/label",this.node).getComponent(cc.Label),this.ironIconNode=cc.find("top/topLeft/iron/icon",this.node),this.ironLabel=cc.find("top/topLeft/iron/label",this.node).getComponent(cc.Label),this.waveLayoutNode=cc.find("top/top/waveParent/wavesLayout",this.node),this.boxNode=cc.find("top/topLeft/box",this.node),this.boxIconNode=cc.find("icon",this.boxNode),this.keyGrayList=[],this.keyList=[];for(var e=1;e<=3;e++){var t=cc.find("top/topLeft/box/keyGray/key"+e,this.node),a=cc.find("top/topLeft/box/key/key"+e,this.node);this.keyGrayList.push(t),this.keyList.push(a)}this.beginButtonNode=cc.find("bottom/beginButton",this.node),this.pauseButtonNode=cc.find("top/top/pauseButton",this.node),this.attMaskNode=cc.find("attMask",this.node),this.attMaskNode.active=!1,this.photographButtonNode=cc.find("top/top/photographButton",this.node),this.heroGayNode=cc.find("top/topLeft/heroAndLuckyChanceLayout",this.node),this.heroHeadLayoutNode=cc.find("top/topLeft/heroAndLuckyChanceLayout/headLayout",this.node),this.heroSkillLayoutNode=cc.find("bottom/skillLayout",this.node),this.quickenButtonNode=cc.find("bottom/quickenButton",this.node),this.speedNode2=cc.find("bottom/quickenButton/quicken1",this.node),this.quickenButtonEffect=cc.find("bottom/quickenButton/quicken1",this.node).getComponent(cc.Animation),this.quickenButtonEffect.play("battle_speedUp_newYear_close"),this.speedSprite=cc.find("quicken1/speedNum",this.quickenButtonNode).getComponent(cc.Sprite),this.waveTipsNode=cc.find("waveTips",this.node),this.waveTipsLabel=cc.find("label",this.waveTipsNode).getComponent(cc.Label),this.waveTipsNode.active=!1,this.skillTipsNode=cc.find("top/skillTips",this.node),this.skillTipsNameLabel=cc.find("label",this.skillTipsNode).getComponent(cc.Label),this.skillTipsDescLabel=cc.find("skillIntrocude",this.skillTipsNode).getComponent(cc.Label),this.skillTipsNode.active=!1,this.boxSpineNode=cc.find("boxSp",this.node),this.boxSpine=this.boxSpineNode.getComponent(sp.Skeleton),this.boxNum=0,this.waveItemObjList=[],this.buildWaveItem(),this.ironBgNode=cc.find("top/topLeft/iron/bg",this.node),this.boxBgNode=cc.find("top/topLeft/box/bg",this.node),this.flyTryNode=cc.find("flyTry",this.node),this.flyTryBgSprite=cc.find("bg",this.flyTryNode).getComponent(cc.Sprite),this.flyTryIconSprite=cc.find("icon",this.flyTryNode).getComponent(cc.Sprite),this.flyTryNode.active=!1,this.flyTryEffectNode=cc.find("effect_icon_light",this.flyTryNode),this.flyTryEffectNode.active=!1,this.vipGiftNode=cc.find("vipGift",this.node),this.vipGiftBgNode=cc.find("bg",this.vipGiftNode),this.vipGiftIconSprite=cc.find("layout/vip",this.vipGiftNode).getComponent(cc.Sprite),this.vipGiftDescNode=cc.find("layout/label1",this.vipGiftNode),this.vipGiftDescLabel=this.vipGiftDescNode.getComponent(cc.Label),this.vipGiftNumLabel=cc.find("layout/label2",this.vipGiftNode).getComponent(cc.Label),this.vipGiftNode.active=!1,this.gayFriendLayoutNode=cc.find("bottom/luckyChanceLayout",this.node),this.gayFriendTriggerTipsNode=cc.find("luckyChance",this.node),this.gayFriendTriggerTipsSprite=cc.find("font",this.gayFriendTriggerTipsNode).getComponent(cc.Sprite),this.gayFriendTriggerTipsLabel1=cc.find("label",this.gayFriendTriggerTipsNode).getComponent(cc.Label),this.gayFriendTriggerTipsLabel2=cc.find("label1",this.gayFriendTriggerTipsNode).getComponent(cc.Label),this.gayFriendTriggerTipsLabel3=cc.find("label2",this.gayFriendTriggerTipsNode).getComponent(cc.Label),this.gayFriendTriggerTipsLabelList=[this.gayFriendTriggerTipsLabel1,this.gayFriendTriggerTipsLabel2,this.gayFriendTriggerTipsLabel3],this.gayFriendTriggerTipsNode.active=!1,this.topLeftNodeList=[{overlap:this.ironBgNode},{overlap:this.boxBgNode},{overlap:this.heroGayNode,isTop:!0}],this.topNodeList=[{overlap:this.waveLayoutNode}],this.bottomNodeList=[{overlap:this.heroSkillLayoutNode}],1280<cc.winSize.height&&cc.sys.os===cc.sys.OS_ANDROID&&(this.pauseButtonNode.y=-40),i.gameScene.isIphoneX()&&(i.Utils.addNodeTopSpace(this.topNode),this.topNode.getComponent(cc.Widget).updateAlignment(),i.Utils.addNodeBottomSpace(this.heroSkillLayoutNode,20)),this.lastClickSpeedSecond=0},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.SHOW_AD_OVER_SECOND_HERO,function(){return e.showAdOverAddHero()}),this.registerListener(i.GameEventType.SKIP_NEW_GUIDE,function(){return e.skipGuide()})},setKeyNum:function(e){for(var t=0;t<this.keyList.length;t++){var i=t<e;this.keyGrayList[t].active=!i,this.keyList[t].active=i}},setBoxNodeActive:function(e){this.boxNode.active=e&&i.player.commonModule.getTodayCanPopUpBattleBoxCount()&&!i.battleScene.showOverBoxPage&&i.battleScene.isDropBoxKey,i.player.gmModule.isHideBattleBox()&&(this.boxNode.active=!1)},start:function(){},initData:function(){this.cleanLayout(),this.speedTimesList=i.player.vipModule.getVipSpeedDoubleList(!1),this.speedSprite.spriteFrame=this.battleAtlas.getSpriteFrame("speed_01"),this.updateHpLabel(!1),this.updateIronLabel(!1),this.updateBoxLabel(!1),this.beginButtonNode.active=!0,this.waveLayoutNode.active=!1,this.initHeroDetail(),this.initEnemyDetail(),this.initGayFriendItem(),this.heroSkillLayoutNode.active=!1,this.quickenButtonNode.active=!1;var e=(e=1==i.battleScene.curChapter&&1==i.battleScene.curInstance&&i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_INSTANCE_1))||1==i.battleScene.curChapter&&2==i.battleScene.curInstance&&i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_INSTANCE_2);this.isGuideBattle=e,this.pauseButtonNode.active=!e,this.photographButtonNode.active=!1,this.setBoxNodeActive(!e),this.detailShow=!1,this.initBoxSpine(),this.initQuickenButtonBg(),this.battleStartBubbleObj&&(this.battleStartBubbleObj.closeOtherBubble(),this.battleStartBubbleObj=null)},skipGuide:function(){this.pauseButtonNode.active=!0},initQuickenButtonBg:function(){},checkBoxBubble:function(){if(i.battleScene.curChapter==i.constant.YEAR_MONSTER_CHAPTER_ID)return!1;var e;i.battleScene.isDropBoxKey&&i.player.commonModule.getBubbleIsNotShow(i.constant.BUBBLE_TYPE_BATTLE_BOX)&&(this.boxBubbleObj=this.buildOneBubble(),e=this.boxNode.convertToWorldSpaceAR(cc.v2(0,0)),(e=this.node.convertToNodeSpaceAR(e)).y-=this.boxNode.height/2,this.boxBubbleObj.node.position=e,this.boxBubbleObj.node.active=!0,this.boxBubbleObj.initOtherBubble(i.constant.BUBBLE_TYPE_BATTLE_BOX),i.player.commonModule.putAreadyShowBubble(i.constant.BUBBLE_TYPE_BATTLE_BOX),i.gameScene.bubbleNodeMap||(i.gameScene.bubbleNodeMap={}),i.gameScene.bubbleNodeMap[i.constant.BUBBLE_TYPE_BATTLE_BOX]=this.boxBubbleObj.node)},showBattleStartBubble:function(){var e=this;this.battleStartBubbleObj=this.buildOneBubble();var t=this.beginButtonNode.convertToWorldSpaceAR(cc.v2(0,0)),a=this.node.convertToNodeSpaceAR(t);a.y+=this.beginButtonNode.height/2,this.battleStartBubbleObj.node.position=a,this.battleStartBubbleObj.node.active=!0,this.battleStartBubbleObj.initOtherBubble(i.constant.BUBBLE_TYPE_BATTLE_START,9999999,function(){e.battleStartBubbleObj=null}),t=cc.scaleTo(.1,1.1),a=cc.scaleTo(.1,1),a=cc.sequence(t,a),this.battleStartBubbleObj.node.stopAllActions(),this.battleStartBubbleObj.node.runAction(a)},showSpeedBubble:function(e){var t=this;this.speedBubbleObj=this.buildOneBubble();var a=this.quickenButtonNode.convertToWorldSpaceAR(cc.v2(0,0));(a=this.node.convertToNodeSpaceAR(a)).y+=this.quickenButtonNode.height/2,this.speedBubbleObj.node.position=a,this.speedBubbleObj.node.active=!0,a=e==i.constant.BUBBLE_TYPE_BATTLE_SPEED_TRY?9999999:5,this.speedBubbleObj.initOtherBubble(e,a,function(){t.speedBubbleObj=null})},checkSpeedBubble:function(e){if(0<this.speedTimesList.length){var t=i.constant.BUBBLE_TYPE_BATTLE_SPEED;if(!i.player.commonModule.getBubbleIsNotShow(i.constant.BUBBLE_TYPE_BATTLE_SPEED)){if(!e||!i.player.commonModule.getBubbleIsNotShow(i.constant.BUBBLE_TYPE_BATTLE_SPEED_TWO))return;t=i.constant.BUBBLE_TYPE_BATTLE_SPEED_TWO}this.showSpeedBubble(t),i.player.commonModule.putAreadyShowBubble(t)}},buildOneBubble:function(){var e=cc.instantiate(this.bubblePrefab);return this.node.addChild(e),e.active=!1,e.getComponent("GuideBubble")},showHeroDialog:function(e,t,i){var a,n;this.heroDialog||(this.heroDialog=cc.instantiate(this.heroDialogPrefab),this.node.addChild(this.heroDialog),this.heroDialog.active=!1),this.heroDialog.active||(n=cc.find("confirm/textLabelSame",this.heroDialog),a=cc.find("confirm/textLabelDifferent",this.heroDialog),n.active=t,a.active=!t,n=this.heroDialog.parent.convertToNodeSpaceAR(i),this.heroDialog.active=!0,this.heroDialog.scale=0,this.heroDialog.setPosition(cc.v2(n.x+60,n.y)),a=cc.scaleTo(.1,1.1),t=cc.scaleTo(.1,1),i=cc.delayTime(2),n=cc.callFunc(function(){this.heroDialog.active=!1},this),n=cc.sequence(a,t,i,n),this.heroDialog.stopAllActions(),this.heroDialog.runAction(n))},hideGayFriendTips:function(){this.gayFriendTips&&(this.curGayFriendGroupId=null,this.gayFriendTips.active=!1)},showGayFriendTips:function(e,t){if(i.battleScene.setCurEnemyObj(null),i.battleScene.setCurSoldierObj(null),this.gayFriendTips||(this.gayFriendTips=cc.instantiate(this.gayFriendTipPrefab),this.node.addChild(this.gayFriendTips),this.gayFriendTips.active=!1),this.curGayFriendGroupId==e)return this.curGayFriendGroupId=null,void this.hideGayFriendTips();this.curGayFriendGroupId=e;for(var a,n,o=cc.find("name",this.gayFriendTips).getComponent(cc.Label),s=[cc.find("label1",this.gayFriendTips).getComponent(cc.Label),cc.find("label2",this.gayFriendTips).getComponent(cc.Label),cc.find("label3",this.gayFriendTips).getComponent(cc.Label)],r=i.player.heroModule.getRestrainSkillList(e),c=0;c<s.length;c++)c<r.length?(a=i.templateManager.getHeroRestrainById(r[c]),0===c&&(o.string=i.lang.getGameText(a.name)),s[c].node.active=!0,n=i.player.heroModule.getGayFriendSkillDescArgs(a.levelOneSkill),s[c].string=i.lang.getArgGameText(a.skillDesc,n)):s[c].node.active=!1;this.gayFriendTips.position=this.node.convertToNodeSpaceAR(t),this.gayFriendTips.y+=40,this.gayFriendTips.active=!0,this.gayFriendTips.scale=0;var l=cc.scaleTo(.1,1.1),d=cc.scaleTo(.1,1);e=cc.delayTime(2),t=cc.callFunc(function(){this.gayFriendTips.active=!1,this.curGayFriendGroupId=null},this),t=cc.sequence(l,d,e,t),this.gayFriendTips.stopAllActions(),this.gayFriendTips.runAction(t)},hideGayFriendTriggerTips:function(){this.gayFriendTriggerTipsNode.stopAllActions(),this.gayFriendTriggerTipsNode.active=!1},showGayFriendTriggerTips:function(e){if(e){for(var t=[],a=0;a<e.length;a++){var n,o=e[a],s=i.templateManager.getHeroRestrainById(o);s&&(n=s.groupId,i.player.heroModule.getFightGayFriend()!=n&&i.player.heroModule.getFightAdGayFriend()!=n||0==s.isRepeat&&i.battleScene.checkAreadyShowGayFriendTips(o)||(0==s.isRepeat&&i.battleScene.putAreadyShowGayFriendTips(o),t.push(o)))}if(!(t.length<=0)){this.gayFriendTriggerTipsNode.active=!0;for(var r=null,c=this.gayFriendTriggerTipsNode.scale=0;c<this.gayFriendTriggerTipsLabelList.length;c++){var l=c<t.length;this.gayFriendTriggerTipsLabelList[c].node.active=l;var d=i.templateManager.getHeroRestrainById(t[c]);l&&(l=i.lang.getArgGameText(d.skillShowDesc,i.player.heroModule.getAttrName(d.levelOneSkill[0])),this.gayFriendTriggerTipsLabelList[c].string=l),r=r||this.gayFriendAtlas.getSpriteFrame(d.titlePic)}this.gayFriendTriggerTipsSprite.spriteFrame=r;var h=cc.scaleTo(.1,1.1),u=cc.scaleTo(.1,1),p=cc.delayTime(2),g=cc.callFunc(function(){this.gayFriendTriggerTipsNode.active=!1},this);g=cc.sequence(h,u,p,g),this.gayFriendTriggerTipsNode.stopAllActions(),this.gayFriendTriggerTipsNode.runAction(g)}}},checkShowRestrainTips:function(e,t,a,n){if(n&&0<n.length)i.Logger.debug("checkShowRestrainTips restrainIdList = "+n),this.showGayFriendTriggerTipsByPos(n,a);else for(var o=0;o<i.battleScene.curRestrainIdList.length;o++){var s=i.battleScene.curRestrainIdList[o],r=(c=i.templateManager.getHeroRestrainById(s)).groupId,c=c.subType;if(e==r&&c==t){this.showGayFriendTriggerTipsByPos([s],a);break}}},showGayFriendTriggerTipsByPos:function(e,t){if(t.x<-250?t.x=-250:250<t.x&&(t.x=250),e){for(var a=[],n=0;n<e.length;n++){var o,s=e[n],r=i.templateManager.getHeroRestrainById(s);r&&(o=r.groupId,i.player.heroModule.getFightGayFriend()!=o&&i.player.heroModule.getFightAdGayFriend()!=o||0==r.isRepeat&&i.battleScene.checkAreadyShowGayFriendTips(s)||(0==r.isRepeat&&i.battleScene.putAreadyShowGayFriendTips(s),a.push(s)))}if(0<a.length){for(var c=[],l=null,d=0;d<a.length;d++){var h=i.templateManager.getHeroRestrainById(a[d]),u=i.lang.getArgGameText(h.skillShowDesc,i.player.heroModule.getAttrName(h.levelOneSkill[0]));c.push(u),l=l||this.gayFriendAtlas.getSpriteFrame(h.titlePic)}t={pos:t,desc:c,camp:i.constant.SKILL_CAMP_RESTRAIN,frame:l},i.battleScene.createSkillTipsByData(t)}}},initBoxSpine:function(){var e=this;this.boxSpineNode.active=!1,this.boxSpine.clearTrack(0),this.boxSpine.setCompleteListener(function(t){"fall"===(t.animation?t.animation.name:"")&&(e.boxSpine.clearTrack(0),e.boxSpineNode.active=!1)}),this.boxSpine.setEventListener(function(e,t){e&&"fall"===(e.animation?e.animation.name:"")&&"showPageEvent"===t.data.name&&(i.gameScene.showPage(i.pageConstant.PAGE_TYPE_BATTLE_OPEN_BOX),i.gameScene.hideGuideLimit())})},cleanLayout:function(){for(var e=this.heroHeadLayoutNode.children.length-1;0<=e;e--)this.heroHeadLayoutNode.children[e].destroy();for(var t=this.heroSkillLayoutNode.children.length-1;0<=t;t--)this.heroSkillLayoutNode.children[t].destroy();for(var i=this.gayFriendLayoutNode.children.length-1;0<=i;i--)this.gayFriendLayoutNode.children[i].destroy();this.boxNum=0},buildWaveItem:function(){for(var e=0;e<6;e++){var t=cc.instantiate(this.waveItemPrefab);this.waveLayoutNode.addChild(t),(t=t.getComponent("WaveItemRender")).hideAllItem(),this.waveItemObjList.push(t)}},onClickCapture:function(){i.gameScene.showPage(i.pageConstant.PAGE_TYPE_CAPTURE)},onClickAdAddHero:function(){i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,i.GameEventType.SHOW_AD_OVER_SECOND_HERO)},showAdOverAddHero:function(){i.gameScene.showPage(i.pageConstant.PAGE_TYPE_SECOND_HERO_CHOOSE)},checkSecondHeroConfirm:function(){var e=i.battleScene.curWaveData.secondHero||-1,t=i.battleScene.getLastHp(),a=0<e&&t<=e;t=i.player.heroModule.getAlreadyHaveHeroNum(),t=(e=i.battleScene.gameHeroObjList.length)<t,0<i.player.vipModule.getVipOutVanNum()&&a&&t&&e<2?(i.gameScene.showPage(i.pageConstant.PAGE_TYPE_SECOND_HERO_CONFIRM),i.battleScene.isCanShowSecondHero=!1):this.playInstanceTipAnim()},updateWaveItem:function(e){e||this.playInstanceTipAnim(),this.waveLayoutNode.active=!0;for(var t=0;t<this.waveItemObjList.length;t++)this.waveItemObjList[t].initData(t);this.waveLayoutNode.getComponent(cc.Layout).updateLayout(),e=this.waveItemObjList[2],this.waveLayoutNode.x=-e.node.x},initGayFriendItem:function(){this.gayFriendLayoutNode.active=!0;for(var e=i.player.heroModule.getAllBattleGayFriend(),t=0;t<e.length;t++){var a=e[t],n=cc.instantiate(this.gayFriendPrefab);this.gayFriendLayoutNode.addChild(n),n.getComponent("BattleGayFriendItemRender").initData(a)}this.gayFriendLayoutNode.active=!1},initHeroDetail:function(){var e,t=i.battleScene.gameHeroObjList;this.attrNodeObj||(e=cc.instantiate(this.attributePrefab),this.attrNodeObj=e.getComponent("AttributeItem"),(this.attrNodeObj.host=this).attMaskNode.addChild(e)),this.attrNodeObj.node.active=!1,this.attrNodeObj.node.x=-this.attrNodeObj.node.width,this.skillObjList=[];for(var a=i.player.skillModule.getBattleUseSkillList(),n=0;n<a.length;n++){var o=(c=a[n]).skillId,s=c.level,r=i.templateManager.getHeroSkillLevelData(o,s),c=i.templateManager.getHeroSkillDataById(r.relationSkillId);(s=(o=cc.instantiate(this.heroSkillPrefab)).getComponent("Skill")).host=this,s.init(c,n),s.setSkillLevelData(r),this.heroSkillLayoutNode.addChild(o),this.skillObjList.push(s)}if(!(t.length<0)){this.headObjList=[];for(var l=0;l<t.length;l++){var d=t[l];this.createHeroHead(d,l)}}},getCurSkillObj:function(){for(var e=null,t=0;t<this.skillObjList.length;t++){var a=this.skillObjList[t];if(a.data.groupID===i.battleScene.curSkillGroupId){e=a;break}}return e},initEnemyDetail:function(){var e;this.enemyInfoNodeObj||(e=cc.instantiate(this.enemyDetailPrefab),this.enemyInfoNodeObj=e.getComponent("EnemyDetailItem"),this.node.addChild(e),this.enemyInfoNodeObj.host=this),this.enemyInfoNodeObj.node.active=!1,this.enemyInfoNodeObj.node.x=-this.enemyInfoNodeObj.node.width},createHeroHead:function(e,t){var a=cc.instantiate(this.heroHeadPrefab),n=a.getComponent("Head");n.host=this,n.init(e,t),this.heroHeadLayoutNode.addChild(a),this.headObjList.push(n),1===i.battleScene.curChapter&&2===i.battleScene.curInstance&&i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_INSTANCE_2)&&(a.active=!1),this.heroHeadLayoutNode.getComponent(cc.Layout).updateLayout()},updateHeroDetailHp:function(e,t){this.attrNodeObj.updateHp(e,t)},showDetail:function(e,t,i,a,n){var o;this.attrNodeObj.node.active=!0,this.attMaskNode.active=!0,o=i?this.node.convertToNodeSpaceAR(e):(o=this.heroSkillLayoutNode.convertToWorldSpaceAR(cc.v2(0,0)),this.node.convertToNodeSpaceAR(o).add(cc.v2(-20,this.heroSkillLayoutNode.height))),this.attMaskNode.position=o.add(cc.v2(this.attMaskNode.width/2,0)),this.attrNodeObj.showDetails(t,i,a,n)},hideDetail:function(){this.attrNodeObj.hideDetails()},hideDetailOver:function(){this.attrNodeObj.node.active=!1,this.attMaskNode.active=!1},showEnemyDetail:function(){this.enemyInfoNodeObj.node.active=!0;var e=this.heroGayNode.convertToWorldSpaceAR(cc.v2(0,0));e=(e=this.node.convertToNodeSpaceAR(e)).add(cc.v2(0,-this.heroGayNode.height)),this.enemyInfoNodeObj.node.position=e,this.enemyInfoNodeObj.showDetails()},hideEnemyDetail:function(){this.enemyInfoNodeObj.hideDetails()},onClickChoose:function(e){this.attrNodeObj.onClickChoose(e)},cancelChoose:function(){this.attrNodeObj.cancelChoose()},countCDSkill:function(){this.curSkillObj&&(this.curSkillObj.intoCd(),this.curSkillObj=null)},updateHpLabel:function(e){e&&(this.hpLabel.node.parent.stopAllActions(),this.hpLabel.node.parent.scale=1,cc.tween(this.hpLabel.node.parent).by(.2,{scale:.1}).by(.2,{scale:-.1}).by(.2,{scale:.1}).by(.2,{scale:-.1}).start()),this.hpLabel.string=i.battleScene.getLastHp()},updateIronLabel:function(e){var t=this;e?(this.ironIconNode.stopAllActions(),this.ironIconNode.scale=1,cc.tween(this.ironIconNode).by(.1,{scale:.3}).call(function(){t.ironLabel.string=i.battleScene.getIron(),t.ironLabel.node.stopAllActions(),t.ironLabel.node.scale=1,cc.tween(t.ironLabel.node).by(.1,{scale:.5}).by(.1,{scale:-.5}).start()}).by(.2,{scale:-.3}).start(),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_TOWER_UP_ITEM,{}),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_TOWER_BUILD_ITEM,{})):this.ironLabel.string=i.battleScene.getIron()},checkVipAddIron:function(e,t){var a,n,o,s;e<=0||(o=i.player.vipModule.getCurVipCfg(),this.vipGiftNode.active=!0,this.vipGiftBgNode.active=!0,this.vipGiftDescNode.active=!0,this.vipGiftIconSprite.node.active=!t,this.vipGiftNode.scale=0,this.vipGiftIconSprite.spriteFrame=this.vipAtlas.getSpriteFrame(o.vipIconSmall),i.lang.updateLabelString(this.vipGiftNumLabel,[i.Utils.formatNumberForLabel(e)]),a=i.lang.getGameText(i.GameTextCode[1632]),t&&(a=i.lang.getGameText(i.GameTextCode[1759])),this.vipGiftDescLabel.string=a,n=this.ironLabel.node.convertToWorldSpaceAR(cc.v2(0,0)),s=this.node.convertToNodeSpaceAR(n),this.vipGiftNode.stopAllActions(),this.vipGiftNode.setPosition(cc.v2(0,0)),o=cc.scaleTo(.2,1),t=cc.spawn(cc.fadeIn(.2),o,cc.moveTo(.2,cc.v2(0,100))),a=cc.delayTime(1),n=cc.callFunc(function(){this.vipGiftBgNode.active=!1,this.vipGiftDescNode.active=!1,this.vipGiftIconSprite.node.active=!1},this),o=cc.moveTo(.5,s),s=cc.callFunc(function(){i.battleScene.addIron(e),this.vipGiftNode.active=!1},this),s=cc.sequence(t,a,n,o,s),this.vipGiftNode.runAction(s))},updateBoxLabel:function(e){e&&(this.boxNode.stopAllActions(),this.boxNode.scale=1,cc.tween(this.boxNode).by(.2,{scale:.1}).by(.2,{scale:-.1}).by(.2,{scale:.1}).by(.2,{scale:-.1}).start(),this.boxNum++,i.soundsUtil.playSoundEffect("key_drop")),this.setKeyNum(this.boxNum)},showAdOverBox:function(){this.boxNum||(this.boxNum=0),this.boxNum+=3,this.setKeyNum(this.boxNum)},useBox:function(){return!(this.boxNum<=0||(this.boxNum--,this.updateBoxLabel(!1),0))},resetBox:function(){this.boxNum=0,this.setKeyNum(this.boxNum),this.setBoxNodeActive(!1)},getCanDropBox:function(){return this.boxNum<3&&i.player.commonModule.getTodayCanPopUpBattleBoxCount()&&this.boxNode.active},onClickBox:function(){i.gameScene.showGuideLimit(),this.boxSpineNode.active=!0,this.boxSpineNode.setPosition(this.node.convertToNodeSpaceAR(this.boxIconNode.convertToWorldSpaceAR(cc.v2(0,0)))),this.boxSpine.setAnimation(0,"fall",!1),i.player.commonModule.addTodayPopUpBattleBoxCount(),this.setBoxNodeActive(!1),i.battleScene.gameBattleUIObj.hideGayFriendTriggerTips(),i.battleScene.gameBattleUIObj.hideGayFriendTips()},onClickPause:function(){this.clickCloseNode(),this.attrNodeObj.interruptDetail(),i.soundsUtil.playSoundEffect("common_button_click"),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_PAUSE,{})},onClickGameStart:function(){i.soundsUtil.playSoundEffect("common_button_click"),this.updateWaveItem(),i.gameScene.removeBubble(i.constant.GUIDE_TYPE_INSTANCE_4_6),i.battleScene.setGameState(i.constant.GAME_STATE_START),this.beginButtonNode.active=!1,this.gayFriendLayoutNode.active=!0;var e=i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_INSTANCE_1);if(e=1==i.battleScene.curChapter&&i.battleScene.curInstance<=1&&e,this.quickenButtonNode.active=!e,this.heroSkillLayoutNode.active=!0,this.clickCloseNode(),this.attrNodeObj.hideDetails(),i.battleScene.gameTowerList)for(var t=0;t<i.battleScene.gameTowerList.length;t++)i.battleScene.gameTowerList[t].upgradeTowerTime=0;this.boxBubbleObj&&(this.boxBubbleObj.closeOtherBubble(),this.boxBubbleObj=null,i.gameScene.bubbleNodeMap&&i.gameScene.bubbleNodeMap[i.constant.BUBBLE_TYPE_BATTLE_BOX]&&(i.gameScene.bubbleNodeMap[i.constant.BUBBLE_TYPE_BATTLE_BOX]=null)),this.adAddHeroBubbleObj&&(this.adAddHeroBubbleObj.closeOtherBubble(),this.adAddHeroBubbleObj=null),this.checkSpeedBubble(),i.battleScene.checkPlotGroup(i.constant.PLOT_TYPE_START),i.battleScene.gameBattleUIObj.hideGayFriendTriggerTips(),i.battleScene.gameBattleUIObj.hideGayFriendTips(),e=i.battleScene.getBattleHeroRestrainList(),i.battleScene.gameBattleUIObj.showGayFriendTriggerTips(e)},onClickKillAll:function(){if(i.battleScene.gameBattleUIObj.hideGayFriendTriggerTips(),i.battleScene.gameBattleUIObj.hideGayFriendTips(),i.player.gmModule.isSkipBattleWave()){var e=i.battleScene.enemyList;if(e)for(var t=0;t<e.length;t++){var a=e[t].getComponent("GameEnemy");a.updateEnemyHp(-a.maxHp)}}},checkSpeedTry:function(){var e=this.speedTimesList.length<=0,t=1==i.battleScene.curChapter&&5==i.battleScene.curInstance,a=i.player.guideModule.getTrySpeedNum()<=0,n=4==i.battleScene.curWaveIndex;e&&t&&n&&a&&(i.gameScene.showPage(i.pageConstant.PAGE_TYPE_SPEED_TRY),i.player.guideModule.addTrySpeedNum())},onClickSpeed:function(){this.speedBubbleObj&&(this.speedBubbleObj.closeOtherBubble(),this.speedBubbleObj=null),this.clickCloseNode();var e,t=i.battleScene.battleSpeedPercent;i.player.gmModule.isFourSpeed()?i.battleScene.setBattleSpeedPercent(t=1<t?1:5):0!=this.speedTimesList.length?((e=this.speedTimesList.indexOf(t))<this.speedTimesList.length-1?(t=this.speedTimesList[e+1],2==this.speedTimesList.length&&0<i.player.vipModule.getVipSpeedDoubleList(!1).length&&this.checkSpeedBubble(!0)):t=1,i.battleScene.setBattleSpeedPercent(t),1<t&&5<=i.timeUtil.getSecond()-this.lastClickSpeedSecond&&(i.BI.onEvent(i.biConstant.EVENT_TYPE_BATTLE,i.biConstant.EVENT_ID_BATTLE_SPEED,i.player.instanceModule.getTempInstanceId(i.battleScene.curChapter,i.battleScene.curInstance)),this.lastClickSpeedSecond=i.timeUtil.getSecond()),this.attrNodeObj.hideDetails()):i.battleScene.curState!==i.constant.GAME_STATE_OVER&&i.gameScene.showPage(i.pageConstant.PAGE_TYPE_SPEED_AD_TRY)},clickCloseNode:function(){i.battleScene.gameTowerControlObj.hideControl(),i.battleScene.setCurEnemyObj(null),i.battleScene.setCurSoldierObj(null),i.battleScene.gameBattleUIObj.hideGayFriendTriggerTips(),i.battleScene.gameBattleUIObj.hideGayFriendTips()},setBattleSpeedPercent:function(e){this.speedNode2.active=!0,this.speedSprite.spriteFrame=this.battleAtlas.getSpriteFrame(1==e?"speed_01":1.5==e?"speed_02":2==e?"speed_03":"speed_04"),1!=e?this.quickenButtonEffect.play("battle_speedUp_newYear"):this.quickenButtonEffect.play("battle_speedUp_newYear_close")},hideTopLeftNode:function(){this.topLeftParentNode.active=!1,this.boxBubbleObj&&this.boxBubbleObj.node.active&&(this.boxBubbleObj.node.active=!1),this.adAddHeroBubbleObj&&this.adAddHeroBubbleObj.node.active&&(this.adAddHeroBubbleObj=null)},showTopLeftNode:function(){this.topLeftParentNode.active=!0},hideTopNode:function(){this.topParentNode.active=!1},showTopNode:function(){this.topParentNode.active=!0},hideBottomNode:function(){this.bottomParentNode.active=!1,this.speedBubbleObj&&this.speedBubbleObj.node.active&&(this.speedBubbleObj.node.active=!1),this.battleStartBubbleObj&&this.battleStartBubbleObj.node.active&&(this.battleStartBubbleObj.node.active=!1)},showBottomNode:function(){this.bottomParentNode.active=!0},showAllUiNode:function(){this.showTopLeftNode(),this.showTopNode(),this.showBottomNode()},checkUiNodeHide:function(e){var t=e.convertToWorldSpaceAR(cc.v2(0,0));if(t=this.node.convertToNodeSpaceAR(t),this.checkTopNodeOverlap(e,t))return this.hideTopLeftNode(),void this.hideTopNode();this.showTopLeftNode(),this.showTopNode(),this.checkTopLeftNodeOverlap(e,t)?this.hideTopLeftNode():(this.showTopLeftNode(),this.checkBottomNodeOverlap(e,t)?this.hideBottomNode():this.showBottomNode())},checkTopNodeOverlap:function(e,t){for(var i=!1,a=0;a<this.topNodeList.length;a++){var n=this.topNodeList[a].overlap,o=this.getNodeRootPosition(n),s=n.height/2;if(n=e.height/2,o.y-t.y<s+n){i=!0;break}}return i},checkTopLeftNodeOverlap:function(e,t){for(var i=!1,a=0;a<this.topLeftNodeList.length;a++){var n=this.topLeftNodeList[a],o=n.overlap,s=this.getNodeRootPosition(o),r=o.width/2,c=o.height/2,l=e.width/2,d=e.height/2;if(n.isTop&&(c=o.height),d=s.y-t.y<c+d,l=t.x-s.x<r+l,d&&l){i=!0;break}}return i},checkBottomNodeOverlap:function(e,t){for(var i=!1,a=0;a<this.bottomNodeList.length;a++){var n=this.bottomNodeList[a].overlap,o=this.getNodeRootPosition(n),s=n.height/2;if(n=e.height/2,t.y-o.y<s+n){i=!0;break}}return i},getNodeRootPosition:function(e){return e=e.convertToWorldSpaceAR(cc.v2(0,0)),this.node.convertToNodeSpaceAR(e)},playInstanceTipAnim:function(){var e=this;this.waveTipsNode.active=!0;var t=i.battleScene.curWaveIndex+1,a=i.battleScene.waveDataList.length;i.lang.updateLabelString(this.waveTipsLabel,[t,a]),this.waveTipsNode.stopAllActions(),this.waveTipsNode.x=-this.waveTipsNode.width,t=this.waveTipsNode.y,a=this.waveTipsNode.width,t=[cc.moveTo(.3,cc.v2(100,t)),cc.moveTo(.1,cc.v2(0,t)),cc.delayTime(1),cc.moveTo(.1,cc.v2(-100,t)),cc.moveTo(.15,cc.v2(a,t)),cc.delayTime(.2),cc.callFunc(function(){e.waveTipsNode.active=!1,i.battleScene.checkShowTryHero(),i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_INSTANCE_1_e_2)&&i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_1_e_2)})],this.waveTipsNode.runAction(cc.sequence(t))},showSkillTips:function(e){var t,a,n,o,s;e&&(n=1,(a=i.battleScene.getInstanceSkill(e))&&(n=a.level),(o=i.templateManager.getTipsSkillByTypeLevel(e,n))&&(this.skillTipsNode.active=!0,this.skillTipsNode.opacity=1,this.skillTipsNode.scale=0,this.skillTipsNameLabel.string=i.lang.getGameText(o.name),this.skillTipsDescLabel.string=i.lang.getArgGameText(o.shortDesc,[o.natureList[2]/1e4*100,o.triggerProbability/1e4*100,o.lastTime/1e3,o.natureMax/1e4*100]),s="#4fff26",2==o.quality?s="#26d4ff":3==o.quality&&(s="#be58ff"),this.skillTipsNameLabel.node.color=cc.color(s),t=cc.fadeIn(.2),a=cc.scaleTo(.1,1.2,1.2),e=cc.scaleTo(.1,1,1),n=cc.delayTime(i.templateManager.getGameParamValue("tipsSkillStayTimes")/1e3),o=cc.fadeOut(.2),s=cc.callFunc(function(){this.active=!1},this.skillTipsNode),s=cc.sequence(t,a,e,n,o,s),this.skillTipsNode.stopAllActions(),this.skillTipsNode.runAction(s)))},getTopContentHeight:function(){return this.waveLayoutNode.convertToWorldSpaceAR(cc.v2(0,0)).y-this.waveLayoutNode.getContentSize().height/2},getLeftContentWeight:function(){return this.ironBgNode.convertToWorldSpaceAR(cc.v2(0,0)).x+this.ironBgNode.getContentSize().width/2},runFlyTryEffect:function(e,t,a){if(e){var n=i.templateManager.getSoldierDataById(e);if(n){var o=i.templateManager.getTowerDataByHeroId(e);if(o){var s=i.battleScene.getMapInitTower(o.typeID,t);if(s&&s.node){this.flyTryBgSprite.node.active=!0;var r="Head_Bg_Green";switch(i.player.heroModule.getHeroQuality(e)){case i.constant.QUALITY_TYPE_2:r="Head_Bg_Blue";break;case i.constant.QUALITY_TYPE_3:r="Head_Bg_Purple";break;case i.constant.QUALITY_TYPE_4:r="Head_Bg_Orange"}this.flyTryBgSprite.spriteFrame=this.battleAtlas.getSpriteFrame(r);var c=n.icon.split("/")[1];this.flyTryIconSprite.spriteFrame=this.iconAtlas.getSpriteFrame(c),this.flyTryNode.active=!0,this.flyTryNode.scale=.8,this.flyTryEffectNode.active=!0,this.flyTryEffectNode.getComponent(cc.Animation).play("effect_box_light"),o=s.node.convertToWorldSpaceAR(cc.v2(0,0)),t=this.node.convertToNodeSpaceAR(o),this.flyTryNode.position=cc.v2(0,0),n=cc.delayTime(1),c=cc.spawn(cc.moveTo(.3,t.add(cc.v2(0,10))),cc.scaleTo(.3,.3,.3)),o=cc.callFunc(function(){this.flyTryNode.active=!1,s.showHeroHead(e,a),i.battleScene.updateTowerArrow()},this),cc.spawn(cc.moveTo(.3,t.add(cc.v2(0,30))),cc.scaleTo(.3,1,1)),o=cc.sequence(n,c,o),this.flyTryNode.stopAllActions(),this.flyTryNode.runAction(o)}}}}},setSpeedTry:function(e){i.Logger.debug("setSpeedTry"),this.speedTimesList=i.player.vipModule.getVipSpeedDoubleList(!0,e),this.initQuickenButtonBg()},runFlySpeedTryEffect:function(){this.flyTryBgSprite.spriteFrame=this.battleAtlas.getSpriteFrame("Head_Bg_Orange"),this.flyTryIconSprite.spriteFrame=this.battleAtlas.getSpriteFrame("Battle_Quicken"),this.flyTryBgSprite.node.active=!1,this.flyTryNode.active=!0,this.flyTryNode.scale=.8,this.flyTryEffectNode.active=!0,this.flyTryEffectNode.getComponent(cc.Animation).play("effect_box_light");var e=this.quickenButtonNode.convertToWorldSpaceAR(cc.v2(0,0)),t=this.node.convertToNodeSpaceAR(e);this.flyTryNode.position=cc.v2(0,0);var a=cc.delayTime(1);e=cc.spawn(cc.moveTo(.3,t.add(cc.v2(0,0))),cc.scaleTo(.3,.3,.3)),t=cc.callFunc(function(){i.Logger.debug("callFunc speed try done"),this.flyTryNode.active=!1,this.showSpeedBubble(i.constant.BUBBLE_TYPE_BATTLE_SPEED_TRY),this.setSpeedTry(!1)},this),t=cc.sequence(a,e,t),this.flyTryNode.stopAllActions(),this.flyTryNode.runAction(t)},onClickDebug:function(){i.config.openGM&&i.gameScene.showPage(i.pageConstant.PAGE_TYPE_DEBUG,{})}}),cc._RF.pop()},{}],GameBulletEffect:[function(e,t){"use strict";cc._RF.push(t,"f0347YbEplHhrqjp2U+JIzH","GameBulletEffect");var i=e("Aft");cc.Class({extends:cc.Component,properties:{},start:function(){},initData:function(e){var t=this;this.node.destroyAllChildren();var a=e.prefabName;this.animationName=e.animationName;var n=i.constant.PREFAB_PATH_BULLET+a;this.playTime=0,i.battleScene.getBulletPrefab(n,function(e){e?(e=cc.instantiate(e),t.node.addChild(e),t.ani=e.getComponent("cc.Animation"),t.ani.on("finished",t.onFinished,t),t.ani.stop(),t.ani.setCurrentTime(0),t.ani.play(t.animationName),t.playTime=2):i.Logger.debug("error prefabName = "+n)}),this.node.angle=i.Utils.getRandomInt(0,360)},onFinished:function(e,t){t.name==this.animationName&&i.battleScene.giveBackBulletEffect(this.node)},update:function(e){0<this.playTime&&(this.playTime-=e,this.playTime<=0&&(this.playTime=0,i.battleScene.giveBackBulletEffect(this.node)))}}),cc._RF.pop()},{}],GameBullet:[function(e,t){"use strict";cc._RF.push(t,"9972c0nqJxKboLnDXvpzWLi","GameBullet");var i=e("Aft");cc.Class({extends:cc.Component,properties:{bulletAtlas:{default:null,type:cc.SpriteAtlas}},start:function(){},initData:function(e){var t=this;this.source=e.source,this.bulletId=e.bulletId,this.towerType=e.towerType,this.curPos=e.curPos,this.tarPos=e.tarPos,this.isAimHead=e.isAimHead,this.physicalAtk=e.physicalAtk,this.magicAtk=e.magicAtk,this.breakPhysicalDef=e.breakPhysicalDef||0,this.breakMagicDef=e.breakMagicDef||0,this.isCrit=e.isCrit,this.isBoss=!!e.isBoss,this.critHurt=e.critHurt,this.realHurt=e.realHurt,this.poisonData=e.poisonData,this.ignoreArmorData=e.ignoreArmorData,this.atkAoeData=e.atkAoeData,this.killBombData=e.killBombData||null,this.killSuckHpData=e.killSuckHpData||null,this.delay=e.delay,this.faintedTime=e.faintedTime||0,this.faintedType=e.faintedType||i.constant.STOP_TYPE_SWOON,this.faintedRate=e.faintedRate||100,this.addIronRate=e.addIronRate||0,this.targetDefNum=e.targetDefNum||0,this.sleepTime=e.sleepTime||0,this.tarObj=e.tarObj,this.shootObj=e.shootObj||null,this.bulletMoveSpeedPercent=e.bulletMoveSpeedPercent||1,this.secondKillRate=e.secondKillRate||0,this.secondKillPercent=e.secondKillPercent||0,this.atkAccumulate=e.atkAccumulate||1,this.sendData=e.sendData||null,this.extraHurtData=e.extraHurtData,this.funkData=e.funkData,this.moveSpeedData=e.moveSpeedData,this.formationTime=e.formationData?e.formationData.continueTime:0,this.checkTime=e.formationData?e.formationData.checkTime:0,this.defData1=e.defData1||null,this.defData2=e.defData2||null,this.fireContinueData=e.fireContinueData||null,this.dotContinueData=e.dotContinueData||null,this.limitSkillData=e.limitSkillData||null,this.addHurtData=e.addHurtData||null,this.dieHpData=e.dieHpData||null,this.hitHurtData=e.hitHurtData||null,this.charmData=e.charmData||null,this.shootDegree=e.shootDegree||0,this.nextHurtPercent=e.nextHurtPercent||1,this.chainData=e.chainData||null,this.suckBloodData=e.suckBloodData||null,this.hurtCount=0,this.node.scaleX=1,this.node.angle=0,this.nodeScale=1,this.curCharmNum=0,this.isAirBullet=9e3<=this.bulletId,this.isFlyInPlace=44==this.bulletId,this.isRevisePos=24==this.bulletId,this.delayShowTime=0,this.delay&&0<this.delay&&!this.isFlyInPlace&&(this.delayShowTime=this.delay,this.node.scale=0),this.curHitTime=0,this.maxHitTime=.5,this.curMoveTime=0,this.bulletData=i.templateManager.getBulletDataById(this.bulletId),this.isTarDieDestroy=0<this.bulletData.isDestruction,this.hurtHolePercent=this.bulletData.burrowDamageCoefficient?this.bulletData.burrowDamageCoefficient/1e4:0,this.isCanAtkHoleEnemy=0<this.hurtHolePercent,0<this.hurtHolePercent&&0<(r=i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_SPECIAL_HURT,i.constant.SPECIAL_ENEMY_TYPE_HOLE))&&(i.Logger.debug("\u7f81\u7eca\u6280\u80fd \u8fdb\u6d1e\u4f24\u5bb3 \u589e\u52a0 + "+r),this.hurtHolePercent*=1+r),this.hurtFlyPercent=1;var a,n,o,s,r=i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_SPECIAL_HURT,i.constant.SPECIAL_ENEMY_TYPE_FLY);if(0<r&&(i.Logger.debug("\u7f81\u7eca\u6280\u80fd \u98de\u884c\u4f24\u5bb3 \u589e\u52a0 + "+r),this.hurtFlyPercent=1+r),this.boomAngle=0<this.bulletData.damageAngle?this.bulletData.damageAngle:360,this.isLandmine=0<this.bulletData.isBoom,this.isPenetrate=0<this.bulletData.isPenetrate,this.hurtEnemyIdList=[],this.isPenetrate&&(a=i.Utils.getDegree(this.curPos,this.tarPos),n=i.Utils.getOffsetByRotationAndDistance(a,1100),this.tarPos=cc.v2(this.curPos.x+n.x,this.curPos.y+n.y)),this.maxDistance=this.bulletData.maxDis||0,this.beakBackData=null,this.bulletData.isRepel&&(r=this.bulletData.isRepel[0]/100,a=this.bulletData.isRepel[1]/60,n=this.bulletData.isRepel[2]/1e3,this.beakBackData={beakBackRate:r,beakBackSpeed:a,beakBackTime:n},this.isPenetrate=!0,this.formationTime=this.maxDistance/this.bulletData.speed,this.checkTime=1/i.constant.BATTLE_FRAME_RATE,a=i.Utils.getDegree(this.curPos,this.tarPos),n=i.Utils.getOffsetByRotationAndDistance(a,this.maxDistance),this.tarPos=cc.v2(this.curPos.x+n.x,this.curPos.y+n.y),this.moveDegree=a),this.bulletData.isGyration&&(this.isPenetrate=!0,this.formationTime=this.maxDistance/this.bulletData.speed*2,this.checkTime=1/i.constant.BATTLE_FRAME_RATE,s=i.Utils.getDegree(this.curPos,this.tarPos),o=i.Utils.getOffsetByRotationAndDistance(s,this.maxDistance),this.tarPos=cc.v2(this.curPos.x+o.x,this.curPos.y+o.y),i.Logger.debug("\u5f00\u59cb\u56de\u65cb")),this.boomHeight=this.bulletData.boomHeight,this.isCanHitFly=0<this.bulletData.isHitFly,this.roleHitName=this.bulletData.roleHitSpin,this.jumpHeight=this.bulletData.high,this.moveTime=this.bulletData.speed/1e3,this.moveDiatance=i.Utils.getDistance(this.curPos,this.tarPos),0<this.jumpHeight?this.moveTime=this.bulletData.speed/1e3:this.moveTime=this.moveDiatance/this.bulletData.speed,this.moveTime*=this.bulletMoveSpeedPercent,this.isRoleBelow=0<this.bulletData.isRoleBelow,this.isRoleBelow?this.node.zIndex=i.constant.LAYER_GAME_BG_UP:this.node.zIndex=i.constant.LAYER_PLAYER_BULLET,this.isShock=0<this.bulletData.isShock,this.isLightningChain=0<this.bulletData.isLightningChain,this.isFollowMove=0<this.bulletData.isFollow,this.isBlowNow=!1,(i.Utils.getDistance(this.curPos,this.tarPos)<10||this.isLightningChain)&&(this.isBlowNow=!0,this.moveTime=0,this.isLightningChain&&this.chainData&&this.updateLightingChain()),this.bulletMoveNode=cc.find("bullet",this.node),this.bulletMoveSpecialNode=cc.find("bullet/bulletMoveSpecial",this.node),this.bulletHitNode=cc.find("bulletHit",this.node),this.bulletMoveNode.scale=this.bulletData.iconBaseScale/1e4,this.bulletHitNode.scale=this.bulletData.boomSpinScale/1e4,this.bulletMoveAni=this.bulletMoveNode.getComponent("cc.Animation"),this.hitBulletName=this.bulletData.boomSpin,this.bulletHitAni=null,this.animationName=this.bulletData.AnimationName,this.hitParticle1=null,this.hitParticle2=null,this.hitBulletName){this.bulletHitNode.destroyAllChildren();var c=i.constant.PREFAB_PATH_BULLET+i.battleScene.getPrefabName(this.hitBulletName);try{i.battleScene.getBulletPrefab(c,function(e){e?(e=cc.instantiate(e),t.bulletHitNode.addChild(e),t.bulletHitAni=e.getComponent("cc.Animation"),t.bulletHitAni.on("finished",t.onFinished,t)):i.Logger.debug("error prefabName = "+c)})}catch(e){return void this.removeBullet()}}if(this.isHitRotate=0<this.bulletData.isRotate,this.isMoveRotate=0<this.bulletData.isFlyRotate,this.bulletHitNode.angle=0,this.rotation=i.Utils.getRotation(this.curPos,this.tarPos),this.rotation<0?this.rotation+=360:360<this.rotation&&(this.rotation-=360),this.bulletMoveNode.angle=this.isMoveRotate?this.rotation:0,this.isRollingStone=43==this.bulletData.id||52==this.bulletData.id,this.icon=cc.find("bullet/icon",this.node).getComponent("cc.Sprite"),this.orbitNode=cc.find("bullet/orbit",this.node),this.moveSpecialName=this.bulletData.flySpin,this.moveSpecialAniName=this.bulletData.flySpinName,this.tailPrefabName=this.bulletData.trailingPrefabName,this.tailAnimationName=this.bulletData.trailingAnimationName,this.needShowEffectTime=this.bulletData.trailingIntervalTime/1e3,this.curShowEffectTime=i.Utils.getRandomInt(0,this.bulletData.trailingIntervalTime)/1e3,this.showEffectList=[],this.finalTrailingFadeTime=0,this.moveSpecialName){this.bulletMoveSpecialNode.active=!0,this.bulletMoveSpecialNode.destroyAllChildren(),this.bulletMoveSpecialNode.scaleY=1;var l=i.constant.PREFAB_PATH_BULLET+this.moveSpecialName;try{i.battleScene.getBulletPrefab(l,function(e){e?(e=cc.instantiate(e),t.bulletMoveSpecialNode.addChild(e),t.bulletMoveSpecialAni=e.getComponent("cc.Animation"),t.moveSpecialAniName&&(e=!1,t.isRollingStone&&(90<=t.rotation&&t.rotation<270||(e=!0)),e=e?t.moveSpecialAniName+"_clockwise":t.moveSpecialAniName,t.bulletMoveSpecialAni.play(i.battleScene.getPrefabName(e)),t.isFlyInPlace&&t.bulletMoveSpecialAni.on("finished",t.onFinished,t))):i.Logger.debug("error prefabName = "+l)})}catch(e){return void this.removeBullet()}this.icon.node.active=!1,this.orbitNode.active=!1}else{this.bulletMoveSpecialNode.active=!1,this.icon.node.active=!0,this.icon.spriteFrame=this.bulletAtlas.getSpriteFrame(this.bulletData.icon),this.icon.node.angle=0,this.orbitNode.active=!0,this.motionStreak=this.orbitNode.getComponent("cc.MotionStreak");var d=this.bulletData.orbit,h=this.bulletData.orbitWidth,u=this.bulletData.time/1e3;this.finalTrailingFadeTime=u,h&&0<h?(this.orbitNode.active||(this.orbitNode.active=!0),this.motionStreak.color=cc.color("#"+d),this.motionStreak.stroke=h,this.motionStreak.fadeTime=this.finalTrailingFadeTime):this.orbitNode.active&&(this.orbitNode.active=!1)}this.hurtDis=this.bulletData.damageRadius,this.isAOE=0<this.bulletData.isAOE,this.isPlayHit="1"===this.bulletData.hitSpin,this.isCheckBombHit=!0,this.curBombTime=0,this.needBoomTime=this.bulletData.boomTime/1e3,this.isBlowNow&&this.delayShowTime<=0&&!this.isFlyInPlace?this.setBulletState(i.constant.BULLET_STATE_HIT):this.setBulletState(i.constant.BULLET_STATE_MOVE),this.oldPos=this.curPos,this.node.stopAllActions(),this.isBlowNow||(s=this.delayShowTime,o=cc.delayTime(s),u=cc.callFunc(function(){return this.tarObj&&!this.tarObj.isCanAtk(this.isCanAtkHoleEnemy)&&this.isTarDieDestroy?(i.Logger.debug("\u76ee\u6807\u5df2\u6b7b \u653e\u5f03\u5c04\u51fb"),void this.removeBullet()):(this.node.scale=this.nodeScale,this.bulletData.shotAudio&&i.soundsUtil.playSoundEffect(this.bulletData.shotAudio),this.isPenetrate&&(this.bulletState=i.constant.BULLET_STATE_HIT),void this.bulletMoveNode.runAction(cc.scaleTo(.2,this.bulletData.iconScale/1e4)))},this),d=this.moveTime,h=this.jumpHeight,s=cc.jumpTo(d,this.tarPos,h,1),0==h&&(s=cc.moveTo(d,this.tarPos)),d=cc.callFunc(function(){this.setBulletState(i.constant.BULLET_STATE_HIT)},this),d=cc.sequence(o,u,s,d),this.node.runAction(d))},updateLightingChain:function(){var e=this.chainData.index,t=this.chainData.curPos,a=(this.chainData.tarPos,this.chainData.curObj),n=this.chainData.tarObj;0<e&&(t=a.getAimPos(!0)),o=n.getAimPos(!0),this.node.setPosition(t),n=i.Utils.getRotation(t,o);var o=i.Utils.getDistance(t,o);this.node.scaleX=o/200,this.node.angle=n},setBulletScale:function(e){this.nodeScale=e},getOverWaitTime:function(){var e=0;0<this.delayShowTime&&(e+=this.delayShowTime);var t=this.moveTime-this.curMoveTime;return 0<t&&(e+=t),0<(t=this.maxHitTime-this.curHitTime)&&(e+=t),e},setBulletState:function(e){switch(this.bulletState=e,this.bulletState){case i.constant.BULLET_STATE_MOVE:this.bulletMoveNode.active=!0,this.bulletHitNode.active=!1,this.bulletData.cartoon?this.bulletMoveAni.play(this.bulletData.cartoon):this.bulletMoveAni.stop();break;case i.constant.BULLET_STATE_HIT:if(this.bulletData.isGyration){i.Logger.debug("\u56de\u65cb\u56de\u6765"),this.hurtEnemyIdList=[],this.isMoveRotate&&(this.bulletMoveNode.angle=this.rotation+180);var t=cc.moveTo(this.moveTime,this.curPos),a=cc.callFunc(function(){this.removeBullet()},this);return a=cc.sequence(t,a),this.node.stopAllActions(),void this.node.runAction(a)}if(0<this.boomHeight&&this.bulletData.touchOffBullet&&0<this.bulletData.touchOffBullet.length){var n=[],o=this.node.getPosition();o.y-=this.boomHeight;for(var s=0;s<this.bulletData.touchOffBullet.length;s++){var r=i.battleScene.getBlowPos(o,100,n,!0,50,!1);n.push(r)}for(var c=0;c<this.bulletData.touchOffBullet.length;c++){var l=this.bulletData.touchOffBullet[c];l={source:this.source,bulletId:l,towerType:this.curType,tarObj:this.tarObj,curPos:this.node.getPosition(),tarPos:n[c],isAimHead:!1,realHurt:this.realHurt,physicalAtk:this.physicalAtk,magicAtk:this.magicAtk,delay:.1},(l=i.battleScene.createBulletByData(l))&&((l=l.getComponent("GameBullet")).setBulletScale(i.Utils.getRandomInt(70,100)/100),l.needShowEffectTime*=i.Utils.getRandomInt(70,130)/100)}}else{var d;this.hitHurtData&&this.bulletData.touchOffBullet&&0<this.bulletData.touchOffBullet.length?(d={source:this.source,bulletId:this.bulletData.touchOffBullet[0],towerType:this.curType,tarObj:this.tarObj,curPos:this.node.getPosition(),tarPos:this.node.getPosition(),isAimHead:!1,realHurt:-1,moveSpeedData:this.moveSpeedData,formationData:{continueTime:this.hitHurtData.continueTime,checkTime:this.hitHurtData.checkTime},dotContinueData:{dotHurt:this.hitHurtData.hurt,dotHurtTime:this.hitHurtData.checkTime,dotAllTime:this.hitHurtData.dotTime,isRealHurt:this.hitHurtData.isRealHurt,physicalAtk:this.hitHurtData.physicalAtk,magicAtk:this.hitHurtData.magicAtk},delay:.68},i.battleScene.createBulletByData(d)):!this.isFlyInPlace&&this.bulletData.touchOffBullet&&0<this.bulletData.touchOffBullet.length&&(d={source:this.source,bulletId:this.bulletData.touchOffBullet[0],towerType:this.curType,tarObj:this.tarObj,curPos:this.node.getPosition(),tarPos:this.node.getPosition(),isAimHead:!1,realHurt:-1,delay:this.needBoomTime+.1},i.battleScene.createBulletByData(d))}this.isLandmine&&(this.node.zIndex=i.constant.LAYER_GAME_BG_UP),this.bulletMoveNode.active=!1,this.isShock&&i.battleScene.boxShake(),this.bulletData.bulletAudio&&i.soundsUtil.playSoundEffect(this.bulletData.bulletAudio),this.hitBulletName&&(this.isHitRotate&&(this.bulletHitNode.angle=this.bulletMoveNode.angle),this.bulletHitNode.active=!0,this.bulletHitAni?(this.bulletHitAni.stop(),this.bulletHitAni.setCurrentTime(0),this.bulletHitAni.play(i.battleScene.getPrefabName(this.animationName))):this.removeBullet()),this.hitParticle1&&this.hitParticle1.resetSystem(),this.hitParticle2&&this.hitParticle2.resetSystem()}},removeBullet:function(e){if(this.bulletHitAni&&this.bulletHitAni.off("finished",this.onFinished,this),!e)for(var t=0;t<i.battleScene.bulletList.length;t++)if(i.battleScene.bulletList[t].getComponent("GameBullet")==this){i.battleScene.bulletList.splice(t,1);break}this.bulletMoveSpecialNode.destroyAllChildren(),this.bulletHitNode.destroyAllChildren(),i.battleScene.giveBackBullet(this.node)},onFinished:function(e,t){if(t=t.name,this.bulletState==i.constant.BULLET_STATE_HIT){if(t==i.battleScene.getPrefabName(this.animationName))if(this.formationTime<=0){if(this.isLandmine&&this.bulletData.touchOffBullet&&0<this.bulletData.touchOffBullet.length)for(var a=0;a<this.bulletData.touchOffBullet.length;a++){var n={source:this.source,bulletId:this.bulletData.touchOffBullet[a],towerType:this.curType,tarObj:this.tarObj,curPos:this.node.getPosition(),tarPos:this.node.getPosition(),isAimHead:!1,physicalAtk:this.physicalAtk,magicAtk:this.magicAtk,isCrit:this.isCrit,realHurt:this.realHurt,faintedTime:this.faintedTime,faintedType:this.faintedType,faintedRate:this.faintedRate,delay:0};i.battleScene.createBulletByData(n)}this.removeBullet()}else this.bulletHitAni.stop(),this.bulletHitAni.setCurrentTime(0),this.bulletHitAni.play(i.battleScene.getPrefabName(this.animationName))}else this.isFlyInPlace&&t==i.battleScene.getPrefabName(this.moveSpecialAniName)&&this.setBulletState(i.constant.BULLET_STATE_HIT)},updateBullet:function(e){switch(this.bulletState){case i.constant.BULLET_STATE_MOVE:var t,a;if(0<this.delayShowTime)return this.delayShowTime-=e,void(this.delayShowTime<=0&&(this.delayShowTime=0,this.node.scale=this.nodeScale,this.isBlowNow&&!this.isFlyInPlace)&&(this.isRevisePos&&this.tarObj&&(a=this.tarObj.getShootTarPos(0,this.isAimHead),a=i.battleScene.getBlowPos(a,50,[],!1,0,!1),this.node.setPosition(a)),this.setBulletState(i.constant.BULLET_STATE_HIT)));this.curMoveTime+=e,this.isMoveRotate&&this.oldPos&&Math.floor(100*this.oldPos.x)!=Math.floor(100*this.node.getPosition().x)&&Math.floor(100*this.oldPos.y)!=Math.floor(100*this.node.getPosition().y)&&(this.rotation=i.Utils.getRotation(this.oldPos,this.node.getPosition()),this.bulletMoveNode.angle=this.rotation,this.oldPos=this.node.getPosition()),this.tailPrefabName&&this.tailAnimationName&&(this.curShowEffectTime+=e,this.curShowEffectTime>=this.needShowEffectTime)&&(this.curShowEffectTime=0,t=this.node.getPosition(),a=this.tailPrefabName,n=this.tailAnimationName,n=i.battleScene.createBulletEffectByData({pos:t,prefabName:a,animationName:n}),this.showEffectList.push(n),n.scale=this.nodeScale);break;case i.constant.BULLET_STATE_HIT:var n;if(this.isLightningChain&&this.chainData?this.updateLightingChain():this.isFollowMove&&this.tarObj&&this.node.setPosition(this.tarObj.getAimPos(!1)),this.bulletData.isRepel&&this.tailPrefabName&&this.tailAnimationName&&(this.curShowEffectTime+=e,this.curShowEffectTime>=this.needShowEffectTime)&&(this.curShowEffectTime=0,n=this.node.getPosition(),l=this.tailPrefabName,c=this.tailAnimationName,l=i.battleScene.createBulletEffectByData({pos:n,prefabName:l,animationName:c}),this.showEffectList.push(l),l.scale=this.nodeScale*this.bulletData.trailingIntervalSize/1e4),this.curHitTime+=e,this.formationTime-=e,this.isCheckBombHit&&(this.curBombTime+=e,this.curBombTime>=this.needBoomTime)){if(this.curBombTime=0,this.formationTime<=0){if(this.isCheckBombHit=!1,this.isPenetrate)return void this.removeBullet()}else this.needBoomTime=this.checkTime;0<this.hurtCount&&(this.realHurt&&(this.realHurt*=this.nextHurtPercent),this.physicalAtk*=this.nextHurtPercent,this.magicAtk*=this.nextHurtPercent),this.hurtCount++;var o=!1,s=0,r=!0,c=this.source==i.constant.SHOOT_SOURCE_TOWER||this.source==i.constant.SHOOT_SOURCE_SKILL||this.source==i.constant.SHOOT_SOURCE_HERO,l=!c;if(this.source==i.constant.SHOOT_SOURCE_ALL_CHECK&&(l=c=!0),c&&0<this.hurtDis)for(var d=this.source==i.constant.SHOOT_SOURCE_SKILL?i.constant.ATK_TYPE_SKILL:i.constant.ATK_TYPE_FAR,h=i.battleScene.enemyList,u=0;u<h.length;u++){var p=h[u].getComponent("GameEnemy");this.tarObj&&!this.isAOE&&r&&this.tarObj!=p&&0==u&&(p=this.tarObj,r=!1,u=-1);var g=i.Utils.getDistance(this.node.getPosition(),p.getAimPos(this.isAimHead));!this.isAimHead&&p.isFly&&(g=i.Utils.getDistance(this.node.getPosition(),p.getShootAimPos(!0)));var _=!1;p.isFly&&!this.isCanHitFly&&(_=!0);var m,E,T,f,S,A,I,y,P,v,L,N,b,R,C=!1;if(C=359<this.boomAngle?g<this.hurtDis:(m=this.shootDegree,E=i.Utils.getDegree(this.node.getPosition(),p.getAimPos(this.isAimHead)),E=(E=Math.abs(m-E))<=this.boomAngle||Math.abs(E-360)<=this.boomAngle,g=g<this.hurtDis,E&&g),this.chainData?C=p==this.chainData.tarObj:this.isFollowMove&&this.tarObj&&(C=p==this.tarObj),C&&p.isCanAtk(this.isCanAtkHoleEnemy)&&!_&&this.hurtEnemyIdList.indexOf(p.enemyCountId)<0){if(this.isPenetrate&&this.hurtEnemyIdList.push(p.enemyCountId),o=!0,this.isLandmine)break;if(this.funkData&&(T=this.funkData.funkTime,s<this.funkData.funkNum&&p.startFunk(T)),this.moveSpeedData&&(C=this.moveSpeedData.speedPercent,_=this.moveSpeedData.speedTime,T=this.moveSpeedData.showEffectType==i.constant.SLOW_TYPE_ICE,p.updateSpeed(C,_,T)),this.defData1&&(f=this.defData1.defPercent,(S=this.defData1.defTime)<0&&0<this.formationTime&&(S=this.formationTime),p.updatePhysicalDef(f,S)),this.defData2&&(f=this.defData2.defPercent,(S=this.defData2.defTime)<0&&0<this.formationTime&&(S=this.formationTime),p.updateMagicDef(f,S)),this.faintedTime&&i.Utils.getRandomInt(1,100)<=this.faintedRate&&(1<this.nextHurtPercent&&this.hurtCount<5||p.setEnemyFainted(this.faintedTime,this.faintedType)),!this.charmData||p.setEnemyCharm(this.charmData.charmRate,this.charmData.charmNum,this.charmData.charmSoldierId,this.curCharmNum)&&this.curCharmNum++,0<this.sleepTime&&p.updateSleepTime(this.sleepTime),this.fireContinueData&&(A=this.fireContinueData.fireDotHurt,I=this.fireContinueData.fireHurtTime,y=this.fireContinueData.fireAllTime,P=this.fireContinueData.isRealHurt,v=this.fireContinueData.physicalAtk,L=this.fireContinueData.magicAtk,p.enemyFireDot(A,I,y,P,v,L)),this.poisonData&&p.enemyPoisonDot(this.poisonData.hurtNum,this.poisonData.hurtTime,this.poisonData.totalTime,this.poisonData.isRealHurt,this.poisonData.physicalAtk,this.poisonData.magicAtk),this.dotContinueData&&(A=this.dotContinueData.dotHurt,I=this.dotContinueData.dotHurtTime,y=this.dotContinueData.dotAllTime,P=this.dotContinueData.isRealHurt,v=this.dotContinueData.physicalAtk,L=this.dotContinueData.magicAtk,p.enemyDot(A,I,y,P,v,L)),this.addHurtData&&(N=this.addHurtData.addHurtPercent,0===(b=this.addHurtData.addHurtTime||0)&&(b=0<this.formationTime?this.formationTime:1),p.enemyAddHurt(N,b)),this.dieHpData&&(N=this.dieHpData.dieHpPercent,b=0<this.formationTime?this.formationTime:1,p.enemyDieRestoreHp(N,b)),this.limitSkillData&&(R=this.limitSkillData.limitTime,p.limitSkill(R)),this.beakBackData&&p.enemyBeakBack(this.beakBackData.beakBackRate,this.beakBackData.beakBackSpeed,this.formationTime,this.moveDegree),this.realHurt?p.enemySkillHurt(this.realHurt,this.roleHitName,this.secondKillRate,this.secondKillPercent,this.hurtHolePercent,this.hurtFlyPercent):(this.sendData?s<this.sendData.num&&p.sendEnemy(this.sendData.distance,this.sendData.time):(R={physicalAtk:this.physicalAtk,magicAtk:this.magicAtk,towerType:this.towerType,critHurt:this.critHurt,ignoreArmorData:this.ignoreArmorData,breakPhysicalDef:this.breakPhysicalDef,breakMagicDef:this.breakMagicDef,targetDefNum:this.targetDefNum,secondKillRate:this.secondKillRate,secondKillPercent:this.secondKillPercent,addIronRate:this.addIronRate,isCrit:this.isCrit,atkAccumulate:this.atkAccumulate,killBombData:this.killBombData,killSuckHpData:this.killSuckHpData,atkAoeData:this.atkAoeData,extraHurtData:this.extraHurtData,roleHitName:this.roleHitName,hurtHolePercent:this.hurtHolePercent,hurtFlyPercent:this.hurtFlyPercent},p.enemyFeelHurt(R,d)),s++),!this.isAOE)break}}if(l)for(var D=i.battleScene.soldierList,k=0;k<D.length;k++){var O=D[k].getComponent("GameHero");if(i.Utils.getDistance(this.node.getPosition(),O.getAimPos(this.isAimHead))<this.hurtDis&&O.isCanAtk()){var w,M;o=!0,this.moveSpeedData&&(w=this.moveSpeedData.speedPercent,M=this.moveSpeedData.speedTime,O.updateSpeed(w,M)),this.fireContinueData&&(w=this.fireContinueData.fireDotHurt,M=this.fireContinueData.fireHurtTime,B=this.fireContinueData.fireAllTime,O.enemyFireDot(w,M,B));var B=7==this.bulletId?i.constant.HERO_HIT_TYPE_MAGIC:i.constant.HERO_HIT_TYPE_BLOOD;if(B={realHurt:this.realHurt,physicalAtk:this.physicalAtk,magicAtk:this.magicAtk,isCrit:this.isCrit,faintedTime:this.faintedTime,shootObj:this.shootObj,isBoss:this.isBoss,addHurtData:this.addHurtData,hitType:B},0<(B=O.heroFeelHurt(B))&&this.shootObj&&this.shootObj.enemyFeelHurt(B,i.constant.ATK_TYPE_SKILL,!0),!this.isAOE)break}}if(o&&this.suckBloodData&&this.shootObj&&this.shootObj.restoreHp(this.suckBloodData.suckHpPercent),this.isAirBullet)this.formationTime<=0&&this.removeBullet();else if(this.isLandmine&&0<this.formationTime&&o){if(this.bulletData.touchOffBullet&&0<this.bulletData.touchOffBullet.length)for(var H=0;H<this.bulletData.touchOffBullet.length;H++){var G={source:this.source,bulletId:this.bulletData.touchOffBullet[H],towerType:this.curType,tarObj:this.tarObj,curPos:this.node.getPosition(),tarPos:this.node.getPosition(),isAimHead:!1,physicalAtk:this.physicalAtk,magicAtk:this.magicAtk,isCrit:this.isCrit,realHurt:this.realHurt,faintedTime:this.faintedTime,faintedType:this.faintedType,faintedRate:this.faintedRate,delay:0};i.battleScene.createBulletByData(G)}this.removeBullet()}else this.isPlayHit||this.isPenetrate||this.isHitRotate&&!o||this.removeBullet()}}}}),cc._RF.pop()},{}],GameConfig:[function(e,t){"use strict";cc._RF.push(t,"3c7ffbNVg9DIbHZL5/rRTR8","GameConfig"),e("Aft").config={gameType:10006008,LOGGER_LEVEL:"error",needSDKUid:!1,openGM:!1,httpServiceUrl:"https://cashflow-server-xiaomi.afunteam.com",biServer:"https://bi.afunteam.com/bi/api/accept",biAppId:"1006006",biPlatformId:"b572e188-a9c4-4c64-b166-ec19bda4f098",isHotUpdate:!1,packageId:"10006008202012102244",version:"1.0.22.1",isWechat:!1,tdH5Open:!1,channel:"wechat1.0.22",h5TopPullDown:!0,healthTipOpen:!0,isLowIosDevice:!0,shakeOpen:!0,defaultLanguage:"zh",isLoadTableData:!0,isSubpackage:!0,isNeedUpdate:!1,httpDataEncry:!1},cc._RF.pop()},{}],GameConst:[function(e,t){"use strict";cc._RF.push(t,"a22b6LYvo9H7YVEHa0oipM7","GameConst");var i=t,a={IS_RELEASE_CHAPTER_BG:!0,BATTLE_FRAME_RATE:60,GAME_STATE_MAIN:1,GAME_STATE_BATTLE:2,GAME_STATE_WORLD:3,WX_PERMISSION_TYPE_USER:1,WX_PERMISSION_TYPE_LOCATION:2,WX_SUBSCRIBE_TYPE_OFFLINE:1,WX_SUBSCRIBE_TYPE_POWER:2,WX_SUBSCRIBE_TYPE_SIGN:3,WX_SUBSCRIBE_TYPE_VERSION_UPDATE:4,WX_TEMPLATE_ID_OFFLINE:"juDogIcQUgEjcEhtivCfF92QCUpn7XUvJvjA9BTEJTg",WX_TEMPLATE_ID_POWER:"hzrxVyoE4O6SHOCVsaSY1Fs5kUPnWzCaWipgFkHXL7I",WX_TEMPLATE_ID_SIGN:"8I1c8AUAkVATkjJpm-tSfayZucw5lzOLGn71KmIEV0c",WX_TEMPLATE_ID_VERSION_UPDATE:"v6S1sMg8SPEhuu0Ebk_4XRiBkrAu8Qla5kh4DeZs8uA",FREE_POWER_TYPE_SMALL_GAME:1,FREE_POWER_TYPE_DESKTOP:2,FREE_POWER_TYPE_FLOATING_WINDOW:3,FREE_POWER_TYPE_RANK:4,FREE_POWER_TYPE_AD:5,FREE_POWER_TYPE_CUSTOMER:6,GAME_CLUB_TYPE_MAIN:1,GAME_CLUB_TYPE_RESULT:2,FREE_POWER_RED_INDEX:1,LAYER_GAME_BG:0,LAYER_GAME_BG_UP:1,LAYER_GAME_TOWER:2,LAYER_GAME_ENEMY:4,LAYER_HERO:6,LAYER_EFFECT:6,LAYER_FLY_ENEMY:1300,LAYER_BULLET_EFFECT:1400,LAYER_PLAYER_BULLET:1401,LAYER_ENEMY_BULLET:1402,LAYER_MAP_DECORATE:1500,LAYER_HERO_UP:1501,LAYER_FLY_HP:1550,LAYER_WAVE_TIPS:1570,LAYER_GAME_POWER_CONTROL:1580,LAYER_HERO_SKILL:1585,LAYER_BATTLE_SKILL:1599,LAYER_GAME_UI:1601,LAYER_GAME_BOSS_WARN:1602,YEAR_MONSTER_CHAPTER_ID:9991,YEAR_MONSTER_ENEMY_ID:39991,BULLET_STATE_MOVE:1,BULLET_STATE_HIT:2,CAMP_TYPE_SELF:1,CAMP_TYPE_ENEMY:2,MAP_EFFECT_FLAG:1,MAP_EFFECT_FIRE:2,MAP_EFFECT_SMOKE:3,MAP_EFFECT_FLOWER:4,SHOOT_SOURCE_TOWER:1,SHOOT_SOURCE_SKILL:2,SHOOT_SOURCE_ENEMY:3,SHOOT_SOURCE_HERO:4,SHOOT_SOURCE_BOSS:5,SHOOT_SOURCE_ALL_CHECK:6,HURT_TARGET_ENEMY:1,HURT_TARGET_HERO:2,HURT_TARGET_ALL:3,BULLET_TYPE_BOOM:10,BULLET_TYPE_AIR:9999,OPERATE_STATE_TOWER:1,OPERATE_STATE_HERO:2,OPERATE_STATE_SKILL:3,SELECT_SKILL_FIRST:1,SELECT_SKILL_SECOND:2,SELECT_HERO_FIRST:3,SELECT_HERO_SECOND:4,GAME_TIPS_TYPE_X:1,GAME_TIPS_TYPE_TOMB:2,GAME_TIPS_TYPE_TARGET:3,GAME_TIPS_TYPE_HERO_CALL:4,GAME_TIPS_TYPE_ENEMY_CALL:5,GAME_TIPS_TYPE_CHARM:6,GAME_TIPS_TYPE_HOLE:7,GAME_TIPS_TYPE_BOSS_CALL_ENEMY:8,GAME_TIPS_TYPE_BOSS_CALL_EFFECT:9,GAME_TIPS_TYPE_CLUMP:10,GAME_STATE_LOAD:1,GAME_STATE_READY:2,GAME_STATE_START:3,GAME_STATE_OVER:4,TOWER_STATE_LOCK:-1,TOWER_STATE_EMPTY:0,TOWER_STATE_BUILD_1:1,TOWER_STATE_BUILD_2:2,TOWER_STATE_BUILD_3:3,TOWER_STATE_BUILD_4:4,TOWER_ACTION_BUILD:1,TOWER_ACTION_STAND:2,TOWER_ACTION_ATK:3,TOWER_ACTION_UPGRADE:4,TOWER_ACTION_SKILL:5,TOWER_TYPE_ARROW:1,TOWER_TYPE_BARRACK:2,TOWER_TYPE_CANNON:3,TOWER_TYPE_MAGIC:4,TOWER_TYPE_HERO:5,TOWER_CONTROL_TYPE_UP:1,TOWER_CONTROL_TYPE_BUILD:2,ENEMY_STATE_STAND:1,ENEMY_STATE_MOVE:2,ENEMY_STATE_READY:3,ENEMY_STATE_BATTLE:4,ENEMY_STATE_SHOOT:5,ENEMY_STATE_BEAK_BACK:6,ENEMY_STATE_RETURN:7,ENEMY_STATE_DIE:8,ENEMY_STATE_SKILL:9,ENEMY_STATE_LANDING:10,ENEMY_STATE_SKILL2:11,ENEMY_STATE_POSE:12,ENEMY_SKILL_TYPE_RESTORE:1,ENEMY_SKILL_TYPE_FAINTED:2,ENEMY_SKILL_TYPE_CHANGE_SHEEP:3,ENEMY_SKILL_TYPE_MOVE_SPEED:4,ENEMY_SKILL_TYPE_CALL_ENEMY:5,ENEMY_SKILL_TYPE_STOP_TOWER:6,ENEMY_SKILL_TYPE_SHIELD:7,ENEMY_SKILL_TYPE_ADD_HP:8,ENEMY_SKILL_TYPE_BOSS_CALL:15,ENEMY_SKILL_TYPE_INTO_HOLE:16,ENEMY_SKILL_TYPE_BLEW:17,SKILL_CAMP_HERO:1,SKILL_CAMP_ENEMY:2,SKILL_CAMP_RESTRAIN:3,ATK_TYPE_NEAR:1,ATK_TYPE_FAR:2,ATK_TYPE_SKILL:3,HERO_SOURCE_HERO:1,HERO_SOURCE_TOWER:2,HERO_SOURCE_HERO_RECRUIT:3,ARMS_TYPE_MELEE:1,ARMS_TYPE_ARCHER:2,ARMS_TYPE_MAGE:3,HERO_HIT_TYPE_BLOOD:1,HERO_HIT_TYPE_MAGIC:2,HERO_SKILL_BLOW_LIST:1,HERO_SKILL_FUNK:2,HERO_SKILL_RECRUIT:3,HERO_SKILL_BLOW:4,HERO_SKILL_SWOON:5,DRIVING_SKILL_BLOW:101,DRIVING_SKILL_RECRUIT_FAR:102,DRIVING_SKILL_SEND:103,DRIVING_SKILL_RECRUIT:104,DRIVING_SKILL_LANDMINE:105,DRIVING_SKILL_ARROW_RAIN:106,DRIVING_SKILL_ENEMY_SLOW:107,DRIVING_SKILL_HERO_QUICK:108,HERO_SKILL_OUT_TOWER:1,HERO_SKILL_IN_TOWER:2,HERO_BIG_SKILL:1,HERO_SMALL_SKILL:2,HERO_SKILL_TAR_SELF:1,HERO_SKILL_TAR_ENEMY:2,HERO_SKILL_TAR_SOLDIER:3,HERO_SKILL_SHOOT_1:101,HERO_SKILL_SHOOT_2:102,HERO_SKILL_CALL:401,HERO_SKILL_CHANGE_BIG:402,HERO_SKILL_SPIN_SWORD:407,HERO_SKILL_LIGHTNING_CHAIN:408,HERO_SKILL_RECRUIT_BIRD:409,STOP_TYPE_SWOON:1,STOP_TYPE_ELECTRICITY:2,STOP_TYPE_FROZEN:3,STOP_TYPE_CHARM:4,STOP_TYPE_STIFF:5,SLOW_TYPE_ICE:1,HERO_ID_GUANYU:43001,HERO_ID_ZHANGFEI:43002,HERO_ID_LIUBEI:43003,HERO_ID_XIAOQIAO:43004,HERO_ID_HUANGZHONG:43005,HERO_ID_LVBU:43006,HERO_ID_ZHUGELIANG:43007,HERO_ID_DIAOCHAN:43008,HERO_ID_SUNSHANGXIANG:43009,HERO_ID_ZHAOYUN:43010,HERO_ID_CAOCAO:43011,HERO_ID_ZHANGJIAO:43012,HERO_ID_DIANWEI:43014,HERO_ID_GUANYU_VIP:43101,HERO_ID_ZHANGFEI_VIP:43102,HERO_ID_ZHUGELIANG_VIP:43107,HERO_SKILL_EFFECT_SWOON:201,HERO_SKILL_EFFECT_FUNK:202,HERO_SKILL_EFFECT_FORMATION:203,HERO_SKILL_EFFECT_LIMIT_SKILL:204,HERO_SKILL_EFFECT_CONTINUE:205,HERO_SKILL_EFFECT_HP_HURT:206,HERO_SKILL_EFFECT_EXTRA:207,HERO_SKILL_EFFECT_SECOND:208,HERO_SKILL_EFFECT_CONTINUE_2:209,HERO_SKILL_EFFECT_HP_DEF:210,HERO_SKILL_EFFECT_DIE_HP:211,HERO_SKILL_EFFECT_ENEMY_DIE_HP:212,HERO_SKILL_EFFECT_HIT_HURT:213,HERO_SKILL_EFFECT_NO_DEF:214,HERO_SKILL_EFFECT_DIE_BOMB:215,HERO_SKILL_EFFECT_TOWER_ADD_ATTR:216,HERO_SKILL_EFFECT_ADD_TOWER_ATTR:217,HERO_SKILL_EFFECT_SLEEP:218,HERO_SKILL_EFFECT_CONTINUE_3:219,HERO_SKILL_EFFECT_CONTINUE_4:220,HERO_SKILL_EFFECT_ADD_MONEY:223,HERO_SKILL_EFFECT_MAGIC_AOE:224,HERO_SKILL_EFFECT_ATK_ACCUMULATE:225,HERO_SKILL_EFFECT_ATK_EXTRA:226,HERO_SKILL_EFFECT_CHARM:227,HERO_SKILL_EFFECT_SUCK_BLOOD:228,HERO_SKILL_EFFECT_SUCK_HP:229,HERO_SKILL_EFFECT_ATK_1:301,HERO_SKILL_EFFECT_ATK_2:302,HERO_SKILL_EFFECT_DEF_1:303,HERO_SKILL_EFFECT_DEF_2:304,HERO_SKILL_EFFECT_CRIT:305,HERO_SKILL_EFFECT_CRIT_ATK:306,HERO_SKILL_EFFECT_MOVE_SPEED:307,HERO_SKILL_EFFECT_ATK_SPEED:308,HERO_SKILL_EFFECT_HURT_ADD:309,HERO_SKILL_EFFECT_CRIT_ATK_SPEED:310,HERO_SKILL_EFFECT_CRIT_ATK_HURT:311,TOWER_SKILL_LANDMINE:31,TOWER_SKILL_SNIPER:51,HERO_STATE_STAND:1,HERO_STATE_BACK:2,HERO_STATE_MOVE:3,HERO_STATE_READY:4,HERO_STATE_BATTLE:5,HERO_STATE_SHOOT:6,HERO_STATE_GO_TOWER:7,HERO_STATE_IN_TOWER:8,HERO_STATE_ENTER:9,HERO_STATE_JUMP:10,HERO_STATE_DIE:20,HERO_STATE_WAIT:21,HERO_STATE_JUMP_2:30,HERO_STATE_TOWER_SKILL:31,HERO_DIR_UP:1,HERO_DIR_DOWN:2,HERO_DIR_LEFT:3,HERO_DIR_RIGHT:4,HERO_SKILL_GUAN_YU_1:13,HERO_SKILL_ZHANG_FEI_1:16,HERO_SKILL_LIU_BEI_1:19,HERO_SKILL_SUN_SHANG_XIANG_1:22,HERO_SKILL_HUANG_ZHONG_1:25,HERO_SKILL_MENG_HUO_1:28,HERO_SKILL_XU_SHU_1:31,HERO_SKILL_ZHU_RONG_1:34,HERO_SKILL_GUAN_YU_2:15,HERO_SKILL_ZHANG_FEI_2:18,HERO_SKILL_LIU_BEI_2:21,HERO_SKILL_SUN_SHANG_XIANG_2:24,HERO_SKILL_HUANG_ZHONG_2:27,HERO_SKILL_MENG_HUO_2:30,HERO_SKILL_XU_SHU_2:33,HERO_SKILL_ZHU_RONG_2:36,LOADING_CLEAN:5,LOADING_INIT_DATA:5,LOADING_POOL_ENEMY:5,LOADING_POOL_BULLET:5,LOADING_POOL_SOLDIER:5,LOADING_POOL_FLY:5,LOADING_UI_CONTROL:5,LOADING_POOL_TIPS:5,LOADING_MAP_ICON:10,LOADING_MAP_DATA:10,LOADING_SPINE:20,LOADING_BULLET:10,LOADING_MAP_INFO:5,LOADING_TOWER:5,LOADING_HERO:5,COLOR_HP_RECOVERY:cc.color("#48f31a"),COLOR_HP_GENERAL:cc.color("#fb1818"),COLOR_HP_CRIT:cc.color("#fb1818"),COLOR_HP_MAGIC:cc.color("#e418f6"),COLOR_HP_MAGIC_CRIT:cc.color("#e418f6"),COLOR_HP_SKILL:cc.color("#e418f6"),COLOR_HP_MISS:cc.color("#ffffff"),COLOR_MONEY:cc.color("#ffffff"),COLOR_ABSORB:cc.color("#1188ff"),FLY_HP_TYPE_RECOVERY:1,FLY_HP_TYPE_GENERAL:2,FLY_HP_TYPE_CRIT:3,FLY_HP_TYPE_MAGIC:4,FLY_HP_TYPE_MAGIC_CRIT:5,FLY_HP_TYPE_SKILL:6,FLY_HP_TYPE_MISS:7,FLY_HP_TYPE_ABSORB:8,FLY_HP_TYPE_SECOND:9,SPINE_PATH_COMMON:"effect/battle/",SPINE_PATH_TOWER:"effect/battle/tower/",SPINE_PATH_ENEMY:"effect/battle/enemy/",SPINE_PATH_HERO:"effect/battle/hero/",PREFAB_PATH_BULLET:"prefab/effectPrefab/battle/bullet/",PREFAB_PATH_BATTLE:"prefab/effectPrefab/battle/",SKILL_ATTR_HP:1,SKILL_ATTR_PHYSICAL_ATK:2,SKILL_ATTR_MAGIC_ATK:3,SKILL_ATTR_PHYSICAL_DEFENSE:4,SKILL_ATTR_MAGIC_DEFENSE:5,SKILL_ATTR_CRIT_PROBABILITY:6,SKILL_ATTR_CRIT_HURT:7,SKILL_ATTR_DODGE_PROBABILITY:8,SKILL_ATTR_REPLY_HP:9,SKILL_ATTR_ATK_SPEED:10,SKILL_ATTR_ATK_DISTANCE:11,SKILL_ATTR_ENEMY_GOSH:12,SKILL_ATTR_IGNORE_ARMOR:13,SKILL_ATTR_ADD_HURT:14,SKILL_ATTR_MOVE_SPEED:15,SKILL_ATTR_ALL_ATTACK:16,SKILL_ATTR_ALL_DEFENSE:17,SKILL_ATTR_REBOUND_DAMAGE:18,SKILL_ATTR_FIRE_ARROW:19,SKILL_ATTR_DOUBLE_ATK:20,SKILL_ATTR_TOWER_DISCOUNT:21,SKILL_ATTR_BULLET_SPEED:22,SKILL_ATTR_ATK_ACCUMULATE:23,SKILL_ATTR_MULTIPLE_BULLET:24,SKILL_ATTR_SEND_ENEMY:25,SKILL_ATTR_SECOND_KILL:26,SKILL_ATTR_REDUCE_ARMOR:27,SKILL_ATR_DROP_MONEY:28,SKILL_ATR_SELL_MONEY:29,SKILL_ATR_BATTLE_BLOOD:30,SKILL_ATR_CD_TIME:31,MAIN_PAGE_BATTLE_NONE:0,MAIN_PAGE_BATTLE_STAND:1,MAIN_PAGE_BATTLE_RUN:2,MAIN_PAGE_BATTLE_ATTR:3,MAIN_PAGE_BATTLE_WAIT_ATTR:4,MAIN_PAGE_BATTLE_DIE:5,START_BUFF_IRON:1,START_BUFF_GOLD:2,START_BUFF_EXP:3,BATTLE_FLY_TYPE_KEY:1,BATTLE_FLY_TYPE_PIECE:2,BATTLE_FLY_TYPE_SKILL_PIECE:3,ENEMY_TYPE_NORMAL:1,ENEMY_TYPE_ELITE:2,ENEMY_TYPE_BOSS:3,RESTRAIN_ATTR_TYPE_BARRACK:1,RESTRAIN_ATTR_TYPE_HP_BACK:2,RESTRAIN_ATTR_TYPE_ENEMY_WEAK:3,RESTRAIN_ATTR_TYPE_TOWER_STRONG:4,RESTRAIN_ATTR_TYPE_REVIVE_TIME:5,RESTRAIN_ATTR_TYPE_SKILL_CD:6,RESTRAIN_ATTR_TYPE_SPECIAL_HURT:7,RESTRAIN_ATTR_TYPE_BATTLE_HERO:8,RESTRAIN_ATTR_TYPE_HERO_TOWER:9,RESTRAIN_ATTR_TYPE_HERO_REVIVE:10,RESTRAIN_ATTR_TYPE_SUNDER_ARMOR:11,SPECIAL_ENEMY_TYPE_HOLE:1,SPECIAL_ENEMY_TYPE_FLY:2,ENTER_NEW_RESTRAIN_TYPE_UNLOCK:1,ENTER_NEW_RESTRAIN_TYPE_LEVEL_UP:2,RESTRAIN_TYPE_SGML:1,RESTRAIN_TYPE_TYJY:2,RESTRAIN_TYPE_YXMR:3,RESTRAIN_TYPE_SYZLB:4,RESTRAIN_TYPE_YMSJ:5,RESTRAIN_TYPE_ZNR:6,RESTRAIN_TYPE_JSMR:7,RESTRAIN_TYPE_YXXYX:8,RESTRAIN_TYPE_NGLY:9,RESTRAIN_TYPE_ZJLYX:10,RESTRAIN_TYPE_BYXH:11,RESTRAIN_TYPE_NZHJ:12,RESTRAIN_TYPE_YDXX:13,RESTRAIN_TYPE_SBTJ:14,RESTRAIN_SGML_SKILL_SOLDIER_NUM:1,RESTRAIN_SGML_SKILL_SOLDIER_HP:2,RESTRAIN_SGML_SKILL_SOLDIER_ATK:3,RESTRAIN_TYJY_SKILL_BATTLE_RESTORE:1,RESTRAIN_TYJY_SKILL_REVIVE_TIME:2,RESTRAIN_TYJY_SKILL_CD_TIME:3,RESTRAIN_YXMR_SKILL_ENEMY_HP:1,RESTRAIN_YXMR_SKILL_ENEMY_ATK:2,RESTRAIN_YXMR_SKILL_ENEMY_MOVE:3,RESTRAIN_SYZLB_SKILL_BOSS_HP:1,RESTRAIN_SYZLB_SKILL_BOSS_ATK:2,RESTRAIN_SYZLB_SKILL_BOSS_MOVE:3,RESTRAIN_YMSJ_SKILL_CANNON_DISTANCE:1,RESTRAIN_YMSJ_SKILL_CANNON_MONEY:2,RESTRAIN_YMSJ_SKILL_CANNON_HOLE:3,RESTRAIN_ZNR_SKILL_TOWER_4_ATK:1,RESTRAIN_ZNR_SKILL_TOWER_4_DISTANCE:2,RESTRAIN_ZNR_SKILL_TOWER_4_SPEED:3,RESTRAIN_JSMR_SKILL_MAGIC_ATK:1,RESTRAIN_JSMR_SKILL_MAGIC_DISTANCE:2,RESTRAIN_JSMR_SKILL_MAGIC_FLY:3,RESTRAIN_YXXYX_SKILL_ARROW_CRIT:1,RESTRAIN_YXXYX_SKILL_ARROW_CRIT_HURT:2,RESTRAIN_YXXYX_SKILL_ARROW_SPEED:3,RESTRAIN_NGLY_SKILL_1:1,RESTRAIN_NGLY_SKILL_2:2,RESTRAIN_NGLY_SKILL_3:3,RESTRAIN_ZJLYX_SKILL_1:1,RESTRAIN_ZJLYX_SKILL_2:2,RESTRAIN_ZJLYX_SKILL_3:3,RESTRAIN_BYXH_SKILL_1:1,RESTRAIN_BYXH_SKILL_2:2,RESTRAIN_BYXH_SKILL_3:3,RESTRAIN_NZHJ_SKILL_1:1,RESTRAIN_NZHJ_SKILL_2:2,RESTRAIN_NZHJ_SKILL_3:3,RESTRAIN_YDXX_SKILL_1:1,RESTRAIN_YDXX_SKILL_2:2,RESTRAIN_YDXX_SKILL_3:3,RESTRAIN_SBTJ_SKILL_1:1,RESTRAIN_SBTJ_SKILL_2:2,RESTRAIN_SBTJ_SKILL_3:3,RECOMMEND_TYPE_HERO:1,RECOMMEND_TYPE_HERO_TOWER:2,RECOMMEND_TYPE_TOWER:3,TOWER_UNLOCK_PAGE_UNLOCK:1,TOWER_UNLOCK_PAGE_ACTIVE:2,PAGE_LAYER_MAIN_FUNCTION_PAGE:1,PAGE_LAYER_MAIN_PAGE:2,PAGE_LAYER_TOP_BAR_DOWN:5,PAGE_LAYER_TOP_BAR_DOWN_UP:6,PAGE_LAYER_TOP_BAR:10,PAGE_LAYER_TOP_BAR_UP:15,PAGE_LAYER_PAGE_UP:20,PAGE_LAYER_BROADCAST:95,PAGE_LAYER_GUIDE_LIMIT:99,PAGE_LAYER_GUIDE_HAND:100,PAGE_LAYER_TIP:100,PAGE_LAYER_LOADING_CYCLE:100,MAIN_PAGE_TAG_CHILD:1,MAIN_PAGE_TAG_SHOP:2,MAIN_PAGE_TAG_HERO:3,MAIN_PAGE_TAG_TOWER:4,MAIN_PAGE_TAG_WORLD:5,MAIN_PAGE_TAG_SKILL:6,LOAD_STATE_START:0,LOAD_STATE_RESTORE_DATA:1,LOAD_STATE_CHECK_HOT_UPDATE:2,LOAD_STATE_HOT_UPDATE:3,LOAD_STATE_GOTO_MAIN:5,QUALITY_COLOR_GREEN:"#42c502",QUALITY_COLOR_BLUE:"#2dbaf5",QUALITY_COLOR_PURPLE:"#bf5dff",QUALITY_COLOR_ORANGE:"#ff9500",QUALITY_TYPE_1:1,QUALITY_TYPE_2:2,QUALITY_TYPE_3:3,QUALITY_TYPE_4:4,DROP_POOL_SIZE:6,ITEM_TYPE_BASE:1e3,ITEM_TYPE_COIN:1,ITEM_TYPE_BAG:2,ITEM_TYPE_HERO_PIECE:3,ITEM_TYPE_SKILL_PIECE:4,ITEM_TYPE_ROLE_HEAD:5,ITEM_TYPE_NEW_YEAR_REWARD_BOX:6,ITEM_TYPE_TOWER_PIECE:12,COIN_TYPE_GOLD_BULLION:1001,COIN_TYPE_SILVER:1002,COIN_TYPE_IRON:1003,COIN_TYPE_HEART:1004,COIN_TYPE_EXP:1005,COIN_TYPE_HERO_EXP:1006,COIN_TYPE_POWER:1007,COIN_TYPE_PIGGY_BANK_GOLD:1999,BAG_TYPE_TOP_BOX_TICKET:2001,PRIOR_LOCK_HERO_DROP:51009,PRIOR_UNLOCK_HERO_DROP:51006,BATTLE_BOX_REWARD_TYPE_NORMAL:1,BATTLE_BOX_REWARD_TYPE_TICKET:2,BATTLE_BOX_REWARD_TYPE_RANDOM_PIECE:3,SKILL_UP_CONDITION_INSTANCE:1,SKILL_UP_CONDITION_HERO:2,SKILL_UP_CONDITION_ITEM:3,SKILL_UP_TYPE_UNLOCK:1,SKILL_UP_TYPE_LEVEL:2,SKILL_UP_TYPE_STAR:3,SKILL_RED_TIP_TYPE_NONE:0,SKILL_RED_TIP_TYPE_NEW:1,SKILL_RED_TIP_TYPE_NORMAL:2,ITEM_ADD_SOURCE_DEFAULT:0,ITEM_ADD_SOURCE_INSTANCE_STAR_BOX:1,ITEM_ADD_SOURCE_WORLD_STAR_BOX:2,ITEM_ADD_SOURCE_KEY_BOX:3,ITEM_ADD_SOURCE_TASK_BOX:4,ITEM_ADD_SOURCE_TASK:5,ITEM_ADD_SOURCE_SIGN:6,ITEM_ADD_SOURCE_OFFICE:7,ITEM_ADD_SOURCE_SHOP:8,ITEM_ADD_SOURCE_BATTLE_RESULT:9,ITEM_ADD_SOURCE_HANGE_UP:10,ITEM_ADD_SOURCE_HANGE_UP_AD:11,ITEM_ADD_SOURCE_HANGE_UP_QUICK:12,ITEM_ADD_SOURCE_MAIL:13,ITEM_ADD_SOURCE_GM:14,ITEM_ADD_SOURCE_PIGGY_BANK:15,ITEM_ADD_SOURCE_POWER_AD:16,ITEM_ADD_SOURCE_POWER_BUY:17,ITEM_ADD_SOURCE_POWER_RECOVER:18,ITEM_ADD_SOURCE_POWER_OFFLINE:19,ITEM_ADD_SOURCE_GIFT_CODE:20,ITEM_ADD_SOURCE_PIECE_CHANGE:21,ITEM_ADD_SOURCE_MAIN_TASK:22,ITEM_ADD_SOURCE_INVITE_FRIEND:23,ITEM_ADD_SOURCE_GIFT_SEND:24,ITEM_ADD_SOURCE_SUBSCRIBE:25,ITEM_ADD_SOURCE_YEAR_MONSTER:26,ITEM_ADD_SOURCE_YEAR_TASK:27,ITEM_CONSUME_SOURCE_DEFAULT:0,ITEM_CONSUME_SOURCE_TOWER_UP:1,ITEM_CONSUME_SOURCE_HERO_UP:2,ITEM_CONSUME_SOURCE_HERO_ACTIVE:3,ITEM_CONSUME_SOURCE_OPEN_BOX:4,ITEM_CONSUME_SOURCE_SKILL_UP:5,ITEM_CONSUME_SOURCE_GM:6,ITEM_CONSUME_SOURCE_TOWER_QUALITY:7,ITEM_CONSUME_SOURCE_REVIVE:8,ITEM_CONSUME_SOURCE_BUY_POWER:9,ITEM_CONSUME_SOURCE_HERO_ADD_STAR:10,ITEM_CONSUME_SOURCE_SHOP_BUY_EXP:11,ITEM_CONSUME_SOURCE_SHOP_BUY_GOLD:12,ITEM_CONSUME_SOURCE_SKILL_ADD_STAR:13,ITEM_CONSUME_SOURCE_HERO_CARD_CHANGE:14,TASK_TYPE_GET_HERO_PIECE:101,TASK_TYPE_SHOP_DRAW_CARD:102,TASK_TYPE_KILL_ENEMY_ALL:201,TASK_TYPE_KILL_ENEMY_ID:202,TASK_TYPE_HERO_UP:301,TASK_TYPE_TOWER_UP:302,TASK_TYPE_AD_GET_COIN:401,TASK_TYPE_AD_GET_DIAMOND:402,TASK_TYPE_RESULT_AD_DOUBLE:403,TASK_TYPE_BATTLE_WIN:404,TASK_TYPE_HANGUP_GET_COIN:501,TASK_TYPE_HANGUP_GET_EXP:502,TASK_TYPE_HERO_INTO_TOWER:601,TASK_TYPE_CALL_ENEMY:602,TASK_TYPE_BUILD_TOWER:603,TASK_TYPE_USE_SKILL:604,TASK_TYPE_BARRACK_PEOPLE:605,TASK_TYPE_HERO_BATTLE:701,MAIN_TASK_TYPE_PASS_INSTANCE:10101,MAIN_TASK_TYPE_GET_HERO:10201,MAIN_TASK_TYPE_GET_HERO_COUNT:10202,MAIN_TASK_TYPE_VAN_BATTLE_COUNT:10301,MAIN_TASK_TYPE_TOWER_HERO_BATTLE_COUNT:10302,MAIN_TASK_TYPE_GET_GAY_FRIEND:10401,MAIN_TASK_TYPE_GET_GAY_FRIEND_COUNT:10402,MAIN_TASK_TYPE_HERO_IN_MAP:10501,MAIN_TASK_TYPE_HERO_IN_MAP_COUNT:10502,MAIN_TASK_TYPE_TOWER_LEVEL:10601,MAIN_TASK_TYPE_ALL_TOWER_LEVEL:10602,MAIN_TASK_TYPE_TOWER_BREAK_COUNT:10603,MAIN_TASK_TYPE_TOWER_WEAK:10604,MAIN_TASK_TYPE_ALL_TOWER_WEAK:10605,MAIN_TASK_TYPE_HERO_LEVEL:10701,MAIN_TASK_TYPE_HERO_LEVEL_COUNT:10702,MAIN_TASK_TYPE_HERO_BREAK_COUNT:10703,MAIN_TASK_TYPE_HERO_STAR_LEVEL:10704,MAIN_TASK_TYPE_HERO_STAR_COUNT:10705,MAIN_TASK_TYPE_HERO_WEAK:10706,MAIN_TASK_TYPE_HERO_WEAK_COUNT:10707,MAIN_TASK_TYPE_GET_SKILL:10801,MAIN_TASK_TYPE_GET_SKILL_COUNT:10802,MAIN_TASK_TYPE_SKILL_LEVEL:10803,MAIN_TASK_TYPE_SKILL_LEVEL_COUNT:10804,MAIN_TASK_TYPE_SKILL_STAR:10805,MAIN_TASK_TYPE_SKILL_STAR_COUNT:10806,MAIN_TASK_ATLAS_TYPE_FUNCTION:1,MAIN_TASK_ATLAS_TYPE_HERO:2,MAIN_TASK_ATLAS_TYPE_GAY:3,MAIN_TASK_ATLAS_TYPE_SKILL:4,NEW_YEAR_TASK_TYPE_BATTLE_MONSTER:20101,NEW_YEAR_TASK_TYPE_GROUP_SHARE:20201,NEW_YEAR_TASK_TYPE_GROUP_HELP:20202,NEW_YEAR_TASK_TYPE_INSTANCE_WIN:20301,NEW_YEAR_TASK_TYPE_TOWER_BREAK:20401,NEW_YEAR_TASK_TYPE_HERO_BREAK:20501,NEW_YEAR_TASK_TYPE_TOP_BOX:20601,NEW_YEAR_TASK_TYPE_SHOP_DIAMOND:20602,NEW_YEAR_TASK_STATE_CLOSE:0,NEW_YEAR_TASK_STATE_OPEN:1,NEW_YEAR_TASK_STATE_OVER:2,NEW_YEAR_TASK_STAGE_ALLIANCE:1,NEW_YEAR_TASK_STAGE_NONE_ALLIANCE:2,NEW_YEAR_TASK_TIP_TASK:1,NEW_YEAR_TASK_TIP_MEDAL:2,rankType:{INSTANCE:"instance",STAR:"star"},rankBigType:{FRIEND:"Friend",WORLD:"World",AREA:"Area"},HERO_ITEM_TYPE_PAGE_SHOW:1,HERO_ITEM_TYPE_CHOOSE:2,HERO_ITEM_TYPE_CHOOSE_UNLOCK:3,HERO_ITEM_TYPE_SECOND_CHOOSE:4,HERO_ITEM_TYPE_MAP:5,HERO_ITEM_TYPE_THIRD_CHOOSE:6,HERO_ITEM_TYPE_APPOINT:7,HERO_ITEM_VAN_TYPE_FIRST:1,HERO_ITEM_VAN_TYPE_SECOND:2,HERO_CHOOSE_SOURCE_BATTLE:1,HERO_CHOOSE_SOURCE_TOWER:2,HERO_UP_LEVEL_TYPE_LEVEL:1,HERO_UP_LEVEL_TYPE_BREAK:2,HERO_UP_LEVEL_TYPE_STAR:3,HERO_UP_LEVEL_SOURCE_TYPE_AD:1,HERO_SKILL_TYPE_VAN:1,HERO_SKILL_TYPE_TOWER:2,HERO_SKILL_TYPE_TALENT:3,HERO_PAGE_TAG_HERO:1,HERO_PAGE_TAG_GAY_FRIEND:2,HERO_PAGE_TAG_PIECE_CHANGE:3,HERO_GAY_FRIEND_ITEM_FIGHT:1,HERO_GAY_FRIEND_ITEM_FIGHT_AD:2,HERO_GAY_FRIEND_ITEM_GENERAL:3,HERO_PIECE_CHANGE_ITEM_BASE:1,HERO_PIECE_CHANGE_ITEM_UP:2,HERO_PIECE_CHANGE_ITEM_MOVE:3,BOX_TYPE_SHOP:1,BOX_TYPE_BATTLE:2,SHOP_FREE_TYPE_GOLD:1,SHOP_FREE_TYPE_PIECE:2,SHOP_SILVER_TYPE_AD:1,SHOP_SILVER_TYPE_ONE:2,SHOP_SILVER_TYPE_TWO:3,SHOP_EXP_TYPE_AD:1,SHOP_EXP_TYPE_ONE:2,SHOP_EXP_TYPE_TWO:3,MAIN_TOWER_UP_LEVEL_BREAK:1,MAIN_TOWER_UP_LEVEL_TYPE_COIN:1,MAIN_TOWER_UP_LEVEL_TYPE_AD:2,MAIN_COMMON_CARD_TYPE_TOWER_LEVEL:1,MAIN_COMMON_CARD_TYPE_TOWER_QUALITY:2,MAIN_COMMON_CARD_TYPE_HERO_STAR:3,MAIN_COMMON_CARD_TYPE_HERO_BREAK:4,MAIN_COMMON_CARD_TYPE_HERO_WAKE:5,MAIN_FUNCTION_SHOP:1,MAIN_FUNCTION_WORLD:2,MAIN_FUNCTION_HERO:3,MAIN_FUNCTION_TOWER:4,MAIN_FUNCTION_RANK:5,MAIN_FUNCTION_TASK:6,MAIN_FUNCTION_HANGUP:7,MAIN_FUNCTION_SIGN:8,MAIN_FUNCTION_BATTLE:9,MAIN_FUNCTION_BATTLE_BOX:10,MAIN_FUNCTION_SHOP_TOP_BOX:11,BATTLE_FUNCTION_SPEED:12,MAIN_FUNCTION_QUICKLY_BATTLE:13,MAIN_FUNCTION_MAIL:14,MAIN_FUNCTION_VIP:16,MAIN_FUNCTION_PIGGY_BANK:17,MAIN_FUNCTION_SKILL:18,MAIN_FUNCTION_RESTRAIN:19,MAIN_FUNCTION_BROADCAST:20,MAIN_FUNCTION_SHOP_PIECE:21,MAIN_FUNCTION_PIECE_CHANGE:22,MAIN_FUNCTION_INVITE:24,MAIN_FUNCTION_RANK_FRIEND:25,MAIN_FUNCTION_RANK_CITY:26,MAIN_FUNCTION_RANK_WORLD:27,MAIN_FUNCTION_NEW_YEAR_ACTIVITY:28,MAIN_FUNCTION_ALLIANCE:29,PICTORIAL_TYPE_TOWER:1,PICTORIAL_TYPE_ENEMY:2,VIP_PRIVILEGE_TYPE_NEW_HERO:"newHeroLayout",VIP_PRIVILEGE_TYPE_SHOP_COIN:"shopCoinLayout",VIP_PRIVILEGE_TYPE_SHOP_BOX:"shopBoxLayout",VIP_PRIVILEGE_TYPE_SKILL_CARD:"shopSkillCardLayout",VIP_PRIVILEGE_TYPE_SHOP_SILVER:"shopSilverLayout",VIP_PRIVILEGE_TYPE_SHOP_EXP:"shopExpLayout",VIP_PRIVILEGE_TYPE_BATTLE_BOX:"battleBoxLayout",VIP_PRIVILEGE_TYPE_BATTLE_RESULT:"battleResultLayout",VIP_PRIVILEGE_TYPE_HANGUP:"hangUpLayout",VIP_PRIVILEGE_TYPE_WAVE:"waveLayout",VIP_PRIVILEGE_TYPE_OUT_IRON:"outIronLayout",VIP_PRIVILEGE_TYPE_BATTLE_SPEED:"battleSpeedLayout",VIP_PRIVILEGE_TYPE_BATTLE_VAN:"battleVanLayout",VIP_PRIVILEGE_TYPE_HANGUP_DOUBLE:"quickHangUpDoubleLayout",VIP_PRIVILEGE_TYPE_HEIGHT_DEFEND:"heightDefendLayout",VIP_PRIVILEGE_TYPE_QUICK_DEFEND:"quickDefendLayout",VIP_PRIVILEGE_TYPE_HERO_TOWER:"heroTowerLayout",VIP_PRIVILEGE_TYPE_GAY_FRIEND:"gayFriendLayout",VIP_PRIVILEGE_TYPE_FREE_POWER:"freePowerLayout",MAIL_TYPE_FEED_BACK:1,MAIL_TYPE_GLOBAL:2,MAIL_TYPE_PERSON:3,PUSH_OFFLINE_EARNINGS:1,PUSH_FIXED_REMIND:2,PUSH_BOX_REMIND:3,PUSH_LOTTERY_TIMES:4,PUSH_OFFLINE_EARNINGS_TEN:5,PUSH_VIP_LEVEL:6,COMMON_REWARD_PAGE_MAIN_CHAPTER_BOX:1,COMMON_REWARD_PAGE_MAIN_SHOP:2,COMMON_REWARD_PAGE_WORLD_BOX:3,COMMON_REWARD_PAGE_TASK_BOX:4,COMMON_REWARD_PAGE_MAIL:5,COMMON_REWARD_PAGE_FREE_POWER:6,COMMON_REWARD_PAGE_NEW_YEAR_TASK:7,SKILL_ITEM_TYPE_NORMAL:1,SKILL_ITEM_TYPE_USE:2,SKILL_ITEM_TYPE_SELECT:3,SKILL_ITEM_TYPE_STAR:4,COMMON_TIPS_SKILL:1,COMMON_TIPS_ITEM:2,TIP_TYPE_COMMON:1,TIP_TYPE_HERO:2,LOSE_JUMP_HERO_UP:1,LOSE_JUMP_TOWER_UP:2,LOSE_JUMP_HERO_CHANGE:3,LOSE_JUMP_TOWER_CHANGE:4,LOSE_JUMP_SKILL:5,DISTANCE_TYPE_CALL_2:0,DISTANCE_TYPE_SEND_1:1,DISTANCE_TYPE_SEND_2:2,PLOT_TYPE_ENTER:0,PLOT_TYPE_START:1,PLOT_TYPE_WIN:2,PLOT_TYPE_LOSE:3,BROADCAST_TYPE_VIP:1,BROADCAST_TYPE_GET_HERO:2,BROADCAST_TYPE_HERO_UPGRADE:3,BROADCAST_TYPE_HERO_STAR:4,BROADCAST_TYPE_HERO_QUALITY:5,BROADCAST_TYPE_TOWER_UPGRADE:6,BROADCAST_TYPE_TOWER_QUALITY:7,BROADCAST_TYPE_PASS_CHAPTER:8,BROADCAST_TYPE_UNLOCK_RESTRAIN:9,BROADCAST_TYPE_UP_SKILL_STAR:10,BROADCAST_TYPE_UNLOCK_SKILL:11,HERO_TYPE_SHOW:0,HERO_TYPE_COMING:1,HERO_TYPE_HEAD:2,HEAD_TYPE_OTHER:1,HEAD_TYPE_HERO:2,SHARE_TYPE_AD:1,SHARE_TYPE_INVITE:2,SHARE_TYPE_RANK:3,SHARE_TYPE_VIP:4,SHARE_TYPE_HERO:5,SHARE_TYPE_TOWER:6,SHARE_TYPE_POWER:7,FREE_POWER_TYPE_MINI_FRIST:1,FREE_POWER_TYPE_MINI:2,FREE_POWER_TYPE_DESK_FRIST:3,FREE_POWER_TYPE_DESK:4,FREE_POWER_TYPE_FLOAT_FIRST:5,FREE_POWER_TYPE_FLOAT:6,FREE_POWER_TYPE_CUSTOMER_SERVICE:99,LOTTERY_TYPE_TASK:1,LOTTERY_TYPE_ALLIANCE:2,GUIDE_TYPE_DIALOG:0,GUIDE_TYPE_HAND:1,GUIDE_TYPE_HAND_DIALOG:2,GUIDE_TYPE_POP_UP:3,GUIDE_TYPE_BUBBLE:4,DIALOG_TYPE_GUIDE:1,DIALOG_TYPE_PLOT:2,GUIDE_DEFAULT_HERO_ID:43001,GUIDE_DEFAULT_TOWER_1_TYPE:1,GUIDE_DEFAULT_TOWER_2_TYPE:2,GUIDE_TYPE_INSTANCE_1:0,GUIDE_TYPE_UPGRADE_TOWER_1:1,GUIDE_TYPE_INSTANCE_2:2,GUIDE_TYPE_UPGRADE_TOWER_2:3,GUIDE_TYPE_INSTANCE_3:4,GUIDE_TYPE_UNLOCK_TASK:5,GUIDE_TYPE_GET_HERO_2:6,GUIDE_TYPE_UNLOCK_MAP:7,GUIDE_TYPE_OPEN_BOX:8,GUIDE_TYPE_SKILL_CALL_1:9,GUIDE_TYPE_SKILL_SEND_1:10,GUIDE_TYPE_SKILL_CALL_2:11,GUIDE_TYPE_SKILL_SEND_2:12,GUIDE_TYPE_INSTANCE_4:13,GUIDE_TYPE_INSTANCE_5:14,GUIDE_TYPE_GET_HERO_1:15,GUIDE_TYPE_INSTANCE_6:16,GUIDE_TYPE_INSTANCE_7:17,GUIDE_TYPE_INSTANCE_10:18,GUIDE_TYPE_HERO_ENTER_TOWER_2:19,GUIDE_TYPE_HERO_ENTER_TOWER_3:20,GUIDE_TYPE_HERO_ENTER_TOWER_4:21,GUIDE_TYPE_SKILL_UPGRADE:22,GUIDE_TYPE_SKILL_UNLOCK:23,GUIDE_TYPE_VIP_OPEN:24,GUIDE_TYPE_RESTRAIN_OPEN:25,GUIDE_TYPE_RESTRAIN_UNLOCK:26,GUIDE_TYPE_SECOND_HERO:27,OTHER_TYPE_MAX:27,GUIDE_TYPE_INSTANCE_1_1:1,GUIDE_TYPE_INSTANCE_1_2:2,GUIDE_TYPE_INSTANCE_1_3:3,GUIDE_TYPE_INSTANCE_1_4:4,GUIDE_TYPE_INSTANCE_1_5:5,GUIDE_TYPE_INSTANCE_1_6:6,GUIDE_TYPE_INSTANCE_1_7:7,GUIDE_TYPE_INSTANCE_1_8:8,GUIDE_TYPE_INSTANCE_1_9:9,GUIDE_TYPE_INSTANCE_1_a:10,GUIDE_TYPE_INSTANCE_1_b:11,GUIDE_TYPE_INSTANCE_1_c:12,GUIDE_TYPE_INSTANCE_1_c_1:13,GUIDE_TYPE_INSTANCE_1_c_2:14,GUIDE_TYPE_INSTANCE_1_c_3:15,GUIDE_TYPE_INSTANCE_1_d:16,GUIDE_TYPE_INSTANCE_1_e:17,GUIDE_TYPE_INSTANCE_1_e_1:18,GUIDE_TYPE_INSTANCE_1_e_2:19,GUIDE_TYPE_INSTANCE_1_f:20,GUIDE_TYPE_INSTANCE_1_g:21,GUIDE_TYPE_INSTANCE_1_h:22,GUIDE_TYPE_INSTANCE_1_i:23,GUIDE_TYPE_INSTANCE_1_i_2:24,GUIDE_TYPE_INSTANCE_2_1:2001,GUIDE_TYPE_INSTANCE_2_2:2002,GUIDE_TYPE_INSTANCE_2_3:2003,GUIDE_TYPE_INSTANCE_2_4:2004,GUIDE_TYPE_INSTANCE_2_5:2005,GUIDE_TYPE_INSTANCE_2_6:2006,GUIDE_TYPE_INSTANCE_2_7:2007,GUIDE_TYPE_INSTANCE_2_8:2008,GUIDE_TYPE_INSTANCE_2_9:2009,GUIDE_TYPE_INSTANCE_2_a:2010,GUIDE_TYPE_INSTANCE_2_b:2011,GUIDE_TYPE_INSTANCE_2_c:2012,GUIDE_TYPE_INSTANCE_2_d:2013,GUIDE_TYPE_INSTANCE_2_e:2014,GUIDE_TYPE_INSTANCE_2_f:2015,GUIDE_TYPE_INSTANCE_3_1:4001,GUIDE_TYPE_INSTANCE_3_2:4002,GUIDE_TYPE_INSTANCE_3_4:4003,GUIDE_TYPE_INSTANCE_3_4_1:4004,GUIDE_TYPE_INSTANCE_3_4_2:4005,GUIDE_TYPE_INSTANCE_3_5:4006,GUIDE_TYPE_INSTANCE_3_6:4007,GUIDE_TYPE_INSTANCE_3_7:4008,GUIDE_TYPE_INSTANCE_3_8:4009,GUIDE_TYPE_INSTANCE_3_9:4010,GUIDE_TYPE_INSTANCE_3_10:4011,GUIDE_TYPE_INSTANCE_3_a:4012,GUIDE_TYPE_INSTANCE_3_b:4013,GUIDE_TYPE_INSTANCE_3_c:4014,GUIDE_TYPE_INSTANCE_3_d:4015,GUIDE_TYPE_INSTANCE_3_e:4016,GUIDE_TYPE_INSTANCE_4_1:13001,GUIDE_TYPE_INSTANCE_4_4:13002,GUIDE_TYPE_INSTANCE_4_5:13003,GUIDE_TYPE_INSTANCE_4_6:13004,GUIDE_TYPE_INSTANCE_5_0:14001,GUIDE_TYPE_INSTANCE_5_1:14002,GUIDE_TYPE_INSTANCE_5_2:14003,GUIDE_TYPE_INSTANCE_5_3:14004,GUIDE_TYPE_INSTANCE_6_1:16001,GUIDE_TYPE_INSTANCE_7_1:17001,GUIDE_TYPE_INSTANCE_10_1:18001,GUIDE_TYPE_INSTANCE_10_2:18002,GUIDE_TYPE_INSTANCE_10_3:18003,GUIDE_TYPE_UPGRADE_TOWER_1_1:1001,GUIDE_TYPE_UPGRADE_TOWER_1_2:1002,GUIDE_TYPE_UPGRADE_TOWER_1_3:1003,GUIDE_TYPE_UPGRADE_TOWER_1_4:1004,GUIDE_TYPE_UPGRADE_TOWER_1_5:1005,GUIDE_TYPE_UPGRADE_TOWER_2_1:3001,GUIDE_TYPE_UPGRADE_TOWER_2_2:3002,GUIDE_TYPE_UPGRADE_TOWER_2_3:3003,GUIDE_TYPE_UPGRADE_TOWER_2_4:3004,GUIDE_TYPE_UPGRADE_TOWER_2_5:3005,GUIDE_TYPE_UPGRADE_TOWER_2_6:3006,GUIDE_TYPE_UNLOCK_TASK_1:5001,GUIDE_TYPE_GET_HERO_2_1:6001,GUIDE_TYPE_GET_HERO_2_2:6002,GUIDE_TYPE_GET_HERO_2_3:6003,GUIDE_TYPE_UNLOCK_MAP_1:7001,GUIDE_TYPE_UNLOCK_MAP_1_2:7002,GUIDE_TYPE_UNLOCK_MAP_1_3:7003,GUIDE_TYPE_UNLOCK_MAP_2:7004,GUIDE_TYPE_UNLOCK_MAP_3:7005,GUIDE_TYPE_OPEN_BOX_1:8001,GUIDE_TYPE_OPEN_BOX_2:8002,GUIDE_TYPE_OPEN_BOX_3:8003,GUIDE_TYPE_OPEN_BOX_4:8004,GUIDE_TYPE_OPEN_BOX_5:8005,GUIDE_TYPE_SKILL_CALL_1_1:9001,GUIDE_TYPE_SKILL_CALL_1_2:9002,GUIDE_TYPE_SKILL_CALL_1_3:9003,GUIDE_TYPE_SKILL_CALL_1_4:9004,GUIDE_TYPE_SKILL_CALL_1_5:9005,GUIDE_TYPE_SKILL_SEND_1_1:10001,GUIDE_TYPE_SKILL_SEND_1_2:10002,GUIDE_TYPE_SKILL_SEND_1_3:10003,GUIDE_TYPE_SKILL_SEND_1_4:10004,GUIDE_TYPE_SKILL_SEND_1_5:10005,GUIDE_TYPE_SKILL_CALL_2_1:11001,GUIDE_TYPE_SKILL_CALL_2_2:11002,GUIDE_TYPE_SKILL_SEND_2_1:12001,GUIDE_TYPE_SKILL_SEND_2_2:12002,GUIDE_TYPE_GET_HERO_1_1:15001,GUIDE_TYPE_GET_HERO_1_2:15002,GUIDE_TYPE_GET_HERO_1_3:15003,GUIDE_TYPE_GET_HERO_1_4:15004,GUIDE_TYPE_GET_HERO_1_5:15005,GUIDE_TYPE_GET_HERO_1_6:15006,GUIDE_TYPE_GET_HERO_1_7:15007,GUIDE_TYPE_GET_HERO_1_8:15008,GUIDE_TYPE_GET_HERO_1_9:15009,GUIDE_TYPE_GET_HERO_1_a:15010,GUIDE_TYPE_GET_HERO_1_b:15011,GUIDE_TYPE_GET_HERO_1_c:15012,GUIDE_TYPE_GET_HERO_1_d:15013,GUIDE_TYPE_HERO_ENTER_TOWER_2_1:19001,GUIDE_TYPE_HERO_ENTER_TOWER_2_2:19002,GUIDE_TYPE_HERO_ENTER_TOWER_2_3:19003,GUIDE_TYPE_HERO_ENTER_TOWER_2_4:19004,GUIDE_TYPE_HERO_ENTER_TOWER_3_1:20001,GUIDE_TYPE_HERO_ENTER_TOWER_3_2:20002,GUIDE_TYPE_HERO_ENTER_TOWER_3_3:20003,GUIDE_TYPE_HERO_ENTER_TOWER_3_4:20004,GUIDE_TYPE_HERO_ENTER_TOWER_4_1:21001,GUIDE_TYPE_HERO_ENTER_TOWER_4_2:21002,GUIDE_TYPE_HERO_ENTER_TOWER_4_3:21003,GUIDE_TYPE_HERO_ENTER_TOWER_4_4:21004,GUIDE_TYPE_SKILL_UPGRADE_1:22001,GUIDE_TYPE_SKILL_UPGRADE_2:22002,GUIDE_TYPE_SKILL_UPGRADE_3:22003,GUIDE_TYPE_SKILL_UPGRADE_4:22004,GUIDE_TYPE_SKILL_UNLOCK_1:23001,GUIDE_TYPE_SKILL_UNLOCK_2:23002,GUIDE_TYPE_SKILL_UNLOCK_3:23003,GUIDE_TYPE_VIP_OPEN_1:24001,GUIDE_TYPE_VIP_OPEN_2:24002,GUIDE_TYPE_RESTRAIN_OPEN_1:25001,GUIDE_TYPE_RESTRAIN_OPEN_2:25002,GUIDE_TYPE_RESTRAIN_OPEN_3:25003,GUIDE_TYPE_RESTRAIN_UNLOCK_1:26001,GUIDE_TYPE_RESTRAIN_UNLOCK_1_2:26002,GUIDE_TYPE_RESTRAIN_UNLOCK_1_3:26003,GUIDE_TYPE_RESTRAIN_UNLOCK_1_4:26004,GUIDE_TYPE_RESTRAIN_UNLOCK_2:26005,GUIDE_TYPE_RESTRAIN_UNLOCK_3:26006,GUIDE_TYPE_SECOND_HERO_1:27001,GUIDE_TYPE_SECOND_HERO_2:27002,BUBBLE_TYPE_BATTLE_BOX:1,BUBBLE_TYPE_BATTLE_SPEED:2,BUBBLE_TYPE_BATTLE_SPEED_TWO:3,BUBBLE_TYPE_BATTLE_SPEED_TRY:4,BUBBLE_TYPE_BATTLE_ADD_HERO:5,BUBBLE_TYPE_WORLD_DEFEND:6,BUBBLE_TYPE_BATTLE_START:7,BUBBLE_TYPE_CLICK_INSTANCE:8,ALLIANCE_SERVER_ERROR_CODE_10000:"10000",ALLIANCE_SERVER_ERROR_CODE_10001:"10001",ALLIANCE_SERVER_ERROR_CODE_10002:"10002",ALLIANCE_SERVER_ERROR_CODE_10003:"10003",ALLIANCE_SERVER_ERROR_CODE_10004:"10004",ALLIANCE_SERVER_ERROR_CODE_10005:"10005",ALLIANCE_SERVER_ERROR_CODE_10006:"10006",ALLIANCE_SERVER_ERROR_CODE_10007:"10007",ALLIANCE_SERVER_ERROR_CODE_10008:"10008",ALLIANCE_SERVER_ERROR_CODE_10009:"10009",ALLIANCE_SERVER_ERROR_CODE_10010:"10010",ALLIANCE_SERVER_ERROR_CODE_10011:"10011",ALLIANCE_SERVER_ERROR_CODE_10012:"10012",ALLIANCE_SERVER_ERROR_CODE_10013:"10013",ALLIANCE_SERVER_ERROR_CODE_10014:"10014",ALLIANCE_SERVER_ERROR_CODE_10015:"10015",ALLIANCE_SERVER_ERROR_CODE_10016:"10016",ALLIANCE_SERVER_ERROR_CODE_10017:"10017",ALLIANCE_EXIT_TYPE_SELF:1,ALLIANCE_EXIT_TYPE_OTHER:2,ALLIANCE_EXIT_TYPE_RED_DOUBLE:3,ALLIANCE_CP_TYPE_AD:"ad",ALLIANCE_CP_TYPE_SHARE:"share",ALLIANCE_STATE_NONE:0,ALLIANCE_STATE_CLOSE:1,ALLIANCE_STATE_OPEN:2,SERVER_PARAM_JOIN_QQ_GROUP:"joinQQGroupParams",SERVER_PARAM_SHOW_JOIN_QQ:"isShowJoinQQList",SERVER_PARAM_BROADCAST_INTERVAL:"broadcastIntervalBegin",SERVER_PARAM_ALLIANCE_OPEN:"allianceController",SERVER_PARAM_UPDATE_VERSION:"updateVersionList",SERVER_PARAM_WE_CHAT_SHARE_MINI_GAME:"wechatShareMiniGame",SERVER_PARAM_WE_CHAT_SHARE_GROUP:"wechatShareAppGroup",SERVER_PARAM_WE_CHAT_SHARE_SHOW:"wechatShareShow",SERVER_PARAM_NEW_YEAR_ACTIVITY_OPEN:"newYearActivityOpen",SERVER_PARAM_WE_CHAT_SHARE_FRIEND:"wechatShareFriend",SERVER_PARAM_WE_CHAT_SHARE_POWER:"wechatSharePower",SERVER_PARAM_WE_CHAT_SHARE_VIP:"wechatShareVip",SERVER_PARAM_WE_CHAT_SHARE_RANK:"wechatShareRank",SERVER_PARAM_WE_CHAT_SHARE_TITLE:"wechatShareAppTitle",SERVER_PARAM_WE_CHAT_SHARE_COUNT_LIMIT:"wechatShareCountLimit",SERVER_PARAM_WE_CHAT_ONLY_SHOW_BANNER:"wechatOnlyShowBanner",SAVE_PLAYER_BASE_DATA:"WECHAT_1_SUPER_TOWER_SAVE_PLAYER_BASE_DATA",SAVE_ITEM_DATA:"WECHAT_1_SUPER_TOWER_SAVE_ITEM_DATA",SAVE_INSTANCE_DATA:"WECHAT_1_SUPER_TOWER_SAVE_INSTANCE_DATA",SAVE_GUIDE_DATA:"WECHAT_1_SUPER_TOWER_SAVE_GUIDE_DATA",SAVE_COMMON_DATA:"WECHAT_1_SUPER_TOWER_SAVE_COMMON_DATA",SAVE_LANGUAGE_SETTING_DATA:"WECHAT_1_SUPER_TOWER_SAVE_LANGUAGE_SETTING_DATA",SAVE_SETTING_DATA:"WECHAT_1_SUPER_TOWER_SAVE_SETTING_DATA",SAVE_TOWER_DATA:"WECHAT_1_SUPER_TOWER_SAVE_TOWER_DATA",SAVE_HERO_DATA:"WECHAT_1_SUPER_TOWER_SAVE_HERO_DATA",SAVE_SHOP_DATA:"WECHAT_1_SUPER_TOWER_SAVE_SHOP_DATA",SAVE_FUNCTION_DATA:"WECHAT_1_SUPER_TOWER_SAVE_FUNCTION_DATA",SAVE_TASK_DATA:"WECHAT_1_SUPER_TOWER_SAVE_TASK_DATA",SAVE_PUSH_DATA:"WECHAT_1_SUPER_TOWER_SAVE_PUSH_DATA",SAVE_SIGN_DATA:"WECHAT_1_SUPER_TOWER_SAVE_SIGN_DATA",SAVE_VIP_DATA:"WECHAT_1_SUPER_TOWER_SAVE_VIP_DATA",SAVE_SKILL_DATA:"WECHAT_1_SUPER_TOWER_SAVE_SKILL_DATA",SAVE_BROADCAST_DATA:"WECHAT_1_SUPER_TOWER_SAVE_BROADCAST_DATA",SAVE_PIGGY_BANK_DATA:"WECHAT_1_SUPER_TOWER_SAVE_PIGGY_BANK_DATA",SAVE_FIRST_START_DATA:"WECHAT_1_SUPER_TOWER_SAVE_FIRST_START_DATA",SAVE_GET_USER_PERMISSION_DATA:"WECHAT_1_SUPER_TOWER_SAVE_GET_USER_PERMISSION_DATA",SAVE_GET_LOCATION_PERMISSION_DATA:"WECHAT_1_SUPER_TOWER_SAVE_GET_LOCATION_PERMISSION_DATA",SAVE_INVITE_FRIEND_DATA:"WECHAT_1_SUPER_TOWER_SAVE_INVITE_FRIEND_DATA",SAVE_NEW_YEAR_DATA:"WECHAT_1_SUPER_TOWER_SAVE_NEW_YEAR_DATA",SAVE_ALLIANCE_DATA:"WECHAT_1_TOWER_SAVE_ALLIANCE_DATA"};i.exports=a,cc._RF.pop()},{}],GameEnemy:[function(e,t){"use strict";cc._RF.push(t,"1f1cbm8ZSFJc7Cn9bHbFIGV","GameEnemy");var i=e("Aft");cc.Class({extends:cc.Component,properties:{},start:function(){},bindingNode:function(){this.hpNode=cc.find("hp",this.node),this.hpProgressBg=cc.find("hp/hpProgressBg",this.node),this.hpProgressBar=cc.find("hp/hpProgress",this.node).getComponent("cc.ProgressBar"),this.loadEffectNode=cc.find("loadEffect",this.node),this.hitEffectNode=cc.find("hitEffect",this.node),this.bulletHitAni_1=cc.find("hitEffect/tower_bullet_hit",this.node).getComponent("cc.Animation"),this.bulletHitAni_1.on("finished",this.onFinished,this),this.hitBodyEffect(!0),this.bodyNode=cc.find("body",this.node),this.spineNode=cc.find("body/spine",this.node),this.pointNode=cc.find("body/point",this.node),this.pointNode.active=!1},hitBodyEffect:function(e){this.showEnemyStopEffect(!1),this.showFearEffect(!1),this.showSilenceEffect(!1),this.showFireDotEffect(!1),this.showIceSlowEffect(!1),this.showPoisonDotEffect(!1),this.showShieldEffect(!1),e&&(this.dieActionTime=0,this.hideTime=0,this.fireAllTime=0,this.dotAllTime=0,this.poisonTotalTime=0,this.limitSkillTime=0,this.funkTime=0,this.updatePhysicalDefTime=0,this.updateMagicDefTime=0,this.addHurtTime=0,this.dieHpTime=0,this.dieOverTime=0,this.reduceSpeedTime=0,this.addSpeedTime=0,this.skillSlowAtkSpeedTime=0,this.cacheHurtData=[],this.faintedTime=0)},initData:function(e){var t=this;this.node.stopAllActions(),this.bindingNode(),this.checkShootTime=0,this.checkTargetEnemy=!1,this.dieActionTime=0,this.enemyId=e.enemyId,this.routeId=e.routeId,this.bodyNode.scale=1,this.dieOverTime=0,this.updatePhysicalDefTime=0,this.updateMagicDefTime=0,this.addHurtTime=0,this.dieHpPercent=0,this.dieHpTime=0,this.isLastEnemy=!1,this.hideTime=0,this.baseTimeScale=1,this.addSpeedTime=0,this.skillSlowAtkSpeedTime=0,this.moveSoundTime=.1,i.battleScene.enemyId;var a=i.player.gmModule.getShowEnemyId();0<a&&(this.enemyId=a),this.cacheMoveSpeed=0,this.bossPoseTime=0,this.maxPoseTime=0,this.isNeedPose=!1,this.curPoseTime=0,this.enemyData=i.templateManager.getEnemyDataById(this.enemyId),this.isBoss=this.enemyData.type==i.constant.ENEMY_TYPE_BOSS,this.isElite=this.enemyData.type==i.constant.ENEMY_TYPE_ELITE,i.battleScene.curChapter==i.constant.YEAR_MONSTER_CHAPTER_ID&&this.enemyId==i.constant.YEAR_MONSTER_ENEMY_ID?(i.battleScene.showYearMonsterWarn(),this.maxPoseTime=4,this.bossPoseTime=this.maxPoseTime,this.isNeedPose=!0):this.isBoss&&i.battleScene.showGameBossWarn(),this.isFly=!!this.enemyData.isFly&&0<this.enemyData.isFly,this.maxShootDistance=this.enemyData.viewRange,this.minShootDistance=this.enemyData.switchAttackRange,this.bulletFaintedRate=0,this.bulletFaintedTime=0,this.enemyData.atkSkill&&this.enemyData.atkSkill[0][0]==i.constant.ENEMY_SKILL_TYPE_FAINTED&&(this.bulletFaintedRate=this.enemyData.atkSkill[0][1]/100,s=i.templateManager.getEnemySkillDataById(i.constant.ENEMY_SKILL_TYPE_FAINTED),this.bulletFaintedTime=s.parameter[0][1]/1e3),this.hitEffectNode.setPosition(cc.v2(0,this.getHeadOffsetHeight()-30)),this.loadEffectNode.setPosition(cc.v2(0,this.getHeadOffsetHeight()-30)),this.skillId=0,this.maxSkillTime=0,this.skillData=null,this.curSkillTime=0,this.maxSkillStandTime=0,this.curSkillStandTime=0,this.maxBigSkillAtkNum=0,this.curBigSkillAtkNum=0,this.skillType=-1,this.isBattleSkill=!1,this.killBombData=null,this.enemyData.skill&&(this.skillId=this.enemyData.skill[0][0],this.maxSkillTime=100<this.enemyData.skill[0][1]?this.enemyData.skill[0][1]/1e3:-1,this.maxSkillStandTime=this.enemyData.skill[0][2]/1e3,this.skillData=i.templateManager.getEnemySkillDataById(this.skillId),this.isBattleSkill=0<this.skillData.isInWar,this.skillData.parameter&&(this.skillType=this.skillData.parameter[0][0]),this.enemyData.startCD&&(this.curSkillTime=this.maxSkillTime*this.enemyData.startCD/1e4),this.maxBigSkillAtkNum=this.enemyData.skill[0][1]<100?this.enemyData.skill[0][1]:-1,this.curBigSkillAtkNum=0),this.hp=this.enemyData.hp*i.battleScene.hpRate;var n,o,s=i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_ENEMY_WEAK,i.constant.SKILL_ATTR_HP,this.enemyData.type);0!=s&&(this.hp=Math.floor(this.hp*(1+s)),this.hp<1&&(this.hp=1),this.enemyData.type==i.constant.ENEMY_TYPE_NORMAL?(n=i.player.heroModule.getRestrainSkillList(i.constant.RESTRAIN_TYPE_YXMR),i.battleScene.gameBattleUIObj.showGayFriendTriggerTips(n)):(o=i.player.heroModule.getRestrainSkillList(i.constant.RESTRAIN_TYPE_SYZLB),i.battleScene.gameBattleUIObj.showGayFriendTriggerTips(o)),i.Logger.debug("\u7f81\u7eca\u6280\u80fd \u654c\u4eba\u8840\u91cf\u524a\u5f31 weakPercent = "+s)),this.setMaxHp(this.hp),this.physicalAtk=this.enemyData.physicalAttack*i.battleScene.attackRate,this.magicAtk=this.enemyData.magicAttack*i.battleScene.attackRate,this.physicalDef=this.enemyData.physicalDefense,this.magicDef=this.enemyData.magicDefense,this.critRate=this.enemyData.critRate/100,this.nearDodgeRate=this.enemyData.dodgeRate?this.enemyData.dodgeRate/100:0,this.farDodgeRate=this.enemyData.longDodgeRate?this.enemyData.longDodgeRate/100:0,this.faintedTime=0,this.ignoreArmoraNum=0,this.fireAllTime=0,this.curMoveStep=e.curMoveStep||0,this.maxMoveStep=i.battleScene.gameMapObj.getRouteMoveLength(this.routeId)-1,this.curMoveIndex=0,this.maxMoveIndex=this.enemyData.moveOnce,this.moveSpeed=this.enemyData.speed/10,this.hurtHeart=this.enemyData.baseLife,this.dropMoney=Math.floor(this.enemyData.baseIron*i.battleScene.ironRate),this.curAttackTime=0,this.maxAttackTime=this.enemyData.attackCD/1e3,this.tarHeroObj=null,this.funkTime=-1,this.spineNode.scale=this.enemyData.scaling/1e4,this.shadowNode.scaleX=this.enemyData.shadowScaling[0]/1e4,this.shadowNode.scaleY=this.enemyData.shadowScaling[1]/1e4,this.shadowNode.opacity=255,this.shadowRadius=this.shadowNode.width*this.shadowNode.scaleX/2,i.player.gmModule.isWxTowerSpine()&&(this.shadowNode.active=!1),i.player.gmModule.isHideEnemySpine()&&(this.spineNode.active=!1,this.shadowNode.active=!0),this.hpNode.setPosition(cc.v2(0,this.enemyData.hpBarHeight)),this.spineNode.setPosition(cc.v2(0,0)),this.isIntoHole=!1,this.intoHoleTime=0,this.spineNode.angle=0,this.spineNode.stopAllActions(),this.hpNode.stopAllActions(),this.atkUpdateHpTime=0,this.cacheHurtData=[],this.limitSkillTime=0,this.isImmunityControl=0<this.enemyData.isImmune,this.isImmunityDot=0<this.enemyData.isDot,this.isImmunityCharm=!(0<this.enemyData.isTraitor),this.dieNextEnemyId=this.enemyData.nextEnemy||-1,this.isPlayDieEffect=0<this.enemyData.isDeadEffect,this.curMoveStep<=0&&this.startFadeInEffect(),this.skillData&&this.skillData.id==i.constant.ENEMY_SKILL_TYPE_BLEW&&(n=this.skillData.parameter[0][1],o=this.skillData.atkParameter[0][2],s=this.skillData.bulletID,r=this.skillData.atkParameter[0][3]/1e4,e=o+this.physicalAtk*r,r=o+this.magicAtk*r,this.killBombData={targetType:n,hurt:o,bulletId:s,physicalAtk:e,magicAtk:r}),this.updatePos(),this.enemySpine=this.spineNode.getComponent(sp.Skeleton);var r=this.enemyData.appearance;r=i.constant.SPINE_PATH_COMMON+this.enemyData.path+"/"+r,i.battleScene.getSpineData(r,function(e){e&&(t.enemySpine.skeletonData=e,t.enemySpine.premultipliedAlpha=0<t.enemyData.isPremultipliedAlpha,t.enemySpine.timeScale=i.battleScene.battleSpeedPercent*t.baseTimeScale,t.curState=-1,t.setEnemyState(i.constant.ENEMY_STATE_MOVE),t.updateEnemyDirAction(),i.battleScene.skillEnemySlowData&&0<i.battleScene.skillEnemySlowData.atkSpeedTime&&(t.skillSlowAtkSpeed(i.battleScene.skillEnemySlowData.atkSpeedPercent,i.battleScene.skillEnemySlowData.atkSpeedTime),t.updateSpeed(i.battleScene.skillEnemySlowData.moveSpeedPercent,i.battleScene.skillEnemySlowData.atkSpeedTime)))}),0!=(r=i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_ENEMY_WEAK,i.constant.SKILL_ATTR_MOVE_SPEED,this.enemyData.type))&&(this.moveSpeed*=1+r,i.Logger.debug("\u7f81\u7eca\u6280\u80fd \u654c\u4eba\u79fb\u52a8\u901f\u5ea6\u524a\u5f31 movePercent = "+r)),this.addHurtData=null,0!=(r=i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_ENEMY_WEAK,i.constant.SKILL_ATTR_ADD_HURT,this.enemyData.type))&&(this.addHurtData={addHurtPercent:r,addHurtTime:1/i.constant.BATTLE_FRAME_RATE},i.Logger.debug("\u7f81\u7eca\u6280\u80fd \u654c\u4eba\u4f24\u5bb3\u524a\u5f31 addHurtPercent = "+r))},getShadowRadius:function(){return this.shadowRadius},setIntoHole:function(e,t,a){e||(this.spineNode.angle=0),this.isIntoHole!=e&&(this.isIntoHole=e,this.isIntoHole?(this.noticeDie(),this.intoHoleTime=t,this.intoHoleLimitDistance=a,this.updateEnemyDirAction(),this.shadowNode.opacity=1):(this.intoHoleTime=.5,this.scheduleOnce(function(){this.intoHoleTime=0},this.intoHoleTime),this.curSkillStandTime=this.intoHoleTime,this.updateEnemyAction(i.constant.ENEMY_STATE_SKILL2,!0,i.constant.ENEMY_STATE_MOVE),this.shadowNode.opacity=255))},setWaveLastEnemy:function(e){this.isLastEnemy=e},isWaveLastEnemy:function(){return this.isLastEnemy},startFadeInEffect:function(){this.node.opacity=1;var e=cc.fadeIn(.5);this.node.runAction(e)},startFadeOutEffect:function(){this.node.opacity=255;var e=cc.fadeOut(.5);this.node.runAction(e)},startBodyHitEffect:function(){var e=cc.scaleTo(1/30,1.2),t=cc.scaleTo(.1,1),i=cc.callFunc(function(){},this);i=cc.sequence(e,t,i),this.bodyNode.stopAllActions(),this.bodyNode.runAction(i)},getHeart:function(){return this.hurtHeart},setMaxHp:function(e){e=Math.floor(e),this.maxHp=e,this.setHp(this.maxHp,0)},setHp:function(e){this.curHp=e,this.hpNode.active=0<this.curHp&&this.curHp<this.maxHp,e=this.curHp/this.maxHp,0<this.curHp&&e<.1?e=.1:.9<e&&(e=.9),this.hpProgressBar.progress=e},setEnemyState:function(e){if(this.curState!=e&&this.curState!=i.constant.ENEMY_STATE_DIE)switch(this.oldState=this.curState,this.curState=e,this.maxShootDistance,this.curState){case i.constant.ENEMY_STATE_STAND:this.updateEnemyAction(),this.checkTargetEnemy=!1;break;case i.constant.ENEMY_STATE_MOVE:this.checkTargetEnemy=!1,this.tarHeroObj=null,this.moveTime=0,this.updateEnemyDirAction(),this.updateEnemyAction();break;case i.constant.ENEMY_STATE_READY:this.checkTargetEnemy=!1;var t=this.getDirByPos(this.node.getPosition(),this.tarHeroObj.node.getPosition());this.setEnemyDir(t),this.updateEnemyAction();break;case i.constant.ENEMY_STATE_BATTLE:var a=this.getDirByPos(this.node.getPosition(),this.tarHeroObj.node.getPosition());this.setEnemyDir(a),this.curAttackTime=0,this.updateEnemyAction(i.constant.ENEMY_STATE_STAND);break;case i.constant.ENEMY_STATE_SHOOT:a=this.getDirByPos(this.node.getPosition(),this.tarHeroObj.node.getPosition()),this.setEnemyDir(a),this.curAttackTime=0,this.updateEnemyAction(i.constant.ENEMY_STATE_STAND);break;case i.constant.ENEMY_STATE_BEAK_BACK:this.checkTargetEnemy=!1,this.noticeDie();var n=i.Utils.getOffsetByRotationAndDistance(this.beakBackDegree,this.beakBackSpeed);this.moveSpeedX=n.x,this.moveSpeedY=n.y;var o=this.beakBackDegree-180;o<0&&(o+=360);var s=this.getDirByDegree(o);this.setEnemyDir(s),this.updateEnemyAction(i.constant.ENEMY_STATE_STAND);break;case i.constant.ENEMY_STATE_RETURN:this.checkTargetEnemy=!1,this.returnTarPos=i.battleScene.gameMapObj.getRouteMovePos(this.routeId,this.curMoveStep),(n=this.getMoveSpeed())<=0&&(n=1),o=i.Utils.getDistance(this.node.getPosition(),this.returnTarPos)/n,s=this.returnTarPos.x-this.node.x,n=this.returnTarPos.y-this.node.y,this.moveSpeedX=s/o,this.moveSpeedY=n/o,this.updateEnemyAction(i.constant.ENEMY_STATE_MOVE),this.returnTime=o/i.constant.BATTLE_FRAME_RATE;break;case i.constant.ENEMY_STATE_DIE:this.checkTargetEnemy=!1,this.dieNextEnemyId<0&&(this.enemyId==i.constant.YEAR_MONSTER_ENEMY_ID?this.dieOverTime=4:this.dieOverTime=2),i.battleScene.enemyWillDie();break;case i.constant.ENEMY_STATE_POSE:this.checkTargetEnemy=!1,this.curPoseTime=this.maxPoseTime/2,this.updateEnemyAction(i.constant.ENEMY_STATE_POSE,!0,i.constant.ENEMY_STATE_STAND),this.enemyId==i.constant.YEAR_MONSTER_ENEMY_ID&&i.soundsUtil.playSoundEffect("nian_bellow")}},showHitEffect1:function(){this.bulletHitAni_1.node.active=!0,this.bulletHitAni_1.stop(),this.bulletHitAni_1.setCurrentTime(0),this.bulletHitAni_1.play("tower_bullet_hit")},cleanLoadEffect:function(){i.player.commonModule.isLowIosDevice()&&(this.loadEffectNode.destroyAllChildren(),this.dizzinessAni=null,this.frozenPrefab=null,this.charmAni=null,this.electricityAni=null,this.poisonDotPrefab=null,this.iceSlowPrefab=null,this.fearAni=null,this.silenceAni=null,this.fireDotAni=null,this.shieldAni=null)},showHitEffect4:function(){var e=this,t=i.constant.PREFAB_PATH_BULLET+"hero5_skill_hit";i.battleScene.getBulletPrefab(t,function(a){var n,o;a?((n=cc.instantiate(a)).setPosition(cc.v2(0,20)),e.loadEffectNode.addChild(n),(o=n.getComponent("cc.Animation")).stop(),o.setCurrentTime(0),o.play("hero5_skill_continuous_hit"),a=cc.delayTime(1),o=cc.callFunc(function(){this.active=!1,this.destroy()},n),o=cc.sequence(a,o),n.stopAllActions(),n.runAction(o)):i.Logger.debug("error prefabName = "+t)})},showWhirlwindAtkHit:function(){var e=this,t=i.constant.PREFAB_PATH_BULLET+"hero1_slash_hit";i.battleScene.getBulletPrefab(t,function(a){var n,o;a?((n=cc.instantiate(a)).setPosition(cc.v2(0,20)),e.loadEffectNode.addChild(n),(o=n.getComponent("cc.Animation")).stop(),o.setCurrentTime(0),o.play("hero1_slash_hit"),a=cc.delayTime(1),o=cc.callFunc(function(){this.active=!1,this.destroy()},n),o=cc.sequence(a,o),n.stopAllActions(),n.runAction(o)):i.Logger.debug("error prefabName = "+t)})},showHitEffect5:function(){var e=this,t=i.constant.PREFAB_PATH_BULLET+"tower_bullet01_10_hit";i.battleScene.getBulletPrefab(t,function(a){var n,o;a?((n=cc.instantiate(a)).setPosition(cc.v2(0,20)),e.loadEffectNode.addChild(n),(o=n.getComponent("cc.Animation")).stop(),o.setCurrentTime(0),o.play("hero5_skill_hit"),a=cc.delayTime(1),o=cc.callFunc(function(){this.active=!1,this.destroy()},n),o=cc.sequence(a,o),n.stopAllActions(),n.runAction(o)):i.Logger.debug("error prefabName = "+t)})},showHitEffectPoison:function(){var e=this,t=i.constant.PREFAB_PATH_BULLET+"tower_bullet01_11_hit";i.battleScene.getBulletPrefab(t,function(a){var n,o;a?((n=cc.instantiate(a)).setPosition(cc.v2(0,20)),e.loadEffectNode.addChild(n),(o=n.getComponent("cc.Animation")).stop(),o.setCurrentTime(0),o.play("tower_bullet01_11_hit"),a=cc.delayTime(1),o=cc.callFunc(function(){this.active=!1,this.destroy()},n),o=cc.sequence(a,o),n.stopAllActions(),n.runAction(o)):i.Logger.debug("error prefabName = "+t)})},showHitEffectBird:function(){var e=this,t=i.constant.PREFAB_PATH_BULLET+"tower_bullet10_hit";i.battleScene.getBulletPrefab(t,function(a){var n,o;a?((n=cc.instantiate(a)).setPosition(cc.v2(0,20)),e.loadEffectNode.addChild(n),o=n.getComponent("cc.ParticleSystem"),a=cc.find("smoke",n).getComponent("cc.ParticleSystem"),o.resetSystem(),a.resetSystem(),o=cc.delayTime(1),a=cc.callFunc(function(){this.active=!1,this.destroy()},n),a=cc.sequence(o,a),n.stopAllActions(),n.runAction(a)):i.Logger.debug("error prefabName = "+t)})},showHitEffect2:function(){var e=this,t=i.constant.PREFAB_PATH_BULLET+"tower_bullet02_hit";i.battleScene.getBulletPrefab(t,function(a){var n,o;a?((n=cc.instantiate(a)).setPosition(cc.v2(0,20)),e.loadEffectNode.addChild(n),o=n.getComponent("cc.ParticleSystem"),a=cc.find("smoke",n).getComponent("cc.ParticleSystem"),o.resetSystem(),a.resetSystem(),o=cc.delayTime(1),a=cc.callFunc(function(){this.active=!1,this.destroy()},n),a=cc.sequence(o,a),n.stopAllActions(),n.runAction(a)):i.Logger.debug("error prefabName = "+t)})},showHitEffect2_2:function(){var e=this,t=i.constant.PREFAB_PATH_BULLET+"tower_bullet02_1_hit";i.battleScene.getBulletPrefab(t,function(a){var n,o;a?((n=cc.instantiate(a)).setPosition(cc.v2(0,20)),e.loadEffectNode.addChild(n),o=n.getComponent("cc.ParticleSystem"),a=cc.find("smoke",n).getComponent("cc.ParticleSystem"),o.resetSystem(),a.resetSystem(),o=cc.delayTime(1),a=cc.callFunc(function(){this.active=!1,this.destroy()},n),a=cc.sequence(o,a),n.stopAllActions(),n.runAction(a)):i.Logger.debug("error prefabName = "+t)})},showHitEffect2_3:function(){var e=this,t=i.constant.PREFAB_PATH_BULLET+"tower_bullet02_2_hit";i.battleScene.getBulletPrefab(t,function(a){var n,o;a?((n=cc.instantiate(a)).setPosition(cc.v2(0,20)),e.loadEffectNode.addChild(n),o=n.getComponent("cc.ParticleSystem"),a=cc.find("smoke",n).getComponent("cc.ParticleSystem"),o.resetSystem(),a.resetSystem(),o=cc.delayTime(1),a=cc.callFunc(function(){this.active=!1,this.destroy()},n),a=cc.sequence(o,a),n.stopAllActions(),n.runAction(a)):i.Logger.debug("error prefabName = "+t)})},showDizzinessEffect:function(e){var t,a=this;e?this.dizzinessAni?(this.dizzinessAni.node.active=!0,this.dizzinessAni.stop(),this.dizzinessAni.setCurrentTime(0),this.dizzinessAni.play("battle_dizziness"),this.updateEnemyAction(i.constant.ENEMY_STATE_STAND)):(t=i.constant.PREFAB_PATH_BATTLE+"battle_dizziness",i.battleScene.getBulletPrefab(t,function(e){e?((e=cc.instantiate(e)).setPosition(cc.v2(0,60)),a.loadEffectNode.addChild(e),a.dizzinessAni=e.getComponent("cc.Animation"),a.dizzinessAni.node.active=!0,a.dizzinessAni.stop(),a.dizzinessAni.setCurrentTime(0),a.dizzinessAni.play("battle_dizziness"),a.updateEnemyAction(i.constant.ENEMY_STATE_STAND)):i.Logger.debug("error prefabName = "+t)})):this.dizzinessAni&&(this.dizzinessAni.node.active=!1)},showFrozenEffect:function(e){var t,a,n,o=this;e?this.frozenPrefab?(this.frozenPrefab.active=!0,a=cc.find("ice_smoke",this.frozenPrefab).getComponent("cc.ParticleSystem"),n=cc.find("ice_smoke2",this.frozenPrefab).getComponent("cc.ParticleSystem"),a.resetSystem(),n.resetSystem(),this.updateEnemyAction(i.constant.ENEMY_STATE_STAND)):(t=i.constant.PREFAB_PATH_BATTLE+"battle_ice",i.battleScene.getBulletPrefab(t,function(e){var a;e?(a=cc.instantiate(e),o.loadEffectNode.addChild(a),o.frozenPrefab=a,o.frozenPrefab.active=!0,e=cc.find("ice_smoke",o.frozenPrefab).getComponent("cc.ParticleSystem"),a=cc.find("ice_smoke2",o.frozenPrefab).getComponent("cc.ParticleSystem"),e.resetSystem(),a.resetSystem(),o.updateEnemyAction(i.constant.ENEMY_STATE_STAND)):i.Logger.debug("error prefabName = "+t)})):this.frozenPrefab&&(a=cc.find("ice_smoke",this.frozenPrefab).getComponent("cc.ParticleSystem"),n=cc.find("ice_smoke2",this.frozenPrefab).getComponent("cc.ParticleSystem"),a.stopSystem(),n.stopSystem(),this.frozenPrefab.active=!1)},showElectricityEffect:function(e){var t,a=this;e?this.electricityAni?(this.electricityAni.node.active=!0,this.electricityAni.stop(),this.electricityAni.setCurrentTime(0),this.electricityAni.play("battle_palsy"),this.updateEnemyAction(i.constant.ENEMY_STATE_STAND)):(t=i.constant.PREFAB_PATH_BATTLE+"battle_palsy",i.battleScene.getBulletPrefab(t,function(e){e?((e=cc.instantiate(e)).setPosition(cc.v2(0,30)),a.loadEffectNode.addChild(e),a.electricityAni=e.getComponent("cc.Animation"),a.electricityAni.node.active=!0,a.electricityAni.stop(),a.electricityAni.setCurrentTime(0),a.electricityAni.play("battle_palsy"),a.updateEnemyAction(i.constant.ENEMY_STATE_STAND)):i.Logger.debug("error prefabName = "+t)})):this.electricityAni&&(this.electricityAni.node.active=!1)},showCharmEffect:function(e){var t,a=this;e?this.charmAni?(this.charmAni.node.active=!0,this.charmAni.stop(),this.charmAni.setCurrentTime(0),this.charmAni.play("battle_charm"),this.updateEnemyAction(i.constant.ENEMY_STATE_STAND)):(t=i.constant.PREFAB_PATH_BATTLE+"battle_charm",i.battleScene.getBulletPrefab(t,function(e){e?((e=cc.instantiate(e)).setPosition(cc.v2(0,15)),a.loadEffectNode.addChild(e),a.charmAni=e.getComponent("cc.Animation"),a.charmAni.node.active=!0,a.charmAni.stop(),a.charmAni.setCurrentTime(0),a.charmAni.play("battle_charm"),a.updateEnemyAction(i.constant.ENEMY_STATE_STAND)):i.Logger.debug("error prefabName = "+t)})):this.charmAni&&(this.charmAni.node.active=!1)},showSleepEffect:function(){},showPoisonDotEffect:function(e){var t,a,n,o,s=this;e?this.poisonDotPrefab?(this.poisonDotPrefab.active=!0,a=this.poisonDotPrefab.getComponent("cc.ParticleSystem"),n=cc.find("smoke",this.poisonDotPrefab).getComponent("cc.ParticleSystem"),o=cc.find("smoke2",this.poisonDotPrefab).getComponent("cc.ParticleSystem"),a.resetSystem(),n.resetSystem(),o.resetSystem()):(t=i.constant.PREFAB_PATH_BATTLE+"battle_poison",i.battleScene.getBulletPrefab(t,function(e){var a,n;e?((n=cc.instantiate(e)).setPosition(cc.v2(0,15)),s.loadEffectNode.addChild(n),s.poisonDotPrefab=n,s.poisonDotPrefab.active=!0,a=s.poisonDotPrefab.getComponent("cc.ParticleSystem"),e=cc.find("smoke",s.poisonDotPrefab).getComponent("cc.ParticleSystem"),n=cc.find("smoke2",s.poisonDotPrefab).getComponent("cc.ParticleSystem"),a.resetSystem(),e.resetSystem(),n.resetSystem()):i.Logger.debug("error prefabName = "+t)})):this.poisonDotPrefab&&(a=this.poisonDotPrefab.getComponent("cc.ParticleSystem"),n=cc.find("smoke",this.poisonDotPrefab).getComponent("cc.ParticleSystem"),o=cc.find("smoke2",this.poisonDotPrefab).getComponent("cc.ParticleSystem"),a.stopSystem(),n.stopSystem(),o.stopSystem(),this.poisonDotPrefab.active=!1)},showIceSlowEffect:function(e){var t,a,n,o,s=this;e?this.iceSlowPrefab?(this.iceSlowPrefab.active=!0,a=this.iceSlowPrefab.getComponent("cc.ParticleSystem"),n=cc.find("battle_slowdown",this.iceSlowPrefab).getComponent("cc.ParticleSystem"),o=cc.find("battle_slowdown_smoke",this.iceSlowPrefab).getComponent("cc.ParticleSystem"),a.resetSystem(),n.resetSystem(),o.resetSystem()):(t=i.constant.PREFAB_PATH_BATTLE+"battle_slowdown",i.battleScene.getBulletPrefab(t,function(e){var a,n;e?((n=cc.instantiate(e)).setPosition(cc.v2(0,0)),s.loadEffectNode.addChild(n),s.iceSlowPrefab=n,s.iceSlowPrefab.active=!0,a=s.iceSlowPrefab.getComponent("cc.ParticleSystem"),e=cc.find("battle_slowdown",s.iceSlowPrefab).getComponent("cc.ParticleSystem"),n=cc.find("battle_slowdown_smoke",s.iceSlowPrefab).getComponent("cc.ParticleSystem"),a.resetSystem(),e.resetSystem(),n.resetSystem()):i.Logger.debug("error prefabName = "+t)})):this.iceSlowPrefab&&(a=this.iceSlowPrefab.getComponent("cc.ParticleSystem"),n=cc.find("battle_slowdown",this.iceSlowPrefab).getComponent("cc.ParticleSystem"),o=cc.find("battle_slowdown_smoke",this.iceSlowPrefab).getComponent("cc.ParticleSystem"),a.stopSystem(),n.stopSystem(),o.stopSystem(),this.iceSlowPrefab.active=!1)},showCureEffect:function(){var e=this,t=i.constant.PREFAB_PATH_BATTLE+"battle_cure";i.battleScene.getBulletPrefab(t,function(a){var n,o,s;a?((n=cc.instantiate(a)).setPosition(cc.v2(0,10)),e.loadEffectNode.addChild(n),n.scale=.6,o=n.getComponent("cc.ParticleSystem"),s=cc.find("smoke",n).getComponent("cc.ParticleSystem"),a=cc.find("smoke2",n).getComponent("cc.ParticleSystem"),o.resetSystem(),s.resetSystem(),a.resetSystem(),s=cc.delayTime(1.5),a=cc.callFunc(function(){this.active=!1,this.destroy()},n),a=cc.sequence(s,a),n.stopAllActions(),n.runAction(a)):i.Logger.debug("error prefabName = "+t)})},showDieEffect:function(){var e,t=this;this.isPlayDieEffect&&(e=i.constant.PREFAB_PATH_BATTLE+"battle_death",i.battleScene.getBulletPrefab(e,function(a){var n,o;a?(n=cc.instantiate(a),t.loadEffectNode.addChild(n),(o=n.getComponent("cc.Animation")).stop(),o.setCurrentTime(0),o.play("death"),n.getComponent("cc.ParticleSystem").resetSystem(),a=cc.delayTime(1.5),o=cc.callFunc(function(){this.active=!1,this.destroy()},n),o=cc.sequence(a,o),n.stopAllActions(),n.runAction(o)):i.Logger.debug("error prefabName = "+e)}))},showFearEffect:function(e){var t,a=this;e?this.fearAni?(this.fearAni.node.active=!0,this.fearAni.stop(),this.fearAni.setCurrentTime(0),this.fearAni.play("battle_fear")):(t=i.constant.PREFAB_PATH_BATTLE+"battle_fear",i.battleScene.getBulletPrefab(t,function(e){e?((e=cc.instantiate(e)).setPosition(cc.v2(0,50)),a.loadEffectNode.addChild(e),a.fearAni=e.getComponent("cc.Animation"),a.fearAni.node.active=!0,a.fearAni.stop(),a.fearAni.setCurrentTime(0),a.fearAni.play("battle_fear")):i.Logger.debug("error prefabName = "+t)})):this.fearAni&&(this.fearAni.node.active=!1,this.updateEnemyDirAction())},showSilenceEffect:function(e){var t,a=this;e?this.silenceAni?(this.silenceAni.node.active=!0,this.silenceAni.stop(),this.silenceAni.setCurrentTime(0),this.silenceAni.play("battle_silence"),this.updateEnemyAction(i.constant.ENEMY_STATE_STAND)):(t=i.constant.PREFAB_PATH_BATTLE+"battle_silence",i.battleScene.getBulletPrefab(t,function(e){e?((e=cc.instantiate(e)).setPosition(cc.v2(0,60)),e.scale=.8,a.loadEffectNode.addChild(e),a.silenceAni=e.getComponent("cc.Animation"),a.silenceAni.node.active=!0,a.silenceAni.stop(),a.silenceAni.setCurrentTime(0),a.silenceAni.play("battle_silence"),a.updateEnemyAction(i.constant.ENEMY_STATE_STAND)):i.Logger.debug("error prefabName = "+t)})):this.silenceAni&&(this.silenceAni.node.active=!1)},showSpeedUpEffect:function(e){var t,a=this;e&&(t=i.constant.PREFAB_PATH_BATTLE+"enemy_speedup",i.battleScene.getBulletPrefab(t,function(e){var n,o;e?((n=cc.instantiate(e)).setPosition(cc.v2(0,0)),n.scale=.5,a.loadEffectNode.addChild(n),(o=n.getComponent("cc.Animation")).stop(),o.setCurrentTime(0),o.play("enemy_speedup"),e=cc.delayTime(1.5),o=cc.callFunc(function(){this.active=!1,this.destroy()},n),o=cc.sequence(e,o),n.stopAllActions(),n.runAction(o)):i.Logger.debug("error prefabName = "+t)}))},showAimEffect:function(e){var t,a=this;e&&(t=i.constant.PREFAB_PATH_BULLET+"hero5_tower_skill_aim",i.battleScene.getBulletPrefab(t,function(e){var n,o;e?((n=cc.instantiate(e)).setPosition(cc.v2(0,0)),a.loadEffectNode.addChild(n),(o=n.getComponent("cc.Animation")).stop(),o.setCurrentTime(0),o.play("hero5_tower_skill_aim"),e=cc.delayTime(1.2),o=cc.callFunc(function(){this.active=!1,this.destroy()},n),o=cc.sequence(e,o),n.stopAllActions(),n.runAction(o)):i.Logger.debug("error prefabName = "+t)}))},showFireDotEffect:function(e){var t,a=this;e?this.fireDotAni?(this.fireDotAni.node.active=!0,this.fireDotAni.stop(),this.fireDotAni.setCurrentTime(0),this.fireDotAni.play("battle_fire")):(t=i.constant.PREFAB_PATH_BATTLE+"battle_fire",i.battleScene.getBulletPrefab(t,function(e){e?((e=cc.instantiate(e)).setPosition(cc.v2(0,0)),a.loadEffectNode.addChild(e),a.fireDotAni=e.getComponent("cc.Animation"),a.fireDotAni.node.active=!0,a.fireDotAni.stop(),a.fireDotAni.setCurrentTime(0),a.fireDotAni.play("battle_fire")):i.Logger.debug("error prefabName = "+t)})):this.fireDotAni&&(this.fireDotAni.node.active=!1)},showShieldEffect:function(e){var t,a=this;e?this.shieldAni?(this.shieldAni.node.active=!0,this.shieldAni.stop(),this.shieldAni.setCurrentTime(0),this.shieldAni.play("battle_fire")):(t=i.constant.PREFAB_PATH_BATTLE+"battle_fire",i.battleScene.getBulletPrefab(t,function(e){e?((e=cc.instantiate(e)).setPosition(cc.v2(0,0)),a.loadEffectNode.addChild(e),a.shieldAni=e.getComponent("cc.Animation"),a.shieldAni.node.active=!0,a.shieldAni.stop(),a.shieldAni.setCurrentTime(0),a.shieldAni.play("battle_fire")):i.Logger.debug("error prefabName = "+t)})):this.shieldAni&&(this.shieldAni.node.active=!1)},onFinished:function(e,t){"tower_bullet_hit"==t.name&&(this.bulletHitAni_1.node.active=!1)},startFunk:function(e,t){var a,n;this.isImmunityControl?i.Logger.debug("\u6211\u514d\u75ab\u6050\u60e7 \u54a9\u54c8\u54c8"):(a=t||0,n=cc.delayTime(a),t=cc.callFunc(function(){this.funkTime=e,this.showFearEffect(!0)},this),t=cc.sequence(n,t),0<a?(this.shadowNode.stopAllActions(),this.shadowNode.runAction(t)):(this.funkTime=e,this.showFearEffect(!0)))},getInterceptPos:function(){var e=this.curMoveStep+30;return e>=this.maxMoveStep&&(e=this.maxMoveStep),i.battleScene.gameMapObj.getRouteMovePos(this.routeId,e)},getShootTarPos:function(e,t){var a=this.getAimPos(t);if(this.curState==i.constant.ENEMY_STATE_BEAK_BACK&&this.faintedTime<=0)e>=this.beakBackTime&&(e=this.beakBackTime),a=cc.v2(this.node.x+this.moveSpeedX*e*60,this.node.y+this.moveSpeedY*e*60);else if(this.curState==i.constant.ENEMY_STATE_RETURN&&this.faintedTime<=0)e>=this.returnTime&&(e=this.returnTime),a=cc.v2(this.node.x+this.moveSpeedX*e*60,this.node.y+this.moveSpeedY*e*60);else{if(this.curState!=i.constant.ENEMY_STATE_MOVE||0<this.faintedTime)return a;for(var n=Math.floor(60*e),o=0,s=0;s<n;s++)o+=this.getMoveSpeed()/this.getMaxMoveIndex();o=Math.floor(o),e=this.curMoveStep+o,(e=0<this.funkTime?this.curMoveStep-o:e)>=this.maxMoveStep?e=this.maxMoveStep:e<0&&(e=0),a=i.battleScene.gameMapObj.getRouteMovePos(this.routeId,e)}return t?cc.v2(a.x,a.y+this.getHeadOffsetHeight()):a},isNearEnd:function(e,t,a){var n=i.templateManager.getGameParamValue("skillGuideDistanceList"),o=200;return 0<=e&&e<n.length&&(o=n[e]),t&&(o=t),!(0<i.battleScene.gameMapObj.checkNextRoute(this.routeId))&&(e=this.maxMoveStep-this.curMoveStep,t=this.isCanAtk(a)&&e<o&&100<e,a?this.isCanAtk(a)&&e<o:t)},updatePos:function(e){var t=i.battleScene.gameMapObj.getRouteMovePos(this.routeId,this.curMoveStep);t&&(this.node.setPosition(t),this.shadowNode.setPosition(this.node.getPosition()),i.battleScene.updateZIndex(this.node),this.isFly&&(this.node.zIndex=i.constant.LAYER_FLY_ENEMY),t=this.getMoveSpeed(e),0<this.funkTime?(this.curMoveStep-=t,this.curMoveStep<0&&(this.curMoveStep=0)):this.curMoveStep+=t,this.curMoveStep>=this.maxMoveStep&&(this.curMoveStep=this.maxMoveStep,0<(e=i.battleScene.gameMapObj.checkNextRoute(this.routeId))?(this.routeId=e,this.curMoveStep=0,this.maxMoveStep=i.battleScene.gameMapObj.getRouteMoveLength(this.routeId)-1,this.hideTime=2,this.isSendEnemy=!1,this.startFadeOutEffect(),this.noticeDie()):this.isFly?(t=cc.moveBy(1,cc.v2(0,-100)),e=cc.callFunc(function(){this.moveToEnd()},this),this.spineNode.runAction(cc.sequence(t,e)),this.setEnemyState(i.constant.ENEMY_STATE_LANDING),this.hpNode.runAction(cc.moveBy(1,cc.v2(0,-100)))):this.moveToEnd()))},moveToEnd:function(){var e;this.isAlive()&&(e={pos:cc.v2(this.node.getPosition().x,this.node.getPosition().y+this.enemyData.hpBarHeight),num:"-"+Math.floor(this.hurtHeart),type:i.constant.COIN_TYPE_HEART,delayTime:0},i.battleScene.createDropTipsByData(e),this.setEnemyState(i.constant.ENEMY_STATE_DIE),this.detailDrop(),i.battleScene.subLastHp(this.hurtHeart,this.enemyId,this.routeId),this.enemyDieOver())},setEnemyCountId:function(e){this.enemyCountId=e},getEnemyCountId:function(){return this.enemyCountId},noticeDie:function(){i.battleScene.noticeEnemyDie(this)},checkTarHeroDie:function(e){this.isCanAtk()&&this.tarHeroObj==e&&(0<this.curSkillStandTime?this.checkTargetEnemy=!0:this.checkEnemySwitchTarget())},checkEnemySwitchTarget:function(){for(var e=0;e<i.battleScene.soldierList.length;e++){var t=i.battleScene.soldierList[e].getComponent("GameHero");if(t.isCanAtk()&&t.tarEnemyObj==this&&t.curState!=i.constant.HERO_STATE_SHOOT)return void((this.tarHeroObj=t).curState==i.constant.HERO_STATE_BATTLE?this.setEnemyState(i.constant.ENEMY_STATE_BATTLE):this.setEnemyState(i.constant.ENEMY_STATE_READY))}this.tarHeroObj=null,this.setEnemyState(i.constant.ENEMY_STATE_MOVE)},enemyDieOver:function(){i.battleScene.curSelectEnemyObj===this&&i.battleScene.setCurEnemyObj(null),this.node.stopAllActions(),this.node.scale=1;for(var e=0;e<i.battleScene.enemyList.length;e++)if(i.battleScene.enemyList[e].getComponent("GameEnemy")==this){i.battleScene.enemyList.splice(e,1),this.removeEnemy();break}i.battleScene.checkEnemyDieOver()},removeEnemy:function(){this.cleanLoadEffect(),i.battleScene.giveBackEnemy(this.node)},flyHp:function(e,t,a){a={pos:cc.v2(this.node.getPosition().x,this.node.getPosition().y+this.enemyData.hpBarHeight),num:Math.floor(t),type:e,delayTime:a},i.battleScene.createFlyHpByData(a)},sendEnemy:function(e,t){e=this.curMoveStep-e,this.curMoveStep=e=e<0?0:e,i.battleScene.gameMapObj.getRouteMovePos(this.routeId,this.curMoveStep),e={type:i.constant.GAME_TIPS_TYPE_HERO_CALL,pos:this.node.getPosition(),zIndex:i.constant.LAYER_HERO_SKILL,time:1,scale:.5},i.battleScene.createIconTipsByData(e),this.hideTime=t,this.isSendEnemy=!0,this.startFadeOutEffect(),this.noticeDie()},enemyDieRestoreHp:function(e,t){this.dieHpPercent=e,this.dieHpTime=t},enemyAddHurt:function(e,t){this.addHurtPercent=e,this.addHurtTime=t},setEnemyFainted:function(e,t){!this.isImmunityControl&&0<e&&e>this.faintedTime&&(this.faintedTime=e,this.showEnemyStopEffect(!0,t))},setEnemyCharm:function(e,t,a,n){return!this.isImmunityCharm&&n<t&&i.Utils.getRandomInt(1,100)<=e&&(this.enemyCharm(a),!0)},enemyCharm:function(e){var t={type:i.constant.GAME_TIPS_TYPE_CHARM,pos:this.getClickPosition(),zIndex:i.constant.LAYER_HERO_SKILL,time:20/30};i.battleScene.createIconTipsByData(t);var a={pos:cc.v2(this.node.getPosition().x,this.node.getPosition().y+this.enemyData.hpBarHeight),num:i.lang.getGameText(i.GameTextCode.ENEMY_RENEGADE),type:i.constant.FLY_HP_TYPE_MAGIC_CRIT,delayTime:0};i.battleScene.createFlyHpByData(a);var n={soldierId:e,curPos:this.node.getPosition(),originPos:null,source:i.constant.HERO_SOURCE_HERO_RECRUIT},o=i.battleScene.createSoldierByData(n).getComponent("GameHero"),s=i.constant.TOWER_TYPE_BARRACK;t=i.player.towerModule.getTowerLevel(s),a=i.templateManager.getTowerStarDataByLevel(s,t),e=i.player.towerModule.getTowerQuality(s),n=i.templateManager.getTowerQualityDataByLevel(s,e),s=t=o.physicalAtk,s*=a.attack/1e4,e=(s*=1+n.attrValue[1]/1e4)-t,t=s=o.magicAtk,t*=a.attack/1e4,t=(t*=1+n.attrValue[1]/1e4)-s,s=o.maxHp,o.setRecruitData({recruitTime:20,addPhysicalAtk:e,addMagicAtk:t,addHp:s-s}),o.setHeroState(i.constant.HERO_STATE_STAND),this.startDieAction(!0),this.enemyDie(),this.detailDrop()},showEnemyStopEffect:function(e,t){this.showDizzinessEffect(e&&t==i.constant.STOP_TYPE_SWOON),this.showElectricityEffect(e&&t==i.constant.STOP_TYPE_ELECTRICITY),this.showFrozenEffect(e&&t==i.constant.STOP_TYPE_FROZEN),this.showCharmEffect(e&&t==i.constant.STOP_TYPE_CHARM)},updateSleepTime:function(e){this.setEnemyFainted(e,i.constant.STOP_TYPE_CHARM)},enemyDot:function(e,t,a,n,o,s){this.isImmunityDot?i.Logger.debug("\u514d\u75abdot \u54a9\u54c8\u54c8"):(this.dotHurt=e,this.dotHurtTime=t,this.dotAllTime=a,this.curDotTime=0,!n&&(0<o||0<s)&&(o*=1-this.physicalDef/100,s*=1-this.magicDef/100,this.dotHurt=o+s))},enemyFireDot:function(e,t,a,n,o,s){this.isImmunityDot?i.Logger.debug("\u514d\u75abdot \u54a9\u54c8\u54c8"):(this.fireDotHurt=e,this.fireHurtTime=t,this.fireAllTime=a,this.curFireTime=0,!n&&(0<o||0<s)&&(o*=1-this.physicalDef/100,s*=1-this.magicDef/100,this.fireDotHurt=o+s),this.showFireDotEffect(!0))},enemyPoisonDot:function(e,t,a,n,o,s){this.isImmunityDot?i.Logger.debug("\u514d\u75abdot \u54a9\u54c8\u54c8"):(this.poisonDotHurt=e,this.poisonHurtTime=t,this.poisonTotalTime=a,this.curPoisonTime=0,this.showPoisonDotEffect(!0),!n&&(0<o||0<s)&&(o*=1-this.physicalDef/100,s*=1-this.magicDef/100,this.poisonDotHurt=o+s))},limitSkill:function(e){this.isImmunityControl?i.Logger.debug("\u514d\u75ab\u6c89\u9ed8 \u54a9\u54c8\u54c8"):this.limitSkillTime<e&&(this.limitSkillTime<=0&&this.showSilenceEffect(!0),this.limitSkillTime=e)},enemyBeakBack:function(e,t,a,n){this.isImmunityControl?i.Logger.debug("\u6211\u514d\u75ab\u51fb\u9000 \u54a9\u54c8\u54c8"):i.Utils.getRandomInt(0,99)<e&&(this.beakBackSpeed=t,this.beakBackTime=a,this.beakBackDegree=n,this.setEnemyState(i.constant.ENEMY_STATE_BEAK_BACK))},enemySkillHurt:function(e,t,a,n,o,s){var r;e<=0||!this.isCanAtk(0<o)||(this.showEnemyHitEffect(t),!this.isBoss&&!this.isElite&&i.Utils.getRandomInt(1,100)<=a&&this.curHp/this.maxHp<=n?(this.updateEnemyHp(-this.curHp),r={pos:cc.v2(this.node.getPosition().x,this.node.getPosition().y+this.enemyData.hpBarHeight),num:"\u79d2\u6740",type:i.constant.FLY_HP_TYPE_SECOND,delayTime:0},i.battleScene.createFlyHpByData(r)):(0<this.addHurtTime&&(e*=1+this.addHurtPercent),0<this.intoHoleTime&&0<o&&(e*=o),this.isFly&&0<s&&(e*=s),e=Math.floor(e),this.isAlive()&&(r=-e,o=!1,0<this.shieldHp&&r<0&&(this.shieldHp+=r,0<=this.shieldHp?o=!(r=0):(r=this.shieldHp,this.showShieldEffect(!1))),this.updateEnemyHp(r),s=i.constant.FLY_HP_TYPE_SKILL,o?this.flyHp(i.constant.FLY_HP_TYPE_ABSORB,e):this.flyHp(s,r))))},showEnemyHitEffect:function(e){e&&("tower_bullet_hit"==e?this.showHitEffect1():"tower_bullet02_hit"==e?this.showHitEffect2():"tower_bullet02_1_hit"==e?this.showHitEffect2_2():"tower_bullet02_2_hit"==e?this.showHitEffect2_3():"hero5_skill_hit"==e?this.showHitEffect4():"tower_bullet01_10_hit"==e?this.showHitEffect5():"tower_bullet01_11_hit"==e?this.showHitEffectPoison():"hero1_slash_hit"==e?this.showWhirlwindAtkHit():"tower_bullet10_hit"==e&&this.showHitEffectBird())},enemyFeelHurt:function(e,t,a,n){var o=0<e.hurtHolePercent;if(this.isCanAtk(o))if(0<n)this.cacheHurtData.push({data:e,atkType:t,isFinalHurt:a,delayTime:n});else{var s=0;if(t==i.constant.ATK_TYPE_NEAR?s=this.nearDodgeRate:t==i.constant.ATK_TYPE_FAR&&(s=this.farDodgeRate),i.Utils.getRandomInt(1,100)<=s){var r=i.constant.FLY_HP_TYPE_MISS,c={pos:cc.v2(this.node.getPosition().x,this.node.getPosition().y+this.enemyData.hpBarHeight),num:"\u95ea\u907f",type:r};i.battleScene.createFlyHpByData(c)}else{var l=0,d=!1,h=!1;if(a)l=e;else{var u=e.physicalAtk,p=e.magicAtk,g=e.towerType,_=e.critHurt,m=(o=e.ignoreArmorData,n=e.breakPhysicalDef,t=e.breakMagicDef,s=e.extraHurtData,e.addHurtData);if(r=e.secondKillRate||0,c=e.secondKillPercent,!this.isBoss&&!this.isElite&&i.Utils.getRandomInt(1,100)<=r&&this.curHp/this.maxHp<=c){this.updateEnemyHp(-this.curHp);var E={pos:cc.v2(this.node.getPosition().x,this.node.getPosition().y+this.enemyData.hpBarHeight),num:"\u79d2\u6740",type:i.constant.FLY_HP_TYPE_SECOND,delayTime:0};return i.battleScene.createFlyHpByData(E),void this.showEnemyHitEffect(e.roleHitName)}o&&i.Utils.getRandomInt(1,100)<o.ignoreArmorRate&&(this.ignoreArmoraNum=this.ignoreArmoraNum+o.ignoreArmorNum),h=0<u,d=e.isCrit;var T=i.templateManager.getGameParamValue("heroRange"),f=!1;switch(g){case i.constant.TOWER_TYPE_ARROW:T=i.templateManager.getGameParamValue("arrowRange"),f=!0;break;case i.constant.TOWER_TYPE_BARRACK:T=i.templateManager.getGameParamValue("barrackRange");break;case i.constant.TOWER_TYPE_CANNON:T=i.templateManager.getGameParamValue("cannonRange"),f=!0;break;case i.constant.TOWER_TYPE_MAGIC:T=i.templateManager.getGameParamValue("magicRange"),f=!0}f&&this.startBodyHitEffect(),E=i.Utils.getRandomInt(T[0],T[1])/1e4,o=this.physicalDef,g=this.magicDef,e.targetDefNum&&0<e.targetDefNum&&(n+=e.targetDefNum),o*=1-this.ignoreArmoraNum,0<n&&0<o&&(o*=1-n),0<t&&0<g&&(g*=1-t),l=(u*(1-o/100)+p*(1-g/100))*E,e.atkAccumulate&&(l*=e.atkAccumulate),s&&(E=s.hpPercent,S=s.hurtPercent,this.curHp/this.maxHp<E&&(l*=1+S)),d&&(l*=_),0<this.addHurtTime?l*=1+this.addHurtPercent:m&&(l*=1+m.addHurtPercent),0<this.intoHoleTime&&0<e.hurtHolePercent&&(l*=e.hurtHolePercent),this.isFly&&0<e.hurtFlyPercent&&(l*=e.hurtFlyPercent),l=Math.round(l),0<Math.abs(l)&&this.showEnemyHitEffect(e.roleHitName)}var S=-l;if(_=!1,0<this.shieldHp&&S<0&&(this.shieldHp+=S,0<=this.shieldHp?_=!(S=0):(S=this.shieldHp,this.showShieldEffect(!1))),0<Math.abs(S)&&this.updateEnemyHp(S,e.addIronRate),m=i.constant.FLY_HP_TYPE_GENERAL,a?m=i.constant.FLY_HP_TYPE_MAGIC:h?d&&(m=i.constant.FLY_HP_TYPE_CRIT):(m=i.constant.FLY_HP_TYPE_MAGIC,d&&(m=i.constant.FLY_HP_TYPE_MAGIC_CRIT)),0<Math.abs(l)&&(_?this.flyHp(i.constant.FLY_HP_TYPE_ABSORB,l):(i.Utils.isNumber(S)||i.Logger.debug("updateHp = "+S),this.flyHp(m,S))),e.atkAoeData)for(var A=i.battleScene.enemyList,I=0;I<A.length;I++){var y,P,v,L=A[I];L.position.sub(this.node.position).mag()>e.atkAoeData.radius||(y=L.getComponent("GameEnemy")).getEnemyCountId()!==this.enemyCountId&&(P=e.atkAoeData.bulletId,v=this.getClickPosition(),L=i.battleScene.getTarEnemyWillPos(v,y,P,.2,!0),L={source:i.constant.SHOOT_SOURCE_HERO,bulletId:P,towerType:e.towerType,tarObj:y,curPos:v,tarPos:L,isAimHead:!0,physicalAtk:e.physicalAtk*e.atkAoeData.hurtPercent,magicAtk:e.magicAtk*e.atkAoeData.hurtPercent,delay:0},(L=i.battleScene.createBulletByData(L))&&(L.getComponent("GameBullet").bulletMoveSpecialNode.scaleY=i.Utils.getRandomInt(1,100)<=50?1:-1))}this.curHp<=0&&(this.killBombData?this.checkKillBomb(this.killBombData):e.killBombData&&this.checkKillBomb(e.killBombData),e.killSuckHpData)&&(m=e.killSuckHpData.addHpObj,S=e.killSuckHpData.addHpPercent,m.restoreHp(S)),1===i.battleScene.curWaveIndex&&i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_INSTANCE_1_d)&&i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_1_d)}}},checkKillBomb:function(e){var t=e.bulletId,a=e.physicalAtk,n=e.magicAtk,o=e.targetType;i.Logger.debug("\u6b7b\u4ea1\u7206\u70b8 bulletId = "+t+" physicalAtk = "+a+" magicAtk = "+n+" targetType = "+o),e=i.constant.SHOOT_SOURCE_SKILL,o==i.constant.HURT_TARGET_HERO?e=i.constant.SHOOT_SOURCE_ENEMY:o==i.constant.HURT_TARGET_ALL&&(e=i.constant.SHOOT_SOURCE_ALL_CHECK),n={source:e,bulletId:t,physicalAtk:a,magicAtk:n,towerType:-1,curPos:this.node.getPosition(),tarPos:this.node.getPosition(),isAimHead:!1,isBoss:this.isBoss,delay:.2},i.battleScene.createBulletByData(n)},restoreHp:function(e){var t=Math.floor(e*this.maxHp);this.curHp<this.maxHp&&(e=i.constant.FLY_HP_TYPE_RECOVERY,this.flyHp(e,t,.6),this.updateEnemyHp(t)),this.showCureEffect()},updatePhysicalDef:function(e,t){0<this.updatePhysicalDefTime||(this.physicalDef=this.enemyData.physicalDefense,this.physicalDef*=1+e,this.updatePhysicalDefTime=t)},updateMagicDef:function(e,t){0<this.updateMagicDefTime||(this.magicDef=this.enemyData.magicDefense,this.physicalDef*=1+e,this.updateMagicDefTime=t)},addShield:function(e,t){this.shieldTime=e,this.shieldHp=t,i.Logger.debug("addShield shieldTime = "+e+" shieldHp = "+t),this.showShieldEffect(!0)},addSpeed:function(e,t){this.showSpeedUpEffect(!0),this.speedPercent=e,this.addSpeedTime=t},getMoveSpeed:function(e){var t=this.moveSpeed;return e&&(t=60*t*e),0<this.addSpeedTime&&(t*=this.speedPercent),0<this.reduceSpeedTime&&(t*=this.reduceSpeedPercent),t+=this.cacheMoveSpeed,e=Math.floor(t),this.cacheMoveSpeed=t-e,e},updateSpeed:function(e,t,i){0<e?this.addSpeed(e,t):this.reduceSpeed(e,t,i)},reduceSpeed:function(e,t,a){this.reduceSpeedPercent=1+e,this.reduceSpeedTime=t,i.Logger.debug("\u79fb\u52a8\u51cf\u901f speedPercent = "+e+" speedTime = "+t),a&&this.showIceSlowEffect(!0)},skillSlowAtkSpeed:function(e,t){this.skillSlowAtkSpeedPercent=e,this.skillSlowAtkSpeedTime=t,i.Logger.debug("\u653b\u51fb\u51cf\u901f speedPercent = "+e+" speedTime = "+t),this.updateEnemyAttackTime(),this.baseTimeScale=1+this.skillSlowAtkSpeedPercent,i.Logger.debug("this.baseTimeScale = "+this.baseTimeScale),this.updateBattleSpeedPercent()},updateEnemyAttackTime:function(){this.maxAttackTime=this.enemyData.attackCD/1e3;var e=0;0<this.skillSlowAtkSpeedTime&&(e+=this.skillSlowAtkSpeedPercent),this.maxAttackTime=this.maxAttackTime/(1+e)},getMaxMoveIndex:function(){return this.maxMoveIndex},updateEnemyHp:function(e,t){this.isAlive()&&(this.curHp+=e,isNaN(this.curHp)&&(i.Logger.debug("error this.curHp = NaN"),this.curHp=0),this.curHp<0?this.curHp=0:this.curHp>this.maxHp&&(this.curHp=this.maxHp),this.curHp=Math.floor(this.curHp),this.setHp(this.curHp),this.curHp<=0)&&(i.soundsUtil.playSoundEffect(this.enemyData.deadAudio),t=t||0,t+=1,e=Math.floor(this.dropMoney),i.Utils.getRandomInt(1,100)<=i.battleScene.dropMoneyRota&&(t+=i.battleScene.dropMoneyPercent-1),e=Math.floor(e*t),this.dropMoney,this.startDieAction(!1,e),this.dieNextEnemyId<0&&(this.checkYearMonsterKill(),this.detailDrop(),i.battleScene.addIron(e)),i.battleScene.putTaskCacheItem(i.constant.TASK_TYPE_KILL_ENEMY_ALL,1),i.battleScene.putTaskCacheItem(i.constant.TASK_TYPE_KILL_ENEMY_ID,1,this.enemyId))},checkYearMonsterKill:function(){i.battleScene.curChapter==i.constant.YEAR_MONSTER_CHAPTER_ID&&this.enemyId==i.constant.YEAR_MONSTER_ENEMY_ID&&(i.battleScene.killMonsterCount+=1)},detailDrop:function(){for(var e=0,t=0;t<i.battleScene.enemyList.length;t++)i.battleScene.enemyList[t].getComponent("GameEnemy").isAlive()&&e++;var a,n=!i.player.instanceModule.isPassInstance(i.battleScene.curChapter,i.battleScene.curInstance);if(this.isBoss&&n&&i.battleScene.instanceData.firstPiece&&(a={itemId:i.battleScene.instanceData.firstPiece[0],itemNum:i.battleScene.instanceData.firstPiece[1]},i.battleScene.dropItems(i.constant.BATTLE_FLY_TYPE_PIECE,this.node.convertToWorldSpaceAR(cc.v2(0,0)),a)),this.isBoss&&n&&i.battleScene.instanceData.firstSkillPiece)for(var o=i.battleScene.instanceData.firstSkillPiece,s=0;s<o.length;s++){var r=o[s][0];o[s][1],r={itemId:r,itemNum:1},i.battleScene.dropItems(i.constant.BATTLE_FLY_TYPE_SKILL_PIECE,this.node.convertToWorldSpaceAR(cc.v2(0,0)),r)}!i.battleScene.getWaveAreadyDropKey()&&i.battleScene.isAllEnemyCreateOver&&e<=0&&i.battleScene.curWaveData.isDropKey&&!i.battleScene.showOverBoxPage&&i.battleScene.gameBattleUIObj.getCanDropBox()&&(i.battleScene.setWaveAreadyDropKey(!0),i.battleScene.dropItems(i.constant.BATTLE_FLY_TYPE_KEY,this.node.convertToWorldSpaceAR(cc.v2(0,0)),null))},getDirByDegree:function(e){this.degree=e;var t=i.constant.HERO_DIR_RIGHT;return this.enemyData.baseDirection<=2?t=90<=e&&e<270?i.constant.HERO_DIR_LEFT:i.constant.HERO_DIR_RIGHT:65<e&&e<115?t=i.constant.HERO_DIR_UP:115<=e&&e<245?t=i.constant.HERO_DIR_LEFT:245<=e&&e<295&&(t=i.constant.HERO_DIR_DOWN),t},getDirByPos:function(e,t){return this.curDir,t=i.Utils.getDegree(e,t),this.getDirByDegree(t)},setEnemyDir:function(e){this.curDir=e},getActionNameByDir:function(e){var t="right",a=4;if(4==(a=e==i.constant.ENEMY_STATE_DIE||e==i.constant.ENEMY_STATE_BATTLE?2:a))switch(this.curDir){case i.constant.HERO_DIR_UP:t="up";break;case i.constant.HERO_DIR_DOWN:t="down";break;case i.constant.HERO_DIR_LEFT:case i.constant.HERO_DIR_RIGHT:t="right"}else 2==a&&(t="right");return this.enemyData.baseDirection<=2&&(t="right"),this.isIntoHole?"right":t},getActionNameByState:function(e){var t=this.curState,a="stand";switch(t=e||t){case i.constant.ENEMY_STATE_STAND:case i.constant.ENEMY_STATE_READY:case i.constant.ENEMY_STATE_BEAK_BACK:a="stand";break;case i.constant.ENEMY_STATE_MOVE:case i.constant.ENEMY_STATE_LANDING:case i.constant.ENEMY_STATE_RETURN:a=this.isIntoHole?"run2":"run";break;case i.constant.ENEMY_STATE_BATTLE:var n;a="attack",this.enemyId==i.constant.YEAR_MONSTER_ENEMY_ID&&(66<=(n=i.Utils.getRandomInt(1,100))?a="attack2":33<=n&&(a="attack3"));break;case i.constant.ENEMY_STATE_SHOOT:a="shoot";break;case i.constant.ENEMY_STATE_DIE:break;case i.constant.ENEMY_STATE_SKILL:a="skill";break;case i.constant.ENEMY_STATE_SKILL2:a="skill2";break;case i.constant.ENEMY_STATE_POSE:a="pose"}return a},updateEnemyAction:function(e,t,a){var n=this,o=!0;t&&(o=!1);var s,r=this.getActionNameByDir(e),c=this.getActionNameByState(e)+"_"+r;this.curState,this.curState!=i.constant.ENEMY_STATE_DIE&&(t=Math.abs(this.spineNode.scaleX),e=this.enemyData.baseDirection,this.spineNode.scaleX=e<=2?90<this.degree&&this.degree<270?-t:t:this.curDir==i.constant.HERO_DIR_LEFT?-t:t,this.isIntoHole&&(this.spineNode.scaleX=t),this.enemySpine.findAnimation(c)||(c=this.getActionNameByState(i.constant.ENEMY_STATE_MOVE)+"_"+r),this.enemySpine.setAnimation(0,c,o),s=this,!o&&a&&this.enemySpine.setCompleteListener(function(e){(e.animation?e.animation.name:"")==c&&s.curState!=i.constant.ENEMY_STATE_DIE&&(c=n.getActionNameByState(a)+"_"+r,s.enemySpine.setAnimation(0,c,!0))}))},startDieAction:function(e,t){var a,n,o;this.hitBodyEffect(),i.battleScene.curSelectEnemyObj===this&&i.battleScene.setCurEnemyObj(null),this.curState!=i.constant.ENEMY_STATE_DIE&&(this.dieActionTime=5,this.showDieEffect(),this.isFly&&(a=cc.delayTime(1.2),n=cc.callFunc(function(){i.soundsUtil.playSoundEffect("enemy_drop")},this),n=cc.sequence(a,n),this.shadowNode.stopAllActions(),this.shadowNode.runAction(n)),n=Math.abs(this.spineNode.scaleX),this.spineNode.scaleX=this.curDir==i.constant.HERO_DIR_LEFT?-n:n,this.enemySpine.setAnimation(0,"death_right",!1),this.dieNextEnemyId<=0&&!e&&(t={pos:cc.v2(this.node.getPosition().x,this.node.getPosition().y+this.enemyData.hpBarHeight-30),num:Math.floor(t),type:i.constant.COIN_TYPE_IRON,delayTime:0},i.battleScene.createDropTipsByData(t)),(o=this).enemySpine.setCompleteListener(function(e){"death_right"==(e.animation?e.animation.name:"")&&0<o.dieNextEnemyId&&o.changeNextEnemy()}),this.setEnemyState(i.constant.ENEMY_STATE_DIE),this.noticeDie())},changeNextEnemy:function(){this.curMoveStep;var e={enemyId:this.dieNextEnemyId,routeId:this.routeId,curMoveStep:this.curMoveStep};this.initData(e)},enemyDie:function(){this.enemyDieOver()},readyBattle:function(e){this.curState!=i.constant.ENEMY_STATE_STAND&&this.curState!=i.constant.ENEMY_STATE_MOVE&&this.curState!=i.constant.ENEMY_STATE_SHOOT||(this.tarHeroObj=e,this.setEnemyState(i.constant.ENEMY_STATE_READY))},startBattle:function(){this.curState==i.constant.ENEMY_STATE_READY&&this.setEnemyState(i.constant.ENEMY_STATE_BATTLE)},isAlive:function(){return this.curState!=i.constant.ENEMY_STATE_DIE&&!(this.curHp<=0)},isNoDie:function(){return 0<this.dieNextEnemyId||this.isAlive()},isCanBattle:function(){return this.curState!=i.constant.ENEMY_STATE_BEAK_BACK&&this.curState!=i.constant.ENEMY_STATE_RETURN&&this.isCanAtk()},isCanAtk:function(e){return!(0<this.hideTime||0<this.bossPoseTime||0<this.intoHoleTime&&!e||!this.node.active||this.curState==i.constant.ENEMY_STATE_DIE||this.curHp<=0)},isCanSwitchBattle:function(){return this.curState==i.constant.ENEMY_STATE_STAND||this.curState==i.constant.ENEMY_STATE_MOVE},updateEnemyDirAction:function(){var e=this.curMoveStep;0<this.funkTime?e-=60:e+=60,e>=this.maxMoveStep?e=this.maxMoveStep:e<0&&(e=0);var t=i.battleScene.gameMapObj.getRouteMovePos(this.routeId,e),a=this.node.getPosition();e=this.getDirByPos(a,t),this.isIntoHole&&(this.spineNode.angle=i.Utils.getRotation(a,t)),this.curDir!=e&&(this.setEnemyDir(e),this.updateEnemyAction())},logicEnemyMove:function(e){0<this.curSkillStandTime||(this.enemyData.footstepAudio&&(this.moveSoundTime-=e,this.moveSoundTime<0&&(this.moveSoundTime=.5)),this.curMoveIndex++,this.curMoveIndex>=this.getMaxMoveIndex()&&(this.curMoveIndex=0,this.updatePos(e)),0<this.intoHoleTime&&this.isIntoHole&&this.isNearEnd(-1,this.intoHoleLimitDistance,!0)&&this.setIntoHole(!1),this.moveTime+=e,.2<this.moveTime&&(this.moveTime=0,this.updateEnemyDirAction()))},logicEnemyReady:function(){this.tarHeroObj&&this.tarHeroObj.tarEnemyObj==this&&this.tarHeroObj.isCanAtk()||this.checkEnemySwitchTarget()},getAtkUpdateHpTime:function(){return this.enemyId==i.constant.YEAR_MONSTER_ENEMY_ID?.5:8/30},getAtkStandTime:function(){return.3},logicEnemyBattle:function(e){if(0<this.funkTime)this.curAttackTime=0;else if(!this.tarHeroObj||this.tarHeroObj.tarEnemyObj!=this||!this.tarHeroObj.isCanAtk()||120<i.Utils.getDistance(this.node.getPosition(),this.tarHeroObj.node.getPosition()))this.checkEnemySwitchTarget();else{if(this.curAttackTime>=this.maxAttackTime){if(this.curAttackTime=0,this.checkHeroSkillAtkNum())return;this.atkUpdateHpTime=this.getAtkUpdateHpTime(),i.soundsUtil.playSoundEffect(this.enemyData.attackAudio);var t=this.getDirByPos(this.node.getPosition(),this.tarHeroObj.node.getPosition());this.setEnemyDir(t),this.updateEnemyAction(i.constant.ENEMY_STATE_BATTLE,!0,i.constant.ENEMY_STATE_STAND)}0<this.atkUpdateHpTime&&(this.atkUpdateHpTime-=e,this.atkUpdateHpTime<=0)&&(this.curSkillStandTime=this.getAtkStandTime(),this.atkUpdateHpTime=0,t=i.Utils.getRandomInt(1,100)<=this.critRate,e=1,0<this.maxShootDistance&&(e=this.enemyData.meleeDamageRate/1e4),t={physicalAtk:this.physicalAtk*e,magicAtk:this.magicAtk*e,isCrit:t,addHurtData:this.addHurtData,isBoss:this.isBoss},0<(t=this.tarHeroObj.heroFeelHurt(t))&&this.enemyFeelHurt(t,i.constant.ATK_TYPE_SKILL,!0))}},getShootAimPos:function(e){return e?((e=this.node.getPosition()).y+=this.enemyData.aimShotPoint,e):this.getGroundPos()},getAimPos:function(e){return e?this.getHeadPos():this.getGroundPos()},getHeadOffsetHeight:function(){return this.enemyData.headShotPoint},getHeadPos:function(){var e=this.node.getPosition();return e.y+=this.getHeadOffsetHeight(),e},getGroundPos:function(){return this.node.getPosition()},startEnemySkill:function(){if(this.skillData){var e=this.skillData.radius||0;switch(this.skillType){case i.constant.ENEMY_SKILL_TYPE_RESTORE:for(var t=this.skillData.parameter[0][1]/1e4,a=this.skillData.parameter[0][2],n=this.node.getPosition(),o=i.battleScene.enemyList,s=0;s<o.length;s++){var r=o[s];if(i.Utils.getDistance(n,r.getPosition())<e&&(r=r.getComponent("GameEnemy")).isCanAtk()&&(r.restoreHp(t),--a<=0))break}break;case i.constant.ENEMY_SKILL_TYPE_MOVE_SPEED:for(var c=this.skillData.parameter[0][1]/1e3,l=this.skillData.parameter[0][2]/1e4,d=this.skillData.parameter[0][3],h=this.node.getPosition(),u=i.battleScene.enemyList,p=0;p<u.length;p++){var g=u[p];if(i.Utils.getDistance(h,g.getPosition())<e&&(g=g.getComponent("GameEnemy")).isCanAtk()&&(g.addSpeed(l,c),--d<=0))break}break;case i.constant.ENEMY_SKILL_TYPE_STOP_TOWER:for(var _=this.skillData.parameter[0][1]/1e3,m=this.skillData.parameter[0][2]/1e3,E=i.Utils.getRandomInt(this.skillData.parameter[0][3],this.skillData.parameter[0][4]),T=this.node.getPosition(),f=i.battleScene.gameTowerList,S=0;S<f.length;S++){var A=f[S];if(i.Utils.getDistance(T,A.node.getPosition())<e&&(A.stopTower(_,m),--E<=0))break}break;case i.constant.ENEMY_SKILL_TYPE_CHANGE_SHEEP:for(var I=this.skillData.parameter[0][1]/1e3,y=this.skillData.parameter[0][2],P=this.node.getPosition(),v=i.battleScene.soldierList,L=0;L<v.length;L++){var N=v[L];if(i.Utils.getDistance(P,N.getPosition())<e&&(N=N.getComponent("GameHero")).isCanAtk()&&(N.changeSheep(I),--y<=0))break}break;case i.constant.ENEMY_SKILL_TYPE_BOSS_CALL:this.skillData.parameter[0][1];for(var b=this.enemyData.bossCallEnemyList,R=this.enemyData.skill[0][3],C=i.templateManager.getTroopDataById(R).troopGroup,D=[],k=[],O=-1,w=0;w<C.length;w++){var M=C[w][1],B=C[w][2];888==M&&(O=B)}if(0<=O)for(var H=0;H<C.length;H++){var G=C[H][0],U=C[H][1],x=C[H][2];888!=U&&(G=this.routeId+2-G,x=this.curMoveStep+O-x,i.Logger.debug("i = "+H+" curRouteId = "+G+" curStep = "+x),D.push(G),k.push(x))}for(var F,Y,V,W=0;W<k.length;W++)i.battleScene.gameMapObj.isHaveRouteId(D[W])?(Y=b[1<b.length?i.Utils.getRandomInt(0,b.length-1):0],V=i.battleScene.createEnemyByData({enemyId:Y,routeId:D[W]}).getComponent("GameEnemy"),F=i.battleScene.gameMapObj.getRouteMoveLength(D[W])-1,(Y=k[W])<0?Y=0:Y>this.maxMoveStep&&(Y=this.maxMoveStep),V.curMoveStep=Math.floor(Y/this.maxMoveStep*F),V.updatePos(),V.curState=-1,V.setEnemyState(i.constant.ENEMY_STATE_MOVE),V.updateEnemyDirAction(),V={type:i.constant.GAME_TIPS_TYPE_ENEMY_CALL,pos:V.node.getPosition(),zIndex:V.node.zIndex+1,time:1},i.battleScene.createIconTipsByData(V)):i.Logger.debug("not found routeId = "+D[W]);break;case i.constant.ENEMY_SKILL_TYPE_INTO_HOLE:var K=this.skillData.parameter[0][1]/1e3;R=this.skillData.parameter[0][2],this.isNearEnd(-1,R,!0)||(this.setIntoHole(!0,K,R),R={type:i.constant.GAME_TIPS_TYPE_HOLE,pos:this.node.getPosition(),zIndex:this.node.zIndex,time:1.5,scale:this.enemyData.scaling/1e4},i.battleScene.createIconTipsByData(R)),this.updateEnemyAction();break;case i.constant.ENEMY_SKILL_TYPE_CALL_ENEMY:var j=this.skillData.parameter[0][1],Q=this.skillData.parameter[0][2],q=(this.skillData.parameter[0][3],this.skillData.parameter[0][4]),J=[],X=[];3==q?(J=[this.routeId,this.routeId+1,this.routeId-1],X=[this.curMoveStep+35,this.curMoveStep-30,this.curMoveStep-30]):2==q&&(J=[this.routeId+1,this.routeId-1],X=[this.curMoveStep-30,this.curMoveStep-30]),(ee=this.curMoveStep+60)>=this.maxMoveStep&&(ee=this.maxMoveStep);for(var z,Z,$,ee=i.battleScene.gameMapObj.getRouteMovePos(this.routeId,ee),te=this.node.getPosition(),ie=i.Utils.getDegree(te,ee),ae=0;ae<q;ae++)i.battleScene.gameMapObj.isHaveRouteId(J[ae])?(Z=i.Utils.getOffsetByRotationAndDistance(ie,Q),cc.v2(te.x+Z.x,te.y+Z.y),$=i.battleScene.createEnemyByData({enemyId:j,routeId:J[ae]}).getComponent("GameEnemy"),z=i.battleScene.gameMapObj.getRouteMoveLength(J[ae])-1,(Z=X[ae])<0?Z=0:Z>this.maxMoveStep&&(Z=this.maxMoveStep),$.curMoveStep=Math.floor(Z/this.maxMoveStep*z),$.updatePos(),$.curState=-1,$.setEnemyState(i.constant.ENEMY_STATE_MOVE),$.updateEnemyDirAction(),$={type:i.constant.GAME_TIPS_TYPE_ENEMY_CALL,pos:$.node.getPosition(),zIndex:i.constant.LAYER_HERO_SKILL,time:1},i.battleScene.createIconTipsByData($)):i.Logger.debug("not found routeId = "+J[ae]),360<(ie+=360/q)&&(ie-=360);break;case i.constant.ENEMY_SKILL_TYPE_SHIELD:for(var ne=this.skillData.parameter[0][1]/1e3,oe=this.maxHp*this.skillData.parameter[0][2]/1e4,se=this.skillData.parameter[0][3],re=this.node.getPosition(),ce=i.battleScene.enemyList,le=0;le<ce.length;le++){var de=ce[le];if(i.Utils.getDistance(re,de.getPosition())<e&&(de=de.getComponent("GameEnemy")).isCanAtk()&&(de.addShield(ne,oe),--se<=0))break}break;case i.constant.ENEMY_SKILL_TYPE_ADD_HP:ee=this.skillData.parameter[0][1]/1e4,this.restoreHp(ee)}}},logicEnemySkill:function(e){if(0<this.limitSkillTime)return!1;if(this.skillData&&(this.curSkillTime+=e,0<this.maxSkillTime&&this.curSkillTime>=this.maxSkillTime)){if(this.curSkillTime=0,this.skillType==i.constant.ENEMY_SKILL_TYPE_INTO_HOLE){var t=this.skillData.parameter[0][2];if(this.isNearEnd(-1,t,!0))return!1;this.intoHoleTime=2}this.curSkillStandTime=this.maxSkillStandTime,this.updateEnemyAction(i.constant.ENEMY_STATE_SKILL,!0,i.constant.ENEMY_STATE_MOVE),i.soundsUtil.playSoundEffect(this.skillData.skillAudio),this.skillType==i.constant.ENEMY_SKILL_TYPE_BOSS_CALL&&this.isBoss&&(t={type:i.constant.GAME_TIPS_TYPE_BOSS_CALL_EFFECT,pos:this.node.getPosition(),zIndex:this.node.zIndex+1,time:1},i.battleScene.createIconTipsByData(t)),0<this.skillData.isSkillFloat&&(a=i.lang.getGameText(this.skillData.name),a={pos:cc.v2(this.node.getPosition().x,this.node.getPosition().y+this.enemyData.hpBarHeight),desc:a,camp:i.constant.SKILL_CAMP_ENEMY},i.battleScene.createSkillTipsByData(a));var a=this.skillData.skillTakeEffectTime/1e3-1/30;return this.scheduleOnce(function(){this.startEnemySkill()},a),!0}return!1},isEnemyInScene:function(){var e=cc.winSize.height/2-20,t=-e,i=this.node.getPosition();return!(i.x<-300||300<i.x||i.y<t||i.y>e)},isCanShootHero:function(e){if(!this.isEnemyInScene())return i.Logger.debug("isCanShootHero false isEnemyInScene false"),!1;var t=i.Utils.getDistance(this.getShootPos(),e.getHeadPos());return!!(t<=this.maxShootDistance&&t>=this.minShootDistance&&e.isCanAtk())},isHaveShootHero:function(){return!!this.tarHeroObj&&this.isCanShootHero(this.tarHeroObj)},getShootPos:function(){var e=this.node.getPosition();return this.enemyData.bulletPoint&&(e.x+=this.enemyData.bulletPoint[this.curDir-1][0],e.y+=this.enemyData.bulletPoint[this.curDir-1][1]),e},checkHeroShoot:function(){if(this.maxShootDistance<=0)return!1;var e=this.isHaveShootHero(),t=this.isEnemyInScene();if(!e&&t)for(var a=i.battleScene.soldierList,n=0;n<a.length;n++){var o=a[n].getComponent("GameHero");if(this.isCanShootHero(o)){this.tarHeroObj=o,this.setEnemyState(i.constant.ENEMY_STATE_SHOOT);break}}},logicEnemyShoot:function(){var e,t,a;0<this.funkTime?this.curAttackTime=0:this.isHaveShootHero()?this.curAttackTime>=this.maxAttackTime&&(this.curAttackTime=0,this.checkHeroSkillAtkNum()||(this.updateEnemyAction(i.constant.ENEMY_STATE_SHOOT,!0,i.constant.ENEMY_STATE_STAND),e=this.getShootPos(),a=1==i.templateManager.getBulletDataById(this.enemyData.bulletId).aimingPoint,t=this.tarHeroObj.getAimPos(a),a={source:i.constant.SHOOT_SOURCE_ENEMY,bulletId:this.enemyData.bulletId,towerType:-1,tarObj:this.tarHeroObj,shootObj:this,curPos:e,tarPos:t,isAimHead:a,physicalAtk:this.physicalAtk,magicAtk:this.magicAtk,critRate:this.critRate,critHurt:this.critHurt,faintedTime:i.Utils.getRandomInt(1,100)<=this.bulletFaintedRate?this.bulletFaintedTime:0,ignoreArmorData:null,isBoss:this.isBoss,addHurtData:this.addHurtData,delay:8/30},i.battleScene.createBulletByData(a))):(this.checkHeroShoot(),this.isHaveShootHero()||this.setEnemyState(i.constant.ENEMY_STATE_MOVE))},updateBattleSpeedPercent:function(){this.enemySpine&&(this.enemySpine.timeScale=i.battleScene.battleSpeedPercent*this.baseTimeScale*i.battleScene.slowSpeedPercent)},checkHeroSkillAtkNum:function(){return!(this.maxBigSkillAtkNum<=0)&&(this.curBigSkillAtkNum++,2<this.curBigSkillAtkNum&&(this.startBigSkill(),!(this.curBigSkillAtkNum=0)))},startBigSkill:function(){var e=this.skillData,t=(t=e.publicCD/1e3)||1.2;this.skillStandTime=t,this.updateEnemyAction(i.constant.ENEMY_STATE_SKILL,!0,i.constant.ENEMY_STATE_STAND);var a=i.lang.getGameText(e.name);return t=i.constant.FLY_HP_TYPE_CRIT,t={pos:cc.v2(this.node.getPosition().x,this.node.getPosition().y+50),num:a,type:t},i.battleScene.createFlyHpByData(t),this.startSkill(e),!0},getSkillEffectData:function(e,t){for(var i=0;i<e.length;i++)if(e[i][0]==t)return e[i];return null},startSkill:function(e){var t=e.atkParameter?e.atkParameter[0]:null,a=e.parameter||[],n=e.bulletID,o=e.startSelection,s=e.targetSelection,r=o!=s,c=(o=this.getSkillEffectData(a,i.constant.HERO_SKILL_EFFECT_SWOON))?o[1]/1e3:0,l=null;(o=this.getSkillEffectData(a,i.constant.HERO_SKILL_EFFECT_CONTINUE))&&(l={fireDotHurt:o[1]+(this.physicalAtk+this.magicAtk)*o[2]/1e4,fireHurtTime:o[3]/1e3,fireAllTime:o[4]/1e3});var d=(o=this.getSkillEffectData(a,i.constant.HERO_SKILL_EFFECT_MOVE_SPEED))?{speedPercent:o[1]/1e4,speedTime:o[2]/1e3}:null,h=(a=this.getSkillEffectData(a,i.constant.HERO_SKILL_EFFECT_FORMATION))?{continueTime:a[1]/1e3,checkTime:a[2]/1e3}:null;if(t&&((a=t[0])==i.constant.HERO_SKILL_SHOOT_1||a==i.constant.HERO_SKILL_SHOOT_2)){var u=t[1],p=t[2],g=(a=t[3]/1e4,t[4]/1e3),_=t[5];p+=this.physicalAtk*a,p+=this.magicAtk*a,p=Math.floor(p);for(var m=0;m<u;m++){var E=i.templateManager.getBulletDataById(n),T=r||1==E.aimingPoint,f=r?i.constant.TOWER_TYPE_ARROW:-1,S=cc.v2(0,0);s==i.constant.HERO_SKILL_TAR_SELF?S=this.node.getPosition():s==i.constant.HERO_SKILL_TAR_ENEMY&&(S=this.tarHeroObj.getAimPos(T)),0<_&&(S=i.battleScene.getBlowPos(S,_,[],!1,0,!1));var A=.3+g*m;E=r?this.getShootPos():S,A={source:i.constant.SHOOT_SOURCE_BOSS,bulletId:n,towerType:f,curPos:E,tarPos:S,isAimHead:T,physicalAtk:0,magicAtk:0,isCrit:!1,realHurt:p,faintedTime:c,moveSpeedData:d,formationData:h,fireContinueData:l,isBoss:this.isBoss,delay:A},i.battleScene.createBulletByData(A)}}},isPoisoning:function(){return!!this.poisonTotalTime},getClickPosition:function(){return cc.v2(this.node.getPosition().x,this.node.getPosition().y+this.enemyData.hpBarHeight-30)},onClickEnemy:function(){this.pointNode.active=!0,i.battleScene.setCurEnemyObj(this),i.battleScene.gameBattleUIObj.showEnemyDetail()},hidePoint:function(){this.pointNode.active&&(this.pointNode.active=!1),i.battleScene.gameBattleUIObj.hideEnemyDetail()},logicEnemyBeakBack:function(e){this.node.x+=this.moveSpeedX,this.node.y+=this.moveSpeedY,this.shadowNode.setPosition(this.node.getPosition()),i.battleScene.updateZIndex(this.node),0<this.beakBackTime&&(this.beakBackTime-=e,this.beakBackTime<=0&&this.setEnemyState(i.constant.ENEMY_STATE_RETURN))},logicEnemyReturn:function(e){this.node.x+=this.moveSpeedX,this.node.y+=this.moveSpeedY,i.Utils.getDistance(this.returnTarPos,this.node.getPosition())<2*(e=(e=this.getMoveSpeed(e))<=0?1:e)&&(this.node.setPosition(this.returnTarPos),this.setEnemyState(i.constant.ENEMY_STATE_MOVE))},isMustLogic:function(){return this.curState==i.constant.ENEMY_STATE_BEAK_BACK||this.curState==i.constant.ENEMY_STATE_RETURN},getEnemyClickRange:function(){var e=30;return this.enemyData.type==i.constant.ENEMY_TYPE_BOSS?e=70:this.enemyData.type==i.constant.ENEMY_TYPE_ELITE&&(e=45),e},updateEnemy:function(e){var t,a;if(0<this.bossPoseTime&&(this.bossPoseTime-=e,this.bossPoseTime<=this.maxPoseTime/2&&this.isNeedPose&&(this.isNeedPose=!1,this.setEnemyState(i.constant.ENEMY_STATE_POSE))),0<this.dieActionTime&&(this.dieActionTime-=e,this.dieActionTime<=0&&this.enemyDie()),0<this.hideTime)this.hideTime-=e,this.hideTime<=0&&(this.hideTime=0,this.node.active=!0,this.startFadeInEffect(),this.updatePos(),this.curState=-1,this.setEnemyState(i.constant.ENEMY_STATE_MOVE),this.updateEnemyDirAction(),this.isSendEnemy)&&(this.isSendEnemy=!1,a={type:i.constant.GAME_TIPS_TYPE_HERO_CALL,pos:this.node.getPosition(),zIndex:i.constant.LAYER_HERO_SKILL,time:1,scale:.5},i.battleScene.createIconTipsByData(a));else if(this.isIntoHole&&0<this.intoHoleTime&&(this.intoHoleTime-=e,this.intoHoleTime<0&&this.setIntoHole(!1)),0<this.fireAllTime&&(this.fireAllTime-=e,this.curFireTime+=e,this.curFireTime>=this.fireHurtTime&&(this.curFireTime-=this.fireHurtTime,this.enemySkillHurt(this.fireDotHurt)),this.fireAllTime<=0&&this.showFireDotEffect(!1)),0<this.dotAllTime&&(this.dotAllTime-=e,this.curDotTime+=e,this.curDotTime>=this.dotHurtTime&&(this.curDotTime-=this.dotHurtTime,this.enemySkillHurt(this.dotHurt))),0<this.poisonTotalTime&&(this.poisonTotalTime-=e,this.curPoisonTime+=e,this.curPoisonTime>=this.poisonHurtTime&&(this.curPoisonTime-=this.poisonHurtTime,this.enemySkillHurt(this.poisonDotHurt)),this.poisonTotalTime<=0&&this.showPoisonDotEffect(!1)),0<this.limitSkillTime&&(this.limitSkillTime-=e,this.limitSkillTime<=0&&(this.limitSkillTime=0,this.showSilenceEffect(!1))),0<this.funkTime&&(this.funkTime-=e,this.funkTime<0&&(this.funkTime=-1,this.showFearEffect(!1))),0<this.updatePhysicalDefTime&&(this.updatePhysicalDefTime-=e,this.updatePhysicalDefTime<=0&&this.updatePhysicalDef(0,0)),0<this.updateMagicDefTime&&(this.updateMagicDefTime-=e,this.updateMagicDefTime<=0&&this.updateMagicDef(0,0)),0<this.addHurtTime&&(this.addHurtTime-=e,this.addHurtTime<=0&&(this.addHurtPercent=0)),0<this.dieHpTime&&(this.dieHpTime-=e,this.dieHpTime<=0&&(this.dieHpPercent=0)),0<this.shieldTime&&(this.shieldTime-=e,this.shieldTime<=0&&(this.shieldHp=0,this.showShieldEffect(!1))),0<this.dieOverTime)this.dieOverTime-=e,this.dieOverTime<0&&(this.dieOverTime=0,t=cc.fadeOut(.5),a=cc.callFunc(function(){this.enemyDie()},this),a=cc.sequence(t,a),this.node.stopAllActions(),this.node.runAction(a),this.shadowNode.runAction(cc.fadeOut(.5)));else{0<this.reduceSpeedTime&&(this.reduceSpeedTime-=e,this.reduceSpeedTime<=0&&this.showIceSlowEffect(!1)),0<this.addSpeedTime&&(this.addSpeedTime-=e),0<this.skillSlowAtkSpeedTime&&(this.skillSlowAtkSpeedTime-=e,this.skillSlowAtkSpeedTime<=0&&(this.updateEnemyAttackTime(),this.baseTimeScale=1,this.updateBattleSpeedPercent()));for(var n=0;n<this.cacheHurtData.length;n++){var o=this.cacheHurtData[n];if(o.delayTime-=e,o.delayTime<=0){this.enemyFeelHurt(o.data,o.atkType,o.isFinalHurt,0),this.cacheHurtData.splice(n,1);break}}if((!(0<this.faintedTime)||(this.faintedTime-=e,this.faintedTime<=0&&(this.showEnemyStopEffect(!1),this.updateEnemyAction()),this.isMustLogic()))&&(this.curState!=i.constant.ENEMY_STATE_BATTLE&&this.curState!=i.constant.ENEMY_STATE_SHOOT||(this.curAttackTime+=e),!(0<this.skillStandTime)||(this.skillStandTime-=e,this.skillStandTime<=0&&(this.skillStandTime=0),this.isMustLogic()))){if(0<this.curSkillStandTime){if(this.curSkillStandTime-=e,!this.isMustLogic())return;this.curSkillStandTime<=0&&this.checkTargetEnemy&&(this.checkEnemySwitchTarget(),this.checkTargetEnemy=!1)}switch(this.curState){case i.constant.ENEMY_STATE_STAND:break;case i.constant.ENEMY_STATE_MOVE:this.logicEnemyMove(e),this.logicEnemySkill(e),this.checkShootTime+=e,.5<this.checkShootTime&&(this.checkShootTime=0,this.checkHeroShoot());break;case i.constant.ENEMY_STATE_READY:this.logicEnemyReady(e);break;case i.constant.ENEMY_STATE_BATTLE:if(this.isBattleSkill&&this.logicEnemySkill(e))return;this.logicEnemyBattle(e);break;case i.constant.ENEMY_STATE_SHOOT:this.logicEnemyShoot(e);break;case i.constant.ENEMY_STATE_BEAK_BACK:this.logicEnemyBeakBack(e);break;case i.constant.ENEMY_STATE_RETURN:this.logicEnemyReturn(e);break;case i.constant.ENEMY_STATE_DIE:break;case i.constant.ENEMY_STATE_POSE:0<this.curPoseTime&&(this.curPoseTime-=e,this.curPoseTime<=0&&this.setEnemyState(i.constant.ENEMY_STATE_MOVE))}}}}}),cc._RF.pop()},{}],GameEventType:[function(e,t){"use strict";cc._RF.push(t,"af85fpmm31Groa6phGbM7jp","GameEventType");var i=t,a=cc.Enum({LOGIN_SUCCESS:"ON_LOGIN_SUCCESS",GO_TO_GAME_PAGE:"GO_TO_GAME_PAGE",CHOOSE_SKILL:"CHOOSE_SKILL",SHOW_SYSTEM_TIPS:"SHOW_SYSTEM_TIPS",SHOW_AD_LOAD_OVER:"SHOW_AD_LOAD_OVER",SHOW_AD:"SHOW_AD",SHOW_AD_START:"SHOW_AD_START",SHOW_AD_CLICK_BAR:"SHOW_AD_CLICK_BAR",SHOW_AD_SKIP:"SHOW_AD_SKIP",SHOW_AD_SHOW_FINISH:"SHOW_AD_SHOW_FINISH",SHOW_AD_REWARD:"SHOW_AD_REWARD",SHOW_AD_CLOSE:"SHOW_AD_CLOSE",SHOW_AD_ERROR:"SHOW_AD_ERROR",SHOW_AD_LOAD_ERROR:"SHOW_AD_LOAD_ERROR",SHOW_AD_OVER_AD_POWER:"SHOW_AD_OVER_AD_POWER-1",SHOW_AD_OVER_HANG_UP:"SHOW_AD_OVER_HANG_UP-2",SHOW_AD_OVER_AD_HERO_UP_LEVEL:"SHOW_AD_OVER_AD_HERO_UP_LEVEL-3",SHOW_AD_OVER_AD_TOWER_UP_LEVEL:"SHOW_AD_OVER_AD_TOWER_UP_LEVEL-4",SHOW_AD_OVER_SHOP_GOLD:"SHOW_AD_OVER_SHOP_GOLD-5",SHOW_AD_OVER_SHOP_PIECE:"SHOW_AD_OVER_SHOP_PIECE-6",SHOW_AD_OVER_SHOP_BOX_RECEIVE:"SHOW_AD_OVER_SHOP_BOX_RECEIVE-7",SHOW_AD_OVER_SHOP_BOX_SUB_CD:"SHOW_AD_OVER_SHOP_BOX_SUB_CD-8",SHOW_AD_OVER_SHOP_SILVER:"SHOW_AD_OVER_SHOP_SILVER-9",SHOW_AD_OVER_SHOP_EXP:"SHOW_AD_OVER_SHOP_EXP-10",SHOW_AD_OVER_PLAYER_LEVEL_UP:"SHOW_AD_OVER_PLAYER_LEVEL_UP-11",SHOW_AD_OVER_SIGN:"SHOW_AD_OVER_SIGN-12",SHOW_AD_OVER_QUICKLY_BATTLE:"SHOW_AD_OVER_QUICKLY_BATTLE-13",SHOW_AD_OVER_QUICKLY_BATTLE_DOUBLE:"SHOW_AD_OVER_QUICKLY_BATTLE_DOUBLE-14",SHOW_AD_OVER_SIGN_AGAIN:"SHOW_AD_OVER_SIGN_AGAIN-15",SHOW_AD_OVER_PIGGY_BANK:"SHOW_AD_OVER_PIGGY_BANK-16",SHOW_AD_OVER_DEFEND_DOUBLE_REWARD:"SHOW_AD_OVER_DEFEND_DOUBLE_REWARD-20",SHOW_AD_OVER_DEFEND_UP_HERO_LEVEL:"SHOW_AD_OVER_DEFEND_UP_HERO_LEVEL-21",SHOW_AD_OVER_DEFEND_SPEED:"SHOW_AD_OVER_DEFEND_SPEED-22",SHOW_AD_OVER_MAIN_TASK_LOTTERY:"SHOW_AD_OVER_MAIN_TASK_LOTTERY-23",SHOW_AD_OVER_GAY_FRIEND_CHANGE:"SHOW_AD_OVER_GAY_FRIEND_CHANGE-24",SHOW_AD_OVER_TWO_VAN_ADD:"SHOW_AD_OVER_TWO_VAN_ADD-25",SHOW_AD_OVER_TWO_VAN_REFRESH:"SHOW_AD_OVER_TWO_VAN_REFRESH-26",SHOW_AD_OVER_GAY_FRIEND:"SHOW_AD_OVER_GAY_FRIEND-27",SHOW_AD_OVER_ALLIANCE_AD:"SHOW_AD_OVER_ALLIANCE_AD-28",SHOW_AD_OVER_YEAR_MONSTER:"SHOW_AD_OVER_YEAR_MONSTER-29",SHOW_AD_OVER_ALLIANCE_RED_DOUBLE:"SHOW_AD_OVER_ALLIANCE_RED_DOUBLE-30",SHOW_AD_OVER_START_BUFFS:"SHOW_AD_OVER_START_BUFFS-500",SHOW_AD_OVER_CHOOSE_SKILL:"SHOW_AD_OVER_CHOOSE_SKILL-501",SHOW_AD_OVER_SKILL_UP:"SHOW_AD_OVER_SKILL_UP-502",SHOW_AD_OVER_BATTLE_BOX:"SHOW_AD_OVER_BATTLE_BOX-503",SHOW_AD_OVER_GAME_RESULT_SUCCESS:"SHOW_AD_OVER_GAME_RESULT_SUCCESS-504",SHOW_AD_OVER_GAME_RESULT_FAIL:"SHOW_AD_OVER_GAME_RESULT_FAIL-505",SHOW_AD_OVER_AD_REVIVAL:"SHOW_AD_OVER_AD_REVIVAL-506",SHOW_AD_OVER_SKILL_ALL_GET:"SHOW_AD_OVER_SKILL_ALL_GET-507",SHOW_AD_OVER_SECOND_HERO:"SHOW_AD_OVER_SECOND_HERO-508",SHOW_AD_OVER_TOWER_ACTIVE:"SHOW_AD_OVER_TOWER_ACTIVE-509",SHOW_AD_OVER_SPEED_TRY:"SHOW_AD_OVER_SPEED_TRY-510",SHOW_AD_OVER_HERO_TRY:"SHOW_AD_OVER_HERO_TRY-511",SHOW_SHARE_ALLIANCE_SHARE:"SHOW_SHARE_ALLIANCE_SHARE-1",UPDATE_UI_GOLD_CHANGE:"UPDATE_UI_GOLD_CHANGE",UPDATE_UI_DIAMOND_CHANGE:"UPDATE_UI_DIAMOND_CHANGE",MAIN_UPDATE_POWER:"MAIN_UPDATE_POWER",UPDATE_PLAYER_ROLE_INFO:"UPDATE_PLAYER_ROLE_INFO",UPDATE_MAIN_BOX_INFO:"UPDATE_MAIN_BOX_INFO",UPDATE_MAIN_INSTANCE_BOX_TIPS:"UPDATE_MAIN_INSTANCE_BOX_TIPS",UPDATE_MAIN_INSTANCE:"UPDATE_MAIN_INSTANCE",UPDATE_MAIN_VIP:"UPDATE_MAIN_VIP",UPDATE_HANG_UP_BOX:"UPDATE_HANG_UP_BOX",UPDATE_HANG_UP_BOX_RED:"UPDATE_HANG_UP_BOX_RED",UPDATE_HANG_UP_PAGE:"UPDATE_HANG_UP_PAGE",FUNCTION_UNLOCK_EVENT:"FUNCTION_UNLOCK_EVENT",UPDATE_ROLE_ICON:"UPDATE_ROLE_ICON",REFRESH_HANGUP_SPINE_INFO:"REFRESH_HANGUP_SPINE_INFO",SET_HANGUP_EFFECT_STATUS:"SET_HANGUP_EFFECT_STATUS",SKIP_NEW_GUIDE:"SKIP_NEW_GUIDE",UPDATE_MAIN_TASK:"UPDATE_MAIN_TASK",UPDATE_GIFT_DATA:"UPDATE_GIFT_DATA",UPDATE_CUSTOMER_REWARD:"UPDATE_CUSTOMER_REWARD",PAGE_OPEN_OVER:"PAGE_OPEN_OVER",PAGE_CLOSE_OVER:"PAGE_CLOSE_OVER",SET_UPDATE_NAME:"SET_UPDATE_NAME",SET_UPDATE_LANGUAGE:"SET_UPDATE_LANGUAGE",CHECK_MAIN_CHILD_RED:"CHECK_MAIN_CHILD_RED",UPDATE_MAIN_QUICKLY_BATTLE:"UPDATE_MAIN_QUICKLY_BATTLE",MAIN_UPDATE_QUICKLY_BATTLE_CD:"MAIN_UPDATE_QUICKLY_BATTLE_CD",UPDATE_TOWER_BUILD_ITEM:"UPDATE_TOWER_BUILD_ITEM",UPDATE_TOWER_UP_ITEM:"UPDATE_TOWER_UP_ITEM",CHECK_MAIN_TOWER_RED:"CHECK_MAIN_TOWER_RED",REFRESH_WORLD_DEFEND_ITEM:"REFRESH_WORLD_DEFEND_ITEM",UPDATE_QUICK_WORLD_DEFEND_TIPS:"UPDATE_QUICK_WORLD_DEFEND_TIPS",REFRESH_SPEED_DEFEND_PAGE:"REFRESH_SPEED_DEFEND_PAGE",CHECK_MAIN_WORLD_RED:"CHECK_MAIN_WORLD_RED",REFRESH_WORLD_QUICK_DEFEND_ITEM:"REFRESH_WORLD_QUICK_DEFEND_ITEM",UPDATE_HERO_CHOOSE_INFO:"UPDATE_HERO_CHOOSE_INFO",UPDATE_TOWER_HERO_CHOOSE_INFO:"UPDATE_TOWER_HERO_CHOOSE_INFO",UPDATE_HERO_RED:"UPDATE_HERO_RED",UPDATE_HERO_MAIN_RED:"UPDATE_HERO_MAIN_RED",UPDATE_HERO_PAGE_LIST:"UPDATE_HERO_PAGE_LIST",UPDATE_HERO_VAN:"UPDATE_HERO_VAN",UPDATE_HERO_GAYFRIEND_RED:"UPDATE_HERO_GAYFRIEND_RED",UPDATE_HERO_GAYFRIEND_ITEM:"UPDATE_HERO_GAYFRIEND_ITEM",UPDATE_HERO_TAG_RED:"UPDATE_HERO_TAG_RED",UPDATE_PICTORIAL_TOWER_RED:"UPDATE_PICTORIAL_TOWER_RED",REFRESH_SHOP_INFO:"REFRESH_SHOP_INFO",REFRESH_MAIL_PAGE:"REFRESH_MAIL_PAGE",TASK_DAILY_REFRESH:"TASK_DAILY_REFRESH",TASK_SCORE_REFRESH:"TASK_SCORE_REFRESH",TASK_TOP_TIP:"TASK_TOP_TIP",NEW_YEAR_TASK_TOP_TIP:"NEW_YEAR_TASK_TOP_TIP",NEW_YEAR_TASK_REFRESH:"NEW_YEAR_TASK_REFRESH",NEW_YEAR_ACTIVITY_REFRESH:"NEW_YEAR_ACTIVITY_REFRESH",NEW_YEAR_TASK_REWARD_REFRESH:"NEW_YEAR_TASK_REWARD_REFRESH",YEAR_MONSTER_UPDATE_RED:"YEAR_MONSTER_UPDATE_RED",YEAR_TASK_UPDATE_RED:"YEAR_TASK_UPDATE_RED",UPDATE_ALLIANCE_RED:"UPDATE_ALLIANCE_RED",UPDATE_MAIN_FREE_POWER_ICON:"UPDATE_MAIN_FREE_POWER_ICON",UPDATE_MAIN_FREE_POWER_RED:"UPDATE_MAIN_FREE_POWER_RED",MAIN_UPDATE_TASK_RED:"MAIN_UPDATE_TASK_RED",MAIN_UPDATE_SIGN_RED:"MAIN_UPDATE_SIGN_RED",Mail_UPDATE_EMAIL_RED:"Mail_UPDATE_EMAIL_RED",Mail_UPDATE_VIP_RED:"Mail_UPDATE_VIP_RED",MAIN_UPDATE_INVITE_RED:"MAIN_UPDATE_INVITE_RED",MAIN_UPDATE_GIFT_RED:"MAIN_UPDATE_GIFT_RED",REFRESH_VIP_PAGE:"REFRESH_VIP_PAGE",REFRESH_YEAR_MONSTER_PAGE:"REFRESH_YEAR_MONSTER_PAGE",SIGN_UPDATE_INFO:"SIGN_UPDATE_INFO",CHECK_GUIDE:"CHECK_GUIDE",STOP_REVIVAL_TIME:"STOP_REVIVAL_TIME",UPDATE_SKILL_LEVEL:"UPDATE_SKILL_LEVEL",UNLOCK_SKILL:"UNLOCK_SKILL",UPDATE_SKILL_STAR:"UPDATE_SKILL_STAR",UPDATE_SKILL_RED_TIP:"UPDATE_SKILL_RED_TIP",GET_WX_USER_INFO_SUCCESS:"GET_WX_USER_INFO_SUCCESS",GET_WX_USER_LOCATION_SUCCESS:"GET_WX_USER_LOCATION_SUCCESS",REFRESH_ALLIANCE_INFO_PAGE:"REFRESH_ALLIANCE_INFO_PAGE",REFRESH_ALLIANCE_MEMBER:"REFRESH_ALLIANCE_MEMBER",UPDATE_ALLIANCE_BTN:"UPDATE_ALLIANCE_BTN",AD_SHOW_FAIL_DEAL_SHOP_BOX:"AD_SHOW_FAIL_DEAL_SHOP_BOX",AD_SHOW_FAIL_DEAL_SHOP_FREE:"AD_SHOW_FAIL_DEAL_SHOP_FREE",AD_SHOW_FAIL_DEAL_SHOP_SILVER:"AD_SHOW_FAIL_DEAL_SHOP_SILVER",AD_SHOW_FAIL_DEAL_SHOP_EXP:"AD_SHOW_FAIL_DEAL_SHOP_EXP",AD_SHOW_FAIL_DEAL_SKILL_UP:"AD_SHOW_FAIL_DEAL_SKILL_UP",AD_SHOW_FAIL_DEAL_PIGGY_BANK:"AD_SHOW_FAIL_DEAL_PIGGY_BANK"});i.exports=a,cc._RF.pop()},{}],GameFlyHp:[function(e,t){"use strict";cc._RF.push(t,"12252u/iHVIb6RSjrQretjX","GameFlyHp");var i=e("Aft");cc.Class({extends:cc.Component,properties:{},start:function(){},initData:function(e){var t=1,a=1,n=e.type==i.constant.FLY_HP_TYPE_CRIT||e.type==i.constant.FLY_HP_TYPE_MAGIC_CRIT||e.type==i.constant.FLY_HP_TYPE_SECOND;this.labelNode1=cc.find("label",this.node),this.labelNode2=cc.find("label2",this.node),this.labelNode1.active=!n,this.labelNode2.active=n,this.labelNode=n?this.labelNode2:this.labelNode1,this.label=this.labelNode.getComponent(cc.Label),this.num=e.num;var o=i.Utils.formatNumberForLabel(this.num);switch(this.delayTime=e.delayTime||0,e.type!=i.constant.FLY_HP_TYPE_MISS&&e.type!=i.constant.FLY_HP_TYPE_SECOND&&i.Utils.isNumber(this.num)?0<this.num?this.label.string="+"+o:this.label.string=""+o:this.label.string=this.num,e.type){case i.constant.FLY_HP_TYPE_RECOVERY:this.labelNode.color=i.constant.COLOR_HP_RECOVERY,t=2,a=1.1;break;case i.constant.FLY_HP_TYPE_GENERAL:this.labelNode.color=i.constant.COLOR_HP_GENERAL;break;case i.constant.FLY_HP_TYPE_CRIT:case i.constant.FLY_HP_TYPE_SECOND:this.labelNode.color=i.constant.COLOR_HP_CRIT,t=2.4,a=1;break;case i.constant.FLY_HP_TYPE_MAGIC:this.labelNode.color=i.constant.COLOR_HP_MAGIC;break;case i.constant.FLY_HP_TYPE_MAGIC_CRIT:t=2.4,a=1,this.labelNode.color=i.constant.COLOR_HP_MAGIC_CRIT;break;case i.constant.FLY_HP_TYPE_SKILL:this.labelNode.color=i.constant.COLOR_HP_SKILL;break;case i.constant.FLY_HP_TYPE_MISS:t=2,this.labelNode.color=i.constant.COLOR_HP_MISS;break;case i.constant.FLY_HP_TYPE_ABSORB:t=2,this.labelNode.color=i.constant.COLOR_ABSORB,this.label.string="\u5438\u6536"+this.num}var s=this.node;s.scale=0,s.opacity=255;var r=cc.delayTime(this.delayTime),c=cc.callFunc(function(){},this),l=cc.scaleTo(2/30*t,2*a),d=cc.scaleTo(4/30*t,+a);n=cc.scaleTo(.4*t,+a),o=cc.sequence(l,d,n),e=cc.moveBy(.3*t,cc.v2(0,40)),l=cc.delayTime(10/30*t),d=cc.fadeOut(8/30*t),n=cc.callFunc(function(){i.battleScene.giveBackFlyHp(this.node)},this),n=cc.sequence(l,d,n),n=cc.spawn(o,e,n),n=cc.sequence(r,c,n),s.stopAllActions(),s.runAction(n)},updatePlayer:function(){}}),cc._RF.pop()},{}],GameHeroHalo:[function(e,t){"use strict";cc._RF.push(t,"fd75banIt1E2pRGZg4V7oeB","GameHeroHalo");var i=e("Aft");cc.Class({extends:cc.Component,properties:{},start:function(){},initData:function(e,t,a,n,o,s,r){var c=this;this.swordNum=e,this.spinSpeed=t,this.realHurt=a,this.heroPercent=n,this.allTime=o,this.checkTime=s,this.hurtDis=r,this.curTime=0,this.curAllTime=0,this.skillHurt=this.realHurt,this.updateSpeed=this.spinSpeed/i.constant.BATTLE_FRAME_RATE,this.spinR=50,this.swordList=[],this.swordParentList=[];for(var l=0;l<e;l++)!function(t){var a=new cc.Node,n=i.constant.PREFAB_PATH_BULLET+"hero3_skill_sword";i.battleScene.getBulletPrefab(n,function(o){o?(o=cc.instantiate(o),a.addChild(o),o.angle=360*t/e,i.battleNode.addChild(a,i.constant.LAYER_MAP_DECORATE),c.swordList.push(o),c.swordParentList.push(a),c.setSwordShow(!1)):i.Logger.debug("error prefabName = "+n)}),a.scaleX=1,a.scaleY=.7}(l)},setHero:function(e){this.heroObj=e},updateSwordPos:function(){for(var e=this.heroObj.node.zIndex,t=0;t<this.swordList.length;t++){var a=this.swordList[t],n=a.angle;(n-=this.updateSpeed)<0&&(n+=360);var o=i.Utils.getOffsetByRotationAndDistance(n,this.spinR);a.setPosition(o),a.angle=n,this.swordParentList[t].zIndex=45<=n&&n<=135?e-1:e+1}},setSwordShow:function(e){this.node.active=e;for(var t=0;t<this.swordParentList.length;t++)this.swordParentList[t].active=e;if(e){this.curTime=0,this.curAllTime=0,this.skillHurt=this.realHurt,this.skillHurt+=this.heroObj.physicalAtk*this.heroPercent,this.skillHurt+=this.heroObj.magicAtk*this.heroPercent;for(var i=0;i<this.swordParentList.length;i++){var a=this.swordParentList[i],n=cc.delayTime(1),o=cc.fadeIn(.2);o=cc.sequence(n,o),a.opacity=0,a.stopAllActions(),a.runAction(o)}}},setPos:function(e){this.node.setPosition(e);for(var t=0;t<this.swordParentList.length;t++)this.swordParentList[t].setPosition(cc.v2(e.x,e.y+20))},checkSkillHit:function(){for(var e=i.battleScene.enemyList,t=0;t<e.length;t++){var a=e[t].getComponent("GameEnemy"),n=i.Utils.getDistance(this.node.getPosition(),a.getAimPos(!1));(n=a.isFly?i.Utils.getDistance(this.node.getPosition(),a.getShootAimPos(!0)):n)<this.hurtDis&&a.isCanAtk()&&a.enemySkillHurt(this.skillHurt,i.constant.TOWER_TYPE_ARROW)}},updateHalo:function(e){this.node.active&&(this.updateSwordPos(),this.curTime+=e,this.curTime>this.checkTime&&(this.curTime=0,this.checkSkillHit()),this.curAllTime+=e,this.curAllTime>this.allTime&&this.heroObj.showSpinSword(!1))}}),cc._RF.pop()},{}],GameHeroOperate:[function(e,t){"use strict";cc._RF.push(t,"cb37btJqGBKfrrw0r0eDTGB","GameHeroOperate");var i=e("Aft");cc.Class({extends:cc.Component,properties:{},start:function(){},initData:function(){var e=cc.find("touch",this.node);e.on("touchstart",this.onTouchStart,this),e.on("touchmove",this.onTouchMove,this),e.on("touchend",this.onTouchEnd,this),e.on("touchcancel",this.onTouchCancel,this)},onTouchStart:function(e){i.battleScene.gameMapObj.onTouchStart(e)},onTouchMove:function(e){i.battleScene.gameMapObj.onTouchMove(e)},onTouchEnd:function(e){i.battleScene.gameMapObj.onTouchEnd(e)},onTouchCancel:function(e){i.battleScene.gameMapObj.onTouchCancel(e)}}),cc._RF.pop()},{}],GameHeroSkillPage:[function(e,t){"use strict";cc._RF.push(t,"f3e93q15phH6IhnrPs2gHBu","GameHeroSkillPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{skillNameAtlas:{default:null,type:cc.SpriteAtlas}},onLoadPage:function(){this.ani=cc.find("battle_skill_skateboard",this.node).getComponent("cc.Animation"),this.ani.on("finished",this.onFinished,this),this.heroSpine=cc.find("battle_skill_skateboard/hero1",this.node).getComponent("sp.Skeleton"),this.nameSprite=cc.find("battle_skill_skateboard/skillName",this.node).getComponent(cc.Sprite)},showPageBegan:function(){this.blackNode.opacity=165.75,this.showOpenEffect()},showPageEnded:function(){},showOpenEffect:function(){var e=this;this.heroData=this.data.heroObj.heroData;var t=this.heroData.appearance;t=i.constant.SPINE_PATH_HERO+t,this.heroSpine.node.active=!1,i.battleScene.getSpineData(t,function(t){t&&(i.soundsUtil.playSoundEffect("hero_skill_displayPanel"),e.heroSpine.node.active=!0,e.heroSpine.skeletonData=t,e.heroSpine.premultipliedAlpha=0<e.heroData.isPremultipliedAlpha,e.heroSpine.clearTrack(0),e.heroSpine.setAnimation(0,"skill_show",!1),t="skillName_"+e.data.type,i.Logger.debug("skillName = "+t),e.nameSprite.spriteFrame=e.skillNameAtlas.getSpriteFrame(t),e.ani.stop(),e.ani.setCurrentTime(0),e.ani.play("battle_skill_skateboard"))})},onFinished:function(e,t){"battle_skill_skateboard"==t.name&&(this.closePage(),i.battleScene.startHeroSkill(this.data.type,this.data.pos))}}),cc._RF.pop()},{}],GameHero:[function(e,t){"use strict";cc._RF.push(t,"b61e0NaBa9Bt5Pti3Fxdyag","GameHero");var i=e("Aft");cc.Class({extends:cc.Component,properties:{},start:function(){},bindingNode:function(){this.hpNode=cc.find("hp",this.node),this.hpProgressBg=cc.find("hp/hpProgressBg",this.node),this.hpProgressBar=cc.find("hp/hpProgress",this.node).getComponent("cc.ProgressBar"),this.bodyNode=cc.find("body",this.node),this.heroSpineNode=cc.find("body/spine",this.node),this.bulletHitAni_1=cc.find("hitEffect/tower_bullet_hit",this.node).getComponent("cc.Animation"),this.bulletHitAni_1.on("finished",this.onFinished,this),this.bulletHitAni_2=cc.find("hitEffect/tower_bullet02_hit",this.node).getComponent("cc.ParticleSystem"),this.bulletHitAni_3=cc.find("hitEffect/tower_bullet02_hit/smoke",this.node).getComponent("cc.ParticleSystem"),this.cureParticle1=cc.find("hitEffect/battle_cure",this.node).getComponent("cc.ParticleSystem"),this.cureParticle2=cc.find("hitEffect/battle_cure/smoke",this.node).getComponent("cc.ParticleSystem"),this.cureParticle3=cc.find("hitEffect/battle_cure/smoke2",this.node).getComponent("cc.ParticleSystem"),this.cureParticle1.node.active=!1,this.effectNode=cc.find("effect",this.node)},initData:function(e){var t=this;this.minAtkIndex=0,this.maxAtkIndex=2,this.curAtkIndex=this.minAtkIndex,this.bindingNode(),this.setTouchMove(!1),this.data=e,this.soldierId=this.data.soldierId,this.source=this.data.source,this.tryData=this.data.tryData,this.jumpTime=-1,this.checkTargetEnemy=!1,this.violentBulletId=0,this.guideHeroHpPercent=1,this.guideHeroAtkPercent=1,this.dieActionTime=0,this.recruitData=null,this.birdHost=null,this.birdOffset=null,this.isCanStopEnemy=!0,this.isCanGetHurt=!0,this.isFollowEnemy=!1,this.isFollowHero=!1,this.baseTimeScale=1,this.node.scale=1,this.bigTime=0,this.defTime1=0,this.critTime=0,this.atkTime1=0,this.atkSpeedTime=0,this.skillBigTime=0,this.skillAddAtkSpeedTime=0,this.skillAddAtkTime1=0,this.skillAddAtkTime2=0,this.isCanMeleeBattle=!0,this.isCanGetHurt=!0,this.isCanMove=!0,this.skillStandTime=0,this.isCanBattleFly=!1,this.hostTower=this.data.tower||null,this.isUpdate=this.data.isUpdate,this.heroData=i.templateManager.getSoldierDataById(this.soldierId),this.armsType=this.heroData.arms,this.maxShootDistance=this.heroData.longAttackRange,this.minShootDistance=this.heroData.shortAttackRange,this.counterAttackDistance=this.heroData.counterattackRange;var a=e.curPos||cc.v2(0,0);this.node.setPosition(a),this.heroSpine=this.heroSpineNode.getComponent("sp.Skeleton"),a=this.heroData.appearance;var n=i.constant.SPINE_PATH_HERO+a;i.battleScene.getSpineData(n,function(e){e?(t.heroSpine.skeletonData=e,t.heroSpine.premultipliedAlpha=0<t.heroData.isPremultipliedAlpha,t.heroSpine.timeScale=i.battleScene.battleSpeedPercent*t.baseTimeScale,t.updateHeroAction(),t.heroSpineNode.scale=t.heroData.scaling/1e4,i.battleScene.skillHeroQuickData&&0<i.battleScene.skillHeroQuickData.atkSpeedTime&&(t.skillAddAtkSpeed(i.battleScene.skillHeroQuickData.atkSpeedPercent,i.battleScene.skillHeroQuickData.atkSpeedTime),t.skillAddAtk1(i.battleScene.skillHeroQuickData.atkHurtPercent,i.battleScene.skillHeroQuickData.atkSpeedTime),t.skillAddAtk2(i.battleScene.skillHeroQuickData.atkHurtPercent,i.battleScene.skillHeroQuickData.atkSpeedTime))):i.Logger.debug("error spineUrl = "+n)}),this.shadowNode.scale=this.heroData.shadowScaling/1e4,this.pointNode.scale=this.heroData.shadowScaling/1e4*2.3,this.pointNode.active=!1,i.player.gmModule.isWxTowerSpine()&&(this.shadowNode.active=!1),i.player.gmModule.isHideHeroSpine()&&(this.heroSpineNode.active=!1,this.shadowNode.active=!0),this.hpNode.setPosition(cc.v2(0,this.heroData.hpBarHeight)),this.isHero=this.source==i.constant.HERO_SOURCE_HERO,this.heroLevel=(this.isHero,1),this.atkDistance=this.heroData.atkDistance,this.curHp=this.heroData.hp,this.setMaxHp(this.curHp),this.moveSpeed=this.heroData.speed/10,this.battleDistance=this.heroData.shortAttackRange,this.curAttackTime=0,this.maxAttackTime=this.heroData.attackCD/1e3,this.recruitTime=-1,this.restoreHpPercent=this.heroData.restoreHp/1e4,a=i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_HP_BACK),this.restoreHpPercent<a&&(this.restoreHpPercent=a),this.curRestoreHpTime=0,this.originPos=e.originPos||this.node.getPosition(),this.hurtTime=0,this.callSoldierList=[],this.cacheMovePos=null,this.heroStarLevel=1,this.bigSkillId=-1,this.passiveSkillList=[],this.bigSkillData=null,this.maxBigSkillTime=-1,this.maxBigSkillAtkNum=-1,this.curBigSkillTime=0,this.curBigSkillAtkNum=0,this.isHero&&this.initHeroSkillData(this.soldierId,i.constant.HERO_SKILL_OUT_TOWER),this.isHeroTowerSoldier=!1,this.hostTower&&this.hostTower.isHeroLevel()&&(this.isHeroTowerSoldier=!0,e=this.hostTower.towerData.heroId,this.initHeroSkillData(e,i.constant.HERO_SKILL_IN_TOWER)),this.hitFaintedTime=0,this.curMoveSmokeTime=0,this.maxMoveSmokeTime=.2,this.towerAttrAtkPercent1=0,this.towerAttrAtkSpeedPercent=0,this.isUpdate?this.updateHeroAction():(this.tarEnemyObj=null,this.setHeroDir(i.constant.HERO_DIR_RIGHT),this.isHero?this.setHeroState(i.constant.HERO_STATE_STAND):this.setHeroState(i.constant.HERO_STATE_BACK),this.dieTime=-1,this.atkUpdateHpTime=0,this.curDieNum=0),this.data.isUpdate=!1,this.node.active=this.curState!=i.constant.HERO_STATE_WAIT&&this.curState!=i.constant.HERO_STATE_DIE,this.shadowNode.active=this.node.active,this.curAtkAccumulateNum=0,this.updateAllAttr(),this.node.stopAllActions(),this.node.opacity=255,this.updateHeroZIndex()},restoreHp:function(e){var t=Math.floor(e*this.maxHp);this.curHp<this.maxHp&&(e=i.constant.FLY_HP_TYPE_RECOVERY,e={pos:cc.v2(this.node.getPosition().x,this.node.getPosition().y+this.heroData.hpBarHeight),num:t,type:e},i.battleScene.createFlyHpByData(e),this.updateHeroHp(t)),this.showCureEffect()},showCureEffect:function(){var e,t;this.cureParticle1.node.active||(this.cureParticle1.node.active=!0,this.cureParticle1.resetSystem(),this.cureParticle2.resetSystem(),this.cureParticle3.resetSystem(),e=cc.delayTime(1.5),t=cc.callFunc(function(){this.cureParticle1.stopSystem(),this.cureParticle2.stopSystem(),this.cureParticle3.stopSystem(),this.cureParticle1.node.active=!1},this),t=cc.sequence(e,t),this.cureParticle1.node.stopAllActions(),this.cureParticle1.node.runAction(t))},setHeroSpine:function(e,t,i){this.heroSpine.skeletonData=e,this.heroSpine.premultipliedAlpha=t,this.heroSpine.timeScale=i*this.baseTimeScale},setGuideHeroAttr:function(e){this.guideHeroHpPercent=e[0]/1e4,this.guideHeroAtkPercent=e[1]/1e4,this.maxBigSkillAtkNum=e[2],this.updateMaxHp(),this.updatePhysicalAtk(),this.updateMagicAtk(),this.battleDistance*=1.5},initHeroSkillData:function(e,t){this.heroStarLevel=i.player.heroModule.getHeroQuality(e),this.tryData&&(this.heroStarLevel=this.tryData.tryQuality),this.heroStarData=i.templateManager.getHeroStarDataByHeroStar(e,this.heroStarLevel),this.heroStarData&&(t==i.constant.HERO_SKILL_OUT_TOWER?(this.bigSkillId=this.heroStarData.outSkill[0][0],this.passiveSkillList=this.heroStarData.outSkill[1]):t==i.constant.HERO_SKILL_IN_TOWER&&(this.bigSkillId=this.heroStarData.inSkill[0][0],this.passiveSkillList=this.heroStarData.inSkill[1]),this.bigSkillData=i.templateManager.getHeroSkillDataById(this.bigSkillId),this.maxBigSkillTime=this.bigSkillData.CD||-1,this.maxBigSkillAtkNum=this.bigSkillData.timesCD||-1,this.curBigSkillTime=this.bigSkillData.startCD?this.maxBigSkillTime*this.bigSkillData.startCD/1e4:0,this.curBigSkillAtkNum=this.bigSkillData.startCD?this.maxBigSkillAtkNum*this.bigSkillData.startCD/1e4:0,i.Logger.debug("this.bigSkillId = "+this.bigSkillId+" this.maxBigSkillTime = "+this.maxBigSkillTime+" this.maxBigSkillAtkNum = "+this.maxBigSkillAtkNum))},getHeroLevel:function(){return this.heroLevel},showDizzinessEffect:function(){},showChangeSheepEffect:function(e){var t,a=this;e?(t=i.constant.SPINE_PATH_HERO+"tower3_1_soldier",i.battleScene.getSpineData(t,function(e){e&&(a.heroSpine.skeletonData=e,a.heroSpine.premultipliedAlpha=0<a.heroData.isPremultipliedAlpha,a.heroSpine.timeScale=i.battleScene.battleSpeedPercent*a.baseTimeScale,a.setHeroState(i.constant.HERO_STATE_STAND))})):(t=this.heroData.appearance,t=i.constant.SPINE_PATH_HERO+t,i.battleScene.getSpineData(t,function(e){e&&(a.heroSpine.skeletonData=e,a.heroSpine.premultipliedAlpha=0<a.heroData.isPremultipliedAlpha,a.heroSpine.timeScale=i.battleScene.battleSpeedPercent*a.baseTimeScale,a.setHeroState(i.constant.HERO_STATE_STAND))}))},showHitEffect1:function(){this.bulletHitAni_1.node.active=!0,this.bulletHitAni_1.stop(),this.bulletHitAni_1.setCurrentTime(0),this.bulletHitAni_1.play("tower_bullet_hit")},showHitEffect2:function(){this.bulletHitAni_2.node.active=!0,this.bulletHitAni_2.resetSystem(),this.bulletHitAni_3.resetSystem();var e=cc.delayTime(1),t=cc.callFunc(function(){this.bulletHitAni_2.stopSystem(),this.bulletHitAni_2.stopSystem(),this.bulletHitAni_2.node.active=!1},this);t=cc.sequence(e,t),this.bulletHitAni_2.node.stopAllActions(),this.bulletHitAni_2.node.runAction(t)},onFinished:function(e,t){"tower_bullet_hit"==(t=t.name)?this.bulletHitAni_1.node.active=!1:"battle_revival"==t&&this.revivalAni&&(this.revivalAni.node.active=!1)},updateAllAttr:function(){this.heroLevel=this.isHero?i.player.heroModule.getHeroLevel(this.soldierId):1,this.tryData&&(this.heroLevel=this.tryData.tryLevel),i.battleScene.curChapter==i.constant.YEAR_MONSTER_CHAPTER_ID&&(this.heroLevel=1),this.heroLevelData=this.isHero?i.templateManager.getHeroLevelDataByLevel(this.soldierId,this.heroLevel):null,this.updateMaxHp(),this.updatePhysicalAtk(),this.updateMagicAtk(),this.updatePhysicalDef(),this.updateMagicDef(),this.updateShootWaitTime(),this.updateCritRate(),this.updateCritHurt(),this.updateFaintedRate(),this.updateSecondKill(),this.updateReboundDamage(),this.updateIgnoreArmor(),this.updateDodge(),this.updateRevive(),this.updateHurtDiscount(),this.updateDieRestoreHp(),this.updateCritAtkSpeed(),this.updateCritAtkHurt(),this.updateTowerAddAttr(),this.updateAddTowerAttr(),this.updateAtkAccumulate(),this.updateAddIronAttr(),this.updateKillBomb(),this.updateKillSuckHp(),this.updatePassivePoisonAttr(),this.updatePassiveAddHurt(),this.updateAtkAoe(),this.updateReduceSpeed(),this.updateAtkOtherEnemy(),this.updateSpeed(0,0),this.updateShootFainted()},updateMaxHp:function(){var e;this.maxHp=this.heroData.hp,this.heroLevelData&&(this.maxHp=this.heroLevelData.hp),this.source==i.constant.HERO_SOURCE_TOWER&&this.hostTower&&(this.maxHp*=this.hostTower.towerLevelData.hp/1e4,0<(e=i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_TOWER_STRONG,i.constant.SKILL_ATTR_HP,this.hostTower.curType,this.hostTower.getLevel()))&&(i.Logger.debug("\u7f81\u7eca\u6280\u80fd \u5c0f\u5175hp \u589e\u52a0 + "+e),this.maxHp*=1+e)),!this.isHero&&!this.isHeroTowerSoldier||0<(e=i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_BATTLE_HERO,i.constant.SKILL_ATTR_HP,this.soldierId))&&(i.Logger.debug("\u7f81\u7eca\u6280\u80fd \u82f1\u96c4hp \u589e\u52a0 + "+e),this.maxHp*=1+e),this.maxHp*=this.guideHeroHpPercent,this.setMaxHp(this.maxHp)},updateOriginPos:function(e){this.originPos=e,this.data.originPos=e,this.setHeroState(i.constant.HERO_STATE_BACK),this.setCurTarEnemy(null)},updateRecruitPhysicalAtk:function(){this.recruitData&&0<this.recruitTime&&(this.isDrivingSkill?this.physicalAtk*=this.recruitData.addPhysicalAtk:this.physicalAtk+=this.recruitData.addPhysicalAtk)},updateRecruitMagicAtk:function(){this.recruitData&&0<this.recruitTime&&(this.isDrivingSkill?this.magicAtk*=this.recruitData.addMagicAtk:this.magicAtk+=this.recruitData.addMagicAtk)},updateRecruitMaxHp:function(){this.recruitData&&0<this.recruitTime&&(this.isDrivingSkill?this.maxHp*=this.recruitData.addHp:this.maxHp+=this.recruitData.addHp,this.setMaxHp(this.maxHp))},updateRecruitData:function(){this.updateRecruitPhysicalAtk(),this.updateRecruitMagicAtk(),this.updateRecruitMaxHp()},setRecruitData:function(e,t){this.recruitData=e,this.isDrivingSkill=t,this.recruitTime=e.recruitTime,this.updateRecruitData()},setHeroRecruitCar:function(){this.isCanMeleeBattle=!1,this.isCanGetHurt=!1,this.isCanMove=!1},setHeroRecruitBird:function(e,t){this.birdHost=e,this.birdOffset=t,this.isCanStopEnemy=!1,this.isCanGetHurt=!1,this.isFollowEnemy=!0,this.isFollowHero=!0,this.setHeroState(i.constant.HERO_STATE_ENTER)},setMaxHp:function(e){this.maxHp=Math.floor(e),this.setHp(this.maxHp)},setHp:function(e){this.curHp=e,this.hpNode.active=0<this.curHp&&this.curHp<this.maxHp,e=this.curHp/this.maxHp,0<this.curHp&&e<.1?e=.1:.9<e&&(e=.9),this.hpProgressBar.progress=e},setSoldierCountId:function(e){this.soldierCountId=e},soldierRevive:function(e){this.isHero?(this.data.curPos=this.node.getPosition(),this.initData(this.data),this.headObj.updateHp(this.curHp)):(e&&(this.data.curPos=e),this.initData(this.data))},onClickHero:function(){if(this.isHero&&i.battleScene.curOperateState==i.constant.OPERATE_STATE_TOWER&&this.isCanAtk()){var e=this.soldierCountId-1;return i.Logger.debug("onClickHero index = "+e),i.battleScene.gameBattleUIObj.headObjList[e].onClick(1),!0}return!1},onClickSolider:function(){return!this.isHero&&(this.pointNode.active=!0,i.battleScene.setCurSoldierObj(this),i.battleScene.gameBattleUIObj.showEnemyDetail(),!0)},hidePoint:function(){this.pointNode.active&&(this.pointNode.active=!1),i.battleScene.gameBattleUIObj.hideEnemyDetail()},setHeroDir:function(e){this.curDir=e},setHeroState:function(e){if(!(this.curHp<=0&&e<i.constant.HERO_STATE_DIE)){this.curState=e;var t,a=!0,n=!1;switch(this.curState){case i.constant.HERO_STATE_STAND:this.curRestoreHpTime=0,this.checkTargetEnemy=!1;break;case i.constant.HERO_STATE_BACK:this.checkTargetEnemy=!1;var o=i.Utils.getDistance(this.originPos,this.node.getPosition())/this.moveSpeed,s=this.originPos.x-this.node.x,r=this.originPos.y-this.node.y;this.moveSpeedX=s/o,this.moveSpeedY=r/o,o=this.getDirByPos(this.node.getPosition(),this.originPos),this.setHeroDir(o);break;case i.constant.HERO_STATE_MOVE:this.checkTargetEnemy=!1,this.showHeroMoveSmoke(),this.setCurTarEnemy(null);var c=i.Utils.getDistance(this.tarMovePos,this.node.getPosition())/this.moveSpeed,l=this.tarMovePos.x-this.node.x,d=this.tarMovePos.y-this.node.y;this.moveSpeedX=l/c,this.moveSpeedY=d/c,l=this.getDirByPos(this.node.getPosition(),this.tarMovePos),this.setHeroDir(l);break;case i.constant.HERO_STATE_JUMP:this.checkTargetEnemy=!1,this.showHeroMoveSmoke(),this.setCurTarEnemy(null);var h=this.getDirByPos(this.node.getPosition(),this.tarMovePos);this.setHeroDir(h),this.jumpTime=1.2;break;case i.constant.HERO_STATE_ENTER:this.node.setPosition(this.originPos),this.enterTime=.6;var u=this.getDirByPos(this.birdHost.node.getPosition(),this.node.getPosition());this.setHeroDir(u);break;case i.constant.HERO_STATE_READY:this.checkTargetEnemy=!1,d=this.tarEnemyObj.node.getPosition(),c=this.tarEnemyObj.enemyData.atkDistance,l=this.atkDistance+c,u=(h=this.node.getPosition()).x<=d.x?i.constant.HERO_DIR_LEFT:i.constant.HERO_DIR_RIGHT;for(var p=0,g=0;g<i.battleScene.soldierList.length;g++){var _=i.battleScene.soldierList[g].getComponent("GameHero");_!=this&&_.tarEnemyObj==this.tarEnemyObj&&p++}c=(c=[0,-16,16,-8,8,-24,24,-32,32])[p=c.length<=p?0:p],265<d.x?u=i.constant.HERO_DIR_LEFT:d.x<-265&&(u=i.constant.HERO_DIR_RIGHT),u==i.constant.HERO_DIR_LEFT?((u=d.x-l)<-290&&(u=-290),this.tarEnemyPos=cc.v2(u,d.y+c)):(290<(m=d.x+l)&&(m=290),this.tarEnemyPos=cc.v2(m,d.y+c));var m=i.Utils.getDistance(this.tarEnemyPos,h)/this.moveSpeed;d=this.tarEnemyPos.x-this.node.x,c=this.tarEnemyPos.y-this.node.y,this.moveSpeedX=d/m,this.moveSpeedY=c/m,h=this.getDirByPos(h,this.tarEnemyPos),this.setHeroDir(h),1===i.battleScene.curChapter&&6===i.battleScene.curInstance&&i.gameScene.removeBubble(i.constant.GUIDE_TYPE_INSTANCE_6_1);break;case i.constant.HERO_STATE_BATTLE:a=!1,this.curAttackTime=this.maxAttackTime-.5;var E=this.getDirByPos(this.node.getPosition(),this.tarEnemyObj.node.getPosition());this.setHeroDir(E);break;case i.constant.HERO_STATE_SHOOT:a=!1,this.curAttackTime=this.maxAttackTime-.5;var T=this.getDirByPos(this.node.getPosition(),this.tarEnemyObj.node.getPosition());this.setHeroDir(T);break;case i.constant.HERO_STATE_GO_TOWER:this.checkTargetEnemy=!1,this.tarMovePos=this.enterTowerObj.node.getPosition();var f=i.Utils.getDistance(this.tarMovePos,this.node.getPosition())/this.moveSpeed;E=this.tarMovePos.x-this.node.x,T=this.tarMovePos.y-this.node.y,this.moveSpeedX=E/f,this.moveSpeedY=T/f,n=!0,f=this.getDirByPos(this.node.getPosition(),this.tarMovePos),this.setHeroDir(f);break;case i.constant.HERO_STATE_IN_TOWER:this.node.active=!1,this.shadowNode.active=this.node.active,this.checkTargetEnemy=!1,this.enterTowerObj.enterTower(this),i.battleScene.curOperateState!=i.constant.OPERATE_STATE_HERO||i.battleScene.getCurHeroObj()==this&&(i.battleScene.gameBattleUIObj.hideDetail(!0),i.battleScene.gameBattleUIObj.cancelChoose()),n=!0;break;case i.constant.HERO_STATE_DIE:a=this.checkTargetEnemy=!1;break;case i.constant.HERO_STATE_WAIT:this.checkTargetEnemy=!1,this.dieActionTime=0,this.node.active=!1,this.shadowNode.active=this.node.active,a=!1,this.dieTime=0,this.isHero&&(this.heroReviveTime=8,0!=(f=i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_REVIVE_TIME))&&(i.Logger.debug("\u7f81\u7eca\u6280\u80fd \u82f1\u96c4\u590d\u6d3b\u65f6\u95f4 + "+f),this.heroReviveTime*=1+f),f={type:i.constant.GAME_TIPS_TYPE_TOMB,pos:this.node.getPosition(),zIndex:i.constant.LAYER_HERO_SKILL,time:this.heroReviveTime},f=i.battleScene.createIconTipsByData(f),i.battleScene.updateZIndex(f),i.battleScene.curHeroIndex==this.soldierCountId-1&&i.battleScene.curOperateState==i.constant.OPERATE_STATE_HERO&&(i.battleScene.gameBattleUIObj.hideDetail(!0),i.battleScene.gameBattleUIObj.cancelChoose())),0<this.recruitTime&&(this.startDieAction(!0),t=i.battleScene.soldierList.indexOf(this.node),i.battleScene.soldierList.splice(t,1),i.battleScene.giveBackSoldier(this.node),this.checkSoldierDisappear()),0!=i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_REVIVE_TIME)&&(t=cc.v2(this.node.getPosition().x,this.node.getPosition().y+this.heroData.hpBarHeight),i.battleScene.gameBattleUIObj.checkShowRestrainTips(i.constant.RESTRAIN_TYPE_TYJY,i.constant.RESTRAIN_TYJY_SKILL_REVIVE_TIME,t))}a?this.updateHeroAction():this.curState==i.constant.HERO_STATE_BATTLE&&this.updateHeroAction(i.constant.HERO_STATE_STAND),n||this.cleanTowerData(),this.heroHaloObj&&this.curState>=i.constant.HERO_STATE_DIE&&this.showSpinSword(!1)}},updateBirdOriginPos:function(){var e,t,a;this.birdHost&&this.birdOffset&&!this.isCanStopEnemy&&(a=this.birdHost.node.getPosition(),this.originPos=cc.v2(a.x+this.birdOffset.x,a.y+this.birdOffset.y),this.data.originPos=this.originPos,this.curState==i.constant.HERO_STATE_BACK&&(e=i.Utils.getDistance(this.originPos,this.node.getPosition())/this.moveSpeed,t=this.originPos.x-this.node.x,a=this.originPos.y-this.node.y,this.moveSpeedX=t/e,this.moveSpeedY=a/e))},updateBirdAtkPos:function(){for(var e=this.tarEnemyObj.node.getPosition(),t=this.node.getPosition(),a=0,n=0,o=0;o<i.battleScene.soldierList.length;o++){var s=i.battleScene.soldierList[o].getComponent("GameHero");s.tarEnemyObj!=this.tarEnemyObj||s.isCanStopEnemy||(s==this&&(n=a),a++)}var r=(r=[0,-16,16,-8,8,-24,24,-32,32])[n=r.length<=n?0:n]+this.tarEnemyObj.enemyData.hpBarHeight-60;this.tarEnemyPos=cc.v2(e.x+[-24,24,0,-12,12,-36,-12,48][n],e.y+r),e=i.Utils.getDistance(this.tarEnemyPos,t)/this.moveSpeed,r=this.tarEnemyPos.x-this.node.x,t=this.tarEnemyPos.y-this.node.y,this.moveSpeedX=r/e,this.moveSpeedY=t/e},startMove:function(e){var t;this.curState!=i.constant.HERO_STATE_JUMP?(this.tarMovePos=e,t=this.node.getPosition(),t=i.Utils.getDistance(t,e),e=i.templateManager.getGameParamValue("triggerJumpDistance"),this.isHero&&this.soldierId==i.constant.HERO_ID_ZHAOYUN&&e<t?(i.Logger.debug("\u6211\u662f\u8d75\u4e91\u3000\u6211\u8981\u5927\u8df3"),this.setHeroState(i.constant.HERO_STATE_JUMP)):this.setHeroState(i.constant.HERO_STATE_MOVE),this.cacheMovePos=null):i.Logger.debug("\u5927\u8df3\u4e2d\u3000\u4e0d\u80fd\u518d\u79fb\u52a8\u4e86")},moveToTargetPos:function(e){0<this.skillStandTime?this.cacheMovePos=e:this.startMove(e),i.templateManager.getHeroDataById(this.soldierId),1===i.battleScene.curChapter&&6===i.battleScene.curInstance&&i.gameScene.removeBubble(i.constant.GUIDE_TYPE_INSTANCE_6_1)},updateEnterHero:function(e){var t=this;this.enterHero=e,this.updatePhysicalAtk(),this.updateMagicAtk(),this.updatePhysicalDef(),this.updateMagicDef(),this.bigSkillData=e?e.bigSkillData:null;var a=(this.enterHero||this).heroData,n=(e=a.appearance,i.constant.SPINE_PATH_HERO+e);i.battleScene.getSpineData(n,function(e){e?(t.heroSpine.skeletonData=e,e=a.isPremultipliedAlpha,t.heroSpine.premultipliedAlpha=0<e,t.heroSpine.timeScale=i.battleScene.battleSpeedPercent*t.baseTimeScale,t.updateHeroAction()):i.Logger.debug("error spineUrl = "+n)}),e=this.enterHero?.7:1,this.heroSpineNode.scale=a.scaling/1e4*e,this.shadowNode.scale=a.shadowScaling/1e4*e},isHaveHero:function(){return!(!this.hostTower||!this.hostTower.isHaveHero())},heroBig:function(e,t,i){this.showViolentEffect(!0),this.bigTime=t,this.violentBulletId=i},heroSkillBig:function(){0<this.heroData.isEnlarge&&(this.node.runAction(cc.scaleTo(.1,1.2)),this.skillBigTime=1.4)},heroSkillOverSmall:function(){0<this.heroData.isEnlarge&&1<this.node.scale&&this.node.runAction(cc.scaleTo(.1,1))},showViolentEffect:function(e){var t,a=this;e?this.violentAni?(this.violentAni.node.active=!0,this.violentAni.stop(),this.violentAni.setCurrentTime(0),this.violentAni.play("violent_light")):(t=i.constant.PREFAB_PATH_BATTLE+"violent_light",i.battleScene.getBulletPrefab(t,function(e){e?(e=cc.instantiate(e),a.effectNode.addChild(e),a.violentAni=e.getComponent("cc.Animation"),a.violentAni.node.active=!0,a.violentAni.stop(),a.violentAni.setCurrentTime(0),a.violentAni.play("violent_light"),i.battleScene.addReleaseAni(t)):i.Logger.debug("error prefabName = "+t)})):this.violentAni&&(this.violentAni.node.active=!1)},showRevivalEffect:function(e){var t,a=this;i.player.commonModule.isLowIosDevice()?e&&this.heroRevive():e?this.revivalAni?(this.revivalAni.node.active=!0,this.revivalAni.stop(),this.revivalAni.setCurrentTime(0),this.revivalAni.play("battle_revival"),this.scheduleOnce(function(){this.heroRevive()},.9)):(t=i.constant.PREFAB_PATH_BATTLE+"battle_revival",i.battleScene.getBulletPrefab(t,function(e){e?(e=cc.instantiate(e),a.effectNode.addChild(e),a.revivalAni=e.getComponent("cc.Animation"),a.revivalAni.node.active=!0,a.revivalAni.stop(),a.revivalAni.setCurrentTime(0),a.revivalAni.play("battle_revival"),a.revivalAni.on("finished",a.onFinished,a),a.scheduleOnce(function(){this.heroRevive()},.9),i.battleScene.addReleaseAni(t)):i.Logger.debug("error prefabName = "+t)})):this.revivalAni&&(this.revivalAni.node.active=!1)},addDef1:function(e,t){this.defPercent1=e,this.defTime1=t,this.updatePhysicalDef()},addCrit:function(e,t){this.critPercent=e,this.critTime=t,this.updateCritRate()},addAtk1:function(e,t){this.atkPercent1=e,this.atkTime1=t,this.updatePhysicalAtk()},addAtkSpeed:function(e,t){this.atkSpeedPercent=e,this.atkSpeedTime=t,this.updateShootWaitTime()},skillAddAtkSpeed:function(e,t){this.skillAddAtkSpeedPercent=e,this.skillAddAtkSpeedTime=t,i.Logger.debug("\u55dc\u8840 \u589e\u52a0\u653b\u901f this.skillAddAtkSpeedPercent = "+this.skillAddAtkSpeedPercent+" this.skillAddAtkSpeedTime = "+this.skillAddAtkSpeedTime),this.updateShootWaitTime(),this.baseTimeScale=1+this.skillAddAtkSpeedPercent,this.updateBattleSpeedPercent()},skillAddAtk1:function(e,t){this.skillAddAtkPercent1=e,this.skillAddAtkTime1=t,i.Logger.debug("\u55dc\u8840 \u589e\u52a0\u7269\u653b this.skillAddAtkPercent1 = "+this.skillAddAtkPercent1+" this.skillAddAtkTime1 = "+this.skillAddAtkTime1),this.updatePhysicalAtk()},skillAddAtk2:function(e,t){this.skillAddAtkPercent2=e,this.skillAddAtkTime2=t,i.Logger.debug("\u55dc\u8840 \u589e\u52a0\u6cd5\u653b this.skillAddAtkPercent2 = "+this.skillAddAtkPercent2+" this.skillAddAtkTime2 = "+this.skillAddAtkTime2),this.updateMagicAtk()},updatePhysicalAtk:function(){this.physicalAtk=this.heroData.physicalAttack,this.heroLevelData&&(this.physicalAtk=this.heroLevelData.aggressivity);var e=1;this.source==i.constant.HERO_SOURCE_TOWER&&this.hostTower&&(this.physicalAtk*=this.hostTower.towerLevelData.attack/1e4);for(var t=this.source===i.constant.HERO_SOURCE_TOWER?i.constant.TOWER_TYPE_BARRACK:i.constant.TOWER_TYPE_HERO,a=i.battleScene.getInstanceSkillByAttr(i.constant.SKILL_ATTR_PHYSICAL_ATK,t),n=0;n<a.length;n++)e+=a[n].natureList[2]/1e4;this.isHaveHero()&&(e+=(100+i.player.heroModule.getHeroLevel(this.hostTower.inTowerHeroId)-1)/1e3),0<this.atkTime1&&(e+=this.atkPercent1),0<this.skillAddAtkTime1&&(e+=this.skillAddAtkPercent1),0<this.towerAttrAtkPercent1&&(e+=this.towerAttrAtkPercent1),this.physicalAtk*=e,this.source==i.constant.HERO_SOURCE_TOWER&&this.hostTower&&(this.physicalAtk*=1+this.hostTower.towerQualityData.attrValue[1]/1e4),this.isHero&&i.battleScene.curWaveData&&(t=i.battleScene.curWaveData.heroAttackRate/1e4,this.physicalAtk*=t),this.physicalAtk*=this.guideHeroAtkPercent,this.updateRecruitPhysicalAtk(),i.Logger.debug("\u58eb\u5175 \u5237\u65b0\u7269\u7406\u653b\u51fb this.physicalAtk = "+this.physicalAtk+" \u7cfb\u6570 = "+e+" \u57fa\u6570 = "+this.physicalAtk/e)},updateMagicAtk:function(){this.magicAtk=this.heroData.magicAttack,this.heroLevelData&&(this.magicAtk=this.heroLevelData.aggressivityMagic);var e=1;this.source==i.constant.HERO_SOURCE_TOWER&&this.hostTower&&(this.magicAtk*=this.hostTower.towerLevelData.attack/1e4);for(var t=this.source===i.constant.HERO_SOURCE_TOWER?i.constant.TOWER_TYPE_BARRACK:i.constant.TOWER_TYPE_HERO,a=i.battleScene.getInstanceSkillByAttr(i.constant.SKILL_ATTR_MAGIC_ATK,t),n=0;n<a.length;n++)e+=a[n].natureList[2]/1e4;this.isHaveHero()&&(e+=(100+i.player.heroModule.getHeroLevel(this.hostTower.inTowerHeroId)-1)/1e3),0<this.skillAddAtkTime2&&(e+=this.skillAddAtkPercent2),this.magicAtk*=e,this.source==i.constant.HERO_SOURCE_TOWER&&this.hostTower&&(this.magicAtk*=1+this.hostTower.towerQualityData.attrValue[1]/1e4),this.isHero&&i.battleScene.curWaveData&&(t=i.battleScene.curWaveData.heroAttackRate/1e4,this.magicAtk*=t),this.magicAtk*=this.guideHeroAtkPercent,this.updateRecruitMagicAtk(),i.Logger.debug("\u58eb\u5175 \u5237\u65b0\u9b54\u6cd5\u653b\u51fb this.magicAtk = "+this.magicAtk+" \u7cfb\u6570 = "+e+" \u57fa\u6570 = "+this.magicAtk/e)},updatePhysicalDef:function(){this.physicalDef=this.heroData.physicalDefense,this.heroLevelData&&(this.physicalDef=this.heroLevelData.defense);for(var e=this.source===i.constant.HERO_SOURCE_TOWER?i.constant.TOWER_TYPE_BARRACK:i.constant.TOWER_TYPE_HERO,t=i.battleScene.getInstanceSkillByAttr(i.constant.SKILL_ATTR_PHYSICAL_DEFENSE,e),a=1,n=0;n<t.length;n++)a+=t[n].natureList[2]/1e4;this.isHaveHero()&&(a+=i.templateManager.getGameParamValue("heroInTowerDistance")/1e4),0<this.defTime1&&(a+=this.defPercent1),this.physicalDef*=a},updateMagicDef:function(){this.magicDef=this.heroData.magicDefense,this.heroLevelData&&(this.magicDef=this.heroLevelData.defenseMagic);for(var e=this.source===i.constant.HERO_SOURCE_TOWER?i.constant.TOWER_TYPE_BARRACK:i.constant.TOWER_TYPE_HERO,t=i.battleScene.getInstanceSkillByAttr(i.constant.SKILL_ATTR_MAGIC_DEFENSE,e),a=1,n=0;n<t.length;n++)a+=t[n].natureList[2]/1e4;this.isHaveHero()&&(a+=i.templateManager.getGameParamValue("heroInTowerDistance")/1e4),this.magicDef*=a},updateShootWaitTime:function(){this.maxAttackTime=this.heroData.attackCD;for(var e=this.source===i.constant.HERO_SOURCE_TOWER?i.constant.TOWER_TYPE_BARRACK:i.constant.TOWER_TYPE_HERO,t=i.battleScene.getInstanceSkillByAttr(i.constant.SKILL_ATTR_ATK_SPEED,e),a=(e=1,0),n=0;n<t.length;n++)a+=t[n].natureList[2]/1e4;0<this.atkSpeedTime&&(a+=this.atkSpeedPercent),0<this.skillAddAtkSpeedTime&&(a+=this.skillAddAtkSpeedPercent),0<this.towerAttrAtkSpeedPercent&&(a+=this.towerAttrAtkSpeedPercent),(e/=1+a)<.3&&(e=.3),this.maxAttackTime=this.maxAttackTime*e/1e3},updateCritRate:function(){this.critRate=this.heroData.critRate/100;for(var e=this.source===i.constant.HERO_SOURCE_TOWER?i.constant.TOWER_TYPE_BARRACK:i.constant.TOWER_TYPE_HERO,t=i.battleScene.getInstanceSkillByAttr(i.constant.SKILL_ATTR_CRIT_PROBABILITY,e),a=0;a<t.length;a++)this.critRate+=t[a].natureList[2]/100;var n;0<this.critTime&&(this.critRate+=100*this.critPercent),(e=this.getPassiveSkillData(i.constant.HERO_SKILL_EFFECT_CRIT))&&(this.critRate+=e[1]/100),(this.isHero||this.isHeroTowerSoldier)&&0<(n=i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_BATTLE_HERO,i.constant.SKILL_ATTR_CRIT_PROBABILITY,this.soldierId))&&(this.critRate+=100*n,i.Logger.debug("\u7f81\u7eca\u6280\u80fd \u82f1\u96c4\u66b4\u7387 + "+n))},updateCritHurt:function(){this.critHurt=2;for(var e=this.source===i.constant.HERO_SOURCE_TOWER?i.constant.TOWER_TYPE_BARRACK:i.constant.TOWER_TYPE_HERO,t=i.battleScene.getInstanceSkillByAttr(i.constant.SKILL_ATTR_CRIT_HURT,e),a=0;a<t.length;a++)this.critHurt+=t[a].natureList[2]/1e4},updateSecondKill:function(){this.secondKillRate=0,this.secondKillPercent=0;var e=this.getPassiveSkillData(i.constant.HERO_SKILL_EFFECT_SECOND);e&&(this.secondKillRate=e[1]/100,this.secondKillPercent=e[2]/1e4)},updateFaintedRate:function(){this.faintedRate=0,this.faintedTime=0;for(var e=this.source===i.constant.HERO_SOURCE_TOWER?i.constant.TOWER_TYPE_BARRACK:i.constant.TOWER_TYPE_HERO,t=i.battleScene.getInstanceSkillByAttr(i.constant.SKILL_ATTR_ENEMY_GOSH,e),a=0;a<t.length;a++)this.faintedRate+=t[a].triggerProbability/100,this.faintedTime=Math.max(t[a].lastTime,this.faintedTime)},updateTargetDef:function(){this.targetDefRate=0,this.targetDefNum=0;var e,t=this.getPassiveSkillData(i.constant.HERO_SKILL_EFFECT_NO_DEF);t&&(e=t[1]/100,t=t[2]/1e4,this.targetDefRate=e,this.targetDefNum=t)},updateIgnoreArmor:function(){this.updateTargetDef();for(var e=0,t=0,a=0,n=this.source===i.constant.HERO_SOURCE_TOWER?i.constant.TOWER_TYPE_BARRACK:i.constant.TOWER_TYPE_HERO,o=i.battleScene.getInstanceSkillByAttr(i.constant.SKILL_ATTR_IGNORE_ARMOR,n),s=0;s<o.length;s++)e=Math.max(o[s].triggerProbability/100,e),t=Math.max(o[s].natureList[2]/1e4,t),a=o[s].natureMax?Math.max(o[s].natureMax/1e4,a):a;this.ignoreArmorData={ignoreArmorRate:e,ignoreArmorNum:t,ignoreArmorMaxNum:a}},updateDodge:function(){this.dodgeRate=this.heroData.dodgeRate/100},updateRevive:function(){this.reviveRate=0,this.maxDieNum=999999999,this.heroData.resurrectionCondition&&(this.reviveRate=this.heroData.resurrectionCondition[0]/100,this.maxDieNum=this.heroData.resurrectionCondition[1]);var e=i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_HERO_REVIVE,i.constant.SKILL_ATTR_HP,this.soldierId);0<e[0]&&(i.Logger.debug("\u7f81\u7eca\u6280\u80fd \u82f1\u96c4\u590d\u6d3b \u6982\u7387 + "+e[0]+" \u6700\u5927\u6b21\u6570 = "+e[1]),this.reviveRate+=e[0],this.maxDieNum=e[1])},updateHurtDiscount:function(){this.hurtDiscount=0;var e,t=this.getPassiveSkillData(i.constant.HERO_SKILL_EFFECT_HP_DEF);t&&(e=t[1]/1e4,t=Math.floor((this.maxHp-this.curHp)/this.maxHp*100/10),this.hurtDiscount+=e*t)},updateDieRestoreHp:function(){this.dieRestoreHp=0;var e=this.getPassiveSkillData(i.constant.HERO_SKILL_EFFECT_DIE_HP);e&&(this.dieRestoreHp+=e[1]/1e4)},checkDieRestoreHp:function(){var e;this.isCanAtk()&&0<this.dieRestoreHp&&(e=this.dieRestoreHp*this.maxHp,this.updateHeroHp(e))},updateCritAtkSpeed:function(){this.critAtkSpeedPercent=0,this.critAtkSpeedTime=4;var e=this.getPassiveSkillData(i.constant.HERO_SKILL_EFFECT_CRIT_ATK_SPEED);e&&(this.critAtkSpeedPercent+=e[1]/1e4,this.critAtkSpeedTime=e[2]/1e3)},updateCritAtkHurt:function(){this.critAtkHurtPercent=0,this.critAtkHurtTime=4;var e=this.getPassiveSkillData(i.constant.HERO_SKILL_EFFECT_CRIT_ATK_HURT);e&&(this.critAtkHurtPercent+=e[1]/1e4,this.critAtkHurtTime=e[2]/1e3)},updateAddTowerAttr:function(){this.addTowerType=999,this.addTowerLevel=999,this.addTowerAttrType=-1,this.addTowerAttrPercent=0;var e=this.getPassiveSkillData(i.constant.HERO_SKILL_EFFECT_ADD_TOWER_ATTR);e&&(this.addTowerType=e[1],this.addTowerLevel=e[2],this.addTowerAttrType=e[3],this.addTowerAttrPercent=e[4]/1e4)},updateAtkAccumulate:function(){this.atkAccumulatePercent=1,this.maxAtkAccumulateNum=0;var e=this.getPassiveSkillData(i.constant.HERO_SKILL_EFFECT_ATK_ACCUMULATE);e&&(this.atkAccumulatePercent=e[1]/1e4,this.maxAtkAccumulateNum=e[2]-1)},updateAddIronAttr:function(){this.addIronAttrData={rate:0,addRate:0};var e=this.getPassiveSkillData(i.constant.HERO_SKILL_EFFECT_ADD_MONEY);e&&(this.addIronAttrData.rate=e[1]/100,this.addIronAttrData.addRate=e[2]/1e4)},getAddTowerAttr:function(e){if(0<this.addTowerAttrType)for(var t=0;t<i.battleScene.gameTowerList.length;t++){var a=(n=i.battleScene.gameTowerList[t]).curType,n=n.getLevel();if(a=this.addTowerType<0||a==this.addTowerType,n=n>=this.addTowerLevel,a&&n&&this.addTowerAttrType==e)return this.addTowerAttrPercent}return 0},updateTowerAddAttr:function(){this.attrTowerType=999,this.attrTowerLevel=999,this.towerAttrType=-1,this.towerAttrPercent=0;var e=this.getPassiveSkillData(i.constant.HERO_SKILL_EFFECT_TOWER_ADD_ATTR);e&&(this.attrTowerType=e[1],this.attrTowerLevel=e[2],this.towerAttrType=e[3],this.towerAttrPercent=e[4]/1e4)},checkTowerAddAttr:function(){if(0<this.towerAttrType){for(var e=0,t=0;t<i.battleScene.gameTowerList.length;t++){var a=(n=i.battleScene.gameTowerList[t]).curType,n=n.getLevel();a=this.attrTowerType<0||a==this.attrTowerType,n=n>=this.attrTowerLevel,a&&n&&e++}var o=e*this.towerAttrPercent;this.towerAttrType==i.constant.HERO_SKILL_EFFECT_ATK_1?(this.towerAttrAtkPercent1=o,this.updatePhysicalAtk()):this.towerAttrType==i.constant.HERO_SKILL_EFFECT_ATK_SPEED&&(this.towerAttrAtkSpeedPercent=o,this.updateShootWaitTime())}},updateKillSuckHp:function(){this.killSuckHpPercent=0,this.killSuckHpData=null;var e=this.getPassiveSkillData(i.constant.HERO_SKILL_EFFECT_SUCK_HP);e&&(this.killSuckHpPercent=e[1]/1e4,this.killSuckHpData={addHpObj:this,addHpPercent:this.killSuckHpPercent})},updateKillBomb:function(){var e,t,a,n,o;this.killBombHurt=0,this.killBombBulletId=0,this.killBombData=null,this.getPassiveSkillData(i.constant.HERO_SKILL_EFFECT_DIE_BOMB)&&(n=this.getSkillDataByPassiveType(i.constant.HERO_SKILL_EFFECT_DIE_BOMB),e=Math.floor(n.effectParameter[0][1]),t=n.bulletID,a=Math.floor(n.atkParameter[0][2]),o=Math.floor(n.atkParameter[0][3])/1e4,n=a+this.physicalAtk*o,o=a+this.magicAtk*o,this.killBombData={targetType:e,hurt:a,bulletId:t,physicalAtk:n,magicAtk:o})},updatePassivePoisonAttr:function(){this.passivePoisonAttrData={attackRate:0,hurtTime:0,totalTime:0,isRealHurt:!0,physicalAtk:0,magicAtk:0};var e,t,a=this.getPassiveSkillData(i.constant.HERO_SKILL_EFFECT_CONTINUE_2);a&&(this.passivePoisonAttrData.attackRate=a[2]/1e4,this.passivePoisonAttrData.hurtTime=a[3]/1e3,this.passivePoisonAttrData.totalTime=a[4]/1e3,e=a[1]+this.physicalAtk*a[2]/1e4,t=a[1]+this.magicAtk*a[2]/1e4,a=0<a[5],this.passivePoisonAttrData.isRealHurt=a,this.passivePoisonAttrData.physicalAtk=e,this.passivePoisonAttrData.magicAtk=t)},updatePassiveAddHurt:function(){this.passiveAddHurtData={effectNum:0,time:0};var e,t,a=this.getPassiveSkillData(i.constant.HERO_SKILL_EFFECT_HURT_ADD);a&&(this.passiveAddHurtData.effectNum=a[1]/1e4,this.passiveAddHurtData.time=a[2]/1e3),this.restrainAddHurt=0,this.source==i.constant.HERO_SOURCE_TOWER&&this.hostTower&&(0<(e=i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_TOWER_STRONG,i.constant.SKILL_ATTR_ADD_HURT,this.hostTower.curType,this.hostTower.getLevel()))&&(this.passiveAddHurtData.effectNum+=e,this.passiveAddHurtData.time=1/60),this.restrainAddHurt+=e,i.Logger.debug("\u7f81\u7eca\u6280\u80fd \u58eb\u5175\u589e\u4f24 + "+e)),(this.isHero||this.isHeroTowerSoldier)&&(0<(t=i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_BATTLE_HERO,i.constant.SKILL_ATTR_ADD_HURT,this.soldierId))&&(this.passiveAddHurtData.effectNum+=t,this.passiveAddHurtData.time=1/60,i.Logger.debug("\u7f81\u7eca\u6280\u80fd \u82f1\u96c4\u589e\u4f24 + "+t),this.restrainAddHurt+=t),!(a=this.getPassiveSkillData(i.constant.HERO_SKILL_EFFECT_HP_HURT))||0<(a=(e=a[1]/1e4)*(t=Math.floor((this.maxHp-this.curHp)/this.maxHp*100)))&&(this.passiveAddHurtData.effectNum+=a,this.passiveAddHurtData.time=1/60,i.Logger.debug("\u635f\u8840\u589e\u52a0\u4f24\u5bb3 restrainAddHurt = "+a+" addHurt = "+e+" num = "+t+" this.curHp = "+this.curHp+" this.maxHp = "+this.maxHp),this.restrainAddHurt+=a))},updateAtkAoe:function(){this.passiveAtkAoeData={effectNum:0,radius:0,bulletId:0};var e=this.getPassiveSkillData(i.constant.HERO_SKILL_EFFECT_MAGIC_AOE);e&&(this.passiveAtkAoeData.effectNum=e[1]/1e4,this.passiveAtkAoeData.radius=e[2],this.passiveAtkAoeData.bulletId=e[3])},updateReduceSpeed:function(){this.passiveMoveSpeedData={effectNum:0,time:0};var e=this.getPassiveSkillData(i.constant.HERO_SKILL_EFFECT_MOVE_SPEED);e&&(this.passiveMoveSpeedData.effectNum=e[1]/1e4,this.passiveMoveSpeedData.time=e[2]/1e3)},updateAtkOtherEnemy:function(){this.attackOtherEnemyData={rate:0,angle:0,attackNum:0};var e=this.getPassiveSkillData(i.constant.HERO_SKILL_EFFECT_ATK_EXTRA);e&&(this.attackOtherEnemyData.rate=e[1]/100,this.attackOtherEnemyData.attackNum=e[2],this.attackOtherEnemyData.angle=e[3])},updateShootFainted:function(){this.passiveFaintedData=null;var e,t,a=this.getPassiveSkillData(i.constant.HERO_SKILL_EFFECT_SWOON);a&&(e=a?a[1]/1e3:0,t=a?a[2]:0,a=a?a[3]/100:100,this.passiveFaintedData={faintedTime:e,faintedType:Math.floor(t),faintedRate:a})},checkCritAtkSpeed:function(){this.isCanAtk()&&(0<this.critAtkSpeedPercent&&0<this.critAtkSpeedTime&&this.addAtkSpeed(this.critAtkSpeedPercent,this.critAtkSpeedTime),0<this.critAtkHurtPercent&&0<this.critAtkHurtTime&&this.addAtk1(this.critAtkHurtPercent,this.critAtkHurtTime))},getPassiveSkillData:function(e){for(var t=0;t<this.passiveSkillList.length;t++){var a=i.templateManager.getHeroSkillDataById(this.passiveSkillList[t]);if(a&&a.effectParameter[0][0]==e)return a.effectParameter[0]}return null},getSkillDataByPassiveType:function(e){for(var t=0;t<this.passiveSkillList.length;t++){var a=i.templateManager.getHeroSkillDataById(this.passiveSkillList[t]);if(a&&a.effectParameter[0][0]==e)return a}return null},updateSpeed:function(e,t){this.updateSpeedPercent=e,this.updateSpeedTime=t},enemyFireDot:function(e,t,i){this.fireDotHurt=e,this.fireHurtTime=t,this.fireAllTime=i,this.curFireTime=0},updateReboundDamage:function(){this.reboundDamageRate=0,this.reboundDamageNum=0;for(var e=this.source===i.constant.HERO_SOURCE_TOWER?i.constant.TOWER_TYPE_BARRACK:i.constant.TOWER_TYPE_HERO,t=i.battleScene.getInstanceSkillByAttr(i.constant.SKILL_ATTR_REBOUND_DAMAGE,e),a=0;a<t.length;a++)this.reboundDamageRate+=t[a].triggerProbability/100,this.reboundDamageNum=Math.max(t[a].natureList[2]/1e4,this.reboundDamageNum)},getReboundNum:function(){return i.Utils.getRandomInt(1,100)<this.reboundDamageRate?this.reboundDamageNum:0},getActionNameByDir:function(e){var t,a="right";if(4==(t=e==i.constant.HERO_STATE_DIE||e==i.constant.HERO_STATE_BATTLE?2:this.heroData.baseDirection))switch(this.curDir){case i.constant.HERO_DIR_UP:a="up";break;case i.constant.HERO_DIR_DOWN:a="down";break;case i.constant.HERO_DIR_LEFT:case i.constant.HERO_DIR_RIGHT:a="right"}else t<=2&&(a="right");return a},getActionLoopByState:function(e){var t=this.curState,a=!1;switch(t=e||t){case i.constant.HERO_STATE_STAND:a=!0;break;case i.constant.HERO_STATE_MOVE:case i.constant.HERO_STATE_READY:case i.constant.HERO_STATE_BACK:case i.constant.HERO_STATE_GO_TOWER:a=!0;break;case i.constant.HERO_STATE_BATTLE:case i.constant.HERO_STATE_DIE:case i.constant.HERO_STATE_WAIT:}return a},getActionNameByState:function(e){var t=this.curState,a="stand";switch(t=e||t){case i.constant.HERO_STATE_STAND:a="stand";break;case i.constant.HERO_STATE_MOVE:case i.constant.HERO_STATE_READY:case i.constant.HERO_STATE_BACK:case i.constant.HERO_STATE_GO_TOWER:a="run";break;case i.constant.HERO_STATE_JUMP:a="jump_up";break;case i.constant.HERO_STATE_ENTER:a="appear";break;case i.constant.HERO_STATE_JUMP_2:a="jump_down";break;case i.constant.HERO_STATE_BATTLE:a=this.soldierId!=i.constant.HERO_ID_DIANWEI&&44114!=this.soldierId||this.curAtkIndex!=this.maxAtkIndex?"attack":"attack2";break;case i.constant.HERO_STATE_SHOOT:a="shoot";break;case i.constant.HERO_STATE_DIE:case i.constant.HERO_STATE_WAIT:}return a},updateHeroAction:function(e,t,a){var n,o,s,r,c,l=this;this.curState>=i.constant.HERO_STATE_DIE||(n=this.curState,e&&(n=e),o=this.getActionLoopByState(e),t&&(o=!1),s=this.getActionNameByDir(n),r=this.getActionNameByState(e)+"_"+s,this.bodyNode.scaleX=this.curDir==i.constant.HERO_DIR_LEFT?-1:1,this.heroSpine.findAnimation(r)||(r=this.getActionNameByState(i.constant.HERO_STATE_STAND)+"_"+s),this.heroSpine.clearTrack(0),e=this.heroSpine.setAnimation(0,r,o),c=this,e&&!o&&a&&this.heroSpine.setCompleteListener(function(e){c.curState>=i.constant.HERO_STATE_DIE||(e.animation?e.animation.name:"")==r&&(r=l.getActionNameByState(a)+"_"+s,c.heroSpine.setAnimation(0,r,!0))}),e&&this.heroSpine.setEventListener(function(e,t){e&&((e=e.animation?e.animation.name:"")!==r||"onHeroLeftFoot"!==t.data.name||i.battleScene.gamePause||i.soundsUtil.playSoundEffect("tower_role_footsteps_one"),e!==r||"onHeroRightFoot"!==t.data.name||i.battleScene.gamePause||i.soundsUtil.playSoundEffect("tower_role_footsteps_two"))}))},getDirByPos:function(e,t){var a=this.curDir;return e=i.Utils.getDegree(e,t),t=2,2==(t=this.armsType==i.constant.ARMS_TYPE_ARCHER&&this.curState==i.constant.HERO_STATE_SHOOT?4:t)?a=90<=e&&e<270?i.constant.HERO_DIR_LEFT:i.constant.HERO_DIR_RIGHT:4==t&&(a=45<e&&e<135?i.constant.HERO_DIR_UP:135<=e&&e<225?i.constant.HERO_DIR_LEFT:225<=e&&e<315?i.constant.HERO_DIR_DOWN:i.constant.HERO_DIR_RIGHT),a},setHitFaintedTime:function(e){this.isHero||(this.hitFaintedTime=e,this.updateHeroAction(i.constant.HERO_STATE_STAND),this.showDizzinessEffect(!0))},changeSheep:function(e){this.isHero||(this.changeSheepTime=e,this.showChangeSheepEffect(!0),this.setCurTarEnemy(null),this.noticeDie())},heroFeelHurt:function(e){var t=e.realHurt,a=e.physicalAtk,n=e.magicAtk,o=e.isCrit,s=e.faintedTime,r=e.hitType,c=e.addHurtData;if(!(i.Utils.getRandomInt(1,100)<=this.dodgeRate)){var l=0,d=i.templateManager.getGameParamValue("barrackRange");return d=i.Utils.getRandomInt(d[0],d[1])/1e4,d=(a*(1-this.physicalDef/100)+n*(1-this.magicDef/100))*d,o&&(d*=2),d*=1-this.hurtDiscount,c&&(d*=1+c.addHurtPercent),t&&(d=t),this.isHero&&(t=this.maxHp*i.templateManager.getGameParamValue("soldierHitPercentage")/1e4,(t=e.isBoss?this.maxHp*i.templateManager.getGameParamValue("bossHitPercentage")/1e4:t)<d&&(d=t)),d=Math.round(d),this.hitFaintedTime<=0&&s&&0<s&&this.setHitFaintedTime(s),r==i.constant.HERO_HIT_TYPE_MAGIC?this.showHitEffect2():this.showHitEffect1(),this.updateHeroHp(-d),this.hurtTime=1.5,r=i.constant.FLY_HP_TYPE_GENERAL,a<=0?(r=i.constant.FLY_HP_TYPE_MAGIC,o&&(r=i.constant.FLY_HP_TYPE_MAGIC_CRIT)):o&&(r=i.constant.FLY_HP_TYPE_CRIT),r={pos:cc.v2(this.node.getPosition().x,this.node.getPosition().y+this.heroData.hpBarHeight),num:-d,type:r},0<Math.abs(d)&&i.battleScene.createFlyHpByData(r),i.Utils.getRandomInt(1,100)<this.reboundDamageRate&&(l=d*this.reboundDamageNum),e.shootObj&&(d=i.Utils.getDistance(e.shootObj.node.getPosition(),this.node.getPosition()),this.curState==i.constant.HERO_STATE_STAND&&!this.tarEnemyObj&&d<=this.counterAttackDistance&&this.isCanBattleEnemy(e.shootObj)&&(this.setCurTarEnemy(e.shootObj),this.setHeroState(i.constant.HERO_STATE_READY))),Math.ceil(l)}l=i.constant.FLY_HP_TYPE_MISS,l={pos:cc.v2(this.node.getPosition().x,this.node.getPosition().y+this.heroData.hpBarHeight),num:"\u95ea\u907f",type:l},i.battleScene.createFlyHpByData(l)},updateHeroHp:function(e){var t;Math.abs(e)<=0||(t=this.curHp,this.curHp+=e,this.curHp=Math.floor(this.curHp),this.curHp<0?this.curHp=0:this.curHp>this.maxHp&&(this.curHp=this.maxHp),this.setHp(this.curHp),this.headObj&&this.headObj.updateHp(this.curHp),this.curHp<=0&&this.startDieAction(),t!=this.curHp&&(this.updateHurtDiscount(),this.updatePassiveAddHurt()))},startSkillAction:function(e){var t,a=this;this.showDizzinessEffect(!1),this.showViolentEffect(!1),this.curState>=i.constant.HERO_STATE_DIE||(this.skillStandTime=e,e="right",4==this.heroData.baseDirection&&(e=this.getActionNameByDir()),t="skill_"+(e=this.soldierId==i.constant.HERO_ID_LVBU||this.soldierId==i.constant.HERO_ID_SUNSHANGXIANG?"right":e),this.heroSpine.clearTrack(0),e=this.heroSpine.setAnimation(0,t,!1),this.bodyNode.scaleX=this.curDir==i.constant.HERO_DIR_LEFT?-1:1,e&&this.heroSpine.setCompleteListener(function(e){(e.animation?e.animation.name:"")==t&&a.heroSkillOverSmall()}))},startDieAction:function(e){var t;this.curState>=i.constant.HERO_STATE_DIE||(this.showDizzinessEffect(!1),e||i.soundsUtil.playSoundEffect(this.heroData.deadAudio),this.heroSpine.clearTrack(0),this.bodyNode.scaleX=this.curDir==i.constant.HERO_DIR_LEFT?-1:1,(t=this).heroSpine.setAnimation(0,"death_right",!1)&&this.heroSpine.setCompleteListener(function(e){"death_right"==(e.animation?e.animation.name:"")&&t.heroDie()}),this.dieActionTime=5,this.setHeroState(i.constant.HERO_STATE_DIE),this.setCurTarEnemy(null),this.noticeDie(),i.templateManager.getHeroDataById(this.soldierId))},heroDie:function(){this.heroDieOver()},checkSoldierDisappear:function(){this.isHero||i.battleScene.curSelectSoldierObj!==this||i.battleScene.setCurSoldierObj(null)},heroDieOver:function(){var e;this.checkSoldierDisappear(),this.curDieNum++,this.curDieNum>=this.maxDieNum||i.Utils.getRandomInt(1,100)<=this.reviveRate?(this.showRevivalEffect(!0),0<(e=i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_HERO_REVIVE,i.constant.SKILL_ATTR_HP,this.soldierId))[0]&&(i.Logger.debug("\u7f81\u7eca\u6280\u80fd \u82f1\u96c4\u590d\u6d3b \u6982\u7387 + "+e[0]+" \u6700\u5927\u6b21\u6570 = "+e[1]),e=cc.v2(this.node.getPosition().x,this.node.getPosition().y+this.heroData.hpBarHeight),i.battleScene.gameBattleUIObj.checkShowRestrainTips(i.constant.RESTRAIN_TYPE_NGLY,i.constant.RESTRAIN_NGLY_SKILL_3,e))):this.setHeroState(i.constant.HERO_STATE_WAIT)},heroRevive:function(){this.curDieNum=0,this.soldierRevive(this.node.getPosition()),this.setHeroState(i.constant.HERO_STATE_STAND)},noticeDie:function(){i.battleScene.noticeHeroDie(this)},checkTarEnemyDie:function(e){var t;this.isCanAtk()&&(0<e.dieHpPercent&&(t=e.dieHpPercent*this.maxHp,this.updateHeroHp(t)),this.tarEnemyObj==e&&(0<this.skillStandTime?this.checkTargetEnemy=!0:this.findTargetEnemy()))},findTargetEnemy:function(){this.setCurTarEnemy(null),this.checkAtkTeammateTarget(),this.tarEnemyObj||this.logicHeroStand(),this.tarEnemyObj||this.setHeroState(i.constant.HERO_STATE_STAND)},updateHeroZIndex:function(){i.battleScene.updateZIndex(this.node),this.shadowNode.setPosition(this.node.getPosition()),this.pointNode.setPosition(this.node.getPosition()),this.updateHaloPos()},updateHaloPos:function(){this.heroHaloObj&&this.heroHaloObj.node.active&&this.heroHaloObj.setPos(this.node.getPosition())},isCanEnterTower:function(){return!1},isAlive:function(){return!(this.curState>=i.constant.HERO_STATE_DIE||this.curHp<=0)},isCanAtk:function(){return!(this.curHp<=0||!this.node.active||!this.isCanGetHurt||this.curState==i.constant.HERO_STATE_JUMP||this.curState>=i.constant.HERO_STATE_DIE||!this.isCanGetHurt)},isCanBattleEnemy:function(e){return!(!e.isCanBattle()||e.isFly&&!this.isCanBattleFly||e.node.convertToWorldSpaceAR(cc.v2(0,0)).y>cc.winSize.height-40)},setCurTarEnemy:function(e){e&&this.tarEnemyObj&&e.getEnemyCountId()===this.tarEnemyObj.getEnemyCountId()||(this.curAtkAccumulateNum=0),this.tarEnemyObj=e},setCallSoldierList:function(e){this.callSoldierList=e},checkAtkTeammateTarget:function(){if(this.source==i.constant.HERO_SOURCE_TOWER&&this.hostTower)for(var e=0;e<this.hostTower.towerSoldierList.length;e++){var t=this.hostTower.towerSoldierList[e].getComponent("GameHero");t!=this&&t.curState==i.constant.HERO_STATE_BATTLE&&t.tarEnemyObj&&t.tarEnemyObj.isCanBattle()&&(this.setCurTarEnemy(t.tarEnemyObj),this.setHeroState(i.constant.HERO_STATE_READY))}if(0<this.callSoldierList.length)for(var a=0;a<this.callSoldierList.length;a++){var n=this.callSoldierList[a];n!=this&&n.curState==i.constant.HERO_STATE_BATTLE&&n.tarEnemyObj&&n.tarEnemyObj.isCanBattle()&&(this.setCurTarEnemy(n.tarEnemyObj),this.setHeroState(i.constant.HERO_STATE_READY))}},checkSoldierActTogether:function(){if(this.source==i.constant.HERO_SOURCE_TOWER&&this.hostTower)for(var e=0;e<this.hostTower.towerSoldierList.length;e++){var t=this.hostTower.towerSoldierList[e].getComponent("GameHero");t==this||t.curState!=i.constant.HERO_STATE_STAND||t.tarEnemyObj||(t.setCurTarEnemy(this.tarEnemyObj),t.setHeroState(i.constant.HERO_STATE_READY))}if(0<this.callSoldierList.length)for(var a=0;a<this.callSoldierList.length;a++){var n=this.callSoldierList[a];n==this||n.curState!=i.constant.HERO_STATE_STAND||n.tarEnemyObj||(n.setCurTarEnemy(this.tarEnemyObj),n.setHeroState(i.constant.HERO_STATE_READY))}},getAimPos:function(e){return e?this.getHeadPos():this.getGroundPos()},getHeadOffsetHeight:function(){return this.heroData.headShotPoint},getHeadPos:function(){var e=this.node.getPosition();return e.y+=this.getHeadOffsetHeight(),e},getGroundPos:function(){return this.node.getPosition()},isHaveNotPoisonEnemy:function(){if(this.passivePoisonAttrData.totalTime<=0)return!1;for(var e=i.battleScene.enemyList,t=0;t<e.length;t++){var a=e[t].getComponent("GameEnemy");if(this.isCanShootEnemy(a)&&!a.isPoisoning())return!0}return!1},checkMeleeTarget:function(){if(!this.isCanMeleeBattle)return null;for(var e=i.battleScene.enemyList,t=!1,a=0;a<e.length;a++){var n=e[a].getComponent("GameEnemy"),o=this.isHero?this.node.getPosition():this.originPos;if(this.getEnemyDistance(o,n)<=this.battleDistance&&this.isCanBattleEnemy(n)){t=!0,this.setCurTarEnemy(n),this.isCanStopEnemy&&this.tarEnemyObj.readyBattle(this),this.setHeroState(i.constant.HERO_STATE_READY),this.checkSoldierActTogether();break}}return t},logicHeroStand:function(){this.checkMeleeTarget()||this.checkHeroShoot()||10<i.Utils.getDistance(this.node.getPosition(),this.originPos)&&this.setHeroState(i.constant.HERO_STATE_BACK)},logicRestoreHp:function(e){var t=!1;!(this.curState>=i.constant.HERO_STATE_DIE)&&(0<this.hurtTime&&(this.hurtTime-=e),(t=!!(i.battleScene.isBattleRestore||this.curState==i.constant.HERO_STATE_STAND&&this.hurtTime<=0)||t)&&(this.curRestoreHpTime+=e,1<this.curRestoreHpTime))&&(this.curRestoreHpTime=0,t=this.restoreHpPercent*this.maxHp,e=this.curHp<this.maxHp,this.updateHeroHp(t),t=i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_HP_BACK),e&&0<t&&(t=cc.v2(this.node.getPosition().x,this.node.getPosition().y+this.heroData.hpBarHeight),i.battleScene.gameBattleUIObj.checkShowRestrainTips(i.constant.RESTRAIN_TYPE_TYJY,i.constant.RESTRAIN_TYJY_SKILL_BATTLE_RESTORE,t)))},showHeroMoveSmoke:function(){var e;this.isHero&&(e=this.node.getPosition(),i.battleScene.createEffectDownByData({pos:e}),this.curMoveSmokeTime=0)},logicHeroBack:function(e){this.curMoveSmokeTime+=e,this.curMoveSmokeTime>=this.maxMoveSmokeTime&&this.showHeroMoveSmoke();var t=this.moveSpeedX;e=this.moveSpeedY,0<this.updateSpeedTime&&(t*=1+this.updateSpeedPercent,e*=1+this.updateSpeedPercent),this.node.x+=t,this.node.y+=e,i.Utils.getDistance(this.originPos,this.node.getPosition())<10&&this.setHeroState(i.constant.HERO_STATE_STAND),this.updateHeroZIndex()},logicHeroJump:function(e){var t;0<this.jumpTime&&(this.jumpTime-=e,this.jumpTime<.4&&(this.shadowNode.opacity=1),this.jumpTime<=0)&&(this.node.setPosition(this.tarMovePos),this.shadowNode.setPosition(this.node.getPosition()),this.shadowNode.opacity=255,this.pointNode.setPosition(this.node.getPosition()),(t=this).heroSpine.setAnimation(0,"jump_down_right",!1)&&this.heroSpine.setCompleteListener(function(e){"jump_down_right"==(e.animation?e.animation.name:"")&&(t.originPos=t.node.getPosition(),t.setHeroState(i.constant.HERO_STATE_STAND))}))},logicHeroEnter:function(e){0<this.enterTime&&(this.enterTime-=e,this.enterTime<=0&&this.setHeroState(i.constant.HERO_STATE_STAND))},logicHeroMove:function(e){this.curMoveSmokeTime+=e,this.curMoveSmokeTime>=this.maxMoveSmokeTime&&this.showHeroMoveSmoke();var t=this.moveSpeedX;e=this.moveSpeedY,0<this.updateSpeedTime&&(t*=1+this.updateSpeedPercent,e*=1+this.updateSpeedPercent),this.node.x+=t,this.node.y+=e,i.Utils.getDistance(this.tarMovePos,this.node.getPosition())<this.moveSpeed+1&&(this.originPos=this.node.getPosition(),this.setHeroState(i.constant.HERO_STATE_STAND),i.soundsUtil.playSoundEffect("tower_role_footsteps_one"),i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_INSTANCE_3_4)&&i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_3_4)),this.updateHeroZIndex();var a=i.battleScene.gameMapObj.mapUpIconList;if(a&&0<a.length)for(var n=0;n<a.length;n++){var o=a[n],s=cc.rect(this.node.x-25,this.node.y-10,50,70);if(o=cc.rect(o.x-o.width/2,o.y-o.height/2,o.width,o.height),s.intersects(o)){this.node.zIndex=i.constant.LAYER_HERO_UP;break}}},logicHeroReady:function(e){if(this.tarEnemyObj.tarHeroObj!=this&&this.isCanStopEnemy)for(var t=i.battleScene.enemyList,a=0;a<t.length;a++){var n=t[a].getComponent("GameEnemy"),o=this.isHero?this.node.getPosition():this.originPos;if(this.getEnemyDistance(o,n)<=this.battleDistance&&this.isCanBattleEnemy(n)&&!n.tarHeroObj)return this.setCurTarEnemy(n),this.isCanStopEnemy&&this.tarEnemyObj.readyBattle(this),void this.setHeroState(i.constant.HERO_STATE_READY)}this.isCanStopEnemy||this.updateBirdAtkPos(),this.curMoveSmokeTime+=e,this.curMoveSmokeTime>=this.maxMoveSmokeTime&&this.showHeroMoveSmoke();var s=this.moveSpeedX;e=this.moveSpeedY,0<this.updateSpeedTime&&(s*=1+this.updateSpeedPercent,e*=1+this.updateSpeedPercent),this.node.x+=s,this.node.y+=e,i.Utils.getDistance(this.tarEnemyPos,this.node.getPosition())<5&&(this.isCanStopEnemy&&this.tarEnemyObj.startBattle(this),this.setHeroState(i.constant.HERO_STATE_BATTLE)),this.updateHeroZIndex()},logicHeroBattle:function(){if(this.tarEnemyObj.tarHeroObj!=this&&this.isCanStopEnemy)for(var e=i.battleScene.enemyList,t=0;t<e.length;t++){var a=e[t].getComponent("GameEnemy"),n=this.isHero?this.node.getPosition():this.originPos;if(this.getEnemyDistance(n,a)<=this.battleDistance&&this.isCanBattleEnemy(a)&&!a.tarHeroObj)return this.setCurTarEnemy(a),this.isCanStopEnemy&&this.tarEnemyObj.readyBattle(this),void this.setHeroState(i.constant.HERO_STATE_READY)}var o,s,r,c,l,d;!this.isCanStopEnemy&&(this.updateBirdAtkPos(),5<i.Utils.getDistance(this.tarEnemyPos,this.node.getPosition()))&&(r=this.moveSpeedX,c=this.moveSpeedY,this.node.x+=r,this.node.y+=c),!this.logicHeroSkillAtk()&&this.curAttackTime>=this.maxAttackTime&&(!this.tarEnemyObj||!this.tarEnemyObj.isCanBattle()||120<i.Utils.getDistance(this.node.getPosition(),this.tarEnemyObj.node.getPosition())?this.findTargetEnemy():(this.curAttackTime=0,this.checkHeroSkillAtkNum()||(this.atkUpdateHpTime=8/30,i.soundsUtil.playSoundEffect(this.heroData.attackAudio),this.updateHeroAction(i.constant.HERO_STATE_BATTLE,!0,i.constant.HERO_STATE_STAND),this.curAtkIndex++,this.curAtkIndex>this.maxAtkIndex&&(this.curAtkIndex=this.minAtkIndex),(d=i.Utils.getRandomInt(1,100)<=this.critRate)&&this.checkCritAtkSpeed(),o=i.Utils.getRandomInt(1,100)<=this.faintedRate?this.faintedTime:0,s=i.Utils.getRandomInt(1,100)<=this.targetDefRate?this.targetDefNum:0,l=1,0<this.maxShootDistance&&(l=this.heroData.meleeDamageRate/1e4),r=this.physicalAtk*l,c=this.magicAtk*l,l=null,0<this.passiveAddHurtData.effectNum&&(l={addHurtPercent:this.passiveAddHurtData.effectNum,addHurtTime:this.passiveAddHurtData.time}),d={physicalAtk:r,magicAtk:c,towerType:i.constant.TOWER_TYPE_BARRACK,critHurt:this.critHurt,faintedTime:o,ignoreArmorData:this.ignoreArmorData,targetDefNum:s,atkAccumulate:Math.pow(this.atkAccumulatePercent,this.curAtkAccumulateNum),addIronRate:i.Utils.getRandomInt(1,100)<=this.addIronAttrData.rate?this.addIronAttrData.addRate:0,secondKillRate:this.secondKillRate,secondKillPercent:this.secondKillPercent,killBombData:this.killBombData,killSuckHpData:this.killSuckHpData,roleHitName:"tower_bullet_hit",addHurtData:l,isCrit:d},0<this.restrainAddHurt&&this.tarEnemyObj.enemyAddHurt(this.restrainAddHurt,1/60),this.tarEnemyObj.enemyFeelHurt(d,i.constant.ATK_TYPE_NEAR,!1,this.atkUpdateHpTime),this.updateCurAtkAccumulateNum(),this.atkUpdateHpTime=0,this.skillStandTime=this.getHeroAtkActionTime())))},updateBattleSpeedPercent:function(){this.heroSpine&&(this.heroSpine.timeScale=i.battleScene.battleSpeedPercent*i.battleScene.slowSpeedPercent*this.baseTimeScale)},getEnemyDistance:function(e,t){return i.Utils.getDistance(e,t.node.getPosition())-t.getShadowRadius()},isCanSkillShootEnemy:function(e,t){var i=this.getEnemyDistance(this.node.getPosition(),e);return!!(i<=t&&i>=this.minShootDistance&&e.isCanAtk())},isCanShootEnemy:function(e){var t=this.getEnemyDistance(this.node.getPosition(),e);if(this.isHero){if(t<=this.maxShootDistance&&t>=this.minShootDistance&&e.isCanAtk())return!0}else if(t<=this.maxShootDistance&&e.isCanAtk())return!0;return!1},isHaveShootEnemy:function(e){var t=!1;return!(e=void 0===e?this.isHaveNotPoisonEnemy():e)||this.tarEnemyObj&&!this.tarEnemyObj.isPoisoning()?this.tarEnemyObj&&(t=this.isCanShootEnemy(this.tarEnemyObj)):t=!1,t},getShootPos:function(){var e=this.node.getPosition();return e.x+=this.heroData.bulletPoint[this.curDir-1][0]*this.node.scale,e.y+=this.heroData.bulletPoint[this.curDir-1][1]*this.node.scale,e},checkHeroShoot:function(){if(this.maxShootDistance<=0)return!1;if(this.armsType==i.constant.ARMS_TYPE_MELEE)return!1;var e=this.isHaveNotPoisonEnemy();if(this.isHaveShootEnemy(e))return this.curState==i.constant.HERO_STATE_STAND&&this.setHeroState(i.constant.HERO_STATE_SHOOT),!0;for(var t=i.battleScene.enemyList,a=0;a<t.length;a++){var n=t[a].getComponent("GameEnemy");if(this.isCanShootEnemy(n)&&(!e||!n.isPoisoning()))return this.setCurTarEnemy(n),this.setHeroState(i.constant.HERO_STATE_SHOOT),!0}return!1},logicHeroShoot:function(){var e;this.logicHeroSkillAtk()||this.checkMeleeTarget()||(this.isHaveShootEnemy()?this.curAttackTime>=this.maxAttackTime&&(this.curAttackTime=0,this.checkHeroSkillAtkNum()||(e=this.getDirByPos(this.node.getPosition(),this.tarEnemyObj.node.getPosition()),this.setHeroDir(e),this.updateHeroAction(i.constant.HERO_STATE_SHOOT,!0,i.constant.HERO_STATE_STAND),this.skillStandTime=this.getHeroAtkActionTime(),this.createBullet(this.getShootPos(),this.tarEnemyObj,8/30),this.updateCurAtkAccumulateNum(),i.Utils.getRandomInt(1,100)<=this.attackOtherEnemyData.rate&&this.shootOtherObj(this.getShootPos(),this.tarEnemyObj,8/30))):this.setHeroState(i.constant.HERO_STATE_STAND))},createBullet:function(e,t,a){var n=1==i.templateManager.getBulletDataById(this.heroData.bulletId).aimingPoint,o=i.battleScene.getTarEnemyShootPos(this,t,this.heroData.bulletId,a,n),s=i.Utils.getRandomInt(1,100)<=this.critRate,r=0<this.violentBulletId?this.violentBulletId:this.heroData.bulletId,c=i.Utils.getRandomInt(1,100)<=this.targetDefRate?this.targetDefNum:0,l=Math.pow(this.atkAccumulatePercent,this.curAtkAccumulateNum),d=null;0<this.passivePoisonAttrData.totalTime&&(d={hurtNum:this.passivePoisonAttrData.attackRate*this.physicalAtk,hurtTime:this.passivePoisonAttrData.hurtTime,totalTime:this.passivePoisonAttrData.totalTime,isRealHurt:this.passivePoisonAttrData.isRealHurt,physicalAtk:this.passivePoisonAttrData.physicalAtk,magicAtk:this.passivePoisonAttrData.magicAtk});var h=null;0<this.passiveAddHurtData.effectNum&&(h={addHurtPercent:this.passiveAddHurtData.effectNum,addHurtTime:this.passiveAddHurtData.time});var u=null;0<this.passiveAtkAoeData.effectNum&&(u={hurtPercent:this.passiveAtkAoeData.effectNum,radius:this.passiveAtkAoeData.radius,bulletId:this.passiveAtkAoeData.bulletId});var p=null;0!==this.passiveMoveSpeedData.effectNum&&(p={speedPercent:this.passiveMoveSpeedData.effectNum,speedTime:this.passiveMoveSpeedData.time,showEffectType:i.constant.SLOW_TYPE_ICE});var g=1;0<this.maxShootDistance&&(g=this.heroData.remoteDamageRate/1e4);var _=this.passiveFaintedData?this.passiveFaintedData.faintedTime:0;t=this.passiveFaintedData?this.passiveFaintedData.faintedType:0,n=this.passiveFaintedData?this.passiveFaintedData.faintedRate:0,_=i.Utils.getRandomInt(1,100)<=n?_:0,this.isHero&&this.soldierId==i.constant.HERO_ID_ZHANGJIAO&&(e=o),a={source:i.constant.SHOOT_SOURCE_HERO,bulletId:r,towerType:-1,tarObj:this.tarEnemyObj,curPos:e,tarPos:o,isAimHead:!0,physicalAtk:this.physicalAtk*g,magicAtk:this.magicAtk*g,isCrit:s,critHurt:this.critHurt,faintedTime:_,faintedType:t,faintedRate:n,poisonData:d,addHurtData:h,atkAoeData:u,moveSpeedData:p,addIronRate:i.Utils.getRandomInt(1,100)<=this.addIronAttrData.rate?this.addIronAttrData.addRate:0,secondKillRate:this.secondKillRate,secondKillPercent:this.secondKillPercent,atkAccumulate:l,ignoreArmorData:null,targetDefNum:c,killBombData:this.killBombData,killSuckHpData:this.killSuckHpData,delay:a},i.battleScene.createBulletByData(a)},shootOtherObj:function(e,t,a){for(var n=i.Utils.getDegree(e,t.node.position),o=this.attackOtherEnemyData.attackNum,s=i.battleScene.enemyList,r=0,c=0;c<s.length;c++){var l=s[c],d=l.getComponent("GameEnemy");if(d.getEnemyCountId()!==this.tarEnemyObj.getEnemyCountId()&&this.isCanShootEnemy(d)&&(l=i.Utils.getDegree(e,l.position),((l=Math.abs(n-l))<=this.attackOtherEnemyData.angle||Math.abs(l-360)<=this.attackOtherEnemyData.angle)&&(this.createBullet(e,d,a),++r>=o)))return}},logicHeroGoTower:function(e){this.curMoveSmokeTime+=e,this.curMoveSmokeTime>=this.maxMoveSmokeTime&&this.showHeroMoveSmoke(),this.node.x+=this.moveSpeedX,this.node.y+=this.moveSpeedY,i.Utils.getDistance(this.tarMovePos,this.node.getPosition())<this.moveSpeed+1&&this.setHeroState(i.constant.HERO_STATE_IN_TOWER),this.updateHeroZIndex()},cleanTowerData:function(){this.enterTowerObj&&(this.enterTowerObj.cleanHeroData(),this.enterTowerObj=null)},setTouchMove:function(){},gotoTower:function(e){this.enterTowerObj=e,this.setHeroState(i.constant.HERO_STATE_GO_TOWER),this.enterTowerObj.gotoTower(this)},outTower:function(){this.node.active=!0,this.shadowNode.active=this.node.active;var e=i.battleScene.gameMapObj.towerOriginList[this.enterTowerObj.curindex];e=cc.v2(e.x-320,e.y-568),this.originPos=e,this.setHeroState(i.constant.HERO_STATE_BACK),this.enterTowerObj=null},showSpinSword:function(e){this.heroHaloObj.setSwordShow(e),e&&this.updateHaloPos()},setHeroHalo:function(e){this.heroHaloObj=e,this.heroHaloObj.setHero(this);var t,a,n,o,s,r=this.bigSkillData.specialParameter[0];r[0]==i.constant.HERO_SKILL_SPIN_SWORD&&(t=r[1],a=r[2],n=r[3],o=r[4]/1e4,s=r[5]/1e3,e=r[6]/1e3,r=r[7],this.heroHaloObj.initData(t,a,n,o,s,e,r))},logicHeroSkillTime:function(e){this.isHero&&(0<this.maxBigSkillTime&&(this.curBigSkillTime+=e),this.heroHaloObj&&this.heroHaloObj.updateHalo(e))},checkHeroSkillAtkNum:function(){return!!(0<this.maxBigSkillAtkNum&&(this.curBigSkillAtkNum++,this.curBigSkillAtkNum>this.maxBigSkillAtkNum&&this.startBigSkill(i.constant.HERO_SKILL_OUT_TOWER)))&&!(this.curBigSkillAtkNum=0)},logicHeroSkillAtk:function(){return i.battleScene.curState!=i.constant.GAME_STATE_LOAD&&i.battleScene.curState!=i.constant.GAME_STATE_OVER&&!!(0<this.maxBigSkillTime&&this.curBigSkillTime>=this.maxBigSkillTime&&this.startBigSkill(i.constant.HERO_SKILL_OUT_TOWER))&&!(this.curBigSkillTime=0)},getHeroAtkActionTime:function(){var e=this.isHero?15:0;switch(this.soldierId){case i.constant.HERO_ID_GUANYU:e=18;break;case i.constant.HERO_ID_ZHANGFEI:case i.constant.HERO_ID_LIUBEI:case i.constant.HERO_ID_XIAOQIAO:case i.constant.HERO_ID_HUANGZHONG:case i.constant.HERO_ID_LVBU:case i.constant.HERO_ID_ZHUGELIANG:case i.constant.HERO_ID_DIAOCHAN:e=15}return(e+1)/30},getHeroSkillActionTime:function(){var e=30;switch(this.soldierId){case i.constant.HERO_ID_GUANYU:e=33;break;case i.constant.HERO_ID_ZHANGFEI:case 44102:e=35;break;case i.constant.HERO_ID_LIUBEI:e=40;break;case i.constant.HERO_ID_XIAOQIAO:e=21;break;case i.constant.HERO_ID_HUANGZHONG:e=33;break;case i.constant.HERO_ID_LVBU:e=40;break;case i.constant.HERO_ID_ZHUGELIANG:e=16;break;case i.constant.HERO_ID_DIAOCHAN:e=20;break;case i.constant.HERO_ID_SUNSHANGXIANG:e=26;break;case i.constant.HERO_ID_ZHAOYUN:case 44110:e=33;break;case i.constant.HERO_ID_CAOCAO:e=60;break;case i.constant.HERO_ID_ZHANGJIAO:e=70;break;case i.constant.HERO_ID_DIANWEI:case 44114:e=75}return(e+1)/30},startBigSkill:function(e,t){if(e!=i.constant.HERO_SKILL_IN_TOWER||this.isHero){if(this.curState==i.constant.HERO_STATE_IN_TOWER&&e!=i.constant.HERO_SKILL_IN_TOWER)return!1;if(this.curState!=i.constant.HERO_STATE_IN_TOWER&&e!=i.constant.HERO_SKILL_OUT_TOWER)return!1}var a=this.bigSkillData;return e=this.getHeroSkillActionTime(),a.skillAudio&&i.soundsUtil.playSoundEffect(a.skillAudio),this.heroSkillBig(),this.startSkillAction(e,i.constant.HERO_BIG_SKILL),e=i.lang.getGameText(a.skillName),e={pos:cc.v2(this.node.getPosition().x,this.node.getPosition().y+this.heroData.hpBarHeight),desc:e,camp:i.constant.SKILL_CAMP_HERO},i.battleScene.createSkillTipsByData(e),this.startSkill(a,t),!0},getSkillEffectData:function(e,t){for(var i=0;i<e.length;i++)if(e[i][0]==t)return e[i];return null},startSkill:function(e,t){var a=e.atkParameter?e.atkParameter[0]:null,n=e.effectParameter||[],o=e.specialParameter?e.specialParameter[0]:null,s=e.bulletID,r=e.startSelection,c=e.targetSelection,l=e.radius,d=this.curState==i.constant.HERO_STATE_IN_TOWER,h=0<e.isRealAtk,u=!1;s&&(u=0<i.templateManager.getBulletDataById(s).isPenetrate);var p=r!=c,g=(e=this.getSkillEffectData(n,i.constant.HERO_SKILL_EFFECT_SWOON))?e[1]/1e3:0,_=e?e[2]:0,m=e?e[3]/100:100,E=(r=this.getSkillEffectData(n,i.constant.HERO_SKILL_EFFECT_SLEEP))?r[1]/1e3:0,T=(e=this.getSkillEffectData(n,i.constant.HERO_SKILL_EFFECT_EXTRA))?{hpPercent:e[1]/1e4,hurtPercent:e[2]/1e4}:null,f=(r=this.getSkillEffectData(n,i.constant.HERO_SKILL_EFFECT_FUNK))?{funkTime:r[1]/1e3,funkNum:r[2]}:null,S=(e=this.getSkillEffectData(n,i.constant.HERO_SKILL_EFFECT_MOVE_SPEED))?{speedPercent:e[1]/1e4,speedTime:e[2]/1e3}:null,A=((r=this.getSkillEffectData(n,i.constant.HERO_SKILL_EFFECT_FORMATION))&&r[1],r?{continueTime:r[1]/1e3,checkTime:r[2]/1e3}:null),I=(e=this.getSkillEffectData(n,i.constant.HERO_SKILL_EFFECT_DEF_1))?{defPercent:e[1]/1e4,defTime:e[2]/1e3}:null,y=(r=this.getSkillEffectData(n,i.constant.HERO_SKILL_EFFECT_DEF_2))?{defPercent:r[1]/1e4,defTime:r[2]/1e3}:null,P=null;(e=this.getSkillEffectData(n,i.constant.HERO_SKILL_EFFECT_CONTINUE))&&(L=e[1]+this.physicalAtk*e[2]/1e4,v=e[1]+this.magicAtk*e[2]/1e4,r=0<e[5],P={fireDotHurt:e[1]+(this.physicalAtk+this.magicAtk)*e[2]/1e4,fireHurtTime:e[3]/1e3,fireAllTime:e[4]/1e3,isRealHurt:r,physicalAtk:L,magicAtk:v});var v,L=this.getSkillEffectData(n,i.constant.HERO_SKILL_EFFECT_CONTINUE_2),N=null;L&&(R=L[1]+this.physicalAtk*L[2]/1e4,b=L[1]+this.magicAtk*L[2]/1e4,v=0<L[5],N={hurtNum:L[1]+(this.physicalAtk+this.magicAtk)*L[2]/1e4,hurtTime:L[3]/1e3,totalTime:L[4]/1e3,isRealHurt:v,physicalAtk:R,magicAtk:b});var b,R=this.getSkillEffectData(n,i.constant.HERO_SKILL_EFFECT_HIT_HURT),C=null;R&&(B=R[1]+this.physicalAtk*R[2]/1e4,M=R[1]+this.magicAtk*R[2]/1e4,D=0<R[6],b=R[1],b+=this.physicalAtk*R[2]/1e4,b+=this.magicAtk*R[2]/1e4,C={continueTime:R[5]/1e3,checkTime:R[3]/1e3,hurt:b,dotTime:R[4]/1e3,isRealHurt:D,physicalAtk:B,magicAtk:M});var D,k,O,w=(D=this.getSkillEffectData(n,i.constant.HERO_SKILL_EFFECT_LIMIT_SKILL))?{limitTime:D[1]/1e3,limitR:D[2]}:null,M=(B=this.getSkillEffectData(n,i.constant.HERO_SKILL_EFFECT_ATK_1))?{atkPercent:B[1]/1e4,atkTime:B[2]/1e3}:null,B=(D=this.getSkillEffectData(n,i.constant.HERO_SKILL_EFFECT_ATK_SPEED))?{speedPercent:D[1]/1e4,speedTime:D[2]/1e3}:null,H=(D=this.getSkillEffectData(n,i.constant.HERO_SKILL_EFFECT_HURT_ADD))?{addHurtPercent:D[1]/1e4,addHurtTime:D[2]/1e3}:null,G=(D=this.getSkillEffectData(n,i.constant.HERO_SKILL_EFFECT_CHARM))?{charmRate:D[1]/100,charmNum:D[2],charmSoldierId:D[3]}:null,U=(D=this.getSkillEffectData(n,i.constant.HERO_SKILL_EFFECT_ENEMY_DIE_HP))?{dieHpPercent:D[1]/1e4}:null,x=(n=this.getSkillEffectData(n,i.constant.HERO_SKILL_EFFECT_SUCK_BLOOD))?{suckHpPercent:n[1]/1e4}:null;if(a){var F=a[0];if(F==i.constant.HERO_SKILL_SHOOT_1||F==i.constant.HERO_SKILL_SHOOT_2){var Y=Math.floor(a[1]),V=Math.floor(a[2]),W=Math.floor(a[3])/1e4,K=Math.floor(a[4])/1e3,j=Math.floor(a[5]),Q=Math.floor(a[6]),q=Math.floor(a[7])/1e3,J=Math.floor(a[8])/1e4,X=(n=!1,[]);if(n=F==i.constant.HERO_SKILL_SHOOT_2?0<a[6]:n)for(var z=i.battleScene.enemyList,Z=0;Z<z.length;Z++){var $=z[Z].getComponent("GameEnemy");this.isCanSkillShootEnemy($,l)&&X.push($)}var ee=V+this.physicalAtk*W,te=V+this.magicAtk*W;V+=this.physicalAtk*W,V+=this.magicAtk*W,V=Math.floor(V);for(var ie=0;ie<Y;ie++){var ae=q+K*ie,ne=p,oe=t||cc.v2(0,0);c==i.constant.HERO_SKILL_TAR_SELF?oe=this.node.getPosition():c==i.constant.HERO_SKILL_TAR_ENEMY&&(oe=d?t:i.battleScene.getTarEnemyShootPos(this,this.tarEnemyObj,s,ae,ne)),u&&F==i.constant.HERO_SKILL_SHOOT_2?(ce=i.templateManager.getGameParamValue("huangBulletAngle")[ie],re=this.getShootPos(),se=i.battleScene.getTarEnemyShootPos(this,this.tarEnemyObj,s,q+2*K,ne),se=i.Utils.getDegree(re,se),se+=ce,ce=i.Utils.getOffsetByRotationAndDistance(se,1100),oe=cc.v2(re.x+ce.x,re.y+ce.y)):0<j?oe=i.battleScene.getBlowPos(oe,j,[],!1,Q,!1):p&&this.tarEnemyObj&&this.tarEnemyObj.isCanAtk()&&(oe=i.battleScene.getTarEnemyShootPos(this,this.tarEnemyObj,s,ae,ne));var se=p?this.getShootPos():oe,re=p?i.constant.TOWER_TYPE_ARROW:-1,ce=this.tarEnemyObj?i.Utils.getDegree(this.node.getPosition(),this.tarEnemyObj.getAimPos(!0)):0;ae={source:i.constant.SHOOT_SOURCE_SKILL,bulletId:s,towerType:re,curPos:se,tarPos:oe,isAimHead:ne,physicalAtk:ee,magicAtk:te,isCrit:!1,realHurt:h?V:0,tarObj:this.tarEnemyObj,shootObj:this,faintedTime:g,faintedType:_,faintedRate:m,sleepTime:E,extraHurtData:T,funkData:f,addIronRate:i.Utils.getRandomInt(1,100)<=this.addIronAttrData.rate?this.addIronAttrData.addRate:0,moveSpeedData:S,formationData:A,defData1:I,defData2:y,fireContinueData:P,limitSkillData:w,addHurtData:H,dieHpData:U,hitHurtData:C,charmData:G,poisonData:N,shootDegree:ce,nextHurtPercent:J,suckBloodData:x,killSuckHpData:this.killSuckHpData,delay:ae},i.battleScene.createBulletByData(ae)}}}if(o)if((W=o[0])==i.constant.HERO_SKILL_CALL)for(var le=Math.floor(o[1]),de=Math.floor(o[2]),he=Math.floor(o[3])/1e3,ue=Math.floor(o[4])/1e4,pe=Math.floor(o[5])/1e4,ge={recruitTime:he,addPhysicalAtk:this.physicalAtk*pe,addMagicAtk:this.magicAtk*pe,addHp:this.maxHp*ue},_e=he=t||this.node.getPosition(),me=he,Ee=i.Utils.getRandomInt(1,360),Te=0;Te<de;Te++){var fe=i.Utils.getOffsetByRotationAndDistance(Ee,30);fe={soldierId:le,curPos:me,originPos:cc.v2(_e.x+fe.x,_e.y+fe.y),source:i.constant.HERO_SOURCE_HERO_RECRUIT},i.battleScene.createSoldierByData(fe).getComponent("GameHero").setRecruitData(ge),360<(Ee+=360/de)&&(Ee-=360)}else if(W==i.constant.HERO_SKILL_RECRUIT_BIRD)for(var Se=Math.floor(o[1]),Ae=Math.floor(o[2]),Ie=(pe=Math.floor(o[3])/1e3,ue=Math.floor(o[4])/1e4,he=Math.floor(o[5])/1e4,{recruitTime:pe,addPhysicalAtk:this.physicalAtk*he,addMagicAtk:this.magicAtk*he,addHp:this.maxHp*ue}),ye=ue=t||this.node.getPosition(),Pe=ue,ve=0,Le=0;Le<Ae;Le++){var Ne=i.Utils.getOffsetByRotationAndDistance(ve,50),be={soldierId:Se,curPos:Pe,originPos:cc.v2(ye.x+Ne.x,ye.y+Ne.y),source:i.constant.HERO_SOURCE_HERO_RECRUIT};(be=i.battleScene.createSoldierByData(be).getComponent("GameHero")).setRecruitData(Ie),be.setHeroRecruitBird(this,Ne),360<(ve+=360/Ae)&&(ve-=360)}else W==i.constant.HERO_SKILL_CHANGE_BIG?(k=o[1]/1e4,O=o[2]/1e3,this.scheduleOnce(function(){this.heroBig(k,O,s)},34/30),M&&this.addAtk1(M.atkPercent,M.atkTime),B&&this.addAtkSpeed(B.speedPercent,B.speedTime)):W==i.constant.HERO_SKILL_SPIN_SWORD&&this.showSpinSword(!0)},updateCurAtkAccumulateNum:function(){this.curAtkAccumulateNum++,this.curAtkAccumulateNum>this.maxAtkAccumulateNum&&(this.curAtkAccumulateNum=this.maxAtkAccumulateNum)},updateHero:function(e){if(!i.player.gmModule.isLimitShootEnemy()){if(0<this.dieActionTime&&(this.dieActionTime-=e,this.dieActionTime<=0&&this.heroDie()),0<this.skillBigTime&&(this.skillBigTime-=e,this.skillBigTime<=0&&this.heroSkillOverSmall()),0<this.fireAllTime&&(this.fireAllTime-=e,this.curFireTime+=e,this.curFireTime>=this.fireHurtTime&&(this.curFireTime-=this.fireHurtTime,this.heroFeelHurt({realHurt:this.fireDotHurt}))),0<this.updateSpeedTime&&(this.updateSpeedTime-=e),0<this.defTime1&&(this.defTime1-=e,this.defTime1<=0&&(this.defTime1=0,this.updatePhysicalDef())),0<this.critTime&&(this.critTime-=e,this.critTime<=0&&(this.critTime=0,this.updateCritRate())),0<this.bigTime&&(this.bigTime-=e,this.bigTime<=0&&(this.bigTime=0,this.violentBulletId=0,this.showViolentEffect(!1))),0<this.atkTime1&&(this.atkTime1-=e,this.atkTime1<=0&&(this.atkTime1=0,this.updatePhysicalAtk())),0<this.atkSpeedTime&&(this.atkSpeedTime-=e,this.atkSpeedTime<=0&&(this.atkSpeedTime=0,this.updateShootWaitTime())),0<this.skillAddAtkSpeedTime&&(this.skillAddAtkSpeedTime-=e,this.skillAddAtkSpeedTime<=0&&(this.skillAddAtkSpeedTime=0,this.updateShootWaitTime(),this.baseTimeScale=1,this.updateBattleSpeedPercent())),0<this.skillAddAtkTime1&&(this.skillAddAtkTime1-=e,this.skillAddAtkTime1<=0&&(this.skillAddAtkTime1=0,this.updatePhysicalAtk())),0<this.skillAddAtkTime2&&(this.skillAddAtkTime2-=e,this.skillAddAtkTime2<=0&&(this.skillAddAtkTime2=0,this.updateMagicAtk())),0<this.recruitTime&&(this.recruitTime-=e,this.recruitTime<=0)){this.node.opacity=255;var t=cc.fadeOut(.5),a=cc.callFunc(function(){this.startDieAction(!0);var e=i.battleScene.soldierList.indexOf(this.node);i.battleScene.soldierList.splice(e,1),i.battleScene.giveBackSoldier(this.node),this.checkSoldierDisappear()},this);return a=cc.sequence(t,a),this.node.stopAllActions(),void this.node.runAction(a)}if(this.curState<i.constant.HERO_STATE_DIE&&(this.logicHeroSkillTime(e),this.curState!=i.constant.HERO_STATE_BATTLE&&this.curState!=i.constant.HERO_STATE_SHOOT||(this.curAttackTime+=e)),this.logicRestoreHp(e),0<this.skillStandTime){if(this.skillStandTime-=e,this.skillStandTime<=0&&(this.skillStandTime=0,this.checkTargetEnemy&&this.findTargetEnemy(),this.cacheMovePos))return void this.startMove(this.cacheMovePos);if(this.curState==i.constant.HERO_STATE_BATTLE||this.curState==i.constant.HERO_STATE_SHOOT)return}if(0<this.changeSheepTime)return this.changeSheepTime-=e,void(this.changeSheepTime<=0&&(this.showChangeSheepEffect(!1),this.updateHeroAction()));if(0<this.hitFaintedTime)return this.hitFaintedTime-=e,void(this.hitFaintedTime<=0&&(this.showDizzinessEffect(!1),this.updateHeroAction()));switch(this.soldierId,this.updateBirdOriginPos(),this.curState){case i.constant.HERO_STATE_STAND:this.logicHeroStand(e);break;case i.constant.HERO_STATE_BACK:this.logicHeroBack(e);break;case i.constant.HERO_STATE_MOVE:this.logicHeroMove(e);break;case i.constant.HERO_STATE_JUMP:this.logicHeroJump(e);break;case i.constant.HERO_STATE_ENTER:this.logicHeroEnter(e);break;case i.constant.HERO_STATE_READY:this.logicHeroReady(e);break;case i.constant.HERO_STATE_BATTLE:this.logicHeroBattle(e);break;case i.constant.HERO_STATE_SHOOT:this.logicHeroShoot(e);break;case i.constant.HERO_STATE_GO_TOWER:this.logicHeroGoTower(e);break;case i.constant.HERO_STATE_IN_TOWER:this.logicHeroSkillAtk();break;case i.constant.HERO_STATE_DIE:break;case i.constant.HERO_STATE_WAIT:this.isHero&&(this.dieTime+=e,this.dieTime>=this.heroReviveTime&&this.soldierRevive())}}}}),cc._RF.pop()},{}],GameIconTips:[function(e,t){"use strict";cc._RF.push(t,"424b35y1ThCRYWLAyBtbH4U","GameIconTips");var i=e("Aft");cc.Class({extends:cc.Component,properties:{iconAtlas:{default:null,type:cc.SpriteAtlas}},start:function(){},initData:function(e){var t,a,n,o,s,r,c,l,d=this;this.node.zIndex=e.zIndex,this.waitTime=e.time,this.type=e.type,this.scale=e.scale||1,this.node.scale=this.scale,this.icon=cc.find("icon",this.node).getComponent("cc.Sprite"),this.moveAni=cc.find("battle_move",this.node).getComponent("cc.Animation"),this.enemyCharmAni=cc.find("battle_renegade",this.node).getComponent("cc.Animation"),this.soldierMoveAni=cc.find("battle_soldierMove",this.node).getComponent("cc.Animation"),this.loadAniParent=cc.find("loadAniParent",this.node),e.type==i.constant.GAME_TIPS_TYPE_X?(this.setShowIconType(!0),this.icon.spriteFrame=this.iconAtlas.getSpriteFrame("Battle_Wrong")):e.type==i.constant.GAME_TIPS_TYPE_TOMB?(this.setShowIconType(!0),this.icon.spriteFrame=this.iconAtlas.getSpriteFrame("Tombstone")):e.type==i.constant.GAME_TIPS_TYPE_HOLE?(this.setShowIconType(!0),this.icon.spriteFrame=this.iconAtlas.getSpriteFrame("Battle_Hole")):e.type==i.constant.GAME_TIPS_TYPE_TARGET?(this.setShowIconType(!1),this.moveAni.stop(),this.moveAni.setCurrentTime(0),this.moveAni.play("battle_move")):e.type==i.constant.GAME_TIPS_TYPE_CLUMP?(this.setShowIconType(!1),this.soldierMoveAni.stop(),this.soldierMoveAni.setCurrentTime(0),this.soldierMoveAni.play("battle_soldierMove")):e.type==i.constant.GAME_TIPS_TYPE_HERO_CALL?this.heroCallAni?(this.setShowIconType(!1),this.heroCallAni.stop(),this.heroCallAni.setCurrentTime(0),this.heroCallAni.play("hero_deliver")):(t=i.constant.PREFAB_PATH_BATTLE+"hero_deliver",i.battleScene.getBulletPrefab(t,function(e){e?(e=cc.instantiate(e),d.loadAniParent.addChild(e),d.heroCallAni=e.getComponent("cc.Animation"),d.setShowIconType(!1),d.heroCallAni.stop(),d.heroCallAni.setCurrentTime(0),d.heroCallAni.play("hero_deliver")):i.Logger.debug("error prefabName = "+t)})):e.type==i.constant.GAME_TIPS_TYPE_ENEMY_CALL?this.enemyCallAni?(this.setShowIconType(!1),this.enemyCallAni.stop(),this.enemyCallAni.setCurrentTime(0),this.enemyCallAni.play("hero_deliver")):(a=i.constant.PREFAB_PATH_BATTLE+"enemy_call",i.battleScene.getBulletPrefab(a,function(e){e?(e=cc.instantiate(e),d.loadAniParent.addChild(e),d.enemyCallAni=e.getComponent("cc.Animation"),d.setShowIconType(!1),d.enemyCallAni.stop(),d.enemyCallAni.setCurrentTime(0),d.enemyCallAni.play("hero_deliver")):i.Logger.debug("error prefabName = "+a)})):e.type==i.constant.GAME_TIPS_TYPE_BOSS_CALL_ENEMY?this.bossCallEnemyAni?(this.setShowIconType(!1),this.bossCallEnemyAni.stop(),this.bossCallEnemyAni.setCurrentTime(0),this.bossCallEnemyAni.play("enemy_break")):(n=i.constant.PREFAB_PATH_BATTLE+"enemy_break",i.battleScene.getBulletPrefab(n,function(e){e?(e=cc.instantiate(e),d.loadAniParent.addChild(e),d.bossCallEnemyAni=e.getComponent("cc.Animation"),d.setShowIconType(!1),d.bossCallEnemyAni.stop(),d.bossCallEnemyAni.setCurrentTime(0),d.bossCallEnemyAni.play("enemy_break")):i.Logger.debug("error prefabName = "+n)})):e.type==i.constant.GAME_TIPS_TYPE_BOSS_CALL_EFFECT?this.bossCallEffectAni?(this.setShowIconType(!1),this.bossCallEffectAni.stop(),this.bossCallEffectAni.setCurrentTime(0),this.bossCallEffectAni.play("boss_call")):(o=i.constant.PREFAB_PATH_BATTLE+"boss_call",i.battleScene.getBulletPrefab(o,function(e){e?(e=cc.instantiate(e),d.loadAniParent.addChild(e),d.bossCallEffectAni=e.getComponent("cc.Animation"),d.setShowIconType(!1),d.bossCallEffectAni.stop(),d.bossCallEffectAni.setCurrentTime(0),d.bossCallEffectAni.play("boss_call")):i.Logger.debug("error prefabName = "+o)})):e.type==i.constant.GAME_TIPS_TYPE_CHARM&&(this.setShowIconType(!1),this.enemyCharmAni.stop(),this.enemyCharmAni.setCurrentTime(0),this.enemyCharmAni.play("battle_renegade")),this.node.stopAllActions(),this.node.opacity=255,this.icon.node.active&&(r=e.scale||1.1,c=e.scale||1,l=e.scale?1:.3,s=cc.scaleTo(.1,r),e=cc.scaleTo(.1,c),r=cc.delayTime(this.waitTime-l),c=cc.fadeOut(l),l=cc.callFunc(function(){},this),l=cc.sequence(s,e,r,c,l),this.node.runAction(l),i.battleScene.gamePause&&this.node.pauseAllActions())},setShowIconType:function(e){(this.icon.node.active=e)||(this.moveAni.node.active=this.type==i.constant.GAME_TIPS_TYPE_TARGET,this.soldierMoveAni.node.active=this.type==i.constant.GAME_TIPS_TYPE_CLUMP,this.heroCallAni&&(this.heroCallAni.node.active=this.type==i.constant.GAME_TIPS_TYPE_HERO_CALL),this.enemyCallAni&&(this.enemyCallAni.node.active=this.type==i.constant.GAME_TIPS_TYPE_ENEMY_CALL),this.bossCallEnemyAni&&(this.bossCallEnemyAni.node.active=this.type==i.constant.GAME_TIPS_TYPE_BOSS_CALL_ENEMY),this.bossCallEffectAni&&(this.bossCallEffectAni.node.active=this.type==i.constant.GAME_TIPS_TYPE_BOSS_CALL_EFFECT),this.enemyCharmAni.node.active=this.type==i.constant.GAME_TIPS_TYPE_CHARM)},update:function(e){i.battleScene.gamePause||0<this.waitTime&&(this.waitTime-=e,this.waitTime<=0&&i.battleScene.giveBackIconTips(this.node))}}),cc._RF.pop()},{}],GameMapEffectDown:[function(e,t){"use strict";cc._RF.push(t,"0e728LZYPBPwpbHXnXXWZa/","GameMapEffectDown");var i=e("Aft");cc.Class({extends:cc.Component,properties:{},start:function(){},initData:function(){this.ani=cc.find("move_smoke",this.node).getComponent("cc.Animation"),this.ani.on("finished",this.onFinished,this),this.ani.stop(),this.ani.setCurrentTime(0),this.ani.play("move_smoke")},onFinished:function(e,t){"move_smoke"==t.name&&i.battleScene.giveBackEffectDown(this.node)}}),cc._RF.pop()},{}],GameMapEffect:[function(e,t){"use strict";cc._RF.push(t,"df9bbvRxHhI2qSyX7RzV/3v","GameMapEffect");var i=e("Aft");cc.Class({extends:cc.Component,properties:{},start:function(){},initData:function(e){this.objData=e.objData,this.flagNode=cc.find("endFlag",this.node),this.flowerNode=cc.find("newYear_lantern",this.node),this.flagNode.active=this.objData.effectType==i.constant.MAP_EFFECT_FLAG,this.flowerNode.active=this.objData.effectType==i.constant.MAP_EFFECT_FLOWER,this.node.scale=Math.floor(this.objData.percent)/100}}),cc._RF.pop()},{}],GameMap:[function(e,t){"use strict";cc._RF.push(t,"4938evUKz5JMp955YIzfKSG","GameMap");var i=e("Aft");cc.Class({extends:cc.Component,properties:{battleAtlas:{default:null,type:cc.SpriteAtlas},cloudAtlas:{default:null,type:cc.SpriteAtlas}},start:function(){var e=cc.find("touchNode",this.node);e.on("touchstart",this.onTouchStart,this),e.on("touchmove",this.onTouchMove,this),e.on("touchend",this.onTouchEnd,this),e.on("touchcancel",this.onTouchCancel,this)},onDestroy:function(){},initData:function(){this.loadIndex=-1,this.offsetX=0,this.offsetY=8},loadMapData:function(){this.mapName=i.battleScene.instanceData.routeMap;var e="tileMap/"+this.mapName;i.Logger.debug("battle loadMapData mapPath = "+e),this.onLoadTileMap(e)},loadMapAtlas:function(){this.loadIndex=-1,(new Date).getTime(),this.mapAtlas=null;var e=this,t="textures/map/"+i.battleScene.instanceData.map;i.Logger.debug("battle loadMapAtlas mapImgResPath = "+t),cc.loader.loadRes(t,cc.SpriteAtlas,function(a,n){if(a)return cc.error(a),void e.loadMapAtlas();i.Logger.debug("loadRes over loadMapAtlas"),i.battleScene.addLoadingPercent(i.constant.LOADING_MAP_ICON),(new Date).getTime(),i.gameScene.startBattleTime,e.mapAtlas=n,e.mapImgResPath=t,e.checkMapCreate()});var a="textures/mapUp/"+i.battleScene.instanceData.caveAtlas;i.Logger.debug("battle loadMapCoverAtlas mapCoverImgResPath = "+a),cc.loader.loadRes(a,cc.SpriteAtlas,function(t,i){return t?(cc.error(t),void e.loadMapAtlas()):(e.mapCoverAtlas=i,e.mapCoverImgResPath=a,void e.checkMapCreate())})},cleanRes:function(){var e;this.mapImgResPath&&this.mapAtlas&&(cc.loader.release(cc.loader.getDependsRecursively(this.mapAtlas)),this.mapImgResPath=null,this.mapAtlas=null),this.mapCoverImgResPath&&this.mapCoverAtlas&&(cc.loader.release(cc.loader.getDependsRecursively(this.mapCoverAtlas)),this.mapCoverImgResPath=null,this.mapCoverAtlas=null),this.sunshine&&(cc.loader.release(cc.loader.getDependsRecursively("prefab/effectPrefab/battle/battle_map1_light")),this.sunshine=null,i.Logger.debug("gameMap cleanRes this.sunshine")),this.sceneWaterEffect&&(this.sceneWaterEffect.destroy(),e=i.battleScene.instanceData.map,cc.loader.release(cc.loader.getDependsRecursively("prefab/effectPrefab/battle/battle_"+e.replace("_","")+"_river")),this.sceneWaterEffect=null,i.Logger.debug("gameMap cleanRes this.sunshine"))},onLoadTileMap:function(e){this.tmxAsset=null,this.isCanOperation=!1,i.Logger.debug("onCreateTileMap start url = "+e);var t=this;cc.loader.loadRes(e,cc.TiledMapAsset,function(a,n){return a?(cc.error(a),void t.onLoadTileMap(e)):(t.tmxAsset=n,i.battleScene.addLoadingPercent(i.constant.LOADING_MAP_DATA),(new Date).getTime(),i.gameScene.startBattleTime,void t.checkMapCreate())})},setLoadSpineState:function(e){!this.spineLoadFinish&&e&&(i.battleScene.addLoadingPercent(i.constant.LOADING_SPINE),(new Date).getTime(),i.gameScene.startBattleTime),this.spineLoadFinish=e},setInitBulletFinish:function(e){!this.bulletInitFinish&&e&&(i.battleScene.addLoadingPercent(i.constant.LOADING_BULLET),(new Date).getTime(),i.gameScene.startBattleTime),this.bulletInitFinish=e},checkMapCreate:function(){this.mapAtlas&&this.mapCoverAtlas&&this.tmxAsset&&this.spineLoadFinish&&this.bulletInitFinish&&this.onCreateTileMap(this.tmxAsset)},onCreateTileMap:function(){(new Date).getTime(),i.gameScene.startBattleTime,(new Date).getTime(),this.loadIndex=1,i.battleNode.setPosition(cc.v2(0,0)),this.initMapInfo(),this.createMapElement(),i.battleScene.initMapEffect(this.effectDataList),this.initMapPos(),this.initAStar(),i.battleScene.addLoadingPercent(i.constant.LOADING_MAP_INFO),(new Date).getTime()},initMapInfo:function(){this.tiledMapNode=cc.find("mapNode",this.node),this.tiledMap=this.tiledMapNode.getComponent("cc.TiledMap"),this.tiledMap.tmxAsset=this.tmxAsset,this.layerLimit=this.tiledMap.getLayer("shelter"),this.layerObstacle=this.tiledMap.getLayer("pathfinding");var e=this.tiledMap.getObjectGroup("tower").getObjects();e.sort(function(e,t){return Math.floor(e.name)-Math.floor(t.name)}),this.towerDataList=[],this.towerOriginList=[],this.towerHeroPosList=[];for(var t=0;t<e.length;t++)"1"==e[t].towerType?this.towerDataList.push(e[t]):"11"==e[t].towerType?this.towerOriginList.push(e[t]):Math.floor(e[t].name)==this.towerHeroPosList.length+1?this.towerHeroPosList.push(e[t]):(i.Logger.debug("\u8fd9\u91cc\u5173\u5361\u7f16\u8f91\u5668\u3000\u6570\u636e\u6709\u95ee\u9898\u3000\u6ca1\u6709\u5339\u914d\u7684\u82f1\u96c4\u521d\u59cb\u4f4d\u7f6e"),this.towerHeroPosList.push(null));var a=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,101,102,103,104,105,106,107,108,109,110,111,112];this.routeMovePosList={};for(var n=0;n<=a.length;n++){var o=a[n],s=this.tiledMap.getObjectGroup("route"+o),r=[],c=[],l=-1;if(s){s._properties.next&&(l=s._properties.next);var d=[];(r=s.getObjects()).sort(function(e,t){return Math.floor(e.id)-Math.floor(t.id)});for(var h=0;h<r.length;h++){var u=r[h];d.push(cc.v2(u.x-320,u.y-568))}c=i.Utils.getFixCurvePointList(d,.2)}this.routeMovePosList[o]={list:c,next:l}}var p=this.tiledMap.getObjectGroup("effect");this.effectDataList=p?p.getObjects():[],this.layerObjOther=this.tiledMap.getObjectGroup("obj"),this.otherObjList=this.layerObjOther.getObjects();for(var g=0;g<this.otherObjList.length;g++)this.otherObjList[g];this.mapHero1=this.layerObjOther.getObject("hero1"),this.mapHero2=this.layerObjOther.getObject("hero2"),this.mapHero3=this.layerObjOther.getObject("hero3"),this.mapHeroList=[this.mapHero1,this.mapHero2,this.mapHero3],this.endPointData=this.layerObjOther.getObject("end");var _=this.tiledMap.getMapSize();this.mapContentHeight=1136,this.mapData=[];for(var m=0;m<_.height;m++){for(var E=[],T=0;T<_.width;T++){var f=null;!this.layerLimit||0<(S=this.layerLimit.getTileGIDAt(cc.v2(T,m)))&&(f=this.tiledMap.getPropertiesForGID(S));var S,A=null;!this.layerObstacle||0<(S=this.layerObstacle.getTileGIDAt(cc.v2(T,m)))&&(A=this.tiledMap.getPropertiesForGID(S)),E.push({limitData:f,obstacleData:A})}this.mapData.push(E)}},createMapElement:function(){this.tiledMapNode.active=!1,this.mapBgNode=cc.find("mapBg",this.node),this.mapBgSprite=this.mapBgNode.getComponent(cc.Sprite);var e=this.mapAtlas.getSpriteFrame(i.battleScene.instanceData.map);this.mapBgSprite.spriteFrame=e,this.createSunshine(),this.createCloudFly(),this.createMapCover(),this.createRedLine(),this.createMapUpIcon()},initMapPos:function(){this.node.setPosition(cc.v2(0,0))},initAStar:function(){this.aStarNode=cc.find("aStarNode",this.node),this.aStar=this.aStarNode.getComponent("MapPath");for(var e=[],t=this.tiledMap.getMapSize(),i=0;i<t.width;i++){for(var a=[],n=0;n<t.height;n++){var o=0;this.mapData[n][i].obstacleData&&(o=1),a.push(o)}e.push(a)}this.aStar.initMapData(e),this.aStar.gameMap=this},searchRoad:function(e,t){return this.aStar.startSearchRoad(e,t)},checkNextRoute:function(e){return this.routeMovePosList[e].next},getRouteMovePos:function(e,t){return this.routeMovePosList[e]?(t>=this.routeMovePosList[e].list.length&&(i.Logger.debug("error routeId = "+e+" step = "+t+" length = "+this.routeMovePosList[e].list.length),t=this.routeMovePosList[e].list.length-1),this.routeMovePosList[e].list[t]):(i.Logger.debug("error routeId = "+e),null)},getRouteMoveLength:function(e){return this.routeMovePosList[e]?this.routeMovePosList[e].list.length:(i.Logger.debug("error routeId = "+e),null)},isHaveRouteId:function(e){return!!this.routeMovePosList[e]},moveMap:function(){},getTilePos:function(e){var t=this.tiledMap.getTileSize(),i=this.tiledMap.getMapSize(),a=(t.width,i.width,t.height*i.height);return i=Math.floor(e.x/t.width),t=Math.floor((a-e.y)/t.height),cc.v2(i,t)},getTilePosByNode:function(e){e=(t=e.convertToWorldSpaceAR(cc.v2(0,0))).x;var t=t.y;return t=cc.v2(e,t),this.getTilePos(t)},getTilePosByNodePos:function(e){var t=this.battleNode.convertToWorldSpaceAR(cc.v2(0,0));return t.x+=e.x,t.y+=e.y,e=t.x,t=t.y,t=cc.v2(e,t),this.getTilePos(t)},getMapPosByTile:function(e){var t=this.tiledMap.getTileSize(),a=this.tiledMap.getMapSize(),n=(t.width,a.width,t.height*a.height);return a=e.x*t.width+t.width/2,t=n-e.y*t.height-t.height/2,t=cc.v2(a,t),i.battleNode.convertToNodeSpaceAR(t)},isCanClick:function(e){var t=this.getTilePos(e);return e=this.tiledMap.getMapSize(),!(t.x<0||t.x>=e.width||t.y<0||t.y>=e.height||this.layerLimit&&this.layerLimit.getTileGIDAt(t))},isCanMove:function(){},isBattlePosCanMove:function(e){return e=cc.v2(e.x+320,e.y+568),this.isCanClick(e)},createRouteEndPoint:function(){var e=this.mapCoverAtlas.getSpriteFrame(i.battleScene.chapterData.endIcon),t=new cc.Node;t.addComponent(cc.Sprite).spriteFrame=e,e=cc.v2(this.endPointData.x-320,this.endPointData.y-568),t.setPosition(e),i.battleNode.addChild(t,i.constant.LAYER_GAME_BG_UP)},createTowerFloor:function(e){var t=this.mapCoverAtlas.getSpriteFrame("floor_empty"),a=new cc.Node;return a.addComponent(cc.Sprite).spriteFrame=t,a.setPosition(e),i.battleNode.addChild(a,i.constant.LAYER_GAME_BG_UP),a},createTowerArrow:function(e){var t=i.battleScene.battleAtlas.getSpriteFrame("Tower_Upgrade_Arrow"),a=new cc.Node;a.addComponent(cc.Sprite).spriteFrame=t,a.setPosition(e),i.battleNode.addChild(a,i.constant.LAYER_FLY_ENEMY);var n=cc.moveBy(10/60,cc.v2(0,10));return t=cc.scaleTo(10/60,.475,.525),e=cc.spawn(n,t),n=cc.moveBy(.25,cc.v2(0,-10)),t=cc.scaleTo(.25,.5,.5),t=cc.spawn(n,t),t=cc.sequence(e,t),t=cc.repeatForever(t),a.runAction(t),a},createSunshine:function(){var e=this;this.effectName=i.battleScene.chapterData.sceneEffects,this.isShowSunshine=0<i.battleScene.chapterData.isShowSunshine,i.Logger.debug("this.effectName = "+this.effectName+" this.isShowSunshine = "+this.isShowSunshine),this.sunshine=null,this.isShowSunshine&&cc.loader.loadRes("prefab/effectPrefab/battle/battle_map1_light",cc.Prefab,function(t,a){t?i.Logger.error("load battle_map1_light error:",t.message):(e.sunshine=cc.instantiate(a),i.battleNode.addChild(e.sunshine,i.constant.LAYER_MAP_DECORATE+1),e.sunshine.setPosition(cc.v2(-cc.winSize.width/2,cc.winSize.height/2)),e.sunshine.getComponent("cc.Animation").play())}),this.sceneEffect=null,cc.loader.loadRes("prefab/effectPrefab/battle/"+this.effectName,cc.Prefab,function(t,a){t?i.Logger.error("load battle_map1_leaf error:",t.message):(e.sceneEffect=cc.instantiate(a),i.battleNode.addChild(e.sceneEffect,i.constant.LAYER_MAP_DECORATE))}),this.sceneWaterEffect=null;var t=i.battleScene.instanceData.map;"map_9991"!==t&&"map_9994"!==t||cc.loader.loadRes("prefab/effectPrefab/battle/battle_"+t.replace("_","")+"_river",cc.Prefab,function(t,a){t?i.Logger.error("load battle_river error:",t.message):(e.sceneWaterEffect=cc.instantiate(a),i.battleNode.addChild(e.sceneWaterEffect,i.constant.LAYER_GAME_BG_UP))})},createCloudFly:function(){if(this.oldCloudIndex=-1,this.isShowSunshine)for(var e=1;e<=3;e++){var t=new cc.Node,a=this.cloudAtlas.getSpriteFrame("Island_cloud0"+e);t.addComponent(cc.Sprite).spriteFrame=a,i.battleNode.addChild(t,i.constant.LAYER_GAME_BG_UP),this.startCloudFlyAction(t,e-1)}},createMapUpIcon:function(){this.mapUpIconList=[];var e=i.battleScene.instanceData.cavePosition;if(e&&0<e.length)for(var t=0;t<e.length;t++){var a,n=(a=e[t])[0],o=Math.floor(a[1]),s=Math.floor(a[2]);(a=this.mapCoverAtlas.getSpriteFrame(n))&&((n=new cc.Node).addComponent(cc.Sprite).spriteFrame=a,n.setPosition(cc.v2(o,s)),i.battleNode.addChild(n,i.constant.LAYER_MAP_DECORATE),this.mapUpIconList.push(n),i.Logger.debug("createMapUpIcon node.w = "+n.width+" h = "+n.height))}},startCloudFlyAction:function(e,t){for(var a=i.Utils.getRandomInt(0,2);this.oldCloudIndex==a;)a=i.Utils.getRandomInt(0,2);this.oldCloudIndex=a;var n=cc.v2(-500,250*a-150+i.Utils.getRandomInt(-50,50));e.setPosition(n),e.opacity=i.Utils.getRandomInt(100,160),e.scale=i.Utils.getRandomInt(20,30)/10,e.angle=-10;var o=i.Utils.getOffsetByRotationAndDistance(-10,1050),s=(n=cc.v2(n.x+o.x,n.y+o.y),this);o=cc.delayTime(0<t?30*t/3:0),t=cc.moveTo(30,n),n=cc.callFunc(function(){s.startCloudFlyAction(this,0)},e),n=cc.sequence(o,t,n),e.stopAllActions(),e.runAction(n)},createMapCover:function(){},createRedLine:function(){this.redLineList=[];for(var e=0;e<40;e++){var t=this.battleAtlas.getSpriteFrame("Battle_LineOfMarch"),a=new cc.Node;a.addComponent(cc.Sprite).spriteFrame=t,a.anchorX=0,a.anchorY=.5,a.setPosition(cc.v2(0,0)),i.battleNode.addChild(a,i.constant.LAYER_GAME_BG_UP+1),this.redLineList.push(a)}var n=this.battleAtlas.getSpriteFrame("SpeedCircle"),o=new cc.Node;o.anchorX=.5,o.anchorY=.5,o.setPosition(cc.v2(0,0)),o.height=100,o.width=100,o.scaleY=.7;var s=new cc.Node,r=s.addComponent(cc.Sprite);r.spriteFrame=n,s.anchorX=.5,s.anchorY=.5,s.setPosition(cc.v2(0,0)),o.addChild(s),i.battleNode.addChild(o,i.constant.LAYER_GAME_BG_UP+1),this.lineSpriteNode=s,this.lineCircle=o,this.lineCircleSprite=r;for(var c=0;c<this.redLineList.length;c++)this.redLineList[c].active=!1;this.lineCircle.active=!1},updateRedLinePos:function(e){if(this.redLineList&&this.redLineList[0].active){var t=this.lineCircle.getPosition(),a=i.Utils.getRotation(e,t),n=(t=i.Utils.getDistance(e,t),Math.floor(t/35));n<1&&(n=1);for(var o=0,s=0;s<this.redLineList.length;s++){var r=this.redLineList[s];r.active=s<n;var c=i.Utils.getOffsetByRotationAndDistance(a,o);c=cc.v2(e.x+c.x,e.y+c.y),r.active&&(r.setPosition(c),r.angle=a),o+=35}}},showRedLine:function(e,t,a){if(this.redLineList){var n=a?cc.color("#fff400"):cc.color("#f23b3b"),o=(a=i.Utils.getDistance(e,t),Math.floor(a/35));o<1?o=1:o>this.redLineList.length&&(o=this.redLineList.length);for(var s=0;s<o;s++)this.redLineList[s].active=!0;if(!this.lineCircle.active){this.lineCircle.active=!0,this.lineSpriteNode.stopAllActions(),a=cc.repeatForever(cc.rotateBy(3,360)),this.lineSpriteNode.runAction(a);var r=72;if(i.battleScene.curOperateState===i.constant.OPERATE_STATE_SKILL){var c=i.battleScene.gameBattleUIObj.getCurSkillObj(),l=this.battleAtlas.getSpriteFrame("range_circle_skill");if(this.lineCircleSprite.spriteFrame=l,c)for(var d=i.templateManager.getGameParamValue("mainSkillRange"),h=0;h<d.length;h++)if(d[h][0]===c.data.groupID){r*=d[h][1]/(r/2);break}}else l=this.battleAtlas.getSpriteFrame("SpeedCircle"),this.lineCircleSprite.spriteFrame=l;this.lineSpriteNode.width=r,this.lineSpriteNode.height=r}for(var u=0;u<this.redLineList.length;u++)this.redLineList[u].color=n;this.lineSpriteNode.color=n,this.lineCircle.setPosition(t),this.updateRedLinePos(e)}},hideRedLine:function(){if(this.lineCircle){for(var e=0;e<this.redLineList.length;e++)this.redLineList[e].active=!1;this.lineSpriteNode.stopAllActions(),this.lineCircle.active=!1,this.checkEnterTower(null,cc.v2(-3e3,0),!0)}},checkEnterTower:function(e,t,a){if(i.battleScene.gameTowerList){for(var n=null,o=0;o<i.battleScene.gameTowerList.length;o++){var s=i.battleScene.gameTowerList[o],r=s.isCanEnter()&&e&&e.isCanEnterTower(s);r&&i.Utils.getDistance(t,s.node.getPosition())<50&&(n=n||s),a&&(s.showCanEnter(r),s.setTouchMove(s==n))}return n}},onTouchStart:function(e,t){if(i.battleScene.gameBattleUIObj&&(i.battleScene.gameBattleUIObj.hideGayFriendTriggerTips(),i.battleScene.gameBattleUIObj.hideGayFriendTips()),!this.touchId&&i.battleScene.curState!=i.constant.GAME_STATE_LOAD&&i.battleScene.curState!=i.constant.GAME_STATE_OVER){this.touchId=e.getID(),this.isCanTouchMove=!0,this.isClickScreen=!0;var a=e.getLocation(),n=i.battleNode.convertToNodeSpaceAR(a),o=(e=(1136-cc.winSize.height)/2,e=cc.v2(a.x,a.y+e),this.isCanClick(e));switch(i.battleScene.setCurEnemyObj(null),i.battleScene.setCurSoldierObj(null),this.pointPos=n,i.battleScene.curOperateState){case i.constant.OPERATE_STATE_TOWER:if(!i.battleScene.curTowerObj)for(var s=0;s<i.battleScene.gameHeroObjList.length;s++){var r=i.battleScene.gameHeroObjList[s];if(i.Utils.getDistance(n,r.node.getPosition())<50&&(this.isHeroCanMove=!1,r.onClickHero()))break}break;case i.constant.OPERATE_STATE_HERO:this.isHeroCanMove=!0;var c=(d=i.battleScene.getCurHeroObj()).node.getPosition(),l=n,d=this.checkEnterTower(d,n,!0);this.showRedLine(c,l,o=!(o||!d)||o);break;case i.constant.OPERATE_STATE_SKILL:if(t)break;d=i.battleScene.gameBattleUIObj.getCurSkillObj().node.convertToWorldSpaceAR(cc.v2(0,0)),d=i.battleNode.convertToNodeSpaceAR(d),this.showRedLine(d,n,o)}}},onTouchMove:function(e){if(this.isCanTouchMove&&i.battleScene.curState!=i.constant.GAME_STATE_LOAD&&i.battleScene.curState!=i.constant.GAME_STATE_OVER){var t=e.getLocation(),a=i.battleNode.convertToNodeSpaceAR(t),n=(e=(1136-cc.winSize.height)/2,e=cc.v2(t.x,t.y+e),this.isCanClick(e));switch(i.battleScene.curOperateState){case i.constant.OPERATE_STATE_TOWER:break;case i.constant.OPERATE_STATE_HERO:var o=(r=i.battleScene.getCurHeroObj()).node.getPosition(),s=a,r=this.checkEnterTower(r,a,!0);this.showRedLine(o,s,n=!(n||!r)||n);break;case i.constant.OPERATE_STATE_SKILL:r=i.battleScene.gameBattleUIObj.getCurSkillObj().node.convertToWorldSpaceAR(cc.v2(0,0)),r=i.battleNode.convertToNodeSpaceAR(r),this.showRedLine(r,a,n)}}},onTouchEnd:function(e,t){if(this.touchId==e.getID()&&(this.isClickScreen=!1,this.oldPos=null,this.touchId==e.getID()&&(this.touchId=null),i.battleScene.curState!=i.constant.GAME_STATE_LOAD&&i.battleScene.curState!=i.constant.GAME_STATE_OVER)){i.battleScene.gameBattleUIObj.hideDetail(!0);var a=e.getLocation(),n=i.battleNode.convertToNodeSpaceAR(a),o=(e=(1136-cc.winSize.height)/2,e=cc.v2(a.x,a.y+e),this.isCanClick(e));i.Utils.getDistance(this.pointPos,n),this.hideRedLine(o);var s=!1,r=!1;switch(i.battleScene.curOperateState){case i.constant.OPERATE_STATE_TOWER:if(i.battleScene.curTowerObj){var c=i.battleScene.curTowerObj.node.position;o&&i.Utils.isPointInOvalNew(c,n,i.battleScene.curTowerObj.shootDistance)?(i.soundsUtil.playSoundEffect("soldier_put_position"),i.battleScene.curTowerObj.updateOriginPos(n),i.battleScene.gameTowerControlObj.hideControl(),c={type:i.constant.GAME_TIPS_TYPE_CLUMP,pos:n,zIndex:i.constant.LAYER_HERO_SKILL,time:50/30},i.battleScene.createIconTipsByData(c)):(E={type:i.constant.GAME_TIPS_TYPE_X,pos:n,zIndex:i.constant.LAYER_HERO_SKILL,time:.7},i.battleScene.createIconTipsByData(E))}else if(!i.guideManager.isLimitGuideClick()){for(var l=0;l<i.battleScene.gameTowerList.length;l++){var d=i.battleScene.gameTowerList[l];if(i.Utils.getDistance(n,d.node.getPosition())<50){d.onClickTower(),s=!0;break}}if(!s)for(var h=0;h<i.battleScene.enemyList.length;h++){var u=i.battleScene.enemyList[h].getComponent("GameEnemy");if(i.Utils.getDistance(n,u.getClickPosition())<u.getEnemyClickRange()&&u.isAlive()){u.onClickEnemy(),r=!0;break}}if(!s&&!r)for(var p=0;p<i.battleScene.soldierList.length;p++){var g=i.battleScene.soldierList[p],_=g.getComponent("GameHero");if(i.Utils.getDistance(n,g.getPosition())<30&&_.isAlive()&&_.onClickSolider())break}}break;case i.constant.OPERATE_STATE_HERO:var m,E=i.battleScene.getCurHeroObj();if(i.Utils.getDistance(n,E.node.getPosition())<50&&!this.isHeroCanMove)return;o?(E.moveToTargetPos(n),i.battleScene.gameBattleUIObj.hideDetail(!0),i.battleScene.gameBattleUIObj.cancelChoose(),m={type:i.constant.GAME_TIPS_TYPE_TARGET,pos:n,zIndex:i.constant.LAYER_HERO_SKILL,time:50/30},i.battleScene.createIconTipsByData(m)):((m=this.checkEnterTower(E,n,!1))?E.gotoTower(m):(m={type:i.constant.GAME_TIPS_TYPE_X,pos:n,zIndex:i.constant.LAYER_HERO_SKILL,time:.7},i.battleScene.createIconTipsByData(m)),i.battleScene.gameBattleUIObj.hideDetail(!0),i.battleScene.gameBattleUIObj.cancelChoose());break;case i.constant.OPERATE_STATE_SKILL:if(t)break;if(o){var T=i.battleScene.curSkillGroupId;if(null===T)return void i.Logger.debug("skill id is null");i.battleScene.startHeroSkill(T,n),i.battleScene.gameBattleUIObj.hideDetail(!0),i.battleScene.gameBattleUIObj.cancelChoose()}else T={type:i.constant.GAME_TIPS_TYPE_X,pos:n,zIndex:i.constant.LAYER_HERO_SKILL,time:.7},i.battleScene.createIconTipsByData(T),(T=i.battleScene.gameBattleUIObj.getCurSkillObj())&&T.onClick()}!s&&!i.battleScene.curTowerObj&&i.battleScene.gameTowerControl&&i.battleScene.gameTowerControl.active&&i.battleScene.gameTowerControlObj.hideControl(null)}},onTouchCancel:function(e){i.Logger.debug("map onTouchCancel"),this.onTouchEnd(e)},update:function(){var e;if(this.redLineList&&this.redLineList[0].active&&(e=i.battleScene.getCurHeroObj())&&(e=e.node.getPosition(),this.updateRedLinePos(e)),this.isCanTouchMove=!0,0<=this.loadIndex)switch(this.loadIndex++,this.loadIndex){case 5:i.battleScene.initGameTower(this.towerDataList),i.battleScene.addLoadingPercent(i.constant.LOADING_TOWER);break;case 6:i.battleScene.initGameHero(),i.battleScene.initGameBattleUI(),i.battleScene.addLoadingPercent(i.constant.LOADING_HERO),i.gameScene.hideLoading();var t=(new Date).getTime()-i.gameScene.startBattleTime;i.Logger.debug("enterBattle \u5168\u90e8\u52a0\u8f7d\u5b8c\u6bd5 useBattleTime = "+t)}}}),cc._RF.pop()},{}],GamePauseItemRender:[function(e,t){"use strict";cc._RF.push(t,"cd4715b8WxI/ZUMUhF9ISGx","GamePauseItemRender");var i=e("Aft");cc.Class({extends:cc.Component,properties:{battleSkillAtlas:{default:null,type:cc.SpriteAtlas},battleAtlas:{default:null,type:cc.SpriteAtlas}},onLoad:function(){this.nameLabel=cc.find("/name",this.node).getComponent(cc.Label),this.bgSprite=cc.find("Bg",this.node).getComponent(cc.Sprite),this.skillIconSprite=cc.find("skill/skillIcon",this.node).getComponent(cc.Sprite),this.angleSprite=cc.find("angle",this.node).getComponent(cc.Sprite),this.levelLabel=cc.find("level",this.node).getComponent(cc.Label),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},initData:function(e){i.Logger.debug("GamePauseItemRender skillId - "+e),this.skillId=e,this.skillLevel=i.battleScene.getInstanceSkill(this.skillId).level,e=i.templateManager.getTipsSkillListByGroupId(this.skillId),this.tempSkillData=e[this.skillLevel-1],this.nameLabel.string=i.lang.getGameText(this.tempSkillData.name),this.nameLabel.node.color=cc.color(i.player.itemModule.getItemQualityColor(this.tempSkillData.quality)),i.lang.updateLabelString(this.levelLabel,[this.skillLevel]),e=this.tempSkillData.icon.split("/")[1],this.skillIconSprite.spriteFrame=this.battleSkillAtlas.getSpriteFrame(e),this.bgSprite.spriteFrame=this.battleSkillAtlas.getSpriteFrame(this.tempSkillData.stopTipsSkillBg),this.tempSkillData.subscript?(this.angleSprite.node.active=!0,e=this.tempSkillData.subscript.split("/")[1],e=this.battleSkillAtlas.getSpriteFrame(e),this.angleSprite.spriteFrame=e):this.angleSprite.node.active=!1},onTouchStart:function(){i.Logger.debug("onTouchStart"),this.host.skillTipsObj&&(this.touchTime=0,this.touching=!0)},onTouchMove:function(){this.canNotMove||(this.canNotMove=!0,this.hideSkillTips())},onTouchEnd:function(){i.Logger.debug("onTouchEnd"),this.hideSkillTips()},hideSkillTips:function(){this.host.skillTipsObj.node.active&&this.host.skillTipsObj.hideNode(),this.touching=!1},update:function(e){this.touching&&(this.touchTime+=e,.6<=this.touchTime)&&(this.touching=!1,this.touchTime=0,(e=this.node.convertToWorldSpaceAR(cc.v2(0,0))).y+=this.node.height/2,this.host.skillTipsObj.showNode(this.tempSkillData,e,i.constant.COMMON_TIPS_SKILL)),this.canNotMove&&(this.canNotMove=!1)}}),cc._RF.pop()},{}],GamePausePage:[function(e,t){"use strict";cc._RF.push(t,"93a90+QfyRHEJild/MzIUnX","GamePausePage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{itemRenderPrefab:{default:null,type:cc.Prefab},skillTipsItemRenderPrefab:{default:null,type:cc.Prefab}},onLoadPage:function(){this.itemList=[],this.contentLayout=cc.find("tips/contentLayout",this.node),this.soundOffNode=cc.find("setLayout/soundButton/background/off",this.node),this.musicOffNode=cc.find("setLayout/musicButton/background/off",this.node),this.shakeOffNode=cc.find("setLayout/shakeButton/background/off",this.node);var e=cc.instantiate(this.skillTipsItemRenderPrefab);e.active=!1,this.node.addChild(e),this.skillTipsObj=e.getComponent("CommonSkillTipsItemRender"),this.skillTipsObj.host=this,i.gameScene.isIphoneX()&&i.Utils.addNodeTopSpace(this.node)},showPageBegan:function(){var e;this.skillTipsObj.node.active=!1,this.canClick=!0,this.sortSkillList(),this.skillList.length>this.itemList.length&&(e=this.skillList.length-this.itemList.length,this.createItemRender(e)),this.updateItemRender(),this.updateSoundOffNode(),this.updateMusicOffNode(),this.updateShakeOffNode(),i.BI.onEvent(i.biConstant.EVENT_TYPE_BATTLE,i.biConstant.EVENT_ID_BATTLE_PAUSE,i.player.instanceModule.getTempInstanceId(i.battleScene.curChapter,i.battleScene.curInstance))},showPageEnded:function(){i.ttAdManager.showBannerAd(cc.find("adNode",this.node),this.getPageType())},closePageBegan:function(){i.ttAdManager.hideBannerAd()},sortSkillList:function(){var e,t=[];for(e in i.battleScene.instanceSkillMap){var a=i.battleScene.instanceSkillMap[e];t.push([a.index,e])}t.sort(function(e,t){return e[0]-t[0]}),this.skillList=[];for(var n=0;n<t.length;n++)this.skillList.push(t[n][1])},updateItemRender:function(){for(var e=0;e<this.itemList.length;e++){var t=this.itemList[e];this.skillList.length-1>=e?(t.node.active=!0,t.initData(this.skillList[e])):t.node.active=!1}},createItemRender:function(e){for(var t=0;t<e;t++){var a=cc.instantiate(this.itemRenderPrefab);this.contentLayout.addChild(a),((a=a.getComponent("GamePauseItemRender")).host=this).itemList.push(a)}i.Logger.debug("create pauseItemRender - totalNum: ",this.itemList.length)},updateSoundOffNode:function(){this.soundOffNode.active=!i.player.settingModule.getSoundIsOpen()},updateMusicOffNode:function(){this.musicOffNode.active=!i.player.settingModule.getMusicIsOpen()},updateShakeOffNode:function(){this.shakeOffNode.active=!i.player.settingModule.getShakeIsOpen()},onClickSound:function(){this.skillTipsObj.hideNode(),i.player.settingModule.setSoundIsOpen(),this.updateSoundOffNode(),i.soundsUtil.playSoundEffect("common_button_click")},onClickMusic:function(){this.skillTipsObj.hideNode(),i.player.settingModule.setMusicIsOpen(),this.updateMusicOffNode(),i.soundsUtil.playSoundEffect("common_button_click")},onClickShake:function(){i.soundsUtil.playSoundEffect("common_button_click"),this.skillTipsObj.hideNode(),i.player.settingModule.setShakeIsOpen(),this.updateShakeOffNode()},onClickContinue:function(){this.skillTipsObj.hideNode(),this.canClick&&(i.soundsUtil.playSoundEffect("common_button_click"),this.canClick=!1,this.closePage())},onClickBack:function(){this.skillTipsObj.hideNode(),this.canClick&&(i.soundsUtil.playSoundEffect("common_button_click"),this.canClick=!1,this.closePage(),i.player.gmModule.isQuitWin()?i.battleScene.gmWin():i.battleScene.showResultPage(!1,!0))},onClickHideTips:function(){this.showTipsing?this.showTipsing=!1:this.skillTipsObj.hideNode()},onClickRestart:function(){this.skillTipsObj.hideNode(),this.canClick&&(i.gameScene.cleanCacheShowPage(),i.soundsUtil.playSoundEffect("common_button_click"),this.canClick=!1,this.closePage(),i.gameScene.gotoBattleScene(i.battleScene.curChapter,i.battleScene.curInstance))}}),cc._RF.pop()},{}],GameResultPage:[function(e,t){"use strict";cc._RF.push(t,"f133aXAD8pLT5eBy4h/U2vm","GameResultPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{commonItemRenderPrefab:{default:null,type:cc.Prefab},commonTipsPrefab:{default:null,type:cc.Prefab},promoteItemRenderPrefab:{default:null,type:cc.Prefab},flyItemRenderPrefab:{default:null,type:cc.Prefab},vipAtlas:{default:null,type:cc.SpriteAtlas}},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.SHOW_AD_OVER_GAME_RESULT_SUCCESS,function(){return e.showAdOver()}),this.registerListener(i.GameEventType.SHOW_AD_OVER_GAME_RESULT_FAIL,function(){return e.showAdOver()})},onLoadPage:function(){this.winNode=cc.find("winNode",this.node),this.loseNode=cc.find("loseNode",this.node),this.rewardNode=cc.find("rewardNode",this.node),this.tipsNode=cc.find("tipsNode",this.node),this.starNodeList=[],this.starNodeList.push(cc.find("star2/icon1",this.winNode)),this.starNodeList.push(cc.find("star2/icon2",this.winNode)),this.starNodeList.push(cc.find("star2/icon3",this.winNode)),this.winRewardNode=cc.find("rewardNode",this.node),this.rewardLayout=cc.find("rewardNode/rewardLayout",this.node),this.fisrtRewardLayout=cc.find("firstLineLayout",this.rewardLayout),this.secondRewardLayout=cc.find("secondLineLayout",this.rewardLayout),this.loseRewardNode=cc.find("rewardNodeLose",this.node),this.loseRewardLayout=cc.find("rewardNodeLose/rewardLayout",this.node),this.loseFisrtRewardLayout=cc.find("firstLineLayout",this.loseRewardLayout),this.rewardChildrenList=[],this.loseRewardChildrenList=[],this.adButtonNode=cc.find("adButton",this.node),this.adButtonRatioLabel=cc.find("background/layout/label",this.adButtonNode).getComponent(cc.Label),this.backLabelNode=cc.find("label",this.node),this.nodeAnimation=this.node.getComponent(cc.Animation),this.promoteNode=cc.find("promoteNode",this.loseNode),this.promoteLayout=cc.find("promoteNode/promoteLayout",this.loseNode),this.vipLayoutNode=cc.find("vipLayout",this.node),this.vipIconSprite=cc.find("icon",this.vipLayoutNode).getComponent(cc.Sprite),this.vipTimesLabel=cc.find("label2",this.vipLayoutNode).getComponent(cc.Label),this.origanPosY=this.rewardNode.y,this.piggyBankNode=cc.find("piggyBank",this.node),this.piggyBankIconNode=cc.find("piggyBank/pig",this.node),this.curPiggyBankMoneyLabel=cc.find("piggyBank/word/layout/label",this.node).getComponent(cc.Label),this.flyNodeList=[],this.gameClubNode=cc.find("gameClubNode",this.node),this.gameClubTips=cc.find("gameClubTips",this.node),this.gameClubTipsLabel=cc.find("gameClubTips/bgLayout/label",this.node).getComponent(cc.Label)},onStar1:function(){this.starNodeList[0].active&&i.soundsUtil.playSoundEffect("tower_settlement_stars")},onStar2:function(){this.starNodeList[1].active&&i.soundsUtil.playSoundEffect("tower_settlement_stars")},onStar3:function(){this.starNodeList[2].active&&i.soundsUtil.playSoundEffect("tower_settlement_stars")},showPageBegan:function(){var e=this;this.battleEndTime=(new Date).getTime();var t=this.battleEndTime-i.battleScene.battleStartTime;console.log("battleFrame = "+i.battleScene.battleFrame+" battleUseTime = "+t/1e3+" FPS = "+i.battleScene.battleFrame/(t/1e3)),i.battleScene.revertBattleSpeedPercent(),this.notShowDone=!0,this.itemTipsNode&&(this.itemTipsNode.active=!1),this.hideFlyPiggyBankNodeList(),i.gameScene.removeAllBubble(),this.endBattleTime=i.timeUtil.getTime(),i.gameScene.closeAllBattlePage(),i.battleScene.cleanTryHeros(),i.battleScene.dealTaskCacheData(),this.canClickBtn=!0,this.adButtonNode.active=!1,this.backLabelNode.active=!1,this.vipLayoutNode.active=!1,this._isWin=this.data.isWin,this._star=this.data.star,this._rewardList=this.data.rewards,this._isFirst=this.data.isFirst,this._isBack=this.data.isBack,this.winNode.active=this._isWin,this.loseNode.active=!this._isWin,this.tipsNode.active=!1,this._isFirst&&(this._isWin?i.player.instanceModule.resetNewInstanceLoseCount():i.player.instanceModule.addNewInstanceLoseCount()),t="GameResultPage_lose";var a="GameResultPage_lose_stand";this._isWin?(this.winRewardNode.active=!0,this.loseRewardNode.active=!1,this.hideStarNode(),this.showStarNode(),t="GameResultPage_win",a="GameResultPage_win_stand",i.soundsUtil.playSoundEffect("game_win"),o=this.starNodeList[1].convertToWorldSpaceAR(cc.v2(0,0)),(o=this.node.convertToNodeSpaceAR(o)).y-=this.starNodeList[1].height/2+100,this.rewardNode.y=o.y):(i.soundsUtil.playSoundEffect("game_lose"),this.winRewardNode.active=!1,this.loseRewardNode.active=!0,this.rewardNode.y=this.origanPosY),this.nodeAnimation.stop(),this.nodeAnimation.setCurrentTime(0),this.nodeAnimation.play(t),this.nodeAnimation.on("finished",function(){e.nodeAnimation.play(a),e._isWin?(e.adButtonNode.active=!0,e.backLabelNode.active=!0,e.updateVipNode(),e.notShowDone=!1):cc.tween(e.promoteNode).to(.5,{opacity:255*e.showLoseTitle},{easing:function(e){return e*e}}).call(function(){e.adButtonNode.active=!0,e.backLabelNode.active=!0,e.updateVipNode(),e.notShowDone=!1}).start(),i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_INSTANCE_1_i_2)&&(e.adButtonNode.active=!1,e.scheduleOnce(function(){i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_1_i_2,this.backLabelNode)},.1))},this);var n,o=i.player.vipModule.getCurVipCfg();this.resultAdRate=o.gameResultNum[1],i.lang.updateLabelString(this.adButtonRatioLabel,[this.resultAdRate]),this.updateRewardNode(),this.updateLoseItem(),Math.floor((this.endBattleTime-i.battleScene.enterBattleTime)/1e3),t=i.player.instanceModule.getTempInstanceId(i.battleScene.curChapter,i.battleScene.curInstance),this._isWin?(o=i.player.commonModule.addTodayWinCount(),i.BI.onEvent(i.biConstant.EVENT_TYPE_BATTLE,i.biConstant.EVENT_ID_BATTLE_SUCCESS,t),i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_RESULT_SUCCESS_PAGE,o),i.player.taskModule.onNewYearTaskEvent(i.constant.NEW_YEAR_TASK_TYPE_INSTANCE_WIN,1),i.player.taskModule.onTaskEvent(i.constant.TASK_TYPE_BATTLE_WIN,1),i.tdManager.onMissionCompleted(i.battleScene.instanceData.id)):(n=i.player.commonModule.addTodayLoseCount(),i.BI.onEvent(i.biConstant.EVENT_TYPE_BATTLE,i.biConstant.EVENT_ID_BATTLE_FAIL,t),i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_RESULT_FAIL_PAGE,n),i.tdManager.onMissionFailed(i.battleScene.instanceData.id),t=i.battleScene.curWaveIndex,n=i.battleScene.waveDataList.length,Math.floor(t/n*100)),i.battleScene.sendBattleDoneInfo(this._isWin,this._star),i.player.taskModule.onTaskEvent(i.constant.TASK_TYPE_HERO_BATTLE,1,i.player.heroModule.getBattlePioneerHero()),i.player.taskModule.onTaskEvent(i.constant.TASK_TYPE_HERO_BATTLE,1,i.player.heroModule.getBattleAdPioneerHero()),i.player.commonModule.addPioneerHeroBattleCount(i.player.heroModule.getBattlePioneerHero()),i.player.commonModule.addPioneerHeroBattleCount(i.player.heroModule.getBattleAdPioneerHero()),1===i.battleScene.curChapter&&1===i.battleScene.curInstance||!i.player.gmModule.isQuitWin()||0<(n=i.player.guideModule.getOtherGuideType())&&(i.guideManager.stopGuide(!0),i.guideManager.setOtherGuideFinished(n),i.guideManager.setOtherGuideRecord(n)),this._isWin||(this._isFirst=!1),this.addReward(),this.updateRewardNode(),this.updateLoseItem()},showPageEnded:function(){i.player.taskModule.dealCacheBattleMap(),1===i.battleScene.curChapter&&i.battleScene.curInstance<3||i.ttAdManager.showBannerAd(cc.find("adNode",this.node),this.getPageType()),this.scheduleOnce(function(){i.nativeManager.showGameClubButton(i.constant.GAME_CLUB_TYPE_RESULT)},.1),this.gameClubTipsLabel.string=this._isWin?i.lang.getGameText(i.GameTextCode.WIN_SHARE):i.lang.getGameText(i.GameTextCode.LOSE_LEARN),this.gameClubTips.opacity=1;var e=cc.delayTime(.5),t=cc.fadeIn(.3),a=cc.delayTime(2),n=cc.fadeOut(.3);n=cc.sequence(e,t,a,n),this.gameClubTips.stopAllActions(),this.gameClubTips.runAction(n),n=i.nativeManager.isCanShowGameClub(),this.gameClubTips.active=n},updateVipNode:function(){var e=i.player.vipModule.getNextVipChangeCfg(i.constant.VIP_PRIVILEGE_TYPE_BATTLE_RESULT);e&&i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_VIP)?(this.vipLayoutNode.active=!0,this.vipIconSprite.spriteFrame=this.vipAtlas.getSpriteFrame(e.vipIconSmall),i.lang.updateLabelString(this.vipTimesLabel,[e.gameResultNum[1]])):this.vipLayoutNode.active=!1,i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_INSTANCE_1_i_2)&&(this.vipLayoutNode.active=!1)},showTips:function(e,t,i){this.notShowDone||(this.itemTipsNode||(this.itemTipsNode=cc.instantiate(this.commonTipsPrefab),this.itemTipsObj=this.itemTipsNode.getComponent("CommonSkillTipsItemRender"),this.node.addChild(this.itemTipsNode)),this.tipsNode.active=!0,this.showTipsId=e,this.itemTipsObj.showNode(e,t,i))},hideTips:function(){this.tipsNode.active=!1,this.showTipsId=null,this.itemTipsObj&&this.itemTipsObj.hideNode()},checkPiggyBankEffect:function(){var e=i.player.piggyBankModule.isPiggyBankActive(),t=i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_PIGGY_BANK),a=i.player.piggyBankModule.getPiggyBankMoney(),n=a>=i.templateManager.getGameParamValue("potMaxIngot");n=this._isWin&&this._isFirst&&e&&t&&!n,this.piggyBankNode.active=!1,this.curPiggyBankMoney=a,n&&i.player.playerModule.dropCoin(i.constant.COIN_TYPE_PIGGY_BANK_GOLD,i.templateManager.getGameParamValue("potPerIngot"))},hideFlyPiggyBankNodeList:function(){for(var e=0;e<this.flyNodeList.length;e++)this.flyNodeList[e].active=!1;this.flyWaitTime=-1},flyPiggyBankEffect:function(){var e=this;if(this.flyNodeList.length<=0)for(var t=0;t<10;t++){var a=cc.instantiate(this.flyItemRenderPrefab);this.node.addChild(a,999),this.flyNodeList.push(a)}i.soundsUtil.playSoundEffect("diamond_start");for(var n=0;n<this.flyNodeList.length;n++)!function(t){var a=t,n=e.flyNodeList[t];n.active=!0,cc.find("diamond",n).active=!0;var o=e.piggyBankIconNode,s=n.parent,r=o.convertToWorldSpaceAR(cc.v2(0,0)),c=s.convertToNodeSpaceAR(r),l=cc.v2(0,0),d=i.Utils.getRandomInt(l.x-100,l.x+100),h=i.Utils.getRandomInt(l.y-100,l.y+100);t=cc.v2(d,-50+h),n.setPosition(t),n.opacity=0,s=cc.delayTime(2/30*a),r=cc.fadeIn(.2),l=cc.moveBy(.2,cc.v2(0,-30)),d=cc.delayTime(.1),h=i.Utils.getRotation(t,c),a=Math.abs(c.x-t.x),t=Math.abs(c.y-t.y),t=Math.sqrt(a*a+t*t),h=[i.Utils.getOffsetByRotationAndDistance(t,h-10),i.Utils.getOffsetByRotationAndDistance(t,h+10),c],c=cc.bezierTo(.8,h);var u=(cc.fadeOut(.2),e);e.isPlaySound=!0;var p=i.templateManager.getGameParamValue("potPerIngot")/10;h=cc.callFunc(function(){u.isPlaySound&&(u.isPlaySound=!1,i.soundsUtil.playSoundEffect("diamond_end")),this.active=!1,u.curPiggyBankMoney+=p;var e=i.templateManager.getGameParamValue("potMaxIngot");u.curPiggyBankMoney>e&&(u.curPiggyBankMoney=e),u.curPiggyBankMoneyLabel.string=u.curPiggyBankMoney,e=cc.sequence(cc.scaleTo(1/30,1.1*.22),cc.scaleTo(1/30,.22)),o.runAction(e)},n),h=cc.sequence(s,r,l,d,c,h),n.runAction(h)}(n)},addReward:function(){this.checkPiggyBankEffect();var e=i.battleScene.getWaveRatio();this._isWin&&(e=1),e<(a=i.templateManager.getGameParamValue("instanceRewardMinNum")/1e4)&&(e=a);var t=i.battleScene.getStartBuffs(),a=parseInt(i.battleScene.instanceData.exp*e);if(e=parseInt(i.battleScene.instanceData.gold*e),this._isWin&&this._isFirst){if(this._rewardList.push({itemId:i.constant.COIN_TYPE_EXP,number:i.battleScene.instanceData.playerExp,isFirst:this._isFirst}),this._rewardList.push({itemId:i.constant.COIN_TYPE_GOLD_BULLION,number:i.battleScene.instanceData.firstIngot,isFirst:this._isFirst}),i.battleScene.instanceData.firstPiece&&this._rewardList.push({itemId:i.battleScene.instanceData.firstPiece[0],number:i.battleScene.instanceData.firstPiece[1],isFirst:this._isFirst}),i.battleScene.instanceData.firstSkillPiece)for(var n=i.battleScene.instanceData.firstSkillPiece,o=0;o<n.length;o++)this._rewardList.push({itemId:n[o][0],number:n[o][1],isFirst:this._isFirst});a=i.battleScene.instanceData.firstExp,e=i.battleScene.instanceData.firstGold}0<a&&(t.hasOwnProperty(i.constant.START_BUFF_EXP)&&(a*=1+t[i.constant.START_BUFF_EXP]/1e4,a=parseInt(a)),this._rewardList.push({itemId:i.constant.COIN_TYPE_HERO_EXP,number:a,isFirst:this._isFirst})),0<e&&(t.hasOwnProperty(i.constant.START_BUFF_GOLD)&&(e*=1+t[i.constant.START_BUFF_GOLD]/1e4,e=parseInt(e)),this._rewardList.push({itemId:i.constant.COIN_TYPE_SILVER,number:e,isFirst:this._isFirst})),i.player.instanceModule.addRewardCache(this._rewardList)},showStarNode:function(){for(var e=0;e<this._star;e++)this.starNodeList[e].active=!0},hideStarNode:function(){for(var e=0;e<this.starNodeList.length;e++)this.starNodeList[e].active=!1},updateLoseItem:function(){if(this.promoteNode.active=!1,!this._isWin){this.promoteNode.active=!0,this.promoteNode.opacity=1;for(var e,t,a=0;a<i.JsonData.FailureAdvice.length;a++)this.loseItemObjList||(this.loseItemObjList=[]),this.loseItemObjList[a]||((t=(e=cc.instantiate(this.promoteItemRenderPrefab)).getComponent("PromoteItemRender")).host=this,e.active=!1,this.promoteLayout.addChild(e),this.loseItemObjList.push(t)),this.loseItemObjList[a].initData(a+1);for(var n=this.showLoseTitle=0;n<this.loseItemObjList.length;n++)if(this.loseItemObjList[n].node.active){this.showLoseTitle=1;break}}},updateRewardNode:function(){if(this._isWin){this.rewardChildrenList.length<this._rewardList.length&&(i=this._rewardList.length-this.rewardChildrenList.length,this.buildRewardItem(i));for(var e=0;e<this._rewardList.length;e++){var t=this.rewardChildrenList[e];t.initData(this._rewardList[e].itemId,this._rewardList[e].number,this._rewardList[e].isFirst),t.node.scale=.9,t.node.active=!0}}else{var i;this.loseRewardChildrenList.length<this._rewardList.length&&(i=this._rewardList.length-this.loseRewardChildrenList.length,this.buildRewardItem(i));for(var a=0;a<this._rewardList.length;a++){var n=this.loseRewardChildrenList[a];n.initData(this._rewardList[a].itemId,this._rewardList[a].number,this._rewardList[a].isFirst),n.node.scale=.9,n.node.active=!0}}},buildRewardItem:function(e){for(var t=0;t<e;t++){var i=cc.instantiate(this.commonItemRenderPrefab);(this._isWin?this.rewardChildrenList.length<5?this.fisrtRewardLayout:this.secondRewardLayout:this.loseFisrtRewardLayout).addChild(i),i.active=!1,(((i=i.getComponent("CommonItemRender")).host=this)._isWin?this.rewardChildrenList:this.loseRewardChildrenList).push(i)}},hideAllRewardChildren:function(){for(var e=0;e<this.rewardChildrenList.length;e++)this.rewardChildrenList[e].node.active=!1;for(var t=0;t<this.loseRewardChildrenList.length;t++)this.loseRewardChildrenList[t].node.active=!1},onClickBack:function(e){if(this.canClickBtn){this.hideTips(),i.soundsUtil.playSoundEffect("common_button_click"),this.canClickBtn=!1,this.closePage(),this.hideAllRewardChildren();var t=null;switch(e){case i.constant.LOSE_JUMP_HERO_UP:case i.constant.LOSE_JUMP_HERO_CHANGE:t=i.constant.MAIN_PAGE_TAG_HERO;break;case i.constant.LOSE_JUMP_TOWER_UP:case i.constant.LOSE_JUMP_TOWER_CHANGE:t=i.constant.MAIN_PAGE_TAG_TOWER;break;case i.constant.LOSE_JUMP_SKILL:t=i.constant.MAIN_PAGE_TAG_SKILL}i.gameScene.gotoMainScene(!1,t)}},onClickAd:function(){this.canClickBtn&&(this.hideTips(),i.soundsUtil.playSoundEffect("common_button_click"),this._isWin?i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,i.GameEventType.SHOW_AD_OVER_GAME_RESULT_SUCCESS):i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,i.GameEventType.SHOW_AD_OVER_GAME_RESULT_FAIL))},showAdOver:function(){if(this.node.active){for(var e=[],t=this.resultAdRate-1,a=0;a<this._rewardList.length;a++){var n,o=this._rewardList[a];o.itemId!=i.constant.COIN_TYPE_HERO_EXP&&o.itemId!=i.constant.COIN_TYPE_SILVER||(n=o.number*t,e.push({itemId:o.itemId,number:n,isFirst:o.isFirst}))}i.player.instanceModule.addRewardCache(e),this.closePage(),this.hideAllRewardChildren(),i.gameScene.gotoMainScene(),i.player.taskModule.onTaskEvent(i.constant.TASK_TYPE_RESULT_AD_DOUBLE,1)}},closePageBegan:function(){i.battleScene.showOverBoxPage=!1,i.battleScene.gameBattleUIObj.setBoxNodeActive(!0),this.itemTipsNode&&(this.itemTipsNode.active=!1),i.ttAdManager.hideBannerAd(),i.nativeManager.hideGameClubButton(i.constant.GAME_CLUB_TYPE_RESULT)},update:function(e){0<this.flyWaitTime&&(this.flyWaitTime-=e,this.flyWaitTime<=0&&this.flyPiggyBankEffect())}}),cc._RF.pop()},{}],GameRevivalPage:[function(e,t){"use strict";cc._RF.push(t,"18017mSAyxK47VkYxHRvwxj","GameRevivalPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.SHOW_AD_OVER_AD_REVIVAL,function(){return e.onShowAdOver()}),this.registerListener(i.GameEventType.STOP_REVIVAL_TIME,function(){e.isPause=!0})},onLoadPage:function(){this.goldButtonNode=cc.find("buttonLayout/goldButton",this.node),this.coinNumberLabel=cc.find("buttonLayout/goldButton/background/layout/number",this.node).getComponent(cc.Label),this.timeNumberLabel=cc.find("countTime/title",this.node).getComponent(cc.Label),this.noNode=cc.find("no",this.node)},showPageBegan:function(){this.isPause=!1,this.updateTime=0,this.noTime=0,this.noNode.active=!1,this.goldButtonNode.active=0<i.player.commonModule.getTodayLastRevivalTimes(),this.revivalTime=i.templateManager.getGameParamValue("resurgenceCloseTimes"),i.lang.updateLabelString(this.coinNumberLabel,[i.templateManager.getGameParamValue("resurgenceNeedDiamond")]),this.updateRevivalTime()},updateRevivalTime:function(){this.timeNumberLabel.string=this.revivalTime},onClickGold:function(){var e=i.templateManager.getGameParamValue("resurgenceNeedDiamond");i.player.playerModule.isGoldBullionEnough(e)?i.player.playerModule.costGoldBullionNum(e,i.constant.ITEM_CONSUME_SOURCE_REVIVE)&&(i.player.commonModule.addTodayDiaRevivalTimes(),i.battleScene.addLastHp(i.templateManager.getGameParamValue("resurgenceHpPoint")),i.BI.onEvent(i.biConstant.EVENT_TYPE_DIAMOND_CONSUME,i.biConstant.EVENT_ID_DIAMOND_REVIVAL,e),this.closePage()):(e=i.lang.getGameText(i.GameTextCode.ENOUGH_DIAMONDS),i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,e))},onClickAd:function(){i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,i.GameEventType.SHOW_AD_OVER_AD_REVIVAL)},onShowAdOver:function(){i.battleScene.addLastHp(i.templateManager.getGameParamValue("resurgenceHpPoint")),this.closePage()},onClickClose:function(){this.closePage(),i.battleScene.showResultPage(!0)},closePageEnded:function(){i.battleScene.addRevivalTimes()},showPageEnded:function(){i.ttAdManager.showBannerAd(cc.find("adNode",this.node),this.getPageType())},closePageBegan:function(){i.ttAdManager.hideBannerAd()},update:function(e){this.isPause||(this.updateTime+=e,this.updateTime<1||(this.updateTime=0,--this.revivalTime,this.noTime+=1,this.revivalTime<0?(this.closePage(),i.battleScene.showResultPage(!0)):this.updateRevivalTime(),2<=this.noTime&&(this.noNode.active=!0)))}}),cc._RF.pop()},{}],GameScene:[function(e,t){"use strict";cc._RF.push(t,"28259dlMBJL/51HeQu2uMlb","GameScene");var i=e("Aft");cc.Class({extends:i.PageManager,properties:{spineGrayMaterial:cc.Material,mainPagePrefab:cc.Prefab,topItemRenderPrefab:cc.Prefab,commonItemPrefab:cc.Prefab,commonTipPrefab:cc.Prefab,mainChildPrefab:cc.Prefab,guideLimitPrefab:cc.Prefab,guideDialogPrefab:cc.Prefab,guideHandPrefab:cc.Prefab,guideHandAndDialogPrefab:cc.Prefab,taskTipPrefab:cc.Prefab,newYearTaskTipPrefab:cc.Prefab,broadcastItemPrefab:cc.Prefab,guidePopUpPrefab_1:cc.Prefab,guidePopUpPrefab_2:cc.Prefab,guidePopUpPrefab_3:cc.Prefab,guidePopUpPrefab_4:cc.Prefab,guidePopUpPrefab_5:cc.Prefab,guideBubblePrefab:cc.Prefab},onLoadManager:function(){console.log("============= onLoadManager"),this.loadCycleNode=cc.find("loadingCycleNode",this.node),this.loadCycleSprite=cc.find("cycle",this.loadCycleNode),console.log("loadCycleSprite: "),console.log(this.loadCycleNode),this.loadCycleNode2=cc.find("loadingCycleNode2",this.node),this.loadCycleSprite2=cc.find("cycle",this.loadCycleNode2),this.refuseMusicTime=0,i.nativeManager.isPad()&&(this.node.getComponent(cc.Canvas).fitHeight=!0),this.systemSubscribeTime=i.timeUtil.getSecond()-9999999,i.nativeManager.isHaveUserPermission()&&i.nativeManager.checkUserPermission(i.constant.WX_PERMISSION_TYPE_USER),cc.macro.ENABLE_CULLING=!1,(i.gameScene=this).initPlayer(),i.ttAdManager.registerWxListener(),this.isFirstStart=i.nativeManager.isFirstStartApp()&&i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_INSTANCE_1),this.isFirstStart&&i.nativeManager.firstStartFinish(),this.gameState=-1,this.loadingIndex=-1,this.loadCycleNode.zIndex=i.constant.PAGE_LAYER_LOADING_CYCLE,this.loadCycleNode2.zIndex=i.constant.PAGE_LAYER_LOADING_CYCLE,this.initSounds(),this.checkOfflineTime(),this.isCheckServerTime=!1,this.createMainTopItemRender(),this.createMainPage(),this.initGuideDialog(),this.initGuideHand(),this.initGuideHandAndDialog(),this.initPush(),this.getServerParamList(),this.adRewardCache=[],this.shareRewardCache=[],i.BI.onLogin(),i.player.skillModule.checkSkillState(!0),i.Utils.setSpineGrayMaterial(this.spineGrayMaterial),this.pausePageList=[i.pageConstant.PAGE_TYPE_PAUSE,i.pageConstant.PAGE_TYPE_REVIVAL,i.pageConstant.PAGE_TYPE_RESULT,i.pageConstant.PAGE_TYPE_BATTLE_SKILL,i.pageConstant.PAGE_TYPE_BATTLE_NEW_ENEMY,i.pageConstant.PAGE_TYPE_BATTLE_START_BUFF,i.pageConstant.PAGE_TYPE_BATTLE_OPEN_BOX,i.pageConstant.PAGE_TYPE_SOLDIER_TRIAL,i.pageConstant.PAGE_TYPE_SPEED_TRY,i.pageConstant.PAGE_TYPE_BATTLE_SKILL_AD_UP,i.pageConstant.PAGE_TYPE_HERO_TOWER_UNLOCK,i.pageConstant.PAGE_TYPE_SECOND_HERO_CONFIRM,i.pageConstant.PAGE_TYPE_SECOND_HERO_CHOOSE,i.pageConstant.PAGE_TYPE_SPEED_AD_TRY,i.pageConstant.PAGE_TYPE_CAPTURE,i.pageConstant.PAGE_TYPE_YEAR_MONSTER_RESULT],this.initNeedTopBarMap(),this.gameNode=cc.find("Canvas/gameNode"),this.battleNode=cc.find("Canvas/gameNode/battleNode"),this.mainNodeParent=cc.find("Canvas/mainNode"),this.loadingNode=cc.find("Canvas/loadingNode"),this.labelPercent=cc.find("Canvas/loadingNode/percentLabel").getComponent(cc.Label),this.loadTipLabel=cc.find("Canvas/loadingNode/tipLabel").getComponent(cc.Label),this.loadingNode.active=!1,this.loadingNode.zIndex=i.constant.PAGE_LAYER_LOADING_CYCLE,this.bgNode=cc.find("Canvas/mainTag"),this.switchChapterCloudNode=cc.find("chapter_switch_cloud",this.node),this.battleScene=this.gameNode.getComponent("BattleScene"),this.mainScene=cc.find("Canvas/mainNode").getComponent("MainScene"),i.battleNode=this.battleNode,i.mainScene=this.mainScene,i.battleScene=this.battleScene,i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_INSTANCE_1)?(this.gotoBattleScene(1,1),i.BI.onEvent(i.biConstant.EVENT_TYPE_CLICK,i.biConstant.EVENT_ID_CLICK_GUIDE_ONE,1)):this.gotoMainScene(!0),this.curTime=0,this.curSaveDataTime=0,this.curWebEventTime=0,this.lastShowAdTime=0,this.isShareing=!1,this.lastShareTime=0,this.scheduleOnce(function(){var e,t,a,n,o,s;i.ttAdManager.loadAd(),i.config.needSDKUid&&wx&&wx.getOpenDataContext&&(e=i.player.instanceModule.getAllInstanceStarNum(),t=i.player.instanceModule.getMaxChapter(),a=i.player.instanceModule.getChapterMaxLevel(t),n=100*Math.floor(t)+Math.floor(a),s=1e8*(o=i.player.vipModule.getCurVipLevel())+1e4*e+n,0<e&&(console.log("start uploadInstance allStarNum = "+e+" bigLevel = "+t+" smallLevel = "+a+" instanceScore = "+n+" allScore = "+s+" vipLevel = "+o),wx.getOpenDataContext().postMessage({message:"uploadScore",score:s})))},.5),this.scheduleOnce(function(){i.ttAdManager.loadBannerAd()},1.5),this.scheduleOnce(function(){i.ttAdManager.loadGridAd()},2.5),i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_MAIN_PAGE),this.releaseLoadingIndex=3,this.checkMailCacheReward(),this.lastOnClickAdTime=0,i.player.broadcastModule.downloadBroadcastData(),this.maxBroadcastTime=i.templateManager.getGameParamValue("BroadcastInterval")/1e3,this.curBroadcastTime=this.maxBroadcastTime-1,this.curDownloadBroadcastTime=0,i.player.playerModule.isNewPlayer&&i.BI.onEvent(i.biConstant.EVENT_TYPE_NEW_PLAYER,i.biConstant.EVENT_ID_NEW_PLAYER_GAME_SCENE),this.isCheckPlayerBan=!1,this.isCheckPlayerBaning=!1,this.checkPlayerBanUpdateTime=58,this.checkPlayerBanState()},checkOfflineTime:function(e){var t;e?this.offlineTime=0:(t=(new Date).getTime(),e=i.player.playerModule.getLogoutTime(),this.offlineTime=t-e)},getOfflineTime:function(){return this.offlineTime},topBarMapValueFormat:function(e,t,i){return{showPower:i,showSilver:e,showGoldBullion:t}},initNeedTopBarMap:function(){this.openPageTopBarMap={},this.openPageTopBarMap[i.pageConstant.PAGE_TYPE_MAIN_TASK]=this.topBarMapValueFormat(!0,!0,!1),this.openPageTopBarMap[i.pageConstant.PAGE_TYPE_SIGN]=this.topBarMapValueFormat(!0,!0,!1),this.openPageTopBarMap[i.pageConstant.PAGE_TYPE_MAIN_HERO_DETAIL]=this.topBarMapValueFormat(!0,!0,!1),this.openPageTopBarMap[i.pageConstant.PAGE_TYPE_QUICKLY_BATTLE]=this.topBarMapValueFormat(!0,!0,!1)},checkBroadcastShow:function(){if(!i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_BROADCAST)||i.guideManager.isLimitClick())return!1;if(i.player.gmModule.isSkipBroadCase())return!1;var e=i.player.broadcastModule.getAllBroadcastList(),t=this.broadcastItem&&this.broadcastItem.active;if(this.mainNode.active&&!this.gameNode.active&&!t&&0<e.length){var a=e[0];if(i.Logger.debug("checkBroadcastShow curData = "+a),e.splice(0,1),t=a[0],!(e=i.templateManager.getBroadcastData(t)))return i.Logger.debug("error configData = null type = "+t),!1;var n=[];switch(t){case i.constant.BROADCAST_TYPE_VIP:n=[a[1],a[2]];break;case i.constant.BROADCAST_TYPE_GET_HERO:var o=a[1],s=a[2],r=i.templateManager.getHeroDataById(s);if(!r)return!1;n=[o,i.lang.getGameText(r.name)];break;case i.constant.BROADCAST_TYPE_HERO_UPGRADE:if(s=a[1],o=a[2],r=a[3],!(o=i.templateManager.getHeroDataById(o)))return!1;n=[s,i.lang.getGameText(o.name),r];break;case i.constant.BROADCAST_TYPE_HERO_STAR:var c=a[1],l=a[2],d=a[3];if(!(l=i.templateManager.getHeroDataById(l)))return!1;n=[c,i.lang.getGameText(l.name),d];break;case i.constant.BROADCAST_TYPE_HERO_QUALITY:if(c=a[1],l=a[2],d=a[3],!(l=i.templateManager.getHeroDataById(l)))return!1;if(l=i.lang.getGameText(l.name),!(d=i.templateManager.getHeroQualityDataById(d)))return!1;n=[c,l,i.lang.getGameText(d.qualityName)];break;case i.constant.BROADCAST_TYPE_TOWER_UPGRADE:var h=a[1],u=a[2],p=a[3];if(!(u=i.templateManager.getTowerTypeById(u)))return!1;n=[h,i.lang.getGameText(u.name),p];break;case i.constant.BROADCAST_TYPE_TOWER_QUALITY:h=a[1],u=a[2];var g=a[3];if(!(p=i.templateManager.getTowerTypeById(u)))return!1;if(p=i.lang.getGameText(p.name),!(g=i.templateManager.getTowerQualityDataByLevel(u,g)))return!1;n=[h,p,i.lang.getGameText(g.qualityName)];break;case i.constant.BROADCAST_TYPE_PASS_CHAPTER:g=a[1];var _=a[2];if(!(_=i.templateManager.getChapterDataById(_)))return!1;n=[g,i.lang.getGameText(_.name)];break;case i.constant.BROADCAST_TYPE_UNLOCK_RESTRAIN:_=a[1].toString();var m=a[2];if(!(m=i.templateManager.getHeroRestrainByGroupIdAndLevel(m,1)))return!1;n=[_,i.lang.getGameText(m.name)];break;case i.constant.BROADCAST_TYPE_UP_SKILL_STAR:m=a[1];var E=a[2],T=a[3];if(!(E=i.templateManager.getHeroSkillDataById(E)))return!1;n=[m,i.lang.getGameText(E.name),T];break;case i.constant.BROADCAST_TYPE_UNLOCK_SKILL:if(E=a[1],T=a[2],!(T=i.templateManager.getHeroSkillDataById(T)))return!1;n=[E,i.lang.getGameText(T.name)]}return e=i.lang.getFormatString(e.text,n),i.Logger.debug("checkBroadcastShow contentStr = "+e),i.gameScene.showBroadcast(e),!0}return!1},showBroadcast:function(e){var t;this.broadcastItem||(t=cc.v2(0,340),this.isIphoneX()&&(t=cc.v2(0,390)),this.broadcastItem=cc.instantiate(this.broadcastItemPrefab),this.broadcastItem.position=t,this.node.addChild(this.broadcastItem,i.constant.PAGE_LAYER_BROADCAST)),this.broadcastItem.active=!0,this.broadcastItem.getComponent("BroadcastItemRender").showContent(e),i.Logger.debug("broadcast run:",e)},createMainPage:function(){this.mainNode=cc.instantiate(this.mainPagePrefab),this.node.addChild(this.mainNode,i.constant.PAGE_LAYER_MAIN_PAGE),this.mainPage=this.mainNode.getComponent("MainPage")},createMainTopItemRender:function(){this.mainTopNode=cc.instantiate(this.topItemRenderPrefab),this.node.addChild(this.mainTopNode,i.constant.PAGE_LAYER_TOP_BAR),this.mainTopNodeObj=this.mainTopNode.getComponent("MainTopItemRender")},enterBattle:function(){cc.game.setFrameRate(i.constant.BATTLE_FRAME_RATE),i.BI.onEvent(i.biConstant.EVENT_TYPE_BATTLE,i.biConstant.EVENT_ID_BATTLE_ENTER,i.player.instanceModule.getTempInstanceId(this.chapterId,this.instanceId)),i.player.playerModule.resetLoginTime(),this.startBattleTime=(new Date).getTime(),i.soundsUtil.stopMusic(),this.battleScene.cleanBattleRes(),this.mainPage.cleanMainRes(),cc.sys.garbageCollect(),this.loadingIndex=0},gotoBattleScene:function(e,t){this.bgNode.active=!1,this.gameState=i.constant.GAME_STATE_BATTLE,this.closePage(i.pageConstant.PAGE_TYPE_MAIN_CHILD),this.chapterId=e,this.instanceId=t,this.showLoading(),i.soundsUtil.stopAllSoundEffects(),i.soundsUtil.stopMusic(),this.enterBattle()},enterMain:function(e){i.Logger.debug("enterMain"),cc.game.setFrameRate(60),i.player.instanceModule.checkRewardCache(e),i.player.commonModule.checkRewardCache(),this.mainPage.initData(this.gotoPage),this.gotoPage=null,(e=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_CHILD))&&e.updatePiggyBank(0,!0,!0),this.isCheckServerTime||this.checkSystemTime(),i.player.commonModule.isLowIosDevice()&&this.scheduleOnce(function(){cc.sys.garbageCollect()},1)},gotoMainScene:function(e,t){this.bgNode.active=!0,this.gotoPage=t,this.gameState=i.constant.GAME_STATE_MAIN,this.closeGameResult(),this.mainTopNodeObj&&(this.mainTopNodeObj.flyTimeCount=0),i.player.playerModule.resetLoginTime(),cc.director.getScheduler().setTimeScale(1),e||this.showLoading(),i.soundsUtil.stopAllSoundEffects(),i.soundsUtil.stopMusic(),this.battleScene.cleanBattleRes(),cc.sys.garbageCollect(),this.gameNode.active=!1,this.mainNode.active=!0,this.mainTopNode.active=!0,e?(this.mainPage.onLoadRes(e),i.soundsUtil.playMusic("bgm_main"),this.enterMain(e)):this.loadingIndex=0},checkSystemTime:function(){var e=this;this.timeErrorData||(this.timeErrorData=null,this.isCheckServerTime=!0,this.updateErrorTipTime=0,this.scheduleOnce(function(){e.checkServerTime(function(){},!0,function(t){e.timeErrorData=t})},3))},setLoadingPercent:function(e){i.Logger.debug("setLoadingPercent percent = "+e),this.labelPercent.string=e+"%"},setLoadingTip:function(){var e,t=i.lang.getGameText(i.GameTextCode.LOADING_DEFAULT_TIPS);1===this.chapterId&&1===this.instanceId||(e=i.templateManager.getBubbleListByType(i.constant.TIP_TYPE_COMMON))&&0<e.length&&(e=e[i.Utils.getRandomInt(0,e.length-1)],t=i.lang.getGameText(e.text)),this.loadTipLabel.string=t},showLoading:function(){this.startLoadingTime=(new Date).getTime(),i.battleScene.loadPercent=0,this.setLoadingPercent(0),this.setLoadingTip(),this.loadingNode.active=!0},hideLoading:function(){var e,t;this.loadingNode.active&&(i.Logger.debug("hideLoading"),1<=(t=((new Date).getTime()-this.startLoadingTime)/1e3)?(this.gameState==i.constant.GAME_STATE_BATTLE?i.battleScene.setGameState(i.constant.GAME_STATE_READY):this.gameState==i.constant.GAME_STATE_MAIN?this.enterMain():this.gameState!=i.constant.GAME_STATE_WORLD||(e=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_WORLD))&&e.initData(),this.scheduleOnce(function(){this.loadingNode.active=!1},.1)):(e=cc.delayTime(1-t),t=cc.callFunc(function(){var e;this.gameState==i.constant.GAME_STATE_BATTLE?i.battleScene.setGameState(i.constant.GAME_STATE_READY):this.gameState==i.constant.GAME_STATE_MAIN?this.enterMain():this.gameState!=i.constant.GAME_STATE_WORLD||(e=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_WORLD))&&e.initData(),this.scheduleOnce(function(){this.loadingNode.active=!1},.1)},this),t=cc.sequence(e,t),this.loadingNode.stopAllActions(),this.loadingNode.runAction(t)))},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.CHECK_GUIDE,function(t){return e.guideOver(t)}),this.registerListener(i.GameEventType.SHOW_AD,function(t){t instanceof Array?e.showAd(t[0],t[1]):e.showAd(t)}),this.registerListener(i.GameEventType.SHOW_AD_START,function(t){return e.showADStart(t)}),this.registerListener(i.GameEventType.SHOW_AD_ERROR,function(t){return e.showADError(t)}),this.registerListener(i.GameEventType.SHOW_AD_SKIP,function(t){return e.showADSkip(t)}),this.registerListener(i.GameEventType.SHOW_AD_CLICK_BAR,function(t){return e.showADClickBar(t)}),this.registerListener(i.GameEventType.SHOW_AD_SHOW_FINISH,function(t){return e.showADFinish(t)}),this.registerListener(i.GameEventType.SHOW_AD_REWARD,function(t){return e.showADReward(t)}),this.registerListener(i.GameEventType.SHOW_AD_CLOSE,function(t){return e.showADClose(t)}),this.registerListener(i.GameEventType.SHOW_SYSTEM_TIPS,function(t){return e.showTipsItemRender(t)}),this.registerListener(i.GameEventType.TASK_TOP_TIP,function(t){return e.showTaskTip(t)}),this.registerListener(i.GameEventType.NEW_YEAR_TASK_TOP_TIP,function(t){return e.showNewYearTaskTip(t)}),this.registerListener(i.GameEventType.GET_WX_USER_INFO_SUCCESS,function(){e.sendRankData(),e.changePlayerName()}),this.registerListener(i.GameEventType.GET_WX_USER_LOCATION_SUCCESS,function(t){return e.updatePlayerLocation(t)})},updatePlayerLocation:function(e){var t,a=this,n=i.nativeManager.getWxRealUserInfo();n&&(t=JSON.stringify({headUrl:n.headUrl,name:n.nickName}),this.showLoadingCycle(function(){var n=i.constant.rankBigType.AREA+e.cityCode+i.constant.rankType.STAR,o=i.constant.rankBigType.AREA+e.cityCode+i.constant.rankType.INSTANCE;i.player.serviceModule.putLeaderboard(n,i.player.instanceModule.getRankStarNum(),t),i.player.serviceModule.putLeaderboard(o,i.player.instanceModule.getRankPassInstanceNum(),t,function(){a.hideLoadingCycle()})}))},changePlayerName:function(){var e=i.player.playerModule.getNickName(),t=i.nativeManager.getWxRealUserInfo();t&&t.nickName!==e&&i.player.playerModule.setNickName(t.nickName)},sendRankData:function(){var e=this,t=i.nativeManager.getWxRealUserInfo();i.player.playerModule.setWxInfo(t.nickName,t.headUrl);var a=JSON.stringify({headUrl:t.headUrl,name:t.nickName});this.showLoadingCycle(function(){var t=i.constant.rankBigType.WORLD+i.constant.rankType.STAR,n=i.constant.rankBigType.WORLD+i.constant.rankType.INSTANCE;i.player.serviceModule.putLeaderboard(t,i.player.instanceModule.getRankStarNum(),a),i.player.serviceModule.putLeaderboard(n,i.player.instanceModule.getRankPassInstanceNum(),a,function(){e.hideLoadingCycle()})})},getCommonItemRender:function(e,t){var i=cc.instantiate(this.commonItemPrefab);return i.parent=t,i.getComponent("CommonItemRender").initData(e),i},initPlayer:function(){console.log("============="),console.log(i.player),i.player.init()},initSounds:function(){this.isFirstStart?(cc.log("sound first start !"),i.soundsUtil.loadSoundsByNameList(["metro_bgm","story_bgm","bgm_chapter01","tower_operation_common","tower_buliding_common","tower_build_soldiers_one","common_button_click","tower_arrow_attack_one","enemy_attacked","dead_enemy07","tower_meleehero_sword","tower_environment_bird","button_summon_click","button_summon_ok","attack_enemy07","game_win","common_panel_open","tower_settlement_stars","common_panel_close"],!0)):(i.gameScene.startSoundTime=(new Date).getTime(),i.soundsUtil.loadSounds()),this.resetSoundEnabled()},resetSoundEnabled:function(){var e=i.player.settingModule.getSoundIsOpen(),t=i.player.settingModule.getMusicIsOpen();i.soundsUtil.setEffectEnabled(e),i.soundsUtil.setMusicEnabled(t)},checkMailCacheReward:function(){var e=i.player.commonModule.getMailRewardCacheData();if(e&&0!=e.length){i.player.commonModule.cleanMailRewardCacheData();for(var t=0;t<e.length;t++){var a=e[t];i.player.itemModule.dropItem(a.key,a.value,!1,i.constant.COMMON_REWARD_PAGE_MAIL)}}},getServerParamList:function(){var e=this,t=[];t.push(i.constant.SERVER_PARAM_JOIN_QQ_GROUP),t.push(i.constant.SERVER_PARAM_SHOW_JOIN_QQ),t.push(i.constant.SERVER_PARAM_BROADCAST_INTERVAL),t.push(i.constant.SERVER_PARAM_ALLIANCE_OPEN),t.push(i.constant.SERVER_PARAM_UPDATE_VERSION),t.push(i.constant.SERVER_PARAM_WE_CHAT_SHARE_MINI_GAME),t.push(i.constant.SERVER_PARAM_WE_CHAT_SHARE_GROUP),t.push(i.constant.SERVER_PARAM_WE_CHAT_SHARE_SHOW),t.push(i.constant.SERVER_PARAM_NEW_YEAR_ACTIVITY_OPEN),t.push(i.constant.SERVER_PARAM_WE_CHAT_SHARE_FRIEND),t.push(i.constant.SERVER_PARAM_WE_CHAT_SHARE_POWER),t.push(i.constant.SERVER_PARAM_WE_CHAT_SHARE_VIP),t.push(i.constant.SERVER_PARAM_WE_CHAT_SHARE_RANK),t.push(i.constant.SERVER_PARAM_WE_CHAT_SHARE_TITLE),t.push(i.constant.SERVER_PARAM_WE_CHAT_SHARE_COUNT_LIMIT),t.push(i.constant.SERVER_PARAM_WE_CHAT_ONLY_SHOW_BANNER),i.player.serviceModule.getServerGameParamList(t,function(t){if(t)try{for(var a=0;a<t.length;a++){var n=t[a],o=n.key,s=n.value;e.resetServerParams(o,s)}}catch(t){}else i.player.allianceModule.setAllianceController(t,!0)})},resetServerParams:function(e,t){if(e===i.constant.SERVER_PARAM_JOIN_QQ_GROUP)t&&i.player.commonModule.setJoinQQGroupParams(t);else if(e===i.constant.SERVER_PARAM_SHOW_JOIN_QQ)t&&i.player.commonModule.setIsShowJoinQQ(t);else if(e===i.constant.SERVER_PARAM_BROADCAST_INTERVAL)t&&i.player.commonModule.setBroadcastIntervalBegin(t);else if(e===i.constant.SERVER_PARAM_ALLIANCE_OPEN)i.player.allianceModule.setAllianceController(t,!0);else if(e===i.constant.SERVER_PARAM_UPDATE_VERSION){if(t)try{for(var a=JSON.parse(t),n=0;n<a.length;n++){var o=a[n],s=o.pak,r=o.isMust,c=o.url;if(i.config.packageId==s){i.gameScene.showPage(i.pageConstant.PAGE_TYPE_VERSION_UPDATE,{isMust:r,url:c});break}}}catch(e){}}else if(e===i.constant.SERVER_PARAM_WE_CHAT_SHARE_MINI_GAME){if(t)try{0<JSON.parse(t).length&&(i.nativeManager.shareMiniProgramList=JSON.parse(t))}catch(e){}}else if(e===i.constant.SERVER_PARAM_WE_CHAT_SHARE_GROUP){if(t)try{0<JSON.parse(t).length&&(i.nativeManager.wechatShareAppGroup=JSON.parse(t))}catch(e){}}else if(e===i.constant.SERVER_PARAM_WE_CHAT_SHARE_SHOW){if(t)try{var l=t;"true"==l?i.nativeManager.showWxShare(!0):"false"==l&&i.nativeManager.hideWxShare()}catch(e){}}else e===i.constant.SERVER_PARAM_NEW_YEAR_ACTIVITY_OPEN?i.player.newYearModule.unlockActivity(t):e===i.constant.SERVER_PARAM_WE_CHAT_SHARE_FRIEND?t&&0<JSON.parse(t).length&&(i.nativeManager.shareDataList=JSON.parse(t),i.ttAdManager.randomShareData()):e===i.constant.SERVER_PARAM_WE_CHAT_SHARE_POWER?t&&0<JSON.parse(t).length&&(i.nativeManager.sharePowerDataList=JSON.parse(t)):e===i.constant.SERVER_PARAM_WE_CHAT_SHARE_VIP?t&&0<JSON.parse(t).length&&(i.nativeManager.shareVipDataList=JSON.parse(t)):e===i.constant.SERVER_PARAM_WE_CHAT_SHARE_RANK?t&&0<JSON.parse(t).length&&(i.nativeManager.shareRankDataList=JSON.parse(t)):e===i.constant.SERVER_PARAM_WE_CHAT_SHARE_TITLE?t&&(i.nativeManager.share_friend_title=t,i.Logger.debug("share_friend_title gValue = "+i.nativeManager.share_friend_title)):e===i.constant.SERVER_PARAM_WE_CHAT_SHARE_COUNT_LIMIT?t&&(i.Logger.debug("wechatShareCountLimit gValue = "+t),i.player.commonModule.setWechatShareCountLimit(t)):e===i.constant.SERVER_PARAM_WE_CHAT_ONLY_SHOW_BANNER&&t&&(i.Logger.debug("wechatOnlyShowBanner gValue = "+t),i.player.commonModule.setWeChatOnlyShowBanner(t))},initPush:function(){i.nativeManager.openNotification(),this.resetPush()},resetPush:function(){i.nativeManager.cancelLocalPush(),i.player.pushModule.checkTodayOfflinePushCount()},updatePushTime:function(e){var t=i.timeUtil.getTime()+1e3*e,a=i.templateManager.getGameParamValue("canPustTimeList"),n=i.timeUtil.getTodayHourTime(a[0]);return a=i.timeUtil.getTodayHourTime(a[1]),n<=t&&t<=a||(t<n?e=((t=n)-i.timeUtil.getTime())/1e3:a<t&&(e=((t=n+864e5)-i.timeUtil.getTime())/1e3)),e},isCanPush:function(e){var t=i.timeUtil.getTime()+1e3*e,a=i.templateManager.getGameParamValue("canPustTimeList");return e=i.timeUtil.getTodayHourTime(a[0]),a=i.timeUtil.getTodayHourTime(a[1]),e<=t&&t<=a},offlineSecondPush:function(){},topBoxPush:function(){},powerMaxPush:function(){var e,t,a,n=parseInt(i.player.playerModule.getPlayerPowerNum()),o=i.templateManager.getGameParamValue("powerMaxNumAutoRecovery");o<=n?i.config.openGM&&i.gameScene.isShowTestTips&&i.gameScene.showTipsItemRender("\u4f53\u529b\u5df2\u6ee1\u4e0d\u53d1\u9001"):(a=o-n,e=i.player.commonModule.getNextPowerTime(),t=i.timeUtil.getTime(),o=Math.max(0,(e-t)/1e3),n=0,n=1<a?(a-1)*i.templateManager.getGameParamValue("powerTimeAutoRecovery")+o:o,console.log("powerMaxPush delayTime = "+n),n=this.updatePushTime(n),console.log("updatePushTime delayTime = "+n),e=i.constant.WX_TEMPLATE_ID_POWER,t={thing1:{value:a+"\u4f53\u529b"},character_string2:{value:"50/50"}},i.config.openGM&&(n=15),o=i.player.inviteFriendModule.isSubscribePurview(i.constant.WX_SUBSCRIBE_TYPE_POWER),a=i.player.inviteFriendModule.isSubscribeSendTimeOk(i.constant.WX_SUBSCRIBE_TYPE_POWER),console.log("isHavePurview = "+o+" isTimeOk = "+a),o&&a?(i.nativeManager.addLocalPush(n,e,t),i.player.inviteFriendModule.setSubscribeTime(i.constant.WX_SUBSCRIBE_TYPE_POWER,n),i.player.inviteFriendModule.setSubscribeSendTime(i.constant.WX_SUBSCRIBE_TYPE_POWER,14400)):i.config.openGM&&i.gameScene.isShowTestTips&&i.gameScene.showTipsItemRender("\u4f53\u529b\u5931\u8d25 \u6743\u9650 = "+o+" \u65f6\u95f4"+a))},offlineMaxPush:function(){console.log("offlineMaxPush"),i.player.pushModule.setNextOfflinePushTime(o);var e=i.player.commonModule.getHangUpTime(),t=i.timeUtil.getSecond(),a=Math.max(0,t-e),n=i.templateManager.getGameParamValue("hangUpMaxTime"),o=n-a;n<=a&&(o=10),t=i.Utils.formatBigNumberForLabelRound(i.player.commonModule.getHangUpReceiveCoin(n)),e=i.Utils.formatBigNumberForLabelRound(i.player.commonModule.getHangUpReceiveExp(n)),console.log("offlineMaxPush delayTime = "+o),o=this.updatePushTime(o),console.log("updatePushTime delayTime = "+o),a=i.constant.WX_TEMPLATE_ID_OFFLINE,n={thing1:{value:"\u94dc\u94b1*"+t+",\u7ecf\u9a8c*"+e},thing2:{value:"\u8bf7\u5c3d\u5feb\u9886\u53d6\u6536\u76ca"}},i.config.openGM&&(o=15),t=i.player.inviteFriendModule.isSubscribePurview(i.constant.WX_SUBSCRIBE_TYPE_OFFLINE),e=i.player.inviteFriendModule.isSubscribeSendTimeOk(i.constant.WX_SUBSCRIBE_TYPE_OFFLINE),console.log("isHavePurview = "+t+" isTimeOk = "+e),t&&e?(i.nativeManager.addLocalPush(o,a,n),i.player.inviteFriendModule.setSubscribeTime(i.constant.WX_SUBSCRIBE_TYPE_OFFLINE,o),i.player.inviteFriendModule.setSubscribeSendTime(i.constant.WX_SUBSCRIBE_TYPE_OFFLINE,14400)):i.config.openGM&&i.gameScene.isShowTestTips&&i.gameScene.showTipsItemRender("\u79bb\u7ebf\u5931\u8d25 \u6743\u9650 = "+t+" \u65f6\u95f4"+e)},everyDayPush:function(){var e=i.timeUtil.getTime(),t=i.timeUtil.getTime(),a=i.templateManager.getGameParamValue("signInTipsTime");a=(i.timeUtil.getNextHourTime(t,a,0)-e)/1e3,t=i.constant.WX_TEMPLATE_ID_SIGN,i.config.openGM&&(a=15),e=i.player.inviteFriendModule.isSubscribePurview(i.constant.WX_SUBSCRIBE_TYPE_SIGN),console.log("isHavePurview = "+e),e?(i.nativeManager.addLocalPush(a,t,{thing2:{value:"\u7b7e\u5230\u5927\u793c"},thing3:{value:"\u7b7e\u5230\u754c\u9762\u9886\u53d6\u5956\u52b1"}}),i.player.inviteFriendModule.setSubscribeTime(i.constant.WX_SUBSCRIBE_TYPE_SIGN,a)):i.config.openGM&&i.gameScene.isShowTestTips&&i.gameScene.showTipsItemRender("\u7b7e\u5230\u5931\u8d25 \u6743\u9650 = "+e)},shopFreeCountPush:function(){},checkCustomerRewardShow:function(){var e=i.JsonData.FreePower[4];e={type:i.constant.COMMON_REWARD_PAGE_FREE_POWER,rewards:e.gift,index:1,notHaveClose:!0,textDesc:i.lang.getGameText(e.giftDesc),callBack:function(){i.player.commonModule.saveCustomerRewardOver(),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_CUSTOMER_REWARD)}},i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_INSTANCE_BOX_REWARD,e),i.player.commonModule.setCustomerClick(!1)},checkCustomerCanReceive:function(e){var t,a=this,n="wx7f37ab776fe71e6b",o=i.nativeManager._webDeviceId,s=i.player.commonModule.isCustomerRewardOver(),r=i.player.commonModule.isClickCustomer();this.isCustomerCanReceive=!1,console.log("getWxServicePushPower appId = "+n+" openId = "+o),i.player.serviceModule.getWxServicePushPower(n,o,function(n){n?(console.log("checkCustomerPowerReward success req = ",n),t=n.canReceive,a.isCustomerCanReceive=!s&&r&&t,console.log("checkCustomerCanReceive isCustomerPowerRewardOver = "+s+" isClickCustomerPower = "+r+" isCanReceive = "+t+" isCustomerCanReceive = "+a.isCustomerCanReceive),e?a.isCustomerCanReceive&&a.checkCustomerRewardShow():i.eventBus.dispatchEvent(i.GameEventType.UPDATE_CUSTOMER_REWARD)):console.log("checkCustomerPowerReward fail")})},checkCustomerPowerReward:function(){this.checkCustomerCanReceive(!0)},hideGame:function(){console.log("hideGame"),this.offlineMaxPush(),this.everyDayPush(),this.powerMaxPush(),this.mainTopNodeObj.checkPowerTime&&(this.mainTopNodeObj.checkPowerTime=0),i.player.playerModule.saveAllDataToServer(),i.player.commonModule.setHideGameIsSyncData(!0),this.stopMusic()},showGame:function(){console.log("showGame"),this.isCheckPlayerBan=!1,this.isCheckPlayerBaning=!1,this.checkPlayerBanUpdateTime=58,this.checkSystemTime(),this.resetPush(),i.BI.onLogin(),this.checkOfflineTime(),i.player.playerModule.resetLoginTime(),i.player.commonModule.checkOfflinePower(),i.player.commonModule.resetCheckServerState(),this.mainTopNodeObj&&this.mainTopNodeObj.resetCheckServerTimeState(),i.player.commonModule.getHideGameIsSyncData()||i.player.playerModule.saveAllDataToServer(),i.player.commonModule.setHideGameIsSyncData(!1),i.player.commonModule.getMailInfo(!0),this.isShareing||i.gameScene.closePage(i.pageConstant.PAGE_TYPE_MAIN_HANG_UP),this.checkPlayerBanState(),this.refuseMusic(),this.checkShareOver()},dealShowAdFailEvent:function(){},showAd:function(e,t){var a=i.timeUtil.getTime();if(a-this.lastOnClickAdTime<700){this.lastOnClickAdTime=a;var n=i.lang.getGameText(i.GameTextCode.CLICK_TIPS);return i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,n),!1}return this.lastOnClickAdTime=a,i.BI.onClickAdShow(e),i.player.gmModule.isNoAd()||!i.ttAdManager.isLoadAD()&&!i.player.gmModule.isSkipAd()?(i.BI.onNoAds(e),i.ttAdManager.loadAd(),i.Logger.debug("AD : NO ADS !!!"+e),this.dealShowAdFailEvent(e),i.player.commonModule.isCanShare()&&5e3<a-this.lastShowAdTime?(this.gotoAdShare(e,t),!0):(n=i.lang.getGameText(i.GameTextCode.NO_ADS),0<=Math.floor(i.ttAdManager.adStateCode)&&(n="\u5f53\u524d\u6ca1\u6709\u7b26\u5408\u6761\u4ef6\u7684\u5e7f\u544a "+i.ttAdManager.adStateCode),i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,n),!1)):(e==i.GameEventType.SHOW_AD_OVER_AD_REVIVAL&&i.eventBus.dispatchEvent(i.GameEventType.STOP_REVIVAL_TIME),this.lastShowAdTime=a,this.showEvent=e,this.backShowEvent=e,i.BI.onCallShowAds(e),this.adParams=t||0,i.player.gmModule.isSkipAd()?(this.showADReward(),this.showADClose()):i.ttAdManager.showRewardAd(this.showEvent),i.Logger.debug("AD : showAd !!!"+e),!0)},gotoAdShare:function(e,t){var a=i.timeUtil.getTime();e==i.GameEventType.SHOW_AD_OVER_AD_REVIVAL&&i.eventBus.dispatchEvent(i.GameEventType.STOP_REVIVAL_TIME);var n=i.player.commonModule.getTodayShareCount();this.isShareing=!0,this.lastShareTime=a,this.shareParams=t||0,(this.shareEvent=e)!==i.GameEventType.SHOW_SHARE_ALLIANCE_SHARE&&i.player.commonModule.addShareStartCount(i.constant.SHARE_TYPE_AD),i.ttAdManager.wxShare(e),i.BI.startShare(e,n),console.log("go to wx share!!!",e+" _ "+t)},checkShareOver:function(){var e=this;if(this.isShareing&&(this.isShareing=!1,this.shareEvent&&""!==this.shareEvent))if(this.shareEvent===i.GameEventType.SHOW_SHARE_ALLIANCE_SHARE||i.player.commonModule.isCanShare()){var t=i.player.commonModule.getTodayShareCount(),a=i.templateManager.getShareLimitCfg(t);if(a){var n=i.timeUtil.getTime(),o=n-this.lastShareTime,s=(s=a.maxFailTimes)||1;if(i.player.commonModule.getShareFailCount()<s){if(12e4<=o){i.BI.shareTimeOut(this.shareEvent,t);var r=i.lang.getGameText(i.GameTextCode.SHARE_FAIL),c=this.shareEvent,l=this.shareParams;return i.nativeManager.showWxTips("\u63d0\u793a",r,"\u53bb\u5206\u4eab",function(){e.gotoAdShare(c,l)}),this.shareEvent="",void i.player.commonModule.addShareFailCount()}if(s=a.failDesc[i.Utils.getRandomInt(0,a.failDesc.length-1)],r=i.templateManager.getGameParamValue("shareMinTime"),console.log("checkShareOver!!!",n+" _ "+this.lastShareTime+"_"+o+"_"+r),o<=r){i.BI.shareTimeShort(this.shareEvent,t),r=i.lang.getGameText(s);var d=this.shareEvent,h=this.shareParams;return i.nativeManager.showWxTips("\u63d0\u793a",r,"\u53bb\u5206\u4eab",function(){e.gotoAdShare(d,h)}),this.shareEvent="",void i.player.commonModule.addShareFailCount()}if(!i.player.commonModule.isShareSuccess(a.failureRate)){i.BI.shareRandomFail(this.shareEvent,t);var u=i.lang.getGameText(s),p=this.shareEvent,g=this.shareParams;return i.nativeManager.showWxTips("\u63d0\u793a",u,"\u53bb\u5206\u4eab",function(){e.gotoAdShare(p,g)}),this.shareEvent="",void i.player.commonModule.addShareFailCount()}}i.player.commonModule.addShareCount(),this.addShareRewardCache(this.shareEvent,this.shareParams,t),u=cc.delayTime(.7),t=cc.callFunc(function(){this.checkShareRewardCache()},this),t=cc.sequence(u,t),this.node.runAction(t),this.shareEvent="",this.shareParams=""}else this.shareEvent=""}else this.shareEvent=""},showADReward:function(){if(!this.showEvent||""===this.showEvent){if(!this.backShowEvent||""===this.backShowEvent)return void i.Logger.debug("AD : showADOver showEvent is null ");this.showEvent=this.backShowEvent}i.tdManager.showRewardAdOver(this.showEvent),this.addADRewardCache(this.showEvent,this.adParams),i.BI.onAdRewardCallBack(this.showEvent),i.Logger.debug("AD : showADOver !!!"+this.showEvent),this.backShowEvent="",this.adParams=0},addADRewardCache:function(e,t){this.adRewardCache.push({showEvent:e,params:t})},checkAdRewardCache:function(){for(var e=0;e<this.adRewardCache.length;e++)this.battleAdOver(this.adRewardCache[e].showEvent),i.eventBus.dispatchEvent(this.adRewardCache[e].showEvent,{params:this.adRewardCache[e].params}),i.BI.onAdReward(this.adRewardCache[e].showEvent),i.Logger.debug("AD : rewardADOver !!!"+this.adRewardCache[e].showEvent);this.adRewardCache=[]},battleAdOver:function(e){try{var t,a=i.BI.getCurAdType(e);a&&500<=a&&this.gameNode.active&&i.battleScene&&(i.battleScene.showAdCount+=1,i.battleScene.curChapter==i.constant.YEAR_MONSTER_CHAPTER_ID)&&(t=parseInt(i.biConstant.EVENT_ID_YEAR_MONSTER_AD_OVER_BASE)+a,i.BI.onEvent(i.biConstant.EVENT_TYPE_YEAR_MONSTER_AD_OVER,t))}catch(e){}},addShareRewardCache:function(e,t,i){this.shareRewardCache.push({showEvent:e,params:t,count:i})},checkShareRewardCache:function(){for(var e=0;e<this.shareRewardCache.length;e++)i.eventBus.dispatchEvent(this.shareRewardCache[e].showEvent,{params:this.shareRewardCache[e].params}),i.BI.shareReward(this.shareRewardCache[e].showEvent,this.shareRewardCache[e].count),i.Logger.debug("Share : rewardShareOver !!!"+this.shareRewardCache[e].showEvent);this.shareRewardCache=[]},showADError:function(){this.refuseMusic();var e=i.lang.getGameText(i.GameTextCode.SHOW_ADS_ERROR);i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,e),this.dealShowAdFailEvent(this.showEvent),this.showEvent&&""!=this.showEvent?(i.BI.onShowAdsError(this.showEvent),this.showEvent="",this.backShowEvent=""):i.Logger.debug("AD : showADError showEvent is null ")},showADSkip:function(){this.refuseMusic(),this.showEvent&&""!=this.showEvent?(i.BI.onADSkip(this.showEvent),this.showEvent="",this.backShowEvent=""):i.Logger.debug("AD : showADSkip showEvent is null ")},showADClose:function(){this.refuseMusic(),this.dealShowAdFailEvent(this.showEvent);var e=cc.delayTime(.7);i.gameScene.showGuideLimit(1);var t=cc.callFunc(function(){i.player.vipModule.addAdTimes(),i.player.taskModule.addNewYearTaskScore(1),this.checkAdRewardCache()},this);t=cc.sequence(e,t),this.node.runAction(t),this.tipsItemRender&&this.tipsItemRender.active&&(this.tipsItemRender.active=!1),this.showEvent&&""!=this.showEvent?(i.BI.onAdClose(this.showEvent),this.checkAdTime(this.showEvent),this.showEvent=""):i.Logger.debug("AD : showADClose showEvent is null ")},showADClickBar:function(){i.BI.onAdClickBar(this.showEvent)},showADStart:function(){this.stopMusic(),i.BI.onShowADStart(this.showEvent)},showADFinish:function(){i.BI.onAdFinish(this.showEvent)},stopMusic:function(){console.log("stopMusic"),i.soundsUtil.setMusicEnabled(!1),i.soundsUtil.setEffectEnabled(!1)},refuseMusic:function(){console.log("refuseMusic"),this.scheduleOnce(function(){console.log("refuseMusic setMusicEnabled = "+i.player.settingModule.getMusicIsOpen()+" time = "+i.timeUtil.getTime()),i.soundsUtil.setMusicEnabled(i.player.settingModule.getMusicIsOpen()),i.soundsUtil.setEffectEnabled(i.player.settingModule.getSoundIsOpen())},.5),this.refuseMusicTime=2},initTipsItemRender:function(){this.tipsItemRender=cc.instantiate(this.commonTipPrefab),this.node.addChild(this.tipsItemRender,i.constant.PAGE_LAYER_TIP),this.tipsItemRender.setPosition(cc.v2(0,0)),this.tipsItemRenderObj=this.tipsItemRender.getComponent("CommonTipItemRender"),(this.tipsItemRenderObj.gameScene=this).tipsItemRender.active=!1},showTipsItemRender:function(e){this.tipsItemRender||this.initTipsItemRender();var t=this.tipsItemRenderObj.node;t.stopAllActions(),this.tipsItemRender.setPosition(cc.v2(0,0)),this.tipsItemRender.active=!0,this.tipsItemRenderObj.initData(e),t.scale=0;var a=cc.scaleTo(.2,1),n=cc.spawn(cc.fadeIn(.2),a,cc.moveTo(.2,cc.v2(0,100))),o=cc.delayTime(i.templateManager.getGameParamValue("systemTipsStayTimes")/1e3);e=cc.fadeOut(.2),a=cc.callFunc(function(){this.tipsItemRender.active=!1},this),a=cc.sequence(n,o,e,a),t.runAction(a),i.soundsUtil.playSoundEffect("error")},checkServerTime:function(e,t,a,n){var o=this;console.log("========= checkServerTime 111"),this.showLoadingCycle(function(){return i.player.serviceModule.getServerTime(function(i){return o.receiveServerTime(i,e,a,t,n)})},t),i.Logger.debug("==== check server time start")},receiveServerTime:function(e,t,a,n,o){if(console.log("================= receiveServerTime 000"),i.Logger.debug("==== check server time result:",JSON.stringify(e)),this.hideLoadingCycle(),i.player.gmModule.isSkipTimeCheck())t();else{if(!e||!e[0]||!e[0].result)return n||this.showTipsItemRender(i.lang.getGameText(i.GameTextCode.NETWORK_ERROR)),void(a&&a({type:i.GameTextCode.NETWORK_ERROR}));var s=Number(e[0].result);if(this.serverTime=s,o=o||60,e=i.timeUtil.getTime(),6e4*o<=(e=Math.abs(s-e)))return n||this.showTipsItemRender(i.lang.getGameText(i.GameTextCode.SYSTEM_TIME_ERROR)),a&&a({type:i.GameTextCode.SYSTEM_TIME_ERROR,serverTime:s}),e=Math.ceil(e/36e5),i.BI.onEvent(i.biConstant.EVENT_TYPE_ERROR,i.biConstant.EVENT_ID_ERROR_FIX_LOCAL_TIME,i.player.playerModule.getPlayerId()+"#"+e),void i.BI.onEvent(i.biConstant.EVENT_TYPE_ERROR,i.biConstant.EVENT_ID_ERROR_FIX_LOCAL_TIME_USER,i.player.playerModule.getPlayerId());t()}},getLastServerTime:function(){return this.serverTime},showLoadingCycle:function(e,t){t?e():(i.Logger.debug("showLoadingCycle"),this.loadCycleNode.active=!0,t=cc.repeatForever(cc.rotateBy(2,360)),this.loadCycleSprite.stopAllActions(),this.loadCycleSprite.runAction(t),e&&e())},hideLoadingCycle:function(){console.log("222"),i.Logger.debug("hideLoadingCycle"),this.loadCycleSprite.stopAllActions(),this.loadCycleNode.active=!1},showLoadingCycle2:function(){i.Logger.debug("showLoadingCycle2"),this.loadCycleNode2.active=!0;var e=cc.repeatForever(cc.rotateBy(2,360));this.loadCycleSprite2.stopAllActions(),this.loadCycleSprite2.runAction(e),this.loadCycleNode2.opacity=1;var t=cc.delayTime(.3);e=cc.fadeIn(.1),e=cc.sequence(t,e),this.loadCycleNode2.runAction(e)},hideLoadingCycle2:function(){i.Logger.debug("hideLoadingCycle2"),this.loadCycleSprite2.stopAllActions(),this.loadCycleNode2.stopAllActions(),this.loadCycleNode2.active=!1},redNodeAction:function(e){console.log("555"),e.angle=0,e.stopAllActions();var t=cc.rotateBy(.1,10),i=cc.rotateBy(.1,-20),a=cc.rotateBy(.1,20),n=cc.rotateBy(.1,-20),o=cc.rotateBy(.1,20),s=cc.rotateBy(.1,-20),r=cc.rotateBy(.1,10),c=cc.delayTime(.2);r=cc.sequence(c,t,i,a,n,o,s,r),r=cc.repeatForever(r),e.runAction(r)},showTaskTip:function(e){var t,a,n;i.guideManager&&i.guideManager.isLimitClick()||!i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_TASK)||this.newYearTaskTipItem&&this.newYearTaskTipItem.active||(this.taskTipItem||(this.taskTipItem=cc.instantiate(this.taskTipPrefab),this.node.addChild(this.taskTipItem,i.constant.PAGE_LAYER_TIP),this.taskTipItem.active=!1),this.taskTipItem.getComponent("TaskTopTipItemRender").initData(e),this.taskTipItem.active=!0,this.taskTipItem.stopAllActions(),n=this.isIphoneX()?cc.winSize.height/2:cc.winSize.height/2+64,this.taskTipItem.y=cc.winSize.height/2+this.taskTipItem.height,t=cc.moveTo(.2,cc.v2(0,n)),a=cc.delayTime(2),e=cc.moveTo(.2,cc.v2(0,cc.winSize.height/2+this.taskTipItem.height)),n=cc.callFunc(function(){this.taskTipItem.active=!1},this),n=cc.sequence(t,a,e,n),this.taskTipItem.runAction(n))},showNewYearTaskTip:function(e){var t,a,n;i.guideManager&&i.guideManager.isLimitClick()||this.taskTipItem&&this.taskTipItem.active||this.newYearTaskTipItem&&this.newYearTaskTipItem.active||(t=e.type,a=e.taskId,this.newYearTaskTipItem||(this.newYearTaskTipItem=cc.instantiate(this.newYearTaskTipPrefab),this.node.addChild(this.newYearTaskTipItem,i.constant.PAGE_LAYER_TIP),this.newYearTaskTipItem.active=!1),this.newYearTaskTipItem.getComponent("SpringGiftTopTipItemRender").initData(t,a),this.newYearTaskTipItem.active=!0,this.newYearTaskTipItem.stopAllActions(),n=this.isIphoneX()?cc.winSize.height/2:cc.winSize.height/2+64,this.newYearTaskTipItem.y=cc.winSize.height/2+this.newYearTaskTipItem.height,e=cc.moveTo(.2,cc.v2(0,n)),t=cc.delayTime(2),a=cc.moveTo(.2,cc.v2(0,cc.winSize.height/2+this.newYearTaskTipItem.height)),n=cc.callFunc(function(){this.newYearTaskTipItem.active=!1},this),n=cc.sequence(e,t,a,n),this.newYearTaskTipItem.runAction(n))},initGuideDialog:function(){this.guideDialog=cc.instantiate(this.guideDialogPrefab),this.node.addChild(this.guideDialog,i.constant.PAGE_LAYER_GUIDE_HAND),this.guideDialog.setPosition(cc.v2(0,0)),this.guideDialogObj=this.guideDialog.getComponent("GuideDialog"),(this.guideDialogObj.scene=this).guideDialog.active=!1,this.guideDialog.getComponent(cc.Widget).updateAlignment(),i.guideManager.scene=this,i.guideManager.game=this},showGuideDialog:function(e){this.guideDialog||this.initGuideDialog(),this.guideDialog.active=!0,this.guideDialogObj.initData(e)},hideGuideDialog:function(){this.guideDialog.active=!1},initGuideHandAndDialog:function(){this.guideHandAndDialog=cc.instantiate(this.guideHandAndDialogPrefab),this.node.addChild(this.guideHandAndDialog,i.constant.PAGE_LAYER_GUIDE_HAND),this.guideHandAndDialog.setPosition(cc.v2(0,0)),this.guideHandAndDialogObj=this.guideHandAndDialog.getComponent("GuideHandAndDialog"),(this.guideHandAndDialogObj.scene=this).guideHandAndDialog.active=!1},showGuideHandAndDialog:function(e){this.guideHandAndDialog||this.initGuideHandAndDialog(),this.guideHandAndDialog.active=!0,this.guideHandAndDialogObj.initData(e)},hideGuideHandAndDialog:function(){this.guideHandAndDialog.active=!1},initGuideHand:function(){this.guideHand=cc.instantiate(this.guideHandPrefab),this.node.addChild(this.guideHand,i.constant.PAGE_LAYER_GUIDE_HAND),this.guideHand.setPosition(cc.v2(0,0)),this.guideHandObj=this.guideHand.getComponent("GuideHand"),(this.guideHandObj.scene=this).guideHand.active=!1},showGuideHand:function(e){this.guideHand||this.initGuideHand(),this.guideHand.active=!0,this.guideHandObj.initData(e)},hideGuideHand:function(){this.guideHand.active=!1},initGuideLimit:function(){this.guideLimit=cc.instantiate(this.guideLimitPrefab),this.node.addChild(this.guideLimit,i.constant.PAGE_LAYER_GUIDE_LIMIT),this.guideLimit.setPosition(cc.v2(0,0))},showGuideLimit:function(e){i.Logger.debug("showGuideLimit"),this.guideLimit||this.initGuideLimit(),this.guideLimit.active=!0,this.guideLimitTime=0<e?e:3},hideGuideLimit:function(){i.Logger.debug("hideGuideLimit"),this.guideLimit&&(this.guideLimit.active=!1,this.guideLimitTime=0)},initPopUpLimit:function(){this.popUpLimit=cc.instantiate(this.guideLimitPrefab),this.node.addChild(this.popUpLimit,i.constant.PAGE_LAYER_GUIDE_LIMIT),this.popUpLimit.setPosition(cc.v2(0,0))},showPopUpLimit:function(e){i.Logger.debug("showPopUpLimit"),this.popUpLimit||this.initPopUpLimit(),this.popUpLimit.active=!0,this.popUpLimitTime=0<e?e:.5},hidePopUpLimit:function(){i.Logger.debug("hidePopUpLimit"),this.popUpLimit&&(this.popUpLimit.active=!1,this.popUpLimitTime=0)},checkGuideLimitHide:function(){i.guideManager.isLimitClick()||(i.Logger.debug("checkGuideLimitHide hideGuideLimit 1996"),this.hideGuideLimit())},showGuidePopUp:function(e){switch(e.id){case i.constant.GUIDE_TYPE_INSTANCE_1_1:var t=cc.instantiate(this.guidePopUpPrefab_1);this.node.addChild(t,6),t.getComponent("GuidePopUp_1").initGuidePopUp(e.id);break;case i.constant.GUIDE_TYPE_INSTANCE_1_4:case i.constant.GUIDE_TYPE_INSTANCE_2_2:var a=cc.instantiate(this.guidePopUpPrefab_2);this.node.addChild(a,6),a.getComponent("GuidePopUp_2").initGuidePopUp(e.id);break;case i.constant.GUIDE_TYPE_INSTANCE_1_6:a=cc.instantiate(this.guidePopUpPrefab_3),this.node.addChild(a,6),a.getComponent("GuidePopUp_3").initGuidePopUp(e.id);break;case i.constant.GUIDE_TYPE_INSTANCE_3_2:case i.constant.GUIDE_TYPE_INSTANCE_4_1:case i.constant.GUIDE_TYPE_INSTANCE_5_0:case i.constant.GUIDE_TYPE_INSTANCE_1_e_2:var n=cc.instantiate(this.guidePopUpPrefab_4);this.node.addChild(n,6),n.getComponent("GuidePopUp_4").initGuidePopUp(e.id);break;case i.constant.GUIDE_TYPE_INSTANCE_3_6:case i.constant.GUIDE_TYPE_SKILL_CALL_1_2:case i.constant.GUIDE_TYPE_SKILL_SEND_1_2:n=cc.instantiate(this.guidePopUpPrefab_5),this.node.addChild(n,6),n.getComponent("GuidePopUp_5").initGuidePopUp(e.id)}},onGuidePopUpClose:function(e){this.guideOver({guideId:e})},showGuideBubble:function(e,t,a){var n=(1-t.anchorY)*t.height,o=cc.instantiate(this.guideBubblePrefab);e===i.constant.GUIDE_TYPE_INSTANCE_3_4||e===i.constant.GUIDE_TYPE_INSTANCE_3_4_1||e===i.constant.GUIDE_TYPE_INSTANCE_4_5||e===i.constant.GUIDE_TYPE_INSTANCE_4_4||e===i.constant.GUIDE_TYPE_INSTANCE_6_1||e===i.constant.GUIDE_TYPE_INSTANCE_7_1?(o.parent=this.node,o.position=cc.v2(t.x,t.y+n)):(o.parent=t,o.position=cc.v2(0,n)),this.bubbleNodeMap||(this.bubbleNodeMap={}),(this.bubbleNodeMap[e]=o).zIndex=6,o.getComponent("GuideBubble").initBubble(e,a),e!==i.constant.GUIDE_TYPE_INSTANCE_3_4&&e!==i.constant.GUIDE_TYPE_INSTANCE_3_4_1&&e!==i.constant.GUIDE_TYPE_INSTANCE_4_5&&e!==i.constant.GUIDE_TYPE_INSTANCE_4_4||t.getComponent("GameTower").setBubbleGuide(e),t=cc.scaleTo(.1,1.1),e=cc.scaleTo(.1,1),e=cc.sequence(t,e),o.stopAllActions(),o.runAction(e)},guideBubbleOver:function(e){this.guideOver({guideId:e})},registerBubble:function(e,t){this.bubbleListeners||(this.bubbleListeners={});var i=this.bubbleListeners[e];i&&i(),this.bubbleListeners[e]=t},removeBubble:function(e){this.bubbleListeners||(this.bubbleListeners={});var t=this.bubbleListeners[e];t&&(t(),this.bubbleNodeMap&&this.bubbleNodeMap[e]&&(this.bubbleNodeMap[e]=null),delete this.bubbleListeners[e])},removeAllBubble:function(){if(this.bubbleListeners){for(var e in this.bubbleListeners)this.bubbleListeners.hasOwnProperty(e)&&(0,this.bubbleListeners[e])();this.bubbleListeners={},this.bubbleNodeMap={}}},checkBubbleHide:function(e,t,i,a){if(this.bubbleNodeMap)for(var n in this.bubbleNodeMap){var o,s=this.bubbleNodeMap[n];s&&s.active&&(o=s.getComponent("GuideBubble").bubbleLabel.node.convertToWorldSpaceAR(cc.v2(0,0)),n=cc.rect(o.x-100,o.y-25,200,50),o=cc.rect(e-i/2,t-a/2,i,a),n.intersects(o)&&(s.opacity=1))}},checkBubbleShow:function(){if(this.bubbleNodeMap)for(var e in this.bubbleNodeMap)(e=this.bubbleNodeMap[e])&&e.opacity<255&&(e.opacity=255)},checkMailUpdate:function(e){this.mailUpdateTime||(this.mailUpdateTime=0),this.mailUpdateTime+=e,this.mailUpdateTime<1800||(this.mailUpdateTime=0,i.player.commonModule.getMailInfo())},update:function(e){var t;0<this.refuseMusicTime&&(this.refuseMusicTime-=e),0<=this.loadingIndex&&(this.loadingIndex++,2==this.loadingIndex&&(this.gameState==i.constant.GAME_STATE_MAIN?(this.mainPage.onLoadRes(!1),i.soundsUtil.playMusic("bgm_main")):this.gameState==i.constant.GAME_STATE_BATTLE&&(this.gameNode.active=!0,this.mainNode.active=!1,this.mainTopNode.active=!1,this.battleScene.initData(this.chapterId,this.instanceId),this.battleScene.onLoadRes()),this.loadingIndex=-1)),0<this.releaseLoadingIndex&&(this.releaseLoadingIndex--,this.releaseLoadingIndex<=0&&(i.loadingPage&&(i.loadingPage.destroy(),i.loadingPage=null),i.loadAtlas&&(cc.loader.release(cc.loader.getDependsRecursively(i.loadAtlas)),i.loadAtlas=null))),0<this.guideLimitTime&&(this.guideLimitTime-=e,this.guideLimitTime<=0&&(this.guideLimitTime=0,this.hideGuideLimit())),0<this.popUpLimitTime&&(this.popUpLimitTime-=e,this.popUpLimitTime<=0&&(this.popUpLimitTime=0,this.hidePopUpLimit())),this.curTime+=e,1<=this.curTime&&(this.curTime=0,i.player.isInitFinish()&&i.player.commonModule.resetPlayerData(),i.player.playerModule.checkLogoutTime(),i.gameScene.pageIsOpened(i.pageConstant.PAGE_TYPE_MAIN_RANK)||i.nativeManager.hidePermissionButton(),t=i.gameScene.getOpenedPageCount(),i.gameScene.pageIsOpened(i.pageConstant.PAGE_TYPE_MAIN_CHILD)&&0===t||i.ttAdManager.hideSingleGridCustomAd()),this.curSaveDataTime+=e,60<=this.curSaveDataTime&&(this.curSaveDataTime=0,i.player.playerModule.saveAllDataToServer()),this.curWebEventTime+=e,1<=this.curWebEventTime&&(this.curWebEventTime=0,i.config.needSDKUid&&i.tdManager.onWebCustEvent()),this.checkMailUpdate(e),this.checkBroadcastDataUpdate(e),this.checkPlayerBan(e)},checkBroadcastDataUpdate:function(e){this.curBroadcastTime<this.maxBroadcastTime&&(this.curBroadcastTime+=e,this.curBroadcastTime>=this.maxBroadcastTime&&(this.checkBroadcastShow()||(this.curBroadcastTime=0))),this.curDownloadBroadcastTime<i.player.commonModule.getBroadcastIntervalBegin()&&(this.curDownloadBroadcastTime+=e,this.curDownloadBroadcastTime>=i.player.commonModule.getBroadcastIntervalBegin()&&(this.curDownloadBroadcastTime=0,i.player.broadcastModule.downloadBroadcastData())),0<=i.player.broadcastModule.curDownloadTime&&(i.player.broadcastModule.curDownloadTime+=e,30<i.player.broadcastModule.curDownloadTime&&i.player.broadcastModule.getBroadcastDataFail())},closeGameResult:function(){this.cleanCacheShowPage(),this.closePage(i.pageConstant.PAGE_TYPE_RESULT),this.closePage(i.pageConstant.PAGE_TYPE_YEAR_MONSTER_RESULT)},closeAllBattlePage:function(){this.cleanCacheShowPage();for(var e=0;e<this.pausePageList.length;e++)this.pausePageList[e]!=i.pageConstant.PAGE_TYPE_RESULT&&this.pausePageList[e]!=i.pageConstant.PAGE_TYPE_YEAR_MONSTER_RESULT&&this.closePage(this.pausePageList[e])},checkHavePageResumeGame:function(){for(var e=!1,t=0;t<this.pausePageList.length;t++){var a=this.pausePageList[t];this.pageIsOpened(a)&&(i.Logger.debug("resumeGame = true pageType = "+a),e=!0)}return e},showPageSpecialHandling:function(e){i.eventBus.dispatchEvent(i.GameEventType.UPDATE_MAIN_INSTANCE_BOX_TIPS),0<=this.pausePageList.indexOf(e)&&(i.Logger.debug("showPageSpecialHandling - pauseAll pageType = "+e),i.battleScene.pauseAll(),i.battleScene.gameBattleUIObj.hideGayFriendTriggerTips(),i.battleScene.gameBattleUIObj.hideGayFriendTips()),this.openPageTopBarMap.hasOwnProperty(e)&&(e=this.openPageTopBarMap[e],this.mainTopNodeObj.powerAddNode.active=e.showPower,this.mainTopNodeObj.silverNode.active=e.showSilver,this.mainTopNodeObj.goldNode.active=e.showGoldBullion)},checkGameResume:function(){var e=this.checkHavePageResumeGame(),t=i.guideManager.isGuiding();i.Logger.debug("checkGameResume isHavePausePageOpen = "+e+" isHaveGuide = "+t),e||t||i.battleScene.resumeAll()},closePageSpecialHandling:function(e){0<=this.pausePageList.indexOf(e)&&(i.Logger.debug("closePageSpecialHandling checkGameResume\u3000pageType = "+e),this.checkGameResume()),this.openPageTopBarMap.hasOwnProperty(e)&&(this.mainTopNodeObj.powerAddNode.active=!0,this.mainTopNodeObj.silverNode.active=!0,this.mainTopNodeObj.goldNode.active=!0)},checkAdTime:function(e){var t=i.timeUtil.getTime()-this.lastShowAdTime;t<8e3&&(t=Math.ceil(t/1e3),i.BI.onEvent(i.biConstant.EVENT_TYPE_ERROR,i.biConstant.EVENT_ID_ERROR_FIX_AD_TIME,i.player.playerModule.getPlayerId()+"#"+e+"#"+t),i.BI.onEvent(i.biConstant.EVENT_TYPE_ERROR,i.biConstant.EVENT_ID_ERROR_FIX_AD_TIME_USER,i.player.playerModule.getPlayerId()))},checkGuideOverFunction:function(e){var t=this,a=null,n=!0;switch(e){case i.constant.GUIDE_TYPE_UPGRADE_TOWER_1_1:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_UPGRADE_TOWER_1_1),this.mainPage.onClickTower();break;case i.constant.GUIDE_TYPE_UPGRADE_TOWER_1_2:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_UPGRADE_TOWER_1_2),(a=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_TOWER)).guideOver(e);break;case i.constant.GUIDE_TYPE_UPGRADE_TOWER_1_3:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_UPGRADE_TOWER_1_3),(a=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_TOWER)).guideOver(e),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_UPGRADE_TOWER_1_4,this.mainPage.battleButtonIconNode);break;case i.constant.GUIDE_TYPE_UPGRADE_TOWER_1_4:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_UPGRADE_TOWER_1_4),this.mainPage.onClickBattle(),a=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_CHILD),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_UPGRADE_TOWER_1_5,a.instanceEnterItemObjList[1].getGuideNode());break;case i.constant.GUIDE_TYPE_UPGRADE_TOWER_1_5:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_UPGRADE_TOWER_1_5),(a=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_CHILD)).instanceEnterItemObjList[1].onClickEnter();break;case i.constant.GUIDE_TYPE_UPGRADE_TOWER_2_1:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_UPGRADE_TOWER_2_1),this.mainPage.onClickTower();break;case i.constant.GUIDE_TYPE_UPGRADE_TOWER_2_2:i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_TOWER).guideOver(e),i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_UPGRADE_TOWER_2_2);break;case i.constant.GUIDE_TYPE_UPGRADE_TOWER_2_3:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_UPGRADE_TOWER_2_3),i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_TOWER).guideOver(e),this.scheduleOnce(function(){i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_UPGRADE_TOWER_2_4,t.mainPage.battleButtonIconNode)},.5);break;case i.constant.GUIDE_TYPE_UPGRADE_TOWER_2_4:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_UPGRADE_TOWER_2_4),this.mainPage.onClickBattle(),a=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_CHILD),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_UPGRADE_TOWER_2_5,a.instanceEnterItemObjList[2].node);var o=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_CHILD);o&&o.showRewardTip(!1);break;case i.constant.GUIDE_TYPE_UPGRADE_TOWER_2_5:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_UPGRADE_TOWER_2_5),(a=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_TOWER)).guideOver(e),i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_UPGRADE_TOWER_2_6),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_NEW_TARGET);break;case i.constant.GUIDE_TYPE_GET_HERO_1_1:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_GET_HERO_1_1),this.mainPage.onClickHero();break;case i.constant.GUIDE_TYPE_GET_HERO_1_2:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_GET_HERO_1_2),i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_HERO).guideOver(i.constant.GUIDE_TYPE_GET_HERO_1_2);break;case i.constant.GUIDE_TYPE_GET_HERO_1_3:(a=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_HERO_DETAIL)).onClickGet(),i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_GET_HERO_1_3),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_GET_HERO_1_4,a.upLevelButtonNode);break;case i.constant.GUIDE_TYPE_GET_HERO_1_4:(a=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_HERO_DETAIL)).onClickUpLevel(),i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_GET_HERO_1_4),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_GET_HERO_1_5,a.upLevelButtonNode);break;case i.constant.GUIDE_TYPE_GET_HERO_1_5:(a=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_HERO_DETAIL)).onClickUpLevel(),i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_GET_HERO_1_5),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_GET_HERO_1_6,a.vanButtonNode);break;case i.constant.GUIDE_TYPE_GET_HERO_1_6:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_GET_HERO_1_6),(a=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_HERO_DETAIL)).guideVan(),this.scheduleOnce(function(){i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_GET_HERO_1_7,a.backButtonNode)},1);break;case i.constant.GUIDE_TYPE_GET_HERO_1_7:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_GET_HERO_1_7),this.closePage(i.pageConstant.PAGE_TYPE_MAIN_HERO_DETAIL),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_GET_HERO_1_8,this.mainPage.towerIconNode);break;case i.constant.GUIDE_TYPE_GET_HERO_1_8:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_GET_HERO_1_8),this.mainPage.onClickTower();break;case i.constant.GUIDE_TYPE_GET_HERO_1_9:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_GET_HERO_1_9),i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_TOWER).guideOver(e);break;case i.constant.GUIDE_TYPE_GET_HERO_1_a:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_GET_HERO_1_a),i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_HERO_CHOOSE_OBTAINED).guideOver(e);break;case i.constant.GUIDE_TYPE_GET_HERO_1_b:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_GET_HERO_1_b),i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_HERO_CHOOSE_OBTAINED).guideOver(e),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_GET_HERO_1_c,this.mainPage.battleButtonIconNode);break;case i.constant.GUIDE_TYPE_GET_HERO_1_c:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_GET_HERO_1_c),this.mainPage.onClickBattle(),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_GET_HERO_1_d);break;case i.constant.GUIDE_TYPE_GET_HERO_1_d:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_GET_HERO_1_d),this.mainPage.checkFunctionGuide();break;case i.constant.GUIDE_TYPE_UNLOCK_TASK_1:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_UNLOCK_TASK_1),(a=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_CHILD)).onClickTask();break;case i.constant.GUIDE_TYPE_UNLOCK_MAP_1:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_UNLOCK_MAP_1),this.mainPage.onClickWorld();break;case i.constant.GUIDE_TYPE_UNLOCK_MAP_1_2:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_UNLOCK_MAP_1_2),(a=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_WORLD)).campTagMap[1].mapItem.mapGarrisonObj.onClickAdd();break;case i.constant.GUIDE_TYPE_UNLOCK_MAP_1_3:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_UNLOCK_MAP_1_3),(a=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAP_GARRISON_LIST)).itemObjList[0].onClickOk(),this.scheduleOnce(function(){(a=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_WORLD)).checkGuide()},.2);break;case i.constant.GUIDE_TYPE_UNLOCK_MAP_2:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_UNLOCK_MAP_2),(a=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_WORLD)).guideOver();break;case i.constant.GUIDE_TYPE_UNLOCK_MAP_3:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_UNLOCK_MAP_3),(a=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_WORLD)).onFight();break;case i.constant.GUIDE_TYPE_GET_HERO_2_1:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_GET_HERO_2_1),this.mainPage.onClickHero();break;case i.constant.GUIDE_TYPE_GET_HERO_2_2:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_GET_HERO_2_2),i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_HERO).guideOver(i.constant.GUIDE_TYPE_GET_HERO_2_2);break;case i.constant.GUIDE_TYPE_GET_HERO_2_3:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_GET_HERO_2_3),(a=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_HERO_DETAIL)).onClickGet();break;case i.constant.GUIDE_TYPE_OPEN_BOX_1:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_OPEN_BOX_1),(a=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_CHILD)).onClickBox1();break;case i.constant.GUIDE_TYPE_OPEN_BOX_2:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_OPEN_BOX_2),(a=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_INSTANCE_BOX_REWARD)).onClickGet(),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_OPEN_BOX_3,this.mainPage.shopIconNode);break;case i.constant.GUIDE_TYPE_OPEN_BOX_3:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_OPEN_BOX_3),this.mainPage.onClickShop();break;case i.constant.GUIDE_TYPE_OPEN_BOX_4:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_OPEN_BOX_4),(a=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_SHOP)).onClickGoldOrFree();break;case i.constant.GUIDE_TYPE_OPEN_BOX_5:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_OPEN_BOX_5),(a=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_SHOP_REWARD)).onClickReceive(),this.mainPage.checkFunctionGuide();break;case i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_2_1:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_2_1),this.mainPage.onClickTower();break;case i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_2_2:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_2_2),i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_TOWER).guideOver(e);break;case i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_2_3:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_2_3),i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_HERO_CHOOSE_OBTAINED).guideOver(e);break;case i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_2_4:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_2_4),i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_HERO_CHOOSE_OBTAINED).guideOver(e);break;case i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_3_1:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_3_1),this.mainPage.onClickTower();break;case i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_3_2:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_3_2),i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_TOWER).guideOver(e);break;case i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_3_3:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_3_3),i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_HERO_CHOOSE_OBTAINED).guideOver(e);break;case i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_3_4:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_3_4),i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_HERO_CHOOSE_OBTAINED).guideOver(e);break;case i.constant.GUIDE_TYPE_SKILL_UPGRADE_1:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_SKILL_UPGRADE_1),this.mainPage.onClickSkill();break;case i.constant.GUIDE_TYPE_SKILL_UPGRADE_2:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_SKILL_UPGRADE_2),i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_SKILL).guideOver(e);break;case i.constant.GUIDE_TYPE_SKILL_UPGRADE_3:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_SKILL_UPGRADE_3),i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_SKILL_DETAIL).onClickLevelUp(),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_SKILL_UPGRADE_4);break;case i.constant.GUIDE_TYPE_SKILL_UPGRADE_4:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_SKILL_UPGRADE_4);break;case i.constant.GUIDE_TYPE_SKILL_UNLOCK_1:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_SKILL_UNLOCK_1),this.mainPage.onClickSkill();break;case i.constant.GUIDE_TYPE_SKILL_UNLOCK_2:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_SKILL_UNLOCK_2),i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_SKILL).guideOver(e);break;case i.constant.GUIDE_TYPE_SKILL_UNLOCK_3:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_SKILL_UNLOCK_3),i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_SKILL_DETAIL).onClickUnlock();break;case i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_4_1:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_4_1),this.mainPage.onClickTower();break;case i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_4_2:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_4_2),i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_TOWER).guideOver(e);break;case i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_4_3:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_4_3),i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_HERO_CHOOSE_OBTAINED).guideOver(e);break;case i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_4_4:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_4_4),i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_HERO_CHOOSE_OBTAINED).guideOver(e);break;case i.constant.GUIDE_TYPE_VIP_OPEN_1:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_VIP_OPEN_1),(a=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_CHILD)).onClickVip(),this.scheduleOnce(function(){i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_VIP_OPEN_2)},.3);break;case i.constant.GUIDE_TYPE_RESTRAIN_OPEN_1:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_RESTRAIN_OPEN_1),this.mainPage.onClickHero(),a=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_HERO);break;case i.constant.GUIDE_TYPE_RESTRAIN_OPEN_2:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_RESTRAIN_OPEN_2),i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_HERO).onClickGayFriend(),this.scheduleOnce(function(){i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_RESTRAIN_OPEN_3)},.2);break;case i.constant.GUIDE_TYPE_RESTRAIN_UNLOCK_1:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_RESTRAIN_UNLOCK_1),i.gameScene.mainPage.onClickHero(null,null,!0,null);break;case i.constant.GUIDE_TYPE_RESTRAIN_UNLOCK_1_2:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_RESTRAIN_UNLOCK_1_2),i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_HERO).guideRestrainObj.onClickDetail();break;case i.constant.GUIDE_TYPE_RESTRAIN_UNLOCK_1_3:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_RESTRAIN_UNLOCK_1_3),i.gameScene.getPage(i.pageConstant.PAGE_TYPE_HERO_GAY_FRIEND).onClickLevelUp();break;case i.constant.GUIDE_TYPE_RESTRAIN_UNLOCK_1_4:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_RESTRAIN_UNLOCK_1_4),i.gameScene.getPage(i.pageConstant.PAGE_TYPE_HERO_GAY_FRIEND).onClickClose(),a=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_HERO),this.scheduleOnce(function(){a.updateGuideRestrainObj(),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_RESTRAIN_UNLOCK_2,a.guideRestrainObj.buttonNode)},.2);break;case i.constant.GUIDE_TYPE_RESTRAIN_UNLOCK_2:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_RESTRAIN_UNLOCK_2),(a=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_HERO)).guideRestrainObj.onClick(),(a=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_HERO)).gayFriendScrollView.scrollToOffset(cc.v2(0,0)),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_RESTRAIN_UNLOCK_3,this.mainPage.battleButtonIconNode);break;case i.constant.GUIDE_TYPE_RESTRAIN_UNLOCK_3:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_RESTRAIN_UNLOCK_3),this.mainPage.onClickBattle();break;case i.constant.GUIDE_TYPE_SECOND_HERO_1:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_SECOND_HERO_1),i.player.heroModule.addAdPioneerHeroAddTimes(),i.gameScene.mainPage.onClickHero(null,null,!1,null);break;case i.constant.GUIDE_TYPE_SECOND_HERO_2:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_SECOND_HERO_2),(a=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_HERO)).heroWanAdObj.onClick();break;default:n=!1}return n},checkGuideOverBattle:function(e){var t=!0;switch(e){case i.constant.GUIDE_TYPE_INSTANCE_2_1:i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_2_2);break;case i.constant.GUIDE_TYPE_INSTANCE_2_2:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_2_2),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_2_3,i.battleScene.gameTowerList[4].node);break;case i.constant.GUIDE_TYPE_INSTANCE_2_3:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_2_3),i.battleScene.gameTowerList[4].onClickTower(i.constant.GUIDE_TYPE_INSTANCE_2_3);break;case i.constant.GUIDE_TYPE_INSTANCE_2_4:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_2_4),i.battleScene.gameTowerControlObj.buildItemObjList[3].onClick(),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_2_5,i.battleScene.gameTowerControlObj.buildItemObjList[3].node);break;case i.constant.GUIDE_TYPE_INSTANCE_2_5:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_2_5),i.battleScene.gameTowerControlObj.buildItemObjList[3].onClick(),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_2_6,i.battleScene.gameTowerList[5].node);break;case i.constant.GUIDE_TYPE_INSTANCE_2_6:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_2_6),i.battleScene.gameTowerList[5].onClickTower(i.constant.GUIDE_TYPE_INSTANCE_2_6);break;case i.constant.GUIDE_TYPE_INSTANCE_2_7:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_2_7),i.battleScene.gameTowerControlObj.buildItemObjList[3].onClick(),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_2_8,i.battleScene.gameTowerControlObj.buildItemObjList[3].node);break;case i.constant.GUIDE_TYPE_INSTANCE_2_8:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_2_8),i.battleScene.gameTowerControlObj.buildItemObjList[3].onClick(),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_2_9,i.battleScene.gameBattleUIObj.beginButtonNode);break;case i.constant.GUIDE_TYPE_INSTANCE_2_9:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_2_9),i.battleScene.gameBattleUIObj.onClickGameStart();break;case i.constant.GUIDE_TYPE_INSTANCE_2_a:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_2_a),i.battleScene.gameTowerList[2].onClickTower(i.constant.GUIDE_TYPE_INSTANCE_2_a);break;case i.constant.GUIDE_TYPE_INSTANCE_2_b:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_2_b),i.battleScene.gameTowerControlObj.buildItemObjList[2].onClick(),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_2_c,i.battleScene.gameTowerControlObj.buildItemObjList[2].node);break;case i.constant.GUIDE_TYPE_INSTANCE_2_c:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_2_c),i.battleScene.gameTowerControlObj.buildItemObjList[2].onClick(),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_2_d,i.battleScene.gameTowerList[1].node);break;case i.constant.GUIDE_TYPE_INSTANCE_2_d:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_2_d),i.battleScene.gameTowerList[1].onClickTower(i.constant.GUIDE_TYPE_INSTANCE_2_d);break;case i.constant.GUIDE_TYPE_INSTANCE_2_e:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_2_e),i.battleScene.gameTowerControlObj.buildItemObjList[2].onClick(),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_2_f,i.battleScene.gameTowerControlObj.buildItemObjList[2].node);break;case i.constant.GUIDE_TYPE_INSTANCE_2_f:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_2_f),i.battleScene.gameTowerControlObj.buildItemObjList[2].onClick();break;case i.constant.GUIDE_TYPE_INSTANCE_3_1:i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_3_2);break;case i.constant.GUIDE_TYPE_INSTANCE_3_2:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_3_2),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_3_4,i.battleScene.gameTowerList[2].node);break;case i.constant.GUIDE_TYPE_INSTANCE_3_4:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_3_4),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_3_4_1,i.battleScene.gameTowerList[1].node);break;case i.constant.GUIDE_TYPE_INSTANCE_3_4_1:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_3_4_1),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_3_4_2,i.battleScene.gameBattleUIObj.beginButtonNode);break;case i.constant.GUIDE_TYPE_INSTANCE_3_4_2:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_3_4_2);break;case i.constant.GUIDE_TYPE_INSTANCE_3_5:i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_3_6);break;case i.constant.GUIDE_TYPE_INSTANCE_3_6:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_3_6),i.battleScene.gameBattleUIObj.skillObjList[0].updateUnlock(),i.battleScene.gameBattleUIObj.skillObjList[0].showSkillOkEffect(),i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_3_7,!0);break;case i.constant.GUIDE_TYPE_INSTANCE_3_8:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_3_8),i.guideManager.skillTargetEnemyObj=null,i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_3_9,i.battleScene.gameBattleUIObj.skillObjList[0].node);break;case i.constant.GUIDE_TYPE_INSTANCE_3_9:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_3_9),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_3_10);break;case i.constant.GUIDE_TYPE_INSTANCE_3_10:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_3_10),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_3_a);break;case i.constant.GUIDE_TYPE_INSTANCE_3_a:var a=i.battleScene.gameTowerList[1].node.position,n=cc.v2(a.x+i.guideManager.heroPosOffset2.x,a.y+i.guideManager.heroPosOffset2.y);a=i.battleScene.createHero(43006,0),i.battleScene.gameBattleUIObj.createHeroHead(a,0),a.moveToTargetPos(n),i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_3_b,!0),n=i.templateManager.getGameParamValue("guideHeroGrade"),a.setGuideHeroAttr(n);break;case i.constant.GUIDE_TYPE_INSTANCE_3_e:i.battleScene.checkGameWin(),i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_3_e);break;case i.constant.GUIDE_TYPE_INSTANCE_4_1:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_4_1),this.battleScene.checkStartPopUp();break;case i.constant.GUIDE_TYPE_INSTANCE_4_5:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_4_5),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_4_6,i.battleScene.gameBattleUIObj.beginButtonNode);break;case i.constant.GUIDE_TYPE_INSTANCE_4_4:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_4_4),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_4_5,i.battleScene.gameTowerList[4].node);break;case i.constant.GUIDE_TYPE_INSTANCE_4_6:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_4_6);break;case i.constant.GUIDE_TYPE_INSTANCE_5_0:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_5_0);break;case i.constant.GUIDE_TYPE_INSTANCE_5_1:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_5_1);var o=i.battleScene.gameTowerList[2].node.position,s=cc.v2(o.x+i.guideManager.heroPosOffset5_1.x,o.y+i.guideManager.heroPosOffset5_1.y);o=i.battleScene.createHero(43001,0),i.battleScene.gameBattleUIObj.createHeroHead(o,0),o.moveToTargetPos(s),s=i.templateManager.getGameParamValue("guideHeroGrade"),o.setGuideHeroAttr(s),i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_5_2,!0);break;case i.constant.GUIDE_TYPE_INSTANCE_5_3:i.battleScene.checkGameWin(),i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_5_3);break;case i.constant.GUIDE_TYPE_INSTANCE_6_1:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_6_1);break;case i.constant.GUIDE_TYPE_INSTANCE_7_1:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_7_1),i.battleScene.checkStartPopUp();break;case i.constant.GUIDE_TYPE_INSTANCE_10_1:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_5_1),o=i.battleScene.gameTowerList[8].node.position,s=cc.v2(o.x-90,o.y-50),o=i.battleScene.createHero(43005,1),i.battleScene.gameBattleUIObj.createHeroHead(o,1),o.moveToTargetPos(s),s=i.templateManager.getGameParamValue("guideHeroGrade"),o.setGuideHeroAttr(s),i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_10_2,!0);break;case i.constant.GUIDE_TYPE_INSTANCE_10_3:i.battleScene.checkGameWin(),i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_10_3);break;default:t=!1}return t},guideOver:function(e){if(e=e.guideId,!this.checkGuideOverBattle(e)&&!this.checkGuideOverFunction(e))switch(e){case i.constant.GUIDE_TYPE_INSTANCE_1_1:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_1_1),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_1_2);break;case i.constant.GUIDE_TYPE_INSTANCE_1_2:i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_1_3);break;case i.constant.GUIDE_TYPE_INSTANCE_1_3:i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_1_4);break;case i.constant.GUIDE_TYPE_INSTANCE_1_4:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_1_4),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_1_5);break;case i.constant.GUIDE_TYPE_INSTANCE_1_5:i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_1_6);break;case i.constant.GUIDE_TYPE_INSTANCE_1_6:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_1_6),i.battleScene.gameTowerList[0].setTowerShow(!0),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_1_7,i.battleScene.gameTowerList[0].node);break;case i.constant.GUIDE_TYPE_INSTANCE_1_7:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_1_7),i.battleScene.gameTowerList[0].onClickTower(i.constant.GUIDE_TYPE_INSTANCE_1_7);break;case i.constant.GUIDE_TYPE_INSTANCE_1_8:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_1_8),i.battleScene.gameTowerControlObj.buildItemObjList[0].onClick(),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_1_9,i.battleScene.gameTowerControlObj.buildItemObjList[0].node);break;case i.constant.GUIDE_TYPE_INSTANCE_1_9:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_1_9),i.battleScene.gameTowerControlObj.buildItemObjList[0].onClick(),i.battleScene.gameTowerList[1].setTowerShow(!0),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_1_a,i.battleScene.gameTowerList[1].node);break;case i.constant.GUIDE_TYPE_INSTANCE_1_a:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_1_a),i.battleScene.gameTowerList[1].onClickTower(i.constant.GUIDE_TYPE_INSTANCE_1_a);break;case i.constant.GUIDE_TYPE_INSTANCE_1_b:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_1_b),i.battleScene.gameTowerControlObj.buildItemObjList[1].onClick(),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_1_c,i.battleScene.gameTowerControlObj.buildItemObjList[1].node);break;case i.constant.GUIDE_TYPE_INSTANCE_1_c:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_1_c),i.battleScene.gameTowerControlObj.buildItemObjList[1].onClick(),i.battleScene.gameTowerList[2].setTowerShow(!0),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_1_c_1,i.battleScene.gameTowerList[2].node);break;case i.constant.GUIDE_TYPE_INSTANCE_1_c_1:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_1_c_1),i.battleScene.gameTowerList[2].onClickTower(i.constant.GUIDE_TYPE_INSTANCE_1_c_1);break;case i.constant.GUIDE_TYPE_INSTANCE_1_c_2:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_1_c_2),i.battleScene.gameTowerControlObj.buildItemObjList[0].onClick(),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_1_c_3,i.battleScene.gameTowerControlObj.buildItemObjList[0].node);break;case i.constant.GUIDE_TYPE_INSTANCE_1_c_3:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_1_c_3),i.battleScene.gameTowerControlObj.buildItemObjList[0].onClick(),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_1_d,i.battleScene.gameBattleUIObj.beginButtonNode);break;case i.constant.GUIDE_TYPE_INSTANCE_1_d:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_1_d),i.battleScene.gameBattleUIObj.onClickGameStart(),i.battleScene.showAllTower();break;case i.constant.GUIDE_TYPE_INSTANCE_1_e:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_1_e);break;case i.constant.GUIDE_TYPE_INSTANCE_1_e_1:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_1_e_1);break;case i.constant.GUIDE_TYPE_INSTANCE_1_e_2:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_1_e_2);break;case i.constant.GUIDE_TYPE_INSTANCE_1_f:i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_1_g);break;case i.constant.GUIDE_TYPE_INSTANCE_1_g:i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_1_h);break;case i.constant.GUIDE_TYPE_INSTANCE_1_h:i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_1_i);break;case i.constant.GUIDE_TYPE_INSTANCE_1_i:i.battleScene.checkGameWin();break;case i.constant.GUIDE_TYPE_INSTANCE_1_i_2:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_1_i_2),i.gameScene.getPage(i.pageConstant.PAGE_TYPE_RESULT).onClickBack();break;case i.constant.GUIDE_TYPE_SKILL_CALL_1_1:i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_SKILL_CALL_1_2);break;case i.constant.GUIDE_TYPE_SKILL_CALL_1_2:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_SKILL_CALL_1_2),i.battleScene.gameBattleUIObj.skillObjList[1].updateUnlock(),i.battleScene.gameBattleUIObj.skillObjList[1].showSkillOkEffect(),i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_SKILL_CALL_1_3,!0);break;case i.constant.GUIDE_TYPE_SKILL_CALL_1_4:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_SKILL_CALL_1_4),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_SKILL_CALL_1_5,i.battleScene.gameBattleUIObj.skillObjList[1].node);break;case i.constant.GUIDE_TYPE_SKILL_CALL_1_5:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_SKILL_CALL_1_5);break;case i.constant.GUIDE_TYPE_SKILL_SEND_1_1:i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_SKILL_SEND_1_2);break;case i.constant.GUIDE_TYPE_SKILL_SEND_1_2:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_SKILL_SEND_1_2),i.battleScene.gameBattleUIObj.skillObjList[2].updateUnlock(),i.battleScene.gameBattleUIObj.skillObjList[2].showSkillOkEffect(),i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_SKILL_SEND_1_3,!0);break;case i.constant.GUIDE_TYPE_SKILL_SEND_1_4:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_SKILL_SEND_1_4),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_SKILL_SEND_1_5,i.battleScene.gameBattleUIObj.skillObjList[2].node);break;case i.constant.GUIDE_TYPE_SKILL_SEND_1_5:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_SKILL_SEND_1_5);break;case i.constant.GUIDE_TYPE_SKILL_CALL_2_1:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_SKILL_CALL_2_1),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_SKILL_CALL_2_2,i.battleScene.gameBattleUIObj.skillObjList[1].node);break;case i.constant.GUIDE_TYPE_SKILL_CALL_2_2:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_SKILL_CALL_2_2);break;case i.constant.GUIDE_TYPE_SKILL_SEND_2_1:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_SKILL_SEND_2_1),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_SKILL_SEND_2_2,i.battleScene.gameBattleUIObj.skillObjList[2].node);break;case i.constant.GUIDE_TYPE_SKILL_SEND_2_2:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_SKILL_SEND_2_2);break;case i.constant.GUIDE_TYPE_INSTANCE_3_c:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_3_c),i.guideManager.skillTargetEnemyObj=null,i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_3_d,i.battleScene.gameBattleUIObj.skillObjList[0].node);break;case i.constant.GUIDE_TYPE_INSTANCE_3_d:i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_3_d)}},checkPlayerBan:function(e){var t=this;this.isCheckPlayerBan||this.isCheckPlayerBaning||(this.checkPlayerBanUpdateTime+=e,this.checkPlayerBanUpdateTime<60||(this.checkPlayerBanUpdateTime=0,this.isCheckPlayerBaning=!0,i.player.serviceModule.isPlayerLocked(function(e){t.receivePlayerBanInfo(e)}),i.Logger.debug("checkPlayerBan start")))},receivePlayerBanInfo:function(e){i.Logger.debug("receivePlayerBanInfo ",JSON.stringify(e)),e&&e[0]&&e[0].result&&(e=e[0].result,i.Logger.debug("player ban check result:",e),"lock"===e?i.player.playerModule.setBanPlayer(!0):i.player.playerModule.setBanPlayer(!1),this.isCheckPlayerBan=!0),this.isCheckPlayerBaning=!1,this.checkPlayerBanState()},checkPlayerBanState:function(){i.player.playerModule.isBanPlayer()?this.pageIsOpened(i.pageConstant.PAGE_TYPE_PLAYER_LOCK)||i.gameScene.showPage(i.pageConstant.PAGE_TYPE_PLAYER_LOCK):this.pageIsOpened(i.pageConstant.PAGE_TYPE_PLAYER_LOCK)&&i.gameScene.closePage(i.pageConstant.PAGE_TYPE_PLAYER_LOCK)},registerPage:function(){if(!this.pagePathMap){this.pagePathMap={};for(var e=i.loadPrefabList.length,t=0;t<e.length;t++){var a=e[t];this.pagePathMap[a.pageType]=a.prefabPath}}return[{pageType:i.pageConstant.PAGE_TYPE_PAUSE,prefabPath:"prefab/uiPrefab/battleUiPrefab/pause/GamePausePage",pageScript:"GamePausePage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_85,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE},{pageType:i.pageConstant.PAGE_TYPE_REVIVAL,prefabPath:"prefab/uiPrefab/battleUiPrefab/GameRevivalPage",pageScript:"GameRevivalPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_85,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_NONE},{pageType:i.pageConstant.PAGE_TYPE_RESULT,prefabPath:"prefab/uiPrefab/battleUiPrefab/GameResultPage",pageScript:"GameResultPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_85,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_NONE},{pageType:i.pageConstant.PAGE_TYPE_BATTLE_PIGGY_BANK,prefabPath:"prefab/uiPrefab/battleUiPrefab/battlePiggyBankPage",pageScript:"BattlePiggyBankPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_NONE},{pageType:i.pageConstant.PAGE_TYPE_SECOND_HERO_CONFIRM,prefabPath:"prefab/uiPrefab/battleUiPrefab/hero/secondHeroConfirmPopUp",pageScript:"SecondHeroConfirmPopUp",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_85,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE},{pageType:i.pageConstant.PAGE_TYPE_SECOND_HERO_CHOOSE,prefabPath:"prefab/uiPrefab/battleUiPrefab/hero/secondHeroChoosePopUp",pageScript:"SecondHeroChoosePopUp",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_85,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE},{pageType:i.pageConstant.PAGE_TYPE_PIGGY_BANK,prefabPath:"prefab/uiPrefab/mainPrefab/piggyBank/piggyBankPage",pageScript:"PiggyBankPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_85,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE,checkShowSort:i.pageConstant.PAGE_SHOW_SORT_PIGGY_BANK},{pageType:i.pageConstant.PAGE_TYPE_DEBUG,prefabPath:"prefab/debugPrefab/debugPage",pageScript:"DebugPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_MAIN_TAG,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_NONE,zIndex:i.constant.PAGE_LAYER_PAGE_UP},{pageType:i.pageConstant.PAGE_TYPE_BATTLE_SKILL,prefabPath:"prefab/uiPrefab/battleUiPrefab/skill/GameBattleSkillPage",pageScript:"GameBattleSkillPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_NONE},{pageType:i.pageConstant.PAGE_TYPE_MAIN_CHILD,createPrefab:this.mainChildPrefab,pageScript:"MainChildPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_NONE,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_NONE,zIndex:i.constant.PAGE_LAYER_MAIN_FUNCTION_PAGE,skipCloseSound:!0},{pageType:i.pageConstant.PAGE_TYPE_MAIN_SHOP,prefabPath:"prefab/uiPrefab/mainPrefab/shop/mainShop",pageScript:"ShopPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_MAIN_TAG,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_NONE,zIndex:i.constant.PAGE_LAYER_MAIN_FUNCTION_PAGE,skipCloseSound:!0},{pageType:i.pageConstant.PAGE_TYPE_MAIN_SHOP_REWARD,prefabPath:"prefab/uiPrefab/mainPrefab/shop/shopDrawPage",pageScript:"ShopRewardPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_MAIN_HERO,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE,zIndex:i.constant.PAGE_LAYER_TOP_BAR_UP},{pageType:i.pageConstant.PAGE_TYPE_MAIN_HERO,prefabPath:"prefab/uiPrefab/mainPrefab/hero/heroPage",pageScript:"MainHeroPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_MAIN_TAG,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_NONE,zIndex:i.constant.PAGE_LAYER_MAIN_FUNCTION_PAGE,skipCloseSound:!0},{pageType:i.pageConstant.PAGE_TYPE_MAIN_TOWER,prefabPath:"prefab/uiPrefab/mainPrefab/tower/mainTowerPage",pageScript:"MainTowerPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_MAIN_TAG,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_NONE,zIndex:i.constant.PAGE_LAYER_MAIN_FUNCTION_PAGE,skipCloseSound:!0},{pageType:i.pageConstant.PAGE_TYPE_MAIN_SKILL,prefabPath:"prefab/uiPrefab/mainPrefab/skill/skillPage",pageScript:"SkillPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_MAIN_TAG,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_NONE,zIndex:i.constant.PAGE_LAYER_MAIN_FUNCTION_PAGE,skipCloseSound:!0},{pageType:i.pageConstant.PAGE_TYPE_MAIN_SKILL_DETAIL,prefabPath:"prefab/uiPrefab/mainPrefab/skill/skillDetaliPage",pageScript:"SkillDetailPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE},{pageType:i.pageConstant.PAGE_TYPE_MAIN_SKILL_STAR,prefabPath:"prefab/uiPrefab/mainPrefab/skill/skillStarPage",pageScript:"SkillStarPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_MAIN_TAG,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_NONE},{pageType:i.pageConstant.PAGE_TYPE_MAIN_LACK_OF_MATERIAL,prefabPath:"prefab/uiPrefab/mainPrefab/tower/lackOfMaterialPopUp",pageScript:"LackOfMaterialPopUp",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE},{pageType:i.pageConstant.PAGE_TYPE_MAIN_TOWER_WAKE,prefabPath:"prefab/uiPrefab/mainPrefab/hero/heroWakePage",pageScript:"MainHeroWakePage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_MAIN_TAG,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE,zIndex:i.constant.PAGE_LAYER_PAGE_UP},{pageType:i.pageConstant.PAGE_TYPE_MAIN_HERO_DETAIL,prefabPath:"prefab/uiPrefab/mainPrefab/hero/heroDetailPopUp",pageScript:"MainHeroDetailPopUp",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_MAIN_TAG,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE},{pageType:i.pageConstant.PAGE_TYPE_MAIN_HANG_UP,prefabPath:"prefab/uiPrefab/mainPrefab/hangUp/hangUpPage",pageScript:"HangUpPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE,zIndex:i.constant.PAGE_LAYER_TOP_BAR_DOWN},{pageType:i.pageConstant.PAGE_TYPE_MAIN_HERO_CHOOSE,prefabPath:"prefab/uiPrefab/mainPrefab/hero/heroChoosePopUp",pageScript:"MainHeroChoosePopUp",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE},{pageType:i.pageConstant.PAGE_TYPE_MAIN_HERO_CHOOSE_OBTAINED,prefabPath:"prefab/uiPrefab/mainPrefab/hero/heroObtainedPopUp",pageScript:"MainHeroObtainedPopUp",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE,zIndex:i.constant.PAGE_LAYER_PAGE_UP},{pageType:i.pageConstant.PAGE_TYPE_MAIN_HERO_PIECE_SOURCE,prefabPath:"prefab/uiPrefab/mainPrefab/hero/heroPieceSourcePopUp",pageScript:"MainHeroPieceSourcePopUp",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE,zIndex:i.constant.PAGE_LAYER_PAGE_UP},{pageType:i.pageConstant.PAGE_TYPE_CAPTURE,prefabPath:"prefab/uiPrefab/battleUiPrefab/captureImagePage",pageScript:"CaptureImagePage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_NONE,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_NONE,zIndex:5e3},{pageType:i.pageConstant.PAGE_TYPE_MAIN_TASK,prefabPath:"prefab/uiPrefab/mainPrefab/task/taskPage",pageScript:"TaskPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE,zIndex:i.constant.PAGE_LAYER_TOP_BAR_DOWN},{pageType:i.pageConstant.PAGE_TYPE_MAIN_PLAYER_OFFICIAL,prefabPath:"prefab/uiPrefab/mainPrefab/officialPosition/officialPositionPopUp",pageScript:"PlayerOfficialPopUp",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE,zIndex:i.constant.PAGE_LAYER_TOP_BAR_UP,checkShowSort:i.pageConstant.PAGE_SHOW_SORT_PLAYER_OFFICIAL},{pageType:i.pageConstant.PAGE_TYPE_MAIN_INSTANCE_BOX_REWARD,prefabPath:"prefab/uiPrefab/mainPrefab/chapter/InstanceBoxRewardsPopUp",pageScript:"InstanceBoxRewardPopUp",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE,zIndex:i.constant.PAGE_LAYER_PAGE_UP},{pageType:i.pageConstant.PAGE_TYPE_SETTING,prefabPath:"prefab/uiPrefab/mainPrefab/set/setPage",pageScript:"SettingPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE},{pageType:i.pageConstant.PAGE_TYPE_RENAME,prefabPath:"prefab/uiPrefab/mainPrefab/set/nameChangePopUp",pageScript:"RenamePage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE,zIndex:i.constant.PAGE_LAYER_PAGE_UP},{pageType:i.pageConstant.PAGE_TYPE_FEEDBACK,prefabPath:"prefab/uiPrefab/mainPrefab/set/feedBackPage",pageScript:"FeedBackPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE,zIndex:i.constant.PAGE_LAYER_PAGE_UP},{pageType:i.pageConstant.PAGE_TYPE_LANGUAGE,prefabPath:"prefab/uiPrefab/mainPrefab/set/languageChangePopUp",pageScript:"LanguagePage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE},{pageType:i.pageConstant.PAGE_TYPE_MAIN_RANK,prefabPath:"prefab/uiPrefab/mainPrefab/rank/rankPageNew",pageScript:"RankPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE,zIndex:i.constant.PAGE_LAYER_TOP_BAR_DOWN},{pageType:i.pageConstant.PAGE_TYPE_BATTLE_NEW_ENEMY,prefabPath:"prefab/uiPrefab/battleUiPrefab/battleEnemy/battleEnemyIntroduce",pageScript:"NewEnemyPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE},{pageType:i.pageConstant.PAGE_TYPE_NEW_TARGET,prefabPath:"prefab/uiPrefab/mainPrefab/main/newTask",pageScript:"NewTargetPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE},{pageType:i.pageConstant.PAGE_TYPE_MAIN_POWER,prefabPath:"prefab/uiPrefab/mainPrefab/power/powerBuyPage",pageScript:"MainPowerPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE,zIndex:i.constant.PAGE_LAYER_PAGE_UP},{pageType:i.pageConstant.PAGE_TYPE_PICTORIAL,prefabPath:"prefab/uiPrefab/mainPrefab/pictorial/pictorialPage",pageScript:"PictorialPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_MAIN_TAG,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_NONE},{pageType:i.pageConstant.PAGE_TYPE_PICTORIAL_ENEMY_DETAIL,prefabPath:"prefab/uiPrefab/mainPrefab/pictorial/pictorialEnemyDetailPage",pageScript:"PictorialEnemyDetailPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE,zIndex:i.constant.PAGE_LAYER_PAGE_UP},{pageType:i.pageConstant.PAGE_TYPE_PICTORIAL_TOWER_DETAIL,prefabPath:"prefab/uiPrefab/mainPrefab/pictorial/pictorialTowerDetailPage",pageScript:"PictorialTowerDetailPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE,zIndex:i.constant.PAGE_LAYER_PAGE_UP},{pageType:i.pageConstant.PAGE_TYPE_MAIN_NEW_FUNCTION,prefabPath:"prefab/uiPrefab/mainPrefab/openNewFunc/openNewFunc",pageScript:"NewFunctionPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE,checkShowSort:i.pageConstant.PAGE_SHOW_SORT_NEW_FUNCTION},{pageType:i.pageConstant.PAGE_TYPE_SPEED_TRY,prefabPath:"prefab/uiPrefab/battleUiPrefab/try/tryFunc",pageScript:"SpeedTryPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE,checkShowSort:i.pageConstant.PAGE_SHOW_SORT_NEW_FUNCTION},{pageType:i.pageConstant.PAGE_TYPE_MAIN_HERO_WAKE,prefabPath:"prefab/uiPrefab/mainPrefab/hero/heroWakePage",pageScript:"MainHeroWakePage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_MAIN_HERO,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE,zIndex:i.constant.PAGE_LAYER_PAGE_UP},{pageType:i.pageConstant.PAGE_TYPE_BATTLE_START_BUFF,prefabPath:"prefab/uiPrefab/battleUiPrefab/gift/giftPage",pageScript:"StartBuffPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_85,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_NONE},{pageType:i.pageConstant.PAGE_TYPE_MAIN_HERO_CONFIRM_PAGE,prefabPath:"prefab/uiPrefab/mainPrefab/hero/heroConfirmPage",pageScript:"MainHeroConfirmPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_NONE},{pageType:i.pageConstant.PAGE_TYPE_BATTLE_SKILL_AD_UP,prefabPath:"prefab/uiPrefab/battleUiPrefab/skill/GameBattleSkillUpgradeTipsPage",pageScript:"GameBattleSkillAdUpPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_85,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_NONE},{pageType:i.pageConstant.PAGE_TYPE_MAIN_WORLD,prefabPath:"prefab/uiPrefab/mainPrefab/world/mainWorldPage",isLimitClean:!0,pageScript:"MainWorldPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_MAIN_TAG,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_NONE,zIndex:i.constant.PAGE_LAYER_MAIN_FUNCTION_PAGE,skipCloseSound:!0},{pageType:i.pageConstant.PAGE_TYPE_BATTLE_OPEN_BOX,prefabPath:"prefab/uiPrefab/battleUiPrefab/battleBox/battleBoxPage",pageScript:"BattleBoxPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_MAIN_HERO,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE},{pageType:i.pageConstant.PAGE_TYPE_ROLE_INFO,prefabPath:"prefab/uiPrefab/mainPrefab/roleDetail/roleDetailPage",pageScript:"RoleInfoPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE},{pageType:i.pageConstant.PAGE_TYPE_ROLE_ICON,prefabPath:"prefab/uiPrefab/mainPrefab/roleDetail/chooseHeadPage",pageScript:"RoleIconPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE},{pageType:i.pageConstant.PAGE_TYPE_SIGN,prefabPath:"prefab/uiPrefab/mainPrefab/sign/signPage",pageScript:"SignPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE,zIndex:i.constant.PAGE_LAYER_TOP_BAR_DOWN},{pageType:i.pageConstant.PAGE_TYPE_SOLDIER_TRIAL,prefabPath:"prefab/uiPrefab/battleUiPrefab/soldierTrial/soldierTrialPage",pageScript:"SoldierTrialPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_NONE,checkShowSort:i.pageConstant.PAGE_SHOW_SORT_SOLDIER_TRIAL},{pageType:i.pageConstant.PAGE_TYPE_HERO_CHOOSE,prefabPath:"prefab/uiPrefab/mainPrefab/hero/changeHeroConfirmPage",pageScript:"MainHeroChooseConfirmPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE,zIndex:i.constant.PAGE_LAYER_PAGE_UP},{pageType:i.pageConstant.PAGE_TYPE_QUICKLY_BATTLE,prefabPath:"prefab/uiPrefab/mainPrefab/hangUp/quicklyHangUp",pageScript:"QuicklyBattlePage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE,zIndex:i.constant.PAGE_LAYER_TOP_BAR_DOWN},{pageType:i.pageConstant.PAGE_TYPE_SWITCH_CHAPTER_CLOUD,prefabPath:"prefab/uiPrefab/mainPrefab/chapter/SwitchChapterCloudPopUp",pageScript:"SwitchChapterCloudPopUp",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_NONE,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_NONE,zIndex:i.constant.PAGE_LAYER_LOADING_CYCLE},{pageType:i.pageConstant.PAGE_TYPE_HERO_TOWER_UNLOCK,prefabPath:"prefab/uiPrefab/battleUiPrefab/tower/heroTowerUnlockPage",pageScript:"HeroTowerUnlockPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE},{pageType:i.pageConstant.PAGE_TYPE_CLEAR_ACCOUNT,prefabPath:"prefab/uiPrefab/mainPrefab/set/delateReplayConfirmPage",pageScript:"ClearAccountPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE},{pageType:i.pageConstant.PAGE_TYPE_EMAIL,prefabPath:"prefab/uiPrefab/mainPrefab/email/emailPage",pageScript:"EmailPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE,zIndex:i.constant.PAGE_LAYER_TOP_BAR_DOWN},{pageType:i.pageConstant.PAGE_TYPE_EMAIL_FEEDBACK,prefabPath:"prefab/uiPrefab/mainPrefab/email/emailDetailFeedbackPage",pageScript:"EmailFeedbackPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE,zIndex:i.constant.PAGE_LAYER_TOP_BAR_DOWN},{pageType:i.pageConstant.PAGE_TYPE_EMAIL_GLOBAL,prefabPath:"prefab/uiPrefab/mainPrefab/email/emailDetailPage",pageScript:"EmailGlobalPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE,zIndex:i.constant.PAGE_LAYER_TOP_BAR_DOWN_UP},{pageType:i.pageConstant.PAGE_TYPE_TIME_ERROR,prefabPath:"prefab/uiPrefab/mainPrefab/main/timeErrorPage",pageScript:"TimeErrorPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE,zIndex:i.constant.PAGE_LAYER_TIP},{pageType:i.pageConstant.PAGE_TYPE_ENTER_BATTLE_TIP,prefabPath:"prefab/uiPrefab/mainPrefab/chapter/fightPowerRecommendPage",pageScript:"EnterBattleTipPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_NONE},{pageType:i.pageConstant.PAGE_TYPE_VIP,prefabPath:"prefab/uiPrefab/mainPrefab/vip/vipPage",pageScript:"VipPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_MAIN_TAG,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE},{pageType:i.pageConstant.PAGE_TYPE_MARK,prefabPath:"prefab/uiPrefab/mainPrefab/mark/markPage",pageScript:"MarkPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE,checkShowSort:i.pageConstant.PAGE_SHOW_SORT_MARK},{pageType:i.pageConstant.PAGE_TYPE_VIP_UP,prefabPath:"prefab/uiPrefab/mainPrefab/vip/vipUpgradePage",pageScript:"VipUpPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_NONE},{pageType:i.pageConstant.PAGE_TYPE_HERO_GAY_FRIEND,prefabPath:"prefab/uiPrefab/mainPrefab/hero/luckyChancePage",pageScript:"GayFriendDetailPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE},{pageType:i.pageConstant.PAGE_TYPE_HERO_GAY_FRIEND_UNLOCK,prefabPath:"prefab/uiPrefab/mainPrefab/hero/unlockLuckyChance",pageScript:"GayFriendUnlockPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_85,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE,zIndex:i.constant.PAGE_LAYER_PAGE_UP-1},{pageType:i.pageConstant.PAGE_TYPE_GIFT_CODE,prefabPath:"prefab/uiPrefab/mainPrefab/set/giftCodePage",pageScript:"GiftCodePage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE,zIndex:i.constant.PAGE_LAYER_PAGE_UP},{pageType:i.pageConstant.PAGE_TYPE_PIECE_CHANGE,prefabPath:"prefab/uiPrefab/mainPrefab/hero/pieceChangeShowPage",pageScript:"PieceChangePage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_85,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE,zIndex:i.constant.PAGE_LAYER_PAGE_UP},{pageType:i.pageConstant.PAGE_TYPE_MAP_GARRISON_LIST,prefabPath:"prefab/uiPrefab/mainPrefab/world/appointGarrisonHeroPopUp",pageScript:"AppointGarrisonHeroPopUp",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE},{pageType:i.pageConstant.PAGE_TYPE_MAP_DEFEND_REWARD,prefabPath:"prefab/uiPrefab/mainPrefab/world/garrisonRewardPopUp",pageScript:"WorldGarrisonRewardPopUp",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE},{pageType:i.pageConstant.PAGE_TYPE_MAP_DEFEND_UP_LEVEL,prefabPath:"prefab/uiPrefab/mainPrefab/world/garrisonHeroUpgrade",pageScript:"WorldGarrisonHeroUpgradePopUp",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_85,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_NONE},{pageType:i.pageConstant.PAGE_TYPE_MAP_QUICK_DEFEND,prefabPath:"prefab/uiPrefab/mainPrefab/world/oneClickGarrisonHeroPopUp",pageScript:"WorldQuickGarrisonPopUp",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE},{pageType:i.pageConstant.PAGE_TYPE_MAP_DEFEND_SPEED,prefabPath:"prefab/uiPrefab/mainPrefab/world/garrisonSpeedUpPopUp",pageScript:"WorldGarrisonSpeedUpPopUp",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE},{pageType:i.pageConstant.PAGE_TYPE_PLAYER_LOCK,prefabPath:"prefab/uiPrefab/mainPrefab/main/accountErroPage",pageScript:"PlayerLockPopUp",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE,zIndex:i.constant.PAGE_LAYER_LOADING_CYCLE},{pageType:i.pageConstant.PAGE_TYPE_MAIN_LINE_TASK,prefabPath:"prefab/uiPrefab/mainPrefab/main/newTaskDetailPopUp",pageScript:"MainTaskPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE_MOVE},{pageType:i.pageConstant.PAGE_TYPE_MAIN_FRIEND_INVITE,prefabPath:"prefab/uiPrefab/mainPrefab/invite/invitePopUp",pageScript:"InvitePopUp",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE_MOVE,zIndex:i.constant.PAGE_LAYER_TOP_BAR_DOWN},{pageType:i.pageConstant.PAGE_TYPE_MAIN_SUBSCRIBE,prefabPath:"prefab/uiPrefab/mainPrefab/subscribe/subscribePopUp",pageScript:"SubscribePopUp",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE_MOVE,zIndex:i.constant.PAGE_LAYER_TOP_BAR_DOWN},{pageType:i.pageConstant.PAGE_TYPE_VERSION_UPDATE,prefabPath:"prefab/uiPrefab/versionUpdate/versionUpdatePage",pageScript:"VersionUpdatePage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE_MOVE,zIndex:i.constant.PAGE_LAYER_TOP_BAR_DOWN},{pageType:i.pageConstant.PAGE_TYPE_SPEED_AD_TRY,prefabPath:"prefab/uiPrefab/battleUiPrefab/speedUp/speedUpPage",pageScript:"SpeedAdTryPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE_MOVE},{pageType:i.pageConstant.PAGE_TYPE_MAIN_TASK_LOTTERY,prefabPath:"prefab/uiPrefab/mainPrefab/main/newTargetMachinePage",pageScript:"NewTargetLotteryPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE_MOVE,zIndex:i.constant.PAGE_LAYER_PAGE_UP},{pageType:i.pageConstant.PAGE_TYPE_FREE_POWER_ADD,prefabPath:"prefab/uiPrefab/mainPrefab/freePower/freePowerAddPopUp",pageScript:"FreePowerAddPopup",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE},{pageType:i.pageConstant.PAGE_TYPE_FREE_POWER_REWARD,prefabPath:"prefab/uiPrefab/mainPrefab/freePower/freePowerPopUp",pageScript:"FreePowerRewardPopup",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE},{pageType:i.pageConstant.PAGE_TYPE_HERO_TRY,prefabPath:"prefab/uiPrefab/battleUiPrefab/soldierTrial/soldierTrialPageNew",pageScript:"SoldierTrialPageNew",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE_MOVE},{pageType:i.pageConstant.PAGE_TYPE_LIMIT_TOWER,prefabPath:"prefab/uiPrefab/battleUiPrefab/tower/limitTowerPage",pageScript:"LimitTowerPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE},{pageType:i.pageConstant.PAGE_TYPE_YEAR_MONSTER,prefabPath:"prefab/uiPrefab/mainPrefab/monster/monsterPage",pageScript:"YearMonsterPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE_MOVE,zIndex:i.constant.PAGE_LAYER_TOP_BAR_DOWN},{pageType:i.pageConstant.PAGE_TYPE_YEAR_MONSTER_RESULT,prefabPath:"prefab/uiPrefab/mainPrefab/monster/resultPage",pageScript:"YearMonsterResultPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE_MOVE},{pageType:i.pageConstant.PAGE_TYPE_QUICK_DEFEND_CHOOSE_HERO,prefabPath:"prefab/uiPrefab/mainPrefab/world/chooseGarrisonHeroPopUp",pageScript:"WorldQuickGarrisonHeroPopUp",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE},{pageType:i.pageConstant.PAGE_TYPE_APPOINT_HERO,prefabPath:"prefab/uiPrefab/mainPrefab/hero/appointHeroPopUp",pageScript:"AppointHeroPopUp",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE},{pageType:i.pageConstant.PAGE_TYPE_APPOINT_GAY_FRIEND,prefabPath:"prefab/uiPrefab/mainPrefab/hero/appointLuckyChancePopUp",pageScript:"AppointGayFriendPopUp",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE},{pageType:i.pageConstant.PAGE_TYPE_ALLIANCE,prefabPath:"prefab/uiPrefab/mainPrefab/alliance/alliancePage",pageScript:"AlliancePage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE},{pageType:i.pageConstant.PAGE_TYPE_ALLIANCE_JOIN,prefabPath:"prefab/uiPrefab/mainPrefab/alliance/allianceJoinPage",pageScript:"AllianceJoinPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE},{pageType:i.pageConstant.PAGE_TYPE_ALLIANCE_EXIT,prefabPath:"prefab/uiPrefab/mainPrefab/alliance/allianceExitPage",pageScript:"AllianceExitPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE,zIndex:i.constant.PAGE_LAYER_PAGE_UP},{pageType:i.pageConstant.PAGE_TYPE_YEAR_TASK,prefabPath:"prefab/uiPrefab/mainPrefab/springGift/springGiftPage",pageScript:"SpringGiftPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE,zIndex:i.constant.PAGE_LAYER_TOP_BAR_DOWN},{pageType:i.pageConstant.PAGE_TYPE_ALLIANCE_RED,prefabPath:"prefab/uiPrefab/mainPrefab/alliance/allianceRedpackPage",pageScript:"AllianceRedpackPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE},{pageType:i.pageConstant.PAGE_TYPE_ALLIANCE_RED_LOOK,prefabPath:"prefab/uiPrefab/mainPrefab/alliance/allianceRedpackLookPage",pageScript:"AllianceRedpackLookPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE},{pageType:i.pageConstant.PAGE_TYPE_NEW_YEAR_MEDAL_UP,prefabPath:"prefab/uiPrefab/mainPrefab/springGift/springGiftGetBadgePage",pageScript:"SpringGiftMedalUpPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_NONE},{pageType:i.pageConstant.PAGE_TYPE_YEAR_ACTIVITY,prefabPath:"prefab/uiPrefab/mainPrefab/main/newYearActivityPage",pageScript:"NewYearActivityPage",blackNodeType:i.pageConstant.BLACK_NODE_TYPE_BLACK_70,showAnimType:i.pageConstant.OPEN_PAGE_ANIMATION_SCALE}]}}),i.loadPrefabList=[{pageType:i.pageConstant.PAGE_TYPE_PAUSE,prefabPath:"prefab/uiPrefab/battleUiPrefab/pause/GamePausePage"},{pageType:i.pageConstant.PAGE_TYPE_REVIVAL,prefabPath:"prefab/uiPrefab/battleUiPrefab/GameRevivalPage"},{pageType:i.pageConstant.PAGE_TYPE_RESULT,prefabPath:"prefab/uiPrefab/battleUiPrefab/GameResultPage"},{pageType:i.pageConstant.PAGE_TYPE_BATTLE_PIGGY_BANK,prefabPath:"prefab/uiPrefab/battleUiPrefab/battlePiggyBankPage"},{pageType:i.pageConstant.PAGE_TYPE_SECOND_HERO_CONFIRM,prefabPath:"prefab/uiPrefab/battleUiPrefab/hero/secondHeroConfirmPopUp"},{pageType:i.pageConstant.PAGE_TYPE_SECOND_HERO_CHOOSE,prefabPath:"prefab/uiPrefab/battleUiPrefab/hero/secondHeroChoosePopUp"},{pageType:i.pageConstant.PAGE_TYPE_PIGGY_BANK,prefabPath:"prefab/uiPrefab/mainPrefab/piggyBank/piggyBankPage"},{pageType:i.pageConstant.PAGE_TYPE_DEBUG,prefabPath:"prefab/debugPrefab/debugPage"},{pageType:i.pageConstant.PAGE_TYPE_BATTLE_SKILL,prefabPath:"prefab/uiPrefab/battleUiPrefab/skill/GameBattleSkillPage"},{pageType:i.pageConstant.PAGE_TYPE_CAPTURE,prefabPath:"prefab/uiPrefab/battleUiPrefab/captureImagePage"},{pageType:i.pageConstant.PAGE_TYPE_MAIN_SHOP_REWARD,prefabPath:"prefab/uiPrefab/mainPrefab/shop/shopDrawPage"},{pageType:i.pageConstant.PAGE_TYPE_MAIN_SKILL_DETAIL,prefabPath:"prefab/uiPrefab/mainPrefab/skill/skillDetaliPage"},{pageType:i.pageConstant.PAGE_TYPE_MAIN_SKILL_STAR,prefabPath:"prefab/uiPrefab/mainPrefab/skill/skillStarPage"},{pageType:i.pageConstant.PAGE_TYPE_MAIN_LACK_OF_MATERIAL,prefabPath:"prefab/uiPrefab/mainPrefab/tower/lackOfMaterialPopUp"},{pageType:i.pageConstant.PAGE_TYPE_MAIN_TOWER_WAKE,prefabPath:"prefab/uiPrefab/mainPrefab/hero/heroWakePage"},{pageType:i.pageConstant.PAGE_TYPE_MAIN_HERO_DETAIL,prefabPath:"prefab/uiPrefab/mainPrefab/hero/heroDetailPopUp"},{pageType:i.pageConstant.PAGE_TYPE_MAIN_HANG_UP,prefabPath:"prefab/uiPrefab/mainPrefab/hangUp/hangUpPage"},{pageType:i.pageConstant.PAGE_TYPE_MAIN_HERO_CHOOSE,prefabPath:"prefab/uiPrefab/mainPrefab/hero/heroChoosePopUp"},{pageType:i.pageConstant.PAGE_TYPE_MAIN_HERO_CHOOSE_OBTAINED,prefabPath:"prefab/uiPrefab/mainPrefab/hero/heroObtainedPopUp"},{pageType:i.pageConstant.PAGE_TYPE_MAIN_HERO_PIECE_SOURCE,prefabPath:"prefab/uiPrefab/mainPrefab/hero/heroPieceSourcePopUp"},{pageType:i.pageConstant.PAGE_TYPE_MAIN_TASK,prefabPath:"prefab/uiPrefab/mainPrefab/task/taskPage"},{pageType:i.pageConstant.PAGE_TYPE_MAIN_PLAYER_OFFICIAL,prefabPath:"prefab/uiPrefab/mainPrefab/officialPosition/officialPositionPopUp"},{pageType:i.pageConstant.PAGE_TYPE_MAIN_INSTANCE_BOX_REWARD,prefabPath:"prefab/uiPrefab/mainPrefab/chapter/InstanceBoxRewardsPopUp"},{pageType:i.pageConstant.PAGE_TYPE_SETTING,prefabPath:"prefab/uiPrefab/mainPrefab/set/setPage"},{pageType:i.pageConstant.PAGE_TYPE_RENAME,prefabPath:"prefab/uiPrefab/mainPrefab/set/nameChangePopUp"},{pageType:i.pageConstant.PAGE_TYPE_FEEDBACK,prefabPath:"prefab/uiPrefab/mainPrefab/set/feedBackPage"},{pageType:i.pageConstant.PAGE_TYPE_LANGUAGE,prefabPath:"prefab/uiPrefab/mainPrefab/set/languageChangePopUp"},{pageType:i.pageConstant.PAGE_TYPE_MAIN_RANK,prefabPath:"prefab/uiPrefab/mainPrefab/rank/rankPage"},{pageType:i.pageConstant.PAGE_TYPE_BATTLE_NEW_ENEMY,prefabPath:"prefab/uiPrefab/battleUiPrefab/battleEnemy/battleEnemyIntroduce"},{pageType:i.pageConstant.PAGE_TYPE_NEW_TARGET,prefabPath:"prefab/uiPrefab/mainPrefab/main/newTask"},{pageType:i.pageConstant.PAGE_TYPE_MAIN_POWER,prefabPath:"prefab/uiPrefab/mainPrefab/power/powerBuyPage"},{pageType:i.pageConstant.PAGE_TYPE_PICTORIAL,prefabPath:"prefab/uiPrefab/mainPrefab/pictorial/pictorialPage"},{pageType:i.pageConstant.PAGE_TYPE_PICTORIAL_ENEMY_DETAIL,prefabPath:"prefab/uiPrefab/mainPrefab/pictorial/pictorialEnemyDetailPage"},{pageType:i.pageConstant.PAGE_TYPE_PICTORIAL_TOWER_DETAIL,prefabPath:"prefab/uiPrefab/mainPrefab/pictorial/pictorialTowerDetailPage"},{pageType:i.pageConstant.PAGE_TYPE_MAIN_NEW_FUNCTION,prefabPath:"prefab/uiPrefab/mainPrefab/openNewFunc/openNewFunc"},{pageType:i.pageConstant.PAGE_TYPE_SPEED_TRY,prefabPath:"prefab/uiPrefab/battleUiPrefab/try/tryFunc"},{pageType:i.pageConstant.PAGE_TYPE_MAIN_HERO_WAKE,prefabPath:"prefab/uiPrefab/mainPrefab/hero/heroWakePage"},{pageType:i.pageConstant.PAGE_TYPE_BATTLE_START_BUFF,prefabPath:"prefab/uiPrefab/battleUiPrefab/gift/giftPage"},{pageType:i.pageConstant.PAGE_TYPE_MAIN_HERO_CONFIRM_PAGE,prefabPath:"prefab/uiPrefab/mainPrefab/hero/heroConfirmPage"},{pageType:i.pageConstant.PAGE_TYPE_BATTLE_SKILL_AD_UP,prefabPath:"prefab/uiPrefab/battleUiPrefab/skill/GameBattleSkillUpgradeTipsPage"},{pageType:i.pageConstant.PAGE_TYPE_BATTLE_OPEN_BOX,prefabPath:"prefab/uiPrefab/battleUiPrefab/battleBox/battleBoxPage"},{pageType:i.pageConstant.PAGE_TYPE_ROLE_INFO,prefabPath:"prefab/uiPrefab/mainPrefab/roleDetail/roleDetailPage"},{pageType:i.pageConstant.PAGE_TYPE_ROLE_ICON,prefabPath:"prefab/uiPrefab/mainPrefab/roleDetail/chooseHeadPage"},{pageType:i.pageConstant.PAGE_TYPE_SIGN,prefabPath:"prefab/uiPrefab/mainPrefab/sign/signPage"},{pageType:i.pageConstant.PAGE_TYPE_SOLDIER_TRIAL,prefabPath:"prefab/uiPrefab/battleUiPrefab/soldierTrial/soldierTrialPage"},{pageType:i.pageConstant.PAGE_TYPE_HERO_CHOOSE,prefabPath:"prefab/uiPrefab/mainPrefab/hero/changeHeroConfirmPage"},{pageType:i.pageConstant.PAGE_TYPE_QUICKLY_BATTLE,prefabPath:"prefab/uiPrefab/mainPrefab/hangUp/quicklyHangUp"},{pageType:i.pageConstant.PAGE_TYPE_HERO_TOWER_UNLOCK,prefabPath:"prefab/uiPrefab/battleUiPrefab/tower/heroTowerUnlockPage "},{pageType:i.pageConstant.PAGE_TYPE_CLEAR_ACCOUNT,prefabPath:"prefab/uiPrefab/mainPrefab/set/delateReplayConfirmPage"},{pageType:i.pageConstant.PAGE_TYPE_EMAIL,prefabPath:"prefab/uiPrefab/mainPrefab/email/emailPage"},{pageType:i.pageConstant.PAGE_TYPE_EMAIL_FEEDBACK,prefabPath:"prefab/uiPrefab/mainPrefab/email/emailDetailFeedbackPage"},{pageType:i.pageConstant.PAGE_TYPE_EMAIL_GLOBAL,prefabPath:"prefab/uiPrefab/mainPrefab/email/emailDetailPage"},{pageType:i.pageConstant.PAGE_TYPE_TIME_ERROR,prefabPath:"prefab/uiPrefab/mainPrefab/main/timeErrorPage"},{pageType:i.pageConstant.PAGE_TYPE_ENTER_BATTLE_TIP,prefabPath:"prefab/uiPrefab/mainPrefab/chapter/fightPowerRecommendPage"},{pageType:i.pageConstant.PAGE_TYPE_VIP,prefabPath:"prefab/uiPrefab/mainPrefab/vip/vipPage"},{pageType:i.pageConstant.PAGE_TYPE_MARK,prefabPath:"prefab/uiPrefab/mainPrefab/mark/markPage"},{pageType:i.pageConstant.PAGE_TYPE_VIP_UP,prefabPath:"prefab/uiPrefab/mainPrefab/vip/vipUpgradePage"},{pageType:i.pageConstant.PAGE_TYPE_HERO_GAY_FRIEND,prefabPath:"prefab/uiPrefab/mainPrefab/hero/luckyChancePage"},{pageType:i.pageConstant.PAGE_TYPE_HERO_GAY_FRIEND_UNLOCK,prefabPath:"prefab/uiPrefab/mainPrefab/hero/unlockLuckyChance"},{pageType:i.pageConstant.PAGE_TYPE_GIFT_CODE,prefabPath:"prefab/uiPrefab/mainPrefab/set/giftCodePage"},{pageType:i.pageConstant.PAGE_TYPE_PIECE_CHANGE,prefabPath:"prefab/uiPrefab/mainPrefab/hero/pieceChangeShowPage"},{pageType:i.pageConstant.PAGE_TYPE_MAP_GARRISON_LIST,prefabPath:"prefab/uiPrefab/mainPrefab/world/appointGarrisonHeroPopUp"},{pageType:i.pageConstant.PAGE_TYPE_MAP_DEFEND_REWARD,prefabPath:"prefab/uiPrefab/mainPrefab/world/garrisonRewardPopUp"},{pageType:i.pageConstant.PAGE_TYPE_MAP_DEFEND_UP_LEVEL,prefabPath:"prefab/uiPrefab/mainPrefab/world/garrisonHeroUpgrade"},{pageType:i.pageConstant.PAGE_TYPE_MAP_QUICK_DEFEND,prefabPath:"prefab/uiPrefab/mainPrefab/world/oneClickGarrisonHeroPopUp"},{pageType:i.pageConstant.PAGE_TYPE_MAP_DEFEND_SPEED,prefabPath:"prefab/uiPrefab/mainPrefab/world/garrisonSpeedUpPopUp"},{pageType:i.pageConstant.PAGE_TYPE_PLAYER_LOCK,prefabPath:"prefab/uiPrefab/mainPrefab/main/accountErroPage"},{pageType:i.pageConstant.PAGE_TYPE_MAIN_LINE_TASK,prefabPath:"prefab/uiPrefab/mainPrefab/main/newTaskDetailPopUp"},{pageType:i.pageConstant.PAGE_TYPE_MAIN_FRIEND_INVITE,prefabPath:"prefab/uiPrefab/mainPrefab/invite/invitePopUp"},{pageType:i.pageConstant.PAGE_TYPE_MAIN_SUBSCRIBE,prefabPath:"prefab/uiPrefab/mainPrefab/subscribe/subscribePopUp"},{pageType:i.pageConstant.PAGE_TYPE_VERSION_UPDATE,prefabPath:"prefab/uiPrefab/versionUpdate/versionUpdatePage"},{pageType:i.pageConstant.PAGE_TYPE_SPEED_AD_TRY,prefabPath:"prefab/uiPrefab/battleUiPrefab/speedUp/speedUpPage"},{pageType:i.pageConstant.PAGE_TYPE_MAIN_TASK_LOTTERY,prefabPath:"prefab/uiPrefab/mainPrefab/main/newTargetMachinePage"},{pageType:i.pageConstant.PAGE_TYPE_FREE_POWER_ADD,prefabPath:"prefab/uiPrefab/mainPrefab/freePower/freePowerAddPopUp"},{pageType:i.pageConstant.PAGE_TYPE_FREE_POWER_REWARD,prefabPath:"prefab/uiPrefab/mainPrefab/freePower/freePowerPopUp"},{pageType:i.pageConstant.PAGE_TYPE_HERO_TRY,prefabPath:"prefab/uiPrefab/battleUiPrefab/soldierTrial/soldierTrialPageNew"},{pageType:i.pageConstant.PAGE_TYPE_LIMIT_TOWER,prefabPath:"prefab/uiPrefab/battleUiPrefab/tower/limitTowerPage"},{pageType:i.pageConstant.PAGE_TYPE_YEAR_MONSTER,prefabPath:"prefab/uiPrefab/mainPrefab/monster/monsterPage"},{pageType:i.pageConstant.PAGE_TYPE_YEAR_MONSTER_RESULT,prefabPath:"prefab/uiPrefab/mainPrefab/monster/resultPage"},{pageType:i.pageConstant.PAGE_TYPE_QUICK_DEFEND_CHOOSE_HERO,prefabPath:"prefab/uiPrefab/mainPrefab/world/chooseGarrisonHeroPopUp"},{pageType:i.pageConstant.PAGE_TYPE_APPOINT_HERO,prefabPath:"prefab/uiPrefab/mainPrefab/hero/appointHeroPopUp"},{pageType:i.pageConstant.PAGE_TYPE_APPOINT_GAY_FRIEND,prefabPath:"prefab/uiPrefab/mainPrefab/hero/appointLuckyChancePopUp"},{pageType:i.pageConstant.PAGE_TYPE_ALLIANCE,prefabPath:"prefab/uiPrefab/mainPrefab/alliance/alliancePage"},{pageType:i.pageConstant.PAGE_TYPE_ALLIANCE_JOIN,prefabPath:"prefab/uiPrefab/mainPrefab/alliance/allianceJoinPage"},{pageType:i.pageConstant.PAGE_TYPE_ALLIANCE_EXIT,prefabPath:"prefab/uiPrefab/mainPrefab/alliance/allianceExitPage"},{pageType:i.pageConstant.PAGE_TYPE_YEAR_TASK,prefabPath:"prefab/uiPrefab/mainPrefab/springGift/springGiftPage"},{pageType:i.pageConstant.PAGE_TYPE_ALLIANCE_RED,prefabPath:"prefab/uiPrefab/mainPrefab/alliance/allianceRedpackPage"},{pageType:i.pageConstant.PAGE_TYPE_ALLIANCE_RED_LOOK,prefabPath:"prefab/uiPrefab/mainPrefab/alliance/allianceRedpackLookPage"},{pageType:i.pageConstant.PAGE_TYPE_NEW_YEAR_MEDAL_UP,prefabPath:"prefab/uiPrefab/mainPrefab/springGift/springGiftGetBadgePage"},{pageType:i.pageConstant.PAGE_TYPE_YEAR_ACTIVITY,prefabPath:"prefab/uiPrefab/mainPrefab/main/newYearActivityPage"}],cc._RF.pop()},{}],GameSkillTips:[function(e,t){"use strict";cc._RF.push(t,"9fd58eRAsZALp/YE295q/w6","GameSkillTips");var i=e("Aft");cc.Class({extends:cc.Component,properties:{},start:function(){},initData:function(e){if(this.camp=e.camp,this.heroBgNode=cc.find("heroBg",this.node),this.heroLabelNode=cc.find("heroLabel",this.node),this.enemyBgNode=cc.find("enemyBg",this.node),this.enemyLabelNode=cc.find("enemyLabel",this.node),this.restrainNode=cc.find("luckyChance",this.node),this.restrainLabelNode1=cc.find("luckyChance/label",this.node),this.restrainLabelNode2=cc.find("luckyChance/label1",this.node),this.restrainLabelNode3=cc.find("luckyChance/label2",this.node),this.restrainSprite=cc.find("luckyChance/font",this.node).getComponent(cc.Sprite),this.restrainLabelNodeList=[this.restrainLabelNode1,this.restrainLabelNode2,this.restrainLabelNode3],this.heroBgNode.active=this.camp==i.constant.SKILL_CAMP_HERO,this.heroLabelNode.active=this.camp==i.constant.SKILL_CAMP_HERO,this.enemyBgNode.active=this.camp==i.constant.SKILL_CAMP_ENEMY,this.enemyLabelNode.active=this.camp==i.constant.SKILL_CAMP_ENEMY,this.restrainNode.active=this.camp==i.constant.SKILL_CAMP_RESTRAIN,this.labelNode=null,this.camp==i.constant.SKILL_CAMP_HERO)this.labelNode=this.heroLabelNode,this.label=this.labelNode.getComponent(cc.Label),this.label.string=e.desc;else if(this.camp==i.constant.SKILL_CAMP_ENEMY)this.labelNode=this.enemyLabelNode,this.label=this.labelNode.getComponent(cc.Label),this.label.string=e.desc;else if(this.camp==i.constant.SKILL_CAMP_RESTRAIN){this.labelNode=this.restrainLabelNode,this.restrainSprite.spriteFrame=e.frame;for(var t=e.desc,a=0;a<this.restrainLabelNodeList.length;a++){var n=t.length>a;(this.restrainLabelNodeList[a].active=n)&&(this.restrainLabelNodeList[a].getComponent(cc.Label).string=t[a])}}var o=this.node;o.scale=0,o.opacity=255;var s=cc.delayTime(this.delayTime),r=cc.callFunc(function(){},this),c=cc.scaleTo(.16,1.5),l=cc.scaleTo(.32,1),d=cc.scaleTo(.96,1),h=cc.sequence(c,l,d);e=cc.moveBy(.72,cc.v2(0,40)),c=cc.delayTime(10/30*2.4),l=cc.fadeOut(.64),d=cc.callFunc(function(){i.battleScene.giveBackSkillTips(this.node)},this),d=cc.sequence(c,l,d),d=cc.spawn(h,e,d),d=cc.sequence(s,r,d),o.stopAllActions(),o.runAction(d)},updatePlayer:function(){}}),cc._RF.pop()},{}],GameTextCode:[function(e,t){"use strict";cc._RF.push(t,"b6e87g9X/FPrad/tGSUFZfE","GameTextCode"),e("Aft").GameTextCode={2001:2001,2002:2002,2003:2003,2004:2004,2005:2005,2006:2006,2007:2007,2008:2008,2009:2009,2010:2010,2011:2011,2012:2012,2013:2013,2014:2014,2015:2015,2016:2016,2017:2017,2018:2018,2019:2019,2020:2020,2021:2021,2022:2022,2023:2023,2101:2101,2102:2102,2103:2103,2104:2104,2105:2105,2106:2106,2107:2107,2108:2108,2201:2201,2202:2202,2203:2203,2204:2204,2205:2205,2206:2206,2207:2207,2208:2208,2209:2209,2210:2210,2211:2211,2212:2212,2213:2213,2214:2214,2215:2215,2216:2216,2301:2301,2302:2302,2303:2303,2304:2304,2305:2305,2306:2306,2307:2307,2308:2308,2309:2309,2310:2310,2311:2311,2312:2312,2313:2313,2314:2314,2315:2315,82316:82316,200001:200001,200002:200002,200003:200003,200004:200004,200005:200005,200006:200006,200007:200007,200008:200008,200009:200009,200010:200010,200011:200011,200012:200012,200013:200013,200014:200014,200015:200015,200016:200016,200017:200017,200018:200018,200019:200019,VIP_TIPS_1_1:200020,VIP_TIPS_2_1:200021,VIP_TIPS_3_1:200022,VIP_TIPS_4_1:200023,VIP_TIPS_5_1:200024,VIP_TIPS_6_1:200025,VIP_TIPS_7_1:200026,VIP_TIPS_8_1:200027,VIP_TIPS_9_1:200028,VIP_TIPS_10_1:200029,VIP_TIPS_11_1:200030,VIP_TIPS_12_1:200031,VIP_TIPS_13_1:200032,VIP_TIPS_14_1:200033,VIP_TIPS_15_1:200034,VIP_TIPS_16_1:200035,VIP_TIPS_17_1:200036,3e3:3e3,3001:3001,3002:3002,3003:3003,3004:3004,3005:3005,3006:3006,3007:3007,3008:3008,3009:3009,3010:3010,3011:3011,3012:3012,3013:3013,3014:3014,3015:3015,3101:3101,3102:3102,3103:3103,3104:3104,3105:3105,3106:3106,3107:3107,3108:3108,3109:3109,3110:3110,3111:3111,3112:3112,3113:3113,3114:3114,3115:3115,3116:3116,3117:3117,3118:3118,3119:3119,3120:3120,3121:3121,3122:3122,3123:3123,3124:3124,3125:3125,3126:3126,3201:3201,3202:3202,3203:3203,3204:3204,3205:3205,3206:3206,3207:3207,3208:3208,3301:3301,3302:3302,3303:3303,3304:3304,3305:3305,3306:3306,3307:3307,3308:3308,3309:3309,3401:3401,3402:3402,3403:3403,3404:3404,3405:3405,3406:3406,3407:3407,3408:3408,3501:3501,3502:3502,3503:3503,3504:3504,3505:3505,3506:3506,3507:3507,3508:3508,4001:4001,4002:4002,4003:4003,4004:4004,4005:4005,4006:4006,4007:4007,4008:4008,4009:4009,4010:4010,4011:4011,4012:4012,4013:4013,4014:4014,4015:4015,4016:4016,4017:4017,4101:4101,4102:4102,4103:4103,4104:4104,4105:4105,4106:4106,4107:4107,4108:4108,4109:4109,4110:4110,4111:4111,4201:4201,4202:4202,4203:4203,4204:4204,4205:4205,4206:4206,4207:4207,4208:4208,4301:4301,4302:4302,4303:4303,4304:4304,4305:4305,4306:4306,4307:4307,4308:4308,4309:4309,4310:4310,4311:4311,4312:4312,4313:4313,4314:4314,4315:4315,4316:4316,4317:4317,4401:4401,4402:4402,4403:4403,4404:4404,4405:4405,4406:4406,4407:4407,4408:4408,4409:4409,4410:4410,4411:4411,4501:4501,4502:4502,4503:4503,4504:4504,4505:4505,4506:4506,4507:4507,40101:40101,40102:40102,40103:40103,40104:40104,40105:40105,40201:40201,40202:40202,40203:40203,40204:40204,40205:40205,40301:40301,40302:40302,40303:40303,40304:40304,40305:40305,40401:40401,40402:40402,40403:40403,40404:40404,40405:40405,40501:40501,40502:40502,40503:40503,40504:40504,40505:40505,40601:40601,40602:40602,40603:40603,40604:40604,40605:40605,40701:40701,40702:40702,40703:40703,40704:40704,40705:40705,40801:40801,40802:40802,40803:40803,40804:40804,40805:40805,40901:40901,40902:40902,40903:40903,40904:40904,40905:40905,43001:43001,43002:43002,43003:43003,43004:43004,43005:43005,43101:43101,43102:43102,43103:43103,43104:43104,43105:43105,43201:43201,43202:43202,43203:43203,43204:43204,43205:43205,43301:43301,43302:43302,43303:43303,43304:43304,43305:43305,41101:41101,41102:41102,41103:41103,41104:41104,41105:41105,41201:41201,41202:41202,41203:41203,41204:41204,41205:41205,41301:41301,41302:41302,41303:41303,41304:41304,41305:41305,41401:41401,41402:41402,41403:41403,41404:41404,41405:41405,41501:41501,41502:41502,41503:41503,41504:41504,41505:41505,41601:41601,41602:41602,41603:41603,41604:41604,41605:41605,41701:41701,41702:41702,41703:41703,41704:41704,41705:41705,41801:41801,41802:41802,41803:41803,41804:41804,41805:41805,41901:41901,41902:41902,41903:41903,41904:41904,41905:41905,44001:44001,44002:44002,44003:44003,44004:44004,44005:44005,44101:44101,44102:44102,44103:44103,44104:44104,44105:44105,44201:44201,44202:44202,44203:44203,44204:44204,44205:44205,44301:44301,44302:44302,44303:44303,44304:44304,44305:44305,42001:42001,42002:42002,42003:42003,42004:42004,42005:42005,42006:42006,42007:42007,42008:42008,42009:42009,42010:42010,42011:42011,42012:42012,42013:42013,42014:42014,42015:42015,42016:42016,42017:42017,42018:42018,42019:42019,42020:42020,50001:50001,50002:50002,50003:50003,50004:50004,50005:50005,50006:50006,50007:50007,50008:50008,50009:50009,50010:50010,50011:50011,50012:50012,50013:50013,50014:50014,50015:50015,50016:50016,50017:50017,50018:50018,50019:50019,50020:50020,50021:50021,51001:51001,51002:51002,51003:51003,51004:51004,51005:51005,51006:51006,51007:51007,51008:51008,51009:51009,51010:51010,51011:51011,51012:51012,51013:51013,51014:51014,51015:51015,51016:51016,51017:51017,51018:51018,51019:51019,51020:51020,51021:51021,51022:51022,51023:51023,51024:51024,51025:51025,51026:51026,51027:51027,51028:51028,51029:51029,51030:51030,51031:51031,51032:51032,51033:51033,51034:51034,51035:51035,51036:51036,51037:51037,51038:51038,51039:51039,51040:51040,51041:51041,51042:51042,51043:51043,51044:51044,51045:51045,51046:51046,51047:51047,51048:51048,51049:51049,51050:51050,51051:51051,51052:51052,51053:51053,51054:51054,51055:51055,51056:51056,51057:51057,51058:51058,51059:51059,51060:51060,51061:51061,51062:51062,51063:51063,51064:51064,51065:51065,51066:51066,51067:51067,51068:51068,51069:51069,51070:51070,51071:51071,51072:51072,51073:51073,51074:51074,51075:51075,51076:51076,51077:51077,51078:51078,51079:51079,GUIDE_BUBBLE_01:52001,GUIDE_BUBBLE_02:52002,GUIDE_BUBBLE_03:52003,GUIDE_BUBBLE_04:52004,GUIDE_BUBBLE_05:52005,GUIDE_BUBBLE_06:52006,GUIDE_BUBBLE_07:52007,GUIDE_BUBBLE_08:52008,GUIDE_BUBBLE_09:52009,GUIDE_BUBBLE_10:52010,GUIDE_BUBBLE_11:52011,GUIDE_BUBBLE_12:52012,GUIDE_BUBBLE_13:52013,GUIDE_BUBBLE_14:52014,GUIDE_BUBBLE_15:52015,52016:52016,52017:52017,52018:52018,GUIDE_BUBBLE_17:52019,1001:1001,1002:1002,1003:1003,1004:1004,1005:1005,ENOUGH_IRON:1006,1007:1007,1008:1008,1009:1009,1010:1010,1011:1011,1012:1012,1013:1013,1014:1014,1015:1015,1016:1016,1017:1017,1018:1018,1019:1019,1020:1020,1021:1021,1022:1022,1023:1023,1024:1024,1025:1025,1026:1026,1027:1027,1028:1028,1029:1029,1030:1030,1031:1031,1032:1032,1033:1033,1034:1034,1035:1035,1036:1036,1037:1037,1038:1038,1039:1039,1040:1040,1041:1041,1042:1042,1043:1043,1044:1044,1045:1045,1046:1046,1047:1047,1048:1048,1049:1049,1050:1050,1051:1051,1052:1052,1053:1053,1054:1054,1055:1055,1056:1056,1057:1057,1058:1058,1059:1059,1060:1060,1061:1061,1062:1062,1063:1063,1064:1064,1065:1065,1066:1066,1067:1067,1068:1068,1069:1069,1070:1070,1071:1071,1072:1072,1073:1073,1074:1074,1075:1075,1076:1076,1077:1077,1078:1078,1079:1079,1080:1080,1081:1081,1082:1082,1083:1083,1084:1084,1085:1085,1086:1086,1087:1087,1088:1088,TIPS_LOCKED:1089,1090:1090,1091:1091,1092:1092,1093:1093,1094:1094,1095:1095,1096:1096,1097:1097,1098:1098,1099:1099,TOWER_TYPE_3:1100,TOWER_TYPE_2:1101,TOWER_TYPE_4:1102,1103:1103,1104:1104,1105:1105,1106:1106,1107:1107,1108:1108,1109:1109,1110:1110,1111:1111,1112:1112,1113:1113,1114:1114,1115:1115,1116:1116,1117:1117,1118:1118,1119:1119,1120:1120,TOWER_TYPE_1:1121,1122:1122,1123:1123,ITEM_SHOW:1124,1125:1125,1126:1126,1127:1127,1128:1128,ENOUGH_DIAMONDS:1129,HERO_DEAD:1130,1131:1131,1132:1132,1133:1133,1134:1134,1135:1135,1136:1136,1137:1137,1138:1138,1139:1139,1140:1140,1141:1141,1142:1142,1143:1143,1144:1144,1145:1145,1146:1146,1147:1147,UNDER_SEAL:1148,1149:1149,1150:1150,NETWORK_NOT_CONNECTED:1151,UNLOCK_BY_INSTANCE:1152,NO_HERO:1153,NO_ADS:1154,SHOW_ADS_ERROR:1155,1156:1156,1157:1157,1158:1158,1159:1159,1160:1160,1161:1161,1162:1162,1163:1163,1164:1164,1165:1165,1166:1166,1167:1167,1168:1168,1169:1169,1170:1170,1171:1171,1172:1172,1173:1173,1174:1174,1175:1175,1176:1176,1177:1177,1178:1178,1179:1179,1180:1180,1181:1181,1182:1182,1183:1183,1184:1184,1185:1185,1186:1186,1187:1187,1188:1188,1189:1189,1190:1190,1191:1191,1192:1192,1193:1193,1194:1194,1195:1195,1196:1196,1197:1197,1198:1198,1199:1199,1200:1200,1201:1201,1202:1202,1203:1203,1204:1204,1205:1205,1206:1206,1207:1207,1208:1208,1209:1209,1210:1210,SOLDIER_NUMBER:1211,1212:1212,1213:1213,HERO_SKILL_PASSIVE:1214,1215:1215,1216:1216,1217:1217,ALL:1218,1219:1219,1220:1220,1221:1221,1222:1222,1223:1223,1224:1224,1225:1225,1226:1226,1227:1227,1228:1228,HERO_SKILL_INACTIVE:1229,1230:1230,1231:1231,1232:1232,1233:1233,1234:1234,1235:1235,1236:1236,1237:1237,1238:1238,1239:1239,1240:1240,1241:1241,1242:1242,1243:1243,1244:1244,1245:1245,1246:1246,1247:1247,1248:1248,1249:1249,1250:1250,1251:1251,1252:1252,1253:1253,1254:1254,1255:1255,1256:1256,FEEDBACK_TIPS:1257,1258:1258,1259:1259,1260:1260,1261:1261,1262:1262,1263:1263,1264:1264,1265:1265,1266:1266,1267:1267,1268:1268,1269:1269,1270:1270,1271:1271,1272:1272,1273:1273,1274:1274,1275:1275,1276:1276,1277:1277,1278:1278,1279:1279,1280:1280,1281:1281,1282:1282,1283:1283,1284:1284,1285:1285,1286:1286,1287:1287,1288:1288,1289:1289,1290:1290,1291:1291,1292:1292,1293:1293,1294:1294,1295:1295,1296:1296,1297:1297,1298:1298,1299:1299,1300:1300,1301:1301,1302:1302,1303:1303,1304:1304,1305:1305,1306:1306,1307:1307,1308:1308,1309:1309,1310:1310,1311:1311,1312:1312,1313:1313,1314:1314,1315:1315,MASK_WORD:1316,ILLEGAL_CHARACTER:1317,PLEASE_ENTER_HERE:1318,MAX_ENTER_CHARACTER:1319,FEEDBACK_SUCCEED:1320,1321:1321,NEW_ENEMY_INTRODUCE_TITLE:1322,1323:1323,1324:1324,1325:1325,POWER_NOT_ENOUGH:1326,1327:1327,1328:1328,1329:1329,1330:1330,1331:1331,1332:1332,1333:1333,1334:1334,1335:1335,1336:1336,COIN_NOT_ENOUGH:1337,TOWER_QUALITY_UNLOCK:1338,TOWER_QUALITY_100:1339,TOWER_QUALITY_200:1340,TOWER_QUALITY_300:1341,TOWER_QUALITY_400:1342,OFFICIAL_UNLOCK_TIPS:1343,1344:1344,1345:1345,1346:1346,1347:1347,1348:1348,1349:1349,1350:1350,1351:1351,1352:1352,1353:1353,1354:1354,1355:1355,1356:1356,1357:1357,1358:1358,1359:1359,1360:1360,1361:1361,1362:1362,1363:1363,1364:1364,1365:1365,1366:1366,1367:1367,1368:1368,1369:1369,1370:1370,1371:1371,1372:1372,1373:1373,1374:1374,1375:1375,1376:1376,1377:1377,1378:1378,1379:1379,1380:1380,1381:1381,1382:1382,1383:1383,1384:1384,1385:1385,NO_TOWER_HERO:1386,HEAD_LOCK_TIPS:1387,1388:1388,1389:1389,1390:1390,1391:1391,1392:1392,1393:1393,1394:1394,1395:1395,LEVEL_NOT_ENOUGH:1396,CARD_NOT_ENOUGH:1397,1398:1398,1399:1399,EXP_NOT_ENOUGH:1400,1401:1401,1402:1402,1403:1403,1404:1404,1405:1405,DID_NOT_ARRIVE:1406,SIGN_COMMON:1407,1408:1408,1409:1409,1410:1410,1411:1411,1412:1412,COMING_SOON:1413,1414:1414,1417:1417,1418:1418,TOWER_MAX_LEVEL:1419,TOWER_MAX_QUALITY:1420,NETWORK_ERROR:1421,SYSTEM_TIME_ERROR:1422,SIGN_SEVEN:1423,1424:1424,NO_MORE_KEY:1425,1426:1426,1427:1427,1428:1428,1429:1429,1430:1430,SIGN_TOMORROW:1431,SIGN_TODAY:1432,1433:1433,SHOP_BOX_TIPS:1434,1435:1435,UNLOCK_BY_INSTANCE_BASE:1436,1437:1437,1438:1438,1439:1439,1440:1440,1441:1441,HANG_UP_HERO_ADD:1442,1443:1443,LOADING_DEFAULT_TIPS:1444,1445:1445,1446:1446,1447:1447,1448:1448,1449:1449,1450:1450,1451:1451,1452:1452,1453:1453,1454:1454,1455:1455,1456:1456,1457:1457,1458:1458,1459:1459,1460:1460,1461:1461,1462:1462,1463:1463,1464:1464,1465:1465,1466:1466,1467:1467,1468:1468,1469:1469,1470:1470,1471:1471,1472:1472,1473:1473,1474:1474,1475:1475,1476:1476,1477:1477,1478:1478,1479:1479,1480:1480,1481:1481,1482:1482,1483:1483,1484:1484,1485:1485,1486:1486,NONE_LABEL:1487,1488:1488,1489:1489,1490:1490,1491:1491,1492:1492,1493:1493,1494:1494,1495:1495,1496:1496,UNLOCK_SKILL_BY_INSTANCE:1497,1498:1498,UNLOCK_SKILL_BY_GUIDE:1499,ENEMY_RENEGADE:1500,1501:1501,1502:1502,1503:1503,1504:1504,1505:1505,1506:1506,1507:1507,1508:1508,1509:1509,1510:1510,1511:1511,1512:1512,1513:1513,HERO_SKILL_TYPE_VAN:1514,HERO_SKILL_TYPE_ENTER_TOWER:1515,HERO_SKILL_TYPE_TALENT:1516,1517:1517,1518:1518,1519:1519,1520:1520,1521:1521,1522:1522,1523:1523,1524:1524,1525:1525,1526:1526,INSTANCE_REWARD_TIPS:1527,1528:1528,1529:1529,1530:1530,1531:1531,1532:1532,1533:1533,1534:1534,1535:1535,1536:1536,1537:1537,1538:1538,1539:1539,1540:1540,1541:1541,1542:1542,1543:1543,1544:1544,1545:1545,1546:1546,1547:1547,1548:1548,1549:1549,1550:1550,1551:1551,1552:1552,1553:1553,1554:1554,COPY_SUCCESSED:1555,QQ_VERSION:1556,1557:1557,1558:1558,1559:1559,1560:1560,1561:1561,1562:1562,1563:1563,1564:1564,1565:1565,1566:1566,1567:1567,1568:1568,1569:1569,1570:1570,1571:1571,1572:1572,1573:1573,1574:1574,1575:1575,1576:1576,NETWORK_ERROR_TIPS:1577,SYSTEM_TIME_ERROR_TIPS:1578,1579:1579,SET_HERO_INSTANCE:1580,1581:1581,1582:1582,NO_EMAIL:1583,1584:1584,1585:1585,1586:1586,1587:1587,ENEMY_ATTRIBUTE_GROW_LEVEL:1588,1589:1589,1590:1590,1591:1591,1592:1592,1593:1593,1594:1594,PICTORIAL_ENEMY_TITLE_DETAIL:1595,1596:1596,1597:1597,1598:1598,1599:1599,1600:1600,1601:1601,1602:1602,1603:1603,1604:1604,1605:1605,1606:1606,1607:1607,1608:1608,1609:1609,1610:1610,1611:1611,1612:1612,1613:1613,1614:1614,ENEMY_ATTRIBUTE_GROW_TYPE:1615,1616:1616,1617:1617,1618:1618,1619:1619,1620:1620,1621:1621,1622:1622,1623:1623,1624:1624,1625:1625,1626:1626,1627:1627,1628:1628,1629:1629,1630:1630,1631:1631,1632:1632,UNLOCK_BY_NEW_HERO:1633,VIP_TIPS_1:1634,VIP_TIPS_2:1635,VIP_TIPS_3:1636,VIP_TIPS_4:1637,VIP_TIPS_5:1638,VIP_TIPS_6:1639,VIP_TIPS_7:1640,VIP_TIPS_8:1641,VIP_TIPS_9:1642,VIP_TIPS_10:1643,VIP_TIPS_11:1644,VIP_TIPS_12:1645,HANDBOOK_TIP_1:1646,HANDBOOK_TIP_2:1647,HANDBOOK_TIP_3:1648,HANDBOOK_TIP_4:1649,HANDBOOK_TIP_5:1650,HANDBOOK_TIP_6:1651,HANDBOOK_TIP_7:1652,HANDBOOK_TIP_8:1653,HANDBOOK_TIP_9:1654,HANDBOOK_TIP_10:1655,HANDBOOK_TIP_11:1656,HANDBOOK_NO_DESC:1657,NO_EMAIL_READED:1658,NO_EMAIL_REWARD:1659,VIP_MAX_LEVEL:1660,VIP_SPEED_LEVEL:1661,1662:1662,APPSTORE_SCORE_TIPS_ONE:1663,APPSTORE_SCORE_TIPS_TWO:1664,APPSTORE_SCORE_GO_FEEDBACK:1665,1666:1666,APPSTORE_SCORE_GO:1667,1668:1668,1669:1669,1670:1670,1671:1671,PIGGYBANK_GET:1672,PIGGYBANK_CAN_OPEN:1673,PIGGYBANK_FULL:1674,PIGGYBANK_TIPS1:1675,PIGGYBANK_TIPS2:1676,PIGGYBANK_TIPS3:1677,1678:1678,1679:1679,1680:1680,1681:1681,1682:1682,1683:1683,1684:1684,1685:1685,1686:1686,1687:1687,1688:1688,1689:1689,1690:1690,1691:1691,1692:1692,1693:1693,1694:1694,1695:1695,1696:1696,1697:1697,1698:1698,1699:1699,1700:1700,VIP_TIPS_13:1701,1702:1702,1703:1703,1704:1704,1705:1705,1706:1706,1707:1707,1708:1708,1709:1709,1710:1710,1711:1711,1712:1712,1713:1713,1714:1714,1715:1715,1716:1716,1717:1717,1718:1718,RECRUITED:1719,NOT_RECRUITED:1720,ENOUGH_HERO_LEVEL:1721,ENOUGH_HERO:1722,ENOUGH_SKILL_CARD:1723,1724:1724,1725:1725,GAY_FRIEND_HEROS_RICH:1726,1727:1727,1728:1728,1729:1729,1730:1730,1731:1731,1732:1732,1733:1733,1734:1734,SAME_HERO:1735,1736:1736,1737:1737,1738:1738,VIP_DESC_01:1739,VIP_DESC_02:1740,VIP_DESC_03:1741,VIP_DESC_04:1742,VIP_DESC_05:1743,VIP_DESC_06:1744,VIP_DESC_07:1745,VIP_DESC_08:1746,VIP_DESC_09:1747,VIP_DESC_10:1748,VIP_DESC_11:1749,VIP_DESC_12:1750,VIP_DESC_13:1751,VIP_DESC_14:1752,1753:1753,1754:1754,1755:1755,1756:1756,1757:1757,1758:1758,1759:1759,GUARD_MAX:1760,GUIDE_BUBBLE_16:1761,1762:1762,1763:1763,1764:1764,1765:1765,1766:1766,1767:1767,1768:1768,1769:1769,VIP_TIPS_14:1770,PIGGYBANK_END:1771,1772:1772,1773:1773,1774:1774,1775:1775,CODE_ERROR_EMPTY:1776,CODE_ERROR_EXPIRED:1777,CODE_ERROR_USED:1778,CODE_ERROR_USED_TYPE:1779,CODE_ERROR_USED_BATCH:1780,1781:1781,1782:1782,1783:1783,CODE_SUCCESSED:1784,LOTTERY_TIMES_NOT_ENOUGH:1785,1786:1786,1787:1787,1788:1788,1789:1789,1790:1790,1791:1791,1792:1792,1793:1793,1794:1794,1795:1795,1796:1796,1797:1797,1798:1798,VIP_TIPS_15:1799,VIP_TIPS_16:1800,VIP_TIPS_17:1801,GUIDE_BUBBLE_18:1802,1803:1803,1804:1804,1805:1805,1806:1806,1807:1807,1808:1808,1809:1809,1810:1810,1811:1811,1812:1812,1813:1813,1814:1814,1815:1815,1816:1816,1817:1817,1818:1818,1819:1819,1820:1820,1821:1821,1822:1822,1823:1823,1824:1824,1825:1825,1826:1826,1827:1827,1828:1828,CLICK_TIPS:1829,1830:1830,1831:1831,1832:1832,1833:1833,1834:1834,1835:1835,1836:1836,1837:1837,1838:1838,1839:1839,1840:1840,1841:1841,1842:1842,1843:1843,1844:1844,1845:1845,1846:1846,1847:1847,1848:1848,1849:1849,1850:1850,NEW_TASK:1851,1852:1852,DATA_ERROR:1853,1854:1854,1855:1855,1856:1856,1857:1857,1858:1858,1859:1859,1860:1860,1861:1861,1862:1862,1863:1863,1864:1864,1865:1865,1866:1866,1867:1867,HEROLEVEL_FULL:1868,NO_IDEA_HERO:1869,ONE_HERO_TIPS:1870,TWO_HERO_TIPS:1871,1872:1872,1873:1873,1874:1874,1875:1875,1876:1876,NO_HERO_SPEED:1877,1878:1878,1879:1879,1880:1880,1881:1881,1882:1882,1883:1883,1884:1884,1885:1885,1886:1886,1887:1887,1888:1888,1889:1889,1890:1890,1891:1891,1892:1892,1893:1893,1894:1894,1895:1895,1896:1896,1897:1897,1898:1898,1899:1899,1900:1900,1901:1901,1902:1902,1903:1903,1904:1904,1905:1905,1906:1906,1907:1907,1908:1908,1909:1909,1910:1910,1911:1911,1912:1912,1913:1913,1914:1914,1915:1915,1916:1916,1917:1917,1918:1918,1919:1919,1920:1920,1921:1921,1922:1922,1923:1923,1924:1924,1925:1925,TOWER_QUALITY_1:1926,TOWER_QUALITY_2:1927,TOWER_QUALITY_3:1928,TOWER_QUALITY_4:1929,TOWER_QUALITY_5:1930,TOWER_QUALITY_6:1931,TOWER_QUALITY_7:1932,TOWER_QUALITY_8:1933,TOWER_QUALITY_9:1934,1935:1935,1936:1936,1937:1937,1938:1938,1939:1939,1940:1940,1941:1941,1942:1942,1943:1943,1944:1944,1945:1945,1946:1946,1947:1947,1948:1948,1949:1949,1950:1950,1951:1951,1952:1952,1953:1953,1954:1954,1955:1955,1956:1956,1957:1957,1958:1958,1959:1959,1960:1960,1961:1961,1962:1962,1963:1963,1964:1964,1965:1965,1966:1966,1967:1967,1968:1968,1969:1969,1970:1970,1971:1971,1972:1972,1973:1973,1974:1974,1975:1975,1976:1976,1977:1977,1978:1978,DEFEND_MAX_NUM:1979,1980:1980,1981:1981,1982:1982,1983:1983,1984:1984,1985:1985,1986:1986,1987:1987,1988:1988,1989:1989,AD_LIMIT:1990,RESOURCES_FAIL:1991,1992:1992,1993:1993,1994:1994,SHARE_SUCCESS:1995,SHARE_FAIL:1996,1997:1997,1998:1998,1999:1999,2e3:2e3,2316:2316,2317:2317,2318:2318,2319:2319,2320:2320,2321:2321,2322:2322,2323:2323,2324:2324,2325:2325,2326:2326,2327:2327,2328:2328,2329:2329,2330:2330,2331:2331,2332:2332,2333:2333,2334:2334,2335:2335,2336:2336,2337:2337,2338:2338,2339:2339,2340:2340,2341:2341,2342:2342,2343:2343,2344:2344,2345:2345,2346:2346,2347:2347,2348:2348,2349:2349,2350:2350,2351:2351,2352:2352,2353:2353,2354:2354,2355:2355,2356:2356,2357:2357,2358:2358,2359:2359,2360:2360,2361:2361,2362:2362,2363:2363,2364:2364,2365:2365,2366:2366,2367:2367,WIN_SHARE:30001,LOSE_LEARN:30002,GIVE_POWER_TIMES:20001,RECEIVE_POWER_NUM:20002,RECEIVE_POWER_MAX:20003,20004:20004,20005:20005,20006:20006,20007:20007,AREA_RANK_POWER:20008,OPEN_REMIND_ONE:20009,OPEN_REMIND_TWO:20010,OPEN_REMIND_ALL:20011,FEEDBACK_MAX_NUM:20012,PEOPLE_BEST_REWARD:20013,JIJIE_TEXT1:20014,JIJIE_TEXT2:20015,JIJIE_TITLE:20016,HERO_NOT_ENOUGH:20017,VIP_TIPS_18_1:20018,VIP_TIPS_19_1:20019,VIP_TIPS_18:20020,VIP_TIPS_19:20021,20022:20022,20023:20023,20024:20024,20025:20025,20026:20026,20027:20027,20028:20028,20029:20029,20030:20030,20031:20031,20032:20032,20033:20033,20034:20034,20035:20035,20036:20036,20037:20037,20038:20038,20039:20039,20040:20040,ACTIVITY_END_TIME:20041,20042:20042,20043:20043,20044:20044,20045:20045,20046:20046,20047:20047,20048:20048,20049:20049,20050:20050,20051:20051,20052:20052,20053:20053,20054:20054,20055:20055,20056:20056,20057:20057,20058:20058,20059:20059,20060:20060,20061:20061,20062:20062,20063:20063,20064:20064,20065:20065,20066:20066,20067:20067,20068:20068,20069:20069,20070:20070,20071:20071,20072:20072,20073:20073,20074:20074,20075:20075,20076:20076,20077:20077,20078:20078,20079:20079,20080:20080,GUILD_ERROR_0:20081,GUILD_ERROR_1:20082,GUILD_ERROR_2:20083,GUILD_ERROR_3:20084,GUILD_ERROR_4:20085,GUILD_ERROR_5:20086,GUILD_ERROR_6:20087,GUILD_ERROR_7:20088,GUILD_ERROR_8:20089,GUILD_ERROR_9:20090,GUILD_ERROR_10:20091,GUILD_ERROR_11:20092,GUILD_ERROR_12:20093,GUILD_ERROR_13:20094,GUILD_ERROR_14:20095,GUILD_ERROR_15:20096,GUILD_ERROR_16:20097,GUILD_ERROR_17:20098,GUILD_ERROR_18:20099,WECHAT_BIND_OTHER:20100,WECHAT_BIND_FAILED:20101,GUILD_CONTRIBUTION_ENOUGH:20102,GUILD_PROGRESS_ENOUGH:20103,SPRING_REWARD_TIPS:20104,LEADER_VACANCY:20105,WECHAT_INSTALL:20106,ACTIVITY_NOT_START:20107,20108:20108,20109:20109,20110:20110,20111:20111,20112:20112,20113:20113,20114:20114,20115:20115,20116:20116,ACTIVITY_END:20117,CAPTUER_IMAGE_ERROR:20118,ACTIVITY_BEGIN_TIME:20119,20120:20120,20121:20121,20122:20122,20123:20123,20124:20124,20125:20125,20126:20126,20127:20127,20128:20128,20129:20129,20130:20130,20131:20131,20132:20132,20133:20133,20134:20134,20135:20135,20136:20136,20137:20137,20138:20138,20139:20139,20140:20140,20141:20141,20142:20142,20143:20143,20144:20144,20145:20145,20146:20146,20147:20147,20148:20148,20149:20149,20150:20150,20151:20151,20152:20152,NO_CHANCE:20153},cc._RF.pop()},{}],GameTowerControlItemRender:[function(e,t){"use strict";cc._RF.push(t,"3bffd4CmIhM/7tFnCCkJqwh","GameTowerControlItemRender");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{battleAtlas:{default:null,type:cc.SpriteAtlas},commonAtlas:{default:null,type:cc.SpriteAtlas}},afterLoad:function(){},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.UPDATE_TOWER_UP_ITEM,function(){return e.updateOtherData(!0)})},bindNode:function(){this.iconSprite=cc.find("background",this.node).getComponent(cc.Sprite),this.chooseNode=cc.find("/choose",this.node),this.numberBg=cc.find("numberBg",this.node).getComponent(cc.Sprite),this.costLabel=cc.find("/numberBg/label",this.node).getComponent(cc.Label),this.heroNode=cc.find("hero",this.node),this.heroBgSprite=cc.find("bg",this.heroNode).getComponent(cc.Sprite),this.heroBg1Sprite=cc.find("bg1",this.heroNode).getComponent(cc.Sprite),this.heroHeadSprite=cc.find("head",this.heroNode).getComponent(cc.Sprite),this.lockNode=cc.find("lock",this.node),this.tryNode=cc.find("try",this.node),this.tryNode.active=!1,this.chooseNode.active=!1},initData:function(e,t,a){this.grayValue=0,this.optType=e,this._towerId=t,this._heroId=a,this._isUnlock=this.host.isUnlockTower(this._towerId),this.bindNode(),this.optType===i.constant.TOWER_CONTROL_TYPE_BUILD?this.updateTower():this.updateTowerHero(),this.updateEnough(),this.heroAddMoney=0},updateTowerHero:function(){this.lockNode.active=!1,this.heroNode.active=!0,this.iconSprite.node.active=!1,this.tempTowerData=i.templateManager.getTowerDataByHeroId(this._heroId);var e=i.templateManager.getHeroDataById(this._heroId),t=i.templateManager.getHeroQualityDataById(i.player.heroModule.getHeroQuality(this._heroId));this.tempTowerData.heroBuildPriceAdd&&(this.heroAddMoney=this.tempTowerData.heroBuildPriceAdd*i.battleScene.getTowerNumById(this.tempTowerData.id)),this.heroBgSprite.spriteFrame=this.battleAtlas.getSpriteFrame(t.qualityCicle),this.heroBg1Sprite.spriteFrame=this.battleAtlas.getSpriteFrame(t.qualityBg),this.heroHeadSprite.spriteFrame=this.commonAtlas.getSpriteFrame(e.heroHead),this.heroHeadSprite.node.scale=.9,i.battleScene.checkIsTryHero(this._heroId)&&(this.tryNode.active=!0)},updateTower:function(){if(!this._isUnlock)return this.numberBg.node.active=!1,void(this.lockNode.active=!0);this.lockNode.active=!1,this.numberBg.node.active=!0,this.iconSprite.node.active=!0,this.heroNode.active=!1,this.tempTowerData=i.templateManager.getTowerListByType(this._towerId,1)[0];var e="Battle_TowerBuilding_icon1";this._towerId==i.constant.TOWER_TYPE_ARROW?e="Battle_TowerBuilding_icon3":this._towerId==i.constant.TOWER_TYPE_CANNON?e="Battle_TowerBuilding_icon4":this._towerId==i.constant.TOWER_TYPE_MAGIC&&(e="Battle_TowerBuilding_icon2"),e=this.battleAtlas.getSpriteFrame(e),this.iconSprite.spriteFrame=e},updateOtherData:function(e){this.node.active&&this.host.node.active&&(this._isUnlock=this.host.isUnlockTower(this._towerId),this.optType===i.constant.TOWER_CONTROL_TYPE_BUILD?this.updateTower():this.updateTowerHero(),this.updateEnough(),e||(this.chooseNode.active=!1))},updateSpend:function(){var e=i.battleScene.getInstanceSkillByAttr(i.constant.SKILL_ATTR_TOWER_DISCOUNT,this._towerId);this.towerDiscount=1;for(var t=0;t<e.length;t++)this.towerDiscount-=e[t].natureList[2]/1e4;var a=[];if(a=this.tempTowerData&&this.tempTowerData.qualityParameters?this.tempTowerData.qualityParameters:a)for(var n=0;n<a.length;n++)a[n][0]==i.constant.SKILL_ATTR_TOWER_DISCOUNT&&(this.towerDiscount-=a[n][2]/1e4);var o=i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_TOWER_STRONG,i.constant.SKILL_ATTR_TOWER_DISCOUNT,this._towerId,0);0!=o&&(i.Logger.debug("\u7f81\u7eca\u6280\u80fd \u6309\u94ae\u6298\u6263 + "+o),this.towerDiscount+=o),this.needMoney=Math.floor(this.tempTowerData.spend*this.towerDiscount)+this.heroAddMoney,this.costLabel.string=this.needMoney},updateEnough:function(){this.node.active&&this._isUnlock&&(this.updateSpend(),this.isEnough=i.battleScene.checkIronEnough(this.needMoney),this.notChange||this.updateEnoughGray(!this.isEnough))},updateEnoughGray:function(e,t){this.notChange=t,!e&&this.grayValue<=0?(this.grayValue=1,this.iconSprite.setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite")),this.chooseNode.getComponent(cc.Sprite).setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite")),this.heroBgSprite.setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite")),this.heroBg1Sprite.setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite")),this.heroHeadSprite.setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite"))):e&&0<=this.grayValue&&(this.grayValue=-1,this.iconSprite.setMaterial(0,cc.Material.getBuiltinMaterial("2d-gray-sprite")),this.chooseNode.getComponent(cc.Sprite).setMaterial(0,cc.Material.getBuiltinMaterial("2d-gray-sprite")),this.heroBgSprite.setMaterial(0,cc.Material.getBuiltinMaterial("2d-gray-sprite")),this.heroBg1Sprite.setMaterial(0,cc.Material.getBuiltinMaterial("2d-gray-sprite")),this.heroHeadSprite.setMaterial(0,cc.Material.getBuiltinMaterial("2d-gray-sprite")))},onClick:function(){if(!this.canNotClick&&this._isUnlock){if(!this.chooseNode.active)return this.host.updateBuildItem(this._towerId,this._heroId),void(this.chooseNode.active=!0);var e;this.isEnough?i.battleScene.consumeIron(this.needMoney)&&(this.canNotClick=!0,this.optType===i.constant.TOWER_CONTROL_TYPE_BUILD?this.host.buildTower(this._towerId):(this.host.towerObj.upgradeTower(this.tempTowerData.id),this.host.hideControl(!0)),this.canNotClick=!1):(e=i.lang.getGameText(i.GameTextCode.ENOUGH_IRON),i.gameScene.showTipsItemRender(e))}}}),cc._RF.pop()},{}],GameTowerControl:[function(e,t){"use strict";cc._RF.push(t,"889aeLiWGBHGbJYzZ4E4Xr3","GameTowerControl");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{buildItemPrefab:{default:null,type:cc.Prefab}},afterLoad:function(){this.rangeCircleAttackNode=cc.find("range_circle_attack",this.node),this.rangeCricleAttackWidth=this.rangeCircleAttackNode.width,this.rangeCircleAttackNextNode=cc.find("range_circle_attack_next",this.node),this.rangeCirclePositionNode=cc.find("range_circle_position",this.node),this.rangeCirclePositionScaleNode=cc.find("range_circle_position_scale",this.node),this.rangeCirclePositionWidth=this.rangeCirclePositionNode.width,this.controlContentNode=cc.find("controlContent",this.node),this.controlNode=cc.find("controlContent/control",this.node),this.buttonMoveNode=cc.find("buttonMove",this.controlNode),this.buttonOutNode=cc.find("buttonOut",this.controlNode),this.buttonUpgradeNode=cc.find("buttonUpgrade",this.controlNode),this.upgradeCostLabel=cc.find("background/numberBg/label",this.buttonUpgradeNode).getComponent(cc.Label),this.upgradeSprite=cc.find("background",this.buttonUpgradeNode).getComponent(cc.Sprite),this.deleteCostLabel=cc.find("buttonSale/background/numberBg/label",this.controlNode).getComponent(cc.Label),this.buttonSaleNode=cc.find("buttonSale",this.controlNode),this.buttonSale=this.buttonSaleNode.getComponent(cc.Button),this.deleteBgNode=cc.find("buttonSale/background",this.controlNode),this.deleteChooseNode=cc.find("buttonSale/background/choose",this.controlNode),this.upChooseNode=cc.find("buttonUpgrade/background/choose",this.controlNode),this.buildNode=cc.find("controlContent/build",this.node),this.heroUpNode=cc.find("controlContent/heroUp",this.node),this.tipsNode=cc.find("towerTips",this.node),this.tipsNode.active=!1,this.tipsOriginPos=this.tipsNode.position,this.tipsTowerNode=cc.find("tower",this.tipsNode),this.tipsNameLabel=cc.find("name",this.tipsTowerNode).getComponent(cc.Label),this.tipsDecLabel=cc.find("describe",this.tipsTowerNode).getComponent(cc.Label),this.tipsHpLabel=cc.find("attribute/attribute1/number",this.tipsTowerNode).getComponent(cc.Label),this.tipsAtkLabel=cc.find("attribute/attribute2/number",this.tipsTowerNode).getComponent(cc.Label),this.tipsAtkIconNode=cc.find("attribute/attribute2/icon",this.tipsTowerNode),this.tipsAtkIcon1Node=cc.find("attribute/attribute2/icon1",this.tipsTowerNode),this.tipsDefLabel=cc.find("attribute/attribute3/number",this.tipsTowerNode).getComponent(cc.Label),this.tipsAtkSpeedLabel=cc.find("attribute/attribute4/number",this.tipsTowerNode).getComponent(cc.Label),this.tipsHeroNode=cc.find("hero",this.tipsNode),this.tipsHeroNameLabel=cc.find("heroName",this.tipsHeroNode).getComponent(cc.Label),this.tipsHeroSkillName=cc.find("heroSkillName",this.tipsHeroNode).getComponent(cc.Label),this.tipsDescLabel=cc.find("describe",this.tipsHeroNode).getComponent(cc.Label)},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.UPDATE_TOWER_BUILD_ITEM,function(){return e.updateEnough()})},initData:function(){i.Logger.debug("build gameTowerControl"),this.createBuildItem(),this.buildHeroItemObjList=[],this.grayValue=0},createBuildItem:function(){this.buildItemObjList=[];for(var e=i.templateManager.getTowerTypeList(),t=0;t<e.length;t++){var a=cc.instantiate(this.buildItemPrefab),n=a.getComponent("GameTowerControlItemRender");this.buildNode.addChild(a),n.host=this,n.initData(i.constant.TOWER_CONTROL_TYPE_BUILD,e[t]),this.buildItemObjList.push(n)}},isUnlockTower:function(e){var t=!1;this.towerObj&&this.towerObj.objData.name,i.guideManager.isGuidingType(i.constant.GUIDE_TYPE_INSTANCE_1);for(var a=i.battleScene.instanceData.towerMaxLevel,n=0;n<a.length;n++)if(e==a[n][0]){t=!0;break}return t},updateBuildItem:function(e,t){e&&(this.towerObj.willBuildTower(e),this.showTips(e,t),this.showRangeCirle(e,t),t&&this.needShowSecond&&(this.rangeCircleAttackNextNode.active=!0,this.runNextRangeCircleEffect()));for(var i=0;i<this.buildItemObjList.length;i++)this.buildItemObjList[i].updateOtherData();for(var a=0;a<this.buildHeroItemObjList.length;a++)this.buildHeroItemObjList[a].updateOtherData()},getSkillTowerDiscount:function(){for(var e=i.battleScene.getInstanceSkillByAttr(i.constant.SKILL_ATTR_TOWER_DISCOUNT,this.towerObj.curType),t=1,a=0;a<e.length;a++)t-=e[a].natureList[2]/1e4;return t},updateTowerDiscount:function(){var e=this.getSkillTowerDiscount(),t=this.towerObj.getTowerSkillAttr(i.constant.SKILL_ATTR_TOWER_DISCOUNT);t&&(e-=t[2]/1e4),0!=(t=i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_TOWER_STRONG,i.constant.SKILL_ATTR_TOWER_DISCOUNT,this.towerObj.curType,this.towerObj.getLevel()))&&(i.Logger.debug("\u7f81\u7eca\u6280\u80fd \u5f39\u677f\u6298\u6263 + "+t),e+=t),this.towerDiscount=e},showControl:function(e,t,a,n){this.towerObj&&this.towerObj.reductionTower(),this._type=t,this.towerObj=a,this.rangeCirclePositionScaleNode.active=!1,this.updateTowerDiscount(),this.node.position=e,this.tipsNode.active=!1,this.controlContentNode.active=!0,this.hideAllRangeCircle(),i.battleScene.gameBattleUIObj.checkUiNodeHide(this.node),this.node.active=!0,this.node.scale=0,e=this.node.convertToWorldSpaceAR(cc.v2(0,0)),i.gameScene.checkBubbleHide(e.x,e.y,this.node.width+20,this.node.height+20),this.upCost=-1,this.deleteBackNum=-1,this._type===i.constant.TOWER_CONTROL_TYPE_BUILD?(n||(this.buildItemObjList[i.constant.TOWER_TYPE_BARRACK-1].notChange=!1,this.buildItemObjList[i.constant.TOWER_TYPE_ARROW-1].notChange=!1,this.buildItemObjList[i.constant.TOWER_TYPE_CANNON-1].notChange=!1,this.buildItemObjList[i.constant.TOWER_TYPE_MAGIC-1].notChange=!1),this.controlNode.active=!1,this.buildNode.active=!0,this.heroUpNode.active=!1,this.setBuildPosition(),this.updateBuildItem()):this._type===i.constant.TOWER_CONTROL_TYPE_UP&&(this.controlNode.active=!0,this.buildNode.active=!1,this.heroUpNode.active=!1,this.buttonMoveNode.active=this.towerObj.curType===i.constant.TOWER_TYPE_BARRACK,this.updateButtonMovePos(),this.updateDeleteButtonPos(),this.buttonOutNode.active=!1,this.showRangeCirle(this.towerObj.curType),o=!1,this.towerObj.getLevel()===i.constant.TOWER_STATE_BUILD_3?(o=!(this.heroUpNode.active=!0),this.setBuildHeroPosition(this.towerObj.curType)):this.towerObj.isMaxLevel()||(o=!0,this.updateUpCost()),i.guideManager.isGuidingType(i.constant.GUIDE_TYPE_INSTANCE_1)&&(o=!1),this.buttonUpgradeNode.active=o,this.updateDeleteBack(),this.deleteChooseNode.active=!1,this.upChooseNode.active=!1),n===i.constant.GUIDE_TYPE_INSTANCE_1_7||n===i.constant.GUIDE_TYPE_INSTANCE_1_c_1?(this.buildItemObjList[i.constant.TOWER_TYPE_ARROW-1].updateEnoughGray(!1,!0),this.buildItemObjList[i.constant.TOWER_TYPE_BARRACK-1].updateEnoughGray(!0,!0),this.buildItemObjList[i.constant.TOWER_TYPE_CANNON-1].updateEnoughGray(!0,!0),this.buildItemObjList[i.constant.TOWER_TYPE_MAGIC-1].updateEnoughGray(!0,!0)):n===i.constant.GUIDE_TYPE_INSTANCE_1_a?(this.buildItemObjList[i.constant.TOWER_TYPE_BARRACK-1].updateEnoughGray(!1,!0),this.buildItemObjList[i.constant.TOWER_TYPE_ARROW-1].updateEnoughGray(!0,!0),this.buildItemObjList[i.constant.TOWER_TYPE_CANNON-1].updateEnoughGray(!0,!0),this.buildItemObjList[i.constant.TOWER_TYPE_MAGIC-1].updateEnoughGray(!0,!0)):n===i.constant.GUIDE_TYPE_INSTANCE_2_3||n===i.constant.GUIDE_TYPE_INSTANCE_2_6?(this.buildItemObjList[i.constant.TOWER_TYPE_BARRACK-1].updateEnoughGray(!0,!0),this.buildItemObjList[i.constant.TOWER_TYPE_ARROW-1].updateEnoughGray(!0,!0),this.buildItemObjList[i.constant.TOWER_TYPE_CANNON-1].updateEnoughGray(!0,!0),this.buildItemObjList[i.constant.TOWER_TYPE_MAGIC-1].updateEnoughGray(!1,!0)):n!==i.constant.GUIDE_TYPE_INSTANCE_2_a&&n!==i.constant.GUIDE_TYPE_INSTANCE_2_d||(this.buildItemObjList[i.constant.TOWER_TYPE_BARRACK-1].updateEnoughGray(!0,!0),this.buildItemObjList[i.constant.TOWER_TYPE_ARROW-1].updateEnoughGray(!0,!0),this.buildItemObjList[i.constant.TOWER_TYPE_CANNON-1].updateEnoughGray(!1,!0),this.buildItemObjList[i.constant.TOWER_TYPE_MAGIC-1].updateEnoughGray(!0,!0));var o=cc.scaleTo(.2,1);n=cc.callFunc(function(){this._times=0,this.checkGuide()},this),n=cc.sequence(o,n),this.node.stopAllActions(),this.node.runAction(n),i.soundsUtil.playSoundEffect("tower_operation_common")},updateButtonMovePos:function(){var e=1;0<this.node.position.x&&this.node.position.x+this.node.width/2>cc.winSize.width/2&&(e=-1),this.buttonMoveNode.x=Math.abs(this.buttonMoveNode.x)*e},updateDeleteButtonPos:function(){var e=cc.v2(0,-this.node.width/2+10);this.node.y<0&&this.node.y-this.node.height/2-20<-cc.winSize.height/2&&(e=cc.v2(-this.node.width/2,0)),this.buttonSaleNode.position=e},checkGuide:function(){i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_INSTANCE_1_5)?i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_1_5,this.buildItemObjList[0].node):i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_INSTANCE_1_8)?i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_1_8,this.buildItemObjList[0].node):i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_INSTANCE_1_b)?i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_1_b,this.buildItemObjList[1].node):i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_INSTANCE_1_c_2)?i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_1_c_2,this.buildItemObjList[0].node):i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_INSTANCE_2_4)?i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_2_4,this.buildItemObjList[3].node):i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_INSTANCE_2_7)?i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_2_7,this.buildItemObjList[3].node):i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_INSTANCE_2_b)?i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_2_b,this.buildItemObjList[2].node):i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_INSTANCE_2_e)?i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_2_e,this.buildItemObjList[2].node):i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_INSTANCE_3_8)&&i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_3_8,this.buildItemObjList[2].node)},updateUpCost:function(){var e=i.templateManager.getTowerListByType(this.towerObj.typeId,this.towerObj.getLevel()+1)[0];this.upCost=Math.floor(e.spend*this.towerDiscount),this.upgradeCostLabel.string=this.upCost,this.isUpEnough=i.battleScene.checkIronEnough(this.upCost),this.updateUpgradeGray(!this.isUpEnough)},updateEnough:function(){this.node.active&&(this.isUpEnough=i.battleScene.checkIronEnough(this.upCost),this.updateUpgradeGray(!this.isUpEnough))},updateUpgradeGray:function(e){!e&&this.grayValue<=0?(this.grayValue=1,this.upgradeSprite.setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite"))):e&&0<=this.grayValue&&(this.grayValue=-1,this.upgradeSprite.setMaterial(0,cc.Material.getBuiltinMaterial("2d-gray-sprite")))},updateDeleteBack:function(){for(var e=0,t=0;t<this.towerObj.getLevel();t++){var a=i.templateManager.getTowerListByType(this.towerObj.typeId,t+1)[0];t+1===i.constant.TOWER_STATE_BUILD_4&&0<this.towerObj.getTowerId()&&(a=i.templateManager.getTowerDataById(this.towerObj.getTowerId())),e+=Math.floor(a.spend*this.towerDiscount)}e*=i.battleScene.sellMoneyPercent,this.deleteBackNum=parseInt(e*(i.templateManager.getGameParamValue("returnRatio")/1e4)),this.deleteCostLabel.string=this.deleteBackNum;var n=1==i.battleScene.curChapter&&1==i.battleScene.curInstance&&i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_INSTANCE_1);n=(n=n||1==i.battleScene.curChapter&&2==i.battleScene.curInstance&&i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_INSTANCE_2))||!this.towerObj.isCanSellTower,this.isDeleteUnlock=!n,this.buttonSale.interactable=this.isDeleteUnlock},hideControl:function(e){var t;i.battleScene.gameBattleUIObj.showAllUiNode(),i.battleScene.curTowerObj&&(i.battleScene.setCurTowerObj(null),i.battleScene.showGameHeroOperate(!1)),this.node&&this.node.active&&(this.towerObj.reductionTower(),e?(this.tipsNode&&(this.tipsNode.active=!1),this.node.active=!1,this.canNotClickUp=!1,this.canNotClickDelete=!1):(t=cc.scaleTo(.1,0),e=cc.callFunc(function(){this.tipsNode&&(this.tipsNode.active=!1),this.node.active=!1,this.canNotClickUp=!1,this.canNotClickDelete=!1},this),e=cc.sequence(t,e),this.node.stopAllActions(),this.node.runAction(e)),i.gameScene.checkBubbleShow())},setBuildPosition:function(){var e=45,t=90,a=0<this.node.position.y&&this.node.position.y+this.node.height/2>cc.winSize.height/2-100,n=this.node.position.y<0&&this.node.position.y-this.node.height/2<-cc.winSize.height/2,o=0<this.node.position.x&&this.node.position.x+this.node.width/2>cc.winSize.width/2,s=this.node.position.x<0&&this.node.position.x-this.node.width/2<-cc.winSize.width/2;a&&o?(e=133,t=54):a?(e=180,t=60):n?(e=0,t=60):s?(e=270,t=60):o&&(e=90,t=60);for(var r=i.templateManager.getTowerTypeList(),c=0;c<r.length;c++){var l=i.Utils.getOffsetByRotationAndDistance(e+t*c,this.node.width/2);this.buildItemObjList[c].node.position=l}},setBuildHeroPosition:function(e){var t=i.battleScene.getCanUpTowerHeros(e);if(this.buildHeroItemObjList.length>t.length)for(var a=t.length;a<this.buildHeroItemObjList.length;a++)this.buildHeroItemObjList[a].node.active=!1;for(var n=[],o=0;o<t.length;o++){o>=this.buildHeroItemObjList.length&&(s=cc.instantiate(this.buildItemPrefab),this.heroUpNode.addChild(s),((r=s.getComponent("GameTowerControlItemRender")).host=this).buildHeroItemObjList.push(r),i.Logger.debug("\u6dfb\u52a0\u82f1\u96c4\u5934\u50cf.",t[o]));var s=t[o],r=this.buildHeroItemObjList[o];r.node.active=!0,r.initData(i.constant.TOWER_CONTROL_TYPE_UP,e,s),n.push(r.node)}var c=45,l=90;1==n.length||0<this.node.position.x&&this.node.position.x+this.node.width/2>cc.winSize.width/2?(c=90,l=60):this.node.position.x<0&&this.node.position.x-this.node.width/2<-cc.winSize.width/2?(c=90,l=-60):3==n.length&&(c=20,l=70);for(var d=0;d<n.length;d++)n[d].position=i.Utils.getOffsetByRotationAndDistance(c+l*d,this.node.width/2-15)},buildTower:function(e){this.towerObj.buildTower(e),this.hideControl(!0),i.soundsUtil.playSoundEffect("tower_operation_common")},showTips:function(e,t){this.tipsNode.position=this.tipsOriginPos;var a=this.tipsNode.convertToWorldSpaceAR(cc.v2(0,0));0<(s=i.battleScene.gameBattleUIObj.getLeftContentWeight()-(a.x-this.tipsNode.width/2)+60)&&(this.tipsNode.x+=s),i.battleScene.gameBattleUIObj.getTopContentHeight()-(a.y+this.tipsNode.height/2)-50<0&&(this.tipsNode.y*=-1);var n,o,s=(s=this.towerObj.getLevel())==i.constant.TOWER_STATE_BUILD_4?s:s+1;this.tipsNode.active=!0,this.tipsHeroNode.active=!1,this.tipsTowerNode.active=!1,a=this.tipsNode.convertToWorldSpaceAR(cc.v2(0,0)),i.gameScene.checkBubbleHide(a.x,a.y,this.tipsNode.width,this.tipsNode.height),t?(this.tipsHeroNode.active=!0,o=i.templateManager.getHeroDataById(t),this.tipsHeroNameLabel.string=i.lang.getGameText(o.name),n=i.templateManager.getHeroStarDataByHeroStar(t,1).inSkill[0][0],o=i.templateManager.getHeroSkillDataById(n),this.tipsHeroSkillName.string=i.lang.getGameText(o.skillName),this.tipsDescLabel.string=i.lang.getGameText(o.desc)):(this.tipsTowerNode.active=!0,n=i.templateManager.getTowerListByType(e,s)[0],this.tipsNameLabel.string=i.lang.getGameText(n.name),this.tipsDecLabel.string=i.lang.getGameText(n.desc),o=i.templateManager.getTowerStarDataByLevel(e,i.player.towerModule.getTowerLevel(e)),this.tipsAtkIconNode.active=e!=i.constant.TOWER_TYPE_MAGIC,this.tipsAtkIcon1Node.active=e==i.constant.TOWER_TYPE_MAGIC,e===i.constant.TOWER_TYPE_BARRACK?(s=i.templateManager.getSoldierDataById(n.recruitSoldiersList[0]),this.tipsHpLabel.node.parent.active=!0,this.tipsHpLabel.string=i.Utils.formatBigNumberForLabel(new i.BigNumber(s.hp).times(o.hp).div(1e4).toFixed(0)),e=new i.BigNumber(s.physicalAttack).plus(s.magicAttack).times(o.attack).div(1e4).toFixed(0),this.tipsAtkLabel.string=i.Utils.formatBigNumberForLabel(e),this.tipsAtkSpeedLabel.string=n.recruitSoldiersList[1]/1e3,this.tipsDefLabel.node.parent.active=!0,0!==s.magicDefense&&0!==s.physicalDefense&&(this.tipsDefLabel.string=s.physicalDefense)):(this.tipsHpLabel.node.parent.active=!1,this.tipsDefLabel.node.parent.active=!1,o=new i.BigNumber(n.physicalAttack).plus(n.magicAttack).times(o.attack).div(1e4).toFixed(0),this.tipsAtkLabel.string=i.Utils.formatBigNumberForLabel(o),this.tipsAtkSpeedLabel.string=n.speed/1e3)),i.soundsUtil.playSoundEffect("tower_operation_common")},hideAllRangeCircle:function(){this.rangeCircleAttackNode.active=!1,this.rangeCircleAttackNextNode.active=!1,this.rangeCirclePositionNode.active=!1},runNextRangeCircleEffect:function(){var e=cc.repeatForever(cc.sequence(cc.fadeTo(1.2,50),cc.fadeTo(.8,255)));this.rangeCircleAttackNextNode.stopAllActions(),this.rangeCircleAttackNextNode.runAction(e)},showRangeCirle:function(e,t){var a=!1;this.towerObj.isMaxLevel()&&(a=!0),this.hideAllRangeCircle();var n=0==(n=this.towerObj.getLevel())?1:n,o=i.templateManager.getTowerListByType(e,n)[0].range,s=1;if(this._type===i.constant.TOWER_CONTROL_TYPE_UP)this.towerObj.isMaxLevel()||(n=i.templateManager.getTowerListByType(e,n+1)[0],(n=t?i.templateManager.getTowerDataByHeroId(t):n)&&(s=n.range/o)),o=this.towerObj.shootDistance;else if(this._type===i.constant.TOWER_CONTROL_TYPE_BUILD){for(var r=i.battleScene.getInstanceSkillByAttr(i.constant.SKILL_ATTR_ATK_DISTANCE,this.curType),c=1,l=0;l<r.length;l++)c+=r[l].natureList[2]/1e4;o*=c}e==i.constant.TOWER_TYPE_BARRACK?(this.rangeCirclePositionNode.active=!0,e=o/(this.rangeCirclePositionWidth/2),this.rangeCirclePositionNode.scale=e,this.needShowSecond=1!=s&&!a):(this.rangeCircleAttackNode.active=!0,o/=this.rangeCricleAttackWidth/2,this.rangeCircleAttackNode.scale=o,1==s||a?this.needShowSecond=!1:(this.needShowSecond=!0,this.rangeCircleAttackNextNode.scale=o*s))},onClickUp:function(){if(!this.canNotClickUp){if(this.towerObj.isTowerStopping()){var e=i.lang.getGameText(i.GameTextCode.UNDER_SEAL);return i.gameScene.showTipsItemRender(e),void this.hideControl()}if(!(this.upCost<0)){if(!this.upChooseNode.active)return this.needShowSecond&&(this.rangeCircleAttackNextNode.active=!0,this.runNextRangeCircleEffect()),this.upChooseNode.active=!0,this.deleteChooseNode.active=!1,void this.showTips(this.towerObj.curType);this.isUpEnough?i.battleScene.consumeIron(this.upCost)&&(this.canNotClickUp=!0,this.towerObj.upgradeTower(),this.hideControl(),i.soundsUtil.playSoundEffect("tower_operation_common")):(e=i.lang.getGameText(i.GameTextCode.ENOUGH_IRON),i.gameScene.showTipsItemRender(e))}}},onClickDelete:function(){if(!this.canNotClickDelete)if(this.isDeleteUnlock){if(i.Logger.debug("onClickDelete send event"),!this.deleteChooseNode.active)return this.rangeCircleAttackNextNode.active=!1,this.upChooseNode.active=!1,void(this.deleteChooseNode.active=!0);if(this.towerObj.isTowerStopping()){var e=i.lang.getGameText(i.GameTextCode.UNDER_SEAL);return i.gameScene.showTipsItemRender(e),void this.hideControl()}this.canNotClickDelete=!0,this.towerObj.sellTower(),0<this.deleteBackNum&&i.battleScene.addIron(this.deleteBackNum),this.hideControl(),i.soundsUtil.playSoundEffect("tower_operation_common")}else i.Logger.debug("onClickDelete return this.isDeleteUnlock = "+this.isDeleteUnlock)},onClickMass:function(){if(this.towerObj.isTowerStopping()){var e=i.lang.getGameText(i.GameTextCode.UNDER_SEAL);return i.gameScene.showTipsItemRender(e),void this.hideControl()}this.rangeCircleAttackNextNode.active=!1,this.upChooseNode.active=!1,this.deleteChooseNode.active=!1,this.rangeCirclePositionScaleNode.active=!0;var t=this.rangeCirclePositionNode.scale;this.rangeCirclePositionScaleNode.scale=0,e=cc.scaleTo(1,t),t=cc.callFunc(function(){this.rangeCirclePositionScaleNode.scale=0},this),t=cc.sequence(e,t),t=cc.repeatForever(t),this.rangeCirclePositionScaleNode.stopAllActions(),this.rangeCirclePositionScaleNode.runAction(t),this.controlContentNode.active=!1,i.battleScene.setCurTowerObj(this.towerObj),i.battleScene.showGameHeroOperate(!0),i.soundsUtil.playSoundEffect("tower_operation_common")},onClickOut:function(){if(!this.towerObj.isHaveHero())return!1;if(this.towerObj.isTowerStopping()){var e=i.lang.getGameText(i.GameTextCode.UNDER_SEAL);return i.gameScene.showTipsItemRender(e),void this.hideControl()}this.towerObj.outTower(),this.hideControl(),i.soundsUtil.playSoundEffect("tower_operation_common")},update:function(){}}),cc._RF.pop()},{}],GameTower:[function(e,t){"use strict";cc._RF.push(t,"8a8e0Qn+qdPIaTHP9+0djOC","GameTower");var i=e("Aft");cc.Class({extends:cc.Component,properties:{battleAtlas:{default:null,type:cc.SpriteAtlas},commonAtlas:{default:null,type:cc.SpriteAtlas}},start:function(){},bindingNode:function(){this.spineNode=cc.find("spine",this.node),this.towerSpine=this.spineNode.getComponent("sp.Skeleton"),this.heroNode=cc.find("hero",this.node),this.heroSpineNode=cc.find("hero/heroSpine",this.node),this.heroSpine=cc.find("hero/heroSpine",this.node).getComponent("sp.Skeleton"),this.towerRemoveEffect=cc.find("tower_remove",this.node).getComponent("cc.ParticleSystem"),this.towerCreateEffect=cc.find("tower_build_smoke",this.node).getComponent("cc.ParticleSystem"),this.arrowNodeX=30,this.timeNode=cc.find("time",this.node),this.timeLabel=cc.find("time/timeLabel",this.node).getComponent(cc.Label),this.activeTipsNode=cc.find("activeTips",this.node),this.nameLabel=cc.find("name",this.node).getComponent(cc.Label),this.headNode=cc.find("heroHead",this.node),this.headBgNode=cc.find("heroHead/bg",this.node),this.headSprite=cc.find("heroHead/head",this.node).getComponent(cc.Sprite),this.headBgSprite=cc.find("heroHead/head",this.node).getComponent(cc.Sprite)},initData:function(e){this.isUpgradeing=!1,this.bindingNode(),this.upgradeTowerId=-1,this.bubbleGuideId=null,this.upgradeTowerTime=0,this.isCanAtkHoleEnemy=!1,this.curindex=e.index,this.objData=e.objData,i.Logger.debug("init tower objData = "+JSON.stringify(this.objData)),this.setTowerActive(!0),this.activeDestroyTime=0,this.curTime=0,this.cacheShootList=[],this.stopTowerTime=0,this.clickTowerTime=0,this.skillAddAtkSpeedTime=0,this.skillAddAtkTime1=0,this.skillAddAtkTime2=0,this.baseTimeScale=1,this.shootDistance=170,this.curState=-999,this.setTowerState(i.constant.TOWER_STATE_EMPTY),this.curType=0,this.towerId=0,this.isFreeze=!1,this.towerSoldierList=[],this.soldierReviveTime=8,this.updateTowerShow(),this.curAtkAccumulateNum=0,this.curSendEnemyNum=0,this.curFlySkyNum=0,this.isCanSellTower=!0,this.isMapInitTower=!1,this.heroTipsPosType=-1,this.heroTipsPosOffset=cc.v2(0,0),this.arrowNowOffset=1,this.isTryHeroTower=!1;var t=i.player.gmModule.isShowBattleTowerName();(this.nameLabel.node.active=t)&&(this.nameLabel.string=this.objData.name),this.updateArrow();var a=i.player.vipModule.getCurVipLevel()>=i.templateManager.getGameParamValue("activateHeroTowerShowVIP");(e=this.getMapTowerData(this.objData.name))&&(e.isActive||a)&&(t=i.templateManager.getTowerDataById(e.towerId),this.sealHeightOffset=t.sealHeightOffset,a=!e.isActive,this.setTowerActive(e.isActive,a),this.curType=t.typeID,t.level>=i.constant.TOWER_STATE_BUILD_4?(this.isTryHeroTower=!0,this.upgradeTowerId=t.id,this.setTowerState(i.constant.TOWER_STATE_BUILD_4)):this.setTowerState(t.level),this.isCanSellTower=0<i.templateManager.getGameParamValue("sceneTowerSell"),this.isMapInitTower=!0)},getMapTowerData:function(e){var t=i.battleScene.instanceData.mapTryTowerList;if(t)for(var a=0;a<t.length;a++)if(e==t[a][0])return{towerId:t[a][1],isActive:0==t[a][2]};return null},updateTowerData:function(){var e,t;this.curState<i.constant.TOWER_STATE_BUILD_1||(this.typeId=this.curType,this.level=this.getLevel(),0<this.upgradeTowerId?(this.towerData=i.templateManager.getTowerDataById(this.upgradeTowerId),this.upgradeTowerId=-1):this.towerData=i.templateManager.getTowerListByType(this.typeId,this.level)[0],this.towerData?(this.towerLevel=i.player.towerModule.getTowerLevel(this.typeId),t=!1,i.battleScene.instanceData.mapTryTowerList&&(t=(e=(e=i.battleScene.instanceData.tryTowerList)?e[0][1]:-1)==this.towerData.id&&0<=i.battleScene.showHeroTowerIdList.indexOf(e)),(this.isTryHeroTower||t)&&i.battleScene.instanceData.tryHeroTowerLevel&&i.battleScene.instanceData.tryHeroTowerLevel>this.towerLevel&&(this.towerLevel=i.battleScene.instanceData.tryHeroTowerLevel,i.Logger.debug("\u8bd5\u7528\u5c06\u5854\u7b49\u7ea7 this.towerLevel = "+this.towerLevel)),i.battleScene.curChapter==i.constant.YEAR_MONSTER_CHAPTER_ID&&(this.towerLevel=1),this.towerLevelData=i.templateManager.getTowerStarDataByLevel(this.typeId,this.towerLevel),this.towerQuality=i.player.towerModule.getTowerQuality(this.typeId),i.battleScene.curChapter==i.constant.YEAR_MONSTER_CHAPTER_ID&&(this.towerQuality=1),this.towerQualityData=i.templateManager.getTowerQualityDataByLevel(this.typeId,this.towerQuality),this.towerTypeData=i.templateManager.getTowerTypeById(this.typeId),this.isCanAtkHoleEnemy=1==this.towerData.isBurrow,this.isAimHead=1==this.towerData.aimingPoint,this.breakPhysicalDef=this.towerData.ignorePhysicalDefense?this.towerData.ignorePhysicalDefense/1e4:0,this.breakMagicDef=this.towerData.ignoreLegalDefense?this.towerData.ignoreLegalDefense/1e4:0,0<(t=i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_SUNDER_ARMOR))&&(i.Logger.debug("\u7f81\u7eca\u6280\u80fd \u7834\u7532 + "+t),this.breakPhysicalDef+=t),this.isCanShootFly=0<this.towerData.isFly,this.upgradeMoney=this.towerData.spend,this.towerAttrAtkPercent1=0,this.towerAttrAtkSpeedPercent=0,this.inTowerHeroId=-1,this.maxBigSkillTime=0,this.maxBigSkillAtkNum=0,this.bigSkillId=-1,this.passiveSkillList=[],this.isHeroLevel()&&(this.inTowerHeroId=this.towerData.heroId),this.curType==i.constant.TOWER_TYPE_BARRACK?(t=this.towerData.recruitSoldiersList,this.soldierId=t[0],this.soldierReviveTime=t[1]/1e3,this.soldierNum=t[2],0!=(t=i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_REVIVE_TIME))&&(i.Logger.debug("\u7f81\u7eca\u6280\u80fd \u58eb\u5175\u590d\u6d3b\u65f6\u95f4 + "+t),this.soldierReviveTime*=1+t)):(this.bulletId=this.towerData.bullet,0<this.inTowerHeroId&&this.initHeroSkillData(this.inTowerHeroId)),this.updateAllAttr(),this.updateSoldierList(),this.updateArrow(),this.curTime=this.shootWaitTime*this.towerData.upBaseSpeed/1e4):i.Logger.debug("error this.towerData = null this.curType = "+this.curType+" this.level = "+this.level))},setTowerShow:function(e){this.node.active=e,this.floor.active=e},heroEnterTower:function(e){var t,a,n,o,s=this;0<e&&(this.showTowerEnterHeroEffect(),this.updateTowerAction(i.constant.TOWER_ACTION_UPGRADE),this.heroNode.active=this.curType!=i.constant.TOWER_TYPE_BARRACK,a=i.constant.HERO_DIR_RIGHT,this.curType==i.constant.TOWER_TYPE_CANNON?(t=this.getFirstOriginPos(this.curindex),a=this.node.x<t.x?(this.heroNode.setPosition(cc.v2(-50,0)),i.constant.HERO_DIR_RIGHT):(this.heroNode.setPosition(cc.v2(50,0)),i.constant.HERO_DIR_LEFT)):this.curType==i.constant.TOWER_TYPE_MAGIC?this.heroNode.setPosition(cc.v2(0,40)):this.heroNode.setPosition(cc.v2(0,30)),e=(n=i.templateManager.getSoldierDataById(e)).intoAppearance,this.isUpgradeing=!1,e&&(this.heroSpineNode.scale=1/1.7,o=i.constant.SPINE_PATH_HERO+e,i.battleScene.getSpineData(o,function(e){e?(s.heroSpine.skeletonData=e,s.heroSpine.premultipliedAlpha=0<n.isChangePremultipliedAlpha,s.heroSpine.timeScale=i.battleScene.battleSpeedPercent*s.baseTimeScale,s.updateHeroAction(i.constant.HERO_STATE_STAND,!1,null,a)):i.Logger.debug("error spineUrl = "+o)})))},updateHeroSpine:function(e){var t,a,n,o,s,r,c=this;this.heroNode.active=0<e,0<e&&(o=cc.v2(100,0),(n=i.battleScene.gameMapObj.towerHeroPosList[this.curindex])&&(o=cc.v2(n.x-320-this.node.x,n.y-568-this.node.y)),this.heroNode.setPosition(o),t=0<o.x?i.constant.HERO_DIR_LEFT:i.constant.HERO_DIR_RIGHT,this.showHeroShowEffect(),this.heroSpineNode.opacity=1,a=cc.delayTime(.1),n=cc.fadeIn(.4),o=cc.sequence(a,n),this.heroSpineNode.runAction(o),a=cc.delayTime(.5),n=cc.moveTo(1,cc.v2(0,0)),o=cc.callFunc(function(){this.updateTowerShow(!1),this.updateTowerHeroAttr()},this),o=cc.sequence(a,n,o),this.heroNode.runAction(o),s=i.templateManager.getSoldierDataById(e),this.heroSpineNode.scale=s.scaling/1e4*.9,e=s.appearance,r=i.constant.SPINE_PATH_HERO+e,i.battleScene.getSpineData(r,function(e){e?(c.heroSpine.skeletonData=e,c.heroSpine.premultipliedAlpha=0<s.isPremultipliedAlpha,c.heroSpine.timeScale=i.battleScene.battleSpeedPercent*c.baseTimeScale,c.updateHeroAction(i.constant.HERO_STATE_MOVE,!1,null,t)):i.Logger.debug("error spineUrl = "+r)}))},getActionNameByDir:function(e){var t="right",a=2;if(2==(a=this.curType==i.constant.TOWER_TYPE_ARROW?4:a))t="right";else if(4==a)switch(e){case i.constant.HERO_DIR_UP:t="up";break;case i.constant.HERO_DIR_DOWN:t="down";break;case i.constant.HERO_DIR_LEFT:case i.constant.HERO_DIR_RIGHT:t="right"}return t},getActionLoopByState:function(e){var t=!1;switch(e){case i.constant.HERO_STATE_STAND:t=!0;break;case i.constant.HERO_STATE_MOVE:case i.constant.HERO_STATE_READY:case i.constant.HERO_STATE_BACK:case i.constant.HERO_STATE_GO_TOWER:t=!0;break;case i.constant.HERO_STATE_BATTLE:case i.constant.HERO_STATE_DIE:case i.constant.HERO_STATE_WAIT:}return t},getActionNameByState:function(e){var t="stand";switch(e){case i.constant.HERO_STATE_STAND:t="stand";break;case i.constant.HERO_STATE_MOVE:case i.constant.HERO_STATE_READY:case i.constant.HERO_STATE_BACK:case i.constant.HERO_STATE_GO_TOWER:t="run";break;case i.constant.HERO_STATE_BATTLE:t="attack";break;case i.constant.HERO_STATE_SHOOT:t="shoot";break;case i.constant.HERO_STATE_DIE:case i.constant.HERO_STATE_WAIT:break;case i.constant.HERO_STATE_TOWER_SKILL:t="skill"}return t},updateHeroAction:function(e,t,a,n){var o=this,s=this.curDir;n&&(s=n),n=this.getActionLoopByState(e),t&&(n=!1);var r=this.getActionNameByDir(s),c=this.getActionNameByState(e)+"_"+r;e=Math.abs(this.heroSpineNode.scaleX),this.heroSpineNode.scaleX=s==i.constant.HERO_DIR_LEFT?-e:e,this.heroSpine.clearTrack(0);var l=this;this.heroSpine.setAnimation(0,c,n)&&!n&&a&&this.heroSpine.setCompleteListener(function(e){(e.animation?e.animation.name:"")==c&&(c=o.getActionNameByState(a)+"_"+r,l.heroSpine.setAnimation(0,c,!0))})},initHeroSkillData:function(e){var t=i.player.heroModule.getHeroQuality(e);(t=i.templateManager.getHeroStarDataByHeroStar(e,t))&&(this.bigSkillId=t.inSkill[0][0],this.passiveSkillList=t.inSkill[1],this.bigSkillData=i.templateManager.getHeroSkillDataById(this.bigSkillId),this.outRangeIsCheck=0<this.bigSkillData.outRangeIsCheck,this.maxBigSkillTime=this.bigSkillData.CD||-1,this.maxBigSkillAtkNum=this.bigSkillData.timesCD||-1,this.curBigSkillTime=this.bigSkillData.startCD?this.maxBigSkillTime*this.bigSkillData.startCD/1e4:0,this.curBigSkillAtkNum=this.bigSkillData.startCD?this.maxBigSkillAtkNum*this.bigSkillData.startCD/1e4:0)},updateAllAttr:function(){this.updateMaxHp(),this.updatePhysicalAtk(),this.updateMagicAtk(),this.updatePhysicalDef(),this.updateMagicDef(),this.updateShootDistance(),this.updateShootWaitTime(),this.updateCritRate(),this.updateCritHurt(),this.updateFaintedRate(),this.updateDoubleHit(),this.updateIgnoreArmor(),this.updateFireArrow(),this.updateBulletMoveSpeed(),this.updateSecondKill(),this.updateAtkAccumulate(),this.updatePassivePoisonAttr(),this.updateSendEnemy(),this.updateFlySkyBullet(),this.updateCritAtkSpeed(),this.updateTowerAddAttr(),this.updateAddTowerAttr(),this.updateAddIronAttr(),this.updatePassiveAddHurt(),this.updateAtkAoe(),this.updateReduceSpeed(),this.updateAtkOtherEnemy(),this.updateKillBomb()},isTowerStopping:function(){return 0<this.stopTowerTime},stopTower:function(e,t){this.curState!=i.constant.TOWER_STATE_LOCK&&this.curState!=i.constant.TOWER_STATE_EMPTY&&(this.stopTowerTime=e,this.clickTowerTime=t,this.showTowerStopEffect(!0))},showTowerStopEffect:function(e){this.spineNode.opacity=e?125:255},updateMaxHp:function(){if(this.towerData&&this.curType===i.constant.TOWER_TYPE_BARRACK)for(var e=0;e<this.towerSoldierList.length;e++)this.towerSoldierList[e].getComponent("GameHero").updateMaxHp()},getLevel:function(){return this.curState>=i.constant.TOWER_STATE_BUILD_1?this.curState:0},isHaveTower:function(){return this.curState>=i.constant.TOWER_STATE_BUILD_1},getTowerMaxLevel:function(){for(var e=i.battleScene.instanceData.towerMaxLevel,t=0;t<e.length;t++)if(this.curType==e[t][0])return e[t][1];return i.constant.TOWER_STATE_BUILD_4},isMaxLevel:function(){return this.getLevel()>=this.getTowerMaxLevel()},isHeroLevel:function(){return this.curState>=i.constant.TOWER_STATE_BUILD_4},getTowerId:function(){return this.towerData?this.towerData.id:-1},updateOriginPos:function(e){if(!this.isTowerStopping()){var t=i.Utils.getRandomInt(1,360),a=this.soldierNum,n=i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_BARRACK);i.Logger.debug("\u7f81\u7eca\u6280\u80fd \u989d\u5916\u5175\u8425\u58eb\u5175\u6570 + "+n),a+=n;for(var o=0;o<this.towerSoldierList.length;o++){this.towerSoldierList[o].getPosition();var s=i.Utils.getOffsetByRotationAndDistance(t,30);s=cc.v2(e.x+s.x,e.y+s.y),this.towerSoldierList[o].getComponent("GameHero").updateOriginPos(s),360<(t+=360/a)&&(t-=360)}}},updateSoldierList:function(){if(this.isTowerActive()&&this.curType==i.constant.TOWER_TYPE_BARRACK)if(this.towerSoldierList.length<=0){var e=this.getFirstOriginPos(this.curindex),t=this.getShootPos(),a=i.Utils.getDegree(e,this.node.getPosition()),n=this.soldierNum,o=i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_BARRACK);i.Logger.debug("\u7f81\u7eca\u6280\u80fd \u989d\u5916\u5175\u8425\u58eb\u5175\u6570 + "+o),n+=o;for(var s=0;s<n;s++){var r=i.Utils.getOffsetByRotationAndDistance(a,30),c=cc.v2(e.x+r.x,e.y+r.y);r={soldierId:this.soldierId,curPos:t,originPos:c,source:i.constant.HERO_SOURCE_TOWER,tower:this},((r=i.battleScene.createSoldierByData(r)).getComponent("GameHero").hostTower=this).towerSoldierList.push(r),i.soundsUtil.playSoundEffect(this.towerTypeData.shotAudio),360<(a+=360/n)&&(a-=360),i.Logger.debug("curPos = "+t+" originPos = "+c)}i.battleScene.putTaskCacheItem(i.constant.TASK_TYPE_BARRACK_PEOPLE,n)}else for(var l=0;l<this.towerSoldierList.length;l++){var d=this.towerSoldierList[l],h=this.towerSoldierList[l].getComponent("GameHero");d={soldierId:this.soldierId,curPos:d.getPosition(),originPos:h.originPos,source:i.constant.HERO_SOURCE_TOWER,tower:this,isUpdate:!0},h.initData(d)}},getFirstOriginPos:function(e){return e=i.battleScene.gameMapObj.towerOriginList[e],cc.v2(e.x-320,e.y-568)},updateTowerDir:function(e){var t=0;e&&(t=i.Utils.getDegree(this.node.getPosition(),e)),e=-1,e=this.curType==i.constant.TOWER_TYPE_ARROW?45<t&&t<135?i.constant.HERO_DIR_UP:135<=t&&t<225?i.constant.HERO_DIR_LEFT:225<=t&&t<315?i.constant.HERO_DIR_DOWN:i.constant.HERO_DIR_RIGHT:(this.curType,i.constant.TOWER_TYPE_MAGIC,90<=t&&t<270?i.constant.HERO_DIR_LEFT:i.constant.HERO_DIR_RIGHT),this.curDir=e},getActionName:function(e){var t="";switch(e){case i.constant.TOWER_ACTION_BUILD:t="build";break;case i.constant.TOWER_ACTION_STAND:t="stand";break;case i.constant.TOWER_ACTION_ATK:t="shoot";break;case i.constant.TOWER_ACTION_UPGRADE:t="upgrade";break;case i.constant.TOWER_ACTION_SKILL:t="shoot_skill"}return this.isHaveHero()||this.curType!=i.constant.TOWER_TYPE_ARROW&&this.curType!=i.constant.TOWER_TYPE_MAGIC||(this.curDir==i.constant.HERO_DIR_UP?t+="_up":this.curDir==i.constant.HERO_DIR_DOWN?t+="_down":this.curDir==i.constant.HERO_DIR_LEFT?t+="_left":this.curDir==i.constant.HERO_DIR_RIGHT&&(t+="_right")),t},showTowerEnterHeroEffect:function(){var e,t=this;this.enterHeroAni?(this.enterHeroAni.node.active=!0,this.enterHeroAni.stop(),this.enterHeroAni.setCurrentTime(0),this.enterHeroAni.play("tower_upgrade")):(e=i.constant.PREFAB_PATH_BATTLE+"tower_upgrade",i.battleScene.getBulletPrefab(e,function(a){a?(a=cc.instantiate(a),t.node.addChild(a),t.enterHeroAni=a.getComponent("cc.Animation"),t.enterHeroAni.on("finished",t.onFinished,t),t.enterHeroAni.node.active=!0,t.enterHeroAni.stop(),t.enterHeroAni.setCurrentTime(0),t.enterHeroAni.play("tower_upgrade")):i.Logger.debug("error prefabName = "+e)}))},showTowerSealEffect:function(e){var t,a=this;e?this.sealAni?(this.sealAni.node.active=!0,this.sealAni.stop(),this.sealAni.setCurrentTime(0),this.sealAni.play("tower_seal")):(t=i.constant.PREFAB_PATH_BATTLE+"tower_seal",i.battleScene.getBulletPrefab(t,function(e){var n;e?(n=cc.instantiate(e),e=(a.towerData||a).sealHeightOffset,n.setPosition(cc.v2(0,e)),a.node.addChild(n),a.sealAni=n.getComponent("cc.Animation"),a.sealAni.on("finished",a.onFinished,a),a.sealAni.node.active=!0,a.sealAni.stop(),a.sealAni.setCurrentTime(0),a.sealAni.play("tower_seal")):i.Logger.debug("error prefabName = "+t)})):this.sealAni&&(this.sealAni.node.active=!1)},showTowerActiveEffect:function(){var e,t=this;this.sealAni?(this.sealAni.node.active=!0,this.sealAni.stop(),this.sealAni.setCurrentTime(0),this.sealAni.play("tower_seal_getridof")):(e=i.constant.PREFAB_PATH_BATTLE+"tower_seal",i.battleScene.getBulletPrefab(e,function(a){a?((a=cc.instantiate(a)).setPosition(cc.v2(0,t.towerData.sealHeightOffset)),t.node.addChild(a),t.sealAni=a.getComponent("cc.Animation"),t.sealAni.on("finished",t.onFinished,t),t.sealAni.node.active=!0,t.sealAni.stop(),t.sealAni.setCurrentTime(0),t.sealAni.play("tower_seal_getridof")):i.Logger.debug("error prefabName = "+e)}))},showTowerSealDamage:function(){var e=this,t=i.constant.PREFAB_PATH_BATTLE+"tower_seal_smoke";i.battleScene.getBulletPrefab(t,function(a){var n,o;a?((n=cc.instantiate(a)).setPosition(cc.v2(0,e.towerData.sealHeightOffset)),e.node.addChild(n),n.getComponent("cc.ParticleSystem").resetSystem(),o=cc.delayTime(1),a=cc.callFunc(function(){this.active=!1,this.destroy()},n),a=cc.sequence(o,a),n.stopAllActions(),n.runAction(a)):i.Logger.debug("error prefabName = "+t)})},showHeroShowEffect:function(){var e,t=this;this.showHeroAni?(this.showHeroAni.node.active=!0,this.showHeroAni.stop(),this.showHeroAni.setCurrentTime(0),this.showHeroAni.play("hero_deliver")):(e=i.constant.PREFAB_PATH_BATTLE+"hero_deliver",i.battleScene.getBulletPrefab(e,function(a){a?(a=cc.instantiate(a),t.heroNode.addChild(a),t.showHeroAni=a.getComponent("cc.Animation"),t.showHeroAni.on("finished",t.onFinished,t),t.showHeroAni.node.active=!0,t.showHeroAni.stop(),t.showHeroAni.setCurrentTime(0),t.showHeroAni.play("hero_deliver")):i.Logger.debug("error prefabName = "+e)}))},onFinished:function(e,t){"tower_upgrade"==(t=t.name)?this.enterHeroAni&&(this.enterHeroAni.node.active=!1):"hero_deliver"==t?this.showHeroAni&&(this.showHeroAni.node.active=!1):"tower_seal_getridof"==t&&this.sealAni&&(this.sealAni.node.active=!1)},showTowerCreateEffect:function(){this.towerCreateEffect.node.active=!0,this.towerCreateEffect.resetSystem(),i.soundsUtil.playSoundEffect(this.towerTypeData.buildAudio);var e=cc.delayTime(1),t=cc.callFunc(function(){this.towerCreateEffect.stopSystem(),this.towerCreateEffect.node.active=!1},this);t=cc.sequence(e,t),this.towerCreateEffect.node.stopAllActions(),this.towerCreateEffect.node.runAction(t)},showTowerRemoveEffect:function(){this.towerRemoveEffect.node.active=!0,this.towerRemoveEffect.resetSystem(),i.soundsUtil.playSoundEffect(this.towerTypeData.saleAudio);var e=cc.delayTime(1),t=cc.callFunc(function(){this.towerRemoveEffect.stopSystem(),this.towerRemoveEffect.node.active=!1},this);t=cc.sequence(e,t),this.towerRemoveEffect.node.stopAllActions(),this.towerRemoveEffect.node.runAction(t)},updateTowerAction:function(e,t){this.updateTowerDir(t);var a=this.getActionName(e);t=!1,e==i.constant.TOWER_ACTION_STAND&&(t=!0),this.towerSpine.clearTrack(0),this.towerSpine.findAnimation(a)||(a=this.getActionName(i.constant.TOWER_ACTION_STAND));var n=this;this.towerSpine.setAnimation(0,a,t)&&!t&&this.towerSpine.setCompleteListener(function(e){(e.animation?e.animation.name:"")==a&&(e=n.getActionName(i.constant.TOWER_ACTION_STAND),n.towerSpine.setAnimation(0,e,!0))})},updateTowerShow:function(e){var t,a,n=this;if(this.curState==i.constant.TOWER_STATE_BUILD_4&&i.battleScene.updateTowerArrow(),this.isHeroLevel()&&e&&0<this.upgradeTowerId){var o=i.templateManager.getTowerDataById(this.upgradeTowerId).heroId;return this.updateHeroSpine(o),void(this.isUpgradeing=!0)}this.updateTowerData(),this.towerData&&(this.activeTipsNode.setPosition(cc.v2(this.towerData.bubblePoint[0],this.towerData.bubblePoint[1])),t=i.player.gmModule.isWxTowerSpine(),a=this.towerData.appearance,o=i.constant.SPINE_PATH_TOWER,t&&("tower2_1"!=a&&"tower4_1"!=a||(a+="_wx",i.Logger.debug("isWxSpine spineName = "+a))),o+=a,i.battleScene.getSpineData(o,function(e){e&&(n.towerSpine.skeletonData=e,n.towerSpine.premultipliedAlpha=0<n.towerData.isPremultipliedAlpha,n.towerSpine.timeScale=i.battleScene.battleSpeedPercent*n.baseTimeScale,t&&("tower2_1_wx"!=a&&"tower4_1_wx"!=a||(n.towerSpine.premultipliedAlpha=!1)),n.updateTowerAction(i.constant.TOWER_ACTION_STAND),i.battleScene.skillHeroQuickData&&0<i.battleScene.skillHeroQuickData.atkSpeedTime&&(n.skillAddAtkSpeed(i.battleScene.skillHeroQuickData.atkSpeedPercent,i.battleScene.skillHeroQuickData.atkSpeedTime),n.skillAddAtk1(i.battleScene.skillHeroQuickData.atkHurtPercent,i.battleScene.skillHeroQuickData.atkSpeedTime),n.skillAddAtk2(i.battleScene.skillHeroQuickData.atkHurtPercent,i.battleScene.skillHeroQuickData.atkSpeedTime)))}),i.player.gmModule.isHideTowerSpine()&&(this.towerSpine.node.active=!1,this.scheduleOnce(function(){this.floor&&(this.floor.active=!1)},1)),this.heroEnterTower(this.inTowerHeroId))},setTowerState:function(e){switch(this.curState=e,this.curState){case i.constant.TOWER_STATE_LOCK:break;case i.constant.TOWER_STATE_EMPTY:this.curType=0,this.spineNode.active=!1,this.updateTowerShow();break;case i.constant.TOWER_STATE_BUILD_1:case i.constant.TOWER_STATE_BUILD_2:case i.constant.TOWER_STATE_BUILD_3:case i.constant.TOWER_STATE_BUILD_4:this.spineNode.active=!0,this.spineNode.opacity=this.isActive?255:100,this.updateTowerShow(!0)}},onClickTower:function(e){var t=this;return this.isUpgradeing?(i.Logger.debug("onClickTower return isUpgradeing"),!1):!!this.node.active&&(0<this.stopTowerTime?(this.stopTowerTime-=this.clickTowerTime,this.stopTowerTime<=0&&this.showTowerStopEffect(!1),!1):(this.curState==i.constant.TOWER_STATE_EMPTY?(i.guideManager.isGuidingType(i.constant.GUIDE_TYPE_INSTANCE_1),i.battleScene.gameTowerControlObj.showControl(this.node.position,i.constant.TOWER_CONTROL_TYPE_BUILD,this,e)):this.curState>=i.constant.TOWER_STATE_BUILD_1&&(this.curType==i.constant.TOWER_TYPE_ARROW?i.gameScene.removeBubble(i.constant.GUIDE_TYPE_INSTANCE_3_4):this.curType==i.constant.TOWER_TYPE_BARRACK?i.gameScene.removeBubble(i.constant.GUIDE_TYPE_INSTANCE_3_4_1):this.curType==i.constant.TOWER_TYPE_MAGIC?i.gameScene.removeBubble(i.constant.GUIDE_TYPE_INSTANCE_4_5):this.curType==i.constant.TOWER_TYPE_CANNON&&i.gameScene.removeBubble(i.constant.GUIDE_TYPE_INSTANCE_4_4),i.gameScene.removeBubble(i.constant.GUIDE_TYPE_INSTANCE_7_1),this.isTowerActive()?i.battleScene.gameTowerControlObj.showControl(this.node.position,i.constant.TOWER_CONTROL_TYPE_UP,this):(i.Logger.debug("\u5854\u8fd8\u6ca1\u6fc0\u6d3b"),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_HERO_TOWER_UNLOCK,{heroId:this.inTowerHeroId,type:i.constant.TOWER_UNLOCK_PAGE_ACTIVE,activeCallBack:function(){t.setTowerActive(!0,!0)},destroyCallBack:function(){t.destroyTower()}}))),!0))},setBubbleGuide:function(e){this.bubbleGuideId=e},checkUpgradeBubble:function(){this.bubbleGuideId&&i.gameScene.removeBubble(this.bubbleGuideId)},setTowerActive:function(e,t){this.isActive=e,this.spineNode.opacity=this.isActive?255:210,this.heroNode.opacity=this.isActive?255:210,this.timeNode.active=!e,this.activeTipsNode.active=!e,e?(this.activeDestroyTime=0,this.curType==i.constant.TOWER_TYPE_BARRACK&&this.towerSoldierList.length<=0&&this.updateSoldierList()):this.activeDestroyTime=i.templateManager.getGameParamValue("activateHeroTowerTime"),t&&(e?this.showTowerActiveEffect():this.showTowerSealEffect(!0))},isTowerActive:function(){return this.isActive},destroyTower:function(){this.cleanTower(),this.showTowerSealDamage(),this.showTowerSealEffect(!1),this.setTowerActive(!0)},willBuildTower:function(e){var t,a=this;1<=this.getLevel()||(this.spineNode.active=!0,this.spineNode.opacity=127.5,t=i.templateManager.getTowerListByType(e,1)[0],i.templateManager.getTowerTypeById(e),this.curType=e,e=t.appearance,e=i.constant.SPINE_PATH_TOWER+e,i.battleScene.getSpineData(e,function(e){e&&(a.towerSpine.skeletonData=e,a.towerSpine.premultipliedAlpha=0<t.isPremultipliedAlpha,a.towerSpine.timeScale=i.battleScene.battleSpeedPercent*a.baseTimeScale,a.updateTowerAction(i.constant.TOWER_ACTION_STAND))}))},reductionTower:function(){this.curState<=i.constant.TOWER_STATE_EMPTY&&this.setTowerState(i.constant.TOWER_STATE_EMPTY)},updateTowerHeroAttr:function(){for(var e=0;e<i.battleScene.gameHeroObjList.length;e++)i.battleScene.gameHeroObjList[e].checkTowerAddAttr();for(var t=0;t<i.battleScene.gameTowerList.length;t++)i.battleScene.gameTowerList[t].checkTowerAddAttr()},buildTower:function(e){var t,a,n,o,s;this.curState==i.constant.TOWER_STATE_EMPTY&&(this.upgradeTowerTime=1,this.curType=e,this.setTowerState(i.constant.TOWER_STATE_BUILD_1),this.updateTowerAction(i.constant.TOWER_ACTION_BUILD),this.showTowerCreateEffect(),this.curType==i.constant.TOWER_TYPE_BARRACK?0<i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_BARRACK)&&(t=i.player.heroModule.getRestrainSkillList(i.constant.RESTRAIN_TYPE_SGML),e=cc.v2(this.node.getPosition().x,this.node.getPosition().y+50),i.battleScene.gameBattleUIObj.checkShowRestrainTips(i.constant.RESTRAIN_TYPE_SGML,-1,e,t)):this.curType==i.constant.TOWER_TYPE_CANNON?0<i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_TOWER_STRONG,i.constant.SKILL_ATTR_ATK_DISTANCE,this.curType,this.getLevel())?(n=i.player.heroModule.getRestrainSkillList(i.constant.RESTRAIN_TYPE_YMSJ),a=cc.v2(this.node.getPosition().x,this.node.getPosition().y+50),i.battleScene.gameBattleUIObj.checkShowRestrainTips(i.constant.RESTRAIN_TYPE_YMSJ,-1,a,n)):0<i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_TOWER_STRONG,i.constant.SKILL_ATTR_ADD_HURT,this.curType,this.getLevel())&&(a=i.player.heroModule.getRestrainSkillList(i.constant.RESTRAIN_TYPE_ZJLYX),n=cc.v2(this.node.getPosition().x,this.node.getPosition().y+50),i.battleScene.gameBattleUIObj.checkShowRestrainTips(i.constant.RESTRAIN_TYPE_ZJLYX,-1,n,a)):this.curType==i.constant.TOWER_TYPE_MAGIC?0<i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_TOWER_STRONG,i.constant.SKILL_ATTR_ADD_HURT,this.curType,this.getLevel())&&(s=i.player.heroModule.getRestrainSkillList(i.constant.RESTRAIN_TYPE_JSMR),o=cc.v2(this.node.getPosition().x,this.node.getPosition().y+50),i.battleScene.gameBattleUIObj.checkShowRestrainTips(i.constant.RESTRAIN_TYPE_JSMR,-1,o,s)):this.curType==i.constant.TOWER_TYPE_ARROW&&0<i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_TOWER_STRONG,i.constant.SKILL_ATTR_CRIT_PROBABILITY,this.curType,this.getLevel())&&(o=i.player.heroModule.getRestrainSkillList(i.constant.RESTRAIN_TYPE_YXXYX),s=cc.v2(this.node.getPosition().x,this.node.getPosition().y+50),i.battleScene.gameBattleUIObj.checkShowRestrainTips(i.constant.RESTRAIN_TYPE_YXXYX,-1,s,o)),i.battleScene.putTaskCacheItem(i.constant.TASK_TYPE_BUILD_TOWER,1)),this.updateTowerHeroAttr()},cleanTower:function(){if(this.timeNode.active=!1,this.activeTipsNode.active=!1,this.curType==i.constant.TOWER_TYPE_BARRACK){for(var e=0;e<this.towerSoldierList.length;e++){this.towerSoldierList[e].getComponent("GameHero").startDieAction();var t=i.battleScene.soldierList.indexOf(this.towerSoldierList[e]);i.battleScene.soldierList.splice(t,1),i.battleScene.giveBackSoldier(this.towerSoldierList[e])}this.towerSoldierList=[]}this.isHaveHero()&&(this.inTowerHeroId=-1,this.heroNode.active=!1),this.setTowerState(i.constant.TOWER_STATE_EMPTY),this.updateTowerHeroAttr()},sellTower:function(){this.curState>=i.constant.TOWER_STATE_BUILD_1&&(this.cleanTower(),this.showTowerRemoveEffect())},upgradeTower:function(e){var t,a,n;this.curState>=i.constant.TOWER_STATE_BUILD_4&&i.Logger.debug("\u4ec0\u4e48\u60c5\u51b5 \u90fd\u6ee1\u7ea7\u4e86 \u8fd8\u5347\uff01"),e&&(this.upgradeTowerId=e),this.curState++,this.curState==i.constant.TOWER_STATE_BUILD_4&&(this.hideHeroHead(),0<i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_TOWER_STRONG,i.constant.SKILL_ATTR_ADD_HURT,this.curType,this.getLevel())?(a=i.player.heroModule.getRestrainSkillList(i.constant.RESTRAIN_TYPE_ZNR),t=cc.v2(this.node.getPosition().x,this.node.getPosition().y+50),i.battleScene.gameBattleUIObj.checkShowRestrainTips(i.constant.RESTRAIN_TYPE_ZNR,-1,t,a)):0<(n=i.battleScene.getHeroTowerRestrainList(e)).length&&(a=cc.v2(this.node.getPosition().x,this.node.getPosition().y+50),i.battleScene.gameBattleUIObj.checkShowRestrainTips(-1,-1,a,n))),this.setTowerState(this.curState),e||this.showTowerCreateEffect(),this.isNeedCheckUpgradeTime=this.curState<i.constant.TOWER_STATE_BUILD_4,this.updateTowerAction(i.constant.TOWER_ACTION_UPGRADE),i.soundsUtil.playSoundEffect(this.towerTypeData.upgradeAudio),this.updateTowerHeroAttr(),this.upgradeTowerTime=this.curState==i.constant.TOWER_STATE_BUILD_3?2.3:1,this.curState==i.constant.TOWER_STATE_BUILD_4&&(i.battleScene.putTaskCacheItem(i.constant.TASK_TYPE_HERO_INTO_TOWER,1,this.upgradeTowerId),n=i.templateManager.getTowerDataById(this.upgradeTowerId),i.player.commonModule.addTowerHeroBattleCount(n.heroId));try{e||this.towerData.id}catch(e){}},getHeroAddAttr:function(e){for(var t=i.battleScene.gameHeroObjList,a=0,n=0;n<t.length;n++){var o=t[n].getAddTowerAttr(e);0<o&&(a+=o)}for(var s=i.battleScene.gameTowerList,r=0;r<s.length;r++){var c=s[r].getAddTowerAttr(e);0<c&&(a+=c)}return a},updatePhysicalAtk:function(){if(this.towerData){this.physicalAtk=this.towerData.physicalAttack;var e,t,a=1;if(this.physicalAtk*=this.towerLevelData.attack/1e4,this.curType===i.constant.TOWER_TYPE_BARRACK)for(var n=0;n<this.towerSoldierList.length;n++)this.towerSoldierList[n].getComponent("GameHero").updatePhysicalAtk();else for(var o=i.battleScene.getInstanceSkillByAttr(i.constant.SKILL_ATTR_PHYSICAL_ATK,this.curType),s=0;s<o.length;s++)a+=o[s].natureList[2]/1e4;0<this.skillAddAtkTime1&&(a+=this.skillAddAtkPercent1),this.isHaveHero()&&(e=i.player.heroModule.getHeroLevel(this.inTowerHeroId),a+=(100+(e=0<(t=i.battleScene.getTryHeroLevel(this.inTowerHeroId))?t:e)-1)/1e3),0<this.towerAttrAtkPercent1&&(a+=this.towerAttrAtkPercent1),this.physicalAtk*=a,this.physicalAtk*=1+this.towerQualityData.attrValue[1]/1e4}},updateMagicAtk:function(){if(this.towerData){this.magicAtk=this.towerData.magicAttack;var e=1;if(this.magicAtk*=this.towerLevelData.attack/1e4,this.curType===i.constant.TOWER_TYPE_BARRACK)for(var t=0;t<this.towerSoldierList.length;t++)this.towerSoldierList[t].getComponent("GameHero").updateMagicAtk();else for(var a=i.battleScene.getInstanceSkillByAttr(i.constant.SKILL_ATTR_MAGIC_ATK,this.curType),n=0;n<a.length;n++)e+=a[n].natureList[2]/1e4;var o,s=this.getHeroAddAttr(i.constant.HERO_SKILL_EFFECT_ATK_2);0<s&&(e+=s),0<this.skillAddAtkTime2&&(e+=this.skillAddAtkPercent2),this.isHaveHero()&&(o=i.player.heroModule.getHeroLevel(this.inTowerHeroId),e+=(100+(o=0<(s=i.battleScene.getTryHeroLevel(this.inTowerHeroId))?s:o)-1)/1e3),this.magicAtk*=e,this.magicAtk*=1+this.towerQualityData.attrValue[1]/1e4}},updatePhysicalDef:function(){if(this.towerData&&!this.curType===i.constant.TOWER_TYPE_BARRACK)for(var e=0;e<this.towerSoldierList.length;e++)this.towerSoldierList[e].getComponent("GameHero").updatePhysicalDef()},updateMagicDef:function(){if(this.towerData&&!this.curType===i.constant.TOWER_TYPE_BARRACK)for(var e=0;e<this.towerSoldierList.length;e++)this.towerSoldierList[e].getComponent("GameHero").updateMagicDef()},updateCritRate:function(){if(this.towerData)if(this.critRate=this.towerData.critRate/100,this.curType===i.constant.TOWER_TYPE_BARRACK)for(var e=0;e<this.towerSoldierList.length;e++)this.towerSoldierList[e].getComponent("GameHero").updateCritRate();else{for(var t=i.battleScene.getInstanceSkillByAttr(i.constant.SKILL_ATTR_CRIT_PROBABILITY,this.curType),a=0;a<t.length;a++)this.critRate+=t[a].natureList[2]/100;var n=i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_TOWER_STRONG,i.constant.SKILL_ATTR_CRIT_PROBABILITY,this.curType,this.getLevel());0<n&&(i.Logger.debug("\u7f81\u7eca\u6280\u80fd \u66b4\u51fb\u7387 + "+n),this.critRate+=100*n),0!=(n=i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_HERO_TOWER,i.constant.SKILL_ATTR_CRIT_PROBABILITY,this.towerData.id))&&(i.Logger.debug("\u7f81\u7eca\u6280\u80fd \u6307\u5b9a\u5c06\u5854\u66b4\u51fb\u3000+ "+n),this.critRate+=100*n)}},updateCritHurt:function(){if(this.critHurt=2,this.curType===i.constant.TOWER_TYPE_BARRACK)for(var e=0;e<this.towerSoldierList.length;e++)this.towerSoldierList[e].getComponent("GameHero").updateCritHurt();else{for(var t=i.battleScene.getInstanceSkillByAttr(i.constant.SKILL_ATTR_CRIT_HURT,this.curType),a=0;a<t.length;a++)this.critHurt+=t[a].natureList[2]/1e4;var n=i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_TOWER_STRONG,i.constant.SKILL_ATTR_CRIT_HURT,this.curType,this.getLevel());0!=n&&(i.Logger.debug("\u7f81\u7eca\u6280\u80fd \u5854\u7206\u4f24 + "+n),this.critHurt+=n)}},updateDodge:function(){},updateShootWaitTime:function(){if(this.towerData)if(this.shootWaitTime=this.towerData.speed,this.curType===i.constant.TOWER_TYPE_BARRACK)for(var e=0;e<this.towerSoldierList.length;e++)this.towerSoldierList[e].getComponent("GameHero").updateShootWaitTime();else{for(var t=i.battleScene.getInstanceSkillByAttr(i.constant.SKILL_ATTR_ATK_SPEED,this.curType),a=1,n=0,o=0;o<t.length;o++)n+=t[o].natureList[2]/1e4;0<this.atkSpeedTime&&(n+=this.atkSpeedPercent),0<this.skillAddAtkSpeedTime&&(n+=this.skillAddAtkSpeedPercent),0<this.towerAttrAtkSpeedPercent&&(n+=this.towerAttrAtkSpeedPercent);var s=i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_TOWER_STRONG,i.constant.SKILL_ATTR_ATK_SPEED,this.curType,this.getLevel());0<s&&(i.Logger.debug("\u7f81\u7eca\u6280\u80fd \u5854\u653b\u51fb\u901f\u5ea6 + "+s),n+=s),0!=(s=i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_HERO_TOWER,i.constant.SKILL_ATTR_ATK_SPEED,this.towerData.id))&&(i.Logger.debug("\u7f81\u7eca\u6280\u80fd \u6307\u5b9a\u5c06\u5854\u653b\u901f\u3000+ "+s),n+=s),(a/=1+n)<.3&&(a=.3),this.shootWaitTime=this.shootWaitTime*a/1e3}},updateShootDistance:function(){if(this.towerData){this.shootDistance=this.towerData.range;for(var e=i.battleScene.getInstanceSkillByAttr(i.constant.SKILL_ATTR_ATK_DISTANCE,this.curType),t=1,a=0;a<e.length;a++)t+=e[a].natureList[2]/1e4;this.isHaveHero()&&(t+=i.templateManager.getGameParamValue("heroInTowerDistance")/1e4);var n=i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_TOWER_STRONG,i.constant.SKILL_ATTR_ATK_DISTANCE,this.curType,this.getLevel());0<n&&(i.Logger.debug("\u7f81\u7eca\u6280\u80fd \u5854\u653b\u51fb\u8303\u56f4 + "+n),t+=n),this.shootDistance*=t}},updateFaintedRate:function(){if(this.faintedRate=0,this.faintedTime=0,this.curType===i.constant.TOWER_TYPE_BARRACK)for(var e=0;e<this.towerSoldierList.length;e++)this.towerSoldierList[e].getComponent("GameHero").updateFaintedRate();else for(var t=i.battleScene.getInstanceSkillByAttr(i.constant.SKILL_ATTR_ENEMY_GOSH,this.curType),a=0;a<t.length;a++)this.faintedRate+=t[a].triggerProbability/100,this.faintedTime=Math.max(t[a].lastTime,this.faintedTime)/1e3;var n,o,s=this.getPassiveSkillData(i.constant.HERO_SKILL_EFFECT_SWOON);s&&(n=s?s[1]/1e3:0,o=s?s[2]:0,s=s?s[3]/100:100,this.passiveFaintedData={faintedTime:n,faintedType:Math.floor(o),faintedRate:s})},updateDoubleHit:function(){this.doubleHitRate=0;for(var e=i.battleScene.getInstanceSkillByAttr(i.constant.SKILL_ATTR_DOUBLE_ATK,this.curType),t=0;t<e.length;t++)this.doubleHitRate+=e[t].triggerProbability/100},updateFireArrow:function(){this.fireArrowRate=0,this.fireArrowHurt=0;for(var e=i.battleScene.getInstanceSkillByAttr(i.constant.SKILL_ATTR_FIRE_ARROW,this.curType),t=0;t<e.length;t++)this.fireArrowRate+=e[t].triggerProbability/100,this.fireArrowHurt=Math.max(e[t].natureList[2]/1e4,this.fireArrowHurt)},updateBulletMoveSpeed:function(){this.bulletMoveSpeedPercent=1;var e=this.getTowerSkillAttr(i.constant.SKILL_ATTR_BULLET_SPEED);e&&(this.bulletMoveSpeedPercent-=e[2]/1e4)},updateSecondKill:function(){this.secondKillRate=0,this.secondKillPercent=0;var e=this.getTowerSkillAttr(i.constant.SKILL_ATTR_SECOND_KILL);e&&(this.secondKillRate+=e[2]/100,this.secondKillPercent=e[3]/1e4),(e=this.getPassiveSkillData(i.constant.HERO_SKILL_EFFECT_SECOND))&&(this.secondKillRate+=e[1]/100,(e=e[2]/1e4)>this.secondKillPercent&&(this.secondKillPercent=e))},updateAtkAccumulate:function(){this.atkAccumulatePercent=1,this.maxAtkAccumulateNum=0;var e=this.getTowerSkillAttr(i.constant.SKILL_ATTR_ATK_ACCUMULATE);e&&(this.atkAccumulatePercent=e[2]/1e4,this.maxAtkAccumulateNum=e[3]),(e=this.getPassiveSkillData(i.constant.HERO_SKILL_EFFECT_ATK_ACCUMULATE))&&(this.atkAccumulatePercent=e[1]/1e4,this.maxAtkAccumulateNum=e[2]-1)},updatePassivePoisonAttr:function(){this.passivePoisonAttrData={attackRate:0,hurtTime:0,totalTime:0,isRealHurt:!0,physicalAtk:0,magicAtk:0};var e,t,a=this.getPassiveSkillData(i.constant.HERO_SKILL_EFFECT_CONTINUE_2);a&&(this.passivePoisonAttrData.attackRate=a[2]/1e4,this.passivePoisonAttrData.hurtTime=a[3]/1e3,this.passivePoisonAttrData.totalTime=a[4]/1e3,e=a[1]+this.physicalAtk*a[2]/1e4,t=a[1]+this.magicAtk*a[2]/1e4,a=0<a[5],this.passivePoisonAttrData.isRealHurt=a,this.passivePoisonAttrData.physicalAtk=e,this.passivePoisonAttrData.magicAtk=t)},updateSendEnemy:function(){this.sendEnemyDistance=0,this.sendEnemyRate=0,this.maxSendEnemyNum=999999999,this.sendEnemyBulletId=0,this.sendData=null;var e=this.getTowerSkillAttr(i.constant.SKILL_ATTR_SEND_ENEMY);e&&(this.sendEnemyDistance=e[2],this.sendEnemyRate=e[3]/100,this.maxSendEnemyNum=e[4],this.sendEnemyBulletId=e[5],this.sendData={distance:this.sendEnemyDistance,time:.8,num:99})},updateFlySkyBullet:function(){this.flySkyBulletNum=0,this.flySkyRate=0,this.maxFlySkyNum=999999999,this.flySkyBulletId=0;var e=this.getTowerSkillAttr(i.constant.SKILL_ATTR_MULTIPLE_BULLET);e&&(this.flySkyBulletNum=e[2],this.flySkyRate=e[3]/100,this.maxFlySkyNum=e[4],this.flySkyBulletId=e[5])},updateCritAtkSpeed:function(){this.critAtkSpeedPercent=0,this.critAtkSpeedTime=4;var e=this.getPassiveSkillData(i.constant.HERO_SKILL_EFFECT_CRIT_ATK_SPEED);e&&(this.critAtkSpeedPercent+=e[1]/1e4,this.critAtkSpeedTime=e[2]/1e3)},checkCritAtkSpeed:function(){0<this.critAtkSpeedPercent&&0<this.critAtkSpeedTime&&this.addAtkSpeed(this.critAtkSpeedPercent,this.critAtkSpeedTime)},addAtkSpeed:function(e,t){this.atkSpeedPercent=e,this.atkSpeedTime=t,this.updateShootWaitTime()},skillAddAtkSpeed:function(e,t){this.skillAddAtkSpeedPercent=e,this.skillAddAtkSpeedTime=t,this.updateShootWaitTime(),this.baseTimeScale=1+this.skillAddAtkSpeedPercent,this.updateBattleSpeedPercent()},skillAddAtk1:function(e,t){this.skillAddAtkPercent1=e,this.skillAddAtkTime1=t,this.updatePhysicalAtk()},skillAddAtk2:function(e,t){this.skillAddAtkPercent2=e,this.skillAddAtkTime2=t,this.updateMagicAtk()},updateTowerAddAttr:function(){this.attrTowerType=999,this.attrTowerLevel=999,this.towerAttrType=-1,this.towerAttrPercent=0;var e=this.getPassiveSkillData(i.constant.HERO_SKILL_EFFECT_TOWER_ADD_ATTR);e&&(this.attrTowerType=e[1],this.attrTowerLevel=e[2],this.towerAttrType=e[3],this.towerAttrPercent=e[4]/1e4)},checkTowerAddAttr:function(){if(0<this.towerAttrType){for(var e=0,t=0;t<i.battleScene.gameTowerList.length;t++){var a=(n=i.battleScene.gameTowerList[t]).curType,n=n.getLevel();a=this.attrTowerType<0||a==this.attrTowerType,n=n>=this.attrTowerLevel,a&&n&&e++}var o=e*this.towerAttrPercent;this.towerAttrType==i.constant.HERO_SKILL_EFFECT_ATK_1?(this.towerAttrAtkPercent1=o,this.updatePhysicalAtk()):this.towerAttrType==i.constant.HERO_SKILL_EFFECT_ATK_SPEED&&(this.towerAttrAtkSpeedPercent=o,this.updateShootWaitTime())}},updateAddTowerAttr:function(){this.addTowerType=999,this.addTowerLevel=999,this.addTowerAttrType=-1,this.addTowerAttrPercent=0;var e=this.getPassiveSkillData(i.constant.HERO_SKILL_EFFECT_ADD_TOWER_ATTR);e&&(this.addTowerType=e[1],this.addTowerLevel=e[2],this.addTowerAttrType=e[3],this.addTowerAttrPercent=e[4]/1e4)},updateAddIronAttr:function(){this.addIronAttrData={rate:0,addRate:0};var e=this.getPassiveSkillData(i.constant.HERO_SKILL_EFFECT_ADD_MONEY);e&&(this.addIronAttrData.rate=e[1]/100,this.addIronAttrData.addRate=e[2]/1e4)},updatePassiveAddHurt:function(){this.passiveAddHurtData={effectNum:0,time:0};var e=this.getPassiveSkillData(i.constant.HERO_SKILL_EFFECT_HURT_ADD);e&&(this.passiveAddHurtData.effectNum=e[1]/1e4,this.passiveAddHurtData.time=e[2]/1e3),0!=(e=i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_TOWER_STRONG,i.constant.SKILL_ATTR_ADD_HURT,this.curType,this.getLevel()))&&(i.Logger.debug("\u7f81\u7eca\u6280\u80fd \u5854\u589e\u4f24\u3000+ "+e),this.passiveAddHurtData.effectNum+=e,this.passiveAddHurtData.time=1/60),0!=(e=i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_HERO_TOWER,i.constant.SKILL_ATTR_ADD_HURT,this.towerData.id))&&(i.Logger.debug("\u7f81\u7eca\u6280\u80fd \u6307\u5b9a\u5c06\u5854\u589e\u4f24\u3000+ "+e),this.passiveAddHurtData.effectNum+=e,this.passiveAddHurtData.time=1/60)},updateAtkAoe:function(){this.passiveAtkAoeData={effectNum:0,radius:0,bulletId:0};var e=this.getPassiveSkillData(i.constant.HERO_SKILL_EFFECT_MAGIC_AOE);e&&(this.passiveAtkAoeData.effectNum=e[1]/1e4,this.passiveAtkAoeData.radius=e[2],this.passiveAtkAoeData.bulletId=e[3])},updateReduceSpeed:function(){this.passiveMoveSpeedData={effectNum:0,time:0};var e=this.getPassiveSkillData(i.constant.HERO_SKILL_EFFECT_MOVE_SPEED);e&&(this.passiveMoveSpeedData.effectNum=e[1]/1e4,this.passiveMoveSpeedData.time=e[2]/1e3)},updateAtkOtherEnemy:function(){this.attackOtherEnemyData={rate:0,angle:0,attackNum:0};var e=this.getPassiveSkillData(i.constant.HERO_SKILL_EFFECT_ATK_EXTRA);e&&(this.attackOtherEnemyData.rate=e[1]/100,this.attackOtherEnemyData.attackNum=e[2],this.attackOtherEnemyData.angle=e[3])},getAddTowerAttr:function(e){if(0<this.addTowerAttrType)for(var t=0;t<i.battleScene.gameTowerList.length;t++){var a=(n=i.battleScene.gameTowerList[t]).curType,n=n.getLevel();if(a=this.addTowerType<0||a==this.addTowerType,n=n>=this.addTowerLevel,a&&n&&this.addTowerAttrType==e)return this.addTowerAttrPercent}return 0},updateKillBomb:function(){var e,t,a,n,o;this.killBombHurt=0,this.killBombBulletId=0,this.killBombData=null,this.getPassiveSkillData(i.constant.HERO_SKILL_EFFECT_DIE_BOMB)&&(n=this.getSkillDataByPassiveType(i.constant.HERO_SKILL_EFFECT_DIE_BOMB),e=Math.floor(n.effectParameter[0][1]),t=n.bulletID,a=Math.floor(n.atkParameter[0][2]),o=Math.floor(n.atkParameter[0][3])/1e4,n=a+this.physicalAtk*o,o=a+this.magicAtk*o,this.killBombData={targetType:e,hurt:a,bulletId:t,physicalAtk:n,magicAtk:o})},updateTargetDef:function(){this.targetDefRate=0,this.targetDefNum=0;var e,t=this.getPassiveSkillData(i.constant.HERO_SKILL_EFFECT_NO_DEF);t&&(e=t[1]/100,t=t[2]/1e4,this.targetDefRate=e,this.targetDefNum=t)},updateIgnoreArmor:function(){this.updateTargetDef();var e=0,t=0,a=0;if(this.curType===i.constant.TOWER_TYPE_BARRACK)for(var n=0;n<this.towerSoldierList.length;n++)this.towerSoldierList[n].getComponent("GameHero").updateIgnoreArmor();else for(var o=i.battleScene.getInstanceSkillByAttr(i.constant.SKILL_ATTR_IGNORE_ARMOR,this.curType),s=0;s<o.length;s++)e=Math.max(o[s].triggerProbability/100,e),t=Math.max(o[s].natureList[2]/1e4,t),a=o[s].natureMax?Math.max(o[s].natureMax/1e4,a):a;this.ignoreArmorData={ignoreArmorRate:e,ignoreArmorNum:t,ignoreArmorMaxNum:a}},getTowerSkillAttr:function(e){if(!this.towerData)return null;if(!this.towerQualityData)return null;var t=this.towerQualityData.qualitySkill;if(!t)return null;for(var i=0;i<t.length;i++)if(t[i][0]==e)return t[i];return null},getShootPos:function(){var e=this.towerData.gunMuzzle[0];return 0<this.curDir&&(e=this.towerData.gunMuzzle[this.curDir-1]),cc.v2(this.node.x+e[0],this.node.y+e[1])},isCanShootEnemy:function(e){return!(this.getLevel()<1||!e.isCanAtk(this.isCanAtkHoleEnemy)||!i.Utils.isPointInOvalNew(this.node.getPosition(),e.getShootAimPos(this.isAimHead),this.shootDistance)||e.isFly&&!this.isCanShootFly)},findTargetShootEnemy:function(e){var t=null,a=i.battleScene.enemyList,n=!1;if(0<this.passivePoisonAttrData.totalTime)for(var o=0;o<a.length;o++){var s=a[o].getComponent("GameEnemy");if(this.isCanShootEnemy(s)&&!s.isPoisoning()){n=!0;break}}if(this.tarEnemyObj&&!n&&this.isCanShootEnemy(this.tarEnemyObj)&&(t=this.tarEnemyObj,e&&(this.curAtkAccumulateNum++,this.curAtkAccumulateNum>this.maxAtkAccumulateNum&&(this.curAtkAccumulateNum=this.maxAtkAccumulateNum))),!t)if(e&&(this.curAtkAccumulateNum=0),this.curType==i.constant.TOWER_TYPE_ARROW){for(var r=-1,c=0;c<a.length;c++){var l=a[c].getComponent("GameEnemy");l.isFly&&this.isCanShootEnemy(l)&&(n&&!l.isPoisoning()||!n)&&(r<0||l.curHp<r)&&(r=l.curHp,t=l)}if(!t){r=-1;for(var d=0;d<a.length;d++){var h=a[d].getComponent("GameEnemy");!h.isFly&&this.isCanShootEnemy(h)&&(n&&!h.isPoisoning()||!n)&&(r<0||h.curHp<r)&&(r=h.curHp,t=h)}}}else if(this.curType==i.constant.TOWER_TYPE_CANNON)for(var u=0,p=0;p<a.length;p++){var g=a[p].getComponent("GameEnemy"),_=i.Utils.getDistance(this.node.getPosition(),g.getShootAimPos(this.isAimHead));_<this.shootDistance&&this.isCanShootEnemy(g)&&u<_&&(u=_,t=g)}else if(this.curType==i.constant.TOWER_TYPE_MAGIC){for(var m=999999999,E=0;E<a.length;E++){var T=a[E].getComponent("GameEnemy"),f=i.Utils.getDistance(this.node.getPosition(),T.getShootAimPos(this.isAimHead));T.isFly&&f<this.shootDistance&&this.isCanShootEnemy(T)&&f<m&&(m=f,t=T)}if(!t)for(var S=0;S<a.length;S++){var A=a[S].getComponent("GameEnemy"),I=i.Utils.getDistance(this.node.getPosition(),A.getShootAimPos(this.isAimHead));!A.isFly&&I<this.shootDistance&&this.isCanShootEnemy(A)&&I<m&&(m=I,t=A)}}return t},startShoot:function(){var e=null,t=i.battleScene.enemyList,a=this.findTargetShootEnemy(),n=this.getShootPos();if(a&&(this.tarEnemyObj=a,e=this.getShootTarPosByTarObj(n,a,0)),this.atkAccumulate=Math.pow(this.atkAccumulatePercent,this.curAtkAccumulateNum),e){var o=i.Utils.getRandomInt(1,100)<=this.doubleHitRate,s=i.Utils.getRandomInt(1,100)<=this.flySkyRate;if(s||(this.curFlySkyNum++,this.curFlySkyNum>this.maxFlySkyNum&&(s=!0)),s&&(this.curFlySkyNum=0),s){for(var r=this.flySkyBulletId,c=[],l=0;l<t.length;l++){var d=t[l].getComponent("GameEnemy");i.Utils.getDistance(this.node.getPosition(),d.getShootAimPos(!0))<this.shootDistance&&this.isCanShootEnemy(d)&&c.push(d)}for(var h=0,u=0;u<this.flySkyBulletNum;u++){var p=c[h=h>=c.length?0:h],g=i.templateManager.getBulletDataById(r).speed/1e3;g+=0,e=p.getShootTarPos(g,!0),p={source:i.constant.SHOOT_SOURCE_TOWER,bulletId:r,towerType:i.constant.TOWER_TYPE_MAGIC,tarObj:p,curPos:n,tarPos:e,isAimHead:!0,physicalAtk:this.physicalAtk,magicAtk:this.magicAtk,isCrit:i.Utils.getRandomInt(1,100)<=this.critRate,critHurt:this.critHurt,faintedTime:0,ignoreArmorData:null,targetDefNum:i.Utils.getRandomInt(1,100)<=this.targetDefRate?this.targetDefNum:0,killBombData:this.killBombData,delay:0},i.battleScene.createBulletByData(p),h++}}else this.createBullet(n,a,0),i.Utils.getRandomInt(1,100)<=this.attackOtherEnemyData.rate&&this.shootOtherObj(n,a,0),o&&(this.createBullet(n,a,.1),i.Utils.getRandomInt(1,100)<=this.attackOtherEnemyData.rate&&this.shootOtherObj(n,a,0))}},shootOtherObj:function(e,t,a){for(var n=i.Utils.getDegree(e,t.node.position),o=this.attackOtherEnemyData.attackNum,s=i.battleScene.enemyList,r=0,c=0;c<s.length;c++){var l=s[c],d=l.getComponent("GameEnemy");if(d.getEnemyCountId()!==this.tarEnemyObj.getEnemyCountId()&&this.isCanShootEnemy(d)&&(l=i.Utils.getDegree(e,l.position),((l=Math.abs(n-l))<=this.attackOtherEnemyData.angle||Math.abs(l-360)<=this.attackOtherEnemyData.angle)&&(this.createBullet(e,d,a),++r>=o)))return}},getShootTarPosByTarObj:function(e,t,a){var n=t.getShootTarPos(0,this.isAimHead),o=i.templateManager.getBulletDataById(this.bulletId),s=o.high,r=o.speed/1e3*this.bulletMoveSpeedPercent;return 0==s&&(n=t.getShootTarPos(r+a,this.isAimHead),r=i.Utils.getDistance(e,n)/o.speed),t.getShootTarPos(r+=a,this.isAimHead)},createBullet:function(e,t,a){var n=this.getShootTarPosByTarObj(e,t,0),o=this.bulletId,s=i.Utils.getRandomInt(1,100)<=this.targetDefRate?this.targetDefNum:0,r=i.Utils.getRandomInt(1,100)<=this.critRate;r&&this.checkCritAtkSpeed();var c=t.isFly,l=i.Utils.getRandomInt(1,100)<=this.fireArrowRate;l&&this.isAimHead&&!c&&(n.y-=t.getHeadOffsetHeight()),(T=i.Utils.getRandomInt(1,100)<=this.sendEnemyRate)||(this.curSendEnemyNum++,this.curSendEnemyNum>this.maxSendEnemyNum&&(T=!0)),T&&(this.curSendEnemyNum=0),l?o=i.constant.BULLET_TYPE_BOOM:T&&(o=this.sendEnemyBulletId,e=n);var d=0,h=i.constant.STOP_TYPE_SWOON;i.Utils.getRandomInt(1,100)<=this.faintedRate?d=this.faintedTime:this.inTowerHeroId===i.constant.HERO_ID_LIUBEI&&(d=i.templateManager.getGameParamValue("liuTowerSwimTime")/1e3,h=i.constant.STOP_TYPE_STIFF),this.passiveFaintedData&&(E=this.passiveFaintedData.faintedRate,i.Utils.getRandomInt(1,100)<=E&&(d=this.passiveFaintedData.faintedTime,h=this.passiveFaintedData.faintedType));var u=null;0<this.passivePoisonAttrData.totalTime&&(u={hurtNum:this.passivePoisonAttrData.attackRate*this.physicalAtk,hurtTime:this.passivePoisonAttrData.hurtTime,totalTime:this.passivePoisonAttrData.totalTime,isRealHurt:this.passivePoisonAttrData.isRealHurt,physicalAtk:this.passivePoisonAttrData.physicalAtk,magicAtk:this.passivePoisonAttrData.magicAtk});var p=null;0<this.passiveAddHurtData.effectNum&&(p={addHurtPercent:this.passiveAddHurtData.effectNum,addHurtTime:this.passiveAddHurtData.time});var g=null;0<this.passiveAtkAoeData.effectNum&&(g={hurtPercent:this.passiveAtkAoeData.effectNum,radius:this.passiveAtkAoeData.radius,bulletId:this.passiveAtkAoeData.bulletId});var _=null;0!==this.passiveMoveSpeedData.effectNum&&(_={speedPercent:this.passiveMoveSpeedData.effectNum,speedTime:this.passiveMoveSpeedData.time,showEffectType:i.constant.SLOW_TYPE_ICE});var m=1;0<this.isHaveHero()&&(m=this.towerData.remoteDamageRate/1e4);var E=!l&&this.isAimHead,T={source:i.constant.SHOOT_SOURCE_TOWER,bulletId:o,towerType:this.curType,tarObj:t,curPos:e,tarPos:n,isAimHead:E=!(!l||!c)||E,physicalAtk:l?this.physicalAtk*this.fireArrowHurt:this.physicalAtk*m,magicAtk:this.magicAtk*m,isCrit:r,critHurt:this.critHurt,faintedTime:d,faintedType:h,ignoreArmorData:this.ignoreArmorData,poisonData:u,addHurtData:p,atkAoeData:g,moveSpeedData:_,targetDefNum:s,addIronRate:i.Utils.getRandomInt(1,100)<=this.addIronAttrData.rate?this.addIronAttrData.addRate:0,delay:a,bulletMoveSpeedPercent:this.bulletMoveSpeedPercent,secondKillRate:this.secondKillRate,secondKillPercent:this.secondKillPercent,atkAccumulate:this.atkAccumulate,sendData:T?this.sendData:0,killBombData:this.killBombData,breakPhysicalDef:this.breakPhysicalDef,breakMagicDef:this.breakMagicDef};i.battleScene.createBulletByData(T)},logicShoot:function(){if(!this.logicHeroShootSkill()&&this.curTime>this.shootWaitTime){this.skillStandTime=.4;var e=null,t=(i.battleScene.enemyList,this.findTargetShootEnemy(!0));if(this.getShootPos(),t){this.tarEnemyObj=t,e=this.tarEnemyObj.getShootTarPos(0,this.isAimHead),this.updateTowerAction(i.constant.TOWER_ACTION_ATK,e);var a=this.getShootPos(),n=i.templateManager.getBulletDataById(this.bulletId),o=n.high,s=n.speed/1e3*this.bulletMoveSpeedPercent;if(0==o&&(e=t.getShootTarPos(s+8/30,this.isAimHead),s=i.Utils.getDistance(a,e)/n.speed),e=t.getShootTarPos(s+=8/30,this.isAimHead),s=!1,2===i.battleScene.curWaveIndex&&2===this.curindex&&i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_INSTANCE_3_5)?(s=!0,i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_3_5)):5===i.battleScene.curWaveIndex&&2===this.curindex&&i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_INSTANCE_3_c)?(i.battleScene.gameBattleUIObj.skillObjList[0].setCdOver(),i.guideManager.skillTargetEnemyObj=t,i.battleScene.gameBattleUIObj.attrNodeObj.interruptDetail(),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_3_c,i.battleScene.gameBattleUIObj.skillObjList[0].node)):1===i.battleScene.curWaveIndex&&i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_INSTANCE_2_a)?(this.isLimitGuide||this.scheduleOnce(function(){i.battleScene.showAllTower(),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_2_a,i.battleScene.gameTowerList[2].node)},2),this.isLimitGuide=!0):1===i.battleScene.curChapter&&4===i.battleScene.curInstance&&1===i.battleScene.curWaveIndex&&i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_SKILL_CALL_1)&&(s=!0,i.guideManager.skillTargetEnemyObj=null,i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_SKILL_CALL_1_1)),s)return this.curTime=this.shootWaitTime/2,void(this.skillStandTime=0)}this.atkAccumulate=Math.pow(this.atkAccumulatePercent,this.curAtkAccumulateNum),e?(this.curTime=0,this.checkHeroSkillAtkNum()||(s=8,0<this.inTowerHeroId&&(this.updateHeroAction(i.constant.HERO_STATE_SHOOT,!0,i.constant.HERO_STATE_STAND),this.inTowerHeroId==i.constant.HERO_ID_CAOCAO&&(this.updateTowerAction(i.constant.TOWER_ACTION_SKILL,e),s=10)),this.cacheShootList.push({delayFrame:s}))):this.curTime=this.shootWaitTime*this.towerData.upBaseSpeed/1e4}},logicBarrack:function(e){for(var t=0;t<this.towerSoldierList.length;t++){var a,n=this.towerSoldierList[t].getComponent("GameHero");(0<=n.dieTime||!n.isAlive())&&(n.dieTime+=e,n.dieTime>=this.soldierReviveTime)&&(n.dieTime=-1,a=this.getShootPos(),i.soundsUtil.playSoundEffect(this.towerTypeData.shotAudio),n.soldierRevive(a),this.updateTowerAction(i.constant.TOWER_ACTION_ATK),i.battleScene.putTaskCacheItem(i.constant.TASK_TYPE_BARRACK_PEOPLE,1))}},updateBattleSpeedPercent:function(){this.towerSpine&&(this.towerSpine.timeScale=i.battleScene.battleSpeedPercent*i.battleScene.slowSpeedPercent*this.baseTimeScale,this.heroSpine.timeScale=i.battleScene.battleSpeedPercent*i.battleScene.slowSpeedPercent*this.baseTimeScale)},isCanEnter:function(){return!(0<this.stopTowerTime||this.curState<=i.constant.TOWER_STATE_EMPTY||this.goHero||this.enterHero)},isHaveHero:function(){return 0<this.inTowerHeroId},cleanHeroData:function(){if(this.goHero=null,this.enterHero=null,this.node.opacity=255,this.node.scale=1,this.curType==i.constant.TOWER_TYPE_BARRACK)for(var e=0;e<this.towerSoldierList.length;e++)this.towerSoldierList[e].getComponent("GameHero").updateEnterHero(null);else this.updatePhysicalAtk(),this.updateMagicAtk(),this.updateShootDistance()},setTouchMove:function(){},showCanEnter:function(){},gotoTower:function(e){this.goHero=e,this.node.opacity=155,this.node.scale=1},hideHeroHead:function(){this.headNode.active=!1},showHeroHead:function(e,t){var a=i.templateManager.getTowerDataByHeroId(e);if(a&&i.battleScene.showHeroTowerIdList.indexOf(a.id)<0&&i.battleScene.showHeroTowerIdList.push(a.id),this.getLevel()>=i.constant.TOWER_STATE_BUILD_4)this.hideHeroHead();else if(this.heroTipsPosType=t,0<this.heroTipsPosType){this.headNode.active=!0,e=i.templateManager.getSoldierDataById(e).icon.split("/")[1],e=this.commonAtlas.getSpriteFrame(e),this.headSprite.spriteFrame=e;var n=cc.v2(0,0);switch(this.heroTipsPosType){case 1:this.headBgNode.scaleX=1,this.headBgNode.scaleY=1,this.headSprite.node.setPosition(cc.v2(5,6)),this.headNode.setAnchorPoint(.1,.1),n=cc.v2(50,60),this.arrowNowOffset=1;break;case 2:this.headBgNode.scaleX=1,this.headBgNode.scaleY=-1,this.headSprite.node.setPosition(cc.v2(5,6)),this.headNode.setAnchorPoint(.1,.9),n=cc.v2(50,-20),this.arrowNowOffset=-1;break;case 3:this.headBgNode.scaleX=-1,this.headBgNode.scaleY=-1,this.headSprite.node.setPosition(cc.v2(-5,6)),this.headNode.setAnchorPoint(.9,.9),n=cc.v2(-50,-20),this.arrowNowOffset=1;break;case 4:this.headBgNode.scaleX=-1,this.headBgNode.scaleY=1,this.headSprite.node.setPosition(cc.v2(-5,6)),this.headNode.setAnchorPoint(.9,.1),n=cc.v2(-50,60),this.arrowNowOffset=1}n.x+=this.heroTipsPosOffset.x,n.y+=this.heroTipsPosOffset.y,this.headNode.setPosition(n),this.updateArrow()}},enterTower:function(e){if(this.enterHero=e,this.goHero=null,this.node.opacity=255,this.isNeedCheckUpgradeTime=!0,this.updateTowerAction(i.constant.TOWER_ACTION_UPGRADE),this.showTowerCreateEffect(),this.curType==i.constant.TOWER_TYPE_BARRACK)for(var t=0;t<this.towerSoldierList.length;t++)this.towerSoldierList[t].getComponent("GameHero").updateEnterHero(this.enterHero);else this.updatePhysicalAtk(),this.updateMagicAtk(),this.updateShootDistance()},outTower:function(){this.enterHero&&this.enterHero.outTower(),this.cleanHeroData()},checkHeroSkillAtkNum:function(){if(this.inTowerHeroId<=0)return!1;if(this.maxBigSkillAtkNum<=0)return!1;if(i.battleScene.curState==i.constant.GAME_STATE_LOAD||i.battleScene.curState==i.constant.GAME_STATE_OVER)return!1;if(0<this.maxBigSkillAtkNum&&(this.curBigSkillAtkNum++,this.curBigSkillAtkNum>this.maxBigSkillAtkNum)){var e=this.findTargetShootEnemy();if(!e||!e.isCanAtk())return!1;if(this.tarEnemyObj=e,e=this.tarEnemyObj.getShootTarPos(0,!1),this.startBigSkill(i.constant.HERO_SKILL_IN_TOWER,e))return!(this.curBigSkillAtkNum=0)}return!1},logicHeroShootSkill:function(){if(this.inTowerHeroId<=0)return!1;if(this.maxBigSkillTime<=0)return!1;if(i.battleScene.curState==i.constant.GAME_STATE_LOAD||i.battleScene.curState==i.constant.GAME_STATE_OVER)return!1;if(0<this.maxBigSkillTime&&this.curBigSkillTime>=this.maxBigSkillTime){var e=this.findTargetShootEnemy();if(!e||!e.isCanAtk()){if(this.outRangeIsCheck)switch(Math.floor(this.bigSkillId/100)){case i.constant.TOWER_SKILL_LANDMINE:var t=this.getFirstOriginPos(this.curindex);this.startBigSkill(i.constant.HERO_SKILL_IN_TOWER,t),this.curBigSkillTime=0;break;case i.constant.TOWER_SKILL_SNIPER:for(var a=0;a<i.battleScene.enemyList.length;a++){var n=i.battleScene.enemyList[a].getComponent("GameEnemy");if(n.isNearEnd()){n=(this.tarEnemyObj=n).getShootTarPos(0,!1),this.startBigSkill(i.constant.HERO_SKILL_IN_TOWER,n),this.curBigSkillTime=0;break}}}return!1}return this.tarEnemyObj=e,e=this.tarEnemyObj.getShootTarPos(0,!1),this.startBigSkill(i.constant.HERO_SKILL_IN_TOWER,e),!(this.curBigSkillTime=0)}return!1},startSkillAction:function(){this.updateHeroAction(i.constant.HERO_STATE_TOWER_SKILL,!0,i.constant.HERO_STATE_STAND)},startBigSkill:function(e,t){var a=this.bigSkillData,n=(n=a.publicCD/1e3)||1.2;return this.startSkillAction(n,i.constant.HERO_BIG_SKILL),n=i.lang.getGameText(a.skillName),n={pos:cc.v2(this.node.getPosition().x,this.node.getPosition().y+50),desc:n,camp:i.constant.SKILL_CAMP_HERO},i.battleScene.createSkillTipsByData(n),a.skillAudio&&i.soundsUtil.playSoundEffect(a.skillAudio),this.startSkill(a,t),8101!=(a=a.id)&&8103!=a||(a=i.templateManager.getHeroSkillDataById(a+100),this.startSkill(a,t)),this.skillStandTime=1,!0},getSkillEffectData:function(e,t){for(var i=0;i<e.length;i++)if(e[i][0]==t)return e[i];return null},isCanSkillShootEnemy:function(e,t){var a=i.Utils.getDistance(this.getShootPos(),e.getShootAimPos(!0));return!!(a<=t&&a>=this.minShootDistance&&e.isCanAtk())},getPassiveSkillData:function(e){for(var t=0;t<this.passiveSkillList.length;t++){var a=i.templateManager.getHeroSkillDataById(this.passiveSkillList[t]);if(a&&a.effectParameter[0][0]==e)return a.effectParameter[0]}return null},getSkillDataByPassiveType:function(e){for(var t=0;t<this.passiveSkillList.length;t++){var a=i.templateManager.getHeroSkillDataById(this.passiveSkillList[t]);if(a&&a.effectParameter[0][0]==e)return a}return null},startSkill:function(e,t){var a,n=e.atkParameter?e.atkParameter[0]:null,o=e.effectParameter||[],s=e.specialParameter?e.specialParameter[0]:null,r=e.bulletID,c=e.startSelection,l=e.targetSelection,d=e.radius,h=0<e.isRealAtk,u=0<(a=i.templateManager.getBulletDataById(r)).isBoom,p=0<a.isPenetrate,g=a.boomHeight,_=8201==e.id||8203==e.id,m=c!=l,E=(a=this.getSkillEffectData(o,i.constant.HERO_SKILL_EFFECT_SWOON))?a[1]/1e3:0,T=a?a[2]:0,f=a?a[3]/100:100,S=(e=this.getSkillEffectData(o,i.constant.HERO_SKILL_EFFECT_SLEEP))?e[1]/1e3:0,A=(c=this.getSkillEffectData(o,i.constant.HERO_SKILL_EFFECT_EXTRA))?{hpPercent:c[1]/1e4,hurtPercent:c[2]/1e4}:null,I=(a=this.getSkillEffectData(o,i.constant.HERO_SKILL_EFFECT_FUNK))?{funkTime:a[1]/1e3,funkNum:a[2]}:null,y=(e=this.getSkillEffectData(o,i.constant.HERO_SKILL_EFFECT_MOVE_SPEED))?{speedPercent:e[1]/1e4,speedTime:e[2]/1e3}:null,P=((c=this.getSkillEffectData(o,i.constant.HERO_SKILL_EFFECT_FORMATION))&&c[1],c?{continueTime:c[1]/1e3,checkTime:c[2]/1e3}:null),v=(a=this.getSkillEffectData(o,i.constant.HERO_SKILL_EFFECT_DEF_1))?{defPercent:a[1]/1e4,defTime:a[2]/1e3}:null,L=(e=this.getSkillEffectData(o,i.constant.HERO_SKILL_EFFECT_DEF_2))?{defPercent:e[1]/1e4,defTime:e[2]/1e3}:null,N=null;(c=this.getSkillEffectData(o,i.constant.HERO_SKILL_EFFECT_CONTINUE))&&(a=c[1]+this.physicalAtk*c[2]/1e4,k=c[1]+this.magicAtk*c[2]/1e4,e=0<c[5],N={fireDotHurt:c[1]+(this.physicalAtk+this.magicAtk)*c[2]/1e4,fireHurtTime:c[3]/1e3,fireAllTime:c[4]/1e3,isRealHurt:e,physicalAtk:a,magicAtk:k});var b=null;(k=this.getSkillEffectData(o,i.constant.HERO_SKILL_EFFECT_CONTINUE_2))&&(C=k[1]+this.physicalAtk*k[2]/1e4,D=k[1]+this.magicAtk*k[2]/1e4,R=0<k[5],b={hurtNum:k[1]+(this.physicalAtk+this.magicAtk)*k[2]/1e4,hurtTime:k[3]/1e3,totalTime:k[4]/1e3,isRealHurt:R,physicalAtk:C,magicAtk:D});var R,C,D,k,O=null;(k=this.getSkillEffectData(o,i.constant.HERO_SKILL_EFFECT_HIT_HURT))&&(R=k[1]+this.physicalAtk*k[2]/1e4,w=k[1]+this.magicAtk*k[2]/1e4,C=0<k[6],D=k[1],D+=this.physicalAtk*k[2]/1e4,D+=this.magicAtk*k[2]/1e4,O={continueTime:k[5]/1e3,checkTime:k[3]/1e3,hurt:D,dotTime:k[4]/1e3,isRealHurt:C,physicalAtk:R,magicAtk:w});var w=this.getSkillEffectData(o,i.constant.HERO_SKILL_EFFECT_CONTINUE_4),M=null;w&&(U=w[1]+this.physicalAtk*w[2]/1e4,G=w[1]+this.magicAtk*w[2]/1e4,B=0<w[5],M={dotHurt:w[1]+(this.physicalAtk+this.magicAtk)*w[2]/1e4,dotHurtTime:w[3]/1e3,dotAllTime:w[4]/1e3,isRealHurt:B,physicalAtk:U,magicAtk:G});var B,H=(B=this.getSkillEffectData(o,i.constant.HERO_SKILL_EFFECT_LIMIT_SKILL))?{limitTime:B[1]/1e3,limitR:B[2]}:null,G=(U=this.getSkillEffectData(o,i.constant.HERO_SKILL_EFFECT_ATK_1))?{atkPercent:U[1]/1e4,atkTime:U[2]/1e3}:null,U=(B=this.getSkillEffectData(o,i.constant.HERO_SKILL_EFFECT_ATK_SPEED))?{speedPercent:B[1]/1e4,speedTime:B[2]/1e3}:null,x=(B=this.getSkillEffectData(o,i.constant.HERO_SKILL_EFFECT_HURT_ADD))?{addHurtPercent:B[1]/1e4,addHurtTime:B[2]/1e3}:null,F=(B=this.getSkillEffectData(o,i.constant.HERO_SKILL_EFFECT_ENEMY_DIE_HP))?{dieHpPercent:B[1]/1e4}:null,Y=(B=this.getSkillEffectData(o,i.constant.HERO_SKILL_EFFECT_SECOND))?B[1]/100:0,V=B?B[2]/1e4:0,W=(o=this.getSkillEffectData(o,i.constant.HERO_SKILL_EFFECT_CHARM))?{charmRate:o[1]/100,charmNum:o[2],charmSoldierId:o[3]}:null;if(n&&((o=n[0])==i.constant.HERO_SKILL_SHOOT_1||o==i.constant.HERO_SKILL_SHOOT_2)){var K=Math.floor(n[1]),j=Math.floor(n[2]),Q=Math.floor(n[3])/1e4,q=Math.floor(n[4])/1e3,J=Math.floor(n[5]),X=Math.floor(n[6]),z=Math.floor(n[7])/1e3,Z=!1,$=[];if(Z=o==i.constant.HERO_SKILL_SHOOT_2?0<Math.floor(n[6]):Z)for(var ee=i.battleScene.enemyList,te=0;te<ee.length;te++){var ie=ee[te].getComponent("GameEnemy");this.isCanSkillShootEnemy(ie,d)&&$.push(ie)}var ae=j+this.physicalAtk*Q,ne=j+this.magicAtk*Q;j+=this.physicalAtk*Q,j+=this.magicAtk*Q,j=Math.floor(j);for(var oe=[],se=m,re=0;re<K;re++){var ce=z+q*re,le=t||Ye.v2(0,0);l==i.constant.HERO_SKILL_TAR_SELF?le=this.node.getPosition():l==i.constant.HERO_SKILL_TAR_ENEMY&&(le=t),u||_||(le=i.battleScene.getTarEnemyShootPos(this,this.tarEnemyObj,r,ce,se)),0<J&&(le=i.battleScene.getBlowPos(le,J,oe,u,X,_)),oe.push(le)}for(var de=0;de<K;de++){var he=oe[de],ue=z+q*de,pe=m?this.getShootPos():he,ge=m?i.constant.TOWER_TYPE_ARROW:-1;m&&this.tarEnemyObj&&this.tarEnemyObj.isCanAtk()&&(p&&this.inTowerHeroId==i.constant.HERO_ID_HUANGZHONG&&this.tarEnemyObj.showAimEffect(!0),he=i.battleScene.getTarEnemyShootPos(this,this.tarEnemyObj,r,ue,!0)),0<g&&(he.y+=g);var _e=i.Utils.getRandomInt(1,100)<=this.addIronAttrData.rate?this.addIronAttrData.addRate:0;_e={source:i.constant.SHOOT_SOURCE_SKILL,bulletId:r,towerType:ge,curPos:pe,tarPos:he,isAimHead:se,physicalAtk:ae,magicAtk:ne,isCrit:!1,realHurt:h?j:0,faintedTime:E,faintedType:T,faintedRate:f,sleepTime:S,extraHurtData:A,funkData:I,moveSpeedData:y,formationData:P,defData1:v,defData2:L,addIronRate:_e,fireContinueData:N,dotContinueData:M,poisonData:b,limitSkillData:H,addHurtData:x,dieHpData:F,hitHurtData:O,secondKillRate:Y,secondKillPercent:V,charmData:W,delay:ue},i.battleScene.createBulletByData(_e),(ue=i.templateManager.getBulletDataById(r))&&ue.boomSpin&&"hero7_tower_skill_hit"==ue.boomSpin&&i.battleScene.createBulletByData({source:_e.source,bulletId:122,towerType:_e.towerType,curPos:_e.curPos,tarPos:_e.tarPos,isAimHead:!1,realHurt:-1,delay:_e.delay})}}if(s)if((Z=s[0])==i.constant.HERO_SKILL_CALL)for(var me=Math.floor(s[1]),Ee=Math.floor(s[2]),Te=(Q=Math.floor(s[3])/1e3,Math.floor(s[4])/1e4),fe=Math.floor(s[5])/1e4,Se={recruitTime:Q,addPhysicalAtk:this.physicalAtk*fe,addMagicAtk:this.magicAtk*fe,addHp:this.maxHp*Te},Ae=fe=t||this.node.getPosition(),Ie=fe,ye=i.Utils.getRandomInt(1,360),Pe=0;Pe<Ee;Pe++){var ve=i.Utils.getOffsetByRotationAndDistance(ye,30);ve={soldierId:me,curPos:Ie,originPos:Ye.v2(Ae.x+ve,Ae.y+ve.y),source:i.constant.HERO_SOURCE_HERO_RECRUIT},i.battleScene.createSoldierByData(ve).getComponent("GameHero").setRecruitData(Se),360<(ye+=360/Ee)&&(ye-=360)}else if(Z==i.constant.HERO_SKILL_CHANGE_BIG)Te=Math.floor(s[1])/1e4,fe=Math.floor(s[2])/1e3,this.heroBig(Te,fe),G&&this.addAtk1(G.atkPercent,G.atkTime),U&&this.addAtkSpeed(U.speedPercent,U.speedTime);else if(Z==i.constant.HERO_SKILL_LIGHTNING_CHAIN){var Le=i.battleScene.enemyList,Ne=Math.floor(s[3]),be=(U=Math.floor(s[4])/1e4,Ne+this.physicalAtk*U),Re=Ne+this.magicAtk*U;Ne+=this.physicalAtk*U,Ne+=this.magicAtk*U,Ne=Math.floor(Ne);var Ce=null;if(Le&&0<Le.length&&this.tarEnemyObj&&this.tarEnemyObj.isCanAtk()){for(var De=Math.floor(s[1]),ke=Math.floor(s[2]),Oe=[],we=[],Me=this.getShootPos(),Be=0,He=0;He<Le.length;He++){var Ge=Le[He].getComponent("GameEnemy");if(Ge.isCanAtk()&&!(0<=Oe.indexOf(Ge))){var Ue=Ge.getAimPos(!0),xe=Ge;if(i.Utils.getDistance(Me,Ue)<ke||Oe.length<=0&&this.isCanShootEnemy(Ge)){if(Oe.push(Ge),we.push({index:Be,curPos:Me,tarPos:Ue,curObj:Ce,tarObj:xe}),Me=Ue,Ce=xe,++Be>=De)break;He=-1}}}if(0<Oe.length)for(var Fe=0;Fe<Oe.length;++Fe){var Ye=Oe[Fe],Ve=we[Fe].curPos,We=we[Fe].tarPos,Ke=20/30+.1*Fe;i.Logger.debug("\u95ea\u7535\u6389\u8840 i = "+Fe+" enemyCountId = "+Ye.enemyCountId+" curPos = "+Ve+" tarPos = "+We+" bulletId = "+r);var je=i.Utils.getRandomInt(1,100)<=this.addIronAttrData.rate?this.addIronAttrData.addRate:0;Ke={source:i.constant.SHOOT_SOURCE_SKILL,bulletId:r,towerType:this.curType,curPos:Ve,tarPos:We,isAimHead:!0,physicalAtk:be,magicAtk:Re,isCrit:!1,chainData:we[Fe],realHurt:h?Ne:0,faintedTime:E,faintedType:T,faintedRate:f,extraHurtData:A,funkData:I,moveSpeedData:y,formationData:P,defData1:v,defData2:L,addIronRate:je,fireContinueData:N,dotContinueData:M,poisonData:b,limitSkillData:H,addHurtData:x,dieHpData:F,hitHurtData:O,secondKillRate:Y,secondKillPercent:V,charmData:W,delay:Ke},i.battleScene.createBulletByData(Ke)}}}else if(Z==i.constant.HERO_SKILL_RECRUIT_CAR)for(var Qe={recruitTime:20,addPhysicalAtk:1,addMagicAtk:1,addHp:1},qe=this.getFirstOriginPos(this.curindex),Je=this.getShootPos(),Xe=i.Utils.getDegree(qe,this.node.getPosition()),ze=0;ze<2;ze++){var Ze=i.Utils.getOffsetByRotationAndDistance(Xe,40);Ze={soldierId:43005,curPos:Je,originPos:Ye.v2(qe.x+Ze.x,qe.y+Ze.y),source:i.constant.HERO_SOURCE_TOWER,tower:this},(Ze=i.battleScene.createSoldierByData(Ze).getComponent("GameHero")).setRecruitData(Qe),Ze.setHeroRecruitCar(),360<(Xe+=180)&&(Xe-=360)}},updateArrow:function(){if(this.arrowNode)if(this.towerData){var e=i.templateManager.getTowerListByType(this.curType,this.getLevel()+1);if(e){for(var t=e[0],a=i.battleScene.getInstanceSkillByAttr(i.constant.SKILL_ATTR_TOWER_DISCOUNT,this.curType),n=1,o=0;o<a.length;o++)n-=a[o].natureList[2]/1e4;if((e=this.getTowerSkillAttr(i.constant.SKILL_ATTR_TOWER_DISCOUNT))&&(n-=e[2]/1e4),0!=(e=i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_TOWER_STRONG,i.constant.SKILL_ATTR_TOWER_DISCOUNT,this.curType,this.getLevel()))&&(i.Logger.debug("\u7f81\u7eca\u6280\u80fd \u5854\u6298\u6263 + "+e),n+=e),e=Math.floor(t.spend*n),t=this.isMaxLevel(),this.getLevel()===i.constant.TOWER_STATE_BUILD_3){var s=i.battleScene.getCanUpTowerHeros(this.curType);if(0===s.length)t=!0;else{for(var r=-1,c=0;c<s.length;c++){var l=s[c];!(l=i.templateManager.getTowerDataByHeroId(l)).heroBuildPriceAdd||((l=l.heroBuildPriceAdd*i.battleScene.getTowerNumById(l.id))<r||-1===r)&&(r=l)}e+=r=Math.max(0,r)}}i.battleScene.checkIronEnough(e)&&!t?(this.arrowNode.active=!0,this.arrowNode.x=this.node.x+this.arrowNodeX*this.arrowNowOffset,this.checkCanUpdateLevelGuideBubble()):(this.arrowNode.active=!1,this.checkUpgradeBubble())}else this.arrowNode.active=!1}else this.arrowNode.active=!1},checkCanUpdateLevelGuideBubble:function(){var e=i.battleScene.curChapter,t=i.battleScene.curInstance;i.battleScene.isCheckTowerUpgradeGuide&&1===e&&7===t&&3===this.curType&&i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_INSTANCE_7)&&this.getLevel()===i.constant.TOWER_STATE_BUILD_3&&i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_7_1,this.node)},updateTower:function(e){if(!i.player.gmModule.isLimitShootEnemy()&&this.curState!=i.constant.TOWER_STATE_LOCK&&this.curState!=i.constant.TOWER_STATE_EMPTY){if(0<this.activeDestroyTime&&(this.activeDestroyTime-=e,this.timeNode.active=0<this.activeDestroyTime,0<this.activeDestroyTime?this.timeLabel.string=Math.floor(this.activeDestroyTime):this.destroyTower()),0<this.cacheShootList.length){for(var t=0;t<this.cacheShootList.length;t++)this.cacheShootList[t].delayFrame--;this.cacheShootList[0].delayFrame<=0&&(this.startShoot(),this.cacheShootList.splice(0,1))}if(0<this.atkSpeedTime&&(this.atkSpeedTime-=e,this.atkSpeedTime<=0&&(this.atkSpeedTime=0,this.updateShootWaitTime())),0<this.skillAddAtkSpeedTime&&(this.skillAddAtkSpeedTime-=e,this.skillAddAtkSpeedTime<=0&&(this.skillAddAtkSpeedTime=0,this.updateShootWaitTime(),this.baseTimeScale=1,this.updateBattleSpeedPercent())),0<this.skillAddAtkTime1&&(this.skillAddAtkTime1-=e,this.skillAddAtkTime1<=0&&(this.skillAddAtkTime1=0,this.updatePhysicalAtk())),0<this.skillAddAtkTime2&&(this.skillAddAtkTime2-=e,this.skillAddAtkTime2<=0&&(this.skillAddAtkTime2=0,this.updateMagicAtk())),0<this.stopTowerTime)return this.stopTowerTime-=e,void(this.stopTowerTime<=0&&this.showTowerStopEffect(!1));if(0<this.upgradeTowerTime)this.upgradeTowerTime-=e;else if(this.isTowerActive())switch(this.curType){case i.constant.TOWER_TYPE_ARROW:case i.constant.TOWER_TYPE_CANNON:case i.constant.TOWER_TYPE_MAGIC:if(this.curTime+=e,0<this.inTowerHeroId&&0<this.maxBigSkillTime&&(this.curBigSkillTime+=e),0<this.skillStandTime)return this.skillStandTime-=e,void(this.skillStandTime<=0&&(this.skillStandTime=0));this.logicShoot(e);break;case i.constant.TOWER_TYPE_BARRACK:this.logicBarrack(e)}}}}),cc._RF.pop()},{}],GayFriendDetailPage:[function(e,t){"use strict";cc._RF.push(t,"04fa3Pr9QJADIIZqg9y59Un","GayFriendDetailPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{heroItemPrefab:cc.Prefab,gayFriendAtlas:{default:null,type:cc.SpriteAtlas}},onLoadPage:function(){var e=this;this.contentNode=cc.find("content",this.node),this.closeNode=cc.find("content/closeButton",this.node),this.iconSprite=cc.find("content/icon",this.node).getComponent(cc.Sprite),this.nameLabel=cc.find("content/name",this.node).getComponent(cc.Label),this.upgradeSkillLabel=cc.find("content/upgradeTips",this.node).getComponent(cc.Label),this.needHeroLevelLabel=cc.find("content/upgradeTips1",this.node).getComponent(cc.Label),this.maxLevelLabelNode=cc.find("content/full",this.node).getComponent(cc.Label),this.needHeroDescNode=cc.find("luckyChanceheroDetailLayout",this.node),this.needHeroDescLabel=cc.find("bgLayout/label",this.needHeroDescNode).getComponent(cc.Label),this.heroLayoutNode=cc.find("content/heroLayout",this.node),this.skillDescWipesAnim=cc.find("content/luckyChancePage_Wipes",this.node).getComponent(cc.Animation),this.noTouchNode=cc.find("noTouchNode",this.node),this.upgradeButtonNode=cc.find("content/upgradeButton",this.node),this.levelUpBtn=cc.find("content/upgradeButton",this.node).getComponent(cc.Button),this.levelUpLabelNode=cc.find("content/upgradeButton/Background/levelUpLabel",this.node),this.unlockLabelNode=cc.find("content/upgradeButton/Background/unlockLabel",this.node),this.buttonEffect=cc.find("Background/button_ring",this.upgradeButtonNode).getComponent(cc.Animation),this.buttonEffect.node.active=!1,this.levelUpAnim=this.node.getComponent(cc.Animation),this.skillDescWipesAnim.on(cc.Animation.EventType.FINISHED,function(){e.skillDescWipesAnim.node.active=!1,e.noTouchNode.active=!1},this),this.node.on(cc.Node.EventType.TOUCH_END,this.hideHeroTip,this),this.skillComponentMap={};for(var t=1;t<4;t++){for(var i=cc.find("content/skill"+t,this.node),a=cc.find("title/label",i).getComponent(cc.Label),n=cc.find("desc",i).getComponent(cc.Label),o=[],s=1;s<4;s++){var r=cc.find("title/starLayout/star"+s,i).getComponent(cc.Animation);o.push(r)}this.skillComponentMap[t]={skillNode:i,skillNameLabel:a,descLabel:n,isGray:!1,starAnimList:o}}this.needHeroDescNode.active=!1,this.noTouchNode.active=!1,this.skillDescWipesAnim.node.active=!1},showPageBegan:function(){this._gayFriendGroupId=this.data,this.allGayFriendList=i.player.heroModule.getAllGayFriendList(),this.curGayFriendGroupIndex=this.allGayFriendList.indexOf(this._gayFriendGroupId),this.initData()},showPageEnded:function(){i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_RESTRAIN_UNLOCK_1_3)&&i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_RESTRAIN_UNLOCK_1_3,this.upgradeButtonNode)},initData:function(e){this.gayFriendLevel=i.player.heroModule.getGayFriendLevel(this._gayFriendGroupId),this.gayFriendLevel=-1===this.gayFriendLevel?0:this.gayFriendLevel,this._gayFriendCfg=i.templateManager.getHeroRestrainByGroupIdAndLevel(this._gayFriendGroupId,this.gayFriendLevel),this.nextGayFriendCfg=i.templateManager.getHeroRestrainByGroupIdAndLevel(this._gayFriendGroupId,this.gayFriendLevel+1),this.iconSprite.spriteFrame=this.gayFriendAtlas.getSpriteFrame((this._gayFriendCfg||this.nextGayFriendCfg).img),this.nameLabel.string=i.lang.getGameText((this._gayFriendCfg||this.nextGayFriendCfg).name),this.upgradeSkillLabel.node.active=!!this.nextGayFriendCfg,this.needHeroLevelLabel.node.active=!!this.nextGayFriendCfg,this.maxLevelLabelNode.node.active=!this.nextGayFriendCfg;var t=0;this.nextGayFriendCfg&&(o=i.lang.getGameText(this.nextGayFriendCfg.subName),i.lang.updateLabelString(this.upgradeSkillLabel,[o,this.nextGayFriendCfg.openLevel[2]]),t=this.nextGayFriendCfg.openLevel[1],i.lang.updateLabelString(this.needHeroLevelLabel,[t])),this.itemList||(this.itemList=[]);var a=this.itemList.length,n=(this._gayFriendCfg||this.nextGayFriendCfg).heroList,o=n.length;if(a<o)for(var s=o-a,r=0;r<s;r++){var c=cc.instantiate(this.heroItemPrefab);c.parent=this.heroLayoutNode,c=c.getComponent("GayFriendHeroItemRender"),this.itemList.push(c)}for(var l=0;l<this.itemList.length;l++){var d=n[l];d?(this.itemList[l].node.active=!0,this.itemList[l].initData(d,t)):this.itemList[l].node.active=!1}this.updateDetailLabel(e),this.canLevel=this.nextGayFriendCfg&&i.player.heroModule.checkCanGayFriendLevelUp(this._gayFriendGroupId),this.levelUpBtn.interactable=this.canLevel,this.levelUpLabelNode.active=0<this.gayFriendLevel,this.unlockLabelNode.active=0===this.gayFriendLevel,this.levelUpBtn.node.active=!!this.nextGayFriendCfg,this.checkRedPoint()},updateDetailLabel:function(e){this.needPlayAnimComponent=null;for(var t={},a=i.templateManager.getHeroRestrainListByGroupId(this._gayFriendGroupId),n=0;n<a.length;n++){var o=a[n].subType,s=a[n].openLevel[0]<=this.gayFriendLevel;(!t[o]||t[o]&&s)&&(t[o]={data:a[n],isUnlock:s})}var r,c=0;for(r in t)if(t.hasOwnProperty(r)){var l=t[r].data;this.skillComponentMap[r].skillNameLabel.string=i.lang.getGameText(l.subName);var d=i.player.heroModule.getGayFriendSkillDescArgs(l.levelOneSkill);this.skillComponentMap[r].descLabel.string=i.lang.getFormatString(l.skillDesc,d),t[r].isUnlock&&this.skillComponentMap[r].isGray?(e||i.Utils.setGray(this.skillComponentMap[r].skillNode,!1),this.skillComponentMap[r].isGray=!1):t[r].isUnlock||this.skillComponentMap[r].isGray||(i.Utils.setGray(this.skillComponentMap[r].skillNode,!0),this.skillComponentMap[r].isGray=!0);for(var h=this.skillComponentMap[r].starAnimList,u=l.openLevel[2],p=0;p<h.length;p++)h[p].node.active=p<u;t[r].isUnlock&&c<l.openLevel[0]&&(c=l.openLevel[0],this.needPlayAnimComponent=this.skillComponentMap[r])}},playLevelUpAnim:function(){var e,t;this.needPlayAnimComponent&&(this.noTouchNode.active=!0,this.levelUpAnim.play("luckyChancePage_light"),e=this._gayFriendCfg.openLevel[2],t=this.needPlayAnimComponent.starAnimList[e-1],i.Utils.setGray(this.needPlayAnimComponent.skillNode,!1),t.node.active=!1,this.node.runAction(cc.sequence(cc.delayTime(.4),cc.callFunc(function(){this.skillDescWipesAnim.node.active=!0;var e=this.needPlayAnimComponent.descLabel.node.convertToWorldSpaceAR(cc.v2(0,0));e.y-=this.skillDescWipesAnim.node.height/2,e=this.contentNode.convertToNodeSpaceAR(e),this.skillDescWipesAnim.node.y=e.y,this.skillDescWipesAnim.play("luckyChancePage_Wipes")},this),cc.delayTime(.4),cc.callFunc(function(){t.node.active=!0,t.play("luckyChancePage_star")},this))))},showHeroTip:function(e,t){this.needHeroDescNode.active=!0,this.needHeroDescNode.stopAllActions(),this.needHeroDescNode.position=this.needHeroDescNode.parent.convertToNodeSpaceAR(t),this.needHeroDescLabel.string=e,this.needHeroDescNode.runAction(cc.sequence(cc.delayTime(3),cc.callFunc(function(){this.hideHeroTip()},this)))},checkRedPoint:function(){this.levelUpBtn.interactable?this.buttonEffect.node.active||(this.buttonEffect.node.active=!0,this.buttonEffect.stop(),this.buttonEffect.setCurrentTime(0),this.buttonEffect.play("button_ring")):this.buttonEffect.node.active&&(this.buttonEffect.node.active=!1)},hideHeroTip:function(){this.needHeroDescNode.stopAllActions(),this.needHeroDescNode.active=!1},onClickLeft:function(){var e=this.curGayFriendGroupIndex-1;e<0&&(e=this.allGayFriendList.length-1),this.changeCurHero(e,!0),this.hideHeroTip()},onClickRight:function(){var e=this.curGayFriendGroupIndex+1;e>=this.allGayFriendList.length&&(e=0),this.changeCurHero(e,!1),this.hideHeroTip()},changeCurHero:function(e){this.curGayFriendGroupIndex=e,this._gayFriendGroupId=this.allGayFriendList[this.curGayFriendGroupIndex],this.initData()},onClickClose:function(){this.closePage()},onClickLevelUp:function(){var e;this.hideHeroTip(),this.canLevel&&(i.player.heroModule.addGayFriendLevel(this._gayFriendGroupId),this.initData(!0),0<this.gayFriendLevel&&(e={groupId:this._gayFriendGroupId,type:i.constant.ENTER_NEW_RESTRAIN_TYPE_LEVEL_UP},i.gameScene.showPage(i.pageConstant.PAGE_TYPE_HERO_GAY_FRIEND_UNLOCK,e)),i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_HERO).initData())},closePageBegan:function(){this.hideHeroTip()}}),cc._RF.pop()},{}],GayFriendHeroHeadItemRender:[function(e,t){"use strict";cc._RF.push(t,"5e321BbK2xCS6ONVb6UQfBO","GayFriendHeroHeadItemRender");var i=e("Aft");cc.Class({extends:cc.Component,properties:{headAtlas:cc.SpriteAtlas},onLoad:function(){this.icon=cc.find("headMask/icon",this.node).getComponent(cc.Sprite)},initData:function(e){e=i.templateManager.getHeroDataById(e),this.icon.spriteFrame=this.headAtlas.getSpriteFrame(e.heroHead)}}),cc._RF.pop()},{}],GayFriendHeroItemRender:[function(e,t){"use strict";cc._RF.push(t,"16d9bKbrTNCj4pVEGF4RwKS","GayFriendHeroItemRender");var i=e("Aft");cc.Class({extends:cc.Component,properties:{headItemPrefab:cc.Prefab},onLoad:function(){this.headLayoutNode=cc.find("headLayout",this.node),this.levelLabel=cc.find("level",this.node).getComponent(cc.Label),this.node.on(cc.Node.EventType.TOUCH_END,this.onClickHero,this)},initData:function(e,t){this.heroList=e,this.needLevel=t,this.itemList||(this.itemList=[]);var a=this.itemList.length,n=e.length;if(a<n)for(var o=n-a,s=0;s<o;s++){var r=cc.instantiate(this.headItemPrefab);r.parent=this.headLayoutNode,r=r.getComponent("GayFriendHeroHeadItemRender"),this.itemList.push(r)}for(var c=0,l=0;l<this.itemList.length;l++){var d=e[l];d?(c=Math.max(c,i.player.heroModule.getRealHeroLevel(d)),this.itemList[l].node.active=!0,this.itemList[l].initData(d)):this.itemList[l].node.active=!1}this.levelLabel.string=c,this.levelLabel.node.color=t<=c?cc.color("#66FF00"):cc.color("#ff3535"),this.headLayoutNode.getComponent(cc.Layout).updateLayout(),this.node.width=this.headLayoutNode.width},onClickHero:function(){var e="";if(0===this.needLevel)e=i.lang.getGameText(i.GameTextCode.COMING_SOON);else{var t=i.GameTextCode.ONE_HERO_TIPS;2===this.heroList.length&&(t=i.GameTextCode.TWO_HERO_TIPS);for(var a=[],n=0;n<this.heroList.length;n++){var o=i.templateManager.getHeroDataById(this.heroList[n]);a.push(i.lang.getGameText(o.name))}a.push(this.needLevel),e=i.lang.getFormatString(t,a)}t=this.node.convertToWorldSpaceAR(cc.v2(0,this.node.height/2-5)),i.gameScene.getPage(i.pageConstant.PAGE_TYPE_HERO_GAY_FRIEND).showHeroTip(e,t)}}),cc._RF.pop()},{}],GayFriendItemRender:[function(e,t){"use strict";cc._RF.push(t,"93c18kWsvdGHbOW5Hwycdyh","GayFriendItemRender");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{gayFirendAtlas:{default:null,type:cc.SpriteAtlas}},afterLoad:function(){this.nodeAnimation=this.node.getComponent(cc.Animation),this.bgSprite=cc.find("bg",this.node).getComponent(cc.Sprite),this.bgAddNode=cc.find("bg1",this.node),this.iconSprite=cc.find("icon",this.node).getComponent(cc.Sprite),this.timeLabel=cc.find("time",this.node).getComponent(cc.Label),this.originalTimePosition=this.timeLabel.node.position,this.noTimePosition=cc.find("noTime",this.node).position,this.skillNameLabel=cc.find("skillName",this.node).getComponent(cc.Label),this.levelLabel=cc.find("level",this.node).getComponent(cc.Label),this.redPointNode=cc.find("redPoint",this.node),this.lockedLabel=cc.find("locked",this.node).getComponent(cc.Label),this.buttonParentNode=cc.find("buttonParent",this.node),this.buttonNode=cc.find("button",this.buttonParentNode),this.buttonAddLayout=cc.find("background/addLayout",this.buttonNode),this.buttonAddLabel=cc.find("label",this.buttonAddLayout).getComponent(cc.Label),this.buttonUseNode=cc.find("background/useLabel",this.buttonNode),this.vipBtnNode=cc.find("upVip",this.buttonParentNode),this.positonNode=cc.find("positon",this.node),this.positonAddNode=cc.find("add",this.positonNode),this.positonAddChoseNode=cc.find("chose",this.positonNode),this.positonLockNode=cc.find("lock",this.positonNode),this.positonLockLoseNode=cc.find("lose",this.positonLockNode),this.positonLockVipLabel=cc.find("label",this.positonLockNode).getComponent(cc.Label),this.progressBar=cc.find("ProgressBar",this.node).getComponent(cc.ProgressBar),this.progressLabel=cc.find("ProgressBar/progressLabel",this.node).getComponent(cc.Label),this.changeNode=cc.find("change",this.node),this.buttonTypeEnum={no:0,use:1,add:2,refresh:3},this.areadyStop=!0},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.SHOW_AD_OVER_GAY_FRIEND,function(t){e._type==i.constant.HERO_GAY_FRIEND_ITEM_FIGHT_AD&&e.onShowAdOver(t)}),this.registerListener(i.GameEventType.UPDATE_HERO_GAYFRIEND_RED,function(){return e.updateRedPoint()}),this.registerListener(i.GameEventType.UPDATE_HERO_GAYFRIEND_ITEM,function(){e._type==i.constant.HERO_GAY_FRIEND_ITEM_FIGHT_AD&&(e._gayFriendGroupId=null),e.updateData()}),this.registerListener(i.GameEventType.SHOW_AD_OVER_GAY_FRIEND_CHANGE,function(){e._type==i.constant.HERO_GAY_FRIEND_ITEM_FIGHT_AD&&e.onShowAdOverChange()})},initData:function(e,t,i){this.initOver||this.nodeAnimation.play("luckyChance_rull_hide"),this._type=e,this._gayFriendGroupId=t,this.updateData(i),this.initOver=!0},updateData:function(e){var t;if(this.todaySecond=i.timeUtil.getTodayHourTime(0),this.fightAdAddStatus=!1,this.buttonType=this.buttonTypeEnum.no,this.node.active=!0,this._type==i.constant.HERO_GAY_FRIEND_ITEM_FIGHT){if(this._gayFriendGroupId=i.player.heroModule.getFightGayFriend(),!this._gayFriendGroupId||this._gayFriendGroupId<0)return void(this.node.active=!1)}else this._type==i.constant.HERO_GAY_FRIEND_ITEM_FIGHT_AD?(this.node.active=!0,this.fightAdAddStatus=!0,t=i.player.heroModule.getFightAdGayFriend(),this.buttonType=this.buttonTypeEnum.add,this._gayFriendGroupId=0<t?t:null,e&&i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_GAY_AD_PAGE)):this._gayFriendGroupId!=i.player.heroModule.getFightGayFriend()&&this._gayFriendGroupId!=i.player.heroModule.getFightAdGayFriend()?this.buttonType=this.buttonTypeEnum.use:this.node.active=!1;this.gayFriendList=i.templateManager.getHeroRestrainListByGroupId(this._gayFriendGroupId),this.gayFriendList&&(this._gayFriendInfoCfg=this.gayFriendList[0]),this.updateAllNode()},updateAllNode:function(){var e=0<i.player.vipModule.getVipGayFirendNum(),t=0<i.player.heroModule.getFightAdGayFriend(),a=0<i.player.heroModule.getLastAdFightGayFriendTime(),n=i.player.heroModule.getNoBattleGayFriendList();if(this.changeNode.active=e&&t&&a&&0<n.length&&this._type==i.constant.HERO_GAY_FRIEND_ITEM_FIGHT_AD,this.updateTimeLabel(),this.updateRedPoint(),!this._gayFriendGroupId){this.vipBtnNode.active=!e,this.positonLockNode.active=!e||!a,this.positonLockVipLabel.node.active=!e,this.positonLockLoseNode.active=e&&!a,this.positonAddNode.active=e&&a&&!t,this.positonAddChoseNode.active=e&&a&&!t,this.buttonNode.active=e&&i.player.heroModule.checkCanAddFightAdGayFriendTimes(),this.positonNode.active=this.positonLockNode.active||this.positonAddNode.active;var o=i.player.vipModule.getVipUnlockCfg(i.constant.VIP_PRIVILEGE_TYPE_GAY_FRIEND);return i.lang.updateLabelString(this.positonLockVipLabel,[o.vipLevel]),this.buttonNode.active=e&&i.player.heroModule.checkCanAddFightAdGayFriendTimes(),this.buttonAddLayout.active=!0,this.buttonUseNode.active=!1,this.bgAddNode.active=!1,this.iconSprite.node.active=!1,this.skillNameLabel.node.active=!1,this.levelLabel.node.active=!1,this.lockedLabel.node.active=!1,this.progressBar.node.active=!1,void i.lang.updateLabelString(this.buttonAddLabel,[i.templateManager.getGameParamValue("secondHeroAdHours")])}if(this.positonNode.active=!1,this.vipBtnNode.active=!1,t=i.player.heroModule.getGayFriendIsUnlock(this._gayFriendGroupId),this.bgAddNode.active=!1,this.iconSprite.node.active=!0,this.skillNameLabel.node.active=!0,this.levelLabel.node.active=t,this.progressBar.node.active=!0,this.lockedLabel.node.active=!t,i.lang.updateLabelString(this.lockedLabel,[i.player.heroModule.getGayFriendHeroUnlockNum(this._gayFriendGroupId),this._gayFriendInfoCfg.heroList.length]),this.levelLabel.string=i.player.heroModule.getGayFriendLevel(this._gayFriendGroupId),o=t?"2d-sprite":"2d-gray-sprite",this.bgSprite.setMaterial(0,cc.Material.getBuiltinMaterial(o)),this.iconSprite.setMaterial(0,cc.Material.getBuiltinMaterial(o)),this._type==i.constant.HERO_GAY_FRIEND_ITEM_FIGHT_AD?(this.buttonNode.active=e&&i.player.heroModule.checkCanAddFightAdGayFriendTimes(),this.buttonAddLayout.active=!0,this.buttonUseNode.active=!1):(this.buttonAddLayout.active=!1,this.buttonUseNode.active=this.buttonType==this.buttonTypeEnum.use,this.buttonNode.active=t&&this.buttonUseNode.active),e=i.player.heroModule.getRestrainLevelById(this._gayFriendGroupId),this.skillNameLabel.string=i.lang.getGameText(this._gayFriendInfoCfg.name),this.iconSprite.spriteFrame=this.gayFirendAtlas.getSpriteFrame(this._gayFriendInfoCfg.img),this.levelLabel.string=e,t=i.templateManager.getHeroRestrainByGroupIdAndLevel(this._gayFriendGroupId,e+1),e=1,t){for(var s=t.heroList,r=t.openLevel[1],c=(t=s.length*r,0),l=0;l<s.length;l++){for(var d=s[l],h=0,u=0;u<d.length;u++)h=Math.max(h,i.player.heroModule.getRealHeroLevel(d[u]));c+=Math.min(h,r)}e=c/t}this.progressBar.progress=Math.max(0,Math.min(1,e)),this.progressLabel.string=Math.floor(100*e)+"%",i.lang.updateLabelString(this.buttonAddLabel,[i.templateManager.getGameParamValue("secondHeroAdHours")])},updateRedPoint:function(){i.player.heroModule.checkCanGayFriendLevelUp(this._gayFriendGroupId)||this._type==i.constant.HERO_GAY_FRIEND_ITEM_FIGHT_AD&&i.player.heroModule.checkAdGayFriendRed()?(this.redPointNode.active=!0,i.gameScene.redNodeAction(this.redPointNode)):this.redPointNode.active=!1},updateTimeLabel:function(){var e;this._type==i.constant.HERO_GAY_FRIEND_ITEM_FIGHT_AD&&0<=(e=i.player.heroModule.getLastAdFightGayFriendTime())?(0<i.player.heroModule.getFightAdGayFriend()?this.timeLabel.node.position=this.originalTimePosition:this.timeLabel.node.position=this.noTimePosition,this.timeLabel.node.active=!0,e=i.timeUtil.secondArrayFormat(e),e=parseInt(24*e[0])+parseInt(e[1])+":"+e[2]+":"+e[3],i.lang.updateLabelString(this.timeLabel,[e])):this.timeLabel.node.active=!1},onFinished:function(e,t){"luckyChance_rull"==t.name&&this.nodeAnimation.play("luckyChance_rull_hide")},onClick:function(){this.buttonType==this.buttonTypeEnum.use?(i.player.heroModule.setFightGayFriend(this._gayFriendGroupId),this.host.updateAllGayFriendItem(),i.soundsUtil.playSoundEffect("success_skill_exchange")):this.buttonType!=this.buttonTypeEnum.add&&this.buttonType!=this.buttonTypeEnum.refresh||i.player.heroModule.checkCanAddFightAdGayFriendTimes()&&i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,i.GameEventType.SHOW_AD_OVER_GAY_FRIEND)},showEffect:function(){this.nodeAnimation.stop(),this.nodeAnimation.setCurrentTime(0),this.nodeAnimation.play("luckyChance_rull"),this.nodeAnimation.on("finished",this.onFinished,this)},onShowAdOver:function(){i.player.heroModule.addFightAdGayFriendAddTimes(),this.updateData(!0)},onClickChange:function(){var e;0!=i.player.heroModule.getNoBattleGayFriendList().length?i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,i.GameEventType.SHOW_AD_OVER_GAY_FRIEND_CHANGE):(e=i.lang.getGameText(i.GameTextCode.NO_CHANCE),i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,e))},onShowAdOverChange:function(){i.gameScene.showPage(i.pageConstant.PAGE_TYPE_APPOINT_GAY_FRIEND)},dealAdMethod:function(){i.player.heroModule.resetFightAdGayFriend(),this.host.updateAllGayFriendItem(!0)},onClickDetail:function(){var e;this._type==i.constant.HERO_GAY_FRIEND_ITEM_FIGHT_AD&&i.player.heroModule.getFightAdGayFriend()<=0&&0<i.player.heroModule.getLastAdFightGayFriendTime()?0!=i.player.heroModule.getNoBattleGayFriendList().length?i.gameScene.showPage(i.pageConstant.PAGE_TYPE_APPOINT_GAY_FRIEND):(e=i.lang.getGameText(i.GameTextCode.NO_CHANCE),i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,e)):this._gayFriendGroupId&&i.gameScene.showPage(i.pageConstant.PAGE_TYPE_HERO_GAY_FRIEND,this._gayFriendGroupId)},onClickVip:function(){i.gameScene.mainPage.onClickBattle(),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_VIP)},update:function(e){this._type==i.constant.HERO_GAY_FRIEND_ITEM_FIGHT_AD&&(this.updateTime||(this.updateTime=0),this.updateTime+=e,this.updateTime<=1||(this.updateTime=0,this.updateTimeLabel()))}}),cc._RF.pop()},{}],GayFriendUnlockPage:[function(e,t){"use strict";cc._RF.push(t,"071e5kdW2VLvb9YHSlBaoGD","GayFriendUnlockPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{gayFriendAtlas:{default:null,type:cc.SpriteAtlas}},onLoadPage:function(){this.nodeAnimation=this.node.getComponent(cc.Animation),this.buttonNode=cc.find("button",this.node),this.iconSprite=cc.find("icon",this.node).getComponent(cc.Sprite),this.fontSprite=cc.find("luckyChance/font",this.node).getComponent(cc.Sprite),this.descLabel=cc.find("luckyChance/label",this.node).getComponent(cc.Label),this.unlockTitleNode=cc.find("titlez/title",this.node),this.levelUpTitleNode=cc.find("titlez/title1",this.node)},showPageBegan:function(){this._gayFriendGroupId=this.data.groupId,this._type=this.data.type,this.unlockTitleNode.active=this._type===i.constant.ENTER_NEW_RESTRAIN_TYPE_UNLOCK,this.levelUpTitleNode.active=this._type===i.constant.ENTER_NEW_RESTRAIN_TYPE_LEVEL_UP,i.player.heroModule.removeCacheUnlockGayFriend(this._gayFriendGroupId);var e=i.player.heroModule.getGayFriendLevel(this._gayFriendGroupId);this._gayFriendCfg=i.templateManager.getHeroRestrainByGroupIdAndLevel(this._gayFriendGroupId,e),this.iconSprite.spriteFrame=this.gayFriendAtlas.getSpriteFrame(this._gayFriendCfg.img),this.fontSprite.spriteFrame=this.gayFriendAtlas.getSpriteFrame(this._gayFriendCfg.titlePic),this.descLabel.string=i.lang.getArgGameText(this._gayFriendCfg.skillDesc,i.player.heroModule.getGayFriendSkillDescArgs(this._gayFriendCfg.levelOneSkill)),this.playNodeEffect()},playNodeEffect:function(){this.nodeAnimation.stop(),this.nodeAnimation.setCurrentTime(0),this.nodeAnimation.play("unlockLuckyChance"),this.nodeAnimation.on("finished",this.onFinished,this)},onFinished:function(e,t){"unlockLuckyChance"==t.name&&this.nodeAnimation.play("unlockLuckyChance_stand")},onClick:function(){this.closePage()},onClickClose:function(){var e;this.closePage(),i.gameScene.getPage(i.pageConstant.PAGE_TYPE_HERO_GAY_FRIEND).playLevelUpAnim(),i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_RESTRAIN_UNLOCK_1_4)&&(e=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_HERO_GAY_FRIEND),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_RESTRAIN_UNLOCK_1_4,e.closeNode))},showPageEnded:function(){i.soundsUtil.playSoundEffect("rela_unlocked")}}),cc._RF.pop()},{}],GiftCodePage:[function(e,t){"use strict";cc._RF.push(t,"ac714YZSrxApZqp8bWliUHG","GiftCodePage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{},onLoadPage:function(){this.editBox=cc.find("content/editBox",this.node).getComponent("cc.EditBox")},showPageBegan:function(){this.editBox.string="",this.editBox.placeholder=i.lang.getGameText(i.GameTextCode.PLEASE_ENTER_HERE),i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_GIFT_CODE)},showPageEnded:function(){},onClickUseCode:function(){var e=this,t=this.editBox.string;i.Logger.debug("input code:",t),i.player.serviceModule.useGiftCode(t,function(a){if(a&&a.status){var n=a.diamond,o=a.power;i.Logger.debug(", diamondNum: "+n+", powerNum: "+o);var s,r="";0<n&&(i.player.itemModule.dropItem(i.constant.COIN_TYPE_GOLD_BULLION,n,!0,i.constant.ITEM_ADD_SOURCE_GIFT_CODE),s=i.templateManager.getItemDataById(i.constant.COIN_TYPE_GOLD_BULLION),r+=" "+i.lang.getGameText(s.name)+"+"+n),0<o&&(i.player.itemModule.dropItem(i.constant.COIN_TYPE_POWER,o,!0,i.constant.ITEM_ADD_SOURCE_GIFT_CODE),n=i.templateManager.getItemDataById(i.constant.COIN_TYPE_POWER),r+=" "+i.lang.getGameText(n.name)+"+"+o),r=i.lang.getArgGameText(i.GameTextCode.CODE_SUCCESSED,[r]),i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,r),i.BI.onEvent(i.biConstant.EVENT_TYPE_CLICK,i.biConstant.EVENT_ID_CLICK_GET_GIFT_CODE,i.player.playerModule.getPlayerId()+"#"+t+"#"+a.diamond+"#"+a.power),e.onClickClose()}else{i.Logger.debug("invalid gift code:",t);var c=i.lang.getGameText(i.GameTextCode.CODE_ERROR_USED_TYPE);if(a.errorCode)switch(a.errorCode){case"2001":c=i.lang.getGameText(i.GameTextCode.CODE_ERROR_USED_TYPE);break;case"2002":case"2003":c=i.lang.getGameText(i.GameTextCode.CODE_ERROR_EXPIRED);break;case"2004":c=i.lang.getGameText(i.GameTextCode.CODE_ERROR_USED);break;case"2005":c=i.lang.getGameText(i.GameTextCode.CODE_ERROR_USED_TYPE);break;case"2006":c=i.lang.getGameText(i.GameTextCode.CODE_ERROR_USED_BATCH)}i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,c)}})},onClickClose:function(){this.closePage()}}),cc._RF.pop()},{}],Global:[function(e,t){"use strict";cc._RF.push(t,"fc9773N7jVKcJdiOYWi9wqb","Global"),cc._RF.pop()},{}],Grid:[function(e,t){"use strict";cc._RF.push(t,"a1bc8kxhatHY6WPcXwL1g5+","Grid"),cc._RF.pop()},{}],GuideBubble:[function(e,t){"use strict";cc._RF.push(t,"65dfe3ZMrpK2ad744wzIGh+","GuideBubble");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{bubbleText1:cc.Label,bubbleText2:cc.Label,bubbleText3:cc.Label,upNode:cc.Node,downNode:cc.Node,leftNode:cc.Node,leftBgLayoutNode:cc.Node},initBubble:function(e,t){var a=this;this.leftNode.active=!1,this.guideId=e,this.bubbleText1.string=i.lang.getGameText(t),this.bubbleText2.string=i.lang.getGameText(t),this.bubbleLabel=null,e===i.constant.GUIDE_TYPE_INSTANCE_1_e||e===i.constant.GUIDE_TYPE_INSTANCE_1_e_1?(this.upNode.active=!1,this.downNode.active=!0,this.bubbleLabel=this.bubbleText2):(this.upNode.active=!0,this.downNode.active=!1,this.bubbleLabel=this.bubbleText1),this.bubbleGuideOver=!1,this.scheduleOnce(function(){a.bubbleGuideOver=!0,i.gameScene.guideBubbleOver(e)},.75),i.gameScene.registerBubble(e,function(){return a.closeBubble()})},closeBubble:function(){this.bubbleGuideOver||i.gameScene.guideBubbleOver(this.guideId),this.node&&this.node.destroy()},initOtherBubble:function(e,t,a){this.upNode.active=!1,this.downNode.active=!1,this.leftNode.active=!1;var n,o=this.upNode;switch(e){case i.constant.BUBBLE_TYPE_BATTLE_BOX:o=this.downNode,n=i.lang.getGameText(i.GameTextCode.GUIDE_BUBBLE_14),cc.find("bgLayout",o).x=40,o.y=0;break;case i.constant.BUBBLE_TYPE_BATTLE_SPEED:this.leftBgLayoutNode.x=-30,o=this.upNode,n=i.lang.getArgGameText(i.GameTextCode.GUIDE_BUBBLE_15,[1.5]);break;case i.constant.BUBBLE_TYPE_BATTLE_SPEED_TWO:this.leftBgLayoutNode.x=-30,o=this.upNode,n=i.lang.getArgGameText(i.GameTextCode.GUIDE_BUBBLE_15,[2]);break;case i.constant.BUBBLE_TYPE_BATTLE_SPEED_TRY:this.leftBgLayoutNode.x=-30,o=this.upNode,n=i.lang.getGameText(i.GameTextCode.GUIDE_BUBBLE_16);break;case i.constant.BUBBLE_TYPE_BATTLE_ADD_HERO:o=this.leftNode,n=i.lang.getGameText(i.GameTextCode.GUIDE_BUBBLE_17);break;case i.constant.BUBBLE_TYPE_BATTLE_START:o=this.upNode,n=i.lang.getGameText(i.GameTextCode.GUIDE_BUBBLE_05);break;case i.constant.BUBBLE_TYPE_CLICK_INSTANCE:o=this.upNode,n=i.lang.getGameText(i.GameTextCode.GUIDE_BUBBLE_07)}o.active=!0,(e=cc.find("bgLayout/label",o).getComponent(cc.Label)).string=n,this.bubbleLabel=e,t&&(e=cc.delayTime(t),t=cc.callFunc(function(){this.closeOtherBubble(a)},this),t=cc.sequence(e,t),this.node.stopAllActions(),this.node.runAction(t))},closeOtherBubble:function(e){e&&e(),this.node.stopAllActions(),this.node.destroy()},onDestroy:function(){i.gameScene.removeBubble(this.guideId)}}),cc._RF.pop()},{}],GuideDialog:[function(e,t){"use strict";cc._RF.push(t,"a14b6ePAYFFspqPJa1CnURN","GuideDialog");var i=e("Aft");cc.Class({extends:cc.Component,properties:{},initData:function(e){var t,a=this;this.data=e,this.dialogNode=cc.find("dialogNode",this.node),this.type=e.type,this.plotId=-1,this.guideId=-1,this.guideRootNode=cc.find("dialogNode/guide",this.node),this.plotRootNode=cc.find("dialogNode/plot",this.node),this.type==i.constant.DIALOG_TYPE_GUIDE?(this.guideId=e.guideId,this.guideData=i.templateManager.getGuideData(e.guideId),i.Logger.debug("============ this.guideData:",JSON.stringify(this.guideData)),this.guideData||i.Logger.debug("error \u8fd9\u91cc\u6570\u636e\u51fa\u95ee\u9898\u4e86\uff01"),this.plotId=this.guideData.dialogId):this.type==i.constant.DIALOG_TYPE_PLOT&&(this.plotId=e.plotId),i.Logger.debug("start guide dialog this.guideId = "+this.guideId+" this.plotId = "+this.plotId),0<this.plotId?(this.guideRootNode.active=!1,this.plotRootNode.active=!0,this.plotData=i.templateManager.getPlotData(this.plotId),this.describe=i.lang.getGameText(this.plotData.context),this.isRight=0<this.plotData.overturn,this.plotLeftNode=cc.find("dialogNode/plot/plotLeft",this.node),this.plotRightNode=cc.find("dialogNode/plot/plotRight",this.node),this.plotLeftNode.active=!this.isRight,this.plotRightNode.active=this.isRight,this.plotNode=this.isRight?this.plotRightNode:this.plotLeftNode,this.textLabel=cc.find("content/textLabel",this.plotNode).getComponent("cc.Label"),i.lang.setString(this.textLabel,this.describe),this.nameLabel=cc.find("content/name/label",this.plotNode).getComponent("cc.Label"),i.lang.setString(this.nameLabel,i.lang.getGameText(this.plotData.name)),this.spineNode=cc.find("role",this.plotNode),this.spineNode.scale=this.plotData.spineRatio/1e4,t=Math.abs(this.spineNode.scaleX),this.spineNode.scaleX=this.isRight?-t:t,this.spineNode.active=!1,this.plotSpine=this.spineNode.getComponent(sp.Skeleton),t=this.plotData.spine,t=i.constant.SPINE_PATH_COMMON+t,i.battleScene.getSpineData(t,function(e){e&&(a.spineNode.active=!0,a.plotSpine.skeletonData=e,a.plotSpine.premultipliedAlpha=0<a.plotData.isPremultipliedAlpha,a.plotSpine.setAnimation(0,"stand_right",!0))}),this.plotNode.opacity=0,t=cc.fadeIn(.2),this.plotNode.runAction(t)):0<this.guideId&&(this.guideRootNode.active=!0,this.plotRootNode.active=!1,this.describe=i.lang.getGameText(this.guideData.dialogue),this.textLabel=cc.find("dialogNode/guide/textLabel",this.node).getComponent("cc.Label"),this.richText=cc.find("dialogNode/guide/richText",this.node).getComponent(cc.RichText),i.lang.setString(this.textLabel,this.describe),i.lang.setString(this.richText,this.describe),t=0<this.guideData.isRichText,this.richText.node.active=t,this.textLabel.node.active=!t,this.dialogNode.opacity=0,t=cc.fadeIn(.2),this.dialogNode.runAction(t),i.Logger.debug("============ this.guideData:",cc.v2(this.guideData.offset[0],this.guideData.offset[1])),this.dialogNode.setPosition(cc.v2(this.guideData.offset[0],this.guideData.offset[1]))),this.enterTime=0,this.m_autoTime=e.autoTime,this.m_limitTime=e.limitTime,this.isExiting=!1},setDescribe:function(){},onClickDialog:function(){i.Logger.debug("onClickDialog"),this.enterTime<this.m_limitTime?i.Logger.debug("this.enterTime = "+this.enterTime+" return!"):this.isExiting||this.playAniOut()},playAniOut:function(){this.isExiting=!0,this.checkGuideOver()},checkGuideOver:function(){var e;0<this.guideId?(e=i.guideManager,this.curGuideId=e.m_curGuideId,e.checkOtherGuideOver(this.curGuideId),i.eventBus.dispatchEvent(i.GameEventType.CHECK_GUIDE,{guideId:this.curGuideId})):0<this.plotId&&(i.gameScene.hideGuideDialog(),i.battleScene.checkNextPlot())},start:function(){},update:function(e){this.enterTime+=e,0<this.m_autoTime&&this.enterTime>this.m_autoTime&&(this.m_autoTime=-1,this.playAniOut())}}),cc._RF.pop()},{}],GuideHandAndDialog:[function(e,t){"use strict";cc._RF.push(t,"e7199ZvKHdKMZiuZgKK0Lz1","GuideHandAndDialog");var i=e("Aft");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.dialogNode=cc.find("dialogNode",this.node),this.handNode=cc.find("handNode",this.node),this.blockInputNode=cc.find("blockInput",this.node),this.touchNode=cc.find("touchNode",this.node),this.button=cc.find("handNode/button",this.node),this.handEffect=cc.find("handNode/handEffect",this.node).getComponent("cc.Animation"),this.handEffectNode=cc.find("handEffect",this.node),this.maskNode=cc.find("maskNode",this.node);var e=this.touchNode;e.on("touchstart",this.onTouchStart,this),e.on("touchmove",this.onTouchMove,this),e.on("touchend",this.onTouchEnd,this),e.on("touchcancel",this.onTouchCancel,this),this.button.on("touchstart",this.onBtnTouchStart,this),this.button.on("touchmove",this.onBtnTouchMove,this),this.button.on("touchend",this.onBtnTouchEnd,this),this.button.on("touchcancel",this.onBtnTouchCancel,this)},onDisable:function(){this.handNode.angle=0},initData:function(e){0===e?this.handNode.angle=180:1===e?this.handNode.angle=90:2===e?this.handNode.angle=0:3===e&&(this.handNode.angle=270)},setDescribe:function(e,t){this.textLabel=cc.find("dialogNode/guide/textLabel",this.node).getComponent("cc.Label"),i.lang.setString(this.textLabel,e),this.textLabel.node.active=!t,this.richText=cc.find("dialogNode/guide/richText",this.node).getComponent(cc.RichText),i.lang.setString(this.richText,e),this.richText.node.active=t},setHandPosition:function(e){this.handNode.setPosition(e)},hideBlockInput:function(){this.blockInputNode.active=!1,this.touchNode.active=!1,this.button.active=!1},adjustPosition:function(){i.Logger.debug("adjustPosition");var e=i.guideManager;this.curGuideId=e.getCurGuideIndex(),this.pos=this.handNode.getPosition();var t=this.pos;i.Logger.debug("this.pos = "+this.pos.x+" y = "+this.pos.y),i.Logger.debug("start guide hand and dialog this.curGuideId = "+this.curGuideId),this.guideData=i.templateManager.getGuideData(this.curGuideId),this.dialogNode.active=!0,this.dialogNode.setPosition(cc.v2(this.guideData.offset[0],this.guideData.offset[1])),this.dialogNode.opacity=0;var a=cc.delayTime(.5),n=cc.fadeIn(.2);n=cc.sequence(a,n),this.dialogNode.runAction(n),this.blockInputNode.active=!0,n=this.guideData.maskOffset,this.maskNode.active=!!n,this.maskNode.stopAllActions(),n&&(this.maskNode.setPosition(cc.v2(t.x+n[0],t.y+n[1])),this.maskNode.width=n[2],this.maskNode.height=n[3],o=cc.scaleTo(.5,1),this.maskNode.scale=10,this.maskNode.runAction(o)),this.touchNode.active=!1,this.button.active=!0,n=-t.x;var o=-t.y;i.Logger.debug("offsetX = "+n+" offsetY = "+o),e.m_lastHandPos?(n=e.m_lastHandPos.x-t.x,o=e.m_lastHandPos.y-t.y,e.m_lastHandPos=null):(n=-t.x,o=-t.y),e.setHandMoving(!0),this.handNode.setPosition(cc.v2(t.x+n,t.y+o)),n=cc.moveBy(.5,cc.v2(-n,-o)),o=cc.callFunc(function(){i.guideManager.setHandMoving(!1)},this),o=cc.sequence(n,o),this.handNode.stopAllActions(),this.handNode.runAction(o),this.handEffect.stop(),this.handEffect.setCurrentTime(0),this.handEffect.play("Effect_Guide_Hand")},onClickHand:function(){i.Logger.debug("onClickHand"),i.guideManager.isHandMoving()||(this.curGuideId=i.guideManager.getCurGuideIndex(),i.eventBus.dispatchEvent(i.GameEventType.CHECK_GUIDE,{guideId:this.curGuideId}))},start:function(){},onTouchStart:function(e){e.getLocation()},onTouchMove:function(){},onTouchEnd:function(){},onTouchCancel:function(){},onBtnTouchStart:function(){this.checkPressNodo(!0)},onBtnTouchMove:function(){},onBtnTouchEnd:function(){this.checkPressNodo(),this.onClickHand()},onBtnTouchCancel:function(){this.checkPressNodo()},checkPressNodo:function(e){var t,a=i.guideManager.m_curTarget;a&&(t=i.guideManager.getCurGuideIndex(),(t=i.templateManager.getGuideData(t))&&t.buttonIsScale&&(a.stopAllActions(),a.runAction(cc.scaleTo(.1,e?.9:1))))},moveHandTimes:function(e,t,i,a){this.handNode.opacity=0,this.handNode.scale=1,this.handNode.x=e.x,this.handNode.y=e.y,cc.tween(this.node).repeat(i,cc.tween().to(.2,{opacity:255}).to(.8,{x:t.x,y:t.y}).to(.2,{opacity:0}).to(.5,{x:e.x,y:e.y})).call(function(){return a()}).start()}}),cc._RF.pop()},{}],GuideHand:[function(e,t){"use strict";cc._RF.push(t,"a359dxctSZA35E+F0JPZsEv","GuideHand");var i=e("Aft");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.handNode=cc.find("handNode",this.node),this.blockInputNode=cc.find("blockInput",this.node),this.touchNode=cc.find("touchNode",this.node),this.button=cc.find("handNode/button",this.node),this.handEffect=cc.find("handNode/handEffect",this.node).getComponent("cc.Animation"),this.handEffectNode=cc.find("handEffect",this.node),this.maskNode=cc.find("maskNode",this.node);var e=this.touchNode;e.on("touchstart",this.onTouchStart,this),e.on("touchmove",this.onTouchMove,this),e.on("touchend",this.onTouchEnd,this),e.on("touchcancel",this.onTouchCancel,this),this.button.on("touchstart",this.onBtnTouchStart,this),this.button.on("touchmove",this.onBtnTouchMove,this),this.button.on("touchend",this.onBtnTouchEnd,this),this.button.on("touchcancel",this.onBtnTouchCancel,this)},onDisable:function(){this.handNode.angle=0},initData:function(e){0===e?this.handNode.angle=180:1===e?this.handNode.angle=90:2===e?this.handNode.angle=0:3===e&&(this.handNode.angle=270),this.handNode.setPosition(cc.v2(0,0))},hideBlockInput:function(){this.blockInputNode.active=!1,this.touchNode.active=!1,this.button.active=!1},adjustPosition:function(){this.handNode.active=!0,this.handEffect.node.active=!0,this.skillGuideEnd=!1;var e=i.guideManager;this.touching=!1,this.curGuideId=e.getCurGuideIndex(),this.pos=this.handNode.getPosition();var t=this.pos;i.Logger.debug("start guide hand\u3000this.curGuideId = "+this.curGuideId),i.Logger.debug("this.pos = "+this.pos.x+" y = "+this.pos.y),this.guideData=i.templateManager.getGuideData(this.curGuideId);var a=this.guideData.maskOffset;this.maskNode.active=!!a,this.maskNode.stopAllActions(),a&&(this.maskNode.setPosition(cc.v2(a[0],a[1])),this.maskNode.width=a[2],this.maskNode.height=a[3],o=cc.scaleTo(.5,1),this.maskNode.scale=10,this.maskNode.runAction(o));var n=null;if(a=0,i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_INSTANCE_3_9)||i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_INSTANCE_3_d)?(n=i.battleScene.gameBattleUIObj.skillObjList[0],a=0):i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_SKILL_CALL_1_5)||i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_SKILL_CALL_2_2)?(n=i.battleScene.gameBattleUIObj.skillObjList[1],a=1):(i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_SKILL_SEND_1_5)||i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_SKILL_SEND_2_2))&&(n=i.battleScene.gameBattleUIObj.skillObjList[2],a=2),n){n.setCdOver();var o=n.node.convertToWorldSpaceAR(cc.v2(0,0));return this.pos=this.node.convertToNodeSpaceAR(o),i.battleScene.setCurEnemyObj(null),i.battleScene.setCurSoldierObj(null),i.battleScene.gameBattleUIObj.hideDetail(!0),i.battleScene.gameBattleUIObj.curSkillObj=n,i.battleScene.curSkillGroupId=i.battleScene.gameBattleUIObj.curSkillObj.data.groupID,i.battleScene.setOperateState(i.constant.OPERATE_STATE_SKILL),i.battleScene.gameBattleUIObj.onClickChoose(10+a),this.startSkillGuideAction(),this.touchNode.active=!0,void(this.button.active=!1)}n=-t.x,a=-t.y,i.Logger.debug("offsetX = "+n+" offsetY = "+a),e.m_lastHandPos?(n=e.m_lastHandPos.x-t.x,a=e.m_lastHandPos.y-t.y,e.m_lastHandPos=null):(n=-t.x,a=-t.y),e.setHandMoving(!0),this.handNode.setPosition(cc.v2(t.x+n,t.y+a)),n=cc.moveBy(.5,cc.v2(-n,-a)),a=cc.callFunc(function(){i.guideManager.setHandMoving(!1)},this),a=cc.sequence(n,a),this.handNode.stopAllActions(),this.handNode.runAction(a),this.touchNode.active=!1,this.button.active=!0,this.handEffect.node.active=!0,this.handEffect.stop(),this.handEffect.setCurrentTime(0),this.handEffect.play("Effect_Guide_Hand")},startSkillGuideAction:function(){this.handNode.stopAllActions(),this.handEffect.node.active=!1,this.handEffect.stop(),this.handEffect.setCurrentTime(0),this.handNode.setPosition(cc.v2(this.pos.x,this.pos.y));var e=cc.v2(cc.winSize.width/2,cc.winSize.height/2);if(i.guideManager.skillTargetEnemyObj&&i.guideManager.skillTargetEnemyObj.isCanAtk())e=i.guideManager.skillTargetEnemyObj.node.convertToWorldSpaceAR(cc.v2(0,0));else for(var t=0;t<i.battleScene.enemyList.length;t++)if(i.battleScene.enemyList[t].getComponent("GameEnemy").isCanAtk()){e=i.battleScene.enemyList[t].convertToWorldSpaceAR(cc.v2(0,0));break}var a=this.node.convertToNodeSpaceAR(e),n=cc.delayTime(.25),o=cc.moveTo(.5,cc.v2(a.x-20,a.y)),s=cc.callFunc(function(){this.handNode.setPosition(cc.v2(this.pos.x,this.pos.y)),i.battleScene.gameMapObj.hideRedLine(!1)},this);a=cc.delayTime(.25),s=cc.sequence(n,o,a,s),this.skillAction=cc.repeatForever(s),this.handNode.runAction(this.skillAction)},onClickHand:function(){i.Logger.debug("onClickHand"),i.guideManager.isHandMoving()||(this.curGuideId=i.guideManager.getCurGuideIndex(),i.eventBus.dispatchEvent(i.GameEventType.CHECK_GUIDE,{guideId:this.curGuideId}))},start:function(){},onTouchStart:function(e){var t=e.getLocation();e=!1,i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_INSTANCE_3_9)||i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_INSTANCE_3_d)?i.battleScene.gameBattleUIObj.skillObjList[0].node.getBoundingBoxToWorld().contains(t)&&(this.touching=!0,i.battleScene.gameMapObj.hideRedLine(!1),e=!(this.handNode.active=!1)):i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_SKILL_CALL_1_5)||i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_SKILL_CALL_2_2)?i.battleScene.gameBattleUIObj.skillObjList[1].node.getBoundingBoxToWorld().contains(t)&&(this.touching=!0,i.battleScene.gameMapObj.hideRedLine(!1),e=!(this.handNode.active=!1)):(i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_SKILL_SEND_1_5)||i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_SKILL_SEND_2_2))&&i.battleScene.gameBattleUIObj.skillObjList[2].node.getBoundingBoxToWorld().contains(t)&&(this.touching=!0,i.battleScene.gameMapObj.hideRedLine(!1),e=!(this.handNode.active=!1)),e&&this.handNode.setPosition(cc.v2(0,0)),i.Logger.debug("GuideHand onTouchStart touchLoc.x = "+t.x+" y = "+t.y)},onTouchMove:function(e){e=e.getLocation(),(i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_INSTANCE_3_9)||i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_SKILL_CALL_1_5)||i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_SKILL_SEND_1_5)||i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_SKILL_SEND_2_2)||i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_INSTANCE_3_d)||i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_SKILL_CALL_2_2))&&this.touching&&this.updateSkillLine(e)},onTouchEnd:function(e){var t,a,n,o,s,r=e.getLocation();i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_INSTANCE_3_9)&&this.touching?(e=(1136-cc.winSize.height)/2,e=cc.v2(r.x,r.y+e),this.isCanClick=i.battleScene.gameMapObj.isCanClick(e),this.isCanClick?(t=i.battleNode.convertToNodeSpaceAR(r),i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_3_9),i.battleScene.startHeroSkill(i.constant.DRIVING_SKILL_BLOW,t),i.battleScene.gameBattleUIObj.hideDetail(!0),i.battleScene.gameBattleUIObj.cancelChoose(),this.skillGuideEnd=!0,this.scheduleOnce(function(){i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_3_10)},3),i.guideManager.skillTargetEnemyObj=null):(this.handNode.active=!0,this.startSkillGuideAction()),this.touching=!1):i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_SKILL_CALL_1_5)?(i.Logger.debug("\u7b2c\u4e09\u5173\u6280\u80fd\u5f15\u5bfc\u7ed3\u675f1.."),t=(1136-cc.winSize.height)/2,t=cc.v2(r.x,r.y+t),this.isCanClick=i.battleScene.gameMapObj.isCanClick(t),i.battleScene.gameBattleUIObj.skillObjList[1].node.getBoundingBoxToWorld().contains(r)&&(this.isCanClick=!1),this.isCanClick?(i.Logger.debug("\u7b2c\u4e09\u5173\u6280\u80fd\u5f15\u5bfc\u7ed3\u675f2.."),a=i.battleNode.convertToNodeSpaceAR(r),i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_SKILL_CALL_1_5),i.battleScene.startHeroSkill(i.constant.DRIVING_SKILL_RECRUIT,a),i.battleScene.gameBattleUIObj.hideDetail(!0),i.battleScene.gameBattleUIObj.cancelChoose(),this.skillGuideEnd=!0):(this.handNode.active=!0,this.startSkillGuideAction()),this.touching=!1):i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_SKILL_SEND_1_5)?(a=(1136-cc.winSize.height)/2,a=cc.v2(r.x,r.y+a),this.isCanClick=i.battleScene.gameMapObj.isCanClick(a),i.battleScene.gameBattleUIObj.skillObjList[2].node.getBoundingBoxToWorld().contains(r)&&(this.isCanClick=!1),this.isCanClick?(n=i.battleNode.convertToNodeSpaceAR(r),i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_SKILL_SEND_1_5),i.battleScene.startHeroSkill(i.constant.DRIVING_SKILL_SEND,n),i.battleScene.gameBattleUIObj.hideDetail(!0),i.battleScene.gameBattleUIObj.cancelChoose(),this.skillGuideEnd=!0):(this.handNode.active=!0,this.startSkillGuideAction()),this.touching=!1):i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_SKILL_SEND_2_2)?(n=(1136-cc.winSize.height)/2,n=cc.v2(r.x,r.y+n),this.isCanClick=i.battleScene.gameMapObj.isCanClick(n),this.isCanClick?(o=i.battleNode.convertToNodeSpaceAR(r),i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_SKILL_SEND_2_2),i.battleScene.startHeroSkill(i.constant.DRIVING_SKILL_SEND,o),i.battleScene.gameBattleUIObj.hideDetail(!0),i.battleScene.gameBattleUIObj.cancelChoose(),this.skillGuideEnd=!0,this.scheduleOnce(function(){i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_SKILL_SEND_2_2)},3)):(this.handNode.active=!0,this.startSkillGuideAction()),this.touching=!1):i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_INSTANCE_3_d)?(o=(1136-cc.winSize.height)/2,o=cc.v2(r.x,r.y+o),this.isCanClick=i.battleScene.gameMapObj.isCanClick(o),this.isCanClick?(s=i.battleNode.convertToNodeSpaceAR(r),i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_INSTANCE_3_d),i.battleScene.startHeroSkill(i.constant.DRIVING_SKILL_BLOW,s),i.battleScene.gameBattleUIObj.hideDetail(!0),i.battleScene.gameBattleUIObj.cancelChoose(),this.skillGuideEnd=!0,this.scheduleOnce(function(){i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_3_d)},3)):(this.handNode.active=!0,this.startSkillGuideAction()),this.touching=!1):i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_SKILL_CALL_2_2)&&(s=(1136-cc.winSize.height)/2,s=cc.v2(r.x,r.y+s),this.isCanClick=i.battleScene.gameMapObj.isCanClick(s),this.isCanClick?(r=i.battleNode.convertToNodeSpaceAR(r),i.guideManager.checkOtherGuideOver(i.constant.GUIDE_TYPE_SKILL_CALL_2_2),i.battleScene.startHeroSkill(i.constant.DRIVING_SKILL_RECRUIT,r),i.battleScene.gameBattleUIObj.hideDetail(!0),i.battleScene.gameBattleUIObj.cancelChoose(),this.skillGuideEnd=!0,this.scheduleOnce(function(){i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_SKILL_CALL_2_2)},3)):(this.handNode.active=!0,this.startSkillGuideAction()),this.touching=!1)},onTouchCancel:function(e){(i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_INSTANCE_3_9)||i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_SKILL_CALL_1_5)||i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_SKILL_SEND_1_5)||i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_SKILL_SEND_2_2)||i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_INSTANCE_3_d)||i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_SKILL_CALL_2_2))&&this.touching&&this.onTouchEnd(e)},onBtnTouchStart:function(){this.checkPressNodo(!0)},onBtnTouchMove:function(){},onBtnTouchEnd:function(){this.checkPressNodo(),this.onClickHand()},onBtnTouchCancel:function(){this.checkPressNodo()},checkPressNodo:function(e){var t,a=i.guideManager.m_curTarget;a&&(t=i.guideManager.getCurGuideIndex(),(t=i.templateManager.getGuideData(t))&&t.buttonIsScale&&(a.stopAllActions(),a.runAction(cc.scaleTo(.1,e?.9:1))))},moveHandTimes:function(e,t,i,a){this.handNode.opacity=0,this.handNode.scale=1,this.handNode.x=e.x,this.handNode.y=e.y,cc.tween(this.node).repeat(i,cc.tween().to(.2,{opacity:255}).to(.8,{x:t.x,y:t.y}).to(.2,{opacity:0}).to(.5,{x:e.x,y:e.y})).call(function(){return a()}).start()},updateSkillLine:function(e){var t,a,n=null;i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_INSTANCE_3_9)||i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_INSTANCE_3_d)?n=i.battleScene.gameBattleUIObj.skillObjList[0]:i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_SKILL_CALL_1_5)||i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_SKILL_CALL_2_2)?n=i.battleScene.gameBattleUIObj.skillObjList[1]:(i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_SKILL_SEND_1_5)||i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_SKILL_SEND_2_2))&&(n=i.battleScene.gameBattleUIObj.skillObjList[2]),n&&(t=i.battleNode.convertToNodeSpaceAR(e),a=n.node.convertToWorldSpaceAR(cc.v2(0,0)),n=i.battleNode.convertToNodeSpaceAR(a),a=(1136-cc.winSize.height)/2,a=cc.v2(e.x,e.y+a),this.isCanClick=i.battleScene.gameMapObj.isCanClick(a),this.isCanClick=!this.touching||this.isCanClick,i.battleScene.gameMapObj.showRedLine(n,t,this.isCanClick))},update:function(){var e;!(i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_INSTANCE_3_9)||i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_SKILL_CALL_1_5)||i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_SKILL_SEND_1_5)||i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_SKILL_SEND_2_2)||i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_INSTANCE_3_d)||i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_SKILL_CALL_2_2))||this.touching||this.skillGuideEnd||(e=this.handNode.convertToWorldSpaceAR(cc.v2(0,0)),this.updateSkillLine(e))}}),cc._RF.pop()},{}],GuideManager:[function(e,t){"use strict";cc._RF.push(t,"f12beUANIlAOJvne/LVOCv1","GuideManager");var i=e("Aft"),a=cc.Class({extends:cc.Component,properties:{},statics:{_instance:null,getInstance:function(){return this._instance||(this._instance=new a),this._instance}},ctor:function(){this.scene=null,this.m_curGuideId=-1,this.oldGuideId=-1,this.m_curTarget=null,this.guidePopUp=null,this.m_guideDialog=null,this.m_guideHand=null,this.m_guideModel=null,this.m_isNeedShowTips=!1,this.fromMainScene=!1,this.m_isCanShowSkip=!0,this.m_arrowTag=998,this.m_layerBgTag=999,this.m_lastHandPos=null,this.m_isLimitShow=!1,this.m_isHandMoving=!1,this.m_gameOverId=-1,this.m_guideGameWaitTime=-1,this.m_maxGameWaitTime=5,this.m_isGuideUnlockMagicTower=!1,this.m_guideSkillEnemyObj=null,this.heroPosOffset1=cc.v2(-50,80),this.heroPosOffset5_1=cc.v2(100,100),this.heroPosOffset10_1=cc.v2(-100,-100),this.heroPosOffset2=cc.v2(40,120),this.skillTargetEnemyObj=null},onLoad:function(){},checkGuideRun:function(e,t){if(!(e<0)){var a=i.templateManager.getGuideData(e);return!!a&&(a=a.dialogueType,this.filterGuide(e,0,t,a))}},filterGuide:function(e,t,a,n){if(e<0)return!1;var o=this.scene,s=this.getOtherGuideType(e),r=this.getOtherGuideStep(),c=i.player.guideModule.getOtherGuideType(),l=i.templateManager.getGuideData(e);if((t=l&&0<=l.guideOrder?l.guideOrder:t)<0&&(t=99999,i.Logger.debug("error neeGuideId = 99999")),0<=s&&r==t&&(0<=c&&c==s||c<0&&0==t)&&!this.isGuiding()){if(this.oldGuideId==e)return i.Logger.debug("this.oldGuideId = "+this.oldGuideId),!1;if(this.startGuide(e,a,n,o))return this.oldGuideId=e,i.Logger.debug("this.oldGuideId 1 = "+this.oldGuideId),!0}return!1},startGuide:function(e,t,a,n){if(i.Logger.debug("start run guide Id = "+e),this.m_curGuideId==e)return i.Logger.debug("this.m_curGuideId = "+this.m_curGuideId+" guideId = "+e+" return"),!1;if(!n)return i.Logger.debug("error curScene is null"),!1;var o,s=i.templateManager.getGuideData(e);if(!s)return i.Logger.debug("error guideData = null"),!1;if(o=i.lang.getGameText(s.dialogue),a=s.dialogueType,!t&&a==i.constant.GUIDE_TYPE_HAND)return i.Logger.debug("error tarSprite = null"),!1;this.m_curType=a,this.m_curTarget=t,this.m_curGuideId=e,i.Logger.debug("guide str = "+o+" type = "+a),i.player.guideModule.pointShowGuide(s.logPointShow,e),i.gameScene.pageIsOpened(i.pageConstant.PAGE_TYPE_SPEED_AD_TRY)&&i.gameScene.closePage(i.pageConstant.PAGE_TYPE_SPEED_AD_TRY);var r,c,l=!1;return a==i.constant.GUIDE_TYPE_DIALOG?(l=!0,this.m_guideDialog=this.scene.guideDialog,this.m_guideDialogObj=this.scene.guideDialogObj,this.guidePopUp=this.m_guideDialog,r=s.skipTime,n=s.respondTime/1e3,n={type:i.constant.DIALOG_TYPE_GUIDE,autoTime:r,limitTime:n,guideId:e,describe:o},this.scene.showGuideDialog(n)):a==i.constant.GUIDE_TYPE_HAND_DIALOG?(l=!0,this.m_guideHandAndDialog=this.scene.guideHandAndDialog,this.m_guideHandAndDialogObj=this.scene.guideHandAndDialogObj,this.m_guideHandAndDialogObj.initData(s.direction),this.guidePopUp=this.m_guideHandAndDialog,c=this.updateGuideArrowPosition(t),i.Logger.debug("pos.x final = "+c.x+" y = "+c.y),this.m_guideHandAndDialog.setPosition(cc.v2(0,0)),this.m_guideHandAndDialogObj.setHandPosition(c),this.m_guideHandAndDialogObj.setDescribe(o,0<s.isRichText),this.scene.showGuideHandAndDialog(null),this.m_guideHandAndDialogObj.adjustPosition(),this.m_lastHandPos=c):a==i.constant.GUIDE_TYPE_HAND?(l=!0,this.m_guideHand=this.scene.guideHand,this.m_guideHandObj=this.scene.guideHandObj,this.m_guideHandObj.initData(s.direction),this.guidePopUp=this.m_guideHand,c=this.updateGuideArrowPosition(t),i.Logger.debug("pos.x final = "+c.x+" y = "+c.y),this.m_guideHand.setPosition(c),this.scene.showGuideHand(),this.m_guideHandObj.adjustPosition(),this.m_lastHandPos=c):a==i.constant.GUIDE_TYPE_POP_UP?(l=!0,i.Logger.debug("\u5f39\u7a97\u7c7b\u578b\u5f15\u5bfc"),this.scene.showGuidePopUp(s)):a==i.constant.GUIDE_TYPE_BUBBLE&&(i.Logger.debug("\u6c14\u6ce1\u7c7b\u578b\u5f15\u5bfc"),this.scene.showGuideBubble(e,t,s.dialogue)),i.battleScene&&!i.battleScene.gamePause&&l&&(i.Logger.debug("guide pause"),i.battleScene.pauseAll()),this.scene.hideGuideLimit(),!0},updateGuideArrowPosition:function(e){e&&i.Logger.debug("tarSprite x = "+e.getPosition().x+" y = "+e.getPosition().y);var t=e.convertToWorldSpaceAR(cc.v2(0,0));return this.m_curGuideId===i.constant.GUIDE_TYPE_INSTANCE_3_4_2?(t.x+=i.guideManager.heroPosOffset1.x,t.y+=i.guideManager.heroPosOffset1.y):this.m_curGuideId===i.constant.GUIDE_TYPE_SECOND_HERO_2&&(t.y-=e.height/2),t.x-=cc.winSize.width/2,t.y-=cc.winSize.height/2,i.Logger.debug("updateGuideArrowPosition x = "+t.x+" y = "+t.y),t},setHandMoving:function(e){this.m_isHandMoving=e},isHandMoving:function(){return this.m_isHandMoving},getOtherGuideType:function(e){return e<0?-1:parseInt(e/1e3)},isGuideRunning:function(e){return this.m_curGuideId==e},isGuiding:function(){return-1!=this.m_curGuideId},isLimitGuideClick:function(){if(0<this.m_curGuideId){var e=i.templateManager.getGuideData(this.m_curGuideId);if(e&&e.dialogueType!=i.constant.GUIDE_TYPE_BUBBLE)return!0}return!1},getCurGuideIndex:function(){return this.m_curGuideId},getOtherGuideStep:function(){return i.player.guideModule.getOtherTypeStep()},checkOtherGuideOver:function(e,t){var a=i.guideManager;if(a.isGuideRunning(e)||t){var n=a.getOtherGuideType(e),o=i.player.guideModule,s=o.getOtherTypeStep(),r=o.getOtherGuideType(),c=i.templateManager.getGuideData(e);if(!t&&c&&0<c.isMaskOperation&&(o=c.isMaskOperation,this.scene.showGuideLimit(o)),c&&(t&&i.player.guideModule.pointShowGuide(c.logPointShow,e),i.player.guideModule.pointGuide(c.logPoint,e),c.guideType),i.Logger.debug("checkOtherGuideOver type = "+n+" guideId = "+e+" step = "+s+" guideType = "+r),0<=n&&(0==s||r==n))return 1==c.isRecordStep&&a.setOtherGuideRecord(n),1==c.isLastStep?(a.stopGuide(!0),a.setOtherGuideFinished(n)):(a.addOtherGuideStep(n),a.stopGuide(!0)),i.battleScene&&i.battleScene.gamePause&&i.gameScene.checkGameResume(),!0}else i.Logger.debug("guideId = "+e+" not GuideRunning");return!1},isOtherGuideFinished:function(e){var t=i.player.guideModule;return t?!t.isCanGuideOtherType(e):(i.Logger.debug("error guideModel = null"),!1)},setOtherGuideRecord:function(e){this.isOtherGuideFinished(e)||(e<0||e>i.constant.OTHER_TYPE_MAX?i.Logger.debug("error setOtherGuideRecord return otherType = "+e):(i.player.guideModule.setGuideFinish(e),i.Logger.debug("setOtherGuideRecord otherType = "+e)))},setOtherGuideFinished:function(e){this.scene.hideGuideLimit(),this.oldGuideId=-1,i.Logger.debug("GuideManager setOtherGuideFinished otherType = "+e),(e=i.player.guideModule).setOtherTypeStep(0),e.setOtherGuideType(-1)},cleanGuideData:function(){this.oldGuideId=-1;var e=i.player.guideModule;e.setOtherTypeStep(0),e.setOtherGuideType(-1)},addOtherGuideStep:function(e){var t=i.player.guideModule,a=t.getOtherTypeStep();t.setOtherTypeStep(++a),t.setOtherGuideType(e),i.Logger.debug("AddOtherGuideStep type = "+e+" step = "+a)},stopGuide:function(){i.Logger.debug("stopGuide = "+this.m_curGuideId),this.guidePopUp==this.m_guideDialog?this.scene.hideGuideDialog():(this.guidePopUp=this.m_guideHand)?this.scene.hideGuideHand():(this.guidePopUp=this.m_guideHandAndDialog)&&this.scene.hideGuideHandAndDialog(),this.m_curGuideId=-1,this.m_curTarget=null,this.guidePopUp=null,this.m_guideDialog=null,this.m_guideHand=null,this.m_guideHandAndDialog=null},isNeedGuideOtherType:function(e){if(this.isOtherGuideFinished(e))return!1;var t=this.getOtherGuideStep(),a=i.player.guideModule.getOtherGuideType(),n=i.player.instanceModule;if(0!=t&&a!=e)return!1;switch(e){case i.constant.GUIDE_TYPE_INSTANCE_1:return!0;case i.constant.GUIDE_TYPE_UPGRADE_TOWER_1:return this.isOtherGuideFinished(i.constant.GUIDE_TYPE_INSTANCE_1)&&!i.gameScene.pageIsOpened(i.pageConstant.PAGE_TYPE_MAIN_NEW_FUNCTION)&&i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_TOWER);case i.constant.GUIDE_TYPE_INSTANCE_2:return!(!this.isOtherGuideFinished(i.constant.GUIDE_TYPE_INSTANCE_1)||!this.isOtherGuideFinished(i.constant.GUIDE_TYPE_UPGRADE_TOWER_1));case i.constant.GUIDE_TYPE_UPGRADE_TOWER_2:return this.isOtherGuideFinished(i.constant.GUIDE_TYPE_INSTANCE_2)&&!i.gameScene.pageIsOpened(i.pageConstant.PAGE_TYPE_MAIN_NEW_FUNCTION)&&i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_TOWER)&&n.isPassInstance(1,2);case i.constant.GUIDE_TYPE_INSTANCE_3:case i.constant.GUIDE_TYPE_INSTANCE_4:case i.constant.GUIDE_TYPE_INSTANCE_5:case i.constant.GUIDE_TYPE_INSTANCE_6:case i.constant.GUIDE_TYPE_INSTANCE_7:case i.constant.GUIDE_TYPE_INSTANCE_10:return!0;case i.constant.GUIDE_TYPE_UNLOCK_TASK:return!i.gameScene.pageIsOpened(i.pageConstant.PAGE_TYPE_MAIN_NEW_FUNCTION)&&i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_TASK);case i.constant.GUIDE_TYPE_GET_HERO_1:if(i.gameScene.pageIsOpened(i.pageConstant.PAGE_TYPE_MAIN_NEW_FUNCTION))return!1;if(!i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_HERO))return!1;if(i.player.heroModule.isHeroUnlock(i.constant.HERO_ID_GUANYU))return!1;var o=i.templateManager.getHeroCardDataByHeroId(i.constant.HERO_ID_GUANYU).id,s=i.templateManager.getHeroCardDataById(o).cardNum;return!!i.player.itemModule.checkHeroPieceEnough(o,s);case i.constant.GUIDE_TYPE_GET_HERO_2:return this.isOtherGuideFinished(i.constant.GUIDE_TYPE_GET_HERO_1)&&!i.gameScene.pageIsOpened(i.pageConstant.PAGE_TYPE_MAIN_NEW_FUNCTION)&&i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_HERO);case i.constant.GUIDE_TYPE_UNLOCK_MAP:return!i.gameScene.pageIsOpened(i.pageConstant.PAGE_TYPE_MAIN_NEW_FUNCTION)&&i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_WORLD);case i.constant.GUIDE_TYPE_OPEN_BOX:return 0<i.player.instanceModule.checkCanRewardNum();case i.constant.GUIDE_TYPE_SKILL_CALL_1:return!(i.player.functionModule.getUnlockSkills().length<=1||i.battleScene.gameBattleUIObj.skillObjList.length<=1||i.battleScene.gameBattleUIObj.skillObjList[1].data.groupID!=i.constant.DRIVING_SKILL_RECRUIT);case i.constant.GUIDE_TYPE_SKILL_CALL_2:return!(!this.isOtherGuideFinished(i.constant.GUIDE_TYPE_SKILL_CALL_1)||i.player.functionModule.getUnlockSkills().length<=1||1<i.player.functionModule.getUnlockSkills().length&&0<i.battleScene.gameBattleUIObj.skillObjList[1].cdTime||i.battleScene.gameBattleUIObj.skillObjList.length<=1||i.battleScene.gameBattleUIObj.skillObjList[1].data.groupID!=i.constant.DRIVING_SKILL_RECRUIT);case i.constant.GUIDE_TYPE_SKILL_SEND_1:return!(i.player.functionModule.getUnlockSkills().length<=2||i.battleScene.gameBattleUIObj.skillObjList.length<=2||i.battleScene.gameBattleUIObj.skillObjList[2].data.groupID!=i.constant.DRIVING_SKILL_SEND);case i.constant.GUIDE_TYPE_SKILL_SEND_2:return!(!this.isOtherGuideFinished(i.constant.GUIDE_TYPE_SKILL_SEND_1)||i.player.functionModule.getUnlockSkills().length<=2||2<i.player.functionModule.getUnlockSkills().length&&0<i.battleScene.gameBattleUIObj.skillObjList[2].cdTime||i.battleScene.gameBattleUIObj.skillObjList.length<=2||i.battleScene.gameBattleUIObj.skillObjList[2].data.groupID!=i.constant.DRIVING_SKILL_SEND);case i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_2:return!!i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_TOWER)&&!!i.player.towerModule.isCanGuideHeroEnterTower(i.constant.TOWER_TYPE_ARROW);case i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_3:return!!i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_TOWER)&&!!i.player.towerModule.isCanGuideHeroEnterTower(i.constant.TOWER_TYPE_BARRACK);case i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_4:return!!i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_TOWER)&&!!i.player.towerModule.isCanGuideHeroEnterTower(i.constant.TOWER_TYPE_MAGIC);case i.constant.GUIDE_TYPE_SKILL_UPGRADE:return!!i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_SKILL);case i.constant.GUIDE_TYPE_SKILL_UNLOCK:return!!i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_SKILL)&&i.player.skillModule.getRedTipsType()===i.constant.SKILL_RED_TIP_TYPE_NEW;case i.constant.GUIDE_TYPE_VIP_OPEN:return!!i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_VIP);case i.constant.GUIDE_TYPE_RESTRAIN_OPEN:return!!i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_RESTRAIN);case i.constant.GUIDE_TYPE_RESTRAIN_UNLOCK:return!(!(s=i.player.heroModule.haveCanLevelUpGayFriend())||8!=s||0<i.player.heroModule.getAllUnlockGayFriendList().length);case i.constant.GUIDE_TYPE_SECOND_HERO:return!(i.player.vipModule.getCurVipLevel()<2)}return!1},isHaveGuide:function(){return!1},isLimitClick:function(){var e=i.player.guideModule.getOtherTypeStep();return!!(this.isHaveGuide()||0<e||this.isGuiding())},isLimitUpgradeShow:function(){},isGuidingType:function(e){var t=(a=i.player.guideModule).getOtherGuideType(),a=a.getOtherTypeStep();return i.guideManager.isNeedGuideOtherType(e)||e==t&&0<a},isCanGuide:function(e){var t=this.getOtherGuideType(e),a=this.getOtherGuideStep(),n=i.player.guideModule.getOtherGuideType(),o=i.templateManager.getGuideData(e);return e-=1,(e=o&&0<=o.guideOrder?o.guideOrder:e)<0&&(e=99999,i.Logger.debug("error neeGuideId = 99999")),!(!(0<=t&&a==e&&(0<=n&&n==t||n<0&&0==e))||this.isGuiding())},start:function(){}});i.guideManager=a.getInstance(),cc._RF.pop()},{}],GuideModule:[function(e,t){"use strict";cc._RF.push(t,"b7c5cBhcH1Mf4iEvA1GWCAL","GuideModule");var i=e("Aft");cc.Class({extends:i.BaseHandler,properties:{},init:function(e){this.player=e,this.otherStepId=0,this.otherGuideType=-1;var t=i.StorageUtil.getData(i.constant.SAVE_GUIDE_DATA);t||(this.player.saveGameData(i.constant.SAVE_GUIDE_DATA,e={plotLevel:0,guideStep:10036e3,guideListNew_1:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],trySpeedNum:0}),t=JSON.stringify(e)),i.Logger.debug("initGuideData : "+t),this.player._gameData.guideData=JSON.parse(t),i.Logger.debug("this.player._gameData.guideData.guideListNew_1 = "+this.player._gameData.guideData.guideListNew_1)},loadData:function(){this.player._gameData.guideData.hasOwnProperty("guideListNew_1")||(this.player._gameData.guideData.guideListNew_1=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],this.player._gameData.guideData.trySpeedNum=1,i.Logger.debug("loadData guideListNew_1"))},restoreData:function(e){e&&e.guideData&&(i.StorageUtil.save(i.constant.SAVE_GUIDE_DATA,e.guideData,!0),i.Logger.debug("restoreData data  guideData :",JSON.stringify(e.guideData)))},getTrySpeedNum:function(){return this.player._gameData.guideData.trySpeedNum},addTrySpeedNum:function(){this.player._gameData.guideData.trySpeedNum=1,this.saveGuideData()},getGuideStep:function(){return this.player._gameData.guideData.guideStep},setGuideStep:function(e){var t=this.player._gameData.guideData.guideStep;if(t<e)for(var a=e-t,n=1;n<=a;n++)i.Logger.debug("record guide step recordStep = "+(n+t));this.player._gameData.guideData.guideStep=e},getBuffGuideNum:function(){return this.player._gameData.guideData.buffGuideNum},updateBuffGuideNum:function(e){this.player._gameData.guideData.buffGuideNum+=e,this.saveGuideData()},getPlotGroup:function(e,t,a){return this.player._gameData.guideData.plotLevel>=100*e+t?[]:i.templateManager.getPlotGroup(e,t,a)},setPlotFinish:function(e,t){var a=100*e+t;!this.player._gameData.guideData.plotLevel||this.player._gameData.guideData.plotLevel<a?(i.Logger.debug("setPlotFinish chapterId = "+e+" instanceId = "+t+" plotId = "+a),this.player._gameData.guideData.plotLevel=a,this.saveGuideData()):i.Logger.debug("setPlotFinish plotId = "+a+" this.player._gameData.guideData.plotLevel = "+this.player._gameData.guideData.plotLevel)},saveGuideData:function(){i.Logger.debug("saveGuideData : "+this.player._gameData.guideData.guideListNew_1),this.player.saveGameData(i.constant.SAVE_GUIDE_DATA,this.player._gameData.guideData)},isGuideFinish:function(e){var t=this.player._gameData.guideData.guideListNew_1;return!(e<0||e>=t.length)&&0<t[e]},setGuideFinish:function(e){if(e>=this.player._gameData.guideData.guideListNew_1.length){for(var t=e+1-this.player._gameData.guideData.guideListNew_1.length,a=0;a<t;a++)this.player._gameData.guideData.guideListNew_1.push(0);i.Logger.debug("error setGuideFinish add record num = "+t)}this.player._gameData.guideData.guideListNew_1[e]=1,this.saveGuideData()},setOtherTypeStep:function(e){this.otherStepId=e},getOtherTypeStep:function(){return this.otherStepId},setOtherGuideType:function(e){this.otherGuideType=e},getOtherGuideType:function(){return this.otherGuideType},isCanGuideOtherType:function(e){if(!this.player._gameData||!this.player._gameData.guideData)return!1;var t=this.player._gameData.guideData.guideListNew_1;return!(!t||e<0||e>=t.length)&&t[e]<=0},pointGuide:function(e,t){i.BI.onEvent(i.biConstant.EVENT_TYPE_GUIDE,e,t)},pointShowGuide:function(e,t){i.BI.onEvent(i.biConstant.EVENT_TYPE_SHOW_GUIDE,e,t)},skipGuide:function(){this.player._gameData.guideData.guideListNew_1=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],this.saveGuideData(),i.guideManager.setOtherGuideFinished(0),i.eventBus.dispatchEvent(i.GameEventType.SKIP_NEW_GUIDE),i.Logger.debug("skipGuide")}}),cc._RF.pop()},{}],GuidePopUp_1:[function(e,t){"use strict";cc._RF.push(t,"62fe4XnFdtENJafi7m7viuS","GuidePopUp_1");var i=e("Aft");cc.Class({extends:cc.Component,properties:{textNode:cc.Node},onLoad:function(){this.blackFirstNode=cc.find("blackFirst",this.node),this.blackFirstLabel=cc.find("Label",this.blackFirstNode).getComponent(cc.Label),this.blackOtherNode=cc.find("blackOther",this.node),this.blackOtherLabelLayoutNode=cc.find("labelLayoutPic",this.blackOtherNode)},initGuidePopUp:function(e){this.guideId=e,i.soundsUtil.playMusic("metro_bgm"),this.storyTextList=i.templateManager.getGameParamValue("storyTextList"),this.storyTextIndex=0,this.blackFirstNode.active=!0,this.blackOtherNode.active=!1,i.BI.onEvent(i.biConstant.EVENT_TYPE_CLICK,i.biConstant.EVENT_ID_CLICK_GUIDE_ONE,2),this.startRunFirst(),this.guideList=[],this.cliclBlackOtherStep=0,this.loadImgAtlas()},loadImgAtlas:function(){this.loadAtlas=null;var e=this;cc.loader.loadRes("textures/guide/story",cc.SpriteAtlas,function(t,a){return t?(cc.error(t),void e.loadImgAtlas()):(i.Logger.debug("loadRes over loadImgAtlas 1"),e.loadAtlas=a,void e.checkImgSprite())})},checkImgSprite:function(){if(this.node&&this.node.active){this.icon=cc.find("blackOther/bg",this.node),this.iconSprite=this.icon.getComponent(cc.Sprite);var e=this.loadAtlas.getSpriteFrame("story");this.iconSprite.spriteFrame=e;for(var t=1;t<=4;t++){var a=cc.find("blackOther/labelLayoutPic/text"+t,this.node).getComponent(cc.Sprite),n=this.loadAtlas.getSpriteFrame("text"+t);a.spriteFrame=n}i.gameScene.isFirstStart&&(e=[],cc.loader._assetTables.assets.getUuidArray("audio",cc.AudioClip,e),i.soundsUtil.loadSoundsByNameList(e,!1,1))}},cleanLoadRes:function(){this.loadAtlas&&(cc.loader.release(cc.loader.getDependsRecursively(this.loadAtlas)),this.loadAtlas=null)},startRunFirst:function(){if(this.storyTextIndex>=this.storyTextList.length)return this.blackFirstNode.active=!1,this.blackOtherNode.active=!0,void this.startRunNext();i.BI.onEvent(i.biConstant.EVENT_TYPE_CLICK,i.biConstant.EVENT_ID_CLICK_GUIDE_ONE,this.storyTextIndex+3),this.blackFirstLabel.string=i.lang.getGameText(this.storyTextList[this.storyTextIndex]),this.blackFirstLabel.node.opacity=1;var e=(a=i.templateManager.getGameParamValue("storyBlackTextShowTime"))[0]/1e3,t=a[1]/1e3,a=cc.fadeIn(e);e=cc.delayTime(t),t=cc.callFunc(function(){this.storyTextIndex+=1,this.startRunFirst()},this),t=cc.sequence(a,e,t),this.blackFirstLabel.node.stopAllActions(),this.blackFirstLabel.node.runAction(t)},startRunNext:function(){var e=this,t=this.storyTextIndex+3;i.soundsUtil.playMusic("story_bgm");var a=0,n=i.templateManager.getGameParamValue("storyTextShowTime")/1e3,o=[.5,.5,1,1];i.BI.onEvent(i.biConstant.EVENT_TYPE_CLICK,i.biConstant.EVENT_ID_CLICK_GUIDE_ONE,t);for(var s=0;s<this.blackOtherLabelLayoutNode.children.length;s++)!function(i){var s=e.blackOtherLabelLayoutNode.children[i],r=cc.delayTime(a),c=cc.fadeIn(n),l=cc.callFunc(function(){this.addGuideList(t+1+i)},e);l=cc.sequence(r,c,l),s.stopAllActions(),s.opacity=1,s.runAction(l),a+=n+o[i]}(s);var r=cc.delayTime(a+1),c=cc.callFunc(function(){this.playDoneMeth()},this);c=cc.sequence(r,c),this.node.stopAllActions(),this.node.runAction(c)},addGuideList:function(e){0<=this.guideList.indexOf(e)||(this.guideList.push(e),i.BI.onEvent(i.biConstant.EVENT_TYPE_CLICK,i.biConstant.EVENT_ID_CLICK_GUIDE_ONE,e))},onClick:function(){if(this.blackOtherNode.active&&!(2<=this.cliclBlackOtherStep))if(0==this.cliclBlackOtherStep){this.cliclBlackOtherStep=1;for(var e=this.storyTextIndex+3,t=0;t<this.blackOtherLabelLayoutNode.children.length;t++){var i=this.blackOtherLabelLayoutNode.children[t];i.opacity=255,i.stopAllActions(),this.addGuideList(e+1+t)}}else{var a,n;1==this.cliclBlackOtherStep&&(this.cliclBlackOtherStep=2,this.node.stopAllActions(),a=cc.delayTime(.5),n=cc.callFunc(function(){this.playDoneMeth()},this),n=cc.sequence(a,n),this.node.runAction(n))}},playDoneMeth:function(){this.node.destroy(),i.gameScene.onGuidePopUpClose(this.guideId),i.battleScene.playBattleMusic(),this.addGuideList(this.storyTextIndex+3+this.guideList.length+1),this.cleanLoadRes()}}),cc._RF.pop()},{}],GuidePopUp_2:[function(e,t){"use strict";cc._RF.push(t,"8cf75KDJHVBWI5JMVjryhN+","GuidePopUp_2");var i=e("Aft");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.contentNode=cc.find("content",this.node),this.towerNode1=cc.find("content/typeLayout/tower1",this.node),this.towerNode2=cc.find("content/typeLayout/tower2",this.node),this.towerNode3=cc.find("content/typeLayout/tower3",this.node),this.towerNode4=cc.find("content/typeLayout/tower4",this.node)},initGuidePopUp:function(e){this.guideId=e,this.guideId==i.constant.GUIDE_TYPE_INSTANCE_1_4?(this.towerNode1.active=!0,this.towerNode2.active=!0,this.towerNode3.active=!1,this.towerNode4.active=!1):this.guideId==i.constant.GUIDE_TYPE_INSTANCE_2_2&&(this.towerNode1.active=!1,this.towerNode2.active=!1,this.towerNode3.active=!0,this.towerNode4.active=!0),this.contentNode.scale=0,this.contentNode.runAction(cc.scaleTo(.2,1)),this.loadImgAtlas()},loadImgAtlas:function(){this.loadAtlas=null;var e=this,t=i.player.commonModule.isLowIosDevice()?"textures/guide/GuideIntroduce_small":"textures/guide/GuideIntroduce";cc.loader.loadRes(t,cc.SpriteAtlas,function(t,a){return t?(cc.error(t),void e.loadImgAtlas()):(i.Logger.debug("loadRes over loadImgAtlas 2"),e.loadAtlas=a,void e.checkImgSprite())})},checkImgSprite:function(){var e;this.node&&this.node.active&&(this.iconSprite1=cc.find("content/typeLayout/tower1/icon",this.node).getComponent(cc.Sprite),e=this.loadAtlas.getSpriteFrame("DefendTower_Icon3"),this.iconSprite1.spriteFrame=e,this.iconSprite2=cc.find("content/typeLayout/tower2/icon",this.node).getComponent(cc.Sprite),e=this.loadAtlas.getSpriteFrame("DefendTower_Icon1"),this.iconSprite2.spriteFrame=e,this.iconSprite3=cc.find("content/typeLayout/tower3/icon",this.node).getComponent(cc.Sprite),e=this.loadAtlas.getSpriteFrame("DefendTower_Icon2"),this.iconSprite3.spriteFrame=e,this.iconSprite4=cc.find("content/typeLayout/tower4/icon",this.node).getComponent(cc.Sprite),e=this.loadAtlas.getSpriteFrame("DefendTower_Icon4"),this.iconSprite4.spriteFrame=e)},cleanLoadRes:function(){this.loadAtlas&&(cc.loader.release(cc.loader.getDependsRecursively(this.loadAtlas)),this.loadAtlas=null)},onClickClose:function(){this.contentNode.runAction(cc.sequence(cc.scaleTo(.2,0),cc.callFunc(function(){this.node.destroy(),i.player.commonModule.isLowIosDevice()&&this.cleanLoadRes(),i.gameScene.onGuidePopUpClose(this.guideId)},this)))}}),cc._RF.pop()},{}],GuidePopUp_3:[function(e,t){"use strict";cc._RF.push(t,"4822d1OstpEipNrFTe7DRd4","GuidePopUp_3");var i=e("Aft");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.contentNode=cc.find("content",this.node)},initGuidePopUp:function(e){this.guideId=e,this.contentNode.scale=0,this.contentNode.runAction(cc.scaleTo(.2,1)),this.loadImgAtlas()},loadImgAtlas:function(){this.loadAtlas=null;var e=this,t=i.player.commonModule.isLowIosDevice()?"textures/guide/GuideIntroduce_small":"textures/guide/GuideIntroduce";cc.loader.loadRes(t,cc.SpriteAtlas,function(t,a){return t?(cc.error(t),void e.loadImgAtlas()):(i.Logger.debug("loadRes over loadImgAtlas 3"),e.loadAtlas=a,void e.checkImgSprite())})},checkImgSprite:function(){var e;this.node&&this.node.active&&(this.iconSprite1=cc.find("content/imgLevel2",this.node).getComponent(cc.Sprite),e=this.loadAtlas.getSpriteFrame("FightPlan_Img"),this.iconSprite1.spriteFrame=e)},cleanLoadRes:function(){this.loadAtlas&&(cc.loader.release(cc.loader.getDependsRecursively(this.loadAtlas)),this.loadAtlas=null)},onClickClose:function(){this.contentNode.runAction(cc.sequence(cc.scaleTo(.2,0),cc.callFunc(function(){this.node.destroy(),i.player.commonModule.isLowIosDevice()&&this.cleanLoadRes(),i.gameScene.onGuidePopUpClose(this.guideId)},this)))}}),cc._RF.pop()},{}],GuidePopUp_4:[function(e,t){"use strict";cc._RF.push(t,"b0cd3LSuENLqKIJ6bWsl17q","GuidePopUp_4");var i=e("Aft");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.contentNode2=cc.find("content2",this.node),this.contentNode3=cc.find("content3",this.node),this.imgLevel2_1=cc.find("content2/imgLevel2_1",this.node),this.imgLevel2_2=cc.find("content2/imgLevel2_2",this.node),this.towerIntroduceImg=cc.find("content2/towerIntroduceImg",this.node)},initGuidePopUp:function(e){var t=this;this.guideId=e,this.isClump=!1;var a,n,o="2",s="",r="";e==i.constant.GUIDE_TYPE_INSTANCE_3_2?(this.contentNode=this.contentNode2,this.contentNode2.active=!0,this.contentNode3.active=!1,this.imgLevel2_1.active=!0,this.imgLevel2_2.active=!1,this.towerIntroduceImg.active=!1,this.titleLabel=cc.find("content2/title/label",this.node).getComponent(cc.Label),this.constantLabel=cc.find("content2/tips1",this.node).getComponent(cc.Label),this.detailLabel=cc.find("content2/tips2",this.node).getComponent(cc.Label),a=i.templateManager.getTowerTypeById(i.constant.TOWER_TYPE_ARROW),n=i.templateManager.getTowerTypeById(i.constant.TOWER_TYPE_BARRACK),s=i.lang.getGameText(a.name),r=i.lang.getGameText(n.name)):e==i.constant.GUIDE_TYPE_INSTANCE_4_1?(this.contentNode=this.contentNode2,this.contentNode2.active=!0,this.contentNode3.active=!1,this.imgLevel2_1.active=!1,this.imgLevel2_2.active=!0,this.towerIntroduceImg.active=!1,this.titleLabel=cc.find("content2/title/label",this.node).getComponent(cc.Label),this.constantLabel=cc.find("content2/tips1",this.node).getComponent(cc.Label),this.detailLabel=cc.find("content2/tips2",this.node).getComponent(cc.Label),a=i.templateManager.getTowerTypeById(i.constant.TOWER_TYPE_MAGIC),n=i.templateManager.getTowerTypeById(i.constant.TOWER_TYPE_CANNON),s=i.lang.getGameText(a.name),r=i.lang.getGameText(n.name)):e==i.constant.GUIDE_TYPE_INSTANCE_5_0?(this.contentNode=this.contentNode3,this.contentNode2.active=!1,this.contentNode3.active=!0,this.titleLabel=cc.find("content3/title/label",this.node).getComponent(cc.Label),this.constantLabel=cc.find("content3/tips1",this.node).getComponent(cc.Label),this.detailLabel=cc.find("content3/tips2",this.node).getComponent(cc.Label),o="3"):e==i.constant.GUIDE_TYPE_INSTANCE_1_e_2&&(this.isClump=!0,this.contentNode=this.contentNode2,this.contentNode2.active=!0,this.contentNode3.active=!1,this.imgLevel2_1.active=!1,this.imgLevel2_2.active=!1,this.towerIntroduceImg.active=!0,this.titleLabel=cc.find("content2/title/label",this.node).getComponent(cc.Label),this.constantLabel=cc.find("content2/tips1",this.node).getComponent(cc.Label),this.detailLabel=cc.find("content2/tips2",this.node).getComponent(cc.Label)),this.scheduleOnce(function(){t.isClump?(t.titleLabel.string=i.lang.getGameText(i.GameTextCode.JIJIE_TITLE),t.constantLabel.string=i.lang.getGameText(i.GameTextCode.JIJIE_TEXT1),t.detailLabel.string=i.lang.getGameText(i.GameTextCode.JIJIE_TEXT2)):(i.lang.updateLabelStringArgs(t.titleLabel,1528,[o]),i.lang.updateLabelStringArgs(t.constantLabel,1529,[o]),"3"==o?i.lang.updateLabelStringArgs(t.detailLabel,1530,[o]):i.lang.updateLabelStringArgs(t.detailLabel,1757,[s,r,o]))},.06),this.contentNode.scale=0,this.contentNode.runAction(cc.scaleTo(.2,1)),this.loadImgAtlas()},loadImgAtlas:function(){this.loadAtlas=null;var e=this,t=i.player.commonModule.isLowIosDevice()?"textures/guide/GuideIntroduce_small":"textures/guide/GuideIntroduce";cc.loader.loadRes(t,cc.SpriteAtlas,function(t,a){return t?(cc.error(t),void e.loadImgAtlas()):(i.Logger.debug("loadRes over loadImgAtlas 3"),e.loadAtlas=a,void e.checkImgSprite())})},checkImgSprite:function(){var e;this.node&&this.node.active&&(this.iconSprite1=cc.find("content2/imgLevel2_1",this.node).getComponent(cc.Sprite),e=this.loadAtlas.getSpriteFrame("DefendTower_Img_Level2_1"),this.iconSprite1.spriteFrame=e,this.iconSprite2=cc.find("content2/imgLevel2_2",this.node).getComponent(cc.Sprite),e=this.loadAtlas.getSpriteFrame("DefendTower_Img_Level2_2"),this.iconSprite2.spriteFrame=e,this.iconSprite3=cc.find("content3/imgLevel3",this.node).getComponent(cc.Sprite),e=this.loadAtlas.getSpriteFrame("DefendTower_Img_Level3"),this.iconSprite3.spriteFrame=e,this.iconSprite4=cc.find("content2/towerIntroduceImg",this.node).getComponent(cc.Sprite),e=this.loadAtlas.getSpriteFrame("Tower_Introduce_Img1"),this.iconSprite4.spriteFrame=e)},cleanLoadRes:function(){this.loadAtlas&&(cc.loader.release(cc.loader.getDependsRecursively(this.loadAtlas)),this.loadAtlas=null)},onClickClose:function(){this.contentNode.runAction(cc.sequence(cc.scaleTo(.2,0),cc.callFunc(function(){this.node.destroy(),i.player.commonModule.isLowIosDevice()&&this.cleanLoadRes(),i.gameScene.onGuidePopUpClose(this.guideId),i.battleScene.checkStartPopUp()},this)))}}),cc._RF.pop()},{}],GuidePopUp_5:[function(e,t){"use strict";cc._RF.push(t,"98439qEY89AxIxyRUEnMtoM","GuidePopUp_5");var i=e("Aft");cc.Class({extends:cc.Component,properties:{skill1:cc.Node,skill2:cc.Node,skill3:cc.Node,titleText:cc.Label,contentText:cc.Label},onLoad:function(){this.contentNode=cc.find("content",this.node)},initGuidePopUp:function(e){this.guideId=e,i.Logger.debug("\u6280\u80fd\u5f15\u5bfc\u5f39\u677f:",e),this.skill1.active=e===i.constant.GUIDE_TYPE_INSTANCE_3_6,this.skill2.active=e===i.constant.GUIDE_TYPE_SKILL_CALL_1_2,this.skill3.active=e===i.constant.GUIDE_TYPE_SKILL_SEND_1_2;var t=null,a=null;e===i.constant.GUIDE_TYPE_INSTANCE_3_6?(t=i.templateManager.getHeroSkillDataByGroupId(i.constant.DRIVING_SKILL_BLOW),a=i.templateManager.getHeroSkillLevelData(i.constant.DRIVING_SKILL_BLOW,1)):e===i.constant.GUIDE_TYPE_SKILL_CALL_1_2?(t=i.templateManager.getHeroSkillDataByGroupId(i.constant.DRIVING_SKILL_RECRUIT),a=i.templateManager.getHeroSkillLevelData(i.constant.DRIVING_SKILL_RECRUIT,1)):e===i.constant.GUIDE_TYPE_SKILL_SEND_1_2&&(t=i.templateManager.getHeroSkillDataByGroupId(i.constant.DRIVING_SKILL_SEND),a=i.templateManager.getHeroSkillLevelData(i.constant.DRIVING_SKILL_SEND,1)),a=i.lang.getFormatString(a.desc,this.getDescParameter(a)),t&&(this.titleText.string=i.lang.getGameText(t.skillName),this.contentText.string=a),this.contentNode.scale=0,this.contentNode.runAction(cc.scaleTo(.2,1)),this.loadImgAtlas()},loadImgAtlas:function(){this.loadAtlas=null;var e=this,t=i.player.commonModule.isLowIosDevice()?"textures/guide/GuideIntroduce_small":"textures/guide/GuideIntroduce";cc.loader.loadRes(t,cc.SpriteAtlas,function(t,a){return t?(cc.error(t),void e.loadImgAtlas()):(i.Logger.debug("loadRes over loadImgAtlas 3"),e.loadAtlas=a,void e.checkImgSprite())})},checkImgSprite:function(){var e;this.node&&this.node.active&&(this.iconSprite1=cc.find("content/img01",this.node).getComponent(cc.Sprite),e=this.loadAtlas.getSpriteFrame("NewSkill_Img2"),this.iconSprite1.spriteFrame=e,this.iconSprite2=cc.find("content/img02",this.node).getComponent(cc.Sprite),e=this.loadAtlas.getSpriteFrame("NewSkill_Img3"),this.iconSprite2.spriteFrame=e,this.iconSprite3=cc.find("content/img03",this.node).getComponent(cc.Sprite),e=this.loadAtlas.getSpriteFrame("NewSkill_Img1"),this.iconSprite3.spriteFrame=e)},cleanLoadRes:function(){this.loadAtlas&&(cc.loader.release(cc.loader.getDependsRecursively(this.loadAtlas)),this.loadAtlas=null)},getDescParameter:function(e){var t=[];if(!e)return t;for(var a=e.descParameter,n=0;n<a.length;n++){var o=9999<(o=a[n])?i.Utils.formatBigNumberForLabel(new i.BigNumber(o)):o;t.push(o)}return t},onClickClose:function(){this.contentNode.runAction(cc.sequence(cc.scaleTo(.2,0),cc.callFunc(function(){this.node.destroy(),i.player.commonModule.isLowIosDevice()&&this.cleanLoadRes(),i.gameScene.onGuidePopUpClose(this.guideId)},this)))}}),cc._RF.pop()},{}],HangUpPage:[function(e,t){"use strict";cc._RF.push(t,"35bfbUrjxNOpL+l/uOnFoja","HangUpPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{vipAtlas:{default:null,type:cc.SpriteAtlas}},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.SHOW_AD_OVER_HANG_UP,function(){return e.onShowAdOver()}),this.registerListener(i.GameEventType.UPDATE_HANG_UP_PAGE,function(){return e.updateData()})},onLoadPage:function(){this.contentNode=cc.find("content",this.node),this.timeLabel=cc.find("lengthOfTime/layout/time",this.contentNode).getComponent(cc.Label),this.coinNumLabel=cc.find("rewardLayout/goldAll/number",this.contentNode).getComponent(cc.Label),this.coinOutPutLabel=cc.find("rewardLayout/goldAll/outPut/label",this.contentNode).getComponent(cc.Label),this.expNumLabel=cc.find("rewardLayout/expAll/number",this.contentNode).getComponent(cc.Label),this.expOutPutLabel=cc.find("rewardLayout/expAll/outPut/label",this.contentNode).getComponent(cc.Label),this.hangUpDetailNode=cc.find("hangUpDetail",this.contentNode),this.hangUpCurPositonLabel=cc.find("layout/layout/current/label",this.hangUpDetailNode).getComponent(cc.Label),this.hangUpNextPositonLabel=cc.find("layout/layout/next/label",this.hangUpDetailNode).getComponent(cc.Label),this.hangUpCoinLabel=cc.find("layout/layout/current/goldLayout/number",this.hangUpDetailNode).getComponent(cc.Label),this.hangUpExpLabel=cc.find("layout/layout/current/expLayout/number",this.hangUpDetailNode).getComponent(cc.Label),this.hangUpNextCoinLabel=cc.find("layout/layout/next/goldLayout/number",this.hangUpDetailNode).getComponent(cc.Label),this.hangUpNextExpLabel=cc.find("layout/layout/next/expLayout/number",this.hangUpDetailNode).getComponent(cc.Label),this.hangUpheroAddtionLabel=cc.find("layout/layout/heroAddtion",this.hangUpDetailNode).getComponent(cc.Label),this.adButtonNode=cc.find("buttonLayout/adButton",this.contentNode),this.adReceiveLabel=cc.find("background/layout/label",this.adButtonNode).getComponent(cc.Label),this.adTimesLabel=cc.find("label",this.adButtonNode).getComponent(cc.Label),this.adButtonEffect=cc.find("background/button_light",this.adButtonNode).getComponent(cc.Animation),this.adButtonEffect.stop(),this.adButtonEffect.setCurrentTime(0),this.adButtonEffect.play("button_light"),this.vipLayoutNode=cc.find("vipLayout",this.adButtonNode),this.vipIconSprite=cc.find("icon",this.vipLayoutNode).getComponent(cc.Sprite),this.vipTimesLabel=cc.find("label2",this.vipLayoutNode).getComponent(cc.Label)},showPageBegan:function(){this.canClick=!1,this.contentNode.active=!1,this.hangUpDetailNode.opacity=1,this.lastTime=i.timeUtil.getTime(),this.updateVipNode()},showPageEnded:function(){this.updateData(),this.adButtonNode.active&&i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_HANGUP_PAGE_AD,this.adLastTimes),i.ttAdManager.showGridAd(cc.find("adNode",this.node),this.getPageType())},closePageBegan:function(){i.ttAdManager.hideGridAd()},updateVipNode:function(){var e=i.player.vipModule.getNextVipChangeCfg(i.constant.VIP_PRIVILEGE_TYPE_HANGUP);e&&i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_VIP)?(this.vipLayoutNode.active=!0,this.vipIconSprite.spriteFrame=this.vipAtlas.getSpriteFrame(e.vipIconSmall),i.lang.updateLabelString(this.vipTimesLabel,[e.hangupNum[1]])):this.vipLayoutNode.active=!1},updateData:function(){this.contentNode.active=!0;var e=i.player.commonModule.getHangUpTime(),t=i.timeUtil.getSecond(),a=i.timeUtil.getTime();this.lastTime<a&&(this.lastTime=a);var n=0;-1!==e&&e<t&&(n=t-e);var o=i.templateManager.getGameParamValue("hangUpMaxTime"),s=(n=o<n?o:n,i.player.playerModule.getPlayerLevel()),r=s>=i.JsonData.Level.length?s:s+1,c=(i.player.heroModule.getAlreadyHaveHeroNum(),i.player.commonModule.getHangUpHeroIncome().minus(1).toFixed(2));a=Math.floor(100*c),this.timeLabel.string=i.timeUtil.secondFormat(n,!0),t=i.templateManager.getPlayerLevelDataByLevel(s),this.coinNum=i.player.commonModule.getHangUpReceiveCoin(n),this.expNum=i.player.commonModule.getHangUpReceiveExp(n),this.coinNumLabel.string=i.Utils.formatBigNumberForLabel(this.coinNum.toFixed(0)),this.expNumLabel.string=i.Utils.formatBigNumberForLabel(this.expNum.toFixed(0)),i.lang.updateLabelString(this.hangUpCurPositonLabel,[i.lang.getGameText(t.office)]),e=i.player.commonModule.getHangUpReceiveCoin(3600),o=i.player.commonModule.getHangUpReceiveExp(3600),i.lang.updateLabelString(this.coinOutPutLabel,[i.Utils.formatBigNumberForLabel(e)]),i.lang.updateLabelString(this.expOutPutLabel,[i.Utils.formatBigNumberForLabel(o)]),n=c=i.player.commonModule.getHangUpReceiveCoin(3600,!0),o=e=i.player.commonModule.getHangUpReceiveExp(3600,!0),s!=r?(r=i.templateManager.getPlayerLevelDataByLevel(r),n=new i.BigNumber(r.offlineCoin).times(3600),o=new i.BigNumber(r.offlineHeroExp).times(3600),i.lang.updateLabelString(this.hangUpNextPositonLabel,[i.lang.getGameText(r.office)])):i.lang.updateLabelString(this.hangUpNextPositonLabel,[i.lang.getGameText(t.office)]),i.lang.updateLabelString(this.hangUpCoinLabel,[i.Utils.formatBigNumberForLabel(c)]),i.lang.updateLabelString(this.hangUpExpLabel,[i.Utils.formatBigNumberForLabel(e)]),i.lang.updateLabelString(this.hangUpNextCoinLabel,[i.Utils.formatBigNumberForLabel(n)]),i.lang.updateLabelString(this.hangUpNextExpLabel,[i.Utils.formatBigNumberForLabel(o)]),i.lang.updateLabelString(this.hangUpheroAddtionLabel,[a]),this.adLastTimes=i.player.commonModule.getLastHangUpTodayAdTimes(),this.adReceiveTime=i.templateManager.getGameParamValue("hangUpPerAdHourage"),this.adButtonNode.active=0<this.adLastTimes,0<this.adLastTimes&&(a=i.templateManager.getGameParamValue("hangUpAdsNumPerDay"),i.lang.updateLabelString(this.adReceiveLabel,[this.adReceiveTime/60/60]),i.lang.updateLabelString(this.adTimesLabel,[this.adLastTimes,a])),this.canClick=!0},onClickReward:function(){var e=this;!this.canClick||!this.coinNum||this.coinNum.comparedTo(0)<=0||(i.soundsUtil.playSoundEffect("common_button_click"),this.canClick=!1,i.gameScene.checkServerTime(function(){i.timeUtil.getTime()<e.lastTime?i.gameScene.showTipsItemRender(i.lang.getGameText(i.GameTextCode.SYSTEM_TIME_ERROR)):(i.player.itemModule.dropItem(i.constant.COIN_TYPE_SILVER,e.coinNum,!0,i.constant.ITEM_ADD_SOURCE_HANGE_UP),i.player.itemModule.dropItem(i.constant.COIN_TYPE_HERO_EXP,e.expNum.toNumber(),!0,i.constant.ITEM_ADD_SOURCE_HANGE_UP),i.player.commonModule.resetHangUpTime(),e.onClickClose(),i.player.taskModule.onTaskEvent(i.constant.TASK_TYPE_HANGUP_GET_COIN,e.coinNum.toNumber()),i.player.taskModule.onTaskEvent(i.constant.TASK_TYPE_HANGUP_GET_EXP,e.expNum.toNumber()))},!1,function(){e.canClick=!0}))},onClickTips:function(){i.soundsUtil.playSoundEffect("common_button_click");var e=this.hangUpDetailNode.opacity;this.hangUpDetailNode.opacity=1===e?255:1},onClickAd:function(){this.adLastTimes<=0||i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,i.GameEventType.SHOW_AD_OVER_HANG_UP)},onShowAdOver:function(){var e,t;this.adLastTimes<=0?this.closePage():(i.player.commonModule.addHangUpTodayAdTimes(),e=i.player.commonModule.getHangUpReceiveCoin(this.adReceiveTime),i.player.itemModule.dropItem(i.constant.COIN_TYPE_SILVER,e,!0,i.constant.ITEM_ADD_SOURCE_HANGE_UP_AD),t=i.player.commonModule.getHangUpReceiveExp(this.adReceiveTime),i.player.itemModule.dropItem(i.constant.COIN_TYPE_HERO_EXP,t,!0,i.constant.ITEM_ADD_SOURCE_HANGE_UP_AD),this.updateData(),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_HANG_UP_BOX_RED),i.player.taskModule.onTaskEvent(i.constant.TASK_TYPE_HANGUP_GET_COIN,e.toNumber()),i.player.taskModule.onTaskEvent(i.constant.TASK_TYPE_HANGUP_GET_EXP,t.toNumber()))},onClickHide:function(){this.hangUpDetailNode.opacity=1},onClickClose:function(){i.eventBus.dispatchEvent(i.GameEventType.UPDATE_HANG_UP_BOX),this.closePage()},update:function(e){this.canClick&&(this.curTime||(this.curTime=0),this.curTime+=e,1<=this.curTime&&(this.updateData(),this.curTime=0))}}),cc._RF.pop()},{}],Head:[function(e,t){"use strict";cc._RF.push(t,"8617bVgcOxHIrJzgXTucQj7","Head");var i=e("Aft");cc.Class({extends:cc.Component,properties:{iconNode:cc.Node,hpProgress:cc.ProgressBar,choiceNode:cc.Node,blackNode:cc.Node,numberLabel:cc.Label,bgSprite:cc.Sprite,bgAtlas:cc.SpriteAtlas},onLoad:function(){this.node.on("touchstart",this.onTouchStart,this),this.node.on("touchend",this.onTouchEnd,this)},init:function(e,t){this.tryNode=cc.find("try",this.node),this.tryNode.active=!1,this.grayValue=0,this.obj=e,(this.obj.headObj=this).index=t,t=this.obj.heroData.icon.split("/")[1],this.iconSprite=this.iconNode.getComponent(cc.Sprite),this.iconSprite.spriteFrame=this.host.iconAtlas.getSpriteFrame(t),this.hpProgress.progress=1,this.blackNode.active=!1,this.numberLabel.node.active=!1,this.blackOriginHei=this.blackNode.height,this.updateBg()},onClick:function(){i.battleScene.setCurEnemyObj(null),i.battleScene.setCurSoldierObj(null),i.soundsUtil.playSoundEffect("hero_choose"),0<this.cdTime||(i.battleScene.setCurHeroIndex(this.index),i.battleScene.setOperateState(i.constant.OPERATE_STATE_HERO),this.host.onClickChoose(this.index))},setChoice:function(e){this.choiceNode.active=e},updateHp:function(e){this.curHp=e,this.hpProgress.progress=e/this.obj.maxHp,this.host.updateHeroDetailHp(e,this.index),this.curHp<=0?(this.blackNode.active=!0,this.numberLabel.node.active=!0,this.hpProgress.node.active=!1,this.cdTime=8,0!=(e=i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_REVIVE_TIME))&&(this.cdTime*=1+e),this.blackNode.height=this.blackOriginHei,e=Math.floor(this.cdTime),this.numberLabel.string=e=e<0?0:e,0<=this.grayValue&&(this.iconSprite.setMaterial(0,cc.Material.getBuiltinMaterial("2d-gray-sprite")),this.bgSprite.setMaterial(0,cc.Material.getBuiltinMaterial("2d-gray-sprite")),this.grayValue=-1)):(this.blackNode.active=!1,this.numberLabel.node.active=!1,this.hpProgress.node.active=!0,this.cdTime=0,this.grayValue<=0&&(this.iconSprite.setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite")),this.bgSprite.setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite")),this.grayValue=1))},updateBg:function(){var e=i.player.heroModule.getHeroQuality(this.obj.heroData.id),t=i.battleScene.getTryHeroQuality(this.obj.heroData.id);0<t&&(e=t,this.tryNode.active=!0);var a="Head_Bg_Green";switch(e){case i.constant.QUALITY_TYPE_1:a="Head_Bg_Green";break;case i.constant.QUALITY_TYPE_2:a="Head_Bg_Blue";break;case i.constant.QUALITY_TYPE_3:a="Head_Bg_Purple";break;case i.constant.QUALITY_TYPE_4:a="Head_Bg_Orange"}this.bgSprite.spriteFrame=this.bgAtlas.getSpriteFrame(a)},updateCd:function(e){0<this.cdTime&&(this.useTime||(this.useTime=0),this.useTime+=e,this.useTime<1||(this.useTime=0,this.cdTime--,this.blackNode.height=this.blackOriginHei*this.cdTime/8,(e=Math.floor(this.cdTime))<0&&(e=0),this.numberLabel.string=Math.floor(e)))},onClickShowTip:function(e){var t=this.node.convertToWorldSpaceAR(cc.v2(0,0)),a={name:i.lang.getGameText(this.obj.heroData.name),hp:this.obj.curHp,physicalAtk:this.obj.physicalAtk,phyDef:this.obj.physicalDef,magDef:this.obj.magicDef,magicAtk:this.obj.magicAtk};t=t.add(cc.v2(this.node.width/2+5,0)),this.host.showDetail(t,this.index,a,null,e),i.battleScene.gameBattleUIObj.hideGayFriendTriggerTips(),i.battleScene.gameBattleUIObj.hideGayFriendTips()},onTouchStart:function(){i.Logger.debug("onTouchStart"),this.touchTime=0,this.touching=!0},onTouchEnd:function(){i.Logger.debug("onTouchEnd"),this.touching?(this.touching=!1,this.onClick()):this.host.hideDetail()},update:function(e){this.touching&&(this.touchTime+=e,.6<=this.touchTime&&(this.touching=!1,this.touchTime=0,this.onClickShowTip()))}}),cc._RF.pop()},{}],HeroModule:[function(e,t){"use strict";cc._RF.push(t,"9c5e3HeT2ND94i34Eywk587","HeroModule");var i=e("Aft");cc.Class({extends:i.BaseHandler,init:function(e){if(this.player=e,!(e=i.StorageUtil.getData(i.constant.SAVE_HERO_DATA))){for(var t={heroMap:{},battleList:[],heroGeneralExp:new i.BigNumber(i.templateManager.getGameParamValue("baseHeroExp")),pioneerHero:null,adPioneerHero:null,adPioneerHeroTime:"-1",adPioneerHeroAddTimes:"0",todayUnlock:[],heroGayFriend:{},fightGayFriend:-1,fightAdGayFriend:-1,fightAdGayFriendTime:"-1",fightAdGayFriendAddTimes:"0",newGayFriendList:[],cacheUnlockGayFriend:[],todayIntoGayFriend:!1,heroDefendInfo:{},isNewVersionGay:!0,alreadyPioneerRandomList:[],heroTryMap:{},oneKeyHeroMap:{}},a=i.JsonData.HeroCard,n=0;n<a.length;n++){var o=a[n];0<o.cardNum||(t.heroMap[o.heroId]=this.heroBaseData())}this.player.saveGameData(i.constant.SAVE_HERO_DATA,t),e=JSON.stringify(t)}i.Logger.debug("init hero data  :",e),this.player._gameData.heroData=JSON.parse(e)},loadData:function(){this.getHeroData().todayUnlock||(this.getHeroData().todayUnlock=[]),this.getHeroData().heroGayFriend&&this.getHeroData().isNewVersionGay||(this.getHeroData().heroGayFriend={}),this.getHeroData().fightGayFriend&&this.getHeroData().isNewVersionGay||(this.getHeroData().fightGayFriend=-1),this.getHeroData().fightAdGayFriend&&this.getHeroData().isNewVersionGay||(this.getHeroData().fightAdGayFriend=-1),this.getHeroData().newGayFriendList&&this.getHeroData().isNewVersionGay||(this.getHeroData().newGayFriendList=[]),this.getHeroData().cacheUnlockGayFriend&&this.getHeroData().isNewVersionGay||(this.getHeroData().cacheUnlockGayFriend=[]),this.getHeroData().heroDefendInfo||(this.getHeroData().heroDefendInfo={}),this.getHeroData().alreadyPioneerRandomList||(this.getHeroData().alreadyPioneerRandomList=[]),this.getHeroData().adPioneerHeroTime||(this.getHeroData().adPioneerHeroTime="-1"),this.getHeroData().adPioneerHeroAddTimes||(this.getHeroData().adPioneerHeroAddTimes="0"),this.getHeroData().fightAdGayFriendTime||(this.getHeroData().fightAdGayFriendTime="-1"),this.getHeroData().fightAdGayFriendAddTimes&&"-1"!=this.getHeroData().fightAdGayFriendAddTimes||(this.getHeroData().fightAdGayFriendAddTimes="0"),this.getHeroData().hasOwnProperty("heroTryMap")||(this.getHeroData().heroTryMap={}),this.getHeroData().hasOwnProperty("oneKeyHeroMap")||(this.getHeroData().oneKeyHeroMap={}),this.getHeroData().alreadyPioneerRandomList=[],this.getHeroData().isNewVersionGay=!0,this.checkHeroData(),this.saveHeroData()},resetTodayHeroData:function(){for(var e in this.getHeroData().todayUnlock=[],this.getHeroData().alreadyPioneerRandomList=[],this.getHeroData().heroMap)this.getHeroData().heroMap[e].todayDefendMinute=0;this.saveHeroData(!1,!0)},restoreData:function(e){e&&e.heroData&&(i.StorageUtil.save(i.constant.SAVE_HERO_DATA,e.heroData,!0),i.Logger.debug("restoreData data  heroData :",JSON.stringify(e.heroData)))},getHeroData:function(){return this.player._gameData.heroData},saveHeroData:function(e,t){e&&this.checkHeroErrorData(),this.player.saveGameData(i.constant.SAVE_HERO_DATA,this.getHeroData(),t)},heroBaseData:function(){return{level:1,quality:1,starLevel:0,cdStartTime:-1,heroExp:"0"}},checkHeroData:function(){for(var e in this.getHeroData().heroMap)(e=this.getHeroData().heroMap[e]).hasOwnProperty("level")||(e.level=1),e.hasOwnProperty("quality")||(e.quality=1),e.hasOwnProperty("starLevel")||(e.starLevel=0),e.hasOwnProperty("cdStartTime")||(e.cdStartTime=-1)},getAlreadyHaveHeroNum:function(){return Object.keys(this.getHeroData().heroMap).length},getAlreadyUnlockHeroList:function(e,t){var a,n=[];for(a in this.getHeroData().heroMap){var o=i.templateManager.getHeroDataById(a);o&&!(e&&o.heroInTowerType.indexOf(parseInt(e))<0||t&&(this.getBattlePioneerHero()==a||this.getBattleAdPioneerHero()==a))&&(o=1e10*this.getHeroQuality(a)+1e7*this.getHeroStarLevel(a)+1e4*this.getHeroLevel(a),this.getBattlePioneerHero()==a&&(o*=10),this.getBattleAdPioneerHero()==a&&(o*=5),n.push([o,a]))}n.sort(function(e,t){return t[0]-e[0]});for(var s=[],r=0;r<n.length;r++)s.push(Math.ceil(n[r][1]));return s},getOneKeyHeroList:function(e){var t,a,n=[];for(t in this.getHeroData().heroMap)i.templateManager.getHeroDataById(t)&&(a=1e10*this.getHeroQuality(t)+1e7*this.getHeroStarLevel(t)+1e4*this.getHeroLevel(t),this.getBattlePioneerHero()==t&&(a*=10),this.getBattleAdPioneerHero()==t&&(a*=5),n.push([a,t]));n.sort(function(e,t){return t[0]-e[0]});var o,s=[],r={},c=0,l=[],d=[];for(o in this.getHeroData().oneKeyHeroMap)d.push(parseInt(this.getHeroData().oneKeyHeroMap[o]));for(var h=0;h<n.length;h++){var u=n[h][1];this.getHeroData().oneKeyHeroMap.hasOwnProperty(u)&&(r[this.getHeroData().oneKeyHeroMap[u]]=u),c+=1,d.indexOf(c)<0&&l.push(c)}c=0;for(var p=0;p<n.length;p++){var g=n[p][1];this.getHeroData().oneKeyHeroMap.hasOwnProperty(g)||c>=l.length||(r[l[c]]=g,c+=1)}for(var _,m=1;m<=Object.keys(r).length;m++)r.hasOwnProperty(m)&&(_=parseInt(r[m]),0<=s.indexOf(_)||e&&e==_||s.push(_));return s},getCanGarrisonHeros:function(){for(var e=this.getAlreadyUnlockHeroList(),t=i.player.instanceModule.getAllGarrisonHeros(),a=0;a<t.length;a++){var n=t[a];0<=(n=e.indexOf(n))&&e.splice(n,1)}for(var o=[],s=0;s<e.length;s++){var r=e[s],c=this.getHeroLevel(r);o.push([c,r])}o.sort(function(e,t){return e[0]-t[0]});for(var l=[],d=0;d<o.length;d++)l.push(o[d][1]);return l},getAllHeroLevelList:function(){var e,t=[];for(e in this.getHeroData().heroMap){var i=this.getHeroData().heroMap[e];t.push(parseInt(i.level))}return t.sort(function(e,t){return t[0]-e[0]}),t},getHeroCountByLevel:function(e){var t,i=0;for(t in this.getHeroData().heroMap)this.getRealHeroLevel(t)>=e&&(i+=1);return i},getHeroCountByStar:function(e){var t,i=0;for(t in this.getHeroData().heroMap)this.getHeroStarLevel(t)>=e&&(i+=1);return i},getHeroCountByQuality:function(e){var t,i=0;for(t in this.getHeroData().heroMap)this.getHeroQuality(t)>=e&&(i+=1);return i},getHeroBaseDataById:function(e){return this.getHeroData().heroMap.hasOwnProperty(e)?this.getHeroData().heroMap[e]:null},isHeroUnlock:function(e){return null!=this.getHeroBaseDataById(e)},getLockHeroList:function(){for(var e=[],t=0;t<i.JsonData.Hero.length;t++){var a=i.JsonData.Hero[t];this.isHeroUnlock(a.id)||e.push(a.id)}return e},getTrueLockHeroList:function(){for(var e=[],t=0;t<i.JsonData.Hero.length;t++){var a,n,o=i.JsonData.Hero[t];this.isHeroUnlock(o.id)||(a=i.templateManager.getHeroCardDataByHeroId(o.id))&&(n=a.cardNum,i.player.itemModule.checkHeroPieceEnough(a.id,n)||e.push(o.id))}return e},checkHeroCanUnlock:function(e){var t,a=i.templateManager.getHeroCardDataById(e);a&&(t=a.heroId,this.getHeroBaseDataById(t)||(a=a.cardNum,i.player.itemModule.checkHeroPieceEnough(e,a)&&(this.getHeroData().heroMap[t]=this.heroBaseData(),i.player.itemModule.subHeroPiece(e,a,i.constant.ITEM_CONSUME_SOURCE_HERO_ACTIVE),this.saveHeroData(),this.putTodayUnlockHero(t),this.getHeroData().pioneerHero||this.setBattlePioneerHero(t),this.player.taskModule.addNewHero(t),this.player.towerModule.addPictorialNewTower(t),this.checkGayFriendUpByHero(t),this.player.skillModule.checkSkillState(),i.eventBus.dispatchEvent(i.GameEventType.REFRESH_HANGUP_SPINE_INFO),i.eventBus.dispatchEvent(i.GameEventType.CHECK_MAIN_TOWER_RED),i.eventBus.dispatchEvent(i.GameEventType.SET_HANGUP_EFFECT_STATUS),i.BI.onEvent(i.biConstant.EVENT_TYPE_HERO,i.biConstant.EVENT_ID_HERO_RECRUIT,t),i.player.broadcastModule.uploadBroadcastData(i.constant.BROADCAST_TYPE_GET_HERO,t))))},gmGetHero:function(e){var t=this.getHeroBaseDataById(e);if(t)return parseInt(t.level)<119&&(t.level="119"),this.saveHeroData(),this.checkHeroLevelCd(e),void i.eventBus.dispatchEvent(i.GameEventType.REFRESH_HANGUP_SPINE_INFO);this.getHeroData().heroMap[e]=this.heroBaseData(),this.getHeroData().heroMap[e].level="119",this.saveHeroData(),this.putTodayUnlockHero(e),this.getHeroData().pioneerHero||this.setBattlePioneerHero(e),this.player.taskModule.addNewHero(e),this.player.towerModule.addPictorialNewTower(e),this.checkGayFriendUpByHero(e),this.player.skillModule.checkSkillState(),i.eventBus.dispatchEvent(i.GameEventType.REFRESH_HANGUP_SPINE_INFO),i.eventBus.dispatchEvent(i.GameEventType.CHECK_MAIN_TOWER_RED),i.eventBus.dispatchEvent(i.GameEventType.SET_HANGUP_EFFECT_STATUS),i.BI.onEvent(i.biConstant.EVENT_TYPE_HERO,i.biConstant.EVENT_ID_HERO_RECRUIT,e)},vipReceiveHero:function(e){this.getHeroData().heroMap.hasOwnProperty(e)||(this.getHeroData().heroMap[e]=this.heroBaseData(),this.saveHeroData(),this.checkGayFriendUpByHero(e),i.player.broadcastModule.uploadBroadcastData(i.constant.BROADCAST_TYPE_GET_HERO,e))},getHeroQuality:function(e){return i.battleScene&&i.battleScene.checkIsTryHero(e)?parseInt(i.templateManager.getGameParamValue("tryHeroDefaultQuality")):(e=this.getHeroBaseDataById(e))?!(e=e.quality)||e<=0||4<e?1:e:1},addHeroQuality:function(e){var t=this.getHeroBaseDataById(e);t&&(this.isHeroMaxQuality(e)||(t.quality+=1,this.saveHeroData(),i.BI.onEvent(i.biConstant.EVENT_TYPE_HERO_UP_QUALITY,this.getHeroBiEventId(i.biConstant.EVENT_ID_HERO_UP_QUALITY_BASE,e),t.quality),i.player.broadcastModule.uploadBroadcastData(i.constant.BROADCAST_TYPE_HERO_QUALITY,e,t.quality)))},gmSetHeroQuality:function(e,t){var a=this.getHeroBaseDataById(e);a&&(t=Math.min(t,i.templateManager.getHeroStarLenByHeroId(e)),a.quality=t,this.saveHeroData(),i.player.broadcastModule.uploadBroadcastData(i.constant.BROADCAST_TYPE_HERO_QUALITY,e,t))},getUpQualityHeroLevel:function(e){if(this.isHeroMaxQuality(e))return-1;var t=this.getHeroQuality(e);return(t=i.templateManager.getHeroStarDataByHeroStar(e,t))?t.needLevel:-1},getCanUpQuality:function(e){var t=this.getUpQualityHeroLevel(e);return!(t<0)&&this.getHeroLevel(e)>=t},isHeroMaxQuality:function(e){var t=this.getHeroBaseDataById(e);return!!t&&t.quality>=i.templateManager.getHeroStarLenByHeroId(e)},getHeroSkillActive:function(e,t){this.getHeroQuality(e);var a,n=i.templateManager.getHeroStarMapByHeroId(e),o=!1;for(a in n){var s=n[star];if(!(star<starLevel)&&s.starSkill==t){o=!0;break}}return o},getHeroLevel:function(e){return i.battleScene&&i.battleScene.checkIsTryHero(e)?parseInt(i.templateManager.getGameParamValue("tryHeroDefaultLevel")):(e=this.getHeroBaseDataById(e))?parseInt(e.level):1},getRealHeroLevel:function(e){return(e=this.getHeroBaseDataById(e))?parseInt(e.level):0},addHeroLevel:function(e,t){var a=this.getHeroBaseDataById(e);a&&!this.isHeroMaxLevel(e)&&(t===i.constant.HERO_UP_LEVEL_SOURCE_TYPE_AD&&(a.cdStartTime=-1),t=a.level,(t=i.templateManager.getHeroLevelDataByLevel(e,t))&&t.type===i.constant.HERO_UP_LEVEL_TYPE_BREAK&&(i.player.commonModule.addHeroBreakCount(e),i.player.taskModule.onNewYearTaskEvent(i.constant.NEW_YEAR_TASK_TYPE_HERO_BREAK,1)),a.level=parseInt(a.level)+1+"",this.saveHeroData(),this.checkHeroLevelCd(e),this.checkGayFriendUpByHero(e),i.eventBus.dispatchEvent(i.GameEventType.REFRESH_HANGUP_SPINE_INFO),i.player.taskModule.onTaskEvent(i.constant.TASK_TYPE_HERO_UP,1),i.BI.onEvent(i.biConstant.EVENT_TYPE_HERO_UP_LEVEL,this.getHeroBiEventId(i.biConstant.EVENT_ID_HERO_UP_LEVEL_BASE,e),a.level),this.player.skillModule.checkSkillState(),parseInt(a.level)%100==0&&i.player.broadcastModule.uploadBroadcastData(i.constant.BROADCAST_TYPE_HERO_UPGRADE,e,a.level))},getHeroNextSpecialLevelExp:function(e){if(!this.getHeroBaseDataById(e))return 0;for(var t=this.getHeroLevel(e),a=i.templateManager.getHeroMaxLevelById(e),n=new i.BigNumber(0),o=1,s=t;s<a;s++){var r=i.templateManager.getHeroLevelDataByLevel(e,s);if(r.type!=i.constant.HERO_UP_LEVEL_TYPE_LEVEL){o=r.level;break}n=n.plus(r.expend)}return[o,n]},gmSetHeroLevel:function(e,t){var a=this.getHeroBaseDataById(e);a&&(t=Math.min(t,i.templateManager.getHeroMaxLevelById(e)),a.level=t+"",this.saveHeroData(),this.checkHeroLevelCd(e),i.eventBus.dispatchEvent(i.GameEventType.REFRESH_HANGUP_SPINE_INFO),i.player.taskModule.onTaskEvent(i.constant.TASK_TYPE_HERO_UP,1),t%100==0&&i.player.broadcastModule.uploadBroadcastData(i.constant.BROADCAST_TYPE_HERO_UPGRADE,e,t))},isHeroMaxLevel:function(e){var t=this.getHeroBaseDataById(e);return!!t&&parseInt(t.level)>=i.templateManager.getHeroMaxLevelById(e)},getHeroStarLevel:function(e){return(e=this.getHeroBaseDataById(e))?e.starLevel:0},addHeroStarLevel:function(e){var t=this.getHeroBaseDataById(e);if(!t)return!1;t.starLevel+=1,this.saveHeroData(),i.BI.onEvent(i.biConstant.EVENT_TYPE_HERO_UP_STAR,this.getHeroBiEventId(i.biConstant.EVENT_ID_HERO_UP_STAR_BASE,e),t.starLevel),i.player.broadcastModule.uploadBroadcastData(i.constant.BROADCAST_TYPE_HERO_STAR,e,t.starLevel)},checkHeroLevelCd:function(e){var t=this.getHeroLevel(e);!(t=i.templateManager.getHeroLevelDataByLevel(e,t))||t.type!=i.constant.HERO_UP_LEVEL_TYPE_BREAK||(e=this.getHeroBaseDataById(e))&&(e.cdStartTime=i.timeUtil.getSecond(),this.saveHeroData())},getHeroLevelStartCd:function(e){return(e=this.getHeroBaseDataById(e))?e.cdStartTime:-1},getHeroCdLastTime:function(e){if(!(a=this.getHeroBaseDataById(e)))return-1;var t=a.cdStartTime,a=this.getHeroLevel(e);return(a=i.templateManager.getHeroLevelDataByLevel(e,a))?a.type!=i.constant.HERO_UP_LEVEL_TYPE_BREAK?-1:(a=t+a.expend-i.timeUtil.getSecond())<0?-1:a:-1},getHeroIsCdIng:function(e){return 0<this.getHeroLevelStartCd(e)&&0<this.getHeroCdLastTime(e)&&!this.isHeroMaxLevel(e)},getUnlockBattleHeroNum:function(){for(var e=0,t=i.JsonData.HeroBattleNum,a=0;a<t.length;a++){var n=t[a];i.player.instanceModule.isPassInstance(n.instance[0],n.instance[1])&&(e+=1)}return e},setBattleHeroList:function(e){this.getHeroData().battleList=[];for(var t=0;t<e.length;t++)this.getHeroData().battleList.push(e[t]);this.saveHeroData()},getBattleHeroByIndex:function(e){return e>=this.getHeroData().battleList.length?null:this.getHeroData().battleList[e]},getBattleHeroIdList:function(){for(var e=[],t=0;t<this.getHeroData().battleList.length;t++)e.push(this.getHeroData().battleList[t]);return e},getAllUnlockList:function(e){for(var t=Object.keys(this.getHeroData().heroMap),i=[],a=0;a<t.length;a++){var n=parseInt(t[a]);i.push(n)}return e&&this.getBattlePioneerHero()&&0<=(e=i.indexOf(parseInt(this.getBattlePioneerHero())))&&i.splice(e,1),i},getHeroGeneralExp:function(){return new i.BigNumber(this.getHeroData().heroGeneralExp)},addHeroGeneralExp:function(e,t,a){!e||e<=0||(this.getHeroData().heroGeneralExp=this.getHeroGeneralExp().plus(e).toFixed(0),i.player.commonModule.addTodayAddHeroExpCount(e),this.saveHeroData(!0),t&&i.gameScene.mainTopNodeObj.checkFlyEffect(i.constant.COIN_TYPE_HERO_EXP,e),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_HERO_RED),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_HERO_MAIN_RED),i.BI.onEvent(i.biConstant.EVENT_TYPE_EXP_DROP,i.biConstant.EVENT_ID_EXP_DROP_BASE+a,e))},subHeroGeneralExp:function(e,t){!e||e<=0||(this.getHeroData().heroGeneralExp=this.getHeroGeneralExp().minus(e).toFixed(0),this.getHeroGeneralExp().comparedTo(0)<0&&(this.getHeroData().heroGeneralExp=new i.BigNumber(0).toFixed(0)),i.player.commonModule.addTodayCostHeroExpCount(e),this.saveHeroData(!0),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_HERO_RED),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_HERO_MAIN_RED),t=t||i.constant.ITEM_CONSUME_SOURCE_DEFAULT,i.BI.onEvent(i.biConstant.EVENT_TYPE_EXP_CONSUME,i.biConstant.EVENT_ID_EXP_CONSUME_BASE+t,e))},checkHeroGeneralExpEnough:function(e){return!(!e||e<=0)&&0<=this.getHeroGeneralExp().comparedTo(e)},setBattlePioneerHero:function(e){this.getHeroData().pioneerHero=e,this.saveHeroData(),i.eventBus.dispatchEvent(i.GameEventType.REFRESH_HANGUP_SPINE_INFO)},getBattlePioneerHero:function(){return this.getHeroData().pioneerHero},setBattleAdPioneerHero:function(e){this.getHeroData().adPioneerHero=e,this.saveHeroData()},getBattleAdPioneerHero:function(){return this.checkAdPioneerHeroTimeOut(),this.getHeroData().adPioneerHero},checkSingleCanUnlockRed:function(e){return!this.isHeroUnlock(e)&&!!(e=i.templateManager.getHeroCardDataByHeroId(e))&&i.player.itemModule.checkHeroPieceEnough(e.id,e.cardNum)},checkAllCanUnlockRed:function(){for(var e=!1,t=i.JsonData.Hero,a=0;a<t.length;a++){var n=t[a];if(this.checkSingleCanUnlockRed(n.id)){e=!0;break}}return e},checkSingleOtherRed:function(e,t){if(!this.isHeroUnlock(e))return!1;if(this.isHeroMaxQuality(e)&&this.isHeroMaxLevel(e))return!1;var a=this.getHeroLevel(e),n=this.getHeroQuality(e);if(!i.templateManager.getHeroDataById(e))return!1;if(!this.isHeroMaxLevel(e)){var o=i.templateManager.getHeroLevelDataByLevel(e,a);if(o.type==i.constant.HERO_UP_LEVEL_TYPE_LEVEL){if(this.checkHeroGeneralExpEnough(o.expend))return!0}else if(o.type==i.constant.HERO_UP_LEVEL_TYPE_BREAK){if(t)return!0;if(this.getHeroCdLastTime(e)<=0)return!0}else if(o.type==i.constant.HERO_UP_LEVEL_TYPE_STAR&&i.player.playerModule.isGoldBullionEnough(o.expend))return!0}return!(this.isHeroMaxQuality(e)||(o=i.templateManager.getHeroStarDataByHeroStar(e,n),n=i.templateManager.getHeroCardDataByHeroId(e),!(o&&n&&this.getCanUpQuality(e)&&i.player.itemModule.checkHeroPieceEnough(n.id,o.cardsNum))))},checkAdPioneerHeroRed:function(){var e=0<i.player.vipModule.getVipOutVanNum(),t=null!=this.getBattleAdPioneerHero(),a=this.getAlreadyUnlockHeroList(null,!0);return e&&!t&&0<a.length},checkAllOtherRed:function(e){var t,i=!1;for(t in this.getHeroData().heroMap)if(this.checkSingleOtherRed(t,e)){i=!0;break}return i||this.checkAdPioneerHeroRed()},getHeroBiEventId:function(e,t){return(t=i.templateManager.getHeroDataById(t))?parseInt(e)+t.pointNumer:e},putTodayUnlockHero:function(e){0<=this.getHeroData().todayUnlock.indexOf(e)||(this.getHeroData().todayUnlock.push(e),this.saveHeroData())},getTodayUnlockHeros:function(){return this.getHeroData().todayUnlock},getCanHangUpBattleHeros:function(){var e=[],t=this.getAllUnlockList();if(t.length<=0)return e;var a=this.getBattlePioneerHero();if(!a)return e;e.push(a),this.removeListItem(t,a);for(var n=this.getTodayUnlockHeros(),o=[],s=0;s<n.length;s++){var r=n[s];o.push([this.getHeroLevel(r),r])}o.sort(function(e,t){return t[0]-e[0]});for(var c=0;c<o.length;c++){var l=o[c][1];if(!(0<=e.indexOf(l))&&(e.push(l),this.removeListItem(t,l),e.length>=i.templateManager.getGameParamValue("hangUpSoldierMaxNum")))return e}for(var d=[],h=0;h<t.length;h++){var u=t[h];d.push([this.getHeroLevel(u),u])}d.sort(function(e,t){return t[0]-e[0]});for(var p=0;p<d.length&&(e.push(d[p][1]),!(e.length>=i.templateManager.getGameParamValue("hangUpSoldierMaxNum")));p++);return e},removeListItem:function(e,t){(t=e.indexOf(parseInt(t)))<0||e.splice(t,1)},baseGayFriendData:function(){return{level:"1"}},getGayFriendIsUnlock:function(e){return 0<this.getGayFriendLevel(e)},getGayFriendLevel:function(e){return this.getHeroData().heroGayFriend.hasOwnProperty(e)?parseInt(this.getHeroData().heroGayFriend[e].level):-1},addGayFriendLevel:function(e,t,a){var n=this.getHeroData().heroGayFriend;if(!n.hasOwnProperty(e))return n[e]=this.baseGayFriendData(),this.saveHeroData(),t||(i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_RESTRAIN)&&(i.gameScene.closePage(i.pageConstant.PAGE_TYPE_MAIN_HERO_DETAIL),t={groupId:e,type:i.constant.ENTER_NEW_RESTRAIN_TYPE_UNLOCK},i.gameScene.showPage(i.pageConstant.PAGE_TYPE_HERO_GAY_FRIEND_UNLOCK,t)),i.player.broadcastModule.uploadBroadcastData(i.constant.BROADCAST_TYPE_UNLOCK_RESTRAIN,e)),i.BI.onEvent(i.biConstant.EVENT_TYPE_GAY_FRIEND_UNLOCK,i.biConstant.EVENT_ID_GAY_FRIEND_UNLOCK,e),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_HERO_MAIN_RED),void i.eventBus.dispatchEvent(i.GameEventType.UPDATE_HERO_GAYFRIEND_RED);a||(n[e].level=this.getGayFriendLevel(e)+1+"",i.eventBus.dispatchEvent(i.GameEventType.UPDATE_HERO_MAIN_RED),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_HERO_GAYFRIEND_RED)),this.saveHeroData()},getAllUnlockGayFriendList:function(){return Object.keys(this.getHeroData().heroGayFriend)},getAllGayFriendList:function(){var e=this,t=i.templateManager.getHeroRestrainGroupIdList().concat([]);return t.sort(function(t,i){return e.getGayFriendLevel(i)-e.getGayFriendLevel(t)}),t},getNoBattleGayFriendList:function(){var e,t=[];for(e in this.getHeroData().heroGayFriend)this.getFightGayFriend()!=e&&this.getFightAdGayFriend()!=e&&t.push(e);var i=this;return t.sort(function(e,t){return i.getGayFriendLevel(t)-i.getGayFriendLevel(e)}),t},checkGayFriendUpByHero:function(e){for(var t=i.templateManager.getHeroRestrainGroupIdListByHeroId(e),a=0;a<t.length;a++){var n=t[a];this.checkCanGayFriendLevelUp(n)}i.eventBus.dispatchEvent(i.GameEventType.UPDATE_HERO_MAIN_RED),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_HERO_GAYFRIEND_RED)},haveCanLevelUpGayFriend:function(){for(var e=i.templateManager.getHeroRestrainGroupIdList(),t=0;t<e.length;t++)if(this.checkCanGayFriendLevelUp(e[t]))return e[t];return this.checkAdGayFriendRed()},checkAdGayFriendRed:function(){var e=0<i.player.vipModule.getVipGayFirendNum(),t=0<i.player.heroModule.getFightAdGayFriend(),a=i.player.heroModule.getNoBattleGayFriendList();return e&&!t&&0<a.length},checkCanGayFriendLevelUp:function(e){if(!this.gayFriendIsMaxLevel(e)){var t=!0,a=this.getNextGayFriendCondition(e);if(e=i.templateManager.getHeroRestrainListByGroupId(e)){for(var n=e[0].heroList,o=0;o<n.length;o++){for(var s=n[o],r=!1,c=0;c<s.length;c++){var l=s[c],d=(this.isHeroUnlock(l),this.getHeroLevel(l));if(this.isHeroUnlock(l)&&!(d<a)){r=!0;break}}if(!r){t=!1;break}}return t}i.Logger.error(" hero restrain not find !")}},getNextGayFriendCondition:function(e){var t=i.templateManager.getHeroRestrainListByGroupId(e);return((e=this.getGayFriendLevel(e))<0?t[0]:e>=t.length?t[t.length-1]:t[e]).openLevel[1]},getUnlockGayFriendCondition:function(e){return(e=i.templateManager.getHeroRestrainListByGroupId(e))?e[0].openLevel[1]:-1},gayFriendIsMaxLevel:function(e){if(!e)return!0;var t=i.templateManager.getHeroRestrainListByGroupId(e).length;return this.getGayFriendLevel(e)>=t},getGayFriendHeroUnlockNum:function(e){var t=this.getUnlockGayFriendCondition(e);if(-1===t)return 0;for(var a=0,n=i.templateManager.getHeroRestrainListByGroupId(e)[0].heroList,o=0;o<n.length;o++)for(var s=n[o],r=0;r<s.length;r++){var c=s[r],l=this.getHeroLevel(c);if(this.isHeroUnlock(c)&&t<=l){a+=1;break}}return a},getFightGayFriend:function(){return parseInt(this.getHeroData().fightGayFriend)},setFightGayFriend:function(e){this.getHeroData().fightGayFriend=e,this.saveHeroData()},getFightAdGayFriend:function(){return this.checkAdFightGayFriendTimeOut(),parseInt(this.getHeroData().fightAdGayFriend)},getCanRandomGayFriend:function(e){var t=Object.keys(this.getHeroData().heroGayFriend),i=t.indexOf(this.getFightGayFriend()+"");return 0<=i&&t.splice(i,1),0==t.length||e||0<this.getFightAdGayFriend()&&0<=(e=t.indexOf(this.getFightAdGayFriend()+""))&&t.splice(e,1),t},resetFightAdGayFriend:function(e){if(e)return this.getHeroData().fightAdGayFriend=e,this.saveHeroData(),this.setTodayIntoGayFriend(!1),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_HERO_GAYFRIEND_ITEM),void i.Logger.debug("resetFightAdGayFriend: "+e);var t=this.getCanRandomGayFriend();0!=t.length&&(e=i.Utils.getRandomInt(0,t.length-1),this.getHeroData().fightAdGayFriend=t[e],this.saveHeroData())},getAllBattleGayFriend:function(){var e=[],t=this.getFightGayFriend();return 0<t&&e.push(t),0<(t=this.getFightAdGayFriend())&&e.push(t),e},getRestrainLevelById:function(e){return(e=this.getGayFriendLevel(e))<0?0:e},getRestrainSkillList:function(e){var t=i.templateManager.getHeroRestrainListByGroupId(e);if(!t)return[];var a=this.getRestrainLevelById(e);if(a<=0)return[];var n=a;3<a&&(n=3);for(var o=[],s=0;s<n;s++)o.push(t[a-1-s].id);return o},getGayFriendSkillDescArgs:function(e){for(var t=[],a=0;a<e.length;a++){var n,o=null,s="";switch(e[a][0]){case i.constant.RESTRAIN_ATTR_TYPE_BARRACK:t.push(Math.abs(e[a][1]));break;case i.constant.RESTRAIN_ATTR_TYPE_HP_BACK:case i.constant.RESTRAIN_ATTR_TYPE_SKILL_CD:case i.constant.RESTRAIN_ATTR_TYPE_SPECIAL_HURT:case i.constant.RESTRAIN_ATTR_TYPE_HERO_REVIVE:case i.constant.RESTRAIN_ATTR_TYPE_SUNDER_ARMOR:t.push(Math.abs(e[a][1]/100));break;case i.constant.RESTRAIN_ATTR_TYPE_ENEMY_WEAK:case i.constant.RESTRAIN_ATTR_TYPE_REVIVE_TIME:t.push(Math.abs(e[a][2]/100));break;case i.constant.RESTRAIN_ATTR_TYPE_TOWER_STRONG:var r;o=i.templateManager.getNatureDataById(e[a][3]),s=i.lang.getGameText(o.name),-1===e[a][1]?t.push("",s,Math.abs(e[a][4]/100)):(r=i.templateManager.getTowerTypeById(e[a][1]),t.push(i.lang.getGameText(r.name),s,Math.abs(e[a][4]/100)));break;case i.constant.RESTRAIN_ATTR_TYPE_BATTLE_HERO:o=i.templateManager.getNatureDataById(e[a][1]),s=i.lang.getGameText(o.name),-1===e[a][3]?t.push(s,e[a][2]/100):2!==e[a][4]&&(r=i.templateManager.getHeroDataById(e[a][3]),t.push(i.lang.getGameText(r.name),s,Math.abs(e[a][2]/100)));break;case i.constant.RESTRAIN_ATTR_TYPE_HERO_TOWER:o=i.templateManager.getNatureDataById(e[a][1]),s=i.lang.getGameText(o.name),n=i.templateManager.getTowerDataById(e[a][3]),t.push(i.lang.getGameText(n.name),s,Math.abs(e[a][2]/100))}}return t},getAttrName:function(e){switch(e[0]){case i.constant.RESTRAIN_ATTR_TYPE_BARRACK:return[e[1]];case i.constant.RESTRAIN_ATTR_TYPE_HP_BACK:case i.constant.RESTRAIN_ATTR_TYPE_ENEMY_WEAK:return[e[2]/100];case i.constant.RESTRAIN_ATTR_TYPE_TOWER_STRONG:var t=i.templateManager.getNatureDataById(e[3]);return[i.lang.getGameText(t.name)];case i.constant.RESTRAIN_ATTR_TYPE_BATTLE_HERO:var a=i.templateManager.getNatureDataById(e[1]);return[i.lang.getGameText(a.name)];case i.constant.RESTRAIN_ATTR_TYPE_HERO_TOWER:return a=i.templateManager.getNatureDataById(e[1]),[i.lang.getGameText(a.name)]}},getGayFriendBiEventId:function(e,t){return parseInt(e)+parseInt(t)},removeCacheUnlockGayFriend:function(e){(e=this.getHeroData().cacheUnlockGayFriend.indexOf(parseInt(e)))<0||(this.getHeroData().cacheUnlockGayFriend.splice(e,1),this.saveHeroData())},getTodayIntoGayFriend:function(){return this.getHeroData().todayIntoGayFriend},setTodayIntoGayFriend:function(e){this.getHeroData().todayIntoGayFriend=e,this.saveHeroData()},heroPieceChange:function(){var e,t=[],a=[],n=[];for(e in this.getHeroData().heroMap){var o,s=i.templateManager.getHeroCardDataByHeroId(e).id;t.push(s),this.isHeroMaxQuality(e)?a.push(s):(o=this.getHeroMaxQualityNeedPiece(e),(i.player.itemModule.getHeroPieceNumById(s)>=o?a:n).push(s))}var r=t;return i.templateManager.getGameParamValue("conversionFullQualityProbability")>i.Utils.getRandomInt(0,1e4)?0<a.length&&(r=a):0<n.length&&(r=n),0==r.length?3001:(r=r[i.Utils.getRandomInt(0,r.length-1)],i.player.itemModule.dropItem(r,1,!1,i.constant.ITEM_ADD_SOURCE_PIECE_CHANGE),r)},getHeroMaxQualityNeedPiece:function(e){for(var t=0,a=this.getHeroQuality(e);a<i.templateManager.getHeroStarLenByHeroId(e);a++)t+=i.templateManager.getHeroStarDataByHeroStar(e,a).cardsNum;return t},getHeroDefendInfo:function(e){var t=this.getHeroLevel(e);this.getHeroData().heroDefendInfo.hasOwnProperty(e)||this.setHeroDefendInfo(e);var a=this.getHeroData().heroDefendInfo[e],n=i.templateManager.getDefendDataById(a);return t<n.minLevel||t>n.maxLevel?this.setHeroDefendInfo(e):a},setHeroDefendInfo:function(e){var t=this.getHeroLevel(e);if(!(t<0))return t=i.templateManager.getDefendLevelList(t),t=i.Utils.getRandomKeyByValue(t),this.getHeroData().heroDefendInfo[e]=t.id,this.saveHeroData(),t.id},getHeroExpNum:function(e){return(e=this.getHeroBaseDataById(e))?e.heroExp?(e=e.heroExp,new i.BigNumber(e)):(e.heroExp="0",this.saveHeroData(),new i.BigNumber("0")):new i.BigNumber("0")},addHeroExp:function(e,t){(e=this.getHeroBaseDataById(e))&&(e.heroExp||(e.heroExp="0",this.saveHeroData()),e.heroExp=new i.BigNumber(e.heroExp).plus(t).toFixed(0),this.saveHeroData())},cleanHeroExp:function(e){(e=this.getHeroBaseDataById(e))&&(e.heroExp="0",this.saveHeroData())},heroExpCanUpLevel:function(e,t){t=t.plus(this.getHeroExpNum(e));for(var a=this.getHeroLevel(e),n=i.templateManager.getHeroMaxLevelById(e),o=0,s=!1,r=a;r<n;r++){var c=i.templateManager.getHeroLevelDataByLevel(e,r);if(c.type!=i.constant.HERO_UP_LEVEL_TYPE_LEVEL){s=!0;break}if(t.comparedTo(c.expend)<0)break;t=t.minus(c.expend),o+=1}return[o,t,s]},checkHeroErrorData:function(){i.Logger.debug("checkHeroData start !!!"),this.checkHeroExpValue()},checkHeroExpValue:function(){var e=Number(i.player.commonModule.getHangUpReceiveExp(36e4).toFixed(0)),t=i.player.commonModule.getRegisterDay(),a=i.player.commonModule.getTodayAddHeroExpCount(),n=Number(this.getHeroGeneralExp().toFixed(0));t=t*e+i.templateManager.getGameParamValue("baseHeroExp"),(e<a||t<n)&&(i.BI.onEvent(i.biConstant.EVENT_TYPE_ERROR,i.biConstant.EVENT_ID_ERROR_FIX_DATA_USER,i.player.playerModule.getPlayerId()+"#"+i.biConstant.EVENT_ID_ERROR_TYPE_HERO_EXP),i.BI.onEvent(i.biConstant.EVENT_TYPE_ERROR,i.biConstant.EVENT_ID_ERROR_FIX_DATA_INFO,i.player.playerModule.getPlayerId()+"#"+i.biConstant.EVENT_ID_ERROR_TYPE_HERO_EXP+"#"+a+"#"+n+"#"+e+"#"+t)),a=i.player.commonModule.getTodayCostHeroExpCount(),n=i.player.commonModule.getTotalCostHeroExpCount(),((e+=i.templateManager.getGameParamValue("baseHeroExp"))<a||t<n)&&(i.BI.onEvent(i.biConstant.EVENT_TYPE_ERROR,i.biConstant.EVENT_ID_ERROR_FIX_DATA_USER,i.player.playerModule.getPlayerId()+"#"+i.biConstant.EVENT_ID_ERROR_TYPE_COST_HERO_EXP),i.BI.onEvent(i.biConstant.EVENT_TYPE_ERROR,i.biConstant.EVENT_ID_ERROR_FIX_DATA_INFO,i.player.playerModule.getPlayerId()+"#"+i.biConstant.EVENT_ID_ERROR_TYPE_COST_HERO_EXP+"#"+a+"#"+n+"#"+e+"#"+t))},getHeroPowerValue:function(e,t,a){return(t=i.templateManager.getHeroLevelDataByLevel(e,t))?(e=i.templateManager.getHeroStarDataByHeroStar(e,a),a=0,e&&(a=e.power),Math.floor((1e4+a)/1e4*t.powerValue)):0},addHeroDefendMinute:function(e,t){(e=this.getHeroBaseDataById(e))&&(e.todayDefendMinute||(e.todayDefendMinute=0),e.todayDefendMinute+=t,this.saveHeroData())},getTodayCanDefend:function(e){var t=this.getHeroBaseDataById(e);return!!t&&(t.todayDefendMinute||(t.todayDefendMinute=0),e=1440+i.templateManager.getGameParamValue("defendSpeedTime")*i.templateManager.getGameParamValue("defendSpeedTimes"),t.todayDefendMinute<=e)},getAdPioneerHeroTime:function(){return parseInt(this.getHeroData().adPioneerHeroTime)},setAdPioneerHeroTime:function(e){this.getHeroData().adPioneerHeroTime=e?"-1":i.timeUtil.getSecond()+"",this.saveHeroData()},getAdPioneerHeroAddTimes:function(){return parseInt(this.getHeroData().adPioneerHeroAddTimes)},addAdPioneerHeroAddTimes:function(){this.getAdPioneerHeroTime()<=0&&this.setAdPioneerHeroTime(),this.getHeroData().adPioneerHeroAddTimes=this.getAdPioneerHeroAddTimes()+1+"",this.saveHeroData()},getAdPioneerHeroAddSecond:function(){return this.getAdPioneerHeroAddTimes()*i.templateManager.getGameParamValue("secondHeroAdHours")*i.timeUtil.ONE_HOUR_SECOND},checkCanAddAdPioneerHeroTimes:function(){return this.getAdPioneerHeroTime()<=0||this.getAdPioneerHeroTime()+this.getAdPioneerHeroAddSecond()-i.timeUtil.getSecond()<=i.timeUtil.ONE_DAY_SECOND},getLastAdPioneerHeroTime:function(){if(this.getAdPioneerHeroTime()<=0)return this.resetAdPioneerHeroTimeOutInfo(),-1;var e=i.timeUtil.getSecond();return(e=this.getAdPioneerHeroTime()+this.getAdPioneerHeroAddSecond()-e)<=0&&this.resetAdPioneerHeroTimeOutInfo(),e},checkAdPioneerHeroTimeOut:function(){this.getLastAdPioneerHeroTime()},resetAdPioneerHeroTimeOutInfo:function(){var e=!1;0<this.getAdPioneerHeroTime()&&this.setAdPioneerHeroTime(!0),0<this.getAdPioneerHeroAddTimes()&&(this.getHeroData().adPioneerHeroAddTimes="0",e=!0),this.getHeroData().adPioneerHero&&(this.setBattleAdPioneerHero(null),e=!0),e&&(i.eventBus.dispatchEvent(i.GameEventType.UPDATE_HERO_VAN),this.saveHeroData())},getFightAdGayFriendTime:function(){return parseInt(this.getHeroData().fightAdGayFriendTime)},setFightAdGayFriendTime:function(e){this.getHeroData().fightAdGayFriendTime=e?"-1":i.timeUtil.getSecond()+"",this.saveHeroData()},getFightAdGayFriendAddTimes:function(){return this.getHeroData().fightAdGayFriendAddTimes,parseInt(this.getHeroData().fightAdGayFriendAddTimes)},addFightAdGayFriendAddTimes:function(){this.getFightAdGayFriendTime()<=0&&this.setFightAdGayFriendTime(),this.getHeroData().fightAdGayFriendAddTimes=this.getFightAdGayFriendAddTimes()+1+"",this.saveHeroData()},getFightAdGayFriendAddSecond:function(){return this.getFightAdGayFriendAddTimes()*i.templateManager.getGameParamValue("secondHeroAdHours")*i.timeUtil.ONE_HOUR_SECOND},checkCanAddFightAdGayFriendTimes:function(){return this.getFightAdGayFriendTime()<=0||this.getFightAdGayFriendTime()+this.getFightAdGayFriendAddSecond()-i.timeUtil.getSecond()<=i.timeUtil.ONE_DAY_SECOND},getLastAdFightGayFriendTime:function(){if(this.getFightAdGayFriendTime()<=0)return this.resetAdFightGayFriendOutInfo(),-1;var e=i.timeUtil.getSecond();return(e=this.getFightAdGayFriendTime()+this.getFightAdGayFriendAddSecond()-e)<=0&&this.resetAdFightGayFriendOutInfo(),e},checkAdFightGayFriendTimeOut:function(){this.getLastAdFightGayFriendTime()},resetAdFightGayFriendOutInfo:function(){var e=!1;0<this.getFightAdGayFriendTime()&&this.setFightAdGayFriendTime(!0),0<this.getFightAdGayFriendAddTimes()&&(this.getHeroData().fightAdGayFriendAddTimes="0",e=!0),0<parseInt(this.getHeroData().fightAdGayFriend)&&(this.resetFightAdGayFriend(-1),e=!0),e&&(i.eventBus.dispatchEvent(i.GameEventType.UPDATE_HERO_VAN),this.saveHeroData())},getHeroTryCount:function(e){return this.getHeroData().heroTryMap[e]||(this.getHeroData().heroTryMap[e]=0),this.getHeroData().heroTryMap[e]},addHeroTryCount:function(e){this.getHeroData().heroTryMap[e]||(this.getHeroData().heroTryMap[e]=0),this.getHeroData().heroTryMap[e]++,this.saveHeroData()},setOneKeyHero:function(e,t,a){this.isHeroUnlock(t)&&(this.getAlreadyHaveHeroNum()<e||e>i.player.instanceModule.getMaxChapter()||(delete this.getHeroData().oneKeyHeroMap[a],this.getHeroData().oneKeyHeroMap[t]=e,this.saveHeroData()))}}),cc._RF.pop()},{}],HeroTowerUnlockPage:[function(e,t){"use strict";cc._RF.push(t,"96bf2jBfNtFo7uO8tPRVLQZ","HeroTowerUnlockPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.SHOW_AD_OVER_TOWER_ACTIVE,function(){e.onShowAdOver()})},onLoadPage:function(){this.titleLabelNode=cc.find("content/title/label",this.node),this.wakeTitleLabelNode=cc.find("content/title/wakeLabel",this.node),this.nameLabel=cc.find("content/name",this.node).getComponent(cc.Label),this.towerSpine=cc.find("content/tower/spine",this.node).getComponent(sp.Skeleton),this.towerHeroNode=cc.find("content/tower/hero",this.node),this.towerHeroSpine=cc.find("content/tower/hero/heroSpine",this.node).getComponent(sp.Skeleton),this.skillIcon=cc.find("content/introduce/skill",this.node).getComponent(cc.Sprite),this.skillNameLabel=cc.find("content/introduce/skillName",this.node).getComponent(cc.Label),this.skillDescLabel=cc.find("content/introduce/describe",this.node).getComponent(cc.Label),this.buttonNode=cc.find("content/button",this.node),this.wakeButtonNode=cc.find("content/wake",this.node),this.closeBtnNode=cc.find("content/close",this.node),this.decorationNode=cc.find("content/decoration",this.node),this.levelLabel=cc.find("content/level",this.node).getComponent(cc.Label),this.levelLabel.node.active=!1},showPageBegan:function(){this._type=this.data.type,this._heroId=this.data.heroId,this.activeCallBack=this.data.activeCallBack,this.destroyCallBack=this.data.destroyCallBack,this._type==i.constant.TOWER_UNLOCK_PAGE_UNLOCK?(this.titleLabelNode.active=!0,this.wakeTitleLabelNode.active=!1,this.buttonNode.active=!0,this.wakeButtonNode.active=!1,this.closeBtnNode.active=!1,this.decorationNode.active=!0):(this.titleLabelNode.active=!1,this.wakeTitleLabelNode.active=!0,this.buttonNode.active=!1,this.wakeButtonNode.active=!0,this.closeBtnNode.active=!0,this.decorationNode.active=!1),this.heroCfg=i.templateManager.getHeroDataById(this._heroId),this.soldierCfg=i.templateManager.getSoldierDataById(this._heroId),this.towerCfg=i.templateManager.getTowerDataByHeroId(this._heroId),this.towerTypeCfg=i.templateManager.getTowerTypeById(this.towerCfg.typeID);var e=i.templateManager.getHeroStarDataByHeroStar(this._heroId,1).inSkill[0][0],t=i.templateManager.getHeroSkillDataById(e);this.skillIcon.node.active=!1;var a=this;e=i.player.commonModule.isLowIosDevice()?"textures/skill/skill_small":"textures/skill/skill",this.skillAtlas?(a.skillIcon.node.active=!0,a.skillIcon.spriteFrame=a.skillAtlas.getSpriteFrame(t.icon.split("/")[1])):cc.loader.loadRes(e,cc.SpriteAtlas,function(e,i){e?cc.error(e):(a.skillAtlas=i,a.skillIcon.node.active=!0,a.skillIcon.spriteFrame=a.skillAtlas.getSpriteFrame(t.icon.split("/")[1]))}),this.skillNameLabel.string=i.lang.getGameText(t.skillName),this.skillDescLabel.string=i.lang.getGameText(t.desc),i.lang.updateLabelString(this.nameLabel,[this.towerCfg.level,i.lang.getGameText(this.towerTypeCfg.name),i.lang.getGameText(this.heroCfg.name)]),this.levelLabel.node.active=!1,this.updateTowerSpine()},showPageEnded:function(){},updateTowerSpine:function(){var e,t,a=this,n=i.constant.SPINE_PATH_TOWER+this.towerCfg.appearance;this.towerSpine.node.active=!1,i.battleScene.getSpineData(n,function(e){e?(i.Logger.debug("hero spine success spineUrl = "+n),a.towerSpine.node.active=!0,a.towerSpine.skeletonData=e,a.towerSpine.premultipliedAlpha=a.towerTypeCfg.isPremultipliedAlpha,a.towerSpine.clearTrack(0),a.towerSpine.setAnimation(0,a.towerTypeCfg.actionName,!0)):i.Logger.debug("error spineUrl = "+n)}),this.towerTypeCfg.id!=i.constant.TOWER_TYPE_BARRACK?(this.towerHeroSpine.node.active=!0,e=this.towerSpine.node.scale/.36,this.towerTypeCfg.id==i.constant.TOWER_TYPE_CANNON?this.towerHeroNode.setPosition(cc.v2(-50/.36*this.towerSpine.node.scale,0)):this.towerTypeCfg.id==i.constant.TOWER_TYPE_MAGIC?this.towerHeroNode.setPosition(cc.v2(0,40/.36*this.towerSpine.node.scale)):this.towerHeroNode.setPosition(cc.v2(0,30/.36*this.towerSpine.node.scale)),this.towerHeroSpine.node.scale=this.soldierCfg.intoAppearance?1/1.7*e:this.soldierCfg.scaling/1e4*.9*e,e=this.soldierCfg.intoAppearance||this.soldierCfg.appearance,t=i.constant.SPINE_PATH_HERO+e,i.Logger.debug("hero spineUrl = "+t),this.towerHeroSpine.node.active=!1,i.battleScene.getSpineData(t,function(e){e?(i.Logger.debug("hero spine success spineUrl = "+t),a.towerHeroSpine.node.active=!0,a.towerHeroSpine.skeletonData=e,a.towerHeroSpine.premultipliedAlpha=0<a.soldierCfg.isChangePremultipliedAlpha,a.towerHeroSpine.setAnimation(0,a.towerCfg.heroDefaultAction,!0)):i.Logger.debug("error spineUrl = "+t)})):this.towerHeroSpine.node.active=!1},onClickDestroy:function(){this.destroyCallBack&&this.destroyCallBack(),this.closePage()},onClickActive:function(){i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,i.GameEventType.SHOW_AD_OVER_TOWER_ACTIVE)},onShowAdOver:function(){this.activeCallBack&&this.activeCallBack(),this.closePage()},onClickClose:function(){this.closePage()},closePageEnded:function(){this.skillAtlas&&i.player.commonModule.isLowIosDevice()&&(cc.loader.release(cc.loader.getDependsRecursively(this.skillAtlas)),this.skillAtlas=null),this._type==i.constant.TOWER_UNLOCK_PAGE_UNLOCK&&i.battleScene.checkStartPopUp(),i.battleScene.checkStartPopUp()}}),cc._RF.pop()},{}],HotUpdateScene:[function(e,t){"use strict";cc._RF.push(t,"5abfeUQvtlGea8SCN/BgXLN","HotUpdateScene");var i=e("Aft");cc.Class({extends:cc.Component,properties:{loadingPagePrefab:{type:cc.Prefab,default:null},manifestUrl:{type:cc.Asset,default:null},_updating:!1,_canRetry:!1,_storagePath:"",_startHotUpdate:!1},show:function(){},start:function(){},onLoad:function(){i.nativeManager.isPad()&&(this.node.getComponent(cc.Canvas).fitHeight=!0),i.lang.init("zh"),i.StorageUtil.init(),i.Logger.init(i.config.LOGGER_LEVEL),this.initWebDeviceId(),this.checkLoadTableData(),this.loadingTime_100=-1,this.restoreProportion=.05,this.checkUpdateProportion=.01,this.updateProportion=.1,this.goToMainProportion=this.restoreProportion+this.checkUpdateProportion+this.updateProportion,this.loadSceneProgress=0,this.loadFinish=!1,this.fakeProgressTime=.02,this.curFakeProgressTime=1,this.checkUpdateTime=5,this.state=i.constant.LOAD_STATE_START,this.flushStatus=0,this.initLoadPage(),this.loadImgAtlas(),cc.sys.isNative?(this.initHotUpdate(),this.flushStatus=1):i.config.isHotUpdate=!1,this.changeLoadState(i.constant.LOAD_STATE_RESTORE_DATA)},startLoadSubpackage:function(){console.log("startLoadSubpackage");var e=this;e.isLoadTemplateOver=!0,cc.loader.downloader.loadSubpackage("script_ui",function(t){return t?(console.error(t),void e.startLoadSubpackage()):(e.isLoadUIOver=!0,console.log("load subpackage successfully script_ui"),void e.checkSubpackageOver())})},checkSubpackageOver:function(){console.log("checkSubpackageOver this.isLoadTemplateOver = "+this.isLoadTemplateOver+" this.isLoadUIOver = "+this.isLoadUIOver),this.isLoadTemplateOver&&this.isLoadUIOver&&(this.isLoadTableOver=!0,this.goToMainScene())},checkLoadTableData:function(){var e=this;i.config.isLoadTableData?function(){i.JsonData.Wellen=[],i.JsonData.HeroSkill=[],i.JsonData.WellenNature=[],i.JsonData.HeroSkillLevel=[],i.JsonData.HeroLevel=[],i.JsonData.Instance=[],i.JsonData.TowerStarLevel=[],i.JsonData.Enemy=[];var t=["scripts/json/Wellen","scripts/json/HeroSkill","scripts/json/WellenNature","scripts/json/HeroSkillLevel","scripts/json/HeroLevel","scripts/json/Instance","scripts/json/TowerStarLevel","scripts/json/Enemy"],a=e,n=t.length,o=0;a.isLoadTableOver=!1;for(var s=0;s<n;s++)!function(e){cc.loader.loadRes(t[e],function(t,s){if(t)return console.error("load script error"),cc.error(t),void a.checkLoadTableData();switch(e){case 0:i.JsonData.Wellen=s.json;break;case 1:i.JsonData.HeroSkill=s.json;break;case 2:i.JsonData.WellenNature=s.json;break;case 3:i.JsonData.HeroSkillLevel=s.json;break;case 4:i.JsonData.HeroLevel=s.json;break;case 5:i.JsonData.Instance=s.json;break;case 6:i.JsonData.TowerStarLevel=s.json;break;case 7:i.JsonData.Enemy=s.json}o++,i.Logger.debug("load script success = "+JSON.stringify(s.json[0])),o===n&&(a.isLoadTableOver=!0,i.templateManager.init(),i.Logger.debug("\u9759\u6001\u6570\u636e\u521d\u59cb\u5316"),a.checkMainSceneLoadOver())})}(s)}():(this.isLoadTableOver=!0,i.templateManager.init(),this.checkMainSceneLoadOver())},initHotUpdate:function(){},initLoadPage:function(){i.loadingPage=cc.instantiate(this.loadingPagePrefab),this.node.addChild(i.loadingPage),this.healthTipNode=cc.find("health",i.loadingPage),i.config.healthTipOpen?this.healthTipNode.active=!0:this.healthTipNode.active=!1,this.loadingBarNode=cc.find("Loading/LoadingProgressBar",i.loadingPage),this.labelProgressNode=cc.find("Loading/Label",i.loadingPage),this.loadingBar=cc.find("Loading/LoadingProgressBar",i.loadingPage).getComponent(cc.ProgressBar),this.labelProgress=cc.find("Loading/Label",i.loadingPage).getComponent(cc.Label),this.progress=0,this.loadingBar.progress=this.progress,this.labelProgress.string=(100*this.progress).toFixed(1)+"%",this.loadLabel=cc.find("Label",i.loadingPage).getComponent(cc.Label),this.loadLabel.string="\u8d26\u53f7\u68c0\u6d4b",this.versionLabel=cc.find("version/num",i.loadingPage).getComponent(cc.Label),this.versionLabel.string=i.config.version,this.bgIcon=cc.find("Bg",i.loadingPage),this.bgFirstIcon=cc.find("BgFirst",i.loadingPage),this.errorTips=cc.find("errorTips",i.loadingPage),this.errorTips.active=!1,i.isSecondEnter?(this.bgIcon.active=!0,this.bgFirstIcon.active=!1,i.Logger.debug("\u518d\u6b21\u8fdb\u6765 \u7528\u52a8\u6001\u52a0\u8f7d\u7684\u80cc\u666f")):(i.isSecondEnter=!0,this.bgIcon.active=!1,this.bgFirstIcon.active=!0,i.Logger.debug("\u7b2c\u4e00\u6b21\u8fdb\u6765\u7528\u9759\u6001\u52a0\u8f7d\u7684\u80cc\u666f"))},loadImgAtlas:function(){i.loadAtlas=null;var e=this;cc.loader.loadRes("textures/loading/loading",cc.SpriteAtlas,function(t,a){return t?(cc.error(t),void e.loadImgAtlas()):(i.Logger.debug("loadRes over loadImgAtlas"),i.loadAtlas=a,void e.checkImgSprite())})},checkImgSprite:function(){var e,t;i.loadingPage&&i.loadingPage.active&&(e=cc.find("Bg",i.loadingPage).getComponent(cc.Sprite),t=i.loadAtlas.getSpriteFrame("loading_bg_big"),e.spriteFrame=t,e=cc.find("title",i.loadingPage).getComponent(cc.Sprite),t=i.loadAtlas.getSpriteFrame("logo"),e.spriteFrame=t,e=cc.find("health",i.loadingPage).getComponent(cc.Sprite),t=i.loadAtlas.getSpriteFrame("health_advice"),e.spriteFrame=t,e=cc.find("spring",i.loadingPage).getComponent(cc.Sprite),t=i.loadAtlas.getSpriteFrame("loading_spring_font"),e.spriteFrame=t,e=cc.find("Loading/LoadingProgressBar",i.loadingPage).getComponent(cc.Sprite),t=i.loadAtlas.getSpriteFrame("loading_bg"),e.spriteFrame=t,e=cc.find("Loading/LoadingProgressBar/bar",i.loadingPage).getComponent(cc.Sprite),t=i.loadAtlas.getSpriteFrame("loading_progress"),e.spriteFrame=t)},cleanRes:function(){},onDestroy:function(){this._updateListener&&(this._am.setEventCallback(null),this._updateListener=null),cc.loader.onProgress=function(){}},getServerData:function(){var e=this;this.curChapterId=1,this.getServerDataStart=!0;var t=i.StorageUtil.getData(i.constant.SAVE_PLAYER_BASE_DATA);if(console.log("getLocalData : "+t),t){if(console.log("has localData !!!!"),!i.config.needSDKUid){console.log("getServerData not  needSDKUid return");var a=i.StorageUtil.getData(i.constant.SAVE_INSTANCE_DATA);try{var n=JSON.parse(a);n&&n.curChapter&&(this.curChapterId=n.curChapter,i.Logger.debug("this.curChapterId: "+this.curChapterId))}catch(t){}return void this.changeLoadState(i.constant.LOAD_STATE_CHECK_HOT_UPDATE)}if(console.log("has localData checkout account start"),n=(a=JSON.parse(t)).account,t=i.nativeManager.getDeviceId(),a=a.dataIndex,n==t)return console.log("getServerData accountId  == SDKUid : "+t+" dataIndex : "+a),void this.checkServerDataVersion(a);console.log("getServerData clear old data "+t+" old : "+n),this.clearPlayerData()}n=i.nativeManager.getDeviceId(),console.log("getServerData uuid = "+n),i.player.serviceModule.getGameData(n,function(t){t?(console.log("getServerData : ",t),e.restorePlayerData(t=t),t&&t.instanceData&&t.instanceData.curChapter&&(e.curChapterId=t.instanceData.curChapter)):console.log("Get player data error."),e.changeLoadState(i.constant.LOAD_STATE_CHECK_HOT_UPDATE)})},checkServerDataVersion:function(e){var t,a=this;e?(t=i.nativeManager.getDeviceId(),i.player.serviceModule.getGameData(t,function(t){if(t){i.Logger.debug("getServerData : ",t),(t=t).playerBaseData&&t.playerBaseData.dataIndex&&(console.log("getServerData dataIndex "+t.playerBaseData.dataIndex+" local : "+e),t.playerBaseData.dataIndex>e&&a.restorePlayerData(t)),t=i.StorageUtil.getData(i.constant.SAVE_INSTANCE_DATA);try{var n=JSON.parse(t);n&&n.curChapter&&(a.curChapterId=n.curChapter,i.Logger.debug("this.curChapterId: "+a.curChapterId))}catch(t){}a.changeLoadState(i.constant.LOAD_STATE_CHECK_HOT_UPDATE)}else i.Logger.error("Get player data error."),a.changeLoadState(i.constant.LOAD_STATE_CHECK_HOT_UPDATE)})):this.changeLoadState(i.constant.LOAD_STATE_CHECK_HOT_UPDATE)},clearPlayerData:function(){console.log("clearPlayerData");var e=cc.sys.localStorage.getItem("HotUpdateSearchPaths"),t=cc.sys.localStorage.getItem("game_res_version");cc.sys.localStorage.clear(),cc.sys.localStorage.setItem("game_res_version",t),cc.sys.localStorage.setItem("HotUpdateSearchPaths",e)},turnToCheckHotUpdate:function(){console.log("hotUpdate turnToCheckHotUpdate!!!!!!"),this.hotUpdateStart=!0,this.startHotUpdateBI(),this.progress=this.restoreProportion,this.updateLoadProgress(),this.changeLoadState(i.constant.LOAD_STATE_GOTO_MAIN)},goToMainScene:function(){var e;console.log("hotUpdate goToMainScene!!!!!!"),this.hadGoToMainScene||(this.startLoadSceneBI(),this.hadGoToMainScene=!0,e=this,cc.director.preloadScene("mainScene",function(t,i){var a=t/i;cc.sys.isNative?i<=t&&(e.loadFinish=!0):(e.loadSceneProgress=a,e.progress=e.goToMainProportion+e.loadSceneProgress*(1-e.goToMainProportion),e.updateLoadProgress())},function(){cc.sys.isNative||(e.isNewPlayer&&i.BI.onEvent(i.biConstant.EVENT_TYPE_NEW_PLAYER,i.biConstant.EVENT_ID_NEW_PLAYER_CHANGE_SCENE),console.log("preloadScene mainScene over"),e.checkGotoMainSceneLoad())}))},checkGotoMainSceneLoad:function(){var e=this;console.log("checkGotoMainSceneLoad start aft.nativeManager.isLowIosDevice() = "+i.nativeManager.isLowIosDevice()),function(){var t=["textures/hero/heroImg"],a=e,n=t.length,o=0;a.isLoadAtlasOver=!1,e.isLoadSpineOver=!0,e.isLoadPrefabOver=!0;for(var s=0;s<n;s++)!function(e){cc.loader.loadRes(t[e],cc.SpriteAtlas,function(t,s){return t?(cc.error(t),void a.checkGotoMainSceneLoad()):(o++,0==e&&(i.heroHeadAtlas=s),void(o===n&&(a.isLoadAtlasOver=!0,a.checkMainSceneLoadOver())))})}(s)}()},checkMainSceneLoadOver:function(){this.isLoadAtlasOver&&this.isLoadSpineOver&&this.isLoadPrefabOver&&this.isLoadTableOver&&this.loadChapterData()},isOtherGuideFinished:function(e){var t=i.player.guideModule;return!!t&&!t.isCanGuideOtherType(e)},loadChapterData:function(){var e=!1,t=i.StorageUtil.getData(i.constant.SAVE_GUIDE_DATA);try{var a=JSON.parse(t);a&&a.guideListNew_1&&(e=0<a.guideListNew_1[0])}catch(e){}this.isFirstStart=i.nativeManager.isFirstStartApp()&&!e,console.log("loadChapterData start isGuideOver = "+e+" this.isFirstStart = "+this.isFirstStart),this.chapterAtlasIndex=0,this.chapterCfg=i.templateManager.getChapterDataById(this.curChapterId),this.chapterCfg&&!this.isFirstStart?(i.chapterAtlasMap={},this.loadChapterAtlas()):(cc.director.loadScene("mainScene"),this.cleanRes())},loadChapterAtlas:function(){if(this.chapterAtlasIndex>=this.chapterCfg.bg.length)return console.log("hotUpdate \u5df2\u7ecf\u662f\u6700\u540e\u4e00\u4e2a\u56fe\u96c6\u4e86"),cc.director.loadScene("mainScene"),console.log("loadScene mainScene over"),void this.cleanRes();var e=this.chapterCfg.bg[this.chapterAtlasIndex].split("/"),t=e[0],a=(e[1],"textures/chapter/"+t);console.log("loadMapAtlas mapImgResPath = "+a);var n=this;cc.loader.loadRes(a,cc.SpriteAtlas,function(e,o){return e?cc.error(e):(console.log("hotUpdate loadRes over mapImgResPath: "+a),i.chapterAtlasMap[t]=o,n.chapterAtlasIndex+=1),void n.loadChapterAtlas()})},update:function(e){if(i.loadingPage&&!i.config.isNeedUpdate){if(i.config.needSDKUid&&!i.nativeManager.isSdkUIDInit())return i.nativeManager.getWXUserInfo(),void(i.nativeManager._wxFailNum>=i.nativeManager._wxMaxFailNum&&this.errorTips&&(this.errorTips.active=!0));if(1===this.flushStatus&&(this.flushDelayTime||(this.flushDelayTime=0),this.flushDelayTime+=e,.1<this.flushDelayTime&&(cc.sys.os===cc.sys.OS_ANDROID&&(console.log("AppActivity HotUpdate Delay 0.1 S"),jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","removeLaunchImage","()V")),this.flushStatus=2)),this.state===i.constant.LOAD_STATE_RESTORE_DATA)this.getServerDataStart||this.getServerData();else if(this.state===i.constant.LOAD_STATE_CHECK_HOT_UPDATE){if(this.progress<this.restoreProportion)return this.progress+=.01,void this.updateLoadProgress();this.hotUpdateStart||this.turnToCheckHotUpdate()}else if(this.state!==i.constant.LOAD_STATE_HOT_UPDATE&&this.state===i.constant.LOAD_STATE_GOTO_MAIN){if(this.progress<this.goToMainProportion)return this.progress+=.01,void this.updateLoadProgress();this.isLimitSubPackage?i.config.needSDKUid||this.hadGoToMainScene||this.goToMainScene():(this.isLimitSubPackage=!0,i.config.isSubpackage&&i.config.needSDKUid&&(this.isLoadTemplateOver=!1,this.isLoadUIOver=!1,this.startLoadSubpackage()))}var t;this.loadFinish&&(this.curFakeProgressTime+=e,this.curFakeProgressTime>this.fakeProgressTime)&&(this.fakeProgressTime=Math.floor(6*Math.random()+10)/1e3,t=Math.floor(5*Math.random()+1)/100,i.Logger.debug("===this.fakeProgressTime==="+this.fakeProgressTime),i.Logger.debug("===randomProgress==="+t),i.Logger.debug("===this.loadSceneProgress==="+this.loadSceneProgress),this.curFakeProgressTime=0,this.loadSceneProgress+=t,this.progress=this.restoreProportion+this.checkUpdateProportion+this.updateProportion+this.loadSceneProgress*(1-this.restoreProportion-this.checkUpdateProportion-this.updateProportion),1<=this.progress&&(this.progress=1),this.updateLoadProgress(),1<=this.loadingBar.progress&&(this.loadFinish=!1,this.isNewPlayer&&i.BI.onEvent(i.biConstant.EVENT_TYPE_NEW_PLAYER,i.biConstant.EVENT_ID_NEW_PLAYER_CHANGE_SCENE),console.log("this.loadingBar.progress >= 1 checkGotoMainSceneLoad"),this.checkGotoMainSceneLoad())),this._checkUpdateFlag&&(this.curCheckUpdateTime+=e,this.curCheckUpdateTime>=this.checkUpdateTime&&(this.progress=this.restoreProportion+this.updateProportion+this.checkUpdateProportion,this.changeLoadState(i.constant.LOAD_STATE_GOTO_MAIN),this._checkUpdateFlag=!1,this.updateLoadProgress())),this.loadingTime_100<0&&this.loadingBar&&1<=this.loadingBar.progress&&(this.loadingTime_100=0),0<=this.loadingTime_100&&(this.loadingTime_100+=e,10<this.loadingTime_100&&this.errorTips&&(this.errorTips.active=!0,this.errorTips.getComponent(cc.Label).string="\u7f51\u7edc\u72b6\u6001\u4e0d\u4f73\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\uff0c\u91cd\u65b0\u767b\u5f55"))}},restorePlayerData:function(e){i.player.restoreModuleData(e)},enterLoadPageBI:function(){this.isNewPlayer=!1,cc.sys.localStorage.getItem(i.constant.SAVE_PLAYER_BASE_DATA)||(i.BI.onEvent(i.biConstant.EVENT_TYPE_NEW_PLAYER,i.biConstant.EVENT_ID_NEW_PLAYER_LOADING),this.isNewPlayer=!0),i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_LOADING_PAGE)},startHotUpdateBI:function(){this.isNewPlayer&&i.BI.onEvent(i.biConstant.EVENT_TYPE_NEW_PLAYER,i.biConstant.EVENT_ID_NEW_PLAYER_HOT_UPDATE),i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_HOT_UPDATE_PAGE)},startLoadSceneBI:function(){this.isNewPlayer&&i.BI.onEvent(i.biConstant.EVENT_TYPE_NEW_PLAYER,i.biConstant.EVENT_ID_NEW_PLAYER_LOAD_SCENE),i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_LOAD_SCENE_PAGE)},updateLoadProgress:function(e){this.loadingBar.progress>=this.progress||(this.loadingBar.progress=this.progress,this.labelProgress.string=(100*this.progress).toFixed(1)+"%",this.state===i.constant.LOAD_STATE_RESTORE_DATA?this.loadLabel.string="\u8d26\u53f7\u68c0\u6d4b":this.state===i.constant.LOAD_STATE_CHECK_HOT_UPDATE?this.loadLabel.string="\u7248\u672c\u68c0\u6d4b":this.state===i.constant.LOAD_STATE_HOT_UPDATE?this.loadLabel.string="\u7248\u672c\u66f4\u65b0\uff1a"+e:this.loadLabel.string="\u8fdb\u5165\u6e38\u620f\u4e2d")},initWebDeviceId:function(){var e;(e=i.StorageUtil.getData(i.constant.SAVE_PLAYER_BASE_DATA))&&(e=JSON.parse(e).account,i.nativeManager.setWebDeviceId(e))},changeLoadState:function(e){console.log("changeLoadState from "+this.state+" to "+e),this.state===i.constant.LOAD_STATE_RESTORE_DATA&&this.enterLoadPageBI(),this.state=e}}),cc._RF.pop()},{}],HttpClient:[function(e,t){"use strict";cc._RF.push(t,"0ccb41c1rNGpI+R9meDhnt+","HttpClient"),e("PakoCompression");var i=cc.Class({statics:{MAX_TIMEOUT_TIMES:3,TIMEOUT:2e4,CONTENT_LEN_COMPRESSION:100,httpGet:function(e){return new Promise(function(t,a){try{i.httpGet0(e,t,a,0)}catch(t){a(e+" http get error:"+t.message)}})},httpGet0:function(e,t,a,n){var o=cc.loader.getXMLHttpRequest();o.timeout=i.TIMEOUT,o.open("GET",e,!0),cc.sys.isNative&&o.setRequestHeader("Connection","close"),o.ontimeout=function(){++n>=i.MAX_TIMEOUT_TIMES?a("http get request timeout"):i.httpGet0(e,t,a,n)},o.onabort=function(){a("http get request aborted")},o.onerror=function(){a("http get request error")},o.onload=function(){200<=o.status&&o.status<300||304===o.status?t(o.responseText):a(e+" http get request error:"+o.status)},o.send()},httpPost:function(e,t,a,n){return new Promise(function(o,s){var r=a;a||(r="application/json");try{i.httpPost0(e,t,r,o,s,0,n)}catch(o){s(e+" http post error:"+o.message)}})},httpPost0:function(e,t,a,n,o,s,r){r=r||i.MAX_TIMEOUT_TIMES;var c=cc.loader.getXMLHttpRequest();c.timeout=i.TIMEOUT,c.open("POST",e,!0),c.setRequestHeader("Content-Type",a),cc.sys.isNative&&c.setRequestHeader("Connection","close"),c.ontimeout=function(){++s>=r?o("http post request timeout"):i.httpPost0(e,t,a,n,o,s,r)},c.onabort=function(){o("http post request aborted")},c.onerror=function(){o("http post request error")},c.onload=function(){200<=c.status&&c.status<300||304===c.status?n(c.responseText):o(e+" http post request error:"+c.status)},c.send(t)}}});cc._RF.pop()},{}],InstanceBoxRewardPopUp:[function(e,t){"use strict";cc._RF.push(t,"36470t/9g9J8o/gYM9rqcKh","InstanceBoxRewardPopUp");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{commonItemRenderPrefab:{default:null,type:cc.Prefab},commonTipsPrefab:{default:null,type:cc.Prefab}},onLoadPage:function(){this.getButtonNode=cc.find("content/layout/getButton",this.node),this.rewardsLayoutNode=cc.find("content/layout/ScrollView/view/content",this.node),this.textLabel=cc.find("content/layout/freePowerLabel",this.node).getComponent(cc.Label),this.closeButtonNode=cc.find("content/closeButton",this.node),this.itemObjList=[]},showPageBegan:function(){this._type=this.data.type,this._index=this.data.index,this._rewards=this.data.rewards,this._notHaveClose=this.data.notHaveClose,this._textDesc=this.data.textDesc,this._callBack=this.data.callBack,this._params=this.data.params,this.closeButtonNode.active=!this._notHaveClose,this._textDesc?(this.textLabel.node.active=!0,this.textLabel.string=this._textDesc):this.textLabel.node.active=!1,this.hideAllItem();for(var e=0;e<this._rewards.length;e++){e>=this.itemObjList.length&&(t=cc.instantiate(this.commonItemRenderPrefab),this.rewardsLayoutNode.addChild(t),((a=t.getComponent("CommonItemRender")).host=this).itemObjList.push(a));var t=this._rewards[e],a=this.itemObjList[e];a.node.active=!0,i.Logger.debug("reward: "+JSON.stringify(t)),a.initData(t.key,t.value)}},hideAllItem:function(){for(var e=0;e<this.itemObjList.length;e++)this.itemObjList[e].node.active=!1},onClickGet:function(){for(var e,t=this.getItemAddSource(),a=0;a<this._rewards.length;a++){var n=this._rewards[a];i.player.itemModule.dropItem(n.key,n.value,!0,t)}this._type===i.constant.COMMON_REWARD_PAGE_MAIN_CHAPTER_BOX?(i.player.instanceModule.putReward(this._index),(e=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_CHILD))&&e.updateBoxInfo(),i.eventBus.dispatchEvent(i.GameEventType.CHECK_MAIN_CHILD_RED)):this._type===i.constant.COMMON_REWARD_PAGE_WORLD_BOX?(i.player.instanceModule.rewardAllChapterBox(),i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_WORLD).updateWorldMap(),i.eventBus.dispatchEvent(i.GameEventType.CHECK_MAIN_CHILD_RED)):this._type===i.constant.COMMON_REWARD_PAGE_TASK_BOX?i.player.taskModule.rewardScore(this._index):this._type===i.constant.COMMON_REWARD_PAGE_NEW_YEAR_TASK&&i.player.taskModule.rewardNewYearTaskOver(this._params,this._index),this._callBack&&this._callBack(),this.closePage()},getItemAddSource:function(){var e=0;return this._type===i.constant.COMMON_REWARD_PAGE_MAIN_CHAPTER_BOX?e=i.constant.ITEM_ADD_SOURCE_INSTANCE_STAR_BOX:this._type===i.constant.COMMON_REWARD_PAGE_WORLD_BOX?e=i.constant.ITEM_ADD_SOURCE_WORLD_STAR_BOX:this._type===i.constant.COMMON_REWARD_PAGE_TASK_BOX?e=i.constant.ITEM_ADD_SOURCE_TASK_BOX:this._type===i.constant.COMMON_REWARD_PAGE_MAIL?e=i.constant.ITEM_ADD_SOURCE_MAIL:this._type===i.constant.COMMON_REWARD_PAGE_NEW_YEAR_TASK&&(e=i.constant.ITEM_ADD_SOURCE_YEAR_TASK),e},onClickClose:function(){this.closePage()},showPageEnded:function(){i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_OPEN_BOX_2)&&i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_OPEN_BOX_2,this.getButtonNode)},showTips:function(e,t,i){this.itemTipsNode||(this.itemTipsNode=cc.instantiate(this.commonTipsPrefab),this.itemTipsObj=this.itemTipsNode.getComponent("CommonSkillTipsItemRender"),this.node.addChild(this.itemTipsNode)),this.showTipsId=e,this.itemTipsObj.showNode(e,t,i)},hideTips:function(){this.showTipsId=null,this.itemTipsObj.hideNode()},closePageBegan:function(){this.showTipsId=null,this.itemTipsNode&&(this.itemTipsNode.active=!1)}}),cc._RF.pop()},{}],InstanceBoxRewardTipsItemRender:[function(e,t){"use strict";cc._RF.push(t,"dcf883oPoVESaQ9NqFS0lRD","InstanceBoxRewardTipsItemRender");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{itemAtlas:{default:null,type:cc.SpriteAtlas},commonAtlas:{default:null,type:cc.SpriteAtlas}},afterLoad:function(){this.iconSprite=cc.find("number/icon",this.node).getComponent(cc.Sprite),this.numberLabel=cc.find("number",this.node).getComponent(cc.Label)},initData:function(e,t){var a=i.player.itemModule.getItemType(e),n=null,o=i.Utils.formatBigNumberForLabel(t);switch(a){case i.constant.ITEM_TYPE_COIN:case i.constant.ITEM_TYPE_BAG:var s=i.templateManager.getItemDataById(e);n=this.itemAtlas.getSpriteFrame(s.icon.split("/")[1]),i.lang.updateLabelString(this.numberLabel,[o]);break;case i.constant.ITEM_TYPE_HERO_PIECE:s=i.templateManager.getHeroCardDataById(e),n=this.itemAtlas.getSpriteFrame(s.icon),this.numberLabel.string=i.lang.getFormatString(i.GameTextCode.ITEM_SHOW,[i.lang.getGameText(s.name),o])}this.numberLabel.string.length<=6&&(this.numberLabel.string="    "+this.numberLabel.string+"    "),!n||t<=0?this.node.active=!1:(this.node.active||(this.node.active=!0),this.iconSprite.spriteFrame=n)}}),cc._RF.pop()},{}],InstanceEnemyItemRender:[function(e,t){"use strict";cc._RF.push(t,"5b21e6WJktAxIX0nadXF5sG","InstanceEnemyItemRender");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{uiAtlas:cc.SpriteAtlas},afterLoad:function(){this.newNode=cc.find("new",this.node),this.bossNode=cc.find("boss",this.node),this.eliteNode=cc.find("cream",this.node),this.bgSprite=cc.find("bg",this.node).getComponent(cc.Sprite),this.iconSprite=cc.find("icon",this.node).getComponent(cc.Sprite)},updateEnemyShow:function(e){this.enemyAtlas=e,this.enemyAtlasMap["pictorialEnemy1.plist"]=e,this.iconSprite.node.active=!0,e=i.templateManager.getEnemyDataById(this.enemyId),this.iconSprite.spriteFrame=this.enemyAtlasMap[e.handbookListAlbum+".plist"].getSpriteFrame(e.handbookListIcon)},initData:function(e,t){this.enemyAtlasMap={},this.enemyAtlas=null,this.enemyId=e,this.instanceData=t;var a=i.templateManager.getEnemyDataById(e);t=t.chapterId,t=i.templateManager.getChapterDataById(t),this.uiAtlas&&(this.bgSprite.spriteFrame=this.uiAtlas.getSpriteFrame(t.handbookBg)),this.newNode.active=i.player.instanceModule.isNewEnemy(e),this.bossNode.active=a.type===i.constant.ENEMY_TYPE_BOSS,this.eliteNode.active=a.type===i.constant.ENEMY_TYPE_ELITE,this.iconSprite.node.active=!1},onClickInfo:function(){var e;this.enemyAtlas?(e=this.instanceData.wellenNature,e=i.templateManager.getWaveNatureListByGroupID(e)[0],e={enemyId:this.enemyId,rateData:e,chapterId:this.instanceData.chapterId,enemyAtlas:this.enemyAtlas},i.gameScene.showPage(i.pageConstant.PAGE_TYPE_PICTORIAL_ENEMY_DETAIL,e)):i.Logger.debug("this.enemyAtlas = null return")}}),cc._RF.pop()},{}],InstanceModule:[function(e,t){"use strict";cc._RF.push(t,"15a2d+ekF9MxIb4UYkI4fOr","InstanceModule");var i=e("Aft");cc.Class({extends:i.BaseHandler,properties:{},registerSelf:function(){},init:function(e){this.player=e;var t=i.StorageUtil.getData(i.constant.SAVE_INSTANCE_DATA);t||((e={instanceIndex:0,curChapter:1,instanceStarMap:{},rewardMap:{},instanceShowMap:{},cacheNewChapter:[],rewardCache:[],unlockEnemyList:[],lastUpdateInstanceTime:i.timeUtil.getTime(),lastUpdateStarTime:i.timeUtil.getTime(),chapterHeros:{},todayDefendSpeedTimes:0,newInstanceLoseCount:0}).instanceStarMap[1]={},this.player.saveGameData(i.constant.SAVE_INSTANCE_DATA,e),t=JSON.stringify(e)),i.Logger.debug("instanceData :",t),this.player._gameData.instanceData=JSON.parse(t)},loadData:function(){this.player._gameData.instanceData.instanceShowMap||(this.player._gameData.instanceData.instanceShowMap={}),this.player._gameData.instanceData.rewardCache||(this.player._gameData.instanceData.rewardCache=[]),this.player._gameData.instanceData.hasOwnProperty("unlockEnemyList")||(this.player._gameData.instanceData.unlockEnemyList=[]),this.player._gameData.instanceData.hasOwnProperty("lastUpdateInstanceTime")||(this.player._gameData.instanceData.lastUpdateInstanceTime=i.player.playerModule.getCreateTime()),this.player._gameData.instanceData.hasOwnProperty("lastUpdateStarTime")||(this.player._gameData.instanceData.lastUpdateStarTime=i.player.playerModule.getCreateTime()),this.getInstanceData().chapterHeros||(this.getInstanceData().chapterHeros={}),this.getInstanceData().todayDefendSpeedTimes||(this.getInstanceData().todayDefendSpeedTimes=0),this.getInstanceData().newInstanceLoseCount||(this.getInstanceData().newInstanceLoseCount=0),this.getInstanceData().instanceIndex||(this.getInstanceData().instanceIndex=0),this.getInstanceData().todayDefendSpeedTimes||(this.getInstanceData().todayDefendSpeedTimes=0),this.saveInstanceData(),this.checkFixChapterData()},restoreData:function(e){e&&e.instanceData&&(i.StorageUtil.save(i.constant.SAVE_INSTANCE_DATA,e.instanceData,!0),i.Logger.debug("restoreData data  instanceData :",JSON.stringify(e.instanceData)))},resetInstanceData:function(){this.getInstanceData().todayDefendSpeedTimes=0,this.saveInstanceData(!0),i.eventBus.dispatchEvent(i.GameEventType.REFRESH_SPEED_DEFEND_PAGE)},saveInstanceData:function(e){this.getInstanceData().instanceIndex+=1,this.player.saveGameData(i.constant.SAVE_INSTANCE_DATA,this.player._gameData.instanceData,e)},getInstanceData:function(){return this.player._gameData.instanceData},getCurChapter:function(){return this.player&&this.player._gameData&&this.player._gameData.instanceData&&this.player._gameData.instanceData.curChapter?this.getInstanceData().curChapter:0},setCurChapter:function(e){this.getInstanceData().curChapter=e,this.saveInstanceData(),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_MAIN_INSTANCE),i.eventBus.dispatchEvent(i.GameEventType.CHECK_MAIN_CHILD_RED)},getMaxChapter:function(){if(!(this.player&&this.player._gameData&&this.player._gameData.instanceData&&this.player._gameData.instanceData.instanceStarMap))return 0;var e=Object.keys(this.getInstanceData().instanceStarMap);return 0==e.length?1:e.length},getChapterMaxLevel:function(e){return this.player&&this.player._gameData&&this.player._gameData.instanceData&&this.player._gameData.instanceData.instanceStarMap&&this.getInstanceData().instanceStarMap.hasOwnProperty(e)?(e=this.getInstanceData().instanceStarMap[e],Object.keys(e).length):0},getChapterMaxLevelCfg:function(){var e=this.getMaxChapter(),t=this.getChapterMaxLevel(e);return t>=i.templateManager.getInstanceListByChapterId(e).length&&--t,i.templateManager.getInstanceListByChapterId(e)[t]},getChapterCurInstanceId:function(e){return this.getInstanceData().instanceStarMap.hasOwnProperty(e)?(e=this.getInstanceData().instanceStarMap[e],Object.keys(e).length):0},checkPassChapter:function(e,t){if(!(t<i.templateManager.getInstanceListByChapterId(e).length)){var a=e+1;if((t=i.templateManager.getChapterDataById(a))&&0!=t.isOpen&&!this.getInstanceData().instanceStarMap.hasOwnProperty(a))return this.getInstanceData().instanceStarMap[a]={},i.guideManager.isOtherGuideFinished(i.constant.GUIDE_TYPE_UNLOCK_MAP)&&this.setCurChapter(a),this.saveInstanceData(),this.setNewChapter(a),i.player.broadcastModule.uploadBroadcastData(i.constant.BROADCAST_TYPE_PASS_CHAPTER,e),this.player.skillModule.checkSkillState(),!0}},chapterIsUnlock:function(e){return!!this.getInstanceData().instanceStarMap.hasOwnProperty(e)},getNewChapter:function(){if(0===this.getInstanceData().cacheNewChapter.length)return-1;var e=this.getInstanceData().cacheNewChapter[0];return this.getInstanceData().cacheNewChapter.splice(0,1),this.saveInstanceData(),e},setNewChapter:function(e){this.getInstanceData().cacheNewChapter.push(e),this.saveInstanceData()},setInstanceStar:function(e,t,a){var n,o,s,r,c,l,d,h;i.Logger.debug("chapterId: ",e,", instanceId: ",t,", starNum: ",a),e!=i.constant.YEAR_MONSTER_CHAPTER_ID&&(h=0,this.getInstanceData().instanceStarMap.hasOwnProperty(e)||(this.getInstanceData().instanceStarMap[e]={}),n=this.getInstanceData().instanceStarMap[e],l=null,(s=i.nativeManager.getWxRealUserInfo())&&(l=JSON.stringify({headUrl:s.headUrl,name:s.nickName})),o=i.player.commonModule.getPlayerCityData(),n.hasOwnProperty(t)?n[t]<a&&(h=a-n[t],n[t]=a,this.player._gameData.instanceData.lastUpdateStarTime=i.timeUtil.getTime(),l)&&(s=i.constant.rankBigType.WORLD+i.constant.rankType.STAR,i.player.serviceModule.putLeaderboard(s,i.player.instanceModule.getRankStarNum(),l),o&&(s=i.constant.rankBigType.AREA+o.cityCode+i.constant.rankType.STAR,i.player.serviceModule.putLeaderboard(s,i.player.instanceModule.getRankStarNum(),l))):(h+=a,n[t]=a,this.player._gameData.instanceData.lastUpdateStarTime=i.timeUtil.getTime(),this.player._gameData.instanceData.lastUpdateInstanceTime=i.timeUtil.getTime(),l&&(d=i.constant.rankBigType.WORLD+i.constant.rankType.STAR,i.player.serviceModule.putLeaderboard(d,i.player.instanceModule.getRankStarNum(),l),o&&(r=i.constant.rankBigType.AREA+o.cityCode+i.constant.rankType.STAR,i.player.serviceModule.putLeaderboard(r,i.player.instanceModule.getRankStarNum(),l))),i.BI.onEvent(i.biConstant.EVENT_TYPE_INSTANCE_LEVEL,i.biConstant.EVENT_ID_INSTANCE_LEVEL,i.player.instanceModule.getTempInstanceId()),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_MAIN_TASK)),this.saveInstanceData(),d=this.checkPassChapter(e,t),i.player.towerModule.checkCanUnlockTower(),i.player.functionModule.checkUnlockSkill(),i.eventBus.dispatchEvent(i.GameEventType.CHECK_MAIN_CHILD_RED),i.eventBus.dispatchEvent(i.GameEventType.FUNCTION_UNLOCK_EVENT),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_MAIN_INSTANCE),l&&(r=i.constant.rankBigType.WORLD+i.constant.rankType.INSTANCE,i.player.serviceModule.putLeaderboard(r,i.player.instanceModule.getRankPassInstanceNum(),l),o&&(c=i.constant.rankBigType.AREA+o.cityCode+i.constant.rankType.INSTANCE,i.player.serviceModule.putLeaderboard(c,i.player.instanceModule.getRankPassInstanceNum(),l))),d||this.addCacheStarNum(h),i.player.playerModule.saveAllDataToServer(),1==e&&1==t&&i.player.commonModule.getMailInfo(!0),i.config.needSDKUid&&(c=this.getAllInstanceStarNum(),l=this.getMaxChapter(),d=this.getChapterMaxLevel(l),h=100*Math.floor(l)+Math.floor(d),t=1e8*(e=i.player.vipModule.getCurVipLevel())+1e4*c+h,console.log("start uploadInstance allStarNum = "+c+" bigLevel = "+l+" smallLevel = "+d+" instanceScore = "+h+" allScore = "+t+" vipLevel = "+e),wx.getOpenDataContext().postMessage({message:"uploadScore",score:t})))},checkFixChapterData:function(){var e,t=this.getMaxChapter();this.getChapterMaxLevel(t)!=i.templateManager.getInstanceListByChapterId(t).length||(t=i.templateManager.getChapterDataById(e=t+1))&&0!=t.isOpen&&(this.getInstanceData().instanceStarMap.hasOwnProperty(e)||(this.getInstanceData().instanceStarMap[e]={},this.setCurChapter(e),this.setNewChapter(e),this.saveInstanceData(),i.chapterAtlasMap=null,i.Logger.debug("checkFixChapterData aft.chapterAtlasMap = null")))},getInstanceStarById:function(e,t){return this.getInstanceData().instanceStarMap.hasOwnProperty(e)&&(e=this.getInstanceData().instanceStarMap[e]).hasOwnProperty(t)?e[t]:0},setInstanceShowMap:function(e,t){this.getInstanceData().instanceShowMap.hasOwnProperty(e)||(this.getInstanceData().instanceShowMap[e]={}),this.getInstanceData().instanceShowMap[e][t]=1,this.saveInstanceData()},getInstanceCanShow:function(e,t){var a=i.templateManager.getGameParamValue("notShowNewEnemyUI");return!(1===e&&t<=a||this.getInstanceData().instanceShowMap.hasOwnProperty(e)&&this.getInstanceData().instanceShowMap[e].hasOwnProperty(t))},getAllPassInstanceNum:function(){var e,t=0;if(!this.getInstanceData().instanceStarMap)return t;for(e in this.getInstanceData().instanceStarMap)t+=Object.keys(this.getInstanceData().instanceStarMap[e]).length;return t},getRankPassInstanceNum:function(){var e=this.player._gameData.instanceData.lastUpdateInstanceTime,t=Math.floor(e/1e3),i=Math.max(Math.floor(2e9-t),0);return e=1001e10+i,0===(t=Object.keys(this.getInstanceData().instanceStarMap)).length?e:(e=t.length,t=this.getInstanceData().instanceStarMap[e],1e13*e+1e10*Object.keys(t).length+i)},getRealRankData:function(e){if(!e)return[1,1];var t=Math.floor(e/1e13);return[t=0==t?1:t,Math.floor(e/1e10)%1e3]},getAllInstanceStarNum:function(){var e,t=0;for(e in this.getInstanceData().instanceStarMap){var i,a=this.getInstanceData().instanceStarMap[e];for(i in a)t+=a[i]}return t},getRankStarNum:function(){var e=this.player._gameData.instanceData.lastUpdateInstanceTime;return e=Math.floor(e/1e3),e=Math.max(Math.floor(2e9-e),0),1e10*this.getAllInstanceStarNum()+e},getRealRankStarCount:function(e){return e?Math.floor(e/1e10):0},isPassInstance:function(e,t){return 0<this.getInstanceStarById(e,t)},getChapterAllStarNum:function(e){var t,i=0;if(!this.getInstanceData().instanceStarMap.hasOwnProperty(e))return i;for(t in this.getInstanceData().instanceStarMap[e])i+=this.getInstanceData().instanceStarMap[e][t];return i},getPassInstanceNumByChapterId:function(e){return this.getInstanceData().instanceStarMap.hasOwnProperty(e)?(e=this.getInstanceData().instanceStarMap[e],Object.keys(e).length):0},chapterIsPass:function(e){var t=i.templateManager.getInstanceListByChapterId(e);return!!t&&this.getPassInstanceNumByChapterId(e)>=t.length},getNextInstanceLevel:function(){},putReward:function(e,t){if(t=t||this.getInstanceData().curChapter,!this.getInstanceData().rewardMap.hasOwnProperty(t))return this.getInstanceData().rewardMap[t]=[],this.getInstanceData().rewardMap[t].push(e),this.saveInstanceData(),void i.eventBus.dispatchEvent(i.GameEventType.CHECK_MAIN_CHILD_RED);0<=this.getInstanceData().rewardMap[t].indexOf(e)||(this.getInstanceData().rewardMap[t].push(e),this.saveInstanceData(),i.eventBus.dispatchEvent(i.GameEventType.CHECK_MAIN_CHILD_RED))},getCanReward:function(e,t){var a=t||this.getInstanceData().curChapter,n=i.templateManager.getChapterDataById(a);return!!n&&!((t=this.getInstanceData().rewardMap).hasOwnProperty(a)&&0<=t[a].indexOf(e))&&(e=n.starJudge[e],this.getChapterAllStarNum(a)>=e)},isAlreadyReward:function(e,t){return t=t||this.getInstanceData().curChapter,!!this.getInstanceData().rewardMap.hasOwnProperty(t)&&0<=this.getInstanceData().rewardMap[t].indexOf(e)},getCanRewardBoxList:function(){for(var e=this.getMaxChapter(),t={},a=0;a<e;a++){var n=a+1,o=i.templateManager.getChapterDataById(n);if(!o)return!1;for(var s=0;s<o.starJudge.length;s++){var r=[];if(this.getCanReward(s,n)&&(0==s?r=o.starReward1:1==s?r=o.starReward2:2==s&&(r=o.starReward3)),0!=r.length)for(var c=0;c<r.length;c++){var l=r[c];t.hasOwnProperty(l.key)||(t[l.key]=0),t[l.key]+=l.value}}}var d,h=[];for(d in t){var u=t[d];h.push({key:parseInt(d),value:u})}return h},checkHaveCanRewardBox:function(){for(var e=!1,t=i.JsonData.Chapter,a=0;a<t.length;a++)if(this.checkCanRewardNum(t[a].id)){e=!0;break}return e},rewardAllChapterBox:function(){for(var e=this.getMaxChapter(),t=0;t<e;t++){var a=t+1,n=i.templateManager.getChapterDataById(a);if(!n)return!1;for(var o=0;o<n.starJudge.length;o++)this.getCanReward(o,a)&&this.putReward(o,a)}},gmPassInstance:function(){for(var e=i.JsonData.Instance,t=0;t<e.length;t++){var a,n=e[t];10<n.chapterId||(this.getInstanceData().instanceStarMap.hasOwnProperty(n.chapterId)||(this.getInstanceData().instanceStarMap[n.chapterId]={}),i.templateManager.getInstanceListByChapterId(n.chapterId).length<(a=this.getPassInstanceNumByChapterId(n.chapterId)+1)||(this.getInstanceData().instanceStarMap[n.chapterId][a]=3))}this.player._gameData.instanceData.lastUpdateStarTime=i.timeUtil.getTime(),this.player._gameData.instanceData.lastUpdateInstanceTime=i.timeUtil.getTime(),this.saveInstanceData(),i.player.functionModule.checkUnlockSkill();var o,s,r=i.nativeManager.getWxRealUserInfo();r&&(o=JSON.stringify({headUrl:r.headUrl,name:r.nickName}),s=i.constant.rankBigType.WORLD+i.constant.rankType.STAR,r=i.constant.rankBigType.WORLD+i.constant.rankType.INSTANCE,i.player.serviceModule.putLeaderboard(s,i.player.instanceModule.getRankStarNum(),o),i.player.serviceModule.putLeaderboard(r,i.player.instanceModule.getRankPassInstanceNum(),o),(s=i.player.commonModule.getPlayerCityData())&&(r=i.constant.rankBigType.AREA+s.cityCode+i.constant.rankType.STAR,s=i.constant.rankBigType.AREA+s.cityCode+i.constant.rankType.INSTANCE,i.player.serviceModule.putLeaderboard(r,i.player.instanceModule.getRankStarNum(),o),i.player.serviceModule.putLeaderboard(s,i.player.instanceModule.getRankPassInstanceNum(),o))),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_MAIN_INSTANCE,!0),i.eventBus.dispatchEvent(i.GameEventType.CHECK_MAIN_CHILD_RED),i.eventBus.dispatchEvent(i.GameEventType.FUNCTION_UNLOCK_EVENT),i.player.towerModule.checkCanUnlockTower(),i.player.skillModule.checkSkillState()},gmPassChapter:function(e,t){for(var a=i.JsonData.Instance,n=0;n<a.length;n++){var o,s,r=a[n];r.chapterId>e||(this.getInstanceData().instanceStarMap.hasOwnProperty(r.chapterId)||(this.getInstanceData().instanceStarMap[r.chapterId]={}),o=i.templateManager.getInstanceListByChapterId(r.chapterId).length,s=this.getPassInstanceNumByChapterId(r.chapterId)+1,r.chapterId===e&&t<s||o<s||(this.getInstanceData().instanceStarMap[r.chapterId][s]=3))}this.saveInstanceData(),this.player._gameData.instanceData.lastUpdateStarTime=i.timeUtil.getTime(),this.player._gameData.instanceData.lastUpdateInstanceTime=i.timeUtil.getTime(),i.player.functionModule.checkUnlockSkill();var c,l,d=i.nativeManager.getWxRealUserInfo();d&&(c=JSON.stringify({headUrl:d.headUrl,name:d.nickName}),l=i.constant.rankBigType.WORLD+i.constant.rankType.STAR,d=i.constant.rankBigType.WORLD+i.constant.rankType.INSTANCE,i.player.serviceModule.putLeaderboard(l,i.player.instanceModule.getRankStarNum(),c),i.player.serviceModule.putLeaderboard(d,i.player.instanceModule.getRankPassInstanceNum(),c),(l=i.player.commonModule.getPlayerCityData())&&(d=i.constant.rankBigType.AREA+l.cityCode+i.constant.rankType.STAR,l=i.constant.rankBigType.AREA+l.cityCode+i.constant.rankType.INSTANCE,i.player.serviceModule.putLeaderboard(d,i.player.instanceModule.getRankStarNum(),c),i.player.serviceModule.putLeaderboard(l,i.player.instanceModule.getRankPassInstanceNum(),c))),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_MAIN_INSTANCE,!0),i.eventBus.dispatchEvent(i.GameEventType.CHECK_MAIN_CHILD_RED),i.eventBus.dispatchEvent(i.GameEventType.FUNCTION_UNLOCK_EVENT),i.player.towerModule.checkCanUnlockTower(),i.player.skillModule.checkSkillState()},checkCanRewardNum:function(e){for(var t=0,a=e||this.getInstanceData().curChapter,n=i.templateManager.getChapterDataById(a),o=0;o<n.starJudge.length;o++)this.getCanReward(o,a)&&(t+=1);return t},addRewardCache:function(e){for(var t=0;t<e.length;t++){for(var i=e[t],a=this.getInstanceData().rewardCache,n=!1,o=0;o<a.length;o++){var s=a[o];if(s.itemId==i.itemId){n=!0,s.number+=i.number;break}}n||this.getInstanceData().rewardCache.push(i)}this.saveInstanceData()},checkRewardCache:function(e){if(0!==this.getInstanceData().rewardCache.length){for(var t=0;t<this.getInstanceData().rewardCache.length;t++){var a=this.getInstanceData().rewardCache[t];i.player.itemModule.dropItem(a.itemId,a.number,!e,i.constant.ITEM_ADD_SOURCE_BATTLE_RESULT)}this.getInstanceData().rewardCache=[],this.saveInstanceData()}},getTempInstanceId:function(e,t){var i=e,a=t;return e||(i=this.getMaxChapter()),t||(a=0==(t=this.getChapterMaxLevel(i))?1:t),100*parseInt(i)+parseInt(a)},addCacheStarNum:function(e){this.cacheStarNum||(this.cacheStarNum=0),this.cacheStarNum+=e},getCacheStarNum:function(){return this.cacheStarNum||0},cleanCacheStartNum:function(){this.cacheStarNum=0},addUnlockEnemy:function(e){0<=this.getInstanceData().unlockEnemyList.indexOf(e)||(this.getInstanceData().unlockEnemyList.push(e),this.saveInstanceData())},isNewEnemy:function(e){return this.getInstanceData().unlockEnemyList.indexOf(e)<0},getLastUpdateStarTime:function(){return this.player._gameData.instanceData.lastUpdateStarTime},getLastUpdateInstanceTime:function(){return this.player._gameData.instanceData.lastUpdateInstanceTime},chapterHerosBaseData:function(){return{heroId:-1,defendId:-1,heroLevel:-1,startTime:0,subTimes:0}},getChapterHeroById:function(e){return this.getInstanceData().chapterHeros.hasOwnProperty(e)?this.getInstanceData().chapterHeros[e]:null},clearChapterHero:function(e){delete this.getInstanceData().chapterHeros[e],this.saveInstanceData(),i.eventBus.dispatchEvent(i.GameEventType.CHECK_MAIN_WORLD_RED)},setChapterHeroInfo:function(e,t,a,n){this.getInstanceData().chapterHeros[e]={heroId:parseInt(t),defendId:a,heroLevel:n,startTime:i.timeUtil.getSecond(),subTimes:0,levelAddRatio:this.getLevelAddRatio(t)},this.saveInstanceData(),i.player.heroModule.setHeroDefendInfo(t),i.player.commonModule.addHeroInChapterCount(t),a=i.templateManager.getDefendDataById(a),i.player.heroModule.addHeroDefendMinute(t,a.defendTime),i.eventBus.dispatchEvent(i.GameEventType.CHECK_MAIN_WORLD_RED)},getAllGarrisonHeros:function(){var e,t=[];for(e in this.getInstanceData().chapterHeros){var i=this.getInstanceData().chapterHeros[e];0<i.heroId&&t.push(i.heroId)}return t},getAllCanDefendList:function(){for(var e=i.player.heroModule.getAllUnlockList(),t=this.getAllGarrisonHeros(),a=0;a<t.length;a++){var n=t[a];0<=(n=e.indexOf(parseInt(n)))&&e.splice(n,1)}for(var o=[],s=0;s<e.length;s++){var r,c=e[s];i.player.heroModule.getTodayCanDefend(c)&&(r=i.player.heroModule.getHeroLevel(c),o.push([r,c]))}o.sort(function(e,t){return e[0]-t[0]});for(var l=[],d=0;d<o.length;d++)l.push(o[d][1]);return l},getAllCanQuickDefendList:function(){for(var e=i.player.heroModule.getOneKeyHeroList(),t=this.getAllGarrisonHeros(),a=0;a<t.length;a++){var n=t[a];0<=(n=e.indexOf(parseInt(n)))&&e.splice(n,1)}for(var o=[],s=0;s<e.length;s++){var r=e[s];i.player.heroModule.getTodayCanDefend(r)&&(i.player.heroModule.isHeroMaxLevel(r)||o.push(parseInt(r)))}return o},getChapterHaveCanDefend:function(){for(var e=this.getAllCanDefendList(),t=[],a=0;a<e.length;a++){var n=e[a];i.player.heroModule.isHeroMaxLevel(n)||t.push(n)}var o,s=!1;for(o in this.getInstanceData().instanceStarMap)if(this.chapterIsPass(o)){var r=this.getChapterHeroById(o);if(!(r&&0<=r.heroId)){s=!0;break}}return 0<t.length&&s},quickChapterDefend:function(){for(var e in this.getInstanceData().instanceStarMap){var t,a,n;this.chapterIsPass(e)&&((a=this.getChapterHeroById(e))&&0<=a.heroId||0!=(n=this.getAllCanQuickDefendList()).length&&(t=n[0],a=i.player.heroModule.getHeroDefendInfo(t),n=i.player.heroModule.getHeroLevel(t),this.setChapterHeroInfo(e,t,a,n),i.eventBus.dispatchEvent(i.GameEventType.REFRESH_WORLD_DEFEND_ITEM,e)))}i.eventBus.dispatchEvent(i.GameEventType.CHECK_MAIN_WORLD_RED)},subAllDefendHeroTime:function(){for(var e in this.addTodayDefendSpeedTimes(),this.getInstanceData().chapterHeros)(e=this.getInstanceData().chapterHeros[e]).subTimes||(e.subTimes=0),e.subTimes++;this.saveInstanceData(),i.eventBus.dispatchEvent(i.GameEventType.REFRESH_WORLD_DEFEND_ITEM),i.eventBus.dispatchEvent(i.GameEventType.CHECK_MAIN_WORLD_RED)},getSubDefendTimes:function(e){return(e=this.getChapterHeroById(e))?e.subTimes:0},getDefendRealTime:function(e){return e=this.getSubDefendTimes(e)*i.templateManager.getGameParamValue("defendSpeedTime")*60,i.timeUtil.getSecond()+e},getTodayLastDefendSpeedTimes:function(){var e=i.templateManager.getGameParamValue("defendSpeedTimes")-this.getInstanceData().todayDefendSpeedTimes;return 0<e?e:0},addTodayDefendSpeedTimes:function(){this.getInstanceData().todayDefendSpeedTimes++,this.saveInstanceData()},checkDefendSpeendTimes:function(){return 0<this.getTodayLastDefendSpeedTimes()},getLevelAddRatio:function(e){for(var t=this.getMaxChapter(),a=i.templateManager.getChapterDataById(t).defendHeroAverageLevel,n=i.player.heroModule.getAllHeroLevelList(),o=0,s=0,r=0;r<n.length&&!(a<=r);r++)o+=1,s+=n[r];return i.Logger.debug("getRealDefendSecondReward - heroId: "+e+", num: "+o+", totalLevel: "+s),t=Math.floor(s/o),e=i.player.heroModule.getHeroLevel(e),Math.max(0,.1*Math.round((t-e)/20))},getRealDefendSecondReward:function(e,t,a,n){var o=this.getChapterHeroById(e);return t=o?o.levelAddRatio||0:this.getLevelAddRatio(t),a=i.templateManager.getDefendDataById(a),n=i.templateManager.getDefendLevelRewardByLevel(n).hereExp,t=Math.floor(n*(a.rewardTime/a.defendTime)*(1+t)*100)/100,i.Logger.debug("getRealDefendSecondReward - chapterId: "+e+", realNum: "+t),t},getHaveCanSpeedDefend:function(){var e,t=!1;for(e in this.getInstanceData().chapterHeros){var a=(o=this.getInstanceData().chapterHeros[e]).startTime,n=60*i.templateManager.getDefendDataById(o.defendId).defendTime,o=this.getDefendRealTime(e);if(0<a&&0<a+n-o){t=!0;break}}return t},getHaveCanReceiveDefend:function(){var e,t=!1;for(e in this.getInstanceData().chapterHeros){var a=(o=this.getInstanceData().chapterHeros[e]).startTime,n=60*i.templateManager.getDefendDataById(o.defendId).defendTime,o=this.getDefendRealTime(e);if(0<a&&a+n-o<=0){t=!0;break}}return t},getNewInstanceLoseCount:function(){return this.getInstanceData().newInstanceLoseCount},addNewInstanceLoseCount:function(){this.getInstanceData().newInstanceLoseCount++,this.saveInstanceData()},resetNewInstanceLoseCount:function(){this.getInstanceData().newInstanceLoseCount=0,this.saveInstanceData()}}),cc._RF.pop()},{}],InstanceRecommendItemRender:[function(e,t){"use strict";cc._RF.push(t,"05db7z8DhVETZIIFdlTL1IQ","InstanceRecommendItemRender");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{},afterLoad:function(){this.iconSprite=cc.find("icon",this.node).getComponent(cc.Sprite),this.levelLabel=cc.find("icon/level",this.node).getComponent(cc.Label),this.emptyNode=cc.find("empty",this.node),this.emptySprite=cc.find("empty",this.node).getComponent(cc.Sprite)},initData:function(e,t,a,n){this.itemAtlas=t,this.itemId=a,this.needLevel=n,(this.type=e)===i.constant.RECOMMEND_TYPE_HERO?this.updateHeroInfo():e===i.constant.RECOMMEND_TYPE_HERO_TOWER?this.updateHeroTowerInfo():e===i.constant.RECOMMEND_TYPE_TOWER?this.updateTowerInfo():this.node.active=!1,this.emptySprite.spriteFrame=this.itemAtlas.getSpriteFrame("FightPowerRecommend_Empty_Bg")},updateHeroInfo:function(){var e=i.templateManager.getHeroDataById(this.itemId);e?(this.iconSprite&&(this.iconSprite.node.active=!0),this.levelLabel&&(this.levelLabel.node.active=!0),this.emptyNode.active=!1,this.iconSprite.spriteFrame=this.itemAtlas.getSpriteFrame(e.recommendHeroIcon),e=i.player.heroModule.getHeroLevel(this.itemId),i.player.heroModule.isHeroUnlock(this.itemId)||(e=0),this.updateLevelLabel(e)):(this.iconSprite&&(this.iconSprite.node.active=!1),this.emptyNode.active=!0)},updateHeroTowerInfo:function(){var e=i.templateManager.getTowerDataById(this.itemId);e?(this.iconSprite.node.active=!0,this.levelLabel.node.active=!1,this.emptyNode.active=!1,this.iconSprite.spriteFrame=this.itemAtlas.getSpriteFrame(e.heroTowerIcon)):(this.iconSprite.node.active=!1,this.emptyNode.active=!0)},updateTowerInfo:function(){var e=this.itemId;e?(this.iconSprite.node.active=!0,this.levelLabel.node.active=!0,this.emptyNode.active=!1,this.iconSprite.spriteFrame=this.itemAtlas.getSpriteFrame(e.towerIcon),e=i.player.towerModule.getTowerLevel(e.id),this.updateLevelLabel(e)):(this.iconSprite.node.active=!1,this.emptyNode.active=!0)},updateLevelLabel:function(e){(this.levelLabel.string=e)>=this.needLevel?this.levelLabel.node.color=cc.color("#9cff00"):this.levelLabel.node.color=cc.color("#ff2e2e")},onClickInfo:function(){var e;this.type!==i.constant.RECOMMEND_TYPE_HERO_TOWER||this.emptyNode.active||(e={towerId:this.itemId,towerAtlas:null},i.gameScene.showPage(i.pageConstant.PAGE_TYPE_PICTORIAL_TOWER_DETAIL,e))}}),cc._RF.pop()},{}],InviteFriendModule:[function(e,t){"use strict";cc._RF.push(t,"7d2f6WY9mROALHP7PQLD1rE","InviteFriendModule");var i=e("Aft");cc.Class({extends:i.BaseHandler,init:function(e){this.player=e;var t=i.StorageUtil.getData(i.constant.SAVE_INVITE_FRIEND_DATA);t||(this.player.saveGameData(i.constant.SAVE_INVITE_FRIEND_DATA,e={isReceiveList:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],isNewPlayer:!0,upLoadOpenId:null,inviteOpenId:null,inviteSuccessCount:0,inviteShareCount:0,todayReceivePower:0,lastTimeReceiveNum:0,lastTimeInviteNum:0,isSubscribeReceiveList:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],subscribeTimeList:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],subscribePurviewList:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],subscribeSendTimeList:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],isShowOverVersionUpdate:0}),t=JSON.stringify(e)),i.Logger.debug("init inviteFriendData :",t),this.player._gameData.inviteFriendData=JSON.parse(t)},loadData:function(){this.player._gameData.inviteFriendData.isReceiveList||(this.player._gameData.inviteFriendData.isReceiveList=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),this.player._gameData.inviteFriendData.isSubscribeReceiveList||(this.player._gameData.inviteFriendData.isSubscribeReceiveList=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),this.player._gameData.inviteFriendData.subscribeTimeList||(this.player._gameData.inviteFriendData.subscribeTimeList=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),this.player._gameData.inviteFriendData.subscribeSendTimeList||(this.player._gameData.inviteFriendData.subscribeSendTimeList=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),this.player._gameData.inviteFriendData.subscribePurviewList||(this.player._gameData.inviteFriendData.subscribePurviewList=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),this.player._gameData.inviteFriendData.hasOwnProperty("isShowOverVersionUpdate")||(this.player._gameData.inviteFriendData.isShowOverVersionUpdate=0),this.player._gameData.inviteFriendData.hasOwnProperty("inviteSuccessCount")||(this.player._gameData.inviteFriendData.inviteSuccessCount=0),this.player._gameData.inviteFriendData.hasOwnProperty("inviteShareCount")||(this.player._gameData.inviteFriendData.inviteShareCount=0),this.player._gameData.inviteFriendData.hasOwnProperty("todayReceivePower")||(this.player._gameData.inviteFriendData.todayReceivePower=0),this.player._gameData.inviteFriendData.hasOwnProperty("lastTimeReceiveNum")||(this.player._gameData.inviteFriendData.lastTimeReceiveNum=0),this.player._gameData.inviteFriendData.hasOwnProperty("lastTimeInviteNum")||(this.player._gameData.inviteFriendData.lastTimeInviteNum=0)},restoreData:function(e){e&&e.inviteFriendData&&(i.StorageUtil.save(i.constant.SAVE_INVITE_FRIEND_DATA,e.inviteFriendData,!0),i.Logger.debug("restoreData data  inviteFriendData :",JSON.stringify(e.inviteFriendData)))},saveInviteFriendData:function(){this.player.saveGameData(i.constant.SAVE_INVITE_FRIEND_DATA,this.player._gameData.inviteFriendData)},getInviteFriendData:function(){return this.player._gameData.inviteFriendData},setOldPlayer:function(){this.getInviteFriendData().isNewPlayer=!1,this.saveInviteFriendData(),console.log("setOldPlayer")},isNewPlayer:function(){return this.getInviteFriendData().isNewPlayer},getInviteOpenId:function(){return this.getInviteFriendData().upLoadOpenId},saveInviteOpenId:function(e){this.getInviteFriendData().upLoadOpenId=e,this.getInviteFriendData().inviteOpenId=e,this.saveInviteFriendData(),i.BI.onEvent(i.biConstant.EVENT_TYPE_INVITE,i.biConstant.EVENT_ID_INVITE_ENTER,e)},cleanInviteOpenId:function(){this.getInviteFriendData().upLoadOpenId=null,this.saveInviteFriendData()},isReceiveOver:function(e){var t=e-1;return e=this.getInviteFriendData().isReceiveList,!(t<0||t>=e.length)&&0<e[t]},setReceiveOver:function(e){var t=e-1;if(e=this.getInviteFriendData().isReceiveList,t<0||t>=e.length)return!1;this.getInviteFriendData().isReceiveList[t]=1,this.saveInviteFriendData()},isAllInviteReceiveOver:function(){for(var e=!0,t=0;t<i.JsonData.InviteFriends.length;t++)if(!this.isReceiveOver(i.JsonData.InviteFriends[t].id)){e=!1;break}return e},isHaveCanReceive:function(e){var t=i.player.gmModule.getGmInviteNum();0<t&&(e=t);for(var a=0;a<i.JsonData.InviteFriends.length;a++){var n=i.JsonData.InviteFriends[a],o=i.player.inviteFriendModule.isReceiveOver(n.id);if(e>=n.inviteNum&&!o)return!0}return!1},resetInviteSuccessCount:function(e){e!==this.player._gameData.inviteFriendData.inviteSuccessCount&&(this.player._gameData.inviteFriendData.inviteSuccessCount=e,this.saveInviteFriendData(),i.BI.onEvent(i.biConstant.EVENT_TYPE_INVITE,i.biConstant.EVENT_ID_INVITE_SUCCESS,e))},addInviteShareCount:function(){this.getInviteFriendData().inviteShareCount+=1,this.saveInviteFriendData(),i.BI.onEvent(i.biConstant.EVENT_TYPE_INVITE,i.biConstant.EVENT_ID_INVITE_SHARE,this.getInviteFriendData().inviteShareCount)},resetGiftData:function(){this.getInviteFriendData().todayReceivePower=0,this.getInviteFriendData().subscribeTimeList=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.getInviteFriendData().subscribeSendTimeList=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.saveInviteFriendData()},getCanReceivePowerNum:function(e){var t=i.templateManager.getGameParamValue("receivePowerMaxNum");return(t-=this.getInviteFriendData().todayReceivePower)<0&&(t=0),e&&(t=999999999),t<(e=(i.nativeManager.giftNum-this.getInviteFriendData().lastTimeReceiveNum)*i.templateManager.getGameParamValue("givePowerNum"))?t:e},saveReceivePower:function(){var e=this.getCanReceivePowerNum();this.getInviteFriendData().lastTimeReceiveNum+=e/i.templateManager.getGameParamValue("givePowerNum"),this.getInviteFriendData().lastTimeReceiveNum>i.nativeManager.giftNum&&(this.getInviteFriendData().lastTimeReceiveNum=i.nativeManager.giftNum),this.getInviteFriendData().todayReceivePower+=e,this.saveInviteFriendData(),i.player.itemModule.dropItem(i.constant.COIN_TYPE_POWER,e,!0,i.constant.ITEM_ADD_SOURCE_GIFT_SEND),i.eventBus.dispatchEvent(i.GameEventType.MAIN_UPDATE_GIFT_RED)},getTodayReceivePower:function(){return this.getInviteFriendData().todayReceivePower},getLastTimeInviteNum:function(){return this.getInviteFriendData().lastTimeInviteNum},setLastTimeInviteNum:function(e){console.log("setLastTimeInviteNum = "+e),this.getInviteFriendData().lastTimeInviteNum=e,this.saveInviteFriendData()},isSubscribeReceiveOver:function(e){var t=e-1;return e=this.getInviteFriendData().isSubscribeReceiveList,!(t<0||t>=e.length)&&0<e[t]},setSubscribeReceiveOver:function(e){var t=e-1;if(e=this.getInviteFriendData().isSubscribeReceiveList,t<0||t>=e.length)return!1;this.getInviteFriendData().isSubscribeReceiveList[t]=1,this.saveInviteFriendData()},isSubscribeTimeOk:function(e){var t=e-1;return e=this.getInviteFriendData().subscribeTimeList,!(t<0||t>=e.length)&&i.timeUtil.getSecond()>e[t]},setSubscribeTime:function(e,t){var a=e-1;if(e=this.getInviteFriendData().subscribeTimeList,a<0||a>=e.length)return!1;e=i.timeUtil.getSecond(),this.getInviteFriendData().subscribeTimeList[a]=e+Math.floor(t),this.saveInviteFriendData()},getTemplateIdByType:function(e){var t=null;switch(e){case i.constant.WX_SUBSCRIBE_TYPE_OFFLINE:t=i.constant.WX_TEMPLATE_ID_OFFLINE;break;case i.constant.WX_SUBSCRIBE_TYPE_POWER:t=i.constant.WX_TEMPLATE_ID_POWER;break;case i.constant.WX_SUBSCRIBE_TYPE_SIGN:t=i.constant.WX_TEMPLATE_ID_SIGN}return t},isAlwaysOpenSubscribe:function(e){return e==i.constant.WX_SUBSCRIBE_TYPE_VERSION_UPDATE?i.ttAdManager.isVersionSubscribeOpen():(i.ttAdManager.subscriptionsSetting&&i.ttAdManager.subscriptionsSetting.mainSwitch,(e=this.getTemplateIdByType(e))&&i.ttAdManager.isOnceSubscribeOpen(e))},isCanClickSubscribe:function(e){if(e==i.constant.WX_SUBSCRIBE_TYPE_VERSION_UPDATE)return!i.ttAdManager.isVersionSubscribeOpen();var t=i.ttAdManager.subscriptionsSetting&&i.ttAdManager.subscriptionsSetting.mainSwitch,a=(a=this.getTemplateIdByType(e))&&i.ttAdManager.isOnceSubscribeOpen(a);return e=i.player.inviteFriendModule.isSubscribeTimeOk(e),!a&&e&&t},isSubscribePurview:function(e){var t=i.ttAdManager.subscriptionsSetting&&i.ttAdManager.subscriptionsSetting.mainSwitch,a=e-1;return e=this.getInviteFriendData().subscribePurviewList,!(a<0||a>=e.length)&&0<e[a]&&t},setSubscribePurview:function(e){var t=e-1;if(e=this.getInviteFriendData().subscribePurviewList,t<0||t>=e.length)return!1;this.getInviteFriendData().subscribePurviewList[t]=1,this.saveInviteFriendData()},isVersionUpdateShowOver:function(){return 0<this.getInviteFriendData().isShowOverVersionUpdate||i.ttAdManager.isVersionSubscribeOpen()},setVersionUpdateShowOver:function(){this.getInviteFriendData().isShowOverVersionUpdate=1,this.saveInviteFriendData()},isSubscribeSendTimeOk:function(e){var t=e-1;return e=this.getInviteFriendData().subscribeSendTimeList,!(t<0||t>=e.length)&&i.timeUtil.getSecond()>e[t]},setSubscribeSendTime:function(e,t){var a=e-1;if(e=this.getInviteFriendData().subscribeSendTimeList,a<0||a>=e.length)return!1;e=i.timeUtil.getSecond(),this.getInviteFriendData().subscribeSendTimeList[a]=e+Math.floor(t),this.saveInviteFriendData()}}),cc._RF.pop()},{}],InviteItemRender:[function(e,t){"use strict";cc._RF.push(t,"0814dWTBIVExIjQ0WaF7lUQ","InviteItemRender");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{commonItemPrefab:{default:null,type:cc.Prefab},commonTipsPrefab:{default:null,type:cc.Prefab}},afterLoad:function(){this.rewardLayoutNode=cc.find("rewardsLayout",this.node),this.rewardItemObjList=[],this.descLabel=cc.find("tips",this.node).getComponent(cc.Label),this.inviteButton=cc.find("inviteButton",this.node),this.rewardButton=cc.find("getButton",this.node),this.gotNode=cc.find("got",this.node)},registerGameListener:function(){},updateInviteNum:function(e){this.curInviteNum=e,this.descLabel.node.active=!0,i.lang.updateLabelString(this.descLabel,[this.needInviteNum,this.curInviteNum,this.needInviteNum]),this.updateButtonShow()},updateButtonShow:function(){this.inviteButton.active=!1,this.rewardButton.active=!1,this.gotNode.active=!1,this.isReceiveOver=i.player.inviteFriendModule.isReceiveOver(this.inviteId),this.isCanReceive=this.curInviteNum>=this.needInviteNum,this.isReceiveOver?this.gotNode.active=!0:this.isCanReceive?this.rewardButton.active=!0:this.inviteButton.active=!0},initData:function(e){this.inviteId=e.id,this.needInviteNum=e.inviteNum,this.inviteRewards=e.reward,this.descLabel.node.active=!1,this.inviteButton.active=!1,this.rewardButton.active=!1,this.gotNode.active=!1;for(var t=0;t<this.inviteRewards.length;t++){var a=this.inviteRewards[t];t>=this.rewardItemObjList.length&&((n=cc.instantiate(this.commonItemPrefab)).scale=.8,o=n.getComponent("CommonItemRender"),this.rewardLayoutNode.addChild(n),this.rewardItemObjList.push(o));var n=this.rewardItemObjList[t];n.node.active=!0,n.node.y=-15;var o=a.key;a=a.value,o===i.constant.COIN_TYPE_SILVER?a=i.player.commonModule.getHangUpReceiveCoin(a):o===i.constant.COIN_TYPE_HERO_EXP&&(a=i.player.commonModule.getHangUpReceiveExp(a)),n.initData(o,a,!1,null,!0,!1,!1)}},showTips:function(e,t,i){this.itemTipsNode||(this.itemTipsNode=cc.instantiate(this.commonTipsPrefab),this.itemTipsObj=this.itemTipsNode.getComponent("CommonSkillTipsItemRender"),this.node.addChild(this.itemTipsNode)),this.showTipsId=e,this.itemTipsObj.showNode(e,t,i)},hideTips:function(){this.showTipsId=null,this.itemTipsObj.hideNode()},onClickGo:function(){i.Logger.debug("onClickGo"),i.player.inviteFriendModule.addInviteShareCount(),i.player.commonModule.addShareStartCount(i.constant.SHARE_TYPE_INVITE),i.ttAdManager.wxShare()},onClickReward:function(){i.Logger.debug("onClickReward");for(var e=0;e<this.inviteRewards.length;e++){var t=(a=this.inviteRewards[e]).key,a=a.value;i.player.itemModule.dropItem(t,a,!0,i.constant.ITEM_ADD_SOURCE_INVITE_FRIEND)}i.Logger.debug("setReceiveOver this.inviteId = "+this.inviteId),i.player.inviteFriendModule.setReceiveOver(this.inviteId),i.BI.onEvent(i.biConstant.EVENT_TYPE_INVITE,i.biConstant.EVENT_ID_INVITE_REWARD,this.inviteId),this.updateButtonShow()}}),cc._RF.pop()},{}],InvitePopUp:[function(e,t){"use strict";cc._RF.push(t,"5c613RERVlK55wxpVRxJd3S","InvitePopUp");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{inviteItemRenderPrefab:{default:null,type:cc.Prefab}},registerGameListener:function(){},onLoadPage:function(){this.scrollView=cc.find("content/scrollView",this.node).getComponent(cc.ScrollView),this.content=cc.find("content/scrollView/view/content",this.node),this.itemObjList=[]},showPageBegan:function(){this.hideAllItem(),this.initData()},showPageEnded:function(){},closePageBegan:function(){},closePageEnded:function(){i.eventBus.dispatchEvent(i.GameEventType.MAIN_UPDATE_INVITE_RED)},updateInviteFriendNum:function(e){this.inviteFriendNum=e;var t=i.player.gmModule.getGmInviteNum();0<t&&(this.inviteFriendNum=t),this.updateAllItem(this.inviteFriendNum),this.inviteFriendsList=i.JsonData.InviteFriends;for(var a=0;a<this.inviteFriendsList.length;a++){var n=(s=this.inviteFriendsList[a]).id,o=i.player.inviteFriendModule.isReceiveOver(s.id),s=this.inviteFriendNum>=s.inviteNum;o?n+=1e3:s&&(n-=1e3),this.inviteFriendsList[a].sortNum=n}this.inviteFriendsList.sort(function(e,t){return e.sortNum-t.sortNum}),i.player.inviteFriendModule.resetInviteSuccessCount(e)},getInviteFriendNum:function(){i.Logger.debug("start getInviteFriendNum");var e=this;i.player.serviceModule.getFriendInvitation(function(t){t&&i.Utils.isNumber(t.number)?(i.Logger.debug("getFriendInvitation success num = "+Math.floor(t.number)),e.updateInviteFriendNum(Math.floor(t.number))):i.Logger.debug("getFriendInvitation fail")})},initData:function(){this.inviteFriendNum=-1,this.inviteFriendsList=null,this.hideAllItem(),this.scrollView.scrollToTop(0),this.checkIndex=0,this.getInviteFriendNum()},updateAllItem:function(e){for(var t=0;t<this.itemObjList.length;t++)this.itemObjList[t].updateInviteNum(e)},hideAllItem:function(){for(var e=0;e<this.itemObjList.length;e++)this.itemObjList[e].node.active=!1},onClickClose:function(){this.closePage();var e=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_CHILD);e&&e.checkInviteButtonShow()},createItem:function(){var e=cc.instantiate(this.inviteItemRenderPrefab);this.content.addChild(e),((e=e.getComponent("InviteItemRender")).host=this).itemObjList.push(e)},update:function(){var e,t;this.inviteFriendsList&&this.checkIndex<this.inviteFriendsList.length&&(this.itemObjList.length<=this.checkIndex&&this.createItem(),e=this.inviteFriendsList[this.checkIndex],(t=this.itemObjList[this.checkIndex]).node.active=!0,t.initData(e),0<=this.inviteFriendNum&&t.updateInviteNum(this.inviteFriendNum),this.checkIndex++)}}),cc._RF.pop()},{}],ItemModule:[function(e,t){"use strict";cc._RF.push(t,"96af3edVMhAVYp1ikGT5gPh","ItemModule");var i=e("Aft");cc.Class({extends:i.BaseHandler,init:function(e){this.player=e;var t=i.StorageUtil.getData(i.constant.SAVE_ITEM_DATA);t||(this.player.saveGameData(i.constant.SAVE_ITEM_DATA,e={bagItems:{},towerPieceMap:{},heroPieceMap:{},skillPieceMap:{},headList:[]}),t=JSON.stringify(e)),i.Logger.debug("init itemData :",t),this.player._gameData.itemData=JSON.parse(t)},loadData:function(){this.getItemData().heroPieceMap||(this.getItemData().heroPieceMap={}),this.getItemData().skillPieceMap||(this.getItemData().skillPieceMap={}),this.getItemData().headList||(this.getItemData().headList=[])},restoreData:function(e){e&&e.itemData&&(i.StorageUtil.save(i.constant.SAVE_ITEM_DATA,e.itemData,!0),i.Logger.debug("restoreData data  itemData :",JSON.stringify(e.itemData)))},saveItemData:function(e){e&&this.checkItemData(),this.player.saveGameData(i.constant.SAVE_ITEM_DATA,this.player._gameData.itemData)},getItemData:function(){return this.player._gameData.itemData},dropItem:function(e,t,a,n){var o;!i.Utils.isNumber(t)||t<=0?i.Logger.error("====== drop player item count error, itemId:",e,"number:",t):(o=i.player.itemModule.getItemType(e))===i.constant.ITEM_TYPE_COIN?i.player.playerModule.dropCoin(e,t,a,n):o===i.constant.ITEM_TYPE_BAG?this.dropBag(e,t,a,n):o===i.constant.ITEM_TYPE_HERO_PIECE?this.addHeroPiece(e,t,a,n):o===i.constant.ITEM_TYPE_TOWER_PIECE||(o===i.constant.ITEM_TYPE_SKILL_PIECE?this.addSkillPiece(e,t,a,n):o===i.constant.ITEM_TYPE_ROLE_HEAD?this.addHead(e):i.Logger.error("====== drop player item type error, itemId:",e," number:",t,"itemType: ",o))},checkHaveItem:function(e){var t=!1,a=this.getItemType(e);return a===i.constant.ITEM_TYPE_COIN||a===i.constant.ITEM_TYPE_BAG?i.templateManager.getItemDataById(e)&&(t=!0):a===i.constant.ITEM_TYPE_HERO_PIECE&&i.templateManager.getHeroCardDataById(e)&&(t=!0),t},getItemType:function(e){return Math.floor(e/i.constant.ITEM_TYPE_BASE)},getItemQuality:function(e){var t=1;return this.getItemType(e)!=i.constant.ITEM_TYPE_TOWER_PIECE||(e=i.templateManager.getItemDataById(e))&&e.quality&&(t=e.quality),t},getItemQualityColor:function(e){var t=i.constant.QUALITY_COLOR_GREEN;switch(e){case i.constant.QUALITY_TYPE_1:t=i.constant.QUALITY_COLOR_GREEN;break;case i.constant.QUALITY_TYPE_2:t=i.constant.QUALITY_COLOR_BLUE;break;case i.constant.QUALITY_TYPE_3:t=i.constant.QUALITY_COLOR_PURPLE;break;case i.constant.QUALITY_TYPE_4:t=i.constant.QUALITY_COLOR_ORANGE}return t},dropBag:function(e,t,a,n){this.player.itemModule.addItemCount(e,t,n=n||0),a&&i.gameScene.mainTopNodeObj.checkFlyEffect(e,t)},dropEquip:function(){},isItemEnough:function(e,t){return!(!i.Utils.isNumber(t)||t<=0)&&!!this.getItemData().bagItems.hasOwnProperty(e)&&parseInt(this.getItemData().bagItems[e])>=t},getItemCount:function(e){return this.getItemData().bagItems.hasOwnProperty(e)?parseInt(this.getItemData().bagItems[e]):0},addItemCount:function(e,t,a){var n;i.Logger.debug("====== drop bag item , itemId:",e,"number:",t),!i.Utils.isNumber(t)||t<=0||(n=0,this.getItemData().bagItems.hasOwnProperty(e)&&(n=parseInt(this.getItemData().bagItems[e])),this.getItemData().bagItems[e]=Math.max(0,n+t)+"",e===i.constant.BAG_TYPE_TOP_BOX_TICKET&&(i.BI.onEvent(i.biConstant.EVENT_TYPE_DROP_ITEM,i.biConstant.EVENT_ID_DROP_ITEM_BOX_TICKET,a),i.player.commonModule.addTodayAddBoxTicketCount(t)),this.saveItemData(!0))},costItemCount:function(e,t){var a;!i.Utils.isNumber(t)||t<=0||(a=0,this.getItemData().bagItems.hasOwnProperty(e)&&(a=parseInt(this.getItemData().bagItems[e]),this.getItemData().bagItems[e]=Math.max(0,a-t)+"",this.saveItemData(!0),e===i.constant.BAG_TYPE_TOP_BOX_TICKET&&i.BI.onEvent(i.biConstant.EVENT_TYPE_USE_ITEM,i.biConstant.EVENT_ID_USE_ITEM_BOX_TICKET)))},getHeroPieceNumById:function(e){return this.getItemData().heroPieceMap.hasOwnProperty(e)?parseInt(this.getItemData().heroPieceMap[e]):0},addHeroPiece:function(e,t,a){!t||t<=0||this.getItemType(e)!=i.constant.ITEM_TYPE_HERO_PIECE||(this.getItemData().heroPieceMap.hasOwnProperty(e)||(this.getItemData().heroPieceMap[e]=0),this.getItemData().heroPieceMap[e]=parseInt(this.getItemData().heroPieceMap[e])+t+"",this.saveItemData(),a&&i.gameScene.mainTopNodeObj.checkFlyEffect(e,t),i.player.taskModule.onTaskEvent(i.constant.TASK_TYPE_GET_HERO_PIECE,t),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_HERO_PAGE_LIST,e),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_HERO_RED),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_HERO_MAIN_RED),i.eventBus.dispatchEvent(i.GameEventType.CHECK_MAIN_WORLD_RED),i.BI.onEvent(i.biConstant.EVENT_TYPE_HERO_PIECE_DROP,this.getHeroPieceBiEventId(i.biConstant.EVENT_ID_HERO_PIECE_DROP_BASE,e),t),!(t=i.templateManager.getHeroCardDataById(e))||i.player.heroModule.isHeroUnlock(t.heroId)||(t=i.templateManager.getHeroDataById(t.heroId))&&(t=parseInt(i.biConstant.EVENT_ID_UNLOCK_HERO_PIECE_DROP_BASE)+t.pointNumer,i.BI.onEvent(i.biConstant.EVENT_TYPE_UNLOCK_HERO_PIECE_DROP,t,this.getItemData().heroPieceMap[e])))},subHeroPiece:function(e,t){var a;!t||t<=0||this.getItemType(e)!=i.constant.ITEM_TYPE_HERO_PIECE||(this.getItemData().heroPieceMap.hasOwnProperty(e)||(this.getItemData().heroPieceMap[e]=0),this.getItemData().heroPieceMap[e]=parseInt(this.getItemData().heroPieceMap[e])-t+"",a=parseInt(this.getItemData().heroPieceMap[e]),this.getItemData().heroPieceMap[e]=a<0?"0":a+"",this.saveItemData(),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_HERO_RED),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_HERO_MAIN_RED),i.BI.onEvent(i.biConstant.EVENT_TYPE_HERO_PIECE_COST,this.getHeroPieceBiEventId(i.biConstant.EVENT_ID_HERO_PIECE_COST_BASE,e),t))},checkHeroPieceEnough:function(e,t){return!(!t||t<=0)&&this.getItemType(e)==i.constant.ITEM_TYPE_HERO_PIECE&&!!this.getItemData().heroPieceMap.hasOwnProperty(e)&&this.getHeroPieceNumById(e)>=t},getSkillPieceNumById:function(e){return this.getItemData().skillPieceMap.hasOwnProperty(e)?parseInt(this.getItemData().skillPieceMap[e]):0},addSkillPiece:function(e,t,a){!t||t<=0||this.getItemType(e)==i.constant.ITEM_TYPE_SKILL_PIECE&&(this.getItemData().skillPieceMap.hasOwnProperty(e)||(this.getItemData().skillPieceMap[e]=0),this.getItemData().skillPieceMap[e]=parseInt(this.getItemData().skillPieceMap[e])+t+"",this.saveItemData(),a&&i.gameScene.mainTopNodeObj.checkFlyEffect(e,t),this.player.skillModule.checkSkillState(),i.BI.onEvent(i.biConstant.EVENT_TYPE_SKILL_PIECE_DROP,this.getSkillPieceBiEventId(i.biConstant.EVENT_ID_SKILL_PIECE_DROP_BASE,e),t))},subSkillPiece:function(e,t){var a;!t||t<=0||this.getItemType(e)!=i.constant.ITEM_TYPE_SKILL_PIECE||(this.getItemData().skillPieceMap.hasOwnProperty(e)||(this.getItemData().skillPieceMap[e]=0),this.getItemData().skillPieceMap[e]=parseInt(this.getItemData().skillPieceMap[e])-t+"",a=parseInt(this.getItemData().skillPieceMap[e]),this.getItemData().skillPieceMap[e]=a<0?"0":a+"",this.saveItemData(),this.player.skillModule.checkSkillState(),i.BI.onEvent(i.biConstant.EVENT_TYPE_SKILL_PIECE_COST,this.getSkillPieceBiEventId(i.biConstant.EVENT_ID_SKILL_PIECE_COST_BASE,e),t))},getHeroPieceBiEventId:function(e,t){return(t=i.templateManager.getHeroCardDataById(t))&&(t=i.templateManager.getHeroDataById(t.heroId))?parseInt(e)+t.pointNumer:e},getSkillPieceBiEventId:function(e,t){return(t=i.templateManager.getSkillCardById(t))?parseInt(e)+t.pointNumber:e},getAllSortHeroPieceList:function(){for(var e=[],t=[],a=i.JsonData.HeroCard,n=0;n<a.length;n++){var o=a[n];(0<this.getHeroPieceNumById(o.id)?e:t).push(o.id)}return e.concat(t)},checkItemData:function(){i.Logger.error("checkItemData start !!!"),this.checkBoxTicketValue()},checkBoxTicketValue:function(){var e=i.player.commonModule.getRegisterDay(),t=i.player.commonModule.getTodayAddBoxTicketCount(),a=Number(this.getItemCount(i.constant.BAG_TYPE_TOP_BOX_TICKET));e*=10,(10<t||e<a)&&(i.BI.onEvent(i.biConstant.EVENT_TYPE_ERROR,i.biConstant.EVENT_ID_ERROR_FIX_DATA_USER,i.player.playerModule.getPlayerId()+"#"+i.biConstant.EVENT_ID_ERROR_TYPE_BOX_TICKET),i.BI.onEvent(i.biConstant.EVENT_TYPE_ERROR,i.biConstant.EVENT_ID_ERROR_FIX_DATA_INFO,i.player.playerModule.getPlayerId()+"#"+i.biConstant.EVENT_ID_ERROR_TYPE_BOX_TICKET+"#"+t+"#"+a+"#"+e))},isUnlockHead:function(e){return 0<=this.getItemData().headList.indexOf(e)},addHead:function(e){(e=i.templateManager.getHeadDataById(e))&&(e=e.relationId,0<=this.getItemData().headList.indexOf(e)||(this.getItemData().headList.push(e),this.saveItemData()))}}),cc._RF.pop()},{}],Json_BoxType:[function(e,t){"use strict";cc._RF.push(t,"bf0b13jAbFDT4lYZeq4ORP8","Json_BoxType"),e("Aft").JsonData.BoxType=[{id:1,price:100},{id:2,price:850},{id:3,price:0}],cc._RF.pop()},{}],Json_Box:[function(e,t){"use strict";cc._RF.push(t,"02240dMvu5OM7D6eQNXl3na","Json_Box"),e("Aft").JsonData.Box=[{id:101,type:1,minRoleLevel:1,maxRoleLevel:999,highDrop:51009,weight:1e4,times:1},{id:102,type:1,minRoleLevel:1,maxRoleLevel:999,highDrop:51009,weight:1e4,times:1},{id:103,type:1,minRoleLevel:1,maxRoleLevel:999,highDrop:51006,weight:1e4,times:1},{id:104,type:1,minRoleLevel:1,maxRoleLevel:999,highDrop:51002,weight:1e4,times:11},{id:105,type:1,minRoleLevel:1,maxRoleLevel:999,highDrop:51002,weight:1e4,times:11},{id:106,type:1,minRoleLevel:1,maxRoleLevel:999,highDrop:51006,weight:1e4,times:11},{id:107,type:1,minRoleLevel:1,maxRoleLevel:999,highDrop:51003,weight:1e4,times:21},{id:108,type:1,minRoleLevel:1,maxRoleLevel:999,highDrop:51003,weight:1e4,times:21},{id:109,type:1,minRoleLevel:1,maxRoleLevel:999,highDrop:51003,weight:1e4,times:21},{id:110,type:1,minRoleLevel:1,maxRoleLevel:999,highDrop:51003,weight:1e4,times:31},{id:111,type:1,minRoleLevel:1,maxRoleLevel:999,highDrop:51003,weight:1e4,times:31},{id:112,type:1,minRoleLevel:1,maxRoleLevel:999,highDrop:51003,weight:1e4,times:31},{id:113,type:1,minRoleLevel:1,maxRoleLevel:999,highDrop:51004,weight:1e4,times:41},{id:114,type:1,minRoleLevel:1,maxRoleLevel:999,highDrop:51004,weight:1e4,times:41},{id:115,type:1,minRoleLevel:1,maxRoleLevel:999,highDrop:51006,weight:1e4,times:41},{id:116,type:1,minRoleLevel:1,maxRoleLevel:999,highDrop:51005,weight:1e4,times:51},{id:117,type:1,minRoleLevel:1,maxRoleLevel:999,highDrop:51005,weight:1e4,times:51},{id:118,type:1,minRoleLevel:1,maxRoleLevel:999,highDrop:51006,weight:1e4,times:51},{id:119,type:1,minRoleLevel:1,maxRoleLevel:999,highDrop:51004,weight:1e4,times:61},{id:120,type:1,minRoleLevel:1,maxRoleLevel:999,highDrop:51004,weight:1e4,times:61},{id:121,type:1,minRoleLevel:1,maxRoleLevel:999,highDrop:51006,weight:1e4,times:61},{id:122,type:1,minRoleLevel:1,maxRoleLevel:999,highDrop:51005,weight:1e4,times:71},{id:123,type:1,minRoleLevel:1,maxRoleLevel:999,highDrop:51005,weight:1e4,times:71},{id:124,type:1,minRoleLevel:1,maxRoleLevel:999,highDrop:51006,weight:1e4,times:71},{id:125,type:1,minRoleLevel:1,maxRoleLevel:999,highDrop:51004,weight:1e4,times:81},{id:126,type:1,minRoleLevel:1,maxRoleLevel:999,highDrop:51004,weight:1e4,times:81},{id:127,type:1,minRoleLevel:1,maxRoleLevel:999,highDrop:51006,weight:1e4,times:81},{id:128,type:1,minRoleLevel:1,maxRoleLevel:999,highDrop:51005,weight:1e4,times:91},{id:129,type:1,minRoleLevel:1,maxRoleLevel:999,highDrop:51005,weight:1e4,times:91},{id:130,type:1,minRoleLevel:1,maxRoleLevel:999,highDrop:51006,weight:1e4,times:91},{id:131,type:1,minRoleLevel:1,maxRoleLevel:999,highDrop:51006,weight:1e4,times:0},{id:132,type:1,minRoleLevel:1,maxRoleLevel:999,highDrop:51006,weight:1e4,times:0},{id:133,type:1,minRoleLevel:1,maxRoleLevel:999,highDrop:51006,weight:1e4,times:0},{id:201,type:2,minRoleLevel:1,maxRoleLevel:999,highDrop:53004,weight:100},{id:202,type:2,minRoleLevel:1,maxRoleLevel:999,highDrop:53003,weight:14e3},{id:203,type:2,minRoleLevel:1,maxRoleLevel:999,highDrop:53009,weight:1400},{id:204,type:2,minRoleLevel:1,maxRoleLevel:999,highDrop:53001,weight:14e4},{id:205,type:2,minRoleLevel:1,maxRoleLevel:999,highDrop:53005,weight:5e4},{id:206,type:2,minRoleLevel:1,maxRoleLevel:999,highDrop:53007,weight:1400},{id:207,type:2,minRoleLevel:1,maxRoleLevel:999,highDrop:53002,weight:13e4},{id:208,type:2,minRoleLevel:1,maxRoleLevel:999,highDrop:53006,weight:1e5},{id:209,type:2,minRoleLevel:1,maxRoleLevel:999,highDrop:53008,weight:13e3}],cc._RF.pop()},{}],Json_Broadcast:[function(e,t){"use strict";cc._RF.push(t,"7ccb6DNLypH27X40b0fV8Fb","Json_Broadcast"),e("Aft").JsonData.Broadcast=[{id:1,text:"1618",rules:[1,2,3,4,5,6,7,8]},{id:2,text:"1619"},{id:3,text:"1620",rules:[100,200,300,400,500,600]},{id:4,text:"1621"},{id:5,text:"1622"},{id:6,text:"1623",rules:[100,200,300,400,500,600]},{id:7,text:"1624"},{id:8,text:"1625"},{id:9,text:"1686"},{id:10,text:"1687"},{id:11,text:"1734"}],cc._RF.pop()},{}],Json_Bubble:[function(e,t){"use strict";cc._RF.push(t,"e7c1bYd2VZKRolYg33MLcZh","Json_Bubble"),e("Aft").JsonData.Bubble=[{id:1,type:1,text:"1445"},{id:2,type:1,text:"1446"},{id:3,type:1,text:"1447"},{id:4,type:1,text:"1448"},{id:5,type:1,text:"1449"},{id:6,type:1,text:"1450"},{id:7,type:1,text:"1451"},{id:8,type:1,text:"1452"},{id:9,type:1,text:"1453"},{id:10,type:1,text:"1454"},{id:11,type:1,text:"1455"},{id:12,type:1,text:"1456"},{id:13,type:1,text:"1457"},{id:14,type:1,text:"1458"},{id:15,type:1,text:"1459"},{id:16,type:1,text:"1460"},{id:17,type:1,text:"1461"},{id:18,type:1,text:"1462"},{id:19,type:1,text:"1503"},{id:20,type:1,text:"1504"},{id:21,type:1,text:"1505"},{id:22,type:1,text:"1506"},{id:23,type:1,text:"1507"},{id:24,type:1,text:"1508"},{id:25,type:1,text:"1509"},{id:26,type:1,text:"1510"},{id:27,type:1,text:"1511"},{id:28,type:1,text:"1512"},{id:29,type:1,text:"1714"},{id:30,type:1,text:"1715"},{id:31,type:1,text:"1716"},{id:101,type:2,text:"1463",heroId:43001},{id:102,type:2,text:"1464",heroId:43001},{id:103,type:2,text:"1465",heroId:43001},{id:201,type:2,text:"1466",heroId:43002},{id:202,type:2,text:"1467",heroId:43002},{id:203,type:2,text:"1468",heroId:43002},{id:301,type:2,text:"1469",heroId:43003},{id:302,type:2,text:"1470",heroId:43003},{id:303,type:2,text:"1471",heroId:43003},{id:401,type:2,text:"1472",heroId:43004},{id:402,type:2,text:"1473",heroId:43004},{id:403,type:2,text:"1474",heroId:43004},{id:501,type:2,text:"1475",heroId:43005},{id:502,type:2,text:"1476",heroId:43005},{id:503,type:2,text:"1477",heroId:43005},{id:601,type:2,text:"1478",heroId:43006},{id:602,type:2,text:"1479",heroId:43006},{id:603,type:2,text:"1480",heroId:43006},{id:701,type:2,text:"1481",heroId:43007},{id:702,type:2,text:"1482",heroId:43007},{id:703,type:2,text:"1483",heroId:43007},{id:801,type:2,text:"1484",heroId:43008},{id:802,type:2,text:"1485",heroId:43008},{id:803,type:2,text:"1486",heroId:43008}],cc._RF.pop()},{}],Json_Bullet:[function(e,t){"use strict";cc._RF.push(t,"43b2cXxOctJq4IjlmnFVweW","Json_Bullet"),e("Aft").JsonData.Bullet=[{id:1,icon:"1",iconBaseScale:2700,iconScale:4500,aimingPoint:1,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,orbit:"FFFFFF50",hitSpin:"0",roleHitSpin:"tower_bullet_hit",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"tower_bullet01_1_hit",boomSpinScale:5e3,AnimationName:"tower_bullet01_1_hit",isAOE:0,boomTime:0,damageRadius:30,damageAngle:360,high:40,speed:400,time:300,orbitWidth:8,isRotate:1,isFlyRotate:1,shotAudio:"tower_arrow_attack_one",bulletAudio:"enemy_attacked",isShock:0,isDestruction:1},{id:2,icon:"1_1",iconBaseScale:2880,iconScale:4800,aimingPoint:1,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,orbit:"FFCA0C64",hitSpin:"0",roleHitSpin:"tower_bullet_hit",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"tower_bullet01_2_hit",boomSpinScale:5e3,AnimationName:"tower_bullet01_1_hit",isAOE:0,boomTime:0,damageRadius:30,damageAngle:360,high:40,speed:400,time:300,orbitWidth:8,isRotate:1,isFlyRotate:1,shotAudio:"tower_arrow_attack_one",bulletAudio:"enemy_attacked",isShock:0,isDestruction:1},{id:3,icon:"1_2",iconBaseScale:2520,iconScale:4200,aimingPoint:1,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,orbit:"FF25FB64",hitSpin:"0",roleHitSpin:"tower_bullet_hit",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"tower_bullet01_2_hit",boomSpinScale:5e3,AnimationName:"tower_bullet01_1_hit",isAOE:0,boomTime:0,damageRadius:30,damageAngle:360,high:40,speed:400,time:300,orbitWidth:8,isRotate:1,isFlyRotate:1,shotAudio:"tower_arrow_attack_one",bulletAudio:"enemy_attacked",isShock:0,isDestruction:1},{id:4,icon:"3",iconBaseScale:7e3,iconScale:7e3,aimingPoint:2,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,orbit:"8.7878764E7",cartoon:"bullet_Rotation",hitSpin:"1",roleHitSpin:"tower_bullet_hit",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"tower_bullet03_hit",boomSpinScale:9e3,AnimationName:"tower_bullet03_hit",isAOE:1,boomTime:100,damageRadius:55,damageAngle:360,high:80,speed:600,time:300,orbitWidth:20,isRotate:0,isFlyRotate:1,shotAudio:"tower_mage_attack_one",bulletAudio:"tower_bullet_bomb",isShock:0,burrowDamageCoefficient:3e3,isDestruction:1},{id:5,icon:"3_1",iconBaseScale:7300,iconScale:7300,aimingPoint:2,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,orbit:"8.7878764E7",cartoon:"bullet_Rotation",hitSpin:"1",roleHitSpin:"tower_bullet_hit",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"tower_bullet03_hit",boomSpinScale:1e4,AnimationName:"tower_bullet03_hit",isAOE:1,boomTime:100,damageRadius:62,damageAngle:360,high:80,speed:600,time:300,orbitWidth:20,isRotate:0,isFlyRotate:1,shotAudio:"tower_mage_attack_one",bulletAudio:"tower_bullet_bomb",isShock:0,burrowDamageCoefficient:3e3,isDestruction:1},{id:6,icon:"3_2",iconBaseScale:7600,iconScale:7600,aimingPoint:2,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,orbit:"8.7878764E7",cartoon:"bullet_Rotation",hitSpin:"1",roleHitSpin:"tower_bullet_hit",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"tower_bullet03_hit",boomSpinScale:11e3,AnimationName:"tower_bullet03_hit",isAOE:1,boomTime:100,damageRadius:68,damageAngle:360,high:80,speed:600,time:300,orbitWidth:20,isRotate:0,isFlyRotate:1,shotAudio:"tower_mage_attack_one",bulletAudio:"tower_bullet_bomb",isShock:0,burrowDamageCoefficient:3e3,isDestruction:1},{id:7,icon:"2",iconBaseScale:6500,iconScale:6500,aimingPoint:1,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,tail:"bullet18_tail",orbit:"72FFF164",hitSpin:"0",roleHitSpin:"tower_bullet02_hit",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpinScale:5e3,isAOE:0,boomTime:0,damageRadius:30,damageAngle:360,high:0,speed:500,time:300,orbitWidth:20,isRotate:0,isFlyRotate:1,shotAudio:"tower_fire_attack_one",bulletAudio:"tower_bullet_magic",isShock:0,isDestruction:1},{id:8,icon:"2_1",iconBaseScale:6500,iconScale:6500,aimingPoint:1,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,tail:"bullet18_tail",orbit:"FFC23364",hitSpin:"0",roleHitSpin:"tower_bullet02_1_hit",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpinScale:5e3,isAOE:0,boomTime:0,damageRadius:30,damageAngle:360,high:0,speed:500,time:300,orbitWidth:20,isRotate:0,isFlyRotate:1,shotAudio:"tower_fire_attack_one",bulletAudio:"tower_bullet_magic",isShock:0,isDestruction:1},{id:9,icon:"2_2",iconBaseScale:6500,iconScale:6500,aimingPoint:1,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,tail:"bullet18_tail",orbit:"FF432464",hitSpin:"0",roleHitSpin:"tower_bullet02_2_hit",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpinScale:5e3,isAOE:0,boomTime:0,damageRadius:30,damageAngle:360,high:0,speed:500,time:300,orbitWidth:20,isRotate:0,isFlyRotate:1,shotAudio:"tower_fire_attack_one",bulletAudio:"tower_bullet_magic",isShock:0,isDestruction:1},{id:10,icon:"1_6",iconBaseScale:3e3,iconScale:5e3,aimingPoint:2,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,orbit:"FF6C3864",hitSpin:"1",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"tower_bullet03_hit",boomSpinScale:9e3,AnimationName:"tower_bullet03_hit",isAOE:1,boomTime:100,damageRadius:55,damageAngle:360,high:40,speed:400,time:500,orbitWidth:8,isRotate:0,isFlyRotate:1,shotAudio:"tower_arrow_attack_one",bulletAudio:"enemy_attacked",isShock:0,isDestruction:1},{id:11,icon:"3",iconBaseScale:7e3,iconScale:7e3,aimingPoint:2,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,orbit:"8.7878764E7",cartoon:"bullet_Rotation",hitSpin:"1",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"hero1_skill",boomSpinScale:9e3,AnimationName:"hero1_skill",isAOE:1,boomTime:100,damageRadius:70,damageAngle:360,high:80,speed:600,time:800,orbitWidth:0,isRotate:0,isFlyRotate:1,shotAudio:"bullet_10_shot",bulletAudio:"tower_hero_skill_flash",isShock:1,isDestruction:1},{id:12,icon:"3",iconBaseScale:7e3,iconScale:7e3,aimingPoint:2,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,hitSpin:"1",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"skill_runes",boomSpinScale:1e4,AnimationName:"skill_runes",isAOE:1,boomTime:300,damageRadius:140,damageAngle:360,high:0,speed:600,time:300,orbitWidth:0,isRotate:0,isFlyRotate:1,shotAudio:"tower_hero_skill_flash",bulletAudio:"enemy_attacked",isShock:1,isDestruction:1},{id:9999,icon:"3",iconBaseScale:7e3,iconScale:7e3,aimingPoint:2,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,hitSpin:"1",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpinScale:9e3,isAOE:1,boomTime:100,damageRadius:120,damageAngle:360,high:0,speed:600,time:300,orbitWidth:0,isRotate:0,isFlyRotate:1,shotAudio:"hero_zhangfei_paoxiao",bulletAudio:"enemy_attacked",isShock:1,isDestruction:1},{id:9998,icon:"3",iconBaseScale:7e3,iconScale:7e3,aimingPoint:2,isHitFly:0,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,hitSpin:"1",roleHitSpin:"hero1_slash_hit",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpinScale:9e3,isAOE:1,boomTime:100,damageRadius:120,damageAngle:360,high:0,speed:600,time:300,orbitWidth:0,isRotate:0,isFlyRotate:1,shotAudio:"hero_zhangfei_paoxiao",bulletAudio:"enemy_attacked",isShock:1,isDestruction:1},{id:9997,icon:"3",iconBaseScale:7e3,iconScale:7e3,aimingPoint:2,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,hitSpin:"1",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpinScale:9e3,isAOE:1,boomTime:100,damageRadius:1600,damageAngle:360,high:0,speed:600,time:300,orbitWidth:0,isRotate:0,isFlyRotate:1,isShock:1,isDestruction:1},{id:9996,icon:"3",iconBaseScale:7e3,iconScale:7e3,aimingPoint:2,isHitFly:0,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,hitSpin:"1",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpinScale:9e3,isAOE:1,boomTime:100,damageRadius:120,damageAngle:45,high:0,speed:600,time:300,orbitWidth:0,isRotate:0,isFlyRotate:1,shotAudio:"hero_zhangfei_paoxiao",bulletAudio:"enemy_attacked",isShock:1,isDestruction:1},{id:9995,icon:"3",iconBaseScale:7e3,iconScale:7e3,aimingPoint:2,isHitFly:0,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,hitSpin:"1",roleHitSpin:"tower_bullet_hit",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpinScale:9e3,isAOE:1,boomTime:100,damageRadius:120,damageAngle:360,high:0,speed:600,time:300,orbitWidth:0,isRotate:0,isFlyRotate:1,bulletAudio:"enemy_attacked",isShock:1,isDestruction:1},{id:13,icon:"3",iconBaseScale:7e3,iconScale:7e3,aimingPoint:2,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,hitSpin:"1",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"tower_bullet03_hit",boomSpinScale:9e3,AnimationName:"tower_bullet03_hit",isAOE:1,boomTime:100,damageRadius:80,damageAngle:360,high:0,speed:600,time:300,orbitWidth:0,isRotate:0,isFlyRotate:1,shotAudio:"hero_liubei_rende",bulletAudio:"enemy_attacked",isShock:1,isDestruction:1},{id:14,icon:"3",iconBaseScale:7e3,iconScale:7e3,aimingPoint:2,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,orbit:"8.7878764E7",cartoon:"bullet_Rotation",hitSpin:"1",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"hero7_skill_hit",boomSpinScale:5500,AnimationName:"hero7_skill_hit",isAOE:1,boomTime:100,damageRadius:55,damageAngle:360,high:80,speed:600,time:800,orbitWidth:0,isRotate:0,isFlyRotate:1,shotAudio:"bullet_14_shot",bulletAudio:"hero_xiaoqiao_bullet",isShock:1,touchOffBullet:[23],isDestruction:1},{id:15,icon:"3",iconBaseScale:7e3,iconScale:7e3,aimingPoint:2,isHitFly:0,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,orbit:"8.7878764E7",cartoon:"bullet_Rotation",hitSpin:"1",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"hero1_skill",boomSpinScale:9e3,AnimationName:"hero1_skill",isAOE:1,boomTime:100,damageRadius:100,damageAngle:360,high:80,speed:600,time:800,orbitWidth:0,isRotate:0,isFlyRotate:1,shotAudio:"tower_hero_skill_flash",bulletAudio:"tower_hero_skill_flash",isShock:1,isDestruction:1},{id:16,icon:"3",iconBaseScale:7e3,iconScale:7e3,aimingPoint:2,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,orbit:"8.7878764E7",cartoon:"bullet_Rotation",hitSpin:"1",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"tower_bullet03_hit",boomSpinScale:9e3,AnimationName:"tower_bullet03_hit",isAOE:1,boomTime:100,damageRadius:55,damageAngle:360,high:80,speed:600,time:300,orbitWidth:20,isRotate:0,isFlyRotate:1,shotAudio:"bullet_16_shot",bulletAudio:"tower_bullet_bomb",isShock:0,isDestruction:1},{id:17,icon:"1_7",iconBaseScale:3e3,iconScale:5e3,aimingPoint:1,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,orbit:"FF552564",hitSpin:"0",roleHitSpin:"hero5_skill_hit",isPenetrate:1,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"tower_bullet01_5_hit",boomSpinScale:5e3,AnimationName:"tower_bullet01_1_hit",isAOE:0,boomTime:0,damageRadius:30,damageAngle:360,high:0,speed:1e3,time:500,orbitWidth:8,isRotate:1,isFlyRotate:1,shotAudio:"bullet_17_shot",bulletAudio:"hero_huangzhong_bullet",isShock:0,isDestruction:0},{id:21,icon:"3",iconBaseScale:7e3,iconScale:7e3,aimingPoint:2,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,orbit:"8.7878764E7",cartoon:"bullet_Rotation",hitSpin:"1",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"skill_lighting",boomSpinScale:1e4,AnimationName:"skill_lighting",isAOE:1,boomTime:100,damageRadius:100,damageAngle:360,high:80,speed:600,time:800,orbitWidth:0,isRotate:0,isFlyRotate:1,shotAudio:"bullet_10_shot",bulletAudio:"hero_zhugeliang_bullet",isShock:1,isDestruction:1},{id:22,icon:"3",iconBaseScale:6e3,iconScale:6e3,aimingPoint:2,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,orbit:"8.7878764E7",cartoon:"bullet_Rotation",hitSpin:"1",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"hero7_skill_hit",boomSpinScale:6e3,AnimationName:"hero7_skill_hit",isAOE:1,boomTime:100,damageRadius:50,damageAngle:360,high:80,speed:600,time:800,orbitWidth:0,isRotate:0,isFlyRotate:1,shotAudio:"bullet_14_shot",bulletAudio:"hero_xiaoqiao_bullet",isShock:1,isDestruction:1},{id:24,icon:"3",iconBaseScale:9e3,iconScale:9e3,aimingPoint:2,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,orbit:"8.7878764E7",cartoon:"bullet_Rotation",hitSpin:"1",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"hero8_skill_hit",boomSpinScale:12e3,AnimationName:"hero8_skill_hit",isAOE:1,boomTime:100,damageRadius:95,damageAngle:360,high:80,speed:600,time:800,orbitWidth:0,isRotate:0,isFlyRotate:1,shotAudio:"bullet_10_shot",bulletAudio:"hero_lvbu_bullet",isShock:1,isDestruction:1},{id:25,icon:"5",iconBaseScale:1e4,iconScale:1e4,aimingPoint:2,isHitFly:0,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,orbit:"8.7878764E7",cartoon:"bullet_Rotation",hitSpin:"1",roleHitSpin:"tower_bullet_hit",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"tower_bullet05_hit",boomSpinScale:9e3,AnimationName:"tower_bullet05_hit",isAOE:1,boomTime:100,damageRadius:55,damageAngle:360,high:60,speed:1e3,time:500,orbitWidth:20,isRotate:0,isFlyRotate:1,shotAudio:"tower_mage_attack_one",bulletAudio:"tower_bullet_bomb",isShock:0,isDestruction:1},{id:26,icon:"2_3",iconBaseScale:5e3,iconScale:5e3,aimingPoint:1,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,tail:"bullet18_tail",orbit:"72FFF164",hitSpin:"0",roleHitSpin:"tower_bullet02_2_hit",flySpin:"bullet_zgl",flySpinName:"bullet_zgl",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpinScale:5e3,isAOE:0,boomTime:0,damageRadius:30,damageAngle:360,high:0,speed:650,time:300,orbitWidth:20,isRotate:0,isFlyRotate:1,shotAudio:"tower_fire_attack_one",bulletAudio:"tower_bullet_magic",isShock:0,isDestruction:1},{id:27,icon:"dc_bullet",iconBaseScale:5e3,iconScale:5e3,aimingPoint:1,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,tail:"bullet18_tail",orbit:"C233FF64",hitSpin:"0",roleHitSpin:"tower_bullet02_hit",flySpin:"bullet_dc",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpinScale:5e3,isAOE:0,boomTime:0,damageRadius:30,damageAngle:360,high:0,speed:650,time:300,orbitWidth:20,isRotate:0,isFlyRotate:1,shotAudio:"tower_fire_attack_one",bulletAudio:"tower_bullet_magic",isShock:0,isDestruction:1},{id:28,icon:"3_3",iconBaseScale:8e3,iconScale:8e3,aimingPoint:2,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,orbit:"FF474764",cartoon:"bullet_Rotation",hitSpin:"1",roleHitSpin:"tower_bullet_hit",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"tower_bullet03_hit",boomSpinScale:13e3,AnimationName:"tower_bullet03_hit",isAOE:1,boomTime:100,damageRadius:80,damageAngle:360,high:80,speed:600,time:300,orbitWidth:20,isRotate:0,isFlyRotate:1,shotAudio:"tower_mage_attack_one",bulletAudio:"tower_bullet_bomb",isShock:0,burrowDamageCoefficient:4e3,isDestruction:1},{id:29,icon:"3_6",iconBaseScale:7600,iconScale:7600,aimingPoint:2,isHitFly:0,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,orbit:"47EDFF",cartoon:"bullet_Rotation",hitSpin:"1",roleHitSpin:"tower_bullet_hit",isPenetrate:0,isGyration:0,isBoom:1,boomHeight:0,boomSpin:"tower_bullet03_6_stand",boomSpinScale:7600,AnimationName:"tower_bullet03_6_stand",isAOE:1,boomTime:100,damageRadius:68,damageAngle:360,high:80,speed:600,time:300,orbitWidth:20,isRotate:0,isFlyRotate:1,shotAudio:"tower_mage_attack_one",bulletAudio:"tower_bullet_bomb",isShock:0,touchOffBullet:[30,31],burrowDamageCoefficient:1e4,isDestruction:1},{id:30,icon:"3",iconBaseScale:7600,iconScale:7600,aimingPoint:2,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,hitSpin:"1",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"tower_bullet03_6_hit_up",boomSpinScale:15e3,AnimationName:"tower_bullet03_6_hit_up",isAOE:1,boomTime:100,damageRadius:68,damageAngle:360,high:80,speed:600,time:300,orbitWidth:20,isRotate:0,isFlyRotate:1,shotAudio:"tower_mage_attack_one",bulletAudio:"tower_bullet_bomb",isShock:0,burrowDamageCoefficient:1e4,isDestruction:1},{id:31,icon:"3",iconBaseScale:7600,iconScale:7600,aimingPoint:2,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:1,rotationAngle:1,hitSpin:"1",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"tower_bullet03_6_hit_down",boomSpinScale:15e3,AnimationName:"tower_bullet03_6_hit_down",isAOE:1,boomTime:100,damageRadius:68,damageAngle:360,high:80,speed:600,time:300,orbitWidth:20,isRotate:0,isFlyRotate:1,shotAudio:"tower_mage_attack_one",bulletAudio:"tower_bullet_bomb",isShock:0,burrowDamageCoefficient:1e4,isDestruction:1},{id:32,icon:"1_10",iconBaseScale:3e3,iconScale:7e3,aimingPoint:1,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,orbit:"FFCF25",hitSpin:"0",roleHitSpin:"tower_bullet01_10_hit",flySpin:"tower_bullet01_10",isPenetrate:1,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"tower_bullet01_5_hit",boomSpinScale:5e3,AnimationName:"tower_bullet01_1_hit",isAOE:0,boomTime:0,damageRadius:35,damageAngle:360,high:0,speed:1500,time:500,orbitWidth:12,isRotate:0,isFlyRotate:1,shotAudio:"bullet_17_shot",bulletAudio:"hero_huangzhong_bullet",isShock:0,isDestruction:1},{id:33,icon:"3_4",iconBaseScale:8500,iconScale:8500,aimingPoint:2,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,orbit:"8.7878764E7",cartoon:"bullet_Rotation",hitSpin:"1",roleHitSpin:"tower_bullet_hit",trailingPrefabName:"tnt_smoke_big",trailingAnimationName:"tnt_smoke_big",trailingIntervalTime:30,trailingIntervalSize:1e4,isPenetrate:0,isGyration:0,isBoom:0,boomHeight:280,boomSpin:"tower_bullet03_4_boomUp",boomSpinScale:8e3,AnimationName:"tower_bullet03_4_boomUp",isAOE:0,boomTime:100,damageRadius:0,damageAngle:360,high:120,speed:600,time:300,orbitWidth:20,isRotate:0,isFlyRotate:1,shotAudio:"tower_mage_attack_one",bulletAudio:"tower_bullet_bomb",isShock:0,touchOffBullet:[34,34,34,34,34,34],burrowDamageCoefficient:4e3,isDestruction:1},{id:34,icon:"3_5",iconBaseScale:8e3,iconScale:8e3,aimingPoint:2,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,orbit:"8.7878764E7",cartoon:"bullet_Rotation",hitSpin:"1",roleHitSpin:"tower_bullet_hit",trailingPrefabName:"tnt_smoke",trailingAnimationName:"tnt_smoke",trailingIntervalTime:30,trailingIntervalSize:1e4,isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"tower_bullet03_hit",boomSpinScale:8e3,AnimationName:"tower_bullet03_hit",isAOE:1,boomTime:100,damageRadius:50,damageAngle:360,high:0,speed:600,time:300,orbitWidth:20,isRotate:0,isFlyRotate:1,shotAudio:"tower_mage_attack_one",bulletAudio:"tower_bullet_bomb",isShock:0,burrowDamageCoefficient:4e3,isDestruction:1},{id:35,icon:"1_9",iconBaseScale:2520,iconScale:4200,aimingPoint:1,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,orbit:"FFCF2564",hitSpin:"0",roleHitSpin:"tower_bullet_hit",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"tower_bullet01_9_hit",boomSpinScale:5e3,AnimationName:"tower_bullet01_1_hit",isAOE:0,boomTime:0,damageRadius:30,damageAngle:360,high:40,speed:400,time:300,orbitWidth:8,isRotate:1,isFlyRotate:1,shotAudio:"tower_arrow_attack_one",bulletAudio:"enemy_attacked",isShock:0,isDestruction:1},{id:36,icon:"2_2",iconBaseScale:6500,iconScale:6500,aimingPoint:1,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,tail:"bullet18_tail",orbit:"FF432464",hitSpin:"1",roleHitSpin:"tower_bullet02_2_hit",flySpin:"tower_bullet06",flySpinName:"tower_bullet06",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"tower_bullet06_hit",boomSpinScale:1e4,AnimationName:"tower_bullet06_hit",isAOE:1,boomTime:100,damageRadius:100,damageAngle:360,high:0,speed:500,time:300,orbitWidth:20,isRotate:0,isFlyRotate:0,shotAudio:"tower_fire_attack_one",bulletAudio:"tower_bullet_magic",isShock:0,isDestruction:1},{id:37,icon:"3",iconBaseScale:1e4,iconScale:1e4,aimingPoint:2,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,orbit:"8.7878764E7",cartoon:"bullet_Rotation",hitSpin:"1",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"hero9_tower_skill_blizzard",boomSpinScale:1e4,AnimationName:"hero9_tower_skill_blizzard",isAOE:1,boomTime:400,damageRadius:0,damageAngle:360,high:80,speed:600,time:800,orbitWidth:0,isRotate:0,isFlyRotate:1,shotAudio:"bullet_14_shot",bulletAudio:"hero_xiaoqiao_bullet",isShock:0,isDestruction:1},{id:38,icon:"1_11",iconBaseScale:3e3,iconScale:5e3,aimingPoint:1,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,orbit:"25FF9B",hitSpin:"0",roleHitSpin:"tower_bullet01_11_hit",flySpin:"tower_bullet01_11",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"tower_bullet01_11_Insert",boomSpinScale:5e3,AnimationName:"tower_bullet01_1_hit",isAOE:0,boomTime:0,damageRadius:30,damageAngle:360,high:40,speed:400,time:500,orbitWidth:8,isRotate:1,isFlyRotate:1,shotAudio:"bullet_17_shot",bulletAudio:"hero_huangzhong_bullet",isShock:0,isDestruction:1},{id:39,icon:"2_3",iconBaseScale:7e3,iconScale:7e3,aimingPoint:1,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,tail:"bullet18_tail",orbit:"72FFF164",hitSpin:"0",roleHitSpin:"tower_bullet02_hit",flySpin:"tower_bullet02_3_sputtering",flySpinName:"tower_bullet02_3_sputtering",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpinScale:5e3,isAOE:0,boomTime:0,damageRadius:30,damageAngle:360,high:1,speed:420,time:300,orbitWidth:20,isRotate:0,isFlyRotate:1,shotAudio:"tower_fire_attack_one",bulletAudio:"tower_bullet_magic",isShock:0,isDestruction:1},{id:40,icon:"3",iconBaseScale:7e3,iconScale:7e3,aimingPoint:2,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,orbit:"8.7878764E7",cartoon:"bullet_Rotation",hitSpin:"1",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"hero6_tower_skill_hit",boomSpinScale:9e3,AnimationName:"hero6_tower_skill_hit",isAOE:1,boomTime:700,damageRadius:70,damageAngle:360,high:80,speed:600,time:800,orbitWidth:0,isRotate:0,isFlyRotate:1,shotAudio:"bullet_10_shot",bulletAudio:"tower_hero_skill_flash",isShock:1,touchOffBullet:[41],isDestruction:1},{id:41,icon:"3",iconBaseScale:7e3,iconScale:7e3,aimingPoint:2,isHitFly:0,isLightningChain:0,isFollow:0,isRoleBelow:1,rotationAngle:1,orbit:"8.7878764E7",cartoon:"bullet_Rotation",hitSpin:"1",roleHitSpin:"tower_bullet_hit",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"hero6_tower_skill_hit_down",boomSpinScale:11e3,AnimationName:"hero6_tower_skill_hit_down",isAOE:1,boomTime:100,damageRadius:90,damageAngle:360,high:80,speed:600,time:300,orbitWidth:20,isRotate:0,isFlyRotate:1,shotAudio:"tower_mage_attack_one",bulletAudio:"hero_xiaoqiao_bullet",isShock:0,isDestruction:1},{id:42,icon:"1_2",iconBaseScale:2520,iconScale:4200,aimingPoint:1,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,orbit:"FF252564",hitSpin:"0",roleHitSpin:"tower_bullet_hit",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"tower_bullet01_3_hit",boomSpinScale:5e3,AnimationName:"tower_bullet01_1_hit",isAOE:0,boomTime:0,damageRadius:30,damageAngle:360,high:40,speed:400,time:300,orbitWidth:8,isRotate:1,isFlyRotate:1,shotAudio:"tower_arrow_attack_one",bulletAudio:"enemy_attacked",isShock:0,isDestruction:1},{id:130,icon:"3",iconBaseScale:7e3,iconScale:7e3,aimingPoint:2,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,orbit:"8.7878764E7",cartoon:"bullet_Rotation",hitSpin:"1",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"hero1_skill",boomSpinScale:9e3,AnimationName:"hero1_skill",isAOE:1,boomTime:100,damageRadius:70,damageAngle:360,high:80,speed:600,time:800,orbitWidth:0,isRotate:0,isFlyRotate:1,shotAudio:"bullet_10_shot",bulletAudio:"tower_hero_skill_flash",isShock:1,touchOffBullet:[120],isDestruction:1},{id:122,icon:"3",iconBaseScale:1e4,iconScale:1e4,aimingPoint:2,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,orbit:"8.7878764E7",cartoon:"bullet_Rotation",hitSpin:"1",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"hero7_tower_skill_hit_down",boomSpinScale:1e4,AnimationName:"hero7_tower_skill_hit_down",isAOE:1,boomTime:100,damageRadius:65,damageAngle:360,high:80,speed:600,time:800,orbitWidth:0,isRotate:0,isFlyRotate:1,isShock:0,isDestruction:1},{id:123,icon:"3",iconBaseScale:7e3,iconScale:7e3,aimingPoint:2,isHitFly:0,isLightningChain:0,isFollow:0,isRoleBelow:1,rotationAngle:1,orbit:"8.7878764E7",cartoon:"bullet_Rotation",hitSpin:"1",roleHitSpin:"tower_bullet_hit",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"battle_poisonring",boomSpinScale:11e3,AnimationName:"battle_poisonring",isAOE:1,boomTime:100,damageRadius:90,damageAngle:360,high:80,speed:600,time:300,orbitWidth:20,isRotate:0,isFlyRotate:1,shotAudio:"tower_mage_attack_one",bulletAudio:"hero_xiaoqiao_bullet",isShock:0,isDestruction:1},{id:114,icon:"3",iconBaseScale:1e4,iconScale:1e4,aimingPoint:2,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,orbit:"8.7878764E7",cartoon:"bullet_Rotation",hitSpin:"1",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"hero7_tower_skill_hit",boomSpinScale:1e4,AnimationName:"hero7_tower_skill_hit",isAOE:1,boomTime:680,damageRadius:0,damageAngle:360,high:80,speed:600,time:800,orbitWidth:0,isRotate:0,isFlyRotate:1,shotAudio:"bullet_14_shot",bulletAudio:"hero_xiaoqiao_bullet",isShock:1,touchOffBullet:[123],isDestruction:1},{id:43,icon:"9",iconBaseScale:1e4,iconScale:1e4,aimingPoint:1,isHitFly:0,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,tail:"bullet18_tail",cartoon:"bullet_Rotation",hitSpin:"0",roleHitSpin:"tower_bullet02_2_hit",flySpin:"tower_bullet09",flySpinName:"tower_bullet09",trailingPrefabName:"hero12_tower_skill_smoke",trailingAnimationName:"hero12_tower_skill_smoke",trailingIntervalTime:120,trailingIntervalSize:1e4,isPenetrate:0,isGyration:0,maxDis:400,isRepel:[0,200,500],isBoom:0,boomHeight:0,boomSpinScale:5e3,isAOE:0,boomTime:0,damageRadius:60,damageAngle:360,high:0,speed:200,time:300,orbitWidth:0,isRotate:0,isFlyRotate:1,shotAudio:"tower_fire_attack_two",bulletAudio:"enemy_attacked",isShock:0,burrowDamageCoefficient:3e3,isDestruction:0},{id:44,icon:"3_6",iconBaseScale:1e4,iconScale:1e4,aimingPoint:2,isHitFly:0,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,orbit:"47EDFF",cartoon:"bullet_Rotation",hitSpin:"1",roleHitSpin:"tower_bullet_hit",flySpin:"skill_boom",flySpinName:"skill_boom_apper",isPenetrate:0,isGyration:0,isBoom:1,boomHeight:0,boomSpin:"skill_boom",boomSpinScale:1e4,AnimationName:"skill_boom_stand",isAOE:1,boomTime:100,damageRadius:68,damageAngle:360,high:80,speed:600,time:300,orbitWidth:20,isRotate:0,isFlyRotate:1,shotAudio:"tower_mage_attack_one",bulletAudio:"tower_bullet_bomb",isShock:0,touchOffBullet:[45],burrowDamageCoefficient:1e4,isDestruction:1},{id:45,icon:"3",iconBaseScale:1e4,iconScale:1e4,aimingPoint:2,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,hitSpin:"1",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"skill_boom",boomSpinScale:1e4,AnimationName:"skill_boom_hit",isAOE:1,boomTime:100,damageRadius:80,damageAngle:360,high:80,speed:600,time:300,orbitWidth:20,isRotate:0,isFlyRotate:1,shotAudio:"tower_mage_attack_one",bulletAudio:"tower_bullet_bomb",isShock:0,burrowDamageCoefficient:1e4,isDestruction:1},{id:46,icon:"3",iconBaseScale:6e3,iconScale:6e3,aimingPoint:2,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,orbit:"8.7878764E7",cartoon:"bullet_Rotation",hitSpin:"1",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"skill_poisonArrow",boomSpinScale:6e3,AnimationName:"skill_poisonArrow",isAOE:1,boomTime:100,damageRadius:50,damageAngle:360,high:80,speed:600,time:800,orbitWidth:0,isRotate:0,isFlyRotate:1,shotAudio:"bullet_14_shot",bulletAudio:"hero_xiaoqiao_bullet",isShock:1,isDestruction:1},{id:47,icon:"3",iconBaseScale:6e3,iconScale:6e3,aimingPoint:2,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,orbit:"8.7878764E7",cartoon:"bullet_Rotation",hitSpin:"1",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpinScale:6e3,isAOE:1,boomTime:100,damageRadius:50,damageAngle:360,high:80,speed:600,time:800,orbitWidth:0,isRotate:0,isFlyRotate:1,shotAudio:"bullet_14_shot",bulletAudio:"hero_xiaoqiao_bullet",isShock:1,isDestruction:1},{id:48,icon:"3",iconBaseScale:6e3,iconScale:6e3,aimingPoint:2,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,orbit:"8.7878764E7",cartoon:"bullet_Rotation",hitSpin:"1",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpinScale:6e3,isAOE:1,boomTime:100,damageRadius:50,damageAngle:360,high:80,speed:600,time:800,orbitWidth:0,isRotate:0,isFlyRotate:1,shotAudio:"bullet_14_shot",bulletAudio:"hero_xiaoqiao_bullet",isShock:1,isDestruction:1},{id:49,icon:"3",iconBaseScale:6e3,iconScale:6e3,aimingPoint:2,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,orbit:"8.7878764E7",cartoon:"bullet_Rotation",hitSpin:"1",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpinScale:6e3,isAOE:1,boomTime:100,damageRadius:50,damageAngle:360,high:80,speed:600,time:800,orbitWidth:0,isRotate:0,isFlyRotate:1,shotAudio:"bullet_14_shot",bulletAudio:"hero_xiaoqiao_bullet",isShock:1,isDestruction:1},{id:50,icon:"3",iconBaseScale:6e3,iconScale:6e3,aimingPoint:2,isHitFly:1,isLightningChain:0,isFollow:1,isRoleBelow:0,rotationAngle:1,hitSpin:"1",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"hero10_lighting",boomSpinScale:6e3,AnimationName:"hero10_lighting",isAOE:0,boomTime:100,damageRadius:50,damageAngle:360,high:80,speed:0,time:800,orbitWidth:0,isRotate:0,isFlyRotate:1,shotAudio:"bullet_14_shot",bulletAudio:"hero_xiaoqiao_bullet",isShock:0,isDestruction:1},{id:51,icon:"3",iconBaseScale:1e4,iconScale:1e4,aimingPoint:2,isHitFly:1,isLightningChain:1,isFollow:0,isRoleBelow:0,rotationAngle:1,hitSpin:"1",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"hero10_skill_lightningChain",boomSpinScale:1e4,AnimationName:"hero10_skill_lightningChain",isAOE:0,boomTime:100,damageRadius:50,damageAngle:360,high:0,speed:800,time:300,orbitWidth:0,isRotate:0,isFlyRotate:1,shotAudio:"bullet_14_shot",bulletAudio:"hero_xiaoqiao_bullet",isShock:1,isDestruction:1},{id:52,icon:"9_1",iconBaseScale:1e4,iconScale:1e4,aimingPoint:1,isHitFly:0,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,tail:"bullet18_tail",cartoon:"bullet_Rotation",hitSpin:"0",roleHitSpin:"tower_bullet02_2_hit",flySpin:"tower_bullet09_1",flySpinName:"tower_bullet09_1",trailingPrefabName:"tnt_smoke_big",trailingAnimationName:"tnt_smoke_big",trailingIntervalTime:120,trailingIntervalSize:3e4,isPenetrate:0,isGyration:0,maxDis:400,isRepel:[1e4,200,500],isBoom:0,boomHeight:0,boomSpinScale:5e3,isAOE:0,boomTime:0,damageRadius:60,damageAngle:360,high:0,speed:200,time:300,orbitWidth:0,isRotate:0,isFlyRotate:1,shotAudio:"tower_fire_attack_one",bulletAudio:"enemy_attacked",isShock:0,burrowDamageCoefficient:4e3,isDestruction:0},{id:53,icon:"2_3",iconBaseScale:1e4,iconScale:1e4,aimingPoint:1,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:0,tail:"bullet18_tail",orbit:"72FFF164",hitSpin:"0",roleHitSpin:"tower_bullet10_hit",flySpin:"tower_bullet10_2",flySpinName:"tower_bullet10_2",isPenetrate:1,isGyration:1,maxDis:400,isBoom:0,boomHeight:0,boomSpinScale:1e4,isAOE:0,boomTime:0,damageRadius:30,damageAngle:360,high:0,speed:350,time:300,orbitWidth:20,isRotate:0,isFlyRotate:0,shotAudio:"tower_fire_attack_one",bulletAudio:"tower_bullet_magic",isShock:0,isDestruction:1},{id:54,icon:"7",iconBaseScale:2700,iconScale:4500,aimingPoint:1,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,orbit:"FF25FB64 ",hitSpin:"0",roleHitSpin:"tower_bullet_hit",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"tower_bullet07_hit",boomSpinScale:5e3,AnimationName:"tower_bullet01_1_hit",isAOE:0,boomTime:0,damageRadius:30,damageAngle:360,high:40,speed:400,time:300,orbitWidth:8,isRotate:1,isFlyRotate:1,shotAudio:"tower_arrow_attack_one",bulletAudio:"enemy_attacked",isShock:0,isDestruction:1},{id:55,icon:"3",iconBaseScale:7e3,iconScale:7e3,aimingPoint:2,isHitFly:1,isLightningChain:0,isFollow:0,isRoleBelow:0,rotationAngle:1,orbit:"8.7878764E7",cartoon:"bullet_Rotation",hitSpin:"1",isPenetrate:0,isGyration:0,isBoom:0,boomHeight:0,boomSpin:"kill_boom",boomSpinScale:5e3,AnimationName:"kill_boom",isAOE:1,boomTime:100,damageRadius:55,damageAngle:360,high:80,speed:600,time:300,orbitWidth:20,isRotate:0,isFlyRotate:1,shotAudio:"bullet_16_shot",bulletAudio:"tower_bullet_bomb",isShock:0,isDestruction:1}],cc._RF.pop()},{}],Json_Chapter:[function(e,t){"use strict";cc._RF.push(t,"d1560JcRSxBaYqbivemowby","Json_Chapter"),e("Aft").JsonData.Chapter=[{id:1,name:"42001",bg:["chapter0-1/chapter0-1","chapter0-2/chapter0-2"],starJudge:[16,22,30],starReward1:[{key:2001,value:1}],starReward2:[{key:2001,value:1}],starReward3:[{key:2001,value:1}],bgm:"bgm_chapter01",desc:"42011",areaLogo:"WorldMap_Force_Shu",areaId:1,areaRatio:7e3,areaPic:"WorldMap_Shu",itemOffset:[-496,-18],headOffset:[79,15],nameOffset:[-60,-11],maxStar:30,hangUpPic:"chapter0-2/chapterHangUp",isOpen:1,selected:"WorldMap_Shu",normal:"WorldMap_Shu1",endIcon:"Battle_End",handbookBg:"Pictorial_Enemy_Bg1",sceneEffects:"battle_map1_leaf",isShowSunshine:1,defendHeroAverageLevel:1,tipsDirection:1},{id:2,name:"42002",bg:["chapter1-1/chapter1-1","chapter1-2/chapter1-2","chapter1-3/chapter1-3"],starJudge:[20,40,60],starReward1:[{key:2001,value:1}],starReward2:[{key:2001,value:1}],starReward3:[{key:2001,value:2}],bgm:"bgm_chapter01",desc:"42012",areaLogo:"WorldMap_Force_Man",areaId:2,areaRatio:8e3,areaPic:"WorldMap_Man",itemOffset:[-418,-566],headOffset:[86,14],nameOffset:[-50,-20],arrowOffset:[-550,-279],arrowAngle:125,arrowSize:[28e3,2e4],maxStar:60,hangUpPic:"chapter1-3/chapter1-battle",isOpen:1,selected:"WorldMap_Man",normal:"WorldMap_Man1",endIcon:"Battle_End1",handbookBg:"Pictorial_Enemy_Bg4",sceneEffects:"battle_map2",isShowSunshine:0,defendHeroAverageLevel:1,tipsDirection:2},{id:3,name:"42003",bg:["chapter2-1/chapter2-1","chapter2-2/chapter2-2","chapter2-3/chapter2-3"],starJudge:[20,40,60],starReward1:[{key:2001,value:1}],starReward2:[{key:2001,value:1}],starReward3:[{key:2001,value:3}],bgm:"bgm_chapter01",desc:"42013",areaLogo:"WorldMap_Force_Jing",areaId:3,areaRatio:9e3,areaPic:"WorldMap_Jing",itemOffset:[41,-299],headOffset:[78,-6],nameOffset:[-50,3],arrowOffset:[-51,-450],arrowAngle:-130,arrowSize:[2e4,2e4],maxStar:60,hangUpPic:"chapter2-3/chapter2-battle",isOpen:1,selected:"WorldMap_Jing",normal:"WorldMap_Jing1",endIcon:"Battle_End2",handbookBg:"Pictorial_Enemy_Bg2",sceneEffects:"battle_map3",isShowSunshine:0,defendHeroAverageLevel:2,tipsDirection:3},{id:4,name:"42004",bg:["chapter4-1/chapter4-1","chapter4-2/chapter4-2","chapter4-3/chapter4-3"],starJudge:[20,40,60],starReward1:[{key:2001,value:1}],starReward2:[{key:2001,value:1}],starReward3:[{key:2001,value:3}],bgm:"bgm_chapter01",desc:"42014",areaLogo:"WorldMap_Force_Wu",areaId:4,areaRatio:9e3,areaPic:"WorldMap_Wu",itemOffset:[551,-260],headOffset:[73,-10],nameOffset:[-50,-10],arrowOffset:[380,-380],arrowAngle:185,arrowSize:[2e4,-2e4],maxStar:60,hangUpPic:"chapter4-3/chapter4-battle",isOpen:1,selected:"WorldMap_Wu",normal:"WorldMap_Wu1",endIcon:"Battle_End3",handbookBg:"Pictorial_Enemy_Bg3",sceneEffects:"battle_map4",isShowSunshine:0,defendHeroAverageLevel:3,tipsDirection:4},{id:5,name:"42005",bg:["chapter5-1/chapter5-1","chapter5-2/chapter5-2","chapter5-3/chapter5-3"],starJudge:[20,40,60],starReward1:[{key:2001,value:1}],starReward2:[{key:2001,value:1}],starReward3:[{key:2001,value:3}],bgm:"bgm_chapter01",desc:"42015",areaLogo:"WorldMap_Force_Wei",areaId:5,areaRatio:9e3,areaPic:"WorldMap_Wei",itemOffset:[411,121],headOffset:[60,-14],nameOffset:[-49,-7],arrowOffset:[430,-68],arrowAngle:-60,arrowSize:[2e4,2e4],maxStar:60,hangUpPic:"chapter5-3/chapter5-battle",isOpen:1,selected:"WorldMap_Wei",normal:"WorldMap_Wei1",endIcon:"Battle_End4",handbookBg:"Pictorial_Enemy_Bg3",sceneEffects:"battle_map5",isShowSunshine:1,defendHeroAverageLevel:4,tipsDirection:1},{id:6,name:"42006",bg:["chapter6-1/chapter6-1","chapter6-2/chapter6-2","chapter6-3/chapter6-3"],starJudge:[20,40,60],starReward1:[{key:2001,value:1}],starReward2:[{key:2001,value:1}],starReward3:[{key:2001,value:3}],bgm:"bgm_chapter01",desc:"42016",areaLogo:"WorldMap_Force_Han",areaId:6,areaRatio:12e3,areaPic:"WorldMap_Han",itemOffset:[82,124],headOffset:[45,-41],nameOffset:[-48,-7],arrowOffset:[229,183],arrowAngle:25,arrowSize:[2e4,2e4],maxStar:60,hangUpPic:"chapter6-3/chapter6-battle",isOpen:1,selected:"WorldMap_Han",normal:"WorldMap_Han1",endIcon:"Battle_End5",handbookBg:"Pictorial_Enemy_Bg3",sceneEffects:"battle_map6",isShowSunshine:0,defendHeroAverageLevel:4,tipsDirection:2},{id:7,name:"42007",bg:["chapter7-1/chapter7-1","chapter7-2/chapter7-2","chapter7-3/chapter7-3"],starJudge:[20,40,60],starReward1:[{key:2001,value:1}],starReward2:[{key:2001,value:1}],starReward3:[{key:2001,value:3}],bgm:"bgm_chapter01",desc:"42017",areaLogo:"WorldMap_Force_Liang",areaId:7,areaRatio:9e3,areaPic:"WorldMap_Liang",itemOffset:[-174,427],headOffset:[56,-35],nameOffset:[-53,-11],arrowOffset:[-76,184],arrowAngle:-40,arrowSize:[2e4,-2e4],maxStar:60,hangUpPic:"chapter7-3/chapter7-battle",isOpen:1,selected:"WorldMap_Liang",normal:"WorldMap_Liang1",endIcon:"Battle_End6",handbookBg:"Pictorial_Enemy_Bg3",sceneEffects:"battle_map7",isShowSunshine:0,defendHeroAverageLevel:4,tipsDirection:3},{id:8,name:"42009",bg:["chapter8-1/chapter8-1","chapter8-2/chapter8-2","chapter8-3/chapter8-3"],starJudge:[20,40,60],starReward1:[{key:2001,value:1}],starReward2:[{key:2001,value:1}],starReward3:[{key:2001,value:3}],bgm:"bgm_chapter01",desc:"42019",areaLogo:"WorldMap_Force_Ji",areaId:9,areaRatio:14500,areaPic:"WorldMap_Ji",itemOffset:[255,400],headOffset:[60,-9],nameOffset:[-46,-23],arrowOffset:[125,449],arrowAngle:-20,arrowSize:[-2e4,2e4],maxStar:60,hangUpPic:"chapter8-3/chapter8-battle",isOpen:1,selected:"WorldMap_Ji",normal:"WorldMap_Ji1",endIcon:"Battle_End7",handbookBg:"Pictorial_Enemy_Bg3",sceneEffects:"battle_map5",isShowSunshine:0,defendHeroAverageLevel:4,tipsDirection:4},{id:9,name:"42008",bg:["chapter9-1/chapter9-1","chapter9-2/chapter9-2","chapter9-3/chapter9-3"],starJudge:[20,40,60],starReward1:[{key:2001,value:1}],starReward2:[{key:2001,value:1}],starReward3:[{key:2001,value:3}],bgm:"bgm_chapter01",desc:"42018",areaLogo:"WorldMap_Force_Huang",areaId:8,areaRatio:17e3,areaPic:"WorldMap_Huang",itemOffset:[597,308],headOffset:[59,-24],nameOffset:[-48,-4],arrowOffset:[458,393],arrowAngle:165,arrowSize:[15e3,15e3],maxStar:60,hangUpPic:"chapter9-3/chapter9-battle",isOpen:1,selected:"WorldMap_Huang",normal:"WorldMap_Huang1",endIcon:"Battle_End8",handbookBg:"Pictorial_Enemy_Bg3",sceneEffects:"battle_map5",isShowSunshine:0,defendHeroAverageLevel:4,tipsDirection:1},{id:10,name:"42010",bg:["chapter10-1/chapter10-1","chapter10-2/chapter10-2","chapter10-3/chapter10-3"],starJudge:[20,40,60],starReward1:[{key:2001,value:1}],starReward2:[{key:2001,value:1}],starReward3:[{key:2001,value:3}],bgm:"bgm_chapter01",desc:"42020",areaLogo:"WorldMap_Force_Liao",areaId:10,areaRatio:1e4,areaPic:"WorldMap_Liao",itemOffset:[620,671],headOffset:[95,12],nameOffset:[-49,2],arrowOffset:[723,496],arrowAngle:-120,arrowSize:[32e3,2e4],maxStar:60,hangUpPic:"chapter10-3/chapter10-battle",isOpen:1,selected:"WorldMap_Liao",normal:"WorldMap_Liao1",endIcon:"Battle_End9",handbookBg:"Pictorial_Enemy_Bg3",sceneEffects:"battle_map10",isShowSunshine:0,defendHeroAverageLevel:4,tipsDirection:2},{id:9991,name:"42002",bg:["chapter1-1/chapter1-1","chapter1-2/chapter1-2","chapter1-3/chapter1-3"],starJudge:[20,40,60],starReward1:[{key:2001,value:1}],starReward2:[{key:2001,value:1}],starReward3:[{key:2001,value:2}],bgm:"bgm_chapter01",desc:"42012",areaLogo:"WorldMap_Force_Man",areaId:2,areaRatio:8e3,areaPic:"WorldMap_Man",itemOffset:[-418,-566],headOffset:[86,14],nameOffset:[-50,-20],arrowOffset:[-550,-279],arrowAngle:125,arrowSize:[28e3,2e4],maxStar:60,hangUpPic:"chapter1-3/chapter1-battle",isOpen:1,selected:"WorldMap_Man",normal:"WorldMap_Man1",endIcon:"Battle_End_Nian",handbookBg:"Pictorial_Enemy_Bg4",sceneEffects:"battle_map2",isShowSunshine:0,defendHeroAverageLevel:1,tipsDirection:2}],cc._RF.pop()},{}],Json_DefendEffect:[function(e,t){"use strict";cc._RF.push(t,"5e8c3UU0PVPE5t8p8hNeFwd","Json_DefendEffect"),e("Aft").JsonData.DefendEffect=[{id:1,times:1,progressTime:800,levelTime:500},{id:2,times:2,progressTime:800,levelTime:500},{id:3,times:3,progressTime:800,levelTime:400},{id:4,times:4,progressTime:800,levelTime:300},{id:5,times:5,progressTime:800,levelTime:240},{id:6,times:6,progressTime:800,levelTime:200},{id:7,times:7,progressTime:800,levelTime:175},{id:8,times:8,progressTime:800,levelTime:150},{id:9,times:9,progressTime:800,levelTime:140},{id:10,times:10,progressTime:800,levelTime:120}],cc._RF.pop()},{}],Json_DefendLevelReward:[function(e,t){"use strict";cc._RF.push(t,"5f40bTlDYVLl7TsJYMuMoWd","Json_DefendLevelReward"),e("Aft").JsonData.DefendLevelReward=[{id:1,level:1,hereExp:3},{id:2,level:2,hereExp:3},{id:3,level:3,hereExp:3},{id:4,level:4,hereExp:3},{id:5,level:5,hereExp:3},{id:6,level:6,hereExp:3},{id:7,level:7,hereExp:3},{id:8,level:8,hereExp:3},{id:9,level:9,hereExp:3},{id:10,level:10,hereExp:4},{id:11,level:11,hereExp:4},{id:12,level:12,hereExp:4},{id:13,level:13,hereExp:4},{id:14,level:14,hereExp:4},{id:15,level:15,hereExp:4},{id:16,level:16,hereExp:4},{id:17,level:17,hereExp:4},{id:18,level:18,hereExp:4},{id:19,level:19,hereExp:4},{id:20,level:20,hereExp:4},{id:21,level:21,hereExp:4},{id:22,level:22,hereExp:4},{id:23,level:23,hereExp:4},{id:24,level:24,hereExp:4},{id:25,level:25,hereExp:4},{id:26,level:26,hereExp:4},{id:27,level:27,hereExp:4},{id:28,level:28,hereExp:5},{id:29,level:29,hereExp:5},{id:30,level:30,hereExp:5},{id:31,level:31,hereExp:5},{id:32,level:32,hereExp:5},{id:33,level:33,hereExp:5},{id:34,level:34,hereExp:5},{id:35,level:35,hereExp:5},{id:36,level:36,hereExp:5},{id:37,level:37,hereExp:5},{id:38,level:38,hereExp:5},{id:39,level:39,hereExp:5},{id:40,level:40,hereExp:5},{id:41,level:41,hereExp:5},{id:42,level:42,hereExp:5},{id:43,level:43,hereExp:5},{id:44,level:44,hereExp:5},{id:45,level:45,hereExp:5},{id:46,level:46,hereExp:5},{id:47,level:47,hereExp:5},{id:48,level:48,hereExp:5},{id:49,level:49,hereExp:5},{id:50,level:50,hereExp:5},{id:51,level:51,hereExp:6},{id:52,level:52,hereExp:5},{id:53,level:53,hereExp:5},{id:54,level:54,hereExp:5},{id:55,level:55,hereExp:5},{id:56,level:56,hereExp:5},{id:57,level:57,hereExp:5},{id:58,level:58,hereExp:6},{id:59,level:59,hereExp:6},{id:60,level:60,hereExp:6},{id:61,level:61,hereExp:6},{id:62,level:62,hereExp:6},{id:63,level:63,hereExp:6},{id:64,level:64,hereExp:6},{id:65,level:65,hereExp:6},{id:66,level:66,hereExp:6},{id:67,level:67,hereExp:6},{id:68,level:68,hereExp:6},{id:69,level:69,hereExp:6},{id:70,level:70,hereExp:6},{id:71,level:71,hereExp:7},{id:72,level:72,hereExp:7},{id:73,level:73,hereExp:7},{id:74,level:74,hereExp:7},{id:75,level:75,hereExp:7},{id:76,level:76,hereExp:7},{id:77,level:77,hereExp:7},{id:78,level:78,hereExp:7},{id:79,level:79,hereExp:7},{id:80,level:80,hereExp:7},{id:81,level:81,hereExp:7},{id:82,level:82,hereExp:7},{id:83,level:83,hereExp:7},{id:84,level:84,hereExp:7},{id:85,level:85,hereExp:7},{id:86,level:86,hereExp:7},{id:87,level:87,hereExp:8},{id:88,level:88,hereExp:8},{id:89,level:89,hereExp:8},{id:90,level:90,hereExp:8},{id:91,level:91,hereExp:8},{id:92,level:92,hereExp:8},{id:93,level:93,hereExp:8},{id:94,level:94,hereExp:8},{id:95,level:95,hereExp:8},{id:96,level:96,hereExp:8},{id:97,level:97,hereExp:8},{id:98,level:98,hereExp:8},{id:99,level:99,hereExp:8},{id:100,level:100,hereExp:8},{id:101,level:101,hereExp:8},{id:102,level:102,hereExp:8},{id:103,level:103,hereExp:8},{id:104,level:104,hereExp:8},{id:105,level:105,hereExp:8},{id:106,level:106,hereExp:8},{id:107,level:107,hereExp:8},{id:108,level:108,hereExp:8},{id:109,level:109,hereExp:8},{id:110,level:110,hereExp:8},{id:111,level:111,hereExp:8},{id:112,level:112,hereExp:8},{id:113,level:113,hereExp:8},{id:114,level:114,hereExp:8},{id:115,level:115,hereExp:8},{id:116,level:116,hereExp:8},{id:117,level:117,hereExp:9},{id:118,level:118,hereExp:9},{id:119,level:119,hereExp:9},{id:120,level:120,hereExp:9},{id:121,level:121,hereExp:9},{id:122,level:122,hereExp:9},{id:123,level:123,hereExp:9},{id:124,level:124,hereExp:9},{id:125,level:125,hereExp:9},{id:126,level:126,hereExp:9},{id:127,level:127,hereExp:9},{id:128,level:128,hereExp:9},{id:129,level:129,hereExp:9},{id:130,level:130,hereExp:9},{id:131,level:131,hereExp:9},{id:132,level:132,hereExp:9},{id:133,level:133,hereExp:9},{id:134,level:134,hereExp:9},{id:135,level:135,hereExp:9},{id:136,level:136,hereExp:10},{id:137,level:137,hereExp:10},{id:138,level:138,hereExp:10},{id:139,level:139,hereExp:10},{id:140,level:140,hereExp:10},{id:141,level:141,hereExp:10},{id:142,level:142,hereExp:10},{id:143,level:143,hereExp:10},{id:144,level:144,hereExp:10},{id:145,level:145,hereExp:10},{id:146,level:146,hereExp:10},{id:147,level:147,hereExp:11},{id:148,level:148,hereExp:11},{id:149,level:149,hereExp:11},{id:150,level:150,hereExp:11},{id:151,level:151,hereExp:11},{id:152,level:152,hereExp:11},{id:153,level:153,hereExp:11},{id:154,level:154,hereExp:11},{id:155,level:155,hereExp:11},{id:156,level:156,hereExp:11},{id:157,level:157,hereExp:11},{id:158,level:158,hereExp:11},{id:159,level:159,hereExp:11},{id:160,level:160,hereExp:11},{id:161,level:161,hereExp:11},{id:162,level:162,hereExp:11},{id:163,level:163,hereExp:11},{id:164,level:164,hereExp:11},{id:165,level:165,hereExp:11},{id:166,level:166,hereExp:11},{id:167,level:167,hereExp:11},{id:168,level:168,hereExp:11},{id:169,level:169,hereExp:11},{id:170,level:170,hereExp:11},{id:171,level:171,hereExp:11},{id:172,level:172,hereExp:11},{id:173,level:173,hereExp:11},{id:174,level:174,hereExp:11},{id:175,level:175,hereExp:11},{id:176,level:176,hereExp:12},{id:177,level:177,hereExp:12},{id:178,level:178,hereExp:12},{id:179,level:179,hereExp:12},{id:180,level:180,hereExp:12},{id:181,level:181,hereExp:12},{id:182,level:182,hereExp:12},{id:183,level:183,hereExp:12},{id:184,level:184,hereExp:12},{id:185,level:185,hereExp:12},{id:186,level:186,hereExp:12},{id:187,level:187,hereExp:12},{id:188,level:188,hereExp:12},{id:189,level:189,hereExp:12},{id:190,level:190,hereExp:12},{id:191,level:191,hereExp:12},{id:192,level:192,hereExp:12},{id:193,level:193,hereExp:12},{id:194,level:194,hereExp:12},{id:195,level:195,hereExp:12},{id:196,level:196,hereExp:13},{id:197,level:197,hereExp:13},{id:198,level:198,hereExp:13},{id:199,level:199,hereExp:13},{id:200,level:200,hereExp:13},{id:201,level:201,hereExp:13},{id:202,level:202,hereExp:13},{id:203,level:203,hereExp:13},{id:204,level:204,hereExp:13},{id:205,level:205,hereExp:13},{id:206,level:206,hereExp:14},{id:207,level:207,hereExp:14},{id:208,level:208,hereExp:14},{id:209,level:209,hereExp:14},{id:210,level:210,hereExp:14},{id:211,level:211,hereExp:14},{id:212,level:212,hereExp:14},{id:213,level:213,hereExp:14},{id:214,level:214,hereExp:14},{id:215,level:215,hereExp:14},{id:216,level:216,hereExp:14},{id:217,level:217,hereExp:14},{id:218,level:218,hereExp:14},{id:219,level:219,hereExp:14},{id:220,level:220,hereExp:14},{id:221,level:221,hereExp:14},{id:222,level:222,hereExp:14},{id:223,level:223,hereExp:14},{id:224,level:224,hereExp:14},{id:225,level:225,hereExp:14},{id:226,level:226,hereExp:14},{id:227,level:227,hereExp:14},{id:228,level:228,hereExp:14},{id:229,level:229,hereExp:14},{id:230,level:230,hereExp:14},{id:231,level:231,hereExp:14},{id:232,level:232,hereExp:14},{id:233,level:233,hereExp:14},{id:234,level:234,hereExp:14},{id:235,level:235,hereExp:14},{id:236,level:236,hereExp:15},{id:237,level:237,hereExp:15},{id:238,level:238,hereExp:15},{id:239,level:239,hereExp:15},{id:240,level:240,hereExp:15},{id:241,level:241,hereExp:15},{id:242,level:242,hereExp:15},{id:243,level:243,hereExp:15},{id:244,level:244,hereExp:15},{id:245,level:245,hereExp:15},{id:246,level:246,hereExp:15},{id:247,level:247,hereExp:15},{id:248,level:248,hereExp:15},{id:249,level:249,hereExp:15},{id:250,level:250,hereExp:15},{id:251,level:251,hereExp:16},{id:252,level:252,hereExp:16},{id:253,level:253,hereExp:16},{id:254,level:254,hereExp:16},{id:255,level:255,hereExp:16},{id:256,level:256,hereExp:16},{id:257,level:257,hereExp:16},{id:258,level:258,hereExp:16},{id:259,level:259,hereExp:16},{id:260,level:260,hereExp:16},{id:261,level:261,hereExp:16},{id:262,level:262,hereExp:16},{id:263,level:263,hereExp:16},{id:264,level:264,hereExp:16},{id:265,level:265,hereExp:17},{id:266,level:266,hereExp:17},{id:267,level:267,hereExp:17},{id:268,level:268,hereExp:17},{id:269,level:269,hereExp:17},{id:270,level:270,hereExp:17},{id:271,level:271,hereExp:17},{id:272,level:272,hereExp:17},{id:273,level:273,hereExp:17},{id:274,level:274,hereExp:17},{id:275,level:275,hereExp:17},{id:276,level:276,hereExp:17},{id:277,level:277,hereExp:17},{id:278,level:278,hereExp:17},{id:279,level:279,hereExp:17},{id:280,level:280,hereExp:17},{id:281,level:281,hereExp:17},{id:282,level:282,hereExp:17},{id:283,level:283,hereExp:17},{id:284,level:284,hereExp:17},{id:285,level:285,hereExp:17},{id:286,level:286,hereExp:17},{id:287,level:287,hereExp:17},{id:288,level:288,hereExp:17},{id:289,level:289,hereExp:17},{id:290,level:290,hereExp:17},{id:291,level:291,hereExp:17},{id:292,level:292,hereExp:17},{id:293,level:293,hereExp:17},{id:294,level:294,hereExp:17},{id:295,level:295,hereExp:18},{id:296,level:296,hereExp:18},{id:297,level:297,hereExp:18},{id:298,level:298,hereExp:18},{id:299,level:299,hereExp:18},{id:300,level:300,hereExp:18},{id:301,level:301,hereExp:18},{id:302,level:302,hereExp:18},{id:303,level:303,hereExp:18},{id:304,level:304,hereExp:18},{id:305,level:305,hereExp:18},{id:306,level:306,hereExp:18},{id:307,level:307,hereExp:18},{id:308,level:308,hereExp:18},{id:309,level:309,hereExp:18},{id:310,level:310,hereExp:18},{id:311,level:311,hereExp:18},{id:312,level:312,hereExp:18},{id:313,level:313,hereExp:18},{id:314,level:314,hereExp:18},{id:315,level:315,hereExp:18},{id:316,level:316,hereExp:19},{id:317,level:317,hereExp:19},{id:318,level:318,hereExp:19},{id:319,level:319,hereExp:19},{id:320,level:320,hereExp:19},{id:321,level:321,hereExp:19},{id:322,level:322,hereExp:19},{id:323,level:323,hereExp:19},{id:324,level:324,hereExp:20},{id:325,level:325,hereExp:20},{id:326,level:326,hereExp:20},{id:327,level:327,hereExp:20},{id:328,level:328,hereExp:20},{id:329,level:329,hereExp:20},{id:330,level:330,hereExp:20},{id:331,level:331,hereExp:20},{id:332,level:332,hereExp:20},{id:333,level:333,hereExp:20},{id:334,level:334,hereExp:20},{id:335,level:335,hereExp:20},{id:336,level:336,hereExp:20},{id:337,level:337,hereExp:20},{id:338,level:338,hereExp:20},{id:339,level:339,hereExp:20},{id:340,level:340,hereExp:20},{id:341,level:341,hereExp:20},{id:342,level:342,hereExp:20},{id:343,level:343,hereExp:20},{id:344,level:344,hereExp:20},{id:345,level:345,hereExp:20},{id:346,level:346,hereExp:20},{id:347,level:347,hereExp:20},{id:348,level:348,hereExp:20},{id:349,level:349,hereExp:20},{id:350,level:350,hereExp:20},{id:351,level:351,hereExp:20},{id:352,level:352,hereExp:20},{id:353,level:353,hereExp:20},{id:354,level:354,hereExp:21},{id:355,level:355,hereExp:21},{id:356,level:356,hereExp:21},{id:357,level:357,hereExp:21},{id:358,level:358,hereExp:21},{id:359,level:359,hereExp:21},{id:360,level:360,hereExp:21},{id:361,level:361,hereExp:21},{id:362,level:362,hereExp:21},{id:363,level:363,hereExp:21},{id:364,level:364,hereExp:21},{id:365,level:365,hereExp:21},{id:366,level:366,hereExp:21},{id:367,level:367,hereExp:21},{id:368,level:368,hereExp:21},{id:369,level:369,hereExp:21},{id:370,level:370,hereExp:21},{id:371,level:371,hereExp:21},{id:372,level:372,hereExp:21},{id:373,level:373,hereExp:21},{id:374,level:374,hereExp:21},{id:375,level:375,hereExp:21},{id:376,level:376,hereExp:21},{id:377,level:377,hereExp:21},{id:378,level:378,hereExp:21},{id:379,level:379,hereExp:21},{id:380,level:380,hereExp:21},{id:381,level:381,hereExp:21},{id:382,level:382,hereExp:21},{id:383,level:383,hereExp:21},{id:384,level:384,hereExp:23},{id:385,level:385,hereExp:23},{id:386,level:386,hereExp:23},{id:387,level:387,hereExp:23},{id:388,level:388,hereExp:23},{id:389,level:389,hereExp:23},{id:390,level:390,hereExp:23},{id:391,level:391,hereExp:23},{id:392,level:392,hereExp:23},{id:393,level:393,hereExp:23},{id:394,level:394,hereExp:23},{id:395,level:395,hereExp:23},{id:396,level:396,hereExp:23},{id:397,level:397,hereExp:23},{id:398,level:398,hereExp:23},{id:399,level:399,hereExp:23},{id:400,level:400,hereExp:23},{id:401,level:401,hereExp:23},{id:402,level:402,hereExp:23},{id:403,level:403,hereExp:23},{id:404,level:404,hereExp:23},{id:405,level:405,hereExp:23},{id:406,level:406,hereExp:23},{id:407,level:407,hereExp:23},{id:408,level:408,hereExp:23},{id:409,level:409,hereExp:23},{id:410,level:410,hereExp:23},{id:411,level:411,hereExp:23},{id:412,level:412,hereExp:23},{id:413,level:413,hereExp:24},{id:414,level:414,hereExp:24},{id:415,level:415,hereExp:24},{id:416,level:416,hereExp:24},{id:417,level:417,hereExp:24},{id:418,level:418,hereExp:24},{id:419,level:419,hereExp:24},{id:420,level:420,hereExp:24},{id:421,level:421,hereExp:24},{id:422,level:422,hereExp:24},{id:423,level:423,hereExp:24},{id:424,level:424,hereExp:24},{id:425,level:425,hereExp:24},{id:426,level:426,hereExp:24},{id:427,level:427,hereExp:24},{id:428,level:428,hereExp:24},{id:429,level:429,hereExp:24},{id:430,level:430,hereExp:24},{id:431,level:431,hereExp:24},{id:432,level:432,hereExp:24},{id:433,level:433,hereExp:24},{id:434,level:434,hereExp:24},{id:435,level:435,hereExp:24},{id:436,level:436,hereExp:24},{id:437,level:437,hereExp:24},{id:438,level:438,hereExp:24},{id:439,level:439,hereExp:24},{id:440,level:440,hereExp:24},{id:441,level:441,hereExp:24},{id:442,level:442,hereExp:24},{id:443,level:443,hereExp:26},{id:444,level:444,hereExp:26},{id:445,level:445,hereExp:26},{id:446,level:446,hereExp:26},{id:447,level:447,hereExp:26},{id:448,level:448,hereExp:26},{id:449,level:449,hereExp:26},{id:450,level:450,hereExp:26},{id:451,level:451,hereExp:26},{id:452,level:452,hereExp:26},{id:453,level:453,hereExp:26},{id:454,level:454,hereExp:26},{id:455,level:455,hereExp:26},{id:456,level:456,hereExp:26},{id:457,level:457,hereExp:26},{id:458,level:458,hereExp:26},{id:459,level:459,hereExp:26},{id:460,level:460,hereExp:26},{id:461,level:461,hereExp:26},{id:462,level:462,hereExp:26},{id:463,level:463,hereExp:26},{id:464,level:464,hereExp:26},{id:465,level:465,hereExp:26},{id:466,level:466,hereExp:26},{id:467,level:467,hereExp:26},{id:468,level:468,hereExp:26},{id:469,level:469,hereExp:26},{id:470,level:470,hereExp:26},{id:471,level:471,hereExp:26},{id:472,level:472,hereExp:26},{id:473,level:473,hereExp:27},{id:474,level:474,hereExp:27},{id:475,level:475,hereExp:27},{id:476,level:476,hereExp:27},{id:477,level:477,hereExp:27},{id:478,level:478,hereExp:27},{id:479,level:479,hereExp:27},{id:480,level:480,hereExp:27},{id:481,level:481,hereExp:27},{id:482,level:482,hereExp:27},{id:483,level:483,hereExp:27},{id:484,level:484,hereExp:27},{id:485,level:485,hereExp:27},{id:486,level:486,hereExp:27},{id:487,level:487,hereExp:27},{id:488,level:488,hereExp:27},{id:489,level:489,hereExp:27},{id:490,level:490,hereExp:27},{id:491,level:491,hereExp:27},{id:492,level:492,hereExp:27},{id:493,level:493,hereExp:27},{id:494,level:494,hereExp:27},{id:495,level:495,hereExp:27},{id:496,level:496,hereExp:27},{id:497,level:497,hereExp:27},{id:498,level:498,hereExp:27},{id:499,level:499,hereExp:27},{id:500,level:500,hereExp:27},{id:501,level:501,hereExp:27},{id:502,level:502,hereExp:29},{id:503,level:503,hereExp:29},{id:504,level:504,hereExp:29},{id:505,level:505,hereExp:29},{id:506,level:506,hereExp:29},{id:507,level:507,hereExp:29},{id:508,level:508,hereExp:29},{id:509,level:509,hereExp:29},{id:510,level:510,hereExp:29},{id:511,level:511,hereExp:29},{id:512,level:512,hereExp:29},{id:513,level:513,hereExp:29},{id:514,level:514,hereExp:29},{id:515,level:515,hereExp:29},{id:516,level:516,hereExp:29},{id:517,level:517,hereExp:29},{id:518,level:518,hereExp:29},{id:519,level:519,hereExp:29},{id:520,level:520,hereExp:29},{id:521,level:521,hereExp:29},{id:522,level:522,hereExp:29},{id:523,level:523,hereExp:29},{id:524,level:524,hereExp:29},{id:525,level:525,hereExp:29},{id:526,level:526,hereExp:29},{id:527,level:527,hereExp:29},{id:528,level:528,hereExp:29},{id:529,level:529,hereExp:29},{id:530,level:530,hereExp:29},{id:531,level:531,hereExp:29},{id:532,level:532,hereExp:30},{id:533,level:533,hereExp:30},{id:534,level:534,hereExp:30},{id:535,level:535,hereExp:30},{id:536,level:536,hereExp:30},{id:537,level:537,hereExp:30},{id:538,level:538,hereExp:30},{id:539,level:539,hereExp:30},{id:540,level:540,hereExp:30},{id:541,level:541,hereExp:30},{id:542,level:542,hereExp:30},{id:543,level:543,hereExp:30},{id:544,level:544,hereExp:30},{id:545,level:545,hereExp:30},{id:546,level:546,hereExp:30},{id:547,level:547,hereExp:30},{id:548,level:548,hereExp:30},{id:549,level:549,hereExp:30},{id:550,level:550,hereExp:30},{id:551,level:551,hereExp:31},{id:552,level:552,hereExp:31},{id:553,level:553,hereExp:31},{id:554,level:554,hereExp:31},{id:555,level:555,hereExp:31},{id:556,level:556,hereExp:31},{id:557,level:557,hereExp:31},{id:558,level:558,hereExp:31},{id:559,level:559,hereExp:31},{id:560,level:560,hereExp:31},{id:561,level:561,hereExp:32},{id:562,level:562,hereExp:32},{id:563,level:563,hereExp:32},{id:564,level:564,hereExp:32},{id:565,level:565,hereExp:32},{id:566,level:566,hereExp:32},{id:567,level:567,hereExp:32},{id:568,level:568,hereExp:32},{id:569,level:569,hereExp:32},{id:570,level:570,hereExp:32},{id:571,level:571,hereExp:32},{id:572,level:572,hereExp:32},{id:573,level:573,hereExp:32},{id:574,level:574,hereExp:32},{id:575,level:575,hereExp:32},{id:576,level:576,hereExp:32},{id:577,level:577,hereExp:32},{id:578,level:578,hereExp:32},{id:579,level:579,hereExp:32},{id:580,level:580,hereExp:32},{id:581,level:581,hereExp:32},{id:582,level:582,hereExp:32},{id:583,level:583,hereExp:32},{id:584,level:584,hereExp:32},{id:585,level:585,hereExp:32},{id:586,level:586,hereExp:32},{id:587,level:587,hereExp:32},{id:588,level:588,hereExp:32},{id:589,level:589,hereExp:32},{id:590,level:590,hereExp:32},{id:591,level:591,hereExp:33},{id:592,level:592,hereExp:33},{id:593,level:593,hereExp:33},{id:594,level:594,hereExp:33},{id:595,level:595,hereExp:33},{id:596,level:596,hereExp:33},{id:597,level:597,hereExp:33},{id:598,level:598,hereExp:33},{id:599,level:599,hereExp:33},{id:600,level:600,hereExp:33},{id:601,level:601,hereExp:33},{id:602,level:602,hereExp:33},{id:603,level:603,hereExp:33},{id:604,level:604,hereExp:33},{id:605,level:605,hereExp:33},{id:606,level:606,hereExp:33},{id:607,level:607,hereExp:33},{id:608,level:608,hereExp:33},{id:609,level:609,hereExp:33},{id:610,level:610,hereExp:33},{id:611,level:611,hereExp:34},{id:612,level:612,hereExp:34},{id:613,level:613,hereExp:34},{id:614,level:614,hereExp:34},{id:615,level:615,hereExp:34},{id:616,level:616,hereExp:34},{id:617,level:617,hereExp:34},{id:618,level:618,hereExp:34},{id:619,level:619,hereExp:34},{id:620,level:620,hereExp:34},{id:621,level:621,hereExp:35},{id:622,level:622,hereExp:35},{id:623,level:623,hereExp:35},{id:624,level:624,hereExp:35},{id:625,level:625,hereExp:35},{id:626,level:626,hereExp:35},{id:627,level:627,hereExp:35},{id:628,level:628,hereExp:35},{id:629,level:629,hereExp:35},{id:630,level:630,hereExp:35},{id:631,level:631,hereExp:35},{id:632,level:632,hereExp:35},{id:633,level:633,hereExp:35},{id:634,level:634,hereExp:35},{id:635,level:635,hereExp:35},{id:636,level:636,hereExp:35},{id:637,level:637,hereExp:35},{id:638,level:638,hereExp:35},{id:639,level:639,hereExp:35},{id:640,level:640,hereExp:35},{id:641,level:641,hereExp:35},{id:642,level:642,hereExp:35},{id:643,level:643,hereExp:35},{id:644,level:644,hereExp:35},{id:645,level:645,hereExp:35},{id:646,level:646,hereExp:35},{id:647,level:647,hereExp:35},{id:648,level:648,hereExp:35},{id:649,level:649,hereExp:35},{id:650,level:650,hereExp:36},{id:651,level:651,hereExp:36},{id:652,level:652,hereExp:36},{id:653,level:653,hereExp:36},{id:654,level:654,hereExp:36},{id:655,level:655,hereExp:36},{id:656,level:656,hereExp:36},{id:657,level:657,hereExp:36},{id:658,level:658,hereExp:36},{id:659,level:659,hereExp:36},{id:660,level:660,hereExp:36},{id:661,level:661,hereExp:36},{id:662,level:662,hereExp:36},{id:663,level:663,hereExp:36},{id:664,level:664,hereExp:36},{id:665,level:665,hereExp:36},{id:666,level:666,hereExp:36},{id:667,level:667,hereExp:36},{id:668,level:668,hereExp:36},{id:669,level:669,hereExp:36},{id:670,level:670,hereExp:36},{id:671,level:671,hereExp:37},{id:672,level:672,hereExp:37},{id:673,level:673,hereExp:37},{id:674,level:674,hereExp:37},{id:675,level:675,hereExp:37},{id:676,level:676,hereExp:37},{id:677,level:677,hereExp:37},{id:678,level:678,hereExp:37},{id:679,level:679,hereExp:37},{id:680,level:680,hereExp:38},{id:681,level:681,hereExp:38},{id:682,level:682,hereExp:38},{id:683,level:683,hereExp:38},{id:684,level:684,hereExp:38},{id:685,level:685,hereExp:38},{id:686,level:686,hereExp:38},{id:687,level:687,hereExp:38},{id:688,level:688,hereExp:38},{id:689,level:689,hereExp:38},{id:690,level:690,hereExp:38},{id:691,level:691,hereExp:38},{id:692,level:692,hereExp:38},{id:693,level:693,hereExp:38},{id:694,level:694,hereExp:38},{id:695,level:695,hereExp:38},{id:696,level:696,hereExp:38},{id:697,level:697,hereExp:38},{id:698,level:698,hereExp:38},{id:699,level:699,hereExp:38},{id:700,level:700,hereExp:38},{id:701,level:701,hereExp:38},{id:702,level:702,hereExp:38},{id:703,level:703,hereExp:38},{id:704,level:704,hereExp:38},{id:705,level:705,hereExp:38},{id:706,level:706,hereExp:38},{id:707,level:707,hereExp:38},{id:708,level:708,hereExp:38},{id:709,level:709,hereExp:38},{id:710,level:710,hereExp:39},{id:711,level:711,hereExp:39},{id:712,level:712,hereExp:39},{id:713,level:713,hereExp:39},{id:714,level:714,hereExp:39},{id:715,level:715,hereExp:39},{id:716,level:716,hereExp:39},{id:717,level:717,hereExp:39},{id:718,level:718,hereExp:39},{id:719,level:719,hereExp:39},{id:720,level:720,hereExp:39},{id:721,level:721,hereExp:39},{id:722,level:722,hereExp:39},{id:723,level:723,hereExp:39},{id:724,level:724,hereExp:39},{id:725,level:725,hereExp:39},{id:726,level:726,hereExp:39},{id:727,level:727,hereExp:39},{id:728,level:728,hereExp:39},{id:729,level:729,hereExp:39},{id:730,level:730,hereExp:39},{id:731,level:731,hereExp:39},{id:732,level:732,hereExp:39},{id:733,level:733,hereExp:39},{id:734,level:734,hereExp:39},{id:735,level:735,hereExp:39},{id:736,level:736,hereExp:39},{id:737,level:737,hereExp:39},{id:738,level:738,hereExp:39},{id:739,level:739,hereExp:41},{id:740,level:740,hereExp:41},{id:741,level:741,hereExp:41},{id:742,level:742,hereExp:41},{id:743,level:743,hereExp:41},{id:744,level:744,hereExp:41},{id:745,level:745,hereExp:41},{id:746,level:746,hereExp:41},{id:747,level:747,hereExp:41},{id:748,level:748,hereExp:41},{id:749,level:749,hereExp:41},{id:750,level:750,hereExp:41},{id:751,level:751,hereExp:41},{id:752,level:752,hereExp:41},{id:753,level:753,hereExp:41},{id:754,level:754,hereExp:41},{id:755,level:755,hereExp:41},{id:756,level:756,hereExp:41},{id:757,level:757,hereExp:41},{id:758,level:758,hereExp:41},{id:759,level:759,hereExp:41},{id:760,level:760,hereExp:41},{id:761,level:761,hereExp:41},{id:762,level:762,hereExp:41},{id:763,level:763,hereExp:41},{id:764,level:764,hereExp:41},{id:765,level:765,hereExp:41},{id:766,level:766,hereExp:41},{id:767,level:767,hereExp:41},{id:768,level:768,hereExp:41},{id:769,level:769,hereExp:42},{id:770,level:770,hereExp:42},{id:771,level:771,hereExp:42},{id:772,level:772,hereExp:42},{id:773,level:773,hereExp:42},{id:774,level:774,hereExp:42},{id:775,level:775,hereExp:42},{id:776,level:776,hereExp:42},{id:777,level:777,hereExp:42},{id:778,level:778,hereExp:42},{id:779,level:779,hereExp:42},{id:780,level:780,hereExp:42},{id:781,level:781,hereExp:42},{id:782,level:782,hereExp:42},{id:783,level:783,hereExp:42},{id:784,level:784,hereExp:42},{id:785,level:785,hereExp:42},{id:786,level:786,hereExp:42},{id:787,level:787,hereExp:42},{id:788,level:788,hereExp:42},{id:789,level:789,hereExp:42},{id:790,level:790,hereExp:42},{id:791,level:791,hereExp:42},{id:792,level:792,hereExp:42},{id:793,level:793,hereExp:42},{id:794,level:794,hereExp:42},{id:795,level:795,hereExp:42},{id:796,level:796,hereExp:42},{id:797,level:797,hereExp:42},{id:798,level:798,hereExp:42},{id:799,level:799,hereExp:44},{id:800,level:800,hereExp:44}],cc._RF.pop()},{}],Json_DefendLevel:[function(e,t){"use strict";cc._RF.push(t,"1db8aaY5/5E8KP6d0Mth20b","Json_DefendLevel"),e("Aft").JsonData.DefendLevel=[{id:1,minLevel:1,maxLevel:50,defendTime:60,rewardTime:108,weight:8e3},{id:2,minLevel:1,maxLevel:50,defendTime:120,rewardTime:144,weight:5e3},{id:3,minLevel:1,maxLevel:50,defendTime:180,rewardTime:180,weight:3e3},{id:4,minLevel:1,maxLevel:50,defendTime:240,rewardTime:216,weight:1},{id:5,minLevel:1,maxLevel:50,defendTime:480,rewardTime:270,weight:1},{id:6,minLevel:51,maxLevel:100,defendTime:60,rewardTime:108,weight:5e3},{id:7,minLevel:51,maxLevel:100,defendTime:120,rewardTime:144,weight:5e3},{id:8,minLevel:51,maxLevel:100,defendTime:180,rewardTime:180,weight:3e3},{id:9,minLevel:51,maxLevel:100,defendTime:240,rewardTime:216,weight:1e3},{id:10,minLevel:51,maxLevel:100,defendTime:480,rewardTime:270,weight:1e3},{id:11,minLevel:101,maxLevel:200,defendTime:60,rewardTime:108,weight:5e3},{id:12,minLevel:101,maxLevel:200,defendTime:120,rewardTime:144,weight:5e3},{id:13,minLevel:101,maxLevel:200,defendTime:180,rewardTime:180,weight:5e3},{id:14,minLevel:101,maxLevel:200,defendTime:240,rewardTime:216,weight:3e3},{id:15,minLevel:101,maxLevel:200,defendTime:480,rewardTime:270,weight:3e3},{id:16,minLevel:201,maxLevel:400,defendTime:60,rewardTime:108,weight:3e3},{id:17,minLevel:201,maxLevel:400,defendTime:120,rewardTime:144,weight:3e3},{id:18,minLevel:201,maxLevel:400,defendTime:180,rewardTime:180,weight:8e3},{id:19,minLevel:201,maxLevel:400,defendTime:240,rewardTime:216,weight:3e3},{id:20,minLevel:201,maxLevel:400,defendTime:480,rewardTime:270,weight:3e3},{id:21,minLevel:401,maxLevel:1e3,defendTime:60,rewardTime:108,weight:3e3},{id:22,minLevel:401,maxLevel:1e3,defendTime:120,rewardTime:144,weight:5e3},{id:23,minLevel:401,maxLevel:1e3,defendTime:180,rewardTime:180,weight:8e3},{id:24,minLevel:401,maxLevel:1e3,defendTime:240,rewardTime:216,weight:8e3},{id:25,minLevel:401,maxLevel:1e3,defendTime:480,rewardTime:270,weight:8e3}],cc._RF.pop()},{}],Json_Drop:[function(e,t){"use strict";cc._RF.push(t,"4cba1pNXuRKnp+qcixNxRg6","Json_Drop"),e("Aft").JsonData.Drop=[{id:1,dropId:50001,itemId:1004,num:1,maxNum:1,weight:2e3},{id:2,dropId:50001,itemId:1004,num:2,maxNum:2,weight:2e3},{id:3,dropId:50001,itemId:1004,num:1,maxNum:1,weight:2e3},{id:4,dropId:50001,itemId:1004,num:1,maxNum:1,weight:2e3},{id:5,dropId:51001,itemId:3005,num:1,maxNum:1,weight:1e4},{id:6,dropId:51002,itemId:3002,num:1,maxNum:1,weight:1e4},{id:7,dropId:51003,itemId:3004,num:1,maxNum:1,weight:1e4},{id:8,dropId:51004,itemId:3003,num:1,maxNum:1,weight:1e4},{id:9,dropId:51005,itemId:3007,num:1,maxNum:1,weight:1e4},{id:10,dropId:51006,itemId:3001,num:1,maxNum:1,weight:1e3},{id:11,dropId:51006,itemId:3002,num:1,maxNum:1,weight:1e3},{id:12,dropId:51006,itemId:3003,num:1,maxNum:1,weight:1e3},{id:13,dropId:51006,itemId:3004,num:1,maxNum:1,weight:1e3},{id:14,dropId:51006,itemId:3005,num:1,maxNum:1,weight:1e3},{id:15,dropId:51006,itemId:3006,num:1,maxNum:1,weight:1e3},{id:16,dropId:51006,itemId:3007,num:1,maxNum:1,weight:1e3},{id:17,dropId:51006,itemId:3008,num:1,maxNum:1,weight:1e3},{id:18,dropId:51006,itemId:3009,num:1,maxNum:1,weight:1e3},{id:19,dropId:51006,itemId:3010,num:1,maxNum:1,weight:1e3},{id:20,dropId:51006,itemId:3011,num:1,maxNum:1,weight:1e3},{id:21,dropId:51006,itemId:3012,num:1,maxNum:1,weight:1e3},{id:22,dropId:51006,itemId:3013,num:1,maxNum:1,weight:1e3},{id:23,dropId:51006,itemId:3101,num:1,maxNum:1,weight:1e3},{id:24,dropId:51006,itemId:3102,num:1,maxNum:1,weight:1e3},{id:25,dropId:51006,itemId:3107,num:1,maxNum:1,weight:1e3},{id:26,dropId:51007,itemId:1002,num:1e4,maxNum:1e4,isMultiple:1,weight:8e3},{id:27,dropId:51007,itemId:1002,num:2e4,maxNum:2e4,isMultiple:1,weight:2e3},{id:28,dropId:51008,itemId:1006,num:1e4,maxNum:1e4,isMultiple:2,weight:8e3},{id:29,dropId:51008,itemId:1006,num:2e4,maxNum:2e4,isMultiple:2,weight:2e3},{id:30,dropId:51009,itemId:3001,num:1,maxNum:1,weight:1e4},{id:31,dropId:51009,itemId:3002,num:1,maxNum:1,weight:200},{id:32,dropId:51009,itemId:3003,num:1,maxNum:1,weight:20},{id:33,dropId:51009,itemId:3004,num:1,maxNum:1,weight:10},{id:34,dropId:51009,itemId:3005,num:1,maxNum:1,weight:1e4},{id:35,dropId:51009,itemId:3006,num:1,maxNum:1,weight:5},{id:36,dropId:51009,itemId:3007,num:1,maxNum:1,weight:5},{id:37,dropId:51009,itemId:3008,num:1,maxNum:1,weight:2e3},{id:38,dropId:51009,itemId:3009,num:1,maxNum:1,weight:20},{id:39,dropId:51009,itemId:3010,num:1,maxNum:1,weight:10},{id:40,dropId:51009,itemId:3011,num:1,maxNum:1,weight:5},{id:41,dropId:51009,itemId:3012,num:1,maxNum:1,weight:5},{id:42,dropId:51009,itemId:3013,num:1,maxNum:1,weight:5},{id:43,dropId:52001,itemId:3001,num:2,maxNum:4,weight:1e3},{id:44,dropId:52001,itemId:3002,num:2,maxNum:4,weight:1e3},{id:45,dropId:52001,itemId:3003,num:2,maxNum:4,weight:1e3},{id:46,dropId:52002,itemId:3004,num:2,maxNum:4,weight:1e3},{id:47,dropId:52002,itemId:3005,num:2,maxNum:4,weight:1e3},{id:48,dropId:52002,itemId:3006,num:2,maxNum:4,weight:1e3},{id:49,dropId:52003,itemId:3007,num:2,maxNum:4,weight:1e3},{id:50,dropId:52003,itemId:3008,num:2,maxNum:4,weight:1e3},{id:51,dropId:52004,itemId:3001,num:2,maxNum:4,weight:1e3},{id:52,dropId:53001,itemId:1002,num:576,maxNum:864,isMultiple:1,weight:1e4},{id:53,dropId:53002,itemId:1006,num:576,maxNum:864,isMultiple:2,weight:1e4},{id:54,dropId:53003,itemId:1001,num:10,maxNum:20,weight:1e4},{id:55,dropId:53009,itemId:1006,num:5184,maxNum:7776,isMultiple:2,weight:1e4},{id:56,dropId:53004,itemId:3001,num:1,maxNum:1,weight:2e3,battleBoxInstanceNum:[[1,0],[0,10]]},{id:57,dropId:53004,itemId:3001,num:1,maxNum:1,weight:1e4,battleBoxInstanceNum:[[2,0],[10,20]]},{id:58,dropId:53004,itemId:3005,num:1,maxNum:1,weight:5e4,battleBoxInstanceNum:[[1,5],[1,10]]},{id:59,dropId:53004,itemId:3005,num:1,maxNum:1,weight:1e4,battleBoxInstanceNum:[[2,0],[10,20]]},{id:60,dropId:53004,itemId:3008,num:1,maxNum:1,weight:5e4,battleBoxInstanceNum:[[2,0],[2,10]]},{id:61,dropId:53004,itemId:3008,num:1,maxNum:1,weight:1e4,battleBoxInstanceNum:[[2,11],[10,20]]},{id:62,dropId:53004,itemId:3002,num:1,maxNum:1,weight:5e4,battleBoxInstanceNum:[[2,11],[2,20]]},{id:63,dropId:53004,itemId:3002,num:1,maxNum:1,weight:1e4,battleBoxInstanceNum:[[3,0],[10,20]]},{id:64,dropId:53004,itemId:3003,num:1,maxNum:1,weight:5e4,battleBoxInstanceNum:[[3,0],[3,10]]},{id:65,dropId:53004,itemId:3003,num:1,maxNum:1,weight:1e4,battleBoxInstanceNum:[[3,11],[10,20]]},{id:66,dropId:53004,itemId:3004,num:1,maxNum:1,weight:5e4,battleBoxInstanceNum:[[3,11],[3,20]]},{id:67,dropId:53004,itemId:3004,num:1,maxNum:1,weight:1e4,battleBoxInstanceNum:[[4,0],[10,20]]},{id:68,dropId:53004,itemId:2001,num:1,maxNum:1,weight:3e4,battleBoxInstanceNum:[[2,5],[10,20]]},{id:69,dropId:53005,itemId:1002,num:1728,maxNum:2592,isMultiple:1,weight:1e4},{id:70,dropId:53006,itemId:1006,num:1728,maxNum:2592,isMultiple:2,weight:1e4},{id:71,dropId:53007,itemId:1002,num:3456,maxNum:5184,isMultiple:1,weight:1e4},{id:72,dropId:53008,itemId:1006,num:3456,maxNum:5184,isMultiple:2,weight:1e4},{id:73,dropId:54001,itemId:4001,num:1,maxNum:1,weight:1e4},{id:74,dropId:54001,itemId:4002,num:1,maxNum:1,weight:1e4},{id:75,dropId:54001,itemId:4003,num:1,maxNum:1,weight:1e4},{id:76,dropId:54001,itemId:4004,num:1,maxNum:1,weight:1e4},{id:77,dropId:54001,itemId:4005,num:1,maxNum:1,weight:1e4},{id:78,dropId:54001,itemId:4006,num:1,maxNum:1,weight:1e4},{id:79,dropId:54001,itemId:4007,num:1,maxNum:1,weight:1e4},{id:80,dropId:54001,itemId:4008,num:1,maxNum:1,weight:1e4}],cc._RF.pop()},{}],Json_EnemySkill:[function(e,t){"use strict";cc._RF.push(t,"25db0Homv5F5rHQaP77zTsb","Json_EnemySkill"),e("Aft").JsonData.EnemySkill=[{id:1,name:"1288",isSkillFloat:1,desc:"1082",icon:"battle/HeroSkill_Icon1",CD:3,radius:100,startSelection:1,targetSelection:1,isInWar:0,parameter:[[1,2e3,3]],skillTakeEffectTime:500,skillAudio:"tower_enemy_skill_add_hp"},{id:2,name:"1079",isSkillFloat:1,desc:"1082",icon:"battle/HeroSkill_Icon1",CD:0,radius:500,startSelection:1,targetSelection:2,isInWar:1,atkParameter:[[101,0,0,1e4,0,0]],parameter:[[2,3e3]],skillTakeEffectTime:500,bulletID:7,skillAudio:"enemy_dizzy"},{id:3,name:"1079",isSkillFloat:1,desc:"1082",icon:"battle/HeroSkill_Icon1",CD:3,radius:150,startSelection:1,targetSelection:2,isInWar:0,parameter:[[3,5e3,2]],skillTakeEffectTime:500,skillAudio:"tower_enemy_skill_add_hp"},{id:4,name:"1289",isSkillFloat:1,desc:"1082",icon:"battle/HeroSkill_Icon1",CD:3,radius:150,startSelection:1,targetSelection:1,isInWar:0,parameter:[[4,5e3,16e3,999]],skillTakeEffectTime:500,skillAudio:"enemy_run"},{id:5,name:"1290",isSkillFloat:1,desc:"1082",icon:"battle/HeroSkill_Icon1",CD:3,radius:150,startSelection:1,targetSelection:1,isInWar:0,parameter:[[5,31001,80,1e5,3]],skillTakeEffectTime:500,skillAudio:"enemy_summon"},{id:6,name:"1079",isSkillFloat:1,desc:"1082",icon:"battle/HeroSkill_Icon1",CD:3,radius:200,startSelection:1,targetSelection:1,isInWar:0,parameter:[[6,1e4,2e3,1,3]],skillTakeEffectTime:500,skillAudio:"tower_enemy_skill_add_hp"},{id:7,name:"1079",isSkillFloat:1,desc:"1082",icon:"battle/HeroSkill_Icon1",CD:5,radius:0,startSelection:2,targetSelection:2,isInWar:1,atkParameter:[[101,1,30,15e3,0,0]],parameter:[[307,-3e3,3e3,2]],skillTakeEffectTime:500,bulletID:11,skillAudio:"tower_enemy_skill_add_hp"},{id:8,name:"1079",isSkillFloat:1,desc:"1082",icon:"battle/HeroSkill_Icon1",CD:5,radius:0,startSelection:1,targetSelection:1,isInWar:1,atkParameter:[[101,1,40,1e4,0,0]],skillTakeEffectTime:500,bulletID:9999,skillAudio:"tower_enemy_skill_add_hp"},{id:9,name:"1079",isSkillFloat:1,desc:"1082",icon:"battle/HeroSkill_Icon1",CD:5,radius:0,startSelection:2,targetSelection:2,isInWar:1,atkParameter:[[101,1,40,1e4,0,0]],skillTakeEffectTime:500,bulletID:13,skillAudio:"tower_enemy_skill_add_hp"},{id:10,name:"1079",isSkillFloat:1,desc:"1082",icon:"battle/HeroSkill_Icon1",CD:5,radius:0,startSelection:2,targetSelection:2,isInWar:1,atkParameter:[[101,9,20,4e3,200,100]],parameter:[[205,0,1e3,500,3e3]],skillTakeEffectTime:500,bulletID:11,skillAudio:"tower_enemy_skill_add_hp"},{id:11,name:"1079",isSkillFloat:1,desc:"1082",icon:"battle/HeroSkill_Icon1",CD:5,radius:0,startSelection:1,targetSelection:2,isInWar:1,atkParameter:[[102,6,30,7e3,300,0,0]],skillTakeEffectTime:500,bulletID:3,skillAudio:"tower_enemy_skill_add_hp"},{id:12,name:"1079",isSkillFloat:1,desc:"1082",icon:"battle/HeroSkill_Icon1",CD:5,radius:0,startSelection:2,targetSelection:2,isInWar:1,atkParameter:[[101,1,30,15e3,0,0]],parameter:[[307,-3e3,2e3,2]],skillTakeEffectTime:500,bulletID:11,skillAudio:"tower_enemy_skill_add_hp"},{id:13,name:"1079",isSkillFloat:1,desc:"1082",icon:"battle/HeroSkill_Icon1",CD:5,radius:0,startSelection:2,targetSelection:2,isInWar:1,atkParameter:[[101,10,30,15e3,500,100]],parameter:[[201,1e3]],skillTakeEffectTime:500,bulletID:11,skillAudio:"tower_enemy_skill_add_hp"},{id:14,name:"1079",isSkillFloat:1,desc:"1082",icon:"battle/HeroSkill_Icon1",CD:5,radius:0,startSelection:2,targetSelection:2,isInWar:1,atkParameter:[[101,1,0,0,0,0]],parameter:[[203,5e3,500],[205,0,2e3,500,3e3],[307,-6e3,500,2]],skillTakeEffectTime:500,bulletID:15,skillAudio:"tower_enemy_skill_add_hp"},{id:15,name:"1290",isSkillFloat:1,desc:"1082",icon:"battle/HeroSkill_Icon1",CD:5,radius:150,startSelection:1,targetSelection:1,isInWar:1,parameter:[[15,1e5]],skillTakeEffectTime:500,skillAudio:"enemy_summon"},{id:16,name:"1290",isSkillFloat:0,desc:"1082",icon:"battle/HeroSkill_Icon1",CD:5,radius:150,startSelection:1,targetSelection:1,isInWar:1,parameter:[[16,5e3,200]],skillTakeEffectTime:1500,skillAudio:"enemy_summon"},{id:17,name:"1290",isSkillFloat:0,desc:"1082",icon:"battle/HeroSkill_Icon1",CD:5,radius:150,startSelection:1,targetSelection:1,isInWar:0,atkParameter:[[101,1,0,1e5,0,0,0,0]],parameter:[[17,2]],skillTakeEffectTime:500,bulletID:16,skillAudio:"enemy_summon"}],cc._RF.pop()},{}],Json_Expression:[function(e,t){"use strict";cc._RF.push(t,"1836cFUPV5PaqRksIpSAl2e","Json_Expression"),e("Aft").JsonData.Expression=[{id:1000001,type:1,expression:"happy",sound:"happy_boy",soundgirl:"happy_girl",remarks:"\u54c8\u54c8\u54c8"},{id:1000002,type:2,expression:"angry",sound:"angry_boy",soundgirl:"angry_girl",remarks:"\u53c8\u8981\u8f93\u4e86"},{id:1000003,type:3,expression:"sad",sound:"sad_boy",soundgirl:"sad_girl",remarks:"\u8fd0\u6c14\u4e0d\u597d"},{id:1000004,type:4,expression:"laugh",sound:"laugh_boy",soundgirl:"laugh_girl",remarks:"\u6211\u8981\u8d62\u4e86"}],cc._RF.pop()},{}],Json_FailureAdvice:[function(e,t){"use strict";cc._RF.push(t,"101d2VGuKFITqszKokf9tQl","Json_FailureAdvice"),e("Aft").JsonData.FailureAdvice=[{id:1,name:"1493",icon:"Promote_FightCapacity_Icon4",functionId:3},{id:2,name:"1494",icon:"Promote_FightCapacity_Icon1",functionId:4},{id:3,name:"1495",icon:"Promote_FightCapacity_Icon3",functionId:3},{id:4,name:"1496",icon:"Promote_FightCapacity_Icon2",functionId:4},{id:5,name:"1717",icon:"Promote_FightCapacity_Icon5",functionId:18}],cc._RF.pop()},{}],Json_FreePower:[function(e,t){"use strict";cc._RF.push(t,"e474bydNoZIB59PvlEtMo19","Json_FreePower"),e("Aft").JsonData.FreePower=[{id:1,mainType:1,type:0,icon:"freePower_Icon4",desc:"2326",gift:[{key:1007,value:5}],giftDesc:"2330"},{id:2,mainType:1,type:1,icon:"freePower_Icon4",desc:"2327",gift:[{key:1007,value:5}],giftDesc:"2330"},{id:3,mainType:2,type:0,icon:"freePower_Icon6",desc:"2328",gift:[{key:1007,value:5}],giftDesc:"2331"},{id:4,mainType:2,type:1,icon:"freePower_Icon6",desc:"2329",gift:[{key:1007,value:5}],giftDesc:"2331"},{id:5,mainType:6,icon:"freePower_Icon3",desc:"2332",gift:[{key:1007,value:5}],giftDesc:"2353"},{id:6,mainType:3,type:0,icon:"freePower_Icon5",desc:"2324",gift:[{key:1007,value:5}],giftDesc:"2350"},{id:7,mainType:3,type:1,icon:"freePower_Icon5",desc:"2349",gift:[{key:1007,value:5}],giftDesc:"2350"},{id:8,mainType:4,icon:"Rank_Send_Power",desc:"2351"},{id:9,mainType:5,icon:"freePower_Icon7",desc:"2352"}],cc._RF.pop()},{}],Json_Function:[function(e,t){"use strict";cc._RF.push(t,"07c159WUgFPMKSq5mShqVnZ","Json_Function"),e("Aft").JsonData.Function=[{id:1,name:"1068",icon:"Main_BottomFunction4",isShow:1,instanceNum:[1,4],desc:"1408",order:7,originPanelIcon:"Main_BottomFunction4",isShowInPanel:1,originPanelName:"1068",isJump:1,isFly:1},{id:2,name:"1323",icon:"Main_BottomFunction5",isShow:1,instanceNum:[1,10],isFly:1},{id:3,name:"1085",icon:"Main_BottomFunction1",isShow:0,instanceNum:[1,5],isFly:1},{id:4,name:"1087",icon:"Main_BottomFunction3",isShow:1,instanceNum:[1,1],isFly:1},{id:5,name:"1310",icon:"Main_ActivityFunction_Rank",isShow:0,instanceNum:[1,0],isFly:0},{id:6,name:"1239",icon:"Main_ActivityFunction_Task",isShow:1,instanceNum:[1,3],desc:"1409",originPanelIcon:"Main_ActivityFunction_Task",originPanelName:"1239",isJump:1,isFly:1,originIconScale:9500},{id:7,name:"1139",icon:"Main_Hangup_Reward",isShow:0,instanceNum:[1,0],isFly:1},{id:8,name:"1407",icon:"Main_ActivityFunction_Sign_Sun",isShow:0,instanceNum:[1,2],desc:"1411",originPanelIcon:"Main_ActivityFunction_Sign_Sun",originPanelName:"1407",isJump:1,isFly:1,originIconScale:8e3},{id:9,name:"1086",icon:"Main_BottomFunction2",isShow:0,instanceNum:[1,0],desc:"1410",originPanelIcon:"Main_BottomFunction2",originPanelName:"1086",isJump:1,isFly:0},{id:10,name:"1072",icon:"BattleBox_Box1",isShow:0,instanceNum:[1,0],desc:"1412",originPanelIcon:"BattleBox_Box1",originPanelName:"1072",isJump:1,isFly:0,originIconScale:5e3},{id:11,name:"1072",icon:"BattleBox_Box1",isShow:0,instanceNum:[1,6],desc:"1412",originPanelIcon:"BattleBox_Box1",originPanelName:"1072",isJump:1,isFly:0,originIconScale:5e3},{id:12,name:"1762",icon:"Battle_Quicken",isShow:0,instanceNum:[1,0],originPanelIcon:"BattleBox_Box1",isFly:0},{id:13,name:"1502",icon:"Main_ActivityFunction_QuiklyHangUp",isShow:1,instanceNum:[1,8],isFly:1},{id:14,name:"1564",icon:"Main_ActivityFunction_Email",isShow:0,instanceNum:[1,0],isFly:1},{id:15,name:"1581",icon:"Main_ActivityFunction_Pictorial",isShow:0,instanceNum:[1,0],isFly:1},{id:16,name:"1630",icon:"Vip_0",isShow:1,instanceNum:[1,4],isFly:1},{id:17,name:"1678",icon:"Main_ActivityFunction_PiggyBank",isShow:1,instanceNum:[1,6],isFly:1},{id:18,name:"1346",icon:"Main_BottomFunction6",isShow:1,instanceNum:[1,7],isFly:1},{id:19,name:"1707",icon:"Main_ActivityFunction_LuckyChance",isShow:1,instanceNum:[1,9],isFly:1},{id:20,name:"1570",icon:"Main_ActivityFunction_LuckyChance",isShow:0,instanceNum:[1,5],isFly:0},{id:21,name:"1072",icon:"BattleBox_Box1",isShow:0,instanceNum:[1,7],desc:"1412",originPanelIcon:"BattleBox_Box1",originPanelName:"1072",isJump:1,isFly:0},{id:22,name:"1781",icon:"Main_ActivityFunction_PieceChange",isShow:1,instanceNum:[2,10],isFly:1},{id:23,name:"1985",icon:"Main_Hangup_Reward",isShow:0,instanceNum:[1,0],isFly:0},{id:24,name:"1989",icon:"Main_Hangup_Reward",isShow:0,instanceNum:[1,0],isFly:0},{id:25,name:"20005",icon:"Main_ActivityFunction_Rank",isShow:0,instanceNum:[1,0],isFly:0},{id:26,name:"20006",icon:"Main_ActivityFunction_Rank",isShow:0,instanceNum:[1,5],isFly:0},{id:27,name:"20007",icon:"Main_ActivityFunction_Rank",isShow:0,instanceNum:[2,1],isFly:0},{id:28,name:"20141",icon:"Main_ActivityFunction_LuckyChance",isShow:0,instanceNum:[1,8],isFly:0},{id:29,name:"20077",icon:"Main_ActivityFunction_LuckyChance",isShow:0,instanceNum:[1,8],isFly:0}],cc._RF.pop()},{}],Json_GameLevel:[function(e,t){"use strict";cc._RF.push(t,"95f21M+hwVAbouw3Lg+CLP+","Json_GameLevel"),e("Aft").JsonData.GameLevel=[{id:501,type:1004,level:1,count:4},{id:502,type:1004,level:2,count:4},{id:503,type:1004,level:3,count:5},{id:504,type:1004,level:4,count:6},{id:505,type:1004,level:5,count:6},{id:506,type:1004,level:6,count:6},{id:507,type:1004,level:7,count:6},{id:508,type:1004,level:8,count:9},{id:509,type:1004,level:9,count:9},{id:510,type:1004,level:10,count:9},{id:511,type:1004,level:11,count:9},{id:512,type:1004,level:12,count:12},{id:513,type:1004,level:13,count:12},{id:514,type:1004,level:14,count:12},{id:515,type:1004,level:15,count:15},{id:516,type:1004,level:16,count:27},{id:517,type:1004,level:17,count:27},{id:518,type:1004,level:18,count:30},{id:519,type:1004,level:19,count:36},{id:520,type:1004,level:20,count:36},{id:521,type:1004,level:21,count:36},{id:522,type:1004,level:22,count:36},{id:523,type:1004,level:23,count:36},{id:524,type:1004,level:24,count:36},{id:525,type:1004,level:25,count:36},{id:526,type:1004,level:26,count:39},{id:527,type:1004,level:27,count:42},{id:528,type:1004,level:28,count:42},{id:529,type:1004,level:29,count:42},{id:530,type:1004,level:30,count:45},{id:531,type:1004,level:31,count:63},{id:532,type:1004,level:32,count:66},{id:533,type:1004,level:33,count:69},{id:534,type:1004,level:34,count:75},{id:535,type:1004,level:35,count:132},{id:536,type:1004,level:36,count:138},{id:537,type:1004,level:37,count:144},{id:538,type:1004,level:38,count:150},{id:539,type:1004,level:39,count:156},{id:540,type:1004,level:40,count:165},{id:541,type:1004,level:41,count:171},{id:542,type:1004,level:42,count:180},{id:543,type:1004,level:43,count:183},{id:544,type:1004,level:44,count:195},{id:545,type:1004,level:45,count:204},{id:546,type:1004,level:46,count:216},{id:547,type:1004,level:47,count:222},{id:548,type:1004,level:48,count:237},{id:549,type:1004,level:49,count:243},{id:550,type:1004,level:50,count:261},{id:551,type:1004,level:51,count:261},{id:552,type:1004,level:52,count:282},{id:553,type:1004,level:53,count:282},{id:554,type:1004,level:54,count:303},{id:555,type:1004,level:55,count:405},{id:556,type:1004,level:56,count:432},{id:557,type:1004,level:57,count:444},{id:558,type:1004,level:58,count:474},{id:559,type:1004,level:59,count:483},{id:560,type:1004,level:60,count:519},{id:561,type:1004,level:61,count:522},{id:562,type:1004,level:62,count:564},{id:563,type:1004,level:63,count:561},{id:564,type:1004,level:64,count:609},{id:565,type:1004,level:65,count:807},{id:566,type:1004,level:66,count:861},{id:567,type:1004,level:67,count:885},{id:568,type:1004,level:68,count:948},{id:569,type:1004,level:69,count:966},{id:570,type:1004,level:70,count:1038},{id:571,type:1004,level:71,count:1044},{id:572,type:1004,level:72,count:1125},{id:573,type:1004,level:73,count:1122},{id:574,type:1004,level:74,count:1215},{id:575,type:1004,level:75,count:1281},{id:576,type:1004,level:76,count:1389},{id:577,type:1004,level:77,count:1407},{id:578,type:1004,level:78,count:1527},{id:579,type:1004,level:79,count:1533},{id:580,type:1004,level:80,count:1668},{id:581,type:1004,level:81,count:1659},{id:582,type:1004,level:82,count:1812},{id:583,type:1004,level:83,count:1782},{id:584,type:1004,level:84,count:1953},{id:585,type:1004,level:85,count:2196},{id:586,type:1004,level:86,count:2388},{id:587,type:1004,level:87,count:2415},{id:588,type:1004,level:88,count:2628},{id:589,type:1004,level:89,count:2631},{id:590,type:1004,level:90,count:2973},{id:591,type:1004,level:91,count:3102},{id:592,type:1004,level:92,count:3276},{id:593,type:1004,level:93,count:3483},{id:594,type:1004,level:94,count:3588},{id:595,type:1004,level:95,count:3747},{id:596,type:1004,level:96,count:4089},{id:597,type:1004,level:97,count:4212},{id:598,type:1004,level:98,count:4290},{id:599,type:1004,level:99,count:4458},{id:600,type:1004,level:100,count:4545}],cc._RF.pop()},{}],Json_GameLink:[function(e,t){"use strict";cc._RF.push(t,"d2f7fPSB/FC+K6twyLR0JdR","Json_GameLink"),e("Aft").JsonData.GameLink=[{id:1,picture:"Link_Pet1",pressedpic:"Link_Pet1_Pressed"},{id:2,picture:"Link_Pet2",pressedpic:"Link_Pet2_Pressed"},{id:3,picture:"Link_Pet3",pressedpic:"Link_Pet3_Pressed"},{id:4,picture:"Link_Pet4",pressedpic:"Link_Pet4_Pressed"},{id:5,picture:"Link_Pet5",pressedpic:"Link_Pet5_Pressed"},{id:6,picture:"Link_Pet6",pressedpic:"Link_Pet6_Pressed"},{id:7,picture:"Link_Pet7",pressedpic:"Link_Pet7_Pressed"}],cc._RF.pop()},{}],Json_GameParams:[function(e,t){"use strict";cc._RF.push(t,"3a498zwQX9LQr020qqA22Iw","Json_GameParams"),e("Aft").JsonData.GameParams=[{starRating:[18,15,0],basicLife:20,returnRatio:7e3,arrowRange:[9e3,11e3],barrackRange:[9500,10500],cannonRange:[7e3,13e3],magicRange:[8500,11500],heroRange:[9500,10500],baseDia:0,baseGold:2e3,baseHeroExp:2e3,baseTower:[1,17,33,49],tipsSkillTime:1500,hangUpMaxTime:28800,hangUpSoldierMaxNum:3,hangUpEnemyMaxNum:3,hangUpDeadRandomNum:[3,5],hangUpWarSpeed:15e3,hangUpBubbleShowTime:4500,hangUpBubbleIntervalTime:6e3,hangUpSoldierPointList:[50,-15,20],hangUpSoldierMoveRange:[120,100,50],hangUpPerAdHourage:5400,hangUpAdsNumPerDay:6,quickHangUpTimes:6,quickHangUpTimeCd:2,quickHangUpPowerNum:5,heroInTowerDistance:0,shopAdsDiamondNum:[40,100],shopAdsDiamondTimes:3,shopAdsCardNum:[1,3],shopAdsCardTimes:5,shopBoxCd:4,shopBoxReduceCd:2,shopBoxMaxTimes:6,ShopBoxDiamondNum:200,shopAdsCoinNum:27e3,shopAdsCoinTimes:3,shopCoinsList:[[3,60],[7,100]],shopAdsHeroExpNum:27e3,shopAdsHeroExpTimes:3,shopHeroExpList:[[3,60],[7,100]],shopAdsCDNum:120,powerDiamondPrice:100,powerPerNumByDiamond:20,powerPerNumByAd:5,powerMaxTimeByDiamond:3,powerMaxTimeByAd:3,powerMaxNumAutoRecovery:50,powerTimeAutoRecovery:600,nameMaxLength:6,rankRefreshIntervalTime:1800,powerInstanceNum:5,resurgenceTimes:1,resurgenceNeedDiamond:30,resurgenceCloseTimes:8,resurgenceHpPoint:5,resurgenceIngotTimes:1,defaultHead:43001,pushMaxTime:3,instanceRewardMinNum:1e3,worldMapDefaultHeight:1e4,battleBoxOpenKey:3,battleBoxMaxTimes:6,difficultyCompensateLifeWeight:5e3,tipsSkillStayTimes:3e3,soldierHitPercentage:5e3,bossHitPercentage:8e3,boxDefaultHeroTimes:10,boxDefaultHeroNum:10,remoteChangeCloseCombatHurt:5e3,shopBoxSpecialHeroIdIntervalNum:10,guideHeroGrade:[15e4,5e4,2],sceneTowerSell:0,tryHeroDefaultLevel:20,tryHeroDefaultQuality:4,secondWellenNature:99992,speedUpOpen:[1,8],liuTowerSwimTime:600,mainSkillUnlock:[[101,1,2],[104,1,3],[103,1,5]],mainSkillRange:[[101,100],[102,60],[103,80],[104,60],[105,80],[106,80],[107,80],[108,80]],goalDistance:[3,5,30],canPustTimeList:[0,24],storyTextShowTime:600,resultAdRate:5,huangBulletAngle:[-12,-6,0,6,12],hangUpSoldierList:[41003],hangUpEnemyList:[31001,31004],quickHangUpMinPower:20,skillGuideDistanceList:[400,300,350],storyTextList:[52016,52017,52018],storyBlackTextShowTime:[1e3,1200],quickHangUpADTimes:10,quickHangUpADRate:5,joinQQGroupNumber:"637666342",joinQQGroupIosKey:"079f895afd1cb76456fcd6a60c627acf7bddbbaa27a5bab30dcacf189c9611b3",joinQQGroupAndroidKey:"hxPg0OEwYBDwQmogP4MMXmVYvJQth-ZX",isShowIosQQ:0,isShowAndroidQQ:1,handbookLockBg:"Pictorial_Enemy_Bg_Locked",rlAllSelectProbability:8e3,BroadcastInterval:2e3,BroadcastIntervalBegin:300,potPerIngot:100,potCanReceivedIngot:600,potMaxIngot:1e3,potOpenVipLevel:2,appstoreReviewPageShowLevel:2,potCountDown:86400,potMaxClaimNum:1,skillCardNumList:[2,5],skillCardTimes:5,skillCardDrop:54001,figureChange:6,emailAutoShowNeedInstance:[1,8],defaultFullStarInstance:[1,5],systemTipsStayTimes:1500,rlAllSelectDefaultShow:0,rlRefreshValue:2,potMaxIngotShowNum:3,rlUpdateMaxNum:1,notShowNewEnemyUI:3,triggerJumpDistance:200,activateHeroTowerTime:30,activateHeroTowerShowVIP:1,conversionRequiredDia:10,conversionFullQualityProbability:2e3,defendIntervalTime:10,defendSpeedTime:60,defendSpeedTimes:10,defendHeroAverageLevel:[1,1,1,1,1,1,1,1,1,1],defendInitialPercentage:5,shareMinTime:2500,givePowerNum:2,givePowerTimes:5,receivePowerMaxNum:30,firstAddMyMiniGiveReward:[[1002,50],[1007,10]],addMyMiniGivePower:[[1007,5]],addFloatGivePower:[[1007,5]],addDestGivePower:[[1007,5]],subscribeGivePower:[[1007,5]],freePowerIconShow:35,systemSubscribeCancelInterval:3600,systemSubscribeRefuseInterval:86400,signInTipsTime:8,feebackMaxNumPerDay:2,instancePointTipsNum:[4,6],instanceButtonTipsNum:[5,7],instanceBoxPeopleRange:[[8500,9e3],[100,130]],instanceBoxCountdownHour:5,tryMaxTimes:[3,99999],secondHeroAdHours:6,nianInstanceReward:[1002,10800],nianKillNumReward:[[4,1006,7200],[8,1006,10800],[14,1006,14400],[18,1006,43200]],nianInstanceRewardRate:3,nianInstanceTimes:[2,3],shareHelp:[30,1,3],adHelp:[50,3,20],guildMemberNum:66,guildRewardContribution:100,guildMinContribution:100,joinGuildCD:12,newYearCountdownDays:10,newYearPopupCondition:[5,600],guildFlagList:["armyGroup_Flag_icon1","armyGroup_Flag_icon2","armyGroup_Flag_icon3","armyGroup_Flag_icon4","armyGroup_Flag_icon5","armyGroup_Flag_icon6"],nianTryMaxTimes:9999}],cc._RF.pop()},{}],Json_GoalRewardRatio:[function(e,t){"use strict";cc._RF.push(t,"1ed0cAXEL5JaYLp/+zuBu7N","Json_GoalRewardRatio"),e("Aft").JsonData.GoalRewardRatio=[{id:1,ratio:2,baseWeight:1e3,weightChangeTimes:99,variableWeight:0,isReset:0},{id:2,ratio:3,baseWeight:8e3,weightChangeTimes:99,variableWeight:0,isReset:0},{id:3,ratio:4,baseWeight:5e3,weightChangeTimes:99,variableWeight:0,isReset:0},{id:4,ratio:5,baseWeight:1e3,weightChangeTimes:2,variableWeight:2e3,isReset:0},{id:5,ratio:6,baseWeight:500,weightChangeTimes:3,variableWeight:2e3,isReset:1},{id:6,ratio:7,baseWeight:200,weightChangeTimes:3,variableWeight:2e3,isReset:1},{id:7,ratio:8,baseWeight:200,weightChangeTimes:4,variableWeight:1e3,isReset:1},{id:8,ratio:9,baseWeight:200,weightChangeTimes:4,variableWeight:500,isReset:1},{id:9,ratio:10,baseWeight:100,weightChangeTimes:4,variableWeight:500,isReset:1}],cc._RF.pop()},{}],Json_Goal:[function(e,t){"use strict";cc._RF.push(t,"b63425vL7VN7pmq/XM1lSfk","Json_Goal"),e("Aft").JsonData.Goal=[{id:10001,nextId:10002,title:"1909",desc:"1882",icon:"Main_BottomFunction2",taskType:10101,taskValue:[1,5],rewards:[[1001,15]],isRatio:1},{id:10002,nextId:10003,title:"1910",desc:"1883",icon:"Main_BottomFunction1",taskType:10201,taskValue:[43001],rewards:[[1002,600]],isRatio:1},{id:10003,nextId:10004,title:"1911",desc:"1885",icon:"Main_BottomFunction2",taskType:10301,taskValue:[43001,1],rewards:[[1002,600]],isRatio:1},{id:10004,nextId:10005,title:"1912",desc:"1886",icon:"Main_BottomFunction2",taskType:10302,taskValue:[43001,1],rewards:[[1002,1200]],isRatio:1},{id:10005,nextId:10006,title:"1915",desc:"1892",icon:"Main_BottomFunction3",taskType:10602,taskValue:[30],rewards:[[1002,3600]],isRatio:1},{id:10006,nextId:10007,title:"1909",desc:"1882",icon:"Main_BottomFunction2",taskType:10101,taskValue:[1,10],rewards:[[1001,20]],isRatio:1},{id:10007,nextId:10008,title:"1910",desc:"1883",icon:"Main_BottomFunction1",taskType:10201,taskValue:[43005],rewards:[[1002,2700]],isRatio:1},{id:10008,nextId:10009,title:"1911",desc:"1885",icon:"Main_BottomFunction2",taskType:10301,taskValue:[43005,1],rewards:[[1002,1350]],isRatio:1},{id:10009,nextId:10010,title:"1912",desc:"1886",icon:"Main_BottomFunction2",taskType:10302,taskValue:[43005,1],rewards:[[1002,1350]],isRatio:1},{id:10010,nextId:10011,title:"1919",desc:"1898",icon:"Main_BottomFunction1",taskType:10703,taskValue:[43001,1],rewards:[[1002,2160]],isRatio:1},{id:10011,nextId:10012,title:"1919",desc:"1898",icon:"Main_BottomFunction1",taskType:10703,taskValue:[43005,1],rewards:[[1002,2160]],isRatio:1},{id:10012,nextId:10013,title:"1913",desc:"1887",icon:"Main_ActivityFunction_LuckyChance",taskType:10401,taskValue:[8],rewards:[[1002,2700]],isRatio:1},{id:10013,nextId:10014,title:"1914",desc:"1889",icon:"Main_BottomFunction5",taskType:10501,taskValue:[43005,1],rewards:[[1002,2700]],isRatio:1},{id:10014,nextId:10015,title:"1922",desc:"1903",icon:"Main_BottomFunction6",taskType:10801,taskValue:[102],rewards:[[4002,3]],isRatio:0},{id:10015,nextId:10016,title:"1917",desc:"1895",icon:"Main_BottomFunction3",taskType:10605,taskValue:[2],rewards:[[1006,5400]],isRatio:1},{id:10016,nextId:10017,title:"1909",desc:"1882",icon:"Main_BottomFunction2",taskType:10101,taskValue:[2,5],rewards:[[1001,25]],isRatio:1},{id:10017,nextId:10018,title:"1910",desc:"1883",icon:"Main_BottomFunction1",taskType:10201,taskValue:[43008],rewards:[[1002,4320]],isRatio:1},{id:10018,nextId:10019,title:"1911",desc:"1885",icon:"Main_BottomFunction2",taskType:10301,taskValue:[43008,1],rewards:[[1002,1800]],isRatio:1},{id:10019,nextId:10020,title:"1912",desc:"1886",icon:"Main_BottomFunction2",taskType:10302,taskValue:[43008,1],rewards:[[1002,1800]],isRatio:1},{id:10020,nextId:10021,title:"1919",desc:"1898",icon:"Main_BottomFunction1",taskType:10703,taskValue:[43008,2],rewards:[[1002,1800]],isRatio:1},{id:10021,nextId:10022,title:"1913",desc:"1887",icon:"Main_ActivityFunction_LuckyChance",taskType:10401,taskValue:[11],rewards:[[1002,2880]],isRatio:1},{id:10022,nextId:10023,title:"1918",desc:"1897",icon:"Main_BottomFunction1",taskType:10702,taskValue:[1,50],rewards:[[1002,3600]],isRatio:1},{id:10023,nextId:10024,title:"1916",desc:"1893",icon:"Main_BottomFunction3",taskType:10603,taskValue:[1,5],rewards:[[1006,2880]],isRatio:1},{id:10024,nextId:10025,title:"1916",desc:"1893",icon:"Main_BottomFunction3",taskType:10603,taskValue:[2,5],rewards:[[1006,2880]],isRatio:1},{id:10025,nextId:10026,title:"1915",desc:"1892",icon:"Main_BottomFunction3",taskType:10602,taskValue:[70],rewards:[[1006,7200]],isRatio:1},{id:10026,nextId:10027,title:"1909",desc:"1882",icon:"Main_BottomFunction2",taskType:10101,taskValue:[2,10],rewards:[[1001,30]],isRatio:1},{id:10027,nextId:10028,title:"1914",desc:"1890",icon:"Main_BottomFunction5",taskType:10502,taskValue:[10],rewards:[[1002,4200]],isRatio:1},{id:10028,nextId:10029,title:"1910",desc:"1883",icon:"Main_BottomFunction1",taskType:10201,taskValue:[43101],rewards:[[1002,2520]],isRatio:1},{id:10029,nextId:10030,title:"1918",desc:"1897",icon:"Main_BottomFunction1",taskType:10702,taskValue:[1,70],rewards:[[1002,4200]],isRatio:1},{id:10030,nextId:10031,title:"1917",desc:"1895",icon:"Main_BottomFunction3",taskType:10605,taskValue:[3],rewards:[[1006,8400]],isRatio:1},{id:10031,nextId:10032,title:"1921",desc:"1902",icon:"Main_BottomFunction1",taskType:10707,taskValue:[1,2],rewards:[[1002,4200]],isRatio:1},{id:10032,nextId:10033,title:"1923",desc:"1905",icon:"Main_BottomFunction6",taskType:10803,taskValue:[104,10],rewards:[[4004,3]],isRatio:0},{id:10033,nextId:10034,title:"1915",desc:"1892",icon:"Main_BottomFunction3",taskType:10602,taskValue:[90],rewards:[[1006,8400]],isRatio:1},{id:10034,nextId:10035,title:"1909",desc:"1882",icon:"Main_BottomFunction2",taskType:10101,taskValue:[2,15],rewards:[[1001,35]],isRatio:0},{id:10035,nextId:10036,title:"1910",desc:"1883",icon:"Main_BottomFunction1",taskType:10201,taskValue:[43002],rewards:[[1002,5760]],isRatio:1},{id:10036,nextId:10037,title:"1911",desc:"1885",icon:"Main_BottomFunction2",taskType:10301,taskValue:[43002,1],rewards:[[1002,2400]],isRatio:1},{id:10037,nextId:10038,title:"1912",desc:"1886",icon:"Main_BottomFunction2",taskType:10302,taskValue:[43002,1],rewards:[[1002,2880]],isRatio:1},{id:10038,nextId:10039,title:"1918",desc:"1896",icon:"Main_BottomFunction1",taskType:10701,taskValue:[43002,40],rewards:[[1002,3840]],isRatio:1},{id:10039,nextId:10040,title:"1913",desc:"1887",icon:"Main_ActivityFunction_LuckyChance",taskType:10401,taskValue:[9],rewards:[[1002,4800]],isRatio:1},{id:10040,nextId:10041,title:"1915",desc:"1891",icon:"Main_BottomFunction3",taskType:10601,taskValue:[1,100],rewards:[[1006,4800]],isRatio:1},{id:10041,nextId:10042,title:"1915",desc:"1891",icon:"Main_BottomFunction3",taskType:10601,taskValue:[2,120],rewards:[[1006,4800]],isRatio:1},{id:10042,nextId:10043,title:"1915",desc:"1892",icon:"Main_BottomFunction3",taskType:10602,taskValue:[120],rewards:[[1006,9600]],isRatio:1},{id:10043,nextId:10044,title:"1909",desc:"1882",icon:"Main_BottomFunction2",taskType:10101,taskValue:[2,20],rewards:[[1001,40]],isRatio:0},{id:10044,nextId:10045,title:"1918",desc:"1897",icon:"Main_BottomFunction1",taskType:10702,taskValue:[1,100],rewards:[[1002,3240]],isRatio:1},{id:10045,nextId:10046,title:"1923",desc:"1905",icon:"Main_BottomFunction6",taskType:10803,taskValue:[104,30],rewards:[[4004,5]],isRatio:0},{id:10046,nextId:10047,title:"1920",desc:"1899",icon:"Main_BottomFunction1",taskType:10704,taskValue:[43005,1],rewards:[[1002,2700]],isRatio:1},{id:10047,nextId:10048,title:"1921",desc:"1901",icon:"Main_BottomFunction1",taskType:10706,taskValue:[43005,3],rewards:[[1002,8100]],isRatio:1},{id:10048,nextId:10049,title:"1909",desc:"1882",icon:"Main_BottomFunction2",taskType:10101,taskValue:[3,5],rewards:[[1001,45]],isRatio:0},{id:10049,nextId:10050,title:"1910",desc:"1883",icon:"Main_BottomFunction1",taskType:10201,taskValue:[43003],rewards:[[1002,9900]],isRatio:1},{id:10050,nextId:10051,title:"1911",desc:"1885",icon:"Main_BottomFunction2",taskType:10301,taskValue:[43003,1],rewards:[[1002,3300]],isRatio:1},{id:10051,nextId:10052,title:"1912",desc:"1886",icon:"Main_BottomFunction2",taskType:10302,taskValue:[43003,1],rewards:[[1002,3960]],isRatio:1},{id:10052,nextId:10053,title:"1922",desc:"1903",icon:"Main_BottomFunction6",taskType:10801,taskValue:[105],rewards:[[4005,3]],isRatio:0},{id:10053,nextId:10054,title:"1918",desc:"1896",icon:"Main_BottomFunction1",taskType:10701,taskValue:[43003,50],rewards:[[1002,3960]],isRatio:1},{id:10054,nextId:10055,title:"1913",desc:"1887",icon:"Main_ActivityFunction_LuckyChance",taskType:10401,taskValue:[2],rewards:[[1002,5280]],isRatio:1},{id:10055,nextId:10056,title:"1909",desc:"1882",icon:"Main_BottomFunction2",taskType:10101,taskValue:[3,10],rewards:[[1001,50]],isRatio:0},{id:10056,nextId:10057,title:"1910",desc:"1883",icon:"Main_BottomFunction1",taskType:10201,taskValue:[43102],rewards:[[1002,4320]],isRatio:1},{id:10057,nextId:10058,title:"1910",desc:"1883",icon:"Main_BottomFunction1",taskType:10201,taskValue:[43006],rewards:[[1002,10800]],isRatio:1},{id:10058,nextId:10059,title:"1918",desc:"1896",icon:"Main_BottomFunction1",taskType:10701,taskValue:[43006,50],rewards:[[1002,3600]],isRatio:1},{id:10059,nextId:10060,title:"1913",desc:"1887",icon:"Main_ActivityFunction_LuckyChance",taskType:10401,taskValue:[3],rewards:[[1002,4320]],isRatio:1},{id:10060,nextId:10061,title:"1913",desc:"1887",icon:"Main_ActivityFunction_LuckyChance",taskType:10401,taskValue:[4],rewards:[[1002,4320]],isRatio:1},{id:10061,nextId:10062,title:"1915",desc:"1891",icon:"Main_BottomFunction3",taskType:10601,taskValue:[3,150],rewards:[[1006,7200]],isRatio:1},{id:10062,nextId:10063,title:"1915",desc:"1891",icon:"Main_BottomFunction3",taskType:10601,taskValue:[4,150],rewards:[[1006,7200]],isRatio:1},{id:10063,nextId:10064,title:"1915",desc:"1892",icon:"Main_BottomFunction3",taskType:10602,taskValue:[150],rewards:[[1006,14400]],isRatio:1},{id:10064,nextId:10065,title:"1922",desc:"1903",icon:"Main_BottomFunction6",taskType:10801,taskValue:[108],rewards:[[4008,3]],isRatio:0},{id:10065,nextId:10066,title:"1909",desc:"1882",icon:"Main_BottomFunction2",taskType:10101,taskValue:[3,15],rewards:[[1001,55]],isRatio:0},{id:10066,nextId:10067,title:"1910",desc:"1883",icon:"Main_BottomFunction1",taskType:10201,taskValue:[43009],rewards:[[1002,11700]],isRatio:1},{id:10067,nextId:10068,title:"1918",desc:"1896",icon:"Main_BottomFunction1",taskType:10701,taskValue:[43009,50],rewards:[[1002,3900]],isRatio:1},{id:10068,nextId:10069,title:"1913",desc:"1887",icon:"Main_ActivityFunction_LuckyChance",taskType:10401,taskValue:[12],rewards:[[1002,4680]],isRatio:1},{id:10069,nextId:10070,title:"1922",desc:"1903",icon:"Main_BottomFunction6",taskType:10801,taskValue:[106],rewards:[[4006,3]],isRatio:0},{id:10070,nextId:10071,title:"1920",desc:"1900",icon:"Main_BottomFunction1",taskType:10705,taskValue:[1,1],rewards:[[1002,7800]],isRatio:1},{id:10071,nextId:10072,title:"1909",desc:"1882",icon:"Main_BottomFunction2",taskType:10101,taskValue:[3,20],rewards:[[1001,55]],isRatio:0},{id:10072,nextId:10073,title:"1915",desc:"1891",icon:"Main_BottomFunction3",taskType:10601,taskValue:[1,180],rewards:[[1006,7800]],isRatio:1},{id:10073,nextId:10074,title:"1915",desc:"1891",icon:"Main_BottomFunction3",taskType:10601,taskValue:[2,180],rewards:[[1006,7800]],isRatio:1},{id:10074,nextId:10075,title:"1915",desc:"1892",icon:"Main_BottomFunction3",taskType:10602,taskValue:[180],rewards:[[1006,15600]],isRatio:1},{id:10075,nextId:10076,title:"1921",desc:"1902",icon:"Main_BottomFunction1",taskType:10707,taskValue:[3,3],rewards:[[1002,15600]],isRatio:1},{id:10076,nextId:10077,title:"1923",desc:"1906",icon:"Main_BottomFunction6",taskType:10804,taskValue:[3,30],rewards:[[4001,5]],isRatio:0},{id:10077,nextId:10078,title:"1909",desc:"1882",icon:"Main_BottomFunction2",taskType:10101,taskValue:[4,5],rewards:[[1001,60]],isRatio:0},{id:10078,nextId:10079,title:"1924",desc:"1908",icon:"Main_BottomFunction6",taskType:10806,taskValue:[2,3],rewards:[[4003,5]],isRatio:0},{id:10079,nextId:10080,title:"1921",desc:"1902",icon:"Main_BottomFunction1",taskType:10707,taskValue:[2,4],rewards:[[1002,12600]],isRatio:1},{id:10080,nextId:10081,title:"1910",desc:"1883",icon:"Main_BottomFunction1",taskType:10201,taskValue:[43007],rewards:[[1002,12600]],isRatio:1},{id:10081,nextId:10082,title:"1913",desc:"1887",icon:"Main_ActivityFunction_LuckyChance",taskType:10401,taskValue:[1],rewards:[[1002,2520]],isRatio:1},{id:10082,nextId:10083,title:"1909",desc:"1882",icon:"Main_BottomFunction2",taskType:10101,taskValue:[4,10],rewards:[[1001,60]],isRatio:0},{id:10083,nextId:10084,title:"1915",desc:"1892",icon:"Main_BottomFunction3",taskType:10602,taskValue:[220],rewards:[[1006,8400]],isRatio:1},{id:10084,nextId:10085,title:"1915",desc:"1892",icon:"Main_BottomFunction3",taskType:10602,taskValue:[240],rewards:[[1006,16800]],isRatio:1},{id:10085,nextId:10086,title:"1920",desc:"1900",icon:"Main_BottomFunction1",taskType:10705,taskValue:[1,2],rewards:[[1002,8400]],isRatio:1},{id:10086,nextId:10087,title:"1909",desc:"1882",icon:"Main_BottomFunction2",taskType:10101,taskValue:[4,15],rewards:[[1001,60]],isRatio:0},{id:10087,nextId:10088,title:"1915",desc:"1892",icon:"Main_BottomFunction3",taskType:10602,taskValue:[260],rewards:[[1006,16800]],isRatio:1},{id:10088,nextId:10089,title:"1910",desc:"1883",icon:"Main_BottomFunction1",taskType:10201,taskValue:[43011],rewards:[[1002,12600]],isRatio:1},{id:10089,nextId:10090,title:"1918",desc:"1896",icon:"Main_BottomFunction1",taskType:10701,taskValue:[43011,50],rewards:[[1002,4200]],isRatio:1},{id:10090,nextId:10091,title:"1913",desc:"1887",icon:"Main_ActivityFunction_LuckyChance",taskType:10401,taskValue:[13],rewards:[[1002,5040]],isRatio:1},{id:10091,nextId:10092,title:"1913",desc:"1887",icon:"Main_ActivityFunction_LuckyChance",taskType:10401,taskValue:[10],rewards:[[1002,5040]],isRatio:1},{id:10092,nextId:10093,title:"1913",desc:"1887",icon:"Main_ActivityFunction_LuckyChance",taskType:10401,taskValue:[5],rewards:[[1002,5040]],isRatio:1},{id:10093,nextId:10094,title:"1909",desc:"1882",icon:"Main_BottomFunction2",taskType:10101,taskValue:[4,20],rewards:[[1001,65]],isRatio:0},{id:10094,nextId:10095,title:"1915",desc:"1892",icon:"Main_BottomFunction3",taskType:10602,taskValue:[280],rewards:[[1006,18e3]],isRatio:1},{id:10095,nextId:10096,title:"1910",desc:"1883",icon:"Main_BottomFunction1",taskType:10201,taskValue:[43107],rewards:[[1002,5400]],isRatio:1},{id:10096,nextId:10097,title:"1910",desc:"1883",icon:"Main_BottomFunction1",taskType:10201,taskValue:[43004],rewards:[[1002,13500]],isRatio:1},{id:10097,nextId:10098,title:"1918",desc:"1896",icon:"Main_BottomFunction1",taskType:10701,taskValue:[43004,50],rewards:[[1002,4500]],isRatio:1},{id:10098,nextId:10099,title:"1913",desc:"1887",icon:"Main_ActivityFunction_LuckyChance",taskType:10401,taskValue:[7],rewards:[[1002,5400]],isRatio:1},{id:10099,nextId:10100,title:"1918",desc:"1896",icon:"Main_BottomFunction1",taskType:10701,taskValue:[43107,50],rewards:[[1002,4500]],isRatio:1},{id:10100,nextId:10101,title:"1913",desc:"1887",icon:"Main_ActivityFunction_LuckyChance",taskType:10401,taskValue:[6],rewards:[[1002,5400]],isRatio:1},{id:10101,nextId:10102,title:"1909",desc:"1882",icon:"Main_BottomFunction2",taskType:10101,taskValue:[5,10],rewards:[[1001,70]],isRatio:0},{id:10102,nextId:10103,title:"1915",desc:"1892",icon:"Main_BottomFunction3",taskType:10602,taskValue:[300],rewards:[[1006,19200]],isRatio:1},{id:10103,nextId:10104,title:"1910",desc:"1883",icon:"Main_BottomFunction1",taskType:10201,taskValue:[43012],rewards:[[1002,14400]],isRatio:1},{id:10104,nextId:10105,title:"1909",desc:"1882",icon:"Main_BottomFunction2",taskType:10101,taskValue:[5,20],rewards:[[1001,70]],isRatio:0},{id:10105,nextId:10106,title:"1915",desc:"1892",icon:"Main_BottomFunction3",taskType:10602,taskValue:[350],rewards:[[1006,19200]],isRatio:1},{id:10106,nextId:10107,title:"1910",desc:"1883",icon:"Main_BottomFunction1",taskType:10201,taskValue:[43010],rewards:[[1002,14400]],isRatio:1},{id:10107,nextId:10108,title:"1918",desc:"1896",icon:"Main_BottomFunction1",taskType:10701,taskValue:[43010,50],rewards:[[1002,4800]],isRatio:1},{id:10108,nextId:10109,title:"1913",desc:"1887",icon:"Main_ActivityFunction_LuckyChance",taskType:10401,taskValue:[14],rewards:[[1002,5760]],isRatio:1},{id:10109,nextId:10110,title:"1909",desc:"1882",icon:"Main_BottomFunction2",taskType:10101,taskValue:[6,20],rewards:[[1001,75]],isRatio:0},{id:10110,nextId:10111,title:"1915",desc:"1892",icon:"Main_BottomFunction3",taskType:10602,taskValue:[450],rewards:[[1006,20400]],isRatio:1},{id:10111,nextId:10112,title:"1920",desc:"1900",icon:"Main_BottomFunction1",taskType:10705,taskValue:[1,3],rewards:[[1002,10200]],isRatio:1},{id:10112,nextId:10113,title:"1909",desc:"1882",icon:"Main_BottomFunction2",taskType:10101,taskValue:[7,20],rewards:[[1001,80]],isRatio:0},{id:10113,nextId:10114,title:"1915",desc:"1892",icon:"Main_BottomFunction3",taskType:10602,taskValue:[500],rewards:[[1006,21600]],isRatio:1},{id:10114,nextId:10115,title:"1909",desc:"1882",icon:"Main_BottomFunction2",taskType:10101,taskValue:[8,20],rewards:[[1001,80]],isRatio:0},{id:10115,nextId:10116,title:"1915",desc:"1892",icon:"Main_BottomFunction3",taskType:10602,taskValue:[600],rewards:[[1006,22400]],isRatio:1},{id:10116,nextId:10117,title:"1920",desc:"1900",icon:"Main_BottomFunction1",taskType:10705,taskValue:[1,4],rewards:[[1002,11200]],isRatio:1},{id:10117,nextId:10118,title:"1909",desc:"1882",icon:"Main_BottomFunction2",taskType:10101,taskValue:[9,20],rewards:[[1001,85]],isRatio:0},{id:10118,nextId:10119,title:"1915",desc:"1892",icon:"Main_BottomFunction3",taskType:10602,taskValue:[700],rewards:[[1006,24e3]],isRatio:1},{id:10119,nextId:10120,title:"1920",desc:"1900",icon:"Main_BottomFunction1",taskType:10705,taskValue:[1,5],rewards:[[1002,12e3]],isRatio:1},{id:10120,nextId:10121,title:"1917",desc:"1895",icon:"Main_BottomFunction3",taskType:10605,taskValue:[9],rewards:[[1006,18e3]],isRatio:1},{id:10121,nextId:10122,title:"1915",desc:"1892",icon:"Main_BottomFunction3",taskType:10602,taskValue:[750],rewards:[[1006,24e3]],isRatio:1},{id:10122,nextId:10123,title:"1909",desc:"1882",icon:"Main_BottomFunction2",taskType:10101,taskValue:[10,20],rewards:[[1001,90]],isRatio:0},{id:10123,nextId:10124,title:"1915",desc:"1892",icon:"Main_BottomFunction3",taskType:10602,taskValue:[800],rewards:[[1006,25200]],isRatio:1},{id:10124,nextId:10125,title:"1920",desc:"1900",icon:"Main_BottomFunction1",taskType:10705,taskValue:[4,5],rewards:[[1002,12600]],isRatio:1},{id:10125,nextId:10126,title:"1921",desc:"1902",icon:"Main_BottomFunction1",taskType:10707,taskValue:[4,4],rewards:[[1002,12600]],isRatio:1},{id:10126,nextId:10127,title:"1918",desc:"1897",icon:"Main_BottomFunction1",taskType:10702,taskValue:[4,800],rewards:[[1002,12600]],isRatio:1},{id:10127,nextId:10128,title:"1920",desc:"1900",icon:"Main_BottomFunction1",taskType:10705,taskValue:[8,5],rewards:[[1002,18900]],isRatio:1},{id:10128,nextId:10129,title:"1921",desc:"1902",icon:"Main_BottomFunction1",taskType:10707,taskValue:[8,4],rewards:[[1002,18900]],isRatio:1},{id:10129,nextId:10130,title:"1918",desc:"1897",icon:"Main_BottomFunction1",taskType:10702,taskValue:[8,800],rewards:[[1002,18900]],isRatio:1},{id:10130,nextId:10131,title:"1920",desc:"1900",icon:"Main_BottomFunction1",taskType:10705,taskValue:[12,5],rewards:[[1002,25200]],isRatio:1},{id:10131,nextId:10132,title:"1921",desc:"1902",icon:"Main_BottomFunction1",taskType:10707,taskValue:[12,4],rewards:[[1002,25200]],isRatio:1},{id:10132,nextId:10133,title:"1918",desc:"1897",icon:"Main_BottomFunction1",taskType:10702,taskValue:[12,800],rewards:[[1002,25200]],isRatio:1}],cc._RF.pop()},{}],Json_Guide:[function(e,t){"use strict";cc._RF.push(t,"8c602hMVb1O670uy5HbrpH1","Json_Guide"),e("Aft").JsonData.Guide=[{id:1,PreId:0,isShowArrows:1,isRecordStep:0,guideType:1,isLogRecord:1,guideOrder:0,isLastStep:0,dialogueType:3,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003001",logPointShow:"10009001",isMaskOperation:2,desc:"\u5f00\u573a\u5267\u60c5\u90e8\u5206-1",isRichText:0},{id:2,PreId:1,isShowArrows:1,dialogue:"51001",isRecordStep:0,guideType:1,isLogRecord:1,guideOrder:1,isLastStep:0,dialogueType:0,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,100],logPoint:"10003002",logPointShow:"10009002",isMaskOperation:2,desc:"\u5173\u5361\u5f15\u5bfc\u6587\u672c-2",isRichText:0},{id:3,PreId:2,isShowArrows:1,dialogue:"51002",isRecordStep:0,guideType:1,isLogRecord:1,guideOrder:2,isLastStep:0,dialogueType:0,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,100],logPoint:"10003003",logPointShow:"10009003",desc:"\u5173\u5361\u5f15\u5bfc\u6587\u672c-3",isRichText:0},{id:4,PreId:3,isShowArrows:1,isRecordStep:0,guideType:1,isLogRecord:1,guideOrder:3,isLastStep:0,dialogueType:3,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,-50],logPoint:"10003004",logPointShow:"10009004",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u5854\u4ecb\u7ecd\u5f39\u677f-4",isRichText:0},{id:5,PreId:4,isShowArrows:1,dialogue:"51003",isRecordStep:0,guideType:1,isLogRecord:1,guideOrder:4,isLastStep:0,dialogueType:0,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,100],logPoint:"10003005",logPointShow:"10009005",maskOffset:[0,0,100,100],desc:"\u5173\u5361\u5f15\u5bfc\u6587\u672c-5",isRichText:0},{id:6,PreId:5,isShowArrows:1,isRecordStep:0,guideType:1,isLogRecord:1,guideOrder:5,isLastStep:0,dialogueType:3,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,-50],logPoint:"10003006",logPointShow:"10009006",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u73a9\u6cd5\u5f39\u677f-6",isRichText:0},{id:7,PreId:6,isShowArrows:1,dialogue:"51004",isRecordStep:0,guideType:1,isLogRecord:1,guideOrder:6,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,-150],logPoint:"10003007",logPointShow:"10009007",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u6307\u5f15\u70b9\u51fb\u7a7a\u5730-7",isRichText:0},{id:8,PreId:7,isShowArrows:1,dialogue:"51005",isRecordStep:0,guideType:1,isLogRecord:1,guideOrder:7,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003008",logPointShow:"10009008",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u6307\u5f15\u7bad\u5854\u5efa\u9020-8",isRichText:1},{id:9,PreId:8,isShowArrows:1,dialogue:"51006",isRecordStep:0,guideType:1,isLogRecord:1,guideOrder:8,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003009",logPointShow:"10009009",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u6307\u5f15\u7bad\u5854\u5efa\u9020\u786e\u8ba4-9",isRichText:1},{id:10,PreId:9,isShowArrows:1,dialogue:"51007",isRecordStep:0,guideType:1,isLogRecord:1,guideOrder:9,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,150],logPoint:"10003010",logPointShow:"10009010",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u6307\u5f15\u70b9\u51fb\u7a7a\u5730-10",isRichText:1},{id:11,PreId:10,isShowArrows:1,isRecordStep:0,guideType:1,isLogRecord:1,guideOrder:10,isLastStep:0,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003011",logPointShow:"10009011",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u6307\u5f15\u5175\u8425\u5efa\u9020-11",isRichText:0},{id:12,PreId:11,isShowArrows:1,isRecordStep:0,guideType:1,isLogRecord:1,guideOrder:11,isLastStep:0,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003012",logPointShow:"10009012",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u6307\u5f15\u5175\u8425\u5efa\u9020\u786e\u8ba4-12",isRichText:0},{id:13,PreId:12,isShowArrows:1,dialogue:"51008",isRecordStep:0,guideType:1,isLogRecord:1,guideOrder:12,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,250],logPoint:"10003013",logPointShow:"10009013",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u6307\u5f15\u70b9\u51fb\u7a7a\u5730-13",isRichText:1},{id:14,PreId:13,isShowArrows:1,isRecordStep:0,guideType:1,isLogRecord:1,guideOrder:13,isLastStep:0,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003014",logPointShow:"10009014",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u6307\u5f15\u7bad\u5854\u5efa\u9020-14",isRichText:0},{id:15,PreId:14,isShowArrows:1,isRecordStep:0,guideType:1,isLogRecord:1,guideOrder:14,isLastStep:0,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003015",logPointShow:"10009015",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u6307\u5f15\u7bad\u5854\u5efa\u9020\u786e\u8ba4-15",isRichText:0},{id:16,PreId:15,isShowArrows:1,dialogue:"51009",isRecordStep:0,guideType:1,isLogRecord:1,guideOrder:15,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:0,headType:0,isFlip:0,offset:[0,-150],logPoint:"10003016",logPointShow:"10009016",maskOffset:[0,0,120,120],desc:"\u5f00\u59cb\u6218\u6597-16",isRichText:0},{id:17,PreId:16,isShowArrows:1,dialogue:"52001",isRecordStep:0,guideType:1,isLogRecord:1,guideOrder:16,isLastStep:0,dialogueType:4,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,100],logPoint:"10003017",logPointShow:"10009017",maskOffset:[0,0,100,100],desc:"\u63d0\u524d\u53ec\u5524\u654c\u519b-17",isRichText:0},{id:18,PreId:17,isShowArrows:1,dialogue:"52001",isRecordStep:0,guideType:1,isLogRecord:1,guideOrder:17,isLastStep:0,dialogueType:4,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,100],logPoint:"10003018",logPointShow:"10009018",maskOffset:[0,0,100,100],desc:"\u63d0\u524d\u53ec\u5524\u654c\u519b-18",isRichText:0},{id:19,PreId:18,isShowArrows:1,isRecordStep:0,guideType:1,isLogRecord:1,guideOrder:18,isLastStep:0,dialogueType:3,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,-50],logPoint:"10003152",logPointShow:"10009152",maskOffset:[0,0,100,100],desc:"\u7b2c\u4e09\u6ce2\u5f00\u59cb\u98d8\u5b8c\u5b57\u4e4b\u540e\u5f39\u51fa\u677f\u5b50-\u5175\u8425\u9a7b\u5b88",isRichText:0},{id:20,PreId:19,isShowArrows:1,dialogue:"51010",isRecordStep:1,guideType:1,isLogRecord:1,guideOrder:19,isLastStep:0,dialogueType:0,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,100],logPoint:"10003019",logPointShow:"10009019",maskOffset:[0,0,200,200],isMaskOperation:2,desc:"\u80dc\u5229\u540e\u6587\u672c-19",isRichText:0},{id:21,PreId:20,isShowArrows:1,isRecordStep:0,guideType:1,isLogRecord:1,guideOrder:20,isLastStep:0,dialogueType:0,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003020",logPointShow:"10009020",maskOffset:[0,0,100,100],dialogId:101,isMaskOperation:2,desc:"\u80dc\u5229\u540e\u6587\u672c-20",isRichText:0},{id:22,PreId:21,isShowArrows:1,isRecordStep:0,guideType:1,isLogRecord:1,guideOrder:21,isLastStep:0,dialogueType:0,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003021",logPointShow:"10009021",maskOffset:[0,0,200,200],dialogId:102,isMaskOperation:2,desc:"\u80dc\u5229\u540e\u6587\u672c-21",isRichText:0},{id:23,PreId:22,isShowArrows:1,isRecordStep:0,guideType:1,isLogRecord:1,guideOrder:22,isLastStep:0,dialogueType:0,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003022",logPointShow:"10009022",dialogId:103,isMaskOperation:2,desc:"\u80dc\u5229\u540e\u6587\u672c-22",isRichText:0},{id:24,PreId:23,isShowArrows:1,isRecordStep:0,guideType:1,isLogRecord:1,guideOrder:23,isLastStep:1,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,100],logPoint:"10003023",logPointShow:"10009023",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u7ed3\u7b97\u9762\u677f\u5173\u95ed-23",isRichText:0},{id:1001,PreId:0,isShowArrows:1,dialogue:"51011",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:0,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:1,headType:0,isFlip:0,offset:[0,-100],logPoint:"10003024",logPointShow:"10009024",maskOffset:[0,0,120,120],isMaskOperation:10,desc:"\u6307\u5f15\u9632\u5fa1\u5854\u5165\u53e3-24",isRichText:0},{id:1002,PreId:1001,isShowArrows:1,dialogue:"51012",isRecordStep:1,guideType:2,isLogRecord:1,guideOrder:1,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003025",logPointShow:"10009025",maskOffset:[0,0,100,100],isMaskOperation:10,desc:"\u7bad\u5854\u5347\u7ea7\u6309\u94ae-25",isRichText:1},{id:1003,PreId:1002,isShowArrows:1,dialogue:"51013",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:2,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003026",logPointShow:"10009026",maskOffset:[0,0,100,100],isMaskOperation:10,desc:"\u7bad\u5854\u5347\u7ea7\u6309\u94ae-26",isRichText:0},{id:1004,PreId:1003,isShowArrows:1,dialogue:"51014",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:3,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:1,headType:0,isFlip:0,offset:[0,-100],logPoint:"10003027",logPointShow:"10009027",maskOffset:[0,0,120,120],isMaskOperation:10,desc:"\u9632\u5fa1\u5854\u5173\u95ed\u6309\u94ae-27",isRichText:1},{id:1005,PreId:1004,isShowArrows:1,dialogue:"51015",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:4,isLastStep:1,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,200],logPoint:"10003028",logPointShow:"10009028",maskOffset:[0,0,150,150],desc:"\u6307\u5f15\u70b9\u51fb\u7b2c2\u5173-28",isRichText:1},{id:2001,PreId:0,isShowArrows:1,dialogue:"51016",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:0,isLastStep:0,dialogueType:0,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,100],logPoint:"10003029",logPointShow:"10009029",desc:"\u7b2c2\u5173\u5f15\u5bfc\u6587\u672c-30",isRichText:1},{id:2002,PreId:2001,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:1,isLastStep:0,dialogueType:3,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,-50],logPoint:"10003030",logPointShow:"10009030",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u65b0\u5854\u5f39\u677f-31",isRichText:0},{id:2003,PreId:2002,isShowArrows:1,dialogue:"51017",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:2,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,-220],logPoint:"10003031",logPointShow:"10009031",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u6307\u5f15\u70b9\u51fb\u7a7a\u5730-32",isRichText:0},{id:2004,PreId:2003,isShowArrows:1,dialogue:"51018",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:3,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,200],logPoint:"10003032",logPointShow:"10009032",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u6cd5\u5e08\u5854\u5efa\u9020-33",isRichText:1},{id:2005,PreId:2004,isShowArrows:1,dialogue:"51019",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:4,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,200],logPoint:"10003033",logPointShow:"10009033",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u6cd5\u5e08\u5854\u5efa\u9020\u786e\u8ba4-34",isRichText:1},{id:2006,PreId:2005,isShowArrows:1,dialogue:"51020",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:5,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003034",logPointShow:"10009034",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u6307\u5f15\u70b9\u51fb\u7a7a\u5730-35",isRichText:1},{id:2007,PreId:2006,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:6,isLastStep:0,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003035",logPointShow:"10009035",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u6cd5\u5e08\u5854\u5efa\u9020-36",isRichText:0},{id:2008,PreId:2007,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:7,isLastStep:0,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003036",logPointShow:"10009036",maskOffset:[0,0,100,100],desc:"\u6cd5\u5e08\u5854\u5efa\u9020\u786e\u8ba4-37",isRichText:0},{id:2009,PreId:2008,isShowArrows:1,dialogue:"52005",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:8,isLastStep:0,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:0,headType:0,isFlip:0,offset:[0,-150],logPoint:"10003037",logPointShow:"10009037",maskOffset:[0,0,120,120],desc:"\u5f00\u59cb\u6218\u6597-38",isRichText:0},{id:2010,PreId:2009,isShowArrows:1,dialogue:"51021",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:9,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,-100],logPoint:"10003038",logPointShow:"10009038",maskOffset:[0,0,120,120],isMaskOperation:2,desc:"\u6307\u5f15\u70b9\u51fb\u7a7a\u5730-39",isRichText:1},{id:2011,PreId:2010,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:10,isLastStep:0,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003039",logPointShow:"10009039",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u70ae\u5854\u5efa\u9020-40",isRichText:0},{id:2012,PreId:2011,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:11,isLastStep:0,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003040",logPointShow:"10009040",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u70ae\u5854\u5efa\u9020\u786e\u8ba4-41",isRichText:0},{id:2013,PreId:2012,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:12,isLastStep:0,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,-150],logPoint:"10003041",logPointShow:"10009041",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u6307\u5f15\u70b9\u51fb\u7a7a\u5730-42",isRichText:0},{id:2014,PreId:2013,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:13,isLastStep:0,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003042",logPointShow:"10009042",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u70ae\u5854\u5efa\u9020-43",isRichText:0},{id:2015,PreId:2014,isShowArrows:1,isRecordStep:1,guideType:2,isLogRecord:1,guideOrder:14,isLastStep:1,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003043",logPointShow:"10009043",maskOffset:[0,0,100,100],desc:"\u70ae\u5854\u5efa\u9020\u786e\u8ba4-44",isRichText:0},{id:3001,PreId:0,isShowArrows:1,dialogue:"51022",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:0,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:1,headType:0,isFlip:0,offset:[0,-100],logPoint:"10003044",logPointShow:"10009044",maskOffset:[0,0,120,120],isMaskOperation:2,desc:"\u70b9\u51fb\u9632\u5fa1\u5854\u5165\u53e3-45",isRichText:0},{id:3002,PreId:3001,isShowArrows:1,dialogue:"51023",isRecordStep:1,guideType:2,isLogRecord:1,guideOrder:1,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,200],logPoint:"10003045",logPointShow:"10009045",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u5175\u8425\u5347\u7ea7-46",isRichText:0},{id:3003,PreId:3002,isShowArrows:1,dialogue:"51024",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:2,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,200],logPoint:"10003046",logPointShow:"10009046",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u5175\u8425\u5347\u7ea7-47",isRichText:0},{id:3004,PreId:3003,isShowArrows:1,dialogue:"51025",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:3,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:1,headType:0,isFlip:0,offset:[0,-100],logPoint:"10003047",logPointShow:"10009047",maskOffset:[0,0,100,100],desc:"\u9632\u5fa1\u5854\u5173\u95ed\u6309\u94ae-48",isRichText:0},{id:3005,PreId:3004,isShowArrows:1,dialogue:"52007",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:4,isLastStep:0,dialogueType:4,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,150],logPoint:"10003048",logPointShow:"10009048",maskOffset:[0,0,160,160],desc:"\u5173\u5361\u5934\u4e0a\u6c14\u6ce1-49",isRichText:0},{id:3006,PreId:3005,isShowArrows:1,dialogue:"52007",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:5,isLastStep:1,dialogueType:3,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,150],logPoint:"10003049",logPointShow:"10009049",maskOffset:[0,0,160,160],desc:"\u5f39\u51fa\u76ee\u6807\u5f39\u677f-50",isRichText:0},{id:4001,PreId:0,isShowArrows:0,dialogue:"51026",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:0,isLastStep:0,dialogueType:0,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003050",logPointShow:"10009050",isMaskOperation:2,desc:"\u7b2c3\u5173\u6587\u672c-50",isRichText:0},{id:4002,PreId:4001,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:1,isLastStep:0,dialogueType:3,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003051",logPointShow:"10009051",maskOffset:[0,0,150,150],desc:"2\u7ea7\u5854\u5f39\u677f-51",isRichText:0},{id:4003,PreId:4002,isShowArrows:1,dialogue:"52006",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:2,isLastStep:0,dialogueType:4,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,-200],logPoint:"10003052",logPointShow:"10009052",maskOffset:[0,0,160,160],desc:"\u6c14\u6ce1-\u7bad\u5854\u53ef\u5347\u7ea7-52",isRichText:0},{id:4004,PreId:4003,isShowArrows:1,dialogue:"52008",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:3,isLastStep:0,dialogueType:4,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003053",logPointShow:"10009053",desc:"\u6c14\u6ce1-\u5175\u8425\u53ef\u5347\u7ea7-53",isRichText:0},{id:4005,PreId:4004,isShowArrows:1,dialogue:"52005",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:4,isLastStep:0,dialogueType:4,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003054",logPointShow:"10009054",desc:"\u6c14\u6ce1-\u5f00\u59cb\u6218\u6597-54",isRichText:0},{id:4006,PreId:4005,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:5,isLastStep:0,dialogueType:0,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003055",logPointShow:"10009055",dialogId:104,desc:"\u6280\u80fd\u5f15\u5bfc\u6587\u672c-55",isRichText:0},{id:4007,PreId:4006,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:6,isLastStep:0,dialogueType:3,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003056",logPointShow:"10009056",desc:"\u65b0\u6280\u80fd\u5f39\u677f-56",isRichText:0},{id:4008,PreId:4007,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:7,isLastStep:0,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,-100],logPoint:"10003057",logPointShow:"10009057",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u6280\u80fd\u56fe\u6807\u663e\u793a-57",isRichText:0},{id:4009,PreId:4008,isShowArrows:1,dialogue:"51027",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:8,isLastStep:0,dialogueType:0,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003058",logPointShow:"10009058",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u6280\u80fd\u5f15\u5bfc\u6587\u672c-58",isRichText:0},{id:4010,PreId:4009,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:9,isLastStep:0,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003059",logPointShow:"10009059",desc:"\u62d6\u52a8\u91ca\u653e\u6548\u679c-59",isRichText:0},{id:4011,PreId:4010,isShowArrows:1,dialogue:"51028",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:10,isLastStep:0,dialogueType:0,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003060",logPointShow:"10009060",maskOffset:[0,0,100,100],desc:"\u6280\u80fd\u5f15\u5bfc\u6587\u672c-60",isRichText:0},{id:4012,PreId:4011,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:11,isLastStep:0,dialogueType:0,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003061",logPointShow:"10009061",maskOffset:[0,0,100,100],dialogId:111,isMaskOperation:2,desc:"\u5415\u5e03\u5f15\u5bfc\u6587\u672c-61",isRichText:0},{id:4013,PreId:4012,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:12,isLastStep:0,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003062",logPointShow:"10009062",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u5415\u5e03\u51fa\u73b0-62",isRichText:0},{id:4014,PreId:4013,isShowArrows:1,dialogue:"51058",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:13,isLastStep:0,dialogueType:0,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,-150],logPoint:"10003063",logPointShow:"10009063",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u6280\u80fd\u5f15\u5bfc\u6587\u672c-63",isRichText:0},{id:4015,PreId:4014,isShowArrows:1,dialogue:"52011",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:14,isLastStep:0,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003064",logPointShow:"10009064",desc:"\u62d6\u52a8\u91ca\u653e\u6548\u679c-64",isRichText:0},{id:4016,PreId:4015,isShowArrows:1,isRecordStep:1,guideType:2,isLogRecord:1,guideOrder:15,isLastStep:1,dialogueType:0,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003065",logPointShow:"10009065",maskOffset:[0,0,100,100],dialogId:112,desc:"\u5415\u5e03\u5f15\u5bfc\u6587\u672c-65",isRichText:0},{id:5001,PreId:0,isShowArrows:1,dialogue:"51029",isRecordStep:1,guideType:2,isLogRecord:1,guideOrder:0,isLastStep:1,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:0,headType:0,isFlip:0,offset:[0,100],logPoint:"10003066",logPointShow:"10009066",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u70b9\u51fb\u4efb\u52a1\u5165\u53e3-66",isRichText:0},{id:13001,PreId:0,isShowArrows:1,isRecordStep:1,guideType:2,isLogRecord:1,guideOrder:0,isLastStep:0,dialogueType:3,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003067",logPointShow:"10009067",maskOffset:[0,0,100,100],desc:"3\u7ea7\u5854\u5f39\u677f-68",isRichText:0},{id:13002,PreId:13001,isShowArrows:1,dialogue:"52010",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:1,isLastStep:0,dialogueType:4,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003068",logPointShow:"10009068",maskOffset:[0,0,100,100],desc:"\u70ae\u5854\u5347\u7ea7\u6c14\u6ce1-69",isRichText:0},{id:13003,PreId:13002,isShowArrows:1,dialogue:"52009",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:2,isLastStep:0,dialogueType:4,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003069",logPointShow:"10009069",maskOffset:[0,0,100,100],desc:"\u6cd5\u5e08\u5854\u53ef\u5347\u7ea7-70",isRichText:0},{id:13004,PreId:13003,isShowArrows:1,dialogue:"52005",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:3,isLastStep:1,dialogueType:4,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003070",logPointShow:"10009070",maskOffset:[0,0,100,100],desc:"\u5f00\u59cb\u6218\u6597-71",isRichText:0},{id:14001,PreId:0,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:0,isLastStep:0,dialogueType:3,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003071",logPointShow:"10009071",maskOffset:[0,0,100,100],desc:"3\u7ea7\u5854\u5f39\u677f-72",isRichText:0},{id:14002,PreId:14001,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:1,isLastStep:0,dialogueType:0,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003072",logPointShow:"10009072",maskOffset:[0,0,100,100],dialogId:107,isMaskOperation:2,desc:"\u5173\u7fbd\u5f15\u5bfc-73",isRichText:0},{id:14003,PreId:14002,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:2,isLastStep:0,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003073",logPointShow:"10009073",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u5173\u7fbd\u51fa\u73b0-74",isRichText:0},{id:14004,PreId:14003,isShowArrows:1,isRecordStep:1,guideType:2,isLogRecord:1,guideOrder:3,isLastStep:1,dialogueType:0,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003074",logPointShow:"10009074",maskOffset:[0,0,100,100],dialogId:108,desc:"\u5173\u7fbd\u5f15\u5bfc-75",isRichText:0},{id:15001,PreId:0,isShowArrows:1,dialogue:"51031",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:0,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:1,headType:0,isFlip:0,offset:[0,-100],logPoint:"10003075",logPointShow:"10009075",maskOffset:[0,0,120,120],isMaskOperation:2,desc:"\u5173\u7fbd\u5f15\u5bfc-76",isRichText:0},{id:15002,PreId:15001,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:1,isLastStep:0,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003076",logPointShow:"10009076",maskOffset:[0,0,200,200],isMaskOperation:2,desc:"\u70b9\u51fb\u5173\u7fbd\u5934\u50cf-77",isRichText:0},{id:15003,PreId:15002,isShowArrows:1,dialogue:"51032",isRecordStep:1,guideType:2,isLogRecord:1,guideOrder:2,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003077",logPointShow:"10009077",maskOffset:[0,0,200,200],isMaskOperation:2,desc:"\u70b9\u51fb\u62db\u52df\u6309\u94ae-78",isRichText:0},{id:15004,PreId:15003,isShowArrows:1,dialogue:"51033",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:3,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003078",logPointShow:"10009078",maskOffset:[0,0,200,200],isMaskOperation:2,desc:"\u70b9\u51fb\u5347\u7ea7\u6309\u94ae-79",isRichText:0},{id:15005,PreId:15004,isShowArrows:1,dialogue:"51034",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:4,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003079",logPointShow:"10009079",maskOffset:[0,0,200,200],isMaskOperation:2,desc:"\u70b9\u51fb\u5347\u7ea7\u6309\u94ae-80",isRichText:0},{id:15006,PreId:15005,isShowArrows:1,dialogue:"51035",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:5,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,150],logPoint:"10003080",logPointShow:"10009080",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u70b9\u51fb\u8bbe\u7f6e\u5148\u950b-81",isRichText:0},{id:15007,PreId:15006,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:6,isLastStep:0,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,150],logPoint:"10003081",logPointShow:"10009081",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u5173\u95ed\u8be6\u60c5\u9762\u677f-82",isRichText:0},{id:15008,PreId:15007,isShowArrows:1,dialogue:"51036",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:7,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:1,headType:0,isFlip:0,offset:[0,0],logPoint:"10003082",logPointShow:"10009082",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u9632\u5fa1\u5854\u754c\u9762-83",isRichText:0},{id:15009,PreId:15008,isShowArrows:1,dialogue:"51037",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:8,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,50],logPoint:"10003083",logPointShow:"10009083",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u5b88\u5c06\u9009\u62e9\u754c\u9762-84",isRichText:0},{id:15010,PreId:15009,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:9,isLastStep:0,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,150],logPoint:"10003084",logPointShow:"10009084",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u9009\u62e9\u5173\u7fbd\u5934\u50cf-85",isRichText:0},{id:15011,PreId:15010,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:10,isLastStep:0,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,150],logPoint:"10003085",logPointShow:"10009085",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u5173\u95ed\u9009\u62e9\u754c\u9762-86",isRichText:0},{id:15012,PreId:15011,isShowArrows:1,dialogue:"51038",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:11,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:1,headType:0,isFlip:0,offset:[0,0],logPoint:"10003086",logPointShow:"10009086",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u5173\u95ed\u82f1\u96c4\u8be6\u60c5-87",isRichText:0},{id:15013,PreId:15012,isShowArrows:1,dialogue:"51039",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:12,isLastStep:1,dialogueType:0,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003087",logPointShow:"10009087",maskOffset:[0,0,150,150],desc:"\u5b88\u5c06\u5f15\u5bfc\u6587\u672c-88",isRichText:0},{id:16001,PreId:0,isShowArrows:1,dialogue:"52013",isRecordStep:1,guideType:2,isLogRecord:1,guideOrder:0,isLastStep:1,dialogueType:4,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003088",logPointShow:"10009088",maskOffset:[0,0,100,100],desc:"\u82f1\u96c4\u64cd\u4f5c\u63d0\u793a-89",isRichText:0},{id:17001,PreId:0,isShowArrows:1,dialogue:"52012",isRecordStep:1,guideType:2,isLogRecord:1,guideOrder:0,isLastStep:1,dialogueType:4,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003089",logPointShow:"10009089",maskOffset:[0,0,100,100],desc:"\u53474\u7ea7\u70ae\u5854\u63d0\u793a-90",isRichText:0},{id:18001,PreId:0,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:0,isLastStep:0,dialogueType:0,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003090",logPointShow:"10009090",maskOffset:[0,0,100,100],dialogId:109,isMaskOperation:2,desc:"\u9ec4\u5fe0\u5f15\u5bfc\u6587\u672c-91",isRichText:0},{id:18002,PreId:18001,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:1,isLastStep:0,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003091",logPointShow:"10009091",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u9ec4\u5fe0\u51fa\u73b0-92",isRichText:0},{id:18003,PreId:18002,isShowArrows:1,isRecordStep:1,guideType:2,isLogRecord:1,guideOrder:2,isLastStep:1,dialogueType:0,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003092",logPointShow:"10009092",maskOffset:[0,0,100,100],dialogId:110,desc:"\u9ec4\u5fe0\u5f15\u5bfc\u6587\u672c-93",isRichText:0},{id:6001,PreId:0,isShowArrows:1,dialogue:"51040",isRecordStep:1,guideType:2,isLogRecord:1,guideOrder:0,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:1,headType:0,isFlip:0,offset:[0,-100],logPoint:"10003093",logPointShow:"10009093",maskOffset:[0,0,120,120],isMaskOperation:2,desc:"\u70b9\u51fb\u82f1\u96c4\u5165\u53e3-94",isRichText:0},{id:6002,PreId:6001,isShowArrows:1,dialogue:"51041",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:1,isLastStep:0,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003094",logPointShow:"10009094",maskOffset:[0,0,200,200],isMaskOperation:2,desc:"\u70b9\u51fb\u53ef\u62db\u52df-95",isRichText:0},{id:6003,PreId:6002,isShowArrows:1,dialogue:"51042",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:2,isLastStep:1,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003095",logPointShow:"10009095",maskOffset:[0,0,200,200],desc:"\u62db\u52df\u6309\u94ae-96",isRichText:0},{id:7001,PreId:0,isShowArrows:1,dialogue:"51043",isRecordStep:1,guideType:2,isLogRecord:1,guideOrder:0,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:1,headType:0,isFlip:0,offset:[0,0],logPoint:"10003096",logPointShow:"10009096",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u4e16\u754c\u5730\u56fe\u5165\u53e3-97",isRichText:0},{id:7002,PreId:7001,isShowArrows:1,dialogue:"51044",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:1,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,-250],logPoint:"10003097",logPointShow:"10009097",maskOffset:[0,2,100,100],isMaskOperation:2,desc:"\u70b9\u51fb\u4e0b\u4e00\u7ae0\u8282-98",isRichText:0},{id:7003,PreId:7002,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:2,isLastStep:0,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003098",logPointShow:"10009098",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u6307\u5f15\u5f81\u4f10-99",isRichText:0},{id:7004,PreId:7003,isShowArrows:1,dialogue:"51077",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:3,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003099",logPointShow:"10009099",maskOffset:[0,0,200,200],isMaskOperation:2,desc:"\u70b9\u51fb\u4e0b\u4e00\u7ae0\u8282-98",isRichText:0},{id:7005,PreId:7004,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:4,isLastStep:1,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003100",logPointShow:"10009100",maskOffset:[0,0,200,200],desc:"\u6307\u5f15\u5f81\u4f10-99",isRichText:0},{id:8001,PreId:0,isShowArrows:1,dialogue:"51045",isRecordStep:1,guideType:2,isLogRecord:1,guideOrder:0,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,-200],logPoint:"10003101",logPointShow:"10009101",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u70b9\u661f\u661f\u5b9d\u7bb1-100",isRichText:0},{id:8002,PreId:8001,isShowArrows:1,dialogue:"51046",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:1,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,-300],logPoint:"10003102",logPointShow:"10009102",maskOffset:[0,0,200,200],isMaskOperation:2,desc:"\u661f\u661f\u9886\u53d6\u6309\u94ae-101",isRichText:0},{id:8003,PreId:8002,isShowArrows:1,dialogue:"51047",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:2,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:0,headType:0,isFlip:0,offset:[0,-250],logPoint:"10003103",logPointShow:"10009103",maskOffset:[0,0,120,120],isMaskOperation:2,desc:"\u70b9\u51fb\u5546\u5e97\u5165\u53e3-102",isRichText:0},{id:8004,PreId:8003,isShowArrows:1,dialogue:"51048",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:3,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,220],logPoint:"10003104",logPointShow:"10009104",maskOffset:[0,0,160,160],isMaskOperation:2,desc:"\u5546\u5e97\u5f00\u7bb1\u5b50-103",isRichText:0},{id:8005,PreId:8004,isShowArrows:1,dialogue:"51053",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:4,isLastStep:1,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,-130],logPoint:"10003105",logPointShow:"10009105",maskOffset:[0,0,150,150],desc:"\u5173\u95ed\u5956\u52b1\u9762\u677f-104",isRichText:0},{id:9001,PreId:0,isShowArrows:1,isRecordStep:1,guideType:2,isLogRecord:1,guideOrder:0,isLastStep:0,dialogueType:0,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003106",logPointShow:"10009106",dialogId:105,desc:"\u6280\u80fd\u5f15\u5bfc\u6587\u672c-105",isRichText:0},{id:9002,PreId:9001,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:1,isLastStep:0,dialogueType:3,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003107",logPointShow:"10009107",isMaskOperation:2,desc:"\u6280\u80fd\u5f15\u5bfc\u5f39\u677f-106",isRichText:0},{id:9003,PreId:9002,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:2,isLastStep:0,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003108",logPointShow:"10009108",maskOffset:[0,0,200,200],isMaskOperation:2,desc:"\u6280\u80fd\u56fe\u6807\u663e\u793a-107",isRichText:0},{id:9004,PreId:9003,isShowArrows:1,dialogue:"51054",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:3,isLastStep:0,dialogueType:0,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,-150],logPoint:"10003109",logPointShow:"10009109",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u6280\u80fd\u5f15\u5bfc\u6587\u672c-108",isRichText:0},{id:9005,PreId:9004,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:4,isLastStep:1,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003110",logPointShow:"10009110",desc:"\u62d6\u52a8\u91ca\u653e\u6548\u679c-109",isRichText:0},{id:10001,PreId:0,isShowArrows:1,isRecordStep:1,guideType:2,isLogRecord:1,guideOrder:0,isLastStep:0,dialogueType:0,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003111",logPointShow:"10009111",dialogId:106,desc:"\u6280\u80fd\u5f15\u5bfc\u6587\u672c-110",isRichText:0},{id:10002,PreId:10001,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:1,isLastStep:0,dialogueType:3,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003112",logPointShow:"10009112",isMaskOperation:2,desc:"\u6280\u80fd\u5f15\u5bfc\u5f39\u677f-111",isRichText:0},{id:10003,PreId:10002,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:2,isLastStep:0,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003113",logPointShow:"10009113",maskOffset:[0,0,200,200],isMaskOperation:2,desc:"\u6280\u80fd\u56fe\u6807\u663e\u793a-112",isRichText:0},{id:10004,PreId:10003,isShowArrows:1,dialogue:"51055",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:3,isLastStep:0,dialogueType:0,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,-150],logPoint:"10003114",logPointShow:"10009114",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u6280\u80fd\u5f15\u5bfc\u6587\u672c-113",isRichText:0},{id:10005,PreId:10004,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:4,isLastStep:1,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003115",logPointShow:"10009115",isMaskOperation:2,desc:"\u62d6\u52a8\u91ca\u653e\u6548\u679c-114",isRichText:0},{id:11001,PreId:0,isShowArrows:1,dialogue:"51056",isRecordStep:1,guideType:2,isLogRecord:1,guideOrder:0,isLastStep:0,dialogueType:0,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003116",logPointShow:"10009116",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u6280\u80fd\u5f15\u5bfc\u6587\u672c-115",isRichText:0},{id:11002,PreId:11001,isShowArrows:1,dialogue:"52011",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:1,isLastStep:1,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003117",logPointShow:"10009117",desc:"\u62d6\u52a8\u91ca\u653e\u6548\u679c-116",isRichText:0},{id:12001,PreId:0,isShowArrows:1,dialogue:"51057",isRecordStep:1,guideType:2,isLogRecord:1,guideOrder:0,isLastStep:0,dialogueType:0,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,-150],logPoint:"10003118",logPointShow:"10009118",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u6280\u80fd\u5f15\u5bfc\u6587\u672c-117",isRichText:0},{id:12002,PreId:12001,isShowArrows:1,dialogue:"52011",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:1,isLastStep:1,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003119",logPointShow:"10009119",desc:"\u62d6\u52a8\u91ca\u653e\u6548\u679c-118",isRichText:0},{id:19001,PreId:0,isShowArrows:1,dialogue:"51059",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:0,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:1,headType:0,isFlip:0,offset:[0,-150],logPoint:"10003120",logPointShow:"10009120",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u9632\u5fa1\u5854\u754c\u9762-119",isRichText:0},{id:19002,PreId:19001,isShowArrows:1,dialogue:"51060",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:1,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,250],logPoint:"10003121",logPointShow:"10009121",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u5b88\u5c06\u9009\u62e9\u754c\u9762-120",isRichText:0},{id:19003,PreId:19002,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:2,isLastStep:0,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,150],logPoint:"10003122",logPointShow:"10009122",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u9009\u62e9\u5b88\u5c06-121",isRichText:0},{id:19004,PreId:19003,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:3,isLastStep:1,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,150],logPoint:"10003123",logPointShow:"10009123",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u5173\u95ed\u9009\u62e9\u754c\u9762-122",isRichText:0},{id:20001,PreId:0,isShowArrows:1,dialogue:"51061",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:0,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:1,headType:0,isFlip:0,offset:[0,-150],logPoint:"10003124",logPointShow:"10009124",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u9632\u5fa1\u5854\u754c\u9762-123",isRichText:0},{id:20002,PreId:20001,isShowArrows:1,dialogue:"51062",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:1,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,150],logPoint:"10003125",logPointShow:"10009125",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u5b88\u5c06\u9009\u62e9\u754c\u9762-124",isRichText:0},{id:20003,PreId:20002,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:2,isLastStep:0,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,150],logPoint:"10003126",logPointShow:"10009126",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u9009\u62e9\u5b88\u5c06-125",isRichText:0},{id:20004,PreId:20003,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:3,isLastStep:1,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,150],logPoint:"10003127",logPointShow:"10009127",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u5173\u95ed\u9009\u62e9\u754c\u9762-126",isRichText:0},{id:21001,PreId:0,isShowArrows:1,dialogue:"51063",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:0,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:1,headType:0,isFlip:0,offset:[0,-150],logPoint:"10003128",logPointShow:"10009128",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u9632\u5fa1\u5854\u754c\u9762-127",isRichText:0},{id:21002,PreId:21001,isShowArrows:1,dialogue:"51064",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:1,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,150],logPoint:"10003129",logPointShow:"10009129",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u5b88\u5c06\u9009\u62e9\u754c\u9762-128",isRichText:0},{id:21003,PreId:21002,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:2,isLastStep:0,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,150],logPoint:"10003130",logPointShow:"10009130",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u9009\u62e9\u5b88\u5c06-129",isRichText:0},{id:21004,PreId:21003,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:3,isLastStep:1,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,150],logPoint:"10003131",logPointShow:"10009131",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u5173\u95ed\u9009\u62e9\u754c\u9762-130",isRichText:0},{id:22001,PreId:0,isShowArrows:1,dialogue:"51065",isRecordStep:1,guideType:2,isLogRecord:1,guideOrder:0,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:1,headType:0,isFlip:0,offset:[0,-100],logPoint:"10003132",logPointShow:"10009132",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u6280\u80fd\u5347\u7ea7-131",isRichText:0},{id:22002,PreId:22001,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:1,isLastStep:0,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,150],logPoint:"10003133",logPointShow:"10009133",maskOffset:[0,45,150,150],isMaskOperation:2,desc:"\u6280\u80fd\u5347\u7ea7-132",isRichText:0},{id:22003,PreId:22002,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:2,isLastStep:0,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,150],logPoint:"10003134",logPointShow:"10009134",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u6280\u80fd\u5347\u7ea7-133",isRichText:0},{id:22004,PreId:22003,isShowArrows:1,dialogue:"51066",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:3,isLastStep:1,dialogueType:0,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003135",logPointShow:"10009135",desc:"\u6280\u80fd\u5347\u7ea7-134",isRichText:0},{id:23001,PreId:0,isShowArrows:1,dialogue:"51067",isRecordStep:1,guideType:2,isLogRecord:1,guideOrder:0,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:1,headType:0,isFlip:0,offset:[0,-100],logPoint:"10003136",logPointShow:"10009136",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u6280\u80fd\u89e3\u9501-135",isRichText:0},{id:23002,PreId:23001,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:1,isLastStep:0,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,150],logPoint:"10003137",logPointShow:"10009137",maskOffset:[0,45,150,150],isMaskOperation:2,desc:"\u6280\u80fd\u89e3\u9501-136",isRichText:0},{id:23003,PreId:23002,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:2,isLastStep:1,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,150],logPoint:"10003138",logPointShow:"10009138",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u6280\u80fd\u89e3\u9501-137",isRichText:0},{id:24001,PreId:0,isShowArrows:1,dialogue:"51070",isRecordStep:1,guideType:2,isLogRecord:1,guideOrder:0,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003139",logPointShow:"10009139",maskOffset:[0,0,120,120],isMaskOperation:2,desc:"vip\u529f\u80fd-140",isRichText:0},{id:24002,PreId:24001,isShowArrows:1,dialogue:"51071",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:1,isLastStep:1,dialogueType:0,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003140",logPointShow:"10009140",isMaskOperation:2,desc:"vip\u529f\u80fd-141",isRichText:0},{id:25001,PreId:0,isShowArrows:1,dialogue:"51072",isRecordStep:1,guideType:2,isLogRecord:1,guideOrder:0,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:1,headType:0,isFlip:0,offset:[0,-100],logPoint:"10003141",logPointShow:"10009141",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u673a\u7f18\u5f00\u542f-142",isRichText:0},{id:25002,PreId:25001,isShowArrows:1,isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:1,isLastStep:0,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,150],logPoint:"10003142",logPointShow:"10009142",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u673a\u7f18\u5f00\u542f-143",isRichText:0},{id:25003,PreId:25002,isShowArrows:1,dialogue:"51073",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:2,isLastStep:1,dialogueType:0,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003143",logPointShow:"10009143",desc:"\u673a\u7f18\u5f00\u542f-144",isRichText:0},{id:26001,PreId:0,isShowArrows:1,dialogue:"51076",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:0,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:1,headType:0,isFlip:0,offset:[0,0],logPoint:"10003144",logPointShow:"10009144",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u673a\u7f18\u5f00\u542f-145",isRichText:0},{id:26002,PreId:26001,isShowArrows:1,dialogue:"51074",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:1,isLastStep:0,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,-150],logPoint:"10003145",logPointShow:"10009145",maskOffset:[0,32,160,160],isMaskOperation:2,desc:"\u673a\u7f18\u5f00\u542f-146",isRichText:0},{id:26003,PreId:26002,isShowArrows:1,dialogue:"51074",isRecordStep:1,guideType:2,isLogRecord:1,guideOrder:2,isLastStep:0,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003146",logPointShow:"10009146",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u673a\u7f18\u5f00\u542f-147",isRichText:0},{id:26004,PreId:26003,isShowArrows:1,dialogue:"51074",isRecordStep:1,guideType:2,isLogRecord:1,guideOrder:3,isLastStep:0,dialogueType:1,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003147",logPointShow:"10009147",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u673a\u7f18\u5f00\u542f-148",isRichText:0},{id:26005,PreId:26004,isShowArrows:1,dialogue:"51074",isRecordStep:1,guideType:2,isLogRecord:1,guideOrder:4,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,-250],logPoint:"10003148",logPointShow:"10009148",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u673a\u7f18\u5f00\u542f-149",isRichText:0},{id:26006,PreId:26005,isShowArrows:1,dialogue:"51075",isRecordStep:1,guideType:2,isLogRecord:1,guideOrder:5,isLastStep:1,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:1,headType:0,isFlip:0,offset:[0,-150],logPoint:"10003149",logPointShow:"10009149",maskOffset:[0,0,100,100],isMaskOperation:2,desc:"\u673a\u7f18\u5f00\u542f-150",isRichText:0},{id:27001,PreId:0,isShowArrows:1,dialogue:"51078",isRecordStep:1,guideType:2,isLogRecord:1,guideOrder:0,isLastStep:0,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:0,headType:0,isFlip:0,offset:[0,0],logPoint:"10003150",logPointShow:"10009150",maskOffset:[0,0,120,120],isMaskOperation:2,desc:"\u7b2c\u4e8c\u4e2a\u82f1\u96c4\u51fa\u6218\u4f4d-151",isRichText:0},{id:27002,PreId:27001,isShowArrows:1,dialogue:"51079",isRecordStep:0,guideType:2,isLogRecord:1,guideOrder:1,isLastStep:1,dialogueType:2,clickArea:[200,200],respondTime:600,skipTime:10,direction:2,headType:0,isFlip:0,offset:[0,0],logPoint:"10003151",logPointShow:"10009151",maskOffset:[0,0,150,150],isMaskOperation:2,desc:"\u7b2c\u4e8c\u4e2a\u82f1\u96c4\u51fa\u6218\u4f4d-152",isRichText:0}],cc._RF.pop()},{}],Json_GuildRewardRatio:[function(e,t){"use strict";cc._RF.push(t,"8e8c74wdERBwLTwkmVMeXff","Json_GuildRewardRatio"),e("Aft").JsonData.GuildRewardRatio=[{id:1,ratio:2,baseWeight:8027,weightChangeTimes:999,variableWeight:0,isReset:0},{id:2,ratio:3,baseWeight:963,weightChangeTimes:999,variableWeight:0,isReset:0},{id:3,ratio:4,baseWeight:375,weightChangeTimes:999,variableWeight:0,isReset:0},{id:4,ratio:5,baseWeight:241,weightChangeTimes:999,variableWeight:0,isReset:0},{id:5,ratio:6,baseWeight:161,weightChangeTimes:999,variableWeight:0,isReset:0},{id:6,ratio:7,baseWeight:107,weightChangeTimes:999,variableWeight:0,isReset:0},{id:7,ratio:8,baseWeight:69,weightChangeTimes:5,variableWeight:0,isReset:1},{id:8,ratio:9,baseWeight:40,weightChangeTimes:5,variableWeight:0,isReset:1},{id:9,ratio:10,baseWeight:18,weightChangeTimes:5,variableWeight:0,isReset:1}],cc._RF.pop()},{}],Json_Guild:[function(e,t){"use strict";cc._RF.push(t,"afb13s7s95HgafI61x885pX","Json_Guild"),e("Aft").JsonData.Guild=[{id:1,upgradeContribution:9500,redPacketList:[[150,10,80],[300,20,80],[450,40,80]]},{id:2,upgradeContribution:17800,redPacketList:[[150,10,82],[300,20,82],[450,40,82]]},{id:3,upgradeContribution:26100,redPacketList:[[150,10,84],[300,20,84],[450,40,84]]},{id:4,upgradeContribution:34500,redPacketList:[[150,10,86],[300,20,86],[450,40,86]]},{id:5,upgradeContribution:42800,redPacketList:[[150,10,88],[300,20,88],[450,40,88]]},{id:6,upgradeContribution:51100,redPacketList:[[150,10,90],[300,20,90],[450,40,90]]},{id:7,upgradeContribution:59400,redPacketList:[[150,10,92],[300,20,92],[450,40,92]]},{id:8,upgradeContribution:71300,redPacketList:[[150,10,94],[300,20,94],[450,40,94]]},{id:9,upgradeContribution:83200,redPacketList:[[150,10,96],[300,20,96],[450,40,96]]},{id:10,upgradeContribution:95e3,redPacketList:[[150,10,98],[300,20,98],[450,40,98]]},{id:11,upgradeContribution:111700,redPacketList:[[150,10,100],[300,20,100],[450,40,100]]},{id:12,upgradeContribution:128300,redPacketList:[[150,10,102],[300,20,102],[450,40,102]]},{id:13,upgradeContribution:144900,redPacketList:[[150,10,104],[300,20,104],[450,40,104]]},{id:14,upgradeContribution:161600,redPacketList:[[150,10,106],[300,20,106],[450,40,106]]},{id:15,upgradeContribution:178200,redPacketList:[[150,10,108],[300,20,108],[450,40,108]]},{id:16,upgradeContribution:190100,redPacketList:[[150,10,110],[300,20,110],[450,40,110]]},{id:17,upgradeContribution:202e3,redPacketList:[[150,10,112],[300,20,112],[450,40,112]]},{id:18,upgradeContribution:213800,redPacketList:[[150,10,114],[300,20,114],[450,40,114]]},{id:19,upgradeContribution:285100,redPacketList:[[150,10,116],[300,20,116],[450,40,116]]},{id:20,upgradeContribution:356400,redPacketList:[[150,10,118],[300,20,118],[450,40,118]]}],cc._RF.pop()},{}],Json_Head:[function(e,t){"use strict";cc._RF.push(t,"e5b51XtvsJPwaogoNrDgvi8","Json_Head"),e("Aft").JsonData.Head=[{id:5001,type:1,relationId:43901,isShow:1,unlockDesc:"20134",headDesc:"20143"},{id:5002,type:1,relationId:43902,isShow:1,unlockDesc:"20134",headDesc:"20143"},{id:5501,type:2,relationId:43001,isShow:1,unlockDesc:"1387",headDesc:"20143"},{id:5502,type:2,relationId:43002,isShow:1,unlockDesc:"1387",headDesc:"20143"},{id:5503,type:2,relationId:43003,isShow:1,unlockDesc:"1387",headDesc:"20143"},{id:5504,type:2,relationId:43004,isShow:1,unlockDesc:"1387",headDesc:"20143"},{id:5505,type:2,relationId:43005,isShow:1,unlockDesc:"1387",headDesc:"20143"},{id:5506,type:2,relationId:43006,isShow:1,unlockDesc:"1387",headDesc:"20143"},{id:5507,type:2,relationId:43007,isShow:1,unlockDesc:"1387",headDesc:"20143"},{id:5508,type:2,relationId:43008,isShow:1,unlockDesc:"1387",headDesc:"20143"},{id:5509,type:2,relationId:43009,isShow:1,unlockDesc:"1387",headDesc:"20143"},{id:5510,type:2,relationId:43010,isShow:1,unlockDesc:"1387",headDesc:"20143"},{id:5511,type:2,relationId:43011,isShow:1,unlockDesc:"1387",headDesc:"20143"},{id:5512,type:2,relationId:43012,isShow:1,unlockDesc:"1387",headDesc:"20143"},{id:5513,type:2,relationId:43013,isShow:0,unlockDesc:"1387",headDesc:"20143"},{id:5514,type:2,relationId:43014,isShow:1,unlockDesc:"1387",headDesc:"20143"},{id:5515,type:2,relationId:43015,isShow:0,unlockDesc:"1387",headDesc:"20143"},{id:5516,type:2,relationId:43016,isShow:0,unlockDesc:"1387",headDesc:"20143"},{id:5517,type:2,relationId:43017,isShow:0,unlockDesc:"1387",headDesc:"20143"},{id:5518,type:2,relationId:43018,isShow:0,unlockDesc:"1387",headDesc:"20143"},{id:5519,type:2,relationId:43019,isShow:0,unlockDesc:"1387",headDesc:"20143"},{id:5520,type:2,relationId:43020,isShow:0,unlockDesc:"1387",headDesc:"20143"},{id:5521,type:2,relationId:43101,isShow:1,unlockDesc:"1387",headDesc:"20143"},{id:5522,type:2,relationId:43102,isShow:1,unlockDesc:"1387",headDesc:"20143"},{id:5523,type:2,relationId:43107,isShow:1,unlockDesc:"1387",headDesc:"20143"}],cc._RF.pop()},{}],Json_HeroBattleNum:[function(e,t){"use strict";cc._RF.push(t,"256db0XeYRHzo1rQLeaqxr/","Json_HeroBattleNum"),e("Aft").JsonData.HeroBattleNum=[{id:1,heroNum:"1",instance:[1,1]},{id:2,heroNum:"2",instance:[1,2]},{id:3,heroNum:"3",instance:[1,3]}],cc._RF.pop()},{}],Json_HeroCard:[function(e,t){"use strict";cc._RF.push(t,"ed9adjh2CpIrbw5L1GMovkF","Json_HeroCard"),e("Aft").JsonData.HeroCard=[{id:3001,heroId:43001,cardNum:12,icon:"Icon_Piece_Guan",itemBg:"Icon_Bg_Blue",name:"3000",isChange:1,color:1},{id:3002,heroId:43002,cardNum:12,icon:"Icon_Piece_Zhang",itemBg:"Icon_Bg_Blue",name:"3001",isChange:1,color:1},{id:3003,heroId:43003,cardNum:16,icon:"Icon_Piece_Liu",itemBg:"Icon_Bg_Blue",name:"3002",isChange:1,color:1},{id:3004,heroId:43004,cardNum:20,icon:"Icon_Piece_qiao",itemBg:"Icon_Bg_Blue",name:"3003",isChange:1,color:1},{id:3005,heroId:43005,cardNum:12,icon:"Icon_Piece_Huang",itemBg:"Icon_Bg_Blue",name:"3004",isChange:1,color:1},{id:3006,heroId:43006,cardNum:16,icon:"Icon_Piece_Lv",itemBg:"Icon_Bg_Blue",name:"3005",isChange:1,color:1},{id:3007,heroId:43007,cardNum:16,icon:"Icon_Piece_Zhu",itemBg:"Icon_Bg_Blue",name:"3006",isChange:1,color:1},{id:3008,heroId:43008,cardNum:12,icon:"Icon_Piece_Diao",itemBg:"Icon_Bg_Blue",name:"3007",isChange:1,color:1},{id:3009,heroId:43009,cardNum:16,icon:"Icon_Piece_Sun",itemBg:"Icon_Bg_Blue",name:"3011",isChange:1,color:1},{id:3010,heroId:43010,cardNum:20,icon:"Icon_Piece_Yun",itemBg:"Icon_Bg_Blue",name:"3012",isChange:1,color:1},{id:3011,heroId:43011,cardNum:20,icon:"Icon_Piece_Cao",itemBg:"Icon_Bg_Blue",name:"3013",isChange:1,color:1},{id:3012,heroId:43012,cardNum:20,icon:"Icon_Piece_Jiao",itemBg:"Icon_Bg_Blue",name:"3014",isChange:1,color:1},{id:3013,heroId:43014,cardNum:24,icon:"Icon_Piece_Dian",itemBg:"Icon_Bg_Orange",name:"3015",isChange:0,color:4},{id:3101,heroId:43101,cardNum:16,icon:"Icon_Piece_Guan_God",itemBg:"Icon_Bg_Blue",name:"3008",isChange:1,color:1},{id:3102,heroId:43102,cardNum:16,icon:"Icon_Piece_Zhang_God",itemBg:"Icon_Bg_Blue",name:"3009",isChange:1,color:1},{id:3107,heroId:43107,cardNum:16,icon:"Icon_Piece_Zhu_God",itemBg:"Icon_Bg_Blue",name:"3010",isChange:1,color:1}],cc._RF.pop()},{}],Json_HeroQuality:[function(e,t){"use strict";cc._RF.push(t,"fb048RWx29FNI+2y6OF4Ojo","Json_HeroQuality"),e("Aft").JsonData.HeroQuality=[{id:1,heroBg:"hero/Hero_Quality_Bg_Green",soldierBg:"hero/Hero_Quality_Angle_Green",soldierInfoBg:"hero/Hero_Profession_Bg_Green",quality:"42c502",qualityCicle:"BuildFunc_HeroQuality_Bg_Green",qualityBg:"BuildFunc_HeroQuality_Bg_Green1",qualityHeadBg:"Tower_GuardsQuality_Bg_Green",heroQualityBg:"Hero_Detail_Quality_Bg_Green",towerHeroQualityBg:"Tower_VanGuardsQuality_Bg_Green",itemBg:"Icon_Bg_Green",qualityName:"1339"},{id:2,heroBg:"hero/Hero_Quality_Bg_Blue",soldierBg:"hero/Hero_Quality_Angle_Blue",soldierInfoBg:"hero/Hero_Profession_Bg_Blue",quality:"2dbaf5",qualityCicle:"BuildFunc_HeroQuality_Bg_Blue",qualityBg:"BuildFunc_HeroQuality_Bg_Blue1",qualityHeadBg:"Tower_GuardsQuality_Bg_Blue",heroQualityBg:"Hero_Detail_Quality_Bg_Blue",towerHeroQualityBg:"Tower_VanGuardsQuality_Bg_Blue",itemBg:"Icon_Bg_Blue",qualityName:"1340"},{id:3,heroBg:"hero/Hero_Quality_Bg_Purple",soldierBg:"hero/Hero_Quality_Angle_Purple",soldierInfoBg:"hero/Hero_Profession_Bg_Purple",quality:"bf5dff",qualityCicle:"BuildFunc_HeroQuality_Bg_Purple",qualityBg:"BuildFunc_HeroQuality_Bg_Purple1",qualityHeadBg:"Tower_GuardsQuality_Bg_Purple",heroQualityBg:"Hero_Detail_Quality_Bg_Purple",towerHeroQualityBg:"Tower_VanGuardsQuality_Bg_Purple",itemBg:"Icon_Bg_Purple",qualityName:"1341"},{id:4,heroBg:"hero/Hero_Quality_Bg_Orange",soldierBg:"hero/Hero_Quality_Angle_Orange",soldierInfoBg:"hero/Hero_Profession_Bg_Orange",quality:"ff9500",qualityCicle:"BuildFunc_HeroQuality_Bg_Orange",qualityBg:"BuildFunc_HeroQuality_Bg_Orange1",qualityHeadBg:"Tower_GuardsQuality_Bg_Orange",heroQualityBg:"Hero_Detail_Quality_Bg_Orange",towerHeroQualityBg:"Tower_VanGuardsQuality_Bg_Orange",itemBg:"Icon_Bg_Orange",qualityName:"1342"},{id:5,heroBg:"hero/Hero_Quality_Bg_Orange",soldierBg:"hero/Hero_Quality_Angle_Orange",soldierInfoBg:"hero/Hero_Profession_Bg_Orange",quality:"ff9500",qualityCicle:"BuildFunc_HeroQuality_Bg_Orange",qualityBg:"BuildFunc_HeroQuality_Bg_Orange1",qualityHeadBg:"Tower_GuardsQuality_Bg_Orange",heroQualityBg:"Hero_Detail_Quality_Bg_Orange",towerHeroQualityBg:"Tower_VanGuardsQuality_Bg_Orange",itemBg:"Icon_Bg_Orange",qualityName:"1342"},{id:6,heroBg:"hero/Hero_Quality_Bg_Orange",soldierBg:"hero/Hero_Quality_Angle_Orange",soldierInfoBg:"hero/Hero_Profession_Bg_Orange",quality:"ff9500",qualityCicle:"BuildFunc_HeroQuality_Bg_Orange",qualityBg:"BuildFunc_HeroQuality_Bg_Orange1",qualityHeadBg:"Tower_GuardsQuality_Bg_Orange",heroQualityBg:"Hero_Detail_Quality_Bg_Orange",towerHeroQualityBg:"Tower_VanGuardsQuality_Bg_Orange",itemBg:"Icon_Bg_Orange",qualityName:"1342"}],cc._RF.pop()},{}],Json_HeroRestrain:[function(e,t){"use strict";cc._RF.push(t,"939faCqpxxIcrtKD6r13s4y","Json_HeroRestrain"),e("Aft").JsonData.HeroRestrain=[{id:1,groupId:1,subType:1,name:"1680",subName:"1935",img:"LuckyChance_Icon3",heroList:[[43003],[43007,43107]],levelOneSkill:[[1,1]],skillDesc:"1728",skillShowDesc:"1764",titlePic:"LuckyChance_Font2",isRepeat:1,openLevel:[1,50,1]},{id:2,groupId:1,subType:2,name:"1680",subName:"1936",img:"LuckyChance_Icon3",heroList:[[43003],[43007,43107]],levelOneSkill:[[4,2,1,1,2e3]],skillDesc:"1732",skillShowDesc:"1839",titlePic:"LuckyChance_Font2",isRepeat:1,openLevel:[2,100,1]},{id:3,groupId:1,subType:3,name:"1680",subName:"1937",img:"LuckyChance_Icon3",heroList:[[43003],[43007,43107]],levelOneSkill:[[4,2,1,14,2e3]],skillDesc:"1732",skillShowDesc:"1840",titlePic:"LuckyChance_Font2",isRepeat:1,openLevel:[3,150,1]},{id:4,groupId:1,subType:1,name:"1680",subName:"1935",img:"LuckyChance_Icon3",heroList:[[43003],[43007,43107]],levelOneSkill:[[1,2]],skillDesc:"1728",skillShowDesc:"1764",titlePic:"LuckyChance_Font2",isRepeat:1,openLevel:[4,300,2]},{id:5,groupId:1,subType:2,name:"1680",subName:"1936",img:"LuckyChance_Icon3",heroList:[[43003],[43007,43107]],levelOneSkill:[[4,2,1,1,3e3]],skillDesc:"1732",skillShowDesc:"1839",titlePic:"LuckyChance_Font2",isRepeat:1,openLevel:[5,450,2]},{id:6,groupId:1,subType:3,name:"1680",subName:"1937",img:"LuckyChance_Icon3",heroList:[[43003],[43007,43107]],levelOneSkill:[[4,2,1,14,3e3]],skillDesc:"1732",skillShowDesc:"1840",titlePic:"LuckyChance_Font2",isRepeat:1,openLevel:[6,750,2]},{id:7,groupId:2,subType:1,name:"1681",subName:"1938",img:"LuckyChance_Icon1",heroList:[[43003],[43001,43101],[43002,43102]],levelOneSkill:[[2,500]],skillDesc:"1729",skillShowDesc:"1765",titlePic:"LuckyChance_Font4",isRepeat:0,openLevel:[1,50,1]},{id:8,groupId:2,subType:2,name:"1681",subName:"1939",img:"LuckyChance_Icon1",heroList:[[43003],[43001,43101],[43002,43102]],levelOneSkill:[[5,3,-2e3]],skillDesc:"1830",skillShowDesc:"1841",titlePic:"LuckyChance_Font4",isRepeat:0,openLevel:[2,100,1]},{id:9,groupId:2,subType:3,name:"1681",subName:"1940",img:"LuckyChance_Icon1",heroList:[[43003],[43001,43101],[43002,43102]],levelOneSkill:[[6,-2e3]],skillDesc:"1831",skillShowDesc:"1842",titlePic:"LuckyChance_Font4",isRepeat:0,openLevel:[3,150,1]},{id:10,groupId:2,subType:1,name:"1681",subName:"1938",img:"LuckyChance_Icon1",heroList:[[43003],[43001,43101],[43002,43102]],levelOneSkill:[[2,800]],skillDesc:"1729",skillShowDesc:"1765",titlePic:"LuckyChance_Font4",isRepeat:0,openLevel:[4,300,2]},{id:11,groupId:2,subType:2,name:"1681",subName:"1939",img:"LuckyChance_Icon1",heroList:[[43003],[43001,43101],[43002,43102]],levelOneSkill:[[5,3,-3e3]],skillDesc:"1830",skillShowDesc:"1841",titlePic:"LuckyChance_Font4",isRepeat:0,openLevel:[5,450,2]},{id:12,groupId:2,subType:3,name:"1681",subName:"1940",img:"LuckyChance_Icon1",heroList:[[43003],[43001,43101],[43002,43102]],levelOneSkill:[[6,-3e3]],skillDesc:"1831",skillShowDesc:"1842",titlePic:"LuckyChance_Font4",isRepeat:0,openLevel:[6,750,2]},{id:13,groupId:3,subType:1,name:"1682",subName:"1941",img:"LuckyChance_Icon5",heroList:[[43006],[43008]],levelOneSkill:[[3,1,-2e3,1]],skillDesc:"1730",skillShowDesc:"1766",titlePic:"LuckyChance_Font5",isRepeat:0,openLevel:[1,50,1]},{id:14,groupId:3,subType:2,name:"1682",subName:"1942",img:"LuckyChance_Icon5",heroList:[[43006],[43008]],levelOneSkill:[[3,14,-2e3,1]],skillDesc:"1832",skillShowDesc:"1843",titlePic:"LuckyChance_Font5",isRepeat:0,openLevel:[2,100,1]},{id:15,groupId:3,subType:3,name:"1682",subName:"1943",img:"LuckyChance_Icon5",heroList:[[43006],[43008]],levelOneSkill:[[3,15,-2e3,1]],skillDesc:"1833",skillShowDesc:"1844",titlePic:"LuckyChance_Font5",isRepeat:0,openLevel:[3,150,1]},{id:16,groupId:3,subType:1,name:"1682",subName:"1941",img:"LuckyChance_Icon5",heroList:[[43006],[43008]],levelOneSkill:[[3,1,-3e3,1]],skillDesc:"1730",skillShowDesc:"1766",titlePic:"LuckyChance_Font5",isRepeat:0,openLevel:[4,300,2]},{id:17,groupId:3,subType:2,name:"1682",subName:"1942",img:"LuckyChance_Icon5",heroList:[[43006],[43008]],levelOneSkill:[[3,14,-3e3,1]],skillDesc:"1832",skillShowDesc:"1843",titlePic:"LuckyChance_Font5",isRepeat:0,openLevel:[5,450,2]},{id:18,groupId:3,subType:3,name:"1682",subName:"1943",img:"LuckyChance_Icon5",heroList:[[43006],[43008]],levelOneSkill:[[3,15,-3e3,1]],skillDesc:"1833",skillShowDesc:"1844",titlePic:"LuckyChance_Font5",isRepeat:0,openLevel:[6,750,2]},{id:19,groupId:4,subType:1,name:"1683",subName:"1944",img:"LuckyChance_Icon4",heroList:[[43003],[43006],[43001,43101],[43002,43102]],levelOneSkill:[[3,1,-2e3,2,3]],skillDesc:"1731",skillShowDesc:"1767",titlePic:"LuckyChance_Font3",isRepeat:0,openLevel:[1,50,1]},{id:20,groupId:4,subType:2,name:"1683",subName:"1945",img:"LuckyChance_Icon4",heroList:[[43003],[43006],[43001,43101],[43002,43102]],levelOneSkill:[[3,14,-2e3,2,3]],skillDesc:"1834",skillShowDesc:"1845",titlePic:"LuckyChance_Font3",isRepeat:0,openLevel:[2,100,1]},{id:21,groupId:4,subType:3,name:"1683",subName:"1946",img:"LuckyChance_Icon4",heroList:[[43003],[43006],[43001,43101],[43002,43102]],levelOneSkill:[[3,15,-2e3,2,3]],skillDesc:"1835",skillShowDesc:"1846",titlePic:"LuckyChance_Font3",isRepeat:0,openLevel:[3,150,1]},{id:22,groupId:4,subType:1,name:"1683",subName:"1944",img:"LuckyChance_Icon4",heroList:[[43003],[43006],[43001,43101],[43002,43102]],levelOneSkill:[[3,1,-3e3,2,3]],skillDesc:"1731",skillShowDesc:"1767",titlePic:"LuckyChance_Font3",isRepeat:0,openLevel:[4,300,2]},{id:23,groupId:4,subType:2,name:"1683",subName:"1945",img:"LuckyChance_Icon4",heroList:[[43003],[43006],[43001,43101],[43002,43102]],levelOneSkill:[[3,14,-3e3,2,3]],skillDesc:"1834",skillShowDesc:"1845",titlePic:"LuckyChance_Font3",isRepeat:0,openLevel:[5,450,2]},{id:24,groupId:4,subType:3,name:"1683",subName:"1946",img:"LuckyChance_Icon4",heroList:[[43003],[43006],[43001,43101],[43002,43102]],levelOneSkill:[[3,15,-3e3,2,3]],skillDesc:"1835",skillShowDesc:"1846",titlePic:"LuckyChance_Font3",isRepeat:0,openLevel:[6,750,2]},{id:25,groupId:5,subType:1,name:"1684",subName:"1947",img:"LuckyChance_Icon7",heroList:[[43003],[43006]],levelOneSkill:[[4,3,1,11,2e3]],skillDesc:"1732",skillShowDesc:"1768",titlePic:"LuckyChance_Font7",isRepeat:1,openLevel:[1,50,1]},{id:26,groupId:5,subType:2,name:"1684",subName:"1948",img:"LuckyChance_Icon7",heroList:[[43003],[43006]],levelOneSkill:[[4,3,0,21,-2e3]],skillDesc:"20144",skillShowDesc:"1847",titlePic:"LuckyChance_Font7",isRepeat:1,openLevel:[2,100,1]},{id:27,groupId:5,subType:3,name:"1684",subName:"1949",img:"LuckyChance_Icon7",heroList:[[43003],[43006]],levelOneSkill:[[7,1e4,1]],skillDesc:"1836",skillShowDesc:"1848",titlePic:"LuckyChance_Font7",isRepeat:1,openLevel:[3,150,1]},{id:28,groupId:5,subType:1,name:"1684",subName:"1947",img:"LuckyChance_Icon7",heroList:[[43003],[43006]],levelOneSkill:[[4,3,1,11,3e3]],skillDesc:"1732",skillShowDesc:"1768",titlePic:"LuckyChance_Font7",isRepeat:1,openLevel:[4,300,2]},{id:29,groupId:5,subType:2,name:"1684",subName:"1948",img:"LuckyChance_Icon7",heroList:[[43003],[43006]],levelOneSkill:[[4,3,0,21,-3e3]],skillDesc:"20144",skillShowDesc:"1847",titlePic:"LuckyChance_Font7",isRepeat:1,openLevel:[5,450,2]},{id:30,groupId:5,subType:3,name:"1684",subName:"1949",img:"LuckyChance_Icon7",heroList:[[43003],[43006]],levelOneSkill:[[7,15e3,1]],skillDesc:"1836",skillShowDesc:"1848",titlePic:"LuckyChance_Font7",isRepeat:1,openLevel:[6,750,2]},{id:31,groupId:6,subType:1,name:"1685",subName:"1950",img:"LuckyChance_Icon8",heroList:[[43101],[43102],[43107]],levelOneSkill:[[4,-1,4,14,2e3]],skillDesc:"1733",skillShowDesc:"1769",titlePic:"LuckyChance_Font8",isRepeat:1,openLevel:[1,50,1]},{id:32,groupId:6,subType:2,name:"1685",subName:"1951",img:"LuckyChance_Icon8",heroList:[[43101],[43102],[43107]],levelOneSkill:[[4,-1,4,11,2e3]],skillDesc:"1733",skillShowDesc:"1769",titlePic:"LuckyChance_Font8",isRepeat:1,openLevel:[2,100,1]},{id:33,groupId:6,subType:3,name:"1685",subName:"1952",img:"LuckyChance_Icon8",heroList:[[43101],[43102],[43107]],levelOneSkill:[[4,-1,4,10,2e3]],skillDesc:"1733",skillShowDesc:"1769",titlePic:"LuckyChance_Font8",isRepeat:1,openLevel:[3,150,1]},{id:34,groupId:6,subType:1,name:"1685",subName:"1950",img:"LuckyChance_Icon8",heroList:[[43101],[43102],[43107]],levelOneSkill:[[4,-1,4,14,3e3]],skillDesc:"1733",skillShowDesc:"1769",titlePic:"LuckyChance_Font8",isRepeat:1,openLevel:[4,300,2]},{id:35,groupId:6,subType:2,name:"1685",subName:"1951",img:"LuckyChance_Icon8",heroList:[[43101],[43102],[43107]],levelOneSkill:[[4,-1,4,11,3e3]],skillDesc:"1733",skillShowDesc:"1769",titlePic:"LuckyChance_Font8",isRepeat:1,openLevel:[5,450,2]},{id:36,groupId:6,subType:3,name:"1685",subName:"1952",img:"LuckyChance_Icon8",heroList:[[43101],[43102],[43107]],levelOneSkill:[[4,-1,4,10,3e3]],skillDesc:"1733",skillShowDesc:"1769",titlePic:"LuckyChance_Font8",isRepeat:1,openLevel:[6,750,2]},{id:37,groupId:7,subType:1,name:"1724",subName:"1953",img:"LuckyChance_Icon2",heroList:[[43004],[43008]],levelOneSkill:[[4,4,1,14,2e3]],skillDesc:"1732",skillShowDesc:"1768",titlePic:"LuckyChance_Font1",isRepeat:1,openLevel:[1,50,1]},{id:38,groupId:7,subType:2,name:"1724",subName:"1954",img:"LuckyChance_Icon2",heroList:[[43004],[43008]],levelOneSkill:[[4,4,0,21,-2e3]],skillDesc:"20144",skillShowDesc:"1847",titlePic:"LuckyChance_Font1",isRepeat:1,openLevel:[2,100,1]},{id:39,groupId:7,subType:3,name:"1724",subName:"1955",img:"LuckyChance_Icon2",heroList:[[43004],[43008]],levelOneSkill:[[7,1e4,2]],skillDesc:"1837",skillShowDesc:"1849",titlePic:"LuckyChance_Font1",isRepeat:1,openLevel:[3,150,1]},{id:40,groupId:7,subType:1,name:"1724",subName:"1953",img:"LuckyChance_Icon2",heroList:[[43004],[43008]],levelOneSkill:[[4,4,1,14,3e3]],skillDesc:"1732",skillShowDesc:"1768",titlePic:"LuckyChance_Font1",isRepeat:1,openLevel:[4,300,2]},{id:41,groupId:7,subType:2,name:"1724",subName:"1954",img:"LuckyChance_Icon2",heroList:[[43004],[43008]],levelOneSkill:[[4,4,0,21,-3e3]],skillDesc:"20144",skillShowDesc:"1847",titlePic:"LuckyChance_Font1",isRepeat:1,openLevel:[5,450,2]},{id:42,groupId:7,subType:3,name:"1724",subName:"1955",img:"LuckyChance_Icon2",heroList:[[43004],[43008]],levelOneSkill:[[7,15e3,2]],skillDesc:"1837",skillShowDesc:"1849",titlePic:"LuckyChance_Font1",isRepeat:1,openLevel:[6,750,2]},{id:43,groupId:8,subType:1,name:"1725",subName:"1956",img:"LuckyChance_Icon6",heroList:[[43005],[43001,43101]],levelOneSkill:[[4,1,1,6,2e3]],skillDesc:"1732",skillShowDesc:"1768",titlePic:"LuckyChance_Font6",isRepeat:1,openLevel:[1,20,1]},{id:44,groupId:8,subType:2,name:"1725",subName:"1957",img:"LuckyChance_Icon6",heroList:[[43005],[43001,43101]],levelOneSkill:[[4,1,1,14,-2e3],[4,1,1,7,1e4]],skillDesc:"1838",skillShowDesc:"1850",titlePic:"LuckyChance_Font6",isRepeat:1,openLevel:[2,50,1]},{id:45,groupId:8,subType:3,name:"1725",subName:"1958",img:"LuckyChance_Icon6",heroList:[[43005],[43001,43101]],levelOneSkill:[[4,1,1,10,2e3]],skillDesc:"1732",skillShowDesc:"1768",titlePic:"LuckyChance_Font6",isRepeat:1,openLevel:[3,150,1]},{id:46,groupId:8,subType:1,name:"1725",subName:"1956",img:"LuckyChance_Icon6",heroList:[[43005],[43001,43101]],levelOneSkill:[[4,1,1,6,3e3]],skillDesc:"1732",skillShowDesc:"1768",titlePic:"LuckyChance_Font6",isRepeat:1,openLevel:[4,300,2]},{id:47,groupId:8,subType:2,name:"1725",subName:"1957",img:"LuckyChance_Icon6",heroList:[[43005],[43001,43101]],levelOneSkill:[[4,1,1,14,-2e3],[4,1,1,7,15e3]],skillDesc:"1838",skillShowDesc:"1850",titlePic:"LuckyChance_Font6",isRepeat:1,openLevel:[5,450,2]},{id:48,groupId:8,subType:3,name:"1725",subName:"1958",img:"LuckyChance_Icon6",heroList:[[43005],[43001,43101]],levelOneSkill:[[4,1,1,10,3e3]],skillDesc:"1732",skillShowDesc:"1768",titlePic:"LuckyChance_Font6",isRepeat:1,openLevel:[6,750,2]},{id:49,groupId:9,subType:1,name:"1854",subName:"1959",img:"LuckyChance_Icon12",heroList:[[43005],[43008],[43001,43101],[43002,43102]],levelOneSkill:[[8,14,2e3,-1]],skillDesc:"1862",skillShowDesc:"1768",titlePic:"LuckyChance_Font10",isRepeat:1,openLevel:[1,40,1]},{id:50,groupId:9,subType:2,name:"1854",subName:"1960",img:"LuckyChance_Icon12",heroList:[[43005],[43008],[43001,43101],[43002,43102]],levelOneSkill:[[8,1,2e3,-1]],skillDesc:"1862",skillShowDesc:"1768",titlePic:"LuckyChance_Font10",isRepeat:1,openLevel:[2,100,1]},{id:51,groupId:9,subType:3,name:"1854",subName:"1961",img:"LuckyChance_Icon12",heroList:[[43005],[43008],[43001,43101],[43002,43102]],levelOneSkill:[[10,2e3,4]],skillDesc:"1863",skillShowDesc:"1864",titlePic:"LuckyChance_Font10",isRepeat:1,openLevel:[3,150,1]},{id:52,groupId:9,subType:1,name:"1854",subName:"1959",img:"LuckyChance_Icon12",heroList:[[43005],[43008],[43001,43101],[43002,43102]],levelOneSkill:[[8,14,3e3,-1]],skillDesc:"1862",skillShowDesc:"1768",titlePic:"LuckyChance_Font10",isRepeat:1,openLevel:[4,300,2]},{id:53,groupId:9,subType:2,name:"1854",subName:"1960",img:"LuckyChance_Icon12",heroList:[[43005],[43008],[43001,43101],[43002,43102]],levelOneSkill:[[8,1,3e3,-1]],skillDesc:"1862",skillShowDesc:"1768",titlePic:"LuckyChance_Font10",isRepeat:1,openLevel:[5,450,2]},{id:54,groupId:9,subType:3,name:"1854",subName:"1961",img:"LuckyChance_Icon12",heroList:[[43005],[43008],[43001,43101],[43002,43102]],levelOneSkill:[[10,3e3,4]],skillDesc:"1863",skillShowDesc:"1864",titlePic:"LuckyChance_Font10",isRepeat:1,openLevel:[6,750,2]},{id:55,groupId:10,subType:1,name:"1855",subName:"1962",img:"LuckyChance_Icon10",heroList:[[43003],[43011]],levelOneSkill:[[4,3,1,14,2e3]],skillDesc:"1732",skillShowDesc:"1768",titlePic:"LuckyChance_Font15",isRepeat:1,openLevel:[1,50,1]},{id:56,groupId:10,subType:2,name:"1855",subName:"1963",img:"LuckyChance_Icon10",heroList:[[43003],[43011]],levelOneSkill:[[4,3,1,10,2e3]],skillDesc:"1732",skillShowDesc:"1768",titlePic:"LuckyChance_Font15",isRepeat:1,openLevel:[2,100,1]},{id:57,groupId:10,subType:3,name:"1855",subName:"1964",img:"LuckyChance_Icon10",heroList:[[43003],[43011]],levelOneSkill:[[11,2e3]],skillDesc:"1860",skillShowDesc:"1861",titlePic:"LuckyChance_Font15",isRepeat:1,openLevel:[3,150,1]},{id:58,groupId:10,subType:1,name:"1855",subName:"1962",img:"LuckyChance_Icon10",heroList:[[43003],[43011]],levelOneSkill:[[4,3,1,14,3e3]],skillDesc:"1732",skillShowDesc:"1768",titlePic:"LuckyChance_Font15",isRepeat:1,openLevel:[4,300,2]},{id:59,groupId:10,subType:2,name:"1855",subName:"1963",img:"LuckyChance_Icon10",heroList:[[43003],[43011]],levelOneSkill:[[4,3,1,10,3e3]],skillDesc:"1732",skillShowDesc:"1768",titlePic:"LuckyChance_Font15",isRepeat:1,openLevel:[5,450,2]},{id:60,groupId:10,subType:3,name:"1855",subName:"1964",img:"LuckyChance_Icon10",heroList:[[43003],[43011]],levelOneSkill:[[11,3e3]],skillDesc:"1860",skillShowDesc:"1861",titlePic:"LuckyChance_Font15",isRepeat:1,openLevel:[6,750,2]},{id:61,groupId:11,subType:1,name:"1856",subName:"1965",img:"LuckyChance_Icon11",heroList:[[43008]],levelOneSkill:[[8,14,2e3,43008,1]],skillDesc:"1865",skillShowDesc:"1768",titlePic:"LuckyChance_Font9",isRepeat:1,openLevel:[1,20,1]},{id:62,groupId:11,subType:2,name:"1856",subName:"1966",img:"LuckyChance_Icon11",heroList:[[43008]],levelOneSkill:[[9,14,2e3,405]],skillDesc:"1866",skillShowDesc:"1768",titlePic:"LuckyChance_Font9",isRepeat:1,openLevel:[2,50,1]},{id:63,groupId:11,subType:3,name:"1856",subName:"1967",img:"LuckyChance_Icon11",heroList:[[43008]],levelOneSkill:[[9,10,2e3,405]],skillDesc:"1866",skillShowDesc:"1768",titlePic:"LuckyChance_Font9",isRepeat:1,openLevel:[3,150,1]},{id:64,groupId:11,subType:1,name:"1856",subName:"1965",img:"LuckyChance_Icon11",heroList:[[43008]],levelOneSkill:[[8,14,3e3,43008,1]],skillDesc:"1865",skillShowDesc:"1768",titlePic:"LuckyChance_Font9",isRepeat:1,openLevel:[4,300,2]},{id:65,groupId:11,subType:2,name:"1856",subName:"1966",img:"LuckyChance_Icon11",heroList:[[43008]],levelOneSkill:[[9,14,3e3,405]],skillDesc:"1866",skillShowDesc:"1768",titlePic:"LuckyChance_Font9",isRepeat:1,openLevel:[5,450,2]},{id:66,groupId:11,subType:3,name:"1856",subName:"1967",img:"LuckyChance_Icon11",heroList:[[43008]],levelOneSkill:[[9,10,3e3,405]],skillDesc:"1866",skillShowDesc:"1768",titlePic:"LuckyChance_Font9",isRepeat:1,openLevel:[6,750,2]},{id:67,groupId:12,subType:1,name:"1857",subName:"1968",img:"LuckyChance_Icon13",heroList:[[43009]],levelOneSkill:[[8,6,2e3,43009,1]],skillDesc:"1865",skillShowDesc:"1768",titlePic:"LuckyChance_Font11",isRepeat:1,openLevel:[1,50,1]},{id:68,groupId:12,subType:2,name:"1857",subName:"1969",img:"LuckyChance_Icon13",heroList:[[43009]],levelOneSkill:[[9,6,2e3,106]],skillDesc:"1866",skillShowDesc:"1768",titlePic:"LuckyChance_Font11",isRepeat:1,openLevel:[2,100,1]},{id:69,groupId:12,subType:3,name:"1857",subName:"1970",img:"LuckyChance_Icon13",heroList:[[43009]],levelOneSkill:[[9,10,2e3,106]],skillDesc:"1866",skillShowDesc:"1768",titlePic:"LuckyChance_Font11",isRepeat:1,openLevel:[3,150,1]},{id:70,groupId:12,subType:1,name:"1857",subName:"1968",img:"LuckyChance_Icon13",heroList:[[43009]],levelOneSkill:[[8,6,3e3,43009,1]],skillDesc:"1865",skillShowDesc:"1768",titlePic:"LuckyChance_Font11",isRepeat:1,openLevel:[4,300,2]},{id:71,groupId:12,subType:2,name:"1857",subName:"1969",img:"LuckyChance_Icon13",heroList:[[43009]],levelOneSkill:[[9,6,3e3,106]],skillDesc:"1866",skillShowDesc:"1768",titlePic:"LuckyChance_Font11",isRepeat:1,openLevel:[5,450,2]},{id:72,groupId:12,subType:3,name:"1857",subName:"1970",img:"LuckyChance_Icon13",heroList:[[43009]],levelOneSkill:[[9,10,3e3,106]],skillDesc:"1866",skillShowDesc:"1768",titlePic:"LuckyChance_Font11",isRepeat:1,openLevel:[6,750,2]},{id:73,groupId:13,subType:1,name:"1858",subName:"1971",img:"LuckyChance_Icon15",heroList:[[43011]],levelOneSkill:[[8,14,2e3,43011,1]],skillDesc:"1865",skillShowDesc:"1768",titlePic:"LuckyChance_Font13",isRepeat:1,openLevel:[1,50,1]},{id:74,groupId:13,subType:2,name:"1858",subName:"1972",img:"LuckyChance_Icon15",heroList:[[43011]],levelOneSkill:[[9,14,2e3,307]],skillDesc:"1866",skillShowDesc:"1768",titlePic:"LuckyChance_Font13",isRepeat:1,openLevel:[2,100,1]},{id:75,groupId:13,subType:3,name:"1858",subName:"1973",img:"LuckyChance_Icon15",heroList:[[43011]],levelOneSkill:[[9,10,2e3,307]],skillDesc:"1866",skillShowDesc:"1768",titlePic:"LuckyChance_Font13",isRepeat:1,openLevel:[3,150,1]},{id:76,groupId:13,subType:1,name:"1858",subName:"1971",img:"LuckyChance_Icon15",heroList:[[43011]],levelOneSkill:[[8,14,3e3,43011,1]],skillDesc:"1865",skillShowDesc:"1768",titlePic:"LuckyChance_Font13",isRepeat:1,openLevel:[4,300,2]},{id:77,groupId:13,subType:2,name:"1858",subName:"1972",img:"LuckyChance_Icon15",heroList:[[43011]],levelOneSkill:[[9,14,3e3,307]],skillDesc:"1866",skillShowDesc:"1768",titlePic:"LuckyChance_Font13",isRepeat:1,openLevel:[5,450,2]},{id:78,groupId:13,subType:3,name:"1858",subName:"1973",img:"LuckyChance_Icon15",heroList:[[43011]],levelOneSkill:[[9,10,3e3,307]],skillDesc:"1866",skillShowDesc:"1768",titlePic:"LuckyChance_Font13",isRepeat:1,openLevel:[6,750,2]},{id:79,groupId:14,subType:1,name:"1859",subName:"1974",img:"LuckyChance_Icon14",heroList:[[43010]],levelOneSkill:[[8,14,2e3,43010,1]],skillDesc:"1865",skillShowDesc:"1768",titlePic:"LuckyChance_Font12",isRepeat:1,openLevel:[1,50,1]},{id:80,groupId:14,subType:2,name:"1859",subName:"1975",img:"LuckyChance_Icon14",heroList:[[43010]],levelOneSkill:[[8,1,2e3,44110,2]],skillDesc:"1875",skillShowDesc:"1768",titlePic:"LuckyChance_Font12",isRepeat:1,openLevel:[2,100,1]},{id:81,groupId:14,subType:3,name:"1859",subName:"1976",img:"LuckyChance_Icon14",heroList:[[43010]],levelOneSkill:[[8,14,2e3,44110,2]],skillDesc:"1873",skillShowDesc:"1768",titlePic:"LuckyChance_Font12",isRepeat:1,openLevel:[3,150,1]},{id:82,groupId:14,subType:1,name:"1859",subName:"1974",img:"LuckyChance_Icon14",heroList:[[43010]],levelOneSkill:[[8,14,3e3,43010,1]],skillDesc:"1865",skillShowDesc:"1768",titlePic:"LuckyChance_Font12",isRepeat:1,openLevel:[4,300,2]},{id:83,groupId:14,subType:2,name:"1859",subName:"1975",img:"LuckyChance_Icon14",heroList:[[43010]],levelOneSkill:[[8,1,3e3,44110,2]],skillDesc:"1876",skillShowDesc:"1768",titlePic:"LuckyChance_Font12",isRepeat:1,openLevel:[5,450,2]},{id:84,groupId:14,subType:3,name:"1859",subName:"1976",img:"LuckyChance_Icon14",heroList:[[43010]],levelOneSkill:[[8,14,3e3,44110,2]],skillDesc:"1874",skillShowDesc:"1768",titlePic:"LuckyChance_Font12",isRepeat:1,openLevel:[6,750,2]}],cc._RF.pop()},{}],Json_HeroSkillType:[function(e,t){"use strict";cc._RF.push(t,"25289n1xUtI8b1VnaYWbfGo","Json_HeroSkillType"),e("Aft").JsonData.HeroSkillType=[{id:1},{id:2},{id:3},{id:4},{id:5}],cc._RF.pop()},{}],Json_HeroStar:[function(e,t){"use strict";cc._RF.push(t,"5e830p6VaBPY4tORBtE4gUa","Json_HeroStar"),e("Aft").JsonData.HeroStar=[{id:20101,heroId:43001,star:1,cardsNum:24,needLevel:40,starSkill:[1001,1101],outSkill:[[1001],[-1]],inSkill:[[1101],[-1]],power:0},{id:20102,heroId:43001,star:2,cardsNum:40,needLevel:80,starSkill:[1002],outSkill:[[1002],[-1]],inSkill:[[1102],[-1]],power:1e3},{id:20103,heroId:43001,star:3,cardsNum:60,needLevel:160,starSkill:[1003],outSkill:[[1002],[1003]],inSkill:[[1102],[1103]],power:2e3},{id:20104,heroId:43001,star:4,cardsNum:100,needLevel:240,starSkill:[1004],outSkill:[[1002],[1003,1004]],inSkill:[[1102],[1103,1104]],power:3e3},{id:20201,heroId:43002,star:1,cardsNum:24,needLevel:40,starSkill:[2001,2101],outSkill:[[2001],[-1]],inSkill:[[2101],[-1]],power:0},{id:20202,heroId:43002,star:2,cardsNum:40,needLevel:80,starSkill:[2002],outSkill:[[2002],[-1]],inSkill:[[2102],[-1]],power:1e3},{id:20203,heroId:43002,star:3,cardsNum:60,needLevel:160,starSkill:[2003],outSkill:[[2002],[2003]],inSkill:[[2102],[2103]],power:2e3},{id:20204,heroId:43002,star:4,cardsNum:100,needLevel:240,starSkill:[2004],outSkill:[[2002],[2003,2004]],inSkill:[[2102],[2103,2104]],power:3e3},{id:20301,heroId:43003,star:1,cardsNum:28,needLevel:40,starSkill:[3001,3101],outSkill:[[3001],[-1]],inSkill:[[3101],[-1]],power:0},{id:20302,heroId:43003,star:2,cardsNum:44,needLevel:80,starSkill:[3002],outSkill:[[3002],[-1]],inSkill:[[3102],[-1]],power:1e3},{id:20303,heroId:43003,star:3,cardsNum:64,needLevel:160,starSkill:[3003],outSkill:[[3003],[-1]],inSkill:[[3103],[-1]],power:2e3},{id:20304,heroId:43003,star:4,cardsNum:100,needLevel:240,starSkill:[3004],outSkill:[[3003],[3004]],inSkill:[[3103],[3104]],power:3e3},{id:20401,heroId:43004,star:1,cardsNum:28,needLevel:40,starSkill:[4001,4101],outSkill:[[4001],[4005]],inSkill:[[4101],[4105]],power:0},{id:20402,heroId:43004,star:2,cardsNum:44,needLevel:80,starSkill:[4002],outSkill:[[4002],[4005]],inSkill:[[4102],[4105]],power:1e3},{id:20403,heroId:43004,star:3,cardsNum:64,needLevel:160,starSkill:[4003],outSkill:[[4003],[4005]],inSkill:[[4103],[4105]],power:2e3},{id:20404,heroId:43004,star:4,cardsNum:100,needLevel:240,starSkill:[4004],outSkill:[[4003],[4005,4004]],inSkill:[[4103],[4105,4104]],power:3e3},{id:20501,heroId:43005,star:1,cardsNum:24,needLevel:40,starSkill:[5001,5101],outSkill:[[5001],[-1]],inSkill:[[5101],[-1]],power:0},{id:20502,heroId:43005,star:2,cardsNum:40,needLevel:80,starSkill:[5002],outSkill:[[5001],[5002]],inSkill:[[5101],[5102]],power:1e3},{id:20503,heroId:43005,star:3,cardsNum:60,needLevel:160,starSkill:[5003],outSkill:[[5001],[5002,5003]],inSkill:[[5101],[5102,5103]],power:2e3},{id:20504,heroId:43005,star:4,cardsNum:100,needLevel:240,starSkill:[5004],outSkill:[[5001],[5002,5003,5004]],inSkill:[[5101],[5102,5103,5104]],power:3e3},{id:20601,heroId:43006,star:1,cardsNum:28,needLevel:40,starSkill:[6001,6101],outSkill:[[6001],[-1]],inSkill:[[6101],[-1]],power:0},{id:20602,heroId:43006,star:2,cardsNum:44,needLevel:80,starSkill:[6002],outSkill:[[6001],[6002]],inSkill:[[6101],[6102]],power:1e3},{id:20603,heroId:43006,star:3,cardsNum:64,needLevel:160,starSkill:[6003],outSkill:[[6001],[6002,6003]],inSkill:[[6101],[6102,6103]],power:2e3},{id:20604,heroId:43006,star:4,cardsNum:100,needLevel:240,starSkill:[6004],outSkill:[[6001],[6002,6003,6004]],inSkill:[[6101],[6102,6103,6104]],power:3e3},{id:20701,heroId:43007,star:1,cardsNum:28,needLevel:40,starSkill:[7001,7101],outSkill:[[7001],[7005]],inSkill:[[7101],[7105]],power:0},{id:20702,heroId:43007,star:2,cardsNum:44,needLevel:80,starSkill:[7002],outSkill:[[7001],[7002]],inSkill:[[7101],[7102]],power:1e3},{id:20703,heroId:43007,star:3,cardsNum:64,needLevel:160,starSkill:[7003],outSkill:[[7001],[7003]],inSkill:[[7101],[7103]],power:2e3},{id:20704,heroId:43007,star:4,cardsNum:100,needLevel:240,starSkill:[7004],outSkill:[[7001],[7003,7004]],inSkill:[[7101],[7103,7104]],power:3e3},{id:20801,heroId:43008,star:1,cardsNum:24,needLevel:40,starSkill:[8001,8101],outSkill:[[8001],[8005]],inSkill:[[8101],[8105]],power:0},{id:20802,heroId:43008,star:2,cardsNum:40,needLevel:80,starSkill:[8002],outSkill:[[8001],[8005,8002]],inSkill:[[8101],[8105,8102]],power:1e3},{id:20803,heroId:43008,star:3,cardsNum:60,needLevel:160,starSkill:[8003],outSkill:[[8003],[8005,8002]],inSkill:[[8103],[8105,8102]],power:2e3},{id:20804,heroId:43008,star:4,cardsNum:100,needLevel:240,starSkill:[8004],outSkill:[[8003],[8005,8002,8004]],inSkill:[[8103],[8105,8102,8104]],power:3e3},{id:20901,heroId:43009,star:1,cardsNum:24,needLevel:40,starSkill:[120001,121001],outSkill:[[120001],[120005]],inSkill:[[121001],[121005]],power:0},{id:20902,heroId:43009,star:2,cardsNum:40,needLevel:80,starSkill:[120002],outSkill:[[120002],[120005]],inSkill:[[121002],[121005]],power:1e3},{id:20903,heroId:43009,star:3,cardsNum:60,needLevel:160,starSkill:[120003],outSkill:[[120002],[120005,120003]],inSkill:[[121002],[121005,121003]],power:2e3},{id:20904,heroId:43009,star:4,cardsNum:100,needLevel:240,starSkill:[120004],outSkill:[[120002],[120005,120003,120004]],inSkill:[[121002],[120005,121003,121004]],power:3e3},{id:21001,heroId:43010,star:1,cardsNum:28,needLevel:40,starSkill:[9001,9101],outSkill:[[9001],[-1]],inSkill:[[9101],[-1]],power:0},{id:21002,heroId:43010,star:2,cardsNum:44,needLevel:80,starSkill:[9002],outSkill:[[9002],[-1]],inSkill:[[9102],[-1]],power:1e3},{id:21003,heroId:43010,star:3,cardsNum:64,needLevel:160,starSkill:[9003],outSkill:[[9003],[-1]],inSkill:[[9103],[-1]],power:2e3},{id:21004,heroId:43010,star:4,cardsNum:100,needLevel:240,starSkill:[9004],outSkill:[[9004],[-1]],inSkill:[[9104],[-1]],power:3e3},{id:21101,heroId:43011,star:1,cardsNum:28,needLevel:40,starSkill:[100001,101001],outSkill:[[100001],[-1]],inSkill:[[101001],[-1]],power:0},{id:21102,heroId:43011,star:2,cardsNum:44,needLevel:80,starSkill:[100002],outSkill:[[100002],[-1]],inSkill:[[101002],[-1]],power:1e3},{id:21103,heroId:43011,star:3,cardsNum:64,needLevel:160,starSkill:[100003],outSkill:[[100003],[-1]],inSkill:[[101003],[-1]],power:2e3},{id:21104,heroId:43011,star:4,cardsNum:100,needLevel:240,starSkill:[100004],outSkill:[[100003],[100004]],inSkill:[[101003],[101004]],power:3e3},{id:21201,heroId:43012,star:1,cardsNum:24,needLevel:40,starSkill:[110001,111001],outSkill:[[110001],[110005]],inSkill:[[111001],[111005]],power:0},{id:21202,heroId:43012,star:2,cardsNum:40,needLevel:80,starSkill:[110002],outSkill:[[110002],[110005]],inSkill:[[111002],[111005]],power:1e3},{id:21203,heroId:43012,star:3,cardsNum:60,needLevel:160,starSkill:[110003],outSkill:[[110003],[110005]],inSkill:[[111003],[111005]],power:2e3},{id:21204,heroId:43012,star:4,cardsNum:100,needLevel:240,starSkill:[110004],outSkill:[[110004],[110005]],inSkill:[[111004],[111005]],power:3e3},{id:21101,heroId:43101,star:1,cardsNum:30,needLevel:40,starSkill:[1001,1101],outSkill:[[1001],[-1]],inSkill:[[1101],[-1]],power:0},{id:21102,heroId:43101,star:2,cardsNum:50,needLevel:80,starSkill:[1002],outSkill:[[1002],[-1]],inSkill:[[1102],[-1]],power:1e3},{id:21103,heroId:43101,star:3,cardsNum:75,needLevel:160,starSkill:[1003],outSkill:[[1002],[1003]],inSkill:[[1102],[1103]],power:2e3},{id:21104,heroId:43101,star:4,cardsNum:100,needLevel:240,starSkill:[1004],outSkill:[[1002],[1003,1004]],inSkill:[[1102],[1103,1104]],power:3e3},{id:21201,heroId:43102,star:1,cardsNum:30,needLevel:40,starSkill:[2001,2101],outSkill:[[2001],[-1]],inSkill:[[2101],[-1]],power:0},{id:21202,heroId:43102,star:2,cardsNum:50,needLevel:80,starSkill:[2002],outSkill:[[2002],[-1]],inSkill:[[2102],[-1]],power:1e3},{id:21203,heroId:43102,star:3,cardsNum:75,needLevel:160,starSkill:[2003],outSkill:[[2002],[2003]],inSkill:[[2102],[2103]],power:2e3},{id:21204,heroId:43102,star:4,cardsNum:100,needLevel:240,starSkill:[2004],outSkill:[[2002],[2003,2004]],inSkill:[[2102],[2103,2104]],power:3e3},{id:21701,heroId:43107,star:1,cardsNum:30,needLevel:40,starSkill:[7001,7101],outSkill:[[7001],[7005]],inSkill:[[7101],[7105]],power:0},{id:21702,heroId:43107,star:2,cardsNum:50,needLevel:80,starSkill:[7002],outSkill:[[7001],[7002]],inSkill:[[7101],[7102]],power:1e3},{id:21703,heroId:43107,star:3,cardsNum:75,needLevel:160,starSkill:[7003],outSkill:[[7001],[7003]],inSkill:[[7101],[7103]],power:2e3},{id:21704,heroId:43107,star:4,cardsNum:100,needLevel:240,starSkill:[7004],outSkill:[[7001],[7003,7004]],inSkill:[[7101],[7103,7104]],power:3e3},{id:21401,heroId:43014,star:1,cardsNum:32,needLevel:40,starSkill:[130001,131001],outSkill:[[130001],[-1]],inSkill:[[131001],[-1]],power:0},{id:21402,heroId:43014,star:2,cardsNum:48,needLevel:80,starSkill:[130002],outSkill:[[130002],[-1]],inSkill:[[131002],[-1]],power:1e3},{id:21403,heroId:43014,star:3,cardsNum:68,needLevel:160,starSkill:[130003],outSkill:[[130002],[130003]],inSkill:[[131002],[131003]],power:2e3},{id:21404,heroId:43014,star:4,cardsNum:100,needLevel:240,starSkill:[130004],outSkill:[[130002],[130003,130004]],inSkill:[[131002],[131003,131004]],power:3e3}],cc._RF.pop()},{}],Json_HeroType:[function(e,t){"use strict";cc._RF.push(t,"38cf313J99HoqMkOTUVktQy","Json_HeroType"),e("Aft").JsonData.HeroType=[{id:1,heroBg:"hero/Hero_Quality_Bg_White",soldierBg:"hero/Hero_Profession_Bg_Green",quality:"42c502"},{id:2,heroBg:"hero/Hero_Quality_Bg_Green",soldierBg:"hero/Hero_Profession_Bg_Green",quality:"42c502"},{id:3,heroBg:"hero/Hero_Quality_Bg_Blue",soldierBg:"hero/Hero_Profession_Bg_Blue",quality:"2dbaf5"},{id:4,heroBg:"hero/Hero_Quality_Bg_Purple",soldierBg:"hero/Hero_Profession_Bg_Purple",quality:"bf5dff"},{id:5,heroBg:"hero/Hero_Quality_Bg_Purple",soldierBg:"hero/Hero_Profession_Bg_Orange",quality:"ff9500"},{id:6,heroBg:"hero/Hero_Quality_Bg_Purple",soldierBg:"hero/Hero_Profession_Bg_Orange",quality:"ff9500"},{id:7,heroBg:"hero/Hero_Quality_Bg_Purple",soldierBg:"hero/Hero_Profession_Bg_Orange",quality:"ff9500"}],cc._RF.pop()},{}],Json_Hero:[function(e,t){"use strict";cc._RF.push(t,"3c1302L/gpNoJYJ4tiSkI8p","Json_Hero"),e("Aft").JsonData.Hero=[{id:43001,name:"2001",quality:1,type:1,heroInTowerType:[3],icon:"hero/Hero_Img_001",bg:"hero/Hero_Quality_Bg_Green",mainSpin:"main/hero/main_hero1",spinName:"stand",mainSpinScale:1e4,skillList:[13,14,15],heroHead:"Head_Icon1",heroBlurs:"Hero_Detail_Bg_Decoration_Guan",isComingSoon:0,pointNumer:1,isPreform:0,heroIncome:1e3,setHeroMinInstance:[1,5],recommendHeroIcon:"FightPowerRecommend_Van_Icon2"},{id:43002,name:"2002",quality:1,type:2,heroInTowerType:[2],icon:"hero/Hero_Img_002",bg:"hero/Hero_Quality_Bg_Green",mainSpin:"main/hero/main_hero2",spinName:"stand",mainSpinScale:1e4,skillList:[16,17,18],heroHead:"Head_Icon2",heroBlurs:"Hero_Detail_Bg_Decoration_Zhang",isComingSoon:0,pointNumer:2,isPreform:1,heroIncome:1e3,setHeroMinInstance:[1,10],recommendHeroIcon:"FightPowerRecommend_Van_Icon7"},{id:43003,name:"2003",quality:1,type:3,heroInTowerType:[3],icon:"hero/Hero_Img_003",bg:"hero/Hero_Quality_Bg_Green",mainSpin:"main/hero/main_hero3",spinName:"stand",mainSpinScale:1e4,skillList:[19,20,21],heroHead:"Head_Icon3",heroBlurs:"Hero_Detail_Bg_Decoration_Liu",isComingSoon:0,pointNumer:3,isPreform:0,heroIncome:1e3,setHeroMinInstance:[1,10],recommendHeroIcon:"FightPowerRecommend_Van_Icon4"},{id:43004,name:"2009",quality:1,type:4,heroInTowerType:[1],icon:"hero/Hero_Img_008",bg:"hero/Hero_Quality_Bg_Green",mainSpin:"main/hero/main_hero5",spinName:"stand",mainSpinScale:1e4,skillList:[22,23,24],heroHead:"Head_Icon8",heroBlurs:"Hero_Detail_Bg_Decoration_Qiao",isComingSoon:0,pointNumer:4,isPreform:0,heroIncome:1e3,setHeroMinInstance:[1,10],recommendHeroIcon:"FightPowerRecommend_Van_Icon6"},{id:43005,name:"2005",quality:1,type:5,heroInTowerType:[1],icon:"hero/Hero_Img_004",bg:"hero/Hero_Quality_Bg_Green",mainSpin:"main/hero/main_hero7",spinName:"stand",mainSpinScale:1e4,skillList:[25,26,27],heroHead:"Head_Icon4",heroBlurs:"Hero_Detail_Bg_Decoration_Huang",isComingSoon:0,pointNumer:5,isPreform:1,heroIncome:1e3,setHeroMinInstance:[1,10],recommendHeroIcon:"FightPowerRecommend_Van_Icon3"},{id:43006,name:"2006",quality:1,type:6,heroInTowerType:[2],icon:"hero/Hero_Img_005",bg:"hero/Hero_Quality_Bg_Green",mainSpin:"main/hero/main_hero8",spinName:"stand",mainSpinScale:1e4,skillList:[28,29,30],heroHead:"Head_Icon5",heroBlurs:"Hero_Detail_Bg_Decoration_Lv",isComingSoon:0,pointNumer:6,isPreform:1,heroIncome:1e3,setHeroMinInstance:[1,10],recommendHeroIcon:"FightPowerRecommend_Van_Icon5"},{id:43007,name:"2007",quality:1,type:7,heroInTowerType:[4],icon:"hero/Hero_Img_006",bg:"hero/Hero_Quality_Bg_Green",mainSpin:"main/hero/main_hero6",spinName:"stand",mainSpinScale:1e4,skillList:[31,32,33],heroHead:"Head_Icon6",heroBlurs:"Hero_Detail_Bg_Decoration_Zhu",isComingSoon:0,pointNumer:7,isPreform:1,heroIncome:1e3,setHeroMinInstance:[1,10],recommendHeroIcon:"FightPowerRecommend_Van_Icon8"},{id:43008,name:"2004",quality:1,type:8,heroInTowerType:[4],icon:"hero/Hero_Img_009",bg:"hero/Hero_Quality_Bg_Green",mainSpin:"main/hero/main_hero9",spinName:"stand",mainSpinScale:13e3,skillList:[34,35,36],heroHead:"Head_Icon9",heroBlurs:"Hero_Detail_Bg_Decoration_Diao",isComingSoon:0,pointNumer:8,isPreform:1,heroIncome:1e3,setHeroMinInstance:[1,10],recommendHeroIcon:"FightPowerRecommend_Van_Icon1"},{id:43009,name:"2008",quality:1,type:9,heroInTowerType:[1],icon:"hero/Hero_Img_007",bg:"hero/Hero_Quality_Bg_Green",mainSpin:"main/hero/main_hero4",spinName:"stand",mainSpinScale:1e4,skillList:[34,35,36],heroHead:"Head_Icon7",heroBlurs:"Hero_Detail_Bg_Decoration_Sun",isComingSoon:0,pointNumer:9,isPreform:1,heroIncome:1e3,setHeroMinInstance:[1,10],recommendHeroIcon:"FightPowerRecommend_Van_Icon10"},{id:43010,name:"2010",quality:1,type:10,heroInTowerType:[2],icon:"hero/Hero_Img_0012",bg:"hero/Hero_Quality_Bg_Green",mainSpin:"main/hero/main_hero11",spinName:"stand",mainSpinScale:1e4,skillList:[34,35,36],heroHead:"Head_Icon12",heroBlurs:"Hero_Detail_Bg_Decoration_Yun",isComingSoon:0,pointNumer:10,isPreform:1,heroIncome:1e3,setHeroMinInstance:[1,10],recommendHeroIcon:"FightPowerRecommend_Van_Icon12"},{id:43011,name:"2011",quality:1,type:11,heroInTowerType:[3],icon:"hero/Hero_Img_0010",bg:"hero/Hero_Quality_Bg_Green",mainSpin:"main/hero/main_hero12",spinName:"stand",mainSpinScale:1e4,skillList:[34,35,36],heroHead:"Head_Icon10",heroBlurs:"Hero_Detail_Bg_Decoration_Cao",isComingSoon:0,pointNumer:11,isPreform:1,heroIncome:1e3,setHeroMinInstance:[1,10],recommendHeroIcon:"FightPowerRecommend_Van_Icon9"},{id:43012,name:"2012",quality:1,type:12,heroInTowerType:[4],icon:"hero/Hero_Img_0011",bg:"hero/Hero_Quality_Bg_Green",mainSpin:"main/hero/main_hero10",spinName:"stand",mainSpinScale:1e4,skillList:[34,35,36],heroHead:"Head_Icon11",heroBlurs:"Hero_Detail_Bg_Decoration_Jiao",isComingSoon:0,pointNumer:12,isPreform:1,heroIncome:1e3,setHeroMinInstance:[1,10],recommendHeroIcon:"FightPowerRecommend_Van_Icon11"},{id:43013,name:"2013",quality:1,type:13,heroInTowerType:[3],icon:"hero/Hero_FillIngPosition",bg:"hero/Hero_Quality_Bg_Green",mainSpin:"main/hero/main_hero1",spinName:"stand",mainSpinScale:1e4,skillList:[34,35,36],heroHead:"Head_Icon9",heroBlurs:"Hero_Detail_Bg_Decoration_Diao",isComingSoon:1,pointNumer:13,isPreform:1,heroIncome:1e3,setHeroMinInstance:[1,10],recommendHeroIcon:"FightPowerRecommend_Van_Icon1"},{id:43014,name:"2014",quality:1,type:14,heroInTowerType:[2],icon:"hero/Hero_Img_0013",bg:"hero/Hero_Quality_Bg_Green",mainSpin:"main/hero/main_hero13",spinName:"stand",mainSpinScale:1e4,skillList:[34,35,36],heroHead:"Head_Icon13",heroBlurs:"Hero_Detail_Bg_Decoration_Dian",isComingSoon:0,pointNumer:14,isPreform:1,heroIncome:1e3,setHeroMinInstance:[1,10],recommendHeroIcon:"FightPowerRecommend_Van_Icon13"},{id:43015,name:"2015",quality:1,type:15,heroInTowerType:[4],icon:"hero/Hero_FillIngPosition",bg:"hero/Hero_Quality_Bg_Green",mainSpin:"main/hero/main_hero1",spinName:"stand",mainSpinScale:1e4,skillList:[34,35,36],heroHead:"Head_Icon9",heroBlurs:"Hero_Detail_Bg_Decoration_Diao",isComingSoon:1,pointNumer:15,isPreform:1,heroIncome:1e3,setHeroMinInstance:[1,10],recommendHeroIcon:"FightPowerRecommend_Van_Icon1"},{id:43016,name:"2016",quality:1,type:16,heroInTowerType:[1],icon:"hero/Hero_FillIngPosition",bg:"hero/Hero_Quality_Bg_Green",mainSpin:"main/hero/main_hero1",spinName:"stand",mainSpinScale:1e4,skillList:[34,35,36],heroHead:"Head_Icon9",heroBlurs:"Hero_Detail_Bg_Decoration_Diao",isComingSoon:1,pointNumer:16,isPreform:1,heroIncome:1e3,setHeroMinInstance:[1,10],recommendHeroIcon:"FightPowerRecommend_Van_Icon1"},{id:43017,name:"2017",quality:1,type:17,heroInTowerType:[2],icon:"hero/Hero_FillIngPosition",bg:"hero/Hero_Quality_Bg_Green",mainSpin:"main/hero/main_hero1",spinName:"stand",mainSpinScale:1e4,skillList:[34,35,36],heroHead:"Head_Icon9",heroBlurs:"Hero_Detail_Bg_Decoration_Diao",isComingSoon:1,pointNumer:17,isPreform:1,heroIncome:1e3,setHeroMinInstance:[1,10],recommendHeroIcon:"FightPowerRecommend_Van_Icon1"},{id:43018,name:"2018",quality:1,type:18,heroInTowerType:[1],icon:"hero/Hero_FillIngPosition",bg:"hero/Hero_Quality_Bg_Green",mainSpin:"main/hero/main_hero1",spinName:"stand",mainSpinScale:1e4,skillList:[34,35,36],heroHead:"Head_Icon9",heroBlurs:"Hero_Detail_Bg_Decoration_Diao",isComingSoon:1,pointNumer:18,isPreform:1,heroIncome:1e3,setHeroMinInstance:[1,10],recommendHeroIcon:"FightPowerRecommend_Van_Icon1"},{id:43019,name:"2019",quality:1,type:19,heroInTowerType:[3],icon:"hero/Hero_FillIngPosition",bg:"hero/Hero_Quality_Bg_Green",mainSpin:"main/hero/main_hero1",spinName:"stand",mainSpinScale:1e4,skillList:[34,35,36],heroHead:"Head_Icon9",heroBlurs:"Hero_Detail_Bg_Decoration_Diao",isComingSoon:1,pointNumer:19,isPreform:1,heroIncome:1e3,setHeroMinInstance:[1,10],recommendHeroIcon:"FightPowerRecommend_Van_Icon1"},{id:43020,name:"2020",quality:1,type:20,heroInTowerType:[4],icon:"hero/Hero_FillIngPosition",bg:"hero/Hero_Quality_Bg_Green",mainSpin:"main/hero/main_hero1",spinName:"stand",mainSpinScale:1e4,skillList:[34,35,36],heroHead:"Head_Icon9",heroBlurs:"Hero_Detail_Bg_Decoration_Diao",isComingSoon:1,pointNumer:20,isPreform:1,heroIncome:1e3,setHeroMinInstance:[1,10],recommendHeroIcon:"FightPowerRecommend_Van_Icon1"},{id:43101,name:"2021",quality:1,type:1,heroInTowerType:[3],icon:"hero/Hero_Img_001_God",bg:"hero/Hero_Quality_Bg_Green",mainSpin:"main/hero/main_hero1_vip",spinName:"stand",mainSpinScale:1e4,skillList:[13,14,15],heroHead:"Head_Icon1_God",heroBlurs:"Hero_Detail_Bg_Decoration_Guan_God",isComingSoon:0,pointNumer:101,isPreform:1,heroIncome:1e3,setHeroMinInstance:[1,5],recommendHeroIcon:"FightPowerRecommend_Van_Icon2_God"},{id:43102,name:"2022",quality:1,type:2,heroInTowerType:[2],icon:"hero/Hero_Img_002_God",bg:"hero/Hero_Quality_Bg_Green",mainSpin:"main/hero/main_hero2_vip",spinName:"stand",mainSpinScale:1e4,skillList:[16,17,18],heroHead:"Head_Icon2_God",heroBlurs:"Hero_Detail_Bg_Decoration_Zhang_God",isComingSoon:0,pointNumer:102,isPreform:1,heroIncome:1e3,setHeroMinInstance:[1,10],recommendHeroIcon:"FightPowerRecommend_Van_Icon7_God"},{id:43107,name:"2023",quality:1,type:7,heroInTowerType:[4],icon:"hero/Hero_Img_006_God",bg:"hero/Hero_Quality_Bg_Green",mainSpin:"main/hero/main_hero6_vip",spinName:"stand",mainSpinScale:1e4,skillList:[31,32,33],heroHead:"Head_Icon6_God",heroBlurs:"Hero_Detail_Bg_Decoration_Zhu_God",isComingSoon:0,pointNumer:107,isPreform:1,heroIncome:1e3,setHeroMinInstance:[1,10],recommendHeroIcon:"FightPowerRecommend_Van_Icon8_God"},{id:43901,name:"20132",quality:1,type:9,heroInTowerType:[1],icon:"hero/Hero_Img_007",bg:"hero/Hero_Quality_Bg_Green",mainSpin:"main/hero/main_hero4",spinName:"stand",mainSpinScale:1e4,skillList:[34,35,36],heroHead:"Head_Icon_Fu",heroBlurs:"Hero_Detail_Bg_Decoration_Sun",isComingSoon:2,pointNumer:901,isPreform:1,heroIncome:1e3,setHeroMinInstance:[1,10],recommendHeroIcon:"FightPowerRecommend_Van_Icon10"},{id:43902,name:"20133",quality:1,type:10,heroInTowerType:[2],icon:"hero/Hero_Img_0012",bg:"hero/Hero_Quality_Bg_Green",mainSpin:"main/hero/main_hero11",spinName:"stand",mainSpinScale:1e4,skillList:[34,35,36],heroHead:"Head_Icon_Niu",heroBlurs:"Hero_Detail_Bg_Decoration_Yun",isComingSoon:2,pointNumer:902,isPreform:1,heroIncome:1e3,setHeroMinInstance:[1,10],recommendHeroIcon:"FightPowerRecommend_Van_Icon12"}],cc._RF.pop()},{}],Json_InstanceBoxReward:[function(e,t){"use strict";cc._RF.push(t,"3e867Vaa2xPBIx1iOe02lLH","Json_InstanceBoxReward"),e("Aft").JsonData.InstanceBoxReward=[{id:1,cardId:3005,maxNum:4,instanceNum:[1,1]},{id:2,cardId:3008,maxNum:4,instanceNum:[1,10]},{id:3,cardId:3002,maxNum:4,instanceNum:[2,5]},{id:4,cardId:3003,maxNum:8,instanceNum:[2,15]},{id:5,cardId:3004,maxNum:10,instanceNum:[4,15]},{id:6,cardId:3007,maxNum:8,instanceNum:[3,15]},{id:7,cardId:3009,maxNum:8,instanceNum:[3,5]},{id:8,cardId:3010,maxNum:10,instanceNum:[5,15]},{id:9,cardId:3011,maxNum:10,instanceNum:[4,5]},{id:10,cardId:3012,maxNum:10,instanceNum:[5,5]}],cc._RF.pop()},{}],Json_InstanceDailog:[function(e,t){"use strict";cc._RF.push(t,"1e0508lO7NPdL9AVsZxfUFI","Json_InstanceDailog"),e("Aft").JsonData.InstanceDailog=[{id:101,stageId:[1,1],afterStage:4,context:"50001",spine:"hero/hero6",name:"2007",spineRatio:11e3,overturn:1,isPremultipliedAlpha:1,respondTime:1e3,skipTime:6e3,isRecordStep:1},{id:102,stageId:[1,1],afterStage:4,context:"50002",spine:"hero/hero6",name:"2007",spineRatio:11e3,overturn:1,isPremultipliedAlpha:1,respondTime:1e3,skipTime:6e3,isRecordStep:0},{id:103,stageId:[1,1],afterStage:4,context:"50003",spine:"hero/hero6",name:"2007",spineRatio:11e3,overturn:1,isPremultipliedAlpha:1,respondTime:1e3,skipTime:6e3,isRecordStep:0},{id:104,stageId:[1,1],afterStage:4,context:"50004",spine:"hero/hero6",name:"2007",spineRatio:11e3,overturn:1,isPremultipliedAlpha:1,respondTime:1e3,skipTime:6e3,isRecordStep:0},{id:105,stageId:[1,1],afterStage:4,context:"50005",spine:"hero/hero6",name:"2007",spineRatio:11e3,overturn:1,isPremultipliedAlpha:1,respondTime:1e3,skipTime:6e3,isRecordStep:0},{id:106,stageId:[1,1],afterStage:4,context:"50006",spine:"hero/hero6",name:"2007",spineRatio:11e3,overturn:1,isPremultipliedAlpha:1,respondTime:1e3,skipTime:6e3,isRecordStep:0},{id:107,stageId:[1,1],afterStage:4,context:"50007",spine:"hero/hero1",name:"2001",spineRatio:11e3,overturn:0,isPremultipliedAlpha:1,respondTime:1e3,skipTime:6e3,isRecordStep:0},{id:108,stageId:[1,1],afterStage:4,context:"50008",spine:"hero/hero1",name:"2001",spineRatio:11e3,overturn:0,isPremultipliedAlpha:1,respondTime:1e3,skipTime:6e3,isRecordStep:0},{id:109,stageId:[1,1],afterStage:4,context:"50009",spine:"hero/hero5",name:"2005",spineRatio:11e3,overturn:0,isPremultipliedAlpha:1,respondTime:1e3,skipTime:6e3,isRecordStep:0},{id:110,stageId:[1,1],afterStage:4,context:"50010",spine:"hero/hero5",name:"2005",spineRatio:11e3,overturn:0,isPremultipliedAlpha:1,respondTime:1e3,skipTime:6e3,isRecordStep:0},{id:111,stageId:[2,2],afterStage:4,context:"50011",spine:"hero/hero8",name:"2006",spineRatio:11e3,overturn:1,isPremultipliedAlpha:1,respondTime:1e3,skipTime:6e3,isRecordStep:1},{id:112,stageId:[2,2],afterStage:4,context:"50012",spine:"hero/hero8",name:"2006",spineRatio:11e3,overturn:1,isPremultipliedAlpha:1,respondTime:1e3,skipTime:6e3,isRecordStep:0},{id:113,stageId:[2,2],afterStage:4,context:"50013",spine:"enemy/enemy5",name:"1398",spineRatio:15e3,overturn:1,isPremultipliedAlpha:1,respondTime:1e3,skipTime:6e3,isRecordStep:0},{id:114,stageId:[2,2],afterStage:4,context:"50014",spine:"hero/hero6",name:"2007",spineRatio:11e3,overturn:1,isPremultipliedAlpha:1,respondTime:1e3,skipTime:6e3,isRecordStep:0},{id:115,stageId:[2,2],afterStage:4,context:"50015",spine:"hero/hero1",name:"2001",spineRatio:11e3,overturn:0,isPremultipliedAlpha:1,respondTime:1e3,skipTime:6e3,isRecordStep:0},{id:116,stageId:[2,2],afterStage:4,context:"50016",spine:"hero/hero1",name:"2001",spineRatio:11e3,overturn:0,isPremultipliedAlpha:1,respondTime:1e3,skipTime:6e3,isRecordStep:0},{id:117,stageId:[2,2],afterStage:4,context:"50017",spine:"hero/hero1",name:"2001",spineRatio:11e3,overturn:0,isPremultipliedAlpha:1,respondTime:1e3,skipTime:6e3,isRecordStep:0},{id:118,stageId:[2,2],afterStage:4,context:"50018",spine:"hero/hero8",name:"2006",spineRatio:11e3,overturn:1,isPremultipliedAlpha:1,respondTime:1e3,skipTime:6e3,isRecordStep:0},{id:119,stageId:[2,2],afterStage:4,context:"50019",spine:"hero/hero8",name:"2006",spineRatio:11e3,overturn:1,isPremultipliedAlpha:1,respondTime:1e3,skipTime:6e3,isRecordStep:0},{id:120,stageId:[2,2],afterStage:4,context:"50020",spine:"hero/hero6",name:"2007",spineRatio:11e3,overturn:1,isPremultipliedAlpha:1,respondTime:1e3,skipTime:6e3,isRecordStep:0},{id:121,stageId:[2,2],afterStage:4,context:"50021",spine:"hero/hero6",name:"2007",spineRatio:11e3,overturn:1,isPremultipliedAlpha:1,respondTime:1e3,skipTime:6e3,isRecordStep:0},{id:201,stageId:[1,8],afterStage:0,context:"50001",spine:"hero/hero6",name:"2007",spineRatio:11e3,overturn:1,isPremultipliedAlpha:1,respondTime:1e3,skipTime:6e3,isRecordStep:0},{id:202,stageId:[1,8],afterStage:1,context:"50002",spine:"hero/hero6",name:"2007",spineRatio:11e3,overturn:1,isPremultipliedAlpha:1,respondTime:1e3,skipTime:6e3,isRecordStep:0},{id:203,stageId:[1,8],afterStage:2,context:"50003",spine:"hero/hero6",name:"2007",spineRatio:11e3,overturn:1,isPremultipliedAlpha:1,respondTime:1e3,skipTime:6e3,isRecordStep:0},{id:204,stageId:[1,8],afterStage:3,context:"50004",spine:"hero/hero1",name:"2001",spineRatio:11e3,overturn:0,isPremultipliedAlpha:1,respondTime:1e3,skipTime:6e3,isRecordStep:1},{id:205,stageId:[1,9],afterStage:0,context:"50005",spine:"hero/hero1",name:"2001",spineRatio:11e3,overturn:0,isPremultipliedAlpha:1,respondTime:1e3,skipTime:6e3,isRecordStep:1},{id:206,stageId:[1,9],afterStage:1,context:"50006",spine:"hero/hero5",name:"2005",spineRatio:11e3,overturn:0,isPremultipliedAlpha:1,respondTime:1e3,skipTime:6e3,isRecordStep:0},{id:207,stageId:[1,9],afterStage:2,context:"50007",spine:"hero/hero5",name:"2005",spineRatio:11e3,overturn:0,isPremultipliedAlpha:1,respondTime:1e3,skipTime:6e3,isRecordStep:0},{id:208,stageId:[1,9],afterStage:3,context:"50008",spine:"enemy/enemy5",name:"1398",spineRatio:15e3,overturn:1,isPremultipliedAlpha:1,respondTime:1e3,skipTime:6e3,isRecordStep:0}],cc._RF.pop()},{}],Json_InviteFriends:[function(e,t){"use strict";cc._RF.push(t,"465effMNFdOH4HOH0UTu0eR","Json_InviteFriends"),e("Aft").JsonData.InviteFriends=[{id:1,inviteNum:1,reward:[{key:1001,value:50},{key:1007,value:10},{key:3010,value:2}]},{id:2,inviteNum:3,reward:[{key:1001,value:55},{key:1007,value:10},{key:3010,value:2}]},{id:3,inviteNum:6,reward:[{key:1001,value:60},{key:1007,value:10},{key:3010,value:3}]},{id:4,inviteNum:9,reward:[{key:1001,value:65},{key:1007,value:10},{key:3010,value:3}]},{id:5,inviteNum:12,reward:[{key:1001,value:70},{key:1007,value:10},{key:3010,value:4}]},{id:6,inviteNum:15,reward:[{key:1001,value:75},{key:1007,value:10},{key:3010,value:4}]},{id:7,inviteNum:18,reward:[{key:1001,value:80},{key:1007,value:10},{key:3010,value:5}]},{id:8,inviteNum:21,reward:[{key:1001,value:85},{key:1007,value:10},{key:3010,value:5}]},{id:9,inviteNum:24,reward:[{key:1001,value:90},{key:1007,value:10},{key:3010,value:6}]},{id:10,inviteNum:27,reward:[{key:1001,value:95},{key:1007,value:10},{key:3010,value:6}]},{id:11,inviteNum:30,reward:[{key:1001,value:100},{key:1007,value:10},{key:3010,value:8}]}],cc._RF.pop()},{}],Json_Item:[function(e,t){"use strict";cc._RF.push(t,"bc3c2nFnORBkpOhoB5a5Hay","Json_Item"),e("Aft").JsonData.Item=[{id:1001,name:"1403",desc:"2101",qualityBg:"Icon_Bg_Purple",qualityColor:"bf5dff",icon:"common/Icon_Ingot",dropIcon:"common/Main_Money_Icon2"},{id:1002,name:"1353",desc:"2102",qualityBg:"Icon_Bg_Green",qualityColor:"42c502",icon:"common/Icon_Silver",dropIcon:"common/Main_Money_Icon1"},{id:1003,name:"1379",desc:"2103",qualityBg:"Icon_Bg_Green",qualityColor:"42c502",icon:"common/Main_Money_Icon3",dropIcon:"common/Main_Money_Icon3"},{id:1004,name:"1013",desc:"2104",qualityBg:"Icon_Bg_Blue",qualityColor:"2dbaf5",icon:"common/Main_Money_Icon4",dropIcon:"common/Main_Money_Icon4"},{id:1005,name:"1401",desc:"2105",qualityBg:"Icon_Bg_Blue",qualityColor:"2dbaf5",icon:"common/Icon_BattleGain",dropIcon:"common/Icon_BattleGain"},{id:1006,name:"1364",desc:"2106",qualityBg:"Icon_Bg_Blue",qualityColor:"2dbaf5",icon:"common/Icon_Exp",dropIcon:"common/Main_Money_Icon6"},{id:1007,name:"1402",desc:"2107",qualityBg:"Icon_Bg_Blue",qualityColor:"2dbaf5",icon:"common/Main_Money_Icon5",dropIcon:"common/Main_Money_Icon5"},{id:2001,name:"1430",desc:"2108",qualityBg:"Icon_Bg_Purple",qualityColor:"bf5dff",icon:"common/Icon_BoxKey",dropIcon:"common/Icon_BoxKey"}],cc._RF.pop()},{}],Json_Language:[function(e,t){"use strict";cc._RF.push(t,"cd791StWaFHyb6haLWarcer","Json_Language"),e("Aft").JsonData.Language=[{id:1,name:"\u7b80\u4f53\u4e2d\u6587",symbol:"zh"}],cc._RF.pop()},{}],Json_Level:[function(e,t){"use strict";cc._RF.push(t,"faaffo0+7xIfLH/44XWjhNd","Json_Level"),e("Aft").JsonData.Level=[{id:1,exp:1040,office:"1156",offlineCoin:2,offlineHeroExp:2,diamond:0,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1]]},{id:2,exp:760,office:"1157",offlineCoin:3,offlineHeroExp:3,diamond:40,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1]]},{id:3,exp:1440,office:"1158",offlineCoin:4,offlineHeroExp:5,diamond:50,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1]]},{id:4,exp:1840,office:"1159",offlineCoin:5,offlineHeroExp:6,diamond:60,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1]]},{id:5,exp:2520,office:"1160",offlineCoin:6,offlineHeroExp:8,diamond:80,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:6,exp:3240,office:"1161",offlineCoin:7,offlineHeroExp:9,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:7,exp:3960,office:"1162",offlineCoin:8,offlineHeroExp:11,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:8,exp:4680,office:"1163",offlineCoin:9,offlineHeroExp:16,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:9,exp:5400,office:"1164",offlineCoin:10,offlineHeroExp:18,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:10,exp:6120,office:"1165",offlineCoin:11,offlineHeroExp:20,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:11,exp:7080,office:"1166",offlineCoin:12,offlineHeroExp:22,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:12,exp:8520,office:"1167",offlineCoin:13,offlineHeroExp:23,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:13,exp:9960,office:"1168",offlineCoin:14,offlineHeroExp:25,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:14,exp:11400,office:"1169",offlineCoin:15,offlineHeroExp:27,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:15,exp:12840,office:"1170",offlineCoin:16,offlineHeroExp:29,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:16,exp:14280,office:"1171",offlineCoin:17,offlineHeroExp:31,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:17,exp:15720,office:"1172",offlineCoin:18,offlineHeroExp:32,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:18,exp:18120,office:"1173",offlineCoin:19,offlineHeroExp:34,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:19,exp:21e3,office:"1174",offlineCoin:20,offlineHeroExp:36,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:20,exp:23880,office:"1175",offlineCoin:21,offlineHeroExp:38,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:21,exp:36320,office:"1176",offlineCoin:22,offlineHeroExp:40,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:22,exp:41440,office:"1177",offlineCoin:23,offlineHeroExp:41,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:23,exp:46880,office:"1178",offlineCoin:24,offlineHeroExp:43,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:24,exp:56160,office:"1179",offlineCoin:25,offlineHeroExp:45,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:25,exp:66400,office:"1180",offlineCoin:26,offlineHeroExp:47,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:26,exp:76640,office:"1181",offlineCoin:27,offlineHeroExp:49,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:27,exp:86880,office:"1182",offlineCoin:28,offlineHeroExp:50,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:28,exp:97760,office:"1183",offlineCoin:29,offlineHeroExp:52,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:29,exp:116320,office:"1184",offlineCoin:30,offlineHeroExp:54,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:30,exp:136800,office:"1185",offlineCoin:31,offlineHeroExp:56,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:31,exp:157280,office:"1186",offlineCoin:32,offlineHeroExp:58,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:32,exp:177760,office:"1187",offlineCoin:33,offlineHeroExp:59,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:33,exp:199520,office:"1188",offlineCoin:34,offlineHeroExp:61,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:34,exp:236640,office:"1189",offlineCoin:35,offlineHeroExp:63,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:35,exp:277600,office:"1190",offlineCoin:36,offlineHeroExp:65,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:36,exp:318560,office:"1191",offlineCoin:37,offlineHeroExp:67,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:37,exp:359520,office:"1192",offlineCoin:38,offlineHeroExp:68,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:38,exp:403040,office:"1193",offlineCoin:39,offlineHeroExp:70,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:39,exp:477280,office:"1194",offlineCoin:40,offlineHeroExp:72,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:40,exp:559200,office:"1195",offlineCoin:41,offlineHeroExp:74,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:41,exp:814200,office:"1196",offlineCoin:42,offlineHeroExp:76,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:42,exp:942200,office:"1197",offlineCoin:43,offlineHeroExp:77,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:43,exp:1121400,office:"1198",offlineCoin:44,offlineHeroExp:79,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:44,exp:1377400,office:"1199",offlineCoin:45,offlineHeroExp:81,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:45,exp:1633400,office:"1200",offlineCoin:46,offlineHeroExp:83,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:46,exp:1889400,office:"1201",offlineCoin:47,offlineHeroExp:85,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:47,exp:2247800,office:"1202",offlineCoin:48,offlineHeroExp:86,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:48,exp:2759800,office:"1203",offlineCoin:49,offlineHeroExp:88,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:49,exp:3271800,office:"1204",offlineCoin:50,offlineHeroExp:90,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]},{id:50,exp:3783800,office:"1205",offlineCoin:51,offlineHeroExp:92,diamond:100,unlockTower:[[1,4],[2,4],[3,4],[4,4]],unlockSkill:[[1,1],[3,1],[2,1]]}],cc._RF.pop()},{}],Json_MaskWord:[function(e,t){"use strict";cc._RF.push(t,"8657bfvV7lKw5zBiY57aYyj","Json_MaskWord"),e("Aft").JsonData.MaskWord=[{id:1,name:"@sshole"},{id:2,name:"__"},{id:3,name:"___\u7acb"},{id:4,name:"__\u7684"},{id:5,name:"__\u5668"},{id:6,name:"__\u5668\u6750"},{id:7,name:"_7"},{id:8,name:"_\u8482"},{id:9,name:"_\u516c"},{id:10,name:"_\u529f"},{id:11,name:"_\u653b"},{id:12,name:"_\u5e7b\u9ebb__"},{id:13,name:"_\u9e20"},{id:14,name:"_\u8001\u6bcd\u7684"},{id:15,name:"_\u5988"},{id:16,name:"_\u5988\u7684"},{id:17,name:"_\u9a6c\u7684"},{id:18,name:"_\u6bdb"},{id:19,name:"_\u5a18\u7684"},{id:20,name:"_\u4e03"},{id:21,name:"_\u897f"},{id:22,name:"3P"},{id:23,name:"6\u5408\u5f69"},{id:24,name:"8\u4ed9"},{id:25,name:"a$hole"},{id:26,name:"a$shole"},{id:27,name:"Admin"},{id:28,name:"as$hole"},{id:29,name:"ASS"},{id:30,name:"asshole"},{id:31,name:"A\u7247"},{id:32,name:"bastard"},{id:33,name:"bbscity"},{id:34,name:"beijingspring"},{id:35,name:"bignews"},{id:36,name:"bjzc"},{id:37,name:"boxun"},{id:38,name:"bt"},{id:39,name:"BTO"},{id:40,name:"butthead"},{id:41,name:"butthole"},{id:42,name:"B\u6837"},{id:43,name:"cao"},{id:44,name:"cdjp"},{id:45,name:"chengmingmag"},{id:46,name:"chinesenewsweek"},{id:47,name:"COVID"},{id:48,name:"COVID19"},{id:49,name:"cunt"},{id:50,name:"dajiyuan"},{id:51,name:"damm"},{id:52,name:"damn"},{id:53,name:"dork"},{id:54,name:"epochtimes"},{id:55,name:"falun"},{id:56,name:"falundafa"},{id:57,name:"fawanghuihui"},{id:58,name:"fgmtv"},{id:59,name:"FLG"},{id:60,name:"fofg"},{id:61,name:"fosaon"},{id:62,name:"fuc"},{id:63,name:"fuck"},{id:64,name:"fuk"},{id:65,name:"fvc"},{id:66,name:"GameMaste"},{id:67,name:"gc365"},{id:68,name:"globalrescue"},{id:69,name:"h\u7ad9"},{id:70,name:"j8"},{id:71,name:"JB"},{id:72,name:"jb"},{id:73,name:"kao"},{id:74,name:"K\u7c89"},{id:75,name:"K\u4ed6\u547d"},{id:76,name:"minghui"},{id:77,name:"mingpaonews"},{id:78,name:"minhui"},{id:79,name:"ML"},{id:80,name:"NMD"},{id:81,name:"orgasmus"},{id:82,name:"peacehall"},{id:83,name:"penis"},{id:84,name:"phuc"},{id:85,name:"piss"},{id:86,name:"renminbao"},{id:87,name:"ri"},{id:88,name:"rivals"},{id:89,name:"screw"},{id:90,name:"secretchina"},{id:91,name:"sega"},{id:92,name:"sex"},{id:93,name:"sf"},{id:94,name:"sh!t"},{id:95,name:"shengda"},{id:96,name:"shyt"},{id:97,name:"SM"},{id:98,name:"snatch"},{id:99,name:"snkni8net"},{id:100,name:"soundofhope"},{id:101,name:"SUCK"},{id:102,name:"tianwang"},{id:103,name:"TMD"},{id:104,name:"ur"},{id:105,name:"UR"},{id:106,name:"U-R"},{id:107,name:"\uff35\uff32"},{id:108,name:"urban"},{id:109,name:"urban-rivals"},{id:110,name:"WEB\u724c_"},{id:111,name:"WEB\u6218\u724c"},{id:112,name:"weelaa"},{id:113,name:"xinguangming"},{id:114,name:"xinsheng"},{id:115,name:"YOUXIKA\u7231\u6ecb"},{id:116,name:"yuanming"},{id:117,name:"zhengjian"},{id:118,name:"zhengqing"},{id:119,name:"zhengwunet"},{id:120,name:"zhongguohun"},{id:121,name:"\u963f\u6241"},{id:122,name:"\u963f\u6241\u4e07\u5c81"},{id:123,name:"\u963f\u62c9"},{id:124,name:"\u963f\u62c9\u6cd5\u7279"},{id:125,name:"\u963f\u7f57\u7ea6"},{id:126,name:"\u6328\u7403"},{id:127,name:"\u827e\u68ee\u8c6a\u5a01\u5c14"},{id:128,name:"\u7231\u6db2"},{id:129,name:"\u7231\u6ecb"},{id:130,name:"\u7231\u6ecb\u75c5"},{id:131,name:"\u5b89\u975e\u4ed6\u547d"},{id:132,name:"\u5b89\u7acb\u654f"},{id:133,name:"\u5b89\u5357"},{id:134,name:"\u5b89\u5168\u5c40"},{id:135,name:"\u5965\u5df4\u9a6c"},{id:136,name:"\u5965\u9a6c\u5c14"},{id:137,name:"\u6fb3\u6d32\u5149\u660e\u7f51"},{id:138,name:"\u516b\u4e5d"},{id:139,name:"\u516b\u4e5d\u98ce\u6ce2"},{id:140,name:"\u516b\u8def\u519b"},{id:141,name:"\u5df4\u7279\u5c14"},{id:142,name:"\u5df4\u97f3\u671d\u9c81"},{id:143,name:"\u6252\u5149"},{id:144,name:"\u767dV"},{id:145,name:"\u767d\u75f4"},{id:146,name:"\u767d\u6625\u793c"},{id:147,name:"\u767d\u7c89"},{id:148,name:"\u767d\u70c2"},{id:149,name:"\u767d\u83b2\u6559"},{id:150,name:"\u767d\u739b\u8d64\u6797"},{id:151,name:"\u73ed\u7985"},{id:152,name:"\u529e\u7406\u6587\u51ed"},{id:153,name:"\u529e\u7406\u8bc1\u4ef6"},{id:154,name:"\u5305\u76ae"},{id:155,name:"\u5305\u76ae\u5364"},{id:156,name:"\u8584\u7199\u6765"},{id:157,name:"\u8584\u4e00\u6ce2"},{id:158,name:"\u4fdd\u9493"},{id:159,name:"\u4fdd\u76d1\u4f1a"},{id:160,name:"\u4fdd\u5bc6\u5c40"},{id:161,name:"\u4fdd\u536b\u53f0\u6e7e"},{id:162,name:"\u62a5\u4ec7"},{id:163,name:"\u9c8d\u5a01\u5c14"},{id:164,name:"\u9c8d\u5cb3\u6865"},{id:165,name:"\u66b4\u52a8"},{id:166,name:"\u66b4\u529b\u6267\u6cd5"},{id:167,name:"\u66b4\u4e71"},{id:168,name:"\u66b4\u5f92"},{id:169,name:"\u66b4\u653f"},{id:170,name:"\u7206\u70b8"},{id:171,name:"\u5317\u4eac\u4e4b\u6625"},{id:172,name:"\u8d1d\u8089"},{id:173,name:"\u672c\u62c9\u767b"},{id:174,name:"\u82ef\u6bd4"},{id:175,name:"\u7b28_"},{id:176,name:"\u7b28\u903c"},{id:177,name:"\u7b28\u86cb"},{id:178,name:"\u903c\u6bdb"},{id:179,name:"\u903c\u4f60\u8001\u6bcd"},{id:180,name:"\u903c\u6837"},{id:181,name:"\u6bd4\u6bdb"},{id:182,name:"\u53d8\u6001"},{id:183,name:"\u5a4a"},{id:184,name:"\u5a4a\u5b50"},{id:185,name:"\u5bbe\u5468"},{id:186,name:"\u51b0\u6bd2"},{id:187,name:"\u75c5\u6bd2"},{id:188,name:"\u6ce2\u9738"},{id:189,name:"\u535a\u8baf"},{id:190,name:"\u4e0d\u5f97\u597d\u6b7b"},{id:191,name:"\u4e0d\u73a9\u4e86"},{id:192,name:"\u5e03\u83b1\u5c14"},{id:193,name:"\u5e03\u96f7\u5c14"},{id:194,name:"\u5e03\u4ec0"},{id:195,name:"\u8d22\u653f\u90e8"},{id:196,name:"\u8521\u8d74\u671d"},{id:197,name:"\u8521\u540d\u7167"},{id:198,name:"\u8521\u6b66"},{id:199,name:"\u8521\u82f1\u633a"},{id:200,name:"\u53c2\u4e8b\u5ba4"},{id:201,name:"\u85cf\u72ec"},{id:202,name:"\u85cf\u5987\u4f1a"},{id:203,name:"\u85cf\u9752\u4f1a"},{id:204,name:"\u64cd_\u5988"},{id:205,name:"\u64cdGM"},{id:206,name:"\u64cdGm"},{id:207,name:"\u64cdgM"},{id:208,name:"\u64cdgm"},{id:209,name:"\u64cdXX"},{id:210,name:"\u64cd\u903c"},{id:211,name:"\u64cd\u903c\u6bdb"},{id:212,name:"\u64cd\u6bd4"},{id:213,name:"\u64cd\u86cb"},{id:214,name:"\u64cd\u673a"},{id:215,name:"\u64cd\u6797"},{id:216,name:"\u64cd\u5988"},{id:217,name:"\u64cd\u5c3c"},{id:218,name:"\u64cd\u4f60"},{id:219,name:"\u64cd\u4f60\u516b\u8f88\u7956\u5b97"},{id:220,name:"\u64cd\u4f60\u8001\u5988"},{id:221,name:"\u64cd\u4f60\u8001\u6bcd"},{id:222,name:"\u64cd\u4f60\u5988"},{id:223,name:"\u64cd\u4f60\u5988_"},{id:224,name:"\u64cd\u4f60\u5976\u5976"},{id:225,name:"\u64cd\u4f60\u5a18"},{id:226,name:"\u64cd\u4f60\u5168\u5bb6"},{id:227,name:"\u64cd\u5a18"},{id:228,name:"\u64cd\u5168\u5bb6"},{id:229,name:"\u64cd\u4ed6"},{id:230,name:"\u64cd\u4ed6\u5988"},{id:231,name:"\u64cd\u5979"},{id:232,name:"\u64cd\u5979\u5988"},{id:233,name:"\u64cd\u7956\u5b97"},{id:234,name:"\u66f9\u521a\u5ddd"},{id:235,name:"\u66f9\u5efa\u660e"},{id:236,name:"\u66f9\u57f9\u73ba"},{id:237,name:"\u8349\u7684\u4f60\u5988"},{id:238,name:"\u8349\u5988"},{id:239,name:"\u8349\u6ce5\u9a6c"},{id:240,name:"\u8349\u62df\u5988"},{id:241,name:"\u8349\u4f60"},{id:242,name:"\u8349\u4f60\u5988"},{id:243,name:"\u518c\u90a3"},{id:244,name:"\u4fa7\u90a3"},{id:245,name:"\u6d4b\u7ed8\u5c40"},{id:246,name:"\u6d4b\u62ff"},{id:247,name:"\u5c91\u65ed"},{id:248,name:"\u66fe\u57f9\u708e"},{id:249,name:"\u66fe\u5e86\u7ea2"},{id:250,name:"\u63d2_"},{id:251,name:"\u63d2GM"},{id:252,name:"\u63d2Gm"},{id:253,name:"\u63d2gM"},{id:254,name:"\u63d2gm"},{id:255,name:"\u63d2\u4f60"},{id:256,name:"\u63d2\u4f60\u5988"},{id:257,name:"\u63d2\u6df1\u4e9b"},{id:258,name:"\u63d2\u6b7b\u4f60"},{id:259,name:"\u67f4\u73b2"},{id:260,name:"\u67f4\u7ecd\u826f"},{id:261,name:"\u4ea7\u6743\u5c40"},{id:262,name:"\u5e38\u4e07\u5168"},{id:263,name:"\u5e38\u59d4"},{id:264,name:"\u671d\u9c9c"},{id:265,name:"\u8f66\u81e3"},{id:266,name:"\u8f66\u4fca"},{id:267,name:"\u8f66\u4ed1"},{id:268,name:"\u9648\u5b9d\u751f"},{id:269,name:"\u9648\u5927\u536b"},{id:270,name:"\u9648\u72ec\u79c0"},{id:271,name:"\u9648\u529f"},{id:272,name:"\u9648\u5efa\u6c11"},{id:273,name:"\u9648\u96f7"},{id:274,name:"\u9648\u826f\u5b87"},{id:275,name:"\u9648\u4f26"},{id:276,name:"\u9648\u654f\u5c14"},{id:277,name:"\u9648\u6c42\u53d1"},{id:278,name:"\u9648\u5168\u56fd"},{id:279,name:"\u9648\u6c34\u6241"},{id:280,name:"\u9648\u6587\u6e05"},{id:281,name:"\u9648\u5e0c"},{id:282,name:"\u9648\u5e0c\u540c"},{id:283,name:"\u9648\u5c0f\u540c"},{id:284,name:"\u9648\u6653\u5b81"},{id:285,name:"\u9648\u65b0\u6743"},{id:286,name:"\u9648\u7eea\u56fd"},{id:287,name:"\u9648\u8bad\u79cb"},{id:288,name:"\u9648\u6bc5"},{id:289,name:"\u9648\u4e91"},{id:290,name:"\u9648\u653f\u9ad8"},{id:291,name:"\u9648\u81f3\u7acb"},{id:292,name:"\u9648\u603b\u7edf"},{id:293,name:"\u6210\u4eba\u7535\u5f71"},{id:294,name:"\u6210\u4eba\u7247"},{id:295,name:"\u6210\u4eba\u4e66\u520a"},{id:296,name:"\u6210\u4eba\u56fe\u7247"},{id:297,name:"\u6210\u4eba\u7f51\u7ad9"},{id:298,name:"\u57ce\u7ba1"},{id:299,name:"\u7a0b\u51ef"},{id:300,name:"\u5403\u5927\u4fbf"},{id:301,name:"\u5403\u5c4e"},{id:302,name:"\u8fdf\u6d69\u7530"},{id:303,name:"\u8d64\u532a"},{id:304,name:"\u62bd\u63d2"},{id:305,name:"\u62bd\u4f60\u4e2b\u7684"},{id:306,name:"\u62bd\u5934"},{id:307,name:"\u7b79\u7801"},{id:308,name:"\u81ed\u5316\u897f"},{id:309,name:"\u81ed\u673a"},{id:310,name:"\u81ed\u673a\u516b"},{id:311,name:"\u81ed\u9e21"},{id:312,name:"\u81ed\u9e21\u5df4"},{id:313,name:"\u81ed\u897f"},{id:314,name:"\u51fa\u5356"},{id:315,name:"\u51fa\u552e\u6b64\u53f7"},{id:316,name:"\u51fa\u552e\u5047\u5e01"},{id:317,name:"\u51fa\u552e\u67aa\u652f"},{id:318,name:"\u51fa\u552e\u795e\u7b26"},{id:319,name:"\u51fa\u552e\u624b\u67aa"},{id:320,name:"\u51fa\u552e\u8d26\u53f7"},{id:321,name:"\u891a\u76ca\u6c11"},{id:322,name:"\u5439\u5587\u53ed"},{id:323,name:"\u5439\u7bab"},{id:324,name:"\u6625\u836f"},{id:325,name:"\u7eaf\u4e00\u90ce"},{id:326,name:"\u8822\u732a"},{id:327,name:"\u6233\u4f60"},{id:328,name:"\u7c97\u5236\u5417\u5561"},{id:329,name:"\u5d14\u5c11\u9e4f"},{id:330,name:"\u50ac\u60c5"},{id:331,name:"\u50ac\u60c5\u836f"},{id:332,name:"\u8fbe\u83f2\u9e21"},{id:333,name:"\u8fbe\u8d56"},{id:334,name:"\u8fbe\u8d56\u5587\u561b"},{id:335,name:"\u6253\u5012\u5171\u4ea7\u515a"},{id:336,name:"\u6253\u70ae"},{id:337,name:"\u6253\u7838\u62a2"},{id:338,name:"\u5927B"},{id:339,name:"\u5927\u903c"},{id:340,name:"\u5927\u4fbf"},{id:341,name:"\u5927\u6ce2\u6ce2"},{id:342,name:"\u5927\u53c2\u8003"},{id:343,name:"\u5927\u4e1c\u4e9a"},{id:344,name:"\u5927\u6cd5"},{id:345,name:"\u5927\u9ebb"},{id:346,name:"\u5927\u9ebb\u6811\u8102"},{id:347,name:"\u5927\u9ebb\u6cb9"},{id:348,name:"\u5927\u5e08"},{id:349,name:"\u5927\u536b\u6559"},{id:350,name:"\u5927\u5b66\u9a9a\u4e71"},{id:351,name:"\u5927\u8840B"},{id:352,name:"\u5927\u8840\u6bd4"},{id:353,name:"\u5446\u5375"},{id:354,name:"\u6234\u6d77\u9759"},{id:355,name:"\u6234\u7ea2"},{id:356,name:"\u6234\u6676"},{id:357,name:"\u6234\u7ef4\u6559"},{id:358,name:"\u6234\u76f8\u9f99"},{id:359,name:"\u4e39\u73e0\u6602\u5954"},{id:360,name:"\u6863\u6848\u5c40"},{id:361,name:"\u515a\u4e3b\u5e2d"},{id:362,name:"\u8361\u5987"},{id:363,name:"\u8361\u5987\u8bfa\u5a18"},{id:364,name:"\u5bfc\u5f39"},{id:365,name:"\u5012\u53f0"},{id:366,name:"\u76d7\u7a83"},{id:367,name:"\u76d7\u7a83\u72af"},{id:368,name:"\u9053\u6559"},{id:369,name:"\u7684\u7238\u7238"},{id:370,name:"\u7684\u513f\u5b50"},{id:371,name:"\u7684\u7236\u4eb2"},{id:372,name:"\u7684\u5988\u5988"},{id:373,name:"\u7684\u6bcd\u4eb2"},{id:374,name:"\u9093\u5c0f\u5e73"},{id:375,name:"\u9093\u7b11\u8d2b"},{id:376,name:"\u8bcb\u6bc1"},{id:377,name:"\u62b5\u5236"},{id:378,name:"\u5e95\u8d70\u5149"},{id:379,name:"\u5e1d\u56fd\u4e3b\u4e49"},{id:380,name:"\u5e1d\u987a"},{id:381,name:"\u8482\u987a"},{id:382,name:"\u7f14\u987a"},{id:383,name:"\u98a0\u8986"},{id:384,name:"\u7535\u76d1\u4f1a"},{id:385,name:"\u53fc\u4f60"},{id:386,name:"\u53fc\u4f60\u5988"},{id:387,name:"\u9493\u9c7c\u5c9b"},{id:388,name:"\u9493\u9c7c\u53f0"},{id:389,name:"\u4e01\u5173\u6839"},{id:390,name:"\u4e01\u5b50\u9716"},{id:391,name:"\u4e1c\u5317\u72ec\u7acb"},{id:392,name:"\u4e1c\u5347"},{id:393,name:"\u4e1c\u6761\u82f1\u673a"},{id:394,name:"\u4e1c\u7a81"},{id:395,name:"\u4e1c\u7a81\u66b4\u52a8\u548c\u72ec\u7acb"},{id:396,name:"\u4e1c\u7a81\u7ec4\u7ec7"},{id:397,name:"\u4e1c\u4e9a\u75c5\u592b"},{id:398,name:"\u4e1c\u6b63\u6559"},{id:399,name:"\u8463\u5efa\u534e"},{id:400,name:"\u8463\u8d31\u534e"},{id:401,name:"\u8463\u529b"},{id:402,name:"\u8463\u6587\u534e"},{id:403,name:"\u61c2\u6587\u534e"},{id:404,name:"\u72ec\u88c1"},{id:405,name:"\u72ec\u7acb"},{id:406,name:"\u72ec\u7acb\u53f0\u6e7e\u4f1a"},{id:407,name:"\u8d4c\u535a"},{id:408,name:"\u8d4c\u9a6c"},{id:409,name:"\u8d4c\u7403"},{id:410,name:"\u675c\u6052\u5ca9"},{id:411,name:"\u675c\u91d1\u624d"},{id:412,name:"\u675c\u91d1\u5bcc"},{id:413,name:"\u675c\u51b7\u4e01"},{id:414,name:"\u675c\u9c81\u95e8"},{id:415,name:"\u675c\u9752\u6797"},{id:416,name:"\u591a\u6770\u70ed\u65e6"},{id:417,name:"\u591a\u91cc\u5764\u3002\u827e\u6c99\u672c"},{id:418,name:"\u591a\u7ef4"},{id:419,name:"\u989d\u5c14\u5fb7\u5c3c"},{id:420,name:"\u6069\u683c\u65af"},{id:421,name:"\u513f\u5b50"},{id:422,name:"\u4e8c_"},{id:423,name:"\u4e8cB"},{id:424,name:"\u4e8c\u903c"},{id:425,name:"\u4e8c\u5976"},{id:426,name:"\u4e8c\u4e59\u57fa\u9170\u80fa\u53d1\u62a1"},{id:427,name:"\u53d1\u62a1\u529f"},{id:428,name:"\u53d1\u4f26"},{id:429,name:"\u53d1\u4f26\u529f"},{id:430,name:"\u53d1\u8f6e"},{id:431,name:"\u53d1\u8bba"},{id:432,name:"\u53d1\u8bba\u516c"},{id:433,name:"\u53d1\u8bba\u529f"},{id:434,name:"\u53d1\u9a9a"},{id:435,name:"\u6cd5$"},{id:436,name:"\u6cd5@@\u8f6e"},{id:437,name:"\u6cd5@\u8f6e"},{id:438,name:"\u6cd5^^\u8f6e"},{id:439,name:"\u6cd5^\u8f6e"},{id:440,name:"\u6cd5~~\u8f6e"},{id:441,name:"\u6cd5~\u8f6e"},{id:442,name:"\u6cd5\u529f"},{id:443,name:"\u6cd5\u514b\u9c7f"},{id:444,name:"\u6cd5\u6123"},{id:445,name:"\u6cd5\u4ed1"},{id:446,name:"\u6cd5\u8f6e"},{id:447,name:"\u6cd5\u8f6e\u5927\u6cd5"},{id:448,name:"\u6cd5\u8f6e\u529f"},{id:449,name:"\u6cd5\u897f\u65af"},{id:450,name:"\u6cd5\u5236\u529e"},{id:451,name:"\u53cd\u515a"},{id:452,name:"\u53cd\u52a8"},{id:453,name:"\u53cd\u5c01\u9501"},{id:454,name:"\u53cd\u5c01\u9501\u6280\u672f"},{id:455,name:"\u53cd\u8150\u8d25\u8bba\u575b"},{id:456,name:"\u53cd\u9769\u547d"},{id:457,name:"\u53cd\u5171"},{id:458,name:"\u53cd\u534e"},{id:459,name:"\u53cd\u6050\u59d4\u5458\u4f1a"},{id:460,name:"\u53cd\u4eba\u7c7b"},{id:461,name:"\u53cd\u65e5"},{id:462,name:"\u53cd\u653f\u5e9c"},{id:463,name:"\u53cd\u4e2d\u5171"},{id:464,name:"\u72af\u7f6a"},{id:465,name:"\u8303\u957f\u9f99"},{id:466,name:"\u8d29\u6bd2"},{id:467,name:"\u68b5\u8482\u5188"},{id:468,name:"\u623f\u5cf0\u8f89"},{id:469,name:"\u653e\u8361"},{id:470,name:"\u975e\u6cd5"},{id:471,name:"\u80ba\u708e"},{id:472,name:"\u5e9f\u7269"},{id:473,name:"\u5206\u88c2"},{id:474,name:"\u5206\u88c2\u7956\u56fd"},{id:475,name:"\u51af\u4e1c\u6d77"},{id:476,name:"\u51af\u60e0\u654f"},{id:477,name:"\u51af\u7d20\u82f1"},{id:478,name:"\u4f5b\u6559"},{id:479,name:"\u4f5b\u5c55\u5343\u624b\u6cd5"},{id:480,name:"\u4f5b\u4e3b"},{id:481,name:"\u4f5b\u7956"},{id:482,name:"\u65a7\u5934\u9570\u5200"},{id:483,name:"\u8150\u8d25"},{id:484,name:"\u4ed8\u5efa\u534e"},{id:485,name:"\u5085\u9e4f"},{id:486,name:"\u5085\u4f5c\u4e49"},{id:487,name:"\u5bcc\u5170\u514b\u6797"},{id:488,name:"\u5e72_"},{id:489,name:"\u5e72_\u8001\u6bcd"},{id:490,name:"\u5e72_\u5988"},{id:491,name:"\u5e72_\u5a18"},{id:492,name:"\u5e72bi"},{id:493,name:"\u5e72GM"},{id:494,name:"\u5e72Gm"},{id:495,name:"\u5e72gM"},{id:496,name:"\u5e72gm"},{id:497,name:"\u5e72X"},{id:498,name:"\u5e72\u7206"},{id:499,name:"\u5e72\u903c"},{id:500,name:"\u5e72\u6bd4"},{id:501,name:"\u5e72\u5230"},{id:502,name:"\u5e72\u7684\u4f60"},{id:503,name:"\u5e72\u5e72"},{id:504,name:"\u5e72\u5e72\u5e72"},{id:505,name:"\u5e72\u673a"},{id:506,name:"\u5e72\u9e21"},{id:507,name:"\u5e72\u5566"},{id:508,name:"\u5e72\u52d2"},{id:509,name:"\u5e72\u62ce\u5a18"},{id:510,name:"\u5e72\u6797"},{id:511,name:"\u5e72\u5c3c"},{id:512,name:"\u5e72\u4f60"},{id:513,name:"\u5e72\u4f60\u5988"},{id:514,name:"\u5e72\u4f60\u5988b"},{id:515,name:"\u5e72\u4f60\u5988\u903c"},{id:516,name:"\u5e72\u4f60\u5a18"},{id:517,name:"\u5e72\u60a8"},{id:518,name:"\u5e72\u4e03\u516b"},{id:519,name:"\u5e72\u6c5d"},{id:520,name:"\u5e72\u5165"},{id:521,name:"\u5e72\u723d"},{id:522,name:"\u5e72\u6b7b"},{id:523,name:"\u5e72\u6b7b\u4f60"},{id:524,name:"\u5e72\u4ed6"},{id:525,name:"\u5e72\u4ed6\u5988"},{id:526,name:"\u5e72\u5b83"},{id:527,name:"\u5e72\u5979"},{id:528,name:"\u5e72\u5979\u5988"},{id:529,name:"\u5e72\u6211"},{id:530,name:"\u5e72\u4e00\u5e72"},{id:531,name:"\u5188\u6751\u5b81\u6b21"},{id:532,name:"\u5188\u6751\u79c0\u6811"},{id:533,name:"\u809b\u4ea4"},{id:534,name:"\u809b\u95e8"},{id:535,name:"\u6e2f\u6fb3\u529e"},{id:536,name:"\u6e2f\u72ec"},{id:537,name:"\u9ad8\u864e\u57ce"},{id:538,name:"\u9ad8\u4fca"},{id:539,name:"\u9ad8\u4e3d\u68d2\u5b50"},{id:540,name:"\u9ad8\u4e3d\u6734"},{id:541,name:"\u9ad8\u6821\u66b4\u4e71"},{id:542,name:"\u9ad8\u6821\u7fa4\u4f53\u4e8b\u4ef6"},{id:543,name:"\u9ad8\u6821\u9a9a\u4e71"},{id:544,name:"\u9ad8\u6cbb\u8054"},{id:545,name:"\u9ad8\u81ea\u8054"},{id:546,name:"\u777e\u4e38"},{id:547,name:"\u818f\u836f\u65d7"},{id:548,name:"\u641e\u6817\u68d2"},{id:549,name:"\u6208\u745e"},{id:550,name:"\u803f\u60e0\u660c"},{id:551,name:"\u803f\u71ce\u539f"},{id:552,name:"\u803f\u6587\u6e05"},{id:553,name:"\u5f13\u867d\u5973\u5e72"},{id:554,name:"\u516c\u5b89"},{id:555,name:"\u516c\u5b89\u90e8"},{id:556,name:"\u516c\u5b89\u5c40"},{id:557,name:"\u5171\u4ea7\u515a"},{id:558,name:"\u5171\u4ea7\u4e3b\u4e49"},{id:559,name:"\u5171\u515a"},{id:560,name:"\u5171\u532a"},{id:561,name:"\u5171\u532a16\u5927\u5341\u516d\u5927"},{id:562,name:"\u5171\u72d7"},{id:563,name:"\u5171\u519b"},{id:564,name:"\u5171\u8363"},{id:565,name:"\u72d7b"},{id:566,name:"\u72d7\u903c"},{id:567,name:"\u72d7\u64cd"},{id:568,name:"\u72d7\u64cd\u5356\u903c"},{id:569,name:"\u72d7\u5e72"},{id:570,name:"\u72d7\u5375"},{id:571,name:"\u72d7\u5a18"},{id:572,name:"\u72d7\u5a18\u517b\u7684"},{id:573,name:"\u72d7\u5c41"},{id:574,name:"\u72d7\u65e5"},{id:575,name:"\u72d7\u65e5\u7684"},{id:576,name:"\u72d7\u5c4e"},{id:577,name:"\u72d7\u517b"},{id:578,name:"\u72d7\u6742\u79cd"},{id:579,name:"\u53e4\u9f99"},{id:580,name:"\u9aa8\u72ee"},{id:581,name:"\u86ca\u60d1"},{id:582,name:"\u62d0\u5356"},{id:583,name:"\u5173\u5353\u4e2d"},{id:584,name:"\u89c2\u4e16\u97f3"},{id:585,name:"\u5b98\u903c\u6c11\u53cd"},{id:586,name:"\u5b98\u5546\u52fe\u7ed3"},{id:587,name:"\u8d2f\u901a\u4e24\u7ea7\u6cd5"},{id:588,name:"\u51a0\u72b6"},{id:589,name:"\u51a0\u72b6\u75c5\u6bd2"},{id:590,name:"\u9f9f\u513f\u5b50"},{id:591,name:"\u9f9f\u516c"},{id:592,name:"\u9f9f\u5b59\u5b50"},{id:593,name:"\u9f9f\u5934"},{id:594,name:"\u9b3c\u6751"},{id:595,name:"\u90ed\u4f2f\u96c4"},{id:596,name:"\u90ed\u5e9a\u8302"},{id:597,name:"\u90ed\u91d1\u9f99"},{id:598,name:"\u90ed\u58f0\u7428"},{id:599,name:"\u90ed\u6811\u6e05"},{id:600,name:"\u90ed\u5411\u8fdc"},{id:601,name:"\u90ed\u6c38\u5e73"},{id:602,name:"\u56fd\u5b89\u5c40"},{id:603,name:"\u56fd\u9632\u90e8"},{id:604,name:"\u56fd\u9632\u79d1\u5de5\u59d4"},{id:605,name:"\u56fd\u7ba1\u5c40"},{id:606,name:"\u56fd\u9645\u6cd5\u9662"},{id:607,name:"\u56fd\u5bb6"},{id:608,name:"\u56fd\u5bb6\u6c11\u59d4"},{id:609,name:"\u56fd\u5bb6\u4e3b\u5e2d"},{id:610,name:"\u56fd\u5bb6\u4e3b\u8981\u90e8\u59d4"},{id:611,name:"\u56fd\u6c11\u515a"},{id:612,name:"\u56fd\u6c11\u515a\u4e07\u5c81"},{id:613,name:"\u56fd\u5185\u52a8\u6001\u6e05\u6837"},{id:614,name:"\u56fd\u52a1\u59d4\u5458"},{id:615,name:"\u6d77\u6d1b\u56e0"},{id:616,name:"\u6d77\u6d0b\u5c40"},{id:617,name:"\u97e9\u4ea8\u6797"},{id:618,name:"\u97e9\u957f\u8d4b"},{id:619,name:"\u97e9\u6b63"},{id:620,name:"\u4f55\u5019\u534e"},{id:621,name:"\u4f55\u5e73"},{id:622,name:"\u4f55\u6bc5\u4ead"},{id:623,name:"\u548c\u9505\u67aa"},{id:624,name:"\u6cb3\u6b87"},{id:625,name:"\u6838\u5de5\u4e1a\u57fa\u5730"},{id:626,name:"\u6838\u6f5c\u8247"},{id:627,name:"\u6838\u6b66\u5668"},{id:628,name:"\u8d3a\u56fd\u5f3a"},{id:629,name:"\u8d3a\u8fc7\u5899"},{id:630,name:"\u8d3a\u9f99"},{id:631,name:"\u8d6b\u9c81\u6653\u592b"},{id:632,name:"\u9ed1\u767d\u65e0\u5e38"},{id:633,name:"\u9ed1\u793e\u4f1a"},{id:634,name:"\u9ed1\u624b\u515a"},{id:635,name:"\u5f18\u5f3a"},{id:636,name:"\u7ea2\u536b\u5175"},{id:637,name:"\u6d2a\u5174"},{id:638,name:"\u6d2a\u5fd7"},{id:639,name:"\u4faf\u8d3a\u534e"},{id:640,name:"\u4faf\u51ef"},{id:641,name:"\u4faf\u957f\u5b89"},{id:642,name:"\u540e\u5ead"},{id:643,name:"\u80e1XX"},{id:644,name:"\u80e1\u6625\u534e"},{id:645,name:"\u80e1\u7d27\u6d9b"},{id:646,name:"\u80e1\u7d27\u638f"},{id:647,name:"\u80e1\u7d27\u5957"},{id:648,name:"\u80e1\u9526\u6d9b"},{id:649,name:"\u80e1\u9526\u6ed4"},{id:650,name:"\u80e1\u9526\u6dd8"},{id:651,name:"\u80e1\u666f\u6d9b"},{id:652,name:"\u80e1\u4e54\u6728"},{id:653,name:"\u80e1\u95ee\u9e23"},{id:654,name:"\u80e1\u8000\u90a6"},{id:655,name:"\u80e1\u7389\u654f"},{id:656,name:"\u80e1\u6cfd\u541b"},{id:657,name:"\u80e1\u5fd7\u660e"},{id:658,name:"\u80e1\u4e3b\u5e2d"},{id:659,name:"\u80e1\u603b\u4e66\u8bb0"},{id:660,name:"\u864e\u95e8"},{id:661,name:"\u62a4\u58eb"},{id:662,name:"\u82b1\u67f3"},{id:663,name:"\u534e\u56fd\u950b"},{id:664,name:"\u534e\u5efa\u654f"},{id:665,name:"\u534e\u76db\u987f"},{id:666,name:"\u6362\u59bb"},{id:667,name:"\u7687\u519b"},{id:668,name:"\u9ec4\u5927\u4ed9"},{id:669,name:"\u9ec4\u6bbf\u4e2d"},{id:670,name:"\u9ec4\u5efa\u56fd"},{id:671,name:"\u9ec4\u5efa\u76db"},{id:672,name:"\u9ec4\u83ca"},{id:673,name:"\u9ec4\u83ca\u5434\u4eea"},{id:674,name:"\u9ec4\u4e3d\u6ee1"},{id:675,name:"\u9ec4\u5947\u5e06"},{id:676,name:"\u9ec4\u8272"},{id:677,name:"\u9ec4\u8272\u7535\u5f71"},{id:678,name:"\u9ec4\u8272\u6c5f"},{id:679,name:"\u9ec4\u8272\u5c0f\u7535\u5f71"},{id:680,name:"\u9ec4\u8272\u5c0f\u8bf4"},{id:681,name:"\u9ec4\u6811\u8d24"},{id:682,name:"\u9ec4\u7f51"},{id:683,name:"\u9ec4\u5148\u8000"},{id:684,name:"\u9ec4\u6653\u8587"},{id:685,name:"\u9ec4\u5174\u56fd"},{id:686,name:"\u56de\u6559"},{id:687,name:"\u56de\u826f\u7389"},{id:688,name:"\u56de\u6c11\u66b4\u52a8"},{id:689,name:"\u56de\u6c11\u5403\u732a\u8089"},{id:690,name:"\u56de\u65cf\u4eba\u5403\u732a\u8089"},{id:691,name:"\u660f\u836f"},{id:692,name:"\u6df7\u6c8c\u51b3"},{id:693,name:"\u9b42\u868a\u9999"},{id:694,name:"\u706b\u68d2"},{id:695,name:"\u673a\u516b"},{id:696,name:"\u673a\u5df4"},{id:697,name:"\u673a\u53ed"},{id:698,name:"\u673a\u63b0"},{id:699,name:"\u673a\u5bc6\u6587\u4ef6"},{id:700,name:"\u9e21\u516b"},{id:701,name:"\u9e21\u5df4"},{id:702,name:"\u9e21\u53ed"},{id:703,name:"\u9e21\u82ad"},{id:704,name:"\u9e21\u63b0"},{id:705,name:"\u9e21\u9e21"},{id:706,name:"\u9e21\u5978"},{id:707,name:"\u9e21\u6b6a"},{id:708,name:"\u59ec\u80dc\u5fb7"},{id:709,name:"\u57fa\u5730\u7ec4\u7ec7"},{id:710,name:"\u57fa\u7763"},{id:711,name:"\u57fa\u7763\u6559"},{id:712,name:"\u6fc0\u60c5\u7535\u5f71"},{id:713,name:"\u6fc0\u60c5\u5c0f\u7535\u5f71"},{id:714,name:"\u5409\u8dcb\u732b"},{id:715,name:"\u5409\u70b3\u8f69"},{id:716,name:"\u96c6\u4f1a"},{id:717,name:"\u8ba1\u724c\u8f6f\u4ef6"},{id:718,name:"\u8ba1\u751f\u59d4"},{id:719,name:"\u5993\u5973"},{id:720,name:"\u5993\u9662"},{id:721,name:"\u796d\u575b"},{id:722,name:"\u7532\u5e86\u6797"},{id:723,name:"\u8d3e\u5e86\u6797"},{id:724,name:"\u8d3e\u5ef7\u5b89"},{id:725,name:"\u5047\u949e"},{id:726,name:"\u5047\u94b1"},{id:727,name:"\u5047\u9752\u6797"},{id:728,name:"\u5047\u5e86\u6797"},{id:729,name:"\u5978\u66b4"},{id:730,name:"\u5978\u592b\u6deb\u5987"},{id:731,name:"\u5978\u4f60"},{id:732,name:"\u5978\u4ed6"},{id:733,name:"\u5978\u5979"},{id:734,name:"\u5978\u4e00\u5978"},{id:735,name:"\u5978\u6deb"},{id:736,name:"\u95f4\u8c0d"},{id:737,name:"\u8d31\u903c"},{id:738,name:"\u8d31\u8d27"},{id:739,name:"\u8d31\u4eba"},{id:740,name:"\u6c5fCore"},{id:741,name:"\u6c5f\u516b"},{id:742,name:"\u6c5f\u516b\u70b9"},{id:743,name:"\u6c5f\u5fc5\u65b0"},{id:744,name:"\u6c5f\u72ec\u88c1"},{id:745,name:"\u6c5f\u6838\u5fc3"},{id:746,name:"\u6c5f\u9752"},{id:747,name:"\u6c5f\u620f\u5b50"},{id:748,name:"\u6c5f\u62e9\u6c11"},{id:749,name:"\u6c5f\u6cfd\u6c11"},{id:750,name:"\u6c5f\u8d3c\u6c11"},{id:751,name:"\u6c5f\u6298\u6c11"},{id:752,name:"\u6c5f\u732a"},{id:753,name:"\u6c5f\u732a\u5ab3"},{id:754,name:"\u6c5f\u4e3b\u5e2d"},{id:755,name:"\u59dc\u6625\u4e91"},{id:756,name:"\u59dc\u5927\u660e"},{id:757,name:"\u59dc\u5f02\u5eb7"},{id:758,name:"\u50f5\u8d3c\u6c11"},{id:759,name:"\u7586\u72ec"},{id:760,name:"\u848b\u5b9a\u4e4b"},{id:761,name:"\u848b\u5efa\u56fd"},{id:762,name:"\u848b\u6d01\u654f"},{id:763,name:"\u848b\u4ecb\u77f3"},{id:764,name:"\u848b\u7ecf\u56fd"},{id:765,name:"\u848b\u4e2d\u6b63"},{id:766,name:"\u9171\u732a\u5ab3"},{id:767,name:"\u4ea4\u901a\u90e8"},{id:768,name:"\u59e3\u897f"},{id:769,name:"\u7126\u7115\u6210"},{id:770,name:"\u53eb\u5e8a"},{id:771,name:"\u53eb\u9e21"},{id:772,name:"\u53eb\u5c0f\u59d0"},{id:773,name:"\u6559\u80b2\u90e8"},{id:774,name:"\u8857\u5934\u5bf9\u6297"},{id:775,name:"\u89e3\u632f\u534e"},{id:776,name:"\u91d1\u65e5\u6210"},{id:777,name:"\u91d1\u4e66\u6ce2"},{id:778,name:"\u91d1\u6b63\u65e5"},{id:779,name:"\u9526\u6d9b"},{id:780,name:"\u7981\u4e66"},{id:781,name:"\u7ecf\u6d4e\u793e\u4f1a\u7406\u4e8b\u4f1a"},{id:782,name:"\u7ecf\u793e\u7406\u4e8b\u4f1a"},{id:783,name:"\u7cbe\u6db2"},{id:784,name:"\u7cbe\u5b50"},{id:785,name:"\u8b66\u532a\u4e00\u5bb6"},{id:786,name:"\u656c\u56fd\u795e\u793e"},{id:787,name:"\u9756\u56fd\u795e\u793e"},{id:788,name:"\u9759\u5750"},{id:789,name:"\u7ea0\u5bdf\u5458"},{id:790,name:"\u9e20\u5c4e"},{id:791,name:"\u83ca\u82b1\u8695"},{id:792,name:"\u7edd\u5bc6\u6863\u6848"},{id:793,name:"\u519b\u56fd\u4e3b\u4e49"},{id:794,name:"\u519b\u5993"},{id:795,name:"\u519b\u957f\u53d1\u5a01"},{id:796,name:"\u5361\u8010\u57fa"},{id:797,name:"\u5361\u65af\u7279\u7f57"},{id:798,name:"\u5f00\u67aa"},{id:799,name:"\u770b\u4e0b"},{id:800,name:"\u9760\u4f60\u5988"},{id:801,name:"\u9760\u8170"},{id:802,name:"\u55d1\u836f"},{id:803,name:"\u53ef\u5f85\u56e0"},{id:804,name:"\u53ef\u5361\u53f6"},{id:805,name:"\u53ef\u5361\u56e0"},{id:806,name:"\u514b\u6797\u987f"},{id:807,name:"\u6050\u6016\u4efd\u5b50"},{id:808,name:"\u6050\u6016\u4e3b\u4e49"},{id:809,name:"\u6050\u6016\u7ec4\u7ec7"},{id:810,name:"\u53e3\u4ea4"},{id:811,name:"\u5bc7\u6653\u4f1f"},{id:812,name:"\u57ae\u53f0"},{id:813,name:"\u72c2\u64cd"},{id:814,name:"\u72c2\u64cd\u4f60\u5168\u5bb6"},{id:815,name:"\u5783\u573e\u6e38\u620f"},{id:816,name:"\u62c9\u767b"},{id:817,name:"\u62c9\u59c6\u65af\u83f2\u5c14\u5fb7"},{id:818,name:"\u5587\u561b"},{id:819,name:"\u6765\u63d2\u6211"},{id:820,name:"\u6765\u5e72"},{id:821,name:"\u6765\u723d\u6211"},{id:822,name:"\u8d56\u660c\u661f"},{id:823,name:"\u89c8\u53eb"},{id:824,name:"\u61d2\u6559"},{id:825,name:"\u70c2_"},{id:826,name:"\u70c2B"},{id:827,name:"\u70c2\u903c"},{id:828,name:"\u70c2\u6bd4"},{id:829,name:"\u70c2\u8d27"},{id:830,name:"\u70c2\u9e1f"},{id:831,name:"\u70c2\u4eba"},{id:832,name:"\u70c2\u6e38\u620f"},{id:833,name:"\u6ee5\u4ea4"},{id:834,name:"\u52b3\u52a8\u4fdd\u969c\u90e8"},{id:835,name:"\u52b3\u6559\u6240"},{id:836,name:"\u52b3\u62c9"},{id:837,name:"\u8001\u903c"},{id:838,name:"\u8001\u5a4a\u5b50"},{id:839,name:"\u8001\u864e_"},{id:840,name:"\u8001\u864e\u673a"},{id:841,name:"\u8001\u6bdb\u5b50"},{id:842,name:"\u8001\u6bcd"},{id:843,name:"\u8001\u4eba\u653f\u6cbb"},{id:844,name:"\u8001\u571f"},{id:845,name:"\u96f7\u7ba1"},{id:846,name:"\u51b7\u6eb6"},{id:847,name:"\u79bb\u957f\u6625"},{id:848,name:"\u9ece\u6653\u5b8f"},{id:849,name:"\u9ece\u9633\u8bc4"},{id:850,name:"\u674e\u658c"},{id:851,name:"\u674e\u4ece\u519b"},{id:852,name:"\u674e\u5927\u5e08"},{id:853,name:"\u674e\u5927\u948a"},{id:854,name:"\u674e\u767b\u8f89"},{id:855,name:"\u674e\u4e1c\u751f"},{id:856,name:"\u674e\u6cd5\u6cc9"},{id:857,name:"\u674e\u521a"},{id:858,name:"\u674e\u5f18\u65e8"},{id:859,name:"\u674e\u7ea2\u5fd7"},{id:860,name:"\u674e\u5b8f\u65e8"},{id:861,name:"\u674e\u5b8f\u5fd7"},{id:862,name:"\u674e\u6d2a"},{id:863,name:"\u674e\u6d2a\u5fd7"},{id:864,name:"\u674e\u9e3f\u5fe0"},{id:865,name:"\u674e\u7eaa\u6052"},{id:866,name:"\u674e\u7ee7\u8010"},{id:867,name:"\u674e\u5bb6\u7965"},{id:868,name:"\u674e\u5efa\u6ce2"},{id:869,name:"\u674e\u5efa\u56fd"},{id:870,name:"\u674e\u5efa\u534e"},{id:871,name:"\u674e\u78d5\u5899"},{id:872,name:"\u674e\u514b\u5f3a"},{id:873,name:"\u674e\u5c9a\u6e05"},{id:874,name:"\u674e\u7acb\u56fd"},{id:875,name:"\u674e\u5b81"},{id:876,name:"\u674e\u9e4f"},{id:877,name:"\u674e\u9e4f*"},{id:878,name:"\u674e\u79cb\u82b3"},{id:879,name:"\u674e\u745e\u73af"},{id:880,name:"\u674e\u5c71"},{id:881,name:"\u674e\u9002\u65f6"},{id:882,name:"\u674e\u4e66\u78ca"},{id:883,name:"\u674e\u94c1\u6620"},{id:884,name:"\u674e\u4f1f"},{id:885,name:"\u674e\u4e94\u56db"},{id:886,name:"\u674e\u7199"},{id:887,name:"\u674e\u5148\u5ff5"},{id:888,name:"\u674e\u5b66\u52c7"},{id:889,name:"\u674e\u7389\u8d4b"},{id:890,name:"\u674e\u6e90\u6f6e"},{id:891,name:"\u674e\u957f\u6625"},{id:892,name:"\u674e\u5146\u524d"},{id:893,name:"\u674e\u603b\u7406"},{id:894,name:"\u674e\u603b\u7edf"},{id:895,name:"\u91cc\u6839"},{id:896,name:"\u6817\u6218\u4e66"},{id:897,name:"\u8fde\u6218"},{id:898,name:"\u8054\u5927"},{id:899,name:"\u8054\u5408\u56fd"},{id:900,name:"\u8054\u5408\u56fd\u5927\u4f1a"},{id:901,name:"\u8054\u6613"},{id:902,name:"\u8054\u6613\u4e92\u52a8"},{id:903,name:"\u7ec3\u529f"},{id:904,name:"\u6881\u6ee8"},{id:905,name:"\u6881\u5149\u70c8"},{id:906,name:"\u7cae\u98df\u5c40"},{id:907,name:"\u4e24\u4e2a\u4e2d\u56fd"},{id:908,name:"\u4e24\u56fd\u8bba"},{id:909,name:"\u4e24\u817f\u4e4b\u95f4"},{id:910,name:"\u4e24\u6027\u72c2\u60c5"},{id:911,name:"\u5ed6\u9521\u9f99"},{id:912,name:"\u5217\u5b81"},{id:913,name:"\u6797\u5f6a"},{id:914,name:"\u6797\u519b"},{id:915,name:"\u6797\u80af"},{id:916,name:"\u6797\u4e1a\u5c40"},{id:917,name:"\u6797\u5de6\u9e23"},{id:918,name:"\u6dcb\u75c5"},{id:919,name:"\u9886\u5bfc"},{id:920,name:"\u4ee4\u8ba1\u5212"},{id:921,name:"\u5218\u6ee8"},{id:922,name:"\u5218\u4f2f\u627f"},{id:923,name:"\u5218\u6210\u519b"},{id:924,name:"\u5218\u8d50\u8d35"},{id:925,name:"\u5218\u798f\u8fde"},{id:926,name:"\u5218\u9e64"},{id:927,name:"\u5218\u534e\u6e05"},{id:928,name:"\u5218\u5bb6\u4e49"},{id:929,name:"\u5218\u5efa\u534e"},{id:930,name:"\u5218\u91d1\u56fd"},{id:931,name:"\u5218\u519b"},{id:932,name:"\u5218\u9e4f"},{id:933,name:"\u5218\u5947\u8446"},{id:934,name:"\u5218\u6dc7"},{id:935,name:"\u5218\u5c11\u5947"},{id:936,name:"\u5218\u751f\u6770"},{id:937,name:"\u5218\u4f1f\u5e73"},{id:938,name:"\u5218\u5411\u677e"},{id:939,name:"\u5218\u6653\u6ee8"},{id:940,name:"\u5218\u6653\u6c5f"},{id:941,name:"\u5218\u4e9a\u6d32"},{id:942,name:"\u5218\u5ef6\u4e1c"},{id:943,name:"\u5218\u6e90"},{id:944,name:"\u5218\u7ca4\u519b"},{id:945,name:"\u5218\u4e91\u5c71"},{id:946,name:"\u5218\u957f\u94f6"},{id:947,name:"\u6d41\u6c13"},{id:948,name:"\u516d\u3002\u56db"},{id:949,name:"\u516d\u5408\u5f69"},{id:950,name:"\u516d\u56db"},{id:951,name:"\u516d-\u56db"},{id:952,name:"\u516d\u56db\u4e8b\u4ef6"},{id:953,name:"\u516d\u56db\u8fd0\u52a8"},{id:954,name:"\u516d\u56db\u771f\u76f8"},{id:955,name:"\u9f99\u864e"},{id:956,name:"\u9f99\u864e\u95e8"},{id:957,name:"\u9f99\u65b0\u6c11"},{id:958,name:"\u697c\u7ee7\u4f1f"},{id:959,name:"\u5362\u5c55\u5de5"},{id:960,name:"\u9646\u660a"},{id:961,name:"\u9646\u8086"},{id:962,name:"\u5f55\u50cf"},{id:963,name:"\u9e7f\u5fc3\u793e"},{id:964,name:"\u8def\u6613"},{id:965,name:"\u4e71\u4ea4"},{id:966,name:"\u4e71\u4f26"},{id:967,name:"\u8f6e\u5e72"},{id:968,name:"\u8f6e\u529f"},{id:969,name:"\u8f6e\u5978"},{id:970,name:"\u8f6e\u6d41\u5e72"},{id:971,name:"\u8f6e\u76d8\u8d4c"},{id:972,name:"\u8bba\u516c"},{id:973,name:"\u8bba\u529f"},{id:974,name:"\u8bba\u653b"},{id:975,name:"\u7f57\u4fdd\u94ed"},{id:976,name:"\u7f57\u5e72"},{id:977,name:"\u7f57\u8363\u6853"},{id:978,name:"\u7f57\u5fd7\u519b"},{id:979,name:"\u9aa1\u5e72"},{id:980,name:"\u88f8\u5e72"},{id:981,name:"\u88f8\u804a"},{id:982,name:"\u88f8\u804a\u5408\u6cd5"},{id:983,name:"\u88f8\u5973__\u78b0"},{id:984,name:"\u88f8\u5973\u5bf9\u5bf9\u78b0"},{id:985,name:"\u88f8\u4f53"},{id:986,name:"\u9a86\u51b0\u6deb\u4f20"},{id:987,name:"\u9a86\u60e0\u5b81"},{id:988,name:"\u96d2\u6811\u521a"},{id:989,name:"\u5415\u5efa\u6210"},{id:990,name:"\u5415\u79c0\u83b2"},{id:991,name:"\u65c5\u6e38\u5c40"},{id:992,name:"\u6c2f\u80fa\u916e"},{id:993,name:"\u5988B"},{id:994,name:"\u5988\u903c"},{id:995,name:"\u5988\u903c\u7684"},{id:996,name:"\u5988\u6bd4"},{id:997,name:"\u5988\u7684"},{id:998,name:"\u5988\u4e2a"},{id:999,name:"\u5988\u5988\u7684"},{id:1e3,name:"\u5988\u5356\u5988\u5c41"},{id:1001,name:"\u5988\u6279"},{id:1002,name:"\u5988\u7956"},{id:1003,name:"\u9ebb\u9189\u94a2\u67aa"},{id:1004,name:"\u9ebb\u9189\u67aa"},{id:1005,name:"\u9ebb\u9189\u836f"},{id:1006,name:"\u9ebb\u9189\u4e59\u919a"},{id:1007,name:"\u9a6c\u98da"},{id:1008,name:"\u9a6c\u7684"},{id:1009,name:"\u9a6c\u7684\u9633\u5177"},{id:1010,name:"\u9a6c\u52a0\u7235"},{id:1011,name:"\u9a6c\u51ef"},{id:1012,name:"\u9a6c\u514b\u601d"},{id:1013,name:"\u9a6c\u52d2\u6208\u58c1"},{id:1014,name:"\u9a6c\u5356\u9a6c\u5c41"},{id:1015,name:"\u9a6c\u6653\u5929"},{id:1016,name:"\u9a6c\u5174\u745e"},{id:1017,name:"\u9a6c\u82f1\u4e5d"},{id:1018,name:"\u9a6c\u52c7\u971e"},{id:1019,name:"\u5417\u7684"},{id:1020,name:"\u5417\u5561"},{id:1021,name:"\u5417\u5561\u78b1"},{id:1022,name:"\u5417\u5561\u7247"},{id:1023,name:"\u4e70\u8d22\u5bcc"},{id:1024,name:"\u4e70\u5356\u67aa\u652f"},{id:1025,name:"\u9ea6\u89d2\u9178"},{id:1026,name:"\u5356B"},{id:1027,name:"\u5356ID"},{id:1028,name:"\u5356QQ"},{id:1029,name:"\u5356\u903c"},{id:1030,name:"\u5356\u6bd4"},{id:1031,name:"\u5356\u8d22\u5bcc"},{id:1032,name:"\u5356\u515a\u6c42\u8363"},{id:1033,name:"\u5356\u56fd"},{id:1034,name:"\u5356\u56fd\u6c42\u8363"},{id:1035,name:"\u5356\u53f7"},{id:1036,name:"\u5356\u5361"},{id:1037,name:"\u5356\u8f6f\u4ef6"},{id:1038,name:"\u5356\u6deb"},{id:1039,name:"\u66fc\u5fb7\u62c9"},{id:1040,name:"\u6bdbXX"},{id:1041,name:"\u6bdb\u5395\u6d1e"},{id:1042,name:"\u6bdb\u4e00\u9c9c"},{id:1043,name:"\u6bdb\u6cfd\u4e1c"},{id:1044,name:"\u6bdb\u8d3c\u4e1c"},{id:1045,name:"\u6bdb\u4e3b\u5e2d"},{id:1046,name:"\u6ca1\u6709\u4eba\u6743"},{id:1047,name:"\u6885\u6bd2"},{id:1048,name:"\u6885\u82b1\u7f51"},{id:1049,name:"\u7f8e\u56fd"},{id:1050,name:"\u7f8e\u56fd\u4f6c"},{id:1051,name:"\u7f8e\u56fd\u4e4b\u97f3"},{id:1052,name:"\u7f8e\u5229\u575a"},{id:1053,name:"\u7f8e\u5973__"},{id:1054,name:"\u7f8e\u5973\u89c6\u9891"},{id:1055,name:"\u7f8e\u5973\u91ce\u7403\u62f3"},{id:1056,name:"\u7f8e\u5973\u505a_"},{id:1057,name:"\u7f8e\u5c11\u5973\u9ebb\u96c0"},{id:1058,name:"\u7f8e\u817f"},{id:1059,name:"\u7f8e\u817f_\u771f"},{id:1060,name:"\u7f8e\u817f\u5199\u771f"},{id:1061,name:"\u59b9\u75bc"},{id:1062,name:"\u59b9\u75db"},{id:1063,name:"\u8499\u5c18\u836f"},{id:1064,name:"\u8499\u72ec"},{id:1065,name:"\u8499\u53e4\u8fbe\u5b50"},{id:1066,name:"\u8499\u53e4\u9791\u5b50"},{id:1067,name:"\u8499\u53e4\u72ec\u7acb"},{id:1068,name:"\u731b\u63d2"},{id:1069,name:"\u731b\u7537\u5f3a\u5978"},{id:1070,name:"\u5b5f\u5efa\u67f1"},{id:1071,name:"\u5b5f\u5b66\u519c"},{id:1072,name:"\u68a6\u9057"},{id:1073,name:"\u8ff7\u5e7b\u7cbe\u534e\u7d20"},{id:1074,name:"\u8ff7\u5e7b\u836f"},{id:1075,name:"\u8ff7\u5e7b\u6db2"},{id:1076,name:"\u8ff7\u660f\u868a"},{id:1077,name:"\u8ff7\u660f\u9999\u70df"},{id:1078,name:"\u8ff7\u660f\u836f"},{id:1079,name:"\u8ff7\u9b42"},{id:1080,name:"\u8ff7\u9b42\u9999"},{id:1081,name:"\u8ff7\u9b42\u9999\u70df"},{id:1082,name:"\u8ff7\u9b42\u836f"},{id:1083,name:"\u8ff7\u5978\u836f"},{id:1084,name:"\u8ff7\u6b7c\u836f"},{id:1085,name:"\u8ff7\u836f"},{id:1086,name:"\u5bc6\u6d1e"},{id:1087,name:"\u5bc6\u5b97"},{id:1088,name:"\u82d7\u534e"},{id:1089,name:"\u82d7\u5729"},{id:1090,name:"\u6c11\u56fd"},{id:1091,name:"\u6c11\u822a\u5c40"},{id:1092,name:"\u6c11\u8fdb\u515a"},{id:1093,name:"\u6c11\u6743"},{id:1094,name:"\u6c11\u8fd0"},{id:1095,name:"\u6c11\u653f\u90e8"},{id:1096,name:"\u6c11\u4e3b"},{id:1097,name:"\u6c11\u4e3b\u6f6e"},{id:1098,name:"\u6c11\u4e3b\u515a"},{id:1099,name:"\u660e\u6167\u7f51"},{id:1100,name:"\u6478\u54aa\u54aa"},{id:1101,name:"\u6469\u95e8\u6559"},{id:1102,name:"\u83ab\u7d22\u91cc\u5c3c"},{id:1103,name:"\u58a8\u7d22\u91cc\u5c3c"},{id:1104,name:"\u9ed8\u514b\u5c14"},{id:1105,name:"\u8c0b\u6740"},{id:1106,name:"\u7a46\u7f55\u9ed8\u5fb7"},{id:1107,name:"\u7a46\u65af\u6797"},{id:1108,name:"\u62ff\u7834\u4ed1"},{id:1109,name:"\u7eb3\u7cb9"},{id:1110,name:"\u5976\u5976"},{id:1111,name:"\u5976\u5a18"},{id:1112,name:"\u5976\u5934\u771f\u7ea2"},{id:1113,name:"\u5976\u5b50"},{id:1114,name:"\u5357\u534e\u65e9\u62a5"},{id:1115,name:"\u5357\u8054\u76df"},{id:1116,name:"\u5357\u86ee"},{id:1117,name:"\u5357\u86ee\u5b50"},{id:1118,name:"\u5185\u88e4"},{id:1119,name:"\u5185\u5c04"},{id:1120,name:"\u5185\u8863"},{id:1121,name:"\u5185\u8863\u79c0"},{id:1122,name:"\u5185\u4e89\u4eba\u6743"},{id:1123,name:"\u5ae9B"},{id:1124,name:"\u5ae9b"},{id:1125,name:"\u5c3c\u514b\u677e"},{id:1126,name:"\u5c3c\u739b"},{id:1127,name:"\u4f60\u7238"},{id:1128,name:"\u4f60\u5927\u7237"},{id:1129,name:"\u4f60\u4e8c\u5927\u7237"},{id:1130,name:"\u4f60\u8001\u6bcd"},{id:1131,name:"\u4f60\u8001\u5473"},{id:1132,name:"\u4f60\u59e5"},{id:1133,name:"\u4f60\u59e5\u59e5\u7684"},{id:1134,name:"\u4f60\u5988"},{id:1135,name:"\u4f60\u5988B\u7684"},{id:1136,name:"\u4f60\u5988\u903c"},{id:1137,name:"\u4f60\u5988\u7684"},{id:1138,name:"\u4f60\u5988\u7684B"},{id:1139,name:"\u4f60\u5988\u4e86\u59b9"},{id:1140,name:"\u4f60\u5a18"},{id:1141,name:"\u4f60\u7237\u7237\u7684"},{id:1142,name:"\u9e1fGM"},{id:1143,name:"\u9e1fGm"},{id:1144,name:"\u9e1fgM"},{id:1145,name:"\u9e1fgm"},{id:1146,name:"\u9e1f\u4f60"},{id:1147,name:"\u8042\u8363\u81fb"},{id:1148,name:"\u8042\u536b\u56fd"},{id:1149,name:"\u5b81\u9ad8\u5b81"},{id:1150,name:"\u725bB"},{id:1151,name:"\u725b\u903c"},{id:1152,name:"\u725b\u6bd4"},{id:1153,name:"\u725b\u5934\u9a6c\u9762"},{id:1154,name:"\u519c\u4e1a\u90e8"},{id:1155,name:"\u52aa\u5c14\xb7\u767d\u514b\u529b"},{id:1156,name:"\u8650\u5f85"},{id:1157,name:"\u5973_"},{id:1158,name:"\u5973\u6559_"},{id:1159,name:"\u5973\u5973"},{id:1160,name:"\u5973\u795e\u6559"},{id:1161,name:"\u5973\u4f18"},{id:1162,name:"\u5973\u4f18\u7247"},{id:1163,name:"\u62cd\u80a9\u795e\u836f"},{id:1164,name:"\u6d3e\u51fa\u6240"},{id:1165,name:"\u55b7\u5242"},{id:1166,name:"\u55b7\u7cbe"},{id:1167,name:"\u55b7\u4f60"},{id:1168,name:"\u55b7\u5c3f"},{id:1169,name:"\u55b7\u96fe\u8ff7\u836f"},{id:1170,name:"\u55b7\u96fe\u578b"},{id:1171,name:"\u5f6d\u5fb7\u6000"},{id:1172,name:"\u5f6d\u6e05\u534e"},{id:1173,name:"\u5f6d\u52c7"},{id:1174,name:"\u5f6d\u771f"},{id:1175,name:"\u76ae\u6761"},{id:1176,name:"\u76ae\u7bb1\u70b8\u5f39"},{id:1177,name:"\u5c41\u773c"},{id:1178,name:"\u5ad6\u5a3c"},{id:1179,name:"\u5ad6\u5993"},{id:1180,name:"\u5ad6\u5ba2"},{id:1181,name:"\u82f9\u679c\u65e5\u62a5"},{id:1182,name:"\u8feb\u5bb3"},{id:1183,name:"\u7834\u574f"},{id:1184,name:"\u7834\u978b"},{id:1185,name:"\u4ec6\u8857"},{id:1186,name:"\u666e\u4eac"},{id:1187,name:"\u621a\u5efa\u56fd"},{id:1188,name:"\u9a91\u4f60"},{id:1189,name:"\u9a91\u4ed6"},{id:1190,name:"\u9a91\u5979"},{id:1191,name:"\u8d77\u4e49"},{id:1192,name:"\u6c14\u8c61\u5c40"},{id:1193,name:"\u94b1\u56fd\u6881"},{id:1194,name:"\u94b1\u5176\u741b"},{id:1195,name:"\u6f5c\u70c8\u87f9"},{id:1196,name:"\u6b20\u5e72"},{id:1197,name:"\u6b20\u9a91"},{id:1198,name:"\u6b20\u4eba\u9a91"},{id:1199,name:"\u67aa\u6bd9"},{id:1200,name:"\u67aa\u51b3"},{id:1201,name:"\u67aa\u51b3\u5973\u72af"},{id:1202,name:"\u67aa\u51b3\u73b0\u573a"},{id:1203,name:"\u67aa\u652f"},{id:1204,name:"\u67aa\u652f\u5f39\u836f"},{id:1205,name:"\u5f3a\u66b4"},{id:1206,name:"\u5f3a\u5978"},{id:1207,name:"\u5f3a\u5978\u72af"},{id:1208,name:"\u5f3a\u536b"},{id:1209,name:"\u5f3a\u536b\u4e1c"},{id:1210,name:"\u5f3a\u6548\u5931\u610f\u836f"},{id:1211,name:"\u5f3a\u786c\u53d1\u8a00"},{id:1212,name:"\u62a2\u52ab"},{id:1213,name:"\u4e54\u77f3"},{id:1214,name:"\u4fa8\u529e"},{id:1215,name:"\u5207\u4e03"},{id:1216,name:"\u7a83\u542c"},{id:1217,name:"\u7a83\u542c\u5668"},{id:1218,name:"\u7a83\u542c\u5668\u6750"},{id:1219,name:"\u7a83\u542c\u8bbe\u5907"},{id:1220,name:"\u7a83\u542c\u738b"},{id:1221,name:"\u4fb5\u72af"},{id:1222,name:"\u4eb2\u6c11\u515a"},{id:1223,name:"\u79e6\u5149\u8363"},{id:1224,name:"\u9752\u6625\u5987"},{id:1225,name:"\u9752\u5929\u767d\u65e5"},{id:1226,name:"\u6c22\u5f39"},{id:1227,name:"\u6e05\u7eaf\u5c11\u5987"},{id:1228,name:"\u6e05\u5b98\u56e2"},{id:1229,name:"\u6e05\u6d77\u5e08\u7236"},{id:1230,name:"\u6e05\u6d77\u65e0\u4e0a\u5e08"},{id:1231,name:"\u6e05\u534e\u5e2e"},{id:1232,name:"\u60c5\u5987"},{id:1233,name:"\u60c5\u8272"},{id:1234,name:"\u60c5\u82725"},{id:1235,name:"\u60c5\u8272\u5927\u7247"},{id:1236,name:"\u60c5\u8272\u7535\u5f71"},{id:1237,name:"\u60c5\u8272\u5149\u789f"},{id:1238,name:"\u60c5\u8272\u547b\u541f"},{id:1239,name:"\u60c5\u8272\u8d34\u56fe"},{id:1240,name:"\u60c5\u8272\u56fe\u7247"},{id:1241,name:"\u60c5\u8272\u6587\u5b66"},{id:1242,name:"\u60c5\u8272\u5c0f\u8bf4"},{id:1243,name:"\u60c5\u8272\u5f71\u7247"},{id:1244,name:"\u5e86\u7ea2"},{id:1245,name:"\u90b1\u5b66\u5f3a"},{id:1246,name:"\u66f2\u9752\u5c71"},{id:1247,name:"\u66f2\u6dd1\u8f89"},{id:1248,name:"\u53bb_\u7684"},{id:1249,name:"\u53bb_\u5988"},{id:1250,name:"\u53bb\u4f60\u7684"},{id:1251,name:"\u53bb\u4f60\u5988"},{id:1252,name:"\u53bb\u4f60\u5988\u7684"},{id:1253,name:"\u53bb\u6b7b"},{id:1254,name:"\u53bb\u4ed6\u5988"},{id:1255,name:"\u53bb\u5979\u5988"},{id:1256,name:"\u5708\u8d64\u532a"},{id:1257,name:"\u5168\u56fd\u4eba\u5927"},{id:1258,name:"\u5168\u56fd\u4eba\u6c11\u4ee3\u8868\u5927\u4f1a"},{id:1259,name:"\u5168\u54f2\u6d19"},{id:1260,name:"\u7638\u817f\u5e2e"},{id:1261,name:"\u7fa4_\u5668"},{id:1262,name:"\u7fa4P"},{id:1263,name:"\u7fa4\u53d1\u5668"},{id:1264,name:"\u7fa4\u5978"},{id:1265,name:"\u7fa4\u4ea4"},{id:1266,name:"\u7fa4\u5c04"},{id:1267,name:"\u70ed\u6bd4\u5a05"},{id:1268,name:"\u70ed\u90a3\u4e9a"},{id:1269,name:"\u4eba\u5927"},{id:1270,name:"\u4eba\u5927\u4ee3\u8868"},{id:1271,name:"\u4eba\u4ee3\u4f1a"},{id:1272,name:"\u4eba\u5f39"},{id:1273,name:"\u4eba\u6c11"},{id:1274,name:"\u4eba\u6c11\u62a5"},{id:1275,name:"\u4eba\u6c11\u5927\u4f1a\u5802"},{id:1276,name:"\u4eba\u6c11\u6cd5\u9662"},{id:1277,name:"\u4eba\u6c11\u5e7f\u573a"},{id:1278,name:"\u4eba\u6c11\u65e5\u62a5"},{id:1279,name:"\u4eba\u6c11\u94f6\u884c"},{id:1280,name:"\u4eba\u6743"},{id:1281,name:"\u4eba\u4f53\u70b8\u5f39"},{id:1282,name:"\u4efb\u6cfd\u6c11"},{id:1283,name:"\u65e5X\u5988"},{id:1284,name:"\u65e5\u672cRING"},{id:1285,name:"\u65e5\u672c\u5e1d\u56fd"},{id:1286,name:"\u65e5\u672c\u9b3c\u5b50"},{id:1287,name:"\u65e5\u4f60"},{id:1288,name:"\u65e5\u4f60\u5988"},{id:1289,name:"\u65e5\u4f60\u5a18"},{id:1290,name:"\u65e5\u6b7b"},{id:1291,name:"\u65e5\u4ed6\u5a18"},{id:1292,name:"\u8089\u68d2"},{id:1293,name:"\u8089\u58c1"},{id:1294,name:"\u8089\u6d1e"},{id:1295,name:"\u8089\u7f1d"},{id:1296,name:"\u8089\u68cd"},{id:1297,name:"\u8089\u68cd\u5b50"},{id:1298,name:"\u8089\u58f6"},{id:1299,name:"\u8089\u7a74"},{id:1300,name:"\u4e73\u6ce2\u81c0\u6d6a"},{id:1301,name:"\u4e73\u623f"},{id:1302,name:"\u4e73\u5cf0"},{id:1303,name:"\u4e73\u4ea4"},{id:1304,name:"\u4e73\u5934"},{id:1305,name:"\u4e73\u6655"},{id:1306,name:"\u5165\u515a"},{id:1307,name:"\u6492\u5c3f"},{id:1308,name:"\u6492\u5207\u5c14"},{id:1309,name:"\u8428\u8fbe\u59c6"},{id:1310,name:"\u8428\u9a6c\u5170\u5947"},{id:1311,name:"\u585e\u767d"},{id:1312,name:"\u585e\u4f60\u7238"},{id:1313,name:"\u585e\u4f60\u516c"},{id:1314,name:"\u585e\u4f60\u8001\u6bcd"},{id:1315,name:"\u585e\u4f60\u8001\u5e08"},{id:1316,name:"\u585e\u4f60\u6bcd"},{id:1317,name:"\u585e\u4f60\u5a18"},{id:1318,name:"\u8d5b_\u5a18"},{id:1319,name:"\u8d5b\u4f60\u5a18"},{id:1320,name:"\u8d5b\u4ed6\u5a18"},{id:1321,name:"\u8d5b\u5979\u5a18"},{id:1322,name:"\u4e09\u4e2a\u5446\u5a4a"},{id:1323,name:"\u4e09\u4e2a\u4ee3\u5a4a"},{id:1324,name:"\u4e09\u7ea7\u7247"},{id:1325,name:"\u4e09\u6c11\u4e3b\u4e49"},{id:1326,name:"\u4e09\u966a"},{id:1327,name:"\u4e09\u966a\u5973"},{id:1328,name:"\u4e09\u53bb\u8f66\u4ed1"},{id:1329,name:"\u4e09\u5511\u4ed1"},{id:1330,name:"\u6c35\u53bb"},{id:1331,name:"\u9a9aB"},{id:1332,name:"\u9a9a\u903c"},{id:1333,name:"\u9a9a\u5987"},{id:1334,name:"\u9a9a\u8d27"},{id:1335,name:"\u9a9a\u4e71"},{id:1336,name:"\u9a9a\u7a74"},{id:1337,name:"\u8272\u6212\u672a\u5220\u51cf"},{id:1338,name:"\u8272\u7a7a\u5bfa"},{id:1339,name:"\u8272\u72fc"},{id:1340,name:"\u8272\u72fc_"},{id:1341,name:"\u8272\u72fc\u7f51"},{id:1342,name:"\u8272\u60c5"},{id:1343,name:"\u8272\u60c5__\u8272\u60c5\u670d\u52a1"},{id:1344,name:"\u8272\u60c5_\u7247"},{id:1345,name:"\u8272\u60c5_\u7ad9"},{id:1346,name:"\u8272\u60c55"},{id:1347,name:"\u8272\u60c5\u7535\u89c6"},{id:1348,name:"\u8272\u60c5\u7535\u5f71"},{id:1349,name:"\u8272\u60c5\u7535\u5f71\u4e0b\u8f7d"},{id:1350,name:"\u8272\u60c5\u670d\u52a1"},{id:1351,name:"\u8272\u60c5\u56fe\u7247"},{id:1352,name:"\u8272\u60c5\u7f51\u7edc\u5c0f\u8bf4"},{id:1353,name:"\u8272\u60c5\u7f51\u7ad9"},{id:1354,name:"\u8272\u60c5\u5c0f_\u5f71"},{id:1355,name:"\u8272\u60c5\u5c0f\u7535\u5f71"},{id:1356,name:"\u8272\u60c5\u5c0f\u8bf4"},{id:1357,name:"\u8272\u53cb"},{id:1358,name:"\u8272\u6b32"},{id:1359,name:"\u6740\u4eba"},{id:1360,name:"\u6740\u4eba\u72af"},{id:1361,name:"\u6740\u4eba\u4e8b\u4ef6"},{id:1362,name:"\u50bb_"},{id:1363,name:"\u50bbB"},{id:1364,name:"\u50bb\u903c"},{id:1365,name:"\u50bb\u6bd4"},{id:1366,name:"\u50bb\u540a"},{id:1367,name:"\u50bb\u5375"},{id:1368,name:"\u50bb\u5b50"},{id:1369,name:"\u715e\u903c"},{id:1370,name:"\u715e\u7b14"},{id:1371,name:"\u5c71\u672c\u4e94\u5341\u516d"},{id:1372,name:"\u5220\u53f7"},{id:1373,name:"\u5546\u52a1\u90e8"},{id:1374,name:"\u4e0a_"},{id:1375,name:"\u4e0a\u4f60"},{id:1376,name:"\u5c1a\u798f\u6797"},{id:1377,name:"\u793e\u4fdd\u57fa\u91d1\u4f1a"},{id:1378,name:"\u793e\u4f1a\u6b63\u4e49\u529b\u91cf"},{id:1379,name:"\u793e\u4f1a\u4e3b\u4e49"},{id:1380,name:"\u793e\u79d1\u9662"},{id:1381,name:"\u5c04\u7cbe"},{id:1382,name:"\u7533\u7ef4\u8fb0"},{id:1383,name:"\u8eab\u4efd\u751f\u6210\u5668"},{id:1384,name:"\u795e\u6c49"},{id:1385,name:"\u795e\u7ecf\u75c5"},{id:1386,name:"\u795e\u5a46"},{id:1387,name:"\u795e\u901a\u52a0\u6301\u6cd5"},{id:1388,name:"\u6c88\u5fb7\u548f"},{id:1389,name:"\u6c88\u8dc3\u8dc3"},{id:1390,name:"\u5ba1\u8ba1\u7f72"},{id:1391,name:"\u5347\u8fbe\u6bd5\u4e1a\u8bc1"},{id:1392,name:"\u751f\u6625\u888b"},{id:1393,name:"\u751f\u5b69\u5b50\u6ca1\u5c41\u773c"},{id:1394,name:"\u751f\u9e26\u7247"},{id:1395,name:"\u5723\u5973\u5cf0"},{id:1396,name:"\u5723\u6218"},{id:1397,name:"\u76db\u534e\u4ec1"},{id:1398,name:"\u6e7f\u4e86"},{id:1399,name:"\u6e7f\u900f\u7684\u5185\u88e4"},{id:1400,name:"\u5341\u516b\u6478"},{id:1401,name:"\u5341\u5e74\u52a8\u4e71"},{id:1402,name:"\u5341\u5e74\u52a8\u4e71\u77f3\u8fdb"},{id:1403,name:"\u5341\u4e94\u5468\u5e74"},{id:1404,name:"\u77f3\u8fdb"},{id:1405,name:"\u77f3\u751f\u9f99"},{id:1406,name:"\u98df\u637b\u5c4e"},{id:1407,name:"\u98df\u5c4e"},{id:1408,name:"\u9a76\u4f60\u7238"},{id:1409,name:"\u9a76\u4f60\u516c"},{id:1410,name:"\u9a76\u4f60\u8001\u6bcd"},{id:1411,name:"\u9a76\u4f60\u8001\u5e08"},{id:1412,name:"\u9a76\u4f60\u6bcd"},{id:1413,name:"\u9a76\u4f60\u5a18"},{id:1414,name:"\u5c4e_\u5a18"},{id:1415,name:"\u5c4e\u4f60\u5a18"},{id:1416,name:"\u793a\u5a01"},{id:1417,name:"\u4e16\u754c\u65e5\u62a5"},{id:1418,name:"\u4e16\u754c\u7ef4\u543e\u5c14\u5927\u4f1a"},{id:1419,name:"\u5e02\u59d4\u4f1a"},{id:1420,name:"\u662f\u9e21"},{id:1421,name:"\u624b\u673a\u590d\u5236"},{id:1422,name:"\u624b\u67aa"},{id:1423,name:"\u624b\u6deb"},{id:1424,name:"\u53d7\u8650\u72c2"},{id:1425,name:"\u552eID"},{id:1426,name:"\u552e\u53f7"},{id:1427,name:"\u552e\u8f6f\u4ef6"},{id:1428,name:"\u719f\u5973"},{id:1429,name:"\u53cc\u98de"},{id:1430,name:"\u53cc\u5cf0\u5fae\u98a4"},{id:1431,name:"\u53cc\u4e73"},{id:1432,name:"\u723d\u4f60"},{id:1433,name:"\u6c34\u5229\u90e8"},{id:1434,name:"\u6c34\u53bb\u8f66\u4ed1"},{id:1435,name:"\u7a0e\u52a1\u603b\u5c40"},{id:1436,name:"\u53f8\u6cd5\u90e8"},{id:1437,name:"\u79c1\u670d"},{id:1438,name:"\u79c1-\u670d"},{id:1439,name:"\u79c1\u2014\u670d"},{id:1440,name:"\u65af\u5927\u6797"},{id:1441,name:"\u6b7b\u5168\u5bb6"},{id:1442,name:"\u6b7b\u5211"},{id:1443,name:"\u56db\u5ddd\u72ec\u7acb"},{id:1444,name:"\u56db\u516d\u7ea7\u7b54\u6848"},{id:1445,name:"\u56db\u4eba\u5e2e"},{id:1446,name:"\u5b8b\u7231\u8363"},{id:1447,name:"\u5b8b\u695a\u745c"},{id:1448,name:"\u5b8b\u5927\u6db5"},{id:1449,name:"\u5b8b\u660e\u660c"},{id:1450,name:"\u5b8b\u79c0\u5ca9"},{id:1451,name:"\u5b8b\u7487\u6d9b"},{id:1452,name:"\u5b8b\u7956\u82f1"},{id:1453,name:"\u82cf\u6ce2"},{id:1454,name:"\u82cf\u5bb6\u5c6f"},{id:1455,name:"\u82cf\u6811\u6797"},{id:1456,name:"\u5b59\u6625\u5170"},{id:1457,name:"\u5b59\u6000\u5c71"},{id:1458,name:"\u5b59\u5efa\u56fd"},{id:1459,name:"\u5b59\u5973"},{id:1460,name:"\u5b59\u601d\u656c"},{id:1461,name:"\u5b59\u6587"},{id:1462,name:"\u5b59\u9038\u4ed9"},{id:1463,name:"\u5b59\u653f\u624d"},{id:1464,name:"\u5b59\u4e2d\u5c71"},{id:1465,name:"\u5b59\u5b50"},{id:1466,name:"\u4ed6\u7239"},{id:1467,name:"\u4ed6\u5e72"},{id:1468,name:"\u4ed6\u5988"},{id:1469,name:"\u4ed6\u5988\u7684"},{id:1470,name:"\u4ed6\u9a6c\u7684"},{id:1471,name:"\u4ed6\u6bcd\u4eb2"},{id:1472,name:"\u4ed6\u5a18"},{id:1473,name:"\u4ed6\u5a18\u7684"},{id:1474,name:"\u4ed6\u7956\u5b97"},{id:1475,name:"\u5b83\u5988\u7684"},{id:1476,name:"\u5979\u5988"},{id:1477,name:"\u5979\u5988\u7684\u91d1\u65e5\u6210"},{id:1478,name:"\u5979\u5a18"},{id:1479,name:"\u5854\u5229\u73ed"},{id:1480,name:"\u53f0\u529e"},{id:1481,name:"\u53f0\u72ec"},{id:1482,name:"\u53f0\u72ec\u5206\u5b50"},{id:1483,name:"\u53f0\u72ec\u4e07\u5c81"},{id:1484,name:"\u53f0\u8054"},{id:1485,name:"\u53f0\u6e7e"},{id:1486,name:"\u53f0\u6e7e\u515a"},{id:1487,name:"\u53f0\u6e7e\u5c9b\u56fd"},{id:1488,name:"\u53f0\u6e7e\u5e1d\u56fd"},{id:1489,name:"\u53f0\u6e7e\u72ec\u7acb"},{id:1490,name:"\u53f0\u6e7e\u5171\u4ea7\u515a"},{id:1491,name:"\u53f0\u6e7e\u5171\u548c\u56fd"},{id:1492,name:"\u53f0\u6e7e\u72d7"},{id:1493,name:"\u53f0\u6e7e\u56fd"},{id:1494,name:"\u53f0\u6e7e\u6c11\u56fd"},{id:1495,name:"\u53f0\u6e7e\u603b\u7edf"},{id:1496,name:"\u592a\u76d1"},{id:1497,name:"\u592a\u5b50\u515a"},{id:1498,name:"\u5510\u5bb6\u7487"},{id:1499,name:"\u6d9b\u54e5"},{id:1500,name:"\u6dd8\u5b9d"},{id:1501,name:"\u7279\u522b\u516c\u544a"},{id:1502,name:"\u7279\u7801"},{id:1503,name:"\u6ed5\u6587\u751f"},{id:1504,name:"\u4f53\u80b2\u603b\u5c40"},{id:1505,name:"\u5929\u5b89_"},{id:1506,name:"\u5929\u5b89\u95e8"},{id:1507,name:"\u5929\u5b89\u95e8\u6863\u6848"},{id:1508,name:"\u5929\u5b89\u95e8\u5f55\u50cf\u5e26"},{id:1509,name:"\u5929\u5b89\u95e8\u4e8b\u4ef6"},{id:1510,name:"\u5929\u5b89\u95e8\u5c60\u6740"},{id:1511,name:"\u5929\u5b89\u95e8\u4e00\u4ee3"},{id:1512,name:"\u5929\u9e45\u4e4b\u65c5"},{id:1513,name:"\u5929\u7687"},{id:1514,name:"\u5929\u7687\u965b\u4e0b"},{id:1515,name:"\u5929\u4e3b\u6559"},{id:1516,name:"\u7530\u7eaa\u4e91"},{id:1517,name:"\u7530\u4fee\u601d"},{id:1518,name:"\u7530\u4e2d"},{id:1519,name:"\u8214\u897f"},{id:1520,name:"\u8df3\u5927\u795e"},{id:1521,name:"\u94c1\u9053\u90e8"},{id:1522,name:"\u94c1\u51dd"},{id:1523,name:"\u7edf\u8ba1\u5c40"},{id:1524,name:"\u7edf\u6cbb"},{id:1525,name:"\u6295\u6bd2\u6740\u4eba"},{id:1526,name:"\u900f\u89c6\u8f6f\u4ef6"},{id:1527,name:"\u5c60\u6740"},{id:1528,name:"\u63a8\u7ffb"},{id:1529,name:"\u63a8\u6cb9"},{id:1530,name:"\u8131\u5149"},{id:1531,name:"\u8131\u8863\u670d"},{id:1532,name:"\u5916\u6302"},{id:1533,name:"\u5916-\u6302"},{id:1534,name:"\u5916\u2014\u6302"},{id:1535,name:"\u5916\u6c47\u5c40"},{id:1536,name:"\u5916\u4ea4\u90e8"},{id:1537,name:"\u5916\u4e13\u5c40"},{id:1538,name:"\u665a\u5e74\u5468\u6069\u6765"},{id:1539,name:"\u4e07\u7a0e"},{id:1540,name:"\u4e07\u5c81"},{id:1541,name:"\u4e07\u4ea6\u51e1"},{id:1542,name:"\u6c6a\u6d0b"},{id:1543,name:"\u6c6a\u6c38\u6e05"},{id:1544,name:"\u738b\u5b89\u987a"},{id:1545,name:"\u738b\u516b\u86cb"},{id:1546,name:"\u738b\u5b9d\u68ee"},{id:1547,name:"\u738b\u5bbe\u5b9c"},{id:1548,name:"\u738b\u6668"},{id:1549,name:"\u738b\u4e39"},{id:1550,name:"\u738b\u4e1c\u5cf0"},{id:1551,name:"\u738b\u4e1c\u660e"},{id:1552,name:"\u738b\u521a"},{id:1553,name:"\u738b\u51a0\u4e2d"},{id:1554,name:"\u738b\u5149\u4e9a"},{id:1555,name:"\u738b\u56fd\u751f"},{id:1556,name:"\u738b\u660a"},{id:1557,name:"\u738b\u548c\u6c11"},{id:1558,name:"\u738b\u6d2a\u6587"},{id:1559,name:"\u738b\u6d2a\u5c27"},{id:1560,name:"\u738b\u6caa\u5b81"},{id:1561,name:"\u738b\u534e\u5e86"},{id:1562,name:"\u738b\u6000\u81e3"},{id:1563,name:"\u738b\u4f1a\u751f"},{id:1564,name:"\u738b\u5bb6\u745e"},{id:1565,name:"\u738b\u5bb6\u80dc"},{id:1566,name:"\u738b\u5efa\u5e73"},{id:1567,name:"\u738b\u6559\u6210"},{id:1568,name:"\u738b\u541b"},{id:1569,name:"\u738b\u4e50\u6cc9"},{id:1570,name:"\u738b\u7acb\u82f1"},{id:1571,name:"\u738b\u73c9"},{id:1572,name:"\u738b\u5c90\u5c71"},{id:1573,name:"\u738b\u5112\u6797"},{id:1574,name:"\u738b\u745e\u6797"},{id:1575,name:"\u738b\u745e\u751f"},{id:1576,name:"\u738b\u4e09\u8fd0"},{id:1577,name:"\u738b\u68ee\u6cf0"},{id:1578,name:"\u738b\u80dc\u4fca"},{id:1579,name:"\u738b\u592a\u534e"},{id:1580,name:"\u738b\u4e07\u5bbe"},{id:1581,name:"\u738b\u4f1f"},{id:1582,name:"\u738b\u4f1f\u5149"},{id:1583,name:"\u738b\u709c"},{id:1584,name:"\u738b\u4fa0"},{id:1585,name:"\u738b\u5baa\u9b41"},{id:1586,name:"\u738b\u6653\u9f99"},{id:1587,name:"\u738b\u65b0\u5baa"},{id:1588,name:"\u738b\u5b66\u519b"},{id:1589,name:"\u738b\u5b9c\u6797"},{id:1590,name:"\u738b\u6bc5"},{id:1591,name:"\u738b\u52c7"},{id:1592,name:"\u738b\u7389\u666e"},{id:1593,name:"\u738b\u957f\u6cb3"},{id:1594,name:"\u738b\u5146\u56fd"},{id:1595,name:"\u738b\u9707"},{id:1596,name:"\u738b\u6b63\u4f1f"},{id:1597,name:"\u738b\u5fd7\u521a"},{id:1598,name:"\u738b\u5fe0\u6c11"},{id:1599,name:"\u738b\u4ef2\u7530"},{id:1600,name:"\u7f51\u7ba1"},{id:1601,name:"\u5a01\u800c\u94a2"},{id:1602,name:"\u5a01\u800c\u67d4"},{id:1603,name:"\u8fdd\u6cd5"},{id:1604,name:"\u4f1f\u54e5"},{id:1605,name:"\u4f2a\u9020"},{id:1606,name:"\u5c3e\u7533\u9cb8"},{id:1607,name:"\u536b\u751f\u90e8"},{id:1608,name:"\u5c09\u5065\u884c"},{id:1609,name:"\u9b4f\u51e4\u548c"},{id:1610,name:"\u9b4f\u4eae"},{id:1611,name:"\u6e29\u52a0\u5b9d"},{id:1612,name:"\u6e29\u5bb6\u5b9d"},{id:1613,name:"\u6e29\u5bb6\u4fdd"},{id:1614,name:"\u6e29\u99a8"},{id:1615,name:"\u6e29\u603b\u7406"},{id:1616,name:"\u761f\u5bb6\u5b9d"},{id:1617,name:"\u6587\u5316\u90e8"},{id:1618,name:"\u6587\u7269\u5c40"},{id:1619,name:"\u502d\u56fd"},{id:1620,name:"\u502d\u5bc7"},{id:1621,name:"\u6211_\u8001\u7238"},{id:1622,name:"\u6211\u64cd"},{id:1623,name:"\u6211\u64cd\u4f60"},{id:1624,name:"\u6211\u64cd\u4f60\u5988"},{id:1625,name:"\u6211\u5e72"},{id:1626,name:"\u6211\u5978"},{id:1627,name:"\u6211\u9760"},{id:1628,name:"\u6211\u54a7\u5e72"},{id:1629,name:"\u6211\u65e5"},{id:1630,name:"\u6211\u65e5\u4f60"},{id:1631,name:"\u6c83\u5c14\u5f00\u897f"},{id:1632,name:"\u65e0\u90a6\u56fd"},{id:1633,name:"\u65e0\u5e2e\u56fd"},{id:1634,name:"\u65e0\u5e2e\u8fc7"},{id:1635,name:"\u65e0\u754c\u6d4f\u89c8\u5668"},{id:1636,name:"\u65e0\u7801"},{id:1637,name:"\u65e0\u7801\u7247"},{id:1638,name:"\u5434\u7231\u82f1"},{id:1639,name:"\u5434\u90a6\u56fd"},{id:1640,name:"\u5434\u5e2e\u56fd"},{id:1641,name:"\u5434\u660c\u5fb7"},{id:1642,name:"\u5434\u521a"},{id:1643,name:"\u5434\u5b98\u6b63"},{id:1644,name:"\u5434\u6770\u660e"},{id:1645,name:"\u5434\u80dc\u5229"},{id:1646,name:"\u5434\u65b0\u96c4"},{id:1647,name:"\u5434\u4eea"},{id:1648,name:"\u5434\u7389\u826f"},{id:1649,name:"\u4e94\u661f\u7ea2\u65d7"},{id:1650,name:"\u5348\u591c"},{id:1651,name:"\u6b66\u6c49\u75c5\u6bd2"},{id:1652,name:"\u4fae\u8fb1"},{id:1653,name:"\u897f\u85cf"},{id:1654,name:"\u897f\u85cf3.14\u4e8b\u4ef6"},{id:1655,name:"\u897f\u85cf3.15\u4e8b\u4ef6"},{id:1656,name:"\u897f\u85cf3\xb714\u4e8b\u4ef6"},{id:1657,name:"\u897f\u85cf3\xb715\u4e8b\u4ef6"},{id:1658,name:"\u897f\u85cf3\u202214\u4e8b\u4ef6"},{id:1659,name:"\u897f\u85cf\u72ec\u7acb"},{id:1660,name:"\u897f\u85cf\u5206\u88c2"},{id:1661,name:"\u897f\u85cf\u56fd"},{id:1662,name:"\u897f\u85cf\u5929\u846c"},{id:1663,name:"\u897f\u54c8\u52aa\u514b"},{id:1664,name:"\u5438\u6bd2"},{id:1665,name:"\u5e0c\u62c9\u514b"},{id:1666,name:"\u5e0c\u7279\u52d2"},{id:1667,name:"\u5e0c\u671b\u4e4b\u58f0"},{id:1668,name:"\u4e60\u8fd1\u5e73"},{id:1669,name:"\u4e60\u8fdc\u5e73"},{id:1670,name:"\u88ad\u8fd1\u5e73"},{id:1671,name:"\u6d17\u8111\u73ed"},{id:1672,name:"\u7cfb\u7edf"},{id:1673,name:"\u7cfb\u7edf\u516c\u544a"},{id:1674,name:"\u7cfb\u7edf\u6d88\u606f"},{id:1675,name:"\u7cfb\u7edf\u8baf\u606f"},{id:1676,name:"\u4e0b\u4f53"},{id:1677,name:"\u4e0b\u6ce8"},{id:1678,name:"\u590f\u5b9d\u9f99"},{id:1679,name:"\u5148\u5978\u540e\u6740"},{id:1680,name:"\u9c9c\u65cf"},{id:1681,name:"\u4e61\u5df4\u4f6c"},{id:1682,name:"\u9999\u6e2f"},{id:1683,name:"\u9999\u6e2f\u6c11\u4e3b\u6d3e"},{id:1684,name:"\u60f3\u4e0a\u4f60"},{id:1685,name:"\u9879\u6000\u8bda"},{id:1686,name:"\u9879\u4fca\u6ce2"},{id:1687,name:"\u8096\u94a2"},{id:1688,name:"\u8096\u6377"},{id:1689,name:"\u8096\u4e9a\u5e86"},{id:1690,name:"\u5c0f\u53c2\u8003"},{id:1691,name:"\u5c0f\u9e21\u9e21"},{id:1692,name:"\u5c0f\u6cc9"},{id:1693,name:"\u5c0f\u6cc9\u7eaf\u4e00\u90ce"},{id:1694,name:"\u5c0f\u65e5\u672c"},{id:1695,name:"\u5c0f\u8089\u7c92"},{id:1696,name:"\u5c0f\u4e73\u5934"},{id:1697,name:"\u5c0f\u7a74"},{id:1698,name:"\u90aa\u6076"},{id:1699,name:"\u90aa\u6559"},{id:1700,name:"\u8c22\u4f0f\u77bb"},{id:1701,name:"\u8c22\u56fd\u660e"},{id:1702,name:"\u8c22\u676d\u751f"},{id:1703,name:"\u8f9b\u7ef4\u5149\u6c6a\u6c11"},{id:1704,name:"\u65b0\u515a"},{id:1705,name:"\u65b0\u51a0"},{id:1706,name:"\u65b0\u51a0\u75c5\u6bd2"},{id:1707,name:"\u65b0\u51a0\u80ba\u708e"},{id:1708,name:"\u65b0\u75867.5\u4e8b\u4ef6"},{id:1709,name:"\u65b0\u75867\xb75\u4e8b\u4ef6"},{id:1710,name:"\u65b0\u75867\u20225\u4e8b\u4ef6"},{id:1711,name:"\u65b0\u7586\u72ec\u7acb"},{id:1712,name:"\u65b0\u7586\u5206\u88c2"},{id:1713,name:"\u65b0\u7586\u56fd"},{id:1714,name:"\u5211\u6cd5"},{id:1715,name:"\u5174\u594b\u5242"},{id:1716,name:"\u6027_\u7ad9"},{id:1717,name:"\u6027\u7231"},{id:1718,name:"\u6027\u75c5"},{id:1719,name:"\u6027\u9ad8\u6f6e"},{id:1720,name:"\u6027\u4ea4"},{id:1721,name:"\u6027\u514d\u8d39\u7535\u5f71"},{id:1722,name:"\u6027\u8650"},{id:1723,name:"\u6027\u8650\u5f85"},{id:1724,name:"\u6027\u4e8b"},{id:1725,name:"\u6027\u7f51\u7ad9"},{id:1726,name:"\u6027\u65e0\u80fd"},{id:1727,name:"\u6027\u6b32"},{id:1728,name:"\u80f8\u90e8"},{id:1729,name:"\u718a\u7ef4\u5e73"},{id:1730,name:"\u5f90\u624d\u539a"},{id:1731,name:"\u5f90\u7c89\u6797"},{id:1732,name:"\u5f90\u5149\u6625"},{id:1733,name:"\u5f90\u656c\u4e1a"},{id:1734,name:"\u5f90\u5321\u8fea"},{id:1735,name:"\u5f90\u7ecd\u53f2"},{id:1736,name:"\u5f90\u5b88\u76db"},{id:1737,name:"\u5f90\u5411\u524d"},{id:1738,name:"\u8bb8\u8fbe\u54f2"},{id:1739,name:"\u8bb8\u5176\u4eae"},{id:1740,name:"\u8bb8\u8000\u5143"},{id:1741,name:"\u5b66\u6f6e"},{id:1742,name:"\u5b66\u8fd0"},{id:1743,name:"\u8840\u903c"},{id:1744,name:"\u8840\u8165\u56fe\u7247"},{id:1745,name:"\u538b\u8feb"},{id:1746,name:"\u9e26\u7247"},{id:1747,name:"\u9e26\u7247\u6db2"},{id:1748,name:"\u9e26\u7247\u6e23"},{id:1749,name:"\u96c5\u881b\u8776"},{id:1750,name:"\u4e9a\u5386\u5c71\u5927"},{id:1751,name:"\u70df\u8349\u5c40"},{id:1752,name:"\u4e25\u65b9\u519b"},{id:1753,name:"\u960e\u738b"},{id:1754,name:"\u989c\u5c04"},{id:1755,name:"\u9633\u7cbe"},{id:1756,name:"\u9633\u5177"},{id:1757,name:"\u9633\u840e"},{id:1758,name:"\u9633\u75ff"},{id:1759,name:"\u9633\u7269"},{id:1760,name:"\u6768\u4f20\u5802"},{id:1761,name:"\u6768\u680b\u6881"},{id:1762,name:"\u6768\u7115\u5b81"},{id:1763,name:"\u6768\u6d01\u7bea"},{id:1764,name:"\u6768\u91d1\u5c71"},{id:1765,name:"\u6768\u6676"},{id:1766,name:"\u6768\u7acb\u987a"},{id:1767,name:"\u6768\u660e\u751f"},{id:1768,name:"\u6768\u6653\u6e21"},{id:1769,name:"\u6768\u5fd7\u4eca"},{id:1770,name:"\u5996\u672f"},{id:1771,name:"\u59da\u6587\u5143"},{id:1772,name:"\u59da\u589e\u79d1"},{id:1773,name:"\u6447\u5934\u4e38"},{id:1774,name:"\u6447\u5934\u73a9"},{id:1775,name:"\u9065\u63a7\u70b8\u5f39"},{id:1776,name:"\u8036\u548c\u534e"},{id:1777,name:"\u8036\u82cf"},{id:1778,name:"\u8036\u7a23"},{id:1779,name:"\u7237\u7237"},{id:1780,name:"\u91ce\u9e21"},{id:1781,name:"\u53f6\u5251\u82f1"},{id:1782,name:"\u53f6\u9752\u7eaf"},{id:1783,name:"\u53f6\u5c0f\u6587"},{id:1784,name:"\u591c\u60c5"},{id:1785,name:"\u4e00\u8fb9\u4e00\u56fd"},{id:1786,name:"\u4e00\u515a\u4e13\u653f"},{id:1787,name:"\u4e00\u515a\u4e13\u5236"},{id:1788,name:"\u4e00\u8d2f\u9053"},{id:1789,name:"\u4e00\u56fd\u4e24\u5236"},{id:1790,name:"\u4e00\u591c\u60c5"},{id:1791,name:"\u4e00\u591c\u60c5\u8ff7\u5978"},{id:1792,name:"\u4e00\u4e2d\u4e00\u53f0"},{id:1793,name:"\u4f0a\u62c9\u514b"},{id:1794,name:"\u4f0a\u6717"},{id:1795,name:"\u4f0a\u65af\u5170"},{id:1796,name:"\u9057\u7cbe"},{id:1797,name:"\u4ee5\u830e\u81f3\u6d1e"},{id:1798,name:"\u6291\u5236\u5242"},{id:1799,name:"\u9634\u90e8"},{id:1800,name:"\u9634\u5507"},{id:1801,name:"\u9634\u9053"},{id:1802,name:"\u9634\u8482"},{id:1803,name:"\u9634\u6838"},{id:1804,name:"\u9634\u6237"},{id:1805,name:"\u9634\u830e"},{id:1806,name:"\u9634\u80eb"},{id:1807,name:"\u9634\u6bdb"},{id:1808,name:"\u9634\u6bdb\u5c0f\u7a74"},{id:1809,name:"\u9634\u95e8"},{id:1810,name:"\u9634\u56ca"},{id:1811,name:"\u9634\u6c34"},{id:1812,name:"\u9634\u5c0f\u6495\u5927"},{id:1813,name:"\u541f\u7a3b\u96c1"},{id:1814,name:"\u6deb_"},{id:1815,name:"\u6deb\u866b"},{id:1816,name:"\u6deb\u8361"},{id:1817,name:"\u6deb\u6d1e"},{id:1818,name:"\u6deb\u5987"},{id:1819,name:"\u6deb\u79fd"},{id:1820,name:"\u6deb\u8d27"},{id:1821,name:"\u6deb\u5978"},{id:1822,name:"\u6deb\u8d31"},{id:1823,name:"\u6deb\u53eb"},{id:1824,name:"\u6deb\u4e71"},{id:1825,name:"\u6deb\u6bdb"},{id:1826,name:"\u6deb\u9761"},{id:1827,name:"\u6deb\u6e7f"},{id:1828,name:"\u6deb\u6c34"},{id:1829,name:"\u6deb\u5a03"},{id:1830,name:"\u6deb\u897f"},{id:1831,name:"\u6deb\u7a74"},{id:1832,name:"\u6deb\u6db2"},{id:1833,name:"\u6deb\u8bed\u8fde\u8fde"},{id:1834,name:"\u6deb\u6b32"},{id:1835,name:"\u6deb\u6c41"},{id:1836,name:"\u5c39\u664b\u534e"},{id:1837,name:"\u5c39\u851a\u6c11"},{id:1838,name:"\u5f15\u7206"},{id:1839,name:"\u82f1\u96c4\u7eaa\u5ff5\u7891"},{id:1840,name:"\u7f42\u7c9f"},{id:1841,name:"\u786c\u633a"},{id:1842,name:"\u5c24\u6743"},{id:1843,name:"\u7531\u559c\u8d35"},{id:1844,name:"\u90ae\u653f\u5c40"},{id:1845,name:"\u6e38\u884c"},{id:1846,name:"\u6e38\u620f\u53d1\u5956\u5458"},{id:1847,name:"\u6e38\u620f\u5bab\u7406\u5458"},{id:1848,name:"\u6e38\u620f\u7ba1\u7406\u5458"},{id:1849,name:"\u5e7c\u5973"},{id:1850,name:"\u4e8e\u6625\u751f"},{id:1851,name:"\u4e8e\u5e7f\u6d32"},{id:1852,name:"\u4e8e\u5e7c\u519b"},{id:1853,name:"\u4f59\u6b23\u8363"},{id:1854,name:"\u4fde\u8d35\u9e9f"},{id:1855,name:"\u4fde\u6b63\u58f0"},{id:1856,name:"\u8206\u8bba\u94b3\u5236"},{id:1857,name:"\u7389\u6775"},{id:1858,name:"\u90c1\u6155\u660e"},{id:1859,name:"\u6b32\u706b\u711a\u8eab"},{id:1860,name:"\u8881\u7eaf\u6e05"},{id:1861,name:"\u8881\u8d35\u4ec1"},{id:1862,name:"\u8881\u5f66\u9e4f"},{id:1863,name:"\u539f\u5b50\u5f39"},{id:1864,name:"\u539f\u5b50\u80fd\u673a\u6784"},{id:1865,name:"\u63f4\u4ea4"},{id:1866,name:"\u63f4\u4ea4\u59b9"},{id:1867,name:"\u8fdc\u7a0b\u5077\u62cd"},{id:1868,name:"\u66f0\u4f60"},{id:1869,name:"\u6708\u7ecf"},{id:1870,name:"\u6708\u7ecf\u4e0d\u8c03"},{id:1871,name:"\u6742\u79cd"},{id:1872,name:"\u518d\u5978"},{id:1873,name:"\u81e7\u732e\u752b"},{id:1874,name:"\u65e9\u6cc4"},{id:1875,name:"\u9020\u53cd"},{id:1876,name:"\u8d3c\u6c11"},{id:1877,name:"\u624e\u5361\u7ef4"},{id:1878,name:"\u624e\u5361\u7ef4\u662f\u82f1\u96c4"},{id:1879,name:"\u6e23\u6ce2\u6ce2"},{id:1880,name:"\u70b8\u836f"},{id:1881,name:"\u6218\u724c"},{id:1882,name:"\u5f20\u5b9d\u987a"},{id:1883,name:"\u5f20\u4f2f\u7b20"},{id:1884,name:"\u5f20\u535a\u96c5"},{id:1885,name:"\u5f20\u660c\u5e73"},{id:1886,name:"\u5f20\u671d\u9633"},{id:1887,name:"\u5f20\u6f6e\u9633"},{id:1888,name:"\u5f20\u6625\u6865"},{id:1889,name:"\u5f20\u6625\u8d24"},{id:1890,name:"\u5f20\u5fb7\u6c5f"},{id:1891,name:"\u5f20\u521a"},{id:1892,name:"\u5f20\u9ad8\u4e3d"},{id:1893,name:"\u5f20\u56fd\u6e05"},{id:1894,name:"\u5f20\u6d77\u9633"},{id:1895,name:"\u5f20\u7eaa\u5357"},{id:1896,name:"\u5f20\u5efa"},{id:1897,name:"\u5f20\u519b"},{id:1898,name:"\u5f20\u78ca"},{id:1899,name:"\u5f20\u529b"},{id:1900,name:"\u5f20\u7acb\u660c"},{id:1901,name:"\u5f20\u7acb\u519b"},{id:1902,name:"\u5f20\u6797"},{id:1903,name:"\u5f20\u8305"},{id:1904,name:"\u5f20\u6e05\u82b3"},{id:1905,name:"\u5f20\u5e86\u9ece"},{id:1906,name:"\u5f20\u5e86\u4f1f"},{id:1907,name:"\u5f20\u4ed5\u6ce2"},{id:1908,name:"\u5f20\u4e07\u5e74"},{id:1909,name:"\u5f20\u4f1f\u56fd"},{id:1910,name:"\u5f20\u5c0f\u5e73"},{id:1911,name:"\u5f20\u6653\u521a"},{id:1912,name:"\u5f20\u6653\u5170"},{id:1913,name:"\u5f20\u9633"},{id:1914,name:"\u5f20\u88d4\u70af"},{id:1915,name:"\u5f20\u6bc5"},{id:1916,name:"\u5f20\u52c7"},{id:1917,name:"\u5f20\u53c8\u4fa0"},{id:1918,name:"\u5f20\u5fd7\u519b"},{id:1919,name:"\u62db\u5993"},{id:1920,name:"\u53ec\u5993"},{id:1921,name:"\u8d75\u6d2a\u795d"},{id:1922,name:"\u8d75\u514b\u77f3"},{id:1923,name:"\u8d75\u514b\u5fd7"},{id:1924,name:"\u8d75\u4e50\u9645"},{id:1925,name:"\u8d75\u5b9e"},{id:1926,name:"\u8d75\u6b63\u6c38"},{id:1927,name:"\u8d75\u7d2b\u9633"},{id:1928,name:"\u8d75\u5b97\u5c90"},{id:1929,name:"\u4fa6\u63a2\u8bbe\u5907"},{id:1930,name:"\u771f\u7406\u6559"},{id:1931,name:"\u771f\u5584\u5fcd"},{id:1932,name:"\u771f\u4e3b\u5b89\u62c9"},{id:1933,name:"\u9547\u538b"},{id:1934,name:"\u6b63\u89c1\u7f51"},{id:1935,name:"\u6b63\u6e05\u7f51"},{id:1936,name:"\u6b63\u609f\u7f51"},{id:1937,name:"\u8bc1\u76d1\u4f1a"},{id:1938,name:"\u8bc1\u4ef6"},{id:1939,name:"\u90d1\u56fd\u5149"},{id:1940,name:"\u90d1\u536b\u5e73"},{id:1941,name:"\u90d1\u4e49"},{id:1942,name:"\u653f\u53d8"},{id:1943,name:"\u653f\u5e9c"},{id:1944,name:"\u653f\u5e9c\u65e0\u80fd"},{id:1945,name:"\u653f\u534f"},{id:1946,name:"\u653f\u6cbb"},{id:1947,name:"\u653f\u6cbb\u53cd\u5bf9\u6d3e"},{id:1948,name:"\u653f\u6cbb\u72af"},{id:1949,name:"\u653f\u6cbb\u5c40"},{id:1950,name:"\u652f\u90a3"},{id:1951,name:"\u652f\u6811\u5e73"},{id:1952,name:"\u503c\u52e4"},{id:1953,name:"\u503c\u52e4\u8d26\u53f7"},{id:1954,name:"\u6307\u5bfc\u5458"},{id:1955,name:"\u8d28\u68c0\u5c40"},{id:1956,name:"\u6cbb\u5b89"},{id:1957,name:"\u81f4\u5e7b\u5242"},{id:1958,name:"\u4e2d\u5171"},{id:1959,name:"\u4e2d\u5171\u4e2d\u592e"},{id:1960,name:"\u4e2d\u56fd"},{id:1961,name:"\u4e2d\u56fd\u75c5\u6bd2"},{id:1962,name:"\u4e2d\u56fd\u5171\u4ea7\u515a"},{id:1963,name:"\u4e2d\u56fd\u6050\u6016\u7ec4\u7ec7"},{id:1964,name:"\u4e2d\u56fd\u4e4b\u6625"},{id:1965,name:"\u4e2d\u56fd\u732a"},{id:1966,name:"\u4e2d\u534e\u5927\u5730"},{id:1967,name:"\u4e2d\u534e\u5927\u4f17"},{id:1968,name:"\u4e2d\u534e\u6c11\u56fd"},{id:1969,name:"\u4e2d\u534e\u5168\u56fd\u603b\u5de5\u4f1a"},{id:1970,name:"\u4e2d\u534e\u4eba\u6c11\u5171\u548c\u56fd"},{id:1971,name:"\u4e2d\u534e\u4eba\u6c11\u5b9e\u8bdd\u5b9e\u8bf4"},{id:1972,name:"\u4e2d\u534e\u4eba\u6c11\u6b63\u90aa"},{id:1973,name:"\u4e2d\u534e\u65f6\u4e8b"},{id:1974,name:"\u4e2d\u534e\u517b\u751f\u76ca\u667a\u529f"},{id:1975,name:"\u4e2d\u534e\u771f\u5b9e\u62a5\u9053"},{id:1976,name:"\u4e2d\u79d1\u9662"},{id:1977,name:"\u4e2d\u5357\u6d77"},{id:1978,name:"\u4e2d\u5ba3\u90e8"},{id:1979,name:"\u4e2d\u592e"},{id:1980,name:"\u4e2d\u592e\u7535\u89c6\u53f0"},{id:1981,name:"\u4e2d\u592e\u519b\u4e8b\u59d4\u5458\u4f1a"},{id:1982,name:"\u4e2d\u592e\u59d4\u5458"},{id:1983,name:"\u4e2d\u592e\u653f\u6cbb\u5c40"},{id:1984,name:"\u4e2d\u533b\u836f\u5c40"},{id:1985,name:"\u949f\u5c71\u98ce\u96e8\u8bba\u575b"},{id:1986,name:"\u5468\u672c\u987a"},{id:1987,name:"\u5468\u6069\u6765"},{id:1988,name:"\u5468\u798f\u542f"},{id:1989,name:"\u5468\u6d4e"},{id:1990,name:"\u5468\u5065\u5eb7"},{id:1991,name:"\u5468\u5f3a"},{id:1992,name:"\u5468\u751f\u8d24"},{id:1993,name:"\u5468\u5b88\u8bad"},{id:1994,name:"\u5468\u5c0f\u5eb7"},{id:1995,name:"\u5468\u82f1"},{id:1996,name:"\u5468\u6c38\u5eb7"},{id:1997,name:"\u5468\u6cfd\u6c11"},{id:1998,name:"\u5468\u603b\u7406"},{id:1999,name:"\u7ca5\u5065\u5eb7"},{id:2e3,name:"\u7ca5\u6c38\u5eb7"},{id:2001,name:"\u8f74\u6c38\u5eb7"},{id:2002,name:"\u8098\u6c38\u5eb7"},{id:2003,name:"\u6731_\u57fa"},{id:2004,name:"\u6731F\u57fa"},{id:2005,name:"\u6731\u5fb7"},{id:2006,name:"\u6731\u51e4\u829d"},{id:2007,name:"\u6731\u798f\u7199"},{id:2008,name:"\u6731\u7acb\u4f26"},{id:2009,name:"\u6731\u5bb9\u9e21"},{id:2010,name:"\u6731\u5bb9\u57fa"},{id:2011,name:"\u6731\u6eb6\u5242"},{id:2012,name:"\u6731\u7194\u57fa"},{id:2013,name:"\u6731\u5c0f\u4e39"},{id:2014,name:"\u6731\u603b\u7406"},{id:2015,name:"\u732a\u64cd"},{id:2016,name:"\u732a\u7321"},{id:2017,name:"\u732a\u5bb9\u57fa"},{id:2018,name:"\u4e3b\u653b\u6307\u6325\u5b98"},{id:2019,name:"\u4e3b\u5e2d"},{id:2020,name:"\u4e3b\u4e49"},{id:2021,name:"\u52a9\u624b\u5a01\u5c14\u7279"},{id:2022,name:"\u4e13\u653f"},{id:2023,name:"\u4e13\u5236"},{id:2024,name:"\u8f6c\u6cd5\u8f6e"},{id:2025,name:"\u88c5_"},{id:2026,name:"\u88c5B"},{id:2027,name:"\u88c5\u903c"},{id:2028,name:"\u8ffd\u67e5\u56fd\u9645"},{id:2029,name:"\u5b50\u5f39"},{id:2030,name:"\u5b50\u5973\u4efb\u804c\u540d\u5355"},{id:2031,name:"\u81ea\u711a"},{id:2032,name:"\u81ea\u6740"},{id:2033,name:"\u81ea\u6740\u624b\u518c"},{id:2034,name:"\u81ea\u6740\u6307\u5357"},{id:2035,name:"\u81ea\u7531\u4e9a\u6d32\u7535\u53f0"},{id:2036,name:"\u81ea\u7531\u4e4b\u95e8"},{id:2037,name:"\u81ea\u5236\u624b\u67aa"},{id:2038,name:"\u81ea\u6cbb\u673a\u5173"},{id:2039,name:"\u5b97\u6559"},{id:2040,name:"\u603b\u5c40"},{id:2041,name:"\u603b\u7406"},{id:2042,name:"\u603b\u4e66\u8bb0"},{id:2043,name:"\u90b9\u5bb6\u534e"},{id:2044,name:"\u8d70\u79c1"},{id:2045,name:"\u8d70\u5411\u5706\u6ee1"},{id:2046,name:"\u7956\u7236"},{id:2047,name:"\u7956\u6bcd"},{id:2048,name:"\u7956\u5b97"},{id:2049,name:"\u961d\u6708"},{id:2050,name:"\u4f5c\u7231"},{id:2051,name:"\u5750\u53f0\u7684"},{id:2052,name:"\u5750\u5e84"},{id:2053,name:"\u505a\u7231"}],cc._RF.pop()},{}],Json_Medal:[function(e,t){"use strict";cc._RF.push(t,"bcd82NmNkVOPa+/R2Zi+DLi","Json_Medal"),e("Aft").JsonData.Medal=[{id:1,icon:"springGift_Medal_Icon1",name:"20138",point:5},{id:2,icon:"springGift_Medal_Icon2",name:"20139",point:15},{id:3,icon:"springGift_Medal_Icon3",name:"20140",point:25}],cc._RF.pop()},{}],Json_Nature:[function(e,t){"use strict";cc._RF.push(t,"6b085/udx1AhoF2abPMOK/7","Json_Nature"),e("Aft").JsonData.Nature=[{id:1,name:"1013",power:1,desc:"1128",icon:"tower/Tower_Icon_Attribute"},{id:2,name:"1014",power:1,desc:"1128",icon:"tower/Tower_Icon_Attribute"},{id:3,name:"1015",power:1,desc:"1128",icon:"tower/Tower_Icon_Attribute"},{id:4,name:"1016",power:1,desc:"1128",icon:"tower/Tower_Icon_Attribute"},{id:5,name:"1017",power:1,desc:"1128",icon:"tower/Tower_Icon_Attribute"},{id:6,name:"1018",power:1,desc:"1128",icon:"tower/Tower_Icon_Attribute"},{id:7,name:"1019",power:1,desc:"1128",icon:"tower/Tower_Icon_Attribute"},{id:8,name:"1020",power:1,desc:"1128",icon:"tower/Tower_Icon_Attribute"},{id:9,name:"1021",power:1,desc:"1128",icon:"tower/Tower_Icon_Attribute"},{id:10,name:"1022",power:1,desc:"1128",icon:"tower/Tower_Icon_Attribute"},{id:11,name:"1023",power:1,desc:"1128",icon:"tower/Tower_Icon_Attribute"},{id:12,name:"1024",power:1,desc:"1128",icon:"tower/Tower_Icon_Attribute"},{id:13,name:"1025",power:1,desc:"1128",icon:"tower/Tower_Icon_Attribute"},{id:14,name:"1026",power:1,desc:"1128",icon:"tower/Tower_Icon_Attribute"},{id:15,name:"1027",power:1,desc:"1128",icon:"tower/Tower_Icon_Attribute"},{id:16,name:"1026",power:1,desc:"1128",icon:"tower/Tower_Icon_Attribute"},{id:17,name:"1027",power:1,desc:"1128",icon:"tower/Tower_Icon_Attribute"},{id:18,name:"1026",power:1,desc:"1128",icon:"tower/Tower_Icon_Attribute"},{id:19,name:"1027",power:1,desc:"1128",icon:"tower/Tower_Icon_Attribute"},{id:20,name:"1026",power:1,desc:"1128",icon:"tower/Tower_Icon_Attribute"},{id:21,name:"20145",power:1,desc:"1128",icon:"tower/Tower_Icon_Attribute"},{id:22,name:"1024",power:1,desc:"1128",icon:"tower/Tower_Icon_Attribute"},{id:23,name:"1023",power:1,desc:"1128",icon:"tower/Tower_Icon_Attribute"},{id:24,name:"1022",power:1,desc:"1128",icon:"tower/Tower_Icon_Attribute"},{id:25,name:"1021",power:1,desc:"1128",icon:"tower/Tower_Icon_Attribute"},{id:26,name:"1020",power:1,desc:"1128",icon:"tower/Tower_Icon_Attribute"},{id:27,name:"1019",power:1,desc:"1128",icon:"tower/Tower_Icon_Attribute"},{id:28,name:"1018",power:1,desc:"1128",icon:"tower/Tower_Icon_Attribute"},{id:29,name:"1017",power:1,desc:"1128",icon:"tower/Tower_Icon_Attribute"},{id:30,name:"1016",power:1,desc:"1128",icon:"tower/Tower_Icon_Attribute"},{id:31,name:"1015",power:1,desc:"1128",icon:"tower/Tower_Icon_Attribute"}],cc._RF.pop()},{}],Json_PushText:[function(e,t){"use strict";cc._RF.push(t,"3c4608wXgFLir8F+hCRPJDc","Json_PushText"),e("Aft").JsonData.PushText=[{id:1,text:"3120",fieldName:"OFFINE_EARNINGS",tip:"\u4f60\u7684\u6302\u673a\u6536\u76ca\u5df2\u6ee1\uff0c\u5feb\u53bb\u9886\u53d6{0}\u94dc\u5e01\u3001{1}\u82f1\u96c4\u7ecf\u9a8c\uff01",goPage:1},{id:2,text:"3121",fieldName:"FIXED_REMIND",tip:"\u4f60\u7684\u82f1\u96c4\u5df2\u7ecf\u6574\u88c5\u5f85\u53d1\uff0c\u7b49\u5f85\u4f60\u7684\u4e00\u58f0\u4ee4\u4e0b\uff01",goPage:1},{id:3,text:"3122",fieldName:"BOX_REMIND",tip:"\u4f60\u67091\u4e2a\u514d\u8d39\u81f3\u5c0a\u5b9d\u7bb1\u53ef\u4f7f\u7528\uff01",goPage:1},{id:4,text:"3123",fieldName:"LOTTERY_TIMES",tip:"\u4f60\u4eca\u65e5\u8fd8\u6709{0}\u6b21\u514d\u8d39\u9886\u53d6\u8d44\u6e90\u7684\u673a\u4f1a\u54e6\uff01\u522b\u6d6a\u8d39\u6389\u5566\uff01",goPage:1},{id:5,text:"3124",fieldName:"OFFINE_EARNINGS_TEN",tip:"\u4f60\u7684\u6302\u673a\u6536\u76ca\u589e\u52a0\u4e86\uff0c\u5feb\u53bb\u9886\u53d6{0}\u94dc\u5e01\u3001{1}\u82f1\u96c4\u7ecf\u9a8c\uff01",goPage:1},{id:6,text:"3125",fieldName:"VIP_REMIND",tip:"\u5b8c\u6210\u4eca\u65e5VIP\u4efb\u52a1\uff0c\u5373\u53ef\u5347\u7ea7\u5230VIP{0}\uff0c\u62e5\u6709\u66f4\u591a\u7279\u6743\uff01",goPage:1},{id:7,text:"3126",fieldName:"NEW_YEAR_REMIND",tip:"\u8fdb\u519b\u56e2\uff0c\u6253\u5e74\u517d\uff0c\u9886\u82f1\u96c4\uff01\u4f60\u4eca\u65e5\u7684\u6625\u8282\u5927\u793c\u5305\u8fd8\u672a\u9886\u53d6\u54e6\uff01",goPage:1}],cc._RF.pop()},{}],Json_Route:[function(e,t){"use strict";cc._RF.push(t,"f2ce7/fc2JFs6K39pculvIu","Json_Route"),e("Aft").JsonData.Route=[{id:1,routeGroup:[1,2,3]},{id:2,routeGroup:[4,5,6]},{id:3,routeGroup:[7,8,9]},{id:4,routeGroup:[10,11,12]},{id:5,routeGroup:[13,14,15]},{id:101,routeGroup:[101,102,103]},{id:102,routeGroup:[107,108,109]},{id:103,routeGroup:[104,105,106]},{id:104,routeGroup:[110,111,112]}],cc._RF.pop()},{}],Json_Share:[function(e,t){"use strict";cc._RF.push(t,"bc3acWaEwRBbLNR6+bUGQwi","Json_Share"),e("Aft").JsonData.Share=[{id:1,failureRate:1e4,failDesc:["1992"],maxFailTimes:0},{id:2,failureRate:5e3,failDesc:["1992"],maxFailTimes:1},{id:3,failureRate:5e3,failDesc:["1992","1993"],maxFailTimes:1},{id:4,failureRate:5e3,failDesc:["1992","1993"],maxFailTimes:2},{id:5,failureRate:5e3,failDesc:["1992","1993"],maxFailTimes:2},{id:6,failureRate:5e3,failDesc:["1992","1993","1994"],maxFailTimes:2},{id:7,failureRate:4e3,failDesc:["1992","1993","1994"],maxFailTimes:3},{id:8,failureRate:3e3,failDesc:["1992","1993","1994"],maxFailTimes:3},{id:9,failureRate:2e3,failDesc:["1992","1993","1994"],maxFailTimes:3},{id:10,failureRate:1e3,failDesc:["1992","1993","1994"],maxFailTimes:3},{id:11,failureRate:0,failDesc:["1992","1993","1994"],maxFailTimes:3},{id:12,failureRate:0,failDesc:["1992","1993","1994"],maxFailTimes:3},{id:13,failureRate:0,failDesc:["1992","1993","1994"],maxFailTimes:3},{id:14,failureRate:0,failDesc:["1992","1993","1994"],maxFailTimes:3},{id:15,failureRate:0,failDesc:["1992","1993","1994"],maxFailTimes:4},{id:16,failureRate:0,failDesc:["1992","1993","1994"],maxFailTimes:4},{id:17,failureRate:0,failDesc:["1992","1993","1994"],maxFailTimes:4},{id:18,failureRate:0,failDesc:["1992","1993","1994"],maxFailTimes:4},{id:19,failureRate:0,failDesc:["1992","1993","1994"],maxFailTimes:4},{id:20,failureRate:0,failDesc:["1992","1993","1994"],maxFailTimes:4}],cc._RF.pop()},{}],Json_SignIn:[function(e,t){"use strict";cc._RF.push(t,"2a4f04PXalPUbRFGFOitpZ4","Json_SignIn"),e("Aft").JsonData.SignIn=[{id:1,groupID:1,day:1,rewardID:1001,num:80,desc:"1029"},{id:2,groupID:1,day:2,rewardID:3008,num:4,desc:"1029"},{id:3,groupID:1,day:3,rewardID:1001,num:120,desc:"1029"},{id:4,groupID:1,day:4,rewardID:1001,num:140,desc:"1029"},{id:5,groupID:1,day:5,rewardID:1001,num:160,desc:"1029"},{id:6,groupID:1,day:6,rewardID:1001,num:180,desc:"1029"},{id:7,groupID:1,day:7,rewardID:3006,num:8,desc:"1029"},{id:8,groupID:2,day:1,rewardID:1001,num:80,desc:"1029"},{id:9,groupID:2,day:2,rewardID:1001,num:100,desc:"1029"},{id:10,groupID:2,day:3,rewardID:1001,num:120,desc:"1029"},{id:11,groupID:2,day:4,rewardID:1001,num:140,desc:"1029"},{id:12,groupID:2,day:5,rewardID:1001,num:160,desc:"1029"},{id:13,groupID:2,day:6,rewardID:1001,num:180,desc:"1029"},{id:14,groupID:2,day:7,rewardID:1001,num:240,desc:"1029"}],cc._RF.pop()},{}],Json_SkillCard:[function(e,t){"use strict";cc._RF.push(t,"93e800xxvhL1L+kD9u7nO+O","Json_SkillCard"),e("Aft").JsonData.SkillCard=[{id:4001,skillId:101,icon:"Skill_Piece6",itemBg:"Skill_Bg",name:"3401",desc:"3501",pointNumber:1},{id:4002,skillId:102,icon:"Skill_Piece5",itemBg:"Skill_Bg",name:"3404",desc:"3504",pointNumber:2},{id:4003,skillId:103,icon:"Skill_Piece2",itemBg:"Skill_Bg",name:"3403",desc:"3503",pointNumber:3},{id:4004,skillId:104,icon:"Skill_Piece4",itemBg:"Skill_Bg",name:"3402",desc:"3502",pointNumber:4},{id:4005,skillId:105,icon:"Skill_Piece1",itemBg:"Skill_Bg",name:"3405",desc:"3505",pointNumber:5},{id:4006,skillId:106,icon:"Skill_Piece3",itemBg:"Skill_Bg",name:"3406",desc:"3506",pointNumber:6},{id:4007,skillId:107,icon:"Skill_Piece8",itemBg:"Skill_Bg",name:"3407",desc:"3507",pointNumber:7},{id:4008,skillId:108,icon:"Skill_Piece7",itemBg:"Skill_Bg",name:"3408",desc:"3508",pointNumber:8}],cc._RF.pop()},{}],Json_Soldier:[function(e,t){"use strict";cc._RF.push(t,"35468WXA2VIHodSq3m079hK","Json_Soldier"),e("Aft").JsonData.Soldier=[{id:41001,arms:1,isEnlarge:1,meleeDamageRate:1e4,remoteDamageRate:1e4,isImmune:0,isIntercept:1,isAttacked:1,isFollow:0,baseDirection:2,appearance:"tower3_1_soldier",scaling:3600,hpBarHeight:60,shadowScaling:3200,atkDistance:35,headShotPoint:45,counterattackRange:300,shortAttackRange:90,attackCD:1500,detectionTargetCD:8e3,moveOnce:1,speed:25,hp:100,physicalAttack:10,magicAttack:0,physicalDefense:0,magicDefense:0,critRate:500,dodgeRate:1e3,restoreHp:500,resurrectionCondition:[0,1e6],name:"1545",attackAudio:"tower_meleehero_sword",deadAudio:"tower_man_died",isPremultipliedAlpha:0,isChangePremultipliedAlpha:0,ResurrectionEffectShift:0},{id:41002,arms:1,isEnlarge:1,meleeDamageRate:1e4,remoteDamageRate:1e4,isImmune:0,isIntercept:1,isAttacked:1,isFollow:0,baseDirection:2,appearance:"tower3_2_soldier",scaling:3600,hpBarHeight:60,shadowScaling:3200,atkDistance:35,headShotPoint:45,counterattackRange:300,shortAttackRange:100,attackCD:1500,detectionTargetCD:8e3,moveOnce:1,speed:25,hp:200,physicalAttack:18,magicAttack:0,physicalDefense:15,magicDefense:15,critRate:500,dodgeRate:1e3,restoreHp:500,resurrectionCondition:[0,1e6],name:"1546",attackAudio:"tower_meleehero_sword",deadAudio:"tower_man_died",isPremultipliedAlpha:0,isChangePremultipliedAlpha:0,ResurrectionEffectShift:0},{id:41003,arms:1,isEnlarge:1,meleeDamageRate:1e4,remoteDamageRate:1e4,isImmune:0,isIntercept:1,isAttacked:1,isFollow:0,baseDirection:2,appearance:"tower3_3_soldier",scaling:3600,hpBarHeight:60,shadowScaling:3200,atkDistance:35,headShotPoint:45,counterattackRange:300,shortAttackRange:110,attackCD:1500,detectionTargetCD:8e3,moveOnce:1,speed:25,hp:300,physicalAttack:40,magicAttack:0,physicalDefense:30,magicDefense:30,critRate:500,dodgeRate:1e3,restoreHp:500,resurrectionCondition:[0,1e6],name:"1547",attackAudio:"tower_meleehero_sword",deadAudio:"tower_man_died",isPremultipliedAlpha:0,isChangePremultipliedAlpha:0,ResurrectionEffectShift:0},{id:41004,arms:1,isEnlarge:1,meleeDamageRate:1e4,remoteDamageRate:1e4,isImmune:0,isIntercept:0,isAttacked:0,isFollow:1,baseDirection:2,appearance:"hero4_pet",scaling:3600,hpBarHeight:60,shadowScaling:3200,atkDistance:35,headShotPoint:45,counterattackRange:300,shortAttackRange:300,attackCD:600,detectionTargetCD:8e3,moveOnce:1,speed:50,hp:200,physicalAttack:40,magicAttack:0,physicalDefense:40,magicDefense:0,critRate:500,dodgeRate:1e3,restoreHp:500,resurrectionCondition:[0,1e6],name:"1547",attackAudio:"tower_meleehero_sword",deadAudio:"tower_man_died",isPremultipliedAlpha:0,isChangePremultipliedAlpha:0,ResurrectionEffectShift:0},{id:43001,arms:1,isEnlarge:1,meleeDamageRate:1e4,remoteDamageRate:1e4,isImmune:1,isIntercept:1,isAttacked:1,isFollow:0,baseDirection:2,heroInTowerType:[3],appearance:"hero1",intoAppearance:"hero_tower2",scaling:3600,hpBarHeight:80,shadowScaling:4800,atkDistance:60,headShotPoint:60,counterattackRange:300,shortAttackRange:120,attackCD:1500,detectionTargetCD:8e3,moveOnce:1,speed:35,hp:350,physicalAttack:50,magicAttack:0,physicalDefense:30,magicDefense:30,critRate:1e3,dodgeRate:0,restoreHp:500,name:"2001",icon:"battle/Head_Icon1",groupID:1,heroSkill:[13,14,15],attackAudio:"tower_battle_knife_light",deadAudio:"hero_male_attacked",isPremultipliedAlpha:1,isChangePremultipliedAlpha:0,ResurrectionEffectShift:0,groupId:1,basePower:130},{id:43002,arms:1,isEnlarge:1,meleeDamageRate:1e4,remoteDamageRate:1e4,isImmune:1,isIntercept:1,isAttacked:1,isFollow:0,baseDirection:2,heroInTowerType:[2],appearance:"hero2",scaling:3600,hpBarHeight:80,shadowScaling:4800,atkDistance:60,headShotPoint:60,counterattackRange:300,shortAttackRange:120,attackCD:1500,detectionTargetCD:8e3,moveOnce:1,speed:35,hp:500,physicalAttack:25,magicAttack:0,physicalDefense:50,magicDefense:50,critRate:1e3,dodgeRate:0,restoreHp:500,name:"2002",icon:"battle/Head_Icon2",groupID:2,heroSkill:[16,17,18],attackAudio:"tower_hero_attack",deadAudio:"hero_male_attacked",isPremultipliedAlpha:1,isChangePremultipliedAlpha:1,towerId:20,ResurrectionEffectShift:0,groupId:1,basePower:130},{id:43003,arms:1,isEnlarge:1,meleeDamageRate:1e4,remoteDamageRate:1e4,isImmune:1,isIntercept:1,isAttacked:1,isFollow:0,baseDirection:2,heroInTowerType:[3],appearance:"hero3",intoAppearance:"hero_tower1",scaling:3600,hpBarHeight:80,shadowScaling:4800,atkDistance:60,headShotPoint:60,counterattackRange:300,shortAttackRange:120,attackCD:1500,detectionTargetCD:8e3,moveOnce:1,speed:35,hp:400,physicalAttack:38,magicAttack:0,physicalDefense:40,magicDefense:40,critRate:1e3,dodgeRate:0,restoreHp:500,name:"2003",icon:"battle/Head_Icon3",groupID:3,heroSkill:[19,20,21],attackAudio:"tower_meleehero_sword",deadAudio:"hero_male_attacked",isPremultipliedAlpha:1,isChangePremultipliedAlpha:0,ResurrectionEffectShift:0,groupId:1,basePower:130},{id:43004,arms:2,isEnlarge:1,meleeDamageRate:5e3,remoteDamageRate:5e3,isImmune:1,isIntercept:1,isAttacked:1,isFollow:0,baseDirection:4,heroInTowerType:[1],appearance:"hero7",intoAppearance:"hero_tower7",scaling:3600,hpBarHeight:80,shadowScaling:4800,atkDistance:60,headShotPoint:60,longAttackRange:200,counterattackRange:300,shortAttackRange:60,attackCD:1200,detectionTargetCD:8e3,moveOnce:1,speed:35,hp:270,physicalAttack:70,magicAttack:0,physicalDefense:25,magicDefense:25,critRate:1e3,dodgeRate:0,restoreHp:500,name:"2009",icon:"battle/Head_Icon8",groupID:2,heroSkill:[22,23,24],attackAudio:"tower_hero_attack",deadAudio:"hero_female_died",bulletPoint:[[0,50],[0,50],[-25,35],[25,35]],bulletId:38,isPremultipliedAlpha:1,isChangePremultipliedAlpha:1,ResurrectionEffectShift:0,groupId:1,basePower:130},{id:43005,arms:2,isEnlarge:1,meleeDamageRate:5e3,remoteDamageRate:1e4,isImmune:1,isIntercept:1,isAttacked:1,isFollow:0,baseDirection:4,heroInTowerType:[1],appearance:"hero5",intoAppearance:"hero_tower3",scaling:3600,hpBarHeight:80,shadowScaling:4800,atkDistance:60,headShotPoint:60,longAttackRange:200,counterattackRange:300,shortAttackRange:60,attackCD:1200,detectionTargetCD:8e3,moveOnce:1,speed:35,hp:250,physicalAttack:80,magicAttack:0,physicalDefense:20,magicDefense:20,critRate:1e3,dodgeRate:0,restoreHp:500,name:"2005",icon:"battle/Head_Icon4",groupID:2,heroSkill:[25,26,27],attackAudio:"tower_hero_attack",deadAudio:"hero_male_attacked",bulletPoint:[[0,50],[0,50],[-25,35],[25,35]],bulletId:35,isPremultipliedAlpha:1,isChangePremultipliedAlpha:1,ResurrectionEffectShift:0,groupId:1,basePower:130},{id:43006,arms:2,isEnlarge:1,meleeDamageRate:1e4,remoteDamageRate:1e4,isImmune:1,isIntercept:1,isAttacked:1,isFollow:0,baseDirection:4,heroInTowerType:[2],appearance:"hero8",scaling:3600,hpBarHeight:80,shadowScaling:4800,atkDistance:60,headShotPoint:60,longAttackRange:200,counterattackRange:300,shortAttackRange:60,attackCD:1500,detectionTargetCD:8e3,moveOnce:1,speed:35,hp:300,physicalAttack:50,magicAttack:0,physicalDefense:40,magicDefense:40,critRate:1e3,dodgeRate:0,restoreHp:500,name:"2006",icon:"battle/Head_Icon5",groupID:2,heroSkill:[28,29,30],attackAudio:"tower_hero_attack",deadAudio:"hero_male_attacked",bulletPoint:[[0,50],[0,50],[0,50],[0,50]],bulletId:42,isPremultipliedAlpha:1,isChangePremultipliedAlpha:1,ResurrectionEffectShift:0,groupId:1,basePower:130},{id:43007,arms:3,isEnlarge:1,meleeDamageRate:3e3,remoteDamageRate:1e4,isImmune:1,isIntercept:1,isAttacked:1,isFollow:0,baseDirection:2,heroInTowerType:[4],appearance:"hero6",intoAppearance:"hero_tower8",scaling:3400,hpBarHeight:76,shadowScaling:4800,atkDistance:60,headShotPoint:60,longAttackRange:220,counterattackRange:300,shortAttackRange:60,attackCD:1800,detectionTargetCD:8e3,moveOnce:1,speed:35,hp:228,physicalAttack:0,magicAttack:140,physicalDefense:15,magicDefense:50,critRate:1e3,dodgeRate:0,restoreHp:500,name:"2007",icon:"battle/Head_Icon6",groupID:2,heroSkill:[31,32,33],attackAudio:"tower_hero_attack",deadAudio:"hero_male_attacked",bulletPoint:[[0,50],[0,50],[0,50],[0,50]],bulletId:26,isPremultipliedAlpha:1,isChangePremultipliedAlpha:1,ResurrectionEffectShift:0,groupId:1,basePower:130},{id:43008,arms:3,isEnlarge:1,meleeDamageRate:3e3,remoteDamageRate:1e4,isImmune:1,isIntercept:1,isAttacked:1,isFollow:0,baseDirection:2,heroInTowerType:[4],appearance:"hero9",intoAppearance:"hero_tower6",scaling:3600,hpBarHeight:80,shadowScaling:4800,atkDistance:60,headShotPoint:60,longAttackRange:220,counterattackRange:300,shortAttackRange:60,attackCD:1800,detectionTargetCD:8e3,moveOnce:1,speed:35,hp:255,physicalAttack:0,magicAttack:125,physicalDefense:15,magicDefense:50,critRate:1e3,dodgeRate:0,restoreHp:500,name:"2004",icon:"battle/Head_Icon9",groupID:2,heroSkill:[34,35,36],attackAudio:"tower_hero_attack",deadAudio:"hero_female_died",bulletPoint:[[0,40],[0,40],[0,40],[0,40]],bulletId:27,isPremultipliedAlpha:1,isChangePremultipliedAlpha:1,ResurrectionEffectShift:0,groupId:1,basePower:130},{id:43009,arms:2,isEnlarge:1,meleeDamageRate:5e3,remoteDamageRate:6e3,isImmune:1,isIntercept:1,isAttacked:1,isFollow:0,baseDirection:4,heroInTowerType:[1],appearance:"hero4",intoAppearance:"hero_tower12",scaling:3600,hpBarHeight:80,shadowScaling:4800,atkDistance:60,headShotPoint:60,longAttackRange:200,counterattackRange:300,shortAttackRange:60,attackCD:1200,detectionTargetCD:8e3,moveOnce:1,speed:35,hp:270,physicalAttack:70,magicAttack:0,physicalDefense:25,magicDefense:25,critRate:1e3,dodgeRate:0,restoreHp:500,name:"2008",icon:"battle/Head_Icon7",groupID:2,heroSkill:[22,23,24],attackAudio:"tower_hero_attack",deadAudio:"hero_female_died",bulletPoint:[[0,50],[0,50],[-25,35],[25,35]],bulletId:54,isPremultipliedAlpha:1,isChangePremultipliedAlpha:1,ResurrectionEffectShift:0,groupId:1,basePower:130},{id:43010,arms:1,isEnlarge:1,meleeDamageRate:1e4,remoteDamageRate:1e4,isImmune:1,isIntercept:1,isAttacked:1,isFollow:0,baseDirection:2,heroInTowerType:[2],appearance:"hero11",scaling:3600,hpBarHeight:80,shadowScaling:4800,atkDistance:60,headShotPoint:60,counterattackRange:300,shortAttackRange:120,attackCD:1500,detectionTargetCD:8e3,moveOnce:1,speed:35,hp:375,physicalAttack:40,magicAttack:0,physicalDefense:40,magicDefense:40,critRate:1e3,dodgeRate:0,restoreHp:500,name:"2010",icon:"battle/Head_Icon12",groupID:2,heroSkill:[16,17,18],attackAudio:"tower_hero_attack",deadAudio:"hero_male_attacked",isPremultipliedAlpha:1,isChangePremultipliedAlpha:1,ResurrectionEffectShift:0,groupId:1,basePower:130},{id:43011,arms:1,isEnlarge:0,meleeDamageRate:1e4,remoteDamageRate:1e4,isImmune:1,isIntercept:1,isAttacked:1,isFollow:0,baseDirection:2,heroInTowerType:[3],appearance:"hero12",intoAppearance:"hero_tower10",scaling:3600,hpBarHeight:80,shadowScaling:4800,atkDistance:60,headShotPoint:60,counterattackRange:300,shortAttackRange:120,attackCD:1500,detectionTargetCD:8e3,moveOnce:1,speed:35,hp:400,physicalAttack:44,magicAttack:0,physicalDefense:30,magicDefense:30,critRate:1e3,dodgeRate:0,restoreHp:500,name:"2011",icon:"battle/Head_Icon10",groupID:3,heroSkill:[19,20,21],attackAudio:"tower_meleehero_sword",deadAudio:"hero_male_attacked",isPremultipliedAlpha:1,isChangePremultipliedAlpha:1,ResurrectionEffectShift:0,groupId:1,basePower:130},{id:43012,arms:3,isEnlarge:0,meleeDamageRate:1e4,remoteDamageRate:1e4,isImmune:1,isIntercept:1,isAttacked:1,isFollow:0,baseDirection:2,heroInTowerType:[4],appearance:"hero10",intoAppearance:"hero_tower11",scaling:3600,hpBarHeight:80,shadowScaling:4800,atkDistance:60,headShotPoint:60,longAttackRange:200,counterattackRange:300,shortAttackRange:20,attackCD:1800,detectionTargetCD:8e3,moveOnce:1,speed:35,hp:400,physicalAttack:0,magicAttack:80,physicalDefense:30,magicDefense:50,critRate:1e3,dodgeRate:0,restoreHp:500,name:"2012",icon:"battle/Head_Icon11",groupID:2,heroSkill:[31,32,33],attackAudio:"tower_hero_attack",deadAudio:"hero_male_attacked",bulletPoint:[[0,50],[0,50],[0,50],[0,50]],bulletId:50,isPremultipliedAlpha:1,isChangePremultipliedAlpha:1,ResurrectionEffectShift:0,groupId:1,basePower:130},{id:43014,arms:1,isEnlarge:1,meleeDamageRate:1e4,remoteDamageRate:1e4,isImmune:1,isIntercept:1,isAttacked:1,isFollow:0,baseDirection:2,heroInTowerType:[2],appearance:"hero13",scaling:3600,hpBarHeight:80,shadowScaling:4800,atkDistance:60,headShotPoint:60,counterattackRange:300,shortAttackRange:120,attackCD:1500,detectionTargetCD:8e3,moveOnce:1,speed:35,hp:415,physicalAttack:60,magicAttack:0,physicalDefense:0,magicDefense:0,critRate:1e3,dodgeRate:0,restoreHp:500,name:"2014",icon:"battle/Head_Icon13",groupID:2,heroSkill:[31,32,33],attackAudio:"tower_battle_knife_light",deadAudio:"hero_male_attacked",isPremultipliedAlpha:1,isChangePremultipliedAlpha:1,ResurrectionEffectShift:0,groupId:1,basePower:130},{id:43101,arms:1,isEnlarge:1,meleeDamageRate:1e4,remoteDamageRate:1e4,isImmune:1,isIntercept:1,isAttacked:1,isFollow:0,baseDirection:2,heroInTowerType:[3],appearance:"hero1_vip",intoAppearance:"hero_tower2_vip",scaling:3600,hpBarHeight:80,shadowScaling:4800,atkDistance:60,headShotPoint:60,counterattackRange:300,shortAttackRange:120,attackCD:1500,detectionTargetCD:8e3,moveOnce:1,speed:35,hp:420,physicalAttack:60,magicAttack:0,physicalDefense:30,magicDefense:30,critRate:1e3,dodgeRate:0,restoreHp:500,name:"2021",icon:"battle/Head_Icon1_God",groupID:1,heroSkill:[13,14,15],attackAudio:"tower_battle_knife_light",deadAudio:"hero_male_attacked",isPremultipliedAlpha:1,isChangePremultipliedAlpha:0,ResurrectionEffectShift:0,groupId:1,basePower:163},{id:43102,arms:1,isEnlarge:1,meleeDamageRate:1e4,remoteDamageRate:1e4,isImmune:1,isIntercept:1,isAttacked:1,isFollow:0,baseDirection:2,heroInTowerType:[2],appearance:"hero2_vip",scaling:3600,hpBarHeight:80,shadowScaling:4800,atkDistance:60,headShotPoint:60,counterattackRange:300,shortAttackRange:120,attackCD:1500,detectionTargetCD:8e3,moveOnce:1,speed:35,hp:600,physicalAttack:30,magicAttack:0,physicalDefense:50,magicDefense:50,critRate:1e3,dodgeRate:0,restoreHp:500,name:"2022",icon:"battle/Head_Icon2_God",groupID:2,heroSkill:[16,17,18],attackAudio:"tower_hero_attack",deadAudio:"hero_male_attacked",isPremultipliedAlpha:1,isChangePremultipliedAlpha:1,towerId:20,ResurrectionEffectShift:0,groupId:1,basePower:163},{id:43107,arms:3,isEnlarge:1,meleeDamageRate:3e3,remoteDamageRate:1e4,isImmune:1,isIntercept:1,isAttacked:1,isFollow:0,baseDirection:2,heroInTowerType:[4],appearance:"hero6_vip",intoAppearance:"hero_tower8_vip",scaling:3400,hpBarHeight:76,shadowScaling:4800,atkDistance:60,headShotPoint:60,longAttackRange:220,counterattackRange:300,shortAttackRange:60,attackCD:1800,detectionTargetCD:8e3,moveOnce:1,speed:35,hp:270,physicalAttack:0,magicAttack:168,physicalDefense:15,magicDefense:50,critRate:1e3,dodgeRate:0,restoreHp:500,name:"2023",icon:"battle/Head_Icon6_God",groupID:2,heroSkill:[31,32,33],attackAudio:"tower_hero_attack",deadAudio:"hero_male_attacked",bulletPoint:[[0,50],[0,50],[0,50],[0,50]],bulletId:26,isPremultipliedAlpha:1,isChangePremultipliedAlpha:1,ResurrectionEffectShift:0,groupId:1,basePower:163},{id:41101,arms:1,isEnlarge:1,meleeDamageRate:1e4,remoteDamageRate:1e4,isImmune:0,isIntercept:1,isAttacked:1,isFollow:0,baseDirection:2,appearance:"soldier1",scaling:9600,hpBarHeight:60,shadowScaling:3200,atkDistance:35,headShotPoint:45,counterattackRange:300,shortAttackRange:120,attackCD:1500,detectionTargetCD:8e3,moveOnce:1,speed:25,hp:160,physicalAttack:8,magicAttack:0,physicalDefense:55,magicDefense:0,critRate:1e3,dodgeRate:0,restoreHp:500,name:"1551",attackAudio:"tower_hero_attack001",deadAudio:"hero_male_attacked",isPremultipliedAlpha:1,isChangePremultipliedAlpha:1,ResurrectionEffectShift:0},{id:41102,arms:2,isEnlarge:1,meleeDamageRate:5e3,remoteDamageRate:1e4,isImmune:1,isIntercept:1,isAttacked:1,isFollow:0,baseDirection:4,appearance:"soldier2",scaling:9600,hpBarHeight:60,shadowScaling:3200,atkDistance:35,headShotPoint:45,longAttackRange:200,counterattackRange:300,shortAttackRange:60,attackCD:1600,detectionTargetCD:8e3,moveOnce:1,speed:25,hp:100,physicalAttack:16,magicAttack:0,physicalDefense:30,magicDefense:30,critRate:1e3,dodgeRate:2e3,restoreHp:500,name:"1756",groupID:2,attackAudio:"tower_hero_attack",deadAudio:"hero_male_attacked",bulletPoint:[[0,30],[0,30],[0,30],[0,30]],bulletId:2,isPremultipliedAlpha:0,isChangePremultipliedAlpha:0,ResurrectionEffectShift:0},{id:44102,arms:1,isEnlarge:1,meleeDamageRate:1e4,remoteDamageRate:1e4,isImmune:1,isIntercept:1,isAttacked:1,isFollow:0,baseDirection:2,heroInTowerType:[2],appearance:"hero_tower4",scaling:5294,hpBarHeight:80,shadowScaling:4e3,atkDistance:48,headShotPoint:48,counterattackRange:300,shortAttackRange:120,attackCD:1500,detectionTargetCD:8e3,moveOnce:1,speed:25,hp:500,physicalAttack:25,magicAttack:0,physicalDefense:50,magicDefense:50,critRate:1e3,dodgeRate:1e3,restoreHp:500,name:"2002",icon:"battle/Head_Icon2",groupID:2,heroSkill:[16,17,18],attackAudio:"tower_hero_attack",deadAudio:"hero_male_attacked",isPremultipliedAlpha:1,isChangePremultipliedAlpha:1,ResurrectionEffectShift:0},{id:44106,arms:2,isEnlarge:1,meleeDamageRate:1e4,remoteDamageRate:1e4,isImmune:1,isIntercept:1,isAttacked:1,isFollow:0,baseDirection:4,heroInTowerType:[2],appearance:"hero_tower5",scaling:5294,hpBarHeight:80,shadowScaling:4e3,atkDistance:48,headShotPoint:48,longAttackRange:200,counterattackRange:300,shortAttackRange:60,attackCD:1600,detectionTargetCD:8e3,moveOnce:1,speed:25,hp:300,physicalAttack:50,magicAttack:0,physicalDefense:40,magicDefense:40,critRate:1e3,dodgeRate:1e3,restoreHp:500,name:"2006",icon:"battle/Head_Icon5",groupID:2,heroSkill:[28,29,30],attackAudio:"tower_hero_attack",deadAudio:"hero_male_attacked",bulletPoint:[[0,50],[0,50],[0,50],[0,50]],bulletId:42,isPremultipliedAlpha:1,isChangePremultipliedAlpha:1,ResurrectionEffectShift:0},{id:44202,arms:1,isEnlarge:1,meleeDamageRate:1e4,remoteDamageRate:1e4,isImmune:1,isIntercept:1,isAttacked:1,isFollow:0,baseDirection:2,heroInTowerType:[2],appearance:"hero_tower4_vip",scaling:5294,hpBarHeight:80,shadowScaling:4e3,atkDistance:48,headShotPoint:48,counterattackRange:300,shortAttackRange:120,attackCD:1500,detectionTargetCD:8e3,moveOnce:1,speed:25,hp:600,physicalAttack:30,magicAttack:0,physicalDefense:50,magicDefense:50,critRate:1e3,dodgeRate:1e3,restoreHp:500,name:"2022",icon:"battle/Head_Icon2_God",groupID:2,heroSkill:[16,17,18],attackAudio:"tower_hero_attack",deadAudio:"hero_male_attacked",isPremultipliedAlpha:1,isChangePremultipliedAlpha:1,ResurrectionEffectShift:0},{id:44110,arms:1,isEnlarge:1,meleeDamageRate:1e4,remoteDamageRate:1e4,isImmune:1,isIntercept:1,isAttacked:1,isFollow:0,baseDirection:2,heroInTowerType:[2],appearance:"hero_tower9",scaling:5294,hpBarHeight:80,shadowScaling:4e3,atkDistance:48,headShotPoint:48,counterattackRange:300,shortAttackRange:120,attackCD:1500,detectionTargetCD:8e3,moveOnce:1,speed:25,hp:375,physicalAttack:40,magicAttack:0,physicalDefense:40,magicDefense:40,critRate:1e3,dodgeRate:1e3,restoreHp:500,name:"2010",icon:"battle/Head_Icon2",groupID:2,heroSkill:[16,17,18],attackAudio:"tower_hero_attack",deadAudio:"hero_male_attacked",isPremultipliedAlpha:1,isChangePremultipliedAlpha:1,ResurrectionEffectShift:0},{id:44114,arms:1,isEnlarge:1,meleeDamageRate:1e4,remoteDamageRate:1e4,isImmune:1,isIntercept:1,isAttacked:1,isFollow:0,baseDirection:2,heroInTowerType:[2],appearance:"hero_tower13",scaling:5294,hpBarHeight:80,shadowScaling:4e3,atkDistance:48,headShotPoint:48,counterattackRange:300,shortAttackRange:120,attackCD:1500,detectionTargetCD:8e3,moveOnce:1,speed:25,hp:415,physicalAttack:60,magicAttack:0,physicalDefense:0,magicDefense:0,critRate:1e3,dodgeRate:1e3,restoreHp:500,name:"2014",icon:"battle/Head_Icon2",groupID:2,heroSkill:[16,17,18],attackAudio:"tower_hero_attack",deadAudio:"hero_male_attacked",isPremultipliedAlpha:1,isChangePremultipliedAlpha:1,ResurrectionEffectShift:0}],cc._RF.pop()},{}],Json_StartBuff:[function(e,t){"use strict";cc._RF.push(t,"07fbdfMTI9JUasR5MJGCBiR","Json_StartBuff"),e("Aft").JsonData.StartBuff=[{id:1,name:"1379",desc:"1380",icon:"battleSkill/Gift_Icon_Iron"},{id:2,name:"1353",desc:"1381",icon:"battleSkill/Gift_Icon_Copper"},{id:3,name:"1364",desc:"1382",icon:"battleSkill/Gift_Icon_Exp"}],cc._RF.pop()},{}],Json_Subscribe:[function(e,t){"use strict";cc._RF.push(t,"51155oIZDtF+6fUKgy78s98","Json_Subscribe"),e("Aft").JsonData.Subscribe=[{id:1,type:1,desc:"1980",reward:[{key:1001,value:50}]},{id:2,type:2,desc:"1981",reward:[{key:1001,value:50}]},{id:3,type:3,desc:"1982",reward:[{key:1001,value:50}]},{id:4,type:4,desc:"1983",reward:[{key:1001,value:50}]}],cc._RF.pop()},{}],Json_TaskReward:[function(e,t){"use strict";cc._RF.push(t,"844adDkAUhP7LL54zRuI1Zw","Json_TaskReward"),e("Aft").JsonData.TaskReward=[{id:1,groupId:1,chapter:[1,1],score:30,rewards:[[1002,10800]]},{id:2,groupId:1,chapter:[1,1],score:60,rewards:[[1001,50]]},{id:3,groupId:1,chapter:[1,1],score:100,rewards:[[2001,1]]},{id:4,groupId:2,chapter:[2,2],score:30,rewards:[[1002,10800]]},{id:5,groupId:2,chapter:[2,2],score:60,rewards:[[1001,50]]},{id:6,groupId:2,chapter:[2,2],score:100,rewards:[[2001,1]]},{id:7,groupId:3,chapter:[3,3],score:30,rewards:[[1002,10800]]},{id:8,groupId:3,chapter:[3,3],score:60,rewards:[[1001,50]]},{id:9,groupId:3,chapter:[3,3],score:100,rewards:[[2001,1]]},{id:10,groupId:4,chapter:[4,999],score:30,rewards:[[1002,10800]]},{id:11,groupId:4,chapter:[4,999],score:60,rewards:[[1001,50]]},{id:12,groupId:4,chapter:[4,999],score:100,rewards:[[2001,1]]}],cc._RF.pop()},{}],Json_Task:[function(e,t){"use strict";cc._RF.push(t,"00061gfgwdOBIfcwUZ4nk8c","Json_Task"),e("Aft").JsonData.Task=[{id:101,type:1,chapter:[1,1],desc:"1259",icon:"icon",taskType:101,taskValue:[10],diamond:10,coin:900,score:20},{id:201,type:2,chapter:[1,1],desc:"1261",icon:"icon",taskType:201,taskValue:[20],diamond:10,coin:900,score:10},{id:301,type:3,chapter:[1,1],desc:"1264",icon:"icon",taskType:302,taskValue:[30],diamond:10,coin:900,score:15},{id:401,type:4,chapter:[1,1],desc:"1611",icon:"icon",taskType:404,taskValue:[6],diamond:20,coin:1800,score:25},{id:501,type:5,chapter:[1,1],desc:"1268",icon:"icon",taskType:501,taskValue:[5400],diamond:10,coin:900,score:15},{id:601,type:6,chapter:[1,1],desc:"1273",icon:"icon",taskType:604,taskValue:[10],diamond:10,coin:900,score:20},{id:10101,type:1,chapter:[2,2],desc:"1259",icon:"icon",taskType:101,taskValue:[3],diamond:10,coin:900,score:20},{id:10102,type:1,chapter:[2,2],desc:"1260",icon:"icon",taskType:102,taskValue:[1],diamond:10,coin:900,score:20},{id:10201,type:2,chapter:[2,2],desc:"1261",icon:"icon",taskType:201,taskValue:[20],diamond:10,coin:900,score:10},{id:10202,type:2,chapter:[2,2],desc:"1262",icon:"icon",taskType:202,taskValue:[31001,20],diamond:10,coin:900,score:10},{id:10301,type:3,chapter:[2,2],desc:"1263",icon:"icon",taskType:301,taskValue:[3],diamond:10,coin:900,score:15},{id:10302,type:3,chapter:[2,2],desc:"1264",icon:"icon",taskType:302,taskValue:[5],diamond:10,coin:900,score:15},{id:10401,type:4,chapter:[2,2],desc:"1265",icon:"icon",taskType:401,taskValue:[3],diamond:20,coin:1800,score:25},{id:10402,type:4,chapter:[2,2],desc:"1266",icon:"icon",taskType:402,taskValue:[3],diamond:20,coin:1800,score:25},{id:10403,type:4,chapter:[2,2],desc:"1267",icon:"icon",taskType:403,taskValue:[3],diamond:20,coin:1800,score:25},{id:10404,type:4,chapter:[2,2],desc:"1611",icon:"icon",taskType:404,taskValue:[5],diamond:20,coin:1800,score:25},{id:10501,type:5,chapter:[2,2],desc:"1268",icon:"icon",taskType:501,taskValue:[5400],diamond:10,coin:900,score:15},{id:10502,type:5,chapter:[2,2],desc:"1269",icon:"icon",taskType:502,taskValue:[5400],diamond:10,coin:900,score:15},{id:10601,type:6,chapter:[2,2],desc:"1270",icon:"icon",taskType:601,taskValue:[-1,2],diamond:10,coin:900,score:20},{id:10602,type:6,chapter:[2,2],desc:"1271",icon:"icon",taskType:602,taskValue:[5],diamond:10,coin:900,score:20},{id:10603,type:6,chapter:[2,2],desc:"1272",icon:"icon",taskType:603,taskValue:[20],diamond:10,coin:900,score:20},{id:10604,type:6,chapter:[2,2],desc:"1273",icon:"icon",taskType:604,taskValue:[5],diamond:10,coin:900,score:20},{id:10605,type:6,chapter:[2,2],desc:"1274",icon:"icon",taskType:605,taskValue:[20],diamond:10,coin:900,score:20},{id:10701,type:7,chapter:[1,999],desc:"1443",icon:"icon",taskType:701,taskValue:[1],diamond:10,coin:900,score:15},{id:20101,type:1,chapter:[3,999],desc:"1259",icon:"icon",taskType:101,taskValue:[5],diamond:10,coin:900,score:20},{id:20102,type:1,chapter:[3,999],desc:"1260",icon:"icon",taskType:102,taskValue:[2],diamond:10,coin:900,score:20},{id:20201,type:2,chapter:[3,999],desc:"1261",icon:"icon",taskType:201,taskValue:[40],diamond:10,coin:900,score:10},{id:20301,type:3,chapter:[3,999],desc:"1263",icon:"icon",taskType:301,taskValue:[5],diamond:10,coin:900,score:15},{id:20302,type:3,chapter:[3,999],desc:"1264",icon:"icon",taskType:302,taskValue:[5],diamond:10,coin:900,score:15},{id:20401,type:4,chapter:[3,999],desc:"1265",icon:"icon",taskType:401,taskValue:[3],diamond:20,coin:1800,score:25},{id:20402,type:4,chapter:[3,999],desc:"1266",icon:"icon",taskType:402,taskValue:[3],diamond:20,coin:1800,score:25},{id:20403,type:4,chapter:[3,999],desc:"1267",icon:"icon",taskType:403,taskValue:[3],diamond:20,coin:1800,score:25},{id:20404,type:4,chapter:[3,999],desc:"1611",icon:"icon",taskType:404,taskValue:[5],diamond:20,coin:1800,score:25},{id:20501,type:5,chapter:[3,999],desc:"1268",icon:"icon",taskType:501,taskValue:[9e3],diamond:10,coin:900,score:15},{id:20502,type:5,chapter:[3,999],desc:"1269",icon:"icon",taskType:502,taskValue:[9e3],diamond:10,coin:900,score:15},{id:20601,type:6,chapter:[3,999],desc:"1270",icon:"icon",taskType:601,taskValue:[-1,3],diamond:10,coin:900,score:20},{id:20602,type:6,chapter:[3,999],desc:"1271",icon:"icon",taskType:602,taskValue:[10],diamond:10,coin:900,score:20},{id:20603,type:6,chapter:[3,999],desc:"1272",icon:"icon",taskType:603,taskValue:[30],diamond:10,coin:900,score:20},{id:20604,type:6,chapter:[3,999],desc:"1273",icon:"icon",taskType:604,taskValue:[8],diamond:10,coin:900,score:20},{id:20605,type:6,chapter:[3,999],desc:"1274",icon:"icon",taskType:605,taskValue:[30],diamond:10,coin:900,score:20}],cc._RF.pop()},{}],Json_TipsSkill:[function(e,t){"use strict";cc._RF.push(t,"c2b11h6tpxFCJ9EMOhLEt49","Json_TipsSkill"),e("Aft").JsonData.TipsSkill=[{id:1,groupID:1,level:1,quality:1,name:"1107",desc:"1036",shortDesc:"3101",superShortDesc:"200001",icon:"battleSkill/BattleSkill_Skill_Icon7",subscript:"battleSkill/BattleSkill_Skill_Icon_Angle1",tipsSkillBg:"BattleSkill_SkillBg_Green",stopTipsSkillBg:"HeroSkill_IconBg_Green",typeList:[2],effectType:1,natureList:[16,1,3e3],triggerProbability:1e4,lastTime:-1,chapterMin:1,chapterMax:10,instanceMin:1,instanceMax:100,weight:1e4,addWeight:100,isUpgradeByAd:1,tipsUpgradeByAd:1e4,recommendValue:109,isNianInstance:1},{id:2,groupID:1,level:2,quality:1,name:"1107",desc:"1036",shortDesc:"3101",superShortDesc:"200001",icon:"battleSkill/BattleSkill_Skill_Icon7",subscript:"battleSkill/BattleSkill_Skill_Icon_Angle1",tipsSkillBg:"BattleSkill_SkillBg_Green",stopTipsSkillBg:"HeroSkill_IconBg_Green",typeList:[2],effectType:1,natureList:[16,1,6e3],triggerProbability:1e4,lastTime:-1,chapterMin:1,chapterMax:10,instanceMin:1,instanceMax:100,weight:1e4,addWeight:100,isUpgradeByAd:1,tipsUpgradeByAd:1e4,recommendValue:209,isNianInstance:1},{id:3,groupID:1,level:3,quality:1,name:"1107",desc:"1036",shortDesc:"3101",superShortDesc:"200001",icon:"battleSkill/BattleSkill_Skill_Icon7",subscript:"battleSkill/BattleSkill_Skill_Icon_Angle1",tipsSkillBg:"BattleSkill_SkillBg_Green",stopTipsSkillBg:"HeroSkill_IconBg_Green",typeList:[2],effectType:1,natureList:[16,1,9e3],triggerProbability:1e4,lastTime:-1,chapterMin:1,chapterMax:10,instanceMin:1,instanceMax:100,weight:1e4,addWeight:100,recommendValue:309,isNianInstance:1},{id:4,groupID:2,level:1,quality:2,name:"1106",desc:"1037",shortDesc:"3102",superShortDesc:"200002",icon:"battleSkill/BattleSkill_Skill_Icon7",tipsSkillBg:"BattleSkill_SkillBg_Blue",stopTipsSkillBg:"HeroSkill_IconBg_Blue",typeList:[1,2,3,4],effectType:1,natureList:[16,1,3e3],triggerProbability:1e4,lastTime:-1,chapterMin:1,chapterMax:10,instanceMin:1,instanceMax:100,weight:1e3,addWeight:3e3,isUpgradeByAd:1,tipsUpgradeByAd:1e4,recommendValue:15e3,isNianInstance:1},{id:5,groupID:2,level:2,quality:2,name:"1106",desc:"1037",shortDesc:"3102",superShortDesc:"200002",icon:"battleSkill/BattleSkill_Skill_Icon7",tipsSkillBg:"BattleSkill_SkillBg_Blue",stopTipsSkillBg:"HeroSkill_IconBg_Blue",typeList:[1,2,3,4],effectType:1,natureList:[16,1,6e3],triggerProbability:1e4,lastTime:-1,chapterMin:1,chapterMax:10,instanceMin:1,instanceMax:100,weight:1e3,addWeight:3e3,isUpgradeByAd:1,tipsUpgradeByAd:1e4,recommendValue:3e4,isNianInstance:1},{id:6,groupID:2,level:3,quality:2,name:"1106",desc:"1037",shortDesc:"3102",superShortDesc:"200002",icon:"battleSkill/BattleSkill_Skill_Icon7",tipsSkillBg:"BattleSkill_SkillBg_Blue",stopTipsSkillBg:"HeroSkill_IconBg_Blue",typeList:[1,2,3,4],effectType:1,natureList:[16,1,9e3],triggerProbability:1e4,lastTime:-1,chapterMin:1,chapterMax:10,instanceMin:1,instanceMax:100,weight:1e3,addWeight:3e3,recommendValue:45e3,isNianInstance:1},{id:7,groupID:3,level:1,quality:1,name:"1109",desc:"1038",shortDesc:"3103",superShortDesc:"200003",icon:"battleSkill/BattleSkill_Skill_Icon8",subscript:"battleSkill/BattleSkill_Skill_Icon_Angle2",tipsSkillBg:"BattleSkill_SkillBg_Green",stopTipsSkillBg:"HeroSkill_IconBg_Green",typeList:[4],effectType:1,natureList:[10,1,2e3],triggerProbability:1e4,lastTime:-1,chapterMin:1,chapterMax:10,instanceMin:1,instanceMax:100,weight:1e4,addWeight:100,isUpgradeByAd:1,tipsUpgradeByAd:1e4,recommendValue:105,isNianInstance:1},{id:8,groupID:3,level:2,quality:1,name:"1109",desc:"1038",shortDesc:"3103",superShortDesc:"200003",icon:"battleSkill/BattleSkill_Skill_Icon8",subscript:"battleSkill/BattleSkill_Skill_Icon_Angle2",tipsSkillBg:"BattleSkill_SkillBg_Green",stopTipsSkillBg:"HeroSkill_IconBg_Green",typeList:[4],effectType:1,natureList:[10,1,4e3],triggerProbability:1e4,lastTime:-1,chapterMin:1,chapterMax:10,instanceMin:1,instanceMax:100,weight:1e4,addWeight:100,isUpgradeByAd:1,tipsUpgradeByAd:1e4,recommendValue:205,isNianInstance:1},{id:9,groupID:3,level:3,quality:1,name:"1109",desc:"1038",shortDesc:"3103",superShortDesc:"200003",icon:"battleSkill/BattleSkill_Skill_Icon8",subscript:"battleSkill/BattleSkill_Skill_Icon_Angle2",tipsSkillBg:"BattleSkill_SkillBg_Green",stopTipsSkillBg:"HeroSkill_IconBg_Green",typeList:[4],effectType:1,natureList:[10,1,6e3],triggerProbability:1e4,lastTime:-1,chapterMin:1,chapterMax:10,instanceMin:1,instanceMax:100,weight:1e4,addWeight:100,recommendValue:305,isNianInstance:1},{id:10,groupID:4,level:1,quality:2,name:"1108",desc:"1039",shortDesc:"3104",superShortDesc:"200004",icon:"battleSkill/BattleSkill_Skill_Icon8",tipsSkillBg:"BattleSkill_SkillBg_Blue",stopTipsSkillBg:"HeroSkill_IconBg_Blue",typeList:[1,2,3,4],effectType:1,natureList:[10,1,2e3],triggerProbability:1e4,lastTime:-1,chapterMin:1,chapterMax:10,instanceMin:1,instanceMax:100,weight:1e3,addWeight:3e3,isUpgradeByAd:1,tipsUpgradeByAd:1e4,recommendValue:15200,isNianInstance:1},{id:11,groupID:4,level:2,quality:2,name:"1108",desc:"1039",shortDesc:"3104",superShortDesc:"200004",icon:"battleSkill/BattleSkill_Skill_Icon8",tipsSkillBg:"BattleSkill_SkillBg_Blue",stopTipsSkillBg:"HeroSkill_IconBg_Blue",typeList:[1,2,3,4],effectType:1,natureList:[10,1,4e3],triggerProbability:1e4,lastTime:-1,chapterMin:1,chapterMax:10,instanceMin:1,instanceMax:100,weight:1e3,addWeight:3e3,isUpgradeByAd:1,tipsUpgradeByAd:1e4,recommendValue:30200,isNianInstance:1},{id:12,groupID:4,level:3,quality:2,name:"1108",desc:"1039",shortDesc:"3104",superShortDesc:"200004",icon:"battleSkill/BattleSkill_Skill_Icon8",tipsSkillBg:"BattleSkill_SkillBg_Blue",stopTipsSkillBg:"HeroSkill_IconBg_Blue",typeList:[1,2,3,4],effectType:1,natureList:[10,1,6e3],triggerProbability:1e4,lastTime:-1,chapterMin:1,chapterMax:10,instanceMin:1,instanceMax:100,weight:1e3,addWeight:3e3,recommendValue:45200,isNianInstance:1},{id:13,groupID:5,level:1,quality:1,name:"1111",desc:"1040",shortDesc:"3105",superShortDesc:"200005",icon:"battleSkill/BattleSkill_Skill_Icon5",subscript:"battleSkill/BattleSkill_Skill_Icon_Angle4",tipsSkillBg:"BattleSkill_SkillBg_Green",stopTipsSkillBg:"HeroSkill_IconBg_Green",typeList:[3],effectType:1,natureList:[11,1,1e3],triggerProbability:1e4,lastTime:-1,chapterMin:1,chapterMax:10,instanceMin:1,instanceMax:100,weight:1e4,addWeight:100,isUpgradeByAd:1,tipsUpgradeByAd:1e4,recommendValue:103,isNianInstance:1},{id:14,groupID:5,level:2,quality:1,name:"1111",desc:"1040",shortDesc:"3105",superShortDesc:"200005",icon:"battleSkill/BattleSkill_Skill_Icon5",subscript:"battleSkill/BattleSkill_Skill_Icon_Angle4",tipsSkillBg:"BattleSkill_SkillBg_Green",stopTipsSkillBg:"HeroSkill_IconBg_Green",typeList:[3],effectType:1,natureList:[11,1,2e3],triggerProbability:1e4,lastTime:-1,chapterMin:1,chapterMax:10,instanceMin:1,instanceMax:100,weight:1e4,addWeight:100,isUpgradeByAd:1,tipsUpgradeByAd:1e4,recommendValue:203,isNianInstance:1},{id:15,groupID:5,level:3,quality:1,name:"1111",desc:"1040",shortDesc:"3105",superShortDesc:"200005",icon:"battleSkill/BattleSkill_Skill_Icon5",subscript:"battleSkill/BattleSkill_Skill_Icon_Angle4",tipsSkillBg:"BattleSkill_SkillBg_Green",stopTipsSkillBg:"HeroSkill_IconBg_Green",typeList:[3],effectType:1,natureList:[11,1,3e3],triggerProbability:1e4,lastTime:-1,chapterMin:1,chapterMax:10,instanceMin:1,instanceMax:100,weight:1e4,addWeight:100,recommendValue:303,isNianInstance:1},{id:16,groupID:6,level:1,quality:2,name:"1110",desc:"1041",shortDesc:"3106",superShortDesc:"200006",icon:"battleSkill/BattleSkill_Skill_Icon5",tipsSkillBg:"BattleSkill_SkillBg_Blue",stopTipsSkillBg:"HeroSkill_IconBg_Blue",typeList:[1,2,3,4],effectType:1,natureList:[11,1,1e3],triggerProbability:1e4,lastTime:-1,chapterMin:1,chapterMax:10,instanceMin:1,instanceMax:100,weight:1e3,addWeight:3e3,isUpgradeByAd:1,tipsUpgradeByAd:1e4,recommendValue:15400,isNianInstance:1},{id:17,groupID:6,level:2,quality:2,name:"1110",desc:"1041",shortDesc:"3106",superShortDesc:"200006",icon:"battleSkill/BattleSkill_Skill_Icon5",tipsSkillBg:"BattleSkill_SkillBg_Blue",stopTipsSkillBg:"HeroSkill_IconBg_Blue",typeList:[1,2,3,4],effectType:1,natureList:[11,1,2e3],triggerProbability:1e4,lastTime:-1,chapterMin:1,chapterMax:10,instanceMin:1,instanceMax:100,weight:1e3,addWeight:3e3,isUpgradeByAd:1,tipsUpgradeByAd:1e4,recommendValue:30400,isNianInstance:1},{id:18,groupID:6,level:3,quality:2,name:"1110",desc:"1041",shortDesc:"3106",superShortDesc:"200006",icon:"battleSkill/BattleSkill_Skill_Icon5",tipsSkillBg:"BattleSkill_SkillBg_Blue",stopTipsSkillBg:"HeroSkill_IconBg_Blue",typeList:[1,2,3,4],effectType:1,natureList:[11,1,3e3],triggerProbability:1e4,lastTime:-1,chapterMin:1,chapterMax:10,instanceMin:1,instanceMax:100,weight:1e3,addWeight:3e3,recommendValue:45400,isNianInstance:1},{id:19,groupID:7,level:1,quality:1,name:"1113",desc:"1042",shortDesc:"3107",superShortDesc:"200007",icon:"battleSkill/BattleSkill_Skill_Icon1",subscript:"battleSkill/BattleSkill_Skill_Icon_Angle3",tipsSkillBg:"BattleSkill_SkillBg_Green",stopTipsSkillBg:"HeroSkill_IconBg_Green",typeList:[1],effectType:1,natureList:[6,1,1500],triggerProbability:1e4,lastTime:-1,chapterMin:1,chapterMax:10,instanceMin:1,instanceMax:100,weight:1e4,addWeight:100,isUpgradeByAd:1,tipsUpgradeByAd:1e4,recommendValue:107,isNianInstance:1},{id:20,groupID:7,level:2,quality:1,name:"1113",desc:"1042",shortDesc:"3107",superShortDesc:"200007",icon:"battleSkill/BattleSkill_Skill_Icon1",subscript:"battleSkill/BattleSkill_Skill_Icon_Angle3",tipsSkillBg:"BattleSkill_SkillBg_Green",stopTipsSkillBg:"HeroSkill_IconBg_Green",typeList:[1],effectType:1,natureList:[6,1,3e3],triggerProbability:1e4,lastTime:-1,chapterMin:1,chapterMax:10,instanceMin:1,instanceMax:100,weight:1e4,addWeight:100,isUpgradeByAd:1,tipsUpgradeByAd:1e4,recommendValue:207,isNianInstance:1},{id:21,groupID:7,level:3,quality:1,name:"1113",desc:"1042",shortDesc:"3107",superShortDesc:"200007",icon:"battleSkill/BattleSkill_Skill_Icon1",subscript:"battleSkill/BattleSkill_Skill_Icon_Angle3",tipsSkillBg:"BattleSkill_SkillBg_Green",stopTipsSkillBg:"HeroSkill_IconBg_Green",typeList:[1],effectType:1,natureList:[6,1,4500],triggerProbability:1e4,lastTime:-1,chapterMin:1,chapterMax:10,instanceMin:1,instanceMax:100,weight:1e4,addWeight:100,recommendValue:307,isNianInstance:1},{id:22,groupID:8,level:1,quality:2,name:"1112",desc:"1043",shortDesc:"3108",superShortDesc:"200008",icon:"battleSkill/BattleSkill_Skill_Icon1",tipsSkillBg:"BattleSkill_SkillBg_Blue",stopTipsSkillBg:"HeroSkill_IconBg_Blue",typeList:[1,2,3,4],effectType:1,natureList:[6,1,1500],triggerProbability:1e4,lastTime:-1,chapterMin:1,chapterMax:10,instanceMin:1,instanceMax:100,weight:1e3,addWeight:3e3,isUpgradeByAd:1,tipsUpgradeByAd:1e4,recommendValue:15600,isNianInstance:1},{id:23,groupID:8,level:2,quality:2,name:"1112",desc:"1043",shortDesc:"3108",superShortDesc:"200008",icon:"battleSkill/BattleSkill_Skill_Icon1",tipsSkillBg:"BattleSkill_SkillBg_Blue",stopTipsSkillBg:"HeroSkill_IconBg_Blue",typeList:[1,2,3,4],effectType:1,natureList:[6,1,3e3],triggerProbability:1e4,lastTime:-1,chapterMin:1,chapterMax:10,instanceMin:1,instanceMax:100,weight:1e3,addWeight:3e3,isUpgradeByAd:1,tipsUpgradeByAd:1e4,recommendValue:30600,isNianInstance:1},{id:24,groupID:8,level:3,quality:2,name:"1112",desc:"1043",shortDesc:"3108",superShortDesc:"200008",icon:"battleSkill/BattleSkill_Skill_Icon1",tipsSkillBg:"BattleSkill_SkillBg_Blue",stopTipsSkillBg:"HeroSkill_IconBg_Blue",typeList:[1,2,3,4],effectType:1,natureList:[6,1,4500],triggerProbability:1e4,lastTime:-1,chapterMin:1,chapterMax:10,instanceMin:1,instanceMax:100,weight:1e3,addWeight:3e3,recommendValue:45600,isNianInstance:1},{id:25,groupID:9,level:1,quality:1,name:"1114",desc:"1044",shortDesc:"3109",superShortDesc:"200009",icon:"battleSkill/Skill_Icon1",tipsSkillBg:"BattleSkill_SkillBg_Green",stopTipsSkillBg:"HeroSkill_IconBg_Green",typeList:[1],effectType:1,natureList:[7,1,5e3],triggerProbability:1e4,lastTime:-1,lastEffect:"1",chapterMin:100,chapterMax:100,instanceMin:1,instanceMax:100,weight:1e4,addWeight:100,isUpgradeByAd:1,tipsUpgradeByAd:1e4,recommendValue:101,isNianInstance:0},{id:26,groupID:9,level:2,quality:1,name:"1114",desc:"1044",shortDesc:"3109",superShortDesc:"200009",icon:"battleSkill/Skill_Icon1",tipsSkillBg:"BattleSkill_SkillBg_Green",stopTipsSkillBg:"HeroSkill_IconBg_Green",typeList:[1],effectType:1,natureList:[7,1,1e4],triggerProbability:1e4,lastTime:-1,lastEffect:"1",chapterMin:100,chapterMax:100,instanceMin:1,instanceMax:100,weight:1e4,addWeight:100,isUpgradeByAd:1,tipsUpgradeByAd:1e4,recommendValue:201,isNianInstance:0},{id:27,groupID:9,level:3,quality:1,name:"1114",desc:"1044",shortDesc:"3109",superShortDesc:"200009",icon:"battleSkill/Skill_Icon1",tipsSkillBg:"BattleSkill_SkillBg_Green",stopTipsSkillBg:"HeroSkill_IconBg_Green",typeList:[1],effectType:1,natureList:[7,1,15e3],triggerProbability:1e4,lastTime:-1,lastEffect:"1",chapterMin:100,chapterMax:100,instanceMin:1,instanceMax:100,weight:1e4,addWeight:100,recommendValue:301,isNianInstance:0},{id:28,groupID:10,level:1,quality:2,name:"1114",desc:"1045",shortDesc:"3109",superShortDesc:"200009",icon:"battleSkill/BattleSkill_Skill_Icon2",tipsSkillBg:"BattleSkill_SkillBg_Blue",stopTipsSkillBg:"HeroSkill_IconBg_Blue",typeList:[1,2,3,4],effectType:1,natureList:[7,1,5e3],triggerProbability:1e4,lastTime:-1,lastEffect:"1",chapterMin:1,chapterMax:10,instanceMin:1,instanceMax:100,weight:1e3,addWeight:3e3,isUpgradeByAd:1,tipsUpgradeByAd:1e4,recommendValue:10800,isNianInstance:1},{id:29,groupID:10,level:2,quality:2,name:"1114",desc:"1045",shortDesc:"3109",superShortDesc:"200009",icon:"battleSkill/BattleSkill_Skill_Icon2",tipsSkillBg:"BattleSkill_SkillBg_Blue",stopTipsSkillBg:"HeroSkill_IconBg_Blue",typeList:[1,2,3,4],effectType:1,natureList:[7,1,1e4],triggerProbability:1e4,lastTime:-1,lastEffect:"1",chapterMin:1,chapterMax:10,instanceMin:1,instanceMax:100,weight:1e3,addWeight:3e3,isUpgradeByAd:1,tipsUpgradeByAd:1e4,recommendValue:20800,isNianInstance:1},{id:30,groupID:10,level:3,quality:2,name:"1114",desc:"1045",shortDesc:"3109",superShortDesc:"200009",icon:"battleSkill/BattleSkill_Skill_Icon2",tipsSkillBg:"BattleSkill_SkillBg_Blue",stopTipsSkillBg:"HeroSkill_IconBg_Blue",typeList:[1,2,3,4],effectType:1,natureList:[7,1,15e3],triggerProbability:1e4,lastTime:-1,lastEffect:"1",chapterMin:1,chapterMax:10,instanceMin:1,instanceMax:100,weight:1e3,addWeight:3e3,recommendValue:30800,isNianInstance:1},{id:31,groupID:11,level:1,quality:2,name:"1115",desc:"1046",shortDesc:"3110",superShortDesc:"200010",icon:"battleSkill/BattleSkill_Skill_Icon6",subscript:"battleSkill/BattleSkill_Skill_Icon_Angle3",tipsSkillBg:"BattleSkill_SkillBg_Blue",stopTipsSkillBg:"HeroSkill_IconBg_Blue",typeList:[1],effectType:2,natureList:[12,0,1],triggerProbability:2e3,lastTime:2e3,lastEffect:"1",chapterMin:1,chapterMax:10,instanceMin:1,instanceMax:100,weight:1e3,addWeight:3e3,recommendValue:35e3,isNianInstance:1},{id:32,groupID:12,level:1,quality:2,name:"1116",desc:"1047",shortDesc:"3111",superShortDesc:"200011",icon:"battleSkill/BattleSkill_Skill_Icon6",subscript:"battleSkill/BattleSkill_Skill_Icon_Angle2",tipsSkillBg:"BattleSkill_SkillBg_Blue",stopTipsSkillBg:"HeroSkill_IconBg_Blue",typeList:[4],effectType:2,natureList:[12,0,1],triggerProbability:3e3,lastTime:2e3,lastEffect:"1",chapterMin:1,chapterMax:10,instanceMin:1,instanceMax:100,weight:1e3,addWeight:3e3,recommendValue:35001,isNianInstance:1},{id:33,groupID:13,level:1,quality:3,name:"1117",desc:"1048",shortDesc:"3112",superShortDesc:"200012",icon:"battleSkill/BattleSkill_Skill_Icon10",subscript:"battleSkill/BattleSkill_Skill_Icon_Angle1",tipsSkillBg:"BattleSkill_SkillBg_Purple",stopTipsSkillBg:"HeroSkill_IconBg_Purple",typeList:[2],effectType:1,natureList:[18,1,1e4],triggerProbability:1e4,lastTime:-1,chapterMin:1,chapterMax:10,instanceMin:1,instanceMax:100,weight:1,addWeight:2e3,recommendValue:1000001,isNianInstance:1},{id:34,groupID:14,level:1,quality:3,name:"1118",desc:"1049",shortDesc:"3113",superShortDesc:"200013",icon:"battleSkill/BattleSkill_Skill_Icon4",subscript:"battleSkill/BattleSkill_Skill_Icon_Angle3",tipsSkillBg:"BattleSkill_SkillBg_Purple",stopTipsSkillBg:"HeroSkill_IconBg_Purple",typeList:[1],effectType:1,natureList:[19,1,1e4],triggerProbability:5e3,lastTime:-1,chapterMin:1,chapterMax:10,instanceMin:1,instanceMax:100,weight:1,addWeight:2e3,recommendValue:1000002,isNianInstance:1},{id:35,groupID:15,level:1,quality:3,name:"1119",desc:"1050",shortDesc:"3114",superShortDesc:"200014",icon:"battleSkill/BattleSkill_Skill_Icon3",subscript:"battleSkill/BattleSkill_Skill_Icon_Angle4",tipsSkillBg:"BattleSkill_SkillBg_Purple",stopTipsSkillBg:"HeroSkill_IconBg_Purple",typeList:[3],effectType:1,natureList:[20,0,1],triggerProbability:5e3,lastTime:-1,chapterMin:1,chapterMax:10,instanceMin:1,instanceMax:100,weight:1,addWeight:2e3,recommendValue:1000003,isNianInstance:1},{id:36,groupID:16,level:1,quality:3,name:"1120",desc:"1051",shortDesc:"3115",superShortDesc:"200015",icon:"battleSkill/BattleSkill_Skill_Icon9",subscript:"battleSkill/BattleSkill_Skill_Icon_Angle2",tipsSkillBg:"BattleSkill_SkillBg_Purple",stopTipsSkillBg:"HeroSkill_IconBg_Purple",typeList:[4],effectType:2,natureList:[13,1,3e3],natureMax:1e5,triggerProbability:1e4,lastTime:-1,lastEffect:"1",chapterMin:1,chapterMax:10,instanceMin:1,instanceMax:100,weight:1,addWeight:2e3,recommendValue:1000004,isNianInstance:1},{id:37,groupID:17,level:1,quality:3,name:"1231",desc:"1235",shortDesc:"3116",superShortDesc:"200016",icon:"battleSkill/BattleSkill_Skill_Icon12",tipsSkillBg:"BattleSkill_SkillBg_Purple",stopTipsSkillBg:"HeroSkill_IconBg_Purple",typeList:[1,2,3,4,5],effectType:1,natureList:[28,1,1e4],triggerProbability:3e3,lastTime:-1,chapterMin:1,chapterMax:10,instanceMin:1,instanceMax:100,weight:100,addWeight:500,recommendValue:5000006,isNianInstance:0},{id:38,groupID:18,level:1,quality:1,name:"1232",desc:"1236",shortDesc:"3117",superShortDesc:"200017",icon:"battleSkill/BattleSkill_Skill_Icon11",tipsSkillBg:"BattleSkill_SkillBg_Green",stopTipsSkillBg:"HeroSkill_IconBg_Green",typeList:[1,2,3,4],effectType:1,natureList:[29,1,3e3],triggerProbability:1e4,lastTime:-1,chapterMin:1,chapterMax:10,instanceMin:1,instanceMax:100,weight:1e3,addWeight:3e3,recommendValue:1,isNianInstance:0},{id:39,groupID:19,level:1,quality:2,name:"1233",desc:"1237",shortDesc:"3118",superShortDesc:"200018",icon:"battleSkill/BattleSkill_Skill_Icon14",tipsSkillBg:"BattleSkill_SkillBg_Blue",stopTipsSkillBg:"HeroSkill_IconBg_Blue",typeList:[2,5],effectType:1,natureList:[30,0,1],triggerProbability:1e4,lastTime:-1,chapterMin:100,chapterMax:100,instanceMin:1,instanceMax:100,weight:1e3,addWeight:3e3,recommendValue:32004,isNianInstance:0},{id:40,groupID:20,level:1,quality:3,name:"1234",desc:"1238",shortDesc:"3119",superShortDesc:"200019",icon:"battleSkill/BattleSkill_Skill_Icon13",tipsSkillBg:"BattleSkill_SkillBg_Purple",stopTipsSkillBg:"HeroSkill_IconBg_Purple",typeList:[5],effectType:1,natureList:[31,1,3e3],triggerProbability:1e4,lastTime:-1,chapterMin:1,chapterMax:10,instanceMin:1,instanceMax:100,weight:100,addWeight:500,recommendValue:6000005,isNianInstance:1}],cc._RF.pop()},{}],Json_TowerQualityType:[function(e,t){"use strict";cc._RF.push(t,"08a02YaPudO975JSbJf/VkM","Json_TowerQualityType"),e("Aft").JsonData.TowerQualityType=[{id:101,towerType:1,level:1,starNum:0,towerLevel:30,diamond:100,attrType:16,desc:"1128",attrValue:[14,0],fightValue:1e4,heroGrid:1,iconFont:"TowerUpgrade_QualityBg_Green1",bg:"TowerUpgrade_QualityBg_Green",autoUpgradeBg:"Hero_Quality_Bg_Green",autoUpgradeFontColor:"42c502",qualityName:"1926",qualityUnlockName:"1926",handbookBg:"Pictorial_Quality_Green",handbookLockBg:"Pictorial_Locked_Green",starBgNum:0},{id:102,towerType:1,level:2,starNum:0,towerLevel:60,diamond:200,attrType:16,desc:"1128",attrValue:[14,1e3],attack:1e3,fightValue:11e3,heroGrid:2,iconFont:"TowerUpgrade_QualityBg_Blue1",bg:"TowerUpgrade_QualityBg_Blue",autoUpgradeBg:"Hero_Quality_Bg_Blue",autoUpgradeFontColor:"2dbaf5",qualityName:"1927",qualityUnlockName:"1927",handbookBg:"Pictorial_Quality_Blue",handbookLockBg:"Pictorial_Locked_Blue",starBgNum:2},{id:103,towerType:1,level:3,starNum:1,towerLevel:120,diamond:300,attrType:16,desc:"1128",attrValue:[14,2e3],attack:2e3,fightValue:12e3,iconFont:"TowerUpgrade_QualityBg_Blue1",bg:"TowerUpgrade_QualityBg_Blue",autoUpgradeBg:"Hero_Quality_Bg_Blue",autoUpgradeFontColor:"2dbaf5",qualityName:"1927",qualityUnlockName:"1928",handbookBg:"Pictorial_Quality_Blue",handbookLockBg:"Pictorial_Locked_Blue",starBgNum:2},{id:104,towerType:1,level:4,starNum:2,towerLevel:240,diamond:400,attrType:16,desc:"1128",attrValue:[14,3e3],attack:3e3,fightValue:13e3,iconFont:"TowerUpgrade_QualityBg_Blue1",bg:"TowerUpgrade_QualityBg_Blue",autoUpgradeBg:"Hero_Quality_Bg_Blue",autoUpgradeFontColor:"2dbaf5",qualityName:"1927",qualityUnlockName:"1929",handbookBg:"Pictorial_Quality_Blue",handbookLockBg:"Pictorial_Locked_Blue",starBgNum:2},{id:105,towerType:1,level:5,starNum:0,towerLevel:360,diamond:500,attrType:16,desc:"1128",attrValue:[14,4e3],attack:4e3,fightValue:14e3,iconFont:"TowerUpgrade_QualityBg_Purple1",bg:"TowerUpgrade_QualityBg_Purple",autoUpgradeBg:"Hero_Quality_Bg_Purple",autoUpgradeFontColor:"bf5dff",qualityName:"1930",qualityUnlockName:"1930",handbookBg:"Pictorial_Quality_Purple",handbookLockBg:"Pictorial_Locked_Purple",starBgNum:3},{id:106,towerType:1,level:6,starNum:1,towerLevel:480,diamond:600,attrType:16,desc:"1128",attrValue:[14,5e3],attack:5e3,fightValue:15e3,iconFont:"TowerUpgrade_QualityBg_Purple1",bg:"TowerUpgrade_QualityBg_Purple",autoUpgradeBg:"Hero_Quality_Bg_Purple",autoUpgradeFontColor:"bf5dff",qualityName:"1930",qualityUnlockName:"1931",handbookBg:"Pictorial_Quality_Purple",handbookLockBg:"Pictorial_Locked_Purple",starBgNum:3},{id:107,towerType:1,level:7,starNum:2,towerLevel:600,diamond:800,attrType:16,desc:"1128",attrValue:[14,6e3],attack:6e3,fightValue:16e3,iconFont:"TowerUpgrade_QualityBg_Purple1",bg:"TowerUpgrade_QualityBg_Purple",autoUpgradeBg:"Hero_Quality_Bg_Purple",autoUpgradeFontColor:"bf5dff",qualityName:"1930",qualityUnlockName:"1932",handbookBg:"Pictorial_Quality_Purple",handbookLockBg:"Pictorial_Locked_Purple",starBgNum:3},{id:108,towerType:1,level:8,starNum:3,towerLevel:720,diamond:1e3,attrType:16,desc:"1128",attrValue:[14,8e3],attack:8e3,fightValue:18e3,iconFont:"TowerUpgrade_QualityBg_Purple1",bg:"TowerUpgrade_QualityBg_Purple",autoUpgradeBg:"Hero_Quality_Bg_Purple",autoUpgradeFontColor:"bf5dff",qualityName:"1930",qualityUnlockName:"1933",handbookBg:"Pictorial_Quality_Purple",handbookLockBg:"Pictorial_Locked_Purple",starBgNum:3},{id:109,towerType:1,level:9,starNum:0,towerLevel:840,diamond:1e3,attrType:16,desc:"1128",attrValue:[14,1e4],attack:1e4,fightValue:2e4,iconFont:"TowerUpgrade_QualityBg_Orange1",bg:"TowerUpgrade_QualityBg_Orange",autoUpgradeBg:"Hero_Quality_Bg_Orange",autoUpgradeFontColor:"ff9500",qualityName:"1934",qualityUnlockName:"1934",handbookBg:"Pictorial_Quality_Orange",handbookLockBg:"Pictorial_Locked_Orange",starBgNum:0},{id:201,towerType:2,level:1,starNum:0,towerLevel:30,diamond:100,attrType:16,desc:"1128",attrValue:[14,0],fightValue:1e4,heroGrid:1,iconFont:"TowerUpgrade_QualityBg_Green1",bg:"TowerUpgrade_QualityBg_Green",autoUpgradeBg:"Hero_Quality_Bg_Green",autoUpgradeFontColor:"42c502",qualityName:"1926",qualityUnlockName:"1926",handbookBg:"Pictorial_Quality_Green",handbookLockBg:"Pictorial_Locked_Green",starBgNum:0},{id:202,towerType:2,level:2,starNum:0,towerLevel:60,diamond:200,attrType:16,desc:"1128",attrValue:[14,1e3],attack:1e3,hp:1e3,fightValue:11e3,heroGrid:2,iconFont:"TowerUpgrade_QualityBg_Blue1",bg:"TowerUpgrade_QualityBg_Blue",autoUpgradeBg:"Hero_Quality_Bg_Blue",autoUpgradeFontColor:"2dbaf5",qualityName:"1927",qualityUnlockName:"1927",handbookBg:"Pictorial_Quality_Blue",handbookLockBg:"Pictorial_Locked_Blue",starBgNum:2},{id:203,towerType:2,level:3,starNum:1,towerLevel:120,diamond:300,attrType:16,desc:"1128",attrValue:[14,2e3],attack:2e3,hp:2e3,fightValue:12e3,iconFont:"TowerUpgrade_QualityBg_Blue1",bg:"TowerUpgrade_QualityBg_Blue",autoUpgradeBg:"Hero_Quality_Bg_Blue",autoUpgradeFontColor:"2dbaf5",qualityName:"1927",qualityUnlockName:"1928",handbookBg:"Pictorial_Quality_Blue",handbookLockBg:"Pictorial_Locked_Blue",starBgNum:2},{id:204,towerType:2,level:4,starNum:2,towerLevel:240,diamond:400,attrType:16,desc:"1128",attrValue:[14,3e3],attack:3e3,hp:3e3,fightValue:13e3,iconFont:"TowerUpgrade_QualityBg_Blue1",bg:"TowerUpgrade_QualityBg_Blue",autoUpgradeBg:"Hero_Quality_Bg_Blue",autoUpgradeFontColor:"2dbaf5",qualityName:"1927",qualityUnlockName:"1929",handbookBg:"Pictorial_Quality_Blue",handbookLockBg:"Pictorial_Locked_Blue",starBgNum:2},{id:205,towerType:2,level:5,starNum:0,towerLevel:360,diamond:500,attrType:16,desc:"1128",attrValue:[14,4e3],attack:4e3,hp:4e3,fightValue:14e3,iconFont:"TowerUpgrade_QualityBg_Purple1",bg:"TowerUpgrade_QualityBg_Purple",autoUpgradeBg:"Hero_Quality_Bg_Purple",autoUpgradeFontColor:"bf5dff",qualityName:"1930",qualityUnlockName:"1930",handbookBg:"Pictorial_Quality_Purple",handbookLockBg:"Pictorial_Locked_Purple",starBgNum:3},{id:206,towerType:2,level:6,starNum:1,towerLevel:480,diamond:600,attrType:16,desc:"1128",attrValue:[14,5e3],attack:5e3,hp:5e3,fightValue:15e3,iconFont:"TowerUpgrade_QualityBg_Purple1",bg:"TowerUpgrade_QualityBg_Purple",autoUpgradeBg:"Hero_Quality_Bg_Purple",autoUpgradeFontColor:"bf5dff",qualityName:"1930",qualityUnlockName:"1931",handbookBg:"Pictorial_Quality_Purple",handbookLockBg:"Pictorial_Locked_Purple",starBgNum:3},{id:207,towerType:2,level:7,starNum:2,towerLevel:600,diamond:800,attrType:16,desc:"1128",attrValue:[14,6e3],attack:6e3,hp:6e3,fightValue:16e3,iconFont:"TowerUpgrade_QualityBg_Purple1",bg:"TowerUpgrade_QualityBg_Purple",autoUpgradeBg:"Hero_Quality_Bg_Purple",autoUpgradeFontColor:"bf5dff",qualityName:"1930",qualityUnlockName:"1932",handbookBg:"Pictorial_Quality_Purple",handbookLockBg:"Pictorial_Locked_Purple",starBgNum:3},{id:208,towerType:2,level:8,starNum:3,towerLevel:720,diamond:1e3,attrType:16,desc:"1128",attrValue:[14,8e3],attack:8e3,hp:8e3,fightValue:18e3,iconFont:"TowerUpgrade_QualityBg_Purple1",bg:"TowerUpgrade_QualityBg_Purple",autoUpgradeBg:"Hero_Quality_Bg_Purple",autoUpgradeFontColor:"bf5dff",qualityName:"1930",qualityUnlockName:"1933",handbookBg:"Pictorial_Quality_Purple",handbookLockBg:"Pictorial_Locked_Purple",starBgNum:3},{id:209,towerType:2,level:9,starNum:0,towerLevel:840,diamond:1e3,attrType:16,desc:"1128",attrValue:[14,1e4],attack:1e4,hp:1e4,fightValue:2e4,iconFont:"TowerUpgrade_QualityBg_Orange1",bg:"TowerUpgrade_QualityBg_Orange",autoUpgradeBg:"Hero_Quality_Bg_Orange",autoUpgradeFontColor:"ff9500",qualityName:"1934",qualityUnlockName:"1934",handbookBg:"Pictorial_Quality_Orange",handbookLockBg:"Pictorial_Locked_Orange",starBgNum:0},{id:301,towerType:3,level:1,starNum:0,towerLevel:30,diamond:100,attrType:16,desc:"1128",attrValue:[14,0],fightValue:1e4,heroGrid:1,iconFont:"TowerUpgrade_QualityBg_Green1",bg:"TowerUpgrade_QualityBg_Green",autoUpgradeBg:"Hero_Quality_Bg_Green",autoUpgradeFontColor:"42c502",qualityName:"1926",qualityUnlockName:"1926",handbookBg:"Pictorial_Quality_Green",handbookLockBg:"Pictorial_Locked_Green",starBgNum:0},{id:302,towerType:3,level:2,starNum:0,towerLevel:60,diamond:200,attrType:16,desc:"1128",attrValue:[14,1e3],attack:1e3,fightValue:11e3,heroGrid:2,iconFont:"TowerUpgrade_QualityBg_Blue1",bg:"TowerUpgrade_QualityBg_Blue",autoUpgradeBg:"Hero_Quality_Bg_Blue",autoUpgradeFontColor:"2dbaf5",qualityName:"1927",qualityUnlockName:"1927",handbookBg:"Pictorial_Quality_Blue",handbookLockBg:"Pictorial_Locked_Blue",starBgNum:2},{id:303,towerType:3,level:3,starNum:1,towerLevel:120,diamond:300,attrType:16,desc:"1128",attrValue:[14,2e3],attack:2e3,fightValue:12e3,iconFont:"TowerUpgrade_QualityBg_Blue1",bg:"TowerUpgrade_QualityBg_Blue",autoUpgradeBg:"Hero_Quality_Bg_Blue",autoUpgradeFontColor:"2dbaf5",qualityName:"1927",qualityUnlockName:"1928",handbookBg:"Pictorial_Quality_Blue",handbookLockBg:"Pictorial_Locked_Blue",starBgNum:2},{id:304,towerType:3,level:4,starNum:2,towerLevel:240,diamond:400,attrType:16,desc:"1128",attrValue:[14,3e3],attack:3e3,fightValue:13e3,iconFont:"TowerUpgrade_QualityBg_Blue1",bg:"TowerUpgrade_QualityBg_Blue",autoUpgradeBg:"Hero_Quality_Bg_Blue",autoUpgradeFontColor:"2dbaf5",qualityName:"1927",qualityUnlockName:"1929",handbookBg:"Pictorial_Quality_Blue",handbookLockBg:"Pictorial_Locked_Blue",starBgNum:2},{id:305,towerType:3,level:5,starNum:0,towerLevel:360,diamond:500,attrType:16,desc:"1128",attrValue:[14,4e3],attack:4e3,fightValue:14e3,iconFont:"TowerUpgrade_QualityBg_Purple1",bg:"TowerUpgrade_QualityBg_Purple",autoUpgradeBg:"Hero_Quality_Bg_Purple",autoUpgradeFontColor:"bf5dff",qualityName:"1930",qualityUnlockName:"1930",handbookBg:"Pictorial_Quality_Purple",handbookLockBg:"Pictorial_Locked_Purple",starBgNum:3},{id:306,towerType:3,level:6,starNum:1,towerLevel:480,diamond:600,attrType:16,desc:"1128",attrValue:[14,5e3],attack:5e3,fightValue:15e3,iconFont:"TowerUpgrade_QualityBg_Purple1",bg:"TowerUpgrade_QualityBg_Purple",autoUpgradeBg:"Hero_Quality_Bg_Purple",autoUpgradeFontColor:"bf5dff",qualityName:"1930",qualityUnlockName:"1931",handbookBg:"Pictorial_Quality_Purple",handbookLockBg:"Pictorial_Locked_Purple",starBgNum:3},{id:307,towerType:3,level:7,starNum:2,towerLevel:600,diamond:800,attrType:16,desc:"1128",attrValue:[14,6e3],attack:6e3,fightValue:16e3,iconFont:"TowerUpgrade_QualityBg_Purple1",bg:"TowerUpgrade_QualityBg_Purple",autoUpgradeBg:"Hero_Quality_Bg_Purple",autoUpgradeFontColor:"bf5dff",qualityName:"1930",qualityUnlockName:"1932",handbookBg:"Pictorial_Quality_Purple",handbookLockBg:"Pictorial_Locked_Purple",starBgNum:3},{id:308,towerType:3,level:8,starNum:3,towerLevel:720,diamond:1e3,attrType:16,desc:"1128",attrValue:[14,8e3],attack:8e3,fightValue:18e3,iconFont:"TowerUpgrade_QualityBg_Purple1",bg:"TowerUpgrade_QualityBg_Purple",autoUpgradeBg:"Hero_Quality_Bg_Purple",autoUpgradeFontColor:"bf5dff",qualityName:"1930",qualityUnlockName:"1933",handbookBg:"Pictorial_Quality_Purple",handbookLockBg:"Pictorial_Locked_Purple",starBgNum:3},{id:309,towerType:3,level:9,starNum:0,towerLevel:840,diamond:1e3,attrType:16,desc:"1128",attrValue:[14,1e4],attack:1e4,fightValue:2e4,iconFont:"TowerUpgrade_QualityBg_Orange1",bg:"TowerUpgrade_QualityBg_Orange",autoUpgradeBg:"Hero_Quality_Bg_Orange",autoUpgradeFontColor:"ff9500",qualityName:"1934",qualityUnlockName:"1934",handbookBg:"Pictorial_Quality_Orange",handbookLockBg:"Pictorial_Locked_Orange",starBgNum:0},{id:401,towerType:4,level:1,starNum:0,towerLevel:30,diamond:100,attrType:16,desc:"1128",attrValue:[14,0],fightValue:1e4,heroGrid:1,iconFont:"TowerUpgrade_QualityBg_Green1",bg:"TowerUpgrade_QualityBg_Green",autoUpgradeBg:"Hero_Quality_Bg_Green",autoUpgradeFontColor:"42c502",qualityName:"1926",qualityUnlockName:"1926",handbookBg:"Pictorial_Quality_Green",handbookLockBg:"Pictorial_Locked_Green",starBgNum:0},{id:402,towerType:4,level:2,starNum:0,towerLevel:60,diamond:200,attrType:16,desc:"1128",attrValue:[14,1e3],attack:1e3,fightValue:11e3,heroGrid:2,iconFont:"TowerUpgrade_QualityBg_Blue1",bg:"TowerUpgrade_QualityBg_Blue",autoUpgradeBg:"Hero_Quality_Bg_Blue",autoUpgradeFontColor:"2dbaf5",qualityName:"1927",qualityUnlockName:"1927",handbookBg:"Pictorial_Quality_Blue",handbookLockBg:"Pictorial_Locked_Blue",starBgNum:2},{id:403,towerType:4,level:3,starNum:1,towerLevel:120,diamond:300,attrType:16,desc:"1128",attrValue:[14,2e3],attack:2e3,fightValue:12e3,iconFont:"TowerUpgrade_QualityBg_Blue1",bg:"TowerUpgrade_QualityBg_Blue",autoUpgradeBg:"Hero_Quality_Bg_Blue",autoUpgradeFontColor:"2dbaf5",qualityName:"1927",qualityUnlockName:"1928",handbookBg:"Pictorial_Quality_Blue",handbookLockBg:"Pictorial_Locked_Blue",starBgNum:2},{id:404,towerType:4,level:4,starNum:2,towerLevel:240,diamond:400,attrType:16,desc:"1128",attrValue:[14,3e3],attack:3e3,fightValue:13e3,iconFont:"TowerUpgrade_QualityBg_Blue1",bg:"TowerUpgrade_QualityBg_Blue",autoUpgradeBg:"Hero_Quality_Bg_Blue",autoUpgradeFontColor:"2dbaf5",qualityName:"1927",qualityUnlockName:"1929",handbookBg:"Pictorial_Quality_Blue",handbookLockBg:"Pictorial_Locked_Blue",starBgNum:2},{id:405,towerType:4,level:5,starNum:0,towerLevel:360,diamond:500,attrType:16,desc:"1128",attrValue:[14,4e3],attack:4e3,fightValue:14e3,iconFont:"TowerUpgrade_QualityBg_Purple1",bg:"TowerUpgrade_QualityBg_Purple",autoUpgradeBg:"Hero_Quality_Bg_Purple",autoUpgradeFontColor:"bf5dff",qualityName:"1930",qualityUnlockName:"1930",handbookBg:"Pictorial_Quality_Purple",handbookLockBg:"Pictorial_Locked_Purple",starBgNum:3},{id:406,towerType:4,level:6,starNum:1,towerLevel:480,diamond:600,attrType:16,desc:"1128",attrValue:[14,5e3],attack:5e3,fightValue:15e3,iconFont:"TowerUpgrade_QualityBg_Purple1",bg:"TowerUpgrade_QualityBg_Purple",autoUpgradeBg:"Hero_Quality_Bg_Purple",autoUpgradeFontColor:"bf5dff",qualityName:"1930",qualityUnlockName:"1931",handbookBg:"Pictorial_Quality_Purple",handbookLockBg:"Pictorial_Locked_Purple",starBgNum:3},{id:407,towerType:4,level:7,starNum:2,towerLevel:600,diamond:800,attrType:16,desc:"1128",attrValue:[14,6e3],attack:6e3,fightValue:16e3,iconFont:"TowerUpgrade_QualityBg_Purple1",bg:"TowerUpgrade_QualityBg_Purple",autoUpgradeBg:"Hero_Quality_Bg_Purple",autoUpgradeFontColor:"bf5dff",qualityName:"1930",qualityUnlockName:"1932",handbookBg:"Pictorial_Quality_Purple",handbookLockBg:"Pictorial_Locked_Purple",starBgNum:3},{id:408,towerType:4,level:8,starNum:3,towerLevel:720,diamond:1e3,attrType:16,desc:"1128",attrValue:[14,8e3],attack:8e3,fightValue:18e3,iconFont:"TowerUpgrade_QualityBg_Purple1",bg:"TowerUpgrade_QualityBg_Purple",autoUpgradeBg:"Hero_Quality_Bg_Purple",autoUpgradeFontColor:"bf5dff",qualityName:"1930",qualityUnlockName:"1933",handbookBg:"Pictorial_Quality_Purple",handbookLockBg:"Pictorial_Locked_Purple",starBgNum:3},{id:409,towerType:4,level:9,starNum:0,towerLevel:840,diamond:1e3,attrType:16,desc:"1128",attrValue:[14,1e4],attack:1e4,fightValue:2e4,iconFont:"TowerUpgrade_QualityBg_Orange1",bg:"TowerUpgrade_QualityBg_Orange",autoUpgradeBg:"Hero_Quality_Bg_Orange",autoUpgradeFontColor:"ff9500",qualityName:"1934",qualityUnlockName:"1934",handbookBg:"Pictorial_Quality_Orange",handbookLockBg:"Pictorial_Locked_Orange",starBgNum:0}],cc._RF.pop()},{}],Json_TowerType:[function(e,t){"use strict";cc._RF.push(t,"48afcAWMvRE/JAohydUbPCW","Json_TowerType"),e("Aft").JsonData.TowerType=[{id:1,order:1,name:"1121",desc:"1064",maxValue:[40,3e3,240],spin:"tower1_1",typeIcon:"Hero_Profession_Icon3",buildAudio:"tower_buliding_common",upgradeAudio:"tower_buliding_common",saleAudio:"tower_sale_common",isPremultipliedAlpha:0,starNum:1,instanceNum:[1,1],actionName:"stand_left",towerIcon:"FightPowerRecommend_Tower_Icon3",groupId:1,basePower:55,baseGold:231},{id:2,order:2,name:"1101",desc:"1065",maxValue:[40,200,30,20],spin:"tower3_1",typeIcon:"Hero_Profession_Icon1",buildAudio:"tower_buliding_common",upgradeAudio:"tower_buliding_common",shotAudio:"tower_build_soldiers_one",saleAudio:"tower_sale_common",isPremultipliedAlpha:0,starNum:1,instanceNum:[1,2],actionName:"stand",towerIcon:"FightPowerRecommend_Tower_Icon1",groupId:1,basePower:55,baseGold:231},{id:3,order:4,name:"1100",desc:"1066",maxValue:[64,3e3,240],spin:"tower2_1",typeIcon:"Hero_Profession_Icon4",buildAudio:"tower_buliding_common",upgradeAudio:"tower_buliding_common",saleAudio:"tower_sale_common",isPremultipliedAlpha:1,starNum:1,instanceNum:[1,4],actionName:"stand",towerIcon:"FightPowerRecommend_Tower_Icon4",groupId:1,basePower:77,baseGold:323},{id:4,order:3,name:"1102",desc:"1067",maxValue:[44,3e3,240],spin:"tower4_1",typeIcon:"Hero_Profession_Icon2",buildAudio:"tower_buliding_common",upgradeAudio:"tower_buliding_common",saleAudio:"tower_sale_common",isPremultipliedAlpha:1,starNum:1,instanceNum:[1,3],actionName:"stand_left",towerIcon:"FightPowerRecommend_Tower_Icon2",groupId:1,basePower:72,baseGold:300}],cc._RF.pop()},{}],Json_Tower:[function(e,t){"use strict";cc._RF.push(t,"25f2dWBZqBNOYvjhSeIwUcF","Json_Tower"),e("Aft").JsonData.Tower=[{id:101,typeID:1,level:1,bullet:1,isFly:1,isBurrow:0,remoteDamageRate:1e4,aimingPoint:1,spend:70,physicalAttack:20,magicAttack:0,speed:800,upBaseSpeed:8e3,range:200,critRate:1e3,name:"1052",desc:"1064",appearance:"tower1_1",isPremultipliedAlpha:0,gunMuzzle:[[2,54],[2,28],[-17,41],[14,41]],icon:"Pictorial_Level1_Tower3",bubblePoint:[0,110],sealHeightOffset:50},{id:102,typeID:1,level:2,bullet:2,isFly:1,isBurrow:0,remoteDamageRate:1e4,aimingPoint:1,spend:110,physicalAttack:38,magicAttack:0,speed:600,upBaseSpeed:8e3,range:210,critRate:1e3,name:"1053",desc:"1064",appearance:"tower1_2",isPremultipliedAlpha:0,gunMuzzle:[[2,58],[-2,38],[-17,43],[14,43]],icon:"Pictorial_Level2_Tower3",bubblePoint:[0,110],sealHeightOffset:50},{id:103,typeID:1,level:3,bullet:3,isFly:1,isBurrow:0,remoteDamageRate:1e4,aimingPoint:1,spend:160,physicalAttack:52,magicAttack:0,speed:500,upBaseSpeed:8e3,range:220,critRate:1e3,name:"1054",desc:"1064",appearance:"tower1_3",isPremultipliedAlpha:0,gunMuzzle:[[2,72],[-2,44],[-17,52],[14,52]],icon:"Pictorial_Level3_Tower3",bubblePoint:[0,110],sealHeightOffset:50},{id:104,typeID:1,level:4,bullet:38,isFly:1,isBurrow:0,remoteDamageRate:5e3,aimingPoint:1,spend:250,physicalAttack:80,magicAttack:0,speed:500,upBaseSpeed:8e3,range:220,critRate:1e3,name:"2201",desc:"2301",appearance:"tower1_5",isPremultipliedAlpha:1,gunMuzzle:[[2,84],[2,71],[-14,76],[12,76]],heroId:43004,heroBuildPrice:300,heroBuildPriceAdd:100,heroDefaultAction:"stand_down",icon:"Pictorial_Level5_Tower3",heroTowerIcon:"FightPowerRecommend_Soldier_Icon6",bubblePoint:[0,110],sealHeightOffset:50},{id:105,typeID:1,level:4,bullet:35,isFly:1,isBurrow:0,remoteDamageRate:1e4,aimingPoint:1,spend:250,physicalAttack:120,magicAttack:0,speed:1e3,upBaseSpeed:8e3,range:275,critRate:1e3,name:"2202",desc:"2302",appearance:"tower1_4",isPremultipliedAlpha:1,gunMuzzle:[[2,94],[2,81],[-14,86],[12,86]],heroId:43005,heroBuildPrice:300,heroBuildPriceAdd:100,heroDefaultAction:"stand_down",icon:"Pictorial_Level4_Tower3",heroTowerIcon:"FightPowerRecommend_Soldier_Icon3",bubblePoint:[0,110],sealHeightOffset:50},{id:106,typeID:1,level:4,bullet:54,isFly:1,isBurrow:0,remoteDamageRate:6e3,aimingPoint:1,spend:250,physicalAttack:80,magicAttack:0,speed:500,upBaseSpeed:8e3,range:220,critRate:1e3,name:"2212",desc:"2312",appearance:"tower1_6",isPremultipliedAlpha:1,gunMuzzle:[[2,84],[2,71],[-14,76],[12,76]],heroId:43009,heroBuildPrice:300,heroBuildPriceAdd:100,heroDefaultAction:"stand_down",icon:"Pictorial_Level6_Tower3",heroTowerIcon:"FightPowerRecommend_Soldier_Icon10",bubblePoint:[0,110],sealHeightOffset:50},{id:201,typeID:2,level:1,isFly:0,isBurrow:0,remoteDamageRate:1e4,spend:70,physicalAttack:0,magicAttack:0,range:200,recruitSoldiersList:[41001,1e4,3],name:"1055",desc:"1065",appearance:"tower3_1",isPremultipliedAlpha:0,gunMuzzle:[[0,0],[0,0],[0,0],[0,0]],icon:"Pictorial_Level1_Tower1",bubblePoint:[0,80],sealHeightOffset:20},{id:202,typeID:2,level:2,isFly:0,isBurrow:0,remoteDamageRate:1e4,spend:110,physicalAttack:0,magicAttack:0,range:200,recruitSoldiersList:[41002,1e4,3],name:"1056",desc:"1065",appearance:"tower3_2",isPremultipliedAlpha:0,gunMuzzle:[[0,0],[0,0],[0,0],[0,0]],icon:"Pictorial_Level2_Tower1",bubblePoint:[0,80],sealHeightOffset:20},{id:203,typeID:2,level:3,isFly:0,isBurrow:0,remoteDamageRate:1e4,spend:160,physicalAttack:0,magicAttack:0,range:200,recruitSoldiersList:[41003,1e4,3],name:"1057",desc:"1065",appearance:"tower3_3",isPremultipliedAlpha:0,gunMuzzle:[[0,0],[0,0],[0,0],[0,0]],icon:"Pictorial_Level3_Tower1",bubblePoint:[0,80],sealHeightOffset:20},{id:204,typeID:2,level:4,isFly:0,isBurrow:0,remoteDamageRate:1e4,spend:250,physicalAttack:0,magicAttack:0,range:200,recruitSoldiersList:[44102,1e4,3],name:"2203",desc:"2303",appearance:"tower3_4",isPremultipliedAlpha:1,gunMuzzle:[[0,0],[0,0],[0,0],[0,0]],heroId:43002,heroBuildPrice:300,heroBuildPriceAdd:100,heroDefaultAction:"stand_left",icon:"Pictorial_Level5_Tower1",heroTowerIcon:"FightPowerRecommend_Soldier_Icon7",bubblePoint:[0,80],sealHeightOffset:20},{id:205,typeID:2,level:4,isFly:0,isBurrow:0,remoteDamageRate:1e4,spend:250,physicalAttack:0,magicAttack:0,range:200,recruitSoldiersList:[44106,1e4,3],name:"2204",desc:"2304",appearance:"tower3_5",isPremultipliedAlpha:1,gunMuzzle:[[0,0],[0,0],[0,0],[0,0]],heroId:43006,heroBuildPrice:300,heroBuildPriceAdd:100,heroDefaultAction:"stand_right",icon:"Pictorial_Level4_Tower1",heroTowerIcon:"FightPowerRecommend_Soldier_Icon5",bubblePoint:[0,80],sealHeightOffset:20},{id:206,typeID:2,level:4,isFly:0,isBurrow:0,remoteDamageRate:1e4,spend:250,physicalAttack:0,magicAttack:0,range:200,recruitSoldiersList:[44202,1e4,3],name:"2205",desc:"2305",appearance:"tower3_4",isPremultipliedAlpha:1,gunMuzzle:[[0,0],[0,0],[0,0],[0,0]],heroId:43102,heroBuildPrice:300,heroBuildPriceAdd:100,heroDefaultAction:"stand_left",icon:"Pictorial_Level6_Tower1",heroTowerIcon:"FightPowerRecommend_Soldier_Icon7_True",bubblePoint:[0,80],sealHeightOffset:20},{id:207,typeID:2,level:4,isFly:0,isBurrow:0,remoteDamageRate:1e4,spend:250,physicalAttack:0,magicAttack:0,range:200,recruitSoldiersList:[44110,1e4,3],name:"2213",desc:"2313",appearance:"tower3_6",isPremultipliedAlpha:1,gunMuzzle:[[0,0],[0,0],[0,0],[0,0]],heroId:43010,heroBuildPrice:300,heroBuildPriceAdd:100,heroDefaultAction:"stand_left",icon:"Pictorial_Level7_Tower1",heroTowerIcon:"FightPowerRecommend_Soldier_Icon12",bubblePoint:[0,80],sealHeightOffset:20},{id:208,typeID:2,level:4,isFly:0,isBurrow:0,remoteDamageRate:1e4,spend:250,physicalAttack:0,magicAttack:0,range:200,recruitSoldiersList:[44114,1e4,3],name:"2216",desc:"82316",appearance:"tower3_7",isPremultipliedAlpha:1,gunMuzzle:[[0,0],[0,0],[0,0],[0,0]],heroId:43014,heroBuildPrice:300,heroBuildPriceAdd:100,heroDefaultAction:"stand_left",icon:"Pictorial_Level8_Tower1",heroTowerIcon:"FightPowerRecommend_Soldier_Icon13",bubblePoint:[0,80],sealHeightOffset:20},{id:301,typeID:3,level:1,bullet:4,isFly:0,isBurrow:1,remoteDamageRate:1e4,aimingPoint:2,spend:125,physicalAttack:40,magicAttack:0,speed:2500,upBaseSpeed:8e3,range:220,critRate:500,ignorePhysicalDefense:2e3,name:"1058",desc:"1066",appearance:"tower2_1",isPremultipliedAlpha:1,gunMuzzle:[[0,36],[0,36],[0,36],[0,36]],icon:"Pictorial_Level1_Tower4",bubblePoint:[0,80],sealHeightOffset:20},{id:302,typeID:3,level:2,bullet:5,isFly:0,isBurrow:1,remoteDamageRate:1e4,aimingPoint:2,spend:220,physicalAttack:104,magicAttack:0,speed:2500,upBaseSpeed:8e3,range:230,critRate:500,ignorePhysicalDefense:3e3,name:"1059",desc:"1066",appearance:"tower2_2",isPremultipliedAlpha:1,gunMuzzle:[[0,44],[0,44],[0,44],[0,44]],icon:"Pictorial_Level2_Tower4",bubblePoint:[0,80],sealHeightOffset:20},{id:303,typeID:3,level:3,bullet:6,isFly:0,isBurrow:1,remoteDamageRate:1e4,aimingPoint:2,spend:320,physicalAttack:156,magicAttack:0,speed:2500,upBaseSpeed:8e3,range:240,critRate:500,ignorePhysicalDefense:4e3,name:"1060",desc:"1066",appearance:"tower2_3",isPremultipliedAlpha:1,gunMuzzle:[[0,48],[0,48],[0,48],[0,48]],icon:"Pictorial_Level3_Tower4",bubblePoint:[0,80],sealHeightOffset:20},{id:304,typeID:3,level:4,bullet:28,isFly:0,isBurrow:1,remoteDamageRate:1e4,aimingPoint:2,spend:400,physicalAttack:205,magicAttack:0,speed:2500,upBaseSpeed:8e3,range:280,critRate:500,ignorePhysicalDefense:5e3,name:"2206",desc:"2306",appearance:"tower2_5",isPremultipliedAlpha:1,gunMuzzle:[[0,48],[0,48],[0,48],[0,48]],heroId:43001,heroBuildPrice:300,heroBuildPriceAdd:100,heroDefaultAction:"stand_right",icon:"Pictorial_Level4_Tower4",heroTowerIcon:"FightPowerRecommend_Soldier_Icon2",bubblePoint:[0,80],sealHeightOffset:20},{id:305,typeID:3,level:4,bullet:28,isFly:0,isBurrow:1,remoteDamageRate:1e4,aimingPoint:2,spend:400,physicalAttack:220,magicAttack:0,speed:2500,upBaseSpeed:8e3,range:240,critRate:500,ignorePhysicalDefense:5e3,name:"2207",desc:"2307",appearance:"tower2_4",isPremultipliedAlpha:1,gunMuzzle:[[0,48],[0,48],[0,48],[0,48]],heroId:43003,heroBuildPrice:300,heroBuildPriceAdd:100,heroDefaultAction:"stand_right",icon:"Pictorial_Level5_Tower4",heroTowerIcon:"FightPowerRecommend_Soldier_Icon4",bubblePoint:[0,80],sealHeightOffset:20},{id:306,typeID:3,level:4,bullet:28,isFly:0,isBurrow:1,remoteDamageRate:1e4,aimingPoint:2,spend:400,physicalAttack:246,magicAttack:0,speed:2500,upBaseSpeed:8e3,range:280,critRate:500,ignorePhysicalDefense:5e3,name:"2208",desc:"2308",appearance:"tower2_5",isPremultipliedAlpha:1,gunMuzzle:[[0,48],[0,48],[0,48],[0,48]],heroId:43101,heroBuildPrice:300,heroBuildPriceAdd:100,heroDefaultAction:"stand_right",icon:"Pictorial_Level6_Tower4",heroTowerIcon:"FightPowerRecommend_Soldier_Icon2_True",bubblePoint:[0,80],sealHeightOffset:20},{id:307,typeID:3,level:4,bullet:43,isFly:0,isBurrow:1,remoteDamageRate:1e4,aimingPoint:2,spend:400,physicalAttack:205,magicAttack:0,speed:2500,upBaseSpeed:8e3,range:280,critRate:500,ignorePhysicalDefense:5e3,name:"2214",desc:"2314",appearance:"tower2_6",isPremultipliedAlpha:1,gunMuzzle:[[0,48],[0,48],[0,48],[0,48]],heroId:43011,heroBuildPrice:300,heroBuildPriceAdd:100,heroDefaultAction:"stand_right",icon:"Pictorial_Level7_Tower4",heroTowerIcon:"FightPowerRecommend_Soldier_Icon9",bubblePoint:[0,80],sealHeightOffset:20},{id:401,typeID:4,level:1,bullet:7,isFly:1,isBurrow:0,remoteDamageRate:1e4,aimingPoint:1,spend:100,physicalAttack:0,magicAttack:52,speed:1500,upBaseSpeed:8e3,range:200,critRate:500,name:"1061",desc:"1067",appearance:"tower4_1",isPremultipliedAlpha:1,gunMuzzle:[[-15,87],[-15,87],[-15,87],[12,87]],icon:"Pictorial_Level1_Tower2",bubblePoint:[0,110],sealHeightOffset:50},{id:402,typeID:4,level:2,bullet:8,isFly:1,isBurrow:0,remoteDamageRate:1e4,aimingPoint:1,spend:160,physicalAttack:0,magicAttack:132,speed:1500,upBaseSpeed:8e3,range:210,critRate:500,name:"1062",desc:"1067",appearance:"tower4_2",isPremultipliedAlpha:1,gunMuzzle:[[-15,87],[-15,87],[-15,87],[12,87]],icon:"Pictorial_Level2_Tower2",bubblePoint:[0,110],sealHeightOffset:50},{id:403,typeID:4,level:3,bullet:9,isFly:1,isBurrow:0,remoteDamageRate:1e4,aimingPoint:1,spend:240,physicalAttack:0,magicAttack:228,speed:1500,upBaseSpeed:8e3,range:220,critRate:500,name:"1063",desc:"1067",appearance:"tower4_3",isPremultipliedAlpha:1,gunMuzzle:[[-15,87],[-15,87],[-15,87],[12,87]],icon:"Pictorial_Level3_Tower2",bubblePoint:[0,110],sealHeightOffset:50},{id:404,typeID:4,level:4,bullet:26,isFly:1,isBurrow:0,remoteDamageRate:1e4,aimingPoint:1,spend:300,physicalAttack:0,magicAttack:260,speed:1500,upBaseSpeed:8e3,range:240,critRate:500,name:"2209",desc:"2309",appearance:"tower4_5",isPremultipliedAlpha:1,gunMuzzle:[[-15,87],[-15,87],[-15,87],[12,87]],heroId:43007,heroBuildPrice:300,heroBuildPriceAdd:100,heroDefaultAction:"stand_right",icon:"Pictorial_Level4_Tower2",heroTowerIcon:"FightPowerRecommend_Soldier_Icon8",bubblePoint:[0,110],sealHeightOffset:50},{id:405,typeID:4,level:4,bullet:27,isFly:1,isBurrow:0,remoteDamageRate:1e4,aimingPoint:1,spend:300,physicalAttack:0,magicAttack:280,speed:2e3,upBaseSpeed:8e3,range:240,critRate:500,name:"2210",desc:"2310",appearance:"tower4_4",isPremultipliedAlpha:1,gunMuzzle:[[-15,87],[-15,87],[-15,87],[12,87]],heroId:43008,heroBuildPrice:300,heroBuildPriceAdd:100,heroDefaultAction:"stand_right",icon:"Pictorial_Level5_Tower2",heroTowerIcon:"FightPowerRecommend_Soldier_Icon1",bubblePoint:[0,110],sealHeightOffset:50},{id:406,typeID:4,level:4,bullet:26,isFly:1,isBurrow:0,remoteDamageRate:1e4,aimingPoint:1,spend:300,physicalAttack:0,magicAttack:312,speed:1500,upBaseSpeed:8e3,range:240,critRate:500,name:"2211",desc:"2311",appearance:"tower4_5",isPremultipliedAlpha:1,gunMuzzle:[[-15,87],[-15,87],[-15,87],[12,87]],heroId:43107,heroBuildPrice:300,heroBuildPriceAdd:100,heroDefaultAction:"stand_right",icon:"Pictorial_Level6_Tower2",heroTowerIcon:"FightPowerRecommend_Soldier_Icon8_True",bubblePoint:[0,110],sealHeightOffset:50},{id:407,typeID:4,level:4,bullet:50,isFly:1,isBurrow:0,remoteDamageRate:1e4,aimingPoint:1,spend:300,physicalAttack:0,magicAttack:280,speed:2e3,upBaseSpeed:8e3,range:240,critRate:500,name:"2215",desc:"2315",appearance:"tower4_6",isPremultipliedAlpha:1,gunMuzzle:[[-15,87],[-15,87],[-15,87],[12,87]],heroId:43012,heroBuildPrice:300,heroBuildPriceAdd:100,heroDefaultAction:"stand_right",icon:"Pictorial_Level7_Tower2",heroTowerIcon:"FightPowerRecommend_Soldier_Icon11",bubblePoint:[0,110],sealHeightOffset:50}],cc._RF.pop()},{}],Json_Troop:[function(e,t){"use strict";cc._RF.push(t,"cba6dqOH8NCEZUtyNJcwqW/","Json_Troop"),e("Aft").JsonData.Troop=[{id:1,troopGroup:[[2,1,0]]},{id:2,troopGroup:[[1,1,0],[3,1,1]]},{id:3,troopGroup:[[2,2,0],[1,1,60],[3,1,61]]},{id:4,troopGroup:[[1,1,0],[3,1,1],[2,2,61]]},{id:5,troopGroup:[[1,1,0],[2,2,60],[3,1,120]]},{id:6,troopGroup:[[3,1,0],[2,2,60],[1,1,120]]},{id:7,troopGroup:[[1,1,0],[2,2,60],[1,1,120]]},{id:8,troopGroup:[[2,1,0],[2,2,60],[1,1,120]]},{id:9,troopGroup:[[2,1,0],[2,2,60],[3,1,120]]},{id:10,troopGroup:[[2,1,0],[1,1,60],[3,1,61],[2,2,120]]},{id:11,troopGroup:[[1,1,0],[2,2,60],[1,1,120],[2,1,180]]},{id:12,troopGroup:[[2,1,0],[3,1,60],[2,2,120],[3,1,180]]},{id:13,troopGroup:[[1,1,0],[1,1,60],[3,1,61],[2,2,120]]},{id:14,troopGroup:[[1,1,0],[3,1,1],[2,1,60],[2,2,120]]},{id:15,troopGroup:[[1,1,0],[2,1,1],[3,1,2],[2,1,60],[2,2,180]]},{id:16,troopGroup:[[1,1,0],[2,2,1],[3,1,2],[1,1,90],[3,1,91]]},{id:17,troopGroup:[[1,1,0],[2,1,60],[3,1,120],[2,2,180],[1,1,240]]},{id:18,troopGroup:[[1,1,0],[1,1,60],[2,2,61],[3,1,62],[3,1,120]]},{id:19,troopGroup:[[2,1,0],[1,1,60],[3,1,61],[2,2,120],[2,1,180]]},{id:20,troopGroup:[[1,1,0],[3,1,1],[2,2,60],[1,1,120],[3,1,121]]},{id:21,troopGroup:[[2,2,0],[1,1,60],[3,1,61],[1,1,180],[3,1,181]]},{id:22,troopGroup:[[2,1,0],[2,1,60],[2,2,120],[2,1,180],[2,1,240],[2,1,300]]},{id:23,troopGroup:[[1,1,0],[2,1,1],[3,1,2],[1,1,90],[2,2,91],[3,1,92]]},{id:24,troopGroup:[[1,1,0],[2,1,1],[3,1,2],[1,1,60],[3,1,61],[2,2,180]]},{id:25,troopGroup:[[1,1,0],[3,1,1],[2,1,60],[2,2,180],[1,1,240],[3,1,241]]},{id:26,troopGroup:[[1,1,0],[3,1,1],[1,1,60],[3,1,61],[2,2,120],[3,1,121]]},{id:27,troopGroup:[[2,1,0],[1,1,60],[3,1,61],[1,1,120],[3,1,121],[2,2,180]]},{id:28,troopGroup:[[1,1,0],[2,1,1],[3,1,2],[1,1,60],[2,2,61],[3,1,62],[2,3,240]]},{id:29,troopGroup:[[2,2,0],[1,1,60],[3,1,61],[2,2,120],[1,1,180],[3,1,181],[1,1,240]]},{id:30,troopGroup:[[1,1,0],[2,1,60],[3,1,120],[2,2,180],[1,1,240],[2,1,300],[3,1,360]]},{id:31,troopGroup:[[1,1,0],[3,1,1],[1,1,60],[2,2,61],[3,1,62],[1,1,120],[3,1,121]]},{id:32,troopGroup:[[2,1,0],[3,1,1],[1,1,60],[2,2,120],[3,1,180],[1,1,240],[2,1,241]]},{id:33,troopGroup:[[1,1,0],[2,1,1],[3,1,2],[1,1,60],[3,1,61],[2,2,120],[2,1,180]]},{id:34,troopGroup:[[1,1,0],[2,2,60],[1,1,120],[3,1,180],[1,1,240],[2,2,300],[3,1,360]]},{id:35,troopGroup:[[2,1,0],[1,1,60],[2,1,61],[3,1,62],[2,2,180],[1,1,240],[2,1,241],[3,1,242]]},{id:36,troopGroup:[[1,1,0],[2,2,60],[3,1,120],[1,1,180],[1,1,240],[1,1,300],[3,1,301],[3,1,360]]},{id:37,troopGroup:[[1,1,0],[2,1,1],[3,1,2],[2,1,60],[1,1,120],[3,1,121],[2,2,120],[2,1,180]]},{id:38,troopGroup:[[1,1,0],[3,1,1],[2,2,60],[1,1,120],[3,1,121],[2,2,180],[1,1,240],[3,1,241]]},{id:39,troopGroup:[[2,1,0],[2,1,60],[1,1,61],[2,2,120],[2,1,180],[3,1,181],[2,1,240],[2,2,300]]},{id:40,troopGroup:[[1,1,0],[1,1,60],[1,1,120],[2,2,121],[2,1,180],[3,1,181],[3,1,240],[3,1,300]]},{id:41,troopGroup:[[1,1,0],[2,1,1],[2,1,90],[3,1,91],[1,1,180],[2,2,181],[2,1,270],[3,1,271]]},{id:881,troopGroup:[[2,1,0],[2,888,90],[1,1,180],[3,1,181]]},{id:882,troopGroup:[[1,1,0],[3,1,1],[2,888,90],[1,1,180],[3,1,181]]},{id:883,troopGroup:[[1,1,0],[3,1,1],[2,888,90],[1,1,180],[2,1,181],[3,1,182]]},{id:884,troopGroup:[[2,1,0],[1,1,60],[3,1,61],[2,888,120],[1,1,180],[3,1,181],[1,1,240]]}],cc._RF.pop()},{}],Json_Vip:[function(e,t){"use strict";cc._RF.push(t,"303f0/CxUZPf6J9To0zwUXx","Json_Vip"),e("Aft").JsonData.Vip=[{id:1,vipLevel:0,vipIconBig:"Vip_0",vipIconBigGrey:"Vip_0_Gray",vipIconSmall:"V_0",loginTotal:0,adTotal:0,taskTotal:0,shopBoxNum:[1,3],shopIngotNum:[1,3],shopCoinNum:[1,3],shopHeroExpNum:[1,3],battleBoxNum:[1,6],gameResultNum:[1,2],hangupNum:[1,4],waveIronNum:[0,0],extraIronNum:[1,0],speedUpNum:[1,1e4],extraHero:[0,0],shopSkillCardNum:[1,6],quickNum:[1,2],heroTower:[1,0],defendNum:[1,0],quicklyDefend:[0,0],extraChance:[0,0],powerAdNum:[1,3]},{id:2,vipLevel:1,vipIconBig:"Vip_1",vipIconBigGrey:"Vip_1_Gray",vipIconSmall:"V_1",newDescList:["1739","1744","1749"],loginTotal:1,adTotal:20,taskTotal:60,shopBoxNum:[1,4],shopIngotNum:[1,3],shopCoinNum:[1,4],shopHeroExpNum:[1,4],battleBoxNum:[1,6],gameResultNum:[1,3],hangupNum:[1,4],waveIronNum:[0,1],extraIronNum:[1,50],speedUpNum:[1,15e3],extraHero:[0,0],shopSkillCardNum:[1,6],quickNum:[1,3],heroTower:[1,0],defendNum:[1,5e3],quicklyDefend:[0,0],extraChance:[0,0],powerAdNum:[1,4]},{id:3,vipLevel:2,vipIconBig:"Vip_2",vipIconBigGrey:"Vip_2_Gray",vipIconSmall:"V_2",newDescList:["1745","1740"],loginTotal:2,adTotal:40,taskTotal:120,shopBoxNum:[1,5],shopIngotNum:[1,4],shopCoinNum:[1,4],shopHeroExpNum:[1,4],battleBoxNum:[1,6],gameResultNum:[1,3],hangupNum:[1,5],waveIronNum:[0,1],extraIronNum:[1,50],speedUpNum:[1,15e3],extraHero:[0,1],shopSkillCardNum:[1,6],quickNum:[1,3],heroTower:[1,0],defendNum:[1,5e3],quicklyDefend:[0,0],extraChance:[0,0],powerAdNum:[1,4]},{id:4,vipLevel:3,vipIconBig:"Vip_3",vipIconBigGrey:"Vip_3_Gray",vipIconSmall:"V_3",heroId:43101,newDescList:["1741","1752","20146"],loginTotal:3,adTotal:60,taskTotal:180,shopBoxNum:[1,6],shopIngotNum:[1,4],shopCoinNum:[1,4],shopHeroExpNum:[1,4],battleBoxNum:[1,6],gameResultNum:[1,3],hangupNum:[1,5],waveIronNum:[0,1],extraIronNum:[1,50],speedUpNum:[1,15e3],extraHero:[0,1],shopSkillCardNum:[1,7],quickNum:[1,3],heroTower:[1,0],defendNum:[1,1e4],quicklyDefend:[0,0],extraChance:[0,1],powerAdNum:[1,5]},{id:5,vipLevel:4,vipIconBig:"Vip_4",vipIconBigGrey:"Vip_4_Gray",vipIconSmall:"V_4",newDescList:["1747","1751","1746","1748"],loginTotal:4,adTotal:80,taskTotal:240,shopBoxNum:[1,7],shopIngotNum:[1,4],shopCoinNum:[1,4],shopHeroExpNum:[1,4],battleBoxNum:[1,6],gameResultNum:[1,5],hangupNum:[1,6],waveIronNum:[0,1],extraIronNum:[1,100],speedUpNum:[1,2e4],extraHero:[0,1],shopSkillCardNum:[1,7],quickNum:[1,5],heroTower:[1,0],defendNum:[1,1e4],quicklyDefend:[0,0],extraChance:[0,1],powerAdNum:[1,5]},{id:6,vipLevel:5,vipIconBig:"Vip_5",vipIconBigGrey:"Vip_5_Gray",vipIconSmall:"V_5",heroId:43102,newDescList:["1742","1750","1978"],loginTotal:6,adTotal:120,taskTotal:360,shopBoxNum:[1,7],shopIngotNum:[1,4],shopCoinNum:[1,4],shopHeroExpNum:[1,4],battleBoxNum:[1,7],gameResultNum:[1,5],hangupNum:[1,6],waveIronNum:[0,1],extraIronNum:[1,100],speedUpNum:[1,2e4],extraHero:[0,1],shopSkillCardNum:[1,7],quickNum:[1,5],heroTower:[1,0],defendNum:[1,1e4],quicklyDefend:[0,1],extraChance:[0,1],powerAdNum:[1,5]},{id:7,vipLevel:6,vipIconBig:"Vip_6",vipIconBigGrey:"Vip_6_Gray",vipIconSmall:"V_6",newDescList:["1746","1747","1750"],loginTotal:8,adTotal:160,taskTotal:480,shopBoxNum:[1,8],shopIngotNum:[1,4],shopCoinNum:[1,4],shopHeroExpNum:[1,4],battleBoxNum:[1,8],gameResultNum:[1,6],hangupNum:[1,6],waveIronNum:[0,1],extraIronNum:[1,150],speedUpNum:[1,2e4],extraHero:[0,1],shopSkillCardNum:[1,8],quickNum:[1,5],heroTower:[1,0],defendNum:[1,15e3],quicklyDefend:[0,1],extraChance:[0,1],powerAdNum:[1,5]},{id:8,vipLevel:7,vipIconBig:"Vip_7",vipIconBigGrey:"Vip_7_Gray",vipIconSmall:"V_7",newDescList:["1744","1747"],loginTotal:11,adTotal:220,taskTotal:660,shopBoxNum:[1,8],shopIngotNum:[1,4],shopCoinNum:[1,4],shopHeroExpNum:[1,4],battleBoxNum:[1,8],gameResultNum:[1,8],hangupNum:[1,6],waveIronNum:[0,1],extraIronNum:[1,200],speedUpNum:[1,2e4],extraHero:[0,1],shopSkillCardNum:[1,8],quickNum:[1,5],heroTower:[1,0],defendNum:[1,2e4],quicklyDefend:[0,1],extraChance:[0,1],powerAdNum:[1,5]},{id:9,vipLevel:8,vipIconBig:"Vip_8",vipIconBigGrey:"Vip_8_Gray",vipIconSmall:"V_8",heroId:43107,newDescList:["1743"],loginTotal:14,adTotal:280,taskTotal:840,shopBoxNum:[1,8],shopIngotNum:[1,4],shopCoinNum:[1,4],shopHeroExpNum:[1,4],battleBoxNum:[1,8],gameResultNum:[1,8],hangupNum:[1,6],waveIronNum:[0,1],extraIronNum:[1,200],speedUpNum:[1,2e4],extraHero:[0,1],shopSkillCardNum:[1,8],quickNum:[1,5],heroTower:[1,0],defendNum:[1,2e4],quicklyDefend:[0,1],extraChance:[0,1],powerAdNum:[1,5]},{id:10,vipLevel:9,vipIconBig:"Vip_9",vipIconBigGrey:"Vip_9_Gray",vipIconSmall:"V_9",newDescList:["20129","1746","1750","20128"],loginTotal:17,adTotal:360,taskTotal:1080,shopBoxNum:[1,8],shopIngotNum:[1,5],shopCoinNum:[1,5],shopHeroExpNum:[1,5],battleBoxNum:[1,9],gameResultNum:[1,8],hangupNum:[1,7],waveIronNum:[0,1],extraIronNum:[1,200],speedUpNum:[1,25e3],extraHero:[0,1],shopSkillCardNum:[1,8],quickNum:[1,5],heroTower:[1,0],defendNum:[1,25e3],quicklyDefend:[0,1],extraChance:[0,1],powerAdNum:[1,5]},{id:11,vipLevel:10,vipIconBig:"Vip_10",vipIconBigGrey:"Vip_10_Gray",vipIconSmall:"V_10",newDescList:["1744","1746","20128"],loginTotal:20,adTotal:460,taskTotal:1320,shopBoxNum:[1,8],shopIngotNum:[1,6],shopCoinNum:[1,6],shopHeroExpNum:[1,6],battleBoxNum:[1,9],gameResultNum:[1,8],hangupNum:[1,8],waveIronNum:[0,1],extraIronNum:[1,250],speedUpNum:[1,25e3],extraHero:[0,1],shopSkillCardNum:[1,9],quickNum:[1,5],heroTower:[1,0],defendNum:[1,3e4],quicklyDefend:[0,1],extraChance:[0,1],powerAdNum:[1,5]}],cc._RF.pop()},{}],Json_YearTaskRewardBox:[function(e,t){"use strict";cc._RF.push(t,"66536kyKfFMjKXwtsQldXvu","Json_YearTaskRewardBox"),e("Aft").JsonData.YearTaskRewardBox=[{id:6001,reward:[{key:1001,value:50}],iconBg:"Icon_Bg_Purple",quality:3,name:"20038"},{id:6002,reward:[{key:1001,value:50}],iconBg:"Icon_Bg_Purple",quality:3,name:"20038"},{id:6003,reward:[{key:1001,value:50}],iconBg:"Icon_Bg_Purple",quality:3,name:"20038"},{id:6004,reward:[{key:1001,value:50}],iconBg:"Icon_Bg_Purple",quality:3,name:"20038"},{id:6005,reward:[{key:1001,value:50}],iconBg:"Icon_Bg_Purple",quality:3,name:"20038"},{id:6006,reward:[{key:1001,value:50}],iconBg:"Icon_Bg_Purple",quality:3,name:"20038"},{id:6007,reward:[{key:1001,value:50}],iconBg:"Icon_Bg_Purple",quality:3,name:"20038"},{id:6008,reward:[{key:1002,value:5400},{key:1006,value:5400}],icon:"springGift_reward_Icon1",iconBg:"Icon_Bg_Purple",quality:3,name:"20038"},{id:6009,reward:[{key:1002,value:5760},{key:1006,value:5760}],icon:"springGift_reward_Icon1",iconBg:"Icon_Bg_Purple",quality:3,name:"20038"},{id:6010,reward:[{key:1002,value:6120},{key:1006,value:6120}],icon:"springGift_reward_Icon1",iconBg:"Icon_Bg_Purple",quality:3,name:"20038"},{id:6011,reward:[{key:1002,value:6480},{key:1006,value:6480}],icon:"springGift_reward_Icon1",iconBg:"Icon_Bg_Purple",quality:3,name:"20038"},{id:6012,reward:[{key:1002,value:7200},{key:1006,value:7200}],icon:"springGift_reward_Icon1",iconBg:"Icon_Bg_Purple",quality:3,name:"20038"},{id:6013,reward:[{key:1002,value:7920},{key:1006,value:7920}],icon:"springGift_reward_Icon1",iconBg:"Icon_Bg_Purple",quality:3,name:"20038"},{id:6014,reward:[{key:1002,value:8640},{key:1006,value:8640}],icon:"springGift_reward_Icon1",iconBg:"Icon_Bg_Purple",quality:3,name:"20038"},{id:6015,reward:[{key:5001,value:1}],iconBg:"Icon_Bg_Orange",quality:4,name:"20038"},{id:6016,reward:[{key:2001,value:1},{key:1007,value:20}],icon:"springGift_reward_Icon2",iconBg:"Icon_Bg_Orange",quality:4,name:"20038"},{id:6017,reward:[{key:2001,value:1},{key:1007,value:20}],icon:"springGift_reward_Icon2",iconBg:"Icon_Bg_Orange",quality:4,name:"20038"},{id:6018,reward:[{key:2001,value:1},{key:1007,value:20}],icon:"springGift_reward_Icon2",iconBg:"Icon_Bg_Orange",quality:4,name:"20038"},{id:6019,reward:[{key:2001,value:1},{key:1007,value:20}],icon:"springGift_reward_Icon2",iconBg:"Icon_Bg_Orange",quality:4,name:"20038"},{id:6020,reward:[{key:2001,value:1},{key:1007,value:20}],icon:"springGift_reward_Icon2",iconBg:"Icon_Bg_Orange",quality:4,name:"20038"},{id:6021,reward:[{key:2001,value:1},{key:1007,value:20}],icon:"springGift_reward_Icon2",iconBg:"Icon_Bg_Orange",quality:4,name:"20038"},{id:6022,reward:[{key:2001,value:3}],iconBg:"Icon_Bg_Orange",quality:4,name:"20038"},{id:6023,reward:[{key:3013,value:6}],iconBg:"Icon_Bg_Orange",quality:4,name:"20038"},{id:6024,reward:[{key:3013,value:6}],iconBg:"Icon_Bg_Orange",quality:4,name:"20038"},{id:6025,reward:[{key:3013,value:6}],iconBg:"Icon_Bg_Orange",quality:4,name:"20038"},{id:6026,reward:[{key:3013,value:6}],iconBg:"Icon_Bg_Orange",quality:4,name:"20038"},{id:6027,reward:[{key:5002,value:1}],iconBg:"Icon_Bg_Orange",quality:4,name:"20038"},{id:6028,reward:[{key:3013,value:6}],iconBg:"Icon_Bg_Orange",quality:4,name:"20038"}],cc._RF.pop()},{}],Json_YearTaskReward:[function(e,t){"use strict";cc._RF.push(t,"dd3f2mEeARCRJWDHqxrF4cW","Json_YearTaskReward"),e("Aft").JsonData.YearTaskReward=[{id:1,day:1,reward1:[6001,0],reward2:[6008,0],reward3:[6015,0],reward4:[6022,0]},{id:2,day:2,reward1:[6002,0],reward2:[6009,0],reward3:[6016,0],reward4:[6023,1]},{id:3,day:3,reward1:[6003,0],reward2:[6010,0],reward3:[6017,0],reward4:[6024,2]},{id:4,day:4,reward1:[6004,0],reward2:[6011,0],reward3:[6018,0],reward4:[6025,3]},{id:5,day:5,reward1:[6005,0],reward2:[6012,0],reward3:[6019,0],reward4:[6026,4]},{id:6,day:6,reward1:[6006,0],reward2:[6013,0],reward3:[6020,0],reward4:[6027,0]},{id:7,day:7,reward1:[6007,0],reward2:[6014,0],reward3:[6021,0],reward4:[6028,5]}],cc._RF.pop()},{}],Json_YearTask:[function(e,t){"use strict";cc._RF.push(t,"a9e61mRrslChbKP1qtpF1/G","Json_YearTask"),e("Aft").JsonData.YearTask=[{id:101,day:1,title:"20120",taskType:20101,taskValue:[4],icon:"springGift_Task_Type1",title2:"20120",taskType2:20101,icon2:"springGift_Task_Type1"},{id:102,day:1,title:"20121",taskType:20201,taskValue:[2],icon:"springGift_Task_Type2",title2:"20125",taskType2:20501,icon2:"springGift_Task_Type7"},{id:103,day:1,title:"20122",taskType:20202,taskValue:[3],icon:"springGift_Task_Type3",title2:"20126",taskType2:20601,icon2:"springGift_Task_Type8"},{id:104,day:1,title:"20123",taskType:20301,taskValue:[2],icon:"springGift_Task_Type4",title2:"20123",taskType2:20301,icon2:"springGift_Task_Type4"},{id:105,day:1,title:"20127",taskType:20602,taskValue:[2],icon:"springGift_Task_Type6",title2:"20127",taskType2:20602,icon2:"springGift_Task_Type6"},{id:201,day:2,title:"20120",taskType:20101,taskValue:[4],icon:"springGift_Task_Type1",title2:"20120",taskType2:20101,icon2:"springGift_Task_Type1"},{id:202,day:2,title:"20121",taskType:20201,taskValue:[2],icon:"springGift_Task_Type2",title2:"20126",taskType2:20601,icon2:"springGift_Task_Type8"},{id:203,day:2,title:"20122",taskType:20202,taskValue:[2],icon:"springGift_Task_Type3",title2:"20127",taskType2:20602,icon2:"springGift_Task_Type6"},{id:204,day:2,title:"20123",taskType:20301,taskValue:[2],icon:"springGift_Task_Type4",title2:"20123",taskType2:20301,icon2:"springGift_Task_Type4"},{id:205,day:2,title:"20125",taskType:20501,taskValue:[2],icon:"springGift_Task_Type7",title2:"20125",taskType2:20501,icon2:"springGift_Task_Type7"},{id:301,day:3,title:"20120",taskType:20101,taskValue:[4],icon:"springGift_Task_Type1",title2:"20120",taskType2:20101,icon2:"springGift_Task_Type1"},{id:302,day:3,title:"20121",taskType:20201,taskValue:[2],icon:"springGift_Task_Type2",title2:"20125",taskType2:20501,icon2:"springGift_Task_Type7"},{id:303,day:3,title:"20122",taskType:20202,taskValue:[3],icon:"springGift_Task_Type3",title2:"20126",taskType2:20601,icon2:"springGift_Task_Type8"},{id:304,day:3,title:"20123",taskType:20301,taskValue:[2],icon:"springGift_Task_Type4",title2:"20123",taskType2:20301,icon2:"springGift_Task_Type4"},{id:305,day:3,title:"20126",taskType:20601,taskValue:[3],icon:"springGift_Task_Type8",title2:"20127",taskType2:20602,icon2:"springGift_Task_Type6"},{id:401,day:4,title:"20120",taskType:20101,taskValue:[4],icon:"springGift_Task_Type1",title2:"20120",taskType2:20101,icon2:"springGift_Task_Type1"},{id:402,day:4,title:"20121",taskType:20201,taskValue:[2],icon:"springGift_Task_Type2",title2:"20126",taskType2:20601,icon2:"springGift_Task_Type8"},{id:403,day:4,title:"20122",taskType:20202,taskValue:[2],icon:"springGift_Task_Type3",title2:"20127",taskType2:20602,icon2:"springGift_Task_Type6"},{id:404,day:4,title:"20123",taskType:20301,taskValue:[2],icon:"springGift_Task_Type4",title2:"20123",taskType2:20301,icon2:"springGift_Task_Type4"},{id:405,day:4,title:"20127",taskType:20602,taskValue:[2],icon:"springGift_Task_Type6",title2:"20125",taskType2:20501,icon2:"springGift_Task_Type7"},{id:501,day:5,title:"20120",taskType:20101,taskValue:[4],icon:"springGift_Task_Type1",title2:"20120",taskType2:20101,icon2:"springGift_Task_Type1"},{id:502,day:5,title:"20121",taskType:20201,taskValue:[2],icon:"springGift_Task_Type2",title2:"20125",taskType2:20501,icon2:"springGift_Task_Type7"},{id:503,day:5,title:"20122",taskType:20202,taskValue:[3],icon:"springGift_Task_Type3",title2:"20126",taskType2:20601,icon2:"springGift_Task_Type8"},{id:504,day:5,title:"20123",taskType:20301,taskValue:[2],icon:"springGift_Task_Type4",title2:"20123",taskType2:20301,icon2:"springGift_Task_Type4"},{id:505,day:5,title:"20127",taskType:20602,taskValue:[2],icon:"springGift_Task_Type6",title2:"20127",taskType2:20602,icon2:"springGift_Task_Type6"},{id:601,day:6,title:"20120",taskType:20101,taskValue:[4],icon:"springGift_Task_Type1",title2:"20120",taskType2:20101,icon2:"springGift_Task_Type1"},{id:602,day:6,title:"20121",taskType:20201,taskValue:[2],icon:"springGift_Task_Type2",title2:"20126",taskType2:20601,icon2:"springGift_Task_Type8"},{id:603,day:6,title:"20122",taskType:20202,taskValue:[2],icon:"springGift_Task_Type3",title2:"20127",taskType2:20602,icon2:"springGift_Task_Type6"},{id:604,day:6,title:"20123",taskType:20301,taskValue:[2],icon:"springGift_Task_Type4",title2:"20123",taskType2:20301,icon2:"springGift_Task_Type4"},{id:605,day:6,title:"20125",taskType:20501,taskValue:[2],icon:"springGift_Task_Type7",title2:"20125",taskType2:20501,icon2:"springGift_Task_Type7"},{id:701,day:7,title:"20120",taskType:20101,taskValue:[4],icon:"springGift_Task_Type1",title2:"20120",taskType2:20101,icon2:"springGift_Task_Type1"},{id:702,day:7,title:"20121",taskType:20201,taskValue:[2],icon:"springGift_Task_Type2",title2:"20125",taskType2:20501,icon2:"springGift_Task_Type7"},{id:703,day:7,title:"20122",taskType:20202,taskValue:[3],icon:"springGift_Task_Type3",title2:"20126",taskType2:20601,icon2:"springGift_Task_Type8"},{id:704,day:7,title:"20123",taskType:20301,taskValue:[2],icon:"springGift_Task_Type4",title2:"20123",taskType2:20301,icon2:"springGift_Task_Type4"},{id:705,day:7,title:"20126",taskType:20601,taskValue:[3],icon:"springGift_Task_Type8",title2:"20127",taskType2:20602,icon2:"springGift_Task_Type6"}],cc._RF.pop()},{}],LackOfMaterialPopUp:[function(e,t){"use strict";cc._RF.push(t,"94b84/QriVG8rfihU16ZvRU","LackOfMaterialPopUp");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{},onLoadPage:function(){this.titleLabel=cc.find("content/title",this.node).getComponent(cc.Label),this.starLowerLabel=cc.find("content/starLayout/lower/number",this.node).getComponent(cc.Label),this.starHighterLabel=cc.find("content/starLayout/higher/number",this.node).getComponent(cc.Label),this.lackLabel=cc.find("content/tips/lackLayout/thing/number",this.node).getComponent(cc.Label),this.towerIconNode=cc.find("content/towerIcon",this.node);var e=cc.instantiate(this.itemPrefab);e.scale=.7,this.towerIconNode.addChild(e),this.towerItemObj=e.getComponent("MainTowerItemRender"),this.btnCostLabel=cc.find("content/buttonLayout/diamondButton/background/layout/number",this.node).getComponent(cc.Label)},showPageBegan:function(){this.host=this.data,this.towerItemObj.initData(this.host.itemId,!0),this.needCostCoin=this.host.nextCoinNum-i.player.playerModule.getSilverNum(),this.needCostDiamond=Math.ceil(this.needCostCoin/i.templateManager.getGameParamValue("partsExchangeRatio")),this.titleLabel.string=i.lang.getGameText(this.host.tempTowerData.name),this.starLowerLabel.string=this.host.starLevel,this.starHighterLabel.string=this.host.starLevel+1,this.lackLabel.string=this.needCostCoin,this.btnCostLabel.string=this.needCostDiamond},onClickClose:function(){this.closePage()},onClickOk:function(){var e;i.player.playerModule.isGoldBullionEnough(this.needCostDiamond)?this.onClickClose():(e=i.lang.getGameText(i.GameTextCode.ENOUGH_DIAMONDS),i.gameScene.showTipsItemRender(e))},showPageEnded:function(){}}),cc._RF.pop()},{}],LanguageData:[function(e,t){"use strict";cc._RF.push(t,"61de062n4dJ7ZM9/Xdumozn","LanguageData");var i=t,a=e("polyglot.min"),n=null;window.i18n||(window.i18n={languages:{},curLang:""}),i.exports={init:function(e){var t;e!==window.i18n.curLang&&(t=window.i18n.languages[e]||{},window.i18n.curLang=e,(t=t)&&(n?n.replace(t):n=new a({phrases:t,allowMissing:!0})),this.inst=n)},t:function(e,t){if(n)return n.t(e,t)},inst:n,updateSceneRenderers:function(){for(var e=cc.director.getScene().children,t=[],i=0;i<e.length;++i){var a=e[i].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(t,a)}for(var n=0;n<t.length;++n){var o=t[n];o.node.active&&o.updateLabel()}for(var s=[],r=0;r<e.length;++r){var c=e[r].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(s,c)}for(var l=0;l<s.length;++l){var d=s[l];d.node.active&&d.updateSprite(window.i18n.curLang)}}},cc._RF.pop()},{}],LanguageItemRender:[function(e,t){"use strict";cc._RF.push(t,"fb71cprHcdAD7KA2hq51nVf","LanguageItemRender");var i=e("Aft");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.nameLabel=cc.find("label",this.node).getComponent(cc.Label),this.chooseNode=cc.find("bgChoose",this.node)},setHost:function(e){this.host=e},initData:function(e){this.data=e,this.nameLabel.string=e.name,this.updateData()},updateData:function(){i.templateManager.getCurLanguage()===this.data.symbol?(this.chooseNode.active=!0,this.nameLabel.node.color=cc.color("#FFFFFF")):(this.chooseNode.active=!1,this.nameLabel.node.color=cc.color("#535A5E"))},onClickOK:function(){i.templateManager.getCurLanguage()!==this.data.symbol&&(i.soundsUtil.playSoundEffect("common_button_click"),i.lang.changeLanguage(this.data.symbol),i.templateManager.setCurLanguage(this.data.symbol),this.host.updateAllItem(),i.eventBus.dispatchEvent(i.GameEventType.SET_UPDATE_LANGUAGE))}}),cc._RF.pop()},{}],LanguagePage:[function(e,t){"use strict";cc._RF.push(t,"f65239ew0RI9r43UPTRS/R7","LanguagePage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{languageItemPrefab:{default:null,type:cc.Prefab}},onLoadPage:function(){this.scrollView=cc.find("content/languageScrollView",this.node).getComponent("cc.ScrollView"),this.contentNode=cc.find("content/languageScrollView/view/content",this.node),this.initLanguageListView()},registerGameListener:function(){},showPageBegan:function(){this.initData()},initLanguageListView:function(){this.itemList=[],this.languageDataList=i.JsonData.Language;for(var e=0;e<this.languageDataList.length;e++){var t=this.languageDataList[e],a=cc.instantiate(this.languageItemPrefab);this.contentNode.addChild(a),a.getComponent("LanguageItemRender").initData(t),a.getComponent("LanguageItemRender").setHost(this),this.itemList.push(a)}},updateAllItem:function(){for(var e=0;e<this.itemList.length;e++)this.itemList[e].getComponent("LanguageItemRender").updateData()},initData:function(){this.scrollView.scrollToTop(0)}}),cc._RF.pop()},{}],LanguageUtils:[function(e,t){"use strict";cc._RF.push(t,"9e3faAdvG5P8KyJrbDVb4kV","LanguageUtils");var i=e,a=t,n=cc.Class({statics:{_i18n:null,_initFinish:!1,_instance:null,getInstance:function(){return this._instance||(this._instance=new n),this._initFinish=!0,this._instance}},init:function(e){this._initFinish||((e=e)||(e=cc.sys.LANGUAGE_CHINESE),this._i18n=i("LanguageData"),this._i18n.init(e))},getGameText:function(e){return this._i18n.t("GameText."+e)},getArgGameText:function(e,t){var i=this.getGameText(e);if(t&&0<t.length)for(var a=0;a<t.length;a++){var n=new RegExp("\\{"+a+"\\}","gm");i=i.replace(n,t[a])}return i},getFormatString:function(e,t){var i=this.getGameText(e);if(null!=t&&0<t.length)for(var a=0;a<t.length;a++){var n=new RegExp("\\{"+a+"\\}","gm");i=i.replace(n,t[a])}return i},updateLabelStringArgs:function(e,t,i){var a=e.string;if(a=this.getGameText(t),i&&0<i.length)for(var n=0;n<i.length;n++){var o=new RegExp("\\{"+n+"\\}","gm");a=a.replace(o,i[n])}this.setString(e,a)},changeLanguage:function(e){this._i18n&&e&&(this._i18n.init(e),this._i18n.updateSceneRenderers())},updateLabelString:function(e,t){var i=e.string,a=e.node.getComponent("LocalizedLabel");if(a&&(a=(a=a._dataID).replace("GameText.",""),i=this.getGameText(a)),t&&0<t.length)for(var n=0;n<t.length;n++){var o=new RegExp("\\{"+n+"\\}","gm");i=i.replace(o,t[n])}this.setString(e,i)},setString:function(e,t){e.string=t,(e=e.node.getComponent("LabelShadow"))&&e.onLabelChange()}});a.exports=n.getInstance(),cc._RF.pop()},{}],LimitTowerPage:[function(e,t){"use strict";cc._RF.push(t,"d7d10ZG4iZPhYMhyArgedu8","LimitTowerPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{},onLoadPage:function(){this.limitNodeList=[];for(var e=1;e<=4;e++){var t=cc.find("content/tower"+e+"/prohibit",this.node);this.limitNodeList.push(t)}},registerGameListener:function(){},showPageBegan:function(){this.limitTowerList=this.data.limitTowerList;for(var e=0;e<this.limitNodeList.length;e++)this.limitNodeList[e].active=!1;for(var t=0;t<this.limitTowerList.length;t++)this.limitNodeList[this.limitTowerList[t]-1].active=!0},showPageEnded:function(){},onClickClose:function(){i.Logger.debug("onClickClose"),this.closePage()},closePageEnded:function(){i.battleScene.checkStartPopUp()}}),cc._RF.pop()},{}],LocalizedLabel:[function(e,t){"use strict";cc._RF.push(t,"744dcs4DCdNprNhG0xwq6FK","LocalizedLabel");var i=e("LanguageData");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,menu:"i18n/LocalizedLabel"},properties:{dataID:{get:function(){return this._dataID},set:function(e){this._dataID!==e&&(this._dataID=e,this.updateLabel())}},_dataID:""},onLoad:function(){i.inst||i.init(),this.fetchRender()},fetchRender:function(){var e=this.getComponent(cc.Label);if(e)return this.label=e,void this.updateLabel()},updateLabel:function(){var e;this.label?(e=i.t(this.dataID))&&(this.label.string=e.replace("\u5b8b\u5bb6\u5e84","")):cc.error("Failed to update localized label, label component is invalid!")}}),cc._RF.pop()},{}],LocalizedRichText:[function(e,t){"use strict";cc._RF.push(t,"b5bcbEfFmFGLp2LW11tu+Up","LocalizedRichText");var i=e("LanguageData");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,menu:"i18n/LocalizedRichText"},properties:{dataID:{get:function(){return this._dataID},set:function(e){this._dataID!==e&&(this._dataID=e,this.updateRichText())}},_dataID:""},onLoad:function(){i.inst||i.init(),this.fetchRender()},fetchRender:function(){var e=this.getComponent(cc.RichText);if(e)return this.richText=e,void this.updateRichText()},updateRichText:function(){var e;this.richText?(e=i.t(this.dataID))&&(this.richText.string=e.replace("\u5b8b\u5bb6\u5e84","")):cc.error("Failed to update localized richText, richText component is invalid!")}}),cc._RF.pop()},{}],LocalizedSprite:[function(e,t){"use strict";cc._RF.push(t,"f34ac2GGiVOBbG6XlfvgYP4","LocalizedSprite");var i=e;i=i("SpriteFrameSet"),cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,inspector:"packages://i18n/inspector/localized-sprite.js",menu:"i18n/LocalizedSprite"},properties:{spriteFrameSet:{default:[],type:i}},onLoad:function(){this.fetchRender()},fetchRender:function(){var e=this.getComponent(cc.Sprite);if(e)return this.sprite=e,void this.updateSprite(window.i18n.curLang)},getSpriteFrameByLang:function(e){for(var t=0;t<this.spriteFrameSet.length;++t)if(this.spriteFrameSet[t].language===e)return this.spriteFrameSet[t].spriteFrame},updateSprite:function(e){this.sprite?(!(e=this.getSpriteFrameByLang(e))&&this.spriteFrameSet[0]&&(e=this.spriteFrameSet[0].spriteFrame),this.sprite.spriteFrame=e):cc.error("Failed to update localized sprite, sprite component is invalid!")}}),cc._RF.pop()},{}],Logger:[function(e,t){"use strict";cc._RF.push(t,"02094n9loNDEr1rfWBShfVe","Logger");var i=t,a=cc.Class({statics:{loggerLevel:0,isInit:!1,init:function(e){this.isInit||(e=e.toLowerCase(),n[e]&&(this.isInit=!0,this.loggerLevel=n[e]))},debug:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.loggerLevel>n.debug||(cc.sys.isBrowser?cc.log("%s [DEBUG] "+cc.js.formatStr.apply(cc,arguments),this.getDateString()):cc.log(this.getDateString(),"[DEBUG]",cc.js.formatStr.apply(cc,arguments)))},info:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.loggerLevel>n.info||(cc.sys.isBrowser?cc.log("%c%s [INFO] "+cc.js.formatStr.apply(cc,arguments),"color:#00CD00;",this.getDateString()):cc.log(this.getDateString(),"[INFO]",cc.js.formatStr.apply(cc,arguments)))},warn:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.loggerLevel>n.warn||(cc.sys.isBrowser?cc.log("%c%s [WARN] "+cc.js.formatStr.apply(cc,arguments),"color:#ee7700;",this.getDateString()):cc.log(this.getDateString(),"[WARN]",cc.js.formatStr.apply(cc,arguments)))},error:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.loggerLevel>n.error||(cc.sys.isBrowser?cc.log("%c%s [ERROR] "+cc.js.formatStr.apply(cc,arguments),"color:red",this.getDateString()):cc.log(this.getDateString(),"[ERROR]",cc.js.formatStr.apply(cc,arguments)))},getDateString:function(){var e=new Date,t=e.getHours().toString(),i="";return i+=(1===t.length?"0"+t:t)+":",i+=(1===(t=e.getMinutes().toString()).length?"0"+t:t)+":","["+(i+=(1===(t=e.getSeconds().toString()).length?"0"+t:t)+" ")+(t=2===(t=1===(t=e.getMilliseconds().toString()).length?"00"+t:t).length?"0"+t:t)+"]"},printStack:function(){for(var e=(new Error).stack.split("\n"),t=0;t<e.length;t++)cc.log(e[t])}}}),n={debug:0,info:1,warn:2,error:3};i.exports=a,cc._RF.pop()},{}],MainChildPage:[function(e,t){"use strict";cc._RF.push(t,"39997C7B3dIJaUvJA0lPsyx","MainChildPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{instanceEnterPrefab:{default:null,type:cc.Prefab},boxRewardTipsItemPrefab:{default:null,type:cc.Prefab},hangUpBattlePrefab:{default:null,type:cc.Prefab},flyItemPrefab:{default:null,type:cc.Prefab},flyStarItemPrefab:{default:null,type:cc.Prefab},hangUpAtlas:{default:null,type:cc.SpriteAtlas},vipAtlas:{default:null,type:cc.SpriteAtlas},giftAtlas:{default:null,type:cc.SpriteAtlas},mainAtlas:{default:null,type:cc.SpriteAtlas},bubblePrefab:cc.Prefab},onLoadPage:function(){var e=this;this.isUpdatePiggyBank=!0,this.isShowMoreFunc=!1,this.scrollView=cc.find("scrollView",this.node).getComponent(cc.ScrollView),this.chapterContentNode=cc.find("scrollView/view/content",this.node),this.contentNode=cc.find("content",this.node),this.moreButtonNode=cc.find("content/funcParent/funcLayout/funcLayout1/moreButton",this.node),this.moreButtonRedNode=cc.find("redPoint",this.moreButtonNode),this.moreButtonRedNode.active=!1,this.moreButtonDownNode=cc.find("content/funcParent/funcLayout/funcLayout1/down",this.node),this.moreButtonDownNode.active=!1,this.funcLayout1=cc.find("content/funcParent/funcLayout/funcLayout1",this.node).getComponent(cc.Layout),this.funcLayoutNode2=cc.find("content/funcParent/funcLayout/funcLayout2",this.node),this.funcLayout1Bg=this.funcLayout1.node.getComponent(cc.Sprite),this.rankButtonNode=cc.find("rankButton",this.funcLayoutNode2),this.rankRedNode=cc.find("redPoint",this.rankButtonNode),this.rankRedNode.active=!1,this.instanceNode=cc.find("content/instance",this.node),this.instanceEnterItemObjList=[],this.chapterProgressNode=cc.find("/content/chapterProgress",this.node),this.chapterNameLabel=cc.find("layout/chapterLabel",this.chapterProgressNode).getComponent(cc.Label),this.chapterProgressLabel=cc.find("layout/label",this.chapterProgressNode).getComponent(cc.Label),this.instanceRewardTipNode=cc.find("newTaskButton",this.chapterProgressNode),this.mainTaskCompleteNode=cc.find("Background/complete",this.instanceRewardTipNode),this.mainTaskUnCompleteNode=cc.find("Background/uncomplete",this.instanceRewardTipNode),this.mainTaskUnCompleteProgressBar=cc.find("progressBar",this.mainTaskUnCompleteNode).getComponent(cc.ProgressBar),this.mainTaskUnCompleteIconSprite=cc.find("icon",this.mainTaskUnCompleteNode).getComponent(cc.Sprite),this.mainTaskUnCompleteNameLabel=cc.find("level",this.mainTaskUnCompleteNode).getComponent(cc.Label),this.mainTaskUnCompleteProgressLabel=cc.find("progressBar/name",this.mainTaskUnCompleteNode).getComponent(cc.Label),this.mainTaskCompleteIconSprite=cc.find("icon",this.mainTaskCompleteNode).getComponent(cc.Sprite),this.starprogressNode=cc.find("content/progressParent/starprogress",this.node),this.starprogressBar=this.starprogressNode.getChildByName("progressBar").getComponent(cc.ProgressBar),this.starLabel=cc.find("star/label",this.starprogressNode).getComponent(cc.Label),this.box1Label=cc.find("box1/starLayout/label",this.starprogressNode).getComponent(cc.Label),this.box2Label=cc.find("box2/starLayout/label",this.starprogressNode).getComponent(cc.Label),this.box3Label=cc.find("box3/starLayout/label",this.starprogressNode).getComponent(cc.Label),this.flyStarNode=cc.find("content/progressParent/flyStarNode",this.node),this.box1Node=cc.find("box1",this.starprogressNode),this.boxStarAni=cc.find("star",this.starprogressNode).getComponent(cc.Animation),this.boxStarIconNode=cc.find("star/icon",this.starprogressNode),this.boxRewardTipsNode=cc.find("tipsLayout",this.starprogressNode),this.boxRewardTipsLayoutNode=cc.find("bgLayout",this.boxRewardTipsNode),this.boxRewardTipsNode.active=!1,this.boxRewardTipsItemObjList=[],this.hangUpNode=cc.find("content/hangup",this.node),this.initHangUpFlyPool(),this.hangUpCoinSprite=cc.find("hangUpCoin",this.hangUpNode).getComponent(cc.Sprite),this.HangUpGoldSomeLightAni=cc.find("gold_some_light",this.hangUpNode).getComponent(cc.Animation),this.HangUpGoldLargeLightAni=cc.find("gold_large_light",this.hangUpNode).getComponent(cc.Animation),this.HangUpGoldHugeLightAni=cc.find("gold_huge_light",this.hangUpNode).getComponent(cc.Animation),this.HangUpGoldSomeLightAni.node.active=!1,this.HangUpGoldLargeLightAni.node.active=!1,this.HangUpGoldHugeLightAni.node.active=!1,this.hangUpbgNode=cc.find("bg",this.hangUpNode),this.hangUpBoxNode=cc.find("main_box",this.hangUpNode),this.hangUpBoxEffect=this.hangUpBoxNode.getComponent(sp.Skeleton),this.hangUpBoxRedNode=cc.find("redPoint",this.hangUpBoxNode),this.hangUpMarkUpGoldNode=cc.find("gold",this.hangUpBoxNode),this.hangUpMarkUpGoldLabel=cc.find("number",this.hangUpMarkUpGoldNode).getComponent(cc.Label),this.hangUpMarkUpExpNode=cc.find("exp",this.hangUpBoxNode),this.hangUpMarkUpExpLabel=cc.find("number",this.hangUpMarkUpExpNode).getComponent(cc.Label),this.hangUpMarkUpGoldNode.opacity=1,this.hangUpMarkUpExpNode.opacity=1,this.hangUpBattleList=[],this.hangUpBattleList.push(cc.find("/battle1",this.hangUpNode)),this.hangUpBattleList.push(cc.find("/battle2",this.hangUpNode)),this.hangUpBattleList.push(cc.find("/battle3",this.hangUpNode)),this.hangUpBattleObjList=[],this.functionLayoutNode=cc.find("content/funcParent/funcLayout",this.node),this.functionLayout=this.functionLayoutNode.getComponent(cc.Layout),this.functionLayout.updateLayout(),this.taskButtonNode=cc.find("funcLayout2/taskButton",this.functionLayoutNode),this.taskButtonRedNode=cc.find("redPoint",this.taskButtonNode),this.taskButtonRedNode.active=!1,this.emailButtonNode=cc.find("emailButton",this.moreButtonDownNode),this.emailButtonRedNode=cc.find("redPoint",this.emailButtonNode),this.emailButtonRedNode.active=!1,this.emailButtonRedLabel=cc.find("number",this.emailButtonRedNode).getComponent(cc.Label),this.moreButtonDownLayout=this.moreButtonDownNode.getComponent(cc.Layout),this.moreButtonDownLayout.updateLayout(),this.signButtonNode=cc.find("funcLayout2/signButton",this.functionLayoutNode),this.signButtonRedNode=cc.find("redPoint",this.signButtonNode),this.signSevenNode=cc.find("background/backgroundLv",this.signButtonNode),this.signFisrtNode=cc.find("background/backgroundSecond",this.signButtonNode),this.signFisrtLabel1=cc.find("background/backgroundSecond/label1",this.signButtonNode).getComponent(cc.Label),this.signOtherNode=cc.find("background/backgroundGold",this.signButtonNode),this.pictorialButtonRedNode=cc.find("pictorialButton/redPoint",this.moreButtonDownNode),this.pictorialButtonRedNode.active=!1,this.freePowerLayoutNode=cc.find("content/freePowerLayout",this.node),this.newYearActivityNode=cc.find("content/freePowerLayout/newYearButton",this.node),this.newYearActivityBgNode=cc.find("content/freePowerLayout/newYearButton/background",this.node),this.newYearActivityUnlockLabel=cc.find("content/freePowerLayout/newYearButton/background/unlock",this.node).getComponent(cc.Label),this.newYearActivityRedNode=cc.find("redPoint",this.newYearActivityNode),this.newYearActivityNode.active=!1,this.newYearActivityRedNode.active=!1,this.inviteButtonNode=cc.find("funcLayout2/inviteButton",this.functionLayoutNode),this.inviteRedNode=cc.find("funcLayout2/inviteButton/redPoint",this.functionLayoutNode),this.inviteRedNode.active=!1,this.subscribeButtonNode=cc.find("subscribeButton",this.moreButtonDownNode),this.subscribeRedNode=cc.find("redPoint",this.subscribeButtonNode),this.subscribeRedNode.active=!1,this.allianceBtnNode=cc.find("funcLayout2/allianceParent/allianceButton",this.functionLayoutNode),this.allianceBtnRedNode=cc.find("redPoint",this.allianceBtnNode),this.buildAllBattleItem(),this.yearMonsterRedNode=cc.find("content/funcParent/funcLayout/monsterButton/redPoint",this.node),this.yearMonsterRedNode&&(this.yearMonsterRedNode.active=!1),this.quicklyBattleNode=cc.find("quikyHangUpParent/quiklyHangUpButton",this.node),this.quicklyBattleRedNode=cc.find("redPoint",this.quicklyBattleNode),this.newTaskButton=cc.find("content/chapterProgress/newTaskButton/Background/redPoint",this.node),this.vipButtonParentNode=cc.find("content/vipParent",this.node),this.vipButtonParentAni=this.vipButtonParentNode.getComponent(cc.Animation),this.vipButtonEffectRingNode=cc.find("vipButton/effect_ring",this.vipButtonParentNode),this.vipButtonEffectRingNode.active=!1,this.vipButtonNode=cc.find("content/vipParent/vipButton",this.node),this.vipButtonNode.active=!1,this.vipButtonRedNode=cc.find("redPoint",this.vipButtonNode),this.vipButtonRedNode.active=!1,this.vipButtonBGSprite=cc.find("/background",this.vipButtonNode).getComponent(cc.Sprite),this.piggyBankParentNode=cc.find("piggyBankParent",this.node),this.piggyBankNode=cc.find("piggyBankParent/piggyBank",this.node),this.piggyBankNode.active=!1,this.piggyBankIconNode=cc.find("piggyBankParent/piggyBank/pig",this.node),this.piggyBankBubbleNode=cc.find("piggyBankParent/piggyBank/word",this.node),this.curPiggyBankMoneyLabel=cc.find("piggyBankParent/piggyBank/word/layout/label",this.node).getComponent(cc.Label),this.piggyBankCountdownTimeLabel=cc.find("piggyBankParent/piggyBank/countlayout/time",this.node).getComponent(cc.Label),this.flyVipSprite=cc.find("flyVip",this.node).getComponent(cc.Sprite),this.vipExpFlyNode=cc.find("vipExpFly",this.node),this.freePowerBtnNode=cc.find("content/freePowerLayout/freePowerButton",this.node),this.freePowerBtnNode.getChildByName("freePowerButton").getComponent(cc.Animation).play("freePowerButton"),this.freePowerRedNode=cc.find("freePowerButton/redPoint",this.freePowerBtnNode),this.freePowerRedNode.active=!1,this.allAtlasMap={},this.chapterAtlasList=[],this.chapterBgItemList=[],this.totalHangUpBubbleTime=i.templateManager.getGameParamValue("hangUpBubbleShowTime")+i.templateManager.getGameParamValue("hangUpBubbleIntervalTime"),this.initFlyPool(),this.isFirstIn=!0,this.clickQuicklyHangUpRed=!0,this.isFirstIntoMain=!0,this.singleAdNode=cc.find("singleAdNode",this.node),this.gameClubNode=cc.find("gameClubNode",this.node),i.gameScene.isIphoneX()&&i.Utils.addNodeTopSpace(this.contentNode),i.gameScene.isIphoneXBottom()&&i.Utils.addNodeBottomSpace(this.contentNode,20),this.node.on("touchstart",this.hideBoxRewardTips,this),this.scrollView.node.on("touch-up",function(){e.hideBoxRewardTips()}),this.checkFuncBtnState(!0),this.openPageNeedHideList=[this.starprogressNode,this.functionLayoutNode,this.quicklyBattleNode,this.vipButtonNode,this.piggyBankNode]},checkInviteButtonShow:function(){var e=i.player.inviteFriendModule.isAllInviteReceiveOver();this.inviteButtonNode.active=!e},checkInviteButtonRed:function(e){var t;i.Utils.isNumber(e)&&0<e?this.curInviteNum=e:e=this.curInviteNum,i.Utils.isNumber(e)&&0<e&&((t=i.player.inviteFriendModule.isHaveCanReceive(e))&&!this.inviteRedNode.active&&(this.inviteRedNode.active=!0,i.gameScene.redNodeAction(this.inviteRedNode)),this.inviteRedNode.active=t,i.player.inviteFriendModule.resetInviteSuccessCount(e))},checkSubscribeButtonRed:function(){for(var e=[i.constant.WX_SUBSCRIBE_TYPE_OFFLINE,i.constant.WX_SUBSCRIBE_TYPE_POWER,i.constant.WX_SUBSCRIBE_TYPE_SIGN,i.constant.WX_SUBSCRIBE_TYPE_VERSION_UPDATE],t=!1,a=0;a<e.length;a++)if(i.player.inviteFriendModule.isCanClickSubscribe(e[a])){t=!0;break}t&&!this.subscribeRedNode.active&&(this.subscribeRedNode.active=!0,i.gameScene.redNodeAction(this.subscribeRedNode)),this.subscribeRedNode.active=t,this.updateMoreRed()},checkRankButtonRed:function(){var e=0<i.player.inviteFriendModule.getCanReceivePowerNum();e&&!this.rankRedNode.active&&(this.rankRedNode.active=!0,i.gameScene.redNodeAction(this.rankRedNode)),this.rankRedNode.active=e},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.UPDATE_HANG_UP_BOX,function(){e.updateHangUpAction("stand")}),this.registerListener(i.GameEventType.UPDATE_HANG_UP_BOX_RED,function(){e.updateHangUpRed()}),this.registerListener(i.GameEventType.UPDATE_MAIN_INSTANCE,function(t){e.instanceIndex=0,e.updateBoxInfo(),e.updateBoxStarNum(t)}),this.registerListener(i.GameEventType.UPDATE_MAIN_INSTANCE_BOX_TIPS,function(){return e.hideBoxRewardTips()}),this.registerListener(i.GameEventType.MAIN_UPDATE_TASK_RED,function(t){return e.updateTaskRed(t)}),this.registerListener(i.GameEventType.Mail_UPDATE_EMAIL_RED,function(t){return e.updateEmailRed(t)}),this.registerListener(i.GameEventType.UPDATE_PICTORIAL_TOWER_RED,function(t){return e.updatePictorialRed(t)}),this.registerListener(i.GameEventType.MAIN_UPDATE_SIGN_RED,function(t){return e.updateSignRed(t)}),this.registerListener(i.GameEventType.MAIN_UPDATE_INVITE_RED,function(t){return e.checkInviteButtonRed(t)}),this.registerListener(i.GameEventType.MAIN_UPDATE_GIFT_RED,function(t){return e.checkRankButtonRed(t)}),this.registerListener(i.GameEventType.Mail_UPDATE_VIP_RED,function(){return e.updateVipRed()}),this.registerListener(i.GameEventType.REFRESH_HANGUP_SPINE_INFO,function(){return e.refreshBattleHeros()}),this.registerListener(i.GameEventType.SET_HANGUP_EFFECT_STATUS,function(){e.hangUpStatus=!0}),this.registerListener(i.GameEventType.MAIN_UPDATE_POWER,function(){i.gameScene.pageIsOpened(i.pageConstant.PAGE_TYPE_QUICKLY_BATTLE)||(e.clickQuicklyHangUpRed=!0),e.updateQuicklyBattleRed()}),this.registerListener(i.GameEventType.MAIN_UPDATE_QUICKLY_BATTLE_CD,function(){e.clickQuicklyHangUpRed=!0,e.updateQuicklyBattleRed()}),this.registerListener(i.GameEventType.UPDATE_MAIN_VIP,function(){return e.updateVipInfo()}),this.registerListener(i.GameEventType.UPDATE_MAIN_TASK,function(){return e.updateMainTaskInfo()}),this.registerListener(i.GameEventType.PAGE_OPEN_OVER,function(t){return e.onPageOpen(t)}),this.registerListener(i.GameEventType.PAGE_CLOSE_OVER,function(t){return e.onPageClose(t)}),this.registerListener(i.GameEventType.UPDATE_MAIN_FREE_POWER_ICON,function(){return e.checkFreePowerBtn()}),this.registerListener(i.GameEventType.UPDATE_MAIN_FREE_POWER_RED,function(){return e.updateFreePowerRed()}),this.registerListener(i.GameEventType.UPDATE_ALLIANCE_RED,function(){e.checkNewYearRed(),e.checkAllianceBtnRed()}),this.registerListener(i.GameEventType.NEW_YEAR_ACTIVITY_REFRESH,function(){return e.updateNewYearBtn()}),this.registerListener(i.GameEventType.YEAR_MONSTER_UPDATE_RED,function(){return e.checkNewYearRed()}),this.registerListener(i.GameEventType.YEAR_TASK_UPDATE_RED,function(){return e.checkNewYearRed()}),this.registerListener(i.GameEventType.UPDATE_ALLIANCE_BTN,function(){return e.updateAllianceBtn()})},showPageBegan:function(){this.bubbleIndex=-1,i.gameScene.mainPage.setCachePageStatus(!1),this.isFirstIn||this.nodeToScreenOut(),this.initData(),i.gameScene.showGuideLimit(.2)},showPageEnded:function(){this.nodeHoming(),this.isFirstIn=!1,i.ttAdManager.showSingleGridCustomAd(this.singleAdNode),this.scheduleOnce(function(){i.nativeManager.showGameClubButton(i.constant.GAME_CLUB_TYPE_MAIN)},.1)},updateNewYearBtn:function(){var e;this.newYearActivityNode.active=i.player.newYearModule.isActiveOpen(),this.newYearActivityNode.active&&(i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_NEW_YEAR_ACTIVITY)?this.newYearActivityUnlockLabel.node.active=!1:(this.newYearActivityUnlockLabel.node.active=!0,e=i.templateManager.getFunctionDataById(i.constant.MAIN_FUNCTION_NEW_YEAR_ACTIVITY),i.lang.updateLabelString(this.newYearActivityUnlockLabel,[e.instanceNum[1]])))},checkNewYearRed:function(){var e,t,a;i.player.newYearModule.isActiveClose()?this.newYearActivityRedNode.active=!1:(e=i.player.newYearModule.isCanReceiveReward(),t=i.player.taskModule.isHasNewYearTaskRed(),a=i.player.allianceModule.isHaveAllianceRed(),t||e||a?this.newYearActivityRedNode.active||(this.newYearActivityRedNode.active=!0,i.gameScene.redNodeAction(this.newYearActivityRedNode)):this.newYearActivityRedNode.active&&(this.newYearActivityRedNode.active=!1))},updateAllianceBtn:function(){var e;i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_ALLIANCE)?this.allianceBtnNode.active=!0:(e=i.player.allianceModule.getAllianceControllerState(),this.allianceBtnNode.active&&e!==i.constant.ALLIANCE_STATE_NONE&&(this.allianceBtnNode.active=!1)),this.checkAllianceBtnRed()},checkAllianceBtnRed:function(){i.player.allianceModule.isHaveAllianceRed()?this.allianceBtnRedNode.active||(this.allianceBtnRedNode.active=!0,i.gameScene.redNodeAction(this.allianceBtnRedNode)):this.allianceBtnRedNode.active=!1},updatePiggyBank:function(e,t,a){var n,o,s,r,c=i.player.piggyBankModule.getPiggyBankMoney(),l=i.templateManager.getGameParamValue("potMaxIngot"),d=l<=c;this.piggyBankCountdownTimeLabel.node.active=d,i.player.piggyBankModule.isPiggyBankActive()?(t&&(this.curPiggyBankMoneyLabel.string=c,!a)&&(this.piggyBankBubbleNode.scale=0,n=cc.delayTime(.2),o=cc.scaleTo(.1,1.1),s=cc.scaleTo(.1,1),s=cc.sequence(n,o,s),this.piggyBankBubbleNode.stopAllActions(),this.piggyBankBubbleNode.runAction(s)),d&&(r=i.templateManager.getGameParamValue("potCountDown")-(i.timeUtil.getSecond()-i.player.piggyBankModule.getPiggyBankFullTime()),this.piggyBankCountdownTimeLabel.string=i.timeUtil.secondFormat(r,!0),r<=0&&(i.player.piggyBankModule.getLastAreadyShow()||(i.gameScene.showPage(i.pageConstant.PAGE_TYPE_PIGGY_BANK,!0),i.player.piggyBankModule.setLastAreadyShow()),i.player.piggyBankModule.resetPiggyBankMoney(),this.updatePiggyBank(0,!0))),a&&t&&(s=i.templateManager.getGameParamValue("potCanReceivedIngot"),d=i.templateManager.getGameParamValue("potPerIngot"),r=i.player.piggyBankModule.getShowCanReceiveNum(),a=i.player.piggyBankModule.getShowMaxReceiveNum(),t=i.templateManager.getGameParamValue("potMaxIngotShowNum"),l<=c?!i.player.gmModule.isHidePig()&&!i.guideManager.isLimitClick()&&a<t&&(i.gameScene.showPage(i.pageConstant.PAGE_TYPE_PIGGY_BANK),i.player.piggyBankModule.addShowMaxReceiveNum()):s<=c&&c-d<s&&r<1&&(i.player.gmModule.isHidePig()||i.guideManager.isLimitClick()||(i.gameScene.showPage(i.pageConstant.PAGE_TYPE_PIGGY_BANK),i.player.piggyBankModule.addShowCanReceiveNum())))):this.piggyBankParentNode.active=!1},nodeToScreenOut:function(){this.isHoming=!0;for(var e=0;e<this.openPageNeedHideList.length;e++){var t,a,n=this.openPageNeedHideList[e];n.active?(n.stopAllActions(),n==this.quicklyBattleNode&&!i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_QUICKLY_BATTLE)||(t=0<n.parent.x?1:-1,a=cc.winSize.width/2-Math.abs(n.parent.x)+n.width/2+10,n.x=t*a)):(n.stopAllActions(),n.x=0)}this.chapterProgressNode.scale=0,this.freePowerLayoutNode.scale=0,i.gameScene.mainTopNodeObj.nodeToScreenOut(),i.gameScene.mainPage.nodeToScreenOut()},nodeHoming:function(){for(var e,t,a,n=this,o=0;o<this.openPageNeedHideList.length;o++){var s=this.openPageNeedHideList[o];!this.isFirstIn&&s.active?function(){s==n.piggyBankNode&&(n.piggyBankBubbleNode.scale=0);var e=cc.moveTo(.3,cc.v2(0,0)),t=n,i=cc.callFunc(function(){this==t.piggyBankNode&&t.updatePiggyBank(0,!0)},s);i=cc.sequence(e,i),s.stopAllActions(),s.runAction(i)}():(s.stopAllActions(),s.position=cc.v2(0,0))}this.isFirstIn||i.guideManager.isLimitClick()?this.chapterProgressNode.scale=1:(a=cc.scaleTo(.3,1.2),e=cc.scaleTo(.2,1),t=cc.callFunc(function(){this.isHoming=!1},this),a=cc.sequence(a,e,t),this.chapterProgressNode.stopAllActions(),this.chapterProgressNode.runAction(a)),this.isFirstIn||i.guideManager.isLimitClick()?this.freePowerLayoutNode.scale=1:(e=cc.scaleTo(.3,1.2),t=cc.scaleTo(.2,1),a=cc.callFunc(function(){this.isHoming=!1},this),a=cc.sequence(e,t,a),this.freePowerLayoutNode.stopAllActions(),this.freePowerLayoutNode.runAction(a)),i.player.instanceModule.isPassInstance(1,2)||this.showRewardTip(!1),i.gameScene.mainTopNodeObj.nodeHoming(this.isFirstIn),i.gameScene.mainPage.nodeHoming(this.isFirstIn)},initData:function(){var e;if(this.curTime=0,this.checkInviteButtonShow(),this.checkFreePowerBtn(),this.checkSubscribeButtonRed(),this.isUpdatePiggyBank&&(this.updatePiggyBank(0,!0),this.isUpdatePiggyBank=!1,e=this,i.player.serviceModule.getFriendInvitation(function(t){t&&i.Utils.isNumber(t.number)?(i.Logger.debug("getFriendInvitation success num = "+Math.floor(t.number)),e.checkInviteButtonRed(Math.floor(t.number))):i.Logger.debug("getFriendInvitation fail")})),this.updateHangUpAction("stand"),this.boxStarAni.play("star_stand"),this.chapterId=i.player.instanceModule.getCurChapter(),this.chapterSame=this.lastChapterId==this.chapterId,!this.chapterSame){this.isFirstIn=!0;for(var t=0;t<this.instanceEnterItemObjList.length;t++)this.instanceEnterItemObjList[t].node.active=!1}this.lastChapterId&&this.lastChapterId!=this.chapterId&&i.gameScene.showPage(i.pageConstant.PAGE_TYPE_SWITCH_CHAPTER_CLOUD),this.lastChapterId=this.chapterId,i.Logger.debug("showPageBegan mainChild: "+this.chapterId),this.chapterCfg=i.templateManager.getChapterDataById(this.chapterId),this.chapterCfg?(this.instanceDataList=i.templateManager.getInstanceListByChapterId(this.chapterId),this.instanceDataList?(this.instanceIndex=0,this.initDataDone=!0,this.checkNewYearRed(),this.checkBgSprite(),this.updateBoxInfo(),this.updateTaskRed(),this.updateEmailRed(),this.updatePictorialRed(),this.updateSignRed(),this.updateHangUpRed(),this.updateQuicklyBattleRed(),this.updateMoreRed(),this.updateVipRed(),this.updateFreePowerRed(),this.flyCacheEffect(),this.updateVipInfo()):i.Logger.debug("\u5173\u5361\u6570\u636e\u6ca1\u6709\u627e\u5230!")):i.Logger.debug("\u7ae0\u8282\u8868\u6570\u636e\u6ca1\u6709\u627e\u5230!")},checkFreePowerBtn:function(){this.freePowerBtnNode.active=i.player.commonModule.getShowFreePowerIcon()},updateVipInfo:function(){this.flyVipSprite.node.active=!1,this.flyVipSprite.node.stopAllActions();var e=i.player.vipModule.getCurVipLevel(),t=i.player.vipModule.getCurVipCfg(),a=i.player.vipModule.getCacheVipLevel();a&&0<=a&&(t=i.templateManager.getVipDataByLevel(e-1)),this.vipButtonBGSprite.spriteFrame=this.vipAtlas.getSpriteFrame(t.vipIconBig)},getVipButtonWorldPos:function(){return this.vipButtonParentNode.convertToWorldSpaceAR(cc.v2(0,0))},cleanChapterAtlas:function(){i.Logger.debug("cleanChapterAtlas");for(var e=0;e<this.chapterBgItemList.length;e++)this.chapterBgItemList[e].destroy();this.chapterBgItemList=[],this.hangUpBgSpriteNode&&this.hangUpBgSpriteNode.destroy(),this.hangUpBgSpriteNode=null;for(var t=0;t<this.chapterAtlasList.length;t++){var a=this.chapterAtlasList[t];cc.loader.release(cc.loader.getDependsRecursively(a)),i.Logger.debug("\u6e05\u9664\u56fe\u96c6!")}this.chapterAtlasList=[]},checkBgSprite:function(){if(i.Logger.debug("checkBgSprite aft.gameScene.isNeedUpdateChapterBg = "+i.gameScene.isNeedUpdateChapterBg),this.chapterSame){this.updateInstanceProcess();var e=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_SWITCH_CHAPTER_CLOUD);if(e&&i.gameScene.pageIsOpened(i.pageConstant.PAGE_TYPE_SWITCH_CHAPTER_CLOUD)&&e.runOutEffect(),!(i.constant.IS_RELEASE_CHAPTER_BG&&i.player.commonModule.isLowIosDevice()&&i.gameScene.isNeedUpdateChapterBg))return}if(i.gameScene.isNeedUpdateChapterBg=!1,this.lastChapterId=this.chapterId,i.Logger.debug("start updateChapterAtlas"),this.cleanChapterAtlas(),(new Date).getTime(),this.loadAtlasIndex=0,this.contentHeight=0,i.chapterAtlasMap){for(var t in i.chapterAtlasMap)i.Logger.debug("aft.chapterAtlasMap key = "+t+" value = "+i.chapterAtlasMap[t]);for(var a=0;a<this.chapterCfg.bg.length;a++){(new Date).getTime();var n,o=(n=this.chapterCfg.bg[a].split("/"))[0],s=n[1];if(!(n=i.chapterAtlasMap[o]))return i.Logger.debug("error atlas = null bgAtlasName = "+o),i.chapterAtlasMap=null,i.gameScene.isNeedUpdateChapterBg=!0,void this.checkBgSprite();this.updateChapterItem(a,n,s),this.chapterAtlasList.push(n)}this.chapterContentNode.height=this.contentHeight,i.chapterAtlasMap=null,this.updateInstanceProcess(),(e=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_SWITCH_CHAPTER_CLOUD))&&i.gameScene.pageIsOpened(i.pageConstant.PAGE_TYPE_SWITCH_CHAPTER_CLOUD)&&e.runOutEffect()}else this.loadMapAtlas();var r=this,c=this.chapterCfg.hangUpPic.split("/");cc.loader.loadRes("textures/chapter/"+c[0],cc.SpriteAtlas,function(e,t){var i;e?cc.error(e):(e=(i=new cc.Node).addComponent(cc.Sprite),r.hangUpbgNode.addChild(i),r.hangUpBgSpriteNode=i,e.spriteFrame=t.getSpriteFrame(c[1]))})},loadMapAtlas:function(){if(this.loadAtlasIndex>=this.chapterCfg.bg.length)return i.Logger.debug("\u5df2\u7ecf\u662f\u6700\u540e\u4e00\u4e2a\u56fe\u96c6\u4e86"),this.chapterContentNode.height=this.contentHeight,this.updateInstanceProcess(),(t=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_SWITCH_CHAPTER_CLOUD))&&i.gameScene.pageIsOpened(i.pageConstant.PAGE_TYPE_SWITCH_CHAPTER_CLOUD)&&t.runOutEffect(),void i.Logger.debug("this.chapterContentNode.height: "+this.chapterContentNode.height);var e=this.chapterCfg.bg[this.loadAtlasIndex].split("/"),t=e[0],a=e[1],n="textures/chapter/"+t;i.Logger.debug("loadMapAtlas mapImgResPath = "+n);var o=this;cc.loader.loadRes(n,cc.SpriteAtlas,function(e,t){return e?cc.error(e):(o.chapterAtlasList.push(t),o.updateChapterItem(o.loadAtlasIndex,t,a),i.Logger.debug("loadRes over mapImgResPath: "+n),o.loadAtlasIndex+=1),void o.loadMapAtlas()})},updateChapterItem:function(e,t,a){var n=new cc.Node,o=n.addComponent(cc.Sprite);this.chapterContentNode.addChild(n),this.chapterBgItemList.push(n),o.spriteFrame=t.getSpriteFrame(a),n.position=cc.v2(0,this.contentHeight+n.height/2),this.contentHeight+=n.height,i.Logger.debug("self.contentHeight: "+this.contentHeight)},updateEmailRed:function(){var e=i.player.commonModule.checkMiniMailRed();0<e?(this.emailButtonRedLabel.string=e,this.emailButtonRedNode.active||(this.emailButtonRedNode.active=!0,i.gameScene.redNodeAction(this.emailButtonRedNode))):this.emailButtonRedNode.active&&(this.emailButtonRedNode.active=!1),this.updateMoreRed()},updateTaskRed:function(){i.player.taskModule.getTaskRed()?this.taskButtonRedNode.active||(this.taskButtonRedNode.active=!0,i.gameScene.redNodeAction(this.taskButtonRedNode)):this.taskButtonRedNode.active&&(this.taskButtonRedNode.active=!1)},updateSignRed:function(){1===i.player.signModule.getCurGroupId()?(i.player.signModule.isShowFirstHero()?(this.signFisrtNode.active=!0,this.signSevenNode.active=!1,i.lang.updateLabelString(this.signFisrtLabel1,[i.player.signModule.getSignTitle(),i.player.signModule.getSignFirstHeroName()])):(this.signFisrtNode.active=!1,this.signSevenNode.active=!0),this.signOtherNode.active=!1):(this.signFisrtNode.active=!1,this.signSevenNode.active=!1,this.signOtherNode.active=!0),i.player.signModule.isCanSign()?(this.signButtonRedNode.active||(this.signButtonRedNode.active=!0),i.gameScene.redNodeAction(this.signButtonRedNode)):this.signButtonRedNode.active&&(this.signButtonRedNode.active=!1)},updateHangUpRed:function(){i.player.commonModule.checkHangUpIsFull()||0<i.player.commonModule.getLastHangUpTodayAdTimes()?(this.hangUpBoxRedNode.active||(this.hangUpBoxRedNode.active=!0),i.gameScene.redNodeAction(this.hangUpBoxRedNode)):this.hangUpBoxRedNode.active&&(this.hangUpBoxRedNode.active=!1)},updateMoreRed:function(){this.emailButtonRedNode.active||this.pictorialButtonRedNode.active||this.subscribeRedNode.active?this.moreButtonRedNode.active||(this.moreButtonRedNode.active=!0,i.gameScene.redNodeAction(this.moreButtonRedNode)):this.moreButtonRedNode.active&&(this.moreButtonRedNode.active=!1)},updatePictorialRed:function(){i.player.towerModule.isHavePictorialNewTower()?this.pictorialButtonRedNode.active||(this.pictorialButtonRedNode.active=!0,i.gameScene.redNodeAction(this.pictorialButtonRedNode)):this.pictorialButtonRedNode.active&&(this.pictorialButtonRedNode.active=!1),this.updateMoreRed()},updateVipRed:function(){i.player.vipModule.getHaveVipUp()||i.player.vipModule.getHaveCanReceiveHero()||!i.player.vipModule.getIsMaxVipLevel()&&!i.player.vipModule.getTodayOpenPage()?this.vipButtonRedNode.active||(this.vipButtonRedNode.active=!0,i.gameScene.redNodeAction(this.vipButtonRedNode)):this.vipButtonRedNode.active&&(this.vipButtonRedNode.active=!1)},updateFreePowerRed:function(){for(var e=!1,t=0;t<i.JsonData.FreePower.length;t++){var a=i.JsonData.FreePower[t];if(1==a.mainType){if(i.player.commonModule.checkIsMyMiniPowerFirst()){if(0==i.player.commonModule.getFirstMyMiniPowerTime()){e=!0;break}}else if(i.timeUtil.getTodayHourTime(0)>i.player.commonModule.getLastMyMiniPowerTime()){e=!0;break}}else if(2==a.mainType){if(cc.sys.os==cc.sys.OS_ANDROID)if(i.player.commonModule.checkIsMyDestPowerFirst()){if(0==i.player.commonModule.getFirstDestPowerTime()){e=!0;break}}else if(i.timeUtil.getTodayHourTime(0)>i.player.commonModule.getLastDestPowerTime()){e=!0;break}}else if(a.mainType==i.constant.FREE_POWER_TYPE_FLOATING_WINDOW){if(cc.sys.os==cc.sys.OS_ANDROID)if(i.player.commonModule.checkIsFloatWindowPowerFirst()){if(0==i.player.commonModule.getFirstFloatWindowPowerTime()){e=!0;break}}else if(i.timeUtil.getTodayHourTime(0)>i.player.commonModule.getLastFloatWindowPowerTime()){e=!0;break}}else a.mainType==i.constant.FREE_POWER_TYPE_CUSTOMER&&i.player.commonModule.getFreePowerRedIndex()<i.constant.FREE_POWER_RED_INDEX&&(e=!0)}e?this.freePowerRedNode.active||(this.freePowerRedNode.active=!0,i.gameScene.redNodeAction(this.freePowerRedNode)):this.freePowerRedNode.active&&(this.freePowerRedNode.active=!1)},updateQuicklyBattleRed:function(){var e=i.templateManager.getGameParamValue("quickHangUpPowerNum");i.player.playerModule.isPowerEnough(e)&&i.player.commonModule.checkRecoverTime()&&i.player.playerModule.isPowerEnough(i.templateManager.getGameParamValue("quickHangUpMinPower"))&&this.clickQuicklyHangUpRed?(this.quicklyBattleRedNode.active||(this.quicklyBattleRedNode.active=!0),i.gameScene.redNodeAction(this.quicklyBattleRedNode),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_MAIN_QUICKLY_BATTLE),this.needCheckQuicklyBattle=!1):(this.quicklyBattleRedNode.active&&(this.quicklyBattleRedNode.active=!1),this.needCheckQuicklyBattle=i.player.commonModule.getCanUsePowerGetRewardCount()<=0)},buildAllBattleItem:function(){this.refreshBattleHeros(),this.refreshBattleEnemys(),i.Logger.debug("this.hangUpBattleHeros: "+this.hangUpBattleHeros);for(var e=0;e<this.hangUpBattleList.length;e++){var t=this.hangUpBattleList[e],a=this.buildEnemyBattleItem(t,e),n=this.buildSelfBattleItem(t,e);a.setOtherObj(n),n.setOtherObj(a),this.hangUpBattleObjList.push({enemyObj:a,selfObj:n,battleNode:t})}this.initHangUpDone=!0},buildEnemyBattleItem:function(e,t){var a=cc.instantiate(this.hangUpBattlePrefab);return e.addChild(a),a.opacity=1,(a=a.getComponent("MainHangUpBattleItemRender")).host=this,a.initData(i.constant.CAMP_TYPE_ENEMY,t),a},buildSelfBattleItem:function(e,t){var a=i.templateManager.getGameParamValue("hangUpSoldierPointList"),n=i.templateManager.getGameParamValue("hangUpSoldierMoveRange"),o=cc.instantiate(this.hangUpBattlePrefab);return e.addChild(o),(e=o.getComponent("MainHangUpBattleItemRender")).host=this,e.initData(i.constant.CAMP_TYPE_SELF,t),a.length>t&&(o.x=a[t]),n.length>t&&e.setMaxMove(n[t]),e},intoBattleStopHangUp:function(){i.Logger.debug("intoBattleStopHangUp");for(var e=0;e<this.hangUpBattleObjList.length;e++){var t=this.hangUpBattleObjList[e];t.selfObj&&t.selfObj.node.destroy(),t.enemyObj&&t.enemyObj.node.destroy()}this.hangUpBattleObjList=[]},intoMainStartHangUp:function(){i.Logger.debug("intoMainStartHangUp"),this.isFirstIntoMain||0<this.hangUpBattleObjList.length?this.isFirstIntoMain=!1:(this.isFirstIntoMain=!1,this.hangUpBattleObjList=[],this.buildAllBattleItem())},refreshBattleHeros:function(){this.hangUpBattleHeros=i.player.heroModule.getCanHangUpBattleHeros()},getOneBattleHero:function(e){if(0<=this.hangUpBattleHeros.indexOf(e))return e;for(var t=[],i=0;i<this.hangUpBattleObjList.length;i++){var a=this.hangUpBattleObjList[i].selfObj._curHeroId;t.push(a)}for(var n=[],o=0;o<this.hangUpBattleHeros.length;o++){var s=this.hangUpBattleHeros[o];t.indexOf(s)<0&&n.push(s)}return 0==n.length?-1:n[0]},refreshBattleEnemys:function(){this.hangUpBattleEnemys=[];var e=[];try{var t=i.player.instanceModule.getMaxChapter(),a=i.templateManager.getInstanceListByChapterId(t),n=i.player.instanceModule.getChapterMaxLevel(t),o=n==a.length?n-1:n;i.Logger.debug("refreshBattleEnemys - maxChapter: "+t+", curInstanceIndex: "+o);var s=a[o];i.Logger.debug("refreshBattleEnemys - instanceData: "+JSON.stringify(s));var r=s.wellen;e=i.templateManager.getWaveListByGroupID(r)}catch(e){return void i.Logger.debug("refreshBattleEnemys - error: "+e)}for(var c=0;c<e.length;c++)for(var l=e[c],d=0;d<l.enemyList.length;d++)for(var h=l.enemyList[d],u=0;u<h.length;u++){var p=h[u];1!=i.templateManager.getEnemyDataById(p).isFly&&31017!=p&&(0<=this.hangUpBattleEnemys.indexOf(p)||this.hangUpBattleEnemys.push(p))}},getRandomEnemyId:function(){if(0==this.hangUpBattleEnemys.length)return null;var e=i.Utils.getRandomInt(0,this.hangUpBattleEnemys.length-1);return this.hangUpBattleEnemys[e]},buildInstanceEnterItem:function(e){for(var t=this,i=0;i<e;i++){var a=cc.instantiate(this.instanceEnterPrefab);this.chapterContentNode.addChild(a,10),((a=a.getComponent("MainInstanceItemRender")).host=this).instanceEnterItemObjList.push(a)}this.scheduleOnce(function(){0<=t.bubbleIndex&&t.instanceEnterItemObjList.length>t.bubbleIndex&&t.showClickInstanceBubble(t.bubbleIndex)},.1)},showClickInstanceBubble:function(e){var t=this;this.hideClickInstanceBubble();var a,n,o=null;this.instanceEnterItemObjList.length>e?(o=this.instanceEnterItemObjList[e].node,this.bubbleIndex=-1,this.clickInstanceBubbleObj=this.buildOneBubble(),(n=o.getPosition()).y+=o.height+10,this.clickInstanceBubbleObj.node.position=n,this.clickInstanceBubbleObj.node.active=!0,this.clickInstanceBubbleObj.initOtherBubble(i.constant.BUBBLE_TYPE_CLICK_INSTANCE,9999999,function(){t.clickInstanceBubbleObj=null}),a=cc.scaleTo(.1,1.1),n=cc.scaleTo(.1,1),n=cc.sequence(a,n),o.stopAllActions(),o.runAction(n)):this.bubbleIndex=e},buildOneBubble:function(){var e=cc.instantiate(this.bubblePrefab);return this.chapterContentNode.addChild(e),e.active=!1,e.getComponent("GuideBubble")},hideClickInstanceBubble:function(){this.clickInstanceBubbleObj&&(this.clickInstanceBubbleObj.closeOtherBubble(),this.clickInstanceBubbleObj=null)},updateInstanceProcess:function(){var e,t,a,n=i.player.instanceModule.getPassInstanceNumByChapterId(this.chapterId);n>=this.instanceDataList.length?this.chapterSame&&!this.isSwitchChapter||this.scrollView.scrollToOffset(cc.v2(0,0)):(e=this.instanceDataList[n],this.isSwitchChapter?this.scrollView.scrollToOffset(cc.v2(0,this.contentHeight-e.point[1]-cc.winSize.height/2),0):(t=cc.delayTime(.2),a=cc.callFunc(function(){this.scrollView.scrollToOffset(cc.v2(0,this.contentHeight-e.point[1]-cc.winSize.height/2),1)},this),a=cc.sequence(t,a),this.contentNode.stopAllActions(),this.contentNode.runAction(a))),this.chapterNameLabel.string=i.lang.getGameText(this.chapterCfg.name),i.lang.updateLabelString(this.chapterProgressLabel,[n,this.instanceDataList.length]),this.updateMainTaskInfo(),this.isSwitchChapter=!1,this.isShowRewardTip=this.instanceRewardTipNode.active},showRewardTip:function(e){this.instanceRewardTipNode.opacity=e?255:1},updateBoxInfo:function(){var e=i.player.instanceModule.getChapterAllStarNum(this.chapterId);this.isFirstIn&&(this.starLabel.string=e,this.lastAllStar=e),this.chapterData=i.templateManager.getChapterDataById(this.chapterId);for(var t=this.starprogressBar.node.width,a=this.chapterData.starJudge[this.chapterData.starJudge.length-1],n=[],o=-t/2,s=0,r=0;r<this.chapterData.starJudge.length;r++){var c=this.chapterData.starJudge[r],l="box"+(r+1);(h=cc.find(l,this.starprogressNode)).angle=0,i.Logger.debug("boxRootNode: "+h.y+", value: "+c+", totalStar: "+a+", totalHeight: "+t);var d=h.convertToWorldSpaceAR(cc.v2(0,0)),h=this.starprogressBar.node.convertToNodeSpaceAR(d);d=r===this.chapterData.starJudge.length-1?1-s:(h.x-o)/t,n.push(d),s+=d,o=h.x,cc.find(l+"/starLayout/label",this.starprogressNode).getComponent(cc.Label).string=c,d=cc.find(l+"/box",this.starprogressNode),h=cc.find(l+"/boxOpen",this.starprogressNode),c=cc.find(l+"/effect_box_light",this.starprogressNode),l=i.player.instanceModule.isAlreadyReward(r),d.angle=0,d.active=!l,h.active=l,c.active=i.player.instanceModule.getCanReward(r),i.player.instanceModule.getCanReward(r)?i.gameScene.redNodeAction(d):d.stopAllActions()}for(var u=0,p=0,g=0;g<this.chapterData.starJudge.length;g++){var _=this.chapterData.starJudge[g]-p,m=e-_,E=n[g];if(!(0<=m)){u+=e/_*E;break}u+=E,e=m,p=this.chapterData.starJudge[g]}this.starprogressBar.progress=u},updateBoxStarNum:function(e){this.boxStarAni.play("star"),e&&(this.lastAllStar=i.player.instanceModule.getChapterAllStarNum(this.chapterId),this.starLabel.string=this.lastAllStar)},initHangUpFlyPool:function(){this.hangUpFlyPool=[];for(var e=0;e<3;e++){var t=cc.instantiate(this.flyItemPrefab);t.x=-3e3,this.hangUpNode.addChild(t),this.hangUpFlyPool.push(t)}},getHangUpFlyFromPool:function(){var e;return this.hangUpFlyPool||(this.hangUpFlyPool=[]),0<this.hangUpFlyPool.length?(e=this.hangUpFlyPool[0],this.hangUpFlyPool.splice(0,1)):((e=cc.instantiate(this.flyItemPrefab)).x=-3e3,this.hangUpNode.addChild(e)),e},putHangUpFlyPool:function(e){e&&(e.x=-3e3,e.opacity=255,this.hangUpFlyPool.push(e))},flyHangUpEffect:function(e){var t=this.hangUpNode.convertToNodeSpaceAR(e),i=this.getHangUpFlyFromPool();i.getChildByName("gold").scale=.8,i.getChildByName("gold").active=!0,i.scale=.1,i.position=t;var a=this,n=cc.scaleTo(.1,1),o=cc.callFunc(function(){a.updateHangUpAction("eat",!0,"stand")},i),s=cc.delayTime(.2);e=cc.moveTo(.46,this.hangUpBoxNode.position.add(cc.v2(-7,19))),t=cc.callFunc(function(){a.putHangUpFlyPool(this)},i),t=cc.sequence(n,o,s,e,t),i.runAction(t)},updateHangUpAction:function(e,t,a){var n=!0;t&&(n=!1);var o=i.player.commonModule.checkHangUpIsFull()?"2":"1",s=e+o;this.hangUpBoxEffect.clearTrack(0);var r=this;this.hangUpBoxEffect.setAnimation(0,s,n)&&!n&&a&&this.hangUpBoxEffect.setCompleteListener(function(e){(e.animation?e.animation.name:"")==s&&r.hangUpBoxEffect.setAnimation(0,a+o,!0)}),this.updateHangUpRed(),this.updateHangUpCoinSprite()},updateHangUpCoinSprite:function(){var e,t=this.hangUpCoinSpriteName,a=i.player.commonModule.getHangUpTime(),n=i.timeUtil.getSecond();if((a=-1!==a&&a<n?n-a:0)<300?this.hangUpCoinSpriteName="":e=300<=a&&a<3600?(this.hangUpCoinSpriteName="HangUp_Coin_Some",this.HangUpGoldSomeLightAni):3600<=a&&a<14400?(this.hangUpCoinSpriteName="HangUp_Coin_Large",this.HangUpGoldLargeLightAni):(this.hangUpCoinSpriteName="HangUp_Coin_Huge",this.HangUpGoldHugeLightAni),this.hangUpCoinSpriteName&&""!=this.hangUpCoinSpriteName){if(this.hangUpCoinSprite.node.active=!0,t!=this.hangUpCoinSpriteName){this.hangUpCoinSprite.spriteFrame=this.hangUpAtlas.getSpriteFrame(this.hangUpCoinSpriteName);for(var o=[[this.HangUpGoldSomeLightAni,"gold_light1"],[this.HangUpGoldLargeLightAni,"gold_light2"],[this.HangUpGoldHugeLightAni,"gold_light3"]],s=0;s<o.length;s++){var r=o[s][0],c=o[s][1];r==e?(r.node.active=!0,r.play(c)):r.node.active=!1}}}else this.hangUpCoinSprite.node.active=!1,this.HangUpGoldSomeLightAni.node.active=!1,this.HangUpGoldLargeLightAni.node.active=!1,this.HangUpGoldHugeLightAni.node.active=!1},showBoxRewardTips:function(e,t){this.boxRewardTipsNode.y=t.y,this.boxRewardTipsNode.active=!0;for(var i=0;i<e.length;i++){i>=this.boxRewardTipsItemObjList.length&&(n=(a=cc.instantiate(this.boxRewardTipsItemPrefab)).getComponent("InstanceBoxRewardTipsItemRender"),this.boxRewardTipsLayoutNode.addChild(a),a.active=!1,this.boxRewardTipsItemObjList.push(n));var a=this.boxRewardTipsItemObjList[i];a.node.active=!0;var n=e[i];a.initData(n.key,n.value)}this.boxRewardTipsNode.opacity=0,this.boxRewardTipsNode.scale=0;var o=cc.scaleTo(.1,1.1),s=cc.scaleTo(.1,1);t=cc.fadeTo(.2,255),s=cc.sequence(o,s),this.boxRewardTipsNode.runAction(cc.spawn(s,t)),this.moreButtonDownNode.active&&this.checkFuncBtnState()},hideBoxRewardTips:function(){if(i.gameScene.pageIsOpened(i.pageConstant.PAGE_TYPE_SETTING)&&(this.notHideTips=!0),this.notHideTips?this.notHideTips=!1:this.moreButtonDownNode.active&&this.checkFuncBtnState(),this.boxRewardTipsNode.active){for(var e=0;e<this.boxRewardTipsItemObjList.length;e++)this.boxRewardTipsItemObjList[e].node.active=!1;this.boxRewardTipsNode.active=!1}},initFlyPool:function(){this.flyPool=[];for(var e=0;e<20;e++){var t=cc.instantiate(this.flyStarItemPrefab);t.x=-3e3,this.node.addChild(t),this.flyPool.push(t)}},getFlyFromPool:function(){var e;return this.flyPool||(this.flyPool=[]),0<this.flyPool.length?(e=this.flyPool[0],this.flyPool.splice(0,1)):((e=cc.instantiate(this.flyStarItemPrefab)).x=-3e3,this.node.addChild(e)),e},putFlyPool:function(e){e&&(e.x=-3e3,e.scale=1,this.flyPool.push(e))},flyCacheEffect:function(e){for(var t=i.player.instanceModule.getCacheStarNum(),a=0;a<t;a++)this.flyUiEffect(e,a,a==t-1);i.player.instanceModule.cleanCacheStartNum()},flyUiEffect:function(e,t){var a=this.getFlyFromPool();a.getChildByName("tailing").active=!1;var n,o,s,r,c,l,d,h=this.flyStarNode;h&&(n=a.parent,e=e?n.convertToNodeSpaceAR(e):{x:0,y:0},o=h.convertToWorldSpaceAR(cc.v2(0,0)),c=n.convertToNodeSpaceAR(o),s=i.Utils.getRandomInt(e.x-100,e.x+100),d=i.Utils.getRandomInt(e.y-100,e.y+100),r=cc.v2(s,-50+d),a.setPosition(r),a.opacity=0,h=cc.delayTime(2/30*t+1),n=cc.fadeIn(.2),o=cc.moveBy(.2,cc.v2(0,-30)),e=cc.delayTime(.1),s=cc.callFunc(function(){a.getChildByName("tailing").active=!0},a),d=i.Utils.getRotation(r,c),t=Math.abs(c.x-r.x),r=Math.abs(c.y-r.y),r=Math.sqrt(t*t+r*r),d=[i.Utils.getOffsetByRotationAndDistance(r,d-10),i.Utils.getOffsetByRotationAndDistance(r,d+10),c],c=cc.spawn(cc.scaleTo(.8,.7),cc.bezierTo(.8,d)),cc.fadeOut(.2),l=this,d=cc.callFunc(function(){a.getChildByName("tailing").active=!1,l.putFlyPool(this),l.updateBoxStarNum(!0)},a),d=cc.sequence(h,n,o,e,s,c,d),a.runAction(d))},onClickBox1:function(){var e;this.chapterData&&(i.player.instanceModule.getCanReward(0)?(e={type:i.constant.COMMON_REWARD_PAGE_MAIN_CHAPTER_BOX,rewards:this.chapterData.starReward1,index:0},i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_INSTANCE_BOX_REWARD,e)):this.showBoxRewardTips(this.chapterData.starReward1,this.box1Label.node.parent.parent.position))},onClickBox2:function(){var e;this.chapterData&&(i.player.instanceModule.getCanReward(1)?(e=null,1===this.chapterId&&(e=function(){i.player.commonModule.checkIosMark()}),e={type:i.constant.COMMON_REWARD_PAGE_MAIN_CHAPTER_BOX,rewards:this.chapterData.starReward2,index:1,callBack:e},i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_INSTANCE_BOX_REWARD,e)):this.showBoxRewardTips(this.chapterData.starReward2,this.box2Label.node.parent.parent.position))},onClickBox3:function(){var e;this.chapterData&&(this.flyCacheEffect(),i.player.instanceModule.getCanReward(2)?(e={type:i.constant.COMMON_REWARD_PAGE_MAIN_CHAPTER_BOX,rewards:this.chapterData.starReward3,index:2},i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_INSTANCE_BOX_REWARD,e)):this.showBoxRewardTips(this.chapterData.starReward3,this.box3Label.node.parent.parent.position))},onClickQuicklyBattle:function(){i.gameScene.showPage(i.pageConstant.PAGE_TYPE_QUICKLY_BATTLE),this.clickQuicklyHangUpRed=!1,this.quicklyBattleRedNode.active&&(this.quicklyBattleRedNode.active=!1)},onClickHangUp:function(){i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_HANG_UP)},onClickNewYear:function(){i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_NEW_YEAR_ACTIVITY)?i.player.newYearModule.isActiveClose()?i.gameScene.checkServerTime(function(){i.player.newYearModule.checkNewYearActivityState(),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_YEAR_ACTIVITY)},!1,function(){}):i.gameScene.showPage(i.pageConstant.PAGE_TYPE_YEAR_ACTIVITY):i.gameScene.showTipsItemRender(i.player.functionModule.getFuncConditionStringById(i.constant.MAIN_FUNCTION_NEW_YEAR_ACTIVITY))},onClickYearMonster:function(){i.gameScene.showPage(i.pageConstant.PAGE_TYPE_YEAR_MONSTER)},onClickMore:function(){this.checkFuncBtnState()},checkFuncBtnState:function(e){e||(this.isShowMoreFunc=!this.isShowMoreFunc),this.isShowMoreFunc?(this.funcLayoutNode2.active=!1,this.moreButtonDownNode.active=!0,this.funcLayout1Bg.enabled=!0):(this.funcLayoutNode2.active=!0,this.moreButtonDownNode.active=!1,this.funcLayout1Bg.enabled=!1),this.moreButtonDownLayout.updateLayout(),this.funcLayout1.updateLayout(),this.functionLayout.updateLayout()},onClickSubscribe:function(){console.log("onClickSubscribe"),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_SUBSCRIBE),i.BI.onEvent(i.biConstant.EVENT_TYPE_COUNT,i.biConstant.EVENT_ID_COUNT_SUBSCRIBE_OPEN)},onClickTask:function(){i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_TASK)&&i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_TASK)},onClickInvite:function(){console.log("onClickInvite"),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_FRIEND_INVITE)},onClickFreePower:function(){i.gameScene.showPage(i.pageConstant.PAGE_TYPE_FREE_POWER_REWARD,{type:i.constant.FREE_POWER_TYPE_MINI})},onClickSet:function(){this.notHideTips=!0,i.gameScene.showPage(i.pageConstant.PAGE_TYPE_SETTING)},onClickPictorial:function(){i.gameScene.showPage(i.pageConstant.PAGE_TYPE_PICTORIAL)},checkSystemSubscribeResult:function(){var e=i.ttAdManager.isSubscribeRejectInteractive(),t=i.ttAdManager.isSubscribeRejectRank(),a=i.ttAdManager.isSubscribeOpenInteractive(),n=i.ttAdManager.isSubscribeOpenRank();a||n?i.BI.onEvent(i.biConstant.EVENT_TYPE_COUNT,i.biConstant.EVENT_ID_COUNT_SUBSCRIBE_ACCEPT_0):(e||t)&&i.BI.onEvent(i.biConstant.EVENT_TYPE_COUNT,i.biConstant.EVENT_ID_COUNT_SUBSCRIBE_REJECT_0)},onClickRank:function(){if(i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_RANK)){this.notHideTips=!0,i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_RANK);var e=this;if(!i.config.needSDKUid)return!1;var t=i.templateManager.getGameParamValue("systemSubscribeCancelInterval"),a=i.templateManager.getGameParamValue("systemSubscribeRefuseInterval"),n=i.timeUtil.getSecond()-i.gameScene.systemSubscribeTime,o=[],s=i.ttAdManager.isSubscribeOpenInteractive();s||o.push("SYS_MSG_TYPE_INTERACTIVE");var r=i.ttAdManager.isSubscribeOpenRank();r||o.push("SYS_MSG_TYPE_RANK"),console.log("onClickRank isInteractiveOpen = "+s+" isRankOpen = "+r+" waitTime = "+n),t<=n&&0<o.length&&wx.requestSubscribeSystemMessage&&(console.log("requestSubscribeSystemMessage"),wx.requestSubscribeSystemMessage({msgTypeList:o,success:function(e){console.log("subscribe success",e)},fail:function(e){console.log("subscribe fail",e)},complete:function(t){console.log("subscribe complete",t),i.ttAdManager.updateSubscriptionsSetting(),i.gameScene.systemSubscribeTime=i.timeUtil.getSecond(),i.BI.onEvent(i.biConstant.EVENT_TYPE_COUNT,i.biConstant.EVENT_ID_COUNT_SUBSCRIBE_SHOW_0),e.checkSystemSubscribeResult()}})),r=i.ttAdManager.isSubscribeRejectInteractive(),t=i.ttAdManager.isSubscribeRejectRank(),o=null,r&&t?o=i.lang.getGameText(i.GameTextCode.OPEN_REMIND_ALL):r?o=i.lang.getGameText(i.GameTextCode.OPEN_REMIND_ONE):t&&(o=i.lang.getGameText(i.GameTextCode.OPEN_REMIND_TWO)),a<=n&&o&&i.nativeManager.showWxTips("",o,"\u53bb\u8bbe\u7f6e",function(){wx.openSetting({success:function(e){console.log("openSetting success",e),i.gameScene.systemSubscribeTime=i.timeUtil.getSecond(),i.ttAdManager.updateSubscriptionsSetting()}})}),t=i.ttAdManager.isOnceSubscribeOpen(i.constant.WX_TEMPLATE_ID_OFFLINE),a=i.ttAdManager.isOnceSubscribeOpen(i.constant.WX_TEMPLATE_ID_POWER),n=i.ttAdManager.isOnceSubscribeOpen(i.constant.WX_TEMPLATE_ID_SIGN),o=i.ttAdManager.isOnceSubscribeOpen(i.constant.WX_TEMPLATE_ID_VERSION_UPDATE),console.log("isOpenOffline = "+t+" isOpenPower = "+a+" isOpenSign = "+n+" isOpenUpdate = "+o)}},onClickSign:function(){i.gameScene.showPage(i.pageConstant.PAGE_TYPE_SIGN)},onClickEmail:function(){i.gameScene.showPage(i.pageConstant.PAGE_TYPE_EMAIL)},onClickVip:function(){i.gameScene.showPage(i.pageConstant.PAGE_TYPE_VIP)},onClickClose:function(){this.closePage()},closePageBegan:function(){i.ttAdManager.hideSingleGridCustomAd(),i.nativeManager.hideGameClubButton(i.constant.GAME_CLUB_TYPE_MAIN)},onClickPiggyBank:function(){i.gameScene.showPage(i.pageConstant.PAGE_TYPE_PIGGY_BANK)},runHangUpEffect:function(e,t){var i=t.position,a=cc.delayTime(e),n=cc.callFunc(function(){t.opacity=255},this),o=cc.scaleTo(.1,2),s=cc.scaleTo(.2,1),r=cc.scaleTo(.6,1),c=cc.sequence(o,s,r);e=cc.moveBy(.3,cc.v2(0,40)),o=cc.delayTime(.5),s=cc.fadeOut(.4),r=cc.callFunc(function(){t.opacity=1,t.position=i},this),r=cc.sequence(o,s,r),r=cc.spawn(c,e,r),r=cc.sequence(a,n,r),t.stopAllActions(),t.runAction(r)},checkHangUpEffect:function(){!this.hangUpStatus||0<i.gameScene.getOpenedPageCount()||(this.hangUpStatus=!1,i.lang.updateLabelString(this.hangUpMarkUpGoldLabel,[i.Utils.formatBigNumberForLabel(i.player.commonModule.getHangUpReceiveCoin(3600))]),i.lang.updateLabelString(this.hangUpMarkUpExpLabel,[i.Utils.formatBigNumberForLabel(i.player.commonModule.getHangUpReceiveExp(3600))]),this.runHangUpEffect(.4,this.hangUpMarkUpGoldNode),this.runHangUpEffect(1.4,this.hangUpMarkUpExpNode))},updateInstanceItem:function(){var e,t,a,n,o,s,r;this.initDataDone&&(e=i.player.instanceModule.getMaxChapter(),t=i.player.instanceModule.getChapterMaxLevel(e),this.instanceRewardData=i.templateManager.getNextInstancePiece(e,t),a=i.templateManager.getGameParamValue("goalDistance")[0],this.instanceIndex<this.instanceDataList.length&&(n=i.player.instanceModule.getPassInstanceNumByChapterId(this.chapterId),this.instanceIndex>=this.instanceEnterItemObjList.length&&this.buildInstanceEnterItem(1),o=n===this.instanceIndex,s=this.instanceEnterItemObjList[this.instanceIndex],this.instanceIndex>n||this.instanceIndex>=this.instanceDataList.length?(s.node.active=!1,this.chapterId===e&&this.instanceRewardData&&this.instanceRewardData[0]===this.instanceIndex+1&&t!==this.instanceRewardData[0]&&this.instanceRewardData[0]-t<=a&&(r=this.instanceDataList[this.instanceIndex].point,r=cc.v2(r[0]-320,r[1]-s.node.height/2+22),s.node.position=r,s.node.active=!0,s.initData(this.chapterId,this.instanceIndex+1,!1,this.instanceRewardData[1]))):(r=this.instanceDataList[this.instanceIndex].point,r=cc.v2(r[0]-320,r[1]-s.node.height/2+22),s.node.position=r,s.node.active=!0,s.initData(this.chapterId,this.instanceIndex+1,o)),this.instanceIndex+=1))},runFlyVipAction:function(){this.flyVipSprite.node.active=!0,this.flyVipSprite.node.position=cc.v2(0,0);var e=i.player.vipModule.getCurVipLevel(),t=i.templateManager.getVipDataByLevel(e);this.flyVipSprite.spriteFrame=this.vipAtlas.getSpriteFrame(t.vipIconBig);var a=this.vipButtonNode.convertToWorldSpaceAR(cc.v2(0,0));e=this.node.convertToNodeSpaceAR(a),t=cc.delayTime(1),a=cc.moveTo(.5,e),e=cc.scaleTo(.5,.6),a=cc.spawn(a,e),e=cc.callFunc(function(){i.Logger.debug("mainChildPage hideGuideLimit 1439"),this.updateVipInfo(),this.checkVipGuide()},this),e=cc.sequence(t,a,e),this.flyVipSprite.node.stopAllActions(),this.flyVipSprite.node.runAction(e),i.gameScene.showGuideLimit()},runFlyMedalAction:function(){var e,t=i.player.taskModule.getNewYearTaskLevel(),a=i.templateManager.getNewYearTaskMedalById(t);a&&(this.flyVipSprite.node.active=!0,this.flyVipSprite.node.position=cc.v2(0,0),this.flyVipSprite.spriteFrame=this.giftAtlas.getSpriteFrame(a.icon),e=this.newYearActivityBgNode.convertToWorldSpaceAR(cc.v2(0,0)),t=this.node.convertToNodeSpaceAR(e),a=cc.delayTime(1),e=cc.moveTo(.5,t),t=cc.scaleTo(.5,.6),e=cc.spawn(e,t),t=cc.callFunc(function(){this.flyVipSprite.node.active=!1},this),t=cc.sequence(a,e,t),this.flyVipSprite.node.stopAllActions(),this.flyVipSprite.node.runAction(t))},checkVipGuide:function(){i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_SECOND_HERO)&&i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_SECOND_HERO_1,i.gameScene.mainPage.heroIconNode)},checkHangUpBubble:function(e){!this.initHangUpDone||(this.hangUpBubbleTime||(this.hangUpBubbleTime=0),this.hangUpBubbleTime+=e,this.hangUpBubbleTime<this.totalHangUpBubbleTime/1e3||(this.hangUpBubbleTime=0)==this.hangUpBattleObjList.length)||(e=i.Utils.getRandomInt(0,this.hangUpBattleObjList.length-1),this.hangUpBattleObjList[e].selfObj.showWordsNode())},checkVipExpFly:function(e){var t,a;this.vipExpUpdateTime||(this.vipExpUpdateTime=0),this.vipExpUpdateTime+=e,this.vipExpUpdateTime<.5||(this.vipExpUpdateTime=0,!i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_VIP)||i.player.vipModule.getIsMaxVipLevel()||i.guideManager&&i.guideManager.isLimitClick()||0<i.gameScene.getOpenedPageCount()||!i.gameScene.mainPage.haveVipExpFly)||(i.gameScene.mainPage.setHaveVipExpFly(!1),this.vipExpFlyNode.position=cc.v2(0,0),this.vipExpFlyNode.active=!0,t=this.vipButtonParentNode.convertToWorldSpaceAR(cc.v2(0,0)),a=this.node.convertToNodeSpaceAR(t),e=cc.delayTime(.5),t=cc.moveTo(.4,a),a=cc.callFunc(function(){var e=this;this.vipExpFlyNode.active=!1,this.vipButtonEffectRingNode.active=!0,this.vipButtonParentAni.stop(),this.vipButtonParentAni.setCurrentTime(0),this.vipButtonParentAni.play("vipParent"),this.vipButtonParentAni.on("finished",function(){e.vipButtonEffectRingNode.active=!1},this)},this),a=cc.sequence(e,t,a),this.vipExpFlyNode.stopAllActions(),this.vipExpFlyNode.runAction(a))},checkHeroPieceTipShow:function(){},showNewTargetEffect:function(){this.newTargetAni=cc.find("aims_fly",this.node).getComponent(cc.Animation),this.newTargetAni.node.active=!0,this.newTargetAni.node.setPosition(cc.v2(0,0)),this.newTargetAni.stop(),this.newTargetAni.setCurrentTime(0),this.newTargetAni.play("aims_fly");var e=this.instanceRewardTipNode.convertToWorldSpaceAR(cc.v2(0,0)),t=this.node.convertToNodeSpaceAR(e),i=cc.delayTime(.2),a=cc.callFunc(function(){},this),n=cc.moveTo(.5,t);e=cc.delayTime(.2),t=cc.callFunc(function(){this.showRewardTip(!0),this.newTargetAni.node.active=!1},this),t=cc.sequence(i,a,n,e,t),this.newTargetAni.node.runAction(t)},updateMainTaskInfo:function(){this.curMainTaskId=i.player.taskModule.getCurMainTaskId();var e,t,a,n=i.templateManager.getMainTaskDataById(this.curMainTaskId);n?(this.instanceRewardTipNode.active||(this.instanceRewardTipNode.active=!0),e=i.player.taskModule.getMainTaskValue(this.curMainTaskId),t=i.player.taskModule.getMainTaskTarget(this.curMainTaskId),a=this.mainAtlas,t<=e||i.player.gmModule.isMainTaskReward()?(this.mainTaskCompleteNode.active=!0,this.mainTaskUnCompleteNode.active=!1,this.mainTaskCompleteIconSprite.spriteFrame=a.getSpriteFrame(n.icon),this.newTaskButton.active=!0,i.gameScene.redNodeAction(this.newTaskButton)):(this.newTaskButton.active=!1,this.mainTaskCompleteNode.active=!1,this.mainTaskUnCompleteNode.active=!0,this.mainTaskUnCompleteIconSprite.spriteFrame=a.getSpriteFrame(n.icon),this.mainTaskUnCompleteNameLabel.string=i.player.taskModule.getMainTaskDesc(this.curMainTaskId),this.mainTaskUnCompleteProgressBar.progress=e/t,i.lang.updateLabelString(this.mainTaskUnCompleteProgressLabel,[e,t]))):this.instanceRewardTipNode.active&&(this.instanceRewardTipNode.active=!1)},onClickMainTask:function(){i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_LINE_TASK)},onClickAlliance:function(){var e=this;i.gameScene.showLoadingCycle(),i.player.serviceModule.getServerGameParams(i.constant.SERVER_PARAM_ALLIANCE_OPEN,function(t){i.gameScene.hideLoadingCycle(),t?(i.player.allianceModule.setAllianceController(t),e.enterYearLegion()):(i.player.allianceModule.setAllianceController(t),i.gameScene.showTipsItemRender(i.lang.getGameText(i.GameTextCode.ACTIVITY_NOT_START)))})},enterYearLegion:function(){i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_ALLIANCE)?i.player.allianceModule.getServerAllianceBaseInfoData(function(){null!=i.player.allianceModule.getAllianceId()?i.gameScene.showPage(i.pageConstant.PAGE_TYPE_ALLIANCE):i.gameScene.showPage(i.pageConstant.PAGE_TYPE_ALLIANCE_JOIN)},function(e){i.Logger.debug("onClickAlliance err - ",e)}):i.gameScene.showTipsItemRender(i.lang.getGameText(i.GameTextCode.ACTIVITY_NOT_START))},onPageOpen:function(e){if(e===i.pageConstant.PAGE_TYPE_MAIN_CHILD)return i.ttAdManager.isSingleGridAdShow()||i.ttAdManager.showSingleGridCustomAd(this.singleAdNode),void this.scheduleOnce(function(){i.nativeManager.showGameClubButton(i.constant.GAME_CLUB_TYPE_MAIN)},.1);this.node.active&&0!==i.gameScene.getOpenedPageCount()&&(i.ttAdManager.hideSingleGridCustomAd(),i.nativeManager.hideGameClubButton(i.constant.GAME_CLUB_TYPE_MAIN))},onPageClose:function(e){if(e===i.pageConstant.PAGE_TYPE_MAIN_CHILD)return i.ttAdManager.hideSingleGridCustomAd(),void i.nativeManager.hideGameClubButton(i.constant.GAME_CLUB_TYPE_MAIN);this.node.active&&(0!==(e=i.gameScene.getOpenedPageCount())||i.ttAdManager.isSingleGridAdShow()||i.ttAdManager.showSingleGridCustomAd(this.singleAdNode),0===e&&this.scheduleOnce(function(){i.nativeManager.showGameClubButton(i.constant.GAME_CLUB_TYPE_MAIN)},.1))},update:function(e){this.updateInstanceItem(e);for(var t=0;t<this.hangUpBattleObjList.length;t++){var i=this.hangUpBattleObjList[t];i.enemyObj&&(i.enemyObj.updateBattle(e),i.selfObj.updateBattle(e))}this.curTime+=e,.2<this.curTime&&(this.curTime=0,this.checkHeroPieceTipShow(),this.checkSubscribeButtonRed()),this.checkHangUpBubble(e),this.updatePiggyBank(e,!1),this.checkHangUpEffect(),this.needCheckQuicklyBattle&&(this.checkQuickTime||(this.checkQuickTime=0),this.checkQuickTime+=e,1<=this.checkQuickTime&&(this.checkQuickTime=0,this.updateQuicklyBattleRed())),this.checkVipExpFly(e)}}),cc._RF.pop()},{}],MainHangUpBattleItemRender:[function(e,t){"use strict";cc._RF.push(t,"e9adeUbBj9GHIqbAD4FfgYn","MainHangUpBattleItemRender");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{},afterLoad:function(){this.flyHpNode=cc.find("flyHp",this.node),this.flyHpLabel1Node=cc.find("label",this.flyHpNode),this.flyHpLabel2Node=cc.find("label2",this.flyHpNode),this.flyHpNodePosition=this.flyHpNode.position,this.flyHpNode.active=!1,this.wordsNode=cc.find("words",this.node),this.wordsLabel=cc.find("label",this.wordsNode).getComponent(cc.Label),this.wordsNode.opacity=1,this.bulletHitAni=cc.find("tower_bullet_hit",this.node).getComponent("cc.Animation"),this.bulletHitAni.on("finished",this.onFinished,this),this.soldierSpine=cc.find("spine",this.node).getComponent(sp.Skeleton),this.initDone=!1,this.hangUpWarSpeed=i.templateManager.getGameParamValue("hangUpWarSpeed")/1e4,this.selfAttrTime=1.3/this.hangUpWarSpeed,this.enemyAttrTime=2/this.hangUpWarSpeed,this.moveDistance=80,this._curHeroId=-1},setOtherObj:function(e){this._otherObj=e},setMaxMove:function(e){this.maxMove=e},initData:function(e,t){this.initDone=!1,this._type=e,this._index=t,this.updateData()},updateData:function(){this._itemStatus=i.constant.MAIN_PAGE_BATTLE_NONE,this.isAttring=!1,this.isFirstRun=!0,this.canStart=!1;var e=i.templateManager.getGameParamValue("hangUpDeadRandomNum");this._hitTimes=i.Utils.getRandomInt(e[0],e[1]),-1==this._curHeroId&&this._type==i.constant.CAMP_TYPE_SELF&&(this._curHeroId=this.host.getOneBattleHero(this._curHeroId)),this.updateSpineInfo(!0)},resetSelfAction:function(){this.stopUpdate=!0,this.wordsShowTime=0,this.isWordsShow=!1,this.wordsNode.opacity=0,this.node.stopAllActions(),this.isAttring=!1,this.isSelfRunning=!1,this._itemStatus=i.constant.MAIN_PAGE_BATTLE_NONE,this.isChangeDirectionDone=!1,this.updateItemAction(),this.stopUpdate=!1,this.setOtherObj(null)},checkHeroIdChange:function(){var e=this.host.getOneBattleHero(this._curHeroId);e&&e!=this._curHeroId&&(this._curHeroId=e,this.updateSelfInfo())},updateSpineInfo:function(e){this._type==i.constant.CAMP_TYPE_SELF?this.updateSelfInfo(e):this.updateEnemyInfo(e)},updateSelfInfo:function(e){var t=this._curHeroId;0<(t=e?this.host.getOneBattleHero(this._curHeroId):t)?this.soldierSpine.node.scale=.8:(this.soldierSpine.node.scale=1,a=i.templateManager.getGameParamValue("hangUpSoldierList"),t=this.getBattleId(a)),0<t&&(this._curHeroId=t);var a=i.templateManager.getSoldierDataById(t);this.hurtNum=a.physicalAttack+a.magicAttack,t="effect/battle/hero/"+a.appearance,a=0<a.isPremultipliedAlpha,this.updateSpine(t,a,.5)},updateEnemyInfo:function(e){var t=this.host.getRandomEnemyId();t||(a=i.templateManager.getGameParamValue("hangUpEnemyList"),t=this.getBattleId(a));var a=i.templateManager.getEnemyDataById(t);this.hurtNum=Math.floor((a.physicalAttack+a.magicAttack)*i.player.instanceModule.getAllPassInstanceNum()),t="effect/battle/enemy/"+a.appearance,a=0<a.isPremultipliedAlpha,this.updateSpine(t,a,.5),e&&(a=i.Utils.getRandomInt(100,2e3),e=cc.delayTime(a/1e3/this.hangUpWarSpeed),a=cc.callFunc(function(){this.canStart=!0},this),a=cc.sequence(e,a),this.node.stopAllActions(),this.node.runAction(a))},updateSpine:function(e,t,a){var n=this;this.node.scale=a,this.wordsNode.scale=1/a,this.soldierSpine.node.active=!1,i.mainScene.getTowerSpineData(e,function(e){e&&i.gameScene.gameState!=i.constant.GAME_STATE_BATTLE&&(n.soldierSpine.node.active=!0,n.soldierSpine.skeletonData=e,n.soldierSpine.clearTrack(0),n.soldierSpine.setAnimation(0,"stand_right",!0),n.soldierSpine.premultipliedAlpha=t,n.initDone=!0)})},getBattleId:function(e){return e[i.Utils.getRandomInt(0,e.length-1)]},getHurtNum:function(){var e=this.hurtNum;return 0<this._curHeroId&&(e=Math.floor(this.hurtNum*i.player.heroModule.getHeroLevel(this._curHeroId))),i.Utils.getRandomInt(e-10<0?1:e-10,e+10)},setItemStatus:function(e){this._itemStatus!==e&&(this._itemStatus=e)},getDirection:function(){var e="right";return this._type==i.constant.CAMP_TYPE_SELF?e=0===this._otherObj.enemyMoveDirection?"right":"left":this._type==i.constant.CAMP_TYPE_ENEMY&&(e=0===this.enemyMoveDirection?"left":"right"),e},getEnemySymbol:function(){return 0===this.enemyMoveDirection?1:-1},enemyStart:function(){this.enemyMoveDirection||(this.enemyMoveDirection=i.Utils.getRandomInt(0,1)),2===this._index?this.enemyMoveDirection=1:(e=this._otherObj.maxMove||120,Math.abs(this._otherObj.node.x)>e?this.enemyMoveDirection=Math.abs(this.enemyMoveDirection-1):this.enemyMoveDirection=i.Utils.getRandomInt(0,1)),this.node.x=500*this.getEnemySymbol(),this.node.opacity=255,this.node.active=!0,this.moveToX=cc.winSize/2*-this.getEnemySymbol();var e=cc.moveTo(8/this.hangUpWarSpeed,cc.v2(this.moveToX,0));this.node.stopAllActions(),this.node.runAction(e),this.setItemStatus(i.constant.MAIN_PAGE_BATTLE_RUN),this.updateItemAction()},enemyRunning:function(){Math.abs(this.node.x)<cc.winSize.width/2-this.node.width*this.node.scale/2&&this.isFirstRun&&(this.isFirstRun=!1,this._otherObj.isChangeDirectionDone=!1,this._otherObj.setItemStatus(i.constant.MAIN_PAGE_BATTLE_RUN)),i.Utils.pointDistance(this.node.position,this._otherObj.node.position)<this.moveDistance+1&&(this.stopNodeAction(),this.setItemStatus(i.constant.MAIN_PAGE_BATTLE_WAIT_ATTR),this.updateItemAction(),this._otherObj.stopNodeAction(),this._otherObj.setItemStatus(i.constant.MAIN_PAGE_BATTLE_WAIT_ATTR),this._otherObj.updateItemAction(),this._otherObj.isSelfRunning=!1)},allWaitAttr:function(e){this.waitAttrTime||(this.waitAttrTime=0),this.waitAttrTime+=e,e=this.selfAttrTime,this._type==i.constant.CAMP_TYPE_ENEMY&&(e=this.enemyAttrTime),this.waitAttrTime>=e&&(this.waitAttrTime=0,this.setItemStatus(i.constant.MAIN_PAGE_BATTLE_ATTR))},subEnemyTimes:function(){var e,t;return--this._hitTimes,this._hitTimes<=0&&(this.setItemStatus(i.constant.MAIN_PAGE_BATTLE_DIE),this.startDieAction(),e=cc.fadeOut(.5),t=cc.callFunc(function(){this.host.flyHangUpEffect(this.node.convertToWorldSpaceAR(cc.v2(0,0))),this.initData(this._type,this._index),this._otherObj.checkHeroIdChange()},this),t=cc.sequence(e,t),this.node.stopAllActions(),this.node.runAction(t)),this._hitTimes},allAttr:function(){var e,t;this.isAttring||(this.isAttring=!0,this.updateItemAction(!0),e=cc.delayTime(.3/this.hangUpWarSpeed),t=cc.callFunc(function(){this._otherObj.runHiteEffect(),this._otherObj.flyHpEffect(this.getHurtNum(),this.getIsCrit())},this),t=cc.sequence(e,t),this.node.stopAllActions(),this.node.runAction(t))},getIsCrit:function(){return i.Utils.getRandomInt(0,1e4)<=4e3},allAttrDone:function(){if(this.isAttring=!1,this._type==i.constant.CAMP_TYPE_SELF&&this._otherObj.subEnemyTimes()<=0)return this.setItemStatus(i.constant.MAIN_PAGE_BATTLE_NONE),void this.updateItemAction();this.setItemStatus(i.constant.MAIN_PAGE_BATTLE_WAIT_ATTR),this.updateItemAction()},selfStand:function(){this.isChangeDirectionDone||(this.isChangeDirectionDone=!0,this.updateItemAction())},selfRuning:function(){var e,t;this.isSelfRunning||(this.isSelfRunning=!0,this.updateItemAction(),t=500*this._otherObj.getEnemySymbol(),e=cc.moveTo(15/this.hangUpWarSpeed,cc.v2(t,0)),t=cc.callFunc(function(){},this),t=cc.sequence(e,t),this.node.stopAllActions(),this.node.runAction(t))},stopNodeAction:function(){this.node.stopAllActions()},runHiteEffect:function(){this.bulletHitAni.node.active=!0,this.bulletHitAni.stop(),this.bulletHitAni.setCurrentTime(0),this.bulletHitAni.play("tower_bullet_hit")},onFinished:function(e,t){"tower_bullet_hit"==t.name&&(this.bulletHitAni.node.active=!1)},updateItemAction:function(e){var t=this,a=!0;e&&(a=!1),e=this.getDirection(),this.node.scaleX="left"==e?-1*this.node.scaleY:+this.node.scaleY,e=0<this.node.scaleX?1:-1,this.wordsNode.scaleX=this.wordsNode.scaleY*e;var n=this.getActionNameByState()+"_right";this.soldierSpine.clearTrack(0),this.soldierSpine.setAnimation(0,n,a)&&!a&&this.soldierSpine.setCompleteListener(function(e){(e.animation?e.animation.name:"")==n&&t._itemStatus===i.constant.MAIN_PAGE_BATTLE_ATTR&&t.allAttrDone()})},startDieAction:function(){this.soldierSpine.clearTrack(0),this.soldierSpine.setAnimation(0,"death_right",!1)&&this.soldierSpine.setCompleteListener(function(e){e.animation&&e.animation.name})},flyHpEffect:function(e,t){var a=this.flyHpNode;a.scale=0,a.opacity=255,a.active=!0,a.position=this.flyHpNodePosition,this.flyHpLabel1Node.active=!t,e=e<=0?1:e;var n=(this.flyHpLabel2Node.active=t)?2*e:e;(t?this.flyHpLabel2Node:this.flyHpLabel1Node).getComponent(cc.Label).string="-"+i.Utils.formatBigNumberForLabel(n);var o=t?2.4:2;o/=this.hangUpWarSpeed;var s=0<this.node.scaleX?1:-1,r=2.8-this.node.scaleY,c=cc.delayTime(this.delayTime);e=cc.callFunc(function(){},this),n=cc.scaleTo(2/30*o,2*r*s,2*r),t=cc.scaleTo(4/30*o,r*s,r),s=cc.scaleTo(.4*o,r*s,r),r=cc.sequence(n,t,s),n=cc.moveBy(.3*o,cc.v2(0,40)),t=cc.delayTime(10/30*o),s=cc.fadeOut(8/30*o),o=cc.callFunc(function(){a.active=!1},this),o=cc.sequence(t,s,o),o=cc.spawn(r,n,o),o=cc.sequence(c,e,o),a.stopAllActions(),a.runAction(o)},showWordsNode:function(){if(i.Logger.debug("showWordsNode"),!this._curHeroId||this._heroId<0)var e=(t=i.templateManager.getBubbleListByType(i.constant.TIP_TYPE_COMMON))[i.Utils.getRandomInt(0,t.length-1)];else{var t,a=i.templateManager.getBubbleTypeList();if((t=a[i.Utils.getRandomInt(0,a.length-1)])==i.constant.TIP_TYPE_COMMON)e=(a=i.templateManager.getBubbleListByType(t))[i.Utils.getRandomInt(0,a.length-1)];else{if(t!=i.constant.TIP_TYPE_HERO)return;var n=i.templateManager.getBubbleDataByHeroId(this._curHeroId);if(!n)return;e=n[i.Utils.getRandomInt(0,n.length-1)]}}this.wordsLabel.string=i.lang.getGameText(e.text),this.isWordsShow=!0,this.wordsNode.opacity=1,n=cc.fadeIn(.2),e=cc.callFunc(function(){}),e=cc.sequence(n,e),this.wordsNode.stopAllActions(),this.wordsNode.runAction(e)},hideWordsNode:function(){this.isWordsShow=!1;var e=cc.fadeOut(.2),t=cc.callFunc(function(){});t=cc.sequence(e,t),this.wordsNode.stopAllActions(),this.wordsNode.runAction(t)},getActionNameByState:function(){var e="stand";switch(this._itemStatus){case i.constant.MAIN_PAGE_BATTLE_NONE:case i.constant.MAIN_PAGE_BATTLE_STAND:case i.constant.MAIN_PAGE_BATTLE_WAIT_ATTR:e="stand";break;case i.constant.MAIN_PAGE_BATTLE_RUN:e="run";break;case i.constant.MAIN_PAGE_BATTLE_ATTR:e="attack";break;case i.constant.MAIN_PAGE_BATTLE_DIE:}return e},updateSelf:function(e){if(this.initDone&&this._otherObj&&this._otherObj.initDone&&!this.stopUpdate)switch(this._itemStatus){case i.constant.MAIN_PAGE_BATTLE_NONE:break;case i.constant.MAIN_PAGE_BATTLE_STAND:this.selfStand();break;case i.constant.MAIN_PAGE_BATTLE_RUN:this.selfRuning();break;case i.constant.MAIN_PAGE_BATTLE_ATTR:this.allAttr();break;case i.constant.MAIN_PAGE_BATTLE_WAIT_ATTR:this.allWaitAttr(e);break;case i.constant.MAIN_PAGE_BATTLE_DIE:}},updateEnemy:function(e){if(this.initDone&&this.canStart&&this._otherObj&&this._otherObj.initDone)switch(this._itemStatus){case i.constant.MAIN_PAGE_BATTLE_NONE:this.enemyStart();break;case i.constant.MAIN_PAGE_BATTLE_STAND:break;case i.constant.MAIN_PAGE_BATTLE_RUN:this.enemyRunning();break;case i.constant.MAIN_PAGE_BATTLE_ATTR:this.allAttr();break;case i.constant.MAIN_PAGE_BATTLE_WAIT_ATTR:this.allWaitAttr(e);break;case i.constant.MAIN_PAGE_BATTLE_DIE:}},checkHideWordsNode:function(e){this.isWordsShow&&(this.wordsShowTime||(this.wordsShowTime=0),this.wordsShowTime+=e,this.wordsShowTime<i.templateManager.getGameParamValue("hangUpBubbleShowTime")/1e3||(this.wordsShowTime=0,this.hideWordsNode()))},updateBattle:function(e){this._type===i.constant.CAMP_TYPE_SELF?this.updateSelf(e):this._type===i.constant.CAMP_TYPE_ENEMY&&this.updateEnemy(e),this.checkHideWordsNode(e)}}),cc._RF.pop()},{}],MainHeroChooseConfirmPage:[function(e,t){"use strict";cc._RF.push(t,"1a96912QVpIPbHO9+G854MA","MainHeroChooseConfirmPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{},onLoadPage:function(){this.tipsLabel=cc.find("content/tips",this.node).getComponent(cc.Label)},showPageBegan:function(){this.heroId=this.data.heroId;var e=i.templateManager.getHeroDataById(i.player.heroModule.getBattlePioneerHero());i.lang.updateLabelString(this.tipsLabel,[i.lang.getGameText(e.name)])},onClickSet:function(){i.player.heroModule.setBattlePioneerHero(this.heroId),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_HERO_VAN),this.closePage()}}),cc._RF.pop()},{}],MainHeroChoosePopUp:[function(e,t){"use strict";cc._RF.push(t,"49d587pT/JA6ZWLl1dSP9US","MainHeroChoosePopUp");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{itemRenderPrefab:{default:null,type:cc.Prefab}},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.UPDATE_HERO_CHOOSE_INFO,function(){return e.updateItem()})},onLoadPage:function(){this.costPowerLabel=cc.find("content/beginButton/background/powerLayout/number",this.node).getComponent(cc.Label),this.heroLayoutNode=cc.find("content/heroLayout",this.node),this.buildCount=3,this.itemObjList=[],this.buildItem()},showPageBegan:function(){this._instanceId=this.data.instanceId,this.updateItem(),this.heroLayoutNode.getComponent(cc.Layout).updateLayout(),i.lang.updateLabelString(this.costPowerLabel,[i.templateManager.getGameParamValue("powerInstanceNum")])},buildItem:function(){for(var e=0;e<i.JsonData.HeroBattleNum.length;e++){var t=cc.instantiate(this.itemRenderPrefab);this.heroLayoutNode.addChild(t),t.scale=.7,t=t.getComponent("MainHeroItemRender"),this.itemObjList.push(t)}},updateItem:function(){for(var e=0;e<this.itemObjList.length;e++){var t=i.player.heroModule.getBattleHeroByIndex(e),a=this.itemObjList[e],n=i.JsonData.HeroBattleNum[e].heroNum;a.initData(this,i.constant.HERO_ITEM_TYPE_CHOOSE,t,n)}},onClickBegin:function(){var e=i.templateManager.getGameParamValue("powerInstanceNum");i.player.playerModule.costPowerNum(e),this.closePage(),i.gameScene.gotoBattleScene(i.player.instanceModule.getCurChapter(),this._instanceId)},onClickClose:function(){this.closePage()}}),cc._RF.pop()},{}],MainHeroConfirmPage:[function(e,t){"use strict";cc._RF.push(t,"d4db09PxyNNIL0KuhvItrXP","MainHeroConfirmPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{},onLoadPage:function(){},showPageBegan:function(){this._chapter=this.data.chapter,this._instance=this.data.instance,this._power=this.data.power,this.battleButtonNode=cc.find("content/buttonLayout/battleButton",this.node),this.battleButtonNode.active=!0},onClickSet:function(){this.closePage(),i.gameScene.mainPage.onClickTower()},onClickBattle:function(){i.player.playerModule.costPowerNum(this._power),i.gameScene.gotoBattleScene(this._chapter,this._instance),this.closePage()},onClickClose:function(){this.closePage()},showPageEnded:function(){}}),cc._RF.pop()},{}],MainHeroDetailPopUp:[function(e,t){"use strict";cc._RF.push(t,"8148aRsjH1F3oj7pUDyhnm6","MainHeroDetailPopUp");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{skillTypeItemRenderPrefab:{default:null,type:cc.Prefab},heroTowerItemRenderPrefab:{default:null,type:cc.Prefab},heroAtlas:{default:null,type:cc.SpriteAtlas},commonAtlas:{default:null,type:cc.SpriteAtlas}},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.SHOW_AD_OVER_AD_HERO_UP_LEVEL,function(){return e.showAdOver()}),this.registerListener(i.GameEventType.UPDATE_HERO_VAN,function(){return e.initData(!0,!0)})},onLoadPage:function(){this.heroUpStarTime=0,this.contentNode=cc.find("content",this.node),this.backButtonNode=cc.find("content/backButton",this.node),this.qualityBgSprite=cc.find("content/qualityBg",this.node).getComponent(cc.Sprite),this.qualityBg1Sprite=cc.find("content/qualityBg1",this.node).getComponent(cc.Sprite),this.decorationSprite=cc.find("content/decoration",this.node).getComponent(cc.Sprite),this.heroNameLabel=cc.find("content/heroName/name",this.node).getComponent(cc.Label),this.vanNode=cc.find("content/heroName/van/icon",this.node),this.vanButtonNode=cc.find("content/appointmentButton",this.node),this.towerLayoutNode=cc.find("content/heroName/towerLayout",this.node),this.vanEffect=cc.find("effect_pioneer",this.contentNode).getComponent(cc.Animation),this.vanEffect.node.active=!1,this.powerNode=cc.find("/content/fightingPower",this.node),this.powerLabel=cc.find("layout/labelNumber",this.powerNode).getComponent(cc.Label),this.pwoerLevelLabel=cc.find("levelLabel",this.powerNode).getComponent(cc.Label),this.heroSpineNode=cc.find("/content/heroNode",this.node),this.heroSpine=cc.find("/content/heroNode/heroSpine",this.node).getComponent(sp.Skeleton),this.heroSpineNode.active=!1,this.starNode=cc.find("content/starLayout",this.node),this.starNodeList=[],this.starNodeList.push(cc.find("/star1",this.starNode)),this.starNodeList.push(cc.find("/star2",this.starNode)),this.starNodeList.push(cc.find("/star3",this.starNode)),this.starNodeList.push(cc.find("/star4",this.starNode)),this.starNodeList.push(cc.find("/star5",this.starNode)),this.fightLabel=cc.find("content/fightingPower/layout/labelNumber",this.node).getComponent(cc.Label),this.buttonNode=cc.find("/content/button",this.node),this.wakeButtonNode=cc.find("layout/wakeButton",this.buttonNode),this.wakeBackgroundSprite=cc.find("background",this.wakeButtonNode).getComponent(cc.Sprite),this.wakePieceSprite=cc.find("pieceLayout/icon",this.wakeButtonNode).getComponent(cc.Sprite),this.wakePieceLabel=cc.find("pieceLayout/numberLayout/number",this.wakeButtonNode).getComponent(cc.Label),this.wakePieceNeedLabel=cc.find("pieceLayout/numberLayout/number2",this.wakeButtonNode).getComponent(cc.Label),this.wakelockLabel=cc.find("background/lock",this.wakeButtonNode).getComponent(cc.Label),this.wakeUpLabelNode=cc.find("background/label",this.wakeButtonNode),this.wakeButtonEffect=cc.find("background/button_ring",this.wakeButtonNode).getComponent(cc.Animation),this.wakeButtonEffect.node.active=!1,this.upLevelButtonNode=cc.find("layout/upgradeLevel",this.buttonNode),this.upLevelBackgroundNode=cc.find("button/background",this.upLevelButtonNode),this.upLevelButtonEffect=cc.find("button_ring",this.upLevelBackgroundNode).getComponent(cc.Animation),this.upLevelButtonEffect.node.active=!1,this.upLevelBackgroundSprite=this.upLevelBackgroundNode.getComponent(cc.Sprite),this.upLevelStarLabelNode=cc.find("starLabel",this.upLevelBackgroundNode),this.upLevelLevelLabelNode=cc.find("levelLabel",this.upLevelBackgroundNode),this.upLevelFreeLabelNode=cc.find("freeLabel",this.upLevelBackgroundNode),this.upLevelNotEnoughNode=cc.find("notEnoughLabel",this.upLevelBackgroundNode),this.upLevelSilverLayoutNode=cc.find("silverLayout",this.upLevelButtonNode),this.upLevelSilverCostLabel=cc.find("numberLayout/number",this.upLevelSilverLayoutNode).getComponent(cc.Label),this.upLevelSilverNeedLabel=cc.find("numberLayout/number2",this.upLevelSilverLayoutNode).getComponent(cc.Label),this.upLevelGoldLayoutNode=cc.find("goldLayout",this.upLevelButtonNode),this.upLevelGoldCostLabel=cc.find("number",this.upLevelGoldLayoutNode).getComponent(cc.Label),this.upLevelAdLayoutNode=cc.find("breakLayout",this.upLevelBackgroundNode),this.upLevelAdTimeLabel=cc.find("timeBreak",this.upLevelButtonNode).getComponent(cc.Label),this.fullButtonNode=cc.find("fullButton",this.buttonNode),this.callButtonNode=cc.find("callButton",this.buttonNode),this.callButtonEffect=cc.find("background/button_ring",this.callButtonNode).getComponent(cc.Animation),this.callButtonIconSprite=cc.find("pieceLayout/icon",this.callButtonNode).getComponent(cc.Sprite),this.callButtonCostLabel=cc.find("pieceLayout/numberLayout/number",this.callButtonNode).getComponent(cc.Label),this.callButtonNeedLabel=cc.find("pieceLayout/numberLayout/number2",this.callButtonNode).getComponent(cc.Label),this.attrAllNode=cc.find("content/attrAll",this.node),this.attrAllLayoutNode=cc.find("attr/layout",this.attrAllNode),this.attrHpLabel=cc.find("hpLayout/numberLabel",this.attrAllLayoutNode).getComponent(cc.Label),this.attrAttackLabel=cc.find("attackLayout/numberLabel",this.attrAllLayoutNode).getComponent(cc.Label),this.physicalAttackIcon=cc.find("attackLayout/nameLayout/icon",this.attrAllLayoutNode),this.spellAttackIcon=cc.find("attackLayout/nameLayout/icon1",this.attrAllLayoutNode),this.attrPhysicalLabel=cc.find("physicalDefenseLayout/numberLabel",this.attrAllLayoutNode).getComponent(cc.Label),this.attrSpellLabel=cc.find("spellDefenseLayout/numberLabel",this.attrAllLayoutNode).getComponent(cc.Label),this.levelLabel=cc.find("levelLayout/numberLabel",this.attrAllLayoutNode).getComponent(cc.Label),this.hangUpLabel=cc.find("hangUpIncomeLayout/numberLabel",this.attrAllLayoutNode).getComponent(cc.Label),this.skillLayoutNode=cc.find("content/skillAll/skillLayout",this.node),this.skillTipsNode=cc.find("heroSkillTipsLayout",this.node),this.skillTipsLayoutNode=cc.find("contentLayout",this.skillTipsNode),this.skillTipsSkillLabel=cc.find("contentLayout/nameLabel/heroRole/label",this.skillTipsNode).getComponent(cc.Label),this.skillTipsNameLabel=cc.find("contentLayout/nameLabel/name",this.skillTipsNode).getComponent(cc.Label),this.skillTipsDescLabel=cc.find("contentLayout/RichText",this.skillTipsNode).getComponent(cc.RichText),this.skillTipsTriangleNode=cc.find("triangle",this.skillTipsNode),this.upgradeAnimation=cc.find("content/hero_upgrade_effect",this.node).getComponent(cc.Animation),this.upgradeAnimation.node.active=!1,this.heroCallAnimation=cc.find("content/hero_call_effect",this.node).getComponent(cc.Animation),this.heroCallAnimation.node.active=!1,this.backNode=cc.find("content/backButton",this.node),i.gameScene.isIphoneX()&&i.Utils.addNodeTopSpace(this.backNode),this.skillItemList={},this.heroTowerItemList=[]},getAllHeroList:function(){for(var e=i.player.heroModule.getAlreadyUnlockHeroList(),t=[],a=i.JsonData.Hero,n=0;n<a.length;n++){var o,s,r,c=a[n];2!=c.isComingSoon&&(r=c.id,i.player.heroModule.getBattlePioneerHero()!=r&&i.player.heroModule.getBattleAdPioneerHero()!=r?0<=e.indexOf(c.id)||(o=i.templateManager.getHeroCardDataByHeroId(r),s=1e5-r,1==c.isComingSoon?s=-r:i.player.itemModule.checkHeroPieceEnough(o.id,o.cardNum)&&(s*=1e3),t.push([s,r])):0<=(r=e.indexOf(r))&&e.splice(r,1))}t.sort(function(e,t){return t[0]-e[0]});for(var l=[],d=0;d<t.length;d++){var h=t[d][1];0<t[d][0]&&l.push(h)}var u=[];return i.player.heroModule.getBattlePioneerHero()&&u.push(i.player.heroModule.getBattlePioneerHero()),i.player.heroModule.getBattleAdPioneerHero()&&u.push(i.player.heroModule.getBattleAdPioneerHero()),u.concat(e.concat(l))},showPageBegan:function(){this.heroSpineNode.active=!1,this.qualityBgSprite.node.active=!1,this.qualityBg1Sprite.node.active=!1,this.decorationSprite.node.active=!1,this.heroBgAtlas=null,this._heroId=this.data.heroId,this._hostObj=this.data.host,this._playHeroUp=this.data.playHeroUp,this._hostObj?this.allHeroList=this._hostObj.allHeroIdList:this.allHeroList=this.getAllHeroList(),this.curHeroIndex=this.allHeroList.indexOf(this._heroId),this.canClickChange=!0,this.initData(),i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_HERO_DETAIL_PAGE,this._heroId)},showPageEnded:function(){this._playHeroUp&&this.playHeroUpEffect(),i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_GET_HERO_1_3)?i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_GET_HERO_1_3,this.callButtonNode):i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_GET_HERO_2_3)&&i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_GET_HERO_2_3,this.callButtonNode)},initData:function(e,t){this.heroUpStarTime=0,this.isCding=i.player.heroModule.getHeroIsCdIng(this._heroId),this.isUnlock=i.player.heroModule.isHeroUnlock(this._heroId),this.skillTipsNode.active=!0,this.skillTipsNode.opacity=1,this.heroDataCfg=i.templateManager.getHeroDataById(this._heroId),this.qualityLevel=i.player.heroModule.getHeroQuality(this._heroId),this.heroStarLevelCfg=i.templateManager.getHeroStarDataByHeroStar(this._heroId,this.qualityLevel),this.heroQualityCfg=i.templateManager.getHeroQualityDataById(this.qualityLevel),this.heroLevel=i.player.heroModule.getHeroLevel(this._heroId),this.levelDataCfg=i.templateManager.getHeroLevelDataByLevel(this._heroId,this.heroLevel),this.heroCardCfg=i.templateManager.getHeroCardDataByHeroId(this._heroId);var a=this.upLevelAdLayoutNode.active;this.updateBaseInfo(t),this.updateUpLevelInfo(),this.updateUpQuality(),this.updateOtherButton(),e||this.updateHeroSpine(),this.updateStarInfo(),this.updateAttrInfo(),this.updateSkillLayout(),this.canClickChange=!0,!this.isCding||e&&a===this.upLevelAdLayoutNode.active||i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_HERO_DETAIL_PAGE_AD,this._heroId),this.checkCallButtonEffect()},updateOtherButton:function(){var e,t;this.fullButtonNode.active=i.player.heroModule.isHeroMaxQuality(this._heroId)&&i.player.heroModule.isHeroMaxLevel(this._heroId),this.callButtonNode.active=!this.isUnlock,this.isUnlock||(e=i.templateManager.getHeroCardDataByHeroId(this._heroId),t="#412927",i.player.itemModule.checkHeroPieceEnough(e.id,e.cardNum)||(t="#FF0000"),this.callButtonCostLabel.string=i.player.itemModule.getHeroPieceNumById(this.heroCardCfg.id),i.lang.updateLabelString(this.callButtonNeedLabel,[this.heroCardCfg.cardNum]),this.callButtonCostLabel.node.color=cc.color(t),this.callButtonIconSprite.spriteFrame=this.commonAtlas.getSpriteFrame(this.heroCardCfg.icon))},updateSpriteFrame:function(){this.qualityBgSprite.node.active=!0,this.qualityBg1Sprite.node.active=!0,this.decorationSprite.node.active=!0,this.qualityBgSprite.spriteFrame=this.heroBgAtlas.getSpriteFrame(this.heroQualityCfg.heroQualityBg),this.qualityBg1Sprite.spriteFrame=this.heroBgAtlas.getSpriteFrame(this.heroQualityCfg.heroQualityBg),this.decorationSprite.spriteFrame=this.heroBgAtlas.getSpriteFrame(this.heroDataCfg.heroBlurs)},updateBaseInfo:function(e){this.heroNameLabel.string=i.lang.getGameText(this.heroQualityCfg.qualityName)+"\xb7"+i.lang.getGameText(this.heroDataCfg.name),this.heroNameLabel.node.color=cc.color("#"+this.heroQualityCfg.quality);var t,a,n,o=i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_GET_HERO_1_5)||i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_GET_HERO_1_4),s=i.player.heroModule.getBattlePioneerHero()==this._heroId||i.player.heroModule.getBattleAdPioneerHero()==this._heroId;this.vanNode.active=s&&!o,e&&(i.soundsUtil.playSoundEffect("hero_set_pioneer"),this.vanNode.opacity=1,a=this.vanNode.convertToWorldSpaceAR(cc.v2(0,0)),n=this.contentNode.convertToNodeSpaceAR(a),this.vanEffect.node.position=cc.v2(0,n.y-200),this.vanEffect.node.active=!0,this.vanEffect.play("setUp_pioneer"),t=cc.delayTime(.6),e=cc.moveTo(.25,n),a=cc.delayTime(.25),n=cc.callFunc(function(){this.vanNode.opacity=255,this.vanEffect.node.active=!1},this),n=cc.sequence(t,e,a,n),this.vanEffect.node.stopAllActions(),this.vanEffect.node.runAction(n)),this.vanButtonNode.active=!s&&this.isUnlock||o,(i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_GET_HERO_1_3)||i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_GET_HERO_1_4)||i.guideManager.isGuideRunning(i.constant.GUIDE_TYPE_GET_HERO_1_5))&&this.vanButtonNode.getComponent(cc.Widget).updateAlignment(),this.levelLabel.string=this.heroLevel,i.lang.updateLabelString(this.pwoerLevelLabel,[this.heroLevel]),o=i.player.heroModule.getHeroPowerValue(this._heroId,this.heroLevel,this.qualityLevel),this.fightLabel.string=i.Utils.formatBigNumberForLabel(o);var r=this;o=i.player.commonModule.isLowIosDevice()?"textures/hero/HeroDecoration_small":"textures/hero/HeroDecoration",this.heroBgAtlas?r.updateSpriteFrame():cc.loader.loadRes(o,cc.SpriteAtlas,function(e,t){e?cc.error(e):(r.heroBgAtlas=t,r.updateSpriteFrame())});for(var c=this.heroQualityCfg.soldierInfoBg.split("/")[1],l=0;l<this.heroTowerItemList.length;l++)this.heroTowerItemList[l].active=!1;for(var d=0;d<this.heroDataCfg.heroInTowerType.length;d++){d>=this.heroTowerItemList.length&&(u=cc.instantiate(this.heroTowerItemRenderPrefab),this.towerLayoutNode.addChild(u),this.heroTowerItemList.push(u));var h=this.heroDataCfg.heroInTowerType[d],u=this.heroTowerItemList[d];u.active=!0,u.getChildByName("bg").getComponent(cc.Sprite).spriteFrame=this.heroAtlas.getSpriteFrame(c),u=u.getChildByName("icon").getComponent(cc.Sprite),h=i.templateManager.getTowerTypeById(h),u.spriteFrame=this.heroAtlas.getSpriteFrame(h.typeIcon)}},updateSkillFrame:function(){for(var e=0;e<this.skillTypeList.length;e++)this.skillTypeList[e].updateSkillIcon(this.skillAtlas)},updateSkillLayout:function(){for(var e=0;e<this.skillItemList.length;e++)this.skillItemList[e].active=!1;this.skillTypeList||(this.skillTypeList=[]),this.updateSkillTypeItem(i.constant.HERO_SKILL_TYPE_VAN),this.updateSkillTypeItem(i.constant.HERO_SKILL_TYPE_TOWER),this.updateSkillTypeItem(i.constant.HERO_SKILL_TYPE_TALENT);var t=this,a=i.player.commonModule.isLowIosDevice()?"textures/skill/skill_small":"textures/skill/skill";this.skillAtlas?t.updateSkillFrame():cc.loader.loadRes(a,cc.SpriteAtlas,function(e,i){e?cc.error(e):(t.skillAtlas=i,t.updateSkillFrame())})},updateSkillTypeItem:function(e){this.skillItemList[e]||(t=cc.instantiate(this.skillTypeItemRenderPrefab),this.skillLayoutNode.addChild(t),((this.skillItemList[e]=t).getComponent("MainHeroSkillTypeItemRender").host=this).skillTypeList.push(t.getComponent("MainHeroSkillTypeItemRender")));var t=this.skillItemList[e];t.active=!0,t.getComponent("MainHeroSkillTypeItemRender").initData(this._heroId,e)},updateStarInfo:function(){for(var e=i.player.heroModule.getHeroStarLevel(this._heroId),t=0;t<this.starNodeList.length;t++)this.starNodeList[t].getChildByName("icon").active=t<e},updateAttrInfo:function(){this.attrHpLabel.string=i.Utils.formatBigNumberForLabel(this.levelDataCfg.hp),0<this.levelDataCfg.aggressivity?(this.physicalAttackIcon.active=!0,this.spellAttackIcon.active=!1,this.attrAttackLabel.string=i.Utils.formatBigNumberForLabel(this.levelDataCfg.aggressivity)):(this.physicalAttackIcon.active=!1,this.spellAttackIcon.active=!0,this.attrAttackLabel.string=i.Utils.formatBigNumberForLabel(this.levelDataCfg.aggressivityMagic)),this.attrPhysicalLabel.string=i.Utils.formatBigNumberForLabel(this.levelDataCfg.defense),this.attrSpellLabel.string=i.Utils.formatBigNumberForLabel(this.levelDataCfg.defenseMagic),i.lang.updateLabelString(this.hangUpLabel,[Math.floor(this.heroDataCfg.heroIncome/100)])},updateUpQuality:function(){if(i.player.heroModule.isHeroMaxQuality(this._heroId)||!this.isUnlock)return this.wakeButtonNode.active=!1,void this.stopWakeButtonEffect();this.wakeButtonNode.active=!0,this.canUpQuality=i.player.heroModule.getCanUpQuality(this._heroId),this.wakePieceSprite.spriteFrame=this.commonAtlas.getSpriteFrame(this.heroCardCfg.icon),this.wakePieceLabel.string=i.player.itemModule.getHeroPieceNumById(this.heroCardCfg.id),i.lang.updateLabelString(this.wakePieceNeedLabel,[this.heroStarLevelCfg.cardsNum]),this.canUpQuality?(this.wakelockLabel.node.active=!1,this.wakeUpLabelNode.active=!0,this.playWakeButtonEffect()):(this.wakelockLabel.node.active=!0,this.wakeUpLabelNode.active=!1,i.lang.updateLabelString(this.wakelockLabel,[this.heroStarLevelCfg.needLevel]),this.stopWakeButtonEffect()),i.player.itemModule.checkHeroPieceEnough(this.heroCardCfg.id,this.heroStarLevelCfg.cardsNum)?this.wakePieceLabel.node.color=cc.color("#412927"):this.wakePieceLabel.node.color=cc.color("#FF0000")},playWakeButtonEffect:function(){i.player.itemModule.checkHeroPieceEnough(this.heroCardCfg.id,this.heroStarLevelCfg.cardsNum)?this.wakeButtonEffect.node.active||(this.wakeButtonEffect.node.active=!0,this.wakeButtonEffect.stop(),this.wakeButtonEffect.setCurrentTime(0),this.wakeButtonEffect.play("button_ring")):this.stopWakeButtonEffect()},stopWakeButtonEffect:function(){this.wakeButtonEffect.node.active&&(this.wakeButtonEffect.node.active=!1)},updateUpLevelInfo:function(){if(i.player.heroModule.isHeroMaxLevel(this._heroId)||!this.isUnlock)return this.upLevelButtonNode.active=!1,void this.stopUpLevelButtonEffect();var e,t;this.upLevelButtonNode.active=!0,this.upLevelNotEnoughNode.active=!1,this.upLevelStarLabelNode.active=!1,this.upLevelLevelLabelNode.active=!1,this.upLevelFreeLabelNode.active=!1,this.upLevelSilverLayoutNode.active=!1,this.upLevelGoldLayoutNode.active=!1,this.upLevelAdLayoutNode.active=!1,this.upLevelAdTimeLabel.node.active=!1,this.levelDataCfg.type===i.constant.HERO_UP_LEVEL_TYPE_LEVEL?(this.upLevelLevelLabelNode.active=!0,this.upLevelSilverLayoutNode.active=!0,e=i.newBigNumber(this.levelDataCfg.expend).minus(i.player.heroModule.getHeroExpNum(this._heroId)),i.player.heroModule.checkHeroGeneralExpEnough(e)?(this.upLevelSilverCostLabel.node.color=cc.color("#412927"),this.playUpLevelButtonEffect()):(this.upLevelSilverCostLabel.node.color=cc.color("#FF0000"),this.stopUpLevelButtonEffect()),t=i.Utils.formatBigNumberForLabel(e.toFixed(0)),e=i.Utils.formatBigNumberForLabel(i.player.heroModule.getHeroGeneralExp()),this.upLevelSilverCostLabel.string=e,i.lang.updateLabelString(this.upLevelSilverNeedLabel,[t])):(this.levelDataCfg.type===i.constant.HERO_UP_LEVEL_TYPE_STAR?(this.upLevelStarLabelNode.active=!0,this.upLevelGoldLayoutNode.active=!0,this.upLevelGoldCostLabel.string=i.Utils.formatBigNumberForLabel(this.levelDataCfg.expend)):(t=i.player.heroModule.getHeroCdLastTime(this._heroId))<=0?(this.upLevelAdLayoutNode.active=!1,this.upLevelAdTimeLabel.node.active=!1,this.upLevelFreeLabelNode.active=!0):(this.upLevelAdLayoutNode.active=!0,this.upLevelAdTimeLabel.node.active=!0,this.upLevelAdTimeLabel.string=i.timeUtil.secondFormat(t)),this.playUpLevelButtonEffect())},playUpLevelButtonEffect:function(){this.upLevelButtonEffect.node.active||(this.upLevelButtonEffect.node.active=!0,this.upLevelButtonEffect.stop(),this.upLevelButtonEffect.setCurrentTime(0),this.upLevelButtonEffect.play("button_ring"))},stopUpLevelButtonEffect:function(){this.upLevelButtonEffect.node.active&&(this.upLevelButtonEffect.node.active=!1)},checkCallButtonEffect:function(){var e=i.templateManager.getHeroCardDataByHeroId(this._heroId);i.player.itemModule.checkHeroPieceEnough(e.id,e.cardNum)?(this.callButtonEffect.node.active=!0,this.callButtonEffect.play("button_ring")):this.callButtonEffect.node.active=!1},updateHeroSpine:function(){var e=this,t="effect/"+this.heroDataCfg.mainSpin;i.mainScene.getTowerSpineData(t,function(t){var a,n;t&&(i.Logger.debug("\u5207\u6362\u82f1\u96c4spine"),e.heroSpineNode.active=!0,e.heroSpine.skeletonData=t,e.heroSpine.premultipliedAlpha=e.heroDataCfg.isPreform,e.heroSpine.clearTrack(0),a=e.heroDataCfg.spinName,e.heroSpine.setAnimation(0,a,!0),e.heroSpine.node.scale=e.heroDataCfg.mainSpinScale/1e4,e.canClickHero=!1,n=cc.delayTime(1.2),t=cc.callFunc(function(){"stand"==this.heroDataCfg.spinName&&this.updateSpineAction("run",!0,a)},e),t=cc.sequence(n,t),e.backButtonNode.stopAllActions(),e.backButtonNode.runAction(t))})},updateSpineAction:function(e,t,i){var a=this;t=!t,this.heroSpine.clearTrack(0);var n=this;this.heroSpine.setAnimation(0,e,t)&&!t&&i&&this.heroSpine.setCompleteListener(function(t){(t.animation?t.animation.name:"")==e&&(e=i,n.heroSpine.setAnimation(0,e,!0)),e==a.heroDataCfg.spinName&&(a.canClickHero=!0)})},updateSkillTips:function(e,t){this.skillTipsNode.y=t.y;var a=0;t.x-this.skillTipsLayoutNode.width/2<-cc.winSize.width/2?a=t.x-this.skillTipsLayoutNode.width/2+cc.winSize.width/2-10:t.x+this.skillTipsLayoutNode.width/2>cc.winSize.width/2&&(a=t.x+this.skillTipsLayoutNode.width/2-cc.winSize.width/2+10),this.skillTipsNode.x=t.x-a,this.skillTipsTriangleNode.x=a,e=2==(a=i.templateManager.getHeroSkillDataById(e)).type?i.GameTextCode.HERO_SKILL_INACTIVE:i.GameTextCode.HERO_SKILL_PASSIVE,this.skillTipsSkillLabel.string=i.lang.getGameText(e),this.skillTipsNameLabel.string=i.lang.getGameText(a.name),this.skillTipsDescLabel.string=i.lang.getGameText(a.desc)},hideSkillTips:function(){this.skillTipsNode.opacity=1},showOrHideSkillTips:function(e,t){t=this.node.convertToNodeSpaceAR(t),this.updateSkillTips(e,t),this.skillTipsNode.opacity=255},onClickHideTips:function(){this.hideSkillTips()},onClickSpine:function(){this.hideSkillTips(),this.canClickHero&&"stand"===this.heroDataCfg.spinName&&"stand"===this.heroSpine.animation&&(this.canClickHero=!1,this.updateSpineAction("run",!0,"stand"))},onClickLeft:function(){var e;this.hideSkillTips(),this.canClickChange&&((e=this.curHeroIndex-1)<0&&(e=this.allHeroList.length-1),this.changeCurHero(e,!0))},onClickRight:function(){var e;this.hideSkillTips(),this.canClickChange&&((e=this.curHeroIndex+1)>=this.allHeroList.length&&(e=0),this.changeCurHero(e,!1))},changeCurHero:function(e,t){i.soundsUtil.playSoundEffect("hero_switch"),this.canClickChange=!1,this.curHeroIndex=e,this._heroId=this.allHeroList[this.curHeroIndex],this.heroSpineNode.stopAllActions();var a=t?-500:500,n=this.heroSpineNode.y,o=cc.moveTo(.2,cc.v2(t?500:-500,n));e=cc.callFunc(function(){this.heroSpineNode.x=a,this.initData(),i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_HERO_DETAIL_PAGE,this._heroId)},this),t=cc.moveTo(.15,cc.v2(0,n)),n=cc.callFunc(function(){this.canClickChange=!0},this),n=cc.sequence(o,e,t,n),this.heroSpineNode.runAction(n)},onClickUpStar:function(){var e;this.hideSkillTips(),this.canClickChange&&i.player.heroModule.isHeroUnlock(this._heroId)&&!i.player.heroModule.isHeroMaxQuality(this._heroId)&&(this.canUpQuality?i.player.itemModule.checkHeroPieceEnough(this.heroCardCfg.id,this.heroStarLevelCfg.cardsNum)?(i.player.heroModule.addHeroQuality(this._heroId),i.player.itemModule.subHeroPiece(this.heroCardCfg.id,this.heroStarLevelCfg.cardsNum,i.constant.ITEM_CONSUME_SOURCE_HERO_UP),i.soundsUtil.playSoundEffect("sucess_hero_up"),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_HERO_WAKE,{type:i.constant.MAIN_COMMON_CARD_TYPE_HERO_WAKE,heroId:this._heroId}),this.initData(!0),this._hostObj||(this._hostObj=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_HERO)),this._hostObj&&this._hostObj.updateItemByHeroId(this._heroId)):i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_HERO_PIECE_SOURCE):(e=i.lang.getGameText(i.GameTextCode.LEVEL_NOT_ENOUGH),i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,e)))},onClickUpLevel:function(){var e=this;if(this.hideSkillTips(),this.canClickChange&&i.player.heroModule.isHeroUnlock(this._heroId)&&!i.player.heroModule.isHeroMaxLevel(this._heroId)){if(this.levelDataCfg.type===i.constant.HERO_UP_LEVEL_TYPE_LEVEL){var t=i.newBigNumber(this.levelDataCfg.expend).minus(i.player.heroModule.getHeroExpNum(this._heroId));if(!i.player.heroModule.checkHeroGeneralExpEnough(t)){var a=i.lang.getGameText(i.GameTextCode.EXP_NOT_ENOUGH);return void i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,a)}i.player.heroModule.cleanHeroExp(this._heroId),i.player.heroModule.subHeroGeneralExp(t)}else{if(this.levelDataCfg.type!==i.constant.HERO_UP_LEVEL_TYPE_STAR)return void(i.player.heroModule.getHeroCdLastTime(this._heroId)<=0?i.gameScene.checkServerTime(function(){e.upLevelDeal()},!1,function(){}):i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,[i.GameEventType.SHOW_AD_OVER_AD_HERO_UP_LEVEL]));if(!i.player.playerModule.isGoldBullionEnough(this.levelDataCfg.expend))return t=i.lang.getGameText(i.GameTextCode.ENOUGH_DIAMONDS),void i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,t);if(!i.player.playerModule.costGoldBullionNum(this.levelDataCfg.expend,i.constant.ITEM_CONSUME_SOURCE_HERO_ADD_STAR))return;i.player.heroModule.addHeroStarLevel(this._heroId),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_HERO_WAKE,{type:i.constant.MAIN_COMMON_CARD_TYPE_HERO_STAR,heroId:this._heroId}),i.BI.onEvent(i.biConstant.EVENT_TYPE_DIAMOND_CONSUME,i.biConstant.EVENT_ID_DIAMOND_HERO_UP_STAR,this.levelDataCfg.expend)}this.levelDataCfg.type===i.constant.HERO_UP_LEVEL_TYPE_LEVEL?this.playHeroUpEffect():this.levelDataCfg.type===i.constant.HERO_UP_LEVEL_TYPE_STAR&&i.soundsUtil.playSoundEffect("sucess_hero_star"),i.player.heroModule.addHeroLevel(this._heroId),this.initData(!0),this._hostObj||(this._hostObj=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_HERO)),this._hostObj&&this._hostObj.updateItemByHeroId(this._heroId)}},playHeroUpEffect:function(){var e=this;i.soundsUtil.playSoundEffect("success_hero_upgrade"),this.upgradeAnimation.node.active=!0,this.upgradeAnimation.stop(),this.upgradeAnimation.setCurrentTime(0),this.upgradeAnimation.play("tower_upgrade"),this.upgradeAnimation.on("finished",function(){e.upgradeAnimation.node.active=!1})},showAdOver:function(){this.upLevelDeal()},upLevelDeal:function(){i.soundsUtil.playSoundEffect("sucess_hero_break_through"),i.player.heroModule.addHeroLevel(this._heroId,i.constant.HERO_UP_LEVEL_SOURCE_TYPE_AD),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_HERO_WAKE,{type:i.constant.MAIN_COMMON_CARD_TYPE_HERO_BREAK,heroId:this._heroId}),this.initData(!0),this._hostObj||(this._hostObj=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_HERO)),this._hostObj&&this._hostObj.updateItemByHeroId(this._heroId)},onClickSource:function(){this.hideSkillTips(),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_HERO_PIECE_SOURCE)},onClickGet:function(){var e=this,t=i.templateManager.getHeroCardDataByHeroId(this._heroId);i.player.itemModule.checkHeroPieceEnough(t.id,t.cardNum)?(i.player.heroModule.checkHeroCanUnlock(t.id),this.initData(!0),this._hostObj||(this._hostObj=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_HERO)),this._hostObj&&this._hostObj.initData(),i.soundsUtil.playSoundEffect("success_recruit"),this.heroCallAnimation.node.active=!0,this.heroCallAnimation.stop(),this.heroCallAnimation.setCurrentTime(0),this.heroCallAnimation.play("hero_deliver"),this.heroCallAnimation.on("finished",function(){e.heroCallAnimation.node.active=!1}),t=i.lang.getArgGameText(i.GameTextCode.HANG_UP_HERO_ADD,[this.heroDataCfg.heroIncome/100]),i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,t)):i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_HERO_PIECE_SOURCE)},guideVan:function(){i.player.heroModule.setBattlePioneerHero(this._heroId),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_HERO_VAN)},onClickVan:function(){var e=i.templateManager.getHeroDataById(this._heroId),t=e.setHeroMinInstance[0],a=e.setHeroMinInstance[1],n=i.player.instanceModule.getMaxChapter();100*n+i.player.instanceModule.getChapterMaxLevel(n)>=100*t+a?i.gameScene.showPage(i.pageConstant.PAGE_TYPE_HERO_CHOOSE,{heroId:this._heroId}):(t=i.templateManager.getChapterDataById(t),e=[i.lang.getGameText(t.name),a,i.lang.getGameText(e.name)],e=i.lang.getArgGameText(i.GameTextCode.SET_HERO_INSTANCE,e),i.gameScene.showTipsItemRender(e))},onClickClose:function(){this._hostObj||(this._hostObj=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_HERO)),this._hostObj&&this._hostObj.showTitileNode(),this.hideSkillTips(),this.closePage()},update:function(e){!this.isCding||(this.heroUpStarTime+=e,this.heroUpStarTime<1)||(this.heroUpStarTime=0,e=i.player.heroModule.getHeroCdLastTime(this._heroId),this.upLevelAdTimeLabel.string=i.timeUtil.secondFormat(e),e<0&&this.initData(!0))},closePageEnded:function(){this.heroBgAtlas&&i.player.commonModule.isLowIosDevice()&&(cc.loader.release(cc.loader.getDependsRecursively(this.heroBgAtlas)),this.heroBgAtlas=null),this.skillAtlas&&i.player.commonModule.isLowIosDevice()&&(cc.loader.release(cc.loader.getDependsRecursively(this.skillAtlas)),this.skillAtlas=null)}}),cc._RF.pop()},{}],MainHeroItemRender:[function(e,t){"use strict";cc._RF.push(t,"2e922fpinpJPIWRReSIOGNq","MainHeroItemRender");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{heroAtlas:{default:null,type:cc.SpriteAtlas},commonAtlas:{default:null,type:cc.SpriteAtlas}},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.UPDATE_HERO_RED,function(){e.updateRedNode()}),this.registerListener(i.GameEventType.SHOW_AD_OVER_TWO_VAN_ADD,function(){e._vanType==i.constant.HERO_ITEM_VAN_TYPE_SECOND&&e.showAdOverVan()}),this.registerListener(i.GameEventType.SHOW_AD_OVER_TWO_VAN_REFRESH,function(){e._vanType==i.constant.HERO_ITEM_VAN_TYPE_SECOND&&e.onShowAdOverChange()})},afterLoad:function(){this.nodeAni=this.node.getComponent(cc.Animation),this.nodeAni.play("heroPageItemRender_stand"),this.contentNode=cc.find("content",this.node),this.levelNode=cc.find("content/level",this.node),this.levelLabel=this.levelNode.getChildByName("label").getComponent(cc.Label),this.nameLabel=cc.find("content/level/heroName",this.node).getComponent(cc.Label),this.changeNode=cc.find("content/change",this.node),this.professionNode=cc.find("content/profession",this.node),this.professionBgSprite=cc.find("bg",this.professionNode).getComponent(cc.Sprite),this.professionIconSprite=cc.find("icon",this.professionNode).getComponent(cc.Sprite),this.bgNodeSprite=cc.find("content/bg/bg1",this.node).getComponent(cc.Sprite),this.heroUnlockNode=cc.find("content/bg/bgQ",this.node),this.heroIconSprite=cc.find("content/heroIcon",this.node).getComponent(cc.Sprite),this.positonNode=cc.find("content/positon",this.node),this.positonAddNode=cc.find("add",this.positonNode),this.positonLockNode=cc.find("lock",this.positonNode),this.positonLockLabel=this.positonLockNode.getChildByName("label").getComponent(cc.Label),this.bgHeroPositionNode=cc.find("content/bg/bgHeroPosition",this.node),this.chooseNode=cc.find("content/choose",this.node),this.blackNode=cc.find("content/black",this.node),this.starLayoutNode=cc.find("content/starLayout",this.node),this.starLayoutNodeList=[],this.starLayoutNodeList.push(cc.find("content/starLayout/icon1",this.node)),this.starLayoutNodeList.push(cc.find("content/starLayout/icon2",this.node)),this.starLayoutNodeList.push(cc.find("content/starLayout/icon3",this.node)),this.starLayoutNodeList.push(cc.find("content/starLayout/icon4",this.node)),this.starLayoutNodeList.push(cc.find("content/starLayout/icon5",this.node)),this.vanNode=cc.find("content/van",this.node),this.newPointNode=cc.find("content/newPoint",this.node),this.redPointNode=cc.find("content/redPoint",this.node),this.newPointNode.active=!1,this.redPointNode.active=!1,this.heroVanAddLockNode=cc.find("content/heroAddLock",this.node),this.heroVanAddNode=cc.find("bgHeroAdd",this.heroVanAddLockNode),this.heroVanChooseNode=cc.find("choose",this.heroVanAddLockNode),this.heroVanLockNode=cc.find("icon",this.heroVanAddLockNode),this.heroVanLockLabel=cc.find("label",this.heroVanAddLockNode).getComponent(cc.Label),this.heroVanTimeLabel=cc.find("content/countTimelabel",this.node).getComponent(cc.Label),this.originalVanHeroPosition=this.heroVanTimeLabel.node.position,this.noVanHeroPosition=cc.find("content/noHeroPos",this.node).position,this.heroVanLockLoseNode=cc.find("lose",this.heroVanAddLockNode),this.heroVanChangeNode=cc.find("content/change",this.node),this.heroVanChangeNode.active=!1,this.heroButtonNode=cc.find("heroButtonParent",this.node),this.btnUpVipNode=cc.find("upVip",this.heroButtonNode),this.btnAddVanNode=cc.find("addButton",this.heroButtonNode),this.btnAddVanLabel=cc.find("Background/addLayout/label",this.btnAddVanNode).getComponent(cc.Label),this.pieceNode=cc.find("progressBar",this.node),this.pieceProgress=this.pieceNode.getComponent(cc.ProgressBar),this.pieceLabel=cc.find("number",this.pieceNode).getComponent(cc.Label),this.pieceSprite=cc.find("piece",this.pieceNode).getComponent(cc.Sprite),this.needScaleNodeList=[this.positonLockNode,this.positonLockLabel.node,this.newPointNode,this.redPointNode,this.vanNode],this.checkNode=cc.find("check",this.node),this.checkChoseNode=cc.find("chose",this.checkNode),this.originScale=this.contentNode.scale,this.originY=this.checkNode.y,this.desY=this.contentNode.height/2*.2},initData:function(e,t,i,a,n,o){this._hostObj=e,this._source=t,this._heroId=i,this._chooseLocation=a,this._vanType=n,this._tryData=o,this.nodeAni.play("heroPageItemRender_stand"),this.updateData(!0)},updateData:function(e){var t,a,n,o,s,r,c;this.todaySecond=i.timeUtil.getTodayHourTime(0),this.areadyStop=!0,this.tempData=null,this.battleNumData=null,this._isPass=!1,this.heroQuality=i.player.heroModule.getHeroQuality(this._heroId),this._source==i.constant.HERO_ITEM_TYPE_THIRD_CHOOSE&&(this.heroQuality=i.constant.QUALITY_TYPE_4),this.heroQualityCfg=i.templateManager.getHeroQualityDataById(this.heroQuality),this.changeNodeScale(),this.positonNode.active=!1,this.levelNode.active=!1,this.heroIconSprite.node.active=!1,this.bgNodeSprite.node.active=!1,this.heroUnlockNode.active=!1,this.checkNode.active=!1,this.bgHeroPositionNode.active=!1,this.heroVanAddLockNode.active=!1,this.heroButtonNode.active=!1,this.pieceNode.active=!1,this._heroId?(this.levelNode.active=!0,this.tempData=i.templateManager.getHeroDataById(this._heroId),this._isUnlock=i.player.heroModule.isHeroUnlock(this._heroId),this.levelLabel.node.active=this._isUnlock,i.lang.updateLabelString(this.levelLabel,[i.player.heroModule.getHeroLevel(this._heroId)]),this.bgNodeSprite.node.active=!0,this.heroIconSprite.node.active=0==this.tempData.isComingSoon,this.heroUnlockNode.active=1==this.tempData.isComingSoon,t=this.heroQualityCfg.heroBg.split("/")[1],this.bgNodeSprite.spriteFrame=this.heroAtlas.getSpriteFrame(t),a=this.tempData.icon.split("/")[1],this.heroIconSprite.spriteFrame=i.heroHeadAtlas.getSpriteFrame(a),this.nameLabel.node.active=!this._isUnlock,this.nameLabel.string=i.lang.getGameText(this.tempData.name),o=this._isUnlock?"2d-sprite":"2d-gray-sprite",this._source===i.constant.HERO_ITEM_TYPE_THIRD_CHOOSE&&(o="2d-sprite"),0===this.tempData.isComingSoon&&(this.bgNodeSprite.setMaterial(0,cc.Material.getBuiltinMaterial(o)),this.heroIconSprite.setMaterial(0,cc.Material.getBuiltinMaterial(o))),1===this.tempData.isComingSoon&&this.bgNodeSprite.setMaterial(0,cc.Material.getBuiltinMaterial("2d-gray-sprite")),this._isUnlock||this.tempData.isComingSoon?this.pieceNode.active=!1:(this.pieceNode.active=!0,(n=i.templateManager.getHeroCardDataByHeroId(this._heroId))?(t=n.cardNum,a=i.player.itemModule.getHeroPieceNumById(n.id),this.pieceProgress.progress=a/t,i.lang.updateLabelString(this.pieceLabel,[a,t]),this.pieceSprite.spriteFrame=this.commonAtlas.getSpriteFrame(n.icon)):this.pieceNode.active=!1),this.tempData.heroInTowerType&&0<this.tempData.heroInTowerType.length?(this.professionNode.active=!0,this.professionBgSprite.spriteFrame=this.heroAtlas.getSpriteFrame(this.heroQualityCfg.soldierBg.split("/")[1]),n=i.templateManager.getTowerTypeById(this.tempData.heroInTowerType[0]),this.professionIconSprite.spriteFrame=this.heroAtlas.getSpriteFrame(n.typeIcon),this.professionBgSprite.setMaterial(0,cc.Material.getBuiltinMaterial(o)),this.professionIconSprite.setMaterial(0,cc.Material.getBuiltinMaterial(o))):this.professionNode.active=!1,this.vanNode.active=i.player.heroModule.getBattlePioneerHero()==this._heroId||i.player.heroModule.getBattleAdPioneerHero()==this._heroId,this._vanType==i.constant.HERO_ITEM_VAN_TYPE_SECOND&&(this.btnUpVipNode.active=!1,this.btnAddVanNode.active=!1,o=0<i.player.vipModule.getVipOutVanNum(),s=null!=i.player.heroModule.getBattleAdPioneerHero(),r=0<i.player.heroModule.getLastAdPioneerHeroTime(),c=i.player.heroModule.getAlreadyUnlockHeroList(null,!0),this.btnAddVanNode.active=o&&i.player.heroModule.checkCanAddAdPioneerHeroTimes(),this.heroVanChangeNode.active=o&&s&&r&&0<c.length),this._source==i.constant.HERO_ITEM_TYPE_THIRD_CHOOSE&&(this.levelLabel.node.active=!0,i.lang.updateLabelString(this.levelLabel,[this._tryData.tryLevel]),this.nameLabel.node.active=!1)):(this._vanType==i.constant.HERO_ITEM_VAN_TYPE_SECOND&&(this.heroVanAddLockNode.active=!0,s=0<i.player.vipModule.getVipOutVanNum(),r=null!=i.player.heroModule.getBattleAdPioneerHero(),c=0<i.player.heroModule.getLastAdPioneerHeroTime(),this.heroVanAddNode.active=s&&c&&!r,this.heroVanChooseNode.active=s&&c&&!r,this.heroVanChangeNode.active=!1,this.heroVanLockNode.active=!s||!c,this.heroVanLockLabel.node.active=!s,this.heroVanLockLoseNode.active=s&&!c,this.bgHeroPositionNode.active=!0,c=i.player.vipModule.getVipUnlockCfg(i.constant.VIP_PRIVILEGE_TYPE_BATTLE_VAN),i.lang.updateLabelString(this.heroVanLockLabel,[c.vipLevel]),this.btnUpVipNode.active=!s,this.btnAddVanNode.active=s&&i.player.heroModule.checkCanAddAdPioneerHeroTimes()),this.professionNode.active=!1),this._vanType&&(this.heroButtonNode.active=this._vanType==i.constant.HERO_ITEM_VAN_TYPE_SECOND&&(this.btnUpVipNode.active||this.btnAddVanNode.active),this.vanNode.active=!1,this.heroButtonNode.active&&e&&this.btnAddVanNode.active&&i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_SECOND_HERO_ADD_TIME_AD,1),this.heroVanChangeNode.active&&e&&i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_SECOND_HERO_CHANGE_HERO_AD,1)),i.lang.updateLabelString(this.btnAddVanLabel,[i.templateManager.getGameParamValue("secondHeroAdHours")]),this.updateheroVanTimeLabel(),this._source===i.constant.HERO_ITEM_TYPE_CHOOSE&&(this.battleNumData=i.templateManager.getHeroBattleNumDataById(this._chooseLocation),this._isPass=i.player.instanceModule.isPassInstance(this.battleNumData.instance[0],this.battleNumData.instance[1]),this._heroId||(this.positonNode.active=!0,this.positonAddNode.active=this._isPass,this.positonLockNode.active=!this._isPass,i.lang.updateLabelString(this.positonLockLabel,this.battleNumData.instance))),this._source===i.constant.HERO_ITEM_TYPE_CHOOSE_UNLOCK&&(this.checkNode.active=!0,this.chooseNode.active=!1),this._source==i.constant.HERO_ITEM_TYPE_MAP?this.vanNode.active=!1:this._source==i.constant.HERO_ITEM_TYPE_THIRD_CHOOSE&&(this.checkNode.active=!1,this.pieceNode.active=!1,this.heroButtonNode.active=!1,this.changeNode.active=!1),this.node.getComponent(cc.Layout).updateLayout(),this.updateChooseAndBlack(),this.updateRedNode(),this.updateStarLayout()},updateheroVanTimeLabel:function(){var e;this._vanType==i.constant.HERO_ITEM_VAN_TYPE_SECOND&&0<=(e=i.player.heroModule.getLastAdPioneerHeroTime())?(null==i.player.heroModule.getBattleAdPioneerHero()?this.heroVanTimeLabel.node.position=this.noVanHeroPosition:this.heroVanTimeLabel.node.position=this.originalVanHeroPosition,this.heroVanTimeLabel.node.active=!0,e=i.timeUtil.secondArrayFormat(e),e=parseInt(24*e[0])+parseInt(e[1])+":"+e[2]+":"+e[3],this.heroVanTimeLabel.string=e):this.heroVanTimeLabel.node.active=!1},updateStarLayout:function(){if(this._vanType!=i.constant.HERO_ITEM_VAN_TYPE_SECOND||null!=i.player.heroModule.getBattleAdPioneerHero()){if(this._source==i.constant.HERO_ITEM_TYPE_PAGE_SHOW||this._source==i.constant.HERO_ITEM_TYPE_CHOOSE_UNLOCK||this._source==i.constant.HERO_ITEM_TYPE_MAP||this._source==i.constant.HERO_ITEM_TYPE_APPOINT){if(this.starLayoutNode.active=!0,!this._isUnlock)return void(this.starLayoutNode.active=!1)}else{if(this._source!=i.constant.HERO_ITEM_TYPE_THIRD_CHOOSE)return void(this.starLayoutNode.active=!1);this.starLayoutNode.active=!0}var e=i.player.heroModule.getHeroStarLevel(this._heroId);this._tryData&&(e=i.templateManager.getHeroStarNumByLevel(this._tryData.tryLevel));for(var t=0;t<this.starLayoutNodeList.length;t++)this.starLayoutNodeList[t].getChildByName("icon").active=t<e}else this.starLayoutNode.active=!1},changeNodeScale:function(){for(var e=1-this.node.scaleX,t=1-this.node.scaleY,i=0;i<this.needScaleNodeList.length;i++){var a=this.needScaleNodeList[i];a.scaleX=1+e,a.scaleY=1+t}},updateChooseAndBlack:function(){var e,t,a;this._source==i.constant.HERO_ITEM_TYPE_CHOOSE_UNLOCK&&(e=0<=this._hostObj.chooseHeroList.indexOf(this._heroId),this.checkChoseNode.active=e,a=0,(t=1)===this._hostObj.canChooseHeroNum?1<this._hostObj.unlockHeroList.length&&0<this._hostObj.chooseHeroList.length&&(a=e?(t=1.2,-1):(t=.8,1)):1===this._hostObj.chooseHeroList.length?1<this._hostObj.unlockHeroList.length&&(a=e?(t=1.2,-1):(t=.8,1)):1<this._hostObj.chooseHeroList.length&&(a=e?-(t=1):(t=.8,1)),cc.tween(this.contentNode).to(.2,{scale:this.originScale*t},{easing:function(e){return e*e}}).start(),cc.tween(this.checkNode).to(.2,{y:this.originY+a*this.desY},{easing:function(e){return e*e}}).start())},updateRedNode:function(){this._source===i.constant.HERO_ITEM_TYPE_PAGE_SHOW&&(i.player.heroModule.checkSingleCanUnlockRed(this._heroId)?(this.newPointNode.active=!0,this.redPointNode.active=!1,i.gameScene.redNodeAction(this.newPointNode)):(this.newPointNode.active=!1,i.player.heroModule.checkSingleOtherRed(this._heroId,!0)||this._vanType==i.constant.HERO_ITEM_VAN_TYPE_SECOND&&i.player.heroModule.checkAdPioneerHeroRed()?(this.redPointNode.active=!0,i.gameScene.redNodeAction(this.redPointNode)):this.redPointNode.active=!1))},onClick:function(){var e;i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_GET_HERO_1_2)||i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_GET_HERO_2_2)?i.Logger.debug("!!!onClick return not normal guide"):this._source===i.constant.HERO_ITEM_TYPE_PAGE_SHOW?this._vanType==i.constant.HERO_ITEM_VAN_TYPE_SECOND&&null==i.player.heroModule.getBattleAdPioneerHero()&&0<i.player.heroModule.getLastAdPioneerHeroTime()?0==i.player.heroModule.getAlreadyUnlockHeroList(null,!0).length?(e=i.lang.getGameText(i.GameTextCode.NO_HERO),i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,e)):i.gameScene.showPage(i.pageConstant.PAGE_TYPE_APPOINT_HERO):this.tempData&&(1!=this.tempData.isComingSoon?(this._hostObj.hideTitleNode(),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_HERO_DETAIL,{host:this._hostObj,heroId:this._heroId})):(e=i.lang.getGameText(i.GameTextCode.COMING_SOON),i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,e))):this._source===i.constant.HERO_ITEM_TYPE_CHOOSE?this._isPass&&i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_HERO_CHOOSE_OBTAINED,{source:i.constant.HERO_CHOOSE_SOURCE_BATTLE}):this._source!==i.constant.HERO_ITEM_TYPE_CHOOSE_UNLOCK&&this._source!==i.constant.HERO_ITEM_TYPE_SECOND_CHOOSE||this._hostObj.chooseOneHero(this._heroId)},onClickVipUp:function(){i.gameScene.mainPage.onClickBattle(),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_VIP)},onClickChange:function(){var e;0!=i.player.heroModule.getAlreadyUnlockHeroList(null,!0).length?i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,i.GameEventType.SHOW_AD_OVER_TWO_VAN_REFRESH):(e=i.lang.getGameText(i.GameTextCode.NO_HERO),i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,e))},onShowAdOverChange:function(){i.gameScene.showPage(i.pageConstant.PAGE_TYPE_APPOINT_HERO)},onClickAdd:function(){0!=i.player.vipModule.getVipOutVanNum()&&i.player.heroModule.checkCanAddAdPioneerHeroTimes()&&i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,i.GameEventType.SHOW_AD_OVER_TWO_VAN_ADD)},showAdOverVan:function(){i.player.heroModule.addAdPioneerHeroAddTimes(),this.updateData(!1)},showEffect:function(){this.nodeAni&&(this.nodeAni.stop(),this.nodeAni.setCurrentTime(0),this.nodeAni.play("heroPageItemRender"))},update:function(e){this._vanType==i.constant.HERO_ITEM_VAN_TYPE_SECOND&&(this.updateTime||(this.updateTime=0),this.updateTime+=e,this.updateTime<=1||(this.updateTime=0,this.updateheroVanTimeLabel()))}}),cc._RF.pop()},{}],MainHeroObtainedPopUp:[function(e,t){"use strict";cc._RF.push(t,"d265cyPieVBy4Lo6ZynKx4f","MainHeroObtainedPopUp");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{itemRenderPrefab:{default:null,type:cc.Prefab}},onLoadPage:function(){this.heroLayoutNode=cc.find("/content/ScrollView/view/content/heroLayout",this.node),this.selectNode=cc.find("/content/type/pullDown/CommonSelectNode",this.node),this.selectNode.active=!1,this.beginButton=cc.find("content/beginButton",this.node),this.tipLabel=cc.find("content/tipsLabel",this.node).getComponent(cc.RichText),this.itemObjList=[],this.checkIndex=0},showPageBegan:function(){if(this.canGuide=!1,this._source=this.data.source,this._towerId=this.data.towerId,this.hideAllChild(),this.chooseHeroList=[],this._source===i.constant.HERO_CHOOSE_SOURCE_BATTLE)this.unlockHeroList=i.player.heroModule.getAlreadyUnlockHeroList(),this.canChooseHeroNum=i.player.heroModule.getUnlockBattleHeroNum(),this.chooseHeroList=i.player.heroModule.getBattleHeroIdList();else{if(this._source!==i.constant.HERO_CHOOSE_SOURCE_TOWER)return;this.unlockHeroList=i.player.towerModule.getCanChooseTowerHeros(this._towerId),this.canChooseHeroNum=i.player.towerModule.getUnlockTowerHeroNum(this._towerId),this.chooseHeroList=i.player.towerModule.getTowerHeros(this._towerId)}this.updateLabelColor(),this.areadyChooseMax=this.chooseHeroList.length>=this.canChooseHeroNum,this.checkIndex=0},showPageEnded:function(){this.canGuide=!0},hideAllChild:function(){for(var e=0;e<this.itemObjList.length;e++)this.itemObjList[e].node.active=!1},chooseOneHero:function(e){if(e){var t=this.chooseHeroList.indexOf(e);if(0<=t)i.soundsUtil.playSoundEffect("tower_hero_unselect",!1),this.chooseHeroList.splice(t,1);else{if(this.chooseHeroList.length>=this.canChooseHeroNum){if(!(1<this.itemObjList.length&&1===this.canChooseHeroNum)){var a=i.lang.getGameText(i.GameTextCode.GUARD_MAX);return void i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,a)}this.chooseHeroList=[]}else if(a=i.templateManager.getHeroDataById(e),this.checkHaveSameType(a.type))return a=i.lang.getGameText(i.GameTextCode.SAME_HERO),void i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,a);i.soundsUtil.playSoundEffect("tower_hero_select",!1),this.chooseHeroList.push(e)}this.areadyChooseMax=this.chooseHeroList.length>=this.canChooseHeroNum,this.updateItemBlack()}},checkHaveSameType:function(e){for(var t=!1,a=0;a<this.chooseHeroList.length;a++){var n=this.chooseHeroList[a];if(e==i.templateManager.getHeroDataById(n).type){t=!0;break}}return t},updateLabelColor:function(){var e=i.lang.getArgGameText(i.GameTextCode.SOLDIER_NUMBER,[this.chooseHeroList.length,this.canChooseHeroNum]);0!==this.chooseHeroList.length&&(e=e.replace("da281a","412927")),this.tipLabel.string=e},updateItemBlack:function(){this.updateLabelColor();for(var e=0;e<this.itemObjList.length;e++)this.itemObjList[e].updateChooseAndBlack()},createItem:function(){var e=cc.instantiate(this.itemRenderPrefab);this.heroLayoutNode.addChild(e),e.scale=.7*.95,e=e.getComponent("MainHeroItemRender"),this.itemObjList.push(e)},onClickChoose:function(){this._source===i.constant.HERO_CHOOSE_SOURCE_BATTLE?(i.player.heroModule.setBattleHeroList(this.chooseHeroList),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_HERO_CHOOSE_INFO)):this._source===i.constant.HERO_CHOOSE_SOURCE_TOWER&&(i.player.towerModule.setTowerHeros(this._towerId,this.chooseHeroList),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_TOWER_HERO_CHOOSE_INFO,this._towerId)),this.closePage()},onClickClose:function(){this.closePage()},guideOver:function(e){e===i.constant.GUIDE_TYPE_GET_HERO_1_a?(this.itemObjList[0].onClick(),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_GET_HERO_1_b,this.beginButton)):e===i.constant.GUIDE_TYPE_GET_HERO_1_b?this.onClickChoose():e===i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_2_3?(this.itemObjList[0].onClick(),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_2_4,this.beginButton)):e===i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_3_3?(this.itemObjList[0].onClick(),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_3_4,this.beginButton)):e===i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_4_3?(this.itemObjList[0].onClick(),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_4_4,this.beginButton)):e!==i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_2_4&&e!==i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_3_4&&e!==i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_4_4||this.onClickChoose()},update:function(){var e;this.unlockHeroList&&(this.checkIndex<this.unlockHeroList.length?(this.itemObjList.length<=this.checkIndex&&this.createItem(),(e=this.itemObjList[this.checkIndex]).node.active=!0,e.initData(this,i.constant.HERO_ITEM_TYPE_CHOOSE_UNLOCK,this.unlockHeroList[this.checkIndex]),this.checkIndex++):this.canGuide&&i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_GET_HERO_1_a)?i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_GET_HERO_1_a,this.itemObjList[0].node):this.canGuide&&i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_2_3)?i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_2_3,this.itemObjList[0].node):this.canGuide&&i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_3_3)?i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_3_3,this.itemObjList[0].node):this.canGuide&&i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_4_3)&&i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_4_3,this.itemObjList[0].node))}}),cc._RF.pop()},{}],MainHeroPage:[function(e,t){"use strict";cc._RF.push(t,"97f8cZiQIREyYbH/iisWR2O","MainHeroPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{itemRenderPrefab:{default:null,type:cc.Prefab},gayFriendPrefab:{default:null,type:cc.Prefab},pieceChangeItemPrefab:{default:null,type:cc.Prefab}},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.UPDATE_HERO_PAGE_LIST,function(t){var a;!e.node.active||(a=i.templateManager.getHeroCardDataById(t))&&i.player.itemModule.checkHeroPieceEnough(t,a.cardNum)&&e.initData()}),this.registerListener(i.GameEventType.UPDATE_HERO_VAN,function(){e.initData()}),this.registerListener(i.GameEventType.UPDATE_HERO_TAG_RED,function(){return e.updateTagRed()})},onLoadPage:function(){this.titleNode=cc.find("titleParent/title",this.node),this.herosNode=cc.find("content/heros",this.node),this.unlockedLayoutNode=cc.find("ScrollView/view/content/unlockedLayout",this.herosNode),this.lockedLayoutNode=cc.find("ScrollView/view/content/lockedLayout",this.herosNode),this.unlockedLayout=this.unlockedLayoutNode.getComponent(cc.Layout),this.lockedLayout=this.lockedLayoutNode.getComponent(cc.Layout),this.contentLayout=cc.find("ScrollView/view/content",this.herosNode).getComponent(cc.Layout),this.lockedHeroTitleLayoutNode=cc.find("ScrollView/view/content/lockedHeroTitleLayout",this.herosNode),this.lockedHeroTitleLayoutNode.active=!1,this.heroVanContentNode=cc.find("ScrollView/view/content/fightLuckyChance",this.herosNode),this.heroVanItemContentNode=cc.find("contentLayout",this.heroVanContentNode),this.unlockedHeroTitleLayoutNode=cc.find("ScrollView/view/content/unlockedHeroTitleLayout",this.herosNode),this.gayFriendNode=cc.find("content/gayFriend",this.node),this.gayFriendScrollView=cc.find("ScrollView",this.gayFriendNode).getComponent(cc.ScrollView),this.gayFriendSVContent=cc.find("ScrollView/view/content",this.gayFriendNode),this.gayFriendFightNode=cc.find("fightLuckyChance",this.gayFriendSVContent),this.gayFriendFightContentNode=cc.find("fightLuckyChance/contentLayout",this.gayFriendSVContent),this.gayFriendUseContent=cc.find("heroLuckyChance/content",this.gayFriendSVContent),this.gayFriendNumberLabel=cc.find("heroLuckyChance/collected/layout/number",this.gayFriendSVContent).getComponent(cc.Label),this.pieceChangeNode=cc.find("content/pieceChange",this.node),this.pieceChangeContent=cc.find("pieceContent",this.pieceChangeNode),this.pieceChangePageNode=cc.find("pageParent",this.pieceChangeNode),this.pieceChangeBgNode=cc.find("pieceBg",this.pieceChangeNode),this.pieceChangeAdd1=cc.find("change/piece1",this.pieceChangeNode),this.pieceChangeAdd2=cc.find("change/piece2",this.pieceChangeNode),this.pieceChangeAdd1Hit=cc.find("hitNode",this.pieceChangeAdd1),this.pieceChangeAdd2Hit=cc.find("hitNode",this.pieceChangeAdd2),this.pieceChangeAdd1Effect=cc.find("pieceChange_light",this.pieceChangeAdd1).getComponent(cc.Animation),this.pieceChangeAdd2Effect=cc.find("pieceChange_light",this.pieceChangeAdd2).getComponent(cc.Animation),this.pieceChangeAdd1Effect.play("pieceChange_light"),this.pieceChangeAdd2Effect.play("pieceChange_light"),this.pieceChangeAdd1Effect.node.active=!1,this.pieceChangeAdd2Effect.node.active=!1,this.pieceChangeBtnNode=cc.find("change/changeButton",this.pieceChangeNode),this.pieceChangeCoseNumLabel=cc.find("background/layout/number",this.pieceChangeBtnNode).getComponent(cc.Label),this.heroTagButtonNode=cc.find("/tabLayout/heroButton",this.node),this.heroTagButtonChoseNode=cc.find("background/choose",this.heroTagButtonNode),this.heroTagButtonChoseLabelNode=cc.find("background/label",this.heroTagButtonNode),this.heroTagButtonRedNode=cc.find("background/redPoint",this.heroTagButtonNode),this.gayFriendTagButtonNode=cc.find("/tabLayout/luckyChanceButton",this.node),this.gayFriendTagChoseNode=cc.find("background/choose",this.gayFriendTagButtonNode),this.gayFriendTagChoseLabelNode=cc.find("background/label",this.gayFriendTagButtonNode),this.gayFriendTagLockNode=cc.find("background/lock",this.gayFriendTagButtonNode),this.gayFriendRedNode=cc.find("background/redPoint",this.gayFriendTagButtonNode),this.pieceChangeTagButtonNode=cc.find("tabLayout/pieceChangeButton",this.node),this.pieceChangeTagChoseNode=cc.find("background/choose",this.pieceChangeTagButtonNode),this.pieceChangeTagChoseLabelNode=cc.find("background/label",this.pieceChangeTagButtonNode),this.pieceChangeTagLockNode=cc.find("background/lock",this.pieceChangeTagButtonNode),this.pieceChangeRedNode=cc.find("background/redPoint",this.pieceChangeTagButtonNode),this.heroTagButtonRedNode.active=!1,this.gayFriendRedNode.active=!1,this.pieceChangeRedNode.active=!1,this.unlockIndex=0,this.lockedIndex=0,this.unlockHeroList=[],this.lockedHeroList=[],this.unlockItemObjList=[],this.lockedItemObjList=[],this.gayFriendItemObjList=[],this.pieceChangeItemObjList=[],this.upgradeHeroGuide2Item=null,this.pieceItemHeight=108,this.pieceLineNum=5,i.gameScene.isIphoneX()&&i.Utils.addNodeTopSpace(this.node)},showPageBegan:function(){this.isCheckGuideLimit=!0,this._tagType=i.constant.HERO_PAGE_TAG_HERO,this.showTitileNode(),this.initData()},showPageEnded:function(){i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_RESTRAIN_OPEN_2)&&this.scheduleOnce(function(){i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_RESTRAIN_OPEN_2,this.gayFriendTagButtonNode)},.1)},initData:function(){var e;this.showTitileNode(),this.heroTagButtonChoseNode.active=this._tagType==i.constant.HERO_PAGE_TAG_HERO,this.gayFriendTagChoseNode.active=this._tagType==i.constant.HERO_PAGE_TAG_GAY_FRIEND,this.pieceChangeTagChoseNode.active=this._tagType==i.constant.HERO_PAGE_TAG_PIECE_CHANGE,this.heroTagButtonChoseLabelNode.color=cc.color(this._tagType==i.constant.HERO_PAGE_TAG_HERO?"#B05F3A":"#FFEED6"),this.gayFriendTagChoseLabelNode.color=cc.color(this._tagType==i.constant.HERO_PAGE_TAG_GAY_FRIEND?"#B05F3A":"#FFEED6"),this.pieceChangeTagChoseLabelNode.color=cc.color(this._tagType==i.constant.HERO_PAGE_TAG_PIECE_CHANGE?"#B05F3A":"#FFEED6"),this.gayFriendTagLockNode.active=!i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_RESTRAIN),this.pieceChangeTagLockNode.active=!i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_PIECE_CHANGE),this.hideAllItem(),this.upgradeHeroGuide2Item=null,this._tagType==i.constant.HERO_PAGE_TAG_HERO?(this.herosNode.active=!0,this.gayFriendNode.active=!1,this.pieceChangeNode.active=!1,this.updateHeroVanItem(),this.unlockIsDOne=!1,this.writeLockedHeroData(),this.unlockIndex=0,this.lockedIndex=0,this.lockedLayout.updateLayout(),this.contentLayout.updateLayout()):this._tagType==i.constant.HERO_PAGE_TAG_GAY_FRIEND?(this.herosNode.active=!1,this.gayFriendNode.active=!0,this.pieceChangeNode.active=!1,e=i.player.heroModule.getAllUnlockGayFriendList().length,this.gayFriendFightNode.active=0<e,this.gayFriendList=i.player.heroModule.getAllGayFriendList(),this.gayFriendIndex=0,i.lang.updateLabelString(this.gayFriendNumberLabel,[e,i.templateManager.getHeroRestrainGroupIdList().length]),this.gayFriendFightNode.active&&this.updateGayFriendFightItem(!0)):(this.herosNode.active=!1,this.gayFriendNode.active=!1,this.pieceChangeNode.active=!0,i.lang.updateLabelString(this.pieceChangeCoseNumLabel,[i.templateManager.getGameParamValue("conversionRequiredDia")]),this.pieceChangeContent.getComponent(cc.Widget).updateAlignment(),this.pieceChangeList=i.player.itemModule.getAllSortHeroPieceList(),this.maxPieceChangeRowNum=this.getCanBuildMaxNum(),this.pieceChangeBgNode.height=Math.abs(this.pieceChangeBgNode.y-this.pieceChangePageNode.y)-30,i.gameScene.isIphoneX()&&(this.pieceChangeBgNode.height=this.pieceChangeContent.height+30),this.curPieceChangePageIndex=0,this.pieceChangeIndex=0,this.updatePieceChangePage(),this.buildPieceMoveNode(),this.hidePieceAddItems(),this.hidePieceMoveNode(),this.updatePieceBtnNode()),this.updateTagRed()},updatePieceChangePage:function(){var e=this.pieceChangePageNode.children,t=Math.ceil(this.pieceChangeList.length/(this.maxPieceChangeRowNum*this.pieceLineNum));if(t<=1)this.pieceChangePageNode.active=!1;else{this.pieceChangePageNode.active=!0;for(var i=0;i<e.length;i++){var a=e[i];t<i+1?a.active=!1:(a.active=!0,a.opacity=i==this.curPieceChangePageIndex?255:153)}}},updateAllUnlockItem:function(){this.writeLockedHeroData(),this.unlockIndex=0},getCanBuildMaxNum:function(){var e=Math.abs(this.pieceChangeContent.y-this.pieceChangePageNode.y)-20;return Math.floor(e/(this.pieceItemHeight+4))},setPieceMoveNodePos:function(e){e=this.node.convertToNodeSpaceAR(e),this.pieceMoveObj.node.position=e,this.movePieceMoveNodeIn()},showPieceMoveNode:function(e){this.pieceMoveObj.node.active=!0,this.pieceMoveObj.initData(i.constant.HERO_PIECE_CHANGE_ITEM_MOVE,e,!0),this.buildPieceAddItem1Obj(),this.buildPieceAddItem2Obj()},hidePieceMoveNode:function(){this.pieceMoveObj.cleanPieceId(),this.pieceMoveObj.node.active=!1},updatePieceBtnNode:function(){var e="2d-gray-sprite";this.pieceAddItem1Obj&&this.pieceAddItem1Obj._pieceId&&this.pieceAddItem2Obj&&this.pieceAddItem2Obj._pieceId&&(e="2d-sprite"),this.pieceChangeBtnNode.getChildByName("background").getComponent(cc.Sprite).setMaterial(0,cc.Material.getBuiltinMaterial(e))},endPieceMoveNodeIn:function(e,t,a){this.hidePieceMoveNode(),this.showPieceChangeAddEffectNodeActive(1,!1),this.showPieceChangeAddEffectNodeActive(2,!1);var n,o=this.pieceMoveObj.node.getChildByName("hitNode").getBoundingBoxToWorld(),s=cc.Intersection.rectRect(o,this.pieceChangeAdd1Hit.getBoundingBoxToWorld());return o=cc.Intersection.rectRect(o,this.pieceChangeAdd2Hit.getBoundingBoxToWorld()),s?(t?this.pieceAddItem1Obj==a?this.pieceAddItem1Obj.node.active=!0:(this.pieceAddItem1Obj.node.active=!0,this.pieceAddItem2Obj.node.active=!0,n=this.pieceAddItem1Obj._pieceId,s=this.pieceAddItem2Obj._pieceId,this.pieceAddItem1Obj.setPieceId(s),this.pieceAddItem2Obj.setPieceId(n),this.pieceAddItem1Obj.updateData(),this.pieceAddItem2Obj.updateData()):(this.pieceAddItem1Obj.node.active=!0,this.pieceAddItem1Obj.initData(i.constant.HERO_PIECE_CHANGE_ITEM_UP,e)),this.updatePieceBtnNode(),!0):o?(t?this.pieceAddItem2Obj==a?this.pieceAddItem2Obj.node.active=!0:(this.pieceAddItem1Obj.node.active=!0,this.pieceAddItem2Obj.node.active=!0,n=this.pieceAddItem1Obj._pieceId,o=this.pieceAddItem2Obj._pieceId,this.pieceAddItem1Obj.setPieceId(o),this.pieceAddItem2Obj.setPieceId(n),this.pieceAddItem1Obj.updateData(),this.pieceAddItem2Obj.updateData()):(this.pieceAddItem2Obj.node.active=!0,this.pieceAddItem2Obj.initData(i.constant.HERO_PIECE_CHANGE_ITEM_UP,e)),this.updatePieceBtnNode(),!0):(t&&a&&(a.setPieceId(null),this.updateAllPieceChangeItem()),this.updatePieceBtnNode(),!1)},movePieceMoveNodeIn:function(){var e=this.pieceMoveObj.node.getChildByName("hitNode").getBoundingBoxToWorld(),t=cc.Intersection.rectRect(e,this.pieceChangeAdd1Hit.getBoundingBoxToWorld());e=cc.Intersection.rectRect(e,this.pieceChangeAdd2Hit.getBoundingBoxToWorld()),t||e?t?(this.updateAllPieceEffectActive(!1),this.showPieceChangeAddEffectNodeActive(1,!0),this.showPieceChangeAddEffectNodeActive(2,!1)):e&&(this.updateAllPieceEffectActive(!1),this.showPieceChangeAddEffectNodeActive(1,!1),this.showPieceChangeAddEffectNodeActive(2,!0)):(this.updateAllPieceEffectActive(!0),this.showPieceChangeAddEffectNodeActive(1,!1),this.showPieceChangeAddEffectNodeActive(2,!1))},updateAllPieceEffectActive:function(e){for(var t=0;t<this.pieceChangeItemObjList.length;t++)this.pieceChangeItemObjList[t].setEffectNodeActive(this.pieceMoveObj._pieceId,e)},updateAllPieceChangeItem:function(){for(var e=0;e<this.pieceChangeItemObjList.length;e++)this.pieceChangeItemObjList[e].updateData()},getPieceChangeSubNum:function(e,t){var i=0;return t&&this.pieceMoveObj&&this.pieceMoveObj._pieceId&&this.pieceMoveObj._pieceId==e&&i++,this.pieceAddItem1Obj&&this.pieceAddItem1Obj._pieceId&&this.pieceAddItem1Obj._pieceId==e&&i++,this.pieceAddItem2Obj&&this.pieceAddItem2Obj._pieceId&&this.pieceAddItem2Obj._pieceId==e&&i++,i},buildPieceMoveNode:function(){var e;this.pieceMoveObj||(e=cc.instantiate(this.pieceChangeItemPrefab),this.node.addChild(e),this.pieceMoveObj=e.getComponent("PieceChangeItemRender"),this.pieceMoveObj.host=this,e.active=!1)},hidePieceAddItems:function(){this.pieceAddItem1Obj&&(this.pieceAddItem1Obj.node.active=!1),this.pieceAddItem2Obj&&(this.pieceAddItem2Obj.node.active=!1)},buildPieceAddItem1Obj:function(){var e;this.pieceAddItem1Obj||(e=cc.instantiate(this.pieceChangeItemPrefab),this.pieceChangeAdd1.addChild(e),this.pieceAddItem1Obj=e.getComponent("PieceChangeItemRender"),this.pieceAddItem1Obj.host=this,e.active=!1,e.scale=1.3)},buildPieceAddItem2Obj:function(){var e;this.pieceAddItem2Obj||(e=cc.instantiate(this.pieceChangeItemPrefab),this.pieceChangeAdd2.addChild(e),this.pieceAddItem2Obj=e.getComponent("PieceChangeItemRender"),this.pieceAddItem2Obj.host=this,e.active=!1,e.scale=1.3)},showPieceChangeAddEffectNodeActive:function(e,t){var i=this.pieceChangeAdd1Effect;2==e&&(i=this.pieceChangeAdd2Effect),t?i.node.active||(i.node.active=!0,i.stop(),i.setCurrentTime(0),i.play("pieceChange_light")):i.node.active&&(i.node.active=!1)},updateTagRed:function(){i.player.heroModule.checkAllCanUnlockRed()||i.player.heroModule.checkAllOtherRed(!0)?this.heroTagButtonRedNode.active||(this.heroTagButtonRedNode.active=!0,i.gameScene.redNodeAction(this.heroTagButtonRedNode)):this.heroTagButtonRedNode.active=!1,!i.player.heroModule.haveCanLevelUpGayFriend()&&i.player.heroModule.getTodayIntoGayFriend()||!i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_RESTRAIN)?this.gayFriendRedNode.active=!1:this.gayFriendRedNode.active||(this.gayFriendRedNode.active=!0,i.gameScene.redNodeAction(this.gayFriendRedNode))},hideAllItem:function(){for(var e=0;e<this.unlockItemObjList.length;e++)this.unlockItemObjList[e].node.active=!1;for(var t=0;t<this.lockedItemObjList.length;t++)this.lockedItemObjList[t].node.active=!1;for(var i=0;i<this.gayFriendItemObjList.length;i++)this.gayFriendItemObjList[i].node.active=!1;for(var a=0;a<this.pieceChangeItemObjList.length;a++)this.pieceChangeItemObjList[a].node.active=!1},writeLockedHeroData:function(){this.unlockHeroList=i.player.heroModule.getAlreadyUnlockHeroList(),this.lockedHeroList=[];for(var e=[],t=i.JsonData.Hero,a=0;a<t.length;a++){var n,o,s=t[a],r=s.id;i.player.heroModule.getBattlePioneerHero()!=r&&i.player.heroModule.getBattleAdPioneerHero()!=r?0<=this.unlockHeroList.indexOf(s.id)||s.isComingSoon==i.constant.HERO_TYPE_HEAD||(n=i.templateManager.getHeroCardDataByHeroId(r),o=1e5-r,s.isComingSoon==i.constant.HERO_TYPE_COMING?o=-r:i.player.itemModule.checkHeroPieceEnough(n.id,n.cardNum)&&(o*=1e3),e.push([o,r])):0<=(r=this.unlockHeroList.indexOf(r))&&this.unlockHeroList.splice(r,1)}e.sort(function(e,t){return t[0]-e[0]});for(var c=[],l=0;l<e.length;l++){var d=e[l][1];this.lockedHeroList.push(d),0<e[l][0]&&c.push(d)}0==this.unlockHeroList.length&&(this.unlockIsDOne=!0,this.unlockedLayout.updateLayout(),this.lockedHeroTitleLayoutNode.active=!0);var h=[];i.player.heroModule.getBattlePioneerHero()&&h.push(i.player.heroModule.getBattlePioneerHero()),i.player.heroModule.getBattleAdPioneerHero()&&h.push(i.player.heroModule.getBattleAdPioneerHero()),this.allHeroIdList=h.concat(this.unlockHeroList.concat(c)),this.unlockedHeroTitleLayoutNode.active=0<this.unlockHeroList.length},updateHeroVanItem:function(e){var t,a=i.player.heroModule.getBattlePioneerHero(),n=i.player.heroModule.getBattleAdPioneerHero();a?(this.heroVanContentNode.active=!0,this.heroVanCommonObj||(t=cc.instantiate(this.itemRenderPrefab),this.heroVanItemContentNode.addChild(t),t.anchorY=1,t=t.getComponent("MainHeroItemRender"),this.heroVanCommonObj=t),this.heroWanAdObj||(t=cc.instantiate(this.itemRenderPrefab),this.heroVanItemContentNode.addChild(t),t.anchorY=1,t=t.getComponent("MainHeroItemRender"),this.heroWanAdObj=t),this.heroVanCommonObj.initData(this,i.constant.HERO_ITEM_TYPE_PAGE_SHOW,a,null,i.constant.HERO_ITEM_VAN_TYPE_FIRST),this.heroWanAdObj.node.active=!0,this.heroWanAdObj.initData(this,i.constant.HERO_ITEM_TYPE_PAGE_SHOW,n,null,i.constant.HERO_ITEM_VAN_TYPE_SECOND),e&&this.heroWanAdObj.showEffect(),i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_SECOND_HERO_2)&&this.scheduleOnce(function(){i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_SECOND_HERO_2,this.heroWanAdObj.node)},.3)):this.heroVanContentNode.active=!1,this.heroVanItemContentNode.getComponent(cc.Layout).updateLayout()},updateAllGayFriendItem:function(e){this.updateGayFriendFightItem(e);for(var t=0;t<this.gayFriendItemObjList.length;t++)this.gayFriendItemObjList[t].updateData()},updateGayFriendFightItem:function(e){var t;this.updateTagRed(),0!=i.player.heroModule.getAllBattleGayFriend().length?(this.gayFriendFightNode.active=!0,this.gayFriendFightItemObj||(t=cc.instantiate(this.gayFriendPrefab),this.gayFriendFightContentNode.addChild(t),this.gayFriendFightItemObj=t.getComponent("GayFriendItemRender"),this.gayFriendFightItemObj.host=this),this.gayFriendFightItemObj.initData(i.constant.HERO_GAY_FRIEND_ITEM_FIGHT,null,e),this.gayFriendFightAdItemObj||(t=cc.instantiate(this.gayFriendPrefab),this.gayFriendFightContentNode.addChild(t),this.gayFriendFightAdItemObj=t.getComponent("GayFriendItemRender"),this.gayFriendFightAdItemObj.host=this),this.gayFriendFightAdItemObj.initData(i.constant.HERO_GAY_FRIEND_ITEM_FIGHT_AD,null,e)):this.gayFriendFightNode.active=!1},buildUnlockItem:function(){var e=cc.instantiate(this.itemRenderPrefab);this.unlockedLayoutNode.addChild(e),e.scale=.7,e=e.getComponent("MainHeroItemRender"),this.unlockItemObjList.push(e)},buildLockedItem:function(){var e=cc.instantiate(this.itemRenderPrefab);this.lockedLayoutNode.addChild(e),e.scale=.7,e=e.getComponent("MainHeroItemRender"),this.lockedItemObjList.push(e)},hideTitleNode:function(){this.titleNode.active=!1},showTitileNode:function(){this.titleNode.active=!0},updateItemByHeroId:function(e,t){if(this.updateTagRed(),t)this.initData();else{for(var a=i.player.heroModule.getAlreadyUnlockHeroList(),n=i.JsonData.Hero,o=0;o<n.length;o++){var s=n[o].id;i.player.heroModule.getBattlePioneerHero()!=s&&i.player.heroModule.getBattleAdPioneerHero()!=s||0<=(s=a.indexOf(s))&&a.splice(s,1)}if(a.toString()!=this.unlockHeroList.toString())this.initData();else for(var r=0;r<this.unlockItemObjList.length;r++){var c=this.unlockItemObjList[r];c._heroId==e&&c.initData(this,i.constant.HERO_ITEM_TYPE_PAGE_SHOW,e)}this.updateHeroVanItem()}},onClickHero:function(){this.showTitileNode(),this._tagType!=i.constant.HERO_PAGE_TAG_HERO&&(this._tagType=i.constant.HERO_PAGE_TAG_HERO,this.initData())},onClickGayFriend:function(){this.showTitileNode(),i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_RESTRAIN)?this._tagType!=i.constant.HERO_PAGE_TAG_GAY_FRIEND&&(this._tagType=i.constant.HERO_PAGE_TAG_GAY_FRIEND,i.player.heroModule.setTodayIntoGayFriend(!0),this.initData(),i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_GAY_PAGE)):i.gameScene.showTipsItemRender(i.player.functionModule.getFuncConditionStringById(i.constant.MAIN_FUNCTION_RESTRAIN))},onClickPieceChange:function(){this.showTitileNode(),i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_PIECE_CHANGE)?this._tagType!=i.constant.HERO_PAGE_TAG_PIECE_CHANGE&&(this._tagType=i.constant.HERO_PAGE_TAG_PIECE_CHANGE,this.initData(),i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_PIECE_CHANGE)):i.gameScene.showTipsItemRender(i.player.functionModule.getFuncConditionStringById(i.constant.MAIN_FUNCTION_PIECE_CHANGE))},onClickPieceChangeBtn:function(){var e;this.pieceAddItem1Obj&&this.pieceAddItem1Obj._pieceId&&this.pieceAddItem2Obj&&this.pieceAddItem2Obj._pieceId&&(i.player.playerModule.isGoldBullionEnough(i.templateManager.getGameParamValue("conversionRequiredDia"))?i.player.playerModule.costGoldBullionNum(i.templateManager.getGameParamValue("conversionRequiredDia"),i.constant.ITEM_CONSUME_SOURCE_HERO_CARD_CHANGE)&&(i.player.itemModule.subHeroPiece(this.pieceAddItem1Obj._pieceId,1),i.player.itemModule.subHeroPiece(this.pieceAddItem2Obj._pieceId,1),e=i.player.heroModule.heroPieceChange(),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_PIECE_CHANGE,e),this.pieceAddItem1Obj.setPieceId(null),this.pieceAddItem2Obj.setPieceId(null),this.pieceAddItem1Obj.updateData(),this.pieceAddItem2Obj.updateData(),this.updateAllPieceChangeItem(),this.updatePieceBtnNode()):(e=i.lang.getGameText(i.GameTextCode.ENOUGH_DIAMONDS),i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,e)))},onClickPiecePage:function(e,t){t!=this.curPieceChangePageIndex&&(this.hideAllItem(),this.curPieceChangePageIndex=parseInt(t),this.pieceChangeIndex=this.maxPieceChangeRowNum*this.pieceLineNum*this.curPieceChangePageIndex,this.updatePieceChangePage())},onClickClose:function(){this.closePage()},checkUnlockItem:function(){var e;this._tagType==i.constant.HERO_PAGE_TAG_HERO&&this.unlockIndex<this.unlockHeroList.length&&(this.unlockItemObjList.length<=this.unlockIndex&&this.buildUnlockItem(),(e=this.unlockItemObjList[this.unlockIndex]).node.active=!0,e.initData(this,i.constant.HERO_ITEM_TYPE_PAGE_SHOW,this.unlockHeroList[this.unlockIndex]),this.unlockIndex++,this.unlockIndex==this.unlockHeroList.length&&(this.unlockIsDOne=!0,this.unlockedLayout.updateLayout(),this.lockedHeroTitleLayoutNode.active=!0))},checkLockedItem:function(){var e,t;this.unlockIsDOne&&this._tagType==i.constant.HERO_PAGE_TAG_HERO&&(this.lockedIndex<this.lockedHeroList.length?(this.isCheckGuideLimit&&i.gameScene.showGuideLimit(1.5),e=this.lockedHeroList[this.lockedIndex],this.lockedItemObjList.length<=this.lockedIndex&&this.buildLockedItem(e),(t=this.lockedItemObjList[this.lockedIndex]).node.active=!0,t.initData(this,i.constant.HERO_ITEM_TYPE_PAGE_SHOW,e),this.lockedIndex++,e===i.constant.GUIDE_DEFAULT_HERO_ID&&(this.upgradeHeroGuide2Item=t)):i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_GET_HERO_1_2)&&this.upgradeHeroGuide2Item?i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_GET_HERO_1_2,this.upgradeHeroGuide2Item.node):i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_GET_HERO_2_2)?i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_GET_HERO_2_2,this.lockedItemObjList[0].node):(this.isCheckGuideLimit&&i.gameScene.guideLimit.active&&i.gameScene.hideGuideLimit(),this.isCheckGuideLimit=!1))},updateGuideRestrainObj:function(){for(var e=0;e<this.gayFriendItemObjList.length;e++)if(this.gayFriendItemObjList[e].buttonUseNode.active){this.guideRestrainObj=this.gayFriendItemObjList[e];break}},checkGayFriendItem:function(){if(this._tagType==i.constant.HERO_PAGE_TAG_GAY_FRIEND){if(!this.guideRestrainObj)for(var e=i.player.heroModule.haveCanLevelUpGayFriend(),t=0;t<this.gayFriendItemObjList.length;t++)if(this.gayFriendItemObjList[t]._gayFriendGroupId==e){this.guideRestrainObj=this.gayFriendItemObjList[t];break}var a,n;this.gayFriendIndex<this.gayFriendList.length?(a=this.gayFriendList[this.gayFriendIndex],this.gayFriendItemObjList.length<=this.gayFriendIndex&&(n=cc.instantiate(this.gayFriendPrefab),this.gayFriendUseContent.addChild(n),((n=n.getComponent("GayFriendItemRender")).host=this).gayFriendItemObjList.push(n)),(n=this.gayFriendItemObjList[this.gayFriendIndex]).node.active=!0,n.initData(i.constant.HERO_GAY_FRIEND_ITEM_GENERAL,a,!0,!0),this.gayFriendIndex++):this.guideRestrainObj&&i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_RESTRAIN_UNLOCK_1_2)&&this.scheduleOnce(function(){this.gayFriendScrollView.scrollToOffset(cc.v2(0,600)),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_RESTRAIN_UNLOCK_1_2,this.guideRestrainObj.node)},.1)}},checkPieceChangeItem:function(){var e,t,a,n;this._tagType==i.constant.HERO_PAGE_TAG_PIECE_CHANGE&&(e=this.maxPieceChangeRowNum*this.pieceLineNum*this.curPieceChangePageIndex,t=this.maxPieceChangeRowNum*this.pieceLineNum*(1+this.curPieceChangePageIndex),this.pieceChangeIndex<this.pieceChangeList.length?(this.pieceChangeItemObjList.length<=this.pieceChangeIndex&&(a=cc.instantiate(this.pieceChangeItemPrefab),this.pieceChangeContent.addChild(a),((n=a.getComponent("PieceChangeItemRender")).host=this).pieceChangeItemObjList.push(n)),a=this.pieceChangeList[this.pieceChangeIndex],n=this.pieceChangeItemObjList[this.pieceChangeIndex],this.pieceChangeIndex>=e&&this.pieceChangeIndex<t?(n.node.active=!0,n.initData(i.constant.HERO_PIECE_CHANGE_ITEM_BASE,a)):n.node.active=!1,this.pieceChangeIndex++):i.gameScene.isIphoneX()&&(this.pieceChangeBgNode.height=this.pieceChangeContent.height+30))},guideOver:function(e){e===i.constant.GUIDE_TYPE_GET_HERO_1_2?this.upgradeHeroGuide2Item&&(this.upgradeHeroGuide2Item.onClick(),this.upgradeHeroGuide2Item=null):e===i.constant.GUIDE_TYPE_GET_HERO_2_2&&this.lockedItemObjList[0].onClick()},update:function(){this.checkUnlockItem(),this.checkLockedItem(),this.checkGayFriendItem(),this.checkPieceChangeItem()}}),cc._RF.pop()},{}],MainHeroPieceSourceItemRender:[function(e,t){"use strict";cc._RF.push(t,"8f86aoOyjNFk527pN2Br7+E","MainHeroPieceSourceItemRender");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{mainAtlas:{default:null,type:cc.SpriteAtlas},battleBoxAtlas:{default:null,type:cc.SpriteAtlas}},afterLoad:function(){this.iconSprite=cc.find("icon",this.node).getComponent(cc.Sprite),this.nameLabel=cc.find("name",this.node).getComponent(cc.Label),this.descLabel=cc.find("describe",this.node).getComponent(cc.Label)},initData:function(e){this.tempData=e,this.funcId=this.tempData.id,this.funcId==i.constant.MAIN_FUNCTION_BATTLE_BOX?this.iconSprite.spriteFrame=this.battleBoxAtlas.getSpriteFrame(e.originPanelIcon):this.iconSprite.spriteFrame=this.mainAtlas.getSpriteFrame(e.originPanelIcon);var t=this.tempData.originIconScale?this.tempData.originIconScale/1e4:1;this.iconSprite.node.scale=t,this.nameLabel.string=i.lang.getGameText(e.originPanelName),this.descLabel.string=i.lang.getGameText(e.desc)},onClickGo:function(){i.Logger.debug("this.funcId: "+this.funcId);var e=!0;switch(this.funcId){case i.constant.MAIN_FUNCTION_SHOP:(e=i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_SHOP))?i.gameScene.mainPage.onClickShop():i.gameScene.showTipsItemRender(i.player.functionModule.getFuncConditionStringById(i.constant.MAIN_FUNCTION_SHOP));break;case i.constant.MAIN_FUNCTION_TASK:(e=i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_TASK))?(i.gameScene.mainPage.onClickBattle(),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_TASK)):i.gameScene.showTipsItemRender(i.player.functionModule.getFuncConditionStringById(i.constant.MAIN_FUNCTION_TASK));break;case i.constant.MAIN_FUNCTION_SIGN:(e=i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_SIGN))?(i.gameScene.mainPage.onClickBattle(),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_SIGN)):i.gameScene.showTipsItemRender(i.player.functionModule.getFuncConditionStringById(i.constant.MAIN_FUNCTION_SIGN));break;case i.constant.MAIN_FUNCTION_BATTLE:case i.constant.MAIN_FUNCTION_BATTLE_BOX:i.gameScene.mainPage.onClickBattle()}i.gameScene.closePage(i.pageConstant.PAGE_TYPE_MAIN_HERO_PIECE_SOURCE),e&&i.gameScene.closePage(i.pageConstant.PAGE_TYPE_MAIN_HERO_DETAIL)}}),cc._RF.pop()},{}],MainHeroPieceSourcePopUp:[function(e,t){"use strict";cc._RF.push(t,"ac554X1VvpOv7DPUNPm17G2","MainHeroPieceSourcePopUp");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{itemRenderPrefab:{default:null,type:cc.Prefab}},onLoadPage:function(){this.scorllView=cc.find("content/scrollView",this.node),this.contentNode=cc.find("view/content",this.scorllView),this.buildItem()},showPageBegan:function(){},buildItem:function(){this.itemObjList=[];for(var e=i.JsonData.Function,t=0;t<e.length;t++){var a,n=e[t];1==n.isShowInPanel&&(a=cc.instantiate(this.itemRenderPrefab),this.contentNode.addChild(a),(a=a.getComponent("MainHeroPieceSourceItemRender")).initData(n),this.itemObjList.push(a))}},onClickClose:function(){this.closePage()},showPageEnded:function(){}}),cc._RF.pop()},{}],MainHeroSkillItemRender:[function(e,t){"use strict";cc._RF.push(t,"82455YH7sdB3Yn/6IySMh0G","MainHeroSkillItemRender");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{},afterLoad:function(){this.iconSprite=cc.find("icon",this.node).getComponent(cc.Sprite),this.unlockNode=cc.find("unlock",this.node),this.unlockLabel=this.unlockNode.getComponent(cc.Label)},initData:function(e,t,a){this._heroId=e,this._quality=parseInt(t),this._skillId=a,(t=i.templateManager.getHeroQualityDataById(this._quality))?(a=i.templateManager.getHeroSkillDataById(this._skillId).icon.split("/")[1],this.iconSpriteName=a,this.iconSprite.node.active=!1,a=i.player.heroModule.getHeroQuality(this._heroId)>=this._quality,this.unlockNode.active=!a,i.lang.updateLabelString(this.unlockLabel,[i.lang.getGameText(t.qualityName)]),this.iconSprite.setMaterial(0,cc.Material.getBuiltinMaterial(a?"2d-sprite":"2d-gray-sprite"))):this.node.active=!1},showSkillIcon:function(e){this.iconSprite.node.active=!0,this.iconSprite.spriteFrame=e.getSpriteFrame(this.iconSpriteName)},onClick:function(){var e=this.node.convertToWorldSpaceAR(cc.v2(0,0));e.y+=this.node.height/2,this.host.host.showOrHideSkillTips(this._skillId,e)}}),cc._RF.pop()},{}],MainHeroSkillTypeItemRender:[function(e,t){"use strict";cc._RF.push(t,"f17444c+5FHlba2lUyuOT5P","MainHeroSkillTypeItemRender");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{skillItemRenderPrefab:{default:null,type:cc.Prefab}},afterLoad:function(){this.layoutNode=cc.find("bgLayout",this.node),this.titleLabel=cc.find("label",this.node).getComponent(cc.Label),this.skillItemList=[]},initData:function(e,t){var a=i.templateManager.getHeroSkillByType(e,t);if(a&&0!==a.length){for(var n=0;n<this.skillItemList.length;n++)this.skillItemList[n].active=!1;var o=i.GameTextCode.HERO_SKILL_TYPE_VAN;t===i.constant.HERO_SKILL_TYPE_TALENT?o=i.GameTextCode.HERO_SKILL_TYPE_TALENT:t===i.constant.HERO_SKILL_TYPE_TOWER&&(o=i.GameTextCode.HERO_SKILL_TYPE_ENTER_TOWER),this.titleLabel.string=i.lang.getGameText(o);for(var s=0;s<a.length;s++){var r=a[s];s>=this.skillItemList.length&&(l=cc.instantiate(this.skillItemRenderPrefab),this.layoutNode.addChild(l),l.y=-15,this.skillItemList.push(l),l.getComponent("MainHeroSkillItemRender").host=this);var c=this.skillItemList[s];c.active=!0;var l=i.templateManager.getHeroStarSkill(e,r);if(!l)return void(this.node.active=!1);c.getComponent("MainHeroSkillItemRender").initData(e,l.star,r)}this.layoutNode.getComponent(cc.Layout).updateLayout(),this.node.width=this.layoutNode.width}else this.node.active=!1},updateSkillIcon:function(e){for(var t=0;t<this.skillItemList.length;t++)this.skillItemList[t].getComponent("MainHeroSkillItemRender").showSkillIcon(e)},onClick:function(){}}),cc._RF.pop()},{}],MainHeroWakePage:[function(e,t){"use strict";cc._RF.push(t,"8257aVe61xJyJ3Qurn3JPpR","MainHeroWakePage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{itemPrefab:{default:null,type:cc.Prefab}},onLoadPage:function(){this.titleBgNode=cc.find("content/titleBg",this.node),this.titleWakeNode=cc.find("content/title/title",this.node),this.titleStarNode=cc.find("content/title/titleStar",this.node),this.titleBreakNode=cc.find("content/title/titleBreak",this.node),this.heroSkillNode=cc.find("content/skillNode/heroWake",this.node),this.skillNameLabel=cc.find("skillName",this.heroSkillNode).getComponent(cc.Label),this.skillDescLabel=cc.find("skillDesc",this.heroSkillNode).getComponent(cc.Label),this.skillIconSprite=cc.find("skill/icon",this.heroSkillNode).getComponent(cc.Sprite),this.skillTypeLabel=cc.find("skill/angle/label",this.heroSkillNode).getComponent(cc.Label),this.towerSkillNode=cc.find("content/skillNode/towerWake",this.node),this.towerSkillNameLabel=cc.find("skillName",this.towerSkillNode).getComponent(cc.Label),this.towerSkillDescLabel=cc.find("skillDesc",this.towerSkillNode).getComponent(cc.Label),this.towerGuardPositionLayoutNode=cc.find("guardPositionLayout",this.towerSkillNode),this.towerPositionNode=cc.find("position",this.towerSkillNode),this.lowLevelNode=cc.find("content/towerLayout/lowLevel",this.node),this.highLevelNode=cc.find("content/towerLayout/highLevel",this.node);var e=cc.instantiate(this.itemPrefab);this.lowLevelItemObj=e.getComponent("CommonCardItemRender"),this.lowLevelNode.addChild(e),e=cc.instantiate(this.itemPrefab),this.highLevelItemObj=e.getComponent("CommonCardItemRender"),this.highLevelNode.addChild(e),this.buttonNode=cc.find("content/buttonLayout/button",this.node),this.buttonLayoutNode=cc.find("content/buttonLayout",this.node),this.buttonNodeWidget=this.buttonLayoutNode.getComponent(cc.Widget),this.shareButtonNode=cc.find("content/buttonLayout/shareButton",this.node),this.ani=this.node.getComponent("cc.Animation"),this.ani.on("finished",this.showAniOver,this)},showPageBegan:function(){var e,t,a,n,o,s,r;this.skillIconSprite.node.active=!1,this.ani.stop(),this.ani.setCurrentTime(0),this.ani.play("heroWakePage"),this._type=this.data.type,this._heroId=this.data.heroId,this._towerId=this.data.towerId,this._callBack=this.data.callBack,this.titleWakeNode.active=!1,this.titleStarNode.active=!1,this.titleBreakNode.active=!1,this.heroSkillNode.active=!1,this.towerSkillNode.active=!1,this.titleBgNode.active=!0,this.buttonLayoutNode.active=!1,this._type===i.constant.MAIN_COMMON_CARD_TYPE_HERO_STAR?(this.titleStarNode.active=!0,t=i.player.heroModule.getHeroLevel(this._heroId),e=i.player.heroModule.getHeroStarLevel(this._heroId),this.lowLevelItemObj.initData(this._type,this._heroId,e-1,t),this.highLevelItemObj.initData(this._type,this._heroId,e,t+1)):this._type===i.constant.MAIN_COMMON_CARD_TYPE_HERO_BREAK?(this.titleBreakNode.active=!0,o=i.player.heroModule.getHeroLevel(this._heroId),this.lowLevelItemObj.initData(this._type,this._heroId,o-1),this.highLevelItemObj.initData(this._type,this._heroId,o)):this._type===i.constant.MAIN_COMMON_CARD_TYPE_HERO_WAKE?(this.titleWakeNode.active=!0,this.heroSkillNode.active=!0,t=i.player.heroModule.getHeroQuality(this._heroId),o=i.templateManager.getHeroStarDataByHeroStar(this._heroId,t),r=i.templateManager.getHeroSkillDataById(o.starSkill[0]),this.skillNameLabel.string=i.lang.getGameText(r.name),this.skillDescLabel.string=i.lang.getGameText(r.desc),a=r.icon.split("/")[1],n=this,o=i.player.commonModule.isLowIosDevice()?"textures/skill/skill_small":"textures/skill/skill",this.skillAtlas?(n.skillIconSprite.node.active=!0,n.skillIconSprite.spriteFrame=n.skillAtlas.getSpriteFrame(a)):cc.loader.loadRes(o,cc.SpriteAtlas,function(e,t){e?cc.error(e):(n.skillAtlas=t,n.skillIconSprite.node.active=!0,n.skillIconSprite.spriteFrame=n.skillAtlas.getSpriteFrame(a))}),this.lowLevelItemObj.initData(this._type,this._heroId,t-1),this.highLevelItemObj.initData(this._type,this._heroId,t),this.skillTypeLabel.string=i.lang.getGameText(r.characterCorner)):this._type===i.constant.MAIN_COMMON_CARD_TYPE_TOWER_LEVEL?(this.titleBgNode.active=!1,this.titleBreakNode.active=!0,s=i.player.towerModule.getTowerLevel(this._towerId),this.lowLevelItemObj.initData(this._type,this._towerId,0<s-1?s-1:s),this.highLevelItemObj.initData(this._type,this._towerId,s)):this._type===i.constant.MAIN_COMMON_CARD_TYPE_TOWER_QUALITY&&(this.towerSkillNode.active=!0,this.titleBgNode.active=!1,this.titleWakeNode.active=!0,r=i.player.towerModule.getTowerQuality(this._towerId),this.lowLevelItemObj.initData(this._type,this._towerId,0<r-1?r-1:r),this.highLevelItemObj.initData(this._type,this._towerId,r),s=i.templateManager.getTowerQualityDataByLevel(this._towerId,r),r=i.templateManager.getNatureDataById(s.attrType),this.towerSkillNameLabel.string=i.lang.getGameText(r.name),this.towerSkillDescLabel.string=i.lang.getArgGameText(r.desc,[s.attrValue[1]/100+"%"]),this.towerGuardPositionLayoutNode.active=s.heroGrid,this.towerPositionNode.active=s.heroGrid)},showAniOver:function(){this.buttonLayoutNode.active=!0,this.heroSkillNode.active||this.towerSkillNode.active?this.buttonNodeWidget.bottom=88:this.buttonNodeWidget.bottom=245,this.buttonNodeWidget.updateAlignment()},onClickClose:function(){this._callBack&&this._callBack(),this.closePage()},showPageEnded:function(){},closePageEnded:function(){this.skillAtlas&&i.player.commonModule.isLowIosDevice()&&!i.gameScene.pageIsOpened(i.pageConstant.PAGE_TYPE_MAIN_HERO_DETAIL)&&(cc.loader.release(cc.loader.getDependsRecursively(this.skillAtlas)),this.skillAtlas=null)},onClickShare:function(){i.Logger.debug("onClickShare hero"),this._type===i.constant.MAIN_COMMON_CARD_TYPE_TOWER_QUALITY||this._type===i.constant.MAIN_COMMON_CARD_TYPE_TOWER_LEVEL?i.player.commonModule.addShareStartCount(i.constant.SHARE_TYPE_TOWER):i.player.commonModule.addShareStartCount(i.constant.SHARE_TYPE_HERO),i.ttAdManager.wxShare()}}),cc._RF.pop()},{}],MainInstanceItemRender:[function(e,t){"use strict";cc._RF.push(t,"42010msLDhKFoxV6OMeRBFw","MainInstanceItemRender");var i=e("Aft");cc.Class({extends:cc.Component,properties:{commonAtlas:{default:null,type:cc.SpriteAtlas}},onLoad:function(){this.currentNode=cc.find("current",this.node),this.currentNumLabel=cc.find("flag/number",this.currentNode).getComponent(cc.Label),this.passedNode=cc.find("passed",this.node),this.passNumLabel=cc.find("number",this.passedNode).getComponent(cc.Label),this.starNodeList=[],this.starNodeList.push(cc.find("passed/starLayout/starGray1/star1",this.node)),this.starNodeList.push(cc.find("passed/starLayout/starGray2/star2",this.node)),this.starNodeList.push(cc.find("passed/starLayout/starGray3/star3",this.node)),this.checkKnifeAni=cc.find("current/check_knife",this.node).getComponent(cc.Animation),this.flagAni=cc.find("current/flag",this.node).getComponent(cc.Animation),this.rewardTipNode=cc.find("current/levelRewardTips",this.node),this.rewardTipSprice=cc.find("current/levelRewardTips/piece",this.node).getComponent(cc.Sprite),this.bossLevelNode=cc.find("bossLevel",this.node)},getGuideNode:function(){return this.currentNode},initData:function(e,t,a,n){this.node.scale=0,this.node.opacity=255,this._id=t,this._chanpterId=e,this.canEnter=!1,this.currentNumLabel.string=this._id,this.passNumLabel.string=this._id;var o=i.player.instanceModule.getInstanceStarById(this._chanpterId,this._id);e=i.templateManager.getInstanceListByChapterId(this._chanpterId),this.instanceData=e[this._id-1],this.enemyList=i.templateManager.getInstanceEnemyListById(this.instanceData.id),this.isBossLevel=!1;for(var s,r,c,l=0;l<this.enemyList.length;l++){var d=this.enemyList[l];if(i.templateManager.getEnemyDataById(d).type==i.constant.ENEMY_TYPE_BOSS){this.isBossLevel=!0;break}}this.bossLevelNode.active=this.isBossLevel,this.node.stopAllActions(),a?(this.node.scale=1,this.currentNode.active=!0,this.passedNode.active=!1,this.canEnter=!0,this.checkKnifeAni.node.active=!1,this.flagAni.play("flag"),s=cc.delayTime(.5),r=cc.callFunc(function(){this.checkKnifeAni.node.active=!0,this.checkKnifeAni.play("check_knife")},this),c=cc.sequence(s,r),this.flagAni.node.runAction(c),a=i.player.instanceModule.getMaxChapter(),this.instanceRewardData=i.templateManager.getNextInstancePiece(a,i.player.instanceModule.getChapterMaxLevel(a)),this._chanpterId===a&&this.instanceRewardData&&this.instanceRewardData[0]===t?(this.rewardTipNode.active=!0,this.rewardTipNode.x=40,this.rewardTipNode.y=15,this.rewardTipNode.angle=0,t=i.templateManager.getHeroCardDataById(this.instanceRewardData[1]),this.rewardTipSprice.spriteFrame=this.commonAtlas.getSpriteFrame(t.icon),this.rewardTipSprice.node.angle=0,this.rewardNodeAction()):this.rewardTipNode.active=!1):n?(this.node.scale=1,this.currentNode.active=!0,this.passedNode.active=!1,this.canEnter=!1,this.checkKnifeAni.node.active=!1,this.rewardTipNode.active=!1,s=cc.delayTime(.5),r=cc.callFunc(function(){this.rewardTipNode.active=!0,this.rewardTipNode.x=0,this.rewardTipNode.y=48,this.rewardTipNode.angle=90;var e=i.templateManager.getHeroCardDataById(n);this.rewardTipSprice.spriteFrame=this.commonAtlas.getSpriteFrame(e.icon),this.rewardTipSprice.node.angle=-90,this.rewardNodeAction()},this),c=cc.sequence(s,r),this.flagAni.node.runAction(c),this.rewardTioNodeAction()):0<o?(this.currentNode.active=!1,this.passedNode.active=!0,this.updateStarNode(o),this.canEnter=!0,this.runOutEffect()):(this.currentNode.active=!1,this.passedNode.active=!1)},rewardTioNodeAction:function(){this.node.stopAllActions(),this.node.opacity=255;var e=cc.spawn(cc.fadeTo(.5,80),cc.scaleTo(.5,1)),t=cc.spawn(cc.fadeTo(.5,200),cc.scaleTo(.5,1.1)),a=cc.delayTime(.5),n=cc.delayTime(i.templateManager.getGameParamValue("goalDistance")[2]);t=cc.sequence(e,t,a),a=cc.callFunc(function(){this.node.opacity=0},this),n=cc.sequence(t,t,t,a,n),n=cc.repeatForever(n),this.node.runAction(n)},rewardNodeAction:function(){this.rewardTipSprice.node.stopAllActions();var e=cc.callFunc(function(){this.rewardTipSprice.node.scale=1.2},this),t=cc.callFunc(function(){this.rewardTipSprice.node.scale=1},this),i=cc.rotateBy(.1,10),a=cc.rotateBy(.1,-20),n=cc.rotateBy(.1,20),o=cc.rotateBy(.1,-20),s=cc.rotateBy(.1,20),r=cc.rotateBy(.1,-20),c=cc.rotateBy(.1,10),l=cc.delayTime(.2);t=cc.sequence(l,e,i,a,n,o,s,r,c,t),t=cc.repeatForever(t),this.rewardTipSprice.node.runAction(t)},runOutEffect:function(){var e=cc.scaleTo(.2,1.1),t=cc.scaleTo(.1,1),i=cc.callFunc(function(){},this);i=cc.sequence(e,t,i),this.node.stopAllActions(),this.node.runAction(i)},updateStarNode:function(e){for(var t=0;t<this.starNodeList.length;t++)this.starNodeList[t].active=t+1<=e},onClickEnter:function(){var e;this.canEnter&&(3===this._id&&i.gameScene.removeBubble(i.constant.GUIDE_TYPE_UPGRADE_TOWER_2_5),(e=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_CHILD))&&e.hideClickInstanceBubble(),this.isShowFlight=0<this.instanceData.isShowFlight,this.isShowFlight?i.gameScene.showPage(i.pageConstant.PAGE_TYPE_ENTER_BATTLE_TIP,{chapterId:this._chanpterId,instanceId:this._id}):(e=i.templateManager.getGameParamValue("powerInstanceNum"),i.player.playerModule.isPowerEnough(e)?(i.soundsUtil.playSoundEffect("common_button_click"),i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_TOWER)&&i.player.towerModule.getHaveCanChooseTowerHero()?i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_HERO_CONFIRM_PAGE,{chapter:this._chanpterId,instance:this._id,power:e}):(i.player.playerModule.costPowerNum(e),i.gameScene.mainPage.goToInstance(this._chanpterId,this._id,this.node,!0))):i.player.commonModule.getPowerBuyIsMax()?(e=i.lang.getGameText(i.GameTextCode.POWER_NOT_ENOUGH),i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,e)):i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_POWER)))},update:function(){}}),cc._RF.pop()},{}],MainPage:[function(e,t){"use strict";cc._RF.push(t,"b6d6b+WpHhLBpTMptWQPBRH","MainPage");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{mainAtlas:{default:null,type:cc.SpriteAtlas},iconAtlas:{default:null,type:cc.SpriteAtlas},vipAtlas:{default:null,type:cc.SpriteAtlas}},afterLoad:function(){this.checkFunctionNode=cc.find("checkFunction",this.node),this.mainPageTopNode=cc.find("top",this.node),this.roleParentNode=cc.find("roleParent",this.mainPageTopNode),this.roleNode=cc.find("top/roleParent/role",this.node),this.levelLabel=cc.find("Background/role/level/label",this.roleNode).getComponent(cc.Label),this.expProgressBar=cc.find("Background/role/progressBar",this.roleNode).getComponent(cc.ProgressBar),this.roleIcon=cc.find("Background/role/roleHead",this.roleNode).getComponent(cc.Sprite),this.roleIconBgNode=cc.find("Background/role/bg",this.roleNode),this.roleNameLabel=cc.find("Background/officialPosition/label",this.roleNode).getComponent(cc.Label),this.bottomNode=cc.find("bottom",this.node),this.bottomLayoutNode=cc.find("bottom/functionLayout",this.node),this.shopIconNode=cc.find("shopButton/background/infoLayout/icon",this.bottomLayoutNode),this.shopIconSprite=this.shopIconNode.getComponent(cc.Sprite),this.shopButtonChooseNode=cc.find("shopButton/background/choose",this.bottomLayoutNode),this.shopButtonChooseNode.active=!1,this.shopBtnNameNode=cc.find("shopButton/background/infoLayout/name",this.bottomLayoutNode),this.shopBtnNameNode.active=!1,this.shopBtnRedNode=cc.find("shopButton/background/redPoint",this.bottomLayoutNode),this.shopBtnRedNode.active=!1,this.heroIconNode=cc.find("heroButton/background/infoLayout/icon",this.bottomLayoutNode),this.heroIconSprite=this.heroIconNode.getComponent(cc.Sprite),this.heroButtonChooseNode=cc.find("heroButton/background/choose",this.bottomLayoutNode),this.heroButtonChooseNode.active=!1,this.heroBtnNameNode=cc.find("heroButton/background/infoLayout/name",this.bottomLayoutNode),this.heroBtnNameNode.active=!1,this.heroBtnRedNode=cc.find("heroButton/background/redPoint",this.bottomLayoutNode),this.heroBtnRedNode.active=!1,this.heroBtnNewNode=cc.find("heroButton/background/newPoint",this.bottomLayoutNode),this.heroBtnNewNode.active=!1,this.towerIconNode=cc.find("defensiveTowerButton/background/infoLayout/icon",this.bottomLayoutNode),this.towerIconSprite=this.towerIconNode.getComponent(cc.Sprite),this.towerButtonChooseNode=cc.find("defensiveTowerButton/background/choose",this.bottomLayoutNode),this.towerButtonChooseNode.active=!1,this.towerBtnNameNode=cc.find("defensiveTowerButton/background/infoLayout/name",this.bottomLayoutNode),this.towerBtnNameNode.active=!1,this.towerBtnRedNode=cc.find("defensiveTowerButton/background/redPoint",this.bottomLayoutNode),this.towerBtnRedNode.active=!1,this.towerBtnNewNode=cc.find("defensiveTowerButton/background/newPoint",this.bottomLayoutNode),this.towerBtnNewNode.active=!1,this.battleButtonIconNode=cc.find("battleButton/background/infoLayout/icon",this.bottomLayoutNode),this.battleButtonChooseNode=cc.find("battleButton/background/choose",this.bottomLayoutNode),this.battleButtonChooseNode.active=!1,this.battleBtnNameNode=cc.find("battleButton/background/infoLayout/name",this.bottomLayoutNode),this.battleBtnNameNode.active=!1,this.battleBtnRedNode=cc.find("battleButton/background/redPoint",this.bottomLayoutNode),this.battleBtnRedNode.active=!1,this.worldButtonIconNode=cc.find("worldButton/background/infoLayout/icon",this.bottomLayoutNode),this.worldButtonIconSprite=this.worldButtonIconNode.getComponent(cc.Sprite),this.worldButtonChooseNode=cc.find("worldButton/background/choose",this.bottomLayoutNode),this.worldButtonChooseNode.active=!1,this.wroldBtnNameNode=cc.find("worldButton/background/infoLayout/name",this.bottomLayoutNode),this.wroldBtnNameNode.active=!1,this.worldBtnRedNode=cc.find("worldButton/background/redPoint",this.bottomLayoutNode),this.worldBtnRedNode.active=!1,this.skillButtonIconNode=cc.find("skillButton/background/infoLayout/icon",this.bottomLayoutNode),this.skillButtonIconSprite=this.skillButtonIconNode.getComponent(cc.Sprite),this.skillButtonChooseNode=cc.find("skillButton/background/choose",this.bottomLayoutNode),this.skillButtonChooseNode.active=!1,this.skillBtnNameNode=cc.find("skillButton/background/infoLayout/name",this.bottomLayoutNode),this.skillBtnNameNode.active=!1,this.skillBtnRedNode=cc.find("skillButton/background/redPoint",this.bottomLayoutNode),this.skillBtnRedNode.active=!1,this.skillBtnNewNode=cc.find("skillButton/background/newPoint",this.bottomLayoutNode),this.skillBtnNewNode.active=!1,this.powerTipNode=cc.find("powerTip",this.node),this.powerTipLayoutNode=cc.find("tip",this.powerTipNode),this.powerTipNumLabel=cc.find("num",this.powerTipLayoutNode).getComponent(cc.Label),this.powerTipNode.active=!1,this.funcOpenNode=cc.find("funcOpen",this.node),this.funcOpenEffect=cc.find("effect_icon_light",this.funcOpenNode).getComponent(cc.Animation),this.funcOpenIconSprite=cc.find("icon",this.funcOpenNode).getComponent(cc.Sprite),this.funcOpenNode.active=!1,this.clickMainHeroRed=!0,this.clickMainTowerRed=!0,this.clickMainSkillRed=!0,this.clickMainWorldRed=!0,i.gameScene.isIphoneX()&&i.Utils.addNodeTopSpace(this.mainPageTopNode),i.gameScene.isIphoneXBottom()&&(this.bottomNode.height=160),this.intoTimes=0},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.UPDATE_PLAYER_ROLE_INFO,function(){return e.updateRoleInfo()}),this.registerListener(i.GameEventType.SET_UPDATE_LANGUAGE,function(){return e.updateLabel()}),this.registerListener(i.GameEventType.FUNCTION_UNLOCK_EVENT,function(){return e.checkFunctionUnlock()}),this.registerListener(i.GameEventType.UPDATE_HERO_MAIN_RED,function(){e.curPageTagIndex!=i.constant.MAIN_PAGE_TAG_HERO&&(e.clickMainHeroRed=!0),e.updateMainHeroRed(),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_HERO_TAG_RED)}),this.registerListener(i.GameEventType.CHECK_MAIN_CHILD_RED,function(){return e.updateMainChildRed()}),this.registerListener(i.GameEventType.CHECK_MAIN_TOWER_RED,function(){e.curPageTagIndex!=i.constant.MAIN_PAGE_TAG_TOWER&&(e.clickMainTowerRed=!0),e.updateMainTowerRed()}),this.registerListener(i.GameEventType.CHECK_MAIN_WORLD_RED,function(){e.updateMainWorldRed()}),this.registerListener(i.GameEventType.UPDATE_ROLE_ICON,function(){return e.updateRoleInfo()}),this.registerListener(i.GameEventType.UPDATE_SKILL_RED_TIP,function(){e.curPageTagIndex!=i.constant.MAIN_PAGE_TAG_SKILL&&(e.clickMainSkillRed=!0),e.updateMainSkillRed()}),this.checkCanReceiveFreePower()},initData:function(e){this.intoTimes+=1,this.roleNode.scale=1,this.updateRoleInfo(),this.updateAllRed(),this.curPageTagIndex=0,this.checkGetHeroGuideTime=.2,e?(this.curPageTagIndex=i.constant.MAIN_PAGE_TAG_CHILD,this.changeMainPageTag(e)):this.changeMainPageTag(i.constant.MAIN_PAGE_TAG_CHILD),this.childPageObj||(this.childPageObj=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_CHILD)),!this.initChildDone&&this.childPageObj?(this.initChildDone=!0,this.registerAllFuncData(),this.checkFunctionUnlock(!0)):i.player.functionModule.checkOpenFunctionPage()||(this.needCheckFunctionGuideCount=2)},nodeToScreenOut:function(){var e=i.gameScene.isIphoneX()?i.Utils.getTopFixSize():0;this.roleNode.y=this.roleNode.height+e+10},nodeHoming:function(e){var t;e?(this.roleNode.stopAllActions(),this.roleNode.position=cc.v2(0,0)):(t=cc.moveTo(.3,cc.v2(0,0)),e=cc.callFunc(function(){},this),e=cc.sequence(t,e),this.roleNode.stopAllActions(),this.roleNode.runAction(e))},checkFunctionUnlockGuide:function(){i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_UNLOCK_TASK)?i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_UNLOCK_TASK_1,this.childPageObj.taskButtonNode):i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_VIP_OPEN)&&i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_VIP_OPEN_1,this.childPageObj.vipButtonNode)},checkFunctionGuide:function(){var e;i.gameScene.pageIsOpened(i.pageConstant.PAGE_TYPE_MAIN_PLAYER_OFFICIAL)||(i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_UPGRADE_TOWER_1)?i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_UPGRADE_TOWER_1_1,this.towerIconNode):i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_UPGRADE_TOWER_2)?(i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_UPGRADE_TOWER_2_1,this.towerIconNode),(e=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_CHILD))&&e.showRewardTip(!1)):i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_UNLOCK_MAP)?i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_UNLOCK_MAP_1,this.worldButtonIconNode):i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_OPEN_BOX)?i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_OPEN_BOX_1,this.childPageObj.box1Node):i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_GET_HERO_1)?i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_GET_HERO_1_1,this.heroIconNode):i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_2)?i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_2_1,this.towerIconNode):i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_3)?i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_3_1,this.towerIconNode):i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_4)?i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_4_1,this.towerIconNode):i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_RESTRAIN_OPEN)?i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_RESTRAIN_OPEN_1,this.heroIconNode):i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_SKILL_UPGRADE)?i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_SKILL_UPGRADE_1,this.skillButtonIconNode):i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_RESTRAIN_UNLOCK)?i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_RESTRAIN_UNLOCK_1,this.heroIconNode):0<=this.getShowClickBubbleIndex()&&i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_CHILD).showClickInstanceBubble(this.getShowClickBubbleIndex()),this.checkCachePage())},getShowClickBubbleIndex:function(){var e=i.player.instanceModule.getMaxChapter(),t=i.player.instanceModule.getChapterMaxLevel(e),a=i.templateManager.getGameParamValue("instancePointTipsNum");return 1===e&&t>=a[0]-1&&t<=a[1]-1?t:-1},checkGetHeroGuide:function(e){0<this.checkGetHeroGuideTime?this.checkGetHeroGuideTime-=e:(this.checkGetHeroGuideTime=.2,0<i.gameScene.getOpenedPageCount()||i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_UNLOCK_MAP)||(this.heroBtnNewNode.active&&i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_GET_HERO_2)?i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_GET_HERO_2_1,this.heroIconNode):i.guideManager.isNeedGuideOtherType(i.constant.GUIDE_TYPE_SKILL_UNLOCK)&&i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_SKILL_UNLOCK_1,this.skillButtonIconNode)))},updateRoleInfo:function(){this.levelLabel.string=i.player.playerModule.getPlayerLevel(),this.expProgressBar.progress=i.player.playerModule.getPlayerExpRatio(),this.roleNameLabel.string=i.player.playerModule.getPlayerTitle();var e,t,a=i.templateManager.getHeroDataById(i.player.playerModule.getIcon());a&&(e=this.iconAtlas.getSpriteFrame(a.heroHead),t=this.roleIconBgNode.height,a=e.getOriginalSize().height,this.roleIcon.spriteFrame=e,this.roleIcon.node.y=a<=t?0:(a-t)/2+5)},updateLabel:function(){this.heroBtnNameNode.getComponent("LocalizedLabel").updateLabel(),this.shopBtnNameNode.getComponent("LocalizedLabel").updateLabel()},goToInstance:function(e,t,a,n){if(i.gameScene.readyGoToInstance=!0,!n)return i.gameScene.gotoBattleScene(e,t),void(i.gameScene.readyGoToInstance=!1);this.powerTipNode.active=!0;var o=a.convertToWorldSpaceAR(cc.v2(0,a.height/2));(r=this.powerTipNode.convertToNodeSpaceAR(o)).y+=20,this.powerTipLayoutNode.position=r,this.powerTipLayoutNode.opacity=255,this.powerTipLayoutNode.scale=0;var s=cc.scaleTo(2/30,2),r=(n=cc.scaleTo(4/30,1),a=cc.scaleTo(.4,1),o=cc.sequence(s,n,a),cc.moveBy(.3,cc.v2(0,40)));s=cc.delayTime(10/30),n=cc.fadeOut(8/30),a=cc.callFunc(function(){i.gameScene.gotoBattleScene(e,t),this.powerTipNode.active=!1,i.gameScene.readyGoToInstance=!1},this),a=cc.sequence(s,n,a),a=cc.spawn(o,r,a),this.powerTipLayoutNode.runAction(a)},updateAllRed:function(){this.updateMainChildRed(),this.updateMainTowerRed(),this.updateMainHeroRed(),this.updateMainSkillRed(),this.updateMainWorldRed()},updateMainChildRed:function(){i.player.instanceModule.checkCanRewardNum()||i.player.taskModule.getTaskRed()?(this.battleBtnRedNode.active=!0,i.gameScene.redNodeAction(this.battleBtnRedNode)):this.battleBtnRedNode.active=!1},updateMainTowerRed:function(){i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_TOWER)&&(i.player.towerModule.getHaveNewTower()?(this.towerBtnNewNode.active=!0,this.towerBtnRedNode.active=!1,i.gameScene.redNodeAction(this.towerBtnNewNode)):(this.towerBtnNewNode.active=!1,this.clickMainTowerRed&&i.player.towerModule.checkTowerRed()?(this.towerBtnRedNode.active=!0,i.gameScene.redNodeAction(this.towerBtnRedNode)):this.towerBtnRedNode.active=!1))},updateMainSkillRed:function(){i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_SKILL)&&(i.player.skillModule.getRedTipsType()===i.constant.SKILL_RED_TIP_TYPE_NONE?(this.skillBtnRedNode.active=!1,this.skillBtnNewNode.active=!1):i.player.skillModule.getRedTipsType()===i.constant.SKILL_RED_TIP_TYPE_NEW?(this.skillBtnRedNode.active=!1,this.skillBtnNewNode.active=!0,i.gameScene.redNodeAction(this.skillBtnNewNode)):i.player.skillModule.getRedTipsType()===i.constant.SKILL_RED_TIP_TYPE_NORMAL&&(this.skillBtnNewNode.active=!1,this.clickMainSkillRed?(this.skillBtnRedNode.active=!0,i.gameScene.redNodeAction(this.skillBtnRedNode)):this.skillBtnRedNode.active=!1))},updateMainWorldRed:function(){i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_WORLD)&&(i.player.instanceModule.checkHaveCanRewardBox(),i.player.instanceModule.getChapterHaveCanDefend()&&this.clickMainWorldRed||i.player.instanceModule.checkHaveCanRewardBox()||i.player.instanceModule.getHaveCanReceiveDefend()?(this.worldBtnRedNode.active=!0,i.gameScene.redNodeAction(this.worldBtnRedNode)):this.worldBtnRedNode.active=!1)},updateMainHeroRed:function(){i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_HERO)&&(i.player.heroModule.checkAllCanUnlockRed()?(this.heroBtnNewNode.active=!0,this.heroBtnRedNode.active=!1,i.gameScene.redNodeAction(this.heroBtnNewNode)):(this.heroBtnNewNode.active=!1,this.clickMainHeroRed&&(i.player.heroModule.checkAllOtherRed()||(i.player.heroModule.haveCanLevelUpGayFriend()||!i.player.heroModule.getTodayIntoGayFriend())&&i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_RESTRAIN))?(this.heroBtnRedNode.active=!0,i.gameScene.redNodeAction(this.heroBtnRedNode)):this.heroBtnRedNode.active=!1))},registerAllFuncData:function(){this.funcMap={},this.registerFuncData(i.constant.MAIN_FUNCTION_SHOP,[this.shopIconSprite],null,null,this.shopIconNode),this.registerFuncData(i.constant.MAIN_FUNCTION_WORLD,[this.worldButtonIconSprite],null,null,this.worldButtonIconNode),this.registerFuncData(i.constant.MAIN_FUNCTION_HERO,[this.heroIconSprite],null,null,this.heroIconNode),this.registerFuncData(i.constant.MAIN_FUNCTION_TOWER,[this.towerIconSprite],null,null,this.towerIconNode),this.registerFuncData(i.constant.MAIN_FUNCTION_TASK,null,null,this.childPageObj.taskButtonNode,this.childPageObj.taskButtonNode),this.registerFuncData(i.constant.MAIN_FUNCTION_RANK,null,null,this.childPageObj.rankButtonNode,this.childPageObj.moreButtonNode),this.registerFuncData(i.constant.MAIN_FUNCTION_SIGN,null,null,this.childPageObj.signButtonNode,this.childPageObj.signButtonNode),this.registerFuncData(i.constant.MAIN_FUNCTION_QUICKLY_BATTLE,null,null,this.childPageObj.quicklyBattleNode,this.childPageObj.quicklyBattleNode),this.registerFuncData(i.constant.MAIN_FUNCTION_VIP,null,null,this.childPageObj.vipButtonNode,this.childPageObj.vipButtonNode),this.registerFuncData(i.constant.MAIN_FUNCTION_PIGGY_BANK,null,null,this.childPageObj.piggyBankNode,this.childPageObj.piggyBankNode),this.registerFuncData(i.constant.MAIN_FUNCTION_SKILL,[this.skillButtonIconSprite],null,null,this.skillButtonIconNode),this.registerFuncData(i.constant.MAIN_FUNCTION_RESTRAIN,null,null,null,this.heroIconNode),this.registerFuncData(i.constant.MAIN_FUNCTION_PIECE_CHANGE,null,null,null,this.heroIconNode),this.registerFuncData(i.constant.MAIN_FUNCTION_NEW_YEAR_ACTIVITY,null,null,this.childPageObj.newYearActivityNode,null),this.registerFuncData(i.constant.MAIN_FUNCTION_ALLIANCE,null,null,this.childPageObj.allianceBtnNode,this.childPageObj.allianceBtnNode)},registerFuncData:function(e,t,i,a,n){this.funcMap[e]={greySprites:t,lockedNode:i,openedNode:a,targetNode:n}},checkFunctionUnlock:function(e){i.Logger.debug("==checkFunctionUnlock=="+e);for(var t=i.JsonData.Function,a=0;a<t.length;a++){var n=t[a];this.checkFunctionState(n.id,e)}this.node.active&&(i.player.functionModule.checkOpenFunctionPage(),this.needCheckFunctionGuideCount=2)},checkFunctionState:function(e,t){if(this.funcMap){var a=this.funcMap[e];if(a){var n=i.templateManager.getFunctionDataById(e),o=i.player.functionModule.isFuncOpened(e,!0);if(t||0===n.isShow){if(a.openedNode&&(e===i.constant.MAIN_FUNCTION_NEW_YEAR_ACTIVITY?(a.openedNode.active=i.player.newYearModule.isActiveOpen(),i.eventBus.dispatchEvent(i.GameEventType.NEW_YEAR_ACTIVITY_REFRESH)):a.openedNode.active=o),a.lockedNode)for(var s=0;s<a.lockedNode.length;s++)a.lockedNode[s].active=!o;if(a.greySprites)for(var r=0;r<a.greySprites.length;r++){var c=a.greySprites[r];o?c.setMaterial(0,cc.MaterialVariant.createWithBuiltin("2d-sprite",n.openedSprite)):c.setMaterial(0,cc.MaterialVariant.createWithBuiltin("2d-gray-sprite",n.openedSprite))}a.targetNode&&(a.targetNode.opacity=255),this.updatePageLayout()}1===n.isShow&&o&&!i.player.functionModule.checkIsFunctionGuide(e)&&(i.Logger.debug("putCacheFuncData: "+e),i.player.functionModule.pushCacheFunction(e))}else i.Logger.debug("checkFunctionState not found funcMapData !!!!!!!!!!"+e)}else i.Logger.debug("checkFunctionState funcMap is not init !!!!!!!!"+e)},updatePageLayout:function(){},delayCheckFunctionOpen:function(){var e=cc.delayTime(.5),t=cc.callFunc(function(){i.player.functionModule.checkOpenFunctionPage()},this);t=cc.sequence(e,t),this.checkFunctionNode.runAction(t)},playFuncOpenMoveAction:function(e){var t,a,n,o;this.funcMap?(a=this.funcMap[e])?1===(n=i.templateManager.getFunctionDataById(e)).isFly&&(this.isFuncFlying=!0,i.gameScene.showGuideLimit(),a.openedNode&&a.targetNode&&a.openedNode==a.targetNode&&(a.targetNode.active=!0,a.targetNode.opacity=1,this.updatePageLayout()),o=n.icon,e==i.constant.MAIN_FUNCTION_VIP?this.funcOpenIconSprite.spriteFrame=this.vipAtlas.getSpriteFrame(o):this.funcOpenIconSprite.spriteFrame=this.mainAtlas.getSpriteFrame(o),n=(t=a.targetNode).parent.convertToWorldSpaceAR(t.position),o=this.node.convertToNodeSpaceAR(n),this.funcOpenNode.stopAllActions(),this.funcOpenNode.active=!0,this.funcOpenEffect.node.active=!0,this.funcOpenEffect.play("effect_box_light"),this.funcOpenNode.position=cc.v2(0,0),this.funcOpenNode.scale=1,a=cc.delayTime(1),n=cc.moveTo(.5,o),o=cc.callFunc(function(){this.funcOpenNode.active=!1,this.funcOpenEffect.node.active=!1,this.checkFunctionState(e,!0),i.Logger.debug("mainPage hideGuideLimit 533"),i.gameScene.checkGuideLimitHide(),this.isFuncFlying=!1,this.checkFunctionUnlockGuide(),this.checkFunctionGuide(),i.player.functionModule.checkOpenFunctionPage();var a=cc.delayTime(.1),n=cc.scaleTo(.08,1.8,1.8),o=cc.scaleTo(.15,1,1);o=cc.sequence(a,n,o),t.stopAllActions(),t.runAction(o),i.constant.MAIN_FUNCTION_PIGGY_BANK},this),o=cc.sequence(a,n,o),this.funcOpenNode.stopAllActions(),this.funcOpenNode.runAction(o)):i.Logger.debug("playFuncOpenMoveAction not found funcMapData !!!!!!!!!!"):i.Logger.debug("playFuncOpenMoveAction funcMap is not init !!!!!!!!")},cleanMainRes:function(){i.Logger.debug("cleanMainRes");var e=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_CHILD);if(e&&e.intoBattleStopHangUp(),i.player.commonModule.isLowIosDevice()&&i.mainScene.cleanMainHeroSpine(),i.constant.IS_RELEASE_CHAPTER_BG&&i.player.commonModule.isLowIosDevice()&&e&&e.cleanChapterAtlas(),i.constant.IS_RELEASE_CHAPTER_BG&&i.player.commonModule.isLowIosDevice()&&i.chapterAtlasMap){for(var t in i.chapterAtlasMap)t=i.chapterAtlasMap[t],cc.loader.release(cc.loader.getDependsRecursively(t));i.chapterAtlasMap=null,i.Logger.debug("mainPage cleanMainRes aft.chapterAtlasMap = null")}},onLoadRes:function(){this.isLoadChapterAtlasOver=!0,this.chapterAtlasIndex=0;var e=i.player.instanceModule.getCurChapter();i.Logger.debug("curChapterId = "+(e=e<=0?1:e)+" aft.chapterAtlasMap = "+i.chapterAtlasMap),this.chapterCfg=i.templateManager.getChapterDataById(e),i.player.instanceModule.isPassInstance(1,2)||!this.chapterCfg||i.chapterAtlasMap?(this.isLoadChapterAtlasOver=!0,i.gameScene.isNeedUpdateChapterBg=!0,this.checkMainResLoadOver(100)):(this.isLoadChapterAtlasOver=!1,i.chapterAtlasMap={},this.loadChapterAtlas())},loadChapterAtlas:function(){if(this.chapterAtlasIndex>=this.chapterCfg.bg.length)return i.Logger.debug("\u5df2\u7ecf\u662f\u6700\u540e\u4e00\u4e2a\u56fe\u96c6\u4e86"),this.isLoadChapterAtlasOver=!0,i.gameScene.isNeedUpdateChapterBg=!0,void this.checkMainResLoadOver(100);var e=this.chapterCfg.bg[this.chapterAtlasIndex].split("/"),t=e[0],a=(e[1],"textures/chapter/"+t);i.Logger.debug("mainPage loadRes start mapImgResPath = "+a);var n=this;cc.loader.loadRes(a,cc.SpriteAtlas,function(e,o){return e?cc.error(e):(i.Logger.debug("mainPage loadRes success mapImgResPath: "+a),i.chapterAtlasMap||(i.chapterAtlasMap={}),i.chapterAtlasMap[t]=o,n.chapterAtlasIndex+=1),void n.loadChapterAtlas()})},checkMainResLoadOver:function(e){i.battleScene.addLoadingPercent(e),i.gameScene.gameState==i.constant.GAME_STATE_MAIN&&this.isLoadChapterAtlasOver&&i.gameScene.hideLoading()},onClickRole:function(){i.gameScene.showPage(i.pageConstant.PAGE_TYPE_ROLE_INFO)},onClickBattle:function(){this.changeMainPageTag(i.constant.MAIN_PAGE_TAG_CHILD),this.needCheckFunctionGuideCount=2},onClickShop:function(){i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_SHOP)?this.changeMainPageTag(i.constant.MAIN_PAGE_TAG_SHOP):i.gameScene.showTipsItemRender(i.player.functionModule.getFuncConditionStringById(i.constant.MAIN_FUNCTION_SHOP))},onClickSkill:function(){i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_SKILL)?(this.changeMainPageTag(i.constant.MAIN_PAGE_TAG_SKILL),this.clickMainSkillRed=!1,this.updateMainSkillRed()):i.gameScene.showTipsItemRender(i.player.functionModule.getFuncConditionStringById(i.constant.MAIN_FUNCTION_SKILL))},onClickHero:function(e,t,a,n){var o;i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_HERO)?(this.changeMainPageTag(i.constant.MAIN_PAGE_TAG_HERO),this.clickMainHeroRed=!1,this.updateMainHeroRed(),t&&i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_HERO_DETAIL,{host:i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_HERO),heroId:t,playHeroUp:n}),a&&(o=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_HERO))&&o.onClickGayFriend()):i.gameScene.showTipsItemRender(i.player.functionModule.getFuncConditionStringById(i.constant.MAIN_FUNCTION_HERO))},onClickTower:function(){i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_TOWER)?(this.changeMainPageTag(i.constant.MAIN_PAGE_TAG_TOWER),this.clickMainTowerRed=!1,this.updateMainTowerRed()):i.gameScene.showTipsItemRender(i.player.functionModule.getFuncConditionStringById(i.constant.MAIN_FUNCTION_TOWER))},onClickWorld:function(){i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_WORLD)?(this.clickMainWorldRed=!1,this.updateMainWorldRed(),this.changeMainPageTag(i.constant.MAIN_PAGE_TAG_WORLD)):i.gameScene.showTipsItemRender(i.player.functionModule.getFuncConditionStringById(i.constant.MAIN_FUNCTION_WORLD))},changeMainPageTag:function(e){if(i.Logger.debug("changeMainPageTag tagIndex = "+e+" this.curPageTagIndex = "+this.curPageTagIndex),e!==this.curPageTagIndex){var t=!0;switch(e){case i.constant.MAIN_PAGE_TAG_CHILD:this.roleNode.active=!0,i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_CHILD),this.battleButtonChooseNode.active=!0,this.battleBtnNameNode.active=!0;var a=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_CHILD);a&&a.intoMainStartHangUp();break;case i.constant.MAIN_PAGE_TAG_SHOP:i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_SHOP),this.shopButtonChooseNode.active=!0,this.shopBtnNameNode.active=!0,this.roleNode.active=!1;break;case i.constant.MAIN_PAGE_TAG_HERO:i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_HERO),this.heroButtonChooseNode.active=!0,this.heroBtnNameNode.active=!0,this.roleNode.active=!1;break;case i.constant.MAIN_PAGE_TAG_TOWER:i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_TOWER),this.towerButtonChooseNode.active=!0,this.towerBtnNameNode.active=!0,this.roleNode.active=!1;break;case i.constant.MAIN_PAGE_TAG_WORLD:i.Logger.debug("\u4e16\u754c\u5730\u56fe\u6253\u5f00"),i.player.commonModule.isLowIosDevice()&&cc.sys.garbageCollect(),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_WORLD),this.worldButtonChooseNode.active=!0,this.wroldBtnNameNode.active=!0,this.roleNode.active=!1;break;case i.constant.MAIN_PAGE_TAG_SKILL:i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_SKILL),this.skillButtonChooseNode.active=!0,this.skillBtnNameNode.active=!0,this.roleNode.active=!1;break;default:t=!1}t&&(i.soundsUtil.playSoundEffect("function_tab_change"),this.hideCurPage(),this.curPageTagIndex=e)}},hideCurPage:function(){switch(i.Logger.debug("hideCurPage this.curPageTagIndex: "+this.curPageTagIndex),this.curPageTagIndex){case i.constant.MAIN_PAGE_TAG_CHILD:this.battleButtonChooseNode.active=!1,this.battleBtnNameNode.active=!1,i.gameScene.closePage(i.pageConstant.PAGE_TYPE_MAIN_CHILD);break;case i.constant.MAIN_PAGE_TAG_SHOP:this.shopButtonChooseNode.active=!1,this.shopBtnNameNode.active=!1,i.gameScene.closePage(i.pageConstant.PAGE_TYPE_MAIN_SHOP);break;case i.constant.MAIN_PAGE_TAG_HERO:this.heroButtonChooseNode.active=!1,this.heroBtnNameNode.active=!1,i.gameScene.closePage(i.pageConstant.PAGE_TYPE_MAIN_HERO);break;case i.constant.MAIN_PAGE_TAG_TOWER:this.towerButtonChooseNode.active=!1,this.towerBtnNameNode.active=!1,i.gameScene.closePage(i.pageConstant.PAGE_TYPE_MAIN_TOWER);break;case i.constant.MAIN_PAGE_TAG_WORLD:this.worldButtonChooseNode.active=!1,this.wroldBtnNameNode.active=!1,i.gameScene.closePage(i.pageConstant.PAGE_TYPE_MAIN_WORLD),i.Logger.debug("\u4e16\u754c\u5730\u56fe\u5173\u95ed");break;case i.constant.MAIN_PAGE_TAG_SKILL:this.skillButtonChooseNode.active=!1,this.skillBtnNameNode.active=!1,i.gameScene.closePage(i.pageConstant.PAGE_TYPE_MAIN_SKILL)}},checkShopRed:function(e){i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_SHOP)&&(this.shopUpdateTime||(this.shopUpdateTime=0),this.shopUpdateTime+=e,this.shopUpdateTime<1||(this.shopUpdateTime=0,i.player.shopModule.getNextReceiveBoxTime()<=0&&i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_SHOP_TOP_BOX)||i.player.itemModule.isItemEnough(i.constant.BAG_TYPE_TOP_BOX_TICKET,1)&&i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_SHOP_TOP_BOX)||i.player.shopModule.getNextReceiveGoldSecond()<=0||i.player.shopModule.getNextReceiveSilverSecond()<=0||i.player.shopModule.getNextReceiveExpSecond()<=0||i.player.shopModule.getNextReceivePieceSecond()<=0&&i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_SHOP_PIECE)?this.shopBtnRedNode.active||(this.shopBtnRedNode.active=!0,i.gameScene.redNodeAction(this.shopBtnRedNode)):this.shopBtnRedNode.active&&(this.shopBtnRedNode.active=!1)))},setHaveVipExpFly:function(e){this.haveVipExpFly=e},setCachePageStatus:function(e){e&&i.gameScene.pageIsOpened(i.pageConstant.PAGE_TYPE_MAIN_CHILD)?(this.cachePageUpdateCount=0,this.cachePageStatus=!0):this.cachePageStatus=!1},checkCanReceiveFreePower:function(){var e=this;i.gameScene.checkServerTime(function(){e.timeCheckOk=!0,e.needCheckFunctionGuideCount=2},!0,function(){})},checkCachePage:function(){var e=this;if(i.gameScene.pageIsOpened(i.pageConstant.PAGE_TYPE_MAIN_CHILD)&&!(i.guideManager&&i.guideManager.isLimitClick()||i.gameScene.guideLimit&&i.gameScene.guideLimit.active||0<i.gameScene.getOpenedPageCount())){if(i.player.newYearModule.isActivityRealOpen()){var t=i.templateManager.getGameParamValue("newYearPopupCondition"),a=i.player.commonModule.getTodayNewYearPopCount();if(i.gameScene.getOfflineTime()>=1e3*t[1]&&a<t[0])return i.gameScene.showPage(i.pageConstant.PAGE_TYPE_YEAR_ACTIVITY),i.player.commonModule.addTodayNewYearPopCount(),void i.gameScene.checkOfflineTime(!0)}var n,o,s,r=i.player.commonModule.getOpenMailPageCache();if(r){var c=(l=i.templateManager.getGameParamValue("emailAutoShowNeedInstance"))[0],l=(a=l[1],t=i.player.instanceModule.getMaxChapter(),i.player.instanceModule.getChapterMaxLevel(t));if(c<t||t===c&&a<=l)return i.player.commonModule.cleanOpenMailPageCache(),void i.gameScene.showPage(i.pageConstant.PAGE_TYPE_EMAIL_GLOBAL,r)}if(i.player.inviteFriendModule.isVersionUpdateShowOver())if(this.intoTimes<=1&&this.timeCheckOk&&i.player.commonModule.getShowFreePowerIcon()&&!this.alreadyOpenIntoMini&&i.player.commonModule.getIsIntoFromMini()&&(this.alreadyOpenIntoMini=!0,i.player.commonModule.checkIsMyMiniPowerFirst()?0==i.player.commonModule.getFirstMyMiniPowerTime()&&(d=function(){i.player.commonModule.restetFirstMyMiniPowerTime(),e.needCheckFunctionGuideCount=2},n=i.JsonData.FreePower[0]):i.player.commonModule.checkCanMyMiniPower()&&(d=function(){i.player.commonModule.resetMyMiniPowerTime(),e.needCheckFunctionGuideCount=2},n=i.JsonData.FreePower[1]),n)){var d={type:i.constant.COMMON_REWARD_PAGE_FREE_POWER,rewards:n.gift,index:1,notHaveClose:!0,textDesc:i.lang.getGameText(n.giftDesc),callBack:d};i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_INSTANCE_BOX_REWARD,d)}else if(cc.sys.os==cc.sys.OS_ANDROID&&this.intoTimes<=1&&this.timeCheckOk&&i.player.commonModule.getShowFreePowerIcon()&&!this.alreadyOpenIntoDest&&i.player.commonModule.getIsIntoFromDest()&&(this.alreadyOpenIntoDest=!0,i.player.commonModule.checkIsMyDestPowerFirst()?0==i.player.commonModule.getFirstDestPowerTime()&&(h=function(){i.player.commonModule.resetFirstDestPowerTime(),e.needCheckFunctionGuideCount=2},o=i.JsonData.FreePower[2]):i.player.commonModule.checkCanDestPower()&&(h=function(){i.player.commonModule.resetDestPowerTime(),e.needCheckFunctionGuideCount=2},o=i.JsonData.FreePower[3]),o)){var h={type:i.constant.COMMON_REWARD_PAGE_FREE_POWER,rewards:o.gift,index:1,notHaveClose:!0,textDesc:i.lang.getGameText(o.giftDesc),callBack:h};i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_INSTANCE_BOX_REWARD,h)}else if(console.log("this.intoTimes = "+this.intoTimes+" this.timeCheckOk = "+this.timeCheckOk+" getShowFreePowerIcon() = "+i.player.commonModule.getShowFreePowerIcon()+" this.alreadyOpenIntoFloatWindow = "+this.alreadyOpenIntoFloatWindow+" getIsIntoFromFloatWindow() = "+i.player.commonModule.getIsIntoFromFloatWindow()),cc.sys.os==cc.sys.OS_ANDROID&&this.intoTimes<=1&&this.timeCheckOk&&i.player.commonModule.getShowFreePowerIcon()&&!this.alreadyOpenIntoFloatWindow&&i.player.commonModule.getIsIntoFromFloatWindow()&&(console.log("\u4ece\u6d6e\u7a97\u8fdb\u5165"),this.alreadyOpenIntoFloatWindow=!0,i.player.commonModule.checkIsFloatWindowPowerFirst()?0==i.player.commonModule.getFirstFloatWindowPowerTime()&&(p=function(){i.player.commonModule.restetFirstFloatWindowPowerTime(),e.needCheckFunctionGuideCount=2},s=i.JsonData.FreePower[5]):i.player.commonModule.checkCanFloatWindowPower()&&(p=function(){i.player.commonModule.resetFloatWindowPowerTime(),e.needCheckFunctionGuideCount=2},s=i.JsonData.FreePower[6]),s)){var u={type:i.constant.COMMON_REWARD_PAGE_FREE_POWER,rewards:s.gift,index:1,notHaveClose:!0,textDesc:i.lang.getGameText(s.giftDesc),callBack:p};i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_INSTANCE_BOX_REWARD,u)}else{var p=i.player.vipModule.getCacheVipLevel();if(p&&0<=p)return i.player.vipModule.resetCacheVipLevel(),void i.gameScene.showPage(i.pageConstant.PAGE_TYPE_VIP_UP,p);if(u=this.curPageTagIndex==i.constant.MAIN_PAGE_TAG_CHILD,p=i.player.piggyBankModule.isCanShowFirstPiggyBank(),u&&p&&i.player.piggyBankModule.isPiggyBankActive()&&i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_PIGGY_BANK)&&(i.gameScene.showPage(i.pageConstant.PAGE_TYPE_PIGGY_BANK),i.player.piggyBankModule.savePiggyBankShow()),(p=i.player.taskModule.getCacheMedalLevel())&&0<=p)return i.player.taskModule.resetCacheMedalLevel(),void i.gameScene.showPage(i.pageConstant.PAGE_TYPE_NEW_YEAR_MEDAL_UP,p);this.setCachePageStatus(!1)}else i.gameScene.showPage(i.pageConstant.PAGE_TYPE_VERSION_UPDATE)}},checkTowerAndHeroRed:function(e){this.TowerAndHeroTime||(this.TowerAndHeroTime=0),this.TowerAndHeroTime+=e,this.TowerAndHeroTime<5||(this.TowerAndHeroTime=0,this.updateMainTowerRed(),this.updateMainHeroRed(),this.updateMainWorldRed())},checkErrorTimeTip:function(e){i.gameScene.timeErrorData&&this.node.active&&(i.gameScene.readyGoToInstance||i.gameScene.pageIsOpened(i.pageConstant.PAGE_TYPE_MAIN_CHILD)&&(i.guideManager&&i.guideManager.isLimitClick()||0===i.gameScene.getOpenedPageCount()&&(i.gameScene.updateErrorTipTime+=e,i.gameScene.updateErrorTipTime<2||(i.gameScene.updateErrorTipTime=0,i.gameScene.showPage(i.pageConstant.PAGE_TYPE_TIME_ERROR,{errorData:i.gameScene.timeErrorData}),i.gameScene.timeErrorData=null))))},update:function(e){i.gameScene.loadingNode.active||(this.checkShopRed(e),this.checkTowerAndHeroRed(e),0===i.gameScene.getOpenedPageCount()&&!i.guideManager.isGuiding()&&0<this.needCheckFunctionGuideCount&&!i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_CHILD).isHoming&&(this.needCheckFunctionGuideCount--,0===this.needCheckFunctionGuideCount&&this.checkFunctionGuide()),this.checkGetHeroGuide(e),this.checkErrorTimeTip(e),this.cachePageStatus&&(this.cachePageUpdateCount||(this.cachePageUpdateCount=0),i.gameScene.guideLimit&&(!i.gameScene.guideLimit||i.gameScene.guideLimit.active)||(this.cachePageUpdateCount+=1,3<=this.cachePageUpdateCount&&(this.cachePageUpdateCount=0,this.checkCachePage(e)))))}}),cc._RF.pop()},{}],MainPowerPage:[function(e,t){"use strict";cc._RF.push(t,"e4ce1uMIxVDw6LrZKKISFOd","MainPowerPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{vipAtlas:{default:null,type:cc.SpriteAtlas}},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.MAIN_UPDATE_POWER,function(t){return e.updateData(t)}),this.registerListener(i.GameEventType.SHOW_AD_OVER_AD_POWER,function(t){return e.showAdOver(t)})},onLoadPage:function(){this.buyAddPowerCountLabel=cc.find("content/layout/buy/power/number",this.node).getComponent(cc.Label),this.adAddPowerCountLabel=cc.find("content/layout/ad/power/number",this.node).getComponent(cc.Label),this.buyCountLabel=cc.find("content/layout/buy/button/leftTime",this.node).getComponent(cc.Label),this.adCountLabel=cc.find("content/layout/ad/button/leftTime",this.node).getComponent(cc.Label),this.buyCostLabel=cc.find("content/layout/buy/button/background/layout/label",this.node).getComponent(cc.Label),this.buyButton=cc.find("content/layout/buy/button",this.node).getComponent(cc.Button),this.buyLabelOutline=cc.find("content/layout/buy/button/background/layout/label",this.node).getComponent(cc.LabelOutline),this.adButton=cc.find("content/layout/ad/button",this.node).getComponent(cc.Button),this.adLabelOutline=cc.find("content/layout/ad/button/background/layout/label",this.node).getComponent(cc.LabelOutline),this.vipLayoutNode=cc.find("content/layout/ad/vipLayout",this.node),this.vipIconSprite=cc.find("icon",this.vipLayoutNode).getComponent(cc.Sprite),this.vipTimesLabel=cc.find("label2",this.vipLayoutNode).getComponent(cc.Label)},showPageBegan:function(){this.initData(),0<this.leftAdCount&&i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_POWER_PAGE_AD,this.leftAdCount)},initData:function(){i.lang.updateLabelString(this.buyAddPowerCountLabel,[i.templateManager.getGameParamValue("powerPerNumByDiamond")]),i.lang.updateLabelString(this.adAddPowerCountLabel,[i.templateManager.getGameParamValue("powerPerNumByAd")]),i.lang.updateLabelString(this.buyCostLabel,[i.templateManager.getGameParamValue("powerDiamondPrice")]),this.updateData(),this.updateVipNode()},updateData:function(){this.maxBuyCount=i.templateManager.getGameParamValue("powerMaxTimeByDiamond"),this.maxAdCount=i.player.vipModule.getVipFreePowerTimes(),this.curBuyCount=i.player.commonModule.getTodayBuyPowerCount(),this.curAdCount=i.player.commonModule.getTodayADPowerCount(),this.leftBuyCount=Math.max(0,this.maxBuyCount-this.curBuyCount),this.leftAdCount=Math.max(0,this.maxAdCount-this.curAdCount),i.lang.updateLabelString(this.buyCountLabel,[this.leftBuyCount]),i.lang.updateLabelString(this.adCountLabel,[this.leftAdCount]),this.leftBuyCount<=0?this.buyButton.interactable&&(this.buyButton.interactable=!1,this.buyLabelOutline.color=cc.color("#000000")):this.buyButton.interactable||(this.buyButton.interactable=!0),this.leftAdCount<=0?this.adButton.interactable&&(this.adButton.interactable=!1,this.adLabelOutline.color=cc.color("#000000")):this.adButton.interactable||(this.adButton.interactable=!0,this.adLabelOutline.color=cc.color("#963000"))},updateVipNode:function(){var e=i.player.vipModule.getNextVipChangeCfg(i.constant.VIP_PRIVILEGE_TYPE_FREE_POWER);e&&i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_VIP)?(this.vipLayoutNode.active=!0,this.vipIconSprite.spriteFrame=this.vipAtlas.getSpriteFrame(e.vipIconSmall),i.lang.updateLabelString(this.vipTimesLabel,[e.hangupNum[1]])):this.vipLayoutNode.active=!1},onClickAd:function(){this.leftAdCount<=0||i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,i.GameEventType.SHOW_AD_OVER_AD_POWER)},showAdOver:function(){i.player.commonModule.addTodayADPowerCount(),i.player.itemModule.dropItem(i.constant.COIN_TYPE_POWER,i.templateManager.getGameParamValue("powerPerNumByAd"),!0,i.constant.ITEM_ADD_SOURCE_POWER_AD),this.closePage()},onClickBuy:function(){var e;this.leftBuyCount<=0||(e=i.templateManager.getGameParamValue("powerDiamondPrice"),i.player.playerModule.isGoldBullionEnough(e)?i.player.playerModule.costGoldBullionNum(e,i.constant.ITEM_CONSUME_SOURCE_BUY_POWER)&&(i.player.commonModule.addTodayBuyPowerCount(),i.player.itemModule.dropItem(i.constant.COIN_TYPE_POWER,i.templateManager.getGameParamValue("powerPerNumByDiamond"),!0,i.constant.ITEM_ADD_SOURCE_POWER_BUY),i.BI.onEvent(i.biConstant.EVENT_TYPE_DIAMOND_CONSUME,i.biConstant.EVENT_ID_DIAMOND_BUY_POWER,e),this.closePage()):(e=i.lang.getGameText(i.GameTextCode.ENOUGH_DIAMONDS),i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,e)))},onClickClose:function(){this.closePage()},showPageEnded:function(){}}),cc._RF.pop()},{}],MainScene:[function(e,t){"use strict";cc._RF.push(t,"dc0cdNPjURDN6f1+1pfo2aN","MainScene");var i=e("Aft");cc.Class({extends:cc.Component,properties:{commonAtlas:{default:null,type:cc.SpriteAtlas}},onLoad:function(){},getTowerSpineData:function(e,t){var a=this,n=this;this._towerSpineCache||(this._towerSpineCache={});var o=this._towerSpineCache[e];o?t(o):cc.loader.loadRes(e,sp.SkeletonData,function(o,s){return o?(i.Logger.error("==== load flower spine error: ====\n",o.stack),void n.getTowerSpineData(e,t)):(a._towerSpineCache[e]=s,void t(s))})},cleanMainHeroSpine:function(){if(this._towerSpineCache)for(var e in this._towerSpineCache){var t;"effect/main/hero/"==e.substring(0,17)&&(t=this._towerSpineCache[e],t=cc.loader.getDependsRecursively(t),cc.loader.release(t),this._towerSpineCache[e]=null)}},getItemIconFrame:function(e){var t,a=null,n=i.player.itemModule.getItemType(e);return n===i.constant.ITEM_TYPE_COIN?(t=i.templateManager.getItemDataById(e).icon.split("/")[1],a=this.commonAtlas.getSpriteFrame(t)):n===i.constant.ITEM_TYPE_HERO_PIECE&&(e=i.templateManager.getHeroCardDataById(e),a=this.commonAtlas.getSpriteFrame(e.icon)),a},getItemBgFrame:function(e){var t=null,a=i.player.itemModule.getItemType(e);return a===i.constant.ITEM_TYPE_COIN?t=i.templateManager.getItemDataById(e).qualityBg:a===i.constant.ITEM_TYPE_HERO_PIECE&&(e=i.templateManager.getHeroCardDataById(e),e=i.player.heroModule.getHeroQuality(e.heroId),t=i.templateManager.getHeroQualityDataById(e).itemBg),t}}),cc._RF.pop()},{}],MainTaskLotteryItemRender:[function(e,t){"use strict";cc._RF.push(t,"367c8TpIzNJXJkJO49GFkPy","MainTaskLotteryItemRender");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{},afterLoad:function(){this.ratioLabel=cc.find("label",this.node).getComponent(cc.Label)},initData:function(e){i.lang.updateLabelString(this.ratioLabel,[e.ratio])}}),cc._RF.pop()},{}],MainTaskPage:[function(e,t){"use strict";cc._RF.push(t,"0f687Iv56RLu5x/FROjRFkf","MainTaskPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{mainAtlas:{default:null,type:cc.SpriteAtlas},commonItemPrefab:{default:null,type:cc.Prefab},commonTipsPrefab:{default:null,type:cc.Prefab}},onLoadPage:function(){this.titleLabel=cc.find("content/titleLabel",this.node).getComponent(cc.Label),this.taskIconSprite=cc.find("content/task/icon",this.node).getComponent(cc.Sprite),this.descLabel=cc.find("content/descLabel",this.node).getComponent(cc.Label),this.progressBar=cc.find("content/progressBar",this.node).getComponent(cc.ProgressBar),this.progressLabel=cc.find("content/progressBar/name",this.node).getComponent(cc.Label),this.rewardLayoutNode=cc.find("content/rewardScrollView/view/content",this.node),this.getButtonNode=cc.find("content/getButton",this.node),this.getTopButtonNode=cc.find("content/getTopButton",this.node),this.goButtonNode=cc.find("content/goButton",this.node),this.getAdButtonNode=cc.find("content/getAdButton",this.node),this.adButtonLabel=cc.find("background/multiple/label",this.getAdButtonNode).getComponent(cc.Label),this.adButtonRatioNode=cc.find("background/multiple",this.getAdButtonNode),this.rewardItemObjList=[]},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.SHOW_AD_OVER_MAIN_TASK_LOTTERY,function(){e.onShowAdOver()})},showPageBegan:function(){var e;this.updateTime=0,this.isReward=!1,this.curMainTaskId=i.player.taskModule.getCurMainTaskId(),this.mainTaskCfg=i.templateManager.getMainTaskDataById(this.curMainTaskId),this.titleLabel.string=i.lang.getGameText(this.mainTaskCfg.title),this.adButtonRatioNode.stopAllActions(),this.descLabel.string=i.player.taskModule.getMainTaskDesc(this.curMainTaskId),this.taskValue=i.player.taskModule.getMainTaskValue(this.curMainTaskId),this.targetValue=i.player.taskModule.getMainTaskTarget(this.curMainTaskId),this.taskValue>=this.targetValue||i.player.gmModule.isMainTaskReward()?(this.taskValue=this.targetValue,this.goButtonNode.active=!1,this.mainTaskCfg.isRatio?(this.getAdButtonNode.active=!0,this.getTopButtonNode.active=!1,this.getButtonNode.active=!1,e=i.JsonData.GoalRewardRatio[0].ratio,r=i.JsonData.GoalRewardRatio[i.JsonData.GoalRewardRatio.length-1].ratio,i.lang.updateLabelString(this.adButtonLabel,[e,r]),this.adButtonRatioNode.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.8,1.2),cc.scaleTo(.8,1)))),i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_MAIN_TASK_HAVE_AD,this.curMainTaskId)):(this.getAdButtonNode.active=!1,this.getTopButtonNode.active=!0,this.getButtonNode.active=!1)):(this.getButtonNode.active=!1,this.goButtonNode.active=!0,this.getAdButtonNode.active=!1,this.getTopButtonNode.active=!1),this.progressBar.progress=this.taskValue/this.targetValue,i.lang.updateLabelString(this.progressLabel,[this.taskValue,this.targetValue]);for(var t=0;t<this.rewardItemObjList.length;t++)this.rewardItemObjList[t].node.active=!1;this.canRewards=this.mainTaskCfg.rewards;for(var a=0;a<this.canRewards.length;a++){var n=this.canRewards[a];a>=this.rewardItemObjList.length&&((o=cc.instantiate(this.commonItemPrefab)).scale=1,((s=o.getComponent("CommonItemRender")).host=this).rewardLayoutNode.addChild(o),this.rewardItemObjList.push(s));var o=this.rewardItemObjList[a];o.node.active=!0,o.node.y=-20;var s=n[0];n=n[1],s===i.constant.COIN_TYPE_SILVER?n=i.player.commonModule.getHangUpReceiveCoin(n):s===i.constant.COIN_TYPE_HERO_EXP&&(n=i.player.commonModule.getHangUpReceiveExp(n)),o.initData(s,n,!1,null,!0,!1,!1)}var r=this.mainAtlas;this.taskIconSprite.spriteFrame=r.getSpriteFrame(this.mainTaskCfg.icon)},showPageEnded:function(){i.ttAdManager.showBannerAd(cc.find("adNode",this.node),this.getPageType())},onClickReward:function(){this.taskValue<this.targetValue||(this.isReward=i.player.taskModule.rewardMainTask(this.curMainTaskId,1),this.closeThePage(!0))},lotteryReward:function(e){this.isReward=i.player.taskModule.rewardMainTask(this.curMainTaskId,e),this.closeThePage(!0)},onClickGo:function(){var e=this.mainTaskCfg.taskType,t=this.mainTaskCfg.taskValue;switch(e){case i.constant.MAIN_TASK_TYPE_VAN_BATTLE_COUNT:var a=t[0];a!=i.player.heroModule.getBattlePioneerHero()&&a!=i.player.heroModule.getBattleAdPioneerHero()&&i.gameScene.mainPage.onClickHero(),this.closeThePage(!0);break;case i.constant.MAIN_TASK_TYPE_TOWER_HERO_BATTLE_COUNT:a=t[0],i.player.towerModule.getAllTowerHeros().indexOf(a)<0&&i.gameScene.mainPage.onClickTower(),this.closeThePage(!0);break;case i.constant.MAIN_TASK_TYPE_PASS_INSTANCE:this.closeThePage(!0);break;case i.constant.MAIN_TASK_TYPE_GET_HERO:case i.constant.MAIN_TASK_TYPE_GET_HERO_COUNT:case i.constant.MAIN_TASK_TYPE_HERO_LEVEL:case i.constant.MAIN_TASK_TYPE_HERO_LEVEL_COUNT:case i.constant.MAIN_TASK_TYPE_HERO_BREAK_COUNT:case i.constant.MAIN_TASK_TYPE_HERO_STAR_LEVEL:case i.constant.MAIN_TASK_TYPE_HERO_STAR_COUNT:case i.constant.MAIN_TASK_TYPE_HERO_WEAK:case i.constant.MAIN_TASK_TYPE_HERO_WEAK_COUNT:this.closeThePage(!1),i.gameScene.mainPage.onClickHero();break;case i.constant.MAIN_TASK_TYPE_GET_GAY_FRIEND:case i.constant.MAIN_TASK_TYPE_GET_GAY_FRIEND_COUNT:this.closeThePage(!1),i.gameScene.mainPage.onClickHero(null,null,!0,null);break;case i.constant.MAIN_TASK_TYPE_TOWER_LEVEL:case i.constant.MAIN_TASK_TYPE_ALL_TOWER_LEVEL:case i.constant.MAIN_TASK_TYPE_TOWER_BREAK_COUNT:case i.constant.MAIN_TASK_TYPE_TOWER_WEAK:case i.constant.MAIN_TASK_TYPE_ALL_TOWER_WEAK:this.closeThePage(!1),i.gameScene.mainPage.onClickTower();break;case i.constant.MAIN_TASK_TYPE_HERO_IN_MAP:case i.constant.MAIN_TASK_TYPE_HERO_IN_MAP_COUNT:this.closeThePage(!1),i.gameScene.mainPage.onClickWorld();break;case i.constant.MAIN_TASK_TYPE_GET_SKILL:case i.constant.MAIN_TASK_TYPE_GET_SKILL_COUNT:case i.constant.MAIN_TASK_TYPE_SKILL_LEVEL:case i.constant.MAIN_TASK_TYPE_SKILL_LEVEL_COUNT:case i.constant.MAIN_TASK_TYPE_SKILL_STAR:case i.constant.MAIN_TASK_TYPE_SKILL_STAR_COUNT:this.closeThePage(!1),i.gameScene.mainPage.onClickSkill()}},closeThePage:function(e){var t=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_CHILD),a=null;e&&t&&(a=t.instanceRewardTipNode),this.closePage(a)},onClickClose:function(){this.closeThePage(!0)},closePageBegan:function(){this.showTipsId=null,this.itemTipsNode&&(this.itemTipsNode.active=!1),i.ttAdManager.hideBannerAd()},closePageEnded:function(){if(this.isReward){if(this.curMainTaskId=i.player.taskModule.getCurMainTaskId(),!i.templateManager.getMainTaskDataById(this.curMainTaskId))return!1;i.gameScene.getOpenedPageCount()<=0&&(i.gameScene.showGuideLimit(),this.scheduleOnce(function(){i.gameScene.hideGuideLimit(),1<i.gameScene.getOpenedPageCount()||i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_LINE_TASK)},.5))}},showTips:function(e,t,i){this.itemTipsNode||(this.itemTipsNode=cc.instantiate(this.commonTipsPrefab),this.itemTipsObj=this.itemTipsNode.getComponent("CommonSkillTipsItemRender"),this.node.addChild(this.itemTipsNode)),this.showTipsId=e,this.itemTipsObj.showNode(e,t,i)},hideTips:function(){this.showTipsId=null,this.itemTipsObj.hideNode()},onClickAd:function(){this.taskValue<this.targetValue||i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,i.GameEventType.SHOW_AD_OVER_MAIN_TASK_LOTTERY)},onShowAdOver:function(){i.player.taskModule.addMainTaskLotteryCount();for(var e=i.player.taskModule.getMainTaskLotteryCount(),t=[],a=0;a<i.JsonData.GoalRewardRatio.length;a++){var n=i.JsonData.GoalRewardRatio[a],o=n.baseWeight,s=n.weightChangeTimes;s=o+n.variableWeight*Math.max(0,e-s),t.push({key:a,value:s})}var r=i.Utils.getRandomKeyByValue(t),c=i.JsonData.GoalRewardRatio[0];(c=r<i.JsonData.GoalRewardRatio.length?i.JsonData.GoalRewardRatio[r]:c).isReset&&i.player.taskModule.resetMainTaskLotteryCount(),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_TASK_LOTTERY,{rewards:this.mainTaskCfg.rewards,ratioCfg:c,itemDataList:i.JsonData.GoalRewardRatio,callBack:function(){var e=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_LINE_TASK);e&&e.lotteryReward(c.ratio)}})},update:function(e){this.goButtonNode.active||this.mainTaskCfg.isRatio&&(this.getButtonNode.active||(this.updateTime+=e,2<=this.updateTime&&(this.getButtonNode.active=!0)))}}),cc._RF.pop()},{}],MainTopItemRender:[function(e,t){"use strict";cc._RF.push(t,"07309lekhZMhIXA1+kjqwq8","MainTopItemRender");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{flyItemRenderPrefab:{default:null,type:cc.Prefab},commonAtlas:{default:null,type:cc.SpriteAtlas},skillAtlas:{default:null,type:cc.SpriteAtlas}},afterLoad:function(){this.contentNode=cc.find("content",this.node),this.silverNode=cc.find("silver",this.contentNode),this.silverImgNode=cc.find("/silver/icon",this.contentNode),this.silverLabelNode=cc.find("/silver/label",this.contentNode),this.silverLabel=this.silverLabelNode.getComponent(cc.Label),this.goldNode=cc.find("/gold",this.contentNode),this.goldImgNode=cc.find("/gold/icon",this.contentNode),this.goldLabelNode=cc.find("/gold/label",this.contentNode),this.goldLabel=this.goldLabelNode.getComponent(cc.Label),this.powerNode=cc.find("power",this.contentNode),this.powerImgNode=cc.find("power/icon",this.contentNode),this.powerLabel=cc.find("label",this.powerNode).getComponent(cc.Label),this.powerTimeNode=cc.find("time",this.powerNode),this.powerTimeLabel=this.powerTimeNode.getComponent(cc.Label),this.powerAddNode=cc.find("power/addButton/background",this.contentNode),this.flyTimeCount=0,this.flyLayer=cc.find("flyLayer",this.contentNode),this.initFlyPool(),this.flyEffectInfoMap={},this.checkServerTimeFailCount=0,this.stopUpdateTime=0,this.isCheckServerTime=!1,this.updateBaseUi(),i.gameScene.isIphoneX()&&i.Utils.addNodeTopSpace(this.node)},onClickGold:function(){i.config.openGM&&(i.gameScene.isShowTestTips=!0,i.gameScene.offlineMaxPush(),i.gameScene.everyDayPush(),i.gameScene.powerMaxPush(),i.gameScene.isShowTestTips=!1)},nodeToScreenOut:function(){var e=i.gameScene.isIphoneX()?i.Utils.getTopFixSize():0;this.contentNode.y=this.contentNode.height/2+e+10},nodeHoming:function(e){var t=cc.v2(0,-this.contentNode.height/2);e?(this.contentNode.stopAllActions(),this.contentNode.position=t):(e=cc.moveTo(.3,t),t=cc.callFunc(function(){},this),t=cc.sequence(e,t),this.contentNode.stopAllActions(),this.contentNode.runAction(t))},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.UPDATE_UI_GOLD_CHANGE,function(){return e.updateSilver()}),this.registerListener(i.GameEventType.UPDATE_UI_DIAMOND_CHANGE,function(){return e.updateGoldBullion()}),this.registerListener(i.GameEventType.MAIN_UPDATE_POWER,function(){return e.updatePowerInfo()})},updateGoldBullion:function(){this.goldBullionNum=i.player.playerModule.getGoldBullionNum(),this.goldLabel.string=i.Utils.formatBigNumberForLabel(this.goldBullionNum)},addGoldBullion:function(e){this.goldBullionNum=new i.BigNumber(this.goldBullionNum).plus(e),this.goldLabel.string=i.Utils.formatBigNumberForLabel(this.goldBullionNum.toFixed(0))},updateSilver:function(){this.silverNum=i.player.playerModule.getSilverNum(),this.silverLabel.string=i.Utils.formatBigNumberForLabel(this.silverNum)},addSilver:function(e){this.silverNum=new i.BigNumber(this.silverNum).plus(e),this.silverLabel.string=i.Utils.formatBigNumberForLabel(this.silverNum.toFixed(0))},addPower:function(e){this.powerNum=new i.BigNumber(this.powerNum).plus(e),this.maxPower=i.templateManager.getGameParamValue("powerMaxNumAutoRecovery"),this.powerLabel.string=i.lang.getArgGameText(i.GameTextCode[1095],[this.powerNum.toFixed(0),this.maxPower])},updateBaseUi:function(){this.updateGoldBullion(),this.updateSilver(),this.updatePowerInfo()},updatePowerInfo:function(){this.powerNum=i.player.playerModule.getPlayerPowerNum(),this.curPower=parseInt(this.powerNum),this.maxPower=i.templateManager.getGameParamValue("powerMaxNumAutoRecovery"),this.powerLabel.string=i.lang.getArgGameText(i.GameTextCode[1095],[this.curPower,this.maxPower]),this.updatePowerTime()},resetCheckServerTimeState:function(){this.stopUpdateTime=0},updatePowerTime:function(){var e,t,a=this;this.curPower>=this.maxPower?this.powerTimeNode.active&&(this.powerTimeNode.active=!1):(this.powerTimeNode.active||(this.powerTimeNode.active=!0),this.powerEndTime=i.player.commonModule.getNextPowerTime(),t=i.timeUtil.getTime(),e=Math.max(0,this.powerEndTime-t),t=i.timeUtil.secondFormat(Math.ceil(e/1e3)),e<=0?(this.stopUpdateTime=Math.max(0,this.stopUpdateTime-1),this.lastAddPowerTime===this.powerEndTime||0!==this.stopUpdateTime||this.isCheckServerTime||(this.isCheckServerTime=!0,i.gameScene.checkServerTime(function(){a.isCheckServerTime=!1,a.lastAddPowerTime!==a.powerEndTime&&(a.checkServerTimeFailCount=0,a.stopUpdateTime=0,a.lastAddPowerTime=a.powerEndTime,i.player.commonModule.addPowerByTime(a.powerEndTime))},!0,function(e){a.isCheckServerTime=!1,a.checkServerTimeFailCount+=1,3<=a.checkServerTimeFailCount&&(a.checkServerTimeFailCount=0,a.stopUpdateTime=180),e.type===i.GameTextCode.NETWORK_ERROR?a.powerTimeLabel.string=i.lang.getGameText(i.GameTextCode.NETWORK_ERROR):a.powerTimeLabel.string=i.lang.getGameText(i.GameTextCode.SYSTEM_TIME_ERROR)}))):this.powerTimeLabel.string=t)},initFlyPool:function(){this.flyPool=[];for(var e=0;e<20;e++){var t=cc.instantiate(this.flyItemRenderPrefab);t.x=-3e3,this.flyLayer.addChild(t),this.flyPool.push(t)}},getFlyFromPool:function(){var e;return this.flyPool||(this.flyPool=[]),0<this.flyPool.length?(e=this.flyPool[0],this.flyPool.splice(0,1)):((e=cc.instantiate(this.flyItemRenderPrefab)).x=-3e3,this.flyLayer.addChild(e)),e},putFlyPool:function(e){e&&(e.x=-3e3,this.flyPool.push(e))},getFlyEffectInfoByType:function(e){return this.flyEffectInfoMap.hasOwnProperty(e)||(this.flyEffectInfoMap[e]={count:0,flying:!0}),this.flyEffectInfoMap[e]},checkFlyEffect:function(e,t,i,a){this.cacheFlyEffect||(this.cacheFlyEffect=[]),t<=0||(this.cacheFlyEffect.push({type:e,addValue:t,position:i,delayTime:a}),this.getFlyEffectInfoByType(e).flying=!0)},flyCacheEffect:function(e,t,a,n){var o=t,s=10,r=this.getFlyEffectInfoByType(e);20<r.count&&(s=2);var c=o/(s=e===i.constant.BAG_TYPE_TOP_BOX_TICKET?t:s);(t=i.player.itemModule.getItemType(e))===i.constant.ITEM_TYPE_COIN?e==i.constant.COIN_TYPE_GOLD_BULLION?i.soundsUtil.playSoundEffect("diamond_start"):e==i.constant.COIN_TYPE_SILVER||e==i.constant.COIN_TYPE_POWER||e==i.constant.COIN_TYPE_HERO_EXP||e==i.constant.COIN_TYPE_EXP?i.soundsUtil.playSoundEffect("gold_start"):e==i.constant.COIN_TYPE_PIGGY_BANK_GOLD&&i.soundsUtil.playSoundEffect("diamond_start"):t===i.constant.ITEM_TYPE_HERO_PIECE?i.soundsUtil.playSoundEffect("gold_start"):t===i.constant.ITEM_TYPE_BAG?e===i.constant.BAG_TYPE_TOP_BOX_TICKET&&i.soundsUtil.playSoundEffect("gold_start"):t===i.constant.ITEM_TYPE_SKILL_PIECE&&i.soundsUtil.playSoundEffect("gold_start");for(var l=0;l<s;l++)r.count++,this.flyUiEffect(e,c,l,a,n)},flyUiEffect:function(e,t,a,n,o){var s=this.getFlyFromPool(),r=cc.find("diamond",s),c=cc.find("gold",s),l=cc.find("power",s),d=cc.find("heroExp",s),h=cc.find("heroPiece",s),u=cc.find("playerExp",s),p=cc.find("lotteryTicket",s),g=cc.find("skillPiece",s);r.active=!1,c.active=!1,l.active=!1,d.active=!1,h.active=!1,u.active=!1,p.active=!1,g.active=!1;var _,m,E=i.player.itemModule.getItemType(e);if(E===i.constant.ITEM_TYPE_COIN)e==i.constant.COIN_TYPE_GOLD_BULLION?(_=this.goldImgNode,r.active=!0):e==i.constant.COIN_TYPE_SILVER?(_=this.silverImgNode,c.active=!0):e==i.constant.COIN_TYPE_POWER?(_=this.powerImgNode,l.active=!0):e==i.constant.COIN_TYPE_HERO_EXP?(_=i.gameScene.mainPage.heroIconNode,d.active=!0):e==i.constant.COIN_TYPE_EXP?(_=i.gameScene.mainPage.roleNode,u.active=!0):e==i.constant.COIN_TYPE_PIGGY_BANK_GOLD&&(_=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_CHILD).piggyBankIconNode,r.active=!0);else if(E===i.constant.ITEM_TYPE_HERO_PIECE){var T=i.templateManager.getHeroCardDataById(e);if(!T)return;_=i.gameScene.mainPage.heroIconNode,h.active=!0,h.getComponent(cc.Sprite).spriteFrame=this.commonAtlas.getSpriteFrame(T.icon)}else if(E===i.constant.ITEM_TYPE_BAG)e===i.constant.BAG_TYPE_TOP_BOX_TICKET&&(_=i.gameScene.mainPage.shopIconNode,p.active=!0);else if(E===i.constant.ITEM_TYPE_SKILL_PIECE){var f=i.templateManager.getSkillCardById(e);if(!f)return;_=i.gameScene.mainPage.skillButtonIconNode,g.active=!0,g.getComponent(cc.Sprite).spriteFrame=this.skillAtlas.getSpriteFrame(f.icon)}_&&(T=s.parent,n=n?T.convertToNodeSpaceAR(n):{x:0,y:0},p=_.convertToWorldSpaceAR(cc.v2(0,0)),E=T.convertToNodeSpaceAR(p),g=i.Utils.getRandomInt(n.x-100,n.x+100),f=i.Utils.getRandomInt(n.y-100,n.y+100),_=cc.v2(g,-50+f),s.setPosition(_),s.opacity=0,T=cc.delayTime(2/30*a),p=cc.fadeIn(.2),n=cc.moveBy(.2,cc.v2(0,-30)),o=o||.1,g=cc.delayTime(o),f=i.Utils.getRotation(_,E),o=Math.abs(E.x-_.x),_=Math.abs(E.y-_.y),_=Math.sqrt(o*o+_*_),f=[i.Utils.getOffsetByRotationAndDistance(_,f-10),i.Utils.getOffsetByRotationAndDistance(_,f+10),E],E=cc.bezierTo(.5,f),cc.fadeOut(.2),m=this,f=cc.callFunc(function(){m.putFlyPool(this),m.getFlyEffectInfoByType(e).count--,m.flyEffectOver(e,t,a)},s),f=cc.sequence(T,p,n,g,E,f),s.runAction(f))},flyEffectOver:function(e,t,a){var n=i.player.itemModule.getItemType(e);0===a&&(n===i.constant.ITEM_TYPE_COIN?e===i.constant.COIN_TYPE_GOLD_BULLION?i.soundsUtil.playSoundEffect("diamond_end"):e===i.constant.COIN_TYPE_SILVER||e===i.constant.COIN_TYPE_POWER||e===i.constant.COIN_TYPE_HERO_EXP||e===i.constant.COIN_TYPE_EXP?i.soundsUtil.playSoundEffect("gold_end"):e===i.constant.COIN_TYPE_PIGGY_BANK_GOLD&&i.soundsUtil.playSoundEffect("diamond_end"):n===i.constant.ITEM_TYPE_HERO_PIECE?i.soundsUtil.playSoundEffect("gold_end"):n===i.constant.ITEM_TYPE_BAG?n===i.constant.BAG_TYPE_TOP_BOX_TICKET&&i.soundsUtil.playSoundEffect("gold_end"):n===i.constant.ITEM_TYPE_SKILL_PIECE&&i.soundsUtil.playSoundEffect("gold_end"));var o,s=this.getFlyEffectInfoByType(e);a=cc.sequence(cc.scaleTo(1/30,1.2),cc.scaleTo(1/30,.8),cc.scaleTo(1/30,1)),n===i.constant.ITEM_TYPE_COIN?e==i.constant.COIN_TYPE_GOLD_BULLION?(this.goldImgNode.runAction(a),this.goldLabelNode.scale=1.2,this.goldLabelNode.runAction(cc.scaleTo(2/30,1)),o=i.GameEventType.UPDATE_UI_DIAMOND_CHANGE,this.addGoldBullion(t)):e==i.constant.COIN_TYPE_SILVER?(this.silverImgNode.runAction(a),this.silverLabelNode.scale=1.2,this.silverLabelNode.runAction(cc.scaleTo(2/30,1)),o=i.GameEventType.UPDATE_UI_GOLD_CHANGE,this.addSilver(t)):e==i.constant.COIN_TYPE_POWER?(this.powerImgNode.runAction(a),this.powerLabel.node.scale=1.2,this.powerLabel.node.runAction(cc.scaleTo(2/30,1)),o=i.GameEventType.MAIN_UPDATE_POWER,this.addPower(t)):e==i.constant.COIN_TYPE_HERO_EXP?i.gameScene.mainPage.heroIconNode.runAction(a):e==i.constant.COIN_TYPE_EXP?(o=i.GameEventType.UPDATE_PLAYER_ROLE_INFO,i.gameScene.mainPage.roleNode.runAction(a)):e==i.constant.COIN_TYPE_PIGGY_BANK_GOLD&&i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_CHILD).piggyBankIconNode.runAction(a):n===i.constant.ITEM_TYPE_HERO_PIECE?i.gameScene.mainPage.heroIconNode.runAction(a):n===i.constant.ITEM_TYPE_BAG?n===i.constant.BAG_TYPE_TOP_BOX_TICKET&&i.gameScene.mainPage.shopIconNode.runAction(a):n===i.constant.ITEM_TYPE_SKILL_PIECE&&i.gameScene.mainPage.skillButtonIconNode.runAction(a),0===s.count&&s.flying&&(s.flying=!1,o&&i.eventBus.dispatchEvent(o))},onClickPower:function(){this.powerAddNode.active&&i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_POWER)},onClickOtherDebug:function(){var e,t;i.config.openGM&&(e=i.player.instanceModule.getMaxChapter(),t=i.player.instanceModule.getChapterMaxLevel(e)+1,i.gameScene.gotoBattleScene(e,t))},onClickDebug:function(){i.config.openGM&&i.gameScene.showPage(i.pageConstant.PAGE_TYPE_DEBUG,{})},update:function(e){var t;this.flyTimeCount+=e,.2<=this.flyTimeCount&&(this.flyTimeCount=0,this.cacheFlyEffect&&0<this.cacheFlyEffect.length)&&(t=this.cacheFlyEffect[0],this.flyCacheEffect(t.type,t.addValue,t.position,t.delayTime),this.cacheFlyEffect.splice(0,1)),this.checkPowerTime||(this.checkPowerTime=0),this.checkPowerTime+=e,1<=this.checkPowerTime&&(this.checkPowerTime=0,this.updatePowerTime())}}),cc._RF.pop()},{}],MainTowerHeroItemRender:[function(e,t){"use strict";cc._RF.push(t,"abbe7dTEO1GHZRDt8t/MIAM","MainTowerHeroItemRender");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{commonAtlas:{default:null,type:cc.SpriteAtlas},towerAtlas:{default:null,type:cc.SpriteAtlas}},afterLoad:function(){this.bgNode=cc.find("bg",this.node),this.heroBgSprite=cc.find("heroBg",this.node).getComponent(cc.Sprite),this.iconSprite=cc.find("icon",this.node).getComponent(cc.Sprite),this.addNode=cc.find("add",this.node),this.unlockLabel=cc.find("unlockLabel",this.node).getComponent(cc.Label),this.redPointNode=cc.find("redPoint",this.node),this.iconLightEffect=cc.find("icon_light",this.node).getComponent(cc.Animation),this.iconLightEffect.node.active=!1,this.changeNode=cc.find("change",this.node),this.changeNode.active=!1},initData:function(e,t,a,n){this._towerId=e,this._towerQuality=t,this._index=a,t=i.player.towerModule.getTowerQuality(this._towerId),this.isUnlock=t>=this._towerQuality,this.towerCfg=i.templateManager.getTowerTypeById(this._towerId),this.bgNode.active=!1,this.heroBgSprite.node.active=!1,this.iconSprite.node.active=!1,this.addNode.active=!1,this.bgNode.active=!1,this.unlockLabel.node.active=!1,this.redPointNode.active=!1,this.isUnlock?(this.heroId=i.player.towerModule.getTowerHeroIdByIndex(this._towerId,this._index),0<this.heroId?(a=i.templateManager.getHeroDataById(this.heroId),t=i.player.heroModule.getHeroQuality(this.heroId),t=i.templateManager.getHeroQualityDataById(t),this.heroBgSprite.node.active=!0,this.iconSprite.node.active=!0,this.iconSprite.node.scale=.8,this.iconSprite.spriteFrame=this.commonAtlas.getSpriteFrame(a.heroHead),this.heroBgSprite.spriteFrame=this.towerAtlas.getSpriteFrame(t.qualityHeadBg),n&&this.lastHeroId!=this.heroId&&this.runUpEffect(),this.changeNode.active=i.player.towerModule.getTowerCanChangeHero(this._towerId,this.heroId)):(this.addNode.active=!0,this.bgNode.active=!0,this.changeNode.active=!1,i.player.towerModule.getTowerHeroRed(this._towerId,this._index)?(this.redPointNode.active=!0,i.gameScene.redNodeAction(this.redPointNode)):this.redPointNode.active=!1),this.lastHeroId=this.heroId):(this.bgNode.active=!0,this.unlockLabel.node.active=!0,n=i.templateManager.getTowerQualityDataByLevel(this._towerId,this._towerQuality),i.lang.updateLabelString(this.unlockLabel,[i.lang.getGameText(n.qualityName)]))},runUpEffect:function(){var e=this;this.iconLightEffect.node.active=!0,this.iconLightEffect.setCurrentTime(0),this.iconLightEffect.play("icon_light"),this.iconLightEffect.on("finished",function(){e.iconLightEffect.node.active=!1})},onClick:function(){var e;this.isUnlock&&(this.unlockHeroList=i.player.towerModule.getCanChooseTowerHeros(this._towerId),0!=this.unlockHeroList.length?(e={source:i.constant.HERO_CHOOSE_SOURCE_TOWER,towerId:this._towerId},i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_HERO_CHOOSE_OBTAINED,e)):(e=i.lang.getArgGameText(i.GameTextCode.NO_TOWER_HERO,[i.lang.getGameText(this.towerCfg.name)]),i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,e)))}}),cc._RF.pop()},{}],MainTowerItemRender:[function(e,t){"use strict";cc._RF.push(t,"651abGq4xlAA7+Kt3UOfe6D","MainTowerItemRender");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{heroItemPrefab:{default:null,type:cc.Prefab},towerAtlas:{default:null,type:cc.SpriteAtlas}},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.SHOW_AD_OVER_AD_TOWER_UP_LEVEL,function(t){t.params==e._towerId&&e.showAdOver()}),this.registerListener(i.GameEventType.UPDATE_TOWER_HERO_CHOOSE_INFO,function(t){t==e._towerId&&e.updateGuardsItemList(!0)})},afterLoad:function(){this.bgSprite=cc.find("bg",this.node).getComponent(cc.Sprite),this.bg1Sprite=cc.find("bg1",this.node).getComponent(cc.Sprite),this.bg1Label=cc.find("bg1/label",this.node).getComponent(cc.Label),this.towerSpine=cc.find("towerSpine",this.node).getComponent(sp.Skeleton),this.levelLabel=cc.find("levelLayout/label1",this.node).getComponent(cc.Label),this.nameLabel=cc.find("levelLayout/label2",this.node).getComponent(cc.Label),this.towerNeedLevelLabel=cc.find("levelLayout/recommendLevel",this.node).getComponent(cc.Label),this.buttonLayout=cc.find("buttonLayout",this.node),this.strongerButtonNode=cc.find("strongerButton",this.buttonLayout),this.strongerLabelNode=cc.find("background/label",this.strongerButtonNode),this.strongerFreeLabelNode=cc.find("background/freeLabel",this.strongerButtonNode),this.strongerAdLayoutNode=cc.find("background/adLayout",this.strongerButtonNode),this.strongerTimeNode=cc.find("background/time",this.strongerButtonNode),this.strongerSilverLayoutNode=cc.find("background/silverLayout",this.strongerButtonNode),this.strongerSilverCostLabel=cc.find("number",this.strongerSilverLayoutNode).getComponent(cc.Label),this.strongerMaxLabel=cc.find("background/maxLabel",this.strongerButtonNode).getComponent(cc.Label),this.strongerNodeEffect=cc.find("background/button_ring",this.strongerButtonNode).getComponent(cc.Animation),this.strongerNodeEffect.node.active=!1,this.wakeButtonNode=cc.find("wakeButton",this.buttonLayout),this.wakeButtonBackground=cc.find("background",this.wakeButtonNode).getComponent(cc.Sprite),this.wakeLockedLabel=cc.find("background/lockedLabel",this.wakeButtonNode).getComponent(cc.Label),this.wakeLayoutNode=cc.find("background/layout",this.wakeButtonNode),this.wakeLayoutCostLabel=cc.find("number",this.wakeLayoutNode).getComponent(cc.Label),this.wakeLabelNode=cc.find("background/label",this.wakeButtonNode),this.wakeMaxLabel=cc.find("background/maxLabel",this.wakeButtonNode).getComponent(cc.Label),this.wakeButtonEffect=cc.find("background/button_ring",this.wakeButtonNode).getComponent(cc.Animation),this.wakeButtonEffect.node.active=!1,this.powerLayoutNode=cc.find("powerLayout",this.node),this.powerCapacityNode=cc.find("powerCapacity",this.powerLayoutNode),this.powerCapacityLabel=cc.find("label",this.powerLayoutNode).getComponent(cc.Label),this.powerCapacityAddLabel=cc.find("labelAdd",this.powerLayoutNode).getComponent(cc.Label),this.skillDescNode=cc.find("desc",this.node),this.skillDescLabel1=cc.find("label1",this.skillDescNode).getComponent(cc.Label),this.skillDescLabel2=cc.find("label1/label2",this.skillDescNode).getComponent(cc.Label),this.starLayoutNode=cc.find("starLayout",this.node),this.unlockTipsLabel=cc.find("unlockTips",this.node).getComponent(cc.Label),this.heroLayoutNode=cc.find("heroLayout",this.node),this.heroItemObjList=[],this.upgradeAnimation=cc.find("tower_upgrade",this.node).getComponent(cc.Animation),this.upgradeAnimation.node.active=!1},setType:function(e,t){this._towerId=e,this._host=t,this.towerTypeCfg=i.templateManager.getTowerTypeById(this._towerId)},initData:function(e){this.updateTime=0,this.isCding=i.player.towerModule.getTowerIsCding(this._towerId),this.isUnlock=i.player.towerModule.getTowerIsUnlock(this._towerId),this.towerLevel=i.player.towerModule.getTowerLevel(this._towerId),this.towerStarLevelCfg=i.templateManager.getTowerStarDataByLevel(this._towerId,this.towerLevel),this.towerQuality=i.player.towerModule.getTowerQuality(this._towerId),this.towerQualityCfg=i.templateManager.getTowerQualityDataByLevel(this._towerId,this.towerQuality),this.checkNodeActive(),this.levelLabel.node.active=0<this.towerLevel,i.lang.updateLabelString(this.levelLabel,[0==this.towerLevel?1:this.towerLevel]);var t=i.player.instanceModule.getChapterMaxLevelCfg();t&&0!=this.towerLevel?(this.towerNeedLevelLabel.node.active||(this.towerNeedLevelLabel.node.active=!0),i.lang.updateLabelString(this.towerNeedLevelLabel,[t.towerNeedLevel])):this.towerNeedLevelLabel.node.active=!1,this.nameLabel.string=i.lang.getGameText(this.towerTypeCfg.name),this.updateBgNode(),this.updateTowerSpine(),this.updateSkillDescNode(),this.updateStarLayout();var a=this.strongerTimeNode.active;this.isUnlock?(this.updateStrongerButtonNode(),this.updateWakeButtonNode(),this.updateGuardsItemList()):(t=i.templateManager.getChapterDataById(this.towerTypeCfg.instanceNum[0]),i.lang.updateLabelString(this.unlockTipsLabel,[i.lang.getGameText(t.name),this.towerTypeCfg.instanceNum[1]])),!this.isCding||e&&a===this.strongerTimeNode.active||i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_TOWER_PAGE_AD,this._towerId)},checkNodeActive:function(){this.heroLayoutNode.active=this.isUnlock,this.wakeButtonNode.active=this.isUnlock,this.strongerButtonNode.active=this.isUnlock,this.unlockTipsLabel.node.active=!this.isUnlock},updateBgNode:function(){this.bgSprite.spriteFrame=this.towerAtlas.getSpriteFrame(this.towerQualityCfg.bg),this.bg1Sprite.spriteFrame=this.towerAtlas.getSpriteFrame(this.towerQualityCfg.iconFont),this.bg1Label.string=i.lang.getGameText(this.towerQualityCfg.qualityName),this.bg1Label.node.color=cc.color("#"+this.towerQualityCfg.autoUpgradeFontColor)},updateStrongerButtonNode:function(){if(i.player.towerModule.getIsMaxLevel(this._towerId))return this.strongerMaxLabel.node.active=!0,this.strongerSilverLayoutNode.active=!1,this.strongerLabelNode.active=!1,this.strongerAdLayoutNode.active=!1,this.strongerTimeNode.active=!1,this.strongerFreeLabelNode.active=!1,this.strongerButtonNode.getComponent(cc.Button).interactable=!1,void this.stopStrongerButtonEffect();var e;this.strongerMaxLabel.node.active=!1,this.strongerSilverLayoutNode.active=this.towerStarLevelCfg.break!=i.constant.MAIN_TOWER_UP_LEVEL_BREAK,this.strongerLabelNode.active=this.towerStarLevelCfg.break!=i.constant.MAIN_TOWER_UP_LEVEL_BREAK,this.strongerAdLayoutNode.active=this.towerStarLevelCfg.break==i.constant.MAIN_TOWER_UP_LEVEL_BREAK&&this.isCding,this.strongerTimeNode.active=this.towerStarLevelCfg.break==i.constant.MAIN_TOWER_UP_LEVEL_BREAK&&this.isCding,this.strongerFreeLabelNode.active=this.towerStarLevelCfg.break==i.constant.MAIN_TOWER_UP_LEVEL_BREAK&&!this.isCding,this.towerStarLevelCfg.break==i.constant.MAIN_TOWER_UP_LEVEL_BREAK?(this.isCding&&(e=i.player.towerModule.getTowerCdLastTime(this._towerId),this.strongerTimeNode.getComponent(cc.Label).string=i.timeUtil.secondFormat(e)),this.playStrongerButtonEffect()):(this.strongerSilverCostLabel.string=i.Utils.formatBigNumberForLabel(this.towerStarLevelCfg.coinNum),this.updateStrongerCostColor())},updateStrongerCostColor:function(){var e=i.player.playerModule.isSilverEnough(this.towerStarLevelCfg.coinNum),t=i.player.towerModule.getIsMaxLevel(this._towerId);this.strongerSilverCostLabel.node.color=cc.color(e?"#FFFFFF":"#FF0000");var a=e?"#984B00":"#FFFFFF";this.strongerSilverCostLabel.node.getComponent(cc.LabelOutline).color=cc.color(a),e&&!t?this.playStrongerButtonEffect():this.stopStrongerButtonEffect()},updateWakeButtonNode:function(){if(i.player.towerModule.getIsMaxQuality(this._towerId))return this.wakeMaxLabel.node.active=!0,this.wakeLayoutNode.active=!1,this.wakeLockedLabel.node.active=!1,this.wakeLabelNode.active=!1,this.wakeButtonNode.getComponent(cc.Button).interactable=!1,void this.stopWakeButtonEffect();this.wakeButtonNode.active=!0,this.canUpQuality=i.player.towerModule.getCanUpQuality(this._towerId),this.canUpQuality?this.wakeButtonBackground.setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite")):(this.wakeButtonBackground.setMaterial(0,cc.Material.getBuiltinMaterial("2d-gray-sprite")),i.lang.updateLabelString(this.wakeLockedLabel,[i.player.towerModule.getUpQualityTowerLevel(this._towerId)])),this.updateWakeCostColor(),this.wakeLayoutCostLabel.string=i.Utils.formatBigNumberForLabel(this.towerQualityCfg.diamond),this.wakeButtonNode.getComponent(cc.Button).interactable=this.canUpQuality,this.wakeLayoutNode.active=this.canUpQuality,this.wakeLabelNode.active=this.canUpQuality,this.wakeLockedLabel.node.active=!this.canUpQuality,this.wakeMaxLabel.node.active=!1},updateWakeCostColor:function(){var e=i.player.playerModule.isGoldBullionEnough(this.towerQualityCfg.diamond),t=i.player.towerModule.getIsMaxQuality(this._towerId);this.wakeLayoutCostLabel.node.color=cc.color(e?"#FFFFFF":"#FF0000");var a=e?"#346602":"#FFFFFF";this.wakeLayoutCostLabel.node.getComponent(cc.LabelOutline).color=cc.color(a),this.canUpQuality&&e&&!t?this.playWakeButtonEffect():this.stopWakeButtonEffect()},updateTowerSpine:function(){var e=this,t="effect/battle/tower/"+this.towerTypeCfg.spin;i.mainScene.getTowerSpineData(t,function(t){t&&(e.towerSpine.node.active=!0,e.towerSpine.node.scale=.65,e.towerSpine.skeletonData=t,e.towerSpine.premultipliedAlpha=e.towerTypeCfg.isPremultipliedAlpha,e.towerSpine.clearTrack(0),e.towerSpine.setAnimation(0,e.towerTypeCfg.actionName,!0))})},updateGuardsItemList:function(e){for(var t,a=i.templateManager.getTowerQualityHeroListByType(this._towerId),n=0;n<a.length;n++){this.heroItemObjList.length<=n&&(o=(t=cc.instantiate(this.heroItemPrefab)).getComponent("MainTowerHeroItemRender"),this.heroLayoutNode.addChild(t),this.heroItemObjList.push(o));var o=a[n];this.heroItemObjList[n].initData(this._towerId,o,n,e)}},updateStarLayout:function(){for(var e=this.towerQualityCfg.starNum,t=this.towerQualityCfg.starBgNum,i=this.starLayoutNode.children,a=0;a<i.length;a++){var n=(o=i[a]).getChildByName("icon"),o=o.getChildByName("iconGrey");n.active=a<e,o.active=a<t}},updateSkillDescNode:function(){this.skillDescLabel2.node.active=!1,this.powerCapacityAddLabel.node.active=!1;var e=i.player.towerModule.getIsMaxQuality(this._towerId),t=this.towerQualityCfg;e||(t=i.templateManager.getTowerQualityDataByLevel(this._towerId,this.towerQuality+1),this.skillDescLabel2.node.active=!0,a=i.lang.getGameText(t.qualityUnlockName),this.skillDescLabel2.string=i.lang.getArgGameText(i.GameTextCode.TOWER_QUALITY_UNLOCK,[a]));var a=t.attrType;a=i.templateManager.getNatureDataById(a),t=t.attrValue[1]/100+"%",this.skillDescLabel1.string=i.lang.getGameText(a.name)+": "+i.lang.getArgGameText(a.desc,[t]),this.isUnlock?(this.powerLayoutNode.active=!0,a=i.player.towerModule.getIsMaxLevel(this._towerId),t=new i.BigNumber(this.towerStarLevelCfg.ability).times(this.towerQualityCfg.fightValue).div(1e4),this.powerCapacityLabel.string=i.Utils.formatBigNumberForLabel(t.toFixed(0)),a?this.powerCapacityAddLabel.node.active=!1:(this.powerCapacityAddLabel.node.active=!0,a=i.templateManager.getTowerStarDataByLevel(this._towerId,this.towerLevel+1),t=new i.BigNumber(a.ability).times(this.towerQualityCfg.fightValue).div(1e4).minus(t),this.powerCapacityAddLabel.string="+"+i.Utils.formatBigNumberForLabel(t.toFixed(0)))):this.powerLayoutNode.active=!1},playStrongerButtonEffect:function(){this.strongerNodeEffect.node.active||(this.strongerNodeEffect.node.active=!0,this.strongerNodeEffect.stop(),this.strongerNodeEffect.setCurrentTime(0),this.strongerNodeEffect.play("button_ring"))},stopStrongerButtonEffect:function(){i.Logger.debug("this.strongerNodeEffect.node.active: "+this.strongerNodeEffect.node.active),this.strongerNodeEffect.node.active&&(this.strongerNodeEffect.node.active=!1)},playWakeButtonEffect:function(){this.wakeButtonEffect.node.active||(this.wakeButtonEffect.node.active=!0,this.wakeButtonEffect.stop(),this.wakeButtonEffect.setCurrentTime(0),this.wakeButtonEffect.play("button_ring"))},stopWakeButtonEffect:function(){this.wakeButtonEffect.node.active&&(this.wakeButtonEffect.node.active=!1)},onClickUpLevel:function(){var e,t=this;this.towerStarLevelCfg.break!=i.constant.MAIN_TOWER_UP_LEVEL_BREAK?i.player.playerModule.isSilverEnough(this.towerStarLevelCfg.coinNum)?i.player.playerModule.costSilverNum(this.towerStarLevelCfg.coinNum,i.constant.ITEM_CONSUME_SOURCE_TOWER_UP)&&(i.soundsUtil.playSoundEffect("success_tower_upgrade"),i.player.towerModule.addTowerLevel(this._towerId,i.constant.MAIN_TOWER_UP_LEVEL_TYPE_COIN),this.upgradeAnimation.node.active=!0,this.upgradeAnimation.stop(),this.upgradeAnimation.setCurrentTime(0),this.upgradeAnimation.play("tower_upgrade"),this.upgradeAnimation.on("finished",function(){t.upgradeAnimation.node.active=!1}),this.initData(!0),this._host.updateAllCostColor()):(e=i.lang.getGameText(i.GameTextCode.COIN_NOT_ENOUGH),i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,e)):this.isCding?i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,[i.GameEventType.SHOW_AD_OVER_AD_TOWER_UP_LEVEL,this._towerId]):i.gameScene.checkServerTime(function(){t.upLevelDeal()},!1,function(){i.Logger.debug("\u65f6\u95f4\u5f02\u5e38")})},showAdOver:function(){this.upLevelDeal()},upLevelDeal:function(){i.soundsUtil.playSoundEffect("success_tower_break_through"),i.player.towerModule.addTowerLevel(this._towerId,i.constant.MAIN_TOWER_UP_LEVEL_TYPE_AD),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_TOWER_WAKE,{towerId:this._towerId,type:i.constant.MAIN_COMMON_CARD_TYPE_TOWER_LEVEL}),this.initData(!0)},onClickUpQuality:function(){var e;i.player.towerModule.getCanUpQuality(this._towerId)&&(i.player.playerModule.isGoldBullionEnough(this.towerQualityCfg.diamond)?i.player.playerModule.costGoldBullionNum(this.towerQualityCfg.diamond,i.constant.ITEM_CONSUME_SOURCE_TOWER_QUALITY)&&(i.BI.onEvent(i.biConstant.EVENT_TYPE_DIAMOND_CONSUME,i.biConstant.EVENT_ID_DIAMOND_TOWER_UP_QUALITY,this.towerQualityCfg.diamond),i.player.towerModule.addTowerQuality(this._towerId),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_TOWER_WAKE,{towerId:this._towerId,type:i.constant.MAIN_COMMON_CARD_TYPE_TOWER_QUALITY}),this.initData(!0),this._host.updateAllCostColor(),i.soundsUtil.playSoundEffect("success_tower_up")):(e=i.lang.getGameText(i.GameTextCode.ENOUGH_DIAMONDS),i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,e)))},getTowerType:function(){return this._towerId},update:function(e){!this.isCding||(this.updateTime+=e,this.updateTime<1)||(this.updateTime=0,e=i.player.towerModule.getTowerCdLastTime(this._towerId),this.strongerTimeNode.getComponent(cc.Label).string=i.timeUtil.secondFormat(e),e<0&&this.initData(!0))}}),cc._RF.pop()},{}],MainTowerPage:[function(e,t){"use strict";cc._RF.push(t,"f152aqiNIRN4ISXowOrhPQ+","MainTowerPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{itemRenderPrefab:{default:null,type:cc.Prefab},vanItemRender:{default:null,type:cc.Prefab},towerAtlas:{default:null,type:cc.SpriteAtlas}},onLoadPage:function(){this.checkIndex=0,this.scrollView=cc.find("content/ScrollView",this.node).getComponent(cc.ScrollView),this.contentNode=cc.find("content/ScrollView/view/content",this.node),this.towerLayoutNode=cc.find("towerLayout",this.contentNode),this.divideLayoutNode=cc.find("divideLayout",this.contentNode),this.divideLayoutNode.opacity=1,this.titleNode=cc.find("titleParent/title",this.node),this.vanGuardsNode=cc.find("vanLayout",this.contentNode),this.vanActionNode=cc.find("vanLayout",this.vanGuardsNode),this.vanItemObjList=[],this.contentItemObjList=[],this.towerLayoutHeight=0,i.gameScene.isIphoneX()&&i.Utils.addNodeTopSpace(this.node)},showPageBegan:function(){i.player.towerModule.setHaveNewTowerFalse(),this.divideLayoutNode.opacity=1,this.updateVanItem(),this.typeList=i.templateManager.getTowerTypeSortList(),this.hideAllItem(),this.initValues(),i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_TOWER_PAGE)},initValues:function(){this.contentHeight=0,this.towerLayoutHeight=0,this.initItemDone=!1,this.canRunItem=!1,this.areadyRunItem=!1,this.allActionIsDone=!1,this.checkIndex=0,this.vanGuardsNode.stopAllActions(),this.divideLayoutNode.stopAllActions()},showPageEnded:function(){this.resetNodePosition(),this.flyInVanGuard()},updateVanItem:function(){var e=[];e.push(i.player.heroModule.getBattlePioneerHero()),e.push(i.player.heroModule.getBattleAdPioneerHero());for(var t=0;t<e.length;t++){var a,n=e[t];t>=this.vanItemObjList.length&&(a=cc.instantiate(this.vanItemRender),this.vanGuardsNode.addChild(a),a=a.getComponent("TowerVanGuardsItemRender"),this.vanItemObjList.push(a)),this.vanItemObjList[t].initData(n)}this.vanGuardsNode.getComponent(cc.Layout).updateLayout()},resetNodePosition:function(){this.vanGuardsNode.position=cc.v2(-this.vanGuardsNode.width,0);var e,t=0;this.vanGuardsNode.active?(e=-this.vanGuardsNode.height-this.divideLayoutNode.height/2-8,this.divideLayoutNode.position=cc.v2(0,e),t=this.vanGuardsNode.height):this.divideLayoutNode.position=cc.v2(0,-this.divideLayoutNode.height/2-8),i.Logger.debug("this.vanGuardsNode.height: "+this.vanGuardsNode.height),this.contentHeight+=t+8,this.contentHeight+=this.divideLayoutNode.height+8,this.contentNode.height=this.contentHeight,this.towerLayoutNode.position=cc.v2(0,-t-this.divideLayoutNode.height-16)},nodeToScreenOut:function(){var e=i.gameScene.isIphoneX()?i.Utils.getTopFixSize():0;this.titleNode.y=this.titleNode.height+e+10},nodeHoming:function(){var e=cc.moveTo(.3,cc.v2(0,0)),t=cc.callFunc(function(){},this);t=cc.sequence(e,t),this.titleNode.stopAllActions(),this.titleNode.runAction(t)},flyInVanGuard:function(){var e,t;this.vanGuardsNode.active?(e=cc.moveTo(.3,cc.v2(0,this.vanGuardsNode.y)),t=cc.callFunc(function(){this.canRunItem=!0},this),t=cc.sequence(e,t),this.vanGuardsNode.stopAllActions(),this.vanGuardsNode.runAction(t)):this.canRunItem=!0},nodeScaleEffect:function(){this.divideLayoutNode.opacity=255,this.divideLayoutNode.scale=0;var e=cc.scaleTo(.1,1.1),t=cc.scaleTo(.1,1),i=cc.delayTime(.2),a=cc.callFunc(function(){},this);a=cc.sequence(e,t,i,a),this.divideLayoutNode.stopAllActions(),this.divideLayoutNode.runAction(a)},runItemEffect:function(){for(var e=0;e<this.contentItemObjList.length;e++)this.setItemPosition(this.contentItemObjList[e].node,e);this.contentNode.height+=this.towerLayoutHeight},setItemPosition:function(e,t){this.areadyRunItem=!0;var i=this.scrollView.node.convertToWorldSpaceAR(cc.v2(0,0));(i=this.towerLayoutNode.convertToNodeSpaceAR(i)).y+=e.height/2,e.position=i,e.opacity=255,this.itemMoveAction(e,t)},itemMoveAction:function(e,t){var i=.1+.05*(this.contentItemObjList.length-t),a=-e.height*t-5*t-e.height/2,n=cc.delayTime(i),o=cc.moveTo(.2,cc.v2(e.x,a)),s=cc.moveBy(.1,cc.v2(0,10));i=cc.moveBy(.1,cc.v2(0,-10)),a=cc.callFunc(function(){0==t&&(this.nodeScaleEffect(),this.allActionIsDone=!0)},this),a=cc.sequence(n,o,s,i,a),e.stopAllActions(),e.runAction(a)},hideAllItem:function(){for(var e=0;e<this.contentItemObjList.length;e++)this.contentItemObjList[e].node.opacity=1},updateAllCostColor:function(){for(var e=0;e<this.contentItemObjList.length;e++){var t=this.contentItemObjList[e];t.updateStrongerCostColor(),t.updateWakeCostColor()}},onClickClose:function(){this.closePage()},guideOver:function(e){var t=this.getDefaultGuideTower(e);e===i.constant.GUIDE_TYPE_UPGRADE_TOWER_1_2||e===i.constant.GUIDE_TYPE_UPGRADE_TOWER_1_3||e===i.constant.GUIDE_TYPE_UPGRADE_TOWER_2_2||e===i.constant.GUIDE_TYPE_UPGRADE_TOWER_2_3?t.onClickUpLevel():e!==i.constant.GUIDE_TYPE_GET_HERO_1_9&&e!==i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_2_2&&e!==i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_3_2&&e!==i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_4_2||t.heroItemObjList[0].onClick()},getDefaultGuideTower:function(e){var t=this.contentItemObjList[0],a=-1;e===i.constant.GUIDE_TYPE_UPGRADE_TOWER_1_2||e===i.constant.GUIDE_TYPE_UPGRADE_TOWER_1_3?a=i.constant.GUIDE_DEFAULT_TOWER_1_TYPE:e===i.constant.GUIDE_TYPE_UPGRADE_TOWER_2_2||e===i.constant.GUIDE_TYPE_UPGRADE_TOWER_2_3?a=i.constant.GUIDE_DEFAULT_TOWER_2_TYPE:e===i.constant.GUIDE_TYPE_GET_HERO_1_9?a=i.templateManager.getHeroDataById(i.constant.GUIDE_DEFAULT_HERO_ID).heroInTowerType[0]:e===i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_2_2?a=i.constant.TOWER_TYPE_ARROW:e===i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_3_2?a=i.constant.TOWER_TYPE_BARRACK:e===i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_4_2&&(a=i.constant.TOWER_TYPE_MAGIC);for(var n=0;n<this.contentItemObjList.length;n++)if(this.contentItemObjList[n].getTowerType()===a){t=this.contentItemObjList[n];break}return t},update:function(){var e,t,a,n,o,s,r,c;this.initItemDone&&this.canRunItem&&!this.areadyRunItem&&this.runItemEffect(),this.checkIndex<this.typeList.length?(this.checkIndex>=this.contentItemObjList.length&&((e=(t=cc.instantiate(this.itemRenderPrefab)).getComponent("MainTowerItemRender")).setType(this.typeList[this.checkIndex],this),this.towerLayoutNode.addChild(t),this.contentItemObjList.push(e)),(t=this.contentItemObjList[this.checkIndex]).node.opacity=1,t.node.stopAllActions(),t.initData(),this.towerLayoutHeight+=t.node.height+5,this.checkIndex++,this.checkIndex==this.typeList.length&&(this.initItemDone=!0,this.towerLayoutNode.height=this.towerLayoutHeight,i.Logger.debug("this.towerLayoutHeight: "+this.towerLayoutHeight))):this.allActionIsDone&&i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_UPGRADE_TOWER_1_2)?(t=(e=this.getDefaultGuideTower(i.constant.GUIDE_TYPE_UPGRADE_TOWER_1_2)).node.convertToWorldSpaceAR(cc.v2(0,e.node.height/2+10)),(t=this.contentNode.convertToNodeSpaceAR(t)).y-e.node.height<-this.contentNode.parent.height&&this.scrollView.scrollToOffset(cc.v2(0,-t.y)),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_UPGRADE_TOWER_1_2,e.strongerButtonNode)):this.allActionIsDone&&i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_UPGRADE_TOWER_1_3)?(a=this.getDefaultGuideTower(i.constant.GUIDE_TYPE_UPGRADE_TOWER_1_3),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_UPGRADE_TOWER_1_3,a.strongerButtonNode)):this.allActionIsDone&&i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_UPGRADE_TOWER_2_2)?(a=(n=this.getDefaultGuideTower(i.constant.GUIDE_TYPE_UPGRADE_TOWER_2_2)).node.convertToWorldSpaceAR(cc.v2(0,n.node.height/2+10)),(a=this.contentNode.convertToNodeSpaceAR(a)).y-n.node.height<-this.contentNode.parent.height&&this.scrollView.scrollToOffset(cc.v2(0,-a.y)),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_UPGRADE_TOWER_2_2,n.strongerButtonNode)):this.allActionIsDone&&i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_UPGRADE_TOWER_2_3)?(n=this.getDefaultGuideTower(i.constant.GUIDE_TYPE_UPGRADE_TOWER_2_3),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_UPGRADE_TOWER_2_3,n.strongerButtonNode)):this.allActionIsDone&&i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_GET_HERO_1_9)?(o=(s=this.getDefaultGuideTower(i.constant.GUIDE_TYPE_GET_HERO_1_9)).node.convertToWorldSpaceAR(cc.v2(0,s.node.height/2+10)),(o=this.contentNode.convertToNodeSpaceAR(o)).y-s.node.height<-this.contentNode.parent.height&&this.scrollView.scrollToOffset(cc.v2(0,-o.y)),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_GET_HERO_1_9,s.heroItemObjList[0].node)):this.allActionIsDone&&i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_2_2)?(s=(o=this.getDefaultGuideTower(i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_2_2)).node.convertToWorldSpaceAR(cc.v2(0,o.node.height/2+10)),(s=this.contentNode.convertToNodeSpaceAR(s)).y-o.node.height<-this.contentNode.parent.height&&this.scrollView.scrollToOffset(cc.v2(0,-s.y)),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_2_2,o.heroItemObjList[0].node)):this.allActionIsDone&&i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_3_2)?(r=(c=this.getDefaultGuideTower(i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_3_2)).node.convertToWorldSpaceAR(cc.v2(0,0)),r=cc.winSize.height/2-r.y,this.scrollView.scrollToOffset(cc.v2(0,r)),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_3_2,c.heroItemObjList[0].node)):this.allActionIsDone&&i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_4_2)&&(c=(r=this.getDefaultGuideTower(i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_4_2)).node.convertToWorldSpaceAR(cc.v2(0,0)),c=cc.winSize.height/2-c.y,this.scrollView.scrollToOffset(cc.v2(0,c)),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_HERO_ENTER_TOWER_4_2,r.heroItemObjList[0].node))}}),cc._RF.pop()},{}],MainWorldPage:[function(e,t){"use strict";cc._RF.push(t,"4541dzvdmxOUJDfg6jRKet7","MainWorldPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{mapItemPrefab:cc.Prefab,arrowPrefab:cc.Prefab,garrisonExpTipsPrefab:cc.Prefab,cloudAtlas:{default:null,type:cc.SpriteAtlas}},onLoadPage:function(){this.mapContentNode=cc.find("content",this.node),this.mapBgNode=cc.find("bg",this.mapContentNode),this.mapBgSprite=this.mapBgNode.getComponent(cc.Sprite),this.campNode=cc.find("area",this.mapContentNode),this.infoNode=cc.find("info",this.node),this.goButtonNode=cc.find("goButton",this.infoNode),this.infoLabel=cc.find("label",this.infoNode).getComponent(cc.Label),this.infoLockedLabel=cc.find("lockedLabel",this.infoNode).getComponent(cc.Label),this.quickGarrisonSprite=cc.find("quickGarrisonButton/background",this.node).getComponent(cc.Sprite),this.quickGarrisonVipLabel=cc.find("quickGarrisonButton/vip",this.node).getComponent(cc.Label),this.boxRewardNode=cc.find("box",this.node),this.quickBtnNode=cc.find("quickGarrisonButton",this.node),this.speedBtnNode=cc.find("speedUpButton",this.node),this.titleNode=cc.find("title",this.node),i.gameScene.isIphoneX()&&i.Utils.addNodeTopSpace(this.titleNode),this.resetMapScrollView(),this.createCloudFly(),this.infoActionMaxScaleRate=2,this.infoActionMaxTime=.3,this.infoActionTime=0,this.hideTime=0},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.REFRESH_WORLD_DEFEND_ITEM,function(){e.updateQuickGarrisonInfo()})},registerTouch:function(){this.mapContentNode.on("touchstart",this.onTouchStart,this),this.mapContentNode.on("touchmove",this.onTouchMove,this),this.mapContentNode.on("touchend",this.onTouchEnd,this),this.mapContentNode.on("touchcancel",this.onTouchCancel,this)},onTouchStart:function(e){if(this.hideGarrisonExpTips(),!this.showingInfo){i.Logger.debug("world click onTouchStart");var t,a=e.getLocation();for(t in this.campTagMap)if(this.campTagMap.hasOwnProperty(t)){var n=this.campTagMap[t];if(this.polygonHitTest(n.node.convertToNodeSpaceAR(a),n.collider)){this.touchCampData=n;break}}this.startTouchPos=a,this.startMapContentPos=this.mapContentNode.position}},onTouchMove:function(e){var t;this.startTouchPos&&!this.showingInfo&&(t=e.getLocation(),e=this.startTouchPos.sub(t).mag(),this.touchCampData&&10<e&&this.removeTouchCampNode(),e=this.startMapContentPos.x+(t.x-this.startTouchPos.x),t=this.startMapContentPos.y+(t.y-this.startTouchPos.y),this.scrollToPos(e,t),this.canTouchMove=!1)},onTouchEnd:function(){this.showingInfo||(i.Logger.debug("world click onTouchEnd"),this.touchCampData&&(this.showInfo(this.touchCampData),this.removeTouchCampNode()),this.startTouchPos&&(this.startTouchPos=null))},onTouchCancel:function(){this.showingInfo||(i.Logger.debug("world click onTouchCancel"),this.removeTouchCampNode(),this.startTouchPos&&(this.startTouchPos=null))},removeTouchCampNode:function(){this.touchCampData&&(this.touchCampData=null)},polygonHitTest:function(e,t){return cc.Intersection.pointInPolygon(e,t.points)},checkImgSprite:function(){for(var e=["WorldMap_Jing","WorldMap_Huang","WorldMap_Ji","WorldMap_Han","WorldMap_Liang","WorldMap_Liao","WorldMap_Man","WorldMap_Shu","WorldMap_Wei","WorldMap_Wu"],t=0;t<10;t++){var i=cc.find("content/area/camp"+Math.floor(t+1),this.node),a=i.getComponent(cc.Sprite),n=this.worldAtlas.getSpriteFrame(e[t]);a.spriteFrame=n,i.active=!0}},createWorldSprite:function(e,t){this.worldSpriteList||(this.worldSpriteList=[]);var i=new cc.Node,a=i.addComponent(cc.Sprite);e.addChild(i),this.worldSpriteList.push(i),a.spriteFrame=t,a.sizeMode=e.getComponent(cc.Sprite).sizeMode,i.width=e.width,i.height=e.height},showPageBegan:function(){this.worldBgAtlas=null,i.gameScene.gameState=i.constant.GAME_STATE_WORLD,i.gameScene.showLoading(),this.loadingPrecent=0,this.loadImgAtlas()},loadImgAtlas:function(){var e=this,t=i.player.commonModule.isLowIosDevice()?"textures/worldMap/worldBg_small":"textures/worldMap/worldBg";cc.loader.loadRes(t,cc.SpriteAtlas,function(t,i){if(t)return cc.error(t),void e.loadImgAtlas();e.worldBgAtlas=i,i=e.worldBgAtlas.getSpriteFrame("world_bg"),e.mapBgSprite.spriteFrame=i,e.mapBgSprite.node.active=!0}),e.worldAtlas=null,t=i.player.commonModule.isLowIosDevice()?"textures/worldMap/worldMap_small":"textures/worldMap/worldMap",cc.loader.loadRes(t,cc.SpriteAtlas,function(t,a){return t?(cc.error(t),void e.loadImgAtlas()):(e.worldAtlas=a,e.checkImgSprite(),void i.gameScene.hideLoading())})},initData:function(){this.showCampData=null,this.infoActionTime=0,this.hideTime=0,this.showingInfo=!0,this.infoNode.active=!1,this.infoNode.opacity=0,this.infoNode.stopAllActions(),this.showBtnNode(),this.initFinish?this.resetMapScrollView():(this.initWorldMap(),this.registerTouch(),this.initFinish=!0);for(var e=0;e<this.mapItemList.length;e++)this.mapItemList[e].mapAtlas=this.worldAtlas;this.updateWorldMap(!0),this.checkGuideCount=2,this.updateQuickGarrisonInfo()},hideBtnNode:function(){this.boxRewardNode.active=!1,this.quickBtnNode.active=!1,this.speedBtnNode.active=!1},showBtnNode:function(){this.boxRewardNode.active=0<i.player.instanceModule.getCanRewardBoxList().length,this.quickBtnNode.active=!0,this.speedBtnNode.active=!0},updateQuickGarrisonInfo:function(){var e=i.player.vipModule.getCurVipLevel(),t=i.player.vipModule.getVipUnlockCfg(i.constant.VIP_PRIVILEGE_TYPE_QUICK_DEFEND),a=e>=t.vipLevel;e=i.player.instanceModule.getChapterHaveCanDefend(),this.quickGarrisonSprite.setMaterial(0,cc.Material.getBuiltinMaterial(a&&e?"2d-sprite":"2d-gray-sprite")),i.lang.updateLabelString(this.quickGarrisonVipLabel,[t.vipLevel]),this.quickGarrisonVipLabel.node.active=!a},resetMapScrollView:function(){var e=i.templateManager.getGameParamValue("worldMapDefaultHeight")/1e4;this.mapScale=cc.winSize.height/2048*e,this.mapContentNode.width=2048*this.mapScale,this.mapContentNode.height=2048*this.mapScale,this.mapBgNode.width=2048*this.mapScale,this.mapBgNode.height=2048*this.mapScale,this.campNode.scale=this.mapScale},scrollToPoint:function(e,t,i){var a=e.x,n=e.y;t&&(a=-e.x*this.mapScale,n=-e.y*this.mapScale),this.scrollToPos(a,n,i)},scrollToPos:function(e,t,i){var a=cc.winSize.width/2-2048*this.mapScale/2,n=2048*this.mapScale/2-cc.winSize.width/2;e=Math.min(e,n),e=Math.max(e,a),t=Math.min(t,2048*this.mapScale/2-cc.winSize.height/2),t=Math.max(t,cc.winSize.height/2-2048*this.mapScale/2),i&&0<i?(n=0<e?a:n,this.mapContentNode.stopAllActions(),this.mapContentNode.position=cc.v2(n,t),this.mapContentNode.runAction(cc.sequence(cc.moveTo(i,cc.v2(e,t)),cc.callFunc(function(){this.showingInfo=!1},this)))):(this.mapContentNode.position=cc.v2(e,t),this.showingInfo=!1)},showInfo:function(e){this.showingInfo=!0,this.infoActionTime=this.infoActionMaxTime,this.isShowAction=!0,this.showCampData=e;var t=this.mapContentNode.position;(o=e.mapItem.node.position).y-=100;var a,n,o=cc.v2(o.x*this.mapScale*this.infoActionMaxScaleRate,o.y*this.mapScale*this.infoActionMaxScaleRate);for(a in this.infoActionStartScale=this.mapScale,this.infoActionOffestX=-o.x-t.x,this.infoActionOffestY=-o.y-t.y,this.infoActionScaleDiff=(this.infoActionMaxScaleRate-1)*this.mapScale,this.campTagMap)this.campTagMap.hasOwnProperty(a)&&(n=this.campTagMap[a].chapterData.id===e.chapterData.id,this.campTagMap[a].mapItem.updateSelect(n));this.infoNode.active=!0,this.infoNode.stopAllActions(),this.infoNode.runAction(cc.fadeIn(.3)),this.infoLabel.string=i.lang.getFormatString(this.showCampData.chapterData.desc),o=i.player.instanceModule.chapterIsUnlock(this.showCampData.chapterData.id),this.goButtonNode.active=o,this.infoLockedLabel.node.active=!o,o||(t=i.player.instanceModule.getMaxChapter(),o=i.GameTextCode.DID_NOT_ARRIVE,this.showCampData.chapterData.isOpen||this.showCampData.chapterData.id-t!=1||(o=i.GameTextCode.COMING_SOON),this.infoLockedLabel.string=i.lang.getFormatString(o))},hideInfo:function(){this.infoActionTime=this.infoActionMaxTime,this.isShowAction=!1;var e,t=null;for(e in this.campTagMap)this.campTagMap.hasOwnProperty(e)&&(this.campTagMap[e].chapterData.id===this.showCampData.chapterData.id&&(t=this.campTagMap[e]),this.campTagMap[e].mapItem.node.active=!0,this.campTagMap[e].mapItem.updateItemState());var i=this.mapContentNode.position,a=t.mapItem.node.position;a=cc.v2(-a.x*this.mapScale,-a.y*this.mapScale),this.infoActionStartScale=this.mapScale*this.infoActionMaxScaleRate,a.x=Math.min(a.x,2048*this.mapScale/2-cc.winSize.width/2),a.x=Math.max(a.x,cc.winSize.width/2-2048*this.mapScale/2),a.y=Math.min(a.y,2048*this.mapScale/2-cc.winSize.height/2),a.y=Math.max(a.y,cc.winSize.height/2-2048*this.mapScale/2),this.infoActionOffestX=a.x-i.x,this.infoActionOffestY=a.y-i.y,this.infoActionScaleDiff=(1-this.infoActionMaxScaleRate)*this.mapScale,this.infoNode.active=!1},initWorldMap:function(){var e=this;this.campTagMap={},i.player.instanceModule.getCurChapter();for(var t=i.JsonData.Chapter,a=this.campNode.getChildren(),n=0;n<a.length;n++){var o=a[n],s=o.getComponent(cc.Sprite),r=o.getComponent(cc.PolygonCollider);r&&(this.campTagMap[r.tag]={node:o,sprite:s,collider:r})}this.mapItemList=[];for(var c=0;c<10;c++){var l=t[c],d=l.areaId;if(this.campTagMap[d]){var h=cc.instantiate(this.mapItemPrefab);if(h.parent=this.campNode,h.position=cc.v2(l.itemOffset[0],l.itemOffset[1]),h.scale=1/this.mapScale,(h=h.getComponent("WorldMapItemRender")).initInfo(l,this.campTagMap[d],this.worldAtlas),this.mapItemList.push(h),l.arrowOffset){var u=cc.instantiate(this.arrowPrefab);u.parent=this.campNode,u.position=cc.v2(l.arrowOffset[0],l.arrowOffset[1]),u.scaleX=l.arrowSize[0]/1e4,u.scaleY=l.arrowSize[1]/1e4,u.angle=l.arrowAngle,u.zIndex=2,this.campTagMap[d].arrowNode=u;for(var p=0;p<4;p++)!function(t){var i=cc.find("arrow1/arrow"+(t+1),u);i.opacity=1,i.runAction(cc.repeatForever(cc.sequence(cc.delayTime(.2*t),cc.fadeIn(.2),cc.delayTime(1.2-.2*t),cc.callFunc(function(){i.opacity=1},e))))}(p)}this.campTagMap[d].mapItem=h,this.campTagMap[d].chapterData=l}}},showAllGarrisonFlyExp:function(){for(var e in this.campTagMap)this.campTagMap[e].mapItem.showGarrisonFlyExp()},showGarrisonExpTips:function(e,t,i,a){this.garrisonExpTipsObj||((n=cc.instantiate(this.garrisonExpTipsPrefab)).parent=this.campNode,n.zIndex=5,n.scale=1/this.mapScale,n.active=!1,this.garrisonExpTipsObj=n.getComponent("WorldMapGarrisonExpTipsItemRender"));var n=this.campNode.convertToNodeSpaceAR(a);a=cc.v2(0,0),1==e.tipsDirection?(this.garrisonExpTipsObj.node.anchorX=.5,this.garrisonExpTipsObj.node.anchorY=0,a=cc.v2(0,80)):2==e.tipsDirection?(this.garrisonExpTipsObj.node.anchorX=.5,this.garrisonExpTipsObj.node.anchorY=1,a=cc.v2(0,-100)):3==e.tipsDirection?(this.garrisonExpTipsObj.node.anchorX=1,this.garrisonExpTipsObj.node.anchorY=.5,a=cc.v2(-80,0)):4==e.tipsDirection&&(this.garrisonExpTipsObj.node.anchorX=0,this.garrisonExpTipsObj.node.anchorY=.5,a=cc.v2(80,0)),this.garrisonExpTipsObj.node.position=n.add(a),this.garrisonExpTipsObj.showTips(e,t,i,this.mapScale)},hideGarrisonExpTips:function(){this.garrisonExpTipsObj&&(this.garrisonExpTipsObj.node.active=!1)},getGuideCampData:function(){var e=i.player.instanceModule.getNewChapter();return-1===e?null:(e=i.templateManager.getChapterDataById(e),this.campTagMap[e.areaId])},guideOver:function(){this.showInfo(this.needGuideCampData),this.needGuideCampData=null},updateWorldMap:function(e){for(var t in this.campTagMap)this.campTagMap.hasOwnProperty(t)&&(t=this.campTagMap[t],e&&(t.mapItem.node.scale=1/this.mapScale,t.mapItem.node.active=!0),t.mapItem.updateItemState(e));this.showBtnNode()},createCloudFly:function(){this.oldCloudIndex=-1;for(var e=1;e<=3;e++){var t=new cc.Node,i=this.cloudAtlas.getSpriteFrame("world_cloud"+e);t.addComponent(cc.Sprite).spriteFrame=i,this.node.addChild(t,1e3),t.setPosition(cc.v2(0,200)),this.startCloudFlyAction(t,e-1)}},startCloudFlyAction:function(e,t){for(var a=i.Utils.getRandomInt(0,2);this.oldCloudIndex==a;)a=i.Utils.getRandomInt(0,2);this.oldCloudIndex=a;var n=cc.v2(-500,250*a-150+i.Utils.getRandomInt(-50,50));e.setPosition(n),e.opacity=i.Utils.getRandomInt(50,100),e.scale=i.Utils.getRandomInt(10,30)/10,e.angle=-10;var o=i.Utils.getOffsetByRotationAndDistance(-10,1050),s=(n=cc.v2(n.x+o.x,n.y+o.y),this);o=cc.delayTime(0<t?30*t/3:0),t=cc.moveTo(30,n),n=cc.callFunc(function(){s.startCloudFlyAction(this,0)},e),n=cc.sequence(o,t,n),e.stopAllActions(),e.runAction(n)},onClickClose:function(){this.closePage()},playShowAction:function(e){this.playInfoAction(!0,e)&&i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_UNLOCK_MAP_3)&&i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_UNLOCK_MAP_3,this.goButtonNode)},playHideAction:function(e){this.playInfoAction(!1,e)&&(this.showingInfo=!1,this.showCampData=null)},playInfoAction:function(e,t){if(this.infoActionTime<=0)return!1;this.infoActionTime<t&&(t=this.infoActionTime),this.infoActionTime-=t;var i=this.infoActionStartScale+(this.infoActionMaxTime-this.infoActionTime)/this.infoActionMaxTime*this.infoActionScaleDiff,a=this.mapContentNode.x+t/this.infoActionMaxTime*this.infoActionOffestX;return t=this.mapContentNode.y+t/this.infoActionMaxTime*this.infoActionOffestY,a=Math.min(a,2048*i/2-cc.winSize.width/2),a=Math.max(a,cc.winSize.width/2-2048*i/2),t=Math.min(t,2048*i/2-cc.winSize.height/2),t=Math.max(t,cc.winSize.height/2-2048*i/2),this.mapContentNode.x=a,this.mapContentNode.y=t,this.campNode.scale=i,this.showCampData&&(this.showCampData.mapItem.node.scale=1/i),this.mapContentNode.width=2048*i,this.mapContentNode.height=2048*i,this.mapBgNode.width=2048*i,this.mapBgNode.height=2048*i,this.infoActionTime<=0||void 0},onFight:function(){i.player.instanceModule.setCurChapter(this.showCampData.chapterData.id),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_SWITCH_CHAPTER_CLOUD),this.hideGarrisonExpTips()},onBack:function(){this.hideInfo(),this.hideGarrisonExpTips()},onClickQuickDefend:function(){1==i.player.vipModule.getQuickDefend()&&i.player.instanceModule.getChapterHaveCanDefend()&&(i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAP_QUICK_DEFEND),this.hideGarrisonExpTips())},onClickDefendSpeed:function(){var e;i.player.instanceModule.getHaveCanSpeedDefend()?(i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAP_DEFEND_SPEED),this.hideGarrisonExpTips()):(e=i.lang.getGameText(i.GameTextCode.NO_HERO_SPEED),i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,e))},onClickBox:function(){var e=i.player.instanceModule.getCanRewardBoxList();e={type:i.constant.COMMON_REWARD_PAGE_WORLD_BOX,rewards:e,callBack:function(){i.player.commonModule.checkIosMark()}},i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_INSTANCE_BOX_REWARD,e),this.hideGarrisonExpTips()},closePageEnded:function(){i.Logger.debug("\u5173\u95ed\u4e16\u754c\u5730\u56fe\u5b8c\u6bd5"),this.mapBgSprite.node.active=!1;for(var e=0;e<10;e++)cc.find("content/area/camp"+Math.floor(e+1),this.node).active=!1;this.worldBgAtlas&&i.player.commonModule.isLowIosDevice()&&(cc.loader.release(cc.loader.getDependsRecursively(this.worldBgAtlas)),this.worldBgAtlas=null),this.worldAtlas&&i.player.commonModule.isLowIosDevice()&&(cc.loader.release(cc.loader.getDependsRecursively(this.worldAtlas)),this.worldAtlas=null)},checkGuide:function(){var e;!i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_UNLOCK_MAP_2)||(e=this.getGuideCampData())&&(this.needGuideCampData=e,i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_UNLOCK_MAP_2,e.mapItem.node))},update:function(e){this.node.active&&i.gameScene.loadingNode.active&&(this.loadingPrecent+=2,!this.worldBgAtlas&&50<this.loadingPrecent&&(this.loadingPrecent=50),this.worldBgAtlas&&this.loadingPrecent<50&&(this.loadingPrecent=50),this.worldAtlas&&this.loadingPrecent<100&&(this.loadingPrecent=100),100<this.loadingPrecent&&(this.loadingPrecent=100),i.gameScene.setLoadingPercent(this.loadingPrecent)),this.canTouchMove||(this.canTouchMove=!0),this.isShowAction?this.playShowAction(e):this.playHideAction(e),!this.initFinish||!this.checkGuideCount||this.checkGuideCount<=0||this.showingInfo||(this.checkGuideCount--,this.checkGuideCount<=0&&i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_UNLOCK_MAP_1_2)&&i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_UNLOCK_MAP_1_2,this.campTagMap[1].mapItem.mapGarrisonObj.node))}}),cc._RF.pop()},{}],MapPath:[function(e,t){"use strict";cc._RF.push(t,"8811532S1xCDbPnu0tZIFCY","MapPath"),cc.Class({extends:cc.Component,properties:{},sortF:function(e,t){return t.F-e.F},countAroundPoint:function(e){var t=e.x;return[{x:t,y:(e=e.y)-1},{x:t+1,y:e},{x:t,y:e+1},{x:t-1,y:e},{x:t-1,y:e-1},{x:t-1,y:e+1},{x:t+1,y:e-1},{x:t+1,y:e+1}]},existList:function(e,t){for(var i in t)if(e.x==t[i].x&&e.y==t[i].y)return i;return!1},startSearchRoad:function(e,t){var i,a=e.x,n=e.y,o=t.x,s=t.y,r=[],c=[],l=[],d=this.map.length,h=this.map[0].length;r.push({x:a,y:n,G:0});do{var u=r.pop();c.push(u);for(var p=this.countAroundPoint(u),g=0;g<p.length;g++){var _,m,E=p[g];0<=E.x&&0<=E.y&&E.x<d&&E.y<h&&1!=this.map[E.x][E.y]&&!this.existList(E,c)&&(_=u.G+((u.x-E.x)*(u.y-E.y)==0?1:1.414),this.existList(E,r)?_<r[m=this.existList(E,r)].G&&(r[m].parent=u,r[m].G=_,r[m].F=_+r[m].H):(E.H=Math.abs(o-E.x)+Math.abs(s-E.y),E.G=_,E.F=E.H+E.G,E.parent=u,r.push(E)))}}while(0!=r.length&&(r.sort(this.sortF),!(i=this.existList({x:o,y:s},r))));if(!i)return cc.log("can not path start_x = "+a+" start_y = "+n+" end_x = "+o+" end_y = "+s),[];for(var T=r[i];l.unshift({x:T.x,y:T.y}),(T=T.parent).x!=a||T.y!=n;);return l},initMapData:function(e){this.map=e},onLoad:function(){},start:function(){}}),cc._RF.pop()},{}],MarkPage:[function(e,t){"use strict";cc._RF.push(t,"afff5tvjQdEb5Ciuj3N2Uqf","MarkPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{lightStars:[cc.Node],commitBtn:cc.Node,btnMarkLabel:cc.Node,btnBackLabel:cc.Node,markLabel:cc.Node,cancelLabel:cc.Node,markTipsLabel:cc.Node,backTipsLabel:cc.Node},onLoadPage:function(){var e=this;this.cancelLabel.on(cc.Node.EventType.TOUCH_END,function(){e.closePage()})},showPageBegan:function(){this.starNum=0,this.onClickStar(null,this.starNum)},onClickStar:function(e,t){var i=Number(t);i<0?i=0:5<i&&(i=5),this.starNum=i;for(var a=0;a<this.lightStars.length;a++)this.lightStars[a].active=a<i;this.commitBtn.active=0<this.starNum,this.btnMarkLabel.active=4<=this.starNum,this.btnBackLabel.active=this.starNum<4,this.markLabel.active=this.starNum<=0,this.cancelLabel.active=0<this.starNum,this.markTipsLabel.active=4<=this.starNum||0===this.starNum,this.backTipsLabel.active=0<this.starNum&&this.starNum<4},onClickCommit:function(){if(!(this.starNum<=0)){if(this.starNum<4)return this.closePage(),void i.gameScene.showPage(i.pageConstant.PAGE_TYPE_FEEDBACK);this.closePage(),i.nativeManager.gotoMarket()}},onClickClose:function(){this.closePage()},closePageBegan:function(){i.BI.onEvent(i.biConstant.EVENT_TYPE_CLICK,i.biConstant.EVENT_ID_CLICK_MARK_SCORE,this.starNum)}}),cc._RF.pop()},{}],NativeManager:[function(e,t){"use strict";cc._RF.push(t,"0896fIfbz5BubRPKOc0Pfcy","NativeManager");var i=e,a=i("Logger"),n=i("Aft"),o=i("qqmap-wx-jssdk");n.NativeManager=cc.Class({statics:{_instance:null,getInstance:function(){return this._instance||(this._instance=new n.NativeManager),this._instance}},properties:{_webDeviceId:null,_nativeDeviceId:null,_sdkUIDInit:!1,_wxFailNum:0,_wxMaxFailNum:10,WXLoginIndex:0,_wxUserInfo:null},shock:function(){var e,t;n.config.needSDKUid&&wx&&wx.vibrateShort&&(e=0,t=setInterval(function(){wx.vibrateShort(),3<++e&&(clearTimeout(t),t=null)},15))},openNotification:function(){},addLocalPush:function(e,t,i){var a=n.timeUtil.getTimeFormat(n.timeUtil.getTime()+1e3*e),o=n.nativeManager._webDeviceId,s=Math.floor(1e3*e);console.log("==addLocalPush== time : "+e+" pushTime: "+a+" templateId : "+t+" openId = "+o+" intervalTime = "+s),console.log("subData = ",i),a=n.config.openGM?"trial":"formal",n.player.serviceModule.sendWxSub(o,t,i,s,a,function(e){e?console.log("sendWxSub success"):console.log("sendWxSub fail")})},cancelLocalPush:function(){a.debug("==addLocalPush==")},getDeviceType:function(){if(!cc.sys.isNative)return"web"},isLowIosDevice:function(){var e=!1;if(cc.sys.os===cc.sys.OS_IOS||cc.sys.os===cc.sys.OS_OSX){this.curDeviceType||(this.curDeviceType=n.nativeManager.getDeviceType());for(var t=["iPhone 5s","iPhone 6","iPhone 6 Plus","iPad Air"],i=0;i<t.length;i++)if(t[i]==this.curDeviceType){e=!0;break}}return e},getDeviceId:function(){if(!cc.sys.isNative)return this._webDeviceId||(n.config.needSDKUid?(this._webDeviceId="sdkcommonID",this.getWXUserInfo()):this._webDeviceId=this.getUUID()),this._webDeviceId;if(this._nativeDeviceId)return this._nativeDeviceId;var e="";return cc.sys.os==cc.sys.OS_IOS||cc.sys.os==cc.sys.OS_OSX?(e=jsb.reflection.callStaticMethod("AppController","getDeviceIDInKeychain"),cc.log("==OS_IOS==="+e)):cc.sys.os==cc.sys.OS_ANDROID?(e=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/SDKManager","getDeviceID","()Ljava/lang/String;"),cc.log("==OS_ANDROID==="+e)):e=this.getUUID(),this._nativeDeviceId=e},isSdkUIDInit:function(){return this._sdkUIDInit},setWebDeviceId:function(e){this._sdkUIDInit||(this._webDeviceId=e)},getUUID:function(){for(var e=[],t=0;t<36;t++)e[t]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]="0123456789abcdef".substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")},getWXUserInfo:function(){if(!(n.nativeManager._sdkUIDInit||n.nativeManager.limitHttp||n.nativeManager.limitLogin||(console.log("getWXUserInfo"),this._wxFailNum>=this._wxMaxFailNum))){console.log("getWXUserInfo login"),wx&&wx.setKeepScreenOn&&wx.setKeepScreenOn({keepScreenOn:!0}),n.nativeManager.limitLogin=!0,n.nativeManager.WXLoginIndex=1;for(var e=["e9c9","46b3","d0155","dfd634","bbbeaf","4dc6","903"],t="",i=0;i<e.length;i++)t+=e[i];wx.login({success:function(e){var i,a;n.nativeManager.limitLogin=!1,console.log("success res.code = "+e.code),n.nativeManager.WXLoginIndex=2,e.code?n.nativeManager.limitHttp?console.log("limitHttp return"):(n.nativeManager.WXLoginIndex=3,i=(i="https://other-auth.afunteam.com/wxmini/auth/login").trim(),a={appid:"wx7f37ab776fe71e6b",secret:t,js_code:e.code},console.log("login success res.code = "+e.code),n.nativeManager.WXLog=e.code+"_",n.nativeManager.limitHttp=!0,n.HttpClient.httpPost(i,JSON.stringify(a)).then(function(t){if(!JSON.parse(t).openid||JSON.parse(t).errcode)return console.log("Get login data false."+t),n.nativeManager.getSDKUserIdFail(),n.nativeManager.WXLoginIndex=-4,void(n.nativeManager.WXLog+=!1);console.log("Get login data success."+t),n.nativeManager.WXLoginIndex=4,n.nativeManager.rsp=t,n.nativeManager.code=e.code,n.nativeManager._webDeviceId=JSON.parse(t).openid+"",n.nativeManager._sdkUIDInit=!0;var i=JSON.parse(t).openid,a=JSON.parse(t).session_key,o=JSON.parse(t).unionid,s=JSON.parse(t).errcode;t=JSON.parse(t).errmsg,console.log("\u6536\u5230\u56de\u8c03 openid = "+i+" session_key = "+a+" unionid = "+o+" errcode = "+s+" errmsg = "+t),n.nativeManager.limitHttp=!1}).catch(function(e){console.log("Get game data error.",e),n.nativeManager.getSDKUserIdFail(),n.nativeManager.WXLoginIndex=-4,n.nativeManager.WXLog+=e})):(n.nativeManager.getSDKUserIdFail(),console.log("\u767b\u5f55\u5931\u8d25\uff01"+e.errMsg),n.nativeManager.WXLoginIndex=-3)},fail:function(e){n.nativeManager.getSDKUserIdFail(),console.log("\u767b\u5f55fail"+e.errMsg),console.error(e),n.nativeManager.WXLoginIndex=-2}})}},getSDKUserIdFail:function(){n.nativeManager.limitLogin=!1,n.nativeManager.limitHttp=!1,this._wxFailNum++,this._wxFailNum>=this._wxMaxFailNum?console.log("\u5fae\u4fe1\u83b7\u53d6\u4fe1\u606f\u5931\u8d25\uff01\uff01\uff01"):this.getWXUserInfo(),console.log("getSDKUserIdFail this._wxFailNum = "+this._wxFailNum+" this._wxMaxFailNum = "+this._wxMaxFailNum)},getDeviceLanguage:function(){var e=cc.sys.languageCode;return cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID&&(e=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/SDKManager","getDeviceLanguage","()Ljava/lang/String;")),cc.sys.language===cc.sys.LANGUAGE_CHINESE?e===cc.sys.LANGUAGE_CHINESE||"zh-cn"===e||"zh_CN"===e||"zh_cn"===e||-1!=e.indexOf("hans")||-1!=e.indexOf("Hans")?"zh":"zh_tw":e.substr(0,2)},getNetworkType:function(){return cc.sys.isNative?cc.sys.os==cc.sys.OS_IOS?"ios":cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/SDKManager","getNetworkType","()Ljava/lang/String;"):"unknown":""},getIMEI:function(){return""},getIMEIMD5:function(){return""},getAndroidId:function(){return""},getSystem:function(){return""},getCarrier:function(){return""},getMAC:function(){return""},getIP:function(){return""},getUserAgent:function(){return""},getDeviceWidth:function(){return""},getDeviceHeight:function(){return""},gotoMarket:function(){},showWxTips:function(e,t,i,a){n.config.needSDKUid&&wx&&wx.showModal&&wx.showModal({title:e,content:t,confirmText:i,success:function(e){e.confirm?(console.log("\u7528\u6237\u70b9\u51fb\u786e\u5b9a"),a&&a()):e.cancel&&console.log("\u7528\u6237\u70b9\u51fb\u53d6\u6d88")}})},createGameClubButton:function(e){var t,i,a,o,s,r,c;n.config.needSDKUid&&(t=null,e==n.constant.GAME_CLUB_TYPE_MAIN?(r=n.gameScene.getPage(n.pageConstant.PAGE_TYPE_MAIN_CHILD))&&(t=r.gameClubNode):e!=n.constant.GAME_CLUB_TYPE_RESULT||(a=n.gameScene.getPage(n.pageConstant.PAGE_TYPE_RESULT))&&(t=a.gameClubNode),t&&wx&&wx.createGameClubButton&&(this.gameClubButtonMap||(this.gameClubButtonMap={}),i=wx.getSystemInfoSync(),c=cc.view.getScaleX(),s=cc.view.getScaleY(),o=cc.v2(-t.width*t.anchorX,t.height*(1-t.anchorY)),r=t.convertToWorldSpaceAR(o),a=(cc.winSize.height-r.y)*s,o=t.width*c,o=parseInt(o/i.pixelRatio),s=t.height*s,s=parseInt(s/i.pixelRatio),r=c*r.x,c=cc.winSize.width*c/i.pixelRatio,c=Math.max(0,(i.screenWidth-c)/2),c=parseInt(r/i.pixelRatio+c),this.gameClubButtonMap[e]?this.showGameClubButton(e):(this.gameClubButtonMap[e]=wx.createGameClubButton({icon:"light",style:{left:c,top:parseInt(a/i.pixelRatio),width:o,height:s}}),this.gameClubButtonMap[e].onTap(function(){n.BI.onEvent(n.biConstant.EVENT_TYPE_CLICK,n.biConstant.EVENT_ID_CLICK_GAME_CLUB,e)}))))},hideGameClubButton:function(e){this.gameClubButtonMap&&this.gameClubButtonMap[e]&&(this.gameClubButtonMap[e].hide(),console.log("hideGameClubButton type = "+e))},isCanShowGameClub:function(){return!!n.config.needSDKUid&&!(!wx||!wx.createGameClubButton)},showGameClubButton:function(e){this.gameClubButtonMap&&this.gameClubButtonMap[e]?(this.gameClubButtonMap[e].show(),console.log("showGameClubButton type = "+e)):this.createGameClubButton(e)},hidePermissionButton:function(){if(this.permissionButtonMap)for(var e in this.permissionButtonMap)this.permissionButtonMap.hasOwnProperty(e)&&this.permissionButtonMap[e].hide()},showPermissionButton:function(e){this.permissionButtonMap&&this.permissionButtonMap[e]&&(this.permissionButtonMap[e].show(),console.log("showPermissionButton type = "+e))},createPermissionButton:function(e,t){var i,a,o,s,r,c,l;t&&wx&&wx.createUserInfoButton&&(this.permissionButtonMap||(this.permissionButtonMap={}),i=wx.getSystemInfoSync(),c=cc.view.getScaleX(),s=cc.view.getScaleY(),o=cc.v2(-t.width*t.anchorX,t.height*(1-t.anchorY)),r=t.convertToWorldSpaceAR(o),a=(cc.winSize.height-r.y)*s,o=t.width*c,o=parseInt(o/i.pixelRatio),s=t.height*s,s=parseInt(s/i.pixelRatio),r=c*r.x,c=cc.winSize.width*c/i.pixelRatio,c=Math.max(0,(i.screenWidth-c)/2),c=parseInt(r/i.pixelRatio+c),this.permissionButtonMap[e]?this.showPermissionButton(e):(this.permissionButtonMap[e]=wx.createUserInfoButton({type:"text",text:"",style:{left:c,top:parseInt(a/i.pixelRatio),width:o,height:s,lineHeight:40,backgroundColor:"#ff000000",color:"#ffffff00",textAlign:"center",fontSize:1,borderRadius:1}}),(l=this).permissionButtonMap[e].onTap(function(t){console.log("permissionButton onTap res = ",t),console.log("permissionButton type = "+e),t&&t.errMsg&&"getUserInfo:ok"==t.errMsg&&(n.nativeManager.checkWxRealUserInfo(),l.hidePermissionButton())})))},checkUserPermission:function(e,t){var i;n.config.needSDKUid&&wx&&!this._wxUserInfo&&(i=this,wx.getSetting({success:function(a){console.log(a.authSetting),a.authSetting["scope.userInfo"]?n.nativeManager.checkWxRealUserInfo():i.createPermissionButton(e,t)}}))},checkWxLocation:function(){n.config.needSDKUid&&wx&&wx.getFuzzyLocation&&(console.log("ddddd"),wx.authorize({scope:"scope.userLocation",success:function(){wx.getFuzzyLocation({type:"wgs84",success:function(e){var t=e.latitude;e=e.longitude,n.qqmapsdk||(n.qqmapsdk=new o({key:"TJFBZ-4NSH2-SOAUU-CP4MY-32YBO-Q7FHD"})),n.qqmapsdk.reverseGeocoder({location:{latitude:t,longitude:e},success:function(e){var t=e.result.ad_info.nation_code,i="156"==t?e.result.ad_info.city_code:"Other";i={city:"156"==t?e.result.ad_info.city:"\u5176\u5b83",cityCode:i},console.log("location = ",e.result),n.player.commonModule.setPlayerCity(i),n.eventBus.dispatchEvent(n.GameEventType.GET_WX_USER_LOCATION_SUCCESS,i)},fail:function(){},complete:function(){}})}})},fail:function(e){console.log("ssssssssssssss",e),n.nativeManager.isRequestLocationPermission()&&n.nativeManager.showWxTips("",n.lang.getGameText(n.GameTextCode.AREA_RANK_POWER),"\u53bb\u8bbe\u7f6e",function(){wx.openSetting({success:function(){}})})},complete:function(e){console.log("aaaaaaaaaaaaaaaaaaa",e),n.nativeManager.isRequestLocationPermission()||n.nativeManager.setRequestLocationPermissionState()}}))},checkWxRealUserInfo:function(){var e=this;wx&&wx.getUserInfo&&(wx.getUserInfo({success:function(t){var i=(o=t.userInfo).nickName,a=o.avatarUrl,o=(t=o.city,o.country);e._wxUserInfo={nickName:i,headUrl:a,city:t,country:o},n.eventBus.dispatchEvent(n.GameEventType.GET_WX_USER_INFO_SUCCESS)}}),e.setHaveUserPermissionState())},getWxRealUserInfo:function(){return this._wxUserInfo},isFirstStartApp:function(){var e=n.StorageUtil.getData(n.constant.SAVE_FIRST_START_DATA);return!e||!JSON.parse(e).status},firstStartFinish:function(){n.StorageUtil.saveData(n.constant.SAVE_FIRST_START_DATA,{status:!0})},isHaveUserPermission:function(){var e=n.StorageUtil.getData(n.constant.SAVE_GET_USER_PERMISSION_DATA);return!!e&&JSON.parse(e).status},setHaveUserPermissionState:function(){n.StorageUtil.saveData(n.constant.SAVE_GET_USER_PERMISSION_DATA,{status:!0})},isRequestLocationPermission:function(){var e=n.StorageUtil.getData(n.constant.SAVE_GET_LOCATION_PERMISSION_DATA);return!!e&&JSON.parse(e).status},setRequestLocationPermissionState:function(){n.StorageUtil.saveData(n.constant.SAVE_GET_LOCATION_PERMISSION_DATA,{status:!0})},isPad:function(){if(!n.config.needSDKUid)return cc.winSize.height/cc.winSize.width<1.5;if(wx&&wx.getSystemInfoSync){var e=wx.getSystemInfoSync();return e.screenHeight/e.screenWidth<1.5}return!1},shareCaptureImage:function(){n.config.needSDKUid&&wx&&wx.showShareImageMenu&&wx.showShareImageMenu({path:this._captureFilePath,success:function(e){console.log("showShareImageMenu success ",e.tempFilePath)},fail:function(e){console.log("showShareImageMenu fail"),console.log("showShareImageMenu err: ",e)},complete:function(){console.log("showShareImageMenu complete")}})},captureImage:function(e){var t=this;if(n.config.needSDKUid&&canvas&&canvas.toTempFilePath){this.canvasHeight||(this.canvasHeight=canvas.height);var i,a=Math.floor(cc.visibleRect.width),o=Math.floor(cc.visibleRect.height);this._captureCamera?this._captureCamera.enabled=!0:((i=new cc.Node).parent=n.gameScene.node,this._captureCamera=i.addComponent(cc.Camera),r=new cc.RenderTexture,i=cc.game._renderContext,r.initWithSize(a,o,i.STENCIL_INDEX8),this._captureCamera.targetTexture=r),this._captureCamera.render();for(var s=this._captureCamera.targetTexture.readPixels(),r=s.length,c=new Uint8Array(r),l=4*a,d=0;d<o;d++)for(var h=(o-1-d)*a*4,u=d*a*4,p=0;p<l;p++)c[u+p]=s[h+p];e?(r=cc.view.getScaleX(),e=cc.view.getScaleY(),r=cc.winSize.width*r,e=cc.winSize.height*e,canvas.toTempFilePath({x:0,y:0,width:r,height:e,destWidth:r,destHeight:e,success:function(e){console.log("captureImage path:  ",e.tempFilePath),t._captureFilePath=e.tempFilePath},fail:function(e){console.log("captureImage fail"),console.log("captureImage err: ",e)},complete:function(){console.log("captureImage complete")}}),this._captureCamera.enabled=!1):this._captureData=c}},getCaptureData:function(){return this._captureData}}),n.nativeManager=n.NativeManager.getInstance(),cc._RF.pop()},{}],NewEnemyPage:[function(e,t){"use strict";cc._RF.push(t,"9ee0cbV4NdGv63VmFJ7Kznh","NewEnemyPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{pointPrefab:cc.Prefab},onLoadPage:function(){this.enemyNode=cc.find("content/enemy",this.node),this.enemySp=cc.find("content/enemy/icon",this.node).getComponent(sp.Skeleton),this.enemyNameLabel=cc.find("content/enemyNameLayout/label",this.node).getComponent(cc.Label),this.enemyIntroLabel=cc.find("content/introduce",this.node).getComponent(cc.Label),this.pointsLayout=cc.find("content/pointLayout",this.node),this.touchNode=cc.find("content/touchNode",this.node),this.touchNode.on("touchstart",this.onTouchStart,this),this.touchNode.on("touchmove",this.onTouchMove,this),this.touchNode.on("touchend",this.onTouchEnd,this),this.touchNode.on("touchcancel",this.onTouchCancel,this),this.enemyY=this.enemySp.node.y},showPageBegan:function(){this.instanceData=this.data.instanceData,i.Logger.debug("show new enemy page this.data.enemyList =",this.instanceData.newEnemy,"this.data.enemyList.length =",this.instanceData.newEnemy.length),this.initData()},initData:function(){this.enemySp.node.action=!1,this.enemyDataList=[];for(var e=0;e<this.instanceData.newEnemy.length;e++){var t=i.templateManager.getEnemyDataById(this.instanceData.newEnemy[e]);t={name:i.lang.getGameText(t.name),desc:i.lang.getGameText(t.desc),spName:t.appearance,isAlpha:t.isPremultipliedAlpha,offsetY:t.enemyOffsetY},this.enemyDataList.push(t)}this.initPoints(),this.setSp(),this.setLabel()},initPoints:function(){var e=this;this.pointsLayout.removeAllChildren(!0);for(var t=0;t<this.enemyDataList.length;t++)!function(t){var i=cc.instantiate(e.pointPrefab);cc.find("icon2",i).active=!1,e.pointsLayout.addChild(i),i.on("touchstart",function(){e.isClick||(e.isClick=!0,e.playChangeAni(t))},e)}(t);cc.find("icon2",this.pointsLayout.children[0]).active=!0,this.index=0,this.lastIndex=null},setShowIndex:function(e){this.index!==e&&(this.lastIndex=this.index,this.index=e,cc.find("icon2",this.pointsLayout.children[this.lastIndex]).active=!1,cc.find("icon2",this.pointsLayout.children[e]).active=!0)},setSp:function(e){var t=this,a=e;null!=e||(a=this.index),i.Logger.debug("curIndex =",a);var n=this.enemyDataList[a];a=i.constant.SPINE_PATH_ENEMY+n.spName,i.battleScene.getSpineData(a,function(e){e?(t.enemySp.node.action=!0,t.enemySp.skeletonData=e,t.enemySp.clearTrack(0),t.enemySp.premultipliedAlpha=0<n.isAlpha,t.enemySp.setAnimation(0,"run_down",!0)):i.Logger.debug("get enemy spine error! spine name =",n.spName)}),n.offsetY?this.enemySp.node.y=n.offsetY:this.enemySp.node.y=this.enemyY},setLabel:function(e){var t=e;null!=e||(t=this.index),this.enemyNameLabel.string=this.enemyDataList[t].name,this.enemyIntroLabel.string=this.enemyDataList[t].desc},playChangeAni:function(e){var t=this;if(this.index===e)return i.Logger.debug("playChangeAni this.index === index "),void(this.isClick=!1);var a=-1;e<this.index&&(a=1),cc.tween(this.enemySp.node).by(.2,{x:a*this.enemyNode.width}).call(function(){t.setSp(e),t.enemySp.node.x=-a*t.enemyNode.width}).to(.2,{x:0}).call(function(){t.setLabel(e),t.setShowIndex(e),t.isClick=!1}).start()},onClickNext:function(){var e;this.index>=this.enemyDataList.length-1?this.closePage():this.isClick||(this.isClick=!0,e=this.index,this.playChangeAni(++e))},closePageEnded:function(){i.battleScene.checkStartPopUp()},onTouchStart:function(e){this.touchId||(this.touchId=e.getID(),this.startPos=e.getLocation())},onTouchMove:function(){this.isTouchMove=!0},onTouchEnd:function(e){this.touchId==e.getID()&&(this.endPos=e.getLocation(),this.touchId==e.getID()&&(this.touchId=null),this.isTouchMove&&(this.endPos.x>this.startPos.x+30?this.setEnemyMove(!1):this.endPos.x<this.startPos.x-30&&this.setEnemyMove(!0)),this.startPos=null,this.isTouchMove=!1)},setEnemyMove:function(e){if(i.Logger.debug("enemy setEnemyMove isLeft = "+e),!(this.enemyDataList.length<2)){var t=this.enemyDataList.length-1,a=this.index;if(e){if(++a>t)return}else if(--a<0)return;this.playChangeAni(a)}},onTouchCancel:function(){i.Logger.debug("enemy onTouchCancel"),this.startPos=null,this.isTouchMove=!1}}),cc._RF.pop()},{}],NewFunctionPage:[function(e,t){"use strict";cc._RF.push(t,"93257JgMU1ASawi91JCNH6a","NewFunctionPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{mainAtlas:{default:null,type:cc.SpriteAtlas},vipAtlas:{default:null,type:cc.SpriteAtlas}},onLoadPage:function(){this.contentNode=cc.find("content",this.node),this.titleNode=cc.find("title",this.contentNode),this.funcNode=cc.find("func",this.contentNode),this.iconSprite=cc.find("content/func/icon",this.node).getComponent(cc.Sprite),this.nameLabel=cc.find("content/func/label",this.node).getComponent(cc.Label)},showPageBegan:function(){this._funcId=this.data.funcId,i.player.functionModule.setFunctionGuide(this._funcId),i.player.functionModule.removeCacheFunction(this._funcId),this.funcCfg=i.templateManager.getFunctionDataById(this._funcId),this.nameLabel.string=i.lang.getGameText(this.funcCfg.name),this._funcId==i.constant.MAIN_FUNCTION_VIP?this.iconSprite.spriteFrame=this.vipAtlas.getSpriteFrame(this.funcCfg.icon):this.iconSprite.spriteFrame=this.mainAtlas.getSpriteFrame(this.funcCfg.icon),i.soundsUtil.playSoundEffect("new_func_unlocked"),this.blackNode.opacity=1,this.contentNode.scaleX=0,this.titleNode.active=!1,this.funcNode.active=!1},showPageEnded:function(){var e=cc.delayTime(.3),t=cc.callFunc(function(){this.blackNode.opacity=255,this.runPageEffect()},this);t=cc.sequence(e,t),this.contentNode.stopAllActions(),this.contentNode.runAction(t)},runPageEffect:function(){var e=cc.scaleTo(.1,1.3,1),t=cc.scaleTo(.05,1,1),i=cc.callFunc(function(){this.runTitleEffect()},this);i=cc.sequence(e,t,i),this.contentNode.stopAllActions(),this.contentNode.runAction(i)},runTitleEffect:function(){this.titleNode.active=!0,this.titleNode.scale=0;var e=cc.scaleTo(.2,1.2),t=cc.scaleTo(.1,1,1),i=cc.callFunc(function(){this.runFuncEffect()},this);i=cc.sequence(e,t,i),this.titleNode.stopAllActions(),this.titleNode.runAction(i)},runFuncEffect:function(){this.funcNode.active=!0,this.funcNode.opacity=0;var e=cc.fadeIn(.3),t=cc.callFunc(function(){this.runDelayEffect()},this);t=cc.sequence(e,t),this.funcNode.stopAllActions(),this.funcNode.runAction(t)},runDelayEffect:function(){var e=cc.delayTime(1),t=cc.callFunc(function(){this.closePage(),this.funcCfg.isFly?i.gameScene.mainPage.playFuncOpenMoveAction(this._funcId):(i.gameScene.mainPage.checkFunctionState(this._funcId,!0),i.gameScene.mainPage.delayCheckFunctionOpen())},this);t=cc.sequence(e,t),this.node.runAction(t)}}),cc._RF.pop()},{}],NewTargetLotteryPage:[function(e,t){"use strict";cc._RF.push(t,"029ccXZDkNHCrKQpmaXpgJM","NewTargetLotteryPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{lotterItemPrefab:{default:null,type:cc.Prefab},commonItemPrefab:{default:null,type:cc.Prefab},commonTipsPrefab:{default:null,type:cc.Prefab}},onLoadPage:function(){this.itemLayoutNode=cc.find("content/machineAll/lotteryNode/Layout",this.node),this.rewardLayoutNode=cc.find("content/rewardsLayout",this.node),this.rewardButtonNode=cc.find("content/getButton",this.node),this.rewardItemObjList=[]},showPageBegan:function(){if(this._rewards=this.data.rewards,this._ratioCfg=this.data.ratioCfg,this._itemDataList=this.data.itemDataList,this.callBack=this.data.callBack,!this.initFinish){var e=0;this.totalItemHeight=0,this.itemMap={},this.itemList=[];for(var t=0;t<this._itemDataList.length;t++){var a=cc.instantiate(this.lotterItemPrefab);a.parent=this.itemLayoutNode,0===e&&(e=a.height,this.totalItemHeight=e+50),a.y=t*(e+50),(a=a.getComponent("MainTaskLotteryItemRender")).initData(this._itemDataList[t]),this.itemMap[this._itemDataList[t].id]=a,this.itemList.push(a)}}this.speedAdd=1,this.maxSpeed=50,this.bottomY=-4*this.totalItemHeight,this.topY=4*this.totalItemHeight,this.boundingSpeed=2,this.needBoundDis=40,this.turnOverWaitTime=0,this.initFinish=!0;for(var n=0;n<this.rewardItemObjList.length;n++)this.rewardItemObjList[n].node.active=!1;for(var o=0;o<this._rewards.length;o++){var s=this._rewards[o];o>=this.rewardItemObjList.length&&((r=cc.instantiate(this.commonItemPrefab)).scale=1,((c=r.getComponent("CommonItemRender")).host=this).rewardLayoutNode.addChild(r),this.rewardItemObjList.push(c));var r=this.rewardItemObjList[o];r.node.active=!0,r.node.y=-20;var c=s[0];s=s[1]*this._ratioCfg.ratio,c===i.constant.COIN_TYPE_SILVER?s=i.player.commonModule.getHangUpReceiveCoin(s):c===i.constant.COIN_TYPE_HERO_EXP&&(s=i.player.commonModule.getHangUpReceiveExp(s)),r.initData(c,s,!1,null,!0,!1,!1)}this.rewardLayoutNode.active=!1,this.rewardButtonNode.active=!1},showPageEnded:function(){this.scrollParams||this.startScroll()},onClickClose:function(){this.scrollParams||(this.closePage(),this.callBack&&this.callBack())},startScroll:function(){i.soundsUtil.playSoundEffect("luckyturn_rotate",!0,!0),this.scrollParams=[],this.scrollParams.push(this.getScrollParamsObj(this.itemMap,this._ratioCfg.id,.3))},getScrollParamsObj:function(e,t,a){var n=i.JsonData.GoalRewardRatio.length;return{needMoveDis:e[t].node.y+3*n*this.totalItemHeight+this.needBoundDis,speed:0,reduceSpeed:0,reduceSpeedDis:2e3,boundDis:0,scrolling:!1,bounding:!1,waitTime:a}},updateScroll:function(e){var t=this.scrollParams[0];if(t)if(0<t.waitTime)t.waitTime-=e;else{if(!t.scrolling){if(!(0<t.needMoveDis))return;t.scrolling=!0}0<t.reduceSpeed?t.speed=Math.max(0,t.speed-t.reduceSpeed):t.speed<this.maxSpeed&&(t.speed=Math.min(t.speed+this.speedAdd,this.maxSpeed)),0===t.reduceSpeed&&t.needMoveDis-t.speed<t.reduceSpeedDis&&(t.reduceSpeedDis=t.needMoveDis,t.reduceSpeed=parseFloat(Math.pow(this.maxSpeed,2)/2/t.reduceSpeedDis)),t.speed>t.needMoveDis&&(t.speed=t.needMoveDis);for(var i=0;i<this.itemList.length;i++){var a=this.itemList[i].node,n=a.y-t.speed;n<this.bottomY&&(n=this.topY+this.totalItemHeight-(this.bottomY-n)),a.y=n}t.needMoveDis-=t.speed,t.needMoveDis<=0&&(t.scrolling=!1,t.bounding=!0)}},turnOver:function(){this.scrollParams=null,this.rewardLayoutNode.active=!0,this.rewardButtonNode.active=!0},updateBound:function(){var e=this.scrollParams[0];if(e&&e.bounding){this.boundingSpeed+e.boundDis>this.needBoundDis&&(this.boundingSpeed=this.needBoundDis-e.boundDis);for(var t=0;t<this.itemList.length;t++){var a=this.itemList[t].node;a.y=a.y+this.boundingSpeed}e.boundDis+=this.boundingSpeed,e.boundDis>=this.needBoundDis&&(e.bounding=!1,this.scrollParams[0]=null,i.soundsUtil.playSoundEffect("luckyturn_rotate_stop")),e=!0,this.scrollParams[0]||e&&(this.turnOverWaitTime=.5,i.soundsUtil.stopSoundEffect(i.soundsUtil.getCallBackEffectId()))}},showTips:function(e,t,i){this.itemTipsNode||(this.itemTipsNode=cc.instantiate(this.commonTipsPrefab),this.itemTipsObj=this.itemTipsNode.getComponent("CommonSkillTipsItemRender"),this.node.addChild(this.itemTipsNode)),this.showTipsId=e,this.itemTipsObj.showNode(e,t,i)},hideTips:function(){this.showTipsId=null,this.itemTipsObj.hideNode()},update:function(e){if(0<this.turnOverWaitTime)return this.turnOverWaitTime-=e,void(this.turnOverWaitTime<=0&&this.turnOver());this.scrollParams&&(this.updateScroll(e),this.updateBound())}}),cc._RF.pop()},{}],NewTargetPage:[function(e,t){"use strict";cc._RF.push(t,"5be24dsq5tJF45D1Ve2vbPv","NewTargetPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{},onLoadPage:function(){this.instanceRewardTipLabel=cc.find("content/ContentLabel",this.node).getComponent(cc.RichText),this.ani=this.node.getComponent(cc.Animation),this.particle1_1=cc.find("title/particlesystem",this.node).getComponent(cc.ParticleSystem),this.particle1_2=cc.find("title/particlesystem/particlesystem",this.node).getComponent(cc.ParticleSystem),this.particle2_1=cc.find("content/particlesystem2",this.node).getComponent(cc.ParticleSystem),this.particle2_2=cc.find("content/particlesystem2/particlesystem",this.node).getComponent(cc.ParticleSystem);var e=cc.find("touchNode",this.node);e.on("touchstart",this.onTouchStart,this),e.on("touchmove",this.onTouchMove,this),e.on("touchend",this.onTouchEnd,this),e.on("touchcancel",this.onTouchCancel,this)},showPageBegan:function(){var e=i.player.instanceModule.getMaxChapter(),t=i.player.instanceModule.getChapterMaxLevel(e);this.instanceRewardData=i.templateManager.getNextInstancePiece(e,t),e=this.instanceRewardData[0],t=i.templateManager.getHeroCardDataById(this.instanceRewardData[1]),i.templateManager.getHeroDataById(t.heroId),i.lang.updateLabelStringArgs(this.instanceRewardTipLabel,i.GameTextCode.NEW_TASK,[e]),this.showOpenEffect()},showOpenEffect:function(){this.ani.stop(),this.ani.setCurrentTime(0),this.ani.play("newTask_appear"),this.particle1_1.resetSystem(),this.particle1_2.resetSystem(),this.particle2_1.stopSystem(),this.particle2_2.stopSystem();var e=cc.delayTime(40/60),t=cc.callFunc(function(){this.particle2_1.resetSystem(),this.particle2_2.resetSystem()},this);t=cc.sequence(e,t),this.instanceRewardTipLabel.node.runAction(t),this.LimitClickTime=2.2},update:function(e){0<this.LimitClickTime&&(this.LimitClickTime-=e)},onClickClose:function(){var e;0<this.LimitClickTime||((e=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_CHILD))&&e.showNewTargetEffect(),this.closePage())},onTouchStart:function(){},onTouchMove:function(){},onTouchEnd:function(){i.Logger.debug("newTarget onTouchEnd"),this.onClickClose()},onTouchCancel:function(e){i.Logger.debug("newTarget onTouchCancel"),this.onTouchEnd(e)}}),cc._RF.pop()},{}],NewYearActivityPage:[function(e,t){"use strict";cc._RF.push(t,"86a1ePTN75BIYBmw/HUvCsr","NewYearActivityPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{},onLoadPage:function(){this.monsterNode=cc.find("content/activityLayout/monster",this.node),this.monsterNotOepnNode=cc.find("content/activityLayout/monster/notOpen",this.node),this.monsterRedNode=cc.find("content/activityLayout/monster/redPoint",this.node),this.legionRedNode=cc.find("content/activityLayout/alliance/redPoint",this.node),this.legionNotOepnNode=cc.find("content/activityLayout/alliance/notOpen",this.node),this.yearTaskRedNode=cc.find("content/activityLayout/springGift/Background/redPoint",this.node),this.yearTaskNotOepnNode=cc.find("content/activityLayout/springGift/Background/notOpen",this.node),this.yearTaskIcon=cc.find("content/activityLayout/springGift/Background/icon",this.node).getComponent(cc.Sprite),this.yearTaskEndNode=cc.find("content/activityLayout/springGift/Background/end",this.node),this.timeLabel=cc.find("content/time",this.node).getComponent(cc.Label),this.monsterRedNode.active=!1,this.legionRedNode.active=!1,this.yearTaskRedNode.active=!1},showPageBegan:function(){this.updateYearTaskRed(),this.updateMonsterRed(),this.updateLegionRed(),this.lastUpdateTime=0,this.resetActivityTime(),this.updateEndTime(1),this.initFinish=!0},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.YEAR_MONSTER_UPDATE_RED,function(){return e.updateMonsterRed()}),this.registerListener(i.GameEventType.YEAR_TASK_UPDATE_RED,function(){return e.updateYearTaskRed()}),this.registerListener(i.GameEventType.UPDATE_ALLIANCE_RED,function(){return e.updateLegionRed()}),this.registerListener(i.GameEventType.UPDATE_ALLIANCE_BTN,function(){return e.updateLegionRed()}),this.registerListener(i.GameEventType.NEW_YEAR_ACTIVITY_REFRESH,function(){return e.updateActivityState()})},updateYearTaskRed:function(){this.yearTaskEndNode.active=!1,this.yearTaskNotOepnNode.active=!1,i.player.newYearModule.isActiveClose()&&(this.yearTaskNotOepnNode.active=!0),i.player.taskModule.isNewYearTaskOver()?(this.yearTaskEndNode.active=!0,this.yearTaskIcon.setMaterial(0,cc.Material.getBuiltinMaterial("2d-gray-sprite"))):this.yearTaskIcon.setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite")),i.player.taskModule.isHasNewYearTaskRed()?this.yearTaskRedNode.active||(this.yearTaskRedNode.active=!0,i.gameScene.redNodeAction(this.yearTaskRedNode)):this.yearTaskRedNode.active&&(this.yearTaskRedNode.active=!1)},updateLegionRed:function(){this.legionNotOepnNode.active=!1,i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_ALLIANCE)||(this.legionNotOepnNode.active=!0),i.player.allianceModule.isHaveAllianceRed()?this.legionRedNode.active||(this.legionRedNode.active=!0,i.gameScene.redNodeAction(this.legionRedNode)):this.legionRedNode.active&&(this.legionRedNode.active=!1)},updateMonsterRed:function(){i.player.newYearModule.isActiveClose()?this.monsterNotOepnNode.active=!0:this.monsterNotOepnNode.active=!1,i.player.newYearModule.isCanReceiveReward()?this.monsterRedNode.active||(this.monsterRedNode.active=!0,i.gameScene.redNodeAction(this.monsterRedNode)):this.monsterRedNode.active&&(this.monsterRedNode.active=!1)},updateActivityState:function(){this.node.active&&!i.player.newYearModule.isActiveOpen()&&this.closePage()},onClickYearMonster:function(){i.player.newYearModule.isActiveClose()?i.gameScene.showTipsItemRender(i.lang.getGameText(i.GameTextCode.ACTIVITY_NOT_START)):(i.gameScene.showPage(i.pageConstant.PAGE_TYPE_YEAR_MONSTER),this.closePage())},onClickYearLegion:function(){var e=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_CHILD);e&&(e.onClickAlliance(),this.closePage())},onClickYearTask:function(){var e=this;i.player.newYearModule.isActiveClose()?i.gameScene.showTipsItemRender(i.lang.getGameText(i.GameTextCode.ACTIVITY_NOT_START)):i.player.taskModule.isNewYearTaskOpen()?i.player.taskModule.isHasAllianceTask()?(i.gameScene.showLoadingCycle(),i.player.serviceModule.getServerGameParams(i.constant.SERVER_PARAM_ALLIANCE_OPEN,function(t){i.gameScene.hideLoadingCycle(),i.player.allianceModule.setAllianceController(t),e.closePage(),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_YEAR_TASK)})):(this.closePage(),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_YEAR_TASK)):i.gameScene.showTipsItemRender(i.lang.getGameText(i.GameTextCode.ACTIVITY_END))},onClickClose:function(){this.closePage()},resetActivityTime:function(){var e;i.player.newYearModule.isActiveClose()&&(e=i.player.newYearModule.getActivityStartTime(),this.timeLabel.string=i.lang.getFormatString(i.GameTextCode.ACTIVITY_BEGIN_TIME,[i.timeUtil.getTimeFormat(e)]))},updateEndTime:function(e){var t;i.player.newYearModule.isActiveClose()||(this.lastUpdateTime+=e,this.lastUpdateTime<1)||(this.lastUpdateTime=0,t=i.timeUtil.getTime(),e=i.player.newYearModule.getActivityEndTime(),t=Math.max(0,e-t)/1e3,t=i.timeUtil.secondArrayFormat(t),this.timeLabel.string=i.lang.getFormatString(i.GameTextCode.ACTIVITY_END_TIME,[t[0],t[1]+":"+t[2]+":"+t[3]]))},update:function(e){this.initFinish&&this.updateEndTime(e)}}),cc._RF.pop()},{}],NewYearModule:[function(e,t){"use strict";cc._RF.push(t,"ac9baWa5b9BarkPINDCw49K","NewYearModule");var i=e("Aft");cc.Class({extends:i.BaseHandler,init:function(e){this.player=e;var t=i.StorageUtil.getData(i.constant.SAVE_NEW_YEAR_DATA);t||(e={enterBattleCount:0,killYearMonsterCount:0,isRewardReceiveOverList:[0,0,0,0],activityState:i.constant.NEW_YEAR_TASK_STATE_CLOSE,activityEndTime:0,newYearTodayShowRedCount:0,activityStartTime:0},this.player.saveGameData(i.constant.SAVE_NEW_YEAR_DATA,e),t=JSON.stringify(e)),i.Logger.debug("init newYearData :",t),this.player._gameData.newYearData=JSON.parse(t)},loadData:function(){this.getNewYearData().hasOwnProperty("enterBattleCount")||(this.getNewYearData().enterBattleCount=0),this.getNewYearData().hasOwnProperty("killYearMonsterCount")||(this.getNewYearData().killYearMonsterCount=0),this.getNewYearData().hasOwnProperty("isRewardReceiveOverList")||(this.getNewYearData().isRewardReceiveOverList=[0,0,0,0]),this.getNewYearData().hasOwnProperty("activityState")||(this.getNewYearData().activityState=i.constant.NEW_YEAR_TASK_STATE_CLOSE),this.getNewYearData().hasOwnProperty("activityEndTime")||(this.getNewYearData().activityEndTime=0),this.getNewYearData().hasOwnProperty("newYearTodayShowRedCount")||(this.getNewYearData().newYearTodayShowRedCount=0),this.getNewYearData().hasOwnProperty("activityStartTime")||(this.getNewYearData().activityState=i.constant.NEW_YEAR_TASK_STATE_CLOSE,this.getNewYearData().activityStartTime=0)},restoreData:function(e){e&&e.newYearData&&(i.StorageUtil.save(i.constant.SAVE_NEW_YEAR_DATA,e.newYearData,!0),i.Logger.debug("restoreData data  newYearData :",JSON.stringify(e.newYearData)))},saveNewYearData:function(e){this.player.saveGameData(i.constant.SAVE_NEW_YEAR_DATA,this.player._gameData.newYearData,e)},getNewYearData:function(){return this.player._gameData.newYearData},resetNewYearData:function(){this.getNewYearData().newYearTodayShowRedCount=0,this.getNewYearData().killYearMonsterCount=0,this.getNewYearData().enterBattleCount=0,this.getNewYearData().isRewardReceiveOverList=[0,0,0,0],this.getNewYearData().activityState===i.constant.NEW_YEAR_TASK_STATE_OPEN&&i.timeUtil.getTime()>=this.getNewYearData().activityEndTime&&(this.getNewYearData().activityState=i.constant.NEW_YEAR_TASK_STATE_OVER,i.eventBus.dispatchEvent(i.GameEventType.NEW_YEAR_ACTIVITY_REFRESH)),this.saveNewYearData(!0),i.eventBus.dispatchEvent(i.GameEventType.REFRESH_YEAR_MONSTER_PAGE)},getEnterBattleCount:function(){return this.getNewYearData().enterBattleCount},addEnterBattleCount:function(){this.getNewYearData().enterBattleCount++,this.saveNewYearData()},getKillYearMonsterCount:function(){return this.getNewYearData().killYearMonsterCount},addKillYearMonsterCount:function(e){e=e||1,this.getNewYearData().killYearMonsterCount+=e,this.saveNewYearData()},isReceiveOver:function(e){var t=this.getNewYearData().isRewardReceiveOverList;return!(e<0||e>=t.length)&&0<t[e]},saveReceiveOver:function(e){var t=this.getNewYearData().isRewardReceiveOverList;e<0||e>=t.length||(this.getNewYearData().isRewardReceiveOverList[e]=1,this.saveNewYearData(),i.BI.onEvent(i.biConstant.EVENT_TYPE_CLICK,i.biConstant.EVENT_ID_CLICK_NEW_YEAR_MONSTER_REWARD,e+1))},isCanReceiveRewardByIndex:function(e){var t=(o=i.templateManager.getGameParamValue("nianKillNumReward")[e])[0],a=o[1],n=o[2],o=i.player.newYearModule.getKillYearMonsterCount();return n={itemId:a,value:i.player.commonModule.getHangUpReceiveExp(n)},t<=o&&!i.player.newYearModule.isReceiveOver(e)&&n},isCanReceiveReward:function(){if(this.isActiveClose())return!1;if(0===this.getNewYearData().newYearTodayShowRedCount)return!0;for(var e=i.templateManager.getGameParamValue("nianKillNumReward"),t=0;t<e.length;t++)if(this.isCanReceiveRewardByIndex(t))return!0;return!1},unlockActivity:function(e){try{if(this.getNewYearData().activityState!==i.constant.NEW_YEAR_TASK_STATE_CLOSE)return;if(!e)return;if(12!==e.length)return;if(!i.Utils.isNumber(e))return;var t=i.timeUtil.getTimeByInfo(e);this.getNewYearData().activityStartTime=t,this.saveNewYearData(),i.eventBus.dispatchEvent(i.GameEventType.NEW_YEAR_ACTIVITY_REFRESH)}catch(e){}},checkNewYearActivityState:function(){var e;0===this.getNewYearData().activityStartTime||i.timeUtil.getTime()<this.getNewYearData().activityStartTime||!i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_NEW_YEAR_ACTIVITY)||this.getNewYearData().activityState!==i.constant.NEW_YEAR_TASK_STATE_CLOSE||(this.getNewYearData().activityState=i.constant.NEW_YEAR_TASK_STATE_OPEN,e=i.timeUtil.getZeroHourTime()+i.templateManager.getGameParamValue("newYearCountdownDays")*i.timeUtil.ONE_DAY_MILLISECOND,this.getNewYearData().activityEndTime=e,this.saveNewYearData(),i.eventBus.dispatchEvent(i.GameEventType.NEW_YEAR_ACTIVITY_REFRESH),i.player.taskModule.checkNewYearTaskState(),i.BI.onEvent(i.biConstant.EVENT_TYPE_CLICK,i.biConstant.EVENT_ID_CLICK_NEW_YEAR_ACTIVITY_OPEN))},isActiveOpen:function(){return 0!==this.getNewYearData().activityStartTime&&this.getNewYearData().activityState!==i.constant.NEW_YEAR_TASK_STATE_OVER},isActivityRealOpen:function(){return this.getNewYearData().activityState===i.constant.NEW_YEAR_TASK_STATE_OPEN},isActiveClose:function(){return this.getNewYearData().activityState===i.constant.NEW_YEAR_TASK_STATE_CLOSE},getActivityEndTime:function(){return this.getNewYearData().activityEndTime},getActivityStartTime:function(){return this.getNewYearData().activityStartTime},addNewYearTodayShowRed:function(){this.getNewYearData().newYearTodayShowRedCount+=1,this.saveNewYearData(),i.eventBus.dispatchEvent(i.GameEventType.YEAR_MONSTER_UPDATE_RED)}}),cc._RF.pop()},{}],OneClickEnterGroupManager:[function(e,t){"use strict";cc._RF.push(t,"cd8efnE5WRKEJyqih2kWC67","OneClickEnterGroupManager");var i=e("Aft"),a=cc.Class({statics:{_instance:null,getInstance:function(){return this._instance||(this._instance=new a),this._instance}},copyQQGroup:function(){var e=i.player.commonModule.getJoinQQGroupNumber();wx&&wx.setClipboardData&&wx.getClipboardData&&wx.showToast&&wx.setClipboardData({data:""+e,success:function(){wx.getClipboardData({success:function(){wx.showToast({title:"\u590d\u5236\u6210\u529f"})}})}})},oneClickEnterGroup:function(){var e="042528811b40504c0495ed90141201fce1d81cdcf98f5110082f3dbd7d2a9b01",t="pg76rrjvB1-BZauMwMxYG0gdvDACewXt";i.Logger.debug("oneClickEnterGroup groupId = 6392322 key_ios = "+e+" key_android = "+t);var a,n=null;cc.sys.isNative?cc.sys.os===cc.sys.OS_IOS||cc.sys.os===cc.sys.OS_OSX?(i.Logger.debug("ios one click enter group groupId = 6392322 key_ios = "+e),a=jsb.reflection.callStaticMethod("AppController","joinGroup:key:","6392322",e),this.joinGroupResult(a)):cc.sys.os===cc.sys.OS_ANDROID&&(i.Logger.debug("android click enter group key_android = "+t),t=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/SDKManager","joinQQGroup","(Ljava/lang/String;)Z",t),this.joinGroupResult(t)):(cc.sys.isMobile?cc.sys.os===cc.sys.OS_IOS||cc.sys.os===cc.sys.OS_OSX?(i.Logger.debug("web ios one click enter group"),n="mqqapi://card/show_pslcard?src_type=internal&version=1&uin=6392322&key=042528811b40504c0495ed90141201fce1d81cdcf98f5110082f3dbd7d2a9b01&card_type=group&source=external"):cc.sys.os===cc.sys.OS_ANDROID&&(i.Logger.debug("web android click enter group"),n="mqqopensdkapi://bizAgent/qm/qr?url=http%3A%2F%2Fqm.qq.com%2Fcgi-bin%2Fqm%2Fqr%3Ffrom%3Dapp%26p%3Dandroid%26k%3Dpg76rrjvB1-BZauMwMxYG0gdvDACewXt"):(i.Logger.debug("web pc click enter group"),n="http://shang.qq.com/wpa/qunwpa?idkey="+e),i.Logger.debug("web click enter group url = "+n),(n=(n="https://qm.qq.com/cgi-bin/qm/qr?k=fw9dUp_b7YvsDBphDkccj5gBScUptXOt&jump_from=webapi").trim())&&cc.sys.openURL(n))},joinGroupResult:function(e){i.Logger.debug("joinGroupResult isSuccess = "+e),e?i.Logger.debug("\u8df3\u8f6c\u6210\u529f"):(i.Logger.debug("\u672a\u5b89\u88c5\u624bQ\u6216\u5b89\u88c5\u7684\u7248\u672c\u4e0d\u652f\u6301"),i.gameScene.showTipsItemRender(i.lang.getGameText(i.GameTextCode.QQ_VERSION)))}});i.oneClickEnterGroupManager=a.getInstance(),cc._RF.pop()},{}],PageConstant:[function(e,t){"use strict";cc._RF.push(t,"048f6SeQtFMfKX57+3Dn9Hy","PageConstant"),t.exports={OPEN_PAGE_ANIMATION_NONE:0,OPEN_PAGE_ANIMATION_SCALE:1,OPEN_PAGE_ANIMATION_SCALE_MOVE:2,BLACK_NODE_TYPE_NONE:0,BLACK_NODE_TYPE_BLACK:1,BLACK_NODE_TYPE_BLACK_85:2,BLACK_NODE_TYPE_BLACK_70:3,BLACK_NODE_TYPE_MAIN_TAG:4,BLACK_NODE_TYPE_MAIN_HERO:5,PAGE_TYPE_MAIN:1,PAGE_TYPE_PAUSE:2,PAGE_TYPE_REVIVAL:3,PAGE_TYPE_RESULT:4,PAGE_TYPE_DEBUG:5,PAGE_TYPE_BATTLE_SKILL:6,PAGE_TYPE_HERO_SKILL:7,PAGE_TYPE_MAIN_CHILD:8,PAGE_TYPE_MAIN_SHOP:9,PAGE_TYPE_MAIN_HERO:10,PAGE_TYPE_MAIN_TOWER:11,PAGE_TYPE_MAIN_TOWER_WAKE:13,PAGE_TYPE_MAIN_LACK_OF_MATERIAL:14,PAGE_TYPE_MAIN_HERO_DETAIL:15,PAGE_TYPE_MAIN_HANG_UP:16,PAGE_TYPE_MAIN_HERO_CHOOSE:17,PAGE_TYPE_MAIN_HERO_CHOOSE_OBTAINED:18,PAGE_TYPE_MAIN_HERO_PIECE_SOURCE:19,PAGE_TYPE_MAIN_SHOP_REWARD:20,PAGE_TYPE_MAIN_TASK:21,PAGE_TYPE_MAIN_PLAYER_OFFICIAL:22,PAGE_TYPE_SETTING:23,PAGE_TYPE_RENAME:24,PAGE_TYPE_FEEDBACK:25,PAGE_TYPE_LANGUAGE:26,PAGE_TYPE_MAIN_INSTANCE_BOX_REWARD:27,PAGE_TYPE_MAIN_RANK:28,PAGE_TYPE_BATTLE_NEW_ENEMY:29,PAGE_TYPE_MAIN_POWER:30,PAGE_TYPE_MAIN_NEW_FUNCTION:31,PAGE_TYPE_MAIN_HERO_WAKE:32,PAGE_TYPE_MAIN_HERO_CONFIRM_PAGE:34,PAGE_TYPE_BATTLE_START_BUFF:35,PAGE_TYPE_BATTLE_SKILL_AD_UP:36,PAGE_TYPE_MAIN_WORLD:37,PAGE_TYPE_BATTLE_OPEN_BOX:38,PAGE_TYPE_ROLE_INFO:39,PAGE_TYPE_ROLE_ICON:40,PAGE_TYPE_SIGN:42,PAGE_TYPE_SOLDIER_TRIAL:43,PAGE_TYPE_HERO_CHOOSE:44,PAGE_TYPE_QUICKLY_BATTLE:45,PAGE_TYPE_SWITCH_CHAPTER_CLOUD:46,PAGE_TYPE_HERO_TOWER_UNLOCK:47,PAGE_TYPE_CLEAR_ACCOUNT:48,PAGE_TYPE_SECOND_HERO_CONFIRM:49,PAGE_TYPE_SECOND_HERO_CHOOSE:50,PAGE_TYPE_TIME_ERROR:51,PAGE_TYPE_EMAIL:52,PAGE_TYPE_EMAIL_FEEDBACK:53,PAGE_TYPE_EMAIL_GLOBAL:54,PAGE_TYPE_PICTORIAL:55,PAGE_TYPE_PICTORIAL_ENEMY_DETAIL:56,PAGE_TYPE_PICTORIAL_TOWER_DETAIL:57,PAGE_TYPE_ENTER_BATTLE_TIP:58,PAGE_TYPE_VIP:59,PAGE_TYPE_MARK:60,PAGE_TYPE_PIGGY_BANK:61,PAGE_TYPE_VIP_UP:62,PAGE_TYPE_MAIN_SKILL:63,PAGE_TYPE_MAIN_SKILL_DETAIL:64,PAGE_TYPE_MAIN_SKILL_STAR:65,PAGE_TYPE_HERO_GAY_FRIEND:66,PAGE_TYPE_HERO_GAY_FRIEND_UNLOCK:67,PAGE_TYPE_BATTLE_PIGGY_BANK:68,PAGE_TYPE_SPEED_TRY:69,PAGE_TYPE_GIFT_CODE:70,PAGE_TYPE_PIECE_CHANGE:71,PAGE_TYPE_MAP_GARRISON_LIST:72,PAGE_TYPE_MAP_DEFEND_REWARD:73,PAGE_TYPE_MAP_DEFEND_UP_LEVEL:74,PAGE_TYPE_MAP_QUICK_DEFEND:75,PAGE_TYPE_MAP_DEFEND_SPEED:76,PAGE_TYPE_PLAYER_LOCK:77,PAGE_TYPE_NEW_TARGET:78,PAGE_TYPE_MAIN_LINE_TASK:79,PAGE_TYPE_MAIN_FRIEND_INVITE:80,PAGE_TYPE_SPEED_AD_TRY:81,PAGE_TYPE_MAIN_TASK_LOTTERY:82,PAGE_TYPE_FREE_POWER_ADD:83,PAGE_TYPE_FREE_POWER_REWARD:84,PAGE_TYPE_MAIN_SUBSCRIBE:85,PAGE_TYPE_VERSION_UPDATE:86,PAGE_TYPE_HERO_TRY:87,PAGE_TYPE_CAPTURE:88,PAGE_TYPE_QUICK_DEFEND_CHOOSE_HERO:89,PAGE_TYPE_APPOINT_HERO:90,PAGE_TYPE_APPOINT_GAY_FRIEND:91,PAGE_TYPE_YEAR_MONSTER:92,PAGE_TYPE_YEAR_MONSTER_RESULT:93,PAGE_TYPE_ALLIANCE:94,PAGE_TYPE_ALLIANCE_JOIN:95,PAGE_TYPE_ALLIANCE_EXIT:96,PAGE_TYPE_ALLIANCE_RED:97,PAGE_TYPE_ALLIANCE_RED_LOOK:98,PAGE_TYPE_YEAR_TASK:99,PAGE_TYPE_YEAR_ACTIVITY:100,PAGE_TYPE_NEW_YEAR_MEDAL_UP:101,PAGE_TYPE_LIMIT_TOWER:102,PAGE_SHOW_SORT_PIGGY_BANK:1,PAGE_SHOW_SORT_PLAYER_OFFICIAL:2,PAGE_SHOW_SORT_SOLDIER_TRIAL:3,PAGE_SHOW_SORT_NEW_FUNCTION:100,PAGE_SHOW_SORT_MARK:200},cc._RF.pop()},{}],PageManager:[function(e,t){"use strict";cc._RF.push(t,"fdcafiGd0ZAG5HUPZCQZHm7","PageManager");var i=(a=e)("Aft"),a=cc.Class({extends:i.BaseUI,properties:{pageMap:{default:{},visible:!1},openedPageMap:{default:{},visible:!1},loadingPageMap:{default:{},visible:!1},registeredPageMap:{default:{},visible:!1},registeredPageList:{default:[],visible:!1},blackPrefab:{default:null,type:cc.Prefab}},afterLoad:function(){this.registeredPageList=this.registerPage(),this.checkShowPageList=[];for(var e=0;e<this.registeredPageList.length;e++)this.registeredPageList[e].checkShowSort&&0<this.registeredPageList[e].checkShowSort&&this.checkShowPageList.push(this.registeredPageList[e].pageType);this.cacheShowPageList=[],this.registerAllPage(),this.onLoadManager()},onLoadManager:function(){},registerAllPage:function(){var e=this.registeredPageList.length;if(0!==e)for(var t=0;t<e;t++){var a=this.registeredPageList[t];a&&a.pageType&&(a.createPrefab||a.prefabPath)&&(void 0===a.blackNodeType&&(a.blackNodeType=i.pageConstant.BLACK_NODE_TYPE_NONE),void 0===a.showAnimType&&(a.showAnimType=i.pageConstant.OPEN_PAGE_ANIMATION_SCALE),this.registeredPageMap[a.pageType]=a)}},createPageByPageData:function(e,t){var i,a;e&&e.pageType&&t&&((a=(i=cc.instantiate(t)).getComponent(e.pageScript)).setPageType(e.pageType),t=this.createNewBlackNode(e.blackNodeType),a.setBlackNode(t),a.setSkipCloseSound(e.skipCloseSound),a.node.parent=this.node,a.node.position=cc.v2(0,0),a.setPageManager(this),this.pageMap[e.pageType]=a,(a=i.getComponent(cc.Widget))&&a.updateAlignment(),i.active=!1)},createNewBlackNode:function(e){var t=cc.instantiate(this.blackPrefab);return t.parent=this.node,t.position=cc.v2(0,0),t.getComponent("CommonBlackPage").init(e),t.active=!1,t},getPage:function(e){return this.pageMap&&this.pageMap[e]?this.pageMap[e]:(i.Logger.debug("Page not found \uff01\uff01\uff01 pageType = "+e),null)},getPagePrefab:function(e,t){var a,n=this,o=this;e.createPrefab?t(e.createPrefab):e.prefabPath&&(i.gameScene&&i.gameScene.showLoadingCycle2(),a=e.prefabPath,this.loadingPageMap[e.pageType]=!0,cc.loader.loadRes(a,cc.Prefab,function(a,s){return i.gameScene.hideLoadingCycle2(),a?(console.log("==== load page prefab error: ====\n",a.stack),n.loadingPageMap[e.pageType]=null,o.downLoadNum++,3==o.downLoadNum&&i.gameScene.showTipsItemRender(i.lang.getGameText(1991)),void o.getPagePrefab(e,t)):(n.loadingPageMap[e.pageType]=null,void t(s))}))},openPage:function(e,t){var a=this.registeredPageMap[e];if(this.openedPageMap[e])return!1;if(this.isNeedCacheShow(e))return this.pushCacheShowPage(e,t),!1;this.showPageSpecialHandling(e),i.Logger.debug("showPage pageType = "+e);var n=this.pageMap[e];n&&(n.node.zIndex=a.zIndex||i.constant.PAGE_LAYER_TOP_BAR_UP,n.getBlackNode().zIndex=a.zIndex||i.constant.PAGE_LAYER_TOP_BAR_UP,n.showPage(t,a.showAnimType)),a&&!a.skipCloseSound&&i.soundsUtil.playSoundEffect("common_panel_open"),this.openedPageMap[e]=n,this.biEvent(e),i.eventBus.dispatchEvent(i.GameEventType.PAGE_OPEN_OVER,e)},showPage:function(e,t){var a=this,n=this.registeredPageMap[e];return this.pageMap[e]?this.openPage(e,t):(this.downLoadNum=0,this.getPagePrefab(n,function(o){o?a.pageMap[e]||(a.createPageByPageData(n,o),a.openPage(e,t)):i.Logger.debug("error prefab = null pageType = "+e)})),!0},biEvent:function(e){var t;switch(e){case i.pageConstant.PAGE_TYPE_MAIN_TASK:t=i.biConstant.EVENT_ID_OPEN_TASK_PAGE;break;case i.pageConstant.PAGE_TYPE_MAIN_RANK:t=i.biConstant.EVENT_ID_OPEN_RANK_PAGE;break;case i.pageConstant.PAGE_TYPE_MAIN_WORLD:t=i.biConstant.EVENT_ID_OPEN_WORLD_PAGE;break;case i.pageConstant.PAGE_TYPE_MAIN_POWER:t=i.biConstant.EVENT_ID_OPEN_POWER_PAGE;break;case i.pageConstant.PAGE_TYPE_MAIN_HANG_UP:t=i.biConstant.EVENT_ID_OPEN_HANGUP_PAGE;break;case i.pageConstant.PAGE_TYPE_MAIN_HERO:t=i.biConstant.EVENT_ID_OPEN_HERO_PAGE;break;case i.pageConstant.PAGE_TYPE_MAIN_SHOP:t=i.biConstant.EVENT_ID_OPEN_SHOP_PAGE;break;case i.pageConstant.PAGE_TYPE_MAIN_SHOP_REWARD:t=i.biConstant.EVENT_ID_OPEN_SHOP_BOX_REWARD_PAGE;break;case i.pageConstant.PAGE_TYPE_MAIN_PLAYER_OFFICIAL:t=i.biConstant.EVENT_ID_OPEN_OFFICE_PAGE;break;case i.pageConstant.PAGE_TYPE_BATTLE_START_BUFF:t=i.biConstant.EVENT_ID_OPEN_BATTLE_BUFF_PAGE;break;case i.pageConstant.PAGE_TYPE_BATTLE_SKILL:t=i.biConstant.EVENT_ID_OPEN_SKILL_PAGE;break;case i.pageConstant.PAGE_TYPE_BATTLE_SKILL_AD_UP:t=i.biConstant.EVENT_ID_OPEN_SKILL_UP_PAGE;break;case i.pageConstant.PAGE_TYPE_BATTLE_OPEN_BOX:t=i.biConstant.EVENT_ID_OPEN_BATTLE_BOX_PAGE;break;case i.pageConstant.PAGE_TYPE_REVIVAL:t=i.biConstant.EVENT_ID_OPEN_REVIVAL_PAGE;break;case i.pageConstant.PAGE_TYPE_SIGN:t=i.biConstant.EVENT_ID_OPEN_SIGN_PAGE;break;case i.pageConstant.PAGE_TYPE_QUICKLY_BATTLE:t=i.biConstant.EVENT_ID_OPEN_QUICK_HANGUP;break;case i.pageConstant.PAGE_TYPE_VIP:t=i.biConstant.EVENT_ID_OPEN_VIP_PAGE;break;case i.pageConstant.PAGE_TYPE_PICTORIAL:t=i.biConstant.EVENT_ID_OPEN_PICTORIAL_PAGE;break;case i.pageConstant.PAGE_TYPE_PICTORIAL_ENEMY_DETAIL:case i.pageConstant.PAGE_TYPE_PICTORIAL_TOWER_DETAIL:t=i.biConstant.EVENT_ID_OPEN_PICTORIAL_DETAIL_PAGE;break;case i.pageConstant.PAGE_TYPE_EMAIL:t=i.biConstant.EVENT_ID_OPEN_MAIL_PAGE;break;case i.pageConstant.PAGE_TYPE_EMAIL_FEEDBACK:t=i.biConstant.EVENT_ID_OPEN_MAIL_FEEDBACK_PAGE;break;case i.pageConstant.PAGE_TYPE_EMAIL_GLOBAL:t=i.biConstant.EVENT_ID_OPEN_MAIL_GLOBAL_PAGE;break;case i.pageConstant.PAGE_TYPE_MAIN_SKILL:t=i.biConstant.EVENT_ID_OPEN_ACTIVE_SKILL_PAGE;break;case i.pageConstant.PAGE_TYPE_MARK:t=i.biConstant.EVENT_ID_OPEN_MARK_PAGE;break;case i.pageConstant.PAGE_TYPE_YEAR_MONSTER:t=i.biConstant.EVENT_ID_OPEN_YEAR_MONSTER;break;case i.pageConstant.PAGE_TYPE_ALLIANCE:t=i.biConstant.EVENT_ID_OPEN_ALLIANCE;break;case i.pageConstant.PAGE_TYPE_ALLIANCE_JOIN:t=i.biConstant.EVENT_ID_OPEN_ALLIANCE_JOIN;break;case i.pageConstant.PAGE_TYPE_ALLIANCE_EXIT:t=i.biConstant.EVENT_ID_OPEN_ALLIANCE_EXIT;break;case i.pageConstant.PAGE_TYPE_ALLIANCE_RED:t=i.biConstant.EVENT_ID_OPEN_ALLIANCE_RED;break;case i.pageConstant.PAGE_TYPE_ALLIANCE_RED_LOOK:t=i.biConstant.EVENT_ID_OPEN_ALLIANCE_RED_LOOK;break;case i.pageConstant.PAGE_TYPE_YEAR_TASK:t=i.biConstant.EVENT_ID_OPEN_YEAR_TASK;break;case i.pageConstant.PAGE_TYPE_YEAR_ACTIVITY:t=i.biConstant.EVENT_ID_OPEN_YEAR_ACTIVITY;break;case i.pageConstant.PAGE_TYPE_NEW_YEAR_MEDAL_UP:t=i.biConstant.EVENT_ID_OPEN_NEW_YEAR_MEDAL_UP}t&&i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,t)},closePage:function(e){this.openedPageMap[e]&&this.openedPageMap[e].closePage()},getOpenedPageCount:function(){var e,t,a=[];for(e in this.openedPageMap)(e=parseInt(e))!==i.pageConstant.PAGE_TYPE_MAIN_CHILD&&e!==i.pageConstant.PAGE_TYPE_MAIN_SHOP&&e!==i.pageConstant.PAGE_TYPE_MAIN_HERO&&e!==i.pageConstant.PAGE_TYPE_MAIN_TOWER&&e!==i.pageConstant.PAGE_TYPE_MAIN_WORLD&&e!==i.pageConstant.PAGE_TYPE_MAIN_SKILL&&a.push(e);for(t in this.loadingPageMap)t=parseInt(t),this.loadingPageMap[t]&&t!==i.pageConstant.PAGE_TYPE_MAIN_CHILD&&t!==i.pageConstant.PAGE_TYPE_MAIN_SHOP&&t!==i.pageConstant.PAGE_TYPE_MAIN_HERO&&t!==i.pageConstant.PAGE_TYPE_MAIN_TOWER&&t!==i.pageConstant.PAGE_TYPE_MAIN_WORLD&&t!==i.pageConstant.PAGE_TYPE_MAIN_SKILL&&a.indexOf(t)<0&&a.push(t);return a.length},removePageInOpened:function(e){var t;i.Logger.debug("closePage pageType = "+e),this.loadingPageMap[e]&&delete this.loadingPageMap[e],this.openedPageMap[e]&&(delete this.openedPageMap[e],(t=this.registeredPageMap[e]).createPrefab||t.isLimitClean||!i.player.commonModule.isLowIosDevice()||((t=this.pageMap[e])&&(t.blackNode.destroyAllChildren(),t.blackNode.destroy(),t.node.destroyAllChildren(),t.node.destroy()),this.pageMap[e]=null),this.checkCachePageShow(),this.closePageSpecialHandling(e)),i.eventBus.dispatchEvent(i.GameEventType.PAGE_CLOSE_OVER,e)},pageIsOpened:function(e){return!!this.openedPageMap[e]||!!this.loadingPageMap[e]},showPageSpecialHandling:function(){},closePageSpecialHandling:function(){},registerPage:function(){return[]},checkPage:function(){return[]},isNeedCacheShow:function(e){return 0<=this.checkShowPageList.indexOf(e)&&0<this.getOpenedPageCount()},pushCacheShowPage:function(e,t){e={pageType:e,pageData:t,pageSort:this.registeredPageMap[e].checkShowSort},0<=this.cacheShowPageList.indexOf(e)||(this.cacheShowPageList.push(e),this.cacheShowPageList.sort(function(e,t){return e=e.pageSort,t.pageSort-e}))},cleanCacheShowPage:function(){this.cacheShowPageList=[]},isHaveCachePage:function(e){for(var t=0;t<this.cacheShowPageList.length;t++)if(e==this.cacheShowPageList[t].pageType)return!0;return!1},checkCachePageShow:function(){var e;this.cacheShowPageList.length<=0||(i.Logger.debug("checkCachePageShow this.cacheShowPageList = "+this.cacheShowPageList),i.guideManager&&i.guideManager.isLimitClick()||0<this.getOpenedPageCount()?i.Logger.debug("isLimitClick: "+i.guideManager.isLimitClick()+" curPage.length: "+this.getOpenedPageCount()):(e=this.cacheShowPageList[0],e=this.showPage(e.pageType,e.pageData),i.Logger.debug("checkCachePageShow isShowSuccess "+e),e&&this.cacheShowPageList.splice(0,1)))},isIphoneX:function(){return!(cc.winSize.height<1280||!cc.sys.isNative&&!i.config.h5TopPullDown)},isIphoneXBottom:function(){return!(cc.winSize.height<1280)&&cc.sys.os===cc.sys.OS_IOS}});i.PageManager=a,cc._RF.pop()},{}],PakoCompression:[function(e,t,i){(function(a){"use strict";cc._RF.push(t,"60a4ccJ5AxEXL+8rwn7HN1o","PakoCompression");var n=e,o=t,s=i;(function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(i){"object"==(void 0===s?"undefined":t(s))&&void 0!==o?o.exports=i():"function"==typeof define&&define.amd?define([],i):("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:this).pako=i()}(function(){return function e(t,i,a){function o(r,c){if(!i[r]){if(!t[r]){var l="function"==typeof n&&n;if(!c&&l)return l(r,!0);if(s)return s(r,!0);throw(l=new Error("Cannot find module '"+r+"'")).code="MODULE_NOT_FOUND",l}l=i[r]={exports:{}},t[r][0].call(l.exports,function(e){return o(t[r][1][e]||e)},l,l.exports,e,t,i,a)}return i[r].exports}for(var s="function"==typeof n&&n,r=0;r<a.length;r++)o(a[r]);return o}({1:[function(e,i,a){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;a.assign=function(e){for(var i,a,n=Array.prototype.slice.call(arguments,1);n.length;){var o=n.shift();if(o){if("object"!=t(o))throw new TypeError(o+"must be non-object");for(var s in o)i=o,a=s,Object.prototype.hasOwnProperty.call(i,a)&&(e[s]=o[s])}}return e},a.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var o={arraySet:function(e,t,i,a,n){if(t.subarray&&e.subarray)e.set(t.subarray(i,i+a),n);else for(var o=0;o<a;o++)e[n+o]=t[i+o]},flattenChunks:function(e){for(var t,i,a,n,o=t=0,s=e.length;o<s;o++)t+=e[o].length;for(n=new Uint8Array(t),o=i=0,s=e.length;o<s;o++)a=e[o],n.set(a,i),i+=a.length;return n}},s={arraySet:function(e,t,i,a,n){for(var o=0;o<a;o++)e[n+o]=t[i+o]},flattenChunks:function(e){return[].concat.apply([],e)}};a.setTyped=function(e){e?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,o)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,s))},a.setTyped(n)},{}],2:[function(e,t,i){var a=e("./common"),n=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var s=new a.Buf8(256),r=0;r<256;r++)s[r]=252<=r?6:248<=r?5:240<=r?4:224<=r?3:192<=r?2:1;function c(e,t){if(t<65534&&(e.subarray&&o||!e.subarray&&n))return String.fromCharCode.apply(null,a.shrinkBuf(e,t));for(var i="",s=0;s<t;s++)i+=String.fromCharCode(e[s]);return i}s[254]=s[254]=1,i.string2buf=function(e){for(var t,i,n,o,s=e.length,r=0,c=0;c<s;c++)55296==(64512&(i=e.charCodeAt(c)))&&c+1<s&&56320==(64512&(n=e.charCodeAt(c+1)))&&(i=65536+(i-55296<<10)+(n-56320),c++),r+=i<128?1:i<2048?2:i<65536?3:4;for(t=new a.Buf8(r),c=o=0;o<r;c++)55296==(64512&(i=e.charCodeAt(c)))&&c+1<s&&56320==(64512&(n=e.charCodeAt(c+1)))&&(i=65536+(i-55296<<10)+(n-56320),c++),i<128?t[o++]=i:(i<2048?t[o++]=192|i>>>6:(i<65536?t[o++]=224|i>>>12:(t[o++]=240|i>>>18,t[o++]=128|i>>>12&63),t[o++]=128|i>>>6&63),t[o++]=128|63&i);return t},i.buf2binstring=function(e){return c(e,e.length)},i.binstring2buf=function(e){for(var t=new a.Buf8(e.length),i=0,n=t.length;i<n;i++)t[i]=e.charCodeAt(i);return t},i.buf2string=function(e,t){for(var i,a,n,o=t||e.length,r=new Array(2*o),l=i=0;l<o;)if((a=e[l++])<128)r[i++]=a;else if(4<(n=s[a]))r[i++]=65533,l+=n-1;else{for(a&=2===n?31:3===n?15:7;1<n&&l<o;)a=a<<6|63&e[l++],n--;1<n?r[i++]=65533:a<65536?r[i++]=a:(a-=65536,r[i++]=55296|a>>10&1023,r[i++]=56320|1023&a)}return c(r,i)},i.utf8border=function(e,t){for(var i=(t=(t=t||e.length)>e.length?e.length:t)-1;0<=i&&128==(192&e[i]);)i--;return!(i<0)&&0!==i&&i+s[e[i]]>t?i:t}},{"./common":1}],3:[function(e,t){t.exports=function(e,t,i,a){for(var n=65535&e|0,o=e>>>16&65535|0,s=0;0!==i;){for(i-=s=2e3<i?2e3:i;o=o+(n=n+t[a++]|0)|0,--s;);n%=65521,o%=65521}return n|o<<16|0}},{}],4:[function(e,t){var i=function(){for(var e=[],t=0;t<256;t++){for(var i=t,a=0;a<8;a++)i=1&i?3988292384^i>>>1:i>>>1;e[t]=i}return e}();t.exports=function(e,t,a,n){var o=i,s=n+a;e^=-1;for(var r=n;r<s;r++)e=e>>>8^o[255&(e^t[r])];return-1^e}},{}],5:[function(e,t,i){var a,n=e("../utils/common"),o=e("./trees"),s=e("./adler32"),r=e("./crc32"),c=e("./messages"),l=0,d=0,h=-2,u=2,p=8,g=286,_=30,m=19,E=2*g+1,T=15,f=3,S=258,A=S+f+1,I=42,y=113;function P(e,t){return e.msg=c[t],t}function v(e){return(e<<1)-(4<e?9:0)}function L(e){for(var t=e.length;0<=--t;)e[t]=0}function N(e){var t=e.state,i=t.pending;0!==(i=i>e.avail_out?e.avail_out:i)&&(n.arraySet(e.output,t.pending_buf,t.pending_out,i,e.next_out),e.next_out+=i,t.pending_out+=i,e.total_out+=i,e.avail_out-=i,t.pending-=i,0===t.pending&&(t.pending_out=0))}function b(e,t){o._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,N(e.strm)}function R(e,t){e.pending_buf[e.pending++]=t}function C(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function D(e,t){var i,a,n=e.max_chain_length,o=e.strstart,s=e.prev_length,r=e.nice_match,c=e.strstart>e.w_size-A?e.strstart-(e.w_size-A):0,l=e.window,d=e.w_mask,h=e.prev,u=e.strstart+S,p=l[o+s-1],g=l[o+s];e.prev_length>=e.good_match&&(n>>=2),r>e.lookahead&&(r=e.lookahead);do{if(l[(i=t)+s]===g&&l[i+s-1]===p&&l[i]===l[o]&&l[++i]===l[o+1]){for(o+=2,i++;l[++o]===l[++i]&&l[++o]===l[++i]&&l[++o]===l[++i]&&l[++o]===l[++i]&&l[++o]===l[++i]&&l[++o]===l[++i]&&l[++o]===l[++i]&&l[++o]===l[++i]&&o<u;);if(a=S-(u-o),o=u-S,s<a){if(e.match_start=t,r<=(s=a))break;p=l[o+s-1],g=l[o+s]}}}while((t=h[t&d])>c&&0!=--n);return s<=e.lookahead?s:e.lookahead}function k(e){var t,i,a,o,c,l,d,h,u,p=e.w_size;do{if(h=e.window_size-e.lookahead-e.strstart,e.strstart>=p+(p-A)){for(n.arraySet(e.window,e.window,p,p,0),e.match_start-=p,e.strstart-=p,e.block_start-=p,t=i=e.hash_size;a=e.head[--t],e.head[t]=p<=a?a-p:0,--i;);for(t=i=p;a=e.prev[--t],e.prev[t]=p<=a?a-p:0,--i;);h+=p}if(0===e.strm.avail_in)break;if(c=e.strm,l=e.window,d=e.strstart+e.lookahead,u=void 0,i=0===(u=(h=h)<(u=c.avail_in)?h:u)?0:(c.avail_in-=u,n.arraySet(l,c.input,c.next_in,u,d),1===c.state.wrap?c.adler=s(c.adler,l,u,d):2===c.state.wrap&&(c.adler=r(c.adler,l,u,d)),c.next_in+=u,c.total_in+=u,u),e.lookahead+=i,e.lookahead+e.insert>=f)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+f-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<f)););}while(e.lookahead<A&&0!==e.strm.avail_in)}function O(e,t){for(var i,a;;){if(e.lookahead<A){if(k(e),e.lookahead<A&&t===l)return 1;if(0===e.lookahead)break}if(i=0,e.lookahead>=f&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+f-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==i&&e.strstart-i<=e.w_size-A&&(e.match_length=D(e,i)),e.match_length>=f)if(a=o._tr_tally(e,e.strstart-e.match_start,e.match_length-f),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=f){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+f-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else a=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(a&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<f-1?e.strstart:f-1,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}function w(e,t){for(var i,a,n;;){if(e.lookahead<A){if(k(e),e.lookahead<A&&t===l)return 1;if(0===e.lookahead)break}if(i=0,e.lookahead>=f&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+f-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=f-1,0!==i&&e.prev_length<e.max_lazy_match&&e.strstart-i<=e.w_size-A&&(e.match_length=D(e,i),e.match_length<=5&&(1===e.strategy||e.match_length===f&&4096<e.strstart-e.match_start)&&(e.match_length=f-1)),e.prev_length>=f&&e.match_length<=e.prev_length){for(n=e.strstart+e.lookahead-f,a=o._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-f),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=n&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+f-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=f-1,e.strstart++,a&&(b(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((a=o._tr_tally(e,0,e.window[e.strstart-1]))&&b(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(a=o._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<f-1?e.strstart:f-1,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}function M(e,t,i,a,n){this.good_length=e,this.max_lazy=t,this.nice_length=i,this.max_chain=a,this.func=n}function B(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=p,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new n.Buf16(2*E),this.dyn_dtree=new n.Buf16(2*(2*_+1)),this.bl_tree=new n.Buf16(2*(2*m+1)),L(this.dyn_ltree),L(this.dyn_dtree),L(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new n.Buf16(T+1),this.heap=new n.Buf16(2*g+1),L(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new n.Buf16(2*g+1),L(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function H(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=u,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?I:y,e.adler=2===t.wrap?0:1,t.last_flush=l,o._tr_init(t),d):P(e,h)}function G(e){var t=H(e);return t===d&&((e=e.state).window_size=2*e.w_size,L(e.head),e.max_lazy_match=a[e.level].max_lazy,e.good_match=a[e.level].good_length,e.nice_match=a[e.level].nice_length,e.max_chain_length=a[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=f-1,e.match_available=0,e.ins_h=0),t}function U(e,t,i,a,o,s){if(!e)return h;var r=1;if(-1===t&&(t=6),a<0?(r=0,a=-a):15<a&&(r=2,a-=16),o<1||9<o||i!==p||a<8||15<a||t<0||9<t||s<0||4<s)return P(e,h);8===a&&(a=9);var c=new B;return(e.state=c).strm=e,c.wrap=r,c.gzhead=null,c.w_bits=a,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=o+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+f-1)/f),c.window=new n.Buf8(2*c.w_size),c.head=new n.Buf16(c.hash_size),c.prev=new n.Buf16(c.w_size),c.lit_bufsize=1<<o+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new n.Buf8(c.pending_buf_size),c.d_buf=+c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=t,c.strategy=s,c.method=i,G(e)}a=[new M(0,0,0,0,function(e,t){var i=65535;for(i>e.pending_buf_size-5&&(i=e.pending_buf_size-5);;){if(e.lookahead<=1){if(k(e),0===e.lookahead&&t===l)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var a=e.block_start+i;if((0===e.strstart||e.strstart>=a)&&(e.lookahead=e.strstart-a,e.strstart=a,b(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-A&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(b(e,!1),e.strm.avail_out),1)}),new M(4,4,8,4,O),new M(4,5,16,8,O),new M(4,6,32,32,O),new M(4,4,16,16,w),new M(8,16,32,32,w),new M(8,16,128,128,w),new M(8,32,128,256,w),new M(32,128,258,1024,w),new M(32,258,258,4096,w)],i.deflateInit=function(e,t){return U(e,t,p,15,8,0)},i.deflateInit2=U,i.deflateReset=G,i.deflateResetKeep=H,i.deflateSetHeader=function(e,t){return e&&e.state&&2===e.state.wrap?(e.state.gzhead=t,d):h},i.deflate=function(e,t){var i,n,s,c;if(!e||!e.state||5<t||t<0)return e?P(e,h):h;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&4!==t)return P(e,0===e.avail_out?-5:h);if(i.strm=e,u=i.last_flush,i.last_flush=t,i.status===I&&(2===i.wrap?(e.adler=0,R(i,31),R(i,139),R(i,8),i.gzhead?(R(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),R(i,255&i.gzhead.time),R(i,i.gzhead.time>>8&255),R(i,i.gzhead.time>>16&255),R(i,i.gzhead.time>>24&255),R(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),R(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(R(i,255&i.gzhead.extra.length),R(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=r(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(R(i,0),R(i,0),R(i,0),R(i,0),R(i,0),R(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),R(i,3),i.status=y)):(c=p+(i.w_bits-8<<4)<<8,c|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(c|=32),c+=31-c%31,i.status=y,C(i,c),0!==i.strstart&&(C(i,e.adler>>>16),C(i,65535&e.adler)),e.adler=1)),69===i.status)if(i.gzhead.extra){for(n=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>n&&(e.adler=r(e.adler,i.pending_buf,i.pending-n,n)),N(e),n=i.pending,i.pending!==i.pending_buf_size));)R(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>n&&(e.adler=r(e.adler,i.pending_buf,i.pending-n,n)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=r(e.adler,i.pending_buf,i.pending-n,n)),N(e),n=i.pending,i.pending===i.pending_buf_size)){s=1;break}}while(R(i,s=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0),0!==s);i.gzhead.hcrc&&i.pending>n&&(e.adler=r(e.adler,i.pending_buf,i.pending-n,n)),0===s&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=r(e.adler,i.pending_buf,i.pending-n,n)),N(e),n=i.pending,i.pending===i.pending_buf_size)){s=1;break}}while(R(i,s=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0),0!==s);i.gzhead.hcrc&&i.pending>n&&(e.adler=r(e.adler,i.pending_buf,i.pending-n,n)),0===s&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&N(e),i.pending+2<=i.pending_buf_size&&(R(i,255&e.adler),R(i,e.adler>>8&255),e.adler=0,i.status=y)):i.status=y),0!==i.pending){if(N(e),0===e.avail_out)return i.last_flush=-1,d}else if(0===e.avail_in&&v(t)<=v(u)&&4!==t)return P(e,-5);if(666===i.status&&0!==e.avail_in)return P(e,-5);if(0!==e.avail_in||0!==i.lookahead||t!==l&&666!==i.status){var u=2===i.strategy?function(e,t){for(var i;;){if(0===e.lookahead&&(k(e),0===e.lookahead)){if(t===l)return 1;break}if(e.match_length=0,i=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,i&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}(i,t):3===i.strategy?function(e,t){for(var i,a,n,s,r=e.window;;){if(e.lookahead<=S){if(k(e),e.lookahead<=S&&t===l)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=f&&0<e.strstart&&(a=r[n=e.strstart-1])===r[++n]&&a===r[++n]&&a===r[++n]){for(s=e.strstart+S;a===r[++n]&&a===r[++n]&&a===r[++n]&&a===r[++n]&&a===r[++n]&&a===r[++n]&&a===r[++n]&&a===r[++n]&&n<s;);e.match_length=S-(s-n),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=f?(i=o._tr_tally(e,1,e.match_length-f),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(i=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),i&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}(i,t):a[i.level].func(i,t);if(3!==u&&4!==u||(i.status=666),1===u||3===u)return 0===e.avail_out&&(i.last_flush=-1),d;if(2===u&&(1===t?o._tr_align(i):5!==t&&(o._tr_stored_block(i,0,0,!1),3===t&&(L(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),N(e),0===e.avail_out))return i.last_flush=-1,d}return 4!==t?d:i.wrap<=0?1:(2===i.wrap?(R(i,255&e.adler),R(i,e.adler>>8&255),R(i,e.adler>>16&255),R(i,e.adler>>24&255),R(i,255&e.total_in),R(i,e.total_in>>8&255),R(i,e.total_in>>16&255),R(i,e.total_in>>24&255)):(C(i,e.adler>>>16),C(i,65535&e.adler)),N(e),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?d:1)},i.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==I&&69!==t&&73!==t&&91!==t&&103!==t&&t!==y&&666!==t?P(e,h):(e.state=null,t===y?P(e,-3):d):h},i.deflateSetDictionary=function(e,t){var i,a,o,r,c,l,u,p=t.length;if(!e||!e.state)return h;if(2===(r=(i=e.state).wrap)||1===r&&i.status!==I||i.lookahead)return h;for(1===r&&(e.adler=s(e.adler,t,p,0)),i.wrap=0,p>=i.w_size&&(0===r&&(L(i.head),i.strstart=0,i.block_start=0,i.insert=0),u=new n.Buf8(i.w_size),n.arraySet(u,t,p-i.w_size,i.w_size,0),t=u,p=i.w_size),c=e.avail_in,l=e.next_in,u=e.input,e.avail_in=p,e.next_in=0,e.input=t,k(i);i.lookahead>=f;){for(a=i.strstart,o=i.lookahead-(f-1);i.ins_h=(i.ins_h<<i.hash_shift^i.window[a+f-1])&i.hash_mask,i.prev[a&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=a,a++,--o;);i.strstart=a,i.lookahead=f-1,k(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=f-1,i.match_available=0,e.next_in=l,e.input=u,e.avail_in=c,i.wrap=r,d},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":4,"./messages":6,"./trees":7}],6:[function(e,t){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],7:[function(e,t,i){var a=e("../utils/common");function n(e){for(var t=e.length;0<=--t;)e[t]=0}var o=16,s=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],r=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],l=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],d=new Array(576);n(d);var h=new Array(60);n(h);var u=new Array(512);n(u);var p=new Array(256);n(p);var g=new Array(29);n(g);var _,m,E,T=new Array(30);function f(e,t,i,a,n){this.static_tree=e,this.extra_bits=t,this.extra_base=i,this.elems=a,this.max_length=n,this.has_stree=e&&e.length}function S(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function A(e){return e<256?u[e]:u[256+(e>>>7)]}function I(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function y(e,t,i){e.bi_valid>o-i?(e.bi_buf|=t<<e.bi_valid&65535,I(e,e.bi_buf),e.bi_buf=t>>o-e.bi_valid,e.bi_valid+=i-o):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=i)}function P(e,t,i){y(e,i[2*t],i[2*t+1])}function v(e,t){for(var i=0;i|=1&e,e>>>=1,i<<=1,0<--t;);return i>>>1}function L(e,t,i){for(var a,n=new Array(16),o=0,s=1;s<=15;s++)n[s]=o=o+i[s-1]<<1;for(a=0;a<=t;a++){var r=e[2*a+1];0!==r&&(e[2*a]=v(n[r]++,r))}}function N(e){for(var t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function b(e){8<e.bi_valid?I(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function R(e,t,i,a){var n=2*t,o=2*i;return e[n]<e[o]||e[n]===e[o]&&a[t]<=a[i]}function C(e,t,i){for(var a=e.heap[i],n=i<<1;n<=e.heap_len&&(n<e.heap_len&&R(t,e.heap[n+1],e.heap[n],e.depth)&&n++,!R(t,a,e.heap[n],e.depth));)e.heap[i]=e.heap[n],i=n,n<<=1;e.heap[i]=a}function D(e,t,i){var a,n,o,c,l=0;if(0!==e.last_lit)for(;a=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],n=e.pending_buf[e.l_buf+l],l++,0==a?P(e,n,t):(P(e,(o=p[n])+256+1,t),0!==(c=s[o])&&y(e,n-=g[o],c),P(e,o=A(--a),i),0!==(c=r[o])&&y(e,a-=T[o],c)),l<e.last_lit;);P(e,256,t)}function k(e,t){var i,a,n,o=t.dyn_tree,s=t.stat_desc.static_tree,r=t.stat_desc.has_stree,c=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=573,i=0;i<c;i++)0!==o[2*i]?(e.heap[++e.heap_len]=l=i,e.depth[i]=0):o[2*i+1]=0;for(;e.heap_len<2;)o[2*(n=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[n]=0,e.opt_len--,r&&(e.static_len-=s[2*n+1]);for(t.max_code=l,i=e.heap_len>>1;1<=i;i--)C(e,o,i);for(n=c;i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],C(e,o,1),a=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=a,o[2*n]=o[2*i]+o[2*a],e.depth[n]=(e.depth[i]>=e.depth[a]?e.depth[i]:e.depth[a])+1,o[2*i+1]=o[2*a+1]=n,e.heap[1]=n++,C(e,o,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e){for(var i,a,n,o,s,r=t.dyn_tree,c=t.max_code,l=t.stat_desc.static_tree,d=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,u=t.stat_desc.extra_base,p=t.stat_desc.max_length,g=0,_=0;_<=15;_++)e.bl_count[_]=0;for(r[2*e.heap[e.heap_max]+1]=0,i=e.heap_max+1;i<573;i++)p<(_=r[2*r[2*(a=e.heap[i])+1]+1]+1)&&(_=p,g++),r[2*a+1]=_,c<a||(e.bl_count[_]++,o=0,u<=a&&(o=h[a-u]),s=r[2*a],e.opt_len+=s*(_+o),d&&(e.static_len+=s*(l[2*a+1]+o)));if(0!==g){do{for(_=p-1;0===e.bl_count[_];)_--}while(e.bl_count[_]--,e.bl_count[_+1]+=2,e.bl_count[p]--,0<(g-=2));for(_=p;0!==_;_--)for(a=e.bl_count[_];0!==a;)c<(n=e.heap[--i])||(r[2*n+1]!==_&&(e.opt_len+=(_-r[2*n+1])*r[2*n],r[2*n+1]=_),a--)}}(e),L(o,l,e.bl_count)}function O(e,t,i){var a,n,o=-1,s=t[1],r=0,c=7,l=4;for(0===s&&(c=138,l=3),t[2*(i+1)+1]=65535,a=0;a<=i;a++)n=s,s=t[2*(a+1)+1],++r<c&&n===s||(r<l?e.bl_tree[2*n]+=r:0!==n?(n!==o&&e.bl_tree[2*n]++,e.bl_tree[32]++):r<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=n,l=(r=0)===s?(c=138,3):n===s?(c=6,3):(c=7,4))}function w(e,t,i){var a,n,o=-1,s=t[1],r=0,c=7,l=4;for(0===s&&(c=138,l=3),a=0;a<=i;a++)if(n=s,s=t[2*(a+1)+1],!(++r<c&&n===s)){if(r<l)for(;P(e,n,e.bl_tree),0!=--r;);else 0!==n?(n!==o&&(P(e,n,e.bl_tree),r--),P(e,16,e.bl_tree),y(e,r-3,2)):r<=10?(P(e,17,e.bl_tree),y(e,r-3,3)):(P(e,18,e.bl_tree),y(e,r-11,7));o=n,l=(r=0)===s?(c=138,3):n===s?(c=6,3):(c=7,4)}}n(T);var M=!1;function B(e,t,i,n){y(e,0+(n?1:0),3),t=t,i=i,b(e=e),I(e,i),I(e,~i),a.arraySet(e.pending_buf,e.window,t,i,e.pending),e.pending+=i}i._tr_init=function(e){M||(function(){for(var e,t,i,a,n=new Array(16),o=i=0;o<28;o++)for(g[o]=i,e=0;e<1<<s[o];e++)p[i++]=o;for(p[i-1]=o,o=a=0;o<16;o++)for(T[o]=a,e=0;e<1<<r[o];e++)u[a++]=o;for(a>>=7;o<30;o++)for(T[o]=a<<7,e=0;e<1<<r[o]-7;e++)u[256+a++]=o;for(t=0;t<=15;t++)n[t]=0;for(e=0;e<=143;)d[2*e+1]=8,e++,n[8]++;for(;e<=255;)d[2*e+1]=9,e++,n[9]++;for(;e<=279;)d[2*e+1]=7,e++,n[7]++;for(;e<=287;)d[2*e+1]=8,e++,n[8]++;for(L(d,287,n),e=0;e<30;e++)h[2*e+1]=5,h[2*e]=v(e,5);_=new f(d,s,257,286,15),m=new f(h,r,0,30,15),E=new f(new Array(0),c,0,19,7)}(),M=!0),e.l_desc=new S(e.dyn_ltree,_),e.d_desc=new S(e.dyn_dtree,m),e.bl_desc=new S(e.bl_tree,E),e.bi_buf=0,e.bi_valid=0,N(e)},i._tr_stored_block=B,i._tr_flush_block=function(e,t,i,a){var n,o,s=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){for(var t=4093624447,i=0;i<=31;i++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*i])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(i=32;i<256;i++)if(0!==e.dyn_ltree[2*i])return 1;return 0}(e)),k(e,e.l_desc),k(e,e.d_desc),s=function(e){var t;for(O(e,e.dyn_ltree,e.l_desc.max_code),O(e,e.dyn_dtree,e.d_desc.max_code),k(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*l[t]+1];t--);return e.opt_len+=14+3*(t+1),t}(e),n=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=n&&(n=o)):n=o=i+5,i+4<=n&&-1!==t?B(e,t,i,a):4===e.strategy||o===n?(y(e,2+(a?1:0),3),D(e,d,h)):(y(e,4+(a?1:0),3),function(e,t,i,a){var n;for(y(e,t-257,5),y(e,i-1,5),y(e,a-4,4),n=0;n<a;n++)y(e,e.bl_tree[2*l[n]+1],3);w(e,e.dyn_ltree,t-1),w(e,e.dyn_dtree,i-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),D(e,e.dyn_ltree,e.dyn_dtree)),N(e),a&&b(e)},i._tr_tally=function(e,t,i){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&i,e.last_lit++,0===t?e.dyn_ltree[2*i]++:(e.matches++,t--,e.dyn_ltree[2*(p[i]+256+1)]++,e.dyn_dtree[2*A(t)]++),e.last_lit===e.lit_bufsize-1},i._tr_align=function(e){y(e,2,3),P(e,256,d),16===(e=e).bi_valid?(I(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},{"../utils/common":1}],8:[function(e,t){t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],"/lib/deflate.js":[function(e,t,i){var a=e("./zlib/deflate"),n=e("./utils/common"),o=e("./utils/strings"),s=e("./zlib/messages"),r=e("./zlib/zstream"),c=Object.prototype.toString;function l(e){if(!(this instanceof l))return new l(e);this.options=n.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;if(t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new r,this.strm.avail_out=0,0!==(e=a.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy)))throw new Error(s[e]);if(t.header&&a.deflateSetHeader(this.strm,t.header),t.dictionary){if(t="string"==typeof t.dictionary?o.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(e=a.deflateSetDictionary(this.strm,t)))throw new Error(s[e]);this._dict_set=!0}}function d(e,t){if((t=new l(t)).push(e,!0),t.err)throw t.msg||s[t.err];return t.result}l.prototype.push=function(e,t){var i,s,r=this.strm,l=this.options.chunkSize;if(this.ended)return!1;s=t===~~t?t:!0===t?4:0,"string"==typeof e?r.input=o.string2buf(e):"[object ArrayBuffer]"===c.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;do{if(0===r.avail_out&&(r.output=new n.Buf8(l),r.next_out=0,r.avail_out=l),1!==(i=a.deflate(r,s))&&0!==i)return this.onEnd(i),!(this.ended=!0)}while(0!==r.avail_out&&(0!==r.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(o.buf2binstring(n.shrinkBuf(r.output,r.next_out))):this.onData(n.shrinkBuf(r.output,r.next_out))),(0<r.avail_in||0===r.avail_out)&&1!==i);return 4===s?(i=a.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,0===i):2!==s||(this.onEnd(0),!(r.avail_out=0))},l.prototype.onData=function(e){this.chunks.push(e)},l.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},i.Deflate=l,i.deflate=d,i.deflateRaw=function(e,t){return(t=t||{}).raw=!0,d(e,t)},i.gzip=function(e,t){return(t=t||{}).gzip=!0,d(e,t)}},{"./utils/common":1,"./utils/strings":2,"./zlib/deflate":5,"./zlib/messages":6,"./zlib/zstream":8}]},{},[])("/lib/deflate.js")})}).call(void 0,void 0!==a?a:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),cc._RF.pop()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],PictorialEnemyDetailPage:[function(e,t){"use strict";cc._RF.push(t,"47bb2hF0aVPKKpS2tO4HHxZ","PictorialEnemyDetailPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{attrDescPrefab:cc.Prefab,uiAtlas:cc.SpriteAtlas},onLoadPage:function(){this.enemyNameLabel=cc.find("content/enemyName",this.node).getComponent(cc.Label),this.enemyIntroLabel=cc.find("content/enemyIntro",this.node).getComponent(cc.Label),this.hpIconNode=cc.find("content/attrLayout/hp/layout/icon",this.node),this.hpLabel=cc.find("content/attrLayout/hp/layout/label1",this.node).getComponent(cc.Label),this.hpDescLabel=cc.find("content/attrLayout/hp/label",this.node).getComponent(cc.Label),this.phyAttackLabel=cc.find("content/attrLayout/phyAttack/layout/label1",this.node).getComponent(cc.Label),this.attackDescLabel=cc.find("content/attrLayout/phyAttack/label",this.node).getComponent(cc.Label),this.phyDefIconNode=cc.find("content/attrLayout/phyDefense/layout/icon",this.node),this.phyDefenseLabel=cc.find("content/attrLayout/phyDefense/layout/label1",this.node).getComponent(cc.Label),this.spellDefIconNode=cc.find("content/attrLayout/spellDefense/layout/icon",this.node),this.spellDefenseLabel=cc.find("content/attrLayout/spellDefense/layout/label1",this.node).getComponent(cc.Label),this.speedIconNode=cc.find("content/attrLayout/speed/layout/icon",this.node),this.speedLabel=cc.find("content/attrLayout/speed/layout/label1",this.node).getComponent(cc.Label),this.hurtIconNode=cc.find("content/attrLayout/hurt/layout/icon",this.node),this.hurtLabel=cc.find("content/attrLayout/hurt/layout/label1",this.node).getComponent(cc.Label),this.missIconNode=cc.find("content/attrLayout/miss/layout/icon",this.node),this.missLabel=cc.find("content/attrLayout/miss/layout/label1",this.node).getComponent(cc.Label),this.flyLabelNode=cc.find("content/specialDetail/labelFly",this.node),this.atkTypeLabelNode=cc.find("content/specialDetail/labelAtkType",this.node),this.immuneLabelNode=cc.find("content/specialDetail/labelImmune",this.node),this.dotLabelNode=cc.find("content/specialDetail/labelDot",this.node),this.skillLabel=cc.find("content/specialDetail/labelSkill",this.node).getComponent(cc.Label),this.recoLabel=cc.find("content/reco",this.node).getComponent(cc.Label),this.iconSprite=cc.find("content/enemy/icon",this.node).getComponent(cc.Sprite),this.bgSprite=cc.find("content/enemy/bg",this.node).getComponent(cc.Sprite),this.phyAttackIconNode=cc.find("content/attrLayout/phyAttack/layout/icon",this.node),this.spellAttackIconNode=cc.find("content/attrLayout/phyAttack/layout/spellIcon",this.node),this.attrDescNode=cc.instantiate(this.attrDescPrefab),this.attrDescNode.parent=this.node,this.attrDescNode.active=!1,this.attrDescLabel=cc.find("bgLayout/thingDescribe",this.attrDescNode).getComponent(cc.Label)},showPageBegan:function(){this.enemyAtlasMap={},this.enemyAtlasMap["pictorialEnemy1.plist"]=this.data.enemyAtlas,this.chapterId=this.data.chapterId,this.initData(this.data.enemyId,this.data.rateData)},initData:function(e,t){var a=i.templateManager.getEnemyDataById(e);this.enemyNameLabel.string=i.lang.getGameText(a.name),this.enemyIntroLabel.string=i.lang.getGameText(a.desc);var n=t?Math.floor(a.hp*t.hpRate/1e4):a.hp;this.hpLabel.string=i.Utils.formatBigNumberForLabel(n),this.phyDefenseLabel.string=a.physicalDefense,this.spellDefenseLabel.string=a.magicDefense,this.speedLabel.string=6*a.speed,i.lang.updateLabelString(this.hurtLabel,[a.baseLife]),i.lang.updateLabelString(this.missLabel,[(0<a.dodgeRate?a.dodgeRate:0)/100]);var o=0<a.physicalAttack;this.phyAttackIconNode.active=o,this.spellAttackIconNode.active=!o,e=t?Math.floor(a.physicalAttack*t.attackRate/1e4):a.physicalAttack,n=t?Math.floor(a.magicAttack*t.attackRate/1e4):a.magicAttack,this.phyAttackLabel.string=o?i.Utils.formatBigNumberForLabel(e):i.Utils.formatBigNumberForLabel(n);var s=a.towerTypes;if(s){for(var r="",c=0;c<s.length;c++){var l=i.templateManager.getTowerTypeById(s[c]);0!==c&&(r+="\u3001"),r+=i.lang.getGameText(l.name)}i.lang.updateLabelString(this.recoLabel,[r])}this.flyLabelNode.active=a.isFly,this.atkTypeLabelNode.active=a.arms!==i.constant.ARMS_TYPE_MELEE,this.immuneLabelNode.active=a.isImmune,this.dotLabelNode.active=a.isDot,a.skill?(this.skillLabel.node.active=!0,d=a.skill[0][0],d=i.templateManager.getEnemySkillDataById(d),this.skillLabel.string=i.lang.getGameText(d.desc)):this.flyLabelNode.active||this.atkTypeLabelNode.active||this.immuneLabelNode.active||this.dotLabelNode.active?this.skillLabel.node.active=!1:(this.skillLabel.node.active=!0,this.skillLabel.string=i.lang.getGameText(i.GameTextCode.HANDBOOK_NO_DESC));var d=i.templateManager.getChapterDataById(this.chapterId);this.bgSprite.spriteFrame=this.uiAtlas.getSpriteFrame(d.handbookBg),this.enemyAtlasMap[a.handbookListAlbum+".plist"]&&(this.iconSprite.spriteFrame=this.enemyAtlasMap[a.handbookListAlbum+".plist"].getSpriteFrame(a.handbookListIcon)),t?(this.hpDescLabel.string=i.lang.getGameText(i.GameTextCode.ENEMY_ATTRIBUTE_GROW_TYPE),this.attackDescLabel.string=i.lang.getGameText(i.GameTextCode.ENEMY_ATTRIBUTE_GROW_TYPE)):(this.hpDescLabel.string=i.lang.getGameText(i.GameTextCode.ENEMY_ATTRIBUTE_GROW_LEVEL),this.attackDescLabel.string=i.lang.getGameText(i.GameTextCode.ENEMY_ATTRIBUTE_GROW_LEVEL)),this.hideAttrDesc()},onClickClose:function(){this.closePage()},hideAttrDesc:function(){this.attrDescNode.stopAllActions(),this.attrDescNode.active=!1},showAttrDesc:function(e,t){this.attrDescLabel.string=i.lang.getGameText(t),this.attrDescNode.active=!0,this.attrDescNode.opacity=1,t=e.convertToWorldSpaceAR(cc.v2(0,0)),t=this.node.convertToNodeSpaceAR(t),this.attrDescNode.position=cc.v2(t.x,t.y+e.height/2),this.attrDescNode.stopAllActions(),this.attrDescNode.runAction(cc.sequence(cc.fadeIn(.05),cc.delayTime(2),cc.callFunc(function(){this.attrDescNode.active=!1},this)))},onClickAtk:function(){var e=(t=0<i.templateManager.getEnemyDataById(this.data.enemyId).physicalAttack)?this.phyAttackIconNode:this.spellAttackIconNode,t=t?i.GameTextCode.HANDBOOK_TIP_2:i.GameTextCode.HANDBOOK_TIP_1;this.showAttrDesc(e,t)},onClickHp:function(){this.showAttrDesc(this.hpIconNode,i.GameTextCode.HANDBOOK_TIP_6)},onClickPhyDef:function(){this.showAttrDesc(this.phyDefIconNode,i.GameTextCode.HANDBOOK_TIP_7)},onClickSpellDef:function(){this.showAttrDesc(this.spellDefIconNode,i.GameTextCode.HANDBOOK_TIP_8)},onClickSpeed:function(){this.showAttrDesc(this.speedIconNode,i.GameTextCode.HANDBOOK_TIP_9)},onClickHurt:function(){this.showAttrDesc(this.hurtIconNode,i.GameTextCode.HANDBOOK_TIP_10)},onClickMiss:function(){this.showAttrDesc(this.missIconNode,i.GameTextCode.HANDBOOK_TIP_11)}}),cc._RF.pop()},{}],PictorialItemRender:[function(e,t){"use strict";cc._RF.push(t,"b53e6U4jdhGfbkUI1QmLuUS","PictorialItemRender");var i=e("Aft");cc.Class({extends:cc.Component,properties:{uiAtlas:cc.SpriteAtlas},onLoad:function(){this.bgSprite=cc.find("bg",this.node).getComponent(cc.Sprite),this.iconSprite=cc.find("icon",this.node).getComponent(cc.Sprite),this.lockSprite=cc.find("lock",this.node).getComponent(cc.Sprite),this.newNode=cc.find("new",this.node),this.bossNode=cc.find("boss",this.node),this.creamNode=cc.find("cream",this.node),this.node.on(cc.Node.EventType.TOUCH_END,this.onClick,this)},initData:function(e){this.enemyAtlasMap={},this.type=e.tabType,this.data=e.data,this.locked=!1,this.type===i.constant.PICTORIAL_TYPE_TOWER?this.initTower():this.type===i.constant.PICTORIAL_TYPE_ENEMY&&this.initEnemy(),this.updateTowerNew()},initEnemy:function(){var e=this.data.enemyData,t=this.data.chapterId,a=this.data.instanceLevel,n=i.player.instanceModule.getMaxChapter(),o=i.player.instanceModule.getChapterMaxLevel(n);0===o&&1<n&&(n=Math.max(1,n-1),o=i.templateManager.getInstanceListByChapterId(n).length-1),o=n<t||t===n&&o<a,(this.isLock=o)?(this.bgSprite.node.active=!1,this.iconSprite.node.active=!1,this.lockSprite.node.active=!0,this.bossNode.active=!1,this.creamNode.active=!1,a=i.templateManager.getGameParamValue("handbookLockBg"),this.lockSprite.spriteFrame=this.uiAtlas.getSpriteFrame(a)):(this.bgSprite.node.active=!0,this.iconSprite.node.active=!0,this.lockSprite.node.active=!1,this.bossNode.active=e.type===i.constant.ENEMY_TYPE_BOSS,this.creamNode.active=e.type===i.constant.ENEMY_TYPE_ELITE,t=i.templateManager.getChapterDataById(t),this.bgSprite.spriteFrame=this.uiAtlas.getSpriteFrame(t.handbookBg),this.iconSprite.node.active=!1),this.locked=o},initTower:function(){var e=this.data.towerData,t=this.data.towerType,a=i.player.towerModule.getTowerQuality(t);a=i.templateManager.getTowerQualityDataByLevel(t,a),this.needChapterId=-1;var n=this.needInstanceLevel=-1;if(e)for(var o=e.level,s=i.JsonData.Instance,r=0;r<s.length;r++){for(var c=s[r].towerMaxLevel,l=0;l<c.length;l++)if(c[l][0]===t&&o===c[l][1]){this.needChapterId=s[r].chapterId,n=s[r].id;break}if(-1!==this.needChapterId)break}if(0<this.needChapterId)for(var d=i.templateManager.getInstanceListByChapterId(this.needChapterId),h=0;h<d.length;h++)if(d[h].id===n){this.needInstanceLevel=h;break}this.bossNode.active=!1,this.creamNode.active=!1,this.data.isLocked?(this.bgSprite.node.active=!1,this.iconSprite.node.active=!1,this.lockSprite.node.active=!0,this.lockSprite.spriteFrame=this.uiAtlas.getSpriteFrame(a.handbookLockBg),this.locked=!0):(this.bgSprite.node.active=!0,this.iconSprite.node.active=!0,this.lockSprite.node.active=!1,this.bgSprite.spriteFrame=this.uiAtlas.getSpriteFrame(a.handbookBg),this.iconSprite.node.active=!1,this.locked=!1)},updateTowerNew:function(){this.type===i.constant.PICTORIAL_TYPE_ENEMY?this.newNode.active=!1:this.type===i.constant.PICTORIAL_TYPE_TOWER&&(this.newNode.active=this.data.towerData&&i.player.towerModule.isNewPictorialTower(this.data.towerData.id),this.newNode.active&&i.gameScene.redNodeAction(this.newNode))},updateEnemyShow:function(e){this.enemyAtlas=e,this.enemyAtlasMap["pictorialEnemy1.plist"]=e,this.type!==i.constant.PICTORIAL_TYPE_ENEMY||this.isLock||(this.iconSprite.node.active=!0,e=this.data.enemyData,this.iconSprite.spriteFrame=this.enemyAtlasMap[e.handbookListAlbum+".plist"].getSpriteFrame(e.handbookListIcon))},updateTowerShow:function(e){this.towerAtlas=e,this.type!==i.constant.PICTORIAL_TYPE_TOWER||this.data.isLocked||(this.iconSprite.node.active=!0,e=this.data.towerData,this.iconSprite.spriteFrame=this.towerAtlas.getSpriteFrame(e.icon))},onClick:function(){if(this.type===i.constant.PICTORIAL_TYPE_TOWER){if(this.locked){var e,t="";return t=this.data.towerData?this.data.towerData.heroId?(e=i.templateManager.getHeroDataById(this.data.towerData.heroId),i.lang.getArgGameText(i.GameTextCode.UNLOCK_BY_NEW_HERO,[i.lang.getGameText(e.name)])):(a=i.templateManager.getChapterDataById(this.needChapterId),a=i.lang.getGameText(a.name),i.lang.getArgGameText(i.GameTextCode.UNLOCK_BY_INSTANCE_BASE,[a,this.needInstanceLevel])):i.lang.getGameText(i.GameTextCode.COMING_SOON),void i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,t)}var a=this.data.towerData.id;t={towerId:a,towerAtlas:this.towerAtlas},i.gameScene.showPage(i.pageConstant.PAGE_TYPE_PICTORIAL_TOWER_DETAIL,t),i.player.towerModule.removePictorialNewTower(a)}else this.type===i.constant.PICTORIAL_TYPE_ENEMY&&(this.locked?i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,i.lang.getGameText(i.GameTextCode.TIPS_LOCKED)):this.enemyAtlas?(a={enemyId:this.data.enemyData.id,chapterId:this.data.chapterId,enemyAtlas:this.enemyAtlas},i.gameScene.showPage(i.pageConstant.PAGE_TYPE_PICTORIAL_ENEMY_DETAIL,a)):i.Logger.debug("this.enemyAtlas = null return"))}}),cc._RF.pop()},{}],PictorialPage:[function(e,t){"use strict";cc._RF.push(t,"11ebdPZPsBBQbRrxODDW8SX","PictorialPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{itemPrefab:cc.Prefab},onLoadPage:function(){this.towerBtnChooseNode=cc.find("tabLayout/towerButton/background/choose",this.node),this.enemyBtnChooseNode=cc.find("tabLayout/enemyButton/background/choose",this.node),this.towerLabelNode=cc.find("tabLayout/towerButton/background/label",this.node),this.enemyLabelNode=cc.find("tabLayout/enemyButton/background/label",this.node),this.newNode=cc.find("tabLayout/towerButton/background/new",this.node),this.scrollView=cc.find("content/ScrollView",this.node).getComponent(cc.ScrollView),i.gameScene.isIphoneX()&&i.Utils.addNodeTopSpace(this.node)},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.UPDATE_PICTORIAL_TOWER_RED,function(){return e.checkTowerRed()})},showPageBegan:function(){this.node.scale=0,this.needInitTime=2},updateEnemyListIcon:function(e){if(this.tabType===i.constant.PICTORIAL_TYPE_ENEMY)for(var t=0;t<this.itemPosInfoList.length;t++)this.itemPosInfoList[t].item&&this.itemPosInfoList[t].item.getComponent("PictorialItemRender").updateEnemyShow(e)},updateTowerListIcon:function(e){if(this.tabType===i.constant.PICTORIAL_TYPE_TOWER)for(var t=0;t<this.itemPosInfoList.length;t++)this.itemPosInfoList[t].item&&this.itemPosInfoList[t].item.getComponent("PictorialItemRender").updateTowerShow(e)},createItemPool:function(){if(!this.itemPool){this.itemPool=[];for(var e=0;e<30;e++){var t=cc.instantiate(this.itemPrefab);t.parent=this.scrollView.content,t.active=!1,this.itemPool.push(t),this.itemSize||(this.itemSize=cc.size(t.width,t.height),this.checkItemTopY=(this.scrollView.node.height+t.height)/2+t.height/2+20,this.checkItemBottomY=-(this.scrollView.node.height+t.height)/2-t.height/2+20)}}},getItemByPool:function(){if(0<this.itemPool.length){var e=this.itemPool[0];return e.active=!0,this.itemPool.splice(0,1),e}return(e=cc.instantiate(this.itemPrefab)).parent=this.scrollView.content,e},recoverItem:function(e){e&&(e.active=!1,this.itemPool.push(e))},initData:function(){this.createItemPool(),this.updateAllDataList(),this.colCount=4,this.spacingY=12,this.spacingX=20,this.contentWidth=this.scrollView.content.width,this.tabType=0,this.changeTab(i.constant.PICTORIAL_TYPE_TOWER),this.checkTowerRed(),this.node.scale=1,this.initFinish=!0;var e=this;this.enemyAtlas=null;var t=i.player.commonModule.isLowIosDevice()?"textures/pictorial/pictorialEnemy1_small":"textures/pictorial/pictorialEnemy1";cc.loader.loadRes(t,cc.SpriteAtlas,function(t,i){t?cc.error(t):(e.enemyAtlas=i,e.updateEnemyListIcon(i))}),this.towerAtlas=null,t=i.player.commonModule.isLowIosDevice()?"textures/pictorial/pictorial_tower_small":"textures/pictorial/pictorial_tower",cc.loader.loadRes(t,cc.SpriteAtlas,function(t,i){t?cc.error(t):(e.towerAtlas=i,e.updateTowerListIcon(i))})},updateAllDataList:function(){this.towerDataList=[],this.enemyDataList=[];var e=i.player.instanceModule.getMaxChapter(),t=i.player.instanceModule.getChapterMaxLevel(e),a=t,n=e;0===a&&1<n&&(n=Math.max(1,n-1),a=i.templateManager.getInstanceListByChapterId(n).length-1);for(var o=i.templateManager.getAllInstanceEnemyData(),s=0,r=0,c=0;c<o.length;c++)if(o[c].enemyData.isMapShow){if(this.enemyDataList.push({tabType:i.constant.PICTORIAL_TYPE_ENEMY,data:o[c]}),s){if(0==--s)break}else{var l=o[c].chapterId,d=o[c].instanceLevel;(n<l||l===n&&a<d)&&(s=r%4==3?4:3-r%4)}r++}for(var h=i.JsonData.Tower,u={},p=0,g=(e=i.templateManager.getInstanceListByChapterId(e))[t=t>=e.length?e.length-1:t].towerMaxLevel,_={},m=0;m<g.length;m++)_[g[m][0]]=g[m][1];for(var E={},T=!1,f=0;f<h.length;f++){var S,A=h[f];u.hasOwnProperty(A.typeID)||(u[A.typeID]=[]),!_[A.typeID]||A.level>_[A.typeID]||A.heroId&&!i.player.heroModule.getHeroBaseDataById(A.heroId)?(E[A.typeID]||(E[A.typeID]=[]),T=!0,E[A.typeID].push(A)):(u[A.typeID].push({tabType:i.constant.PICTORIAL_TYPE_TOWER,data:{towerData:A,towerType:A.typeID}}),p<(S=u[A.typeID].length)&&(p=S))}var I,y,P=!0;for(I in u)if(u.hasOwnProperty(I)&&u[I].length!==p){P=!1;break}for(y in P&&T&&(p+=1),u)if(u.hasOwnProperty(y)){var v=p-u[y].length;if(!(v<=0))for(var L=0;L<v;L++){var N=null;E[y]&&E[y][L]&&(N=E[y][L]),u[y].push({tabType:i.constant.PICTORIAL_TYPE_TOWER,data:{towerData:N,towerType:parseInt(y),isLocked:!0}})}}for(var b=0;b<p;b++)for(var R in u)u.hasOwnProperty(R)&&this.towerDataList.push(u[R][b])},checkTowerRed:function(){if(this.newNode.active=i.player.towerModule.isHavePictorialNewTower(),this.newNode.active&&i.gameScene.redNodeAction(this.newNode),this.tabType===i.constant.PICTORIAL_TYPE_TOWER)for(var e=0;e<this.itemPosInfoList.length;e++)this.itemPosInfoList[e].item&&this.itemPosInfoList[e].item.getComponent("PictorialItemRender").updateTowerNew()},onClickTower:function(){this.changeTab(i.constant.PICTORIAL_TYPE_TOWER)},onClickEnemy:function(){if(this.changeTab(i.constant.PICTORIAL_TYPE_ENEMY),this.tabType===i.constant.PICTORIAL_TYPE_ENEMY)for(var e,t=0;t<this.itemPosInfoList.length;t++)this.itemPosInfoList[t].item&&(e=this.itemPosInfoList[t].item.getComponent("PictorialItemRender"),this.enemyAtlas&&e.updateEnemyShow(this.enemyAtlas));else if(this.tabType===i.constant.PICTORIAL_TYPE_TOWER)for(var a=0;a<this.itemPosInfoList.length;a++){var n;this.itemPosInfoList[a].item&&(n=this.itemPosInfoList[a].item.getComponent("PictorialItemRender"),this.towerAtlas&&n.updateTowerShow(this.towerAtlas))}},onClickClose:function(){this.closePage()},changeTab:function(e){e!==this.tabType&&(this.tabType=e,this.dataList=[],e===i.constant.PICTORIAL_TYPE_TOWER?(this.dataList=this.towerDataList,this.towerBtnChooseNode.active=!0,this.enemyBtnChooseNode.active=!1,this.towerLabelNode.color=cc.color("#B05F3A"),this.enemyLabelNode.color=cc.color("#FFEED6")):e===i.constant.PICTORIAL_TYPE_ENEMY&&(this.dataList=this.enemyDataList,this.towerBtnChooseNode.active=!1,this.enemyBtnChooseNode.active=!0,this.enemyLabelNode.color=cc.color("#B05F3A"),this.towerLabelNode.color=cc.color("#FFEED6")),this.updateScrollInfo(),this.updateScrollView())},updateScrollInfo:function(){if(this.itemPosInfoList&&0<this.itemPosInfoList.length)for(var e=0;e<this.itemPosInfoList.length;e++)this.itemPosInfoList[e].item&&this.recoverItem(this.itemPosInfoList[e].item);this.itemPosInfoList=[];for(var t=this.scrollView.node.height,i=0,a=-1,n=0;n<this.dataList.length;n++){var o=n%this.colCount,s=Math.floor(n/this.colCount);s!==a&&(i+=this.itemSize.height+this.spacingY*(0===n?0:1),a=s),s=-this.contentWidth/2+this.itemSize.width*(.5+o)+this.spacingX*o,o=-i+this.itemSize.height/2,this.itemPosInfoList.push({pos:cc.v2(s,o),data:this.dataList[n],item:null})}this.scrollView.content.height=Math.max(i,t)},updateScrollView:function(){for(var e=0;e<this.itemPosInfoList.length;e++){var t=this.itemPosInfoList[e],i=t.pos,a=this.getPositionInView(cc.v2(i.x,i.y));(a.y>this.checkItemTopY||a.y<this.checkItemBottomY)&&t.item?(this.recoverItem(t.item),t.item=null):a.y<this.checkItemTopY&&a.y>this.checkItemBottomY&&!t.item&&t.data&&(t.item=this.getItemByPool(),t.item.position=i,(i=t.item.getComponent("PictorialItemRender")).initData(t.data),this.enemyAtlas&&i.updateEnemyShow(this.enemyAtlas),this.towerAtlas&&i.updateTowerShow(this.towerAtlas))}},getPositionInView:function(e){return e=this.scrollView.content.convertToWorldSpaceAR(e),this.scrollView.node.convertToNodeSpaceAR(e)},update:function(){0<this.needInitTime&&(this.needInitTime--,0===this.needInitTime&&this.initData()),this.initFinish&&this.updateScrollView()},closePageEnded:function(){this.enemyAtlas&&i.player.commonModule.isLowIosDevice()&&(cc.loader.release(cc.loader.getDependsRecursively(this.enemyAtlas)),this.enemyAtlas=null),this.towerAtlas&&i.player.commonModule.isLowIosDevice()&&(cc.loader.release(cc.loader.getDependsRecursively(this.towerAtlas)),this.towerAtlas=null)}}),cc._RF.pop()},{}],PictorialTowerDetailPage:[function(e,t){"use strict";cc._RF.push(t,"8dc66NBjpxFEYujkaATXSx/","PictorialTowerDetailPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{attrDescPrefab:cc.Prefab,iconAtlas:cc.SpriteAtlas},onLoadPage:function(){this.towerNameLabel=cc.find("content/towerName",this.node).getComponent(cc.Label),this.towerIntroLabel=cc.find("content/towerIntro",this.node).getComponent(cc.Label),this.levelLabel=cc.find("content/detailLayout/levelLayout/label1",this.node).getComponent(cc.Label),this.qualityLabel=cc.find("content/detailLayout/qualityLayout/label1",this.node).getComponent(cc.Label),this.ironLabel=cc.find("content/detailLayout/ironLayout/label1",this.node).getComponent(cc.Label),this.attackLabel=cc.find("content/attr/attack/layout/label1",this.node).getComponent(cc.Label),this.phyAttackIconNode=cc.find("content/attr/attack/layout/icon",this.node),this.spellAttackIconNode=cc.find("content/attr/attack/layout/spellIcon",this.node),this.speedIconNode=cc.find("content/attr/speed/layout/icon",this.node),this.speedLabel=cc.find("content/attr/speed/layout/label1",this.node).getComponent(cc.Label),this.rangeIconNode=cc.find("content/attr/range/layout/icon",this.node),this.rangeLabel=cc.find("content/attr/range/layout/label1",this.node).getComponent(cc.Label),this.soldierHpIconNode=cc.find("content/attrSoldierLayout/hp/layout/icon",this.node),this.soldierHpLabel=cc.find("content/attrSoldierLayout/hp/layout/label1",this.node).getComponent(cc.Label),this.soldierPhyAtkIconNode=cc.find("content/attrSoldierLayout/phyAttack/layout/icon",this.node),this.soldierPhyAtkLabel=cc.find("content/attrSoldierLayout/phyAttack/layout/label1",this.node).getComponent(cc.Label),this.soldierSpellAtkIconNode=cc.find("content/attrSoldierLayout/spellAttack/layout/icon",this.node),this.soldierSpellAtkLabel=cc.find("content/attrSoldierLayout/spellAttack/layout/label1",this.node).getComponent(cc.Label),this.soldierPhyDefenseIconNode=cc.find("content/attrSoldierLayout/phyDefense/layout/icon",this.node),this.soldierPhyDefenseLabel=cc.find("content/attrSoldierLayout/phyDefense/layout/label1",this.node).getComponent(cc.Label),this.soldierSpellDefenseIconNode=cc.find("content/attrSoldierLayout/spellDefense/layout/icon",this.node),this.soldierSpellDefenseLabel=cc.find("content/attrSoldierLayout/spellDefense/layout/label1",this.node).getComponent(cc.Label),this.soldierTimeIconNode=cc.find("content/attrSoldierLayout/time/layout/icon",this.node),this.soldierTimeLabel=cc.find("content/attrSoldierLayout/time/layout/label1",this.node).getComponent(cc.Label),this.rangeAtkLabelNode=cc.find("content/specialDetail/rangeAtkLabel",this.node),this.attackFlyLabelNode=cc.find("content/specialDetail/attackFlyLabel",this.node),this.moreIronLabelNode=cc.find("content/specialDetail/moreIronLabel",this.node),this.reducePhyDefLabel=cc.find("content/specialDetail/reducePhyDefLabel",this.node).getComponent(cc.Label),this.reduceSpellDefLabel=cc.find("content/specialDetail/reduceSpellDefLabel",this.node).getComponent(cc.Label),this.skillLabel=cc.find("content/specialDetail/skillLabel",this.node).getComponent(cc.Label),this.soldierAttrNode=cc.find("content/attrSoldierLayout",this.node),this.otherAttrNode=cc.find("content/attr",this.node),this.iconSprite=cc.find("content/tower/icon",this.node).getComponent(cc.Sprite),this.iconBgSprite=cc.find("content/tower/bg",this.node).getComponent(cc.Sprite),this.attrDescNode=cc.instantiate(this.attrDescPrefab),this.attrDescNode.parent=this.node,this.attrDescNode.active=!1,this.attrDescLabel=cc.find("bgLayout/thingDescribe",this.attrDescNode).getComponent(cc.Label)},showPageBegan:function(){this.towerId=this.data.towerId,this.towerAtlas=this.data.towerAtlas,this.initData()},initData:function(){var e=i.templateManager.getTowerDataById(this.towerId);this.towerNameLabel.string=i.lang.getGameText(e.name),this.towerIntroLabel.string=i.lang.getGameText(e.desc),this.levelLabel.string=i.player.towerModule.getTowerLevel(e.typeID);var t=i.player.towerModule.getTowerQuality(e.typeID),a=i.templateManager.getTowerQualityDataByLevel(e.typeID,t);this.qualityLabel.string=i.lang.getGameText(a.qualityName),this.qualityLabel.node.color=cc.color("#"+a.autoUpgradeFontColor),this.ironLabel.string=e.spend;var n,o,s,r,c,l,d=i.player.towerModule.getTowerLevel(e.typeID),h=i.templateManager.getTowerStarDataByLevel(e.typeID,d),u=e.heroId;t=u&&i.player.heroModule.isHeroUnlock(u),e.typeID===i.constant.TOWER_TYPE_BARRACK?(this.soldierAttrNode.active=!0,this.otherAttrNode.active=!1,o=e.recruitSoldiersList,n=i.templateManager.getSoldierDataById(o[0]),s=1,t&&(s+=(100+i.player.heroModule.getHeroLevel(u)-1)/1e3),d=Math.floor(n.hp*h.hp/1e4),this.soldierHpLabel.string=i.Utils.formatNumberForLabel(d),d=Math.floor(n.physicalAttack*h.attack/1e4*s*(1+a.attrValue[1]/1e4)),this.soldierPhyAtkLabel.string=i.Utils.formatNumberForLabel(d),s=Math.floor(n.magicAttack*h.attack/1e4*s*(1+a.attrValue[1]/1e4)),this.soldierSpellAtkLabel.string=i.Utils.formatNumberForLabel(s),this.soldierPhyDefenseLabel.string=n.physicalDefense,this.soldierSpellDefenseLabel.string=n.magicDefense,this.soldierTimeLabel.string=o[1]/1e3):(this.soldierAttrNode.active=!1,this.otherAttrNode.active=!0,n=s=1,t&&(s+=(100+i.player.heroModule.getHeroLevel(u)-1)/1e3,n+=i.templateManager.getGameParamValue("heroInTowerDistance")/1e4),o=0<e.physicalAttack?e.physicalAttack:e.magicAttack,s=Math.floor(o*h.attack/1e4*s*(1+a.attrValue[1]/1e4)),this.attackLabel.string=i.Utils.formatNumberForLabel(s),this.phyAttackIconNode.active=0<e.physicalAttack,this.spellAttackIconNode.active=e.physicalAttack<=0,this.speedLabel.string=e.speed/1e3,this.rangeLabel.string=e.range*n),this.rangeAtkLabelNode.active=e.typeID===i.constant.TOWER_TYPE_CANNON,this.attackFlyLabelNode.active=e.isFly,this.moreIronLabelNode.active=3<e.level,e.ignorePhysicalDefense&&0<e.ignorePhysicalDefense?(this.reducePhyDefLabel.node.active=!0,i.lang.updateLabelString(this.reducePhyDefLabel,[e.ignorePhysicalDefense/100])):this.reducePhyDefLabel.node.active=!1,e.ignoreLegalDefense&&0<e.ignoreLegalDefense?(this.reduceSpellDefLabel.node.active=!0,i.lang.updateLabelString(this.reduceSpellDefLabel,[e.ignoreLegalDefense/100])):this.reduceSpellDefLabel.node.active=!1,t&&0<(r=i.templateManager.getHeroSkillByType(u,i.constant.HERO_SKILL_TYPE_TOWER)).length?(l=i.templateManager.getHeroSkillDataById(r[0]),this.skillLabel.string=i.lang.getGameText(l.name),this.skillLabel.node.active=!0):this.hideSkillLabelNode(),this.towerAtlas?(this.iconSprite.node.active=!0,this.iconSprite.spriteFrame=this.towerAtlas.getSpriteFrame(e.icon)):(this.iconSprite.node.active=!1,c=this,l=i.player.commonModule.isLowIosDevice()?"textures/pictorial/pictorial_tower_small":"textures/pictorial/pictorial_tower",cc.loader.loadRes(l,cc.SpriteAtlas,function(t,i){t?cc.error(t):(c.towerAtlas=i,c.iconSprite.node.active=!0,c.iconSprite.spriteFrame=c.towerAtlas.getSpriteFrame(e.icon))})),this.iconBgSprite.spriteFrame=this.iconAtlas.getSpriteFrame(a.handbookBg),this.hideAttrDesc()},hideSkillLabelNode:function(){var e=!0;(e=!(this.reduceSpellDefLabel.node.active||this.reducePhyDefLabel.node.active||this.attackFlyLabelNode.active||this.rangeAtkLabelNode.active)&&e)?(this.skillLabel.node.active=!0,this.skillLabel.string=i.lang.getGameText(i.GameTextCode.HANDBOOK_NO_DESC)):this.skillLabel.node.active=!1},onClickClose:function(){this.closePage()},hideAttrDesc:function(){this.attrDescNode.stopAllActions(),this.attrDescNode.active=!1},showAttrDesc:function(e,t){this.attrDescLabel.string=i.lang.getGameText(t),this.attrDescNode.active=!0,this.attrDescNode.opacity=1,t=e.convertToWorldSpaceAR(cc.v2(0,0)),t=this.node.convertToNodeSpaceAR(t),this.attrDescNode.position=cc.v2(t.x,t.y+e.height/2),this.attrDescNode.stopAllActions(),this.attrDescNode.runAction(cc.sequence(cc.fadeIn(.05),cc.delayTime(2),cc.callFunc(function(){this.attrDescNode.active=!1},this)))},onClickAtk:function(){var e=(t=0<i.templateManager.getTowerDataById(this.towerId).physicalAttack)?this.phyAttackIconNode:this.spellAttackIconNode,t=t?i.GameTextCode.HANDBOOK_TIP_2:i.GameTextCode.HANDBOOK_TIP_1;this.showAttrDesc(e,t)},onClickSpeed:function(){this.showAttrDesc(this.speedIconNode,i.GameTextCode.HANDBOOK_TIP_3)},onClickRange:function(){this.showAttrDesc(this.rangeIconNode,i.GameTextCode.HANDBOOK_TIP_4)},onClickSoldierHp:function(){this.showAttrDesc(this.soldierHpIconNode,i.GameTextCode.HANDBOOK_TIP_6)},onClickSoldierPhyAtk:function(){this.showAttrDesc(this.soldierPhyAtkIconNode,i.GameTextCode.HANDBOOK_TIP_2)},onClickSoldierSpellAtk:function(){this.showAttrDesc(this.soldierSpellAtkIconNode,i.GameTextCode.HANDBOOK_TIP_1)},onClickSoldierPhyDef:function(){this.showAttrDesc(this.soldierPhyDefenseIconNode,i.GameTextCode.HANDBOOK_TIP_7)},onClickSoldierSpellDef:function(){this.showAttrDesc(this.soldierSpellDefenseIconNode,i.GameTextCode.HANDBOOK_TIP_8)},onClickSoldierTime:function(){this.showAttrDesc(this.soldierTimeIconNode,i.GameTextCode.HANDBOOK_TIP_5)},closePageEnded:function(){this.towerAtlas&&i.player.commonModule.isLowIosDevice()&&!i.gameScene.pageIsOpened(i.pageConstant.PAGE_TYPE_PICTORIAL)&&(cc.loader.release(cc.loader.getDependsRecursively(this.towerAtlas)),this.towerAtlas=null)}}),cc._RF.pop()},{}],PieceChangeItemRender:[function(e,t){"use strict";cc._RF.push(t,"ace45xTGShHvIhY48kZMjDn","PieceChangeItemRender");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{commonAtlas:{default:null,type:cc.SpriteAtlas}},afterLoad:function(){this.nodeAni=this.node.getComponent(cc.Animation),this.nodeAni.play("pieceChangeItemRender_light"),this.pieceBgSprite=cc.find("pieceBg",this.node).getComponent(cc.Sprite),this.pieceIconSprite=cc.find("icon",this.node).getComponent(cc.Sprite),this.pieceNumLabel=cc.find("number",this.node).getComponent(cc.Label),this.effectNode=cc.find("unlock_skill_04",this.node),this.effectNode.active=!1,this.grayStatus=!1,this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},onTouchStart:function(e){this._isNotCanMove||this.gayStatus||(this.isMoveing=!0,i.Logger.debug("onTouchStart"),e=e.getLocation(),this.host.showPieceMoveNode(this._pieceId),this.host.setPieceMoveNodePos(e),this.host.updateAllPieceChangeItem(),this._type==i.constant.HERO_PIECE_CHANGE_ITEM_UP&&(this.node.opacity=100))},onTouchMove:function(e){!this._isNotCanMove&&this.isMoveing&&(e=e.getLocation(),this.host.setPieceMoveNodePos(e))},onTouchEnd:function(e){!this._isNotCanMove&&this.isMoveing&&(this.isMoveing=!1,i.Logger.debug("onTouchEnd"),e.getLocation(),e=!1,this._type==i.constant.HERO_PIECE_CHANGE_ITEM_UP&&(this.node.opacity=255,e=!(this.node.active=!1)),this.host.endPieceMoveNodeIn(this._pieceId,e,this),this.host.updateAllPieceChangeItem())},cleanPieceId:function(){this._pieceId=null},setPieceId:function(e){this._pieceId=e},initData:function(e,t,i){this._type=e,this._pieceId=t,this._isNotCanMove=i,this.updateData()},updateData:function(){var e,t,a;this._pieceId?(this.setEffectNodeActive(!1),0==(e=i.player.itemModule.getHeroPieceNumById(this._pieceId))&&(this._isNotCanMove=!1),a=this.host.getPieceChangeSubNum(this._pieceId,this._type==i.constant.HERO_PIECE_CHANGE_ITEM_BASE&&this.isMoveing),e-=this.lastSubNum=a,t=i.templateManager.getHeroCardDataById(this._pieceId),a=i.templateManager.getHeroDataById(t.heroId),a=i.player.heroModule.getHeroQuality(a),a=i.templateManager.getHeroQualityDataById(a),this.pieceBgSprite.spriteFrame=this.commonAtlas.getSpriteFrame(a.itemBg),this.pieceIconSprite.spriteFrame=this.commonAtlas.getSpriteFrame(t.icon),this._type==i.constant.HERO_PIECE_CHANGE_ITEM_BASE?(this.pieceNumLabel.node.active=!0,0==(this.pieceNumLabel.string=e)?(this.gayStatus||(this.pieceBgSprite.setMaterial(0,cc.Material.getBuiltinMaterial("2d-gray-sprite")),this.pieceIconSprite.setMaterial(0,cc.Material.getBuiltinMaterial("2d-gray-sprite"))),this.gayStatus=!0):(this.gayStatus&&(this.pieceBgSprite.setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite")),this.pieceIconSprite.setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite"))),this.gayStatus=!1)):this.pieceNumLabel.node.active=!1):this.node.active=!1},setEffectNodeActive:function(e,t){(t=t&&this._pieceId&&this._pieceId==e)?this.effectNode.active||(this.effectNode.active=!0,this.nodeAni.stop(),this.nodeAni.setCurrentTime(0),this.nodeAni.play("pieceChangeItemRender_light")):this.effectNode.active&&(this.effectNode.active=!1)}}),cc._RF.pop()},{}],PieceChangePage:[function(e,t){"use strict";cc._RF.push(t,"433c0Qm3ZZPpoZ1CGNEJQHq","PieceChangePage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{commonAtlas:{default:null,type:cc.SpriteAtlas}},onLoadPage:function(){this.nodeAni=this.node.getComponent(cc.Animation),this.pieceBgSprite=cc.find("piece/pieceBg",this.node).getComponent(cc.Sprite),this.iconSprite=cc.find("piece/icon",this.node).getComponent(cc.Sprite),this.nameLabel=cc.find("piece/name",this.node).getComponent(cc.Label),this.closeLabelNode=cc.find("closeLabel",this.node),this.nodeAni.on("finished",this.showAniOver,this)},showPageBegan:function(){this._pieceId=this.data,this.closeLabelNode.active=!1,this.nodeAni.stop(),this.nodeAni.setCurrentTime(0),this.nodeAni.play("pieceChangeShowPage");var e=i.templateManager.getHeroCardDataById(this._pieceId),t=i.templateManager.getHeroDataById(e.heroId);t=i.player.heroModule.getHeroQuality(t),t=i.templateManager.getHeroQualityDataById(t),this.pieceBgSprite.spriteFrame=this.commonAtlas.getSpriteFrame(t.itemBg),this.iconSprite.spriteFrame=this.commonAtlas.getSpriteFrame(e.icon),i.lang.updateLabelString(this.nameLabel,[i.lang.getGameText(e.name)]),this.closeLabelNode.active=!1,t=cc.delayTime(1),e=cc.callFunc(function(){this.closeLabelNode.active=!0},this),e=cc.sequence(t,e),this.pieceBgSprite.node.stopAllActions(),this.pieceBgSprite.node.runAction(e),i.BI.onEvent(i.biConstant.EVENT_TYPE_CLICK,i.biConstant.EVENT_ID_CLICK_PRICE_CHANGE,this._pieceId)},showPageEnded:function(){},showAniOver:function(e,t){"pieceChangeShowPage"==t.name&&this.nodeAni.play("pieceChangeShowPage_stand")},onClickClose:function(){this.closeLabelNode.active&&this.closePage()}}),cc._RF.pop()},{}],PiggyBankModule:[function(e,t){"use strict";cc._RF.push(t,"fa74eeqT9dPXbIpDDgqk8ux","PiggyBankModule");var i=e("Aft");cc.Class({extends:i.BaseHandler,init:function(e){this.player=e;var t=i.StorageUtil.getData(i.constant.SAVE_PIGGY_BANK_DATA);t||(this.player.saveGameData(i.constant.SAVE_PIGGY_BANK_DATA,e={piggyBankMoney:0,piggyBankFullTime:0,piggyBankReceiveNum:0,piggyBankShow:0,showCanReceiveNum:0,showMaxReceiveNum:0,lastAreadyShow:!1}),t=JSON.stringify(e)),i.Logger.debug("init piggyBankData :",t),this.player._gameData.piggyBankData=JSON.parse(t)},loadData:function(){this.player._gameData.piggyBankData.showCanReceiveNum||(this.player._gameData.piggyBankData.showCanReceiveNum=0),this.player._gameData.piggyBankData.showMaxReceiveNum||(this.player._gameData.piggyBankData.showMaxReceiveNum=0)},restoreData:function(e){e&&e.piggyBankData&&(i.StorageUtil.save(i.constant.SAVE_PIGGY_BANK_DATA,e.piggyBankData,!0),i.Logger.debug("restoreData data  piggyBankData :",JSON.stringify(e.piggyBankData)))},savePiggyBankData:function(){this.player.saveGameData(i.constant.SAVE_PIGGY_BANK_DATA,this.player._gameData.piggyBankData)},getPiggyBankData:function(){return this.player._gameData.piggyBankData},getShowCanReceiveNum:function(){return this.getPiggyBankData().showCanReceiveNum},addShowCanReceiveNum:function(){this.getPiggyBankData().showCanReceiveNum++,this.savePiggyBankData()},getShowMaxReceiveNum:function(){return this.getPiggyBankData().showMaxReceiveNum},addShowMaxReceiveNum:function(){this.getPiggyBankData().showMaxReceiveNum++,this.savePiggyBankData()},isCanShowFirstPiggyBank:function(){return this.getPiggyBankData().piggyBankShow<=0},savePiggyBankShow:function(){this.getPiggyBankData().piggyBankShow=1,this.savePiggyBankData()},getPiggyBankFullTime:function(){return this.getPiggyBankData().piggyBankFullTime},getPiggyBankMoney:function(){return this.getPiggyBankData().piggyBankMoney},getPiggyBankReceiveNum:function(){return this.getPiggyBankData().piggyBankReceiveNum},addPiggyBankMoney:function(e,t){var a=i.templateManager.getGameParamValue("potMaxIngot");this.getPiggyBankData().piggyBankMoney>=a||(this.getPiggyBankData().piggyBankMoney+=e,this.getPiggyBankData().piggyBankMoney>=a&&(this.getPiggyBankData().piggyBankMoney=a,this.getPiggyBankData().piggyBankFullTime=i.timeUtil.getSecond()),t&&i.gameScene.mainTopNodeObj.checkFlyEffect(i.constant.COIN_TYPE_PIGGY_BANK_GOLD,e),this.savePiggyBankData())},resetPiggyBankMoney:function(){this.getPiggyBankData().piggyBankMoney=0,this.getPiggyBankData().piggyBankReceiveNum++,this.savePiggyBankData()},isPiggyBankActive:function(){return this.getPiggyBankReceiveNum()<i.templateManager.getGameParamValue("potMaxClaimNum")},getLastAreadyShow:function(){return this.getPiggyBankData().lastAreadyShow},setLastAreadyShow:function(){this.getPiggyBankData().lastAreadyShow=!0,this.savePiggyBankData()}}),cc._RF.pop()},{}],PiggyBankPage:[function(e,t){"use strict";cc._RF.push(t,"4b0e6DC4x9A6aBH/h9Lbn1E","PiggyBankPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{vipAtlas:{default:null,type:cc.SpriteAtlas}},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.SHOW_AD_OVER_PIGGY_BANK,function(){return e.onShowAdOver()})},onLoadPage:function(){this.wordNode=cc.find("content/word",this.node),this.curMoneyLabel=cc.find("content/word/layout/label",this.node).getComponent(cc.Label),this.tipsLabel_1=cc.find("content/tips1",this.node).getComponent(cc.Label),this.moneyMaxTimeNode=cc.find("content/layout/countlayout",this.node),this.moneyMaxTimeLabel=cc.find("time",this.moneyMaxTimeNode).getComponent(cc.Label),this.tipsLabel_2=cc.find("content/layout/tips/tips2",this.node).getComponent(cc.RichText),this.tipsLabel_3=cc.find("content/layout/tips/tips3",this.node).getComponent(cc.Label),this.moneyNotEnoughLabel=cc.find("content/button/background/label",this.node).getComponent(cc.Label),this.adReceiveNode=cc.find("content/button/background/adLayout",this.node),this.vipNotEnoughNode=cc.find("content/button/background/vipLayout",this.node),this.vipIconSprite=cc.find("content/button/background/vipLayout/vip",this.node).getComponent(cc.Sprite),this.continueReceiveNode=cc.find("content/label",this.node)},showPageBegan:function(){this.isLast=this.data,this.initData()},initData:function(){this.curSecondTime=i.timeUtil.getSecond(),this.curMoney=i.player.piggyBankModule.getPiggyBankMoney(),this.canReceiveNum=i.templateManager.getGameParamValue("potCanReceivedIngot"),this.maxReceiveNum=i.templateManager.getGameParamValue("potMaxIngot"),this.needVipLevel=i.templateManager.getGameParamValue("potOpenVipLevel"),this.curVipLevel=i.player.vipModule.getCurVipLevel(),this.maxCountdownTime=i.templateManager.getGameParamValue("potCountDown"),this.isMoneyEnough=this.curMoney>=this.canReceiveNum,this.isMoneyMax=this.curMoney>=this.maxReceiveNum,this.isVipEnough=this.curVipLevel>=this.needVipLevel,this.curMoneyLabel.string=this.curMoney,this.moneyMaxTimeNode.active=this.isMoneyMax,this.countdownTime=this.isMoneyMax?this.maxCountdownTime-(this.curSecondTime-i.player.piggyBankModule.getPiggyBankFullTime()):0,this.countdownTime=0<=this.countdownTime?this.countdownTime:0,this.curTime=0,i.lang.updateLabelString(this.tipsLabel_3,[this.needVipLevel]);var e=this.vipAtlas.getSpriteFrame("V_"+this.needVipLevel);this.vipIconSprite.spriteFrame=e,this.isMoneyEnough?(this.moneyNotEnoughLabel.node.active=!1,this.isMoneyMax?(d=this.isLast?i.lang.getGameText(i.GameTextCode.PIGGYBANK_END):i.lang.getGameText(1674),i.lang.setString(this.tipsLabel_1,d),this.moneyMaxTimeLabel.string=i.timeUtil.secondFormat(this.countdownTime,!0),i.lang.setString(this.tipsLabel_2,i.lang.getGameText(1677)),this.adReceiveNode.active=this.isVipEnough,this.vipNotEnoughNode.active=!this.isVipEnough,this.continueReceiveNode.active=!1,this.isVipEnough,i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_PIGGY_BANK_MAX)):(i.lang.setString(this.tipsLabel_1,i.lang.getGameText(1673)),i.lang.setString(this.tipsLabel_2,i.lang.getGameText(1676)),this.adReceiveNode.active=this.isVipEnough,this.vipNotEnoughNode.active=!this.isVipEnough,this.continueReceiveNode.active=!0,this.isVipEnough,i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_PIGGY_BANK_ENOUGH))):(i.lang.setString(this.tipsLabel_1,i.lang.getGameText(1672)),i.lang.updateLabelStringArgs(this.tipsLabel_2,1675,[this.canReceiveNum]),this.moneyNotEnoughLabel.node.active=!0,this.adReceiveNode.active=!1,this.vipNotEnoughNode.active=!1,this.continueReceiveNode.active=!1,i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_PIGGY_BANK_NOT_ENOUGH)),this.wordNode.stopAllActions(),this.wordNode.angle=0;var t=cc.callFunc(function(){this.wordNode.scale=1.2},this),a=cc.callFunc(function(){this.wordNode.scale=1},this),n=cc.rotateBy(.1*1.5,10),o=cc.rotateBy(.1*1.5,-20),s=cc.rotateBy(.1*1.5,20),r=cc.rotateBy(.1*1.5,-20),c=cc.rotateBy(.1*1.5,20),l=cc.rotateBy(.1*1.5,-20),d=(e=cc.rotateBy(.1*1.5,10),cc.delayTime(.4*1.5));a=cc.sequence(d,t,n,o,s,r,c,l,e,a),a=cc.repeatForever(a),this.wordNode.runAction(a)},onClickAd:function(){this.isMoneyEnough?this.isVipEnough?i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,i.GameEventType.SHOW_AD_OVER_PIGGY_BANK):(this.closeThisPage(),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_VIP)):this.closeThisPage()},onShowAdOver:function(){i.player.piggyBankModule.resetPiggyBankMoney(),i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_CHILD).updatePiggyBank(0,!0),i.player.itemModule.dropItem(i.constant.COIN_TYPE_GOLD_BULLION,this.curMoney,!0,i.constant.ITEM_ADD_SOURCE_PIGGY_BANK),this.closeThisPage()},onClickClose:function(){this.closeThisPage()},closeThisPage:function(){this.closePage()},closePageEnded:function(){i.gameScene.isHaveCachePage(i.pageConstant.PAGE_TYPE_MAIN_NEW_FUNCTION)||i.gameScene.pageIsOpened(i.pageConstant.PAGE_TYPE_MAIN_NEW_FUNCTION)||i.gameScene.mainPage.checkFunctionGuide()},update:function(e){this.isLast||this.isMoneyMax&&(0<this.countdownTime&&(this.countdownTime-=e,this.curTime+=e,1<this.curTime&&(--this.curTime,this.moneyMaxTimeLabel.string=i.timeUtil.secondFormat(Math.floor(this.countdownTime),!0))),this.countdownTime<=0&&(i.Logger.debug("this.countdownTime = 0 close piggybank"),this.isMoneyMax=!1,this.closeThisPage()))}}),cc._RF.pop()},{}],PlayerBaseModule:[function(e,t){"use strict";cc._RF.push(t,"5ca3cbXHYFEnaoHSQBTOhlW","PlayerBaseModule");var i=e("Aft");cc.Class({extends:i.BaseHandler,properties:{},init:function(e){this.isNewPlayer=!1,this.player=e;var t=i.StorageUtil.getData(i.constant.SAVE_PLAYER_BASE_DATA);t||(e=i.nativeManager.getDeviceId(),e={nickName:this.getRandomPlayerId(),account:e,createTime:(new Date).getTime(),dataIndex:0,playerLevel:1,playerExp:0,silver:i.templateManager.getGameParamValue("baseGold"),goldBullion:i.templateManager.getGameParamValue("baseDia"),power:i.templateManager.getGameParamValue("powerMaxNumAutoRecovery"),icon:i.templateManager.getGameParamValue("defaultHead"),loginTime:(new Date).getTime(),logoutTime:(new Date).getTime(),clearAccountCount:0,banAccount:!1,wxIcon:null,wxName:null},this.player.saveGameData(i.constant.SAVE_PLAYER_BASE_DATA,e),t=JSON.stringify(e),this.isNewPlayer=!0),i.Logger.debug("init playerBaseData :",t),this.player._gameData.playerBaseData=JSON.parse(t)},loadData:function(){this._silverNum=new i.BigNumber(this.getPlayerData().silver),this._goldBullionNum=new i.BigNumber(this.getPlayerData().goldBullion),this._powerNum=new i.BigNumber(this.getPlayerData().power),this.player._gameData.playerBaseData.hasOwnProperty("icon")||(this.player._gameData.playerBaseData.icon=i.templateManager.getGameParamValue("defaultHead")),this.player._gameData.playerBaseData.hasOwnProperty("clearAccountCount")||(this.player._gameData.playerBaseData.clearAccountCount=0),this.player._gameData.playerBaseData.hasOwnProperty("banAccount")||(this.player._gameData.playerBaseData.banAccount=!1)},restoreData:function(e){e&&e.playerBaseData&&(i.StorageUtil.save(i.constant.SAVE_PLAYER_BASE_DATA,e.playerBaseData,!0),i.Logger.debug("restoreData data  playerBaseData :",JSON.stringify(e.playerBaseData)))},saveBefore:function(){this.player._gameData.playerBaseData.silver=this._silverNum.toFixed(0),this.player._gameData.playerBaseData.goldBullion=this._goldBullionNum.toFixed(0),this.player._gameData.playerBaseData.power=this._powerNum.toFixed(0)},savePlayerData:function(){this.saveBefore(),i.StorageUtil.getData(i.constant.SAVE_PLAYER_BASE_DATA)&&this.player.saveGameData(i.constant.SAVE_PLAYER_BASE_DATA,this.player._gameData.playerBaseData)},getPlayerData:function(){return this.player._gameData.playerBaseData},dropCoin:function(e,t,a,n){n=n||i.constant.ITEM_ADD_SOURCE_DEFAULT,i.Logger.debug("====== drop player coin, itemId:",e,"number:",t),e===i.constant.COIN_TYPE_SILVER?this.addSilverNum(t,a,n):e===i.constant.COIN_TYPE_GOLD_BULLION?this.addGoldBullionNum(t,a,n):e===i.constant.COIN_TYPE_EXP?this.addPlayerExp(t,a,n):e===i.constant.COIN_TYPE_HERO_EXP?i.player.heroModule.addHeroGeneralExp(t,a,n):e===i.constant.COIN_TYPE_POWER?this.addPowerNum(t,a,n):e===i.constant.COIN_TYPE_PIGGY_BANK_GOLD?i.player.piggyBankModule.addPiggyBankMoney(t,a,n):i.Logger.error("====== drop player coin id error, itemId:",e,"number:",t)},getSilverNum:function(){return this._silverNum},getPlayerSilverNum:function(){return this._silverNum.toFixed(0)},isSilverEnough:function(e){return i.Utils.isNumber(e)?!(e<=0||null==(e=this._silverNum.comparedTo(e))||e<0):(i.Logger.error("Gold isGoldEnough count is NaN:",e),!1)},addSilverNum:function(e,t,a){var n;i.Utils.isNumber(e)?e<=0||((n=this._silverNum).isNaN()&&(n=new i.BigNumber("0")),this._silverNum=new i.BigNumber(this._silverNum.plus(e).toFixed(0)),this._silverNum=this._silverNum.comparedTo(0)<0?new i.BigNumber(0):this._silverNum,this._silverNum.isNaN()&&(i.Logger.error("gold is NaN",e),this._silverNum=n),i.player.commonModule.addTodayAddSilverCount(e),this.checkSilverValue(),this.savePlayerData(),t?i.gameScene.mainTopNodeObj.checkFlyEffect(i.constant.COIN_TYPE_SILVER,e):i.eventBus.dispatchEvent(i.GameEventType.UPDATE_UI_GOLD_CHANGE),i.eventBus.dispatchEvent(i.GameEventType.CHECK_MAIN_TOWER_RED),i.BI.onEvent(i.biConstant.EVENT_TYPE_COIN_DROP,i.biConstant.EVENT_ID_COIN_DROP_BASE+a,e)):i.Logger.error("Gold add count is NaN:",e)},costSilverNum:function(e,t){if(!i.Utils.isNumber(e)){i.Logger.error("Gold cost count is NaN:",e);var a=i.lang.getGameText(i.GameTextCode.DATA_ERROR);return i.gameScene.showTipsItemRender(a),!1}if(this.isLessThanZero(e)){var n=i.lang.getGameText(i.GameTextCode.DATA_ERROR);return i.gameScene.showTipsItemRender(n),!1}return a=Number(this.player._gameData.playerBaseData.silver),this._silverNum=new i.BigNumber(this._silverNum.minus(e).toFixed(0)),this._silverNum=this._silverNum.comparedTo(0)<0?new i.BigNumber(0):this._silverNum,i.player.commonModule.addTodayCostSilverCount(e),this.checkSilverValue(),this.savePlayerData(),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_UI_GOLD_CHANGE),i.eventBus.dispatchEvent(i.GameEventType.CHECK_MAIN_TOWER_RED),n=Number(this.player._gameData.playerBaseData.silver),t=t||i.constant.ITEM_CONSUME_SOURCE_DEFAULT,i.BI.onEvent(i.biConstant.EVENT_TYPE_COIN_CONSUME,i.biConstant.EVENT_ID_COIN_CONSUME_BASE+t,e),a<n&&(i.BI.onEvent(i.biConstant.EVENT_TYPE_ERROR,i.biConstant.EVENT_ID_ERROR_FIX_DATA_USER,i.player.playerModule.getPlayerId()+"#"+i.biConstant.EVENT_ID_ERROR_TYPE_SUB_GOLD),i.BI.onEvent(i.biConstant.EVENT_TYPE_ERROR,i.biConstant.EVENT_ID_ERROR_FIX_DATA_INFO,i.player.playerModule.getPlayerId()+"#"+i.biConstant.EVENT_ID_ERROR_TYPE_SUB_GOLD+"#"+a+"#"+n+"#"+e)),!0},getGoldBullionNum:function(){return this._goldBullionNum},getPlayerGoldBullionNum:function(){return this._goldBullionNum.toFixed(0)},isGoldBullionEnough:function(e){return i.Utils.isNumber(e)?!(e<=0||null==(e=this._goldBullionNum.comparedTo(e))||e<0):(i.Logger.error("Gold isDiamondEnough count is NaN:",e),!1)},addGoldBullionNum:function(e,t,a){var n;i.Utils.isNumber(e)?e<=0||((n=this._goldBullionNum).isNaN()&&(n=new i.BigNumber("0")),this._goldBullionNum=new i.BigNumber(this._goldBullionNum.plus(e).toFixed(0)),this._goldBullionNum=this._goldBullionNum.comparedTo(0)<0?new i.BigNumber(0):this._goldBullionNum,this._goldBullionNum.isNaN()&&(i.Logger.error("diamond is NaN",e),this._goldBullionNum=n),i.player.commonModule.addTodayAddGoldBullionCount(e),this.checkGoldBullionValue(),this.savePlayerData(),t?i.gameScene.mainTopNodeObj.checkFlyEffect(i.constant.COIN_TYPE_GOLD_BULLION,e):i.eventBus.dispatchEvent(i.GameEventType.UPDATE_UI_DIAMOND_CHANGE),i.eventBus.dispatchEvent(i.GameEventType.CHECK_MAIN_TOWER_RED),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_HERO_RED),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_HERO_MAIN_RED),this.player.skillModule.checkSkillState(),i.BI.onEvent(i.biConstant.EVENT_TYPE_DIAMOND_DROP,i.biConstant.EVENT_ID_DIAMOND_DROP_BASE+a,e)):i.Logger.error("diamond add count is NaN:",e)},costGoldBullionNum:function(e){if(!i.Utils.isNumber(e)){i.Logger.error("diamond cost count is NaN:",e);var t=i.lang.getGameText(i.GameTextCode.DATA_ERROR);return i.gameScene.showTipsItemRender(t),!1}if(this.isLessThanZero(e)){var a=i.lang.getGameText(i.GameTextCode.DATA_ERROR);return i.gameScene.showTipsItemRender(a),!1}return t=Number(this.player._gameData.playerBaseData.goldBullion),this._goldBullionNum=new i.BigNumber(this._goldBullionNum.minus(e).toFixed(0)),this._goldBullionNum=this._goldBullionNum.comparedTo(0)<0?new i.BigNumber(0):this._goldBullionNum,i.player.commonModule.addTodayCostGoldBullionCount(e),this.checkGoldBullionValue(),this.savePlayerData(),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_UI_DIAMOND_CHANGE),i.eventBus.dispatchEvent(i.GameEventType.CHECK_MAIN_TOWER_RED),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_HERO_RED),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_HERO_MAIN_RED),this.player.skillModule.checkSkillState(),t<(a=Number(this.player._gameData.playerBaseData.goldBullion))&&(i.BI.onEvent(i.biConstant.EVENT_TYPE_ERROR,i.biConstant.EVENT_ID_ERROR_FIX_DATA_USER,i.player.playerModule.getPlayerId()+"#"+i.biConstant.EVENT_ID_ERROR_TYPE_SUB_DIAMOND),i.BI.onEvent(i.biConstant.EVENT_TYPE_ERROR,i.biConstant.EVENT_ID_ERROR_FIX_DATA_INFO,i.player.playerModule.getPlayerId()+"#"+i.biConstant.EVENT_ID_ERROR_TYPE_SUB_DIAMOND+"#"+t+"#"+a+"#"+e)),!0},addPlayerExp:function(e,t){this.player._gameData.playerBaseData.playerExp=parseInt(this.player._gameData.playerBaseData.playerExp)+e+"";var a=i.templateManager.getPlayerLevelDataByLevel(this.getPlayerLevel()).exp;i.Logger.debug("addPlayerExp - nextLevelNeed: "+a+", addExp: "+e+", haveExp: "+this.getPlayerExp());var n,o=!1;parseInt(this.player._gameData.playerBaseData.playerExp)>=a&&(n=i.JsonData.Level.length,this.player._gameData.playerBaseData.playerLevel<n?(this.player._gameData.playerBaseData.playerExp=parseInt(this.player._gameData.playerBaseData.playerExp)-a+"",this.player._gameData.playerBaseData.playerLevel++,o=!0):this.player._gameData.playerBaseData.playerExp=a+""),this.savePlayerData(),t?i.gameScene.mainTopNodeObj.checkFlyEffect(i.constant.COIN_TYPE_EXP,e):i.eventBus.dispatchEvent(i.GameEventType.UPDATE_PLAYER_ROLE_INFO),o&&(i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_PLAYER_OFFICIAL),i.eventBus.dispatchEvent(i.GameEventType.SET_HANGUP_EFFECT_STATUS),i.BI.onEvent(i.biConstant.EVENT_TYPE_PLAYER_LEVEL,i.biConstant.EVENT_ID_PLAYER_LEVEL,this.getPlayerLevel()))},getPlayerExpRatio:function(){var e=i.templateManager.getPlayerLevelDataByLevel(this.getPlayerLevel());return Math.min(1,this.getPlayerExp()/e.exp)},getPlayerLevel:function(){return this.player&&this.player._gameData&&this.player._gameData.playerBaseData&&this.player._gameData.playerBaseData.playerLevel?this.player._gameData.playerBaseData.playerLevel:0},getPlayerExp:function(){return parseInt(this.player._gameData.playerBaseData.playerExp)},getPower:function(){return this._powerNum},getPlayerPowerNum:function(){return this._powerNum.toFixed(0)},isPowerEnough:function(e){return i.Utils.isNumber(e)?!(e<=0||null==(e=this._powerNum.comparedTo(e))||e<0):(i.Logger.error("isPowerEnough count is NaN:",e),!1)},addPowerNum:function(e,t){var a,n;i.Utils.isNumber(e)?e<=0||((a=this._powerNum).isNaN()&&(a=new i.BigNumber("0")),this._powerNum=new i.BigNumber(this._powerNum.plus(e).toFixed(0)),this._powerNum=this._powerNum.comparedTo(0)<0?new i.BigNumber(0):this._powerNum,this._powerNum.isNaN()&&(i.Logger.error("power is NaN",e),this._powerNum=a),n=i.templateManager.getGameParamValue("powerMaxNumAutoRecovery"),a.comparedTo(n)<0&&0<=this._powerNum.comparedTo(n)&&i.player.commonModule.powerToMax(),i.player.commonModule.addTodayAddPowerCount(e),this.checkPowerValue(),this.savePlayerData(),t?i.gameScene.mainTopNodeObj.checkFlyEffect(i.constant.COIN_TYPE_POWER,e):i.eventBus.dispatchEvent(i.GameEventType.MAIN_UPDATE_POWER,{})):i.Logger.error("power add count is NaN:",e)},costPowerNum:function(e){var t,a;i.Utils.isNumber(e)?e<=0||(t=this._powerNum,this._powerNum=new i.BigNumber(this._powerNum.minus(e).toFixed(0)),this._powerNum=this._powerNum.comparedTo(0)<0?new i.BigNumber(0):this._powerNum,a=i.templateManager.getGameParamValue("powerMaxNumAutoRecovery"),0<=t.comparedTo(a)&&this._powerNum.comparedTo(a)<0&&i.player.commonModule.powerFromMax(),this.checkPowerValue(),this.savePlayerData(),i.eventBus.dispatchEvent(i.GameEventType.MAIN_UPDATE_POWER,{}),i.player.commonModule.setShowFreePowerIcon()):i.Logger.error("power cost count is NaN:",e)},getPlayerTitle:function(){var e=this.getPlayerLevel();return e=i.templateManager.getPlayerLevelDataByLevel(e),i.lang.getGameText(e.office)},getNickName:function(){return this.player&&this.player._gameData&&this.player._gameData.playerBaseData&&this.player._gameData.playerBaseData.nickName?this.player._gameData.playerBaseData.nickName||"Player":"newPlayer"},setNickName:function(e){this.player._gameData.playerBaseData.nickName=e,this.savePlayerData(),this.saveAllDataToServer()},getSex:function(){return 1},getAge:function(){return 1},getPlayerId:function(){return this.player&&this.player._gameData&&this.player._gameData.playerBaseData&&this.player._gameData.playerBaseData.account?this.player._gameData.playerBaseData.account:i.nativeManager.getDeviceId()},saveAllDataToServer:function(){i.player.isNeedSave()&&(this.player._gameData.playerBaseData.dataIndex||(this.player._gameData.playerBaseData.dataIndex=0),this.player._gameData.playerBaseData.dataIndex+=1,this.savePlayerData(),i.StorageUtil.isCanSaveData()&&(i.gameScene.curSaveDataTime=0,i.player.serviceModule.saveGameData()),i.player.resetSaveCount())},getDataIndex:function(){return this.player._gameData.playerBaseData.dataIndex||0===this.player._gameData.playerBaseData.dataIndex||(this.player._gameData.playerBaseData.dataIndex=0),this.player._gameData.playerBaseData.dataIndex},getRandomPlayerId:function(){var e=new Date;return"Player_"+(1e10*(e.getMonth()+1)+1e8*e.getDate()+1e6*e.getHours()+1e4*e.getMinutes()+i.Utils.getRandomInt(0,9999))},getGameInfoStr:function(){var e,t=1e6*((t=new Date(this.getPlayerData().createTime)).getMonth()+1)+1e4*t.getDate()+100*t.getHours()+t.getMinutes()+"-"+i.config.gameType+"-"+i.config.version;try{i.config.needSDKUid&&wx&&wx.getSystemInfoSync&&(t=t+"-"+(e=wx.getSystemInfoSync()).SDKVersion+"-"+e.version)}catch(e){cc.log("wx null",e)}return t},getCreateTime:function(){return this.getPlayerData().createTime},setIcon:function(e){i.templateManager.getHeroDataById(e)&&(this.getPlayerData().icon=e,this.savePlayerData())},getIcon:function(){return this.getPlayerData().icon},setWxInfo:function(e,t){var a=!1;null!=e&&this.getPlayerData().wxName!=e&&(this.getPlayerData().wxName=e,a=!0),null!=t&&this.getPlayerData().wxIcon!=t&&(this.getPlayerData().wxIcon=t,a=!0),a&&(this.savePlayerData(),i.player.serviceModule.updateAlliancePlayerInfo(function(){},function(){}))},getWxIcon:function(){return this.getPlayerData().wxIcon?this.getPlayerData().wxIcon:this.getIcon()},getWxName:function(){return this.getPlayerData().wxName?this.getPlayerData().wxName:this.getNickName()},getLoginTime:function(){return this.getPlayerData().loginTime||(this.getPlayerData().loginTime=(new Date).getTime(),this.savePlayerData()),this.getPlayerData().loginTime},getLogoutTime:function(){return this.getPlayerData().logoutTime||(this.getPlayerData().logoutTime=(new Date).getTime(),this.savePlayerData()),this.getPlayerData().logoutTime},resetLoginTime:function(){var e=this.getLoginTime(),t=this.getLogoutTime(),a=Math.ceil((t-e)/1e3);1<a&&(e=new Date(t),t=new Date,e.getDate()==t.getDate()&&i.BI.onEvent(i.biConstant.EVENT_TYPE_ONLINE_TIME,i.biConstant.EVENT_ID_ONLINE_TIME,a)),this.getPlayerData().loginTime=(new Date).getTime(),this.getPlayerData().logoutTime=(new Date).getTime(),this.savePlayerData()},checkLogoutTime:function(){var e=this.getLogoutTime();5e3<(new Date).getTime()-e&&this.resetLoginTime(),this.getPlayerData().logoutTime=(new Date).getTime()},isLessThanZero:function(e){return new i.BigNumber(e).lt(0)},checkPowerValue:function(){var e=i.player.commonModule.getRegisterDay(),t=i.player.commonModule.getTodayAddPowerCount(),a=Number(this.getPlayerPowerNum());e=219*e+i.templateManager.getGameParamValue("powerMaxNumAutoRecovery"),(219<t||e<a)&&(i.BI.onEvent(i.biConstant.EVENT_TYPE_ERROR,i.biConstant.EVENT_ID_ERROR_FIX_DATA_USER,i.player.playerModule.getPlayerId()+"#"+i.biConstant.EVENT_ID_ERROR_TYPE_POWER),i.BI.onEvent(i.biConstant.EVENT_TYPE_ERROR,i.biConstant.EVENT_ID_ERROR_FIX_DATA_INFO,i.player.playerModule.getPlayerId()+"#"+i.biConstant.EVENT_ID_ERROR_TYPE_POWER+"#"+t+"#"+a+"#"+e))},checkGoldBullionValue:function(){var e=i.player.commonModule.getRegisterDay(),t=i.player.commonModule.getTodayAddGoldBullionCount(),a=Number(this.getPlayerGoldBullionNum()),n=1280*e+i.templateManager.getGameParamValue("baseDia");(1280<t||n<a)&&(i.BI.onEvent(i.biConstant.EVENT_TYPE_ERROR,i.biConstant.EVENT_ID_ERROR_FIX_DATA_USER,i.player.playerModule.getPlayerId()+"#"+i.biConstant.EVENT_ID_ERROR_TYPE_DIAMOND),i.BI.onEvent(i.biConstant.EVENT_TYPE_ERROR,i.biConstant.EVENT_ID_ERROR_FIX_DATA_INFO,i.player.playerModule.getPlayerId()+"#"+i.biConstant.EVENT_ID_ERROR_TYPE_DIAMOND+"#"+t+"#"+a+"#"+n)),e=i.player.commonModule.getTodayCostGoldBullionCount(),t=i.player.commonModule.getTotalCostGoldBullionCount(),((a=1280+i.templateManager.getGameParamValue("baseDia"))<e||n<t)&&(i.BI.onEvent(i.biConstant.EVENT_TYPE_ERROR,i.biConstant.EVENT_ID_ERROR_FIX_DATA_USER,i.player.playerModule.getPlayerId()+"#"+i.biConstant.EVENT_ID_ERROR_TYPE_COST_DIAMOND),i.BI.onEvent(i.biConstant.EVENT_TYPE_ERROR,i.biConstant.EVENT_ID_ERROR_FIX_DATA_INFO,i.player.playerModule.getPlayerId()+"#"+i.biConstant.EVENT_ID_ERROR_TYPE_COST_DIAMOND+"#"+e+"#"+t+"#"+a+"#"+n))},checkSilverValue:function(){var e=Number(i.player.commonModule.getHangUpReceiveCoin(36e4).toFixed(0)),t=i.player.commonModule.getRegisterDay(),a=i.player.commonModule.getTodayAddSilverCount(),n=Number(this.getPlayerSilverNum());t=t*e+i.templateManager.getGameParamValue("baseGold"),(e<a||t<n)&&(i.BI.onEvent(i.biConstant.EVENT_TYPE_ERROR,i.biConstant.EVENT_ID_ERROR_FIX_DATA_USER,i.player.playerModule.getPlayerId()+"#"+i.biConstant.EVENT_ID_ERROR_TYPE_GOLD),i.BI.onEvent(i.biConstant.EVENT_TYPE_ERROR,i.biConstant.EVENT_ID_ERROR_FIX_DATA_INFO,i.player.playerModule.getPlayerId()+"#"+i.biConstant.EVENT_ID_ERROR_TYPE_GOLD+"#"+a+"#"+n+"#"+e+"#"+t)),a=i.player.commonModule.getTodayCostSilverCount(),n=i.player.commonModule.getTotalCostSilverCount(),((e+=i.templateManager.getGameParamValue("baseGold"))<a||t<n)&&(i.BI.onEvent(i.biConstant.EVENT_TYPE_ERROR,i.biConstant.EVENT_ID_ERROR_FIX_DATA_USER,i.player.playerModule.getPlayerId()+"#"+i.biConstant.EVENT_ID_ERROR_TYPE_COST_GOLD),i.BI.onEvent(i.biConstant.EVENT_TYPE_ERROR,i.biConstant.EVENT_ID_ERROR_FIX_DATA_INFO,i.player.playerModule.getPlayerId()+"#"+i.biConstant.EVENT_ID_ERROR_TYPE_COST_GOLD+"#"+a+"#"+n+"#"+e+"#"+t))},isBanPlayer:function(){return this.getPlayerData().banAccount},setBanPlayer:function(e){this.getPlayerData().banAccount=e,this.savePlayerData()},getClearCount:function(){return this.getPlayerData().clearAccountCount}}),cc._RF.pop()},{}],PlayerLockPopUp:[function(e,t){"use strict";cc._RF.push(t,"aea1exhXqtFToE1oW7pTkmz","PlayerLockPopUp");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{},onLoadPage:function(){this.accountLabel=cc.find("content/infoLayout/accountLabel",this.node).getComponent(cc.Label),this.timeLabel=cc.find("content/infoLayout/timeLabel",this.node).getComponent(cc.Label),this.nameLabel=cc.find("content/infoLayout/nameLabel",this.node).getComponent(cc.Label),this.gameLabel=cc.find("content/infoLayout/gameLabel",this.node).getComponent(cc.Label),this.clearLabel=cc.find("content/infoLayout/clearLabel",this.node).getComponent(cc.Label)},showPageBegan:function(){this.updateTime=0,this.accountLabel.string="account: "+i.player.playerModule.getPlayerId(),this.nameLabel.string="name: "+i.player.playerModule.getNickName(),this.gameLabel.string="gameInfo: "+i.player.playerModule.getGameInfoStr(),this.clearLabel.string="clearInfo: "+i.player.playerModule.getClearCount()+"_"+i.timeUtil.getTimeFormat(i.player.playerModule.getLogoutTime()),this.updateTimeLabel()},updateTimeLabel:function(){this.timeLabel.string="localTime\uff1a"+i.timeUtil.getTimeFormat(i.timeUtil.getTime())},onClickQQ:function(){i.oneClickEnterGroupManager.copyQQGroup()},onClickClearAccount:function(){cc.game.pause(),i.BI.onEvent(i.biConstant.EVENT_TYPE_CLICK,i.biConstant.EVENT_ID_CLICK_CLEAR_ACCOUNT,i.player.instanceModule.getAllPassInstanceNum()),i.StorageUtil.clearAll();var e=i.player._gameData.playerBaseData;i.player._gameData={},e.dataIndex+=20,e.clearAccountCount+=1,e.playerLevel=1,e.playerExp=1,e.silver=i.templateManager.getGameParamValue("baseGold"),e.goldBullion=i.templateManager.getGameParamValue("baseDia"),e.power=i.templateManager.getGameParamValue("powerMaxNumAutoRecovery"),e.icon=i.templateManager.getGameParamValue("defaultHead"),e.loginTime=(new Date).getTime(),e.logoutTime=(new Date).getTime(),i.player._gameData.playerBaseData=e,i.StorageUtil.saveForceData(i.constant.SAVE_PLAYER_BASE_DATA,e),i.player.serviceModule.saveGameData(),i.player.resetInitFinish(),cc.director.loadScene("hotupdateScene")},update:function(e){this.updateTime+=e,this.updateTime<1||(this.updateTime=0,this.updateTimeLabel())}}),cc._RF.pop()},{}],PlayerOfficialPopUp:[function(e,t){"use strict";cc._RF.push(t,"7feafWu5F9GSZJhPygnMBpi","PlayerOfficialPopUp");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{},onLoadPage:function(){this.contentNode=cc.find("content",this.node),this.titleNode=cc.find("title",this.contentNode),this.otherParentNode=cc.find("parent",this.contentNode),this.titleLabel=cc.find("content/parent/officialPositionLayout/officialPosition",this.node).getComponent(cc.Label),this.rewardNumLabel=cc.find("content/parent/rewardsLayout/num",this.node).getComponent(cc.Label),this.beforeGoldSpeedLabel=cc.find("content/parent/gold/goldLayoutCurrent/iconLayout/number",this.node).getComponent(cc.Label),this.GoldSpeedLabel=cc.find("content/parent/gold/iconLayoutNext/number",this.node).getComponent(cc.Label),this.beforeExpSpeedLabel=cc.find("content/parent/exp/expLayoutCurrent/iconLayout/number",this.node).getComponent(cc.Label),this.ExpSpeedLabel=cc.find("content/parent/exp/iconLayoutNext/number",this.node).getComponent(cc.Label)},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.SHOW_AD_OVER_PLAYER_LEVEL_UP,function(){return e.onShowAdDiaOver()})},showPageBegan:function(){this.isClick=!1,i.Logger.debug("show player level up page"),this.initData(),i.soundsUtil.playSoundEffect("title_promotion"),this.runDelayEffect()},showPageEnded:function(){i.ttAdManager.showBannerAd(cc.find("adNode",this.node),this.getPageType())},initData:function(){var e=i.player.playerModule.getPlayerLevel();this.level=e,this.levelData=i.templateManager.getPlayerLevelDataByLevel(e),this.adRewardNum=this.levelData.diamond,this.detailUi(),this.contentNode.scaleX=0,this.titleNode.active=!1,this.otherParentNode.active=!1,this.blackNode.opacity=1,e=[{itemId:i.constant.COIN_TYPE_GOLD_BULLION,number:this.levelData.diamond}],i.player.commonModule.addRewardCache(e)},runDelayEffect:function(){var e=cc.delayTime(.5),t=cc.callFunc(function(){this.blackNode.opacity=255,this.runPageEffect()},this);t=cc.sequence(e,t),this.contentNode.stopAllActions(),this.contentNode.runAction(t)},runPageEffect:function(){var e=cc.scaleTo(.1,1.3,1),t=cc.scaleTo(.05,1,1),i=cc.callFunc(function(){this.runTitleEffect()},this);i=cc.sequence(e,t,i),this.contentNode.stopAllActions(),this.contentNode.runAction(i)},runTitleEffect:function(){this.titleNode.active=!0,this.titleNode.scale=0;var e=cc.scaleTo(.2,1.2),t=cc.scaleTo(.1,1,1),i=cc.callFunc(function(){this.runParentEffect()},this);i=cc.sequence(e,t,i),this.titleNode.stopAllActions(),this.titleNode.runAction(i)},runParentEffect:function(){this.otherParentNode.active=!0,this.otherParentNode.opacity=0;var e=cc.fadeIn(.3),t=cc.callFunc(function(){},this);t=cc.sequence(e,t),this.otherParentNode.stopAllActions(),this.otherParentNode.runAction(t)},detailUi:function(){this.titleLabel.string=i.lang.getGameText(this.levelData.office),this.rewardNumLabel.string=this.levelData.diamond;var e=i.Utils.formatNumberForLabel(i.player.commonModule.getHangUpReceiveCoin(3600,!0,this.level-1)),t=i.Utils.formatNumberForLabel(i.player.commonModule.getHangUpReceiveCoin(3600,!0));i.lang.updateLabelString(this.beforeGoldSpeedLabel,[e]),i.lang.updateLabelString(this.GoldSpeedLabel,[t]),e=i.Utils.formatNumberForLabel(i.player.commonModule.getHangUpReceiveExp(3600,!0,this.level-1)),t=i.Utils.formatNumberForLabel(i.player.commonModule.getHangUpReceiveExp(3600,!0)),i.lang.updateLabelString(this.beforeExpSpeedLabel,[e]),i.lang.updateLabelString(this.ExpSpeedLabel,[t])},onClickAd:function(){i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,i.GameEventType.SHOW_AD_OVER_PLAYER_LEVEL_UP)},onShowAdDiaOver:function(){this.closePage();var e=[{itemId:i.constant.COIN_TYPE_GOLD_BULLION,number:this.adRewardNum}];i.player.commonModule.addRewardCache(e)},onClickReward:function(){this.isClick||(this.isClick=!0,this.closePage(),this.isClick=!1)},closePageBegan:function(){i.ttAdManager.hideBannerAd()},closePageEnded:function(){var e=i.templateManager.getGameParamValue("appstoreReviewPageShowLevel");i.Logger.debug("================= check ios mark:",this.level>=e,"================="),this.level,i.gameScene.isHaveCachePage(i.pageConstant.PAGE_TYPE_MAIN_NEW_FUNCTION)||i.gameScene.pageIsOpened(i.pageConstant.PAGE_TYPE_MAIN_NEW_FUNCTION)||i.gameScene.mainPage.checkFunctionGuide(),i.player.commonModule.checkRewardCache(!0)}}),cc._RF.pop()},{}],Player:[function(e,t){"use strict";cc._RF.push(t,"8b12dPtBiVIUJ6ClXYphjOb","Player");var i=e,a=i("Aft"),n=i("ServiceModule"),o=i("PlayerBaseModule"),s=i("InstanceModule"),r=i("FunctionModule"),c=i("GuideModule"),l=i("ItemModule"),d=i("GMModule"),h=i("CommonModule"),u=i("SettingModule"),p=i("TowerModule"),g=i("HeroModule"),_=i("ShopModule"),m=i("TaskModule"),E=i("PushModule"),T=i("SignModule"),f=i("VipModule"),S=i("BroadcastModule"),A=i("PiggyBankModule"),I=i("SkillModule"),y=i("InviteFriendModule"),P=i("NewYearModule"),v=i("AllianceModule"),L=cc.Class({extends:cc.Object,properties:{_initFinish:!1},statics:{_instance:null,getInstance:function(){return this._instance||(this._instance=new L),this._instance}},ctor:function(){this.modules=[],this.modules.push(this.playerModule=new o),this.modules.push(this.serviceModule=new n),this.modules.push(this.instanceModule=new s),this.modules.push(this.functionModule=new r),this.modules.push(this.guideModule=new c),this.modules.push(this.itemModule=new l),this.modules.push(this.gmModule=new d),this.modules.push(this.commonModule=new h),this.modules.push(this.heroModule=new g),this.modules.push(this.settingModule=new u),this.modules.push(this.towerModule=new p),this.modules.push(this.newYearModule=new P),this.modules.push(this.taskModule=new m),this.modules.push(this.shopModule=new _),this.modules.push(this.pushModule=new E),this.modules.push(this.signModule=new T),this.modules.push(this.vipModule=new f),this.modules.push(this.broadcastModule=new S),this.modules.push(this.piggyBankModule=new A),this.modules.push(this.inviteFriendModule=new y),this.modules.push(this.skillModule=new I),this.modules.push(this.allianceModule=new v)},initModule:function(){for(var e=0;e<this.modules.length;e++)this.modules[e].init(this);console.log("================= Player 333");for(var t=0;t<this.modules.length;t++)console.log(t),this.modules[t].loadData();console.log("================= Player 444")},restoreModuleData:function(e){for(var t=0;t<this.modules.length;t++)this.modules[t].restoreData(e)},init:function(){console.log("================= Player 111"),this._initFinish||(this._gameData={},this.saveDataCount=1,this.initModule(),this._initFinish=!0),console.log("================= Player 222")},isInitFinish:function(){return this._initFinish},resetInitFinish:function(){this._initFinish=!1},getCryptoIv:function(){return"aft#"+a.Utils._localCryptIvPart+"*"+this.serviceModule._ivPart+"$"},getCryptoK:function(){return"aft$"+a.Utils._localCryptKPart+"^"+this.serviceModule._kPart+"!"},saveGameData:function(e,t,i){this.saveDataCount++,a.StorageUtil.save(e,t,i)},isNeedSave:function(){return 0<this.saveDataCount},resetSaveCount:function(){this.saveDataCount=0}});a.player=L.getInstance(),cc._RF.pop()},{}],PromoteItemRender:[function(e,t){"use strict";cc._RF.push(t,"91f3am4bUtIH5ZoAwuu2OaT","PromoteItemRender");var i=e("Aft");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.iconSprite=cc.find("icon",this.node).getComponent(cc.Sprite),this.nameLabel=cc.find("name",this.node).getComponent(cc.Label)},initData:function(e){switch(this._id=e,this._data=i.templateManager.getFailureDataById(e),this.canClick=!1,this._id){case i.constant.LOSE_JUMP_HERO_UP:this.canClick=i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_HERO);break;case i.constant.LOSE_JUMP_TOWER_UP:this.canClick=i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_TOWER);break;case i.constant.LOSE_JUMP_HERO_CHANGE:this.canClick=0<i.player.heroModule.getAllUnlockList().length&&i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_HERO);break;case i.constant.LOSE_JUMP_TOWER_CHANGE:this.canClick=i.player.towerModule.getHaveCanUseHero()&&i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_TOWER);break;case i.constant.LOSE_JUMP_SKILL:this.canClick=i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_SKILL)}this.node.active=this.canClick,this.canClick&&(this.iconSprite.spriteFrame=i.battleScene.getBattleSpriteFrame(this._data.icon),this.nameLabel.string=i.lang.getGameText(this._data.name))},onClick:function(){this.canClick&&this.host.backLabelNode.active&&(this.host.hideTips(),this.host.onClickBack(this._id))}}),cc._RF.pop()},{}],PushModule:[function(e,t){"use strict";cc._RF.push(t,"5a49bPwxEZLcqWTp7wsT3El","PushModule");var i=e("Aft");cc.Class({extends:i.BaseHandler,init:function(e){this.player=e;var t=i.StorageUtil.getData(i.constant.SAVE_PUSH_DATA);t||(this.player.saveGameData(i.constant.SAVE_PUSH_DATA,e={todayOfflinePushCount:0,nextOfflinePushTime:0}),t=JSON.stringify(e)),i.Logger.debug("init pushData :",t),this.player._gameData.pushData=JSON.parse(t)},loadData:function(){},restoreData:function(e){e&&e.pushData&&(i.StorageUtil.save(i.constant.SAVE_PUSH_DATA,e.pushData,!0),i.Logger.debug("restoreData data  pushData :",JSON.stringify(e.pushData)))},savePushData:function(e){this.player.saveGameData(i.constant.SAVE_PUSH_DATA,this.player._gameData.pushData,e)},getPushData:function(){return this.player._gameData.pushData},getTodayOfflinePushCount:function(){return this.getPushData().todayOfflinePushCount},resetTodayPushData:function(){this.getPushData().todayOfflinePushCount=0,this.savePushData(!0)},setNextOfflinePushTime:function(e){this.getPushData().nextOfflinePushTime=i.timeUtil.getTime()+1e3*e,this.savePushData()},checkTodayOfflinePushCount:function(){0!==this.getPushData().nextOfflinePushTime&&i.timeUtil.getTime()>this.getPushData().nextOfflinePushTime&&(this.getPushData().todayOfflinePushCount+=1),this.getPushData().nextOfflinePushTime=0,this.savePushData()}}),cc._RF.pop()},{}],QuicklyBattlePage:[function(e,t){"use strict";cc._RF.push(t,"8a7fcVVK2xLYKEJDTbiD3tu","QuicklyBattlePage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{commonItemRenderPrefab:{default:null,type:cc.Prefab},commonTipsPrefab:{default:null,type:cc.Prefab}},onLoadPage:function(){this.contentNode=cc.find("content",this.node),this.levelLabel=cc.find("level",this.contentNode).getComponent(cc.Label),this.rewardLayout=cc.find("reward/heroLayout",this.contentNode),this.adButtonNode=cc.find("button/background/adLayout",this.contentNode),this.powerCostLabelNode=cc.find("button/background/quicklyHangUpLabel",this.contentNode),this.powerCostNode=cc.find("button/background/powerLayout",this.contentNode),this.powerCostLabel=cc.find("number",this.powerCostNode).getComponent(cc.Label),this.leftTimesLabel=cc.find("button/leftTimes",this.contentNode).getComponent(cc.Label),this.recoverTimesLabel=cc.find("button/recoverTimes",this.contentNode).getComponent(cc.Label),this.buttonEffect=cc.find("button/background/button_ring",this.contentNode).getComponent(cc.Animation),this.buttonEffect.node.active=!1,this.doubleTipsLayoutNode=cc.find("tipsLayout",this.contentNode),this.doubleTipsChoseNode=cc.find("icon/chose",this.doubleTipsLayoutNode),this.doubleTipsLabel=cc.find("label",this.doubleTipsLayoutNode).getComponent(cc.Label),this.hideButtonNode=cc.find("hideButton",this.contentNode),this.itemObjList=[],this.doubleTipsChoseStatus=!0},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.SHOW_AD_OVER_QUICKLY_BATTLE,function(){return e.onShowADOver()}),this.registerListener(i.GameEventType.SHOW_AD_OVER_QUICKLY_BATTLE_DOUBLE,function(){return e.onDoubleShowAdOver()}),this.registerListener(i.GameEventType.UPDATE_MAIN_QUICKLY_BATTLE,function(){return e.onUpdateStatus()})},showPageBegan:function(){this.isDoublePoint=!1,this.hideButtonNode.active=!1,this.powerCostNode.active=!1,this.adButtonNode.active=!1,this.leftTimesLabel.node.active=!1,this.recoverTimesLabel.node.active=!1,this.powerCostLabelNode.active=!1,this.vipRatio=i.player.vipModule.getVipQuickHangUpDouble(),this.updateDoubleTips();var e=i.player.commonModule.getRewardMap();this.rewardList=e.rewardList,this.updateAllItem(),i.lang.updateLabelString(this.levelLabel,[e.chapterName,e.instanceName]),i.player.commonModule.getCanUsePowerGetRewardTimes()?(this.powerCostNode.active=!0,this.leftTimesLabel.node.active=!0,this.powerCostLabelNode.active=!0,this.needUpdate=!1,this.updateCostLabel()):(this.adButtonNode.active=!0,this.recoverTimesLabel.node.active=!0,this.needUpdate=!0,this.updateTimeLabel(),i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_QUICK_HANGUP_CD_AD)),this.updateTime=0,this.doubleAdShowPoint(),this.checkRedPoint()},showPageEnded:function(){i.ttAdManager.showGridAd(cc.find("adNode",this.node),this.getPageType())},updateDoubleTips:function(){this.doubleTipsChoseNode.active=this.doubleTipsChoseStatus;var e=i.player.commonModule.getTodayLastQuickHangUpAdTimes();this.doubleTipsLayoutNode.active=0<e,i.lang.updateLabelString(this.doubleTipsLabel,[this.vipRatio,e])},updateAllItem:function(){for(var e=this.doubleTipsChoseStatus&&0<i.player.commonModule.getTodayLastQuickHangUpAdTimes()?this.vipRatio:null,t=0;t<this.rewardList.length;t++){var a=this.rewardList[t],n=this.getItemObj(t);n.node.active=!0,n.initData(a.key,a.value,!1,e)}},getItemObj:function(e){if(this.itemObjList.length<e+1)for(var t=this.itemObjList.length;t<e+1;t++){var i=cc.instantiate(this.commonItemRenderPrefab),a=i.getComponent("CommonItemRender");this.rewardLayout.addChild(i),(a.host=this).itemObjList.push(a)}return this.itemObjList[e]},hideAllItem:function(){for(var e=0;e<this.itemObjList.length;e++)this.itemObjList[e].node.active=!1},intoPowerCostStatus:function(){this.powerCostNode.active=!0,this.leftTimesLabel.node.active=!0,this.adButtonNode.active=!1,this.recoverTimesLabel.node.active=!1,this.powerCostLabelNode.active=!0,this.updateTime=0,this.needUpdate=!1,this.updateCostLabel()},intoADStatus:function(){this.powerCostNode.active=!1,this.leftTimesLabel.node.active=!1,this.adButtonNode.active=!0,this.recoverTimesLabel.node.active=!0,this.powerCostLabelNode.active=!1,this.updateTime=0,this.needUpdate=!0,this.updateTimeLabel(),i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_QUICK_HANGUP_CD_AD)},updateTimeLabel:function(){var e=i.player.commonModule.getNeedTimeToRecover();if(e<=0)return i.player.commonModule.recoverUsePowerGetRewardTime(),void this.intoPowerCostStatus();e=i.timeUtil.secondFormat(e,!0),i.lang.updateLabelString(this.recoverTimesLabel,[e])},updateCostLabel:function(){var e=i.player.commonModule.getCanUsePowerGetRewardCount();e<=0?this.intoADStatus():(i.lang.updateLabelString(this.powerCostLabel,[i.templateManager.getGameParamValue("quickHangUpPowerNum")]),i.lang.updateLabelString(this.leftTimesLabel,[e]))},showTips:function(e,t,i){this.itemTipsNode||(this.itemTipsNode=cc.instantiate(this.commonTipsPrefab),this.itemTipsObj=this.itemTipsNode.getComponent("CommonSkillTipsItemRender"),this.node.addChild(this.itemTipsNode)),this.showTipsId=e,this.itemTipsObj.showNode(e,t,i),this.hideButtonNode.active=!0},hideTips:function(){this.showTipsId=null,this.itemTipsNode&&(this.itemTipsNode.active=!1),this.hideButtonNode.active=!1},checkRedPoint:function(){var e=i.templateManager.getGameParamValue("quickHangUpPowerNum");i.player.playerModule.isPowerEnough(e)&&i.player.commonModule.checkRecoverTime()?this.buttonEffect.node.active||(this.buttonEffect.node.active=!0,this.buttonEffect.stop(),this.buttonEffect.setCurrentTime(0),this.buttonEffect.play("button_ring")):this.buttonEffect.node.active&&(this.buttonEffect.node.active=!1)},onClickChose:function(){this.doubleTipsChoseStatus=!this.doubleTipsChoseStatus,this.updateDoubleTips(),this.updateAllItem(),this.doubleAdShowPoint(),this.checkRedPoint()},doubleAdShowPoint:function(){this.doubleTipsLayoutNode.active&&this.doubleTipsChoseNode.active&&!this.isDoublePoint&&this.powerCostNode.active&&(this.isDoublePoint=!0,i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_QUICK_HANGUP_FIVE_AD,i.player.commonModule.getTodayLastQuickHangUpAdTimes()))},onClickAd:function(){i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,i.GameEventType.SHOW_AD_OVER_QUICKLY_BATTLE)},onShowADOver:function(){i.player.commonModule.recoverUsePowerGetRewardTime(),this.intoPowerCostStatus(),this.isDoublePoint=!1,this.doubleAdShowPoint(),this.checkRedPoint()},onClickPower:function(){if(this.hideTips(),this.needUpdate)this.onClickAd();else{i.soundsUtil.playSoundEffect("common_button_click");var e=i.templateManager.getGameParamValue("quickHangUpPowerNum");if(i.player.playerModule.isPowerEnough(e))if(this.doubleTipsChoseStatus&&0<i.player.commonModule.getTodayLastQuickHangUpAdTimes())i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,i.GameEventType.SHOW_AD_OVER_QUICKLY_BATTLE_DOUBLE);else{for(var t=0;t<this.rewardList.length;t++){var a=this.rewardList[t];i.player.itemModule.dropItem(a.key,a.value,!0,i.constant.ITEM_ADD_SOURCE_HANGE_UP_QUICK)}i.player.playerModule.costPowerNum(e),i.player.commonModule.addUsePowerGetRewardTimes(),this.updateCostLabel(),i.BI.onEvent(i.biConstant.EVENT_TYPE_USE_ITEM,i.biConstant.EVENT_ID_USE_ITEM_QUICK_BUY)}else i.player.commonModule.getPowerBuyIsMax()?(e=i.lang.getGameText(i.GameTextCode.POWER_NOT_ENOUGH),i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,e)):i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_POWER)}},onDoubleShowAdOver:function(){for(var e=0;e<this.rewardList.length;e++){var t=this.rewardList[e];i.player.itemModule.dropItem(t.key,t.value*this.vipRatio,!0,i.constant.ITEM_ADD_SOURCE_HANGE_UP_QUICK)}var a=i.templateManager.getGameParamValue("quickHangUpPowerNum");i.player.playerModule.costPowerNum(a),i.player.commonModule.addUsePowerGetRewardTimes(),i.player.commonModule.addTodayQuickHangUpAdTimes(),this.isDoublePoint=!1,this.updateCostLabel(),this.updateDoubleTips(),this.updateAllItem(),this.doubleAdShowPoint(),this.checkRedPoint(),i.BI.onEvent(i.biConstant.EVENT_TYPE_USE_ITEM,i.biConstant.EVENT_ID_USE_ITEM_QUICK_BUY)},closePageBegan:function(){this.hideAllItem(),this.hideTips(),i.ttAdManager.hideGridAd()},onUpdateStatus:function(){this.needTime&&this.intoPowerCostStatus()},update:function(e){this.needUpdate&&(this.updateTime+=e,this.updateTime<1||(this.updateTime=0,this.updateTimeLabel()))}}),cc._RF.pop()},{}],RankItemRender:[function(e,t){"use strict";cc._RF.push(t,"96b3an/OONDHpl9PUuzHRIl","RankItemRender");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{vipAtlas:{default:null,type:cc.SpriteAtlas}},setData:function(e){var t,a,n,o,s,r=this;this.rankIconNode=cc.find("rankImg",this.node),this.rankIcon1=cc.find("icon1",this.rankIconNode),this.rankIcon2=cc.find("icon2",this.rankIconNode),this.rankIcon3=cc.find("icon3",this.rankIconNode),this.rankLabelNode=cc.find("rankLabel",this.node),this.rankLabel=this.rankLabelNode.getComponent(cc.Label),this.nameLabel=cc.find("rolename",this.node).getComponent(cc.Label),this.progressLabel=cc.find("progress",this.node).getComponent(cc.Label),this.vipSprite=cc.find("head/vip",this.node).getComponent(cc.Sprite),this.headSprite=cc.find("head/wechatHead",this.node).getComponent(cc.Sprite),this.data=e,this.data?(this.node.active||(this.node.active=!0),t=e.params,t=JSON.parse(t),this.playerName=t?t.name:"",this.headUrl=t?t.headUrl:null,this.rank=e.rank,this.score=""+e.score,this.specialParam=0,e.specialParam&&(this.specialParam=e.specialParam),this.progressLabel.node.active=!1,this.rankLabelNode.active=!1,this.rankIcon1.active=!1,this.rankIcon2.active=!1,this.rankIcon3.active=!1,1===this.rank?this.rankIcon1.active=!0:2===this.rank?this.rankIcon2.active=!0:3===this.rank?this.rankIcon3.active=!0:(this.rankLabelNode.active=!0,this.rankLabel.string=this.rank),(e=i.templateManager.getVipDataByLevel(this.specialParam))?(this.vipSprite.node.active=!0,this.vipAtlas.getSpriteFrame(e.vipIconSmall),this.vipSprite.spriteFrame=this.vipAtlas.getSpriteFrame(e.vipIconSmall)):this.vipSprite.node.active=!1,this.nameLabel.string=12<i.Utils.getStrCharLength(this.playerName)?i.Utils.omitStringByLength(this.playerName,10,"..."):this.playerName,(a=this).headUrl?(this.headSprite.node.active=!1,cc.loader.load({url:this.headUrl,type:"png"},function(e,t){e&&console.error(e),t.url&&a.headUrl==t.url&&(r.headSprite.spriteFrame=new cc.SpriteFrame(t),r.headSprite.node.active=!0)})):this.headSprite.node.active=!1,this.host.rankType===i.constant.rankType.INSTANCE?(n=i.player.instanceModule.getRealRankData(this.score),o=i.templateManager.getChapterDataById(n[0]),this.scheduleOnce(function(){this.progressLabel.node.active=!0;var e=n[0];o&&(e=i.lang.getGameText(o.name)),i.lang.updateLabelString(this.progressLabel,[e,n[0],n[1]])},.01)):(s=i.player.instanceModule.getRealRankStarCount(this.score),this.scheduleOnce(function(){this.progressLabel.node.active=!0,this.progressLabel.string=s},.01))):this.node.active=!1}}),cc._RF.pop()},{}],RankPage:[function(e,t){"use strict";cc._RF.push(t,"1c850yWt8xHoZM2aPxTN+Yu","RankPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{},onLoadPage:function(){this.contentNode=cc.find("contentOut",this.node),this.rankScrollNodeObj=this.contentNode.getComponent("RankScrollNode"),this.rankScrollNodeObj.host=this},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.UPDATE_GIFT_DATA,function(){return e.updatePowerButton()}),this.registerListener(i.GameEventType.GET_WX_USER_LOCATION_SUCCESS,function(t){return e.updatePlayerLocation(t)})},updatePowerButton:function(){this.rankScrollNodeObj.updatePowerButton()},updatePlayerLocation:function(){this.rankScrollNodeObj.updatePlayerLocation()},showPageBegan:function(){this.rankScrollNodeObj.initData(),i.ttAdManager.getUserInteractiveStorage()},showPageEnded:function(){this.rankScrollNodeObj.checkUserPermission()},onClose:function(){this.closePage(),this.rankScrollNodeObj.closeOpenView(),i.nativeManager.hidePermissionButton()},closePageBegan:function(){this.rankScrollNodeObj.closeOpenView()},closePageEnded:function(){i.nativeManager.hidePermissionButton()}}),cc._RF.pop()},{}],RankScrollNode:[function(e,t){"use strict";cc._RF.push(t,"c12d4XdDHhLfqovOZAL/jPo","RankScrollNode");var i=e("Aft");cc.Class({extends:i.BaseScrollView,properties:{wxSubContextView:cc.Node,vipAtlas:{default:null,type:cc.SpriteAtlas}},onLoad:function(){this._updateInterval=0,this.timeLabel=cc.find("refresh",this.node).getComponent(cc.Label),this.timeLabel.node.active=!1,this.instanceBtnChooseSprite=cc.find("levelAndStar/levelButton/background",this.node).getComponent(cc.Sprite),this.starBtnChooseSprite=cc.find("levelAndStar/starButton/background",this.node).getComponent(cc.Sprite),this.instanceTitleNode=cc.find("levelAndStar/levelButton/background/label",this.node),this.starTitleNode=cc.find("levelAndStar/starButton/background/label",this.node),this.friendChooseNode=cc.find("friendsButton/background/choose",this.node),this.destrictsChooseNode=cc.find("destrictsButton/background/choose",this.node),this.worldChooseNode=cc.find("worldButton/background/choose",this.node),this.worldBtnNode=cc.find("worldButton",this.node),this.destrictsBtnNode=cc.find("destrictsButton",this.node),this.destrictsLabel=cc.find("destrictsButton/background/label",this.node).getComponent(cc.Label),this.loseConnectNode=cc.find("loseConnect",this.node),this.selfRankNode=cc.find("self",this.node),this.myIconRank1=cc.find("self/rankIcon/icon1",this.node),this.myIconRank2=cc.find("self/rankIcon/icon2",this.node),this.myIconRank3=cc.find("self/rankIcon/icon3",this.node),this.myLabelRankNode=cc.find("self/rankLabel",this.node),this.myLabelRank=this.myLabelRankNode.getComponent(cc.Label).getComponent(cc.Label),this.myLabelName=cc.find("self/rolename",this.node).getComponent(cc.Label),this.myLabelNum=cc.find("self/progressAndPowerLayout/progress",this.node).getComponent(cc.Label),this.myVipSprite=cc.find("self/head/vip",this.node).getComponent(cc.Sprite),this.myHeadSprite=cc.find("self/head/wechatHead",this.node).getComponent(cc.Sprite),this._reloadRankInterval=i.templateManager.getGameParamValue("rankRefreshIntervalTime"),this.wxSubContextViewNode=cc.find("WxSubContextView",this.node),this.scrollViewNode=cc.find("scrollView",this.node),this.buttonLeftNode=cc.find("buttonLeft",this.node),this.buttonRightNode=cc.find("buttonRight",this.node),this.worldLockNode=cc.find("worldButton/background/lock",this.node),this.destrictsLockNode=cc.find("destrictsButton/background/lock",this.node),this.powerButtonNode=cc.find("buttonLayout/powerButton",this.node).getComponent(cc.Button),this.powerButtonLabel=cc.find("buttonLayout/powerButton/Background/layout/label",this.node).getComponent(cc.Label),this.buttonEffect=cc.find("buttonLayout/powerButton/button_ring",this.node).getComponent(cc.Animation),this.buttonEffect.node.active=!1},closeOpenView:function(){this.wxSubContextViewNode.active=!1,console.log("closeOpenView"),i.config.needSDKUid&&wx.getOpenDataContext().postMessage({message:"closeRankPage"})},updatePowerButton:function(){var e=i.player.inviteFriendModule.getCanReceivePowerNum(!0);console.log("updatePowerButton canReceivePowerNum = "+e),i.lang.updateLabelString(this.powerButtonLabel,[e]),this.powerButtonNode.interactable=0<e,0<i.player.inviteFriendModule.getCanReceivePowerNum()?(this.buttonEffect.node.active=!0,this.buttonEffect.stop(),this.buttonEffect.setCurrentTime(0),this.buttonEffect.play("button_ring")):this.buttonEffect.node.active=!1,this.powerButtonNode.node.opacity=255},onClickPower:function(){var e=i.player.inviteFriendModule.getTodayReceivePower();0<i.player.inviteFriendModule.getCanReceivePowerNum()&&(i.player.inviteFriendModule.saveReceivePower(),this.updatePowerButton());var t=i.player.inviteFriendModule.getTodayReceivePower(),a=i.templateManager.getGameParamValue("receivePowerMaxNum"),n=a-t;a<=t?e<t?(t=i.lang.getFormatString(i.GameTextCode.RECEIVE_POWER_NUM,[n,a]),i.gameScene.showTipsItemRender(t)):i.gameScene.showTipsItemRender(i.lang.getGameText(i.GameTextCode.RECEIVE_POWER_MAX)):(a=i.lang.getFormatString(i.GameTextCode.RECEIVE_POWER_NUM,[n,a]),i.gameScene.showTipsItemRender(a))},initData:function(){this.updatePlayerLocation(),this.limitClickTime=0,this.getting=!1,this.worldLockNode.active=!i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_RANK_WORLD),this.destrictsLockNode.active=!i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_RANK_CITY),this.updateSmallTab(i.constant.rankType.INSTANCE),this.isMustRefresh=!0,this.onClickFriend(),i.lang.updateLabelString(this.powerButtonLabel,[0]),this.powerButtonNode.interactable=!1,this.powerButtonNode.node.opacity=1,this.buttonEffect.node.active=!1,i.ttAdManager.getUserInteractiveStorage()},updatePlayerLocation:function(){var e=i.player.commonModule.getPlayerCityData();e&&(this.destrictsLabel.string=e.city)},getRankList:function(e,t,a){var n,o,s,r=this;this.rankBigType!==i.constant.rankBigType.FRIEND&&(n=this.rankType,t&&(n=t),t&&t!==this.rankType||(this.loseConnectNode.active=!1,this.selfRankNode.active=!1,this.timeLabel.node.active=!1,this.isShowTimeLabel=!1),o=e||this.rankBigType,e=null,(e=i.player.commonModule.rankDataMap[o]&&i.player.commonModule.rankDataMap[o][n]?i.player.commonModule.rankDataMap[o][n]:e)&&!a&&i.timeUtil.getTime()-i.player.commonModule._lastUpdateTime<1e3*this._reloadRankInterval?this.receiveRankData(e,n,o):(s=o+n,e=i.player.commonModule.getPlayerCityData(),o===i.constant.rankBigType.AREA&&e&&(s=o+e.cityCode+n),i.gameScene.showLoadingCycle(function(){return i.player.serviceModule.getLeaderboard(s,function(e){i.player.commonModule._lastUpdateTime=i.timeUtil.getTime(),r.receiveRankData(e,n,o)})})))},receiveRankData:function(e,t,a){e?(i.player.commonModule.rankDataMap[a]||(i.player.commonModule.rankDataMap[a]={}),i.player.commonModule.rankDataMap[a][t]=Array.from(e),t==this.rankType&&a==this.rankBigType&&(this.initRankData(e),this.getting=!1,i.gameScene.hideLoadingCycle())):this.rankBigType!=i.constant.rankBigType.FRIEND&&(this.loseConnectNode.active=!0)},initRankData:function(e){for(var t,i=[],a=0;a<e.length;a++)i.push(e[a]);i[0]&&(this.myRank=i[0].rank,this.myScore=""+i[0].score,t=i[0].params,t=JSON.parse(t),this.myName=t?t.name:"",this.myHeadUrl=t?t.headUrl:null,i[this.specialParam=0].specialParam&&(this.specialParam=i[0].specialParam),i.splice(0,1)),this.init(i,"RankItemRender"),this.showView(),this.selfRankNode.active=!0,this.timeLabel.node.active=!0,this.isShowTimeLabel=!0,this.resetMyRank()},resetMyRank:function(){var e=this;i.Logger.debug("this.myRank: "+this.myRank),this.myLabelRankNode.active=!1,this.myIconRank1.active=!1,this.myIconRank2.active=!1,this.myIconRank3.active=!1,1===this.myRank?this.myIconRank1.active=!0:2===this.myRank?this.myIconRank2.active=!0:3===this.myRank?this.myIconRank3.active=!0:(this.myLabelRankNode.active=!0,this.myLabelRank.string=this.myRank);var t,a=i.templateManager.getVipDataByLevel(this.specialParam);a?(this.myVipSprite.node.active=!0,this.myVipSprite.spriteFrame=this.vipAtlas.getSpriteFrame(a.vipIconSmall)):this.myVipSprite.node.active=!1,this.myLabelName.string=12<i.Utils.getStrCharLength(this.myName)?i.Utils.omitStringByLength(this.myName,10,"..."):this.myName,this.rankType===i.constant.rankType.INSTANCE?(t=i.player.instanceModule.getRealRankData(this.myScore),a=i.templateManager.getChapterDataById(t[0]),i.lang.updateLabelString(this.myLabelNum,[i.lang.getGameText(a.name),t[0],t[1]])):(t=i.player.instanceModule.getRealRankStarCount(this.myScore),this.myLabelNum.string=t);var n=this;this.myHeadUrl?(this.myHeadSprite.node.active=!1,cc.loader.load({url:this.myHeadUrl,type:"png"},function(t,i){t&&console.error(t),i.url&&n.myHeadUrl==i.url&&(e.myHeadSprite.spriteFrame=new cc.SpriteFrame(i),e.myHeadSprite.node.active=!0)})):this.myHeadSprite.node.active=!1},onClickInstance:function(e,t){this.getting||this.rankType==i.constant.rankType.INSTANCE&&!t||0<this.limitClickTime&&!t||(this.limitClickTime=.5,this.updateSmallTab(i.constant.rankType.INSTANCE),this.clearRankView(),this.getRankList())},onClickStar:function(){this.getting||this.rankType==i.constant.rankType.STAR||0<this.limitClickTime||(this.limitClickTime=.5,this.updateSmallTab(i.constant.rankType.STAR),this.clearRankView(),this.getRankList())},updateSmallTab:function(e){this.rankType=e,this.instanceBtnChooseSprite.enabled=e===i.constant.rankType.INSTANCE,this.instanceTitleNode.color=e===i.constant.rankType.INSTANCE?cc.color("#9B715D"):cc.color("#FFECD0"),this.starBtnChooseSprite.enabled=e===i.constant.rankType.STAR,this.starTitleNode.color=e===i.constant.rankType.STAR?cc.color("#9B715D"):cc.color("#FFECD0"),this.rankBigType==i.constant.rankBigType.FRIEND&&i.config.needSDKUid&&this.updateRankList(this.rankType)},updateBigTabState:function(e){console.log("updateBigTabState type = "+e),this.rankBigType=e,this.friendChooseNode.active=e===i.constant.rankBigType.FRIEND,this.destrictsChooseNode.active=e===i.constant.rankBigType.AREA,this.worldChooseNode.active=e===i.constant.rankBigType.WORLD,this.selfRankNode.active=e!=i.constant.rankBigType.FRIEND},onClickFriend:function(){var e=this;!this.isMustRefresh&&this.rankBigType===i.constant.rankBigType.FRIEND||0<this.limitClickTime||(this.limitClickTime=.5,this.isMustRefresh=!1,console.log("onClickFriend"),this.updateBigTabState(i.constant.rankBigType.FRIEND),i.Logger.debug("onClickFriend this.rankType = "+this.rankType),this.loseConnectNode.active=!1,this.scrollViewNode.active=!1,this.wxSubContextViewNode.active=!1,i.config.needSDKUid&&this.scheduleOnce(function(){e.wxSubContextViewNode.active=!0,e.updateRankList(e.rankType)},.2))},onClickDestricts:function(){var e,t;console.log("onClickDestricts"),this.rankBigType!==i.constant.rankBigType.AREA&&(i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_RANK_CITY)?i.nativeManager.getWxRealUserInfo()&&(i.player.commonModule.getPlayerCityData()?0<this.limitClickTime||(this.limitClickTime=.5,this.closeOpenView(),this.buttonLeftNode.active=!1,this.buttonRightNode.active=!1,this.scrollViewNode.active=!0,this.updateBigTabState(i.constant.rankBigType.AREA),this.onClickInstance(null,!0),t="null",(e=i.player.commonModule.getPlayerCityData())&&(t=e.city),i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_CITY_RANK,t)):i.nativeManager.checkWxLocation()):i.gameScene.showTipsItemRender(i.player.functionModule.getFuncConditionStringById(i.constant.MAIN_FUNCTION_RANK_CITY)))},checkUserPermission:function(){i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_RANK_WORLD)&&i.nativeManager.checkUserPermission(i.constant.WX_PERMISSION_TYPE_USER,this.worldBtnNode),i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_RANK_CITY)&&i.nativeManager.checkUserPermission(i.constant.WX_PERMISSION_TYPE_LOCATION,this.destrictsBtnNode)},onClickWorld:function(){console.log("onClickWorld"),this.rankBigType!==i.constant.rankBigType.WORLD&&(i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_RANK_WORLD)?i.nativeManager.getWxRealUserInfo()&&(0<this.limitClickTime||(this.limitClickTime=.5,this.closeOpenView(),this.buttonLeftNode.active=!1,this.buttonRightNode.active=!1,this.scrollViewNode.active=!0,this.updateBigTabState(i.constant.rankBigType.WORLD),this.onClickInstance(null,!0),i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_WORLD_RANK))):i.gameScene.showTipsItemRender(i.player.functionModule.getFuncConditionStringById(i.constant.MAIN_FUNCTION_RANK_WORLD)))},onClickClose:function(){this.clearRankView(),this.closePage()},onClickShare:function(){i.player.commonModule.addShareStartCount(i.constant.SHARE_TYPE_RANK),i.ttAdManager.wxShare()},clearRankView:function(){this.selfRankNode.active=!1,this.timeLabel.node.active=!1,this.isShowTimeLabel=!1,this.clearView()},updateRankList:function(e){console.log("updateRankList"),i.config.needSDKUid&&wx&&wx.getOpenDataContext&&(this.syncMyOpenId(),this.syncShareData(),this.syncServiceData(),wx.getOpenDataContext().postMessage({message:"updateRankList",score:e}))},syncServiceData:function(){i.config.needSDKUid&&wx.getOpenDataContext().postMessage({message:"syncServiceData",gameId:i.config.gameType+"",account:i.player.playerModule.getPlayerId()+"",isEncry:i.config.httpDataEncry,cryptoK:i.player.getCryptoK(),cryptoIv:i.player.getCryptoIv(),httpServiceUrl:i.config.httpServiceUrl})},syncMyOpenId:function(){i.config.needSDKUid&&wx.getOpenDataContext().postMessage({message:"syncMyOpenId",openId:i.nativeManager._webDeviceId})},syncShareData:function(){i.config.needSDKUid&&(i.ttAdManager.randomShareData(),wx.getOpenDataContext().postMessage({message:"syncShareData",share_title:i.nativeManager.share_title,share_image:i.nativeManager.share_image,share_imageUrlId:i.nativeManager.share_imageUrlId}))},onClickLeft:function(){console.log("onClickLeft"),i.config.needSDKUid&&wx.getOpenDataContext().postMessage({message:"clickLeft"})},onClickRight:function(){console.log("onClickRight"),i.config.needSDKUid&&wx.getOpenDataContext().postMessage({message:"clickRight"})},beforeUpdate:function(e){var t;0<this.limitClickTime&&(this.limitClickTime-=e),this._updateInterval+=e,this._updateInterval<.5||(this._updateInterval=0,t=i.player.commonModule._lastUpdateTime+1e3*this._reloadRankInterval-i.timeUtil.getTime(),e=i.timeUtil.secondFormat(Math.max(0,t)/1e3),i.lang.updateLabelString(this.timeLabel,[e]),e=this.isShowTimeLabel&&this.rankBigType!=i.constant.rankBigType.FRIEND,this.timeLabel.node.active=e,t<0&&!this.getting&&(this.clearRankView(),i.player.commonModule.rankDataMap[i.constant.rankBigType.AREA]&&(this.getRankList(i.constant.rankBigType.AREA,i.constant.rankType.INSTANCE,!0),this.getRankList(i.constant.rankBigType.AREA,i.constant.rankType.STAR,!0)),i.player.commonModule.rankDataMap[i.constant.rankBigType.WORLD]&&(this.getRankList(i.constant.rankBigType.WORLD,i.constant.rankType.INSTANCE,!0),this.getRankList(i.constant.rankBigType.WORLD,i.constant.rankType.STAR,!0))))}}),cc._RF.pop()},{}],RenamePage:[function(e,t){"use strict";cc._RF.push(t,"b4717zxSYRBuqh+kOxftMjj","RenamePage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{},onLoadPage:function(){this.editBox=cc.find("content/editBox",this.node).getComponent("cc.EditBox"),this.tipLabel=cc.find("content/label",this.node).getComponent(cc.Label)},showPageBegan:function(){this.initData()},initData:function(){this.maxLength=i.templateManager.getGameParamValue("nameMaxLength"),i.lang.updateLabelString(this.tipLabel,[this.maxLength,2*this.maxLength]),this.editBox.string="",this.editBox.placeholder=i.lang.getGameText(i.GameTextCode.PLEASE_ENTER_HERE)},onClickOK:function(){var e;this.playerName=this.editBox.string,i.Utils.getStrCharLength(this.playerName)<=0?(e=i.lang.getGameText(i.GameTextCode.PLEASE_ENTER_HERE),i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,e)):i.Utils.getStrCharLength(this.playerName)>2*this.maxLength?(e=i.lang.getFormatString(i.GameTextCode.MAX_ENTER_CHARACTER,[this.maxLength,2*this.maxLength]),i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,e)):this.checkNameStr()&&(i.player.playerModule.setNickName(this.playerName),i.eventBus.dispatchEvent(i.GameEventType.SET_UPDATE_NAME),i.soundsUtil.playSoundEffect("common_button_click"),this.closePage())},beginEditing:function(){this.editBox.placeholder=""},endEditing:function(){this.editBox.placeholder=i.lang.getGameText(i.GameTextCode.PLEASE_ENTER_HERE)},checkNameStr:function(){if(!i.Utils.checkIlligleChar(this.playerName)){var e=i.lang.getGameText(i.GameTextCode.ILLEGAL_CHARACTER);return i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,e),!1}return i.Utils.sensitiveTest(this.playerName,i.templateManager.getMaskWordList())==this.playerName||(e=i.lang.getGameText(i.GameTextCode.MASK_WORD),i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,e),!1)}}),cc._RF.pop()},{}],RoleIconItemRender:[function(e,t){"use strict";cc._RF.push(t,"5e136RycSBDaYAy7ORWo1mh","RoleIconItemRender");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{iconAtlas:{type:cc.SpriteAtlas,default:null}},afterLoad:function(){this.iconSprite=cc.find("roleHead",this.node).getComponent(cc.Sprite),this.bgSprite=cc.find("bg",this.node).getComponent(cc.Sprite),this.chooseNode=cc.find("choose",this.node)},initData:function(e){var t,a;this.headId=e,this.headCfg=i.templateManager.getHeadDataById(e),this.headCfg?(this.heroId=this.headCfg.relationId,this.heroData=i.templateManager.getHeroDataById(this.heroId),this.heroData?(this.node.active||(this.node.active=!0),t=this.iconAtlas.getSpriteFrame(this.heroData.heroHead),a=this.node.height,e=t.getOriginalSize().height,this.iconSprite.spriteFrame=t,this.iconSprite.node.y=e<=a?0:(e-a)/2+5,this.updateChoose(),this.updateUnlock()):this.node.active=!1):this.node.active=!1},updateUnlock:function(){i.player.heroModule.isHeroUnlock(this.heroId)||this.heroId===i.templateManager.getGameParamValue("defaultHead")||i.player.itemModule.isUnlockHead(this.heroId)?(this.iconSprite.setMaterial(0,cc.MaterialVariant.createWithBuiltin("2d-sprite",this.iconSprite)),this.bgSprite.setMaterial(0,cc.MaterialVariant.createWithBuiltin("2d-sprite",this.bgSprite))):(this.iconSprite.setMaterial(0,cc.MaterialVariant.createWithBuiltin("2d-gray-sprite",this.iconSprite)),this.bgSprite.setMaterial(0,cc.MaterialVariant.createWithBuiltin("2d-gray-sprite",this.bgSprite)))},updateChoose:function(){this.heroId===this.host.curSelectHeroId?this.chooseNode.active=!0:this.chooseNode.active=!1},setHost:function(e){this.host=e},onClickChoose:function(){var e;i.player.heroModule.isHeroUnlock(this.heroId)||this.heroId===i.templateManager.getGameParamValue("defaultHead")||i.player.itemModule.isUnlockHead(this.heroId)?(this.host.setCurIcon(this.heroId),this.host.updateAllUnlock()):(e=i.lang.getFormatString(this.headCfg.unlockDesc,[i.lang.getGameText(this.heroData.name)]),i.gameScene.showTipsItemRender(e))}}),cc._RF.pop()},{}],RoleIconPage:[function(e,t){"use strict";cc._RF.push(t,"09489bzXMNITbSyypCCrxwQ","RoleIconPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{iconItemRenderPrefab:{type:cc.Prefab,default:null}},onLoadPage:function(){this.unlockedLayout=cc.find("content/ScrollView/view/content/unlockLayout",this.node),this.lockedLayout=cc.find("content/ScrollView/view/content/lockedLayout",this.node),this.lockLineNode=cc.find("content/ScrollView/view/content/lockedHeadTitleLayout",this.node),this.unlockItems=[],this.lockItems=[]},registerGameListener:function(){},showPageBegan:function(){this.initData()},initData:function(){this.curSelectHeroId=i.player.playerModule.getIcon(),this.getIconList(),this.initUnlockIcon(),this.initLockIcon()},initUnlockIcon:function(){for(var e=0,t=0;t<this.unlockList.length;t++){var i=this.unlockList[t];this.unlockItems.length<=e&&(a=cc.instantiate(this.iconItemRenderPrefab),this.unlockedLayout.addChild(a),this.unlockItems.push(a));var a=this.unlockItems[e].getComponent("RoleIconItemRender");a.setHost(this),a.initData(i),e++}},initLockIcon:function(){for(var e=0,t=0;t<this.lockList.length;t++){var i=this.lockList[t];this.lockItems.length<=e&&(a=cc.instantiate(this.iconItemRenderPrefab),this.lockedLayout.addChild(a),this.lockItems.push(a));var a=this.lockItems[e].getComponent("RoleIconItemRender");a.setHost(this),a.initData(i),e++}if(this.lockItems.length>e)for(var n=this.lockItems.length-e,o=0;o<n;o++){var s=this.lockItems.length-1;this.lockItems[s].removeFromParent(),this.lockItems.splice(s,1)}0===e&&(this.lockLineNode.active=!1)},getIconList:function(){this.unlockList=[],this.lockList=[];for(var e=0;e<i.JsonData.Head.length;e++){var t,a=i.JsonData.Head[e].id,n=i.JsonData.Head[e].relationId;!i.JsonData.Head[e].isShow||(t=i.templateManager.getHeroDataById(n))&&t.isComingSoon!==i.constant.HERO_TYPE_COMING&&(i.player.heroModule.isHeroUnlock(n)||n===i.templateManager.getGameParamValue("defaultHead")||i.player.itemModule.isUnlockHead(n)?this.unlockList:this.lockList).push(a)}},updateAllUnlock:function(){for(var e=0;e<this.unlockItems.length;e++)this.unlockItems[e].getComponent("RoleIconItemRender").updateChoose()},setCurIcon:function(e){this.curSelectHeroId=e},onClickOk:function(){this.curSelectHeroId!==i.player.playerModule.getIcon()&&(i.player.playerModule.setIcon(this.curSelectHeroId),i.player.serviceModule.updateAlliancePlayerInfo(function(){},function(){})),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_ROLE_ICON),this.closePage()}}),cc._RF.pop()},{}],RoleInfoPage:[function(e,t){"use strict";cc._RF.push(t,"6ececwA2hFGhK32mSR7Tm+d","RoleInfoPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{iconAtlas:{type:cc.SpriteAtlas,default:null}},onLoadPage:function(){this.iconSprite=cc.find("content/role/roleHead",this.node).getComponent(cc.Sprite),this.iconBgNode=cc.find("content/role/bg",this.node),this.levelLabel=cc.find("content/role/level/label",this.node).getComponent(cc.Label),this.nameLabel=cc.find("content/nameLayout/name",this.node).getComponent(cc.Label),this.officialLabel=cc.find("content/officialPositionLayout/name",this.node).getComponent(cc.Label),this.expProgress=cc.find("content/battleGainsLayout/progressBar",this.node),this.expProgressBar=this.expProgress.getComponent(cc.ProgressBar),this.expLabel=cc.find("name",this.expProgress).getComponent(cc.Label),this.curOfficialNode=cc.find("content/officialPosition/contentLayout/curContent",this.node),this.nextOfficialNode=cc.find("content/officialPosition/contentLayout/nextContent",this.node),this.curGoldSpeedLabel=cc.find("goldLayoutCurrent/iconLayout/number",this.curOfficialNode).getComponent(cc.Label),this.curExpSpeedLabel=cc.find("expLayoutCurrent/iconLayout/number",this.curOfficialNode).getComponent(cc.Label),this.curOfficialNameLabel=cc.find("current",this.curOfficialNode).getComponent(cc.Label),this.nextOfficialNameLabel=cc.find("next",this.nextOfficialNode).getComponent(cc.Label),this.nextGoldSpeedLabel=cc.find("goldLayoutNext/iconLayout/number",this.nextOfficialNode).getComponent(cc.Label),this.nextExpSpeedLabel=cc.find("expLayoutNext/iconLayout/number",this.nextOfficialNode).getComponent(cc.Label)},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.UPDATE_ROLE_ICON,function(){return e.updateIcon()}),this.registerListener(i.GameEventType.SET_UPDATE_NAME,function(t){return e.updateName(t)})},showPageBegan:function(){this.initData()},initData:function(){this.level=i.player.playerModule.getPlayerLevel(),this.levelData=i.templateManager.getPlayerLevelDataByLevel(this.level),this.levelLabel.string=i.player.playerModule.getPlayerLevel(),this.nameLabel.string=i.player.playerModule.getNickName(),this.officialLabel.string=i.lang.getGameText(this.levelData.office),i.lang.updateLabelString(this.curOfficialNameLabel,[i.lang.getGameText(this.levelData.office)]),this.exp=i.player.playerModule.getPlayerExp(),this.maxExp=this.levelData.exp,this.expProgressBar.progress=this.exp/this.maxExp,i.lang.updateLabelString(this.expLabel,[i.Utils.formatBigNumberForLabel(this.exp),i.Utils.formatBigNumberForLabel(this.maxExp)]),this.nextLevelData=i.templateManager.getPlayerLevelDataByLevel(this.level+1);var e=new i.BigNumber(this.levelData.offlineCoin).times(3600).toFixed(0);i.lang.updateLabelString(this.curGoldSpeedLabel,[i.Utils.formatBigNumberForLabel(e)]),e=new i.BigNumber(this.levelData.offlineHeroExp).times(3600).toFixed(0),i.lang.updateLabelString(this.curExpSpeedLabel,[i.Utils.formatBigNumberForLabel(e)]),this.nextLevelData?(i.lang.updateLabelString(this.nextOfficialNameLabel,[i.lang.getGameText(this.nextLevelData.office)]),this.nextOfficialNode.active=!0,e=new i.BigNumber(this.nextLevelData.offlineCoin).times(3600).toFixed(0),i.lang.updateLabelString(this.nextGoldSpeedLabel,[i.Utils.formatBigNumberForLabel(e)]),e=new i.BigNumber(this.nextLevelData.offlineHeroExp).times(3600).toFixed(0),i.lang.updateLabelString(this.nextExpSpeedLabel,[i.Utils.formatBigNumberForLabel(e)])):this.nextOfficialNode.active=!1,this.updateIcon()},updateName:function(){this.nameLabel.string=i.player.playerModule.getNickName()},updateIcon:function(){var e,t,a=i.templateManager.getHeroDataById(i.player.playerModule.getIcon());a&&(e=this.iconAtlas.getSpriteFrame(a.heroHead),t=this.iconBgNode.height,a=e.getOriginalSize().height,this.iconSprite.spriteFrame=e,this.iconSprite.node.y=a<=t?0:(a-t)/2+5)},onClickChangeIcon:function(){i.gameScene.showPage(i.pageConstant.PAGE_TYPE_ROLE_ICON)},onClickChangeName:function(){i.soundsUtil.playSoundEffect("common_button_click"),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_RENAME,{})}}),cc._RF.pop()},{}],SecondHeroChoosePopUp:[function(e,t){"use strict";cc._RF.push(t,"b2baezc+Q9PEa2Z35yk/PAh","SecondHeroChoosePopUp");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{itemRenderPrefab:{default:null,type:cc.Prefab}},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.UPDATE_HERO_CHOOSE_INFO,function(){return e.updateItem()})},onLoadPage:function(){this.confirmButton=cc.find("content/confirmButton",this.node).getComponent(cc.Button),this.heroLayoutNode=cc.find("content/scrollView/view/content",this.node),this.itemObjList=[]},showPageBegan:function(){this.initItem(),this.heroLayoutNode.getComponent(cc.Layout).updateLayout(),this.chooseOneHero(0),this.confirmButton.interactable=!1},initItem:function(){for(var e=i.player.heroModule,t=i.player.heroModule.getAllUnlockList(),a=[],n=0;n<i.battleScene.gameHeroObjList.length;n++)a.push(i.battleScene.gameHeroObjList[n].soldierId);for(var o=[],s=0;s<t.length;s++){var r,c=t[s];a.indexOf(c)<0&&(r=1e10*e.getHeroQuality(c)+1e7*e.getHeroStarLevel(c)+1e4*e.getHeroLevel(c),o.push([r,c]))}if(o.sort(function(e,t){return t[0]-e[0]}),this.canBattleHeroIdList=o,this.itemObjList){if(this.itemObjList.length>o.length)for(var l=o.length;l<this.itemObjList.length;l++)this.itemObjList[l].node.active=!1}else this.itemObjList=[];for(var d,h=0;h<o.length;h++)this.itemObjList.length>h?this.itemObjList[h].initData(this,i.constant.HERO_ITEM_TYPE_SECOND_CHOOSE,o[h][1],1):(d=cc.instantiate(this.itemRenderPrefab),this.heroLayoutNode.addChild(d),d.scale=.66,d=d.getComponent("MainHeroItemRender"),this.itemObjList.push(d),d.initData(this,i.constant.HERO_ITEM_TYPE_SECOND_CHOOSE,o[h][1],1))},updateItem:function(){for(var e=0;e<this.itemObjList.length;e++){var t=i.player.heroModule.getBattleHeroByIndex(e);this.itemObjList[e].initData(this,i.constant.HERO_ITEM_TYPE_SECOND_CHOOSE,t,1)}},onClickConfirm:function(){var e,t,a;i.Logger.debug("onClickConfirm this.curChooseHeroId = "+this.curChooseHeroId),this.closeThisPage(),this.curChooseHeroId&&(t=i.battleScene.gameMapObj.mapHeroList[2],e=cc.v2(t.x-320,t.y-568),a=cc.v2(i.battleScene.gameMapObj.endPointData.x-320,i.battleScene.gameMapObj.endPointData.y-568),t=i.battleScene.gameHeroObjList.length,a=i.battleScene.createHero(this.curChooseHeroId,t,a),i.battleScene.gameBattleUIObj.createHeroHead(a,t),a.moveToTargetPos(e))},onClickClose:function(){i.Logger.debug("onClickClose"),this.closeThisPage()},closeThisPage:function(){var e=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_SECOND_HERO_CONFIRM);e&&e.closeThisPage(),this.closePage(),i.battleScene.restoreBattleSpeedPercent()},chooseOneHero:function(e){this.curChooseHeroId=e;for(var t=0;t<this.canBattleHeroIdList.length;t++){var i=this.itemObjList[t]._heroId==this.curChooseHeroId;this.itemObjList[t].chooseNode.active=i,this.itemObjList[t].blackNode.active=i}this.confirmButton.interactable=!0}}),cc._RF.pop()},{}],SecondHeroConfirmPopUp:[function(e,t){"use strict";cc._RF.push(t,"65d14xSdR9HYKQ0LzfHW978","SecondHeroConfirmPopUp");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{},onLoadPage:function(){this.cancelButton=cc.find("buttonLayout/cancelButton",this.node).getComponent(cc.Button),this.confirmButton=cc.find("buttonLayout/confirmButton",this.node).getComponent(cc.Button)},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.SHOW_AD_OVER_SECOND_HERO,function(){return e.showAdOver()})},showPageBegan:function(){this.initData()},initData:function(){i.battleScene.revertBattleSpeedPercent(),this.cancelButton.node.active=!1,this.showCancelButtonTime=2},onClickCancel:function(){i.Logger.debug("onClickCancel"),this.closeThisPage(),i.battleScene.restoreBattleSpeedPercent()},onClickConfirm:function(){i.Logger.debug("onClickConfirm"),i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,i.GameEventType.SHOW_AD_OVER_SECOND_HERO)},showAdOver:function(){i.gameScene.showPage(i.pageConstant.PAGE_TYPE_SECOND_HERO_CHOOSE)},closeThisPage:function(){this.closePage(),i.battleScene.gameBattleUIObj.playInstanceTipAnim()},update:function(e){0<this.showCancelButtonTime&&(this.showCancelButtonTime-=e,this.showCancelButtonTime<=0&&(this.cancelButton.node.active=!0))}}),cc._RF.pop()},{}],ServiceModule:[function(e,t){"use strict";cc._RF.push(t,"7b9deTOxDVD9rW7mY6Eh+KE","ServiceModule");var i=e("Aft");cc.Class({extends:i.BaseHandler,properties:{httpServiceUrl:"http://192.168.1.192:8008",_ivPart:"hHfd3",_kPart:"Ge24h"},init:function(e){this.player=e},restoreData:function(){},loadData:function(){},checkEncryData:function(e){return i.config.httpDataEncry?i.Utils.stringDecrypt(i.player.getCryptoK(),e,i.player.getCryptoIv()):e},saveGameData:function(){},getGameData:function(e,t){t(null)},sendFeedBack:function(){},putLeaderboard:function(){},getLeaderboard:function(e,t){t(null)},getServerTime:function(e){e([{result:Date.now()}])},useGiftCode:function(e,t){t(null)},isPlayerLocked:function(e){e([{result:"no"}])},isGameLocked:function(e){e(null)},getServerGameParams:function(e,t){t(null)},getServerGameParamList:function(e,t){t(null)},getMiniMail:function(e){e(null)},setMiniReadMail:function(e,t){t(null)},deleteMiniMail:function(e,t){t(null)},rewardMiniMail:function(e,t){t(null)},putBroadCast:function(e,t){t(null)},getBroadCast:function(e){e({status:1,list:[]})},setFriendInvitation:function(e,t){t(null)},setFriendInvitationNumber:function(e,t){t(null)},getFriendInvitation:function(e){e({status:1,number:0})},getFriendGift:function(e){e(null)},setFriendGift:function(e,t){t(null)},receiveFriendGift:function(e){e(null)},sendWxSub:function(e,t,i,a,n,o){o(null)},getWxServicePushPower:function(e,t,i){i(null)},getPlayerAlliance:function(e){e({})},joinPlayerAlliance:function(e,t){t(null)},addAllianceCp:function(e,t,i,a,n){n(null)},receiveAllianceRed:function(e,t,i,a){a(null)},receiveAllianceRedRatio:function(e,t,i,a,n){n(null)},getAllianceReceiveRedList:function(e,t,i){i(null)},exitAlliance:function(e,t){t(null)},kickOutAlliance:function(e,t,i){i(null)},getAllianceAllMember:function(e,t){t(null)},getAllianceRank:function(e,t){t(null)},updateAlliancePlayerInfo:function(e,t){t(null)},clearDataExitAlliance:function(e,t){t(null)}}),cc._RF.pop()},{}],SettingModule:[function(e,t){"use strict";cc._RF.push(t,"b2e641czIFAzKtA4j15sAB1","SettingModule");var i=e("Aft");cc.Class({extends:i.BaseHandler,init:function(e){this.player=e;var t=i.StorageUtil.getData(i.constant.SAVE_SETTING_DATA);t||(this.player.saveGameData(i.constant.SAVE_SETTING_DATA,e={musicIsOpen:!0,soundIsOpen:!0,shakeIsOpen:!0}),t=JSON.stringify(e)),i.Logger.debug("init setting data  :",t),this.player._gameData.settingData=JSON.parse(t)},getSettingData:function(){return this.player._gameData.settingData},loadData:function(){},restoreData:function(e){e&&e.settingData&&(i.StorageUtil.save(i.constant.SAVE_SETTING_DATA,e.settingData,!0),i.Logger.debug("restoreData data  settingData :",JSON.stringify(e.settingData)))},saveSettingData:function(){this.player.saveGameData(i.constant.SAVE_SETTING_DATA,this.getSettingData())},getMusicIsOpen:function(){return this.getSettingData().musicIsOpen},setMusicIsOpen:function(){this.getSettingData().musicIsOpen=!this.getSettingData().musicIsOpen,this.saveSettingData(),i.soundsUtil.setMusicEnabled(this.getSettingData().musicIsOpen)},getSoundIsOpen:function(){return this.getSettingData().soundIsOpen},setSoundIsOpen:function(){this.getSettingData().soundIsOpen=!this.getSettingData().soundIsOpen,this.saveSettingData(),i.soundsUtil.setEffectEnabled(this.getSettingData().soundIsOpen)},getShakeIsOpen:function(){return this.getSettingData().shakeIsOpen},setShakeIsOpen:function(){this.getSettingData().shakeIsOpen=!this.getSettingData().shakeIsOpen,this.saveSettingData()}}),cc._RF.pop()},{}],SettingPage:[function(e,t){"use strict";cc._RF.push(t,"0d0b7k1bFVIiqObIPyb6Rv9","SettingPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{},onLoadPage:function(){this.soundNode=cc.find("content/set/sound/switch",this.node),this.musicNode=cc.find("content/set/music/switch",this.node),this.shakeNode=cc.find("content/set/shake/switch",this.node),this.shakeButtonNode=cc.find("content/set/shake",this.node),this.idLable=cc.find("content/label",this.node).getComponent(cc.Label),this.nameLabel=cc.find("content/layout/nameButton/background/label",this.node).getComponent(cc.Label),this.gameLable=cc.find("content/gameInfoLabel",this.node).getComponent(cc.Label),this.groupLayoutNode=cc.find("content/groupLayout",this.node),this.qqLabel=cc.find("group",this.groupLayoutNode).getComponent(cc.Label),this.qqButtonNode=cc.find("copyButton",this.groupLayoutNode)},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.SET_UPDATE_NAME,function(t){return e.updateName(t)}),this.registerListener(i.GameEventType.SET_UPDATE_LANGUAGE,function(t){return e.initData(t)})},showPageBegan:function(){this.initData()},initData:function(){i.config.shakeOpen||(this.shakeButtonNode.active=!1),this.groupLayoutNode.active=!0,this.qqButtonNode.active=i.player.commonModule.getIsShowJoinQQ(),i.lang.updateLabelString(this.idLable,[i.player.playerModule.getPlayerId()]),i.lang.updateLabelString(this.qqLabel,[i.player.commonModule.getJoinQQGroupNumber()]),this.gameLable.string=i.player.playerModule.getGameInfoStr(),this.updateName(),this.updateSoundNode(),this.updateMusicNode(),this.updateShakeNode()},updateName:function(){i.lang.updateLabelString(this.nameLabel,[i.player.playerModule.getNickName()])},updateSoundNode:function(){this.turnNode(i.player.settingModule.getSoundIsOpen(),this.soundNode)},updateMusicNode:function(){this.turnNode(i.player.settingModule.getMusicIsOpen(),this.musicNode)},updateShakeNode:function(){this.turnNode(i.player.settingModule.getShakeIsOpen(),this.shakeNode)},onClickMusic:function(){i.player.settingModule.setMusicIsOpen(),this.updateMusicNode(),i.soundsUtil.playSoundEffect("common_button_click")},onClickSound:function(){i.player.settingModule.setSoundIsOpen(),this.updateSoundNode(),i.soundsUtil.playSoundEffect("common_button_click")},onClickShake:function(){i.player.settingModule.setShakeIsOpen(),this.updateShakeNode(),i.soundsUtil.playSoundEffect("common_button_click")},onClickName:function(){i.soundsUtil.playSoundEffect("common_button_click"),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_RENAME,{})},onClickFeedBack:function(){i.soundsUtil.playSoundEffect("common_button_click"),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_FEEDBACK,{})},onClickLanguage:function(){i.soundsUtil.playSoundEffect("common_button_click"),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_LANGUAGE,{})},onClickGiftCode:function(){i.soundsUtil.playSoundEffect("common_button_click"),this.closePage(),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_GIFT_CODE,{})},onClickCopyQQ:function(){i.soundsUtil.playSoundEffect("common_button_click"),i.oneClickEnterGroupManager.copyQQGroup()},onClickClearAccount:function(){i.soundsUtil.playSoundEffect("common_button_click"),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_CLEAR_ACCOUNT)},turnNode:function(e,t){var i=cc.find("icon",t);t=cc.find("open",t),e?(t.active=!0,i.x=22):(t.active=!1,i.x=-22)}}),cc._RF.pop()},{}],ShopExpNode:[function(e,t){"use strict";cc._RF.push(t,"42394wT/oRPsrJMBDVg0B/v","ShopExpNode");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{shopAtlas:{default:null,type:cc.SpriteAtlas}},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.SHOW_AD_OVER_SHOP_EXP,function(){e._type==i.constant.SHOP_EXP_TYPE_AD&&e.onShowAdOver()}),this.registerListener(i.GameEventType.REFRESH_SHOP_INFO,function(){e._type==i.constant.SHOP_SILVER_TYPE_AD&&e.initData(e._type)})},afterLoad:function(){this.clickButton=cc.find("button",this.node).getComponent(cc.Button),this.cardNode=cc.find("button/Background/card",this.node),this.nameLabel=cc.find("tips",this.cardNode).getComponent(cc.Label),this.imgIconSprite=cc.find("icon",this.cardNode).getComponent(cc.Sprite),this.numberLabel=cc.find("number",this.cardNode).getComponent(cc.Label),this.timesLabel=cc.find("times",this.cardNode).getComponent(cc.Label),this.goldLayoutNode=cc.find("goldLayout",this.cardNode),this.goldLayoutLabel=cc.find("label",this.goldLayoutNode).getComponent(cc.Label),this.adIconNode=cc.find("adIcon",this.goldLayoutNode),this.iconNode=cc.find("icon",this.goldLayoutNode),this.cdNode=cc.find("cd",this.cardNode),this.cdTimeLabel=cc.find("time",this.cdNode).getComponent(cc.Label),this.vipLayoutNode=cc.find("vipLayout",this.cardNode),this.vipIconSprite=cc.find("icon",this.vipLayoutNode).getComponent(cc.Sprite),this.vipTimesLabel=cc.find("label2",this.vipLayoutNode).getComponent(cc.Label),this.redPointNode=cc.find("redPoint",this.cardNode),this.redPointNode.active=!1},initData:function(e){this._type=e,this.costNum=0,this.expNum=new i.BigNumber(0);var t=i.templateManager.getGameParamValue("shopHeroExpList"),a=i.player.commonModule.getHangUpReceiveExp(3600);this.adIconNode.active=this._type==i.constant.SHOP_SILVER_TYPE_AD,this.iconNode.active=this._type!=i.constant.SHOP_SILVER_TYPE_AD;var n=i.lang.getGameText(i.GameTextCode[1365]);e="Shop_Exp_Icon1",this._type==i.constant.SHOP_EXP_TYPE_ONE?(this.costNum=t[0][1],this.expNum=a.times(t[0][0]),n=i.lang.getGameText(i.GameTextCode[1366]),e="Shop_Exp_Icon2"):this._type==i.constant.SHOP_EXP_TYPE_TWO?(this.costNum=t[1][1],this.expNum=a.times(t[1][0]),n=i.lang.getGameText(i.GameTextCode[1367]),e="Shop_Exp_Icon3"):this._type==i.constant.SHOP_EXP_TYPE_AD&&(this.expNum=a.times(i.templateManager.getGameParamValue("shopAdsHeroExpNum")/1e4)),this.nameLabel.string=n,this.imgIconSprite.spriteFrame=this.shopAtlas.getSpriteFrame(e),this.updateNodeInfo(!0),this.updateVipNode()},updateNodeInfo:function(e){this.numberLabel.string=i.Utils.formatBigNumberForLabel(this.expNum.toFixed(0)),this._type==i.constant.SHOP_EXP_TYPE_AD?(this.timesLabel.node.active=!0,i.lang.updateLabelString(this.timesLabel,[i.player.shopModule.getTodayCanExpTimes()]),this.updateCdInfo(e)):(this.timesLabel.node.active=!1,this.goldLayoutLabel.string=this.costNum,this.cdNode.active=!1)},updateVipNode:function(){var e;this._type==i.constant.SHOP_SILVER_TYPE_AD&&(e=i.player.vipModule.getNextVipChangeCfg(i.constant.VIP_PRIVILEGE_TYPE_SHOP_EXP))?(this.vipLayoutNode.active=!0,this.vipIconSprite.spriteFrame=this.host.vipAtlas.getSpriteFrame(e.vipIconSmall),i.lang.updateLabelString(this.vipTimesLabel,[e.shopHeroExpNum[1]])):this.vipLayoutNode.active=!1},updateCdInfo:function(){this.nextSecond=i.player.shopModule.getNextReceiveExpSecond(),0<this.nextSecond?(this.clickButton.interactable&&(this.clickButton.interactable=!1),this.cdNode.active||(this.cdNode.active=!0),this.cdTimeLabel.string=i.timeUtil.secondFormat(this.nextSecond)):(this.clickButton.interactable||(this.clickButton.interactable=!0),this.cdNode.active&&(this.cdNode.active=!1)),this.checkRedPoint()},checkRedPoint:function(){this._type!=i.constant.SHOP_EXP_TYPE_AD||this.cdNode.active?this.redPointNode.active&&(this.redPointNode.active=!1):this.redPointNode.active||(this.redPointNode.active=!0,i.gameScene.redNodeAction(this.redPointNode))},onClick:function(){var e;this._type!=i.constant.SHOP_EXP_TYPE_AD?i.player.playerModule.isGoldBullionEnough(this.costNum)?i.player.playerModule.costGoldBullionNum(this.costNum,i.constant.ITEM_CONSUME_SOURCE_SHOP_BUY_EXP)&&(i.player.itemModule.dropItem(i.constant.COIN_TYPE_HERO_EXP,this.expNum,!0,i.constant.ITEM_ADD_SOURCE_SHOP),i.BI.onEvent(i.biConstant.EVENT_TYPE_DIAMOND_CONSUME,i.biConstant.EVENT_ID_DIAMOND_SHOP_HERO_EXP,this.costNum)):(e=i.lang.getGameText(i.GameTextCode.ENOUGH_DIAMONDS),i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,e)):i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,i.GameEventType.SHOW_AD_OVER_SHOP_EXP)},onShowAdOver:function(){i.player.shopModule.addTodayExpTimes(),i.player.itemModule.dropItem(i.constant.COIN_TYPE_HERO_EXP,this.expNum,!0,i.constant.ITEM_ADD_SOURCE_SHOP),this.updateNodeInfo()},updateHeart:function(){this._type==i.constant.SHOP_EXP_TYPE_AD&&this.updateCdInfo()}}),cc._RF.pop()},{}],ShopFreeNode:[function(e,t){"use strict";cc._RF.push(t,"68c0eBKDwNLaaIiPAUBVjqU","ShopFreeNode");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.SHOW_AD_OVER_SHOP_GOLD,function(){e._type===i.constant.SHOP_FREE_TYPE_GOLD&&e.onShowAdOver()}),this.registerListener(i.GameEventType.SHOW_AD_OVER_SHOP_PIECE,function(){e._type===i.constant.SHOP_FREE_TYPE_PIECE&&e.onShowAdOver()})},afterLoad:function(){this.cardNode=cc.find("button/Background/card",this.node),this.clickButton=cc.find("button",this.cardNode),this.rewardLabel=cc.find("rewardLabel",this.cardNode).getComponent(cc.Label),this.timesLabel=cc.find("times",this.cardNode).getComponent(cc.Label),this.adLayoutNode=cc.find("adLayout",this.cardNode),this.cdNode=cc.find("cd",this.cardNode),this.cdTimeLabel=cc.find("time",this.cdNode).getComponent(cc.Label),this.vipLayoutNode=cc.find("vipLayout",this.cardNode),this.vipIconSprite=cc.find("icon",this.vipLayoutNode).getComponent(cc.Sprite),this.vipTimesLabel=cc.find("label2",this.vipLayoutNode).getComponent(cc.Label),this.lockLabel=cc.find("lockLabel",this.cardNode).getComponent(cc.Label),this.redPointNode=cc.find("redPoint",this.cardNode),this.redPointNode.active=!1},initData:function(e){this._type=e,this.updateAllNode(),this.updateVipNode()},updateAllNode:function(){this.shopAdsRewardList=[0,0],this.todayCanTimes=0,this._type===i.constant.SHOP_FREE_TYPE_GOLD?(this.shopAdsRewardList=i.templateManager.getGameParamValue("shopAdsDiamondNum"),this.todayCanTimes=i.player.shopModule.getTodayCanGoldTimes(),this.lockLabel.node.active=!1):this._type===i.constant.SHOP_FREE_TYPE_PIECE&&(this.shopAdsRewardList=i.templateManager.getGameParamValue("skillCardNumList"),this.todayCanTimes=i.player.shopModule.getTodayCanPieceTimes(),this.lockLabel.string=i.player.functionModule.getFuncConditionStringById(i.constant.MAIN_FUNCTION_SHOP_PIECE,i.GameTextCode.UNLOCK_BY_INSTANCE_BASE),i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_SHOP_PIECE)?(this.timesLabel.node.active=!0,this.adLayoutNode.active=!0,this.lockLabel.node.active=!1):(this.timesLabel.node.active=!1,this.adLayoutNode.active=!1,this.lockLabel.node.active=!0),this.lockLabel.node.active=!i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_SHOP_PIECE)),this.updateCdInfo();var e=this.shopAdsRewardList.join(" - ");i.lang.updateLabelString(this.rewardLabel,[e]),i.lang.updateLabelString(this.timesLabel,[this.todayCanTimes])},updateVipNode:function(){var e=i.constant.VIP_PRIVILEGE_TYPE_SHOP_COIN;this._type===i.constant.SHOP_FREE_TYPE_PIECE&&(e=i.constant.VIP_PRIVILEGE_TYPE_SKILL_CARD),(e=i.player.vipModule.getNextVipChangeCfg(e))?(this.vipLayoutNode.active=!0,this.vipIconSprite.spriteFrame=this.host.vipAtlas.getSpriteFrame(e.vipIconSmall),e=(this._type===i.constant.SHOP_FREE_TYPE_PIECE?e.shopSkillCardNum:e.shopIngotNum)[1],i.lang.updateLabelString(this.vipTimesLabel,[e]),this._type===i.constant.SHOP_FREE_TYPE_PIECE&&this.lockLabel.node.active&&(this.vipLayoutNode.active=!1)):this.vipLayoutNode.active=!1},getNextSecond:function(){this.nextSecond=99999,this._type===i.constant.SHOP_FREE_TYPE_GOLD?this.nextSecond=i.player.shopModule.getNextReceiveGoldSecond():this._type===i.constant.SHOP_FREE_TYPE_PIECE&&(this.nextSecond=i.player.shopModule.getNextReceivePieceSecond())},updateCdInfo:function(){this.getNextSecond(),0<this.nextSecond?(this.cdNode.active||(this.cdNode.active=!0),this.cdTimeLabel.string=i.timeUtil.secondFormat(this.nextSecond)):this.cdNode.active&&(this.cdNode.active=!1),this.checkRedPoint()},checkRedPoint:function(){this.cdNode.active||this._type===i.constant.SHOP_FREE_TYPE_PIECE&&!i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_SHOP_PIECE)?this.redPointNode.active&&(this.redPointNode.active=!1):this.redPointNode.active||(this.redPointNode.active=!0,i.gameScene.redNodeAction(this.redPointNode))},onClick:function(){if(!(this.todayCanTimes<=0||this.cdNode.active)){var e="";if(this._type===i.constant.SHOP_FREE_TYPE_GOLD)e=i.GameEventType.SHOW_AD_OVER_SHOP_GOLD;else if(this._type===i.constant.SHOP_FREE_TYPE_PIECE){if(!i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_SHOP_PIECE))return void i.gameScene.showTipsItemRender(i.player.functionModule.getFuncConditionStringById(i.constant.MAIN_FUNCTION_SHOP_PIECE,i.GameTextCode.UNLOCK_BY_INSTANCE_BASE));e=i.GameEventType.SHOW_AD_OVER_SHOP_PIECE}i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,e)}},onShowAdOver:function(){var e=i.Utils.getRandomInt(this.shopAdsRewardList[0],this.shopAdsRewardList[1]);this._type===i.constant.SHOP_FREE_TYPE_GOLD?(i.player.shopModule.addTodayGoldTimes(),i.player.itemModule.dropItem(i.constant.COIN_TYPE_GOLD_BULLION,e,!0,i.constant.ITEM_ADD_SOURCE_SHOP),i.player.taskModule.onNewYearTaskEvent(i.constant.NEW_YEAR_TASK_TYPE_SHOP_DIAMOND,1),i.player.taskModule.onTaskEvent(i.constant.TASK_TYPE_AD_GET_DIAMOND,1)):this._type===i.constant.SHOP_FREE_TYPE_PIECE&&(i.player.shopModule.addTodayPieceTimes(),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_SHOP_REWARD,{rewards:i.player.shopModule.getSkillRewards(),isSkill:!0})),this.updateAllNode()},updateHeart:function(){this.updateCdInfo()}}),cc._RF.pop()},{}],ShopHeroTipsItemRender:[function(e,t){"use strict";cc._RF.push(t,"45b4dpIIWFK3KoB/9l6JyNG","ShopHeroTipsItemRender");var i=e("Aft");cc.Class({extends:cc.Component,properties:{nameLabel:cc.Label,percentLabel:cc.Label},init:function(e){var t=i.templateManager.getHeroDataById(e),a=i.templateManager.getHeroCardDataByHeroId(e);e=i.player.itemModule.getHeroPieceNumById(a.id),a=a.cardNum,this.nameLabel.string=i.lang.getGameText(t.name),i.lang.updateLabelString(this.percentLabel,[e=a<e?a:e,a])}}),cc._RF.pop()},{}],ShopHeroTips:[function(e,t){"use strict";cc._RF.push(t,"c3210tYSDpE8otKIyuLbQep","ShopHeroTips");var i=e("Aft");cc.Class({extends:cc.Component,properties:{heroTipsRenderPrefab:cc.Prefab,layoutNode:cc.Node},initData:function(){var e=i.player.heroModule.getLockHeroList();if(this.heroTipsList){if(this.heroTipsList.length>e.length)for(var t=this.heroTipsList.length-e.length,a=0;a<t;a++){var n=this.heroTipsList.pop();this.layoutNode.removeChild(n.node)}for(var o=0;o<e.length;o++)this.heroTipsList[o].init(e[o])}else{this.heroTipsList=[];for(var s=0;s<e.length;s++){var r=cc.instantiate(this.heroTipsRenderPrefab),c=r.getComponent("ShopHeroTipsItemRender");this.layoutNode.addChild(r),(c.host=this).heroTipsList.push(c),c.init(e[s])}this.checkPosition()}},checkPosition:function(){var e=this.layoutNode.convertToWorldSpaceAR(cc.v2(0,0)).x-this.layoutNode.width/2;e<0&&(this.layoutNode.x-=e-4)}}),cc._RF.pop()},{}],ShopModule:[function(e,t){"use strict";cc._RF.push(t,"a6792fTuA5D6ZsoS76NvGwR","ShopModule");var i=e("Aft");cc.Class({extends:i.BaseHandler,init:function(e){this.player=e;var t=i.StorageUtil.getData(i.constant.SAVE_SHOP_DATA);t||(this.player.saveGameData(i.constant.SAVE_SHOP_DATA,e={todayGoldTimes:0,lastReceiveGold:-1,todayPieceTimes:0,lastReceivePiece:-1,lastBoxTime:-1,boxAdTimes:0,todayBoxReceiveTimes:0,todaySilverTimes:0,lastReceiveSilver:-1,todayExpTimes:0,lastReceiveExp:-1,openBoxTimes:0,totalOpenBoxTimes:0,battleBoxBestRewardMap:{}}),t=JSON.stringify(e)),i.Logger.debug("init shop data  :",t),this.player._gameData.shopData=JSON.parse(t)},getShopData:function(){return this.player._gameData.shopData},loadData:function(){this.getShopData().todayBoxReceiveTimes||(this.getShopData().todayBoxReceiveTimes=0),this.getShopData().openBoxTimes||(this.getShopData().openBoxTimes=0),this.getShopData().totalOpenBoxTimes||(this.getShopData().totalOpenBoxTimes=0),this.getShopData().battleBoxBestRewardMap||(this.getShopData().battleBoxBestRewardMap={})},restoreData:function(e){e&&e.shopData&&(i.StorageUtil.save(i.constant.SAVE_SHOP_DATA,e.shopData,!0),i.Logger.debug("restoreData data  shopData :",JSON.stringify(e.shopData)))},saveShopData:function(e){this.player.saveGameData(i.constant.SAVE_SHOP_DATA,this.getShopData(),e)},resetShopData:function(){this.getShopData().todayGoldTimes=0,this.getShopData().lastReceiveGold=-1,this.getShopData().todayPieceTimes=0,this.getShopData().lastReceivePiece=-1,this.getShopData().todaySilverTimes=0,this.getShopData().lastReceiveSilver=-1,this.getShopData().todayExpTimes=0,this.getShopData().lastReceiveExp=-1,this.getShopData().lastBoxTime=-1,this.getShopData().boxAdTimes=0,this.getShopData().todayBoxReceiveTimes=0,i.eventBus.dispatchEvent(i.GameEventType.REFRESH_SHOP_INFO),this.saveShopData(!0)},getTodayGoldTimes:function(){return this.getShopData().todayGoldTimes},getTodayCanGoldTimes:function(){var e=i.player.vipModule.getCurVipCfg().shopIngotNum[1]-this.getTodayGoldTimes();return 0<e?e:0},addTodayGoldTimes:function(){this.getShopData().todayGoldTimes+=1,this.resetLastReceiveGoldTime(),this.saveShopData()},resetLastReceiveGoldTime:function(){this.getShopData().lastReceiveGold=i.timeUtil.getSecond()},getLastReceiveGoldTime:function(){return this.getShopData().lastReceiveGold},getNextReceiveGoldSecond:function(){var e=0;if(this.getTodayCanGoldTimes()<=0)return i.timeUtil.getTodayHourTime(24)/1e3-i.timeUtil.getSecond();var t=this.getLastReceiveGoldTime();if(t<=0)return e;var a=i.timeUtil.getSecond();return 0<(e=t+i.templateManager.getGameParamValue("shopAdsCDNum")-a)?e:0},addBattleRewardCount:function(e){this.getShopData().battleBoxBestRewardMap[e]||(this.getShopData().battleBoxBestRewardMap[e]="0");var t=parseInt(this.getShopData().battleBoxBestRewardMap[e]);this.getShopData().battleBoxBestRewardMap[e]=t+1+"",this.saveShopData()},getBattleRewardCount:function(e){return this.getShopData().battleBoxBestRewardMap[e]?parseInt(this.getShopData().battleBoxBestRewardMap[e]):0},getNeedBattleBoxRewardIdData:function(){for(var e={id:1,type:i.constant.BATTLE_BOX_REWARD_TYPE_NORMAL},t=this.player.instanceModule.getMaxChapter(),a=this.player.instanceModule.getChapterMaxLevel(t),n=[],o=0;o<i.JsonData.Hero.length;o++){var s=i.JsonData.Hero[o],r=i.templateManager.getHeroCardDataByHeroId(s.id);(this.player.heroModule.isHeroUnlock(s.id)||r&&i.player.itemModule.checkHeroPieceEnough(r.id,r.cardNum))&&n.push(r.id)}for(var c=i.JsonData.InstanceBoxReward,l=0;l<c.length;l++){if(this.getBattleRewardCount(c[l].id)>=c[l].maxNum||-1!==n.indexOf(c[l].cardId)){if(c[l+1])continue;e.id=i.constant.BAG_TYPE_TOP_BOX_TICKET,e.type=i.constant.BATTLE_BOX_REWARD_TYPE_TICKET;break}var d=c[l].instanceNum;if(t>d[0]||t===d[0]&&a>=d[1]){e.id=c[l].id,e.type=i.constant.BATTLE_BOX_REWARD_TYPE_NORMAL;break}e.id=n[i.Utils.getRandomInt(0,n.length-1)],e.type=i.constant.BATTLE_BOX_REWARD_TYPE_RANDOM_PIECE}return e},getTodayPieceTimes:function(){return this.getShopData().todayPieceTimes},getTodayCanPieceTimes:function(){var e=i.player.vipModule.getCurVipCfg().shopSkillCardNum[1]-this.getTodayPieceTimes();return 0<e?e:0},addTodayPieceTimes:function(){this.getShopData().todayPieceTimes+=1,this.resetLastReceicePieceTime(),this.saveShopData()},resetLastReceicePieceTime:function(){this.getShopData().lastReceivePiece=i.timeUtil.getSecond()},getLastReceivePieceTime:function(){return this.getShopData().lastReceivePiece},getNextReceivePieceSecond:function(){var e=0;if(this.getTodayCanPieceTimes()<=0)return i.timeUtil.getTodayHourTime(24)/1e3-i.timeUtil.getSecond();var t=this.getLastReceivePieceTime();if(t<0)return e;var a=i.timeUtil.getSecond();return 0<(e=t+i.templateManager.getGameParamValue("shopAdsCDNum")-a)?e:0},getLastBoxTime:function(){return this.getShopData().lastBoxTime},getNextReceiveBoxTime:function(){var e,t,a;return 0<(a=0<this.getTodayLastBoxReceiveTimes()?(e=this.getLastBoxTime(),t=this.getBoxAdTime(),a=i.timeUtil.getSecond(),e+3600*i.templateManager.getGameParamValue("shopBoxCd")-t-a):i.timeUtil.getTodayHourTime(24)/1e3-i.timeUtil.getSecond())?a:0},getBoxAdTime:function(){var e=i.templateManager.getGameParamValue("shopBoxReduceCd");return this.getShopData().boxAdTimes*e*3600},receiveBox:function(){this.getShopData().boxAdTimes=0,this.getShopData().lastBoxTime=i.timeUtil.getSecond(),this.saveShopData()},addBoxAdTimes:function(){this.getShopData().boxAdTimes+=1,this.saveShopData()},getTodayBoxReceiveTimes:function(){return this.getShopData().todayBoxReceiveTimes},addTodayBoxReceiveTimes:function(){this.getShopData().todayBoxReceiveTimes+=1,this.saveShopData()},getTodayLastBoxReceiveTimes:function(){return i.player.vipModule.getCurVipCfg().shopBoxNum[1]-this.getTodayBoxReceiveTimes()},addOpenBoxTimes:function(){this.getShopData().openBoxTimes++,this.getShopData().totalOpenBoxTimes++,this.saveShopData()},getOpenBoxTimes:function(){return this.getShopData().openBoxTimes},getTotalOpenBoxTimes:function(){return this.getShopData().totalOpenBoxTimes},resetOpenBoxTimes:function(){this.getShopData().openBoxTimes=0,this.saveShopData()},getTodaySilverTimes:function(){return this.getShopData().todaySilverTimes},getTodayCanSilverTimes:function(){var e=i.player.vipModule.getCurVipCfg().shopCoinNum[1]-this.getTodaySilverTimes();return 0<e?e:0},addTodaySilverTimes:function(){this.getShopData().todaySilverTimes+=1,this.resetLastReceiceSilverTime(),this.saveShopData()},resetLastReceiceSilverTime:function(){this.getShopData().lastReceiveSilver=i.timeUtil.getSecond()},getLastReceiveSilverTime:function(){return this.getShopData().lastReceiveSilver},getNextReceiveSilverSecond:function(){var e=0;if(this.getTodayCanSilverTimes()<=0)return i.timeUtil.getTodayHourTime(24)/1e3-i.timeUtil.getSecond();var t=this.getLastReceiveSilverTime();if(t<0)return e;var a=i.timeUtil.getSecond();return 0<(e=t+i.templateManager.getGameParamValue("shopAdsCDNum")-a)?e:0},getTodayExpTimes:function(){return this.getShopData().todayExpTimes},getTodayCanExpTimes:function(){var e=i.player.vipModule.getCurVipCfg().shopHeroExpNum[1]-this.getTodayExpTimes();return 0<e?e:0},addTodayExpTimes:function(){this.getShopData().todayExpTimes+=1,this.resetLastReceiceExpTime(),this.saveShopData()},resetLastReceiceExpTime:function(){this.getShopData().lastReceiveExp=i.timeUtil.getSecond()},getLastReceiveExpTime:function(){return this.getShopData().lastReceiveExp},getNextReceiveExpSecond:function(){var e=0;if(this.getTodayCanExpTimes()<=0)return i.timeUtil.getTodayHourTime(24)/1e3-i.timeUtil.getSecond();var t=this.getLastReceiveExpTime();if(t<0)return e;var a=i.timeUtil.getSecond();return 0<(e=t+i.templateManager.getGameParamValue("shopAdsCDNum")-a)?e:0},getTodayAllFreeLeftCount:function(){var e=0,t=i.player.vipModule.getCurVipCfg();return e+=Math.max(0,t.shopIngotNum[1]-this.getTodayGoldTimes()),e+=Math.max(0,t.shopBoxNum[1]-this.getTodayPieceTimes()),(e+=Math.max(0,t.shopCoinNum[1]-this.getTodaySilverTimes()))+Math.max(0,t.shopHeroExpNum[1]-this.getTodayExpTimes())},getBoxRewards:function(){for(var e=i.templateManager.getShopTypeBoxListByType(i.constant.BOX_TYPE_SHOP),t=i.templateManager.getGameParamValue("shopBoxSpecialHeroIdIntervalNum"),a=1!==(a=this.getTotalOpenBoxTimes())&&(a-1)%t!=0?0:1,n=[],o=[],s=0;s<e.length;s++){var r=e[s];r.times===a&&o.push(r)}for(var c=0;c<o.length;c++){var l=o[c].highDrop,d=!1;l===i.constant.PRIOR_LOCK_HERO_DROP&&(d=!0);for(var h=i.templateManager.getDropListByDropId(l),u=[],p=[],g=0;g<h.length;g++){var _=h[g],m=parseInt(_.weight),E=i.templateManager.getHeroCardDataById(_.itemId),T=i.player.itemModule.getHeroPieceNumById(E.id)>=E.cardNum,f=i.player.heroModule.isHeroUnlock(E.heroId);(d&&E&&!f&&!T||!d&&(E&&f||E&&T))&&p.push({key:_,value:m}),u.push({key:_,value:m})}var S=i.Utils.getRandomKeyByValue(u);p.length&&(S=i.Utils.getRandomKeyByValue(p)),l=i.Utils.getRandomInt(S.num,S.maxNum),S.isMultiple&&1===S.isMultiple?l=Math.floor(l/1e4*i.player.commonModule.getHangUpReceiveCoin(3600)):S.isMultiple&&2===S.isMultiple&&(l=Math.floor(l/1e4*i.player.commonModule.getHangUpReceiveExp(3600))),n.push({id:S.itemId,num:l})}return n},getSkillRewards:function(){for(var e=i.templateManager.getGameParamValue("skillCardNumList"),t=i.templateManager.getGameParamValue("skillCardDrop"),a=i.templateManager.getDropListByDropId(t),n=[],o=[],s=[],r=0;r<a.length;r++){var c=a[r],l=i.templateManager.getSkillCardById(c.itemId);i.player.skillModule.skillIsUnlock(l.skillId)&&o.push({key:c,value:c.weight}),n.push({key:c,value:c.weight})}for(var d=i.Utils.getRandomInt(e[0],e[1]),h=0;h<d;h++){for(var u=0<o.length?i.Utils.getRandomKeyByValue(o):i.Utils.getRandomKeyByValue(n),p=i.Utils.getRandomInt(u.num,u.maxNum),g=!0,_=0;_<s.length;_++){var m=s[_];m.id===u.itemId&&(g=!1,m.num+=p)}g&&s.push({id:u.itemId,num:p})}return s}}),cc._RF.pop()},{}],ShopPage:[function(e,t){"use strict";cc._RF.push(t,"46a53P2UmVP77Ck6AhSXeFL","ShopPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{silverItemPrefab:{default:null,type:cc.Prefab},expItemPrefab:{default:null,type:cc.Prefab},vipAtlas:{default:null,type:cc.SpriteAtlas}},onLoadPage:function(){this.scrollView=cc.find("content/ScrollView",this.node).getComponent(cc.ScrollView),this.contentNode=cc.find("content/ScrollView/view/content",this.node),this.titleNode=cc.find("titleParent/title",this.node),this.freeAllNode=cc.find("freeAll",this.contentNode),this.freeAllLayoutNode=cc.find("contentLayout",this.freeAllNode),this.freeAllGoldNode=cc.find("gold",this.freeAllLayoutNode),this.freeAllGoldObj=this.freeAllGoldNode.getComponent("ShopFreeNode"),(this.freeAllGoldObj.host=this).freeAllPieceNode=cc.find("piece",this.freeAllLayoutNode),this.freeAllPieceObj=this.freeAllPieceNode.getComponent("ShopFreeNode"),(this.freeAllPieceObj.host=this).boxAllNode=cc.find("boxAll",this.contentNode),this.boxAllTimeLabel=cc.find("box/remainTimes",this.boxAllNode).getComponent(cc.Label),this.boxAllButtonLayoutNode=cc.find("box/buttonLayout",this.boxAllNode),this.boxAllAdBtnNode=cc.find("button",this.boxAllButtonLayoutNode),this.boxAllAdBtnAdNode=cc.find("background/layout",this.boxAllAdBtnNode),this.boxAllSubTimesLabel=cc.find("label",this.boxAllAdBtnAdNode).getComponent(cc.Label),this.boxAllAdBtnFreeNode=cc.find("freeLable",this.boxAllAdBtnAdNode),this.boxAllGoldNode=cc.find("goldButton",this.boxAllButtonLayoutNode),this.boxAllGoldCostLabel=cc.find("background/goldLayout/label",this.boxAllGoldNode).getComponent(cc.Label),this.boxAllGoldIconNode=cc.find("background/goldLayout/icon",this.boxAllGoldNode),this.boxAllKeyIconNode=cc.find("background/goldLayout/key",this.boxAllGoldNode),this.boxTipsLabel1=cc.find("box/rewardLabel1",this.boxAllNode).getComponent(cc.RichText),this.boxLockNode=cc.find("box/lockLabel",this.boxAllNode),this.boxAllTimesLabel=cc.find("box/times",this.boxAllNode).getComponent(cc.Label),this.vipLayoutNode=cc.find("box/vipLayout",this.boxAllNode),this.vipIconSprite=cc.find("icon",this.vipLayoutNode).getComponent(cc.Sprite),this.vipTimesLabel=cc.find("label2",this.vipLayoutNode).getComponent(cc.Label),this.boxRedPointNode=cc.find("box/redPoint",this.boxAllNode),this.boxRedPointNode.active=!1,this.silverAllNode=cc.find("silverAll",this.contentNode),this.silverAllLayoutNode=cc.find("contentLayout",this.silverAllNode),this.expAllNode=cc.find("expAll",this.contentNode),this.expAllLayoutNode=cc.find("contentLayout",this.expAllNode),i.gameScene.isIphoneX()&&i.Utils.addNodeTopSpace(this.node),this.silverIndex=0,this.silverObjList=[],this.silverTypeList=[i.constant.SHOP_SILVER_TYPE_AD,i.constant.SHOP_SILVER_TYPE_ONE,i.constant.SHOP_SILVER_TYPE_TWO],this.expIndex=0,this.expObjList=[],this.expTypeList=[i.constant.SHOP_EXP_TYPE_AD,i.constant.SHOP_EXP_TYPE_ONE,i.constant.SHOP_EXP_TYPE_TWO]},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.REFRESH_SHOP_INFO,function(){return e.initData()}),this.registerListener(i.GameEventType.SHOW_AD_OVER_SHOP_BOX_SUB_CD,function(){return e.onShowBoxSubCdAdOver()}),this.registerListener(i.GameEventType.SHOW_AD_OVER_SHOP_BOX_RECEIVE,function(){return e.onShowBoxReceiveAdOver()})},showPageBegan:function(){this.updateTime=0,this.silverIndex=0,this.expIndex=0,this.canNotClick=!1,i.Logger.debug("show shop page"),this.scrollView.scrollToBottom(0),this.initData()},showPageEnded:function(){this.needCheckGuideTime=1.6,this.scrollView.scrollToTop(1.5)},nodeToScreenOut:function(){var e=i.gameScene.isIphoneX()?i.Utils.getTopFixSize():0;this.titleNode.y=this.titleNode.height+e+10},nodeHoming:function(){var e=cc.moveTo(.3,cc.v2(0,0)),t=cc.callFunc(function(){},this);t=cc.sequence(e,t),this.titleNode.stopAllActions(),this.titleNode.runAction(t)},initData:function(){this.freeAllGoldObj.initData(i.constant.SHOP_FREE_TYPE_GOLD),this.freeAllPieceObj.initData(i.constant.SHOP_FREE_TYPE_PIECE),this.updateBoxInfo(!0)},updateBoxInfo:function(){var e=i.player.functionModule.isFuncOpened(i.constant.MAIN_FUNCTION_SHOP_TOP_BOX,!0);if(this.boxAllButtonLayoutNode.active=e,this.boxAllTimesLabel.node.active=e,this.vipLayoutNode.active=e,this.boxLockNode.active=!e,!(this.boxTipsLabel1.node.active=e))return this.boxAllTimeLabel.node.active=!1,void(this.boxLockNode.getComponent(cc.Label).string=i.player.functionModule.getFuncConditionStringById(i.constant.MAIN_FUNCTION_SHOP_TOP_BOX,i.GameTextCode.UNLOCK_BY_INSTANCE_BASE));var t=0<i.player.shopModule.getTodayLastBoxReceiveTimes(),a=i.player.itemModule.isItemEnough(i.constant.BAG_TYPE_TOP_BOX_TICKET,1);e=i.player.itemModule.getItemCount(i.constant.BAG_TYPE_TOP_BOX_TICKET),this.boxAllGoldIconNode.active=!a,this.boxAllKeyIconNode.active=a,this.boxAllAdBtnNode.active=t,a=a?e+"/1":i.templateManager.getGameParamValue("ShopBoxDiamondNum"),this.boxAllGoldCostLabel.string=a,e=i.player.shopModule.getTotalOpenBoxTimes(),a=i.templateManager.getGameParamValue("shopBoxSpecialHeroIdIntervalNum"),0<i.player.heroModule.getTrueLockHeroList().length?(this.boxTipsLabel1.node.active=!0,i.lang.updateLabelStringArgs(this.boxTipsLabel1,i.GameTextCode.SHOP_BOX_TIPS,[e?a-(e-1)%a:1])):this.boxTipsLabel1.node.active=!1,0<(e=i.player.shopModule.getNextReceiveBoxTime())?(this.boxAllAdBtnFreeNode.active=!1,this.boxAllSubTimesLabel.node.active,this.boxAllSubTimesLabel.node.active=!0,this.boxAllTimeLabel.node.active=!0,(a=i.timeUtil.secondArrayFormat(e)).splice(0,1),i.lang.updateLabelString(this.boxAllTimeLabel,[a.join(":")]),i.lang.updateLabelString(this.boxAllSubTimesLabel,["-"+i.templateManager.getGameParamValue("shopBoxReduceCd")])):(this.boxAllAdBtnFreeNode.active,this.boxAllAdBtnFreeNode.active=!0,this.boxAllSubTimesLabel.node.active=!1,this.boxAllTimeLabel.node.active=!1),this.checkBoxRedPoint(e),i.lang.updateLabelString(this.boxAllTimesLabel,[i.player.shopModule.getTodayLastBoxReceiveTimes()]),(e=i.player.vipModule.getNextVipChangeCfg(i.constant.VIP_PRIVILEGE_TYPE_SHOP_BOX))?(this.vipLayoutNode.active=!0,this.vipIconSprite.spriteFrame=this.vipAtlas.getSpriteFrame(e.vipIconSmall),i.lang.updateLabelString(this.vipTimesLabel,[e.shopBoxNum[1]])):this.vipLayoutNode.active=!1},checkBoxRedPoint:function(e){e<=0||i.player.itemModule.isItemEnough(i.constant.BAG_TYPE_TOP_BOX_TICKET,1)?this.boxRedPointNode.active||(this.boxRedPointNode.active=!0,i.gameScene.redNodeAction(this.boxRedPointNode)):this.boxRedPointNode.active&&(this.boxRedPointNode.active=!1)},onClickBox:function(){0<i.player.shopModule.getTodayLastBoxReceiveTimes()&&(0<i.player.shopModule.getNextReceiveBoxTime()?i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,i.GameEventType.SHOW_AD_OVER_SHOP_BOX_SUB_CD):i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,i.GameEventType.SHOW_AD_OVER_SHOP_BOX_RECEIVE))},onShowBoxSubCdAdOver:function(){i.player.shopModule.addBoxAdTimes(),this.updateBoxInfo(!0)},onShowBoxReceiveAdOver:function(){var e=this;i.gameScene.checkServerTime(function(){i.player.shopModule.addOpenBoxTimes(),e.getBoxReward(),i.player.shopModule.addTodayBoxReceiveTimes(),i.player.shopModule.receiveBox(),e.updateBoxInfo()},!1,function(){i.Logger.debug("\u65f6\u95f4\u5f02\u5e38")})},onClickGoldOrFree:function(){if(!this.canNotClick){if(this.canNotClick=!0,i.player.itemModule.isItemEnough(i.constant.BAG_TYPE_TOP_BOX_TICKET,1))i.player.itemModule.costItemCount(i.constant.BAG_TYPE_TOP_BOX_TICKET,1,i.constant.ITEM_CONSUME_SOURCE_OPEN_BOX),i.player.shopModule.addOpenBoxTimes(),this.getBoxReward(),this.updateBoxInfo();else{var e=i.templateManager.getGameParamValue("ShopBoxDiamondNum");if(!i.player.playerModule.isGoldBullionEnough(e)){var t=i.lang.getGameText(i.GameTextCode.ENOUGH_DIAMONDS);return i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,t),void(this.canNotClick=!1)}if(!i.player.playerModule.costGoldBullionNum(e,i.constant.ITEM_CONSUME_SOURCE_OPEN_BOX))return;i.player.shopModule.addOpenBoxTimes(),this.getBoxReward(),this.updateBoxInfo(),this.canNotClick=!1,i.BI.onEvent(i.biConstant.EVENT_TYPE_DIAMOND_CONSUME,i.biConstant.EVENT_ID_DIAMOND_SHOP_BOX_PAGE,e)}this.canNotClick=!1}},getBoxReward:function(){var e=i.templateManager.getGameParamValue("boxDefaultHeroTimes");i.player.shopModule.getOpenBoxTimes()>=e&&i.player.shopModule.resetOpenBoxTimes(),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_SHOP_REWARD,{rewards:i.player.shopModule.getBoxRewards()})},updateBuildSilver:function(){var e;this.silverIndex<this.silverTypeList.length&&(this.silverIndex>=this.silverObjList.length&&(e=cc.instantiate(this.silverItemPrefab),this.silverAllLayoutNode.addChild(e),((e=e.getComponent("ShopSilverNode")).host=this).silverObjList.push(e)),this.silverObjList[this.silverIndex].initData(this.silverTypeList[this.silverIndex]),this.silverIndex++)},updateBuildExp:function(){var e;this.expIndex<this.expTypeList.length&&(this.expIndex>=this.expObjList.length&&(e=cc.instantiate(this.expItemPrefab),this.expAllLayoutNode.addChild(e),((e=e.getComponent("ShopExpNode")).host=this).expObjList.push(e)),this.expObjList[this.expIndex].initData(this.expTypeList[this.expIndex]),this.expIndex++)},update:function(e){if(this.updateBuildSilver(e),this.updateBuildExp(e),0<this.needCheckGuideTime&&(this.needCheckGuideTime-=e,this.needCheckGuideTime<=0&&i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_OPEN_BOX_4)&&i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_OPEN_BOX_4,this.boxAllGoldNode)),this.updateTime+=e,!(this.updateTime<1)){this.updateTime=0,this.freeAllGoldObj.updateHeart(e),this.freeAllPieceObj.updateHeart(e),this.updateBoxInfo();for(var t=0;t<this.silverObjList.length;t++)this.silverObjList[t].updateHeart(e);for(var a=0;a<this.expObjList.length;a++)this.expObjList[a].updateHeart(e)}}}),cc._RF.pop()},{}],ShopPieceItemRender:[function(e,t){"use strict";cc._RF.push(t,"e25336mHndDSIRvB0s/6r16","ShopPieceItemRender");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{battleAtlas:cc.SpriteAtlas,skillAtlas:cc.SpriteAtlas,iconSp:cc.Sprite,pieceSp:cc.Sprite,numLabel:cc.Label,nameLabel:cc.Label,bgSp:cc.Sprite},initData:function(e){this.data=e,e=i.templateManager.getSkillCardById(e.id),this.bgSp.spriteFrame=this.skillAtlas.getSpriteFrame(e.itemBg),this.numLabel.string="x"+this.data.num,e=i.templateManager.getHeroSkillFirstDataByGroupId(e.skillId),this.iconSp.spriteFrame=this.battleAtlas.getSpriteFrame(e.icon.split("/")[1]),this.nameLabel.string=i.lang.getGameText(e.name)}}),cc._RF.pop()},{}],ShopRewardItemRender:[function(e,t){"use strict";cc._RF.push(t,"60fe1snuFFLhKXSoCn50zaW","ShopRewardItemRender");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{heroAtlas:{default:null,type:cc.SpriteAtlas},commonAtlas:{default:null,type:cc.SpriteAtlas},towerAtlas:{default:null,type:cc.SpriteAtlas},bgSprite:cc.Sprite,iconSprite:cc.Sprite,pieceSprite:cc.Sprite,numberLabel:cc.Label,nameLabel:cc.Label,professionNode:cc.Node,professionBgSprite:cc.Sprite,professionIconSprite:cc.Sprite},initData:function(e){this._reward=e,this.itemId=this._reward.id,this.itemNum=this._reward.num,i.Logger.debug("this._reward: "+JSON.stringify(this._reward)),this.pieceSprite.node.active=!1,this.numberLabel.string="x"+i.Utils.formatBigNumberForLabel(this.itemNum);var t,a=i.player.itemModule.getItemType(this.itemId);a==i.constant.ITEM_TYPE_COIN?(t=i.templateManager.getItemDataById(this.itemId).icon.split("/")[1],this.iconSprite.spriteFrame=this.commonAtlas.getSpriteFrame(t),this.bgSprite.spriteFrame=this.heroAtlas.getSpriteFrame("Hero_Quality_Bg_Green")):a==i.constant.ITEM_TYPE_HERO_PIECE?(this.pieceSprite.node.active=!0,e=i.templateManager.getHeroCardDataById(this.itemId),a=(t=i.templateManager.getHeroDataById(e.heroId)).icon.split("/")[1],this.iconSprite.spriteFrame=i.heroHeadAtlas.getSpriteFrame(a),this.iconSprite.node.scale=.8,a=i.player.heroModule.getHeroQuality(e.heroId),e=i.templateManager.getHeroQualityDataById(a),i.Logger.debug("heroQualityCfg: "+JSON.stringify(e)),a=e.heroBg.split("/")[1],this.bgSprite.spriteFrame=this.heroAtlas.getSpriteFrame(a),this.nameLabel.string=i.lang.getGameText(t.name),this.professionNode.active=!0,this.professionBgSprite.spriteFrame=this.heroAtlas.getSpriteFrame(e.soldierBg.split("/")[1]),t=i.templateManager.getTowerTypeById(t.heroInTowerType[0]),this.professionIconSprite.spriteFrame=this.heroAtlas.getSpriteFrame(t.typeIcon)):i.constant.ITEM_TYPE_SKILL_PIECE}}),cc._RF.pop()},{}],ShopRewardPage:[function(e,t){"use strict";cc._RF.push(t,"5b5e8T5ictKtqlgmoaumHMU","ShopRewardPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{itemRenderPrefab:{default:null,type:cc.Prefab},skillItemRenderPrefab:{default:null,type:cc.Prefab}},onLoadPage:function(){this.rewardShowNode=cc.find("rewardShow",this.node),this.contentLayoutNode=cc.find("contentLayout",this.rewardShowNode),this.pieceContentLayoutNode=cc.find("pieceContentLayout",this.rewardShowNode),this.pieceContentHNode=cc.find("layoutH",this.pieceContentLayoutNode),this.pieceContentH1Node=cc.find("layoutH1",this.pieceContentLayoutNode),this.getButtonNode=cc.find("buttonLayout/getButton",this.rewardShowNode),this.goldButtonNode=cc.find("buttonLayout/goldButton",this.rewardShowNode),this.pieceGetButtonNode=cc.find("buttonLayout/pieceGetButton",this.rewardShowNode),this.actionNode=cc.find("actionNode",this.node),this.boxSpine=cc.find("store_box",this.actionNode).getComponent(sp.Skeleton),this.actionRewardNode=cc.find("reward",this.actionNode),this.costNumLabel=cc.find("buttonLayout/goldButton/background/goldLayout/number",this.rewardShowNode).getComponent(cc.Label),this.costGoldIconNode=cc.find("buttonLayout/goldButton/background/goldLayout/icon",this.rewardShowNode),this.costKeyIconNode=cc.find("buttonLayout/goldButton/background/goldLayout/key",this.rewardShowNode),this.spNode=cc.find("exp",this.node),this.heroPro=cc.find("progressBar",this.spNode).getComponent(cc.ProgressBar),this.pieceIconSp=cc.find("progressBar/piece",this.spNode).getComponent(cc.Sprite),this.numLabel=cc.find("progressBar/number",this.spNode).getComponent(cc.Label),this.autoWaitTime=1,this.curWaitTime=0},showPageBegan:function(){this.firstOpen=!0,this.initData(!1)},showPageEnded:function(){this.runStartEffect(),i.ttAdManager.showGridAd(cc.find("adNode",this.node),this.getPageType())},closePageBegan:function(){i.ttAdManager.hideGridAd()},initData:function(e){this.isShowDone=!1,this._rewards=e?i.player.shopModule.getBoxRewards():this.data.rewards,this.curWaitTime=0,this.rewardShowNode.active=!1,this.actionNode.active=!0,this.actionRewardNode.opacity=0,this.boxSpine.node.opacity=0,this.openIndex=0,this.spNode.active=!1,i.Logger.debug("this._rewards: "+JSON.stringify(this._rewards)),this.contentLayoutNode.destroyAllChildren(),this.actionRewardNode.destroyAllChildren(),this.pieceContentHNode.destroyAllChildren(),this.pieceContentH1Node.destroyAllChildren(),this.data.isSkill?(this.actionRewardItem=cc.instantiate(this.skillItemRenderPrefab),this.actionRewardNode.addChild(this.actionRewardItem),this.actionRewardItemObj=this.actionRewardItem.getComponent("ShopPieceItemRender"),this.goldButtonNode.active=!1,this.getButtonNode.active=!1,this.pieceGetButtonNode.active=!0,this.pieceContentLayoutNode.active=!0,this.contentLayoutNode.active=!1):(this.actionRewardItem=cc.instantiate(this.itemRenderPrefab),this.actionRewardNode.addChild(this.actionRewardItem),this.actionRewardItemObj=this.actionRewardItem.getComponent("ShopRewardItemRender"),this.goldButtonNode.active=!0,this.getButtonNode.active=!0,this.pieceGetButtonNode.active=!1,this.pieceContentLayoutNode.active=!1,this.contentLayoutNode.active=!0,i.player.itemModule.isItemEnough(i.constant.BAG_TYPE_TOP_BOX_TICKET,1)?(this.costNumLabel.string=i.player.itemModule.getItemCount(i.constant.BAG_TYPE_TOP_BOX_TICKET)+"/1",this.costGoldIconNode.active=!1,this.costKeyIconNode.active=!0):(this.costNumLabel.string=i.templateManager.getGameParamValue("ShopBoxDiamondNum"),this.costGoldIconNode.active=!0,this.costKeyIconNode.active=!1),i.player.taskModule.onNewYearTaskEvent(i.constant.NEW_YEAR_TASK_TYPE_TOP_BOX,1)),this.maxReward=0,this.maxProgress=0,this.needShow=!1,this.updateContentItem()},runStartEffect:function(){var e=this,t=this;this.isCanClick=!1,this.storeBoxSpineData=null,cc.loader.loadRes("effect/main/ui/store_box",sp.SkeletonData,function(a,n){a?t.runStartEffect():(e.storeBoxSpineData=n,e.boxSpine.skeletonData=n,e.boxSpine.premultipliedAlpha=!0,e.boxSpine.clearTrack(0),i.soundsUtil.playSoundEffect("shop_box_drop"),e.boxSpine.setAnimation(0,"fall",!1),e.boxSpine.node.opacity=255,e.boxSpine.setCompleteListener(function(t){"fall"==(t.animation?t.animation.name:"")&&(e.boxSpine.setAnimation(0,"fall_stand",!0),e.isCanClick=!0,e.isShowDone=!0)}))})},updateContentItem:function(){if(this.data.isSkill){for(var e=0;e<this._rewards.length;e++){var t=cc.instantiate(this.skillItemRenderPrefab);(e<3?this.pieceContentHNode:this.pieceContentH1Node).addChild(t);var a=t.getComponent("ShopPieceItemRender");t=this._rewards[e],a.initData(t),i.player.itemModule.dropItem(t.id,t.num,!1,i.constant.ITEM_ADD_SOURCE_SHOP)}this.pieceContentH1Node.active=!(this._rewards.length<=3)}else{for(var n=0,o=0;o<this._rewards.length;o++){var s=cc.instantiate(this.itemRenderPrefab);this.contentLayoutNode.addChild(s);var r=s.getComponent("ShopRewardItemRender");s=this._rewards[o],r.initData(s),i.player.itemModule.dropItem(s.id,s.num,!1,i.constant.ITEM_ADD_SOURCE_SHOP),i.player.itemModule.getItemType(s.id)==i.constant.ITEM_TYPE_HERO_PIECE&&(n+=1)}i.player.taskModule.onTaskEvent(i.constant.TASK_TYPE_SHOP_DRAW_CARD,n)}},updateRewardShowNode:function(){var e=this;this.rewardShowNode.active=!0,this.actionNode.active=!1,i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_OPEN_BOX_5)&&i.gameScene.showGuideLimit(1),this.scheduleOnce(function(){i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_OPEN_BOX_5)&&i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_OPEN_BOX_5,e.getButtonNode)},.2)},onClickBox:function(){var e=this;i.Logger.debug("onClickBox"),this.isCanClick&&(this.isShowHero||(this.openIndex>=this._rewards.length?this.updateRewardShowNode():(this.isCanClick=!1,this.updateOpenRewardNode(),0==this.openIndex?(this.boxSpine.clearTrack(0),this.boxSpine.setAnimation(0,"open",!0)):(this.boxSpine.clearTrack(0),this.boxSpine.setAnimation(0,"open2",!0)),this.boxSpine.setCompleteListener(function(t){"open"!=(t=t.animation?t.animation.name:"")&&"open2"!=t||(e.boxSpine.setAnimation(0,"open_stand",!0),e.isCanClick=!0)}),this.openIndex+=1,i.soundsUtil.playSoundEffect("shop_box_open"))))},updateOpenRewardNode:function(){var e,t;this.actionRewardItem.stopAllActions(),this.openIndex>=this._rewards.length?this.updateRewardShowNode():((e=this.boxSpine.node.convertToWorldSpaceAR(cc.v2(0,0))).y=e.y-480-(this.actionRewardNode.y-this.boxSpine.node.y),t=this.actionNode.convertToNodeSpaceAR(e),this.actionRewardItem.position=t,this.actionRewardItem.scale=.2,e=this._rewards[this.openIndex],this.actionRewardItemObj.initData(e),this.actionRewardNode.opacity=255,t=cc.delayTime(.15),e=cc.spawn(cc.moveTo(.3,0,0),cc.scaleTo(.3,1,1)),this.firstOpen?(this.actionRewardItem.scale=0,t=cc.sequence(t,e),this.actionRewardItem.runAction(t)):this.actionRewardItem.runAction(e),this.firstOpen=!1)},dealProgress:function(e){var t,a=i.player.itemModule.getHeroPieceNumById(e.id),n=i.templateManager.getHeroCardDataById(e.id);i.player.heroModule.isHeroMaxQuality(n.heroId)?this.maxReward||(this.maxReward=e):(t=i.player.heroModule.getHeroQuality(n.heroId),t=i.templateManager.getHeroStarDataByHeroStar(n.heroId,t).cardsNum,t=a/(t=i.player.heroModule.isHeroUnlock(n.heroId)?t:n.cardNum),this.maxProgress<=t&&(this.maxProgress=t,this.maxReward=e))},onClickReceive:function(){this.closePage()},onClickOneMoreTry:function(){if(i.player.itemModule.isItemEnough(i.constant.BAG_TYPE_TOP_BOX_TICKET,1))i.player.itemModule.costItemCount(i.constant.BAG_TYPE_TOP_BOX_TICKET,1,i.constant.ITEM_CONSUME_SOURCE_OPEN_BOX);else{var e=i.templateManager.getGameParamValue("ShopBoxDiamondNum");if(!i.player.playerModule.isGoldBullionEnough(e)){var t=i.lang.getGameText(i.GameTextCode.ENOUGH_DIAMONDS);return void i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,t)}if(!i.player.playerModule.costGoldBullionNum(e,i.constant.ITEM_CONSUME_SOURCE_OPEN_BOX))return;i.BI.onEvent(i.biConstant.EVENT_TYPE_DIAMOND_CONSUME,i.biConstant.EVENT_ID_DIAMOND_SHOP_BOX_REWARD_PAGE,e)}i.player.shopModule.addOpenBoxTimes(),e=i.templateManager.getGameParamValue("boxDefaultHeroTimes"),i.player.shopModule.getOpenBoxTimes()>=e&&i.player.shopModule.resetOpenBoxTimes(),this.initData(!0),this.runStartEffect()},update:function(e){this.isShowDone&&(this.curWaitTime+=e,this.curWaitTime>=this.autoWaitTime&&(this.curWaitTime=0,this.onClickBox()))},closePageEnded:function(){var e;this.storeBoxSpineData&&i.player.commonModule.isLowIosDevice()&&(e=cc.loader.getDependsRecursively(this.storeBoxSpineData),cc.loader.release(e),this.storeBoxSpineData=null)}}),cc._RF.pop()},{}],ShopSilverNode:[function(e,t){"use strict";cc._RF.push(t,"087b1H6Ae1ELI94ZZsb/52F","ShopSilverNode");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{shopAtlas:{default:null,type:cc.SpriteAtlas}},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.SHOW_AD_OVER_SHOP_SILVER,function(){e._type==i.constant.SHOP_SILVER_TYPE_AD&&e.onShowAdOver()}),this.registerListener(i.GameEventType.REFRESH_SHOP_INFO,function(){e._type==i.constant.SHOP_SILVER_TYPE_AD&&e.initData(e._type)})},afterLoad:function(){this.clickButton=cc.find("button",this.node).getComponent(cc.Button),this.cardNode=cc.find("button/Background/card",this.node),this.nameLabel=cc.find("tips",this.cardNode).getComponent(cc.Label),this.imgIconSprite=cc.find("icon",this.cardNode).getComponent(cc.Sprite),this.numberLabel=cc.find("number",this.cardNode).getComponent(cc.Label),this.timesLabel=cc.find("times",this.cardNode).getComponent(cc.Label),this.goldLayoutNode=cc.find("goldLayout",this.cardNode),this.goldLayoutLabel=cc.find("label",this.goldLayoutNode).getComponent(cc.Label),this.adIconNode=cc.find("adIcon",this.goldLayoutNode),this.iconNode=cc.find("icon",this.goldLayoutNode),this.cdNode=cc.find("cd",this.cardNode),this.cdTimeLabel=cc.find("time",this.cdNode).getComponent(cc.Label),this.vipLayoutNode=cc.find("vipLayout",this.cardNode),this.vipIconSprite=cc.find("icon",this.vipLayoutNode).getComponent(cc.Sprite),this.vipTimesLabel=cc.find("label2",this.vipLayoutNode).getComponent(cc.Label),this.redPointNode=cc.find("redPoint",this.cardNode),this.redPointNode.active=!1},initData:function(e){this._type=e,this.costNum=0,this.coinNum=new i.BigNumber(0);var t=i.templateManager.getGameParamValue("shopCoinsList"),a=i.player.commonModule.getHangUpReceiveCoin(3600);this.adIconNode.active=this._type==i.constant.SHOP_SILVER_TYPE_AD,this.iconNode.active=this._type!=i.constant.SHOP_SILVER_TYPE_AD;var n=i.lang.getGameText(i.GameTextCode[1354]);e="Shop_Copper_Icon1",this._type==i.constant.SHOP_SILVER_TYPE_ONE?(this.costNum=t[0][1],this.coinNum=a.times(t[0][0]),n=i.lang.getGameText(i.GameTextCode[1355]),e="Shop_Copper_Icon2"):this._type==i.constant.SHOP_SILVER_TYPE_TWO?(this.costNum=t[1][1],this.coinNum=a.times(t[1][0]),n=i.lang.getGameText(i.GameTextCode[1356]),e="Shop_Copper_Icon3"):this._type==i.constant.SHOP_SILVER_TYPE_AD&&(this.coinNum=a.times(i.templateManager.getGameParamValue("shopAdsCoinNum")/1e4)),this.nameLabel.string=n,this.imgIconSprite.spriteFrame=this.shopAtlas.getSpriteFrame(e),this.updateNodeInfo(!0),this.updateVipNode()},updateNodeInfo:function(e){this.numberLabel.string=i.Utils.formatBigNumberForLabel(this.coinNum.toFixed(0)),this._type==i.constant.SHOP_SILVER_TYPE_AD?(this.timesLabel.node.active=!0,i.lang.updateLabelString(this.timesLabel,[i.player.shopModule.getTodayCanSilverTimes()]),this.updateCdInfo(e)):(this.timesLabel.node.active=!1,this.goldLayoutLabel.string=this.costNum,this.cdNode.active=!1)},updateVipNode:function(){var e;this._type==i.constant.SHOP_SILVER_TYPE_AD&&(e=i.player.vipModule.getNextVipChangeCfg(i.constant.VIP_PRIVILEGE_TYPE_SHOP_SILVER))?(this.vipLayoutNode.active=!0,this.vipIconSprite.spriteFrame=this.host.vipAtlas.getSpriteFrame(e.vipIconSmall),i.lang.updateLabelString(this.vipTimesLabel,[e.shopCoinNum[1]])):this.vipLayoutNode.active=!1},updateCdInfo:function(){this.nextSecond=i.player.shopModule.getNextReceiveSilverSecond(),0<this.nextSecond?(this.clickButton.interactable&&(this.clickButton.interactable=!1),this.cdNode.active||(this.cdNode.active=!0),this.cdTimeLabel.string=i.timeUtil.secondFormat(this.nextSecond)):(this.clickButton.interactable||(this.clickButton.interactable=!0),this.cdNode.active&&(this.cdNode.active=!1)),this.checkRedPoint()},checkRedPoint:function(){this._type!=i.constant.SHOP_SILVER_TYPE_AD||this.cdNode.active?this.redPointNode.active&&(this.redPointNode.active=!1):this.redPointNode.active||(this.redPointNode.active=!0,i.gameScene.redNodeAction(this.redPointNode))},onClick:function(){var e;this._type!=i.constant.SHOP_SILVER_TYPE_AD?i.player.playerModule.isGoldBullionEnough(this.costNum)?i.player.playerModule.costGoldBullionNum(this.costNum,i.constant.ITEM_CONSUME_SOURCE_SHOP_BUY_GOLD)&&(i.player.itemModule.dropItem(i.constant.COIN_TYPE_SILVER,this.coinNum,!0,i.constant.ITEM_ADD_SOURCE_SHOP),i.BI.onEvent(i.biConstant.EVENT_TYPE_DIAMOND_CONSUME,i.biConstant.EVENT_ID_DIAMOND_SHOP_SILVER,this.costNum)):(e=i.lang.getGameText(i.GameTextCode.ENOUGH_DIAMONDS),i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,e)):i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,i.GameEventType.SHOW_AD_OVER_SHOP_SILVER)},onShowAdOver:function(){i.player.shopModule.addTodaySilverTimes(),i.player.itemModule.dropItem(i.constant.COIN_TYPE_SILVER,this.coinNum,!0,i.constant.ITEM_ADD_SOURCE_SHOP),this.updateNodeInfo(),i.player.taskModule.onTaskEvent(i.constant.TASK_TYPE_AD_GET_COIN,1)},updateHeart:function(){this._type==i.constant.SHOP_SILVER_TYPE_AD&&this.updateCdInfo()}}),cc._RF.pop()},{}],SignItemRender:[function(e,t){"use strict";cc._RF.push(t,"44d0cceHJpND71Afhk9Wien","SignItemRender");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{commonAtlas:{default:null,type:cc.SpriteAtlas}},afterLoad:function(){this.bgSecondNode=cc.find("bgSecond",this.node),this.dayLabel=cc.find("day/number",this.node).getComponent(cc.Label),this.curDayBgNode=cc.find("day/bgNow",this.node),this.rewardIcon=cc.find("reward/icon",this.node),this.rewardIconNode=cc.find("reward",this.node),this.rewardPieceIcon=cc.find("reward/piece",this.node),this.rewardCountLabel=cc.find("number",this.node).getComponent(cc.Label),this.rewardNode=cc.find("bgGrey",this.node),this.adRewardNode=cc.find("angle",this.node),this.adRewardButton=cc.find("adButton",this.node)},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.SHOW_AD_OVER_SIGN_AGAIN,function(t){return e.showAdOver(t)})},initData:function(e,t){this.hideSignFrame(),this.day=e.day,i.lang.updateLabelString(this.dayLabel,[this.day]),this.rewardItem=e.rewardID,this.rewardCount=e.num,this.rewardItem!==i.constant.COIN_TYPE_GOLD_BULLION?(this.rewardIcon.active=!1,this.rewardPieceIcon.active=!0,e=i.templateManager.getHeroCardDataById(this.rewardItem),this.rewardPieceIcon.getComponent(cc.Sprite).spriteFrame=this.commonAtlas.getSpriteFrame(e.icon)):(this.rewardIcon.active=!0,this.rewardPieceIcon.active=!1),i.lang.updateLabelString(this.rewardCountLabel,[i.Utils.formatBigNumberForLabel(this.rewardCount)]),this.updateData(t)},onClickAd:function(){var e=this;i.player.signModule.isCanAdSign(this.day)&&i.gameScene.checkServerTime(function(){i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,[i.GameEventType.SHOW_AD_OVER_SIGN_AGAIN,e.day])},!1)},showAdOver:function(e){e.params===this.day&&i.player.signModule.adSignOver(this.day)},updateData:function(e){var t=i.player.signModule.getSignDay(),a=i.player.signModule.isCanSign();(a?t+1:t)===this.day&&a?(this.bgSecondNode.active=!0,this.curDayBgNode.active=!0,i.gameScene.redNodeAction(this.rewardIconNode)):(this.bgSecondNode.active=!1,this.curDayBgNode.active=!1,this.rewardIconNode.stopAllActions()),t>=this.day?(this.rewardNode.active=!0,i.player.signModule.isCanAdSign(this.day)?(t=(this.adRewardNode.active=!1)===this.adRewardButton.active,this.adRewardButton.active=!0,(e||t)&&i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_SIGN_AGAIN_AD,this.day)):(this.adRewardButton.active=!1,this.adRewardNode.active=!0)):(this.rewardNode.active=!1,this.adRewardNode.active=!1,this.adRewardButton.active=!1)},hideSignFrame:function(){},updateSignFrame:function(e){this.signAtlas=e,cc.find("bg",this.node).getComponent(cc.Sprite).spriteFrame=this.signAtlas.getSpriteFrame("Sign_EveryDay_Bg"),cc.find("bgSecond",this.node).getComponent(cc.Sprite).spriteFrame=this.signAtlas.getSpriteFrame("Sign_EveryDay_Bg1"),cc.find("day/bg",this.node).getComponent(cc.Sprite).spriteFrame=this.signAtlas.getSpriteFrame("Sign_Days_Bg"),cc.find("day/bgNow",this.node).getComponent(cc.Sprite).spriteFrame=this.signAtlas.getSpriteFrame("Sign_Days_Bg1"),cc.find("reward/icon",this.node).getComponent(cc.Sprite).spriteFrame=this.signAtlas.getSpriteFrame("Sign_Icon_Gold"),cc.find("bgGrey",this.node).getComponent(cc.Sprite).spriteFrame=this.signAtlas.getSpriteFrame("Sign_EveryDay_Bg_Grey"),cc.find("angle",this.node).getComponent(cc.Sprite).spriteFrame=this.signAtlas.getSpriteFrame("GetDouble_Angle")}}),cc._RF.pop()},{}],SignModule:[function(e,t){"use strict";cc._RF.push(t,"e9bff7nly1FgZWn4fMQdF+g","SignModule");var i=e("Aft");cc.Class({extends:i.BaseHandler,init:function(e){this.player=e;var t=i.StorageUtil.getData(i.constant.SAVE_SIGN_DATA);t||(e={signDay:0,signTime:i.timeUtil.getTime()-864e5,totalDays:0,adSignList:[]},this.player.saveGameData(i.constant.SAVE_SIGN_DATA,e),t=JSON.stringify(e)),i.Logger.debug("init signData : "+t),this.player._gameData.signData=JSON.parse(t)},loadData:function(){this.player._gameData.signData.hasOwnProperty("adSignList")||(this.player._gameData.signData.adSignList=[]),this.loadFirstHeroDay()},restoreData:function(e){e&&e.signData&&(i.StorageUtil.save(i.constant.SAVE_SIGN_DATA,e.signData,!0),i.Logger.debug("restoreData data  signData :",JSON.stringify(e.signData)))},saveSignData:function(e){this.player.saveGameData(i.constant.SAVE_SIGN_DATA,this.player._gameData.signData,e)},getSignData:function(){return this.player._gameData.signData},getSignDay:function(){return this.player._gameData.signData.signDay},signOver:function(e){var t,a;this.isCanSign()&&(!(a=i.templateManager.getSignByGroupId(this.getCurGroupId()))||(t=a[this.getSignDay()])&&(a=t.num,e&&(a*=2),i.player.itemModule.dropItem(t.rewardID,a,!0,i.constant.ITEM_ADD_SOURCE_SIGN),this.setSignDay(e),i.eventBus.dispatchEvent(i.GameEventType.MAIN_UPDATE_SIGN_RED)))},setSignDay:function(e){this.player._gameData.signData.signDay+=1,this.player._gameData.signData.totalDays++,this.player._gameData.signData.signTime=i.timeUtil.getTime(),e&&this.player._gameData.signData.adSignList.push(this.player._gameData.signData.signDay),this.saveSignData()},adSignOver:function(e){var t,a;this.isCanAdSign(e)&&(!(a=i.templateManager.getSignByGroupId(this.getCurGroupId()))||(t=a[e-1])&&(a=t.num,i.player.itemModule.dropItem(t.rewardID,a,!0,i.constant.ITEM_ADD_SOURCE_SIGN),this.player._gameData.signData.adSignList.push(e),this.saveSignData(),i.eventBus.dispatchEvent(i.GameEventType.SIGN_UPDATE_INFO)))},getSignTime:function(){return this.player._gameData.signData.signTime},getTotalDays:function(){return this.player._gameData.signData.totalDays},checkSignData:function(){this.isCanSign()&&7<=this.getSignData().signDay&&(this.getSignData().signDay=0,this.player._gameData.signData.adSignList=[]),this.saveSignData(!0),i.eventBus.dispatchEvent(i.GameEventType.SIGN_UPDATE_INFO),i.eventBus.dispatchEvent(i.GameEventType.MAIN_UPDATE_SIGN_RED)},getCurGroupId:function(){return 7<=this.getSignData().totalDays&&(7!==this.getSignData().totalDays||this.isCanSign())?2:1},loadFirstHeroDay:function(){this.firstHeroDay=0,this.firstHeroPiece=0;var e=i.templateManager.getSignByGroupId(1);if(e)for(var t=0;t<e.length;t++){var a=e[t],n=a.rewardID,o=i.player.itemModule.getItemType(n);if(7!==a.day&&o===i.constant.ITEM_TYPE_HERO_PIECE){if(!(o=i.templateManager.getHeroCardDataById(n)))break;if(!(o=i.templateManager.getHeroDataById(o.heroId)))break;this.firstHeroDay=a.day,this.firstHeroPiece=n,this.firstHeroCfg=o;break}}},getFirstHeroDay:function(){return this.firstHeroDay},isShowFirstHero:function(){if(1!==this.getCurGroupId())return!1;if(0===this.firstHeroDay||0===this.firstHeroPiece)return!1;var e=this.getTotalDays();return!(e>=this.firstHeroDay||2<this.firstHeroDay-e)},getSignTitle:function(){var e=i.lang.getGameText(i.GameTextCode.SIGN_COMMON);if(!this.isShowFirstHero())return e;var t=this.getTotalDays();return this.firstHeroDay-t==2?e=i.lang.getFormatString(i.GameTextCode.SIGN_TOMORROW,[]):this.firstHeroDay-t==1&&(e=this.isCanSign()?i.lang.getFormatString(i.GameTextCode.SIGN_COMMON,[]):i.lang.getFormatString(i.GameTextCode.SIGN_TOMORROW,[])),e},getSignFirstHeroName:function(){return i.lang.getGameText(this.firstHeroCfg.name)},isCanSign:function(){var e=new Date,t=this.getDayScore(e),i=new Date(this.player._gameData.signData.signTime);return e=!1,t>this.getDayScore(i)||e},isCanAdSign:function(e){return!(this.player._gameData.signData.signDay<e||0<=this.player._gameData.signData.adSignList.indexOf(e))},getDayScore:function(e){if(!e)return 0;var t=e.getDate(),i=e.getMonth();return 1e4*e.getFullYear()+100*i+t}}),cc._RF.pop()},{}],SignPage:[function(e,t){"use strict";cc._RF.push(t,"f3c12NguV1OepOh5CU/9aTA","SignPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{signItemRenderPrefab:{type:cc.Prefab,default:null}},onLoadPage:function(){this.layoutNode=cc.find("content/layout",this.node),this.sevenNode=cc.find("content/seventh",this.node),this.sevenCurDayBgNode=cc.find("day/bgNow",this.sevenNode),this.sevenCurBgNode=cc.find("bgGold/curBg",this.sevenNode),this.sevenDayNode=cc.find("day",this.sevenNode),this.sevenDayLabel=cc.find("day/number",this.sevenNode).getComponent(cc.Label),this.sevenPriceNode=cc.find("bgLv",this.sevenNode),this.sevenPriceCountLabel=cc.find("reward/number",this.sevenPriceNode).getComponent(cc.Label),this.rewardSpine=cc.find("reward/icon",this.sevenPriceNode).getComponent(sp.Skeleton),this.sevenGoldNode=cc.find("bgGold",this.sevenNode),this.sevenCountLabel=cc.find("goldNumber/number",this.sevenGoldNode).getComponent(cc.Label),this.sevenAlreadyNode=cc.find("bgGrey",this.sevenNode),this.sevenAdRewardNode=cc.find("angle",this.sevenNode),this.sevenAdRewardButton=cc.find("adButton",this.sevenNode),this.buttonNode=cc.find("content/buttonLayout",this.node),this.adRewardButtonEffect=cc.find("adButton/background/button_light",this.buttonNode).getComponent(cc.Animation),this.alreadyRewardNode=cc.find("content/label",this.node),this.initList()},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.SHOW_AD_OVER_SIGN,function(){return e.onShowAdOver()}),this.registerListener(i.GameEventType.SIGN_UPDATE_INFO,function(){return e.refreshSignItem()}),this.registerListener(i.GameEventType.SHOW_AD_OVER_SIGN_AGAIN,function(t){return e.onSevenShowAdOver(t)})},initList:function(){this.signItems=[];for(var e=0;e<6;e++){var t=cc.instantiate(this.signItemRenderPrefab);this.layoutNode.addChild(t),this.signItems.push(t.getComponent("SignItemRender"))}},showPageBegan:function(){var e=this;this.initData(!0),this.rewardSpine.node.active=!1;var t=i.constant.SPINE_PATH_HERO+"hero8";i.mainScene.getTowerSpineData(t,function(t){t&&(e.rewardSpine.node.active=!0,e.rewardSpine.skeletonData=t,e.rewardSpine.setAnimation(0,"stand_right",!0),e.rewardSpine.premultipliedAlpha=!0)});var a=this;this.signAtlas?a.updateSignFrame():cc.loader.loadRes("textures/sign/sign",cc.SpriteAtlas,function(e,t){e?cc.error(e):(a.signAtlas=t,a.updateSignFrame())}),this.adRewardButtonEffect.node.active=!0,this.adRewardButtonEffect.stop(),this.adRewardButtonEffect.setCurrentTime(0),this.adRewardButtonEffect.play("button_light")},showPageEnded:function(){i.ttAdManager.showBannerAd(cc.find("adNode",this.node),this.getPageType())},hideSignFrame:function(){},updateSignFrame:function(){for(var e=0;e<this.signItems.length;e++)this.signItems[e].updateSignFrame(this.signAtlas);cc.find("content/bg1",this.node).getComponent(cc.Sprite).spriteFrame=this.signAtlas.getSpriteFrame("Sign_Big_Bg"),cc.find("content/seventh/bgGold",this.node).getComponent(cc.Sprite).spriteFrame=this.signAtlas.getSpriteFrame("Sign_EveryDay_Bg"),cc.find("content/seventh/bgGold/curBg",this.node).getComponent(cc.Sprite).spriteFrame=this.signAtlas.getSpriteFrame("Sign_EveryDay_Bg1"),cc.find("content/seventh/bgGold/gold",this.node).getComponent(cc.Sprite).spriteFrame=this.signAtlas.getSpriteFrame("Sign_Seventh_Gold"),cc.find("content/seventh/bgGold/goldNumber/bg",this.node).getComponent(cc.Sprite).spriteFrame=this.signAtlas.getSpriteFrame("Sign_Seventh_GoldNumber_Bg"),cc.find("content/seventh/bgLv",this.node).getComponent(cc.Sprite).spriteFrame=this.signAtlas.getSpriteFrame("Sign_Seventh_Lv"),cc.find("content/seventh/day/bg",this.node).getComponent(cc.Sprite).spriteFrame=this.signAtlas.getSpriteFrame("Sign_Days_Bg"),cc.find("content/seventh/day/bgNow",this.node).getComponent(cc.Sprite).spriteFrame=this.signAtlas.getSpriteFrame("Sign_Days_Bg1"),cc.find("content/seventh/bgGrey",this.node).getComponent(cc.Sprite).spriteFrame=this.signAtlas.getSpriteFrame("Sign_EveryDay_Bg_Grey"),cc.find("content/seventh/angle",this.node).getComponent(cc.Sprite).spriteFrame=this.signAtlas.getSpriteFrame("GetDouble_Angle")},initData:function(e){this.refreshSignItem(e)},refreshSignItem:function(e){var t=i.player.signModule.getCurGroupId(),a=i.templateManager.getSignByGroupId(t);if(a){for(var n=0;n<this.signItems.length;n++)this.signItems[n].initData(a[n],e);this.updateSevenNode(e),this.updateState(e)}else this.closePage()},updateState:function(){i.player.signModule.isCanSign()?(this.buttonNode.active=!0,this.alreadyRewardNode.active=!1):(this.buttonNode.active=!1,this.alreadyRewardNode.active=!0)},onClickReward:function(){var e=this;i.gameScene.checkServerTime(function(){var t=i.player.signModule.getSignDay();i.player.signModule.signOver(),e.updateCurDay(t),e.updateState()},!1)},onClickAd:function(){i.gameScene.checkServerTime(function(){i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,i.GameEventType.SHOW_AD_OVER_SIGN)},!1)},onShowAdOver:function(){var e=i.player.signModule.getSignDay();i.player.signModule.signOver(!0),this.updateCurDay(e),this.updateState()},onClickSevenAd:function(){i.player.signModule.isCanAdSign(7)&&i.gameScene.checkServerTime(function(){i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,[i.GameEventType.SHOW_AD_OVER_SIGN_AGAIN,7])},!1)},onSevenShowAdOver:function(e){7===e.params&&i.player.signModule.adSignOver(7)},updateCurDay:function(e){e<6?this.signItems[e].updateData():this.updateSevenNode()},updateSevenNode:function(e){var t,a=i.player.signModule.getCurGroupId(),n=i.templateManager.getSignByGroupId(a);n&&(t=n[6],i.lang.updateLabelString(this.sevenDayLabel,[t.day]),t.rewardID===i.constant.COIN_TYPE_GOLD_BULLION?(this.sevenPriceNode.active=!1,this.sevenGoldNode.active=!0,this.sevenDayNode.active=!0,i.lang.updateLabelString(this.sevenCountLabel,[i.Utils.formatBigNumberForLabel(t.num)])):(this.sevenPriceNode.active=!0,this.sevenGoldNode.active=!1,this.sevenDayNode.active=!1,i.lang.updateLabelString(this.sevenPriceCountLabel,[i.Utils.formatBigNumberForLabel(t.num)])),a=i.player.signModule.getSignDay(),((n=i.player.signModule.isCanSign())?a+1:a)===t.day&&n?(this.sevenCurDayBgNode.active=!0,this.sevenCurBgNode.active=!0):(this.sevenCurDayBgNode.active=!1,this.sevenCurBgNode.active=!1),a>=t.day?(this.sevenAlreadyNode.active=!0,i.player.signModule.isCanAdSign(t.day)?(a=!1===this.sevenAdRewardButton.active,this.sevenAdRewardNode.active=!1,this.sevenAdRewardButton.active=!0,(e||a)&&i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_SIGN_AGAIN_AD,t.day)):(this.sevenAdRewardButton.active=!1,this.sevenAdRewardNode.active=!0)):(this.sevenAlreadyNode.active=!1,this.sevenAdRewardNode.active=!1,this.sevenAdRewardButton.active=!1))},closePageBegan:function(){i.ttAdManager.hideBannerAd()},closePageEnded:function(){this.signAtlas&&i.player.commonModule.isLowIosDevice()&&(cc.loader.release(cc.loader.getDependsRecursively(this.signAtlas)),this.signAtlas=null)}}),cc._RF.pop()},{}],SkillDetailPage:[function(e,t){"use strict";cc._RF.push(t,"c2694aTABhKObCAywtFVXKR","SkillDetailPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{iconAtlas:cc.SpriteAtlas,pieceAtlas:cc.SpriteAtlas},onLoadPage:function(){this.contentNode=cc.find("content",this.node),this.skillLockedNode=cc.find("locked",this.contentNode),this.star1Node=cc.find("skill/starLayout/star1",this.contentNode),this.star2Node=cc.find("skill/starLayout/star2",this.contentNode),this.star3Node=cc.find("skill/starLayout/star3",this.contentNode),this.star4Node=cc.find("skill/starLayout/star4",this.contentNode),this.starLayoutNodeList=[],this.starLayoutNodeList.push(this.star1Node),this.starLayoutNodeList.push(this.star2Node),this.starLayoutNodeList.push(this.star3Node),this.starLayoutNodeList.push(this.star4Node),this.descCurrentNode=cc.find("detail/current",this.contentNode),this.descUnlockedNode=cc.find("detail/unlocked",this.contentNode),this.descNextNode=cc.find("detail/next",this.contentNode),this.descStarNode=cc.find("detail/star",this.contentNode),this.descUnlockNode=cc.find("detail/unlock",this.contentNode),this.unlockBtnNode=cc.find("unlockButton",this.contentNode),this.levelBtnNode=cc.find("levelButton",this.contentNode),this.starBtnNode=cc.find("starButton",this.contentNode),this.fullNode=cc.find("full",this.contentNode),this.unlockBtnEffect=cc.find("background/button_ring",this.unlockBtnNode).getComponent(cc.Animation),this.levelBtnEffect=cc.find("background/button_ring",this.levelBtnNode).getComponent(cc.Animation),this.starBtnEffect=cc.find("background/button_ring",this.starBtnNode).getComponent(cc.Animation),this.unlockBtnEffect.node.active=!1,this.levelBtnEffect.node.active=!1,this.starBtnEffect.node.active=!1,this.unlockHeroLabelList=[],this.starNeedHeroLabelList=[];for(var e=0;e<3;e++){var t=cc.find("layout"+(e+1),this.descUnlockNode),i=cc.find("label",t).getComponent(cc.Label),a=cc.find("label1",t).getComponent(cc.Label),n=cc.find("layout"+(e+1),this.descStarNode),o=cc.find("label",n).getComponent(cc.Label),s=cc.find("label1",n).getComponent(cc.Label);this.unlockHeroLabelList.push({unlockHeroLabel:i,unlockHaveHeroLabel:a,node:t}),this.starNeedHeroLabelList.push({starNeedHeroLabel:o,starHeroLevelLabel:s,node:n})}this.pieceLabel=cc.find("pieceLayout/number",this.levelBtnNode).getComponent(cc.Label),this.goldLabel=cc.find("goldLayout/number",this.starBtnNode).getComponent(cc.Label),this.skillNameLabel=cc.find("skillName",this.contentNode).getComponent(cc.Label),this.skillLevelLabel=cc.find("skillLevel",this.contentNode).getComponent(cc.Label),this.unlockedDescLabel=cc.find("label1",this.descUnlockedNode).getComponent(cc.Label),this.curDescDescLabel=cc.find("label1",this.descCurrentNode).getComponent(cc.Label),this.nextDescDescLabel=cc.find("label1",this.descNextNode).getComponent(cc.Label),this.iconSprite=cc.find("skill/icon",this.contentNode).getComponent(cc.Sprite),this.pieceSprite=cc.find("pieceLayout/piece",this.levelBtnNode).getComponent(cc.Sprite),this.animation=this.node.getComponent(cc.Animation)},showPageBegan:function(){this.initData(this.data)},showPageEnded:function(){i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_SKILL_UPGRADE_3)?i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_SKILL_UPGRADE_3,this.levelBtnNode):i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_SKILL_UNLOCK_3)&&i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_SKILL_UNLOCK_3,this.unlockBtnNode),i.ttAdManager.showBannerAd(cc.find("adNode",this.node),this.getPageType())},closePageBegan:function(){i.ttAdManager.hideBannerAd()},initData:function(e){this.canLevelUp=!1,this.canStarUp=!1,this.canUnlock=!0;var t=i.player.skillModule.getSkillInfo(e),a=t?t.level+1:1,n=i.templateManager.getHeroSkillLevelData(e,a),o=t?i.templateManager.getHeroSkillLevelData(e,t.level):null;this.nextData=n,this.currentData=o,this.skillLockedNode.active=!t,this.skillLevelLabel.node.active=!!t,this.fullNode.active=!n,this.levelBtnNode.active=n&&n.type===i.constant.SKILL_UP_TYPE_LEVEL,this.starBtnNode.active=n&&n.type===i.constant.SKILL_UP_TYPE_STAR,this.unlockBtnNode.active=!t,this.descUnlockedNode.active=!t,this.descUnlockNode.active=!t,this.descCurrentNode.active=!!t,this.descStarNode.active=n&&n.type===i.constant.SKILL_UP_TYPE_STAR,this.descNextNode.active=n&&n.type===i.constant.SKILL_UP_TYPE_LEVEL;for(var s=0;s<this.starLayoutNodeList.length;s++){var r=this.starLayoutNodeList[s];t?(r.active=!0,r.getChildByName("icon").active=t.starLevel>s):r.active=!1}var c=(o||n).relationSkillId;a=i.templateManager.getHeroSkillDataById(c),this.skillNameLabel.string=i.lang.getGameText(a.name),this.iconSprite.spriteFrame=this.iconAtlas.getSpriteFrame(a.icon.split("/")[1]),this.relationSkillId=c;var l=[];if(this.needPieceData={id:-1,num:0},this.needGoldNum=0,n)for(var d=n.upgradeDemand,h=0;h<d.length;h++){var u=d[h][0],p=d[h][1],g=d[h][2];u===i.constant.SKILL_UP_CONDITION_HERO?l.push({id:p,level:g}):u===i.constant.SKILL_UP_CONDITION_ITEM&&((u=i.player.itemModule.getItemType(p))===i.constant.ITEM_TYPE_COIN?this.needGoldNum=g:u===i.constant.ITEM_TYPE_SKILL_PIECE&&(this.needPieceData.id=p,this.needPieceData.num=g))}if(e=i.templateManager.getHeroSkillLevelMaxLevel(e),t&&i.lang.updateLabelString(this.skillLevelLabel,[t.level,e]),this.descUnlockedNode.active){this.unlockedDescLabel.string=i.lang.getFormatString(n.desc,this.getDescParameter(n));for(var _,m,E,T,f,S=0;S<this.unlockHeroLabelList.length;S++)S>=l.length?this.unlockHeroLabelList[S].node.active=!1:(this.unlockHeroLabelList[S].node.active=!0,_="",E=l[S].id,m=i.player.heroModule.isHeroUnlock(E),f=i.templateManager.getHeroDataById(E),_+=i.lang.getGameText(f.name),T=this.getOtherHeroId(E,n),f=i.player.heroModule.isHeroUnlock(T),-1!==T&&(E=i.templateManager.getHeroDataById(T),_+="/"+i.lang.getGameText(E.name)),this.unlockHeroLabelList[S].unlockHeroLabel.string=_,f=(T=m||-1!==T&&f)?i.GameTextCode.RECRUITED:i.GameTextCode.NOT_RECRUITED,i.lang.updateLabelString(this.unlockHeroLabelList[S].unlockHaveHeroLabel,[i.lang.getGameText(f)]),this.unlockHeroLabelList[S].unlockHaveHeroLabel.node.color=T?cc.color("#57B809"):cc.color("#E92222"),T||(this.canUnlock=!1))}if(this.descCurrentNode.active&&(this.curDescDescLabel.string=i.lang.getFormatString(o.desc,this.getDescParameter(o))),this.descNextNode.active&&(this.nextDescDescLabel.string=i.lang.getFormatString(n.desc,this.getDescParameter(n)),o=i.player.itemModule.getSkillPieceNumById(this.needPieceData.id),i.lang.updateLabelString(this.pieceLabel,[o,this.needPieceData.num]),this.pieceLabel.node.color=o>=this.needPieceData.num?cc.color("#000000"):cc.color("#E92222"),this.canLevelUp=o>=this.needPieceData.num),this.descStarNode.active){for(var A,I,y,P,v,L,N=!0,b=0;b<this.starNeedHeroLabelList.length;b++)b>=l.length?this.starNeedHeroLabelList[b].node.active=!1:(this.starNeedHeroLabelList[b].node.active=!0,L=l[b].id,A=l[b].level,I=i.player.heroModule.getRealHeroLevel(L),v=i.templateManager.getHeroDataById(L),y=i.lang.getGameText(v.name),P=this.getOtherHeroId(L,n),v=i.player.heroModule.getRealHeroLevel(P),-1!==P&&(L=i.templateManager.getHeroDataById(P),y+="/"+i.lang.getGameText(L.name)),i.lang.updateLabelString(this.starNeedHeroLabelList[b].starNeedHeroLabel,[y,A]),i.lang.updateLabelString(this.starNeedHeroLabelList[b].starHeroLevelLabel,[v<I?I:v,A]),this.starNeedHeroLabelList[b].starHeroLevelLabel.node.color=(N=A<=I||-1!==P&&A<=v)?cc.color("#57B809"):cc.color("#E92222"));i.lang.updateLabelString(this.goldLabel,[i.player.playerModule.getPlayerGoldBullionNum(),this.needGoldNum]);var R=i.player.playerModule.isGoldBullionEnough(this.needGoldNum);this.goldLabel.node.color=R?cc.color("#000000"):cc.color("#E92222"),this.canStarUp=R&&N}-1!==this.needPieceData.id&&(R=i.templateManager.getSkillCardById(this.needPieceData.id),this.pieceSprite.spriteFrame=this.pieceAtlas.getSpriteFrame(R.icon)),this.checkNnlockBtnEffect(),this.checkLevelBtnEffect(),this.checkStarBtnEffect()},checkNnlockBtnEffect:function(){this.canUnlock?this.unlockBtnEffect.node.active||(this.unlockBtnEffect.node.active=!0,this.unlockBtnEffect.stop(),this.unlockBtnEffect.setCurrentTime(0),this.unlockBtnEffect.play("button_ring")):this.unlockBtnEffect.node.active&&(this.unlockBtnEffect.node.active=!1)},checkLevelBtnEffect:function(){this.canLevelUp?this.levelBtnEffect.node.active||(this.levelBtnEffect.node.active=!0,this.levelBtnEffect.stop(),this.levelBtnEffect.setCurrentTime(0),this.levelBtnEffect.play("button_ring")):this.levelBtnEffect.node.active&&(this.levelBtnEffect.node.active=!1)},checkStarBtnEffect:function(){this.canStarUp?this.starBtnEffect.node.active||(this.starBtnEffect.node.active=!0,this.starBtnEffect.stop(),this.starBtnEffect.setCurrentTime(0),this.starBtnEffect.play("button_ring")):this.starBtnEffect.node.active&&(this.starBtnEffect.node.active=!1)},getOtherHeroId:function(e,t){var i=-1;if(t&&t.otherDemand)for(var a=0;a<t.otherDemand.length;a++)if(t.otherDemand[a][0]===e){i=t.otherDemand[a][1];break}return i},getDescParameter:function(e){var t=[];if(!e)return t;for(var a=e.descParameter,n=0;n<a.length;n++){var o=9999<(o=a[n])?i.Utils.formatBigNumberForLabel(new i.BigNumber(o)):o;t.push(o)}return t},onClickClose:function(){this.closePage()},onClickLevelUp:function(){var e;this.nextData&&this.nextData.type===i.constant.SKILL_UP_TYPE_LEVEL&&(this.canLevelUp?(e=this.data,i.player.skillModule.skillLevelUp(e),i.player.itemModule.subSkillPiece(this.needPieceData.id,this.needPieceData.num),this.initData(e),this.animation.stop(),this.animation.play("skill_upgrade"),i.soundsUtil.playSoundEffect("success_skill_upgrade")):i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,i.lang.getGameText(i.GameTextCode.ENOUGH_SKILL_CARD)))},onClickUnlock:function(){var e;this.nextData&&this.nextData.type===i.constant.SKILL_UP_TYPE_UNLOCK&&(this.canUnlock?(e=this.data,i.player.skillModule.addNewSkill(e),this.closePage(),i.player.broadcastModule.uploadBroadcastData(i.constant.BROADCAST_TYPE_UNLOCK_SKILL,this.relationSkillId)):i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,i.lang.getGameText(i.GameTextCode.ENOUGH_HERO)))},onClickStarUp:function(){var e,t;this.nextData&&this.nextData.type===i.constant.SKILL_UP_TYPE_STAR&&(this.canStarUp?i.player.playerModule.costGoldBullionNum(this.needGoldNum,i.constant.ITEM_CONSUME_SOURCE_SKILL_ADD_STAR)&&(t=this.data,i.player.skillModule.skillStarUp(t),i.BI.onEvent(i.biConstant.EVENT_TYPE_DIAMOND_CONSUME,i.biConstant.EVENT_ID_DIAMOND_SKILL_ADD_STAR,this.needGoldNum),this.initData(t),e=i.player.skillModule.getSkillInfo(t),i.player.broadcastModule.uploadBroadcastData(i.constant.BROADCAST_TYPE_UP_SKILL_STAR,this.relationSkillId,e.starLevel),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_SKILL_STAR,t),i.ttAdManager.hideBannerAd()):(t=i.player.playerModule.isGoldBullionEnough(this.needGoldNum)?i.GameTextCode.ENOUGH_HERO_LEVEL:i.GameTextCode.ENOUGH_DIAMONDS,i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,i.lang.getGameText(t))))}}),cc._RF.pop()},{}],SkillItemRender:[function(e,t){"use strict";cc._RF.push(t,"8d211gV5RVK8KfCRiAkmMfG","SkillItemRender");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{iconAtlas:cc.SpriteAtlas,skillAtlas:cc.SpriteAtlas},afterLoad:function(){this.emptyNode=cc.find("empty",this.node),this.canChangeNode=cc.find("canChange",this.node),this.skillInfoNode=cc.find("skillInfo",this.node),this.useBtnNode=cc.find("skillInfo/button",this.node),this.star1Node=cc.find("skillInfo/starLayout/star1",this.node),this.star2Node=cc.find("skillInfo/starLayout/star2",this.node),this.star3Node=cc.find("skillInfo/starLayout/star3",this.node),this.star4Node=cc.find("skillInfo/starLayout/star4",this.node),this.starLayoutNodeList=[],this.starLayoutNodeList.push(this.star1Node),this.starLayoutNodeList.push(this.star2Node),this.starLayoutNodeList.push(this.star3Node),this.starLayoutNodeList.push(this.star4Node),this.redPointNode=cc.find("skillInfo/redPoint",this.node),this.newPointNode=cc.find("newPoint",this.node),this.bgSprite=cc.find("skillInfo/bg",this.node).getComponent(cc.Sprite),this.iconSprite=cc.find("skillInfo/icon",this.node).getComponent(cc.Sprite),this.skillLevelLabel=cc.find("skillInfo/skillLevel",this.node).getComponent(cc.Label),this.skillNameLabel=cc.find("skillInfo/skillName",this.node).getComponent(cc.Label),this.animation=this.node.getComponent(cc.Animation),this.node.on(cc.Node.EventType.TOUCH_END,this.onClickItem,this)},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.UPDATE_SKILL_LEVEL,function(){return e.updateLevel()}),this.registerListener(i.GameEventType.UNLOCK_SKILL,function(t){return e.unlockSkill(t)}),this.registerListener(i.GameEventType.UPDATE_SKILL_STAR,function(t){return e.updateStar(t)}),this.registerListener(i.GameEventType.UPDATE_SKILL_RED_TIP,function(){return e.updateRedPointActive()})},initData:function(e,t,a){if(this.skillId=e,this.type=t,this.emptyNode.active=!e&&t===i.constant.SKILL_ITEM_TYPE_USE,this.skillInfoNode.active=!!e,this.canChangeNode.active=!1,this.canUpdate=!1,!e)return this.useBtnNode.active=!1,this.redPointNode.active=!1,void(this.newPointNode.active=!1);var n=i.player.skillModule.skillIsUsed(e),o=i.player.skillModule.getSkillInfo(e),s=o?o.level:1;if(e=i.templateManager.getHeroSkillLevelData(e,s),o){for(var r=a?o.starLevel-1:o.starLevel,c=0;c<this.starLayoutNodeList.length;c++){var l=this.starLayoutNodeList[c];l.active=!0,l.getChildByName("icon").active=c<r}this.skillLevelLabel.node.active=!0,this.skillLevelLabel.string=a?s-1:s}else this.star1Node.active=!1,this.star2Node.active=!1,this.star3Node.active=!1,this.star4Node.active=!1,this.skillLevelLabel.node.active=!1;i.Utils.setGray(this.skillInfoNode,!o),e=e.relationSkillId,e=i.templateManager.getHeroSkillDataById(e),this.skillNameLabel.string=i.lang.getGameText(e.name),this.iconSprite.spriteFrame=this.iconAtlas.getSpriteFrame(e.icon.split("/")[1]),this.useBtnNode.active=t===i.constant.SKILL_ITEM_TYPE_NORMAL&&!n&&!!o,this.canUpdate=t===i.constant.SKILL_ITEM_TYPE_NORMAL||t===i.constant.SKILL_ITEM_TYPE_USE&&o,this.updateRedPointActive()},updateLevel:function(){var e;!this.canUpdate||(e=i.player.skillModule.getSkillInfo(this.skillId))&&(this.skillLevelLabel.node.active||(this.skillLevelLabel.node.active=!0),this.skillLevelLabel.string=e.level)},updateRedPointActive:function(){if(!this.canUpdate)return this.redPointNode.active=!1,void(this.newPointNode.active=!1);var e=i.player.skillModule.getRedTipsType(this.skillId);e===i.constant.SKILL_RED_TIP_TYPE_NONE?(this.redPointNode.active=!1,this.newPointNode.active=!1):e===i.constant.SKILL_RED_TIP_TYPE_NEW?(this.newPointNode.active=!0,i.gameScene.redNodeAction(this.newPointNode),this.redPointNode.active=!1):e===i.constant.SKILL_RED_TIP_TYPE_NORMAL&&(this.redPointNode.active=!0,i.gameScene.redNodeAction(this.redPointNode),this.newPointNode.active=!1)},unlockSkill:function(e){this.canUpdate&&this.skillId===e&&(i.soundsUtil.playSoundEffect("success_skill_recruit"),this.node.runAction(cc.sequence(cc.delayTime(.2),cc.callFunc(function(){this.initData(e,this.type),this.playUnlockAnim()},this))))},updateStar:function(e){if(this.canUpdate&&this.skillId===e){for(var t=i.player.skillModule.getSkillInfo(this.skillId).starLevel,a=0;a<this.starLayoutNodeList.length;a++){var n=this.starLayoutNodeList[a];n.active=!0,n.getChildByName("icon").active=a<t}this.updateLevel()}},setUseIndex:function(e){this.useIndex=e},onClickUse:function(){i.soundsUtil.playSoundEffect("common_button_click"),i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_SKILL).useSkill(this.skillId)},showCanChangeNode:function(){this.canChangeNode.active=!0,this.node.stopAllActions(),this.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.8,1.05),cc.scaleTo(.8,1))))},hideCanChangeNode:function(){this.canChangeNode.active=!1,this.node.stopAllActions(),this.node.scale=1},getSkillId:function(){return this.skillId},playUnlockAnim:function(){var e=this;this.useBtnNode.active=!1,this.animation.play("skillItemRender").once(cc.Animation.EventType.FINISHED,function(){e.useBtnNode.active=!0})},onClickItem:function(){this.type===i.constant.SKILL_ITEM_TYPE_USE?this.canChangeNode.active?i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_SKILL).backSelect(null,this.useIndex):this.canUpdate&&i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_SKILL_DETAIL,this.skillId):this.type===i.constant.SKILL_ITEM_TYPE_NORMAL&&i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_SKILL_DETAIL,this.skillId)}}),cc._RF.pop()},{}],SkillModule:[function(e,t){"use strict";function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(i="Object"===i&&e.constructor?e.constructor.name:i)||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}cc._RF.push(t,"d5687Z52KhPkYFwiUgbvirX","SkillModule");var n=e("Aft");cc.Class({extends:n.BaseHandler,init:function(e){this.player=e,this.canUnlockSkillIdList=[];var t=n.StorageUtil.getData(n.constant.SAVE_SKILL_DATA);t||(this.player.saveGameData(n.constant.SAVE_SKILL_DATA,e={skillInfoMap:{},useSkillIdList:[null,null,null]}),t=JSON.stringify(e)),n.Logger.debug("init skillData : "+t),this.player._gameData.skillData=JSON.parse(t)},loadData:function(){},restoreData:function(e){e&&e.skillData&&(n.StorageUtil.save(n.constant.SAVE_SKILL_DATA,e.skillData,!0),n.Logger.debug("restoreData data  skillData :",JSON.stringify(e.skillData)))},saveSkillData:function(){this.player.saveGameData(n.constant.SAVE_SKILL_DATA,this.player._gameData.skillData)},getSkillData:function(){return this.player._gameData.skillData},addNewSkill:function(e,t){var i={skillId:e,level:"1",starLevel:"0"};this.getSkillData().skillInfoMap[e]=i,this.saveSkillData(),t||(n.eventBus.dispatchEvent(n.GameEventType.UNLOCK_SKILL,e),this.checkSkillState())},setUseSkill:function(e,t,i){var a=this.getSkillData().useSkillIdList;if(i){for(var n=0;n<a.length;n++)if(!a[n]){a[n]=e;break}}else{if(t>=a.length)return;a[t]=e}this.saveSkillData()},skillIsUsed:function(e){return-1!==this.getSkillData().useSkillIdList.indexOf(e)},getBattleUseSkillList:function(){for(var e=this.getSkillData().useSkillIdList,t=[],i=0;i<e.length;i++)e[i]&&t.push(this.getSkillInfo(e[i]));return t},getUseSkillIdList:function(){return this.getSkillData().useSkillIdList},getSkillInfo:function(e){var t=this.getSkillData().skillInfoMap[e];return t?{skillId:e,level:parseInt(t.level),starLevel:parseInt(t.starLevel)}:null},skillIsUnlock:function(e){return!!this.getSkillData().skillInfoMap[e]},getAllSkillIdList:function(){return this.allSkillIdList},getRedTipsType:function(e){var t=n.constant.SKILL_RED_TIP_TYPE_NONE;return e?-1!==this.canUnlockSkillIdList.indexOf(e)?t=n.constant.SKILL_RED_TIP_TYPE_NEW:-1===this.canLevelUpSkillIdList.indexOf(e)&&-1===this.canStarUpSkillIdList.indexOf(e)||(t=n.constant.SKILL_RED_TIP_TYPE_NORMAL):0<this.canUnlockSkillIdList.length?t=n.constant.SKILL_RED_TIP_TYPE_NEW:(0<this.canLevelUpSkillIdList.length||0<this.canStarUpSkillIdList.length)&&(t=n.constant.SKILL_RED_TIP_TYPE_NORMAL),t},checkSkillState:function(e){var t;this.allSkillIdList=[],this.canUnlockSkillIdList=[],this.canLevelUpSkillIdList=[],this.canStarUpSkillIdList=[];for(var a=[],o=[],s=n.templateManager.getHeroSkillLevelTypeList().concat([]),r=this.player.instanceModule.getMaxChapter(),c=this.player.instanceModule.getChapterMaxLevel(r),l=0;l<s.length;l++){var d=s[l],h=this.getSkillInfo(d),u=h?h.level:0;if(u=n.templateManager.getHeroSkillLevelData(d,u+1)){h&&a.push(d);for(var p=u.upgradeDemand,g=u.otherDemand,_=!1,m=!0,E=0;E<p.length;E++){var T=p[E][0],f=p[E][1],S=p[E][2];if(T===n.constant.SKILL_UP_CONDITION_INSTANCE){f<r||f===r&&S<=c?(this.addNewSkill(d,!0),this.setUseSkill(d,0,!0),l--,_=!0):m=!1;break}if(T===n.constant.SKILL_UP_CONDITION_ITEM){if(f===n.constant.COIN_TYPE_GOLD_BULLION&&!this.player.playerModule.isGoldBullionEnough(S)){m=!1;break}if(this.player.itemModule.getItemType(f)===n.constant.ITEM_TYPE_SKILL_PIECE&&this.player.itemModule.getSkillPieceNumById(f)<S){m=!1;break}}else if(T===n.constant.SKILL_UP_CONDITION_HERO){var A=-1;if(g)for(var I=0;I<g.length;I++)if(g[I][0]===f){A=g[I][1];break}if((T=this.player.heroModule).getRealHeroLevel(f)<S&&(-1!==A&&T.getRealHeroLevel(A)<S||-1===A)){m=!1;break}}}_||(m?u.type===n.constant.SKILL_UP_TYPE_UNLOCK?this.canUnlockSkillIdList.push(d):u.type===n.constant.SKILL_UP_TYPE_LEVEL?this.canLevelUpSkillIdList.push(d):u.type===n.constant.SKILL_UP_TYPE_STAR&&this.canStarUpSkillIdList.push(d):u.type===n.constant.SKILL_UP_TYPE_UNLOCK&&o.push(d))}else a.push(d)}(t=this.allSkillIdList).push.apply(t,i(this.canUnlockSkillIdList).concat(a,o)),e||n.eventBus.dispatchEvent(n.GameEventType.UPDATE_SKILL_RED_TIP)},skillLevelUp:function(e){var t=parseInt(this.getSkillData().skillInfoMap[e].level);this.getSkillData().skillInfoMap[e].level=t+1+"",this.saveSkillData(),n.eventBus.dispatchEvent(n.GameEventType.UPDATE_SKILL_LEVEL),n.BI.onEvent(n.biConstant.EVENT_TYPE_SKILL_UP_LEVEL,this.getSkillBiEventId(n.biConstant.EVENT_ID_SKILL_UP_LEVEL_BASE,e),this.getSkillData().skillInfoMap[e].level)},skillStarUp:function(e){var t=parseInt(this.getSkillData().skillInfoMap[e].level),i=parseInt(this.getSkillData().skillInfoMap[e].starLevel);this.getSkillData().skillInfoMap[e].level=t+1+"",this.getSkillData().skillInfoMap[e].starLevel=i+1+"",this.saveSkillData(),n.eventBus.dispatchEvent(n.GameEventType.UPDATE_SKILL_STAR,e),n.BI.onEvent(n.biConstant.EVENT_TYPE_SKILL_UP_STAR,this.getSkillBiEventId(n.biConstant.EVENT_ID_SKILL_UP_STAR_BASE,e),this.getSkillData().skillInfoMap[e].starLevel)},gmSetSkillLevel:function(e,t){var i=n.templateManager.getHeroSkillLevelMaxLevel(e);t=Math.min(t,i),this.getSkillData().skillInfoMap[e].level=t+"",this.saveSkillData(),n.eventBus.dispatchEvent(n.GameEventType.UPDATE_SKILL_LEVEL)},getSkillBiEventId:function(e,t){return(t=n.templateManager.getSkillCardBySkillId(t))?parseInt(e)+t.pointNumber:e},getSkillCount:function(){for(var e=0,t=n.templateManager.getHeroSkillLevelTypeList().concat([]),i=0;i<t.length;i++){var a=t[i];this.getSkillInfo(a)&&(e+=1)}return e},getSkillCountByLevel:function(e){for(var t=0,i=n.templateManager.getHeroSkillLevelTypeList().concat([]),a=0;a<i.length;a++){var o=i[a];(o=this.getSkillInfo(o))&&o.level>=e&&(t+=1)}return t},getSkillCountByStar:function(e){for(var t=0,i=n.templateManager.getHeroSkillLevelTypeList().concat([]),a=0;a<i.length;a++){var o=i[a];(o=this.getSkillInfo(o))&&o.starLevel>=e&&(t+=1)}return t}}),cc._RF.pop()},{}],SkillPage:[function(e,t){"use strict";cc._RF.push(t,"5ffebVNZlxD45ovuBvSWTui","SkillPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{itemPrefab:cc.Prefab},onLoadPage:function(){this.mySkillNode=cc.find("mySkill",this.node),this.fightSkillContentNode=cc.find("fightSkill/contentLayout",this.node),this.scrollView=cc.find("mySkill/ScrollView",this.node).getComponent(cc.ScrollView),this.selectTipNode=cc.find("fightSkill/tips",this.node),this.selectNode=cc.find("mySkill/selectNode",this.node),this.selectItemPosNode=cc.find("mySkill/selectNode/selectItemNode",this.node);var e=cc.instantiate(this.itemPrefab);e.parent=this.selectItemPosNode,this.selectItem=e.getComponent("SkillItemRender"),i.gameScene.isIphoneX()&&i.Utils.addNodeTopSpace(this.node),this.selectNode.on(cc.Node.EventType.TOUCH_END,this.backSelect,this),this.checkGuideTime=0},showPageBegan:function(){this.initData()},initData:function(){if(this.selectNode.active=!1,this.scrollView.node.active=!0,this.selectTipNode.active=!1,this.startMySkillNodeY&&(this.mySkillNode.y=this.startMySkillNodeY),this.updateAllUseItem(),this.updateAllSkill(),this.checkGuideTime=2,this.useItemList)for(var e=0;e<this.useItemList.length;e++)this.useItemList[e].hideCanChangeNode()},checkGuide:function(){i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_SKILL_UPGRADE_2)?i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_SKILL_UPGRADE_2,this.useItemList[0].node):i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_SKILL_UNLOCK_2)&&i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_SKILL_UNLOCK_2,this.allSkillItemList[0].node)},guideOver:function(e){e===i.constant.GUIDE_TYPE_SKILL_UPGRADE_2?this.useItemList[0].onClickItem():e===i.constant.GUIDE_TYPE_SKILL_UNLOCK_2&&this.allSkillItemList[0].onClickItem()},updateAllSkill:function(){this.allSkillItemList||(this.allSkillItemList=[]);for(var e=i.player.skillModule.getAllSkillIdList().concat([]),t=i.player.skillModule.getUseSkillIdList(),a=0;a<e.length;a++)-1!==t.indexOf(e[a])&&(e.splice(a,1),a--);var n,o=this.allSkillItemList.length,s=e.length;if(s<o)for(var r=0;r<o;r++)r<s?(this.allSkillItemList[r].node.active=!0,this.allSkillItemList[r].initData(e[r],i.constant.SKILL_ITEM_TYPE_NORMAL)):this.allSkillItemList[r].node.active=!1;else for(var c=0;c<s;c++)c<o?(this.allSkillItemList[c].node.active=!0,this.allSkillItemList[c].initData(e[c],i.constant.SKILL_ITEM_TYPE_NORMAL)):((n=cc.instantiate(this.itemPrefab)).parent=this.scrollView.content,(n=n.getComponent("SkillItemRender")).initData(e[c],i.constant.SKILL_ITEM_TYPE_NORMAL),this.allSkillItemList.push(n))},updateAllUseItem:function(){var e=i.player.skillModule.getUseSkillIdList();this.useItemList||(this.useItemList=[]);var t,a=this.useItemList.length,n=e.length;if(n<a)for(var o=0;o<a;o++)o<n?(this.useItemList[o].initData(e[o],i.constant.SKILL_ITEM_TYPE_USE),this.useItemList[o].setUseIndex(o)):this.useItemList[o].node.removeFromParent();else for(var s=0;s<n;s++)s<a?(this.useItemList[s].initData(e[s],i.constant.SKILL_ITEM_TYPE_USE),this.useItemList[s].setUseIndex(s)):((t=cc.instantiate(this.itemPrefab)).parent=this.fightSkillContentNode,(t=t.getComponent("SkillItemRender")).initData(e[s],i.constant.SKILL_ITEM_TYPE_USE),t.setUseIndex(s),this.useItemList.push(t))},useSkill:function(e){this.scrollView.node.active=!1,this.startMySkillNodeY||(this.startMySkillNodeY=this.mySkillNode.y),this.mySkillNode.y=this.startMySkillNodeY-50,this.selectNode.active=!0,this.selectTipNode.active=!0,this.selectItem.initData(e,i.constant.SKILL_ITEM_TYPE_SELECT);for(var t=0;t<this.useItemList.length;t++)this.useItemList[t].showCanChangeNode()},backSelect:function(e,t){this.selectNode.active=!1,this.selectTipNode.active=!1,this.scrollView.node.active=!0,this.mySkillNode.y=this.startMySkillNodeY;for(var a=0;a<this.useItemList.length;a++)this.useItemList[a].hideCanChangeNode();0<=t&&(i.soundsUtil.playSoundEffect("success_skill_exchange"),i.player.skillModule.setUseSkill(this.selectItem.getSkillId(),t),this.updateAllUseItem(),this.updateAllSkill())},update:function(){0<this.checkGuideTime&&(this.checkGuideTime--,0===this.checkGuideTime&&this.checkGuide())}}),cc._RF.pop()},{}],SkillStarPage:[function(e,t){"use strict";cc._RF.push(t,"70cd6UFKNNIMp8k+VSi/WDY","SkillStarPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{itemPrefab:cc.Prefab},onLoadPage:function(){this.lowNode=cc.find("content/skillLayout/lowLevel",this.node),this.highNode=cc.find("content/skillLayout/highLevel",this.node),this.skillDescLabel=cc.find("content/starEffect/skillDesc",this.node).getComponent(cc.Label),this.animation=this.node.getComponent(cc.Animation),this.lowItemNode=cc.instantiate(this.itemPrefab),this.lowItemNode.parent=this.lowNode,this.lowItem=this.lowItemNode.getComponent("SkillItemRender"),this.highItemNode=cc.instantiate(this.itemPrefab),this.highItemNode.parent=this.highNode,this.highItem=this.highItemNode.getComponent("SkillItemRender")},showPageBegan:function(){var e=this.data;this.lowItem.initData(e,i.constant.SKILL_ITEM_TYPE_STAR,!0),this.highItem.initData(e,i.constant.SKILL_ITEM_TYPE_STAR,!1);for(var t=(t=i.player.skillModule.getSkillInfo(e))?t.level:1,a=(t=i.templateManager.getHeroSkillLevelData(e,t)).descParameter,n=[],o=0;o<a.length;o++){var s=9999<(s=a[o])?i.Utils.formatBigNumberForLabel(new i.BigNumber(s)):s;n.push(s)}this.skillDescLabel.string=i.lang.getFormatString(t.desc,n),this.animation.stop(),this.animation.play("skillStarPage"),i.soundsUtil.playSoundEffect("sucess_skill_break_through")},onClickClose:function(){this.closePage()}}),cc._RF.pop()},{}],Skill:[function(e,t){"use strict";cc._RF.push(t,"79b31+QKKdNP7qIjK5ObBhT","Skill");var i=e("Aft");cc.Class({extends:cc.Component,properties:{cdNum:cc.Label,choiceNode:cc.Node,iconSprite:cc.Sprite,lockNode:cc.Node,iconAtlas:cc.SpriteAtlas},onLoad:function(){this.node.on("touchstart",this.onTouchStart,this),this.node.on("touchend",this.onTouchEnd,this),this.node.on("touchmove",this.onTouchMove,this),this.node.on("touchcancel",this.onTouchEnd,this)},init:function(e,t){this.data=e,this.index=t,this.cdTime=0,this.cdNum.node.active=!1,this.node.getComponent(cc.ProgressBar).progress=0,t=this.data.icon.split("/")[1],this.iconSprite.spriteFrame=this.iconAtlas.getSpriteFrame(t),this.skillNameSprite=cc.find("name",this.node).getComponent(cc.Sprite),this.skillNameSprite.spriteFrame=this.iconAtlas.getSpriteFrame("skillName_"+e.name),this.effectNode=cc.find("effect",this.node),this.ani=this.effectNode.getComponent("cc.Animation"),this.ani.on("finished",this.onFinished,this),this.ani.stop(),this.ani.setCurrentTime(0),this.ani.play("progressBar_stand"),this.updateUnlock()},setSkillLevelData:function(e){this.skillLevelData=e},updateUnlock:function(){for(var e=i.player.functionModule.getUnlockSkills(),t=[],a=0;a<e.length;a++)t.push(e[a]);this.lockNode.active=!1,this.iconSprite.setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite"))},setLock:function(){this.lockNode.active=!0,this.iconSprite.setMaterial(0,cc.Material.getBuiltinMaterial("2d-gray-sprite"))},onFinished:function(e,t){"progressBar_skill"==t.name&&(this.ani.node.active=!1,i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_INSTANCE_3_8)?i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_INSTANCE_3_8):i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_SKILL_CALL_1_4)?i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_SKILL_CALL_1_4):i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_SKILL_SEND_1_4)&&(i.Logger.debug("======== \u7b2c\u56db\u5173\u5f15\u5bfc ========"),i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_SKILL_SEND_1_4)))},intoCd:function(){var e;this.cdTime=Math.floor(this.data.CD*i.battleScene.skillCDTimePercent),this.useTime=0,this.node.getComponent(cc.ProgressBar).progress=1,this.cdNum.node.active=!0,this.cdNum.string=this.cdTime,0!=i.battleScene.getHeroRestrainValue(i.constant.RESTRAIN_ATTR_TYPE_SKILL_CD)&&((e=this.node.convertToWorldSpaceAR(cc.v2(0,0))).x-=cc.winSize.width/2,e.y-=cc.winSize.height/2,e.y+=70,i.battleScene.gameBattleUIObj.checkShowRestrainTips(i.constant.RESTRAIN_TYPE_TYJY,i.constant.RESTRAIN_TYJY_SKILL_CD_TIME,e))},onClick:function(){var e;i.battleScene.gameBattleUIObj.hideGayFriendTriggerTips(),i.battleScene.gameBattleUIObj.hideGayFriendTips(),i.battleScene.setCurEnemyObj(null),i.battleScene.setCurSoldierObj(null),this.lockNode.active?""!=(e=i.player.functionModule.getSkillConditionStringById(this.data.groupID))&&i.gameScene.showTipsItemRender(e):(i.gameScene.removeBubble(i.constant.GUIDE_TYPE_SKILL_CALL_2_2),i.gameScene.removeBubble(i.constant.GUIDE_TYPE_SKILL_SEND_2_2),i.gameScene.removeBubble(i.constant.GUIDE_TYPE_INSTANCE_3_d),i.soundsUtil.playSoundEffect("tower_operation_common"),0<this.cdTime||(this.host.curSkillObj=this,i.battleScene.curSkillGroupId=this.data.groupID,this.data.isRelease?(i.battleScene.gameTowerControl.active&&i.battleScene.gameTowerControlObj.hideControl(),this.host.attrNodeObj.interruptDetail(),i.battleScene.startHeroSkill(this.data.groupID,i.battleScene.gameHeroObjList[this.index].node.position),this.intoCd()):(i.battleScene.setOperateState(i.constant.OPERATE_STATE_SKILL),this.host.onClickChoose(this.index+10)),this.canPlaySound=!0))},setChoice:function(e){this.lockNode.active||(this.choiceNode.active=e,this.node.scale=e?1.1:1)},showSkillOkEffect:function(){this.ani.node.active=!0,this.ani.stop(),this.ani.setCurrentTime(0),this.ani.play("progressBar_skill")},setCdOver:function(){this.cdTime=0,this.node.getComponent(cc.ProgressBar).progress=0},updateCd:function(e){if(0<this.cdTime){if(this.ani.node.active&&(this.ani.node.active=!1),i.battleScene.curSkillGroupId===this.data.groupID&&(i.battleScene.curSkillGroupId=null),this.cdNum.node.active=!0,this.useTime<1)return this.useTime+=e,void(this.node.getComponent(cc.ProgressBar).progress=(this.cdTime-this.useTime)/this.data.CD);this.cdTime--,--this.useTime,this.node.getComponent(cc.ProgressBar).progress=this.cdTime/this.data.CD,this.cdNum.string=this.cdTime}else this.cdNum.node.active&&(this.cdNum.node.active=!1,this.canPlaySound&&i.soundsUtil.playSoundEffect("skill_cd_complete"),this.showSkillOkEffect())},getDescParameter:function(e){var t=[];if(!e)return t;for(var a=e.descParameter,n=0;n<a.length;n++){var o=9999<(o=a[n])?i.Utils.formatBigNumberForLabel(new i.BigNumber(o)):o;t.push(o)}return t},onClickShowTip:function(){var e,t;i.battleScene.curOperateState===i.constant.OPERATE_STATE_SKILL||this.lockNode.active||(t=i.lang.getFormatString(this.skillLevelData.desc,this.getDescParameter(this.skillLevelData)),e={name:i.lang.getGameText(this.data.name),desc:t},t=this.node.parent.convertToWorldSpaceAR(this.node.position),this.host.showDetail(t,this.index+10,null,e),i.battleScene.gameBattleUIObj.hideGayFriendTriggerTips(),i.battleScene.gameBattleUIObj.hideGayFriendTips())},onTouchStart:function(e){this.isCurSelect=!1,this.touchTime=0,this.touching=!0,this.choiceNode.active||(this.isCurSelect=!0,this.onClick()),0<this.cdTime||this.lockNode.active||i.battleScene.gameMapObj.onTouchStart(e,!0)},onTouchEnd:function(e){var t;this.cdTime<=0&&!this.lockNode.active&&(t=this.node.getBoundingBoxToWorld().contains(e.getLocation()),i.battleScene.gameMapObj.onTouchEnd(e,t)),this.node.getBoundingBoxToWorld().contains(e.getLocation())&&this.choiceNode.active&&!this.isCurSelect&&this.onClick(),this.touching?this.touching=!1:this.host.hideDetail()},onTouchMove:function(e){0<this.cdTime||this.lockNode.active||this.node.getBoundingBoxToWorld().contains(e.getLocation())||i.battleScene.gameMapObj.onTouchMove(e)},update:function(e){this.touching&&(this.touchTime+=e,.6<=this.touchTime&&(this.touching=!1,this.touchTime=0,this.onClickShowTip()))}}),cc._RF.pop()},{}],SoldierTrialPageNew:[function(e,t){"use strict";cc._RF.push(t,"14daaWxo29ICIgJtxqVmGFz","SoldierTrialPageNew");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{itemRenderPrefab:{default:null,type:cc.Prefab}},onLoadPage:function(){this.heroNode=cc.find("content/hero",this.node),this.nameLabel=cc.find("content/tips",this.node).getComponent(cc.Label),this.noNode=cc.find("content/no",this.node)},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.SHOW_AD_OVER_HERO_TRY,function(){return e.showAdOver()})},showPageBegan:function(){this._heroId=this.data.heroId,this.tempData=i.templateManager.getHeroDataById(this._heroId),i.lang.updateLabelString(this.nameLabel,[i.lang.getGameText(this.tempData.name)]),this.initHeroItem(this._heroId),this.noNode.active=!1;var e=cc.delayTime(1.2),t=cc.callFunc(function(){this.noNode.active=!0},this);t=cc.sequence(e,t),this.nameLabel.node.runAction(t),i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_HERO_TRY)},showPageEnded:function(){},initHeroItem:function(e){var t={tryLevel:i.battleScene.instanceData.tryHeroTowerLevel,tryQuality:i.constant.QUALITY_TYPE_4};this.heroItemRender||(this.heroItemRender=cc.instantiate(this.itemRenderPrefab),this.heroNode.addChild(this.heroItemRender),this.heroItemRenderObj=this.heroItemRender.getComponent("MainHeroItemRender")),this.heroItemRenderObj.initData(this,i.constant.HERO_ITEM_TYPE_THIRD_CHOOSE,e,null,null,t)},onClickGet:function(){i.Logger.debug("onClickGet"),i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,i.GameEventType.SHOW_AD_OVER_HERO_TRY)},showAdOver:function(){i.Logger.debug("showAdOver"),this.closePage(),i.player.heroModule.addHeroTryCount(this._heroId),i.battleScene.putTryHero(this._heroId);var e=i.battleScene.gameMapObj.mapHeroList,t=i.battleScene.gameHeroObjList.length,a=t<e.length?e[2]:e[e.length-1],n=cc.v2(a.x-320,a.y-568);e=cc.v2(i.battleScene.gameMapObj.endPointData.x-320,i.battleScene.gameMapObj.endPointData.y-568),a={tryLevel:i.battleScene.instanceData.tryHeroTowerLevel,tryQuality:i.constant.QUALITY_TYPE_4},a=i.battleScene.createHero(this._heroId,t,e,a),i.battleScene.gameBattleUIObj.createHeroHead(a,t),a.moveToTargetPos(n)},onClickClose:function(){i.Logger.debug("onClickClose"),this.closePage()},closePageEnded:function(){i.battleScene.checkStartPopUp()}}),cc._RF.pop()},{}],SoldierTrialPage:[function(e,t){"use strict";cc._RF.push(t,"48c9eRMk/1NEJyXxgw+TxEg","SoldierTrialPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{battleAtlas:{default:null,type:cc.SpriteAtlas},commonAtlas:{default:null,type:cc.SpriteAtlas}},onLoadPage:function(){this.lowerSpine=cc.find("content/lowerSpine",this.node).getComponent(sp.Skeleton),this.higherTowerSpine=cc.find("content/higherSoldier/spine",this.node).getComponent(sp.Skeleton),this.higherHeroNode=cc.find("content/higherSoldier/hero",this.node),this.higherHeroSpine=cc.find("content/higherSoldier/hero/heroSpine",this.node).getComponent(sp.Skeleton),this.heroBgSprite=cc.find("content/head/bg",this.node).getComponent(cc.Sprite),this.heroIconSprite=cc.find("content/head/icon",this.node).getComponent(cc.Sprite),this.introduceLabel=cc.find("content/introduce",this.node).getComponent(cc.Label),this.levelLabel=cc.find("content/level",this.node).getComponent(cc.Label),this.levelLabel.node.active=!1},showPageBegan:function(){this._heroId=this.data.heroId,this._towerIndex=this.data.towerIndex,this._headQuadrant=this.data.headQuadrant,this._info=this.data.info,this.heroCfg=i.templateManager.getHeroDataById(this._heroId),this.soldierCfg=i.templateManager.getSoldierDataById(this._heroId),this.towerCfg=i.templateManager.getTowerDataByHeroId(this._heroId),this.towerTypeCfg=i.templateManager.getTowerTypeById(this.towerCfg.typeID),i.player.heroModule.getHeroLevel(this._heroId),i.lang.updateLabelString(this.introduceLabel,[i.lang.getGameText(this.towerTypeCfg.name),i.lang.getGameText(this.heroCfg.name)]),this.levelLabel.node.active=!1,this.updateHeroSprite(),this.updateLowerSpine(),this.updateHigherSpine()},updateHeroSprite:function(){var e="Head_Bg_Green";switch(i.player.heroModule.getHeroQuality(this._heroId)){case i.constant.QUALITY_TYPE_2:e="Head_Bg_Blue";break;case i.constant.QUALITY_TYPE_3:e="Head_Bg_Purple";break;case i.constant.QUALITY_TYPE_4:e="Head_Bg_Orange"}this.heroBgSprite.spriteFrame=this.battleAtlas.getSpriteFrame(e);var t=this.soldierCfg.icon.split("/")[1];this.heroIconSprite.spriteFrame=this.commonAtlas.getSpriteFrame(t)},updateLowerSpine:function(){var e=this,t=i.constant.SPINE_PATH_TOWER+this.towerTypeCfg.spin;this.lowerSpine.node.active=!1,i.battleScene.getSpineData(t,function(a){a?(i.Logger.debug("hero spine success spineUrl = "+t),e.lowerSpine.node.active=!0,e.lowerSpine.skeletonData=a,e.lowerSpine.premultipliedAlpha=e.towerTypeCfg.isPremultipliedAlpha,e.lowerSpine.clearTrack(0),e.lowerSpine.setAnimation(0,e.towerTypeCfg.actionName,!0)):i.Logger.debug("error spineUrl = "+t)})},updateHigherSpine:function(){var e,t,a=this,n=i.constant.SPINE_PATH_TOWER+this.towerCfg.appearance;this.higherTowerSpine.node.active=!1,i.battleScene.getSpineData(n,function(e){e?(i.Logger.debug("hero spine success spineUrl = "+n),a.higherTowerSpine.node.active=!0,a.higherTowerSpine.skeletonData=e,a.higherTowerSpine.premultipliedAlpha=a.towerTypeCfg.isPremultipliedAlpha,a.higherTowerSpine.clearTrack(0),a.higherTowerSpine.setAnimation(0,a.towerTypeCfg.actionName,!0)):i.Logger.debug("error spineUrl = "+n)}),this.towerTypeCfg.id!=i.constant.TOWER_TYPE_BARRACK?(this.higherHeroSpine.node.active=!0,e=this.higherTowerSpine.node.scale/.36,this.towerTypeCfg.id==i.constant.TOWER_TYPE_CANNON?this.higherHeroNode.setPosition(cc.v2(-50/.36*this.higherTowerSpine.node.scale,0)):this.towerTypeCfg.id==i.constant.TOWER_TYPE_MAGIC?this.higherHeroNode.setPosition(cc.v2(0,40/.36*this.higherTowerSpine.node.scale)):this.higherHeroNode.setPosition(cc.v2(0,30/.36*this.higherTowerSpine.node.scale)),this.higherHeroSpine.node.scale=this.soldierCfg.intoAppearance?1/1.7*e:this.soldierCfg.scaling/1e4*.9*e,e=this.soldierCfg.intoAppearance||this.soldierCfg.appearance,t=i.constant.SPINE_PATH_HERO+e,i.Logger.debug("hero spineUrl = "+t),this.higherHeroSpine.node.active=!1,i.battleScene.getSpineData(t,function(e){e?(i.Logger.debug("hero spine success spineUrl = "+t),a.higherHeroSpine.node.active=!0,a.higherHeroSpine.skeletonData=e,a.higherHeroSpine.premultipliedAlpha=0<a.soldierCfg.isChangePremultipliedAlpha,a.higherHeroSpine.setAnimation(0,a.towerCfg.heroDefaultAction,!0)):i.Logger.debug("error spineUrl = "+t)})):this.higherHeroSpine.node.active=!1},onClickOk:function(){this.closePage(),i.battleScene.gameBattleUIObj.runFlyTryEffect(this._heroId,this._towerIndex,this._headQuadrant)},onClickClose:function(){this.closePage()},showPageEnded:function(){}}),cc._RF.pop()},{}],SoundsUtil:[function(e,t){"use strict";cc._RF.push(t,"3fd88i7FyJJx46upYQWAoNp","SoundsUtil");var i=t,a=cc.Class({properties:{name:"SoundsUtil",sounds:{default:null},musicEnabled:!0,effectEnabled:!0,effectPlays:{default:null},_effectInterval:300,_callBackEffectId:0,loadCountMap:{default:null},loadCount:0},ctor:function(){this.sounds={},this.loadCountMap={},this.effectPlays={},cc.audioEngine.setEffectsVolume(1)},loadSounds:function(){var e=this;this.init||(this.init=!0,cc.audioEngine.setEffectsVolume(0),cc.loader.loadResDir("audio",cc.AudioClip,function(t,i){for(var a=0;a<i.length;a++)e.addSound(i[a].name,i[a]),cc.audioEngine.playEffect(i[a],!1);cc.audioEngine.stopAllEffects(),cc.audioEngine.setEffectsVolume(1);var n=(new Date).getTime()-aft.gameScene.startSoundTime;console.log("===============================load sound useTime = "+n)}))},loadSoundsByNameList:function(e,t,i,a){var n=this;if(e&&0!==e.length&&(i=i||e.length,a||(this.loadCount++,a=this.loadCount),a)){this.loadCountMap[a]||(this.loadCountMap[a]=0);for(var o=this.loadCountMap[a],s=[],r=o+i>=e.length,c=r?o+i:e.length,l=o;l<c;l++)s.push(t?"audio/"+e[l]:e[l]);cc.loader.loadResArray(s,cc.AudioClip,function(o,s){for(var c,l=0;l<s.length;l++)n.addSound(s[l].name,s[l]),n.loadCountMap[a]++;r?(cc.log("===============================load sound num = "+n.loadCountMap[a]),c=(new Date).getTime()-aft.gameScene.startSoundTime,console.log("===============================load sound useTime = "+c)):n.loadSoundsByNameList(e,t,i,a)})}},addSound:function(e,t){this.sounds[e]=t},playSoundEffect:function(e,t,i){var a=this;if(this.effectEnabled){var n=(new Date).getTime(),o=this.effectPlays[e];return o&&n-o<this._effectInterval?0:(this.effectPlays[e]=n,this.needLoadSoundList||(this.needLoadSoundList=[]),-1===this.needLoadSoundList.indexOf(e)&&this.needLoadSoundList.push(e),this.sounds[e]?(t=cc.audioEngine.playEffect(this.sounds[e],t),i&&(this._callBackEffectId=t),t):(cc.loader.loadRes("audio/"+e,cc.AudioClip,function(t,n){t?cc.log("load sound [",e,"] error.",t.message):(t=cc.audioEngine.playEffect(n,!1),i&&(a._callBackEffectId=t),a.addSound(e,n))}),0))}},stopSoundEffect:function(e){e&&cc.audioEngine.stopEffect(e)},stopAllSoundEffects:function(){cc.audioEngine.stopAllEffects()},playMusic:function(e){var t=this;e&&(this.music=e,this.musicEnabled&&(this.needLoadSoundList||(this.needLoadSoundList=[]),-1===this.needLoadSoundList.indexOf(e)&&this.needLoadSoundList.push(e),this.sounds[e]?cc.audioEngine.playMusic(this.sounds[e],!0):cc.loader.loadRes("audio/"+e,cc.AudioClip,function(i,a){i?cc.log("load sound error.",i.message):(cc.audioEngine.playMusic(a,!0),t.addSound(e,a))})))},stopMusic:function(){console.log("util stopMusic"),cc.audioEngine.stopMusic(),this.music=null},setMusicEnabled:function(e,t){console.log("setMusicEnabled enabled = "+e+" ignorePlay = "+t+" this.musicEnabled = "+this.musicEnabled),e&&this.musicEnabled==e||(this.musicEnabled=e,this.musicEnabled?t||(this.playMusic(this.music),console.log("setMusicEnabled playMusic this.music = "+this.music)):(console.log("util setMusicEnabled stopMusic"),cc.audioEngine.stopMusic()))},setEffectEnabled:function(e){this.effectEnabled=e,this.effectEnabled||cc.audioEngine.stopAllEffects()},getMusicEnable:function(){return this.musicEnabled},getCallBackEffectId:function(){return this._callBackEffectId}});i.exports=a,cc._RF.pop()},{}],SpeedAdTryPage:[function(e,t){"use strict";cc._RF.push(t,"5a5e1SujJlAtoDNn7pDoOFV","SpeedAdTryPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{vipAtlas:{default:null,type:cc.SpriteAtlas}},onLoadPage:function(){this.vipIconSprite=cc.find("content/vipLayout/icon",this.node).getComponent(cc.Sprite),this.speedLabel=cc.find("content/tips",this.node).getComponent(cc.Label)},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.SHOW_AD_OVER_SPEED_TRY,function(){e.onShowAdOver()})},showPageBegan:function(){var e=i.player.vipModule.getVipUnlockCfg(i.constant.VIP_PRIVILEGE_TYPE_BATTLE_SPEED);this.vipIconSprite.spriteFrame=this.vipAtlas.getSpriteFrame(e.vipIconSmall),i.lang.updateLabelString(this.speedLabel,[e.speedUpNum[1]/1e4]),i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_SPEED_TRY)},initData:function(){},onClickClose:function(){this.closePage()},onClickAd:function(){i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,i.GameEventType.SHOW_AD_OVER_SPEED_TRY)},onShowAdOver:function(){i.battleScene.gameBattleUIObj.setSpeedTry(!0),i.battleScene.gameBattleUIObj.onClickSpeed(),this.closePage()}}),cc._RF.pop()},{}],SpeedTryPage:[function(e,t){"use strict";cc._RF.push(t,"72a10sumJVFMaTOc2cPhrCi","SpeedTryPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{},onLoadPage:function(){this.contentNode=cc.find("content",this.node),this.titleNode=cc.find("title",this.contentNode),this.funcNode=cc.find("func",this.contentNode),this.iconSprite=cc.find("content/func/icon",this.node).getComponent(cc.Sprite),this.nameLabel=cc.find("content/func/label",this.node).getComponent(cc.Label)},showPageBegan:function(){i.soundsUtil.playSoundEffect("new_func_unlocked"),this.blackNode.opacity=1,this.contentNode.scaleX=0,this.titleNode.active=!1,this.funcNode.active=!1},showPageEnded:function(){var e=cc.delayTime(.3),t=cc.callFunc(function(){this.blackNode.opacity=255,this.runPageEffect()},this);t=cc.sequence(e,t),this.contentNode.stopAllActions(),this.contentNode.runAction(t)},runPageEffect:function(){var e=cc.scaleTo(.1,1.3,1),t=cc.scaleTo(.05,1,1),i=cc.callFunc(function(){this.runTitleEffect()},this);i=cc.sequence(e,t,i),this.contentNode.stopAllActions(),this.contentNode.runAction(i)},runTitleEffect:function(){this.titleNode.active=!0,this.titleNode.scale=0;var e=cc.scaleTo(.2,1.2),t=cc.scaleTo(.1,1,1),i=cc.callFunc(function(){this.runFuncEffect()},this);i=cc.sequence(e,t,i),this.titleNode.stopAllActions(),this.titleNode.runAction(i)},runFuncEffect:function(){this.funcNode.active=!0,this.funcNode.opacity=0;var e=cc.fadeIn(.3),t=cc.callFunc(function(){this.runDelayEffect()},this);t=cc.sequence(e,t),this.funcNode.stopAllActions(),this.funcNode.runAction(t)},runDelayEffect:function(){var e=cc.delayTime(1),t=cc.callFunc(function(){this.closePage(),i.battleScene.gameBattleUIObj.runFlySpeedTryEffect()},this);t=cc.sequence(e,t),this.node.runAction(t)}}),cc._RF.pop()},{}],SpringDailyRewardItemRender:[function(e,t){"use strict";cc._RF.push(t,"f307dhtTzpCk6z26sAZvOUy","SpringDailyRewardItemRender");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{itemPrefab:{default:null,type:cc.Prefab}},afterLoad:function(){this.itemIndex=0,this.itemObjList=[],this.dayLabel=cc.find("day/label",this.node).getComponent(cc.Label),this.contentNode=cc.find("rewardLayout",this.node),this.blackNode=cc.find("black",this.node),this.dayLockNode=cc.find("day/bg1",this.node),this.blackNode.on("touchstart",this.onTouchStart,this)},initData:function(e,t){this.taskDay=i.player.taskModule.getNewYearTaskDay(),this.rewardCfg=e,this.allDaliyRewardList=i.templateManager.getNewYearTaskRewardListByDay(this.rewardCfg.day),this.day=e.day,this.taskDay!==this.day||t?this.blackNode.active=!1:this.blackNode.active=!0,this.dayLockNode.active=this.day>this.taskDay,i.lang.updateLabelString(this.dayLabel,[this.day]),this.hideAllItem(),this.itemIndex=0},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.NEW_YEAR_TASK_REWARD_REFRESH,function(t){return e.updateTaskReward(t)})},hideAllItem:function(){for(var e=0;e<this.itemObjList.length;e++)this.itemObjList[e].node.active=!1},updateReward:function(e){var t,a,n,o,s,r,c;e>=this.itemObjList.length||(c=this.allDaliyRewardList[e])&&0!==c.length&&(t=c[0],a=c[1],i.templateManager.getNewYearTaskRewardBoxDataById(t)&&((n=this.itemObjList[e]).node.active||(n.node.active=!0),o=i.player.taskModule.isNewYearTaskReward(this.day,e),s=i.player.taskModule.isNewYearTaskRewardPassTime(this.day,e),r=this.dayLockNode.active,c=i.player.taskModule.isCanRewardNewYearTask(this.day,e),n.initData(t,1,null,null,!0,!1,!1,o,s,a,r,c,e)))},showTips:function(e,t,i,a){this.host.showTips(e,t,i,a)},rewardTask:function(e){i.player.taskModule.rewardNewYearTask(this.day,e)},hideTips:function(){this.host.hideTips()},onTouchStart:function(){this.host.hideAllTips()},updateTaskReward:function(e){var t;e&&e.hasOwnProperty("day")&&e.hasOwnProperty("index")&&(t=e.day,this.day===t&&(e=e.index,this.updateReward(e)))},update:function(){var e;this.itemIndex<this.allDaliyRewardList.length&&(this.itemIndex>=this.itemObjList.length&&((e=cc.instantiate(this.itemPrefab)).scale=.7,this.contentNode.addChild(e),e.y=e.y-13,((e=e.getComponent("CommonItemRender")).host=this).itemObjList.push(e)),this.updateReward(this.itemIndex),this.itemIndex++)}}),cc._RF.pop()},{}],SpringGiftMedalUpPage:[function(e,t){"use strict";cc._RF.push(t,"fcb7b6No/9BxI3oGAXKeRnG","SpringGiftMedalUpPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{medalAtlas:{default:null,type:cc.SpriteAtlas}},onLoadPage:function(){this.iconSprite=cc.find("iconbg/icon",this.node).getComponent(cc.Sprite),this.nodeAnimation=this.node.getComponent(cc.Animation),this.closeNode=cc.find("close",this.node),this.descLabel=cc.find("label",this.node).getComponent(cc.Label),this.nodeAnimation.on("finished",this.onFinished,this)},showPageBegan:function(){this.isCanClick=!1,this.closeNode.active=!1,i.soundsUtil.playSoundEffect("update_vip"),this.medalLevel=this.data,this.medalCfg=i.templateManager.getNewYearTaskMedalById(this.medalLevel);var e=(e=i.templateManager.getNewYearTaskMedalById(this.medalLevel-1))||this.medalCfg;i.lang.updateLabelString(this.descLabel,[i.lang.getGameText(this.medalCfg.name)]),this.iconSprite.spriteFrame=this.medalAtlas.getSpriteFrame(e.icon);var t=cc.delayTime(.55);e=cc.callFunc(function(){this.iconSprite.spriteFrame=this.medalAtlas.getSpriteFrame(this.medalCfg.icon)},this),e=cc.sequence(t,e),this.iconSprite.node.stopAllActions(),this.iconSprite.node.runAction(e),this.runFlyAction()},showPageEnded:function(){},runFlyAction:function(){this.nodeAnimation.stop(),this.nodeAnimation.setCurrentTime(0),this.nodeAnimation.play("vip_upgrade")},onFinished:function(e,t){"vip_upgrade"==t.name&&(this.nodeAnimation.play("vip_upgrade_stand"),this.isCanClick=!0,this.closeNode.active=!0)},onClickClose:function(){var e;this.isCanClick&&(this.closePage(),(e=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_CHILD))&&e.runFlyMedalAction())}}),cc._RF.pop()},{}],SpringGiftPage:[function(e,t){"use strict";cc._RF.push(t,"fdb1cN9z/FEC5BCwyx6xuRW","SpringGiftPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{itemPrefab:{type:cc.Prefab,default:null},medalDescPrefab:{type:cc.Prefab,default:null},giftAtlas:{default:null,type:cc.SpriteAtlas},commonTipsPrefab:{default:null,type:cc.Prefab}},onLoadPage:function(){this.tasksNode=cc.find("content/everydayTask",this.node),this.ruleNode=cc.find("content/ruleLayout",this.node),this.contentNode=cc.find("content/medalReward/ScrollView/view/content",this.node),this.scrollViewNode=cc.find("content/medalReward/ScrollView",this.node),this.scrollView=cc.find("content/medalReward/ScrollView",this.node).getComponent(cc.ScrollView),this.node.on("touchstart",this.hideAllTips,this),this.contentNode.on("touchstart",this.hideAllTips,this),this.timeLabel=cc.find("content/tips",this.node).getComponent(cc.Label),this.progressBarNode=cc.find("content/medalReward/rewards/medalProgressBar",this.node),this.progressBar=this.progressBarNode.getComponent(cc.ProgressBar),this.scoreLabel=cc.find("total/label",this.progressBarNode).getComponent(cc.Label),this.itemIndex=0,this.itemObjList=[]},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.NEW_YEAR_TASK_REFRESH,function(t){return e.initData(t)})},showPageBegan:function(){i.player.taskModule.resetNewYearTaskStage(),this.allDaliyRewardList=i.JsonData.YearTaskReward,this.initData(!0),this.updateEndTime(1),i.player.taskModule.addNewYearTaskTodayShowRed()},initData:function(e){i.player.taskModule.fixPlayerTaskData(),this.hideAllItem(),this.itemIndex=0,this.hideAllTips(),this.updateTasks(),this.initUpdateProgress(),this.lastUpdateTime=0,!e&&this.node.active&&(i.player.taskModule.isNewYearTaskOpen()||this.closePage())},showPageEnded:function(){0!==this.taskList.length||this.closePage()},updateTasks:function(){this.taskList=i.player.taskModule.getCurNewYearTaskList(),this.allTaskOver=!0;for(var e=1;e<=5;e++){var t=0;e<=this.taskList.length&&(t=this.taskList[e-1]),this.updateTaskInfo(e,t)||(this.allTaskOver=!1)}},onClickTask:function(e,t){if(!(t<1||t>this.taskList.length)&&(t=this.taskList[t-1],t=i.templateManager.getNewYearTaskDataById(t)))switch(this.closePage(),i.player.taskModule.getNewYearTaskType(t)){case i.constant.NEW_YEAR_TASK_TYPE_TOP_BOX:case i.constant.NEW_YEAR_TASK_TYPE_SHOP_DIAMOND:i.gameScene.mainPage.onClickShop();break;case i.constant.NEW_YEAR_TASK_TYPE_HERO_BREAK:i.gameScene.mainPage.onClickHero();break;case i.constant.NEW_YEAR_TASK_TYPE_TOWER_BREAK:i.gameScene.mainPage.onClickTower();break;case i.constant.NEW_YEAR_TASK_TYPE_BATTLE_MONSTER:i.gameScene.showPage(i.pageConstant.PAGE_TYPE_YEAR_MONSTER);break;case i.constant.NEW_YEAR_TASK_TYPE_GROUP_SHARE:case i.constant.NEW_YEAR_TASK_TYPE_GROUP_HELP:var a=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_CHILD);a&&a.onClickAlliance()}},updateTaskInfo:function(e,t){var a=cc.find("task"+e,this.tasksNode),n=cc.find("completed",a),o=cc.find("icon",a).getComponent(cc.Sprite),s=cc.find("label1",a).getComponent(cc.Label),r=cc.find("times/layout/label",a).getComponent(cc.Label),c=cc.find("times/layout/label1",a).getComponent(cc.Label);return(e=i.player.taskModule.getNewYearTaskById(t))?(a.active||(a.active=!0),t=i.templateManager.getNewYearTaskDataById(e.taskId),a=i.player.taskModule.getNewYearTaskDesc(t),s.string=i.lang.getGameText(a),s=e.count,a=t.taskValue[0],r.string=s,c.string=a,e.isFinish?(r.node.color=cc.color("#412927"),n.active=!0):(r.node.color=cc.color("#F92312"),n.active=!1),t=i.player.taskModule.getNewYearTaskIcon(t),o.spriteFrame=this.giftAtlas.getSpriteFrame(t),e.isFinish):!(a.active=!1)},initUpdateProgress:function(){this.medalList=i.JsonData.Medal,this.maxScore=this.medalList[this.medalList.length-1].point,this.curScore=Math.min(this.maxScore,i.player.taskModule.getNewYearTaskScore());for(var e=i.player.taskModule.getNewYearTaskLevel(),t=this.progressBarNode.width,a=this.maxScore,n=this.curScore,o=[],s=0,r=0,c=0;c<this.medalList.length;c++){var l=this.medalList[c].point,d=c+1,h=cc.find("position"+d,this.progressBarNode);i.Logger.debug("boxRootNode: "+h.x+", value: "+l+", totalStar: "+a+", totalHeight: "+t);var u=c===this.medalList.length-1?1-r:(h.x-s)/t;o.push(u),r+=u,s=h.x,cc.find("number/label",h).getComponent(cc.Label).string=l,h=cc.find("medalLight",h),d<=e?h.active||(h.active=!0):h.active=!1}for(var p=0,g=0,_=0;_<this.medalList.length;_++){var m=this.medalList[_].point-g,E=n-m,T=o[_];if(!(0<=E)){p+=n/m*T;break}p+=T,n=E,g=this.medalList[_].point}this.scoreLabel.string=this.curScore,this.progressBar.progress=p},onClickDetail:function(){this.ruleNode.active=!0,this.hideTips(),this.hideMedalTips()},hideRuleDetail:function(){this.ruleNode.active=!1},onClickClose:function(){this.closePage()},hideAllItem:function(){for(var e=0;e<this.itemObjList.length;e++)this.itemObjList[e].node.active=!1},showTips:function(e,t,i,a){this.itemTipsNode||(this.itemTipsNode=cc.instantiate(this.commonTipsPrefab),this.itemTipsObj=this.itemTipsNode.getComponent("CommonSkillTipsItemRender"),this.node.addChild(this.itemTipsNode)),this.showTipsId=e,this.itemTipsObj.showNode(e,t,i,a),this.hideRuleDetail(),this.hideMedalTips()},hideTips:function(){this.showTipsId=null,this.itemTipsObj&&this.itemTipsObj.hideNode()},onClickMedal:function(e,t){this.showMedalTips(t)},showMedalTips:function(e){var t=i.templateManager.getNewYearTaskMedalById(e);!t||(e=cc.find("position"+e+"/icon",this.progressBarNode))&&(this.medalTipsNode||(this.medalTipsNode=cc.instantiate(this.medalDescPrefab),this.medalDescLabel=cc.find("bgLayout/thingDescribe",this.medalTipsNode).getComponent(cc.Label),this.node.addChild(this.medalTipsNode)),this.medalTipsNode.active=!0,this.medalDescLabel.string=i.lang.getGameText(t.name),t=e.convertToWorldSpaceAR(cc.v2(0,0)),t=this.node.convertToNodeSpaceAR(t),this.medalTipsNode.position=cc.v2(t.x,t.y+e.height/4),this.hideRuleDetail(),this.hideTips())},hideMedalTips:function(){this.medalTipsNode&&this.medalTipsNode.active&&(this.medalTipsNode.active=!1)},hideAllTips:function(){this.hideTips(),this.hideRuleDetail(),this.hideMedalTips()},updateEndTime:function(e){var t;this.lastUpdateTime+=e,this.lastUpdateTime<1||(this.lastUpdateTime=0,t=i.timeUtil.getTime(),e=i.player.newYearModule.getActivityEndTime(),t=Math.max(0,e-t)/1e3,t=i.timeUtil.secondArrayFormat(t),i.lang.updateLabelString(this.timeLabel,[t[0],t[1]+":"+t[2]+":"+t[3]]))},update:function(e){var t,a;this.itemIndex<this.allDaliyRewardList.length&&(a=this.allDaliyRewardList[this.itemIndex],this.itemIndex>=this.itemObjList.length&&(t=cc.instantiate(this.itemPrefab),this.contentNode.addChild(t),((t=t.getComponent("SpringDailyRewardItemRender")).host=this).itemObjList.push(t)),(t=this.itemObjList[this.itemIndex]).node.active=!0,t.initData(a,this.allTaskOver),this.itemIndex++,this.itemIndex===this.allDaliyRewardList.length&&((a=i.player.taskModule.getNewYearTaskDay())<=2&&(a=0),a=Math.max(0,Math.min(1,(this.itemIndex-a)/this.itemIndex)),this.scrollView.scrollTo(cc.v2(0,a),1))),this.updateEndTime(e)}}),cc._RF.pop()},{}],SpringGiftTopTipItemRender:[function(e,t){"use strict";cc._RF.push(t,"4ff95XuJFBD9o1+ubx4mfFD","SpringGiftTopTipItemRender");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{giftAtlas:{default:null,type:cc.SpriteAtlas}},afterLoad:function(){this.taskNode=cc.find("task",this.node),this.descLabel=cc.find("task/layout/label",this.node).getComponent(cc.Label),this.scoreLabel=cc.find("task/progressBar/number",this.node).getComponent(cc.Label),this.progressBar=cc.find("task/progressBar",this.node).getComponent(cc.ProgressBar),this.taskIconSprite=cc.find("task/layout/icon",this.node).getComponent(cc.Sprite),this.medalNode=cc.find("medal",this.node),this.meadlIconSprite=cc.find("medal/layout/icon",this.node).getComponent(cc.Sprite),this.meadlprogressBarNode=cc.find("medal/medalProgressBar",this.node),this.meadlprogressBar=cc.find("medal/medalProgressBar",this.node).getComponent(cc.ProgressBar),this.medalScoreLabel=cc.find("medal/medalProgressBar/total/label",this.node).getComponent(cc.Label),this.node.on("touchstart",this.onTouchStart,this)},initData:function(e,t){e===i.constant.NEW_YEAR_TASK_TIP_MEDAL?(this.taskNode.active=!1,this.medalNode.active=!0,this.initMedalProgress()):(this.taskNode.active=!0,this.medalNode.active=!1,this.taskCfg=i.templateManager.getNewYearTaskDataById(t),this.taskData=i.player.taskModule.getNewYearTaskById(t),this.taskCfg&&this.taskData?(e=i.player.taskModule.getNewYearTaskDesc(this.taskCfg),t=i.player.taskModule.getNewYearTaskIcon(this.taskCfg),e=i.lang.getGameText(e),this.descLabel.string=e,e=this.taskCfg.taskValue[0],i.lang.updateLabelString(this.scoreLabel,[i.Utils.formatBigNumberForLabel(this.taskData.count),i.Utils.formatBigNumberForLabel(e)]),this.progressBar.progress=this.taskData.count/e,this.taskIconSprite.spriteFrame=this.giftAtlas.getSpriteFrame(t)):this.hideItem())},initMedalProgress:function(){this.medalList=i.JsonData.Medal,this.maxScore=this.medalList[this.medalList.length-1].point,this.curScore=Math.min(this.maxScore,i.player.taskModule.getNewYearTaskScore()),this.curLevel=i.player.taskModule.getNewYearTaskLevel();for(var e=Math.min(this.curLevel+1,this.medalList[this.medalList.length-1].id),t=(e=i.templateManager.getNewYearTaskMedalById(e),this.meadlprogressBarNode.width),a=this.maxScore,n=this.curScore,o=[],s=0,r=0,c=0;c<this.medalList.length;c++){var l=this.medalList[c].point,d=cc.find("position"+(c+1),this.meadlprogressBarNode);i.Logger.debug("boxRootNode: "+d.x+", value: "+l+", totalStar: "+a+", totalHeight: "+t),l=c===this.medalList.length-1?1-r:(d.x-s)/t,o.push(l),r+=l,s=d.x}for(var h=0,u=0,p=0;p<this.medalList.length;p++){var g=this.medalList[p].point-u,_=n-g,m=o[p];if(!(0<=_)){h+=n/g*m;break}h+=m,n=_,u=this.medalList[p].point}this.medalScoreLabel.string=this.curScore,this.meadlprogressBar.progress=h,this.meadlIconSprite.spriteFrame=this.giftAtlas.getSpriteFrame(e.icon)},onTouchStart:function(){this.hideItem()},hideItem:function(){this.node.stopAllActions();var e=cc.moveTo(.2,cc.v2(0,cc.winSize.height/2+this.node.height)),t=cc.callFunc(function(){this.node.active=!1},this);t=cc.sequence(e,t),this.node.runAction(t)}}),cc._RF.pop()},{}],SpriteFrameSet:[function(e,t){"use strict";cc._RF.push(t,"97019Q80jpE2Yfz4zbuCZBq","SpriteFrameSet");var i=t,a=cc.Class({name:"SpriteFrameSet",properties:{language:"",spriteFrame:cc.SpriteFrame}});i.exports=a,cc._RF.pop()},{}],StarNode:[function(e,t){"use strict";cc._RF.push(t,"f9cd55bwf5KAoWYPM5+Uusz","StarNode"),t.exports=function(e,t,i){this.x=e,this.y=t,this.f=0,this.h=0,this.g=0,this.opened=!1,this.closed=!1,this.parent=null,this.walkable=0!=i},cc._RF.pop()},{}],StartBuffPage:[function(e,t){"use strict";cc._RF.push(t,"539e0MDajNLta0TfISLJ7S0","StartBuffPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{startBuffItemRender:cc.Prefab,layoutNode:cc.Node},onLoadPage:function(){this.anim=this.node.getComponent(cc.Animation),this.adButtonNode=cc.find("content/adButton",this.node)},showPageBegan:function(){i.Logger.debug("show start buffs page this.data.buffsDataList =",this.data.buffsDataList),this.init(),this.anim.play("giftPage"),this.adButtonNode.active=!1},showPageEnded:function(){i.ttAdManager.showGridAd(cc.find("adNode",this.node),this.getPageType())},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.SHOW_AD_OVER_START_BUFFS,function(){return e.onShowADOver()})},init:function(){var e=this;this.canClick=!1,this.allBuffsList=[];for(var t=0;t<this.data.buffsDataList.length;t++)!function(t){var a=e.data.buffsDataList[t],n=i.templateManager.getStartBuffDataById(a[0]),o=cc.instantiate(e.startBuffItemRender),s=o.getComponent("BuffItemRender");s.host=e,o.parent=e.layoutNode,s.init(n,a[1]),e.allBuffsList.push({id:a[0],num:a[1]}),o.opacity=1,o.runAction(cc.sequence(cc.delayTime(.75+15*t/60),cc.callFunc(function(){o.opacity=255,s.playAnim()},e)))}(t);this.node.runAction(cc.sequence(cc.delayTime(1.7),cc.callFunc(function(){this.canClick=!0,this.adButtonNode.active=!0},this)))},isCanClick:function(){return this.canClick},chooseOne:function(e,t){i.battleScene.setStartBuffs([{id:e,num:t}],this.allBuffsList),i.soundsUtil.playSoundEffect("common_button_click"),this.closePage()},onClickAd:function(){this.canClick&&(i.soundsUtil.playSoundEffect("common_button_click"),i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,i.GameEventType.SHOW_AD_OVER_START_BUFFS))},onShowADOver:function(){i.battleScene.setStartBuffs(this.allBuffsList,this.allBuffsList),this.closePage()},closePageBegan:function(){i.ttAdManager.hideGridAd(),this.layoutNode.removeAllChildren(!0)},closePageEnded:function(){i.battleScene.checkStartPopUp()}}),cc._RF.pop()},{}],StorageUtil:[function(e,t){"use strict";cc._RF.push(t,"b0c96f1L5pPB7wCvWH+DMtj","StorageUtil");var i=e,a=i("encryptjs"),n=i("Utils"),o=cc.Class({statics:{_dataKeyCache:[],_dataObjCache:{},_initFinish:!1,_isCanSave:!0,init:function(){var e;this._initFinish||(e=new cc.Node,cc.game.addPersistRootNode(e),cc.director.getScheduler().schedule(function(){o.syncData()},e,.2,cc.macro.REPEAT_FOREVER,0,!1),this._initFinish=!0),this._isCanSave=!0},syncData:function(){var e,t;0<o._dataKeyCache.length&&(e=o._dataKeyCache[0],t=o._dataObjCache[e],e&&null!=t&&this.saveData(e,t),o._dataKeyCache.splice(0,1))},save:function(e,t,i){this._initFinish||this.init(),i?this.saveData(e,t):(-1===this._dataKeyCache.indexOf(e)&&this._dataKeyCache.push(e),this._dataObjCache[e]=t)},saveData:function(e,t){this._isCanSave?(t=JSON.stringify(t),t=a.encrypt(t,n.secretKey(),256),cc.sys.localStorage.setItem(e,t)):cc.log("saveData fail this._isCanSave :",this._isCanSave)},saveForceData:function(e,t){var i=JSON.stringify(t);t=a.encrypt(i,n.secretKey(),256),cc.sys.localStorage.setItem(e,t),cc.log("saveForceData key : "+e+" data : "+i)},getData:function(e){return this._initFinish||this.init(),e=cc.sys.localStorage.getItem(e),a.decrypt(e,n.secretKey(),256)},isCanSaveData:function(){return this._isCanSave},delete:function(e){cc.sys.localStorage.removeItem(e);for(var t=0;t<this._dataKeyCache.length;t++)if(this._dataKeyCache[t]==e){this._dataKeyCache.splice(t,1);break}this._dataObjCache.hasOwnProperty(e)&&delete this._dataObjCache[e]},clearAll:function(){this._isCanSave=!1,cc.sys.localStorage.clear(),this._dataKeyCache=[],this._dataObjCache={}},saveAllCache:function(){for(var e=Object.keys(this._dataObjCache),t=0;t<e.length;t++)this.saveData(e[t],this._dataObjCache[e[t]])}}});cc._RF.pop()},{}],SubscribeItemRender:[function(e,t){"use strict";cc._RF.push(t,"a0940wnOMtI0pJDPnLf5PSz","SubscribeItemRender");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{},afterLoad:function(){this.descLabel=cc.find("desc",this.node).getComponent(cc.Label),this.rewardNumLabel=cc.find("rewards/number",this.node).getComponent(cc.Label),this.checkedNode=cc.find("rewards/checked",this.node),this.subscribeButtonNode=cc.find("subscribeButton",this.node),this.subscribedNode=cc.find("subscribed",this.node)},registerGameListener:function(){},updateButtonShow:function(){this.isReceiveOver=i.player.inviteFriendModule.isSubscribeReceiveOver(this.subscribeType);var e=i.player.inviteFriendModule.isAlwaysOpenSubscribe(this.subscribeType);this.checkedNode.active=this.isReceiveOver||e,e=i.player.inviteFriendModule.isCanClickSubscribe(this.subscribeType),console.log("updateButtonShow this.subscribeType = "+this.subscribeType+" isCanClick = "+e),this.subscribeButtonNode.active=e,this.subscribedNode.active=!e},initData:function(e){this.subscribeId=e.id,this.subscribeType=e.type,this.desc=e.desc,this.subscribeRewards=e.reward,this.descLabel.string=i.lang.getGameText(this.desc),this.rewardNumLabel.string=this.subscribeRewards[0].value,this.templateId=i.player.inviteFriendModule.getTemplateIdByType(this.subscribeType),this.updateButtonShow()},updateSubscribeState:function(e){console.log("updateSubscribeState isSubscribe = "+e),e?(this.isReceiveOver=i.player.inviteFriendModule.isSubscribeReceiveOver(this.subscribeType),this.isReceiveOver?this.subscribeType==i.constant.WX_SUBSCRIBE_TYPE_OFFLINE?i.BI.onEvent(i.biConstant.EVENT_TYPE_COUNT,i.biConstant.EVENT_ID_COUNT_SUBSCRIBE_AGREE_1):this.subscribeType==i.constant.WX_SUBSCRIBE_TYPE_POWER?i.BI.onEvent(i.biConstant.EVENT_TYPE_COUNT,i.biConstant.EVENT_ID_COUNT_SUBSCRIBE_AGREE_2):this.subscribeType==i.constant.WX_SUBSCRIBE_TYPE_SIGN&&i.BI.onEvent(i.biConstant.EVENT_TYPE_COUNT,i.biConstant.EVENT_ID_COUNT_SUBSCRIBE_AGREE_3):(i.player.itemModule.dropItem(this.subscribeRewards[0].key,this.subscribeRewards[0].value,!0,i.constant.ITEM_ADD_SOURCE_SUBSCRIBE),console.log("setSubscribeReceiveOver this.subscribeType = "+this.subscribeType),i.player.inviteFriendModule.setSubscribeReceiveOver(this.subscribeType),this.subscribeType==i.constant.WX_SUBSCRIBE_TYPE_OFFLINE?i.BI.onEvent(i.biConstant.EVENT_TYPE_COUNT,i.biConstant.EVENT_ID_COUNT_SUBSCRIBE_REWARD_1):this.subscribeType==i.constant.WX_SUBSCRIBE_TYPE_POWER?i.BI.onEvent(i.biConstant.EVENT_TYPE_COUNT,i.biConstant.EVENT_ID_COUNT_SUBSCRIBE_REWARD_2):this.subscribeType==i.constant.WX_SUBSCRIBE_TYPE_SIGN&&i.BI.onEvent(i.biConstant.EVENT_TYPE_COUNT,i.biConstant.EVENT_ID_COUNT_SUBSCRIBE_REWARD_3)),console.log("setSubscribeTime this.subscribeType = "+this.subscribeType),i.player.inviteFriendModule.setSubscribeTime(this.subscribeType,28800),i.player.inviteFriendModule.setSubscribePurview(this.subscribeType),this.updateButtonShow(),this.subscribeType==i.constant.WX_SUBSCRIBE_TYPE_OFFLINE?i.BI.onEvent(i.biConstant.EVENT_TYPE_COUNT,i.biConstant.EVENT_ID_COUNT_SUBSCRIBE_ACCEPT_1):this.subscribeType==i.constant.WX_SUBSCRIBE_TYPE_POWER?i.BI.onEvent(i.biConstant.EVENT_TYPE_COUNT,i.biConstant.EVENT_ID_COUNT_SUBSCRIBE_ACCEPT_2):this.subscribeType==i.constant.WX_SUBSCRIBE_TYPE_SIGN&&i.BI.onEvent(i.biConstant.EVENT_TYPE_COUNT,i.biConstant.EVENT_ID_COUNT_SUBSCRIBE_ACCEPT_3)):this.subscribeType==i.constant.WX_SUBSCRIBE_TYPE_OFFLINE?i.BI.onEvent(i.biConstant.EVENT_TYPE_COUNT,i.biConstant.EVENT_ID_COUNT_SUBSCRIBE_REJECT_1):this.subscribeType==i.constant.WX_SUBSCRIBE_TYPE_POWER?i.BI.onEvent(i.biConstant.EVENT_TYPE_COUNT,i.biConstant.EVENT_ID_COUNT_SUBSCRIBE_REJECT_2):this.subscribeType==i.constant.WX_SUBSCRIBE_TYPE_SIGN&&i.BI.onEvent(i.biConstant.EVENT_TYPE_COUNT,i.biConstant.EVENT_ID_COUNT_SUBSCRIBE_REJECT_3)},onClickSubscribe:function(){console.log("onClickSubscribe this.templateId = "+this.templateId);var e=this;this.subscribeType!=i.constant.WX_SUBSCRIBE_TYPE_VERSION_UPDATE?wx&&wx.requestSubscribeMessage&&this.templateId&&(console.log("requestSubscribeMessage this.templateId = "+this.templateId),wx.requestSubscribeMessage({tmplIds:[this.templateId],success:function(t){console.log("requestSubscribeMessage success res = ",t),i.ttAdManager.updateSubscriptionsSetting(),t=t[e.templateId]&&"accept"==t[e.templateId],e.updateSubscribeState(t),e.subscribeType==i.constant.WX_SUBSCRIBE_TYPE_OFFLINE?i.BI.onEvent(i.biConstant.EVENT_TYPE_COUNT,i.biConstant.EVENT_ID_COUNT_SUBSCRIBE_SHOW_1):e.subscribeType==i.constant.WX_SUBSCRIBE_TYPE_POWER?i.BI.onEvent(i.biConstant.EVENT_TYPE_COUNT,i.biConstant.EVENT_ID_COUNT_SUBSCRIBE_SHOW_2):e.subscribeType==i.constant.WX_SUBSCRIBE_TYPE_SIGN&&i.BI.onEvent(i.biConstant.EVENT_TYPE_COUNT,i.biConstant.EVENT_ID_COUNT_SUBSCRIBE_SHOW_3)}})):i.config.needSDKUid&&wx&&wx.requestSubscribeWhatsNew&&(i.BI.onEvent(i.biConstant.EVENT_TYPE_COUNT,i.biConstant.EVENT_ID_COUNT_SUBSCRIBE_SHOW_4),wx.requestSubscribeWhatsNew({msgType:1,success:function(t){console.log("requestSubscribeWhatsNew success res = ",t),t&&(console.log("res.confirm = "+t.confirm),i.ttAdManager.updateSubscriptionsSetting(),t.confirm&&(i.ttAdManager.versionUpdateState=2,i.BI.onEvent(i.biConstant.EVENT_TYPE_COUNT,i.biConstant.EVENT_ID_COUNT_SUBSCRIBE_ACCEPT_4)),e.updateSubscribeState(t.confirm))},fail:function(e){console.error(e)}}))},onClickReward:function(){i.Logger.debug("onClickReward")}}),cc._RF.pop()},{}],SubscribePopUp:[function(e,t){"use strict";cc._RF.push(t,"40db7qObN5GTbDy7CFbyvwI","SubscribePopUp");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{subscribeItemRenderPrefab:{default:null,type:cc.Prefab}},registerGameListener:function(){},onLoadPage:function(){this.scrollView=cc.find("content/scrollView",this.node).getComponent(cc.ScrollView),this.content=cc.find("content/scrollView/view/content",this.node),this.itemObjList=[]},showPageBegan:function(){this.hideAllItem(),this.initData()},showPageEnded:function(){},closePageBegan:function(){},closePageEnded:function(){},updateSubscribeList:function(){this.subscribeList=i.JsonData.Subscribe},initData:function(){this.inviteFriendNum=-1,this.subscribeList=null,this.hideAllItem(),this.scrollView.scrollToTop(0),this.checkIndex=0,this.updateSubscribeList()},hideAllItem:function(){for(var e=0;e<this.itemObjList.length;e++)this.itemObjList[e].node.active=!1},onClickClose:function(){this.closePage();var e=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_CHILD);e&&e.checkSubscribeButtonRed()},createItem:function(){var e=cc.instantiate(this.subscribeItemRenderPrefab);this.content.addChild(e),((e=e.getComponent("SubscribeItemRender")).host=this).itemObjList.push(e)},update:function(){var e,t;this.subscribeList&&this.checkIndex<this.subscribeList.length&&(this.itemObjList.length<=this.checkIndex&&this.createItem(),e=this.subscribeList[this.checkIndex],(t=this.itemObjList[this.checkIndex]).node.active=!0,t.initData(e),this.checkIndex++)}}),cc._RF.pop()},{}],SwitchChapterCloudPopUp:[function(e,t){"use strict";cc._RF.push(t,"908a0s8OZFIubDKztv4opzj","SwitchChapterCloudPopUp");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{},onLoadPage:function(){this.cloudEffect=cc.find("chapter_switch_cloud",this.node).getComponent(cc.Animation)},showPageBegan:function(){var e=this;this.cloudEffect.play("cloud_enter").once(cc.Animation.EventType.FINISHED,function(){var t=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_CHILD);t&&(t.isSwitchChapter=!0),i.gameScene.mainPage.changeMainPageTag(i.constant.MAIN_PAGE_TAG_CHILD),e.cloudEffect.play("cloud_stand")})},showPageEnded:function(){},runOutEffect:function(){var e=this;this.scheduleOnce(function(){e.cloudEffect.play("cloud_out").once(cc.Animation.EventType.FINISHED,function(){e.closePage()})},.2)},onClickClose:function(){this.closePage()}}),cc._RF.pop()},{}],TTAdManager:[function(e,t){"use strict";cc._RF.push(t,"33a49QqnqVFrouDEfRoQW2G","TTAdManager");var i=e("Aft");i.TTAdManager=cc.Class({statics:{_instance:null,getInstance:function(){return this._instance||(this._instance=new i.TTAdManager),this._instance}},properties:{_lastLoadAdTime:0,itemSettings:null},randomShareData:function(e){var t,a;e===i.constant.SHARE_TYPE_VIP&&i.nativeManager.shareVipDataList&&0<i.nativeManager.shareVipDataList.length?(t=i.Utils.getRandomInt(0,i.nativeManager.shareVipDataList.length-1),t=i.nativeManager.shareVipDataList[t],i.nativeManager.share_title=t.title,i.nativeManager.share_image=t.imageUrl,i.nativeManager.share_image=i.nativeManager.share_image.trim(),i.nativeManager.share_imageUrlId=t.imageUrlId):e===i.constant.SHARE_TYPE_POWER&&i.nativeManager.sharePowerDataList&&0<i.nativeManager.sharePowerDataList.length?(t=i.Utils.getRandomInt(0,i.nativeManager.sharePowerDataList.length-1),t=i.nativeManager.sharePowerDataList[t],i.nativeManager.share_title=t.title,i.nativeManager.share_image=t.imageUrl,i.nativeManager.share_image=i.nativeManager.share_image.trim(),i.nativeManager.share_imageUrlId=t.imageUrlId):e===i.GameEventType.SHOW_SHARE_ALLIANCE_SHARE&&i.nativeManager.wechatShareAppGroup&&0<i.nativeManager.wechatShareAppGroup.length?(a=i.Utils.getRandomInt(0,i.nativeManager.wechatShareAppGroup.length-1),a=i.nativeManager.wechatShareAppGroup[a],i.nativeManager.share_title=a.title,i.nativeManager.share_image=a.imageUrl,i.nativeManager.share_image=i.nativeManager.share_image.trim(),i.nativeManager.share_imageUrlId=a.imageUrlId):i.nativeManager.shareDataList&&0<i.nativeManager.shareDataList.length&&(a=i.Utils.getRandomInt(0,i.nativeManager.shareDataList.length-1),a=i.nativeManager.shareDataList[a],i.nativeManager.share_title=a.title,i.nativeManager.share_image=a.imageUrl,i.nativeManager.share_image=i.nativeManager.share_image.trim(),i.nativeManager.share_imageUrlId=a.imageUrlId)},loadAd:function(){i.config.needSDKUid&&(this.wxAd?3e3<=i.timeUtil.getTime()-this._lastLoadAdTime&&(console.log("loadAd"),this.wxAdLoad()):(console.log("initWXAd"),this.initWXAd(),this._lastLoadAdTime=i.timeUtil.getTime()))},loadAdError:function(e){i.Logger.debug("==loadAdError=="+e),i.BI.onEvent(i.biConstant.EVENT_TYPE_AD,i.biConstant.EVENT_ID_AD_LOAD_ERROR,e="error:"+e)},loadAdFinish:function(){i.Logger.debug("==loadAdFinish=="),this._isLoadAd=!0,i.BI.onEvent(i.biConstant.EVENT_TYPE_AD,i.biConstant.EVENT_ID_AD_LOAD_OVER)},showRewardAd:function(){i.Logger.debug("== showRewardAd =="),i.BI.onEvent(i.biConstant.EVENT_TYPE_AD,i.biConstant.EVENT_ID_AD_CLICK_SHOW),cc.sys.isNative||this.wxAdShow(),this._isLoadAd=!1},adShowError:function(e){this._isLoadAd=!1,i.Logger.debug("==adShowError=="+e),i.BI.onEvent(i.biConstant.EVENT_TYPE_AD,i.biConstant.EVENT_ID_AD_SHOW_ERROR,e="error:"+e),i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD_ERROR,{})},adStartShow:function(){i.Logger.debug("==adStartShow=="),i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD_START,{}),i.BI.onEvent(i.biConstant.EVENT_TYPE_AD,i.biConstant.EVENT_ID_AD_SHOW_START)},adSkip:function(){i.Logger.debug("==adSkip=="),i.BI.onEvent(i.biConstant.EVENT_TYPE_AD,i.biConstant.EVENT_ID_AD_SKIP),i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD_SKIP,{})},adBarClick:function(){i.Logger.debug("==adBarClick=="),i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD_CLICK_BAR,{}),i.BI.onEvent(i.biConstant.EVENT_TYPE_AD,i.biConstant.EVENT_ID_AD_CLICK_BAR)},adShowFinish:function(){i.Logger.debug("==adShowFinish=="),i.BI.onEvent(i.biConstant.EVENT_TYPE_AD,i.biConstant.EVENT_ID_AD_SHOW_OVER),i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD_SHOW_FINISH,{})},adRewardVerify:function(){i.Logger.debug("==adRewardVerify=="),i.BI.onEvent(i.biConstant.EVENT_TYPE_AD,i.biConstant.EVENT_ID_AD_REWARD_VERIFY),i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD_REWARD,{})},adClose:function(){i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD_CLOSE,{}),i.BI.onEvent(i.biConstant.EVENT_TYPE_AD,i.biConstant.EVENT_ID_AD_CLICK_CLOSE)},isLoadAD:function(){return this._isLoadAd},initWXAd:function(){var e=this;this.wxAd||wx&&wx.createRewardedVideoAd&&(console.log("initWXAd*******************************"),i.ttAdManager.adStateCode=-1,this.wxAd=wx.createRewardedVideoAd({adUnitId:"adunit-65f74ac02d6a5c56"}),this.wxAd.onError(function(e){e?(console.log("onError \u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d\u5931\u8d25 res = "+e),e.errCode?(console.log("onError \u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d\u5931\u8d25 res = "+e+" errCode = "+e.errCode),i.ttAdManager.adStateCode=e.errCode):i.ttAdManager.adStateCode=99999,i.ttAdManager.loadAdError(JSON.stringify(e))):i.ttAdManager.loadAdError("no res")}),this.wxAd.onLoad(function(){console.log("onLoad \u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d\u6210\u529f"),i.ttAdManager.loadAdFinish(),i.ttAdManager.adStateCode=-1}),this.wxAd.onClose(function(t){console.log("videoAd onClose",t),e._lastLoadAdTime=i.timeUtil.getTime(),t&&t.isEnded||void 0===t?(console.log("videoAd play success"),i.ttAdManager.adRewardVerify(),i.ttAdManager.adClose()):(console.log("videoAd play fail"),i.ttAdManager.adSkip())}),this.showShareMenu())},wxAdLoad:function(){this.wxAd&&(i.BI.onEvent(i.biConstant.EVENT_TYPE_AD,i.biConstant.EVENT_ID_AD_LOAD_START),this._lastLoadAdTime=i.timeUtil.getTime(),console.log("wxAdLoad start"),this.wxAd.load().then(function(){console.log("wxAdLoad \u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d\u6210\u529f"),i.ttAdManager.adStateCode=-1,i.ttAdManager.loadAdFinish()}).catch(function(e){e?(console.log("wxAdLoad \u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d\u5931\u8d25 err = "+e),e.errCode?(console.log("wxAdLoad \u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d\u5931\u8d25 err = "+e+" errCode = "+e.errCode),i.ttAdManager.adStateCode=e.errCode):i.ttAdManager.adStateCode=99999,i.ttAdManager.loadAdError(JSON.stringify(e))):i.ttAdManager.loadAdError("no err")}))},wxAdShow:function(){this.wxAd&&this.wxAd.show().then(function(){console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a\u6210\u529f"),i.ttAdManager.adStartShow()}).catch(function(e){console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a\u5931\u8d25"),e?i.ttAdManager.adShowError(JSON.stringify(e)):i.ttAdManager.adShowError("no err")})},showShareMenu:function(){i.config.needSDKUid&&(console.log("showShareMenu*********************************************"),wx&&wx.showShareMenu&&wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}),i.nativeManager.share_friend_title||(i.nativeManager.share_friend_title="\u4f11\u95f2\u4e09\u56fd\u5854\u9632\uff0c\u8f7b\u8f7b\u677e\u677e\u4e00\u7edf\u5929\u4e0b"),i.nativeManager.share_title||(i.nativeManager.share_title="\u4f11\u95f2\u4e09\u56fd\u5854\u9632\uff0c\u8f7b\u8f7b\u677e\u677e\u4e00\u7edf\u5929\u4e0b"),i.nativeManager.share_imageUrlId||(i.nativeManager.share_imageUrlId="37LhZ9BmRPmIP2A+Ws2iMA=="),i.nativeManager.share_image||(i.nativeManager.share_image="https://mmocgame.qpic.cn/wechatgame/HYsn6zZd2c0VKibUFNkLUgwxBTx3KXK3oGgiaOR7KIHts2OfeUNVls8tScOwf7hdxR/0",i.nativeManager.share_image=i.nativeManager.share_image.trim()),wx&&wx.onShareAppMessage&&wx.onShareAppMessage(function(){return i.tdManager.onShareEvent(),i.ttAdManager.randomShareData(),{title:i.nativeManager.share_title,imageUrlId:i.nativeManager.share_imageUrlId,imageUrl:i.nativeManager.share_image,query:"openId="+i.nativeManager._webDeviceId}}),wx&&wx.onShareTimeline&&wx.onShareTimeline(function(){return{title:i.nativeManager.share_friend_title,query:"openId="+i.nativeManager._webDeviceId}}))},upLoadInviteNum:function(e){console.log("upLoadInviteNum num = "+e),i.player.serviceModule.setFriendInvitationNumber(e,function(t){t?(console.log("upLoadInviteNum success"),i.player.inviteFriendModule.setLastTimeInviteNum(e)):console.log("upLoadInviteNum fail")}),i.player.inviteFriendModule.setOldPlayer()},upLoadInviteOpenId:function(e){console.log("upLoadInviteOpenId openId = "+e),i.player.inviteFriendModule.saveInviteOpenId(e),i.player.serviceModule.setFriendInvitation(e,function(e){e?(i.player.inviteFriendModule.cleanInviteOpenId(),console.log("upLoadInviteOpenId success")):console.log("upLoadInviteOpenId fail")}),i.player.inviteFriendModule.setOldPlayer()},checkKvDataList:function(e){i.nativeManager.giftNum=0;for(var t=i.nativeManager.inviteNum=0;t<e.length;t++){var a=e[t];"1"==a.key?i.nativeManager.giftNum=Math.floor(a.value):"2"==a.key&&(i.nativeManager.inviteNum=Math.floor(a.value))}i.eventBus.dispatchEvent(i.GameEventType.UPDATE_GIFT_DATA),console.log("checkKvDataList this.giftNum = "+i.nativeManager.giftNum+" this.inviteNum = "+i.nativeManager.inviteNum);var n=i.player.inviteFriendModule.getLastTimeInviteNum();console.log("lastTimeInviteNum = "+n),0<i.nativeManager.inviteNum&&i.nativeManager.inviteNum>n&&this.upLoadInviteNum(i.nativeManager.inviteNum),i.eventBus.dispatchEvent(i.GameEventType.MAIN_UPDATE_GIFT_RED)},getUserInteractiveStorage:function(){var e;i.config.needSDKUid&&(e=this,wx&&wx.getUserInteractiveStorage?wx.getUserInteractiveStorage({keyList:["1","2"],success:function(t){console.log("getUserInteractiveStorage",t);var i=t.encryptedData,a=t.iv;t=t.cloudID,console.log("encryptedData = "+i+" iv = "+a+" cloudID = "+t),wx.cloud.callFunction({name:"getUserInteractiveStorage",data:{userInteractive:wx.cloud.CloudID(t)}}).then(function(t){console.log("cloud getUserInteractiveStorage",t),t&&t.result&&t.result.userInteractive&&t.result.userInteractive.data&&t.result.userInteractive.data.kv_list&&((t=t.result.userInteractive.data.kv_list)&&0<t.length?e.checkKvDataList(t):e.checkKvDataList([]))})}}):this.checkKvDataList([]))},isOnceSubscribeOpen:function(e){return!(!i.config.needSDKUid||!i.ttAdManager.itemSettings||!i.ttAdManager.itemSettings[e]||"accept"!=i.ttAdManager.itemSettings[e])},isVersionSubscribeOpen:function(){return!!i.config.needSDKUid&&2==i.ttAdManager.versionUpdateState},isSubscribeOpenInteractive:function(){return!(!i.config.needSDKUid||!i.ttAdManager.itemSettings||!i.ttAdManager.itemSettings.SYS_MSG_TYPE_INTERACTIVE||"accept"!=i.ttAdManager.itemSettings.SYS_MSG_TYPE_INTERACTIVE)},isSubscribeOpenRank:function(){return!(!i.config.needSDKUid||!i.ttAdManager.itemSettings||!i.ttAdManager.itemSettings.SYS_MSG_TYPE_RANK||"accept"!=i.ttAdManager.itemSettings.SYS_MSG_TYPE_RANK)},isSubscribeRejectInteractive:function(){return!(!i.config.needSDKUid||!i.ttAdManager.itemSettings||!i.ttAdManager.itemSettings.SYS_MSG_TYPE_INTERACTIVE||"reject"!=i.ttAdManager.itemSettings.SYS_MSG_TYPE_INTERACTIVE)},isSubscribeRejectRank:function(){return!(!i.config.needSDKUid||!i.ttAdManager.itemSettings||!i.ttAdManager.itemSettings.SYS_MSG_TYPE_RANK||"reject"!=i.ttAdManager.itemSettings.SYS_MSG_TYPE_RANK)},updateSubscriptionsSetting:function(){wx.getSetting({withSubscriptions:!0,success:function(e){console.log("getSetting ",e);var t,a,n=e.subscriptionsSetting;n&&(i.ttAdManager.subscriptionsSetting=n).mainSwitch&&n.itemSettings&&(i.ttAdManager.itemSettings=n.itemSettings,t=i.ttAdManager.isOnceSubscribeOpen(i.constant.WX_TEMPLATE_ID_OFFLINE),a=i.ttAdManager.isOnceSubscribeOpen(i.constant.WX_TEMPLATE_ID_POWER),e=i.ttAdManager.isOnceSubscribeOpen(i.constant.WX_TEMPLATE_ID_SIGN),n=i.ttAdManager.isOnceSubscribeOpen(i.constant.WX_TEMPLATE_ID_VERSION_UPDATE),console.log("update isOpenOffline = "+t+" isOpenPower = "+a+" isOpenSign = "+e+" isOpenUpdate = "+n))}}),wx&&wx.getWhatsNewSubscriptionsSetting&&wx.getWhatsNewSubscriptionsSetting({msgType:1,success:function(e){console.log("getWhatsNewSubscriptionsSetting success res = ",e),e&&(console.log("res.status = "+e.status),1!=e.status&&2!=e.status&&4!=e.status||(i.ttAdManager.versionUpdateState=e.status))},fail:function(e){console.error(e)}})},registerWxListener:function(){var e,t,a=this;i.ttAdManager.itemSettings=null,i.ttAdManager.versionUpdateState=0,i.ttAdManager.subscriptionsSetting=null,i.config.needSDKUid&&(wx.cloud.init(),this.updateSubscriptionsSetting(),wx.getOpenDataContext().postMessage({message:"syncMyOpenId",openId:i.nativeManager._webDeviceId}),wx&&wx.setMessageToFriendQuery&&wx.setMessageToFriendQuery({shareMessageToFriendScene:1}),wx&&wx.onShareMessageToFriend&&wx.onShareMessageToFriend(function(e){console.log("wx.shareMessageToFriend",e)}),wx&&wx.getLaunchOptionsSync&&(e=wx.getLaunchOptionsSync())&&(console.log("wx.getLaunchOptionsSync",e),(t=i.player.inviteFriendModule.getInviteOpenId())?this.upLoadInviteOpenId(t):(t=i.player.inviteFriendModule.isNewPlayer(),console.log("getLaunchOptionsSync \u9080\u8bf7\u6210\u529f \u9080\u8bf7\u6211\u7684openId = "+e.query.openId+" isNewPlayer = "+t),t&&e.query.openId?this.upLoadInviteOpenId(e.query.openId):e&&"1"===e.query.shareMessageToFriendScene&&(console.log("check friend reciveInvite shareMessageToFriendScene == 1"),wx.getOpenDataContext().postMessage({message:"reciveInvite"}),i.player.inviteFriendModule.setOldPlayer())),console.log("optionsSync.scene = "+e.scene),1001==e.scene||1089==e.scene||1103==e.scene||1104==e.scene?i.player.commonModule.setIsIntoFromMini():1023==e.scene?i.player.commonModule.setIsIntoFromDest():1014==e.scene?i.BI.onEvent(i.biConstant.EVENT_TYPE_COUNT,i.biConstant.EVENT_ID_COUNT_SUBSCRIBE_ENTER):1131!=e.scene&&1187!=e.scene||i.player.commonModule.setIsIntoFromFloatWindow()),wx&&wx.onShow&&wx.onShow(function(e){var t;console.log("wx.onShow",e),i.gameScene&&(i.gameScene.showGame(),i.gameScene.checkCustomerPowerReward(),i.gameScene.mainPage.setCachePageStatus(!0)),i.ttAdManager.updateSubscriptionsSetting(),e&&((t=i.player.inviteFriendModule.getInviteOpenId())?a.upLoadInviteOpenId(t):(t=i.player.inviteFriendModule.isNewPlayer(),console.log("onShow \u9080\u8bf7\u6210\u529f \u9080\u8bf7\u6211\u7684openId = "+e.query.openId+" isNewPlayer = "+t),t&&e.query.openId?a.upLoadInviteOpenId(e.query.openId):e&&"1"===e.query.shareMessageToFriendScene&&(console.log("check friend reciveInvite shareMessageToFriendScene == 1"),i.player.inviteFriendModule.setOldPlayer(),wx.getOpenDataContext().postMessage({message:"reciveInvite"}))),console.log("res.scene = "+e.scene),1001==e.scene||1089==e.scene||1103==e.scene||1104==e.scene?i.player.commonModule.setIsIntoFromMini():1023==e.scene?i.player.commonModule.setIsIntoFromDest():1014==e.scene?i.BI.onEvent(i.biConstant.EVENT_TYPE_COUNT,i.biConstant.EVENT_ID_COUNT_SUBSCRIBE_ENTER):1131!=e.scene&&1187!=e.scene||i.player.commonModule.setIsIntoFromFloatWindow(),wx&&wx.setKeepScreenOn&&wx.setKeepScreenOn({keepScreenOn:!0}))}),wx&&wx.onHide&&wx.onHide(function(){console.log("wx.onHide"),i.gameScene&&i.gameScene.hideGame()}),wx&&wx.onAudioInterruptionBegin&&wx.onAudioInterruptionBegin(function(){console.log("wx.onAudioInterruptionBegin"),i.gameScene&&(i.gameScene.stopMusic(),i.gameScene.showGuideLimit(.5))}),wx&&wx.onAudioInterruptionEnd&&wx.onAudioInterruptionEnd(function(){console.log("wx.onAudioInterruptionEnd"),i.gameScene&&(i.gameScene.refuseMusic(),i.gameScene.showGuideLimit(.5))}))},hideShareMenu:function(){wx&&wx.hideShareMenu&&wx.hideShareMenu()},wxShare:function(e){i.config.needSDKUid&&wx&&wx.shareAppMessage&&(i.ttAdManager.randomShareData(e),wx.shareAppMessage({title:i.nativeManager.share_title,imageUrlId:i.nativeManager.share_imageUrlId,imageUrl:i.nativeManager.share_image,query:"openId="+i.nativeManager._webDeviceId}))},loadBannerAd:function(){var e=this;i.config.needSDKUid&&wx&&wx.createBannerAd&&(this.bannerAd||(this.bannerAd=wx.createBannerAd({adUnitId:"adunit-1608dcca8a5d3578",adIntervals:60,style:{left:0,top:0,width:300}}),this.bannerAd.onError(function(e){console.log("bannerAd show error ",e),e?i.BI.onEvent(i.biConstant.EVENT_TYPE_BANNER,i.biConstant.EVENT_ID_ALL_BANNER_LOAD_ERROR,JSON.stringify(e)):i.BI.onEvent(i.biConstant.EVENT_TYPE_BANNER,i.biConstant.EVENT_ID_ALL_BANNER_LOAD_ERROR,"no error")}),this.bannerAd.onLoad(function(){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),this.bannerAd.onResize(function(t){var i=wx.getSystemInfoSync(),a=cc.view.getScaleY();e.bannerAd.style.top=parseInt(cc.winSize.height*a/i.pixelRatio-t.height),e.bannerAd.style.left=parseInt((i.screenWidth-300)/2)})))},showBannerAd:function(e,t){i.config.needSDKUid&&((e=e.getComponent(cc.Widget))&&e.isAlignBottom&&(e.bottom=0,e.updateAlignment()),this.bannerAd||this.loadBannerAd(),this.bannerAd.show().catch(function(e){console.log("banner show error ",e),e?i.BI.onEvent(i.biConstant.EVENT_TYPE_BANNER,i.biConstant.EVENT_ID_ALL_BANNER_SHOW_ERROR,JSON.stringify(e)):i.BI.onEvent(i.biConstant.EVENT_TYPE_BANNER,i.biConstant.EVENT_ID_ALL_BANNER_SHOW_ERROR,"no error")}).then(function(){console.log("banner \u5e7f\u544a\u663e\u793a"),i.BI.onEvent(i.biConstant.EVENT_TYPE_BANNER,i.biConstant.EVENT_ID_ALL_BANNER_SHOW_SUCCESS,t)}))},hideBannerAd:function(){i.config.needSDKUid&&this.bannerAd&&this.bannerAd.hide()},loadGridAd:function(){var e=this;i.config.needSDKUid&&wx&&wx.createGridAd&&(this.gridAd||(console.log("loadGridAd start!!!!"),this.gridAd=wx.createGridAd({adUnitId:"adunit-40ee7f0c23e04a98",adTheme:"white",gridCount:5,adIntervals:60,style:{left:0,top:0,width:300,opacity:.8}}),console.log("loadGridAd over!!!!"),this.gridAd.onError(function(t){console.log("gridAd load error ",t),e.needOtherBanner=!0,t?i.BI.onEvent(i.biConstant.EVENT_TYPE_GRID,i.biConstant.EVENT_ID_ALL_GRID_LOAD_ERROR,JSON.stringify(t)):i.BI.onEvent(i.biConstant.EVENT_TYPE_GRID,i.biConstant.EVENT_ID_ALL_GRID_LOAD_ERROR,"no error")}),this.gridAd.onLoad(function(){e.needOtherBanner=!1,console.log("grid \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")})))},showGridAd:function(e,t){var a,n,o,s;i.config.needSDKUid&&(this.needOtherBanner||i.player.commonModule.getWeChatOnlyShowBanner()?this.showBannerAd(e,t):((n=e.getComponent(cc.Widget))&&n.isAlignBottom&&(n.bottom=0,n.updateAlignment()),this.gridAd||this.loadGridAd(),this.gridAd&&(a=wx.getSystemInfoSync(),s=cc.view.getScaleX(),o=cc.view.getScaleY(),n=cc.v2(-e.width*e.anchorX,e.height*(1-e.anchorY)),n=e.convertToWorldSpaceAR(n),o=(cc.winSize.height-n.y)*o,s=e.width*s,s=parseInt(s/a.pixelRatio),this.gridAd.style.width=s,this.gridAd.style.top=parseInt(o/a.pixelRatio),this.gridAd.style.left=parseInt((a.screenWidth-s)/2),this.gridAd.show().catch(function(e){console.log("gridAd show error ",e),e?i.BI.onEvent(i.biConstant.EVENT_TYPE_BANNER,i.biConstant.EVENT_ID_ALL_GRID_SHOW_ERROR,JSON.stringify(e)):i.BI.onEvent(i.biConstant.EVENT_TYPE_BANNER,i.biConstant.EVENT_ID_ALL_GRID_SHOW_ERROR,"no error")}).then(function(){console.log("grid \u5e7f\u544a\u663e\u793a"),i.BI.onEvent(i.biConstant.EVENT_TYPE_BANNER,i.biConstant.EVENT_ID_ALL_GRID_SHOW_SUCCESS,t)}))))},hideGridAd:function(){i.config.needSDKUid&&this.gridAd&&(this.gridAd.hide(),this.bannerAd&&this.bannerAd.hide())},loadSingleGridCustomAd:function(e){var t,a,n,o;console.log("loadSingleGridCustomAd "),i.config.needSDKUid&&wx&&wx.createCustomAd&&!this.singleGridCustomAd&&((t=e.getComponent(cc.Widget))&&t.updateAlignment(),n=wx.getSystemInfoSync(),o=cc.view.getScaleX(),a=cc.view.getScaleY(),t=cc.v2(-e.width*e.anchorX,e.height*(1-e.anchorY)),t=o*(e=e.convertToWorldSpaceAR(t)).x,a=(cc.winSize.height-e.y)*a,o=cc.winSize.width*o/n.pixelRatio,o=Math.max(0,(n.screenWidth-o)/2),a=parseInt(a/n.pixelRatio),n=parseInt(t/n.pixelRatio+o),o="adunit-b7d098cc15d416fa",cc.sys.os!==cc.sys.OS_IOS&&cc.sys.os!==cc.sys.OS_OSX||(o="adunit-b518452e06a4e35c"),console.log("loadSingleGridCustomAd adUnitId = "+o),this.singleGridCustomAd=wx.createCustomAd({adUnitId:o,adIntervals:60,style:{left:n,top:a}}),this.singleGridCustomAd.onError(function(e){console.log("singleGridCustomAd load error ",e),e?i.BI.onEvent(i.biConstant.EVENT_TYPE_SINGLE_GRID,i.biConstant.EVENT_ID_ALL_SINGLE_GRID_LOAD_ERROR,JSON.stringify(e)):i.BI.onEvent(i.biConstant.EVENT_TYPE_SINGLE_GRID,i.biConstant.EVENT_ID_ALL_SINGLE_GRID_LOAD_ERROR,"no error")}),this.singleGridCustomAd.onLoad(function(){console.log("singleGridCustomAd \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}))},showSingleGridCustomAd:function(e){var t=this;this.singleGridCustomAdShowing=!0,i.config.needSDKUid&&wx&&wx.createCustomAd&&(this.singleGridCustomAd||this.loadSingleGridCustomAd(e),this.singleGridCustomAd&&this.singleGridCustomAd.show().catch(function(e){console.log("singleGridCustomAd show error ",e),e?i.BI.onEvent(i.biConstant.EVENT_TYPE_SINGLE_GRID,i.biConstant.EVENT_ID_ALL_SINGLE_GRID_SHOW_ERROR,JSON.stringify(e)):i.BI.onEvent(i.biConstant.EVENT_TYPE_SINGLE_GRID,i.biConstant.EVENT_ID_ALL_SINGLE_GRID_SHOW_ERROR,"no error")}).then(function(){console.log("singleGridCustomAd \u5e7f\u544a\u663e\u793a"),i.BI.onEvent(i.biConstant.EVENT_TYPE_SINGLE_GRID,i.biConstant.EVENT_ID_ALL_SINGLE_GRID_SHOW),t.singleGridCustomAdShowing||t.hideSingleGridCustomAd()}))},hideSingleGridCustomAd:function(){this.singleGridCustomAdShowing=!1,i.config.needSDKUid&&this.singleGridCustomAd&&this.singleGridCustomAd.hide()},isSingleGridAdShow:function(){return this.singleGridCustomAdShowing}}),window.jsCallbackAdLoadFinish=function(){i.ttAdManager.loadAdFinish()},window.jsCallbackAdLoadError=function(e){i.ttAdManager.loadAdError(e)},window.jsCallbackAdDidSucceed=function(){i.ttAdManager.adShowFinish()},window.jsCallbackAdDidStart=function(){i.ttAdManager.adStartShow()},window.jsCallbackAdDidError=function(){i.ttAdManager.adShowError()},window.jsCallbackAdDidClose=function(){i.ttAdManager.adClose()},window.jsCallbackAdRewardVerify=function(){i.ttAdManager.adRewardVerify()},window.jsCallbackAdBarClick=function(){i.ttAdManager.adBarClick()},i.ttAdManager=i.TTAdManager.getInstance(),cc._RF.pop()},{}],TalkingDataManager:[function(e,t){"use strict";cc._RF.push(t,"48750w7t9NPrJwuijipFVhA","TalkingDataManager");var i=e;i("Logger");var a=i("Aft");a.TalkingDataManager=cc.Class({statics:{_instance:null,getInstance:function(){return this._instance||(this._instance=new a.TalkingDataManager),this._instance}},properties:{_lastSendTime:0,_webEventList:[]},initTDWechat:function(){a.config.needSDKUid&&!this.tdWechat&&(this.tdWechat=GameGlobal.tdAppSdk)},setAccount:function(){},onMissionBagin:function(){},onMissionCompleted:function(){},onMissionFailed:function(){},onCustEvent:function(e,t,i){if(this.initTDWechat(),a.config.needSDKUid)try{var n;this.tdWechat&&(n={name:e,data:t,type:i},this._webEventList.push(n),a.player.isInitFinish()||this.onWebCustEvent())}catch(e){a.Logger.info("talking data error:",e.message)}},onRechargeStart:function(){},onRechargeSuccess:function(){},showRewardAdOver:function(){},onWebCustEvent:function(){if(!(this._webEventList.length<=0))try{var e,t,i,n;a.config.needSDKUid&&this.tdWechat&&(t=(e=this._webEventList[0]).name,i=e.data,n={id:t,label:e.type,params:{key1:i}},this.tdWechat.event(n),this._webEventList.splice(0,1))}catch(e){}},onShareEvent:function(){a.config.needSDKUid&&this.tdWechat&&this.tdWechat.share({title:a.nativeManager.share_title})}}),a.tdManager=a.TalkingDataManager.getInstance(),cc._RF.pop()},{}],TaskItemRender:[function(e,t){"use strict";cc._RF.push(t,"bb602/I3E1OWomQCubA9Ipj","TaskItemRender");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{},afterLoad:function(){this.scoreLabel=cc.find("score/number",this.node).getComponent(cc.Label),this.nameLabel=cc.find("name",this.node).getComponent(cc.Label),this.goButton=cc.find("goButton",this.node),this.nameNumberLabel=cc.find("number",this.goButton).getComponent(cc.Label),this.rewardButton=cc.find("getButton",this.node),this.gotNode=cc.find("got",this.node),this.rewardButtonEffect=cc.find("background/button_ring",this.rewardButton).getComponent(cc.Animation),this.rewardButtonEffect.stop(),this.rewardButtonEffect.setCurrentTime(0),this.rewardButtonEffect.play("button_ring"),this.diamondCountLabel=cc.find("rewards/diamond/number",this.node).getComponent(cc.Label),this.goldCountLabel=cc.find("rewards/gold/number",this.node).getComponent(cc.Label)},initData:function(e){var t;this.taskId=e,this.taskData=i.player.taskModule.getTaskDataById(this.taskId),this.taskData?(this.taskCfg=i.templateManager.getTaskById(e),this.scoreLabel.string=this.taskCfg.score,e=(t=this.taskCfg.taskValue)[0],2===t.length&&(e=t[1]),e=i.player.taskModule.resetTaskTarget(this.taskCfg.taskType,e),this.nameLabel.string=i.player.taskModule.getTaskDesc(this.taskId),this.taskData.isReward?(this.goButton.active=!1,this.rewardButton.active=!1,this.gotNode.active=!0):this.taskData.isFinish?(this.goButton.active=!1,this.gotNode.active=!1,this.rewardButton.active=!0):(this.goButton.active=!0,this.gotNode.active=!1,this.rewardButton.active=!1),i.lang.updateLabelString(this.nameNumberLabel,[i.Utils.formatBigNumberForLabel(this.taskData.count),i.Utils.formatBigNumberForLabel(e)]),this.diamondCountLabel.string=i.Utils.formatBigNumberForLabel(this.taskCfg.diamond),this.goldCountLabel.string=i.Utils.formatBigNumberForLabel(i.player.commonModule.getHangUpReceiveCoin(this.taskCfg.coin))):this.node.active=!1},onClickGo:function(){switch(this.host.closePage(),this.host.hideRewardTip(),this.taskCfg.taskType){case i.constant.TASK_TYPE_GET_HERO_PIECE:case i.constant.TASK_TYPE_SHOP_DRAW_CARD:case i.constant.TASK_TYPE_AD_GET_COIN:case i.constant.TASK_TYPE_AD_GET_DIAMOND:i.gameScene.mainPage.onClickShop();break;case i.constant.TASK_TYPE_HERO_UP:case i.constant.TASK_TYPE_HERO_BATTLE:i.gameScene.mainPage.onClickHero();break;case i.constant.TASK_TYPE_TOWER_UP:i.gameScene.mainPage.onClickTower();break;case i.constant.TASK_TYPE_HANGUP_GET_COIN:case i.constant.TASK_TYPE_HANGUP_GET_EXP:i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_HANG_UP)}},onClickReward:function(){this.host.hideRewardTip(),this.taskData.isFinish&&!this.taskData.isReward&&i.player.taskModule.rewardTask(this.taskId)}}),cc._RF.pop()},{}],TaskModule:[function(e,t){"use strict";cc._RF.push(t,"d16c2C6Ub5ATqyu37v4ADtM","TaskModule");var i=e("Aft");cc.Class({extends:i.BaseHandler,init:function(e){this.player=e;var t=i.StorageUtil.getData(i.constant.SAVE_TASK_DATA);t||(e={tasks:null,taskScore:0,taskRewardList:[],taskFinishList:[],taskRewardGroupId:0,cacheBattleMap:{},newHeroList:[],curNewHeroId:0,offlineCoinTarget:0,offlineExpTarget:0,curMainTaskId:i.templateManager.getFirstMainTaskId(),mainTaskLotteryCount:0,newYearTaskState:i.constant.NEW_YEAR_TASK_STATE_CLOSE,newYearTaskMedalScore:0,newYearTaskMedalLevel:0,newYearTaskDay:0,newYearTasks:{},newYearTaskReward:{},cacheNewYearTaskMedalLevel:-1,newYearTodayShowRedCount:0,newYearTaskStage:i.constant.NEW_YEAR_TASK_STAGE_ALLIANCE},this.player.saveGameData(i.constant.SAVE_TASK_DATA,e),t=JSON.stringify(e)),i.Logger.debug("init taskData :",t),this.player._gameData.taskData=JSON.parse(t)},loadData:function(){this.getTaskData().cacheBattleMap||(this.getTaskData().cacheBattleMap={},this.saveTaskData()),this.getTaskData().newHeroList||(this.getTaskData().newHeroList=[],this.saveTaskData()),this.getTaskData().curNewHeroId||(this.getTaskData().curNewHeroId=0,this.saveTaskData()),this.getTaskData().offlineCoinTarget||(this.getTaskData().offlineCoinTarget=0,this.saveTaskData()),this.getTaskData().offlineExpTarget||(this.getTaskData().offlineExpTarget=0,this.saveTaskData()),this.getTaskData().taskFinishList||(this.getTaskData().taskFinishList=[],this.saveTaskData()),null===this.getTaskData().tasks?this.resetTodayTask():this.checkOldTask(),this.getTaskData().hasOwnProperty("curMainTaskId")||(this.getTaskData().curMainTaskId=i.templateManager.getFirstMainTaskId()),this.getTaskData().hasOwnProperty("mainTaskLotteryCount")||(this.getTaskData().mainTaskLotteryCount=0),this.getTaskData().hasOwnProperty("newYearTaskState")||(this.getTaskData().newYearTaskState=i.constant.NEW_YEAR_TASK_STATE_CLOSE),this.getTaskData().hasOwnProperty("newYearTasks")||(this.getTaskData().newYearTasks={}),this.getTaskData().hasOwnProperty("newYearTaskMedalScore")||(this.getTaskData().newYearTaskMedalScore=0),this.getTaskData().hasOwnProperty("newYearTaskMedalLevel")||(this.getTaskData().newYearTaskMedalLevel=0),this.getTaskData().hasOwnProperty("newYearTaskDay")||(this.getTaskData().newYearTaskDay=0),this.getTaskData().hasOwnProperty("newYearTaskReward")||(this.getTaskData().newYearTaskReward={}),this.getTaskData().hasOwnProperty("cacheNewYearTaskMedalLevel")||(this.getTaskData().cacheNewYearTaskMedalLevel=-1),this.getTaskData().hasOwnProperty("newYearTodayShowRedCount")||(this.getTaskData().newYearTodayShowRedCount=0),this.getTaskData().hasOwnProperty("newYearTaskStage")||(this.getTaskData().newYearTaskStage=i.constant.NEW_YEAR_TASK_STAGE_ALLIANCE),this.initTaskTypeMap(),this.initNewYearTaskTypeMap(),this.dealCacheBattleMap(!0)},restoreData:function(e){e&&e.taskData&&(i.StorageUtil.save(i.constant.SAVE_TASK_DATA,e.taskData,!0),i.Logger.debug("restoreData data  taskData :",JSON.stringify(e.taskData)))},saveTaskData:function(e){this.player.saveGameData(i.constant.SAVE_TASK_DATA,this.player._gameData.taskData,e)},getTaskData:function(){return this.player._gameData.taskData},getTaskDataById:function(e){return this.getTaskData().tasks[e]},getTaskScore:function(){return this.getTaskData().taskScore},getTaskRewardGroup:function(){return this.getTaskData().taskRewardGroupId},resetTodayTask:function(){for(var e in this.getTaskData().tasks={},this.getTaskData().taskScore=0,this.getTaskData().taskRewardList=[],this.getTaskData().taskFinishList=[],this.getTaskData().taskRewardGroupId=0,this.getTaskData().curNewHeroId=0,i.templateManager.getTaskTypeMap()){var t=this.getRandomTask(e);t&&(t=this.initNewTask(t),this.getTaskData().tasks[t.taskId]=t)}var a,n=i.player.instanceModule.getMaxChapter(),o=i.templateManager.getTaskRewardGroup();for(a in o)if((r=o[a])&&!(r.length<=0)){var s=r[0].chapter[0],r=r[0].chapter[1];if(s<=n&&n<=r){this.getTaskData().taskRewardGroupId=parseInt(a);break}}this.getTaskData().taskRewardGroupId<=0&&(this.getTaskData().taskRewardGroupId=1),this.initTaskTypeMap(),this.saveTaskData(!0),i.eventBus.dispatchEvent(i.GameEventType.TASK_DAILY_REFRESH),i.eventBus.dispatchEvent(i.GameEventType.TASK_SCORE_REFRESH),i.eventBus.dispatchEvent(i.GameEventType.MAIN_UPDATE_TASK_RED),i.eventBus.dispatchEvent(i.GameEventType.CHECK_MAIN_CHILD_RED)},getRandomTask:function(e){var t=i.player.instanceModule.getMaxChapter(),a=i.templateManager.getTaskTypeMapByType(e);if(!a)return null;for(var n=[],o=0;o<a.length;o++){var s=a[o],r=s.chapter[0],c=s.chapter[1];if(r<=t&&t<=c)if(s.taskType===i.constant.TASK_TYPE_HERO_BATTLE){if(0===this.getTaskData().newHeroList.length)return null;0===n.length&&(this.getTaskData().curNewHeroId=this.getTaskData().newHeroList[this.getTaskData().newHeroList.length-1],n.push(s))}else n.push(s)}return n[i.Utils.getRandomInt(0,n.length-1)]},checkOldTask:function(){var e,t,a=i.templateManager.getTaskTypeMap(),n=!1,o=[],s=[];for(e in this.getTaskData().tasks){var r,c,l=this.getTaskData().tasks[e],d=i.templateManager.getTaskById(e);d?(s.push(l.type),!l.isReward&&l.isFinish&&(c=(r=d.taskValue)[0],2===r.length&&(c=r[1]),c=this.resetTaskTarget(d.taskType,c),l.count<c&&(l.count=c,n=!0))):(o.push(l.type),delete this.getTaskData().tasks[e],n=!0)}for(t in a)t=parseInt(t),s.indexOf(t)<0&&o.indexOf(t)<0&&o.push(t);for(var h=0;h<o.length;h++){var u=o[h];(u=this.getRandomTask(u))&&(u=this.initNewTask(u),this.getTaskData().tasks[u.taskId]=u,n=!0)}n&&(this.saveTaskData(),i.Logger.debug("checkOldTask fix data hashType :"+JSON.stringify(s)+" addType : "+JSON.stringify(o)))},initNewTask:function(e){var t={taskId:e.id,type:e.type,count:0,isReward:!1,isFinish:!1},i=e.taskValue,a=i[0];return 2===i.length&&(a=i[1]),this.resetTaskTarget(e.taskType,a,!0),t},getCurTaskList:function(){var e,t=[];for(e in this.getTaskData().tasks){var a=(o=this.getTaskData().tasks[e]).isFinish?1:2;o.isReward&&(a=3);var n=i.templateManager.getTaskById(e),o=0;n&&(n=this.getTaskFunction(n.taskType),i.player.functionModule.isFuncOpened(n)||(o=1)),o=1e7*a+1e6*o+parseInt(e),t.push(o)}t.sort(function(e,t){return e-t});for(var s=[],r=0;r<t.length;r++){var c=t[r]%1e6;s.push(c)}return s},initTaskTypeMap:function(){this.taskTypeMap={};for(var e=Object.keys(this.player._gameData.taskData.tasks),t=0;t<e.length;t++){var a=e[t],n=(this.player._gameData.taskData.tasks[a],i.templateManager.getTaskById(a));n&&(this.taskTypeMap[n.taskType]=a)}},onTaskEvent:function(e,t,a,n){if(!(t<=0)&&(t=Math.floor(t),this.taskTypeMap.hasOwnProperty(e))){var o=this.taskTypeMap[e],s=this.getTaskData().tasks[o];if(s&&!s.isReward&&!s.isFinish&&(c=i.templateManager.getTaskById(o))){var r=c.taskValue,c=r[0];if(a=e==i.constant.TASK_TYPE_HERO_INTO_TOWER&&-1==r[0]?-1:parseInt(a),e!==i.constant.TASK_TYPE_HERO_BATTLE||this.getTaskData().curNewHeroId===a){if(2===r.length){if(r[0]!==a)return;c=r[1]}s.count+=t,c=this.resetTaskTarget(e,c),s.count>=c&&(s.count=c,s.isFinish=!0,i.eventBus.dispatchEvent(i.GameEventType.MAIN_UPDATE_TASK_RED),i.eventBus.dispatchEvent(i.GameEventType.CHECK_MAIN_CHILD_RED)),this.saveTaskData(),i.eventBus.dispatchEvent(i.GameEventType.TASK_DAILY_REFRESH),n||i.eventBus.dispatchEvent(i.GameEventType.TASK_TOP_TIP,o),i.Logger.debug("onTaskEvent taskId :"+o+" taskCount :"+s.count)}}}},rewardTask:function(e){var t,a,n=this.getTaskData().tasks[e];!n||(a=i.templateManager.getTaskById(e))&&!n.isReward&&(e=(t=a.taskValue)[0],2===t.length&&(e=t[1]),e=this.resetTaskTarget(a.taskType,e),n.count<e||(e=i.player.commonModule.getHangUpReceiveCoin(a.coin),n.isReward=!0,i.player.itemModule.dropItem(i.constant.COIN_TYPE_GOLD_BULLION,a.diamond,!0,i.constant.ITEM_ADD_SOURCE_TASK),i.player.itemModule.dropItem(i.constant.COIN_TYPE_SILVER,e,!0,i.constant.ITEM_ADD_SOURCE_TASK),this.getTaskData().taskScore+=a.score,i.player.vipModule.addTaskActive(a.score),a.taskType===i.constant.TASK_TYPE_HERO_BATTLE&&(a=this.getTaskData().newHeroList.indexOf(this.getTaskData().curNewHeroId),this.getTaskData().newHeroList.splice(a,1)),this.addTaskBoxFinish(),this.saveTaskData(),i.eventBus.dispatchEvent(i.GameEventType.TASK_DAILY_REFRESH),i.eventBus.dispatchEvent(i.GameEventType.TASK_SCORE_REFRESH),i.eventBus.dispatchEvent(i.GameEventType.MAIN_UPDATE_TASK_RED),i.eventBus.dispatchEvent(i.GameEventType.CHECK_MAIN_CHILD_RED),i.BI.onEvent(i.biConstant.EVENT_TYPE_TASK,i.biConstant.EVENT_ID_TASK_REWARD)))},addTaskBoxFinish:function(){for(var e=i.templateManager.getTaskRewardGroupByGroup(this.getTaskData().taskRewardGroupId),t=0;t<e.length;t++){var a=e[t];0<=this.getTaskData().taskFinishList.indexOf(t)||a.score>this.getTaskData().taskScore||this.getTaskData().taskFinishList.push(t)}},rewardScore:function(e){var t=i.templateManager.getTaskRewardById(e);if(t&&this.getTaskData().taskRewardGroupId==t.groupId&&!(t.score>this.getTaskData().taskScore||0<=this.getTaskData().taskRewardList.indexOf(e))){this.getTaskData().taskRewardList.push(e),this.saveTaskData(),i.eventBus.dispatchEvent(i.GameEventType.TASK_SCORE_REFRESH),i.eventBus.dispatchEvent(i.GameEventType.MAIN_UPDATE_TASK_RED),i.eventBus.dispatchEvent(i.GameEventType.CHECK_MAIN_CHILD_RED),i.BI.onEvent(i.biConstant.EVENT_TYPE_TASK,i.biConstant.EVENT_ID_TASK_REWARD_BOX);for(var a=i.templateManager.getTaskRewardGroupByGroup(this.getTaskData().taskRewardGroupId),n=0;n<a.length&&a[n].id!==e;n++);}},isScoreReward:function(e){return 0<=this.getTaskData().taskRewardList.indexOf(e)},getTaskDesc:function(e){var t,a="",n=i.templateManager.getTaskById(e),o=n.taskValue;if(1===o.length)n.taskType===i.constant.TASK_TYPE_HERO_BATTLE?(t=this.getTaskData().curNewHeroId,(t=i.templateManager.getHeroDataById(t))&&(a=i.lang.getFormatString(n.desc,[i.lang.getGameText(t.name),i.Utils.formatBigNumberForLabel(o[0])]))):(t=this.resetTaskTarget(n.taskType,o[0]),a=i.lang.getFormatString(n.desc,[i.Utils.formatBigNumberForLabel(t)]));else switch(n.taskType){case i.constant.TASK_TYPE_KILL_ENEMY_ID:var s=i.templateManager.getEnemyDataById(o[0]);s&&(a=i.lang.getFormatString(n.desc,[i.lang.getGameText(s.name),o[1]]));break;case i.constant.TASK_TYPE_HERO_INTO_TOWER:-1==o[0]?a=i.lang.getFormatString(n.desc,["",o[1]]):(s=i.templateManager.getTowerTypeById(o[0]))&&(a=i.lang.getFormatString(n.desc,[i.lang.getGameText(s.name),o[1]]))}return a},getCacheBattleMap:function(){return this.getTaskData().cacheBattleMap},cleanCacheBattleMap:function(){this.getTaskData().cacheBattleMap={},this.saveTaskData()},putCacheBattleMap:function(e){for(var t in e)this.getTaskData().cacheBattleMap.hasOwnProperty(t)||(this.getTaskData().cacheBattleMap[t]=0),this.getTaskData().cacheBattleMap[t]+=e[t];this.getTaskData().getTodayHourTime=i.timeUtil.getTodayHourTime(0),this.saveTaskData()},dealCacheBattleMap:function(e){if(this.getTaskData().getTodayHourTime==i.timeUtil.getTodayHourTime(0)){var t,a=this.getCacheBattleMap();for(t in a){var n=t.split("-");1===n.length?i.player.taskModule.onTaskEvent(n[0],a[t],null,e):i.player.taskModule.onTaskEvent(n[0],a[t],n[1],e)}this.cleanCacheBattleMap()}else this.cleanCacheBattleMap()},gmRewardTask:function(){for(var e in this.getTaskData().tasks){var t,a=this.getTaskData().tasks[e],n=i.templateManager.getTaskById(e);!n||a.isFinish||a.isReward||(e=(t=n.taskValue)[0],2===t.length&&(e=t[1]),e=this.resetTaskTarget(n.taskType,e),a.count=e,a.isFinish=!0)}this.saveTaskData(),i.eventBus.dispatchEvent(i.GameEventType.TASK_DAILY_REFRESH),i.eventBus.dispatchEvent(i.GameEventType.MAIN_UPDATE_TASK_RED),i.eventBus.dispatchEvent(i.GameEventType.CHECK_MAIN_CHILD_RED)},getTaskRed:function(){for(var e in this.getTaskData().tasks)if((e=this.getTaskData().tasks[e]).isFinish&&!e.isReward)return!0;var t=i.templateManager.getTaskRewardGroupByGroup(this.getTaskRewardGroup());if(!t)return!1;for(var a=0;a<t.length;a++){var n=t[a];if(!(n.score>this.getTaskData().taskScore||0<=this.getTaskData().taskRewardList.indexOf(n.id)))return!0}return!1},addNewHero:function(e){var t=i.templateManager.getInstanceData(1);t&&t.firstPiece&&(t=i.templateManager.getHeroCardDataById(t.firstPiece[0]))&&t.heroId===e||(this.getTaskData().newHeroList.push(e),0===this.getTaskData().curNewHeroId&&(this.checkOldTask(),this.initTaskTypeMap()),this.saveTaskData())},resetTaskTarget:function(e,t,a){return e===i.constant.TASK_TYPE_HANGUP_GET_COIN&&(this.getTaskData().offlineCoinTarget&&!a||(this.getTaskData().offlineCoinTarget=this.player.commonModule.getHangUpReceiveCoin(t),this.saveTaskData()),t=this.getTaskData().offlineCoinTarget),e===i.constant.TASK_TYPE_HANGUP_GET_EXP&&(this.getTaskData().offlineExpTarget&&!a||(this.getTaskData().offlineExpTarget=this.player.commonModule.getHangUpReceiveExp(t),this.saveTaskData()),t=this.getTaskData().offlineExpTarget),t},getTaskFunction:function(e){var t=i.constant.MAIN_FUNCTION_BATTLE;switch(e){case i.constant.TASK_TYPE_GET_HERO_PIECE:case i.constant.TASK_TYPE_SHOP_DRAW_CARD:case i.constant.TASK_TYPE_AD_GET_COIN:case i.constant.TASK_TYPE_AD_GET_DIAMOND:t=i.constant.MAIN_FUNCTION_SHOP;break;case i.constant.TASK_TYPE_HERO_UP:case i.constant.TASK_TYPE_HERO_BATTLE:t=i.constant.MAIN_FUNCTION_HERO;break;case i.constant.TASK_TYPE_TOWER_UP:t=i.constant.MAIN_FUNCTION_TOWER;break;case i.constant.TASK_TYPE_HANGUP_GET_COIN:case i.constant.TASK_TYPE_HANGUP_GET_EXP:t=i.constant.BATTLE_FUNCTION_SPEED}return t},getCurMainTaskId:function(){return this.getTaskData().curMainTaskId},getMainTaskValue:function(e){var t=i.templateManager.getMainTaskDataById(e);if(!t)return 0;e=t.taskType;var a=t.taskValue,n=0;switch(e){case i.constant.MAIN_TASK_TYPE_PASS_INSTANCE:var o=a[0];n=i.player.instanceModule.getChapterMaxLevel(o);break;case i.constant.MAIN_TASK_TYPE_GET_HERO:var s=a[0];n=i.player.heroModule.isHeroUnlock(s)?1:0;break;case i.constant.MAIN_TASK_TYPE_GET_HERO_COUNT:n=i.player.heroModule.getAlreadyHaveHeroNum();break;case i.constant.MAIN_TASK_TYPE_VAN_BATTLE_COUNT:s=a[0],n=i.player.commonModule.getPioneerHeroBattleCount(s);break;case i.constant.MAIN_TASK_TYPE_TOWER_HERO_BATTLE_COUNT:s=a[0],n=i.player.commonModule.getTowerHeroBattleCount(s);break;case i.constant.MAIN_TASK_TYPE_GET_GAY_FRIEND:o=a[0],n=0<i.player.heroModule.getGayFriendLevel(o)?1:0;break;case i.constant.MAIN_TASK_TYPE_GET_GAY_FRIEND_COUNT:n=i.player.heroModule.getAllUnlockGayFriendList().length;break;case i.constant.MAIN_TASK_TYPE_HERO_IN_MAP:s=a[0],n=i.player.commonModule.getHeroInChapterCount(s);break;case i.constant.MAIN_TASK_TYPE_HERO_IN_MAP_COUNT:n=i.player.commonModule.getHeroInChapterTotalCount();break;case i.constant.MAIN_TASK_TYPE_TOWER_LEVEL:var r=a[0];n=i.player.towerModule.getTowerLevel(r);break;case i.constant.MAIN_TASK_TYPE_ALL_TOWER_LEVEL:var c=a[0];n=i.player.towerModule.getTowerCountByLevel(c);break;case i.constant.MAIN_TASK_TYPE_TOWER_BREAK_COUNT:r=a[0],n=i.player.commonModule.getTowerBreakCount(r);break;case i.constant.MAIN_TASK_TYPE_TOWER_WEAK:r=a[0],n=i.player.towerModule.getTowerQuality(r);break;case i.constant.MAIN_TASK_TYPE_ALL_TOWER_WEAK:c=a[0],n=i.player.towerModule.getTowerCountByQuality(c);break;case i.constant.MAIN_TASK_TYPE_HERO_LEVEL:s=a[0],n=i.player.heroModule.getRealHeroLevel(s);break;case i.constant.MAIN_TASK_TYPE_HERO_LEVEL_COUNT:c=a[1],n=i.player.heroModule.getHeroCountByLevel(c);break;case i.constant.MAIN_TASK_TYPE_HERO_BREAK_COUNT:s=a[0],n=i.player.commonModule.getHeroBreakCount(s);break;case i.constant.MAIN_TASK_TYPE_HERO_STAR_LEVEL:s=a[0],n=i.player.heroModule.getHeroStarLevel(s);break;case i.constant.MAIN_TASK_TYPE_HERO_STAR_COUNT:c=a[1],n=i.player.heroModule.getHeroCountByStar(c);break;case i.constant.MAIN_TASK_TYPE_HERO_WEAK:s=a[0],n=i.player.heroModule.getHeroQuality(s);break;case i.constant.MAIN_TASK_TYPE_HERO_WEAK_COUNT:c=a[1],n=i.player.heroModule.getHeroCountByQuality(c);break;case i.constant.MAIN_TASK_TYPE_GET_SKILL:var l=a[0];n=i.player.skillModule.skillIsUnlock(l)?1:0;break;case i.constant.MAIN_TASK_TYPE_SKILL_LEVEL:l=a[0];var d=i.player.skillModule.getSkillInfo(l);n=0,d&&(n=d.level);break;case i.constant.MAIN_TASK_TYPE_GET_SKILL_COUNT:n=i.player.skillModule.getSkillCount();break;case i.constant.MAIN_TASK_TYPE_SKILL_LEVEL_COUNT:c=a[1],n=i.player.skillModule.getSkillCountByLevel(c);break;case i.constant.MAIN_TASK_TYPE_SKILL_STAR:l=a[0],n=0,(d=i.player.skillModule.getSkillInfo(l))&&(n=d.starLevel);break;case i.constant.MAIN_TASK_TYPE_SKILL_STAR_COUNT:c=a[1],n=i.player.skillModule.getSkillCountByStar(c)}return n},getMainTaskTarget:function(e){var t=i.templateManager.getMainTaskDataById(e);if(!t)return 1e4;e=t.taskType;var a=t.taskValue,n=1e4;switch(e){case i.constant.MAIN_TASK_TYPE_PASS_INSTANCE:n=a[1];break;case i.constant.MAIN_TASK_TYPE_GET_HERO:n=1;break;case i.constant.MAIN_TASK_TYPE_GET_HERO_COUNT:n=a[0];break;case i.constant.MAIN_TASK_TYPE_VAN_BATTLE_COUNT:case i.constant.MAIN_TASK_TYPE_TOWER_HERO_BATTLE_COUNT:n=a[1];break;case i.constant.MAIN_TASK_TYPE_GET_GAY_FRIEND:n=1;break;case i.constant.MAIN_TASK_TYPE_GET_GAY_FRIEND_COUNT:n=a[0];break;case i.constant.MAIN_TASK_TYPE_HERO_IN_MAP:n=a[1];break;case i.constant.MAIN_TASK_TYPE_HERO_IN_MAP_COUNT:n=a[0];break;case i.constant.MAIN_TASK_TYPE_TOWER_LEVEL:n=a[1];break;case i.constant.MAIN_TASK_TYPE_ALL_TOWER_LEVEL:n=i.JsonData.TowerType.length;break;case i.constant.MAIN_TASK_TYPE_TOWER_BREAK_COUNT:case i.constant.MAIN_TASK_TYPE_TOWER_WEAK:n=a[1];break;case i.constant.MAIN_TASK_TYPE_ALL_TOWER_WEAK:n=i.JsonData.TowerType.length;break;case i.constant.MAIN_TASK_TYPE_HERO_LEVEL:n=a[1];break;case i.constant.MAIN_TASK_TYPE_HERO_LEVEL_COUNT:n=a[0];break;case i.constant.MAIN_TASK_TYPE_HERO_BREAK_COUNT:case i.constant.MAIN_TASK_TYPE_HERO_STAR_LEVEL:n=a[1];break;case i.constant.MAIN_TASK_TYPE_HERO_STAR_COUNT:n=a[0];break;case i.constant.MAIN_TASK_TYPE_HERO_WEAK:n=a[1];break;case i.constant.MAIN_TASK_TYPE_HERO_WEAK_COUNT:n=a[0];break;case i.constant.MAIN_TASK_TYPE_GET_SKILL:n=1;break;case i.constant.MAIN_TASK_TYPE_SKILL_LEVEL:n=a[1];break;case i.constant.MAIN_TASK_TYPE_GET_SKILL_COUNT:case i.constant.MAIN_TASK_TYPE_SKILL_LEVEL_COUNT:n=a[0];break;case i.constant.MAIN_TASK_TYPE_SKILL_STAR:n=a[1];break;case i.constant.MAIN_TASK_TYPE_SKILL_STAR_COUNT:n=a[0]}return n},getMainTaskDesc:function(e){var t=i.templateManager.getMainTaskDataById(e);if(!t)return"";e=t.taskType;var a=t.desc,n=t.taskValue,o="";switch(e){case i.constant.MAIN_TASK_TYPE_PASS_INSTANCE:var s=n[0],r=n[1],c=i.templateManager.getChapterDataById(s);s=s,c&&(s=i.lang.getGameText(c.name)),o=i.lang.getFormatString(a,[s,r]);break;case i.constant.MAIN_TASK_TYPE_GET_HERO:var l=n[0],d=i.templateManager.getHeroDataById(l),h=l;d&&(h=i.lang.getGameText(d.name)),o=i.lang.getFormatString(a,[h]);break;case i.constant.MAIN_TASK_TYPE_GET_HERO_COUNT:var u=n[0];o=i.lang.getFormatString(a,[u]);break;case i.constant.MAIN_TASK_TYPE_VAN_BATTLE_COUNT:case i.constant.MAIN_TASK_TYPE_TOWER_HERO_BATTLE_COUNT:u=n[1],h=l=n[0],(d=i.templateManager.getHeroDataById(l))&&(h=i.lang.getGameText(d.name)),o=i.lang.getFormatString(a,[h,u]);break;case i.constant.MAIN_TASK_TYPE_GET_GAY_FRIEND:s=n[0],r=i.templateManager.getHeroRestrainByGroupIdAndLevel(s,1),s=s,r&&(s=i.lang.getGameText(r.name)),o=i.lang.getFormatString(a,[s]);break;case i.constant.MAIN_TASK_TYPE_GET_GAY_FRIEND_COUNT:u=n[0],o=i.lang.getFormatString(a,[u]);break;case i.constant.MAIN_TASK_TYPE_HERO_IN_MAP:u=n[1],h=l=n[0],(d=i.templateManager.getHeroDataById(l))&&(h=i.lang.getGameText(d.name)),o=i.lang.getFormatString(a,[h,u]);break;case i.constant.MAIN_TASK_TYPE_HERO_IN_MAP_COUNT:u=n[0],o=i.lang.getFormatString(a,[u]);break;case i.constant.MAIN_TASK_TYPE_TOWER_LEVEL:var p=n[0],g=(u=n[1],i.templateManager.getTowerTypeById(p)),_=p;g&&(_=i.lang.getGameText(g.name)),o=i.lang.getFormatString(a,[_,u]);break;case i.constant.MAIN_TASK_TYPE_ALL_TOWER_LEVEL:u=n[0],o=i.lang.getFormatString(a,[u]);break;case i.constant.MAIN_TASK_TYPE_TOWER_BREAK_COUNT:p=n[0],u=n[1],_=p,(g=i.templateManager.getTowerTypeById(p))&&(_=i.lang.getGameText(g.name)),o=i.lang.getFormatString(a,[_,u]);break;case i.constant.MAIN_TASK_TYPE_TOWER_WEAK:p=n[0],u=n[1],_=p,(g=i.templateManager.getTowerTypeById(p))&&(_=i.lang.getGameText(g.name));var m=i.templateManager.getTowerQualityDataByLevel(p,u),E=i.lang.getGameText(i.GameTextCode.TOWER_QUALITY_1);m&&(E=i.lang.getGameText(m.qualityUnlockName)),o=i.lang.getFormatString(a,[_,E]);break;case i.constant.MAIN_TASK_TYPE_ALL_TOWER_WEAK:u=n[0],m=i.templateManager.getTowerQualityDataByLevel(1,u),E=i.lang.getGameText(i.GameTextCode.TOWER_QUALITY_1),m&&(E=i.lang.getGameText(m.qualityUnlockName)),o=i.lang.getFormatString(a,[E]);break;case i.constant.MAIN_TASK_TYPE_HERO_LEVEL:u=n[1],h=l=n[0],(d=i.templateManager.getHeroDataById(l))&&(h=i.lang.getGameText(d.name)),o=i.lang.getFormatString(a,[h,u]);break;case i.constant.MAIN_TASK_TYPE_HERO_LEVEL_COUNT:u=n[0];var T=n[1];o=i.lang.getFormatString(a,[u,T]);break;case i.constant.MAIN_TASK_TYPE_HERO_BREAK_COUNT:case i.constant.MAIN_TASK_TYPE_HERO_STAR_LEVEL:u=n[1],h=l=n[0],(d=i.templateManager.getHeroDataById(l))&&(h=i.lang.getGameText(d.name)),o=i.lang.getFormatString(a,[h,u]);break;case i.constant.MAIN_TASK_TYPE_HERO_STAR_COUNT:u=n[0],T=n[1],o=i.lang.getFormatString(a,[u,T]);break;case i.constant.MAIN_TASK_TYPE_HERO_WEAK:u=n[1],h=l=n[0],(d=i.templateManager.getHeroDataById(l))&&(h=i.lang.getGameText(d.name)),E=i.templateManager.getQualityName(u),o=i.lang.getFormatString(a,[h,E]);break;case i.constant.MAIN_TASK_TYPE_HERO_WEAK_COUNT:u=n[0],T=n[1],E=i.templateManager.getQualityName(T),o=i.lang.getFormatString(a,[u,E]);break;case i.constant.MAIN_TASK_TYPE_GET_SKILL:u=n[0];var f=i.templateManager.getHeroSkillFirstDataByGroupId(u),S=u;f&&(S=i.lang.getGameText(f.name)),o=i.lang.getFormatString(a,[S]);break;case i.constant.MAIN_TASK_TYPE_SKILL_LEVEL:u=n[0],T=n[1],S=u,(f=i.templateManager.getHeroSkillFirstDataByGroupId(u))&&(S=i.lang.getGameText(f.name)),o=i.lang.getFormatString(a,[S,T]);break;case i.constant.MAIN_TASK_TYPE_GET_SKILL_COUNT:u=n[0],o=i.lang.getFormatString(a,[u]);break;case i.constant.MAIN_TASK_TYPE_SKILL_LEVEL_COUNT:u=n[0],T=n[1],o=i.lang.getFormatString(a,[u,T]);break;case i.constant.MAIN_TASK_TYPE_SKILL_STAR:u=n[0],T=n[1],S=u,(f=i.templateManager.getHeroSkillFirstDataByGroupId(u))&&(S=i.lang.getGameText(f.name)),o=i.lang.getFormatString(a,[S,T]);break;case i.constant.MAIN_TASK_TYPE_SKILL_STAR_COUNT:u=n[0],T=n[1],o=i.lang.getFormatString(a,[u,T])}return o},rewardMainTask:function(e,t){if(t=t||0,e!==this.getTaskData().curMainTaskId)return!1;if(!(e=i.templateManager.getMainTaskDataById(this.getTaskData().curMainTaskId)))return!1;if(this.getMainTaskValue(this.getTaskData().curMainTaskId)<this.getMainTaskTarget(this.getTaskData().curMainTaskId)&&!i.player.gmModule.isMainTaskReward())return!1;for(var a=e.rewards,n=0;n<a.length;n++){var o=(s=a[n])[0],s=s[1]*t;o===i.constant.COIN_TYPE_SILVER?s=i.player.commonModule.getHangUpReceiveCoin(s).toFixed(0):o===i.constant.COIN_TYPE_HERO_EXP&&(s=i.player.commonModule.getHangUpReceiveExp(s).toFixed(0)),i.player.itemModule.dropItem(o,s,!0,i.constant.ITEM_ADD_SOURCE_MAIN_TASK)}return this.getTaskData().curMainTaskId=e.nextId,this.saveTaskData(),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_MAIN_TASK),i.BI.onEvent(i.biConstant.EVENT_TYPE_COUNT,i.biConstant.EVENT_ID_COUNT_MAIN_TASK_OVER,this.getTaskData().curMainTaskId),!0},gmSetCurMainTask:function(e){i.templateManager.getMainTaskDataById(e)&&(this.getTaskData().curMainTaskId=e,this.saveTaskData(),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_MAIN_TASK))},getMainTaskLotteryCount:function(){return this.getTaskData().mainTaskLotteryCount},addMainTaskLotteryCount:function(){this.getTaskData().mainTaskLotteryCount+=1,this.saveTaskData()},resetMainTaskLotteryCount:function(){this.getTaskData().mainTaskLotteryCount=0,this.saveTaskData()},isNewYearTaskOpen:function(){return this.getTaskData().newYearTaskState===i.constant.NEW_YEAR_TASK_STATE_OPEN},isNewYearTaskOver:function(){return this.getTaskData().newYearTaskState===i.constant.NEW_YEAR_TASK_STATE_OVER},isHasNewYearTaskRed:function(){if(!this.isNewYearTaskOpen())return!1;if(0===this.getTaskData().newYearTodayShowRedCount)return!0;var e,t=i.player.vipModule.getCurVipLevel();for(e in this.getTaskData().newYearTaskReward){var a=this.getTaskData().newYearTaskReward[e];if(a){var n=i.templateManager.getNewYearTaskRewardListByDay(e);if(n)for(var o=a.medalLevel,s=a.alreadyRewards,r=0;r<n.length;r++)if(!(0<=s.indexOf(r)||o<r||t<n[r][1]))return!0}}return!1},isNeedNewYearTaskPush:function(){if(!this.isNewYearTaskOpen())return!1;var e=this.getTaskData().newYearTaskDay,t=this.getTaskData().newYearTaskReward[e];if(!t)return!0;if((e=i.templateManager.getNewYearTaskRewardListByDay(e))&&e.length>t.alreadyRewards.length)return!0;var a,n=i.player.vipModule.getCurVipLevel();for(a in this.getTaskData().newYearTaskReward){var o=this.getTaskData().newYearTaskReward[a];if(o){var s=i.templateManager.getNewYearTaskRewardListByDay(a);if(s)for(var r=o.medalLevel,c=o.alreadyRewards,l=0;l<s.length;l++)if(!(0<=c.indexOf(l)||r<l||n<s[l][1]))return!0}}return!1},checkNewYearTaskState:function(){this.getTaskData().newYearTaskState===i.constant.NEW_YEAR_TASK_STATE_CLOSE&&(this.getTaskData().newYearTaskState=i.constant.NEW_YEAR_TASK_STATE_OPEN,this.getTaskData().newYearTaskDay=1,this.getTaskData().newYearTaskReward={},this.resetTodayNewYearTask())},initNewYearTask:function(e){return{taskId:e.id,count:0,isFinish:!1}},resetTodayNewYearTask:function(){if(this.getTaskData().newYearTaskState===i.constant.NEW_YEAR_TASK_STATE_OPEN){(t=this.getTaskData().newYearTaskReward[this.getTaskData().newYearTaskDay])&&(t.medalLevel=this.getTaskData().newYearTaskMedalLevel,this.getTaskData().newYearTaskDay+=1),this.newYearTaskTypeMap={},this.getTaskData().newYearTasks={},this.getTaskData().newYearTaskMedalScore=0,this.getTaskData().newYearTaskMedalLevel=0,this.getTaskData().newYearTodayShowRedCount=0,this.getTaskData().newYearTaskStage=i.constant.NEW_YEAR_TASK_STAGE_ALLIANCE;var e=i.templateManager.getNewYearDailyTaskList(this.getTaskData().newYearTaskDay),t=i.timeUtil.getTime();if(this.getTaskData().newYearTaskDay>i.JsonData.YearTaskReward.length||!e||t>=i.player.newYearModule.getActivityEndTime())return this.getTaskData().newYearTaskState=i.constant.NEW_YEAR_TASK_STATE_OVER,this.saveTaskData(!0),i.eventBus.dispatchEvent(i.GameEventType.NEW_YEAR_TASK_REFRESH),void i.eventBus.dispatchEvent(i.GameEventType.YEAR_TASK_UPDATE_RED);for(var a=0;a<e.length;a++){var n=e[a],o=this.initNewYearTask(n);this.getTaskData().newYearTasks[o.taskId]=o,this.newYearTaskTypeMap[n.taskType]=o.taskId}this.saveTaskData(!0),i.eventBus.dispatchEvent(i.GameEventType.NEW_YEAR_TASK_REFRESH),i.eventBus.dispatchEvent(i.GameEventType.YEAR_TASK_UPDATE_RED)}},initNewYearTaskTypeMap:function(){for(var e in this.newYearTaskTypeMap={},this.getTaskData().newYearTasks)(e=i.templateManager.getNewYearTaskDataById(e))&&(this.isHasAllianceTask()?this.newYearTaskTypeMap[e.taskType]=e.id:this.newYearTaskTypeMap[e.taskType2]=e.id)},getNewYearTaskDay:function(){return this.getTaskData().newYearTaskDay},getNewYearTaskById:function(e){return this.getTaskData().newYearTasks[e]},getCurNewYearTaskList:function(){var e,t,a=[];for(e in this.getTaskData().newYearTasks)i.templateManager.getNewYearTaskDataById(e)&&(t=parseInt(e),a.push(t));return a.sort(function(e,t){return e-t}),a},addNewYearTaskScore:function(e){if(this.getTaskData().newYearTaskState===i.constant.NEW_YEAR_TASK_STATE_OPEN){var t=this.getTaskData().newYearTaskMedalScore,a=i.JsonData.Medal;if(!(t>=a[a.length-1].point)){this.getTaskData().newYearTaskMedalScore+=e;for(var n=0,o=0;o<a.length;o++){var s=a[o];this.getTaskData().newYearTaskMedalScore>=s.point&&(n=s.id)}this.getTaskData().newYearTaskMedalLevel!==n&&(this.getTaskData().newYearTaskMedalLevel=n,(e=this.getTaskData().newYearTaskReward[this.getTaskData().newYearTaskDay])&&(e.medalLevel=this.getTaskData().newYearTaskMedalLevel),this.getTaskData().cacheNewYearTaskMedalLevel=n,i.eventBus.dispatchEvent(i.GameEventType.YEAR_TASK_UPDATE_RED),i.BI.onEvent(i.biConstant.EVENT_TYPE_CLICK,i.biConstant.EVENT_ID_CLICK_NEW_YEAR_TASK_MEDAL,this.getTaskData().newYearTaskMedalLevel),i.gameScene.mainPage.setCachePageStatus(!0)),i.eventBus.dispatchEvent(i.GameEventType.NEW_YEAR_TASK_TOP_TIP,{type:i.constant.NEW_YEAR_TASK_TIP_MEDAL,taskId:0}),this.saveTaskData()}}},getNewYearTaskScore:function(){return this.getTaskData().newYearTaskMedalScore},getNewYearTaskLevel:function(){return this.getTaskData().newYearTaskMedalLevel},onNewYearTaskEvent:function(e,t){var a,n,o,s;this.getTaskData().newYearTaskState!==i.constant.NEW_YEAR_TASK_STATE_OPEN||t<=0||(t=Math.floor(t),!this.newYearTaskTypeMap.hasOwnProperty(e))||(a=this.newYearTaskTypeMap[e],!(n=this.getTaskData().newYearTasks[a])||n.isFinish||(o=i.templateManager.getNewYearTaskDataById(a))&&(o=o.taskValue[0],n.count+=t,e===i.constant.NEW_YEAR_TASK_TYPE_GROUP_SHARE&&(s=i.player.commonModule.getTodayAllianceShareCount(),n.count<s&&(n.count=s)),e===i.constant.NEW_YEAR_TASK_TYPE_GROUP_HELP&&(s=i.player.commonModule.getTodayAllianceAdCount(),n.count<s&&(n.count=s)),e===i.constant.NEW_YEAR_TASK_TYPE_SHOP_DIAMOND&&(e=i.player.shopModule.getTodayGoldTimes(),n.count<e&&(n.count=e)),n.count>=o&&(n.count=o,n.isFinish=!0,this.checkNewYearTaskOver()),this.saveTaskData(),i.eventBus.dispatchEvent(i.GameEventType.NEW_YEAR_TASK_TOP_TIP,{type:i.constant.NEW_YEAR_TASK_TIP_TASK,taskId:a}),i.Logger.debug("onTaskEvent taskId :"+a+" taskCount :"+n.count)))},checkNewYearTaskOver:function(){if(!this.getTaskData().newYearTaskReward.hasOwnProperty(this.getTaskData().newYearTaskDay)){var e,t=!1;for(e in this.getTaskData().newYearTasks)if(!this.getTaskData().newYearTasks[e].isFinish){t=!0;break}t||this.initNewYearTaskRewardData()}},initNewYearTaskRewardData:function(){this.getTaskData().newYearTaskReward[this.getTaskData().newYearTaskDay]={medalLevel:this.getTaskData().newYearTaskMedalLevel,alreadyRewards:[]},i.eventBus.dispatchEvent(i.GameEventType.YEAR_TASK_UPDATE_RED),i.BI.onEvent(i.biConstant.EVENT_TYPE_CLICK,i.biConstant.EVENT_ID_CLICK_NEW_YEAR_TASK_OVER,this.getTaskData().newYearTaskDay)},isNewYearTaskReward:function(e,t){return!!(e=this.getTaskData().newYearTaskReward[e])&&0<=e.alreadyRewards.indexOf(t)},isNewYearTaskRewardPassTime:function(e,t){return!(e>=this.getTaskData().newYearTaskDay||!(e=this.getTaskData().newYearTaskReward[e])||0<=e.alreadyRewards.indexOf(t)||t<=e.medalLevel)},isCanRewardNewYearTask:function(e,t){var a=this.getTaskData().newYearTaskReward[e];return!(!a||0<=a.alreadyRewards.indexOf(t)||t>a.medalLevel||!(e=i.templateManager.getNewYearTaskRewardListByDay(e))||t>=e.length||(t=(e=e[t])[1],e=e[0],!i.templateManager.getNewYearTaskRewardBoxDataById(e)||i.player.vipModule.getCurVipLevel()<t))},rewardNewYearTask:function(e,t){if(this.isCanRewardNewYearTask(e,t)){for(var a=i.templateManager.getNewYearTaskRewardListByDay(e)[t][0],n=i.templateManager.getNewYearTaskRewardBoxDataById(a),o=[],s=0;s<n.reward.length;s++){var r=n.reward[s].key,c=n.reward[s].value;r===i.constant.COIN_TYPE_SILVER?c=i.player.commonModule.getHangUpReceiveCoin(c):r===i.constant.COIN_TYPE_HERO_EXP&&(c=i.player.commonModule.getHangUpReceiveExp(c)),o.push({key:r,value:c})}e={type:i.constant.COMMON_REWARD_PAGE_NEW_YEAR_TASK,rewards:o,index:t,params:e},i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_INSTANCE_BOX_REWARD,e)}},rewardNewYearTaskOver:function(e,t){this.isCanRewardNewYearTask(e,t)&&(this.getTaskData().newYearTaskReward[e].alreadyRewards.push(t),this.saveTaskData(),i.eventBus.dispatchEvent(i.GameEventType.NEW_YEAR_TASK_REWARD_REFRESH,{day:e,index:t}),i.eventBus.dispatchEvent(i.GameEventType.YEAR_TASK_UPDATE_RED))},getCacheMedalLevel:function(){return this.getTaskData().cacheNewYearTaskMedalLevel},resetCacheMedalLevel:function(){this.getTaskData().cacheNewYearTaskMedalLevel=-1,this.saveTaskData()},addNewYearTaskTodayShowRed:function(){this.getTaskData().newYearTodayShowRedCount+=1,this.saveTaskData(),i.eventBus.dispatchEvent(i.GameEventType.YEAR_TASK_UPDATE_RED)},resetNewYearTaskStage:function(){i.player.allianceModule.checkAllianceControllerIsOpen()||this.getTaskData().newYearTaskStage!==i.constant.NEW_YEAR_TASK_STAGE_NONE_ALLIANCE&&(this.getTaskData().newYearTaskStage=i.constant.NEW_YEAR_TASK_STAGE_NONE_ALLIANCE,this.initNewYearTaskTypeMap(),this.saveTaskData())},isHasAllianceTask:function(){return this.getTaskData().newYearTaskStage===i.constant.NEW_YEAR_TASK_STAGE_ALLIANCE},getNewYearTaskIcon:function(e){return this.isHasAllianceTask()?e.icon:e.icon2},getNewYearTaskDesc:function(e){return this.isHasAllianceTask()?e.title:e.title2},getNewYearTaskType:function(e){return this.isHasAllianceTask()?e.taskType:e.taskType2},fixPlayerTaskData:function(){var e,t=!1;for(e in this.getTaskData().newYearTasks){var a,n,o,s=this.getTaskData().newYearTasks[e];s.isFinish||(a=i.templateManager.getNewYearTaskDataById(e),o=this.getNewYearTaskType(a),a=a.taskValue[0],o===i.constant.NEW_YEAR_TASK_TYPE_GROUP_SHARE&&(n=i.player.commonModule.getTodayAllianceShareCount(),s.count<n&&(s.count=n,s.count>=a&&(s.count=a,s.isFinish=!0,this.checkNewYearTaskOver()),t=!0)),o===i.constant.NEW_YEAR_TASK_TYPE_GROUP_HELP&&(n=i.player.commonModule.getTodayAllianceAdCount(),s.count<n&&(s.count=n,s.count>=a&&(s.count=a,s.isFinish=!0,this.checkNewYearTaskOver()),t=!0)),o===i.constant.NEW_YEAR_TASK_TYPE_SHOP_DIAMOND&&(o=i.player.shopModule.getTodayGoldTimes(),s.count<o&&(s.count=o,s.count>=a&&(s.count=a,s.isFinish=!0,this.checkNewYearTaskOver()),t=!0)),t&&this.saveTaskData())}},checkAllianceTaskTip:function(){if(!(i.timeUtil.getTime()>i.timeUtil.getTodayHourTime(5))){var e,t=i.templateManager.getGameParamValue("shareHelp")[2]-i.player.allianceModule.getSelfHelpShareTimes(),a=i.templateManager.getGameParamValue("adHelp")[2]-i.player.allianceModule.getSelfHelpAdTimes();for(e in this.getTaskData().newYearTasks)if(!this.getTaskData().newYearTasks[e].isFinish){var n=i.templateManager.getNewYearTaskDataById(e),o=this.getNewYearTaskType(n);if(o===i.constant.NEW_YEAR_TASK_TYPE_GROUP_SHARE&&0==t)return n=i.lang.getGameText(20061),void i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,n);if(o===i.constant.NEW_YEAR_TASK_TYPE_GROUP_HELP&&0==a)return o=i.lang.getGameText(20061),void i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,o)}}}}),cc._RF.pop()},{}],TaskPage:[function(e,t){"use strict";cc._RF.push(t,"1b2cccCijdKdY2jrmZoNox7","TaskPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{taskItemRenderPrefab:{default:null,type:cc.Prefab},tipItemRenderPrefab:{default:null,type:cc.Prefab}},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.TASK_DAILY_REFRESH,function(t){return e.initData(t)}),this.registerListener(i.GameEventType.TASK_SCORE_REFRESH,function(t){return e.initUpdateProgress(t)})},onLoadPage:function(){this.scrollView=cc.find("content/scrollView",this.node).getComponent(cc.ScrollView),this.content=cc.find("content/scrollView/view/content",this.node),this.refreshTimeLabel=cc.find("content/refresh",this.node).getComponent(cc.Label),this.progressNode=cc.find("content/progress",this.node),this.scoreLabel=cc.find("totalScore/number/label",this.progressNode).getComponent(cc.Label),this.progressBar=cc.find("progressBar",this.progressNode).getComponent(cc.ProgressBar),this.itemObjList=[],this.node.on("touchstart",this.hideRewardTip,this),this.content.on("touchstart",this.hideRewardTip,this)},showPageBegan:function(){this.hideAllItem(),this.initData(),this.initUpdateProgress()},showPageEnded:function(){i.ttAdManager.showGridAd(cc.find("adNode",this.node),this.getPageType())},closePageBegan:function(){i.ttAdManager.hideGridAd()},initData:function(){this.endTime=i.timeUtil.getTodayHourTime(24),this.taskList=i.player.taskModule.getCurTaskList(),this.hideAllItem(),this.scrollView.scrollToTop(0),this.checkIndex=0},hideAllItem:function(){for(var e=0;e<this.itemObjList.length;e++)this.itemObjList[e].node.active=!1},initUpdateProgress:function(){this.curScore=i.player.taskModule.getTaskScore(),this.groupId=i.player.taskModule.getTaskRewardGroup(),this.rewardCfgList=i.templateManager.getTaskRewardGroupByGroup(this.groupId),this.maxScore=this.rewardCfgList[this.rewardCfgList.length-1].score,i.Logger.debug("this.maxScore: "+this.maxScore);for(var e=this.progressBar.node.width,t=0;t<this.rewardCfgList.length;t++){var a=(s=this.rewardCfgList[t]).score,n=i.player.taskModule.isScoreReward(s.id),o=s.score<=this.curScore;i.Logger.debug("i: "+t+", rewardCfg.score: "+s.score+", this.curScore: "+this.curScore);var s,r=e*(a/this.maxScore);(s=cc.find("gift"+(t+1),this.progressNode)).x=r,cc.find("label",s).getComponent(cc.Label).string=a,r=cc.find("/open",s),a=cc.find("/close",s),r.active=n,a.active=!n,s=cc.find("/effect_box_light",s).getComponent(cc.Animation),o&&!n?(this.runRewardBoxEffect(s,"effect_box_light"),this.runRewardBoxAction(a)):(a.angle=0,a.stopAllActions(),s.stop(),s.node.active=!1)}this.updateProgress()},updateProgress:function(){this.scoreLabel.string=i.player.taskModule.getTaskScore(),this.progressBar.progress=this.curScore/this.maxScore},runRewardBoxEffect:function(e,t){e.node.active=!0,e.stop(),e.setCurrentTime(0),e.play(t)},runRewardBoxAction:function(e){e.angle=0,e.stopAllActions();var t=cc.rotateBy(.1,10),i=cc.rotateBy(.1,-20),a=cc.rotateBy(.1,20),n=cc.rotateBy(.1,-20),o=cc.rotateBy(.1,20),s=cc.rotateBy(.1,-20),r=cc.rotateBy(.1,10),c=cc.delayTime(.2);r=cc.sequence(c,t,i,a,n,o,s,r),r=cc.repeatForever(r),e.runAction(r)},hideRewardTip:function(){this.rewardTipItem&&this.rewardTipItem.active&&(this.rewardTipItem.active=!1)},showRewardTip:function(e,t){this.rewardTipItem||(this.rewardTipItem=cc.instantiate(this.tipItemRenderPrefab),this.progressNode.addChild(this.rewardTipItem)),this.rewardTipItem.active=!0,this.rewardTipItem.stopAllActions(),this.rewardTipItem.x=e.x,this.rewardTipItem.y=e.y-40,this.rewardTipItem.getComponent("TaskTipItemRender").initData(t),this.rewardTipItem.opacity=0,this.rewardTipItem.scale=0;var i=cc.scaleTo(.1,1.1);e=cc.scaleTo(.1,1),t=cc.fadeTo(.2,255),e=cc.sequence(i,e),this.rewardTipItem.runAction(cc.spawn(e,t))},onClickBox:function(e,t){this.hideRewardTip();var a=cc.find("gift"+t,this.progressNode),n=this.rewardCfgList[t-1];if(n)if(n.score<=this.curScore&&!i.player.taskModule.isScoreReward(n.id)){for(var o=[],s=0;s<n.rewards.length;s++){var r=n.rewards[s][0],c=n.rewards[s][1];r===i.constant.COIN_TYPE_SILVER&&(c=i.player.commonModule.getHangUpReceiveCoin(c)),o.push({key:r,value:c})}t={type:i.constant.COMMON_REWARD_PAGE_TASK_BOX,rewards:o,index:n.id},i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_INSTANCE_BOX_REWARD,t)}else this.showRewardTip(a,n)},onClickClose:function(){this.hideRewardTip(),this.closePage()},updateFlushTime:function(e){this.updateTime+=e,this.updateTime<1||(this.updateTime=0,e=Math.max(this.endTime-i.timeUtil.getTime(),0),e=i.timeUtil.secondFormat(Math.ceil(e/1e3)),i.lang.updateLabelString(this.refreshTimeLabel,[e]))},createItem:function(){var e=cc.instantiate(this.taskItemRenderPrefab);this.content.addChild(e),((e=e.getComponent("TaskItemRender")).host=this).itemObjList.push(e)},update:function(e){var t,i;this.checkIndex<this.taskList.length&&(this.itemObjList.length<=this.checkIndex&&this.createItem(),t=this.taskList[this.checkIndex],(i=this.itemObjList[this.checkIndex]).node.active=!0,i.initData(t),this.checkIndex++),this.updateFlushTime(e)}}),cc._RF.pop()},{}],TaskTipItemRender:[function(e,t){"use strict";cc._RF.push(t,"43075CeDxhFX6ZDwa4UjVqn","TaskTipItemRender");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{itemRender:{type:cc.Prefab,default:null}},afterLoad:function(){this.layoutNode=cc.find("bgLayout",this.node),this.layout=this.layoutNode.getComponent(cc.Layout),this.topNode=cc.find("bg1",this.node)},setHost:function(e){this.host=e},initData:function(e){this.itemWidth=0,this.rewardCfg=e;for(var t=this.layoutNode.children.length,a=e.rewards.length-t,n=0;n<a;n++){var o=cc.instantiate(this.itemRender);this.layoutNode.addChild(o)}for(var s=0;s<this.layoutNode.children.length;s++){var r,c,l=this.layoutNode.children[s];e.rewards[s]?(r=(c=e.rewards[s])[0],c=c[1],r===i.constant.COIN_TYPE_SILVER&&(c=i.player.commonModule.getHangUpReceiveCoin(c)),l.active=!0,l.getComponent("CommonItemRender1").initData(r,c),this.itemWidth=l.width):l.active=!1}this.fixPosition()},fixPosition:function(){var e=this.node.convertToWorldSpaceAR(cc.v2(0,0)),t=this.layout.paddingLeft,i=this.layout.paddingRight,a=this.layout.spacingX,n=this.rewardCfg.rewards.length;i=t+i+this.itemWidth*n+(n-1)*a,n=cc.winSize.width,a=e.x+i/2,e=0,i=this.topNode.x,this.layoutNode.x=i-(e=n<a?a-n:e)}}),cc._RF.pop()},{}],TaskTopTipItemRender:[function(e,t){"use strict";cc._RF.push(t,"5b232a3VnpE3aBnc147jrE+","TaskTopTipItemRender");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{},afterLoad:function(){this.descLabel=cc.find("layout/label",this.node).getComponent(cc.Label),this.scoreLabel=cc.find("progressBar/number",this.node).getComponent(cc.Label),this.progressBar=cc.find("progressBar",this.node).getComponent(cc.ProgressBar),this.node.on("touchstart",this.onTouchStart,this)},initData:function(e){var t=i.player.taskModule.getTaskDesc(e);this.descLabel.string=t,this.taskData=i.player.taskModule.getTaskDataById(e),this.taskCfg=i.templateManager.getTaskById(e),e=(t=this.taskCfg.taskValue)[0],2===t.length&&(e=t[1]),e=i.player.taskModule.resetTaskTarget(this.taskCfg.taskType,e),i.lang.updateLabelString(this.scoreLabel,[i.Utils.formatBigNumberForLabel(this.taskData.count),i.Utils.formatBigNumberForLabel(e)]),this.progressBar.progress=this.taskData.count/e},onTouchStart:function(){this.node.stopAllActions();var e=cc.moveTo(.2,cc.v2(0,cc.winSize.height/2+this.node.height)),t=cc.callFunc(function(){this.node.active=!1},this);t=cc.sequence(e,t),this.node.runAction(t)}}),cc._RF.pop()},{}],TemplateManager:[function(e,t){"use strict";cc._RF.push(t,"cfd24zHQiRFd6LFQPWoPuVa","TemplateManager");var i=e("Aft");i.TemplateManager=cc.Class({extends:cc.Object,properties:{gameParams:null,chapterMap:null,instanceMap:null,chapterInstanceListMap:null,towerMap:null,towerBattleLevelMap:null,towerBattleHeroMap:null,towerTypeMap:null,towerStarLevelMap:null,towerQualityMap:null,towerQualityTypeMap:null,itemMap:null,tipsSkillMap:null,tipsSkillGroupMap:null,playerLevelMap:null,heroSkillLevelMap:null,heroSkillListMap:null,heroMap:null,heroInTowerMap:null,heroCardMap:null,heroCardHeroIdMap:null,heroStarMap:null,heroStarLevelMap:null,heroLevelMap:null,heroBattleNumMap:null,heroQualityMap:null,heroRestrainMap:null,natureMap:null,shopBoxMap:null,shopTypeBoxMap:null,functionMap:null,taskMap:null,taskTypeMap:null,taskRewardMap:null,taskRewardGroupMap:null,newYearTaskMap:null,newYearDailyTaskMap:null,newYearTaskMedalMap:null,newYearTaskRewardMap:null,newYearTaskRewardBoxMap:null,maskWordList:null,startBuffMap:null,pushMap:null,signMap:null,signGroupMap:null,bubbleMap:null,failureMap:null,heroSkillTypeMap:null,vipMap:null,skillCardsMap:null,defendLevelMap:null,defendLevelRewardMap:null,defendEffectMap:null,shareLimitMap:null,headMap:null,guildMap:null},statics:{_instance:null,_initFinish:!1,getInstance:function(){return this._instance||(this._instance=new i.TemplateManager),this._instance}},init:function(){this._initFinish||(this._initFinish=!0,this.loadGameParams(),this.loadItemData(),this.loadChapterData(),this.loadInstanceData(),this.loadWaveData(),this.loadWaveNatureData(),this.loadTroopData(),this.loadRouteData(),this.loadTowerData(),this.loadTowerTypeData(),this.loadTowerStarLevelData(),this.loadTowerQualityMap(),this.loadSoldierData(),this.loadEnemyData(),this.loadBulletData(),this.loadHeroSkillData(),this.loadEnemySkillData(),this.loadHeroSkillLevelData(),this.loadTipsSkillMap(),this.loadBroadcastData(),this.loadDropPackData(),this.loadPlayerLevelMap(),this.loadHeroMap(),this.loadHeroCardMap(),this.loadHeroStarMap(),this.loadHeroLevelMap(),this.loadHeroBattleNumMap(),this.loadHeroQualityMap(),this.loadHeroRestrainMap(),this.loadInstanceBoxRewardData(),this.loadNatureData(),this.loadShopBoxData(),this.loadFunctionData(),this.loadTaskData(),this.loadNewYearTaskData(),this.loadMaskWord(),this.loadStartBuffMap(),this.loadGuideData(),this.loadPlotData(),this.loadPushData(),this.loadSignData(),this.loadBubbleData(),this.loadFailureData(),this.loadVipData(),this.loadSkillCardsData(),this.loadDefendLevelData(),this.loadDefendLevelRewardData(),this.loadDefendEffectData(),this.loadMainTaskData(),this.loadGuildData(),this.loadShareLimitData(),this.loadHeadData(),i.config.openGM&&!cc.sys.isNative&&this.checkJsonData())},loadGuideData:function(){this.guideMap={};for(var e=i.JsonData.Guide,t=0;t<e.length;t++){var a=e[t];this.guideMap[a.id]=a}},getGuideData:function(e){return this.guideMap[e]},loadPlotData:function(){this.plotMap={},this.plotGroupMap={};for(var e=i.JsonData.InstanceDailog,t=0;t<e.length;t++){var a=e[t],n=(this.plotMap[a.id]=a).stageId[0]+"_"+a.stageId[1]+"_"+a.afterStage;this.plotGroupMap[n]||(this.plotGroupMap[n]=[]),this.plotGroupMap[n].push(a)}},getPlotData:function(e){return this.plotMap[e]},getPlotGroup:function(e,t,i){var a=e+"_"+t+"_"+i,n=[];if(this.plotGroupMap[a])for(var o=0;o<this.plotGroupMap[a].length;o++)n.push(this.plotGroupMap[a][o]);return n},loadBroadcastData:function(){this.broadcastMap={};for(var e=i.JsonData.Broadcast,t=0;t<e.length;t++){var a=e[t];this.broadcastMap[a.id]=a}},getBroadcastData:function(e){return this.broadcastMap[e]},loadGameParams:function(){this.gameParams={};var e,t=i.JsonData.GameParams[0];for(e in t)this.gameParams[e]=t[e]},getGameParamValue:function(e){return this.gameParams[e]},loadItemData:function(){this.itemMap={};for(var e=i.JsonData.Item,t=0;t<e.length;t++){var a=e[t];this.itemMap[a.id]=a}},getItemDataById:function(e){return this.itemMap[e]},loadChapterData:function(){this.chapterMap={};for(var e=i.JsonData.Chapter,t=0;t<e.length;t++){var a=e[t];this.chapterMap[a.id]=a}},getChapterDataById:function(e){return this.chapterMap[e]},loadInstanceData:function(){this.instanceMap={},this.chapterInstanceListMap={},this.allInstanceEnemyList=[],this.allInstanceEnemyMap={},this.instanceEnemyMap={},this.instanceHeroMap={};for(var e=i.JsonData.Instance,t=0;t<e.length;t++){var a=e[t],n=(this.instanceMap[a.id]=a).chapterId;this.chapterInstanceListMap[n]||(this.chapterInstanceListMap[n]=[]),this.chapterInstanceListMap[n].push(a)}for(var o=0,s=Object.keys(this.chapterInstanceListMap);o<s.length;o++){var r=s[o],c=this.chapterInstanceListMap[r];c.sort(function(e,t){return e.id-t.id}),this.instanceHeroMap[r]||(this.instanceHeroMap[r]=[]);for(var l=0;l<c.length;l++){var d=c[l];this.instanceEnemyMap[d.id]=[];var h=d.wellen;this.waveListMap||this.loadWaveData();for(var u=this.getWaveListByGroupID(h),p=0;p<u.length;p++)for(var g=u[p].enemyList,_=0;_<g.length;_++)for(var m=g[_],E=0;E<m.length;E++){var T=m[E];this.allInstanceEnemyMap[T]||(this.enemyMap||this.loadEnemyData(),this.allInstanceEnemyList.push({enemyData:this.getEnemyDataById(T),chapterId:parseInt(r),instanceLevel:l}),this.allInstanceEnemyMap[T]=1),-1===this.instanceEnemyMap[d.id].indexOf(T)&&this.instanceEnemyMap[d.id].push(T)}d.firstPiece&&(h=[l+1,d.firstPiece[0],d.firstPiece[1]],this.instanceHeroMap[r].push(h))}}},getAllInstanceEnemyData:function(){return this.allInstanceEnemyList},getInstanceEnemyListById:function(e){return this.instanceEnemyMap[e]||[]},getNextInstancePiece:function(e,t){var i=null;if(!this.instanceHeroMap[e])return i;for(var a=this.instanceHeroMap[e],n=0;n<a.length;n++)if(!(t>=a[n][0])){i=a[n];break}return i},getInstanceListByChapterId:function(e){return this.chapterInstanceListMap[e]},getInstanceData:function(e){return this.instanceMap[e]},loadInstanceBoxRewardData:function(){this.instanceBoxRewardMap={};for(var e=i.JsonData.InstanceBoxReward,t=0;t<e.length;t++){var a=e[t];this.instanceBoxRewardMap[a.id]=a}},getInstanceBoxRewardById:function(e){return this.instanceBoxRewardMap[e]},loadWaveData:function(){this.waveListMap={};for(var e=i.JsonData.Wellen,t=0;t<e.length;t++){var a=e[t],n=a.groupID;this.waveListMap[n]||(this.waveListMap[n]=[]),this.waveListMap[n].push(a)}for(var o=0,s=Object.keys(this.waveListMap);o<s.length;o++){var r=s[o];this.waveListMap[r].sort(function(e,t){return e.wellenID-t.wellenID})}},getWaveListByGroupID:function(e){return this.waveListMap[e]},loadWaveNatureData:function(){this.waveNatureListMap={};for(var e=i.JsonData.WellenNature,t=0;t<e.length;t++){var a=e[t],n=a.groupID;this.waveNatureListMap[n]||(this.waveNatureListMap[n]=[]),this.waveNatureListMap[n].push(a)}for(var o=0,s=Object.keys(this.waveNatureListMap);o<s.length;o++){var r=s[o];this.waveNatureListMap[r].sort(function(e,t){return e.wellenID-t.wellenID})}},getWaveNatureListByGroupID:function(e){return this.waveNatureListMap[e]},loadTroopData:function(){this.troopMap={};for(var e=i.JsonData.Troop,t=0;t<e.length;t++){var a=e[t];this.troopMap[a.id]=a}},getTroopDataById:function(e){return this.troopMap[e]},loadRouteData:function(){this.routeMap={};for(var e=i.JsonData.Route,t=0;t<e.length;t++){var a=e[t];this.routeMap[a.id]=a}},getRouteDataById:function(e){return this.routeMap[e]},loadSoldierData:function(){this.soldierMap={};for(var e=i.JsonData.Soldier,t=0;t<e.length;t++){var a=e[t];this.soldierMap[a.id]=a}},getSoldierDataById:function(e){return this.soldierMap[e]},loadEnemyData:function(){this.enemyMap={};for(var e=i.JsonData.Enemy,t=0;t<e.length;t++){var a=e[t];this.enemyMap[a.id]=a}},getEnemyDataById:function(e){return this.enemyMap[e]},loadBulletData:function(){this.bulletMap={};for(var e=i.JsonData.Bullet,t=0;t<e.length;t++){var a=e[t];this.bulletMap[a.id]=a}},getBulletDataById:function(e){return this.bulletMap[e]},loadTowerTypeData:function(){this.towerTypeMap={};for(var e=i.JsonData.TowerType,t=0;t<e.length;t++){var a=e[t];this.towerTypeMap[a.id]=a}},getTowerTypeById:function(e){return this.towerTypeMap[e]},getTowerTypeSortList:function(){var e,t=[];for(e in this.towerTypeMap){var i=this.towerTypeMap[e];t.push([i.order,e])}t.sort(function(e,t){return e[0]-t[0]});for(var a=[],n=0;n<t.length;n++)a.push(Math.floor(t[n][1]));return a},getTowerTypeList:function(){var e=Object.keys(this.towerTypeMap);e.sort(function(e,t){return e-t});for(var t=[],i=0;i<e.length;i++)t.push(Math.floor(e[i]));return t},loadTowerData:function(){this.towerMap={},this.towerBattleLevelMap={},this.towerBattleHeroMap={},this.towerGroupMap={};for(var e=i.JsonData.Tower,t=0;t<e.length;t++){var a=e[t],n=(this.towerMap[a.id]=a).typeID+"_"+a.level;this.towerBattleLevelMap.hasOwnProperty(n)||(this.towerBattleLevelMap[n]=[]),this.towerBattleLevelMap[n].push(a),a.heroId&&(this.towerBattleHeroMap[a.heroId]=a)}},getTowerListByType:function(e,t){return this.towerBattleLevelMap[e+"_"+t]},getTowerDataById:function(e){return this.towerMap[e]},getTowerDataByHeroId:function(e){return this.towerBattleHeroMap[e]},loadTowerStarLevelData:function(){this.towerStarLevelMap={},this.towerBreakCount=0;for(var e=i.JsonData.TowerStarLevel,t=0;t<e.length;t++)e[t].break&&(this.towerBreakCount+=1)},getTowerStarDataByLevel:function(e,t){return t<1?t=1:t>i.JsonData.TowerStarLevel.length&&(t=i.JsonData.TowerStarLevel.length),t=Math.floor(t)-1,t=i.JsonData.TowerStarLevel[t],t=JSON.stringify(t),t=JSON.parse(t),e=i.templateManager.getTowerTypeById(e),t.ability=Math.round(t.ability/1e4*e.basePower),t.coinNum=Math.round(t.coinNum/1e4*e.baseGold),t},getTowerStarMaxLevelById:function(){return i.JsonData.TowerStarLevel.length},getTowerMaxLevelById:function(e){return i.templateManager.getTowerStarMaxLevelById(e)},getTowerBreakCountById:function(){return this.towerBreakCount},loadTowerQualityMap:function(){this.towerQualityMap={},this.towerQualityTypeMap={};for(var e=i.JsonData.TowerQualityType,t=0;t<e.length;t++){var a=e[t];this.towerQualityMap[a.id]=a,this.towerQualityTypeMap.hasOwnProperty(a.towerType)||(this.towerQualityTypeMap[a.towerType]={}),this.towerQualityTypeMap[a.towerType][a.level]=a}},getTowerQualityById:function(e){return this.towerQualityMap[e]},getTowerQualityMapByType:function(e){return this.towerQualityTypeMap[e]},getTowerQualityHeroListByType:function(e){var t=[];if(!this.towerQualityTypeMap.hasOwnProperty(e))return t;var i,a=this.towerQualityTypeMap[e];for(i in a)a[i].heroGrid&&t.push(i);return t.sort(function(e,t){return e-t}),t},getTowerQualityUpLevelListByType:function(e){var t=[];if(!this.towerQualityTypeMap.hasOwnProperty(e))return t;var i,a=this.towerQualityTypeMap[e];for(i in a){var n=a[i];t.push([i,n.towerLevel])}return t.sort(function(e,t){return e[0]-t[0]}),t},getTowerQualityDataByLevel:function(e,t){return this.towerQualityTypeMap.hasOwnProperty(e)?this.towerQualityTypeMap[e][t]:null},getTowerQualityMaxLevelById:function(e){return this.towerQualityTypeMap.hasOwnProperty(e)?(e=this.towerQualityTypeMap[e],(e=Object.keys(e)).sort(function(e,t){return e-t}),e[e.length-1]):0},loadHeroSkillData:function(){this.heroSkillMap={},this.heroSkillGroupMap={};for(var e=0;e<i.JsonData.HeroSkill.length;e++){var t=i.JsonData.HeroSkill[e];this.heroSkillMap[t.id]=t,this.heroSkillGroupMap.hasOwnProperty(t.groupID)||(this.heroSkillGroupMap[t.groupID]=[]),this.heroSkillGroupMap[t.groupID].push(t)}},getHeroSkillDataByGroupId:function(e){for(var t=i.templateManager.getPlayerLevelDataByLevel(i.player.playerModule.getPlayerLevel()).unlockSkill,a=1,n=0;n<t.length;n++)e==t[n][0]&&(a=t[n][1]);return(a<1||a>this.heroSkillGroupMap[e].length)&&i.Logger.debug("error getHeroSkillDataByGroupId groupId = "+e+" level = "+a),this.heroSkillGroupMap[e][a-1]},getHeroSkillFirstDataByGroupId:function(e){return this.heroSkillGroupMap[e][0]},getHeroSkillDataById:function(e){return this.heroSkillMap[e]},loadHeroSkillLevelData:function(){this.heroSkillLevelMap={},this.heroSkillLevelTypeList=[],this.heroSkillLevelMaxLevelMap={};for(var e=i.JsonData.HeroSkillLevel,t=0;t<e.length;t++){var a=e[t];this.heroSkillLevelMap[a.skillId]||(this.heroSkillLevelMap[a.skillId]={},this.heroSkillLevelTypeList.push(a.skillId)),(!this.heroSkillLevelMaxLevelMap[a.skillId]||this.heroSkillLevelMaxLevelMap[a.skillId]<a.skillLevel)&&(this.heroSkillLevelMaxLevelMap[a.skillId]=a.skillLevel),this.heroSkillLevelMap[a.skillId][a.skillLevel]=a}},getHeroSkillLevelData:function(e,t){return this.heroSkillLevelMap[e]?this.heroSkillLevelMap[e][t]:null},getHeroSkillLevelMaxLevel:function(e){return this.heroSkillLevelMaxLevelMap[e]||0},getHeroSkillLevelTypeList:function(){return this.heroSkillLevelTypeList},loadEnemySkillData:function(){this.enemySkillMap={};for(var e=i.JsonData.EnemySkill,t=0;t<e.length;t++){var a=e[t];this.enemySkillMap[a.id]=a}},getEnemySkillDataById:function(e){return this.enemySkillMap[e]},loadTipsSkillMap:function(){this.tipsSkillMap={},this.tipsSkillGroupMap={},this.tipsSkillLevelMap={};for(var e=i.JsonData.TipsSkill,t=0;t<e.length;t++){var a=e[t];this.tipsSkillMap[a.id]=a,this.tipsSkillGroupMap.hasOwnProperty(a.groupID)||(this.tipsSkillGroupMap[a.groupID]=[]),this.tipsSkillGroupMap[a.groupID].push(a),this.tipsSkillLevelMap[a.groupID]||(this.tipsSkillLevelMap[a.groupID]={}),this.tipsSkillLevelMap[a.groupID][a.level]=a}},getTipsSkillByTypeLevel:function(e,t){return this.tipsSkillLevelMap[e]&&this.tipsSkillLevelMap[e][t]?this.tipsSkillLevelMap[e][t]:null},getTipsSKillDataById:function(e){return this.tipsSkillMap[e]},getTipsSkillListByGroupId:function(e){return this.tipsSkillGroupMap[e]},getCanTipsSkillByChapter:function(e,t){for(var a={},n=i.JsonData.TipsSkill,o=0;o<n.length;o++){var s=n[o];if(i.battleScene.curChapter==i.constant.YEAR_MONSTER_CHAPTER_ID){if(s.isNianInstance<=0)continue}else if(e<s.chapterMin||e>s.chapterMax)continue;a.hasOwnProperty(s.groupID)||(a[s.groupID]={key:s.groupID,value:s.weight+s.addWeight*t})}return a},loadDropPackData:function(){this.dropPackMap={};for(var e=0;e<i.JsonData.Drop.length;e++){var t=i.JsonData.Drop[e];this.dropPackMap.hasOwnProperty(t.dropId)||(this.dropPackMap[t.dropId]=[]),this.dropPackMap[t.dropId].push(t)}},loadPlayerLevelMap:function(){this.playerLevelMap={};for(var e=i.JsonData.Level,t=0;t<e.length;t++){var a=e[t];this.playerLevelMap[a.id]=a}},loadShopBoxData:function(){this.shopBoxMap={},this.shopTypeBoxMap={};for(var e=i.JsonData.Box,t=0;t<e.length;t++){var a=e[t];this.shopBoxMap[a.id]=a,this.shopTypeBoxMap.hasOwnProperty(a.type)||(this.shopTypeBoxMap[a.type]=[]),this.shopTypeBoxMap[a.type].push(a)}},getShopTypeBoxListByType:function(e){return this.shopTypeBoxMap[e]},getShopBoxDataById:function(e){return this.shopBoxMap[e]},getDropListByDropId:function(e){return this.dropPackMap[e]},getPlayerLevelDataByLevel:function(e){return this.playerLevelMap[e]},loadFunctionData:function(){this.functionMap={};for(var e=i.JsonData.Function,t=0;t<e.length;t++){var a=e[t];this.functionMap[a.id]=a}},getFunctionDataById:function(e){return this.functionMap[e]},loadTaskData:function(){this.taskMap={},this.taskTypeMap={},this.taskRewardMap={},this.taskRewardGroupMap={};for(var e=i.JsonData.Task,t=0;t<e.length;t++){var a=e[t];this.taskMap[a.id]=a,this.taskTypeMap.hasOwnProperty(a.type)||(this.taskTypeMap[a.type]=[]),this.taskTypeMap[a.type].push(a)}for(var n=i.JsonData.TaskReward,o=0;o<n.length;o++){var s=n[o];this.taskRewardMap[s.id]=s,this.taskRewardGroupMap.hasOwnProperty(s.groupId)||(this.taskRewardGroupMap[s.groupId]=[]),this.taskRewardGroupMap[s.groupId].push(s)}},getTaskById:function(e){return this.taskMap[e]},getTaskTypeMap:function(){return this.taskTypeMap},getTaskTypeMapByType:function(e){return this.taskTypeMap[e]},getTaskRewardById:function(e){return this.taskRewardMap[e]},getTaskRewardGroup:function(){return this.taskRewardGroupMap},getTaskRewardGroupByGroup:function(e){return this.taskRewardGroupMap[e]},loadNewYearTaskData:function(){this.newYearTaskMap={},this.newYearDailyTaskMap={},this.newYearTaskMedalMap={},this.newYearTaskRewardMap={},this.newYearTaskRewardBoxMap={};for(var e=i.JsonData.YearTask,t=0;t<e.length;t++){var a=e[t];this.newYearTaskMap[a.id]=a,this.newYearDailyTaskMap.hasOwnProperty(a.day)||(this.newYearDailyTaskMap[a.day]=[]),this.newYearDailyTaskMap[a.day].push(a)}for(var n=i.JsonData.Medal,o=0;o<n.length;o++){var s=n[o];this.newYearTaskMedalMap[s.id]=s}for(var r=i.JsonData.YearTaskReward,c=0;c<r.length;c++){var l=r[c],d=[];d.push(l.reward1),d.push(l.reward2),d.push(l.reward3),d.push(l.reward4),this.newYearTaskRewardMap[l.day]=d}for(var h=i.JsonData.YearTaskRewardBox,u=0;u<h.length;u++){var p=h[u];this.newYearTaskRewardBoxMap[p.id]=p}},getNewYearTaskDataById:function(e){return this.newYearTaskMap[e]},getNewYearDailyTaskList:function(e){return this.newYearDailyTaskMap[e]},getNewYearTaskMedalById:function(e){return this.newYearTaskMedalMap[e]},getNewYearTaskRewardListByDay:function(e){return this.newYearTaskRewardMap[e]},getNewYearTaskRewardBoxDataById:function(e){return this.newYearTaskRewardBoxMap[e]},loadHeroMap:function(){this.heroMap={},this.heroInTowerMap={},this.activeHeroList=[];for(var e=i.JsonData.Hero,t=0;t<e.length;t++){var a=e[t];this.heroMap[a.id]=a;for(var n=0;n<a.heroInTowerType.length;n++){var o=a.heroInTowerType[n];this.heroInTowerMap.hasOwnProperty(o)||(this.heroInTowerMap[o]=[]),this.heroInTowerMap[o].push(a.id)}!a.isComingSoon&&this.activeHeroList.indexOf(a.id)<0&&this.activeHeroList.push(a.id)}},getHeroDataById:function(e){return this.heroMap[e]},getHeroInTowerTypeList:function(e){return this.heroInTowerMap.hasOwnProperty(e)?this.heroInTowerMap[e]:[]},loadHeroCardMap:function(){this.heroCardMap={},this.heroCardHeroIdMap={};for(var e=i.JsonData.HeroCard,t=0;t<e.length;t++){var a=e[t];this.heroCardMap[a.id]=a,this.heroCardHeroIdMap[a.heroId]=a}},getHeroCardDataById:function(e){if(this.heroCardMap.hasOwnProperty(e))return this.heroCardMap[e]},getHeroCardDataByHeroId:function(e){return this.heroCardHeroIdMap[e]},loadHeroStarMap:function(){this.heroStarMap={},this.heroStarLevelMap={},this.heroStarSkillMap={},this.heroSkillTypeMap={};for(var e=i.JsonData.HeroStar,t=0;t<e.length;t++){var a=e[t];this.heroStarMap[a.id]=a,this.heroStarLevelMap.hasOwnProperty(a.heroId)||(this.heroStarLevelMap[a.heroId]={}),this.heroStarLevelMap[a.heroId][a.star]=a,this.heroStarSkillMap.hasOwnProperty(a.heroId)||(this.heroStarSkillMap[a.heroId]={});for(var n=0;n<a.starSkill.length;n++){var o=a.starSkill[n];this.heroStarSkillMap[a.heroId][o]=a}if(this.heroSkillTypeMap.hasOwnProperty(a.heroId)||(this.heroSkillTypeMap[a.heroId]={}),1===a.star)this.heroSkillTypeMap[a.heroId][i.constant.HERO_SKILL_TYPE_VAN]||(this.heroSkillTypeMap[a.heroId][i.constant.HERO_SKILL_TYPE_VAN]=[]),1<=a.starSkill.length&&this.heroSkillTypeMap[a.heroId][i.constant.HERO_SKILL_TYPE_VAN].push(a.starSkill[0]),this.heroSkillTypeMap[a.heroId][i.constant.HERO_SKILL_TYPE_TOWER]||(this.heroSkillTypeMap[a.heroId][i.constant.HERO_SKILL_TYPE_TOWER]=[]),2<=a.starSkill.length&&this.heroSkillTypeMap[a.heroId][i.constant.HERO_SKILL_TYPE_TOWER].push(a.starSkill[1]);else{this.heroSkillTypeMap[a.heroId][i.constant.HERO_SKILL_TYPE_TALENT]||(this.heroSkillTypeMap[a.heroId][i.constant.HERO_SKILL_TYPE_TALENT]=[]);for(var s=0;s<a.starSkill.length;s++)this.heroSkillTypeMap[a.heroId][i.constant.HERO_SKILL_TYPE_TALENT].push(a.starSkill[s])}}},getHeroStarSkill:function(e,t){return this.heroStarSkillMap.hasOwnProperty(e)?this.heroStarSkillMap[e][t]:null},getHeroSkillByType:function(e,t){return this.heroSkillTypeMap[e]&&this.heroSkillTypeMap[e][t]?this.heroSkillTypeMap[e][t]:[]},getHeroStarDataById:function(e){return this.heroStarMap[e]},getHeroStarDataByHeroStar:function(e,t){return this.heroStarLevelMap.hasOwnProperty(e)?this.heroStarLevelMap[e][t]:null},getHeroStarLenByHeroId:function(e){return this.heroStarLevelMap.hasOwnProperty(e)?Object.keys(this.heroStarLevelMap[e]).length:0},getHeroStarDataBySKillId:function(e,t){if(!this.heroStarLevelMap.hasOwnProperty(e))return null;var i,a=null;for(i in this.heroStarLevelMap[e]){var n=this.heroStarLevelMap[e][i];if(n.starSkill==t){a=n;break}}return a},getHeroStarSkillList:function(e){var t=[];if(!this.heroStarLevelMap.hasOwnProperty(e))return t;var i,a=this.heroStarLevelMap[e];for(i in a)for(var n=a[i],o=0;o<n.starSkill.length;o++)t.push([i,n.starSkill[o]]);return t.sort(function(e,t){return e[0]-t[0]}),t},getHeroStarNumByLevel:function(e){for(var t=-1,i=0;i<this.heroStarLevelList.length;i++)if(e<this.heroStarLevelList[i]){t=i;break}return t<0?this.heroStarLevelList.length:t},loadHeroLevelMap:function(){this.heroBreakCount=0;var e=i.JsonData.HeroLevel;this.heroStarLevelList=[];for(var t=0;t<e.length;t++){var a=e[t];2===a.type?this.heroBreakCount++:3===a.type&&this.heroStarLevelList.push(a.level)}},getHeroLevelDataByLevel:function(e,t){return t<1?t=1:t>i.JsonData.HeroLevel.length&&(t=i.JsonData.HeroLevel.length),t=Math.floor(t)-1,t=i.JsonData.HeroLevel[t],t=JSON.stringify(t),t=JSON.parse(t),e=i.templateManager.getSoldierDataById(e),t.hp=Math.round(t.hp/1e4*e.hp),t.aggressivity=Math.round(t.aggressivity/1e4*e.physicalAttack),t.aggressivityMagic=Math.round(t.aggressivityMagic/1e4*e.magicAttack),t.defense=Math.round(t.defense/1e4*e.physicalDefense),t.defenseMagic=Math.round(t.defenseMagic/1e4*e.magicDefense),t.powerValue=Math.round(t.powerValue/1e4*e.basePower),t},getHeroBreakCountById:function(){return this.heroBreakCount},getHeroMaxLevelById:function(){return i.JsonData.HeroLevel.length},loadHeroBattleNumMap:function(){this.heroBattleNumMap={};for(var e=i.JsonData.HeroBattleNum,t=0;t<e.length;t++){var a=e[t];this.heroBattleNumMap[a.heroNum]=a}},getHeroBattleNumDataById:function(e){return this.heroBattleNumMap[e]},loadHeroQualityMap:function(){this.heroQualityMap={};for(var e=i.JsonData.HeroQuality,t=0;t<e.length;t++){var a=e[t];this.heroQualityMap[a.id]=a}},getHeroQualityDataById:function(e){return this.heroQualityMap[e]},loadHeroRestrainMap:function(){this.heroRestrainMap={},this.heroRestrainGroupListMap={},this.heroRestrainGroupMap={};for(var e=i.JsonData.HeroRestrain,t=0;t<e.length;t++){var a=e[t];this.heroRestrainMap[a.id]=a,this.heroRestrainGroupListMap.hasOwnProperty(a.groupId)||(this.heroRestrainGroupListMap[a.groupId]=[]),this.heroRestrainGroupListMap[a.groupId].push(a),this.heroRestrainGroupMap.hasOwnProperty(a.groupId)||(this.heroRestrainGroupMap[a.groupId]={}),this.heroRestrainGroupMap[a.groupId][a.openLevel[0]]=a}},getHeroRestrainByGroupIdAndLevel:function(e,t){return this.heroRestrainGroupMap[e]?this.heroRestrainGroupMap[e][t]:null},getHeroRestrainListByGroupId:function(e){return this.heroRestrainGroupListMap[e]},getHeroRestrainGroupIdList:function(){return Object.keys(this.heroRestrainGroupListMap)},getHeroRestrainGroupIdListByHeroId:function(e){for(var t=[],i=this.getHeroRestrainGroupIdList(),a=0;a<i.length;a++)for(var n=this.getHeroRestrainListByGroupId(i[a])[0],o=0;o<n.heroList.length;o++)if(0<=n.heroList[o].indexOf(e)){t.push(i[a]);break}return t},getHeroRestrainById:function(e){return this.heroRestrainMap[e]},getAllHeroRestrainIds:function(){return Object.keys(this.heroRestrainMap)},loadNatureData:function(){this.natureMap={};for(var e=i.JsonData.Nature,t=0;t<e.length;t++){var a=e[t];this.natureMap[a.id]=a}},getNatureDataById:function(e){return this.natureMap[e]},loadMaskWord:function(){this.maskWordList=[];for(var e=i.JsonData.MaskWord,t=0;t<e.length;t++){var a=e[t];this.maskWordList.push(a.name)}},getMaskWordList:function(){return this.maskWordList},loadStartBuffMap:function(){this.startBuffMap={};for(var e=i.JsonData.StartBuff,t=0;t<e.length;t++){var a=e[t];this.startBuffMap[a.id]=a}},getStartBuffDataById:function(e){return this.startBuffMap[e]},loadPushData:function(){this.pushMap={};for(var e=i.JsonData.PushText,t=0;t<e.length;t++){var a=e[t];this.pushMap[a.id]=a}},getPushData:function(e){return this.pushMap[e]},loadSignData:function(){this.signMap={},this.signGroupMap={};for(var e=i.JsonData.SignIn,t=0;t<e.length;t++){var a=e[t];this.signMap[a.id]=a,this.signGroupMap.hasOwnProperty(a.groupID)||(this.signGroupMap[a.groupID]=[]),this.signGroupMap[a.groupID].push(a)}},getSignByGroupId:function(e){return this.signGroupMap[e]},loadBubbleData:function(){this.bubbleMap={},this.bubbleHeroMap={};for(var e=i.JsonData.Bubble,t=0;t<e.length;t++){var a=e[t];this.bubbleMap.hasOwnProperty(a.type)||(this.bubbleMap[a.type]=[]),this.bubbleMap[a.type].push(a),a.heroId&&(this.bubbleHeroMap.hasOwnProperty(a.heroId)||(this.bubbleHeroMap[a.heroId]=[]),this.bubbleHeroMap[a.heroId].push(a))}},getBubbleListByType:function(e){return this.bubbleMap[e]},getBubbleTypeList:function(){return Object.keys(this.bubbleMap)},getBubbleDataByHeroId:function(e){return this.bubbleHeroMap[e]},loadFailureData:function(){this.failureMap={};for(var e=i.JsonData.FailureAdvice,t=0;t<e.length;t++){var a=e[t];this.failureMap[a.id]=a}},getFailureDataById:function(e){return this.failureMap[e]},loadVipData:function(){this.vipMap={},this.vipHeroList=[];for(var e=i.JsonData.Vip,t=0;t<e.length;t++){var a=e[t];(this.vipMap[a.vipLevel]=a).heroId&&this.vipHeroList.push(a)}},getVipDataByLevel:function(e){return this.vipMap[e]},getVipMaxLevel:function(){var e=Object.keys(this.vipMap);return e.sort(function(e,t){return t-e}),parseInt(e[0])},getVipHeroLevelList:function(){return this.vipHeroList},loadShareLimitData:function(){this.shareLimitMap={};var e=i.JsonData.Share;this.shareLimitCount=e.length,this.maxShareLimitCfg=null;for(var t=0;t<e.length;t++){var a=e[t];this.shareLimitMap[a.id]=a,t===e.length-1&&(this.maxShareLimitCfg=a)}},getShareLimitCfg:function(e){return e+=1,this.shareLimitMap.hasOwnProperty(e)?this.shareLimitMap[e]:this.maxShareLimitCfg},getShareLimitCount:function(){return this.shareLimitCount},loadSkillCardsData:function(){this.skillCardsMap={},this.skillCardsSkillMap={};for(var e=i.JsonData.SkillCard,t=0;t<e.length;t++){var a=e[t];this.skillCardsMap[a.id]=a,this.skillCardsSkillMap[a.skillId]=a}},getSkillCardById:function(e){return this.skillCardsMap[e]},getSkillCardBySkillId:function(e){return this.skillCardsSkillMap[e]},loadGuildData:function(){this.guildMap={};for(var e=i.JsonData.Guild,t=0;t<e.length;t++){var a=e[t];this.guildMap[a.id]=a}},getGuildData:function(e){return this.guildMap[e]},loadDefendLevelData:function(){this.defendLevelMap={},this.defendLevelListMap={};for(var e=i.JsonData.DefendLevel,t=0;t<e.length;t++){var a=e[t],n=(this.defendLevelMap[a.id]=a).minLevel+"-"+a.maxLevel;this.defendLevelListMap.hasOwnProperty(n)||(this.defendLevelListMap[n]=[]),this.defendLevelListMap[n].push({key:a,value:a.weight})}},getDefendDataById:function(e){return this.defendLevelMap[e]},getDefendLevelList:function(e){var t,i;for(i in this.defendLevelListMap){var a=i.split("-"),n=parseInt(a[0]);if(a=parseInt(a[1]),n<=e&&e<=a){t=this.defendLevelListMap[i];break}}return t},loadDefendLevelRewardData:function(){this.defendLevelRewardMap={};for(var e=i.JsonData.DefendLevelReward,t=0;t<e.length;t++){var a=e[t];this.defendLevelRewardMap[a.level]=a}},getDefendLevelRewardByLevel:function(e){return this.defendLevelRewardMap[e]},loadDefendEffectData:function(){this.defendEffectMap={};for(var e=i.JsonData.DefendEffect,t=0;t<e.length;t++){var a=e[t];this.defendEffectMap[a.times]=a}},getDefendEffectDataByTimes:function(e){return this.defendEffectMap[e]},loadMainTaskData:function(){this.mainTaskMap={};for(var e=i.JsonData.Goal,t=0;t<e.length;t++){var a=e[t];this.mainTaskMap[a.id]=a}},getMainTaskDataById:function(e){return this.mainTaskMap[e]},getFirstMainTaskId:function(){return i.JsonData.Goal[0].id},loadHeadData:function(){this.headMap={};for(var e=i.JsonData.Head,t=0;t<e.length;t++){var a=e[t];this.headMap[a.id]=a}},getHeadDataById:function(e){return this.headMap[e]},getCurLanguage:function(){if(!(e=cc.sys.localStorage.getItem(i.constant.SAVE_LANGUAGE_SETTING_DATA)))for(var e=i.config.defaultLanguage,t=i.nativeManager.getDeviceLanguage(),a=i.JsonData.Language,n=0;n<a.length;n++)if(t===a[n].symbol){e=t;break}return e},setCurLanguage:function(e){cc.sys.localStorage.setItem(i.constant.SAVE_LANGUAGE_SETTING_DATA,e)},checkJsonData:function(){this.checkBoxData(),this.checkDropData(),this.checkGameTextData(),this.checkHeroCardData(),this.checkHeroLevelData(),this.checkHeroGayData(),this.checkInstanceEnemyData(),this.checkWaveData(),this.checkMainTaskData()},checkInstanceEnemyData:function(){for(var e=i.JsonData.Instance,t=0;t<e.length;t++){var a=e[t],n=a.newEnemy;if(n)for(var o=this.getInstanceEnemyListById(a.id),s=0;s<n.length;s++){var r=n[s];this.enemyMap.hasOwnProperty(r)||cc.error("instance newEnemy Data is null instanceId:"+a.id+" enemyyId: "+r),o.indexOf(r)<0&&cc.error("instance newEnemy Data is not in waveData instanceId:"+a.id+" enemyyId: "+r)}var c=a.wellenNature;this.waveNatureListMap.hasOwnProperty(c)||cc.error("instance waveNatureId is null instanceId:"+a.id+" waveNatureId: "+c);var l=a.wellen;(c=this.getWaveListByGroupID(l))?(d=a.maxWellen)>c.length&&cc.error("instance maxWellen  is max instanceId:"+a.id+" maxWellen: "+d):cc.error("instance wellenId is null instanceId:"+a.id+" wellenId: "+l);var d=a.firstPiece;d&&(l=d[0],d[1],this.heroCardMap.hasOwnProperty(l)||cc.error("instance firstHeroPiece is null instanceId:"+a.id+" pieceId: "+l));var h=a.firstSkillPiece;if(h)for(var u=0;u<h.length;u++){var p=h[u][0];this.skillCardsMap.hasOwnProperty(p)||cc.error("instance firstSkillPiece is null instanceId:"+a.id+" skillCardId: "+p)}var g=a.heroNeedLevel;if(g)for(var _=0;_<g.length;_++){var m=g[_][0];this.heroMap.hasOwnProperty(m)||cc.error("instance tipHeroes is null instanceId:"+a.id+" heroId: "+m)}var E=a.heroTowerId;if(E)for(var T=0;T<E.length;T++){var f=E[T];this.towerMap.hasOwnProperty(f)||cc.error("instance tipHeroTower is null instanceId:"+a.id+" heroTowerId: "+f)}}},checkWaveData:function(){for(var e=i.JsonData.Wellen,t=0;t<e.length;t++){for(var a=e[t],n=a.enemyList,o=0;o<n.length;o++)for(var s=n[o],r=0;r<s.length;r++){var c=s[r];this.enemyMap.hasOwnProperty(c)||cc.error("Wellen enemy Data is null waveDataId:"+a.id+" enemyyId: "+c)}this.getWillCreateEnemyDataList(a)}},getWillCreateEnemyDataList:function(e){var t=e.routeTips,a=e.troopList,n=e.enemyList,o=e.tipsNum;n.length<a.length&&cc.error("Wellen enemy Data length short waveDataId:"+e.id);for(var s={},r=0;r<a.length;r++){var c=a[r][1],l=this.getRouteType(c,o);l<0&&cc.error("Wellen tipsNum routeId is miss waveDataId:"+e.id+" routeId : "+c),s[l]||(s[l]=[]),c={troopId:a[r][0],enemyList:n[r]},s[l].push(c)}for(var d=Object.keys(s),h=0;h<d.length;h++){for(var u=d[h],p=!1,g=0;g<t.length;g++)t[g][0]==u&&(p=!0);p||cc.error("Wellen tipsNum routeId is not in routeIdList waveDataId:"+e.id+" routeId : "+u)}for(var _=[],m=0;m<t.length;m++){var E={},T=t[m][0],f=s[T];if(f){for(var S=0;S<f.length;S++)for(var A=f[S],I=A.troopId,y=A.enemyList,P=i.templateManager.getTroopDataById(I).troopGroup,v=0;v<P.length;v++){var L=y[P[v][1]-1];E[L]?E[L]++:E[L]=1}_.push(E)}else cc.error("Wellen next enemy Data is null waveDataId:"+e.id+" routeId: "+T)}return _},getRouteType:function(e,t){for(var i=0;i<t.length;i++)for(var a=t[i],n=1;n<a.length;n++)if(a[n]==e)return a[0];return-1},getQualityName:function(e){var t=i.GameTextCode.TOWER_QUALITY_1;switch(e){case i.constant.QUALITY_TYPE_1:t=i.GameTextCode.TOWER_QUALITY_1;break;case i.constant.QUALITY_TYPE_2:t=i.GameTextCode.TOWER_QUALITY_2;break;case i.constant.QUALITY_TYPE_3:t=i.GameTextCode.TOWER_QUALITY_5;break;case i.constant.QUALITY_TYPE_4:t=i.GameTextCode.TOWER_QUALITY_9}return i.lang.getGameText(t)},checkBoxData:function(){for(var e=i.JsonData.Box,t=0;t<e.length;t++){var a=e[t],n=a.highDrop;this.dropPackMap.hasOwnProperty(n)||cc.error("Box dropId is null boxId:"+a.id+" dropId: "+n)}},checkDropData:function(){for(var e=i.JsonData.Drop,t=0;t<e.length;t++){var a=e[t],n=a.itemId;this.checkItemIsHas(n)||cc.error("Drop itemId is null dropId:"+a.id+" itemId: "+n)}},checkItemIsHas:function(e){var t=!0,a=Math.floor(e/i.constant.ITEM_TYPE_BASE);return a===i.constant.ITEM_TYPE_COIN||a===i.constant.ITEM_TYPE_BAG?this.itemMap.hasOwnProperty(e)||(t=!1):a===i.constant.ITEM_TYPE_HERO_PIECE?this.heroCardMap.hasOwnProperty(e)||(t=!1):a===i.constant.ITEM_TYPE_SKILL_PIECE&&this.skillCardsMap.hasOwnProperty(e)||(t=!1),t},checkGameTextData:function(){for(var e=[],t=[],a=Object.keys(i.GameTextCode),n=0;n<a.length;n++){var o=a[n];0<=e.indexOf(o)&&cc.error("GameText  id  is duplicate textId:"+o),e.push(o),o=i.GameTextCode[o],0<=t.indexOf(o)&&cc.error("GameText  value  is duplicate value:"+o),t.push(o)}},checkHeroCardData:function(){for(var e=i.JsonData.HeroCard,t=0;t<e.length;t++){var a=e[t],n=a.heroId;this.heroMap.hasOwnProperty(n)||cc.error("HeroCard  heroId  is null ID:"+a.id+" heroId: "+n)}},checkHeroLevelData:function(){},checkHeroGayData:function(){for(var e=i.JsonData.HeroRestrain,t=0;t<e.length;t++)for(var a=e[t],n=a.heroList,o=0;o<n.length;o++)for(var s=n[o],r=0;r<s.length;r++){var c=s[r];this.heroMap.hasOwnProperty(c)||cc.error("HeroRestrain  heroId  is null ID:"+a.id+" heroId: "+c)}},checkMainTaskData:function(){for(var e=i.JsonData.Goal,t=0;t<e.length;t++){var a=e[t],n=a.taskType,o=a.taskValue,s=a.id;switch(n){case i.constant.MAIN_TASK_TYPE_PASS_INSTANCE:2!==o.length&&cc.error("checkMainTaskData  taskTarget length error :"+s);var r=o[0],c=o[1];(!(r=this.getInstanceListByChapterId(r))||c>r.length)&&cc.error("checkMainTaskData  taskTarget value error :"+s);break;case i.constant.MAIN_TASK_TYPE_GET_HERO:1!==o.length&&cc.error("checkMainTaskData  taskTarget length error :"+s);var l=o[0],d=this.getHeroDataById(l);d||cc.error("checkMainTaskData  taskTarget value error :"+s);break;case i.constant.MAIN_TASK_TYPE_GET_HERO_COUNT:1!==o.length&&cc.error("checkMainTaskData  taskTarget length error :"+s);break;case i.constant.MAIN_TASK_TYPE_VAN_BATTLE_COUNT:case i.constant.MAIN_TASK_TYPE_TOWER_HERO_BATTLE_COUNT:2!==o.length&&cc.error("checkMainTaskData  taskTarget length error :"+s),l=o[0],(d=this.getHeroDataById(l))||cc.error("checkMainTaskData  taskTarget value error :"+s);break;case i.constant.MAIN_TASK_TYPE_GET_GAY_FRIEND:1!==o.length&&cc.error("checkMainTaskData  taskTarget length error :"+s);var h=o[0];(p=this.getHeroRestrainListByGroupId(h))||cc.error("checkMainTaskData  taskTarget value error :"+s);break;case i.constant.MAIN_TASK_TYPE_GET_GAY_FRIEND_COUNT:1!==o.length&&cc.error("checkMainTaskData  taskTarget length error :"+s);break;case i.constant.MAIN_TASK_TYPE_HERO_IN_MAP:2!==o.length&&cc.error("checkMainTaskData  taskTarget length error :"+s),h=o[0],(p=this.getHeroDataById(h))||cc.error("checkMainTaskData  taskTarget value error :"+s);break;case i.constant.MAIN_TASK_TYPE_HERO_IN_MAP_COUNT:1!==o.length&&cc.error("checkMainTaskData  taskTarget length error :"+s);break;case i.constant.MAIN_TASK_TYPE_TOWER_LEVEL:2!==o.length&&cc.error("checkMainTaskData  taskTarget length error :"+s),h=o[0];var u=o[1],p=this.getTowerTypeById(h),g=this.getTowerMaxLevelById(h);(!p||g<u)&&cc.error("checkMainTaskData  taskTarget value error :"+s);break;case i.constant.MAIN_TASK_TYPE_ALL_TOWER_LEVEL:1!==o.length&&cc.error("checkMainTaskData  taskTarget length error :"+s);break;case i.constant.MAIN_TASK_TYPE_TOWER_BREAK_COUNT:2!==o.length&&cc.error("checkMainTaskData  taskTarget length error :"+s),h=o[0],u=o[1],p=this.getTowerTypeById(h),g=this.getTowerBreakCountById(h),(!p||g<u)&&cc.error("checkMainTaskData  taskTarget value error :"+s);break;case i.constant.MAIN_TASK_TYPE_TOWER_WEAK:2!==o.length&&cc.error("checkMainTaskData  taskTarget length error :"+s),h=o[0],u=o[1],p=this.getTowerTypeById(h);var _=this.getTowerQualityMaxLevelById(h);(!p||_<u)&&cc.error("checkMainTaskData  taskTarget value error :"+s);break;case i.constant.MAIN_TASK_TYPE_ALL_TOWER_WEAK:1!==o.length&&cc.error("checkMainTaskData  taskTarget length error :"+s),(u=o[0])>(_=this.getTowerQualityMaxLevelById(1))&&cc.error("checkMainTaskData  taskTarget value error :"+s);break;case i.constant.MAIN_TASK_TYPE_HERO_LEVEL:2!==o.length&&cc.error("checkMainTaskData  taskTarget length error :"+s),h=o[0],u=o[1],p=this.getHeroDataById(h),g=this.getHeroMaxLevelById(h),(!p||g<u)&&cc.error("checkMainTaskData  taskTarget value error :"+s);break;case i.constant.MAIN_TASK_TYPE_HERO_LEVEL_COUNT:2!==o.length&&cc.error("checkMainTaskData  taskTarget length error :"+s),h=o[0],u=o[1];var m=this.activeHeroList.length;g=this.getHeroMaxLevelById(43001),(m<h||g<u)&&cc.error("checkMainTaskData  taskTarget value error :"+s);break;case i.constant.MAIN_TASK_TYPE_HERO_BREAK_COUNT:2!==o.length&&cc.error("checkMainTaskData  taskTarget length error :"+s),h=o[0],u=o[1],p=this.getHeroDataById(h),g=this.getHeroBreakCountById(h),(!p||g<u)&&cc.error("checkMainTaskData  taskTarget value error :"+s);break;case i.constant.MAIN_TASK_TYPE_HERO_STAR_LEVEL:2!==o.length&&cc.error("checkMainTaskData  taskTarget length error :"+s),h=o[0],u=o[1],(!(p=this.getHeroDataById(h))||5<u)&&cc.error("checkMainTaskData  taskTarget value error :"+s);break;case i.constant.MAIN_TASK_TYPE_HERO_STAR_COUNT:2!==o.length&&cc.error("checkMainTaskData  taskTarget length error :"+s),h=o[0],u=o[1],(h>(m=this.activeHeroList.length)||5<u)&&cc.error("checkMainTaskData  taskTarget value error :"+s);break;case i.constant.MAIN_TASK_TYPE_HERO_WEAK:2!==o.length&&cc.error("checkMainTaskData  taskTarget length error :"+s),h=o[0],u=o[1],(!(p=this.getHeroDataById(h))||4<u)&&cc.error("checkMainTaskData  taskTarget value error :"+s);break;case i.constant.MAIN_TASK_TYPE_HERO_WEAK_COUNT:2!==o.length&&cc.error("checkMainTaskData  taskTarget length error :"+s),h=o[0],u=o[1],(h>(m=this.activeHeroList.length)||4<u)&&cc.error("checkMainTaskData  taskTarget value error :"+s);break;case i.constant.MAIN_TASK_TYPE_GET_SKILL:1!==o.length&&cc.error("checkMainTaskData  taskTarget length error :"+s),h=o[0],this.heroSkillLevelTypeList.indexOf(h)<0&&cc.error("checkMainTaskData  taskTarget value error :"+s);break;case i.constant.MAIN_TASK_TYPE_SKILL_LEVEL:2!==o.length&&cc.error("checkMainTaskData  taskTarget length error :"+s),h=o[0],u=o[1],g=this.getHeroSkillLevelMaxLevel(h),(this.heroSkillLevelTypeList.indexOf(h)<0||g<u)&&cc.error("checkMainTaskData  taskTarget value error :"+s);break;case i.constant.MAIN_TASK_TYPE_GET_SKILL_COUNT:1!==o.length&&cc.error("checkMainTaskData  taskTarget length error :"+s),(h=o[0])>this.heroSkillLevelTypeList.length&&cc.error("checkMainTaskData  taskTarget value error :"+s);break;case i.constant.MAIN_TASK_TYPE_SKILL_LEVEL_COUNT:2!==o.length&&cc.error("checkMainTaskData  taskTarget length error :"+s),h=o[0],u=o[1],g=this.getHeroSkillLevelMaxLevel(101),(h>this.heroSkillLevelTypeList.length||g<u)&&cc.error("checkMainTaskData  taskTarget value error :"+s);break;case i.constant.MAIN_TASK_TYPE_SKILL_STAR:2!==o.length&&cc.error("checkMainTaskData  taskTarget length error :"+s),h=o[0],u=o[1],(this.heroSkillLevelTypeList.indexOf(h)<0||4<u)&&cc.error("checkMainTaskData  taskTarget value error :"+s);break;case i.constant.MAIN_TASK_TYPE_SKILL_STAR_COUNT:2!==o.length&&cc.error("checkMainTaskData  taskTarget length error :"+s),h=o[0],u=o[1],(h>this.heroSkillLevelTypeList.length||4<u)&&cc.error("checkMainTaskData  taskTarget value error :"+s)}}}}),i.templateManager=i.TemplateManager.getInstance(),cc._RF.pop()},{}],TimeErrorPage:[function(e,t){"use strict";cc._RF.push(t,"1419cZOvBFJ54rRUtY0Uy/t","TimeErrorPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{},onLoadPage:function(){this.tipLabel=cc.find("content/tipLabel",this.node).getComponent(cc.Label),this.serverTimeLabel=cc.find("content/confirmButton/serverTimeLabel",this.node).getComponent(cc.Label)},showPageBegan:function(){var e;this.updateTime=0,this.errorType=this.data.errorData.type,this.serverTimeLabel.node.active=!1,this.errorType===i.GameTextCode.NETWORK_ERROR?this.tipLabel.string=i.lang.getGameText(i.GameTextCode.NETWORK_ERROR_TIPS):this.errorType===i.GameTextCode.SYSTEM_TIME_ERROR&&(this.serverTime=this.data.errorData.serverTime,e=i.timeUtil.getTime(),e=Math.abs(e-this.serverTime),e=Math.ceil(e/6e4),this.tipLabel.string=i.lang.getFormatString(i.GameTextCode.SYSTEM_TIME_ERROR_TIPS,[e]),this.serverTimeLabel.node.active=!0,this.updateTimeLabel()),i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_TIME_ERROR_TIP)},updateTimeLabel:function(){i.lang.updateLabelString(this.serverTimeLabel,[i.timeUtil.getTimeFormat(this.serverTime)])},update:function(e){this.serverTimeLabel.node.active&&(this.updateTime+=e,this.updateTime<1||(this.updateTime=0,this.serverTime+=1e3,this.updateTimeLabel()))}}),cc._RF.pop()},{}],TimeUtil:[function(e,t){"use strict";cc._RF.push(t,"9bf24BY14ZNHY18vs5bUSRJ","TimeUtil");var i=t,a=cc.Class({statics:{_instance:null,getInstance:function(){return this._instance||(this._instance=new a),this._instance}},properties:{ONE_DAY_MILLISECOND:864e5,ONE_DAY_SECOND:86400,ONE_HOUR_SECOND:3600},getTime:function(){return(new Date).getTime()},getSecond:function(){return Math.ceil((new Date).getTime()/1e3)},secondFormat:function(e,t){var i=Math.ceil(e),a=this.twoTimeFill(a=""+i%60);return e=Math.floor(i/60),i=this.twoTimeFill(i=""+e%60),!t&&e<60?i+":"+a:(e=""+Math.floor(e/60),(e=this.twoTimeFill(e))+":"+i+":"+a)},secondArrayFormat:function(e,t){if(e<0)return[0,0,0,0];var i=Math.ceil(e),a=i%60;t||(a=this.twoTimeFill(""+a));var n=Math.floor(i/60);return e=n%60,t||(e=this.twoTimeFill(""+e)),n=(i=Math.floor(n/60))%24,t||(n=this.twoTimeFill(""+n)),[""+Math.floor(i/24),n,e,a]},twoTimeFill:function(e){return e.length<2?"0"+e:e},getFullDay:function(){var e=new Date;return e.getFullYear()+"-"+e.getMonth()+"-"+e.getDate()},getTimeFormat:function(e,t){t=t||"yyyy-MM-dd hh:mm:ss";var i,a={"M+":(e=new Date(e)).getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(i in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[i]:("00"+a[i]).substr((""+a[i]).length)));return t},getNextHourTime:function(e,t,i){var a=new Date(e);return e=!1,a.getHours()>=t&&(e=!0),i=i||0,a.setHours(t),a.setMinutes(i),a.setSeconds(0),a=a.getTime(),e&&(a+=864e5),a},getTodayHourTime:function(e,t){var i=new Date;return t=t||0,i.setHours(e),i.setMinutes(t),i.setSeconds(0),i.setMilliseconds(0),i.getTime()},getZeroHourTime:function(e){var t=new Date;return(t=e?new Date(e):t).setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t.getTime()},getTodayClockTime:function(e){var t=new Date,i=e.split(":"),a=parseInt(i[0]),n=parseInt(i[1]);return e=0,2<i.length&&(e=parseInt(i[2])),t.setHours(a),t.setMinutes(n),t.setSeconds(e),t.getTime()},getBeforeDayZeroTime:function(e,t){var i=new Date;return i.setDate(i.getDate()+e),i.setHours(0,0,0,0),t?Math.ceil(i.getTime()/1e3):i.getTime()},getHourMillisecond:function(){return 36e5},getHourSecond:function(){return 3600},getIntervalDayByTimes:function(e,t){return e=this.getZeroHourTime(e),t=this.getZeroHourTime(t),t=Math.abs(e-t),Math.ceil(t/864e5)},getTimeByInfo:function(e){var t=e.substr(0,4),i=e.substr(4,2),a=e.substr(6,2),n=e.substr(8,2);return e=e.substr(10,2),new Date(t+"/"+i+"/"+a+" "+n+":"+e+":00").getTime()}});i.exports=a.getInstance(),cc._RF.pop()},{}],TowerModule:[function(e,t){"use strict";cc._RF.push(t,"9d3b5NP57NLgY8PYj5YP8XE","TowerModule");var i=e("Aft");cc.Class({extends:i.BaseHandler,init:function(e){this.player=e;var t=i.StorageUtil.getData(i.constant.SAVE_TOWER_DATA);t||(this.player.saveGameData(i.constant.SAVE_TOWER_DATA,e={towerMap:{},haveNewTower:!1,areadyOpenList:[],waitOpenList:[],newPictorialTowerList:[]}),t=JSON.stringify(e)),i.Logger.debug("init towerData :",t),this.player._gameData.towerData=JSON.parse(t)},loadData:function(){this.getTowerData().haveNewTower||(this.getTowerData().haveNewTower=!1),this.getTowerData().areadyOpenList||(this.getTowerData().areadyOpenList=[]),this.getTowerData().waitOpenList||(this.getTowerData().waitOpenList=[]),this.getTowerData().newPictorialTowerList||(this.getTowerData().newPictorialTowerList=[]),this.checkCanUnlockTower()},restoreData:function(e){e&&e.towerData&&(i.StorageUtil.save(i.constant.SAVE_TOWER_DATA,e.towerData,!0),i.Logger.debug("restoreData data  towerData :",JSON.stringify(e.towerData)))},getTowerData:function(){return this.player._gameData.towerData},saveTowerData:function(){this.player.saveGameData(i.constant.SAVE_TOWER_DATA,this.getTowerData())},buildTowerBaseData:function(){return{level:1,quality:1,cdStartTime:-1,heros:[]}},checkCanUnlockTower:function(){for(var e=!1,t=i.JsonData.TowerType,a=0;a<t.length;a++){var n,o,s=t[a];this.getTowerData().towerMap.hasOwnProperty(s.id)||(n=i.player.instanceModule.getMaxChapter(),o=i.player.instanceModule.getChapterMaxLevel(n),(n>s.instanceNum[0]||(n=s.instanceNum[0]&&o>=s.instanceNum[1]))&&(this.getTowerData().towerMap[s.id]=this.buildTowerBaseData(),e=!0))}e&&(this.getTowerData().haveNewTower=!0,this.saveTowerData(),i.eventBus.dispatchEvent(i.GameEventType.CHECK_MAIN_TOWER_RED))},addTowerLevel:function(e,t){this.getTowerData().towerMap.hasOwnProperty(e)&&!this.getIsMaxLevel(e)&&(t==i.constant.MAIN_TOWER_UP_LEVEL_TYPE_AD&&(this.getTowerData().towerMap[e].cdStartTime=-1,i.player.commonModule.addTowerBreakCount(e),i.player.taskModule.onNewYearTaskEvent(i.constant.NEW_YEAR_TASK_TYPE_TOWER_BREAK,1)),this.getTowerData().towerMap[e].level,this.getTowerData().towerMap[e].level=parseInt(this.getTowerData().towerMap[e].level)+1+"",this.saveTowerData(),this.checkTowerLevelCd(e),i.player.taskModule.onTaskEvent(i.constant.TASK_TYPE_TOWER_UP,1),i.eventBus.dispatchEvent(i.GameEventType.CHECK_MAIN_TOWER_RED),i.BI.onEvent(i.biConstant.EVENT_TYPE_TOWER_UP_LEVEL,i.biConstant.EVENT_ID_TOWER_UP_LEVEL_BASE+parseInt(e),this.getTowerData().towerMap[e].level),(t=parseInt(this.getTowerData().towerMap[e].level))%100==0&&i.player.broadcastModule.uploadBroadcastData(i.constant.BROADCAST_TYPE_TOWER_UPGRADE,e,t))},gmSetTowerLevel:function(e,t){this.getTowerData().towerMap.hasOwnProperty(e)&&(t=Math.min(t,i.templateManager.getTowerStarMaxLevelById(e)),this.getTowerData().towerMap[e].level=t+"",this.saveTowerData(),this.checkTowerLevelCd(e),i.player.taskModule.onTaskEvent(i.constant.TASK_TYPE_TOWER_UP,1),i.eventBus.dispatchEvent(i.GameEventType.CHECK_MAIN_TOWER_RED),(t=Math.floor(this.getTowerData().towerMap[e].level))%100==0&&i.player.broadcastModule.uploadBroadcastData(i.constant.BROADCAST_TYPE_TOWER_UPGRADE,e,t))},checkTowerLevelCd:function(e){var t;this.getIsMaxLevel(e)||(t=parseInt(this.getTowerData().towerMap[e].level),(t=i.templateManager.getTowerStarDataByLevel(e,t))&&t.breakCD&&(this.getTowerData().towerMap[e].cdStartTime=i.timeUtil.getSecond(),this.saveTowerData()))},getTowerCdStartTime:function(e){return this.getTowerData().towerMap.hasOwnProperty(e)?this.getTowerData().towerMap[e].cdStartTime:-1},getTowerCdLastTime:function(e){if(!this.getTowerData().towerMap.hasOwnProperty(e))return-1;var t=this.getTowerData().towerMap[e].cdStartTime;if(t<=0)return-1;var a=parseInt(this.getTowerData().towerMap[e].level);return(a=i.templateManager.getTowerStarDataByLevel(e,a))&&a.breakCD?(a=t+a.breakCD-i.timeUtil.getSecond())<=0?-1:a:void 0},getTowerIsCding:function(e){return 0<this.getTowerCdStartTime(e)&&0<this.getTowerCdLastTime(e)&&!this.getIsMaxLevel(e)},getTowerIsUnlock:function(e){return this.getTowerData().towerMap.hasOwnProperty(e)},getTowerLevel:function(e){return this.getTowerData().towerMap.hasOwnProperty(e)?parseInt(this.getTowerData().towerMap[e].level):0},getIsMaxLevel:function(e){return!!this.getTowerData().towerMap.hasOwnProperty(e)&&parseInt(this.getTowerData().towerMap[e].level)>=i.templateManager.getTowerStarMaxLevelById(e)},addTowerQuality:function(e){var t;this.getTowerData().towerMap.hasOwnProperty(e)&&(t=i.templateManager.getTowerQualityMaxLevelById(e),this.getTowerData().towerMap[e].quality!=t&&(this.getTowerData().towerMap[e].quality+=1,this.saveTowerData(),i.eventBus.dispatchEvent(i.GameEventType.CHECK_MAIN_TOWER_RED),i.BI.onEvent(i.biConstant.EVENT_TYPE_TOWER_UP_QUALITY,i.biConstant.EVENT_ID_TOWER_UP_QUALITY_BASE+parseInt(e),this.getTowerData().towerMap[e].quality),i.player.broadcastModule.uploadBroadcastData(i.constant.BROADCAST_TYPE_TOWER_QUALITY,e,this.getTowerData().towerMap[e].quality)))},gmSetTowerQuality:function(e,t){var a;this.getTowerData().towerMap.hasOwnProperty(e)&&(a=i.templateManager.getTowerQualityMaxLevelById(e),t=Math.min(t,a),this.getTowerData().towerMap[e].quality=t,this.saveTowerData(),i.eventBus.dispatchEvent(i.GameEventType.CHECK_MAIN_TOWER_RED),i.player.broadcastModule.uploadBroadcastData(i.constant.BROADCAST_TYPE_TOWER_QUALITY,e,this.getTowerData().towerMap[e].quality))},getTowerQuality:function(e){return this.getTowerData().towerMap.hasOwnProperty(e)?this.getTowerData().towerMap[e].quality:1},getIsMaxQuality:function(e){return!!this.getTowerData().towerMap.hasOwnProperty(e)&&this.getTowerData().towerMap[e].quality>=i.templateManager.getTowerQualityMaxLevelById(e)},getUpQualityTowerLevel:function(e){if(this.getIsMaxQuality(e))return-1;var t=this.getTowerQuality(e);return t>=(e=i.templateManager.getTowerQualityUpLevelListByType(e)).length?-1:e[t-1][1]},getCanUpQuality:function(e){var t=this.getUpQualityTowerLevel(e);return!(t<0)&&this.getTowerLevel(e)>=t},getUnlockTowerHeroNum:function(e){var t=0;if(!this.getTowerData().towerMap.hasOwnProperty(e))return t;var a,n=i.templateManager.getTowerQualityMapByType(e);for(a in n){var o=n[a];this.getTowerQuality(e)>=o.level&&o.heroGrid&&(t+=1)}return t},setTowerHeros:function(e,t){this.getTowerData().towerMap.hasOwnProperty(e)&&(this.getTowerData().towerMap[e].heros=t,this.saveTowerData(),i.eventBus.dispatchEvent(i.GameEventType.CHECK_MAIN_TOWER_RED))},getTowerHeros:function(e){if(!this.getTowerData().towerMap.hasOwnProperty(e))return[];for(var t=[],i=0;i<this.getTowerData().towerMap[e].heros.length;i++)t.push(this.getTowerData().towerMap[e].heros[i]);return t},getAllTowerHeros:function(){var e,t=[];for(e in this.getTowerData().towerMap)for(var i=0;i<this.getTowerData().towerMap[e].heros.length;i++)t.push(parseInt(this.getTowerData().towerMap[e].heros[i]));return t},getTowerCountByLevel:function(e){var t,i=0;for(t in this.getTowerData().towerMap)this.getTowerLevel(t)>=e&&(i+=1);return i},getTowerCountByQuality:function(e){var t,i=0;for(t in this.getTowerData().towerMap)this.getTowerQuality(t)>=e&&(i+=1);return i},getTowerHeroIdByIndex:function(e,t){return this.getTowerData().towerMap.hasOwnProperty(e)?t>=(e=this.getTowerData().towerMap[e]).heros.length?-1:e.heros[t]:-1},isCanGuideHeroEnterTower:function(e){if(!this.getTowerData().towerMap.hasOwnProperty(e))return!1;var t=this.getTowerData().towerMap[e],a=this.getUnlockTowerHeroNum(e);if(t&&t.heros&&0==t.heros.length&&a>t.heros.length)for(var n=i.templateManager.getHeroInTowerTypeList(e),o=0;o<n.length;o++){var s=n[o];if(i.player.heroModule.isHeroUnlock(s)&&t.heros.indexOf(s)<0)return!0}return!1},getHaveCanChooseTowerHero:function(){var e,t=!1;for(e in this.getTowerData().towerMap){var a=this.getTowerData().towerMap[e];if(this.getUnlockTowerHeroNum(e)>a.heros.length){for(var n=[],o=i.templateManager.getHeroInTowerTypeList(e),s=0;s<o.length;s++){var r=o[s];i.player.heroModule.isHeroUnlock(r)&&a.heros.indexOf(r)<0&&(r=i.templateManager.getHeroDataById(r).type,n.indexOf(r)<0&&n.push(r))}if(n.length>a.heros.length){t=!0;break}}}return t},getCanChooseTowerHeros:function(e){for(var t=[],a=i.templateManager.getHeroInTowerTypeList(e),n=0;n<a.length;n++){var o=a[n];i.player.heroModule.isHeroUnlock(o)&&t.push(o)}return t},getTowerCanChangeHero:function(e,t){var a=this.getCanChooseTowerHeros(e),n=this.getTowerHeros(e),o=!1,s=i.templateManager.getHeroDataById(t);if(t&&0<t&&s){for(var r=0;r<n.length;r++){var c=n[r];0<=(c=a.indexOf(c))&&a.splice(c,1)}for(var l=0;l<a.length;l++){var d=a[l];if(d=i.templateManager.getHeroDataById(d).type,s.type==d){o=!0;break}}}return n.length<=a.length||o},getTowerHeroRed:function(e,t){for(var a=this.getCanChooseTowerHeros(e),n=this.getTowerHeros(e),o=[],s=0;s<n.length;s++){var r=n[s];r=i.templateManager.getHeroDataById(r),o.indexOf(r.type)<0&&o.push(r.type)}for(var c=[],l=0;l<a.length;l++){var d=a[l],h=i.templateManager.getHeroDataById(d);0<=o.indexOf(h.type)&&c.push(d)}for(var u=0;u<c.length;u++){var p=c[u];0<=(p=a.indexOf(p))&&a.splice(p,1)}for(var g=0;g<n.length;g++){var _=n[g];0<=(_=a.indexOf(_))&&a.splice(_,1)}return 0<a.length&&this.getTowerHeroIdByIndex(e,t)<=0},getMainTowerHeroRed:function(e){for(var t=!1,i=this.getUnlockTowerHeroNum(e),a=0;a<i;a++)if(this.getTowerHeroRed(e,a)){t=!0;break}return t},getHaveNewTower:function(){return this.getTowerData().haveNewTower},setHaveNewTowerFalse:function(){this.getTowerData().haveNewTower&&(this.getTowerData().haveNewTower=!1,this.saveTowerData()),i.eventBus.dispatchEvent(i.GameEventType.CHECK_MAIN_TOWER_RED)},getSingleTowerRed:function(e){if(!this.getTowerIsUnlock(e))return!1;if(this.getIsMaxLevel(e)&&this.getIsMaxQuality(e))return!1;if(!this.getIsMaxLevel(e)){var t=this.getTowerLevel(e);if((t=i.templateManager.getTowerStarDataByLevel(e,t)).break==i.constant.MAIN_TOWER_UP_LEVEL_BREAK){if(this.getTowerCdLastTime(e)<=0)return!0}else if(i.player.playerModule.isSilverEnough(t.coinNum))return!0}return!(this.getIsMaxQuality(e)||(t=this.getTowerQuality(e),t=i.templateManager.getTowerQualityDataByLevel(e,t),!this.getCanUpQuality(e)||!i.player.playerModule.isGoldBullionEnough(t.diamond)))||void 0},checkTowerRed:function(){var e,t=!1;for(e in this.getTowerData().towerMap)if(this.getMainTowerHeroRed(e)||this.getSingleTowerRed(e)){t=!0;break}return t},getHaveCanUseHero:function(){var e,t=!1;for(e in this.getTowerData().towerMap)if(this.getMainTowerHeroRed(e)){t=!0;break}return t},getAllTowerHaveCd:function(){var e,t=!1;for(e in this.getTowerData().towerMap)if(0<this.getTowerCdLastTime(e)){t=!0;break}return t},putAreadyOpenList:function(e){e=parseInt(e),0<=this.getTowerData().areadyOpenList.indexOf(e)||(this.getTowerData().areadyOpenList.push(e),this.saveTowerData())},getIsHaveWait:function(){for(var e in this.getTowerData().towerMap)for(var t=this.getTowerData().towerMap[e],i=0;i<t.heros.length;i++){var a=t.heros[i];if(this.getTowerData().areadyOpenList.indexOf(a)<0)return a}return-1},getOneWaitOpenId:function(){},addPictorialNewTower:function(e){for(var t=i.JsonData.Tower,a=0;a<t.length;a++)t[a].heroId&&t[a].heroId===e&&this.getTowerData().newPictorialTowerList.push(t[a].id);this.saveTowerData(),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_PICTORIAL_TOWER_RED)},removePictorialNewTower:function(e){for(var t=this.getTowerData().newPictorialTowerList,a=0;a<t.length;a++)if(t[a]===e){t.splice(a,1);break}this.saveTowerData(),i.eventBus.dispatchEvent(i.GameEventType.UPDATE_PICTORIAL_TOWER_RED)},isNewPictorialTower:function(e){for(var t=this.getTowerData().newPictorialTowerList,i=0;i<t.length;i++)if(t[i]===e)return!0;return!1},isHavePictorialNewTower:function(){for(var e=this.player.instanceModule.getMaxChapter(),t=this.player.instanceModule.getChapterMaxLevel(e),a=(e=i.templateManager.getInstanceListByChapterId(e))[t=t>=e.length?e.length-1:t].towerMaxLevel,n={},o=0;o<a.length;o++)n[a[o][0]]=a[o][1];for(var s=this.getTowerData().newPictorialTowerList,r=!1,c=0;c<s.length;c++){var l=i.templateManager.getTowerDataById(s[c]);if(n[l.typeID]&&!(l.level>n[l.typeID])){r=!0;break}}return r}}),cc._RF.pop()},{}],TowerVanGuardsItemRender:[function(e,t){"use strict";cc._RF.push(t,"880bcx7XwBN7YDKps2PFFAC","TowerVanGuardsItemRender");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{towerAtlas:{default:null,type:cc.SpriteAtlas}},afterLoad:function(){this.heroNode=cc.find("vanGuard1",this.node),this.heroBgSprite=cc.find("bg",this.heroNode).getComponent(cc.Sprite),this.heroIconSprite=cc.find("hero",this.heroNode).getComponent(cc.Sprite),this.heroNameLabel=cc.find("nameLayout/label2",this.heroNode).getComponent(cc.Label),this.heroPowerLabel=cc.find("powerCapacity/label",this.heroNode).getComponent(cc.Label),this.countTimeLabel=cc.find("countTime",this.heroNode).getComponent(cc.Label)},initData:function(e){var t,a,n;this.todaySecond=i.timeUtil.getTodayHourTime(0),this.heroId=e,this.heroId?(this.node.active=!0,this.isAdHero=i.player.heroModule.getBattleAdPioneerHero()==e,a=i.templateManager.getHeroDataById(this.heroId),n=i.player.heroModule.getHeroQuality(this.heroId),t=i.templateManager.getHeroQualityDataById(n),e=i.player.heroModule.getHeroLevel(this.heroId),this.heroNameLabel.string=i.lang.getGameText(a.name),this.heroBgSprite.spriteFrame=this.towerAtlas.getSpriteFrame(t.towerHeroQualityBg),a=a.icon.split("/")[1],this.heroIconSprite.spriteFrame=i.heroHeadAtlas.getSpriteFrame(a),n=i.player.heroModule.getHeroPowerValue(this.heroId,e,n),this.heroPowerLabel.string=i.Utils.formatBigNumberForLabel(n),this.isAdHero?(this.countTimeLabel.node.active=!0,this.updateheroVanTimeLabel()):this.countTimeLabel.node.active=!1):this.node.active=!1},updateheroVanTimeLabel:function(){var e;this.todaySecond==i.timeUtil.getTodayHourTime(0)?(this.countTimeLabel.node.active=!0,e=i.timeUtil.getTodayHourTime(24)/1e3-i.timeUtil.getSecond(),e=(e=i.timeUtil.secondArrayFormat(e))[1]+":"+e[2]+":"+e[3],this.countTimeLabel.string=e):this.countTimeLabel.node.active=!1},onClickHero:function(){this.heroId&&(i.gameScene.mainPage.onClickHero(),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_HERO_DETAIL,{host:i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_HERO),heroId:this.heroId}))},update:function(e){this.isAdHero&&(this.updateTime||(this.updateTime=0),this.updateTime+=e,this.updateTime<=1||(this.updateTime=0,this.updateheroVanTimeLabel()))}}),cc._RF.pop()},{}],Utils:[function(e,t){"use strict";cc._RF.push(t,"eb4639JLYpEG44MJxsb7qpq","Utils");var i=e;function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i("EventBus"),i("GameEventType");var o=i("Logger"),s=(i("LanguageUtils"),i("CryptoJS")),r=i("encryptjs"),c=i("bignumber.min"),l=cc.Class({statics:(a(i={loginServerTime:0,loginTime:0,serverZeroTime:0,_localEncryptKey:"EzFW6w2bEaezYJandGJ72uI3GCj3Jf8sqp6HR5G+Dlc8oKddEFastB5Spk/Ks7U/thcOxZktXV5cMTAqv0CxDnyefHZfPeMGcdHqxJYJuiz2T3J1aoCG0ps/ersvI23eiwj+6gAREakTfBlltFuqel0iqhiHQcwvj7ZApnh8MtY4FdKXj0+K7VlAF5yU+/tSZuF+eoCGXTy8y93e2ZLiGCFOeMA5musc/X88pm5U165DrVCmErGqeVuYcVc7cnUs",SAVE_SOCK_SETTING_DATA:"PLANE_SAVE_SOCK_SETTING_DATA",_localCryptIvPart:"fGb7e",_localCryptKPart:"Yfdjn",directorPauseStartTime:0,countTime:0,buildWebsocketUrl:function(e,t,i){return i?"wss://"+e+":"+t+"/websocket":"ws://"+e+":"+t+"/websocket"}},"buildWebsocketUrl",function(e,t,i){return i?"wss://"+e+":"+t+"/websocket":"ws://"+e+":"+t+"/websocket"}),a(i,"stringEncrypt",function(e,t,i){return e=s.enc.Utf8.parse(e),i=s.enc.Utf8.parse(i),s.AES.encrypt(t,e,{iv:i,mode:s.mode.CBC,padding:s.pad.Pkcs7}).ciphertext.toString()}),a(i,"stringDecrypt",function(e,t,i){var a="";e=s.enc.Utf8.parse(e),i=s.enc.Utf8.parse(i);try{a=s.AES.decrypt(s.enc.Base64.stringify(s.enc.Hex.parse(t)),e,{iv:i,mode:s.mode.CBC,padding:s.pad.Pkcs7}).toString(s.enc.Utf8)}catch(e){o.debug("\u89e3\u7801\u5931\u8d25! - "+t)}return a}),a(i,"md5",function(e){return s.MD5(e)}),a(i,"secretKey",function(){return l._localEncryptKey.slice(0,179)}),a(i,"algoDecryptStr",function(e){return r.decrypt(e,this.secretKey(),256)}),a(i,"algoEncryptStr",function(e){return r.encrypt(e,this.secretKey(),256)}),a(i,"isPointRect",function(e,t,i,a,n,o){return!(i+n/2<e||e<i-n/2||a+o/2<t||t<a-o/2)}),a(i,"pointDistance",function(e,t){return Math.ceil(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)))}),a(i,"angleSpeed",function(e,t,i){var a=0,n=0,o=t/Math.abs(t),s=i/Math.abs(i);return 0===t?n=s*e:a=0===i?o*e:(i=t/i,n=s*Math.sqrt(e*e/(i*i+1)),o*Math.abs(n*i)),{xs:a,ys:n}}),a(i,"isNumber",function(e){return""!==e&&null!=e&&NaN!==e&&!isNaN(e)}),a(i,"getUUID",function(){for(var e=[],t=0;t<36;t++)e[t]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]="0123456789abcdef".substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")}),a(i,"removeElement",function(e,t){return-1<(t=e.indexOf(t))&&(e.splice(t,1),!0)}),a(i,"getStrCharLength",function(e){return e.replace(/[\u0391-\uFFE5]/g,"aa").length}),a(i,"checkIlligleChar",function(e){if(!e&&""!==e)return!1;for(var t=e,i=["\ufe49","\uff03","\uff06","\uff0a","\u203b","\xa7","\u3003","\u2116","\u3013","\u25cb","\u25cf","\u25b3","\u25b2","\u25ce","\u2606","\u2605","\u25c7","\u25c6","\u25a0","\u25a1","\u25bc","\u25bd","\u32a3","\u2105","\u02c9","\uffe3","\uff3f","\ufe4d","\ufe4a","\ufe4e","\ufe4b","\ufe4c","\ufe5f","\ufe60","\ufe61","?","\u2299","\u2191","\u2193","\u2190","\u2192","\u2504","\u2014","\ufe34","\ufe4f","\uff08","\uff09","\ufe35","\ufe36","\uff5b","\uff5d","\ufe37","\ufe38","\u3014","\u3015","\ufe39","\ufe3a","\u3010","\u3011","\ufe3b","\ufe3c","\u300a","\u300b","\ufe3d","\ufe3e","\u3008","\u3009","\ufe3f","\ufe40","\u300c","\u300d","\ufe41","\ufe42","\u300e","\u300f","\ufe43","\ufe44","\ufe59","\ufe5a","\ufe5b","\ufe5c","\ufe5d","\ufe5e",'"',"\u301d","\u301e","\u02cb","\u02ca","\u2248","\u2261","\u2260","\uff1d","\u2264","\u2265","\uff1c","\uff1e","\u226e","\u226f","\u2237","\xb1","\uff0b","\uff0d","\xd7","\xf7","\uff0f","\u222b","\u222e","\u221d","\u2227","\u2228","\u221e","\u2211","\u220f","\u222a","\u2229","\u2208","\u2235","\u2234","\u22a5","\u2225","\u2220","\u2312","\u2299","\u224c","\u223d","\u221a","\u2266","\u2267","\u2252","\u2261","\ufe62","\ufe63","\ufe64","\ufe65","\ufe66","\uff5e","\u221f","\u22bf","\u2225","\u33d2","\u33d1","\u2223","\uff5c","\ufe31","\ufe33","|","\uff0f","\uff3c","\u2215","\ufe68","\xa5","\u20ac","\uffe5","\xa3","\uff0c","\u3001","\u3002","\uff0e","\uff1b","\uff1a","\uff1f","\uff01","\ufe30","\u2026","\u2025","\u2032","\u2035","\u3005","\uff5e","\u2016","\u02c7","\u02c9","\ufe50","\ufe51","\ufe52","\xb7","\ufe54","\ufe55","\ufe56","\ufe57","-","&","*","#","`","~","+","=","(",")","^","%","$",";",",",":","'","\\","/",">","<","?","!","[","]","{","}"," ","\n","\t","\r","\u3000\u3000","\u3000","\u3000"," ","\xa0"],a=0;a<i.length;a++)if(-1!=t.indexOf(i[a]))return!1;return!l.isEmoji(e)}),a(i,"isEmoji",function(e){return e!==e.replace(new RegExp(["\ufffd[\ufffd-\ufffd]","\ufffd[\ufffd-\ufffd]","\ufffd[\ufffd-\ufffd]"].join("|"),"g"),"")}),a(i,"sensitiveTest",function(e,t){for(var i=e,a=0;a<t.length;a++){var n=new RegExp(t[a],"gi");i=i.replace(n,function(){for(var e="",i=0;i<t[a].length;i++)e+="*";return e})}return i}),a(i,"formatBigNumberForLabelRound",function(e){var t=new(c.clone())(e);return 30<(e=t.toFixed(0)).length?t.div("1.0E30").toFixed(0)+"L":27<e.length?t.div("1.0E27").toFixed(0)+"S":24<e.length?t.div("1.0E24").toFixed(0)+"Y":21<e.length?t.div("1.0E21").toFixed(0)+"Z":18<e.length?t.div("1.0E18").toFixed(0)+"E":15<e.length?t.div("1.0E15").toFixed(0)+"P":12<e.length?t.div("1.0E12").toFixed(0)+"T":9<e.length?t.div("1.0E9").toFixed(0)+"B":6<e.length?t.div("1.0E6").toFixed(0)+"M":3<e.length?t.div("1.0E3").toFixed(0)+"K":t}),a(i,"formatBigNumberForLabel",function(e){var t=new(c.clone())(e);return 30<(e=t.toFixed(0)).length?t.div("1.0E30").toFixed(2)+"L":27<e.length?t.div("1.0E27").toFixed(2)+"S":24<e.length?t.div("1.0E24").toFixed(2)+"Y":21<e.length?t.div("1.0E21").toFixed(2)+"Z":18<e.length?t.div("1.0E18").toFixed(2)+"E":15<e.length?t.div("1.0E15").toFixed(2)+"P":12<e.length?t.div("1.0E12").toFixed(2)+"T":9<e.length?t.div("1.0E9").toFixed(2)+"B":6<e.length?t.div("1.0E6").toFixed(2)+"M":3<e.length?t.div("1.0E3").toFixed(2)+"K":t}),a(i,"formatNumberForLabel",function(e){var t=e<0;e=Math.abs(e);var i=String(parseInt(e));return e="",e=18<i.length?i.substring(0,i.length-18)+"."+i.substring(i.length-18,i.length-17)+i.substring(i.length-17,i.length-16)+"bb":15<i.length?i.substring(0,i.length-15)+"."+i.substring(i.length-15,i.length-14)+i.substring(i.length-14,i.length-13)+"aa":12<i.length?i.substring(0,i.length-12)+"."+i.substring(i.length-12,i.length-11)+i.substring(i.length-11,i.length-10)+"T":9<i.length?i.substring(0,i.length-9)+"."+i.substring(i.length-9,i.length-8)+i.substring(i.length-8,i.length-7)+"B":6<i.length?i.substring(0,i.length-6)+"."+i.substring(i.length-6,i.length-5)+i.substring(i.length-5,i.length-4)+"M":3<i.length?i.substring(0,i.length-3)+"."+i.substring(i.length-3,i.length-2)+i.substring(i.length-2,i.length-1)+"K":i,t?"-"+e:e}),a(i,"getRandomInt",function(e,t){var i=Math.floor(e+Math.random()*(t-e+1));return i=Math.max(i,e),i=Math.min(i,t),Math.ceil(i)}),a(i,"getRandomIndexInArr",function(e){for(var t=[],i=0,a=0;a<e.length;a++)i+=e[a],t.push(i);for(var n=this.getRandomInt(1,i),o=0;o<t.length;o++)if(n<=t[o])return o;return 0}),a(i,"getRandomKeyByValue",function(e){for(var t=0,i=0;i<e.length;i++)t+=e[i].value,e[i].sumValue=t;for(var a=this.getRandomInt(1,t),n=0;n<e.length;n++)if(a<=e[n].sumValue)return e[n].key}),a(i,"getRotation",function(e,t){return e.x==t.x&&e.y==t.y?0:(t=e.sub(t),(t=cc.v2(t.x,t.y)).x=-t.x,t=t.signAngle(cc.v2(1,0)),cc.misc.radiansToDegrees(t))}),a(i,"getDegree",function(e,t){return e&&t?e.x==t.x&&e.y==t.y?0:(t=e.sub(t),(t=cc.v2(t.x,t.y)).x=-t.x,t=t.signAngle(cc.v2(1,0)),(t=cc.misc.radiansToDegrees(t))<0&&(t+=360),t):0}),a(i,"getOffsetByRotationAndDistance",function(e,t){var i=t*Math.cos(e*Math.PI/180);return e=t*Math.sin(e*Math.PI/180),cc.v2(i,e)}),a(i,"getRotation",function(e,t){return e.x==t.x&&e.y==t.y?0:(t=e.sub(t),(t=cc.v2(t.x,t.y)).x=-t.x,t=t.signAngle(cc.v2(1,0)),cc.misc.radiansToDegrees(t))}),a(i,"getDistance",function(e,t){return e.sub(t).mag()}),a(i,"getSockSetting",function(){return(parseInt(cc.sys.localStorage.getItem(l.SAVE_SOCK_SETTING_DATA))||0)<=0}),a(i,"setSockSetting",function(e){e=e?0:1,cc.sys.localStorage.setItem(l.SAVE_SOCK_SETTING_DATA,e.toString())}),a(i,"isJson",function(e){if("string"==typeof e)try{var t=JSON.parse(e);return"object"==n(t)&&t}catch(e){return!1}return!1}),a(i,"sensitiveTest",function(e,t){var i=e;cc.log("str: "+i);for(var a=0;a<t.length;a++)!function(e){var a=new RegExp(t[e],"gi");i=i.replace(a,function(){for(var i="",a=0;a<t[e].length;a++)i+="*";return i})}(a);return i}),a(i,"checkIlligleChar",function(e){if(!e)return!1;for(var t=e,i=["\ufe49","\uff03","\uff06","\uff0a","\u203b","\xa7","\u3003","\u2116","\u3013","\u25cb","\u25cf","\u25b3","\u25b2","\u25ce","\u2606","\u2605","\u25c7","\u25c6","\u25a0","\u25a1","\u25bc","\u25bd","\u32a3","\u2105","\u02c9","\uffe3","\uff3f","\ufe4d","\ufe4a","\ufe4e","\ufe4b","\ufe4c","\ufe5f","\ufe60","\ufe61","?","\u2299","\u2191","\u2193","\u2190","\u2192","\u2504","\u2014","\ufe34","\ufe4f","\uff08","\uff09","\ufe35","\ufe36","\uff5b","\uff5d","\ufe37","\ufe38","\u3014","\u3015","\ufe39","\ufe3a","\u3010","\u3011","\ufe3b","\ufe3c","\u300a","\u300b","\ufe3d","\ufe3e","\u3008","\u3009","\ufe3f","\ufe40","\u300c","\u300d","\ufe41","\ufe42","\u300e","\u300f","\ufe43","\ufe44","\ufe59","\ufe5a","\ufe5b","\ufe5c","\ufe5d","\ufe5e",'"',"\u301d","\u301e","\u02cb","\u02ca","\u2248","\u2261","\u2260","\uff1d","\u2264","\u2265","\uff1c","\uff1e","\u226e","\u226f","\u2237","\xb1","\uff0b","\uff0d","\xd7","\xf7","\uff0f","\u222b","\u222e","\u221d","\u2227","\u2228","\u221e","\u2211","\u220f","\u222a","\u2229","\u2208","\u2235","\u2234","\u22a5","\u2225","\u2220","\u2312","\u2299","\u224c","\u223d","\u221a","\u2266","\u2267","\u2252","\u2261","\ufe62","\ufe63","\ufe64","\ufe65","\ufe66","\uff5e","\u221f","\u22bf","\u2225","\u33d2","\u33d1","\u2223","\uff5c","\ufe31","\ufe33","|","\uff0f","\uff3c","\u2215","\ufe68","\xa5","\u20ac","\uffe5","\xa3","\uff0c","\u3001","\u3002","\uff0e","\uff1b","\uff1a","\uff1f","\uff01","\ufe30","\u2026","\u2025","\u2032","\u2035","\u3005","\uff5e","\u2016","\u02c7","\u02c9","\ufe50","\ufe51","\ufe52","\xb7","\ufe54","\ufe55","\ufe56","\ufe57","-","&","*","#","`","~","+","=","(",")","^","%","$",";",",",":","'","\\","/",">","<","?","!","[","]","{","}"," ","\n","\t","\r","\u3000\u3000","\u3000","\u3000"," ","\xa0"],a=0;a<i.length;a++)if(-1!=t.indexOf(i[a]))return o.debug("nameStr: "+i[a]+"----"+t+"-----"),!1;return!l.isEmoji(e)}),a(i,"isEmoji",function(e){return e!==e.replace(new RegExp(["\ufffd[\ufffd-\ufffd]","\ufffd[\ufffd-\ufffd]","\ufffd[\ufffd-\ufffd]"].join("|"),"g"),"")}),a(i,"getStrCharLength",function(e){return e.replace(/[\u0391-\uFFE5]/g,"aa").length}),a(i,"vectorsToDegree",function(e){if(0==e.x&&0==e.y)return 0;e=cc.v2(e.x,e.y);var t=cc.v2(1,0);return t=e.signAngle(t),cc.misc.radiansToDegrees(t)}),a(i,"getTenThousandProbability",function(e){return this.getRandomInt(1,1e4)<=1e4*e}),a(i,"getRandomItemInList",function(e){return e[this.getRandomInt(0,e.length-1)]}),a(i,"omitStringByLength",function(e,t,i){if(!e)return e;for(var a=0,n=e,o=0;o<e.length;o++){var s=e.charCodeAt(o);if(1<=s&&s<=126||65376<=s&&s<=65439?a++:a+=2,t<a){n=e.substring(0,o)+i;break}}return n}),a(i,"setLoginServerTime",function(e){this.loginServerTime=e,this.loginTime=(new Date).getTime()}),a(i,"setServerZeroTime",function(e){this.serverZeroTime=e}),a(i,"getServerTime",function(){var e=(new Date).getTime()-this.loginTime;return this.loginServerTime+e}),a(i,"getServerZeroTime",function(){return this.serverZeroTime}),a(i,"getNextZeroTime",function(){return this.serverZeroTime+864e5}),a(i,"getNextHourTime",function(e){return this.getServerTime()<(e=this.serverZeroTime+36e5*e)?e:e+864e5}),a(i,"getHourTime",function(e,t){return(e=new Date(e)).setHours(t),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e.getTime()}),a(i,"addNodeTopSpace",function(e,t){var i=e.getComponent(cc.Widget);e=this.getTopFixSize(),t&&(e-=t),i&&i.isAlignTop&&(i.top+=e)}),a(i,"getTopFixSize",function(){return cc.sys.isNative&&cc.sys.os!==cc.sys.OS_IOS&&cc.sys.os!==cc.sys.OS_OSX?72:52}),a(i,"addNodeBottomSpace",function(e,t){(e=e.getComponent(cc.Widget))&&t&&e.isAlignBottom&&(e.bottom+=t)}),a(i,"byteConvert",function(e){if(isNaN(e))return"";var t=Math.floor(Math.log(e)/Math.log(2));return t<1&&(t=0),t=Math.floor(t/10),(e=(e/=Math.pow(2,10*t)).toString().length>e.toFixed(2).toString().length?e.toFixed(2):e)+" "+["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][t]}),a(i,"saveForBrowser",function(e,t){var i;cc.sys.isBrowser&&(console.log("\u6d4f\u89c8\u5668"),i=new Blob([e],{type:"application/json"}),(e=document.createElement("a")).download=t,e.innerHTML="Download File",null!=window.webkitURL?e.href=window.webkitURL.createObjectURL(i):(e.href=window.URL.createObjectURL(i),e.onclick=destroyClickedElement,e.style.display="none",document.body.appendChild(e)),e.click())}),a(i,"getTarCurvePoint",function(e,t,i,a,n,o){var s=(1-n)/2,r=s*(2*(l=o*o)-(c=l*o)-o),c=(n=s*(l-c)+(2*c-3*l)+1,o=s*(c-2*l+o)+-2*c+3*l,s*(c-l)),l=e.x*r+t.x*n+i.x*o+a.x*c;return c=e.y*r+t.y*n+i.y*o+a.y*c,cc.v2(l,c)}),a(i,"getControlPoint",function(e,t){return e[Math.min(e.length-1,Math.max(t,0))]}),a(i,"getCurvePointList",function(e,t){for(var i=1/(e.length-1),a=0,n=0;n<e.length-1;n++)a+=this.getDistance(e[n],e[n+1]);for(var o=[],s=0;s<=a;s++){var r=s/a,c=void 0,l=void 0,d=e;l=1==r?(c=d.length-1,1):(r-i*(c=0|r/i))/i,l=this.getTarCurvePoint(this.getControlPoint(d,c-1),this.getControlPoint(d,+c),this.getControlPoint(d,c+1),this.getControlPoint(d,c+2),t,l),o.push(l)}return o}),a(i,"getFixCurvePointList",function(e,t){for(var i,a=this.getCurvePointList(e,t),n=0;n<a.length;n++)0<n&&(i=Math.abs(aft.Utils.getDistance(a[n],a[n-1])))<.75&&n<a.length-1&&i+Math.abs(aft.Utils.getDistance(a[n],a[n+1]))<1.25&&(a.splice(n,1),n--);return a}),a(i,"isPointInOvalNew",function(e,t,i){return this.isPointInOval(e,t,i,.83*i)}),a(i,"isPointInOval",function(e,t,i,a){var n=t.x-e.x;return n*n/(i*i)+(e=t.y-e.y)*e/(a*a)<=1}),a(i,"webCopyString",function(e){console.log("\u590d\u5236");var t=e,i=document.createElement("textarea");i.value=t,i.setAttribute("readonly",""),i.style.contain="strict",i.style.position="absolute",i.style.left="-9999px",i.style.fontSize="12pt";var a=getSelection();e=!1,0<a.rangeCount&&(e=a.getRangeAt(0)),document.body.appendChild(i),i.select(),i.selectionStart=0,i.selectionEnd=t.length,t=!1;try{t=document.execCommand("copy")}catch(e){}return document.body.removeChild(i),e&&(a.removeAllRanges(),a.addRange(e)),t}),a(i,"setSpineGrayMaterial",function(e){this.spineGrayMaterial=e}),a(i,"setGray",function(e,t){if(e){var i=e.getComponent(cc.Sprite);i&&i.setMaterial(0,cc.Material.getBuiltinMaterial(t?"2d-gray-sprite":"2d-sprite")),(i=e.getComponent(cc.Label))&&i.setMaterial(0,cc.Material.getBuiltinMaterial(t?"2d-gray-sprite":"2d-sprite")),(i=e.getComponent(sp.Skeleton))&&i.setMaterial(0,t?this.spineGrayMaterial:cc.Material.getBuiltinMaterial("2d-spine"));var a=e.children;if(0<a.length)for(var n=0;n<a.length;n++)this.setGray(a[n],t)}}),a(i,"getNameLimitLength",function(e,t){t=t||12;var i=e;return this.getStrCharLength(e)>t?this.omitStringByLength(e,10,"..."):i}),i)});cc._RF.pop()},{}],VersionUpdatePage:[function(e,t){"use strict";cc._RF.push(t,"ba3e9ipedFNs6S81K5bgaRJ","VersionUpdatePage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{},registerGameListener:function(){},onLoadPage:function(){},showPageBegan:function(){this.initData()},showPageEnded:function(){},closePageBegan:function(){},closePageEnded:function(){i.player.inviteFriendModule.setVersionUpdateShowOver()},initData:function(){},onClickSubscribe:function(){i.config.needSDKUid&&wx&&wx.requestSubscribeWhatsNew&&(i.BI.onEvent(i.biConstant.EVENT_TYPE_COUNT,i.biConstant.EVENT_ID_COUNT_SUBSCRIBE_SHOW_4),wx.requestSubscribeWhatsNew({msgType:1,success:function(e){console.log("requestSubscribeWhatsNew success res = ",e),e&&(console.log("res.confirm = "+e.confirm),i.ttAdManager.updateSubscriptionsSetting(),e.confirm&&(i.player.itemModule.dropItem(1001,50,!0,i.constant.ITEM_ADD_SOURCE_SUBSCRIBE),i.player.inviteFriendModule.setSubscribeReceiveOver(i.constant.WX_SUBSCRIBE_TYPE_VERSION_UPDATE),i.BI.onEvent(i.biConstant.EVENT_TYPE_COUNT,i.biConstant.EVENT_ID_COUNT_SUBSCRIBE_ACCEPT_4)))},fail:function(e){console.error(e)}})),this.onClickClose()},onClickClose:function(){this.closePage()},update:function(){}}),cc._RF.pop()},{}],VipItemRender:[function(e,t){"use strict";cc._RF.push(t,"2fdbfuohjpDvLfiFxvWc1si","VipItemRender");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{vipAtlas:{default:null,type:cc.SpriteAtlas}},afterLoad:function(){this.graySprite=cc.find("gray",this.node).getComponent(cc.Sprite),this.iconSprite=cc.find("icon",this.node).getComponent(cc.Sprite)},initData:function(e){this._vipCfg=e,this._vipLevel=this._vipCfg.vipLevel},updateData:function(){var e=i.player.vipModule.getCurVipLevel();this.iconSprite.node.active=this._vipLevel<=e,this.graySprite.node.active=this._vipLevel>e,this.iconSprite.spriteFrame=this.vipAtlas.getSpriteFrame(this._vipCfg.vipIconBig),this.graySprite.spriteFrame=this.vipAtlas.getSpriteFrame(this._vipCfg.vipIconBigGrey)}}),cc._RF.pop()},{}],VipModule:[function(e,t){"use strict";cc._RF.push(t,"81f999JEQ9EJ5ebEsfZEhBr","VipModule");var i=e("Aft");cc.Class({extends:i.BaseHandler,init:function(e){this.player=e;var t=i.StorageUtil.getData(i.constant.SAVE_VIP_DATA);t||(this.player.saveGameData(i.constant.SAVE_VIP_DATA,e={vipLevel:0,adTimes:0,taskActive:0,loginDays:1,rewardHeroIds:[],haveVipUp:!1,cacheVipLevel:-1,todayOpenPage:!1,todayAddTaskActive:0,todayAddAdCount:0,isVipReset:!0}),t=JSON.stringify(e)),i.Logger.debug("init vipData : "+t),this.player._gameData.vipData=JSON.parse(t)},loadData:function(){this.getVipData().hasOwnProperty("todayAddTaskActive")||(this.getVipData().todayAddTaskActive=0),this.getVipData().hasOwnProperty("todayAddAdCount")||(this.getVipData().todayAddAdCount=0),this.getVipData().isVipReset||8!=this.getCurVipLevel()?this.getVipData().isVipReset=!0:(this.getVipData().isVipReset=!0,this.getVipData().taskActive=840),this.saveVipData()},restoreData:function(e){e&&e.vipData&&(i.StorageUtil.save(i.constant.SAVE_VIP_DATA,e.vipData,!0),i.Logger.debug("restoreData data  vipData :",JSON.stringify(e.vipData)))},resetVipData:function(){this.getVipData().todayAddTaskActive=0,this.getVipData().todayAddAdCount=0,this.setTodayOpenPage(!1),this.addLoginDays(),this.saveVipData(!0)},saveVipData:function(e){this.player.saveGameData(i.constant.SAVE_VIP_DATA,this.player._gameData.vipData,e)},getVipData:function(){return this.player._gameData.vipData},getCurVipLevel:function(){return this.player&&this.player._gameData&&this.player._gameData.vipData&&this.player._gameData.vipData.vipLevel?parseInt(this.getVipData().vipLevel):0},setCurVipLevel:function(e){this.getVipData().vipLevel=e+"",this.setHaveVipUp(!0),this.getVipData().cacheVipLevel=e+"",this.saveVipData(),this.checkVipLevel(),i.eventBus.dispatchEvent(i.GameEventType.Mail_UPDATE_VIP_RED),i.BI.onEvent(i.biConstant.EVENT_TYPE_COUNT,i.biConstant.EVENT_ID_COUNT_VIP_LEVEL,e),i.eventBus.dispatchEvent(i.GameEventType.YEAR_TASK_UPDATE_RED)},getCacheVipLevel:function(){return this.getVipData().cacheVipLevel},resetCacheVipLevel:function(){this.getVipData().cacheVipLevel=-1,this.saveVipData()},getIsMaxVipLevel:function(){return this.getCurVipLevel()>=i.templateManager.getVipMaxLevel()},getCurVipCfg:function(){return i.templateManager.getVipDataByLevel(this.getCurVipLevel())},getBeforeVipCfg:function(e){return 0<(e=void 0===e?this.getCurVipLevel():e)?i.templateManager.getVipDataByLevel(e-1):null},getNextVipLevelCfg:function(){return this.getIsMaxVipLevel()?null:i.templateManager.getVipDataByLevel(this.getCurVipLevel()+1)},getNextVipChangeCfg:function(e){if(this.getIsMaxVipLevel())return null;for(var t,a=i.templateManager.getVipMaxLevel(),n=this.getCurVipLevel(),o=this.getCurVipCfg(),s=this.getVipCfgValueByType(o,e),r=n+1;r<a;r++){var c=i.templateManager.getVipDataByLevel(r),l=this.getVipCfgValueByType(c,e);if(l&&!(l<=s)){t=c;break}}return t},getVipCfgValueByType:function(e,t){if(e&&t){var a;switch(t){case i.constant.VIP_PRIVILEGE_TYPE_SHOP_COIN:a=e.shopIngotNum[1];break;case i.constant.VIP_PRIVILEGE_TYPE_SHOP_BOX:a=e.shopBoxNum[1];break;case i.constant.VIP_PRIVILEGE_TYPE_SHOP_SILVER:a=e.shopCoinNum[1];break;case i.constant.VIP_PRIVILEGE_TYPE_SHOP_EXP:a=e.shopHeroExpNum[1];break;case i.constant.VIP_PRIVILEGE_TYPE_SKILL_CARD:a=e.shopSkillCardNum[1];break;case i.constant.VIP_PRIVILEGE_TYPE_BATTLE_BOX:a=e.battleBoxNum[1];break;case i.constant.VIP_PRIVILEGE_TYPE_BATTLE_RESULT:a=e.gameResultNum[1];break;case i.constant.VIP_PRIVILEGE_TYPE_HANGUP:a=e.hangupNum[1];break;case i.constant.VIP_PRIVILEGE_TYPE_WAVE:a=e.waveIronNum[1];break;case i.constant.VIP_PRIVILEGE_TYPE_OUT_IRON:a=e.extraIronNum[1];break;case i.constant.VIP_PRIVILEGE_TYPE_BATTLE_SPEED:a=e.speedUpNum[1];break;case i.constant.VIP_PRIVILEGE_TYPE_BATTLE_VAN:a=e.extraHero[1];break;case i.constant.VIP_PRIVILEGE_TYPE_HANGUP_DOUBLE:a=e.quickNum[1];break;case i.constant.VIP_PRIVILEGE_TYPE_FREE_POWER:a=e.powerAdNum[1]}return a}},addVipLevel:function(){this.setCurVipLevel(this.getCurVipLevel()+1),i.player.broadcastModule.uploadBroadcastData(i.constant.BROADCAST_TYPE_VIP,this.getVipData().vipLevel);var e,t,a=i.nativeManager.getWxRealUserInfo();a&&(e=JSON.stringify({headUrl:a.headUrl,name:a.nickName}),t=i.constant.rankBigType.WORLD+i.constant.rankType.STAR,a=i.constant.rankBigType.WORLD+i.constant.rankType.INSTANCE,i.player.serviceModule.putLeaderboard(t,i.player.instanceModule.getRankStarNum(),e),i.player.serviceModule.putLeaderboard(a,i.player.instanceModule.getRankPassInstanceNum(),e),(t=i.player.commonModule.getPlayerCityData())&&(a=i.constant.rankBigType.AREA+t.cityCode+i.constant.rankType.STAR,t=i.constant.rankBigType.AREA+t.cityCode+i.constant.rankType.INSTANCE,i.player.serviceModule.putLeaderboard(a,i.player.instanceModule.getRankStarNum(),e),i.player.serviceModule.putLeaderboard(t,i.player.instanceModule.getRankPassInstanceNum(),e))),i.gameScene.mainPage.setCachePageStatus(!0)},checkUpVipLevel:function(){var e=i.templateManager.getVipMaxLevel(),t=this.getCurVipLevel()+1;e<t||(t=i.templateManager.getVipDataByLevel(t),this.getLoginDays()<t.loginTotal||this.getAdTimes()<t.adTotal||this.getTaskActive()<t.taskTotal||this.addVipLevel())},putHeroReceive:function(e){0<=this.getVipData().rewardHeroIds.indexOf(e)||(this.getVipData().rewardHeroIds.push(e),this.saveVipData(),i.player.heroModule.vipReceiveHero(e),i.eventBus.dispatchEvent(i.GameEventType.Mail_UPDATE_VIP_RED))},getHeroIsReceive:function(e){return 0<=this.getVipData().rewardHeroIds.indexOf(e)},getHaveCanReceiveHero:function(){for(var e=!1,t=this.getVipData().rewardHeroIds.length,a=i.templateManager.getVipHeroLevelList(),n=0;n<a.length;n++){var o=a[n];if(t==n){this.getCurVipLevel()>=o.vipLevel&&(e=!0);break}}return e},getNextReceiveHero:function(){var e=this.getVipData().rewardHeroIds.length,t=i.templateManager.getVipHeroLevelList();return e>=t.length?-1:t[e].heroId},addAdTimes:function(){this.getVipData().adTimes=this.getAdTimes()+1+"",this.getVipData().todayAddAdCount+=1,this.saveVipData(),this.checkAdCount(),this.checkUpVipLevel(),i.gameScene.mainPage&&i.gameScene.mainPage.setHaveVipExpFly(!0)},getAdTimes:function(){return parseInt(this.getVipData().adTimes)},addTaskActive:function(e){this.getVipData().taskActive=this.getTaskActive()+e+"",this.getVipData().todayAddTaskActive+=e,this.saveVipData(),this.checkTaskValue(),this.checkUpVipLevel(),i.gameScene.mainPage&&i.gameScene.mainPage.setHaveVipExpFly(!0)},getTaskActive:function(){return parseInt(this.getVipData().taskActive)},addLoginDays:function(e){e=e||1,this.getVipData().loginDays=this.getLoginDays()+e+"",this.saveVipData(),this.checkUpVipLevel(),this.checkVipLevel(),i.eventBus.dispatchEvent(i.GameEventType.REFRESH_VIP_PAGE),i.gameScene.mainPage&&i.gameScene.mainPage.setHaveVipExpFly(!0)},getLoginDays:function(){return parseInt(this.getVipData().loginDays)},getVipBattleBoxTimes:function(){return this.getCurVipCfg().battleBoxNum[1]},getVipSpeedDoubleList:function(e,t){for(var a=[],n=i.JsonData.Vip,o=0;o<n.length;o++){var s=n[o];if(!(s.speedUpNum[1]<=1e4)){if(s.vipLevel>this.getCurVipLevel()&&!e)break;if(s=s.speedUpNum[1]/1e4,!(0<=a.indexOf(s))&&(a.push(s),e&&t))break}}return a},getVipUnlockCfg:function(e){for(var t,a=i.JsonData.Vip,n=0;n<a.length;n++){var o=a[n];if(e==i.constant.VIP_PRIVILEGE_TYPE_BATTLE_SPEED){if(1e4<o.speedUpNum[1]){t=o;break}}else if(e==i.constant.VIP_PRIVILEGE_TYPE_HEIGHT_DEFEND){if(0<o.defendNum[1]){t=o;break}}else if(e==i.constant.VIP_PRIVILEGE_TYPE_QUICK_DEFEND){if(0<o.quicklyDefend[1]){t=o;break}}else if(e==i.constant.VIP_PRIVILEGE_TYPE_BATTLE_VAN){if(0<o.extraHero[1]){t=o;break}}else if(e==i.constant.VIP_PRIVILEGE_TYPE_GAY_FRIEND&&0<o.extraChance[1]){t=o;break}}return t},getVipOutVanNum:function(){return this.getCurVipCfg().extraHero[1]},getVipOutIronNum:function(){return this.getCurVipCfg().extraIronNum[1]},getVipWaveIronNum:function(){return this.getCurVipCfg().waveIronNum[1]},getVipQuickHangUpDouble:function(){return this.getCurVipCfg().quickNum[1]},getHeightDefendNum:function(){return this.getCurVipCfg().defendNum[1]},getQuickDefend:function(){return this.getCurVipCfg().quicklyDefend[1]},getVipGayFirendNum:function(){return this.getCurVipCfg().extraChance[1]},getVipFreePowerTimes:function(){return this.getCurVipCfg().powerAdNum[1]},setHaveVipUp:function(e){this.getVipData().haveVipUp=e,this.saveVipData(),i.eventBus.dispatchEvent(i.GameEventType.Mail_UPDATE_VIP_RED)},getHaveVipUp:function(){return this.getVipData().haveVipUp},gmSetVipLevel:function(e){var t,a;this.getCurVipLevel()>=e?i.Logger.debug("\u6ce8\u610f\uff1a vip\u7b49\u7ea7\u53ea\u80fd\u52a0\uff0c\u4e0d\u80fd\u51cf\uff01"):(t=i.templateManager.getVipMaxLevel(),this.setCurVipLevel(e=t<e?t:e),i.player.broadcastModule.uploadBroadcastData(i.constant.BROADCAST_TYPE_VIP,this.getVipData().vipLevel),(a=i.nativeManager.getWxRealUserInfo())&&(t=JSON.stringify({headUrl:a.headUrl,name:a.nickName}),e=i.constant.rankBigType.WORLD+i.constant.rankType.STAR,a=i.constant.rankBigType.WORLD+i.constant.rankType.INSTANCE,i.player.serviceModule.putLeaderboard(e,i.player.instanceModule.getRankStarNum(),t),i.player.serviceModule.putLeaderboard(a,i.player.instanceModule.getRankPassInstanceNum(),t),(e=i.player.commonModule.getPlayerCityData())&&(a=i.constant.rankBigType.AREA+e.cityCode+i.constant.rankType.STAR,e=i.constant.rankBigType.AREA+e.cityCode+i.constant.rankType.INSTANCE,i.player.serviceModule.putLeaderboard(a,i.player.instanceModule.getRankStarNum(),t),i.player.serviceModule.putLeaderboard(e,i.player.instanceModule.getRankPassInstanceNum(),t))))},gmAddAdTimes:function(e){this.getVipData().adTimes=this.getAdTimes()+e+"",this.getVipData().todayAddAdCount+=e,this.checkAdCount(),this.saveVipData(),this.checkUpVipLevel(),i.gameScene.mainPage&&i.gameScene.mainPage.setHaveVipExpFly(!0)},getTodayOpenPage:function(){return this.getVipData().todayOpenPage},setTodayOpenPage:function(e){this.getVipData().todayOpenPage=e,this.saveVipData(),i.eventBus.dispatchEvent(i.GameEventType.Mail_UPDATE_VIP_RED)},checkVipLevel:function(){var e,t=this.getCurVipLevel(),a=i.player.commonModule.getRegisterDay(),n=i.templateManager.getVipDataByLevel(t),o=this.getLoginDays();(a<n.loginTotal||a<o)&&(e=i.player.playerModule.getCreateTime(),n=i.timeUtil.getTime(),i.BI.onEvent(i.biConstant.EVENT_TYPE_ERROR,i.biConstant.EVENT_ID_ERROR_FIX_DATA_USER,i.player.playerModule.getPlayerId()+"#"+i.biConstant.EVENT_ID_ERROR_TYPE_VIP_LEVEL),i.BI.onEvent(i.biConstant.EVENT_TYPE_ERROR,i.biConstant.EVENT_ID_ERROR_FIX_DATA_INFO,i.player.playerModule.getPlayerId()+"#"+i.biConstant.EVENT_ID_ERROR_TYPE_VIP_LEVEL+"#"+t+"#"+a+"#"+e+"#"+n+"#"+o))},checkTaskValue:function(){var e=i.player.commonModule.getRegisterDay(),t=this.getVipData().todayAddTaskActive,a=this.getTaskActive();e*=120,(120<t||e<a)&&(i.BI.onEvent(i.biConstant.EVENT_TYPE_ERROR,i.biConstant.EVENT_ID_ERROR_FIX_DATA_USER,i.player.playerModule.getPlayerId()+"#"+i.biConstant.EVENT_ID_ERROR_TYPE_VIP_TASK),i.BI.onEvent(i.biConstant.EVENT_TYPE_ERROR,i.biConstant.EVENT_ID_ERROR_FIX_DATA_INFO,i.player.playerModule.getPlayerId()+"#"+i.biConstant.EVENT_ID_ERROR_TYPE_VIP_TASK+"#"+t+"#"+a+"#"+e))},checkAdCount:function(){var e=i.player.commonModule.getRegisterDay(),t=this.getVipData().todayAddAdCount,a=this.getAdTimes();e*=200,(200<t||e<a)&&(i.BI.onEvent(i.biConstant.EVENT_TYPE_ERROR,i.biConstant.EVENT_ID_ERROR_FIX_DATA_USER,i.player.playerModule.getPlayerId()+"#"+i.biConstant.EVENT_ID_ERROR_TYPE_VIP_AD),i.BI.onEvent(i.biConstant.EVENT_TYPE_ERROR,i.biConstant.EVENT_ID_ERROR_FIX_DATA_INFO,i.player.playerModule.getPlayerId()+"#"+i.biConstant.EVENT_ID_ERROR_TYPE_VIP_AD+"#"+t+"#"+a+"#"+e))}}),cc._RF.pop()},{}],VipPage:[function(e,t){"use strict";cc._RF.push(t,"11d640afZFPprXB3jOOC902","VipPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{itemPrefab:{default:null,type:cc.Prefab},vipAtlas:{default:null,type:cc.SpriteAtlas}},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.REFRESH_VIP_PAGE,function(){e.initData()})},onLoadPage:function(){this.contentNode=cc.find("content",this.node),this.scrollView=cc.find("content/scrollView",this.node).getComponent(cc.ScrollView),this.scrollViewContentNode=cc.find("content/scrollView/view/content",this.node),this.detailNode=cc.find("content/detail",this.node),this.middleItemRect=cc.find("content/middleItemRect",this.node),this.nextProgressNode=cc.find("content/nextProgress",this.node),this.nextProgressTitle=cc.find("titleLayout",this.nextProgressNode),this.nextProgressmaxNode=cc.find("maxLabel",this.nextProgressNode),this.nextProgressIconSprite=cc.find("titleLayout/icon",this.nextProgressNode).getComponent(cc.Sprite),this.nextProgressDays=cc.find("daysProgressBar",this.nextProgressNode).getComponent(cc.ProgressBar),this.nextProgressDaysNumLabel=cc.find("daysProgressBar/number",this.nextProgressNode).getComponent(cc.Label),this.nextProgressTask=cc.find("taskProgressBar",this.nextProgressNode).getComponent(cc.ProgressBar),this.nextProgressTaskNumLabel=cc.find("taskProgressBar/number",this.nextProgressNode).getComponent(cc.Label),this.nextProgressAd=cc.find("adProgressBar",this.nextProgressNode).getComponent(cc.ProgressBar),this.nextProgressAdNumLabel=cc.find("adProgressBar/number",this.nextProgressNode).getComponent(cc.Label),this.vipInfoNode=cc.find("content/vipInfo",this.node),this.vipInfoTitleIconSprite=cc.find("titleLayout/title/layout/icon",this.vipInfoNode).getComponent(cc.Sprite),this.vipInfoScrollView=cc.find("info/ScrollView",this.vipInfoNode).getComponent(cc.ScrollView),this.vipInfoContentNode=cc.find("info/ScrollView/view/content",this.vipInfoNode),this.vipInfoLeftNode=cc.find("info/arrowLeft",this.vipInfoNode),this.vipInfoRightNode=cc.find("info/arrowRight",this.vipInfoNode),this.vipRewardNode=cc.find("content/reward",this.node),this.vipRewardProgressNode=cc.find("progress",this.vipRewardNode),this.vipRewardProgress=cc.find("progressBar",this.vipRewardProgressNode).getComponent(cc.ProgressBar),this.vipRewardNodeList=[],this.vipRewardNodeList.push(cc.find("progress/vip3",this.vipRewardNode)),this.vipRewardNodeList.push(cc.find("progress/vip5",this.vipRewardNode)),this.vipRewardNodeList.push(cc.find("progress/vip8",this.vipRewardNode)),this.buildAllItem(),this.isFirst=!0,i.gameScene.isIphoneX()&&i.Utils.addNodeTopSpace(this.node),i.gameScene.isIphoneX()&&(i.Utils.addNodeBottomSpace(this.vipInfoNode,70),i.Utils.addNodeBottomSpace(this.vipRewardNode,70),i.Utils.addNodeBottomSpace(this.vipRewardProgressNode,-30),i.Utils.addNodeBottomSpace(this.detailNode,40)),this.scrollView.node.on("scroll-ended",this.scrollEnded,this)},scrollEnded:function(){if(this.currentItem){for(var e=this.scrollViewContentNode.children,t=0;t<e.length;t++){var i=e[t];i.scale=.7,i==this.currentItem&&(i.scale=1)}this.scrollView.scrollToOffset(cc.v2(this.currentItem.x-this.scrollView.node.width/2,0),0)}},showPageBegan:function(){i.player.vipModule.setTodayOpenPage(!0),i.player.vipModule.setHaveVipUp(!1),this.initData()},showPageEnded:function(){this.isFirst&&this.scrollEnded(),this.isFirst=!1},initData:function(){this.vipLevel=i.player.vipModule.getCurVipLevel(),this.vipCfg=i.player.vipModule.getCurVipCfg(),this.curVipLevel=this.vipLevel,this.curVipCfg=i.player.vipModule.getCurVipCfg(),this.beforeData=i.player.vipModule.getBeforeVipCfg(),this.updateItemScale(),this.scrollEnded(),this.updateChangeInfo()},updateChangeInfo:function(){this.updateHeroProgress(),this.updateNextProgress(),this.updateVipInfo(),this.updateLeftRightNode()},updateLeftRightNode:function(){this.vipInfoLeftNode.active=0!=this.curVipLevel,this.vipInfoRightNode.active=this.curVipLevel!=i.templateManager.getVipMaxLevel()},updateItemScale:function(){for(var e=this.scrollViewContentNode.children,t=0;t<e.length;t++){var i=e[t],a=i.getComponent("VipItemRender");a._vipCfg?(a.updateData(),a._vipLevel==this.curVipLevel?(i.scale=1,this.currentItem=i):i.scale=.7):i.scale=.7}this.scrollViewContentNode.getComponent(cc.Layout).updateLayout()},buildAllItem:function(){this.buildAloneItem(null,!0),this.buildAloneItem(null,!0);for(var e=i.JsonData.Vip,t=0;t<e.length;t++)this.buildAloneItem(e[t]);this.buildAloneItem(null,!0),this.buildAloneItem(null,!0)},buildAloneItem:function(e,t){var i=cc.instantiate(this.itemPrefab);this.scrollViewContentNode.addChild(i);var a=i.getComponent("VipItemRender");t?(i.opacity=1,i.scale=.7):a.initData(e)},updateNextProgress:function(){var e,t;i.player.vipModule.getIsMaxVipLevel()?(this.nextProgressTitle.active=!1,this.nextProgressmaxNode.active=!0,this.nextProgressDays.progress=1,this.nextProgressTask.progress=1,this.nextProgressAd.progress=1,i.lang.updateLabelString(this.nextProgressDaysNumLabel,[this.vipCfg.loginTotal,this.vipCfg.loginTotal]),i.lang.updateLabelString(this.nextProgressTaskNumLabel,[this.vipCfg.taskTotal,this.vipCfg.taskTotal]),i.lang.updateLabelString(this.nextProgressAdNumLabel,[this.vipCfg.adTotal,this.vipCfg.adTotal])):(e=i.templateManager.getVipDataByLevel(this.vipLevel+1),this.curVipLevel>this.vipLevel+1&&(e=i.templateManager.getVipDataByLevel(this.curVipLevel)),this.nextProgressTitle.active=!0,this.nextProgressmaxNode.active=!1,this.nextProgressIconSprite.spriteFrame=this.vipAtlas.getSpriteFrame(e.vipIconSmall),t=i.player.vipModule.getLoginDays()/e.loginTotal,this.nextProgressDays.progress=1<t?1:t,t=i.player.vipModule.getLoginDays()>e.loginTotal?e.loginTotal:i.player.vipModule.getLoginDays(),i.lang.updateLabelString(this.nextProgressDaysNumLabel,[t,e.loginTotal]),t=i.player.vipModule.getTaskActive()/e.taskTotal,this.nextProgressTask.progress=1<t?1:t,t=i.player.vipModule.getTaskActive()>e.taskTotal?e.taskTotal:i.player.vipModule.getTaskActive(),i.lang.updateLabelString(this.nextProgressTaskNumLabel,[t,e.taskTotal]),t=i.player.vipModule.getAdTimes()/e.adTotal,this.nextProgressAd.progress=t,t=i.player.vipModule.getAdTimes()>e.taskTotal?e.adTotal:i.player.vipModule.getAdTimes(),i.lang.updateLabelString(this.nextProgressAdNumLabel,[t,e.adTotal]))},updateHeroProgress:function(){for(var e=this,t=i.templateManager.getVipHeroLevelList(),a=0;a<this.vipRewardNodeList.length;a++)!function(a){var n=e.vipRewardNodeList[a],o=t[a],s=o.heroId,r=i.templateManager.getHeroDataById(s),c=cc.find("hero",n);c.active=!1;var l=cc.find("hero",n).getComponent(sp.Skeleton),d=o.vipLevel<=i.player.vipModule.getCurVipLevel()&&!i.player.vipModule.getHeroIsReceive(s),h=cc.find("canGetLight",n);h.active=!1,a="effect/"+r.mainSpin,i.mainScene.getTowerSpineData(a,function(e){if(e)try{c.active=!0,l.skeletonData=e,l.premultipliedAlpha=r.isPreform,l.clearTrack(0),l.setAnimation(0,r.spinName,!0),l.paused=o.vipLevel>i.player.vipModule.getCurVipLevel(),h.active=d}catch(e){}}),cc.find("get",n).active=i.player.vipModule.getHeroIsReceive(s)}(a);this.vipRewardProgress.progress=this.vipLevel/8},updateVipInfo:function(){if(this.currentItem){var e=this.currentItem.getComponent("VipItemRender");this.vipInfoTitleIconSprite.spriteFrame=this.vipAtlas.getSpriteFrame(e._vipCfg.vipIconSmall),this.vipInfoScrollView.scrollToTop();for(var t=this.vipInfoContentNode.children,i=0;i<t.length;i++){var a=t[i];this.updateVipInfoRichText(a)}}},updateVipInfoRichText:function(e){var t=!1,a=[],n=!1,o=null;switch(e.name){case i.constant.VIP_PRIVILEGE_TYPE_NEW_HERO:e.active=!1;break;case i.constant.VIP_PRIVILEGE_TYPE_SHOP_COIN:o=i.GameTextCode.VIP_TIPS_2,t=!!this.curVipCfg.shopIngotNum[0],n=!!this.curVipCfg.shopIngotNum[1],a.push(this.curVipCfg.shopIngotNum[1]),this.beforeData&&this.curVipCfg.shopIngotNum[1]!==this.beforeData.shopIngotNum[1]&&(o=i.GameTextCode.VIP_TIPS_2_1,a.push(this.curVipCfg.shopIngotNum[1]-this.beforeData.shopIngotNum[1]));break;case i.constant.VIP_PRIVILEGE_TYPE_SHOP_BOX:o=i.GameTextCode.VIP_TIPS_3,t=!!this.curVipCfg.shopBoxNum[0],n=!!this.curVipCfg.shopBoxNum[1],a.push(this.curVipCfg.shopBoxNum[1]),this.beforeData&&this.curVipCfg.shopBoxNum[1]!==this.beforeData.shopBoxNum[1]&&(o=i.GameTextCode.VIP_TIPS_3_1,a.push(this.curVipCfg.shopBoxNum[1]-this.beforeData.shopBoxNum[1]));break;case i.constant.VIP_PRIVILEGE_TYPE_SKILL_CARD:o=i.GameTextCode.VIP_TIPS_13,t=!!this.curVipCfg.shopSkillCardNum[0],n=!!this.curVipCfg.shopSkillCardNum[1],a.push(this.curVipCfg.shopSkillCardNum[1]),this.beforeData&&this.curVipCfg.shopSkillCardNum[1]!==this.beforeData.shopSkillCardNum[1]&&(o=i.GameTextCode.VIP_TIPS_13_1,a.push(this.curVipCfg.shopSkillCardNum[1]-this.beforeData.shopSkillCardNum[1]));break;case i.constant.VIP_PRIVILEGE_TYPE_SHOP_SILVER:o=i.GameTextCode.VIP_TIPS_4,t=!!this.curVipCfg.shopCoinNum[0],n=!!this.curVipCfg.shopCoinNum[1],a.push(this.curVipCfg.shopCoinNum[1]),this.beforeData&&this.curVipCfg.shopCoinNum[1]!==this.beforeData.shopCoinNum[1]&&(o=i.GameTextCode.VIP_TIPS_4_1,a.push(this.curVipCfg.shopCoinNum[1]-this.beforeData.shopCoinNum[1]));break;case i.constant.VIP_PRIVILEGE_TYPE_SHOP_EXP:o=i.GameTextCode.VIP_TIPS_5,t=!!this.curVipCfg.shopHeroExpNum[0],n=!!this.curVipCfg.shopHeroExpNum[1],a.push(this.curVipCfg.shopHeroExpNum[1]),this.beforeData&&this.curVipCfg.shopHeroExpNum[1]!==this.beforeData.shopHeroExpNum[1]&&(o=i.GameTextCode.VIP_TIPS_5_1,a.push(this.curVipCfg.shopHeroExpNum[1]-this.beforeData.shopHeroExpNum[1]));break;case i.constant.VIP_PRIVILEGE_TYPE_BATTLE_BOX:o=i.GameTextCode.VIP_TIPS_6,t=!!this.curVipCfg.battleBoxNum[0],n=!!this.curVipCfg.battleBoxNum[1],a.push(this.curVipCfg.battleBoxNum[1]),this.beforeData&&this.curVipCfg.battleBoxNum[1]!==this.beforeData.battleBoxNum[1]&&(o=i.GameTextCode.VIP_TIPS_6_1,a.push(this.curVipCfg.battleBoxNum[1]-this.beforeData.battleBoxNum[1]));break;case i.constant.VIP_PRIVILEGE_TYPE_BATTLE_RESULT:o=i.GameTextCode.VIP_TIPS_7,t=!!this.curVipCfg.gameResultNum[0],n=!!this.curVipCfg.gameResultNum[1],a.push(this.curVipCfg.gameResultNum[1]),this.beforeData&&this.curVipCfg.gameResultNum[1]!==this.beforeData.gameResultNum[1]&&(o=i.GameTextCode.VIP_TIPS_7_1,a.push(this.curVipCfg.gameResultNum[1]-this.beforeData.gameResultNum[1]));break;case i.constant.VIP_PRIVILEGE_TYPE_HANGUP:o=i.GameTextCode.VIP_TIPS_8,t=!!this.curVipCfg.hangupNum[0],n=!!this.curVipCfg.hangupNum[1],a.push(this.curVipCfg.hangupNum[1]),this.beforeData&&this.curVipCfg.hangupNum[1]!==this.beforeData.hangupNum[1]&&(o=i.GameTextCode.VIP_TIPS_8_1,a.push(this.curVipCfg.hangupNum[1]-this.beforeData.hangupNum[1]));break;case i.constant.VIP_PRIVILEGE_TYPE_WAVE:o=i.GameTextCode.VIP_TIPS_9,t=!!this.curVipCfg.waveIronNum[0],n=!!this.curVipCfg.waveIronNum[1],a.push(this.curVipCfg.waveIronNum[1]),this.beforeData&&this.curVipCfg.waveIronNum[1]!==this.beforeData.waveIronNum[1]&&(o=i.GameTextCode.VIP_TIPS_9_1,a.push(this.curVipCfg.waveIronNum[1]-this.beforeData.waveIronNum[1]));break;case i.constant.VIP_PRIVILEGE_TYPE_OUT_IRON:o=i.GameTextCode.VIP_TIPS_10,t=!!this.curVipCfg.extraIronNum[0],n=!!this.curVipCfg.extraIronNum[1],a.push(this.curVipCfg.extraIronNum[1]),this.beforeData&&this.curVipCfg.extraIronNum[1]!==this.beforeData.extraIronNum[1]&&(o=i.GameTextCode.VIP_TIPS_10_1,a.push(this.curVipCfg.extraIronNum[1]-this.beforeData.extraIronNum[1]));break;case i.constant.VIP_PRIVILEGE_TYPE_BATTLE_SPEED:o=i.GameTextCode.VIP_TIPS_11,t=!!this.curVipCfg.speedUpNum[0],n=1e4!==this.curVipCfg.speedUpNum[1],a.push(this.curVipCfg.speedUpNum[1]/1e4),this.beforeData&&this.curVipCfg.speedUpNum[1]!==this.beforeData.speedUpNum[1]&&(o=i.GameTextCode.VIP_TIPS_11_1,a.push((this.curVipCfg.speedUpNum[1]-this.beforeData.speedUpNum[1])/1e4));break;case i.constant.VIP_PRIVILEGE_TYPE_BATTLE_VAN:o=i.GameTextCode.VIP_TIPS_12,t=!!this.curVipCfg.extraHero[0],n=!!this.curVipCfg.extraHero[1],a.push(this.curVipCfg.extraHero[1]),this.beforeData&&this.curVipCfg.extraHero[1]!==this.beforeData.extraHero[1]&&(o=i.GameTextCode.VIP_TIPS_12_1,a.push(this.curVipCfg.extraHero[1]-this.beforeData.extraHero[1]));break;case i.constant.VIP_PRIVILEGE_TYPE_HANGUP_DOUBLE:o=i.GameTextCode.VIP_TIPS_14,t=!!this.curVipCfg.quickNum[0],n=!!this.curVipCfg.quickNum[1],a.push(this.curVipCfg.quickNum[1]),this.beforeData&&this.curVipCfg.quickNum[1]!==this.beforeData.quickNum[1]&&(o=i.GameTextCode.VIP_TIPS_14_1,a.push(this.curVipCfg.quickNum[1]-this.beforeData.quickNum[1]));break;case i.constant.VIP_PRIVILEGE_TYPE_HEIGHT_DEFEND:o=i.GameTextCode.VIP_TIPS_16,t=!!this.curVipCfg.defendNum[0],n=!!this.curVipCfg.defendNum[1],a.push(this.curVipCfg.defendNum[1]/100+"%"),this.beforeData&&this.curVipCfg.defendNum[1]!==this.beforeData.defendNum[1]&&(o=i.GameTextCode.VIP_TIPS_16_1,a.push((this.curVipCfg.defendNum[1]-this.beforeData.defendNum[1])/100+"%"));break;case i.constant.VIP_PRIVILEGE_TYPE_QUICK_DEFEND:o=i.GameTextCode.VIP_TIPS_17,t=!!this.curVipCfg.quicklyDefend[0],n=!!this.curVipCfg.quicklyDefend[1],a.push(this.curVipCfg.quicklyDefend[1]),this.beforeData&&this.curVipCfg.quicklyDefend[1]!==this.beforeData.quicklyDefend[1]&&(o=i.GameTextCode.VIP_TIPS_17_1,a.push(this.curVipCfg.quicklyDefend[1]-this.beforeData.quicklyDefend[1]));break;case i.constant.VIP_PRIVILEGE_TYPE_HERO_TOWER:o=i.GameTextCode.VIP_TIPS_15,t=!!this.curVipCfg.heroTower[0],n=!!this.curVipCfg.heroTower[1],a.push(this.curVipCfg.heroTower[1]),this.beforeData&&this.curVipCfg.heroTower[1]!==this.beforeData.heroTower[1]&&(o=i.GameTextCode.VIP_TIPS_15_1,a.push(this.curVipCfg.heroTower[1]-this.beforeData.heroTower[1]));break;case i.constant.VIP_PRIVILEGE_TYPE_GAY_FRIEND:o=i.GameTextCode.VIP_TIPS_18,t=!!this.curVipCfg.extraChance[0],n=!!this.curVipCfg.extraChance[1],a.push(this.curVipCfg.extraChance[1]),this.beforeData&&this.curVipCfg.extraChance[1]!==this.beforeData.extraChance[1]&&(o=i.GameTextCode.VIP_TIPS_18_1,a.push(this.curVipCfg.extraChance[1]-this.beforeData.extraChance[1]));break;case i.constant.VIP_PRIVILEGE_TYPE_FREE_POWER:o=i.GameTextCode.VIP_TIPS_19,t=!!this.curVipCfg.powerAdNum[0],n=!!this.curVipCfg.powerAdNum[1],a.push(this.curVipCfg.powerAdNum[1]),this.beforeData&&this.curVipCfg.powerAdNum[1]!==this.beforeData.powerAdNum[1]&&(o=i.GameTextCode.VIP_TIPS_19_1,a.push(this.curVipCfg.powerAdNum[1]-this.beforeData.powerAdNum[1]))}cc.find("richText",e).getComponent(cc.RichText).string=i.lang.getFormatString(o,a),cc.find("yes",e).active=!t&&n,cc.find("no",e).active=!t&&!n},scrollViewEvent:function(){this.updateScrollView()},updateScrollView:function(){for(var e,t,a=this.scrollViewContentNode.children,n=-1,o=!1,s=0;s<a.length;s++){var r=a[s];r.scale=.7,o||this.isOnHit(r,s)&&(n=a.indexOf(r),o=!0,this.currentItem!=r&&(this.currentItem=r,this.curVipCfg=this.currentItem.getComponent("VipItemRender")._vipCfg,this.curVipLevel=this.curVipCfg.vipLevel,this.beforeData=i.player.vipModule.getBeforeVipCfg(this.curVipLevel),this.updateChangeInfo()))}0<=n&&(this.lastItemIndex=n),this.currentItem&&(e=Math.abs(this.scrollView.getContentPosition().x),t=this.currentItem.position.x,t=Math.abs(e-t)/2/this.getNodeRealWidth(this.currentItem)/2,this.currentItem.scale=1-t,(this.currentItem.position.x>e?a[this.lastItemIndex-1]:a[this.lastItemIndex+1]).scale=.7+t)},getNodeRealWidth:function(e){return e.width*e.scale},isOnHit:function(e){var t=Math.abs(this.scrollView.getContentPosition().x),i=e.position.x;return i-(e=this.getNodeRealWidth(e))/2<=t&&t<i+e/2},findItemObjByLevel:function(e){for(var t=this.scrollViewContentNode.children,i=0;i<t.length;i++){var a=t[i].getComponent("VipItemRender");if(a._vipCfg&&a._vipCfg.vipLevel==e)return a}},clickUpdateInfo:function(e){e&&(this.currentItem=e.node,this.curVipLevel=e._vipCfg.vipLevel,this.curVipCfg=e._vipCfg,this.beforeData=i.player.vipModule.getBeforeVipCfg(this.curVipLevel),this.updateItemScale(),this.scrollEnded(),this.updateChangeInfo())},onClickLeft:function(){var e=this.findItemObjByLevel(this.curVipLevel-1);this.clickUpdateInfo(e)},onClickRight:function(){var e=this.findItemObjByLevel(this.curVipLevel+1);this.clickUpdateInfo(e)},onClickSpin:function(e,t){var a,n,o;!t||(a=i.templateManager.getVipDataByLevel(t))&&a.heroId&&(n=i.player.vipModule.getNextReceiveHero(),o=!1,t=a.heroId,0<=n&&n==a.heroId&&i.player.vipModule.getHaveCanReceiveHero()&&(i.player.vipModule.putHeroReceive(n),this.updateChangeInfo(),i.BI.onEvent(i.biConstant.EVENT_TYPE_CLICK,i.biConstant.EVENT_ID_CLICK_GET_REAL_HERO,n),o=!0,t=n),this.closePage(),i.gameScene.mainPage.onClickHero(null,t,null,o))},onClickReceive:function(){var e=i.player.vipModule.getNextReceiveHero();e<0||i.player.vipModule.getHaveCanReceiveHero()&&(i.player.vipModule.putHeroReceive(e),this.updateChangeInfo(),i.BI.onEvent(i.biConstant.EVENT_TYPE_CLICK,i.biConstant.EVENT_ID_CLICK_GET_REAL_HERO,e),this.closePage(),i.gameScene.mainPage.onClickHero(null,e,null,!0))},onClickClose:function(){this.closePage()},closePageEnded:function(){i.gameScene.mainPage.checkCachePage()}}),cc._RF.pop()},{}],VipUpPage:[function(e,t){"use strict";cc._RF.push(t,"ec46fIaG8hGobW5lud6Ul89","VipUpPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{descItemPrefab:{default:null,type:cc.Prefab},vipAtlas:{default:null,type:cc.SpriteAtlas}},onLoadPage:function(){this.iconSprite=cc.find("iconbg/icon",this.node).getComponent(cc.Sprite),this.nodeAnimation=this.node.getComponent(cc.Animation),this.descLayoutNode=cc.find("descLayout",this.node),this.closeNode=cc.find("close",this.node),this.shareNode=cc.find("shareButton",this.node),this.nodeAnimation.on("finished",this.onFinished,this)},showPageBegan:function(){this.isCanClick=!1,this.closeNode.active=!1,this.shareNode.active=!1,i.soundsUtil.playSoundEffect("update_vip"),this.destoryDescItem(),this.vipLevel=this.data,this.vipCfg=i.templateManager.getVipDataByLevel(this.vipLevel);var e=i.templateManager.getVipDataByLevel(this.vipLevel-1);this.iconSprite.spriteFrame=this.vipAtlas.getSpriteFrame(e.vipIconBig);var t=cc.delayTime(.55);e=cc.callFunc(function(){this.iconSprite.spriteFrame=this.vipAtlas.getSpriteFrame(this.vipCfg.vipIconBig)},this),e=cc.sequence(t,e),this.iconSprite.node.stopAllActions(),this.iconSprite.node.runAction(e),this.runFlyAction()},showPageEnded:function(){},destoryDescItem:function(){for(var e=0;e<this.descLayoutNode.children.length;e++)this.descLayoutNode.children[e].destroy()},runFlyAction:function(){this.nodeAnimation.stop(),this.nodeAnimation.setCurrentTime(0),this.nodeAnimation.play("vip_upgrade")},buildItem:function(){if(this.descItemIndex>=this.vipCfg.newDescList.length)return this.isCanClick=!0,this.closeNode.active=!0,void(this.shareNode.active=!0);var e=cc.instantiate(this.descItemPrefab);this.descLayoutNode.addChild(e),cc.find("label",e).getComponent(cc.Label).string=i.lang.getGameText(this.vipCfg.newDescList[this.descItemIndex]),this.descItemIndex+=1;var t=cc.delayTime(.3);e=cc.callFunc(function(){this.buildItem()},this),e=cc.sequence(t,e),this.descLayoutNode.stopAllActions(),this.descLayoutNode.runAction(e)},onFinished:function(e,t){"vip_upgrade"==t.name&&(this.nodeAnimation.play("vip_upgrade_stand"),this.descLayoutNode.stopAllActions(),this.descItemIndex=0,this.buildItem())},onClickClose:function(){var e;this.isCanClick&&(this.closePage(),(e=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_CHILD))?e.runFlyVipAction():i.eventBus.dispatchEvent(i.GameEventType.UPDATE_MAIN_VIP))},onClickShare:function(){i.Logger.debug("onClickShare"),i.player.commonModule.addShareStartCount(i.constant.SHARE_TYPE_VIP),i.ttAdManager.wxShare(i.constant.SHARE_TYPE_VIP)}}),cc._RF.pop()},{}],WaveItemRender:[function(e,t){"use strict";cc._RF.push(t,"074cca99ZBBnqbHjlJ8kabh","WaveItemRender");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{},afterLoad:function(){this.otherNode=cc.find("otherWave",this.node),this.otherBgParent=cc.find("bgParent",this.otherNode),this.otherBg1Node=cc.find("bgParent/bg1",this.otherNode),this.otherBg2Node=cc.find("bgParent/bg2",this.otherNode),this.otherBossBgNode=cc.find("bgParent/bg3",this.otherNode),this.otherJyBgNode=cc.find("bgParent/bg4",this.otherNode),this.otherBossBg5Node=cc.find("bgParent/bg5",this.otherNode),this.otherJyBg6Node=cc.find("bgParent/bg6",this.otherNode),this.otherBg1NodeWidth=this.otherBg1Node.width,this.otherBoxNode=cc.find("box_bg",this.otherNode),this.otherLabel=cc.find("label",this.otherNode).getComponent(cc.Label),this.curNode=cc.find("currentWave",this.node),this.curWaveLabel=cc.find("label",this.curNode).getComponent(cc.Label),this.curWaveBoxNode=cc.find("box_bg",this.curNode),this.curWaveBgNode=cc.find("bg",this.curNode),this.curWaveBossBgNode=cc.find("bg5",this.curNode),this.curWaveJyBgNode=cc.find("bg6",this.curNode),this.curWaveBgIconNode=cc.find("icon",this.curWaveBoxNode),this.curWaveBgNodeWidth=this.curWaveBgNode.width},initData:function(e){this.node.active=!1;var t=i.battleScene.curWaveIndex,a=i.battleScene.getWaveType(t),n=i.battleScene.waveDataList.length,o=t+1;5==e?(a=i.battleScene.getWaveType(n-1),this.node.active=n!=o,this.curNode.active=!1,this.otherNode.active=!0,this.otherBg1Node.active=!1,this.otherBg2Node.active=a==i.constant.ENEMY_TYPE_NORMAL,this.otherBossBgNode.active=!1,this.otherJyBgNode.active=!1,this.otherBossBg5Node.active=a==i.constant.ENEMY_TYPE_BOSS,this.otherJyBg6Node.active=a==i.constant.ENEMY_TYPE_ELITE,i.battleScene.waveDataList[n-1],this.otherBoxNode.active=!1,this.otherLabel.node.active=!0,this.otherLabel.string=n,this.otherBgParent.scale=1.4):2==e?(this.node.active=!0,this.curNode.active=!0,this.otherNode.active=!1,this.node.width=this.curWaveBgNodeWidth,this.curWaveBgNode.active=a==i.constant.ENEMY_TYPE_NORMAL,this.curWaveLabel.string=o,this.curWaveLabel.node.active=!0,this.curWaveBossBgNode.active=a==i.constant.ENEMY_TYPE_BOSS,this.curWaveJyBgNode.active=a==i.constant.ENEMY_TYPE_ELITE,this.curWaveBoxNode.active=i.battleScene.curWaveData.isRoguelike):(this.curNode.active=!1,this.otherNode.active=!0,this.otherBoxNode.active=!1,this.node.width=this.otherBg1NodeWidth,this.otherBg2Node.active=!0,this.otherBg1Node.active=!1,this.otherBossBgNode.active=!1,this.otherJyBgNode.active=!1,this.otherLabel.node.active=!1,this.otherBossBg5Node.active=!1,this.otherJyBg6Node.active=!1,2<e?(this.node.active=e<=n-t,a=i.battleScene.getWaveType(o=t+e-2),this.otherBossBgNode.active=a==i.constant.ENEMY_TYPE_BOSS,this.otherJyBgNode.active=a==i.constant.ENEMY_TYPE_ELITE,o<n&&(o=i.battleScene.waveDataList[o],this.otherBoxNode.active=o.isRoguelike)):e<2&&(this.node.active=2-e<=t)),this.otherNode.getComponent(cc.Layout).updateLayout(),this.node.getComponent(cc.Layout).updateLayout()},hideAllItem:function(){this.otherNode.active=!1,this.curNode.active=!1},getIconWorldPosition:function(){return this.curWaveBgIconNode.convertToWorldSpaceAR(cc.v2(0,0))}}),cc._RF.pop()},{}],WaveStartTipsIntroduceItemRender:[function(e,t){"use strict";cc._RF.push(t,"fb2dd8pY3xCA44xamKvFrgT","WaveStartTipsIntroduceItemRender");var i=e("Aft");cc.Class({extends:cc.Component,properties:{itemRender:{default:null,type:cc.Prefab}},onLoad:function(){this.itemList=[],this.numberLayoutNode=cc.find("numberLayout",this.node)},showTips:function(e,t){var a=this;this.node.x=-3e3,this.node.active=!0;for(var n=0,o=0;o<t.length;o++){var s=t[o].enemyId,r=t[o].enemyNum;if(!(s=i.templateManager.getEnemyDataById(s)))return;n>=this.itemList.length&&((c=cc.instantiate(this.itemRender)).active=!1,this.numberLayoutNode.addChild(c),this.itemList.push(c));var c=this.itemList[n];c.active=!0,c=c.getComponent(cc.Label),i.lang.updateLabelString(c,[i.lang.getGameText(s.name),r]),n++}this.numberLayoutNode.getComponent(cc.Layout).updateLayout(),this.scheduleOnce(function(){var t,n=a.node.width,o=a.node.height;s=e.x<-120||120<e.x?(t=e.x<0?40+n/2:-40-n/2,n=e.y<0?40+o/2:-40-o/2,e.add(cc.v2(t,n))):(s=e.y<0?40+o/2:-40-o/2,e.add(cc.v2(0,s))),a.node.position=s;var s=a.node.convertToWorldSpaceAR(cc.v2(0,0));i.gameScene.checkBubbleHide(s.x,s.y,a.node.width+20,a.node.height+20)},.1)},hideTips:function(){this.node.active=!1;for(var e=0;e<this.itemList.length;e++)this.itemList[e].active=!1;i.gameScene.checkBubbleShow()}}),cc._RF.pop()},{}],WaveStartTipsItemRender:[function(e,t){"use strict";cc._RF.push(t,"bf1a0dj4BhI+oeZ4C0AP8ZZ","WaveStartTipsItemRender");var i=e("Aft");cc.Class({extends:cc.Component,properties:{},onLoad:function(){},initData:function(){},startTips:function(e,t,i){this.enemyList=i;for(var a=0;a<this.enemyList.length;a++)this.enemyList[a].enemyId,this.enemyList[a].enemyNum;this.tipsNode=cc.find("tips",this.node),this.tipsNode.angle=t,this.touchNode=cc.find("touch",this.node),this.touchNode.active=!1,this.lightNode=cc.find("tips/light",this.node),this.lightNode.active=!1,this.isClick=!1,this.progressBar=cc.find("tips/progressBar",this.node).getComponent(cc.ProgressBar),this.progressBar.progress=1,this.iconNode=cc.find("tips/icon",this.node),this.iconNode.angle=-t,this.curTipsTime=e,this.maxTipsTime=this.curTipsTime,this.maxTipsTime<0&&(this.progressBar.progress=1)},onClickOut:function(){i.Logger.debug("onClickOut"),this.isClick=!1,this.lightNode.active=!1,this.touchNode.active=!1,i.battleScene.WaveStartTipsIntroduceObj.hideTips()},onClickTips:function(){i.battleScene.setCurEnemyObj(null),i.battleScene.setCurSoldierObj(null),this.isClick?(i.soundsUtil.playSoundEffect("button_summon_ok"),0<this.maxTipsTime?i.battleScene.clickWaveTips(this.node.getPosition()):i.battleScene.gameBattleUIObj.onClickGameStart()):(i.soundsUtil.playSoundEffect("button_summon_click"),this.isClick=!0,this.lightNode.active=!0,this.touchNode.active=!0,i.battleScene.gameTowerControl.active&&i.battleScene.gameTowerControlObj.hideControl(),i.battleScene.WaveStartTipsIntroduceObj.showTips(this.node.position,this.enemyList)),i.gameScene.removeBubble(i.constant.GUIDE_TYPE_INSTANCE_1_e),i.gameScene.removeBubble(i.constant.GUIDE_TYPE_INSTANCE_1_e_1)},updateCd:function(e){0<this.curTipsTime&&(this.curTipsTime-=e,this.curTipsTime<0&&(this.curTipsTime=0),this.progressBar.progress=this.curTipsTime/this.maxTipsTime)},update:function(){}}),cc._RF.pop()},{}],WorldForceDetailPage:[function(e,t){"use strict";cc._RF.push(t,"443680b+jBFyr8NTtXmM81i","WorldForceDetailPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{mapAtlas:cc.SpriteAtlas},onLoadPage:function(){this.forceSprite=cc.find("content/force/bg",this.node).getComponent(cc.Sprite),this.forceFontSprite=cc.find("content/force/font",this.node).getComponent(cc.Sprite),this.descLabel=cc.find("content/describe/label",this.node).getComponent(cc.Label),this.fightButtonNode=cc.find("content/fightButton",this.node),this.lockedLabelNode=cc.find("content/label",this.node),this.lockedLabel=this.lockedLabelNode.getComponent(cc.Label)},showPageBegan:function(){this.initPage()},initPage:function(){this.chapterData=this.data,this.forceSprite.spriteFrame=this.mapAtlas.getSpriteFrame(this.chapterData.areaPic),this.forceSprite.node.scale=this.chapterData.areaRatio/1e4,this.forceFontSprite.spriteFrame=this.mapAtlas.getSpriteFrame(this.chapterData.areaLogo),this.descLabel.string=i.lang.getFormatString(this.chapterData.desc);var e,t=i.player.instanceModule.chapterIsUnlock(this.chapterData.id);this.fightButtonNode.active=t,this.lockedLabelNode.active=!t,t||(e=i.player.instanceModule.getMaxChapter(),t=i.GameTextCode.DID_NOT_ARRIVE,this.chapterData.isOpen||this.chapterData.id-e!=1||(t=i.GameTextCode.COMING_SOON),this.lockedLabel.string=i.lang.getFormatString(t))},showPageEnded:function(){i.guideManager.isCanGuide(i.constant.GUIDE_TYPE_UNLOCK_MAP_3)&&i.guideManager.checkGuideRun(i.constant.GUIDE_TYPE_UNLOCK_MAP_3,this.fightButtonNode)},onFight:function(){i.player.instanceModule.getCurChapter()==this.chapterData.id?i.gameScene.mainPage.changeMainPageTag(i.constant.MAIN_PAGE_TAG_CHILD):(i.player.instanceModule.setCurChapter(this.chapterData.id),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_SWITCH_CHAPTER_CLOUD)),this.closePage()},onClose:function(){this.closePage()}}),cc._RF.pop()},{}],WorldGarrisonHeroUpgradePopUp:[function(e,t){"use strict";cc._RF.push(t,"e8122K4XwBHuIH9xwpZOq/s","WorldGarrisonHeroUpgradePopUp");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{effectItemPrefab:{default:null,type:cc.Prefab}},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.SHOW_AD_OVER_DEFEND_UP_HERO_LEVEL,function(){return e.onShowAdOver()})},onLoadPage:function(){var e=this;this.nodeAni=this.node.getComponent(cc.Animation),this.expBaseNode=cc.find("content/exp",this.node),this.titleBg=cc.find("content/titleBg",this.node),this.titleLabelNode=cc.find("content/titleBg/label",this.node),this.heroSpine=cc.find("content/hero/main_hero2_vip",this.node).getComponent(sp.Skeleton),this.expProgress=cc.find("content/progressBar",this.node).getComponent(cc.ProgressBar),this.heroLevelLabel=cc.find("content/progressBar/level",this.node).getComponent(cc.Label),this.heroExpLabel=cc.find("content/progressBar/expLabel",this.node).getComponent(cc.Label),this.addExpLabel=cc.find("content/exp/incomeLabel",this.node).getComponent(cc.Label),this.totalLabel=cc.find("content/exp/totalLabel",this.node).getComponent(cc.Label),this.okButton=cc.find("content/button",this.node),this.adButton=cc.find("content/adButton",this.node),this.adLayoutNode=cc.find("background/layout",this.adButton),this.freeNode=cc.find("background/freeLabel",this.adButton),this.starButton=cc.find("content/starButton",this.node),this.starLabel=cc.find("layout/number",this.starButton),this.closeLabelNode=cc.find("content/incomeLabel",this.node),this.upgradeAnimation=cc.find("content/hero_upgrade_effect",this.node).getComponent(cc.Animation),this.upgradeAnimation.node.active=!1,this.nodeAni.on("finished",this.onFinished,this),this.upgradeAnimation.on("finished",function(){e.upgradeAnimation.node.active=!1})},showPageBegan:function(){this.canClick=!1,this.nodeAni.stop(),this.nodeAni.setCurrentTime(0),this.nodeAni.play("garrisonHeroUpgrade"),this._chapterId=this.data.chapterId,this._heroId=this.data.heroId,this._expNum=this.data.exp,this.titleBg.stopAllActions(),this.buildEffectItem(),this.updateData(),this.dealHeroExp(),i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_IN_MAP_HERO_UPGRADE,1)},showPageEnded:function(){var e=cc.find("adNode",this.node);i.ttAdManager.showBannerAd(e,this.getPageType())},updateBaseData:function(){this.heroCfg=i.templateManager.getHeroDataById(this._heroId),this.heroLevel=i.player.heroModule.getHeroLevel(this._heroId),this.heroLevelCfg=i.templateManager.getHeroLevelDataByLevel(this._heroId,this.heroLevel);var e=i.player.heroModule.heroExpCanUpLevel(this._heroId,this._expNum);this.canUpLevelNum=e[0],this.haveLastExp=0<e[1].comparedTo(0),this.isSpecial=e[1][2],this.heroLevelCfg.type==i.constant.HERO_UP_LEVEL_TYPE_LEVEL&&this.haveLastExp&&!this.isSpecial&&(this.canUpLevelNum+=1),this.singleNum=this.canUpLevelNum},updateData:function(e){e?(this.heroLevel=i.player.heroModule.getHeroLevel(this._heroId),this.heroLevelCfg=i.templateManager.getHeroLevelDataByLevel(this._heroId,this.heroLevel)):this.updateBaseData(),i.Logger.debug("this.heroLevelCfg: "+JSON.stringify(this.heroLevelCfg)),i.Logger.debug("this._expNum: "+this._expNum+", "),this.heroCurExp=i.player.heroModule.getHeroExpNum(this._heroId),this.heroNeedExp=new i.BigNumber(this.heroLevelCfg.expend),this.heroLevelCfg.type!=i.constant.HERO_UP_LEVEL_TYPE_LEVEL?(this.heroNeedExp=new i.BigNumber(0),this.showHeroExp=new i.BigNumber(0)):this.showHeroExp=this.heroCurExp,i.Logger.debug("this.showHeroExp: "+this.showHeroExp.toFixed(0)+", this.heroCurExp: "+this.heroCurExp.toFixed(0)),this.curExpIsEnough=0<=this._expNum.plus(this.heroCurExp).comparedTo(this.heroNeedExp),this.needFlyNum=0<this._expNum.plus(this.heroCurExp).comparedTo(this.heroNeedExp)?this.heroNeedExp.minus(this.heroCurExp):this._expNum,this.aloneFlyNum=this.needFlyNum.div(20),this.updateNodeInfo()},updateNodeInfo:function(){var e;this.oldActive=this.adButton.active,this.okButton.active=!1,this.starButton.active=!1,this.adButton.active=!1,this.closeLabelNode.active=!1,this.totalLabel.string=i.Utils.formatBigNumberForLabel(this._expNum.toFixed(0)),this.totalLabel.node.active=!1,this.addExpLabel.node.active=!0,this.heroLevelCfg.type!=i.constant.HERO_UP_LEVEL_TYPE_LEVEL?(e=i.templateManager.getHeroLevelDataByLevel(this._heroId,this.heroLevel-1),this.expProgress.progress=1,e=i.Utils.formatBigNumberForLabel(e.expend),i.lang.updateLabelString(this.heroExpLabel,[e,e])):(this.expProgress.progress=this.showHeroExp.div(this.heroNeedExp),i.lang.updateLabelString(this.heroExpLabel,[i.Utils.formatBigNumberForLabel(this.showHeroExp.toFixed(0)),i.Utils.formatBigNumberForLabel(this.heroNeedExp.toFixed(0))])),i.lang.updateLabelString(this.addExpLabel,[i.Utils.formatBigNumberForLabel(this._expNum.toFixed(0))]),i.lang.updateLabelString(this.heroLevelLabel,[this.heroLevel]),this.updateHeroSpine()},updateButtonNode:function(){this.curExpIsEnough?this.heroLevelCfg.type==i.constant.HERO_UP_LEVEL_TYPE_STAR?(this.starButton.active=!0,this.starLabel.string=this.heroLevelCfg.expend,this.closeLabelNode.active=!0):(this.adButton.active=!0,this.closeLabelNode.active=!0,i.player.heroModule.getHeroCdLastTime(this._heroId)<=0?(this.adLayoutNode.active=!1,this.freeNode.active=!0):(this.adLayoutNode.active=!0,this.freeNode.active=!1),this.oldActive||i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_IN_MAP_HERO_UPGRADE,2)):this.okButton.active=!0},onExpIconFlyEnd:function(){this.totalLabel.node.active=!0,this.addExpLabel.node.active=!1},onFinished:function(e,t){"garrisonHeroUpgrade"==(t=t.name)?this.heroLevelCfg.type!=i.constant.HERO_UP_LEVEL_TYPE_LEVEL?this.runStandEffect(!0):(this.startRunFlyEffect(0),this.runFlyEffect()):"garrisonHeroUpgrade_flyexp"==t&&this.runStandEffect()},runFlyEffect:function(){this.nodeAni.stop(),this.nodeAni.setCurrentTime(0),this.nodeAni.play("garrisonHeroUpgrade_flyexp");var e=i.templateManager.getDefendEffectDataByTimes(this.singleNum),t=.75;this.onceRunTime=.01,e&&(t=e.progressTime/1e3,this.onceRunTime=e.levelTime/1e3/20),i.Logger.debug("this.onceRunTime: "+this.onceRunTime+", defendDelayTime: "+t+", this.singleNum: "+this.singleNum),e=cc.delayTime(t),t=cc.callFunc(function(){this.runAddExpEffect()},this),t=cc.sequence(e,t),this.titleLabelNode.stopAllActions(),this.titleLabelNode.runAction(t)},runStandEffect:function(e){this.nodeAni.stop(),this.nodeAni.setCurrentTime(0),this.nodeAni.play("garrisonHeroUpgrade_stand"),e&&this.updateButtonNode()},buildEffectItem:function(){this.effectItemList=[];for(var e=0;e<2;e++){var t=cc.instantiate(this.effectItemPrefab);this.node.addChild(t),t.dbceIndex=e,t.opacity=1,this.effectItemList.push(t)}},startRunFlyEffect:function(e){i.Logger.debug("startRunFlyEffect - start: "+e),(e=this.effectItemList[e]).opacity=255,(e=e.getComponent(cc.Animation)).stop(),e.setCurrentTime(0),e.play("garrisonHeroUpgrade_flyexp_Tailing"),e.on("finished",function(){},this)},dealHeroExp:function(){this.canClick=!0,i.player.instanceModule.clearChapterHero(this._chapterId),i.eventBus.dispatchEvent(i.GameEventType.REFRESH_WORLD_DEFEND_ITEM,this._chapterId)},runAddExpEffect:function(){var e,t,a;this.canUpLevelNum<=0||(e=new i.BigNumber(0),this.lastExpNum=this._expNum,a=cc.delayTime(this.onceRunTime),t=cc.callFunc(function(){this._expNum=this._expNum.minus(this.aloneFlyNum),this.totalLabel.string=i.Utils.formatBigNumberForLabel(this._expNum.toFixed(0)),this.showHeroExp=this.showHeroExp.plus(this.aloneFlyNum),this.expProgress.progress=this.showHeroExp.div(this.heroNeedExp),i.lang.updateLabelString(this.heroExpLabel,[i.Utils.formatBigNumberForLabel(this.showHeroExp.toFixed(0)),i.Utils.formatBigNumberForLabel(this.heroNeedExp.toFixed(0))]),e=e.plus(this.aloneFlyNum)},this),a=cc.spawn(a,t),t=cc.repeat(a,20),a=cc.callFunc(function(){i.Logger.debug("runAddExpEffect - done: "+e.toFixed(0)),this.canUpLevelNum--,this.heroLevelCfg.type==i.constant.HERO_UP_LEVEL_TYPE_LEVEL&&(this.curExpIsEnough&&!i.player.heroModule.isHeroMaxLevel(this._heroId)?(i.player.heroModule.cleanHeroExp(this._heroId),i.player.heroModule.addHeroLevel(this._heroId),this.playHeroUpEffect()):i.player.heroModule.addHeroExp(this._heroId,this.lastExpNum)),this.updateData(!0),this.onExpIconFlyEnd(),this.heroLevelCfg.type==i.constant.HERO_UP_LEVEL_TYPE_LEVEL&&this.curExpIsEnough||this.updateButtonNode(),this.runAddExpEffect()},this),a=cc.sequence(t,a),this.titleBg.stopAllActions(),this.titleBg.runAction(a))},onFlyDstDone:function(){i.soundsUtil.playSoundEffect("exp_end")},updateHeroSpine:function(){var e=this;this.heroSpine.node.active=!1;var t="effect/"+this.heroCfg.mainSpin;i.mainScene.getTowerSpineData(t,function(t){t&&(e.heroSpine.node.active=!0,e.heroSpine.skeletonData=t,e.heroSpine.premultipliedAlpha=e.heroCfg.isPreform,e.heroSpine.clearTrack(0),t=e.heroCfg.spinName,e.heroSpine.setAnimation(0,t,!0),e.heroSpine.node.scale=e.heroCfg.mainSpinScale/1e4)})},updateSpineAction:function(e,t,i){var a=this;t=!t,this.heroSpine.clearTrack(0);var n=this;this.heroSpine.setAnimation(0,e,t)&&!t&&i&&this.heroSpine.setCompleteListener(function(t){(t.animation?t.animation.name:"")==e&&(e=i,n.heroSpine.setAnimation(0,e,!0)),a.heroCfg.spinName})},playHeroUpEffect:function(){i.soundsUtil.playSoundEffect("success_hero_upgrade"),this.upgradeAnimation.node.active=!0,this.upgradeAnimation.stop(),this.upgradeAnimation.setCurrentTime(0),this.upgradeAnimation.play("tower_upgrade")},onClickUpLevel:function(){this.adButton.active&&this.freeNode.active?this.onShowAdOver():i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,i.GameEventType.SHOW_AD_OVER_DEFEND_UP_HERO_LEVEL)},onShowAdOver:function(){var e,t=this;i.player.heroModule.isHeroUnlock(this._heroId)?i.player.heroModule.isHeroMaxLevel(this._heroId)?(e=i.lang.getGameText(i.GameTextCode[1772])+" - 2",i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,e)):(this.canClick=!1,i.player.heroModule.addHeroLevel(this._heroId),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_HERO_WAKE,{type:i.constant.MAIN_COMMON_CARD_TYPE_HERO_BREAK,heroId:this._heroId,callBack:function(){t.callBackMethod()}})):(e=i.lang.getGameText(i.GameTextCode[1772])+" - 1",i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,e))},onClickStar:function(){var e,t=this;i.player.heroModule.isHeroUnlock(this._heroId)&&!i.player.heroModule.isHeroMaxLevel(this._heroId)&&(i.player.playerModule.isGoldBullionEnough(this.heroLevelCfg.expend)?i.player.playerModule.costGoldBullionNum(this.heroLevelCfg.expend,i.constant.ITEM_CONSUME_SOURCE_HERO_ADD_STAR)&&(this.canClick=!1,i.player.heroModule.addHeroStarLevel(this._heroId),i.player.heroModule.addHeroLevel(this._heroId),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAIN_HERO_WAKE,{type:i.constant.MAIN_COMMON_CARD_TYPE_HERO_STAR,heroId:this._heroId,callBack:function(){t.callBackMethod()}}),i.BI.onEvent(i.biConstant.EVENT_TYPE_DIAMOND_CONSUME,i.biConstant.EVENT_ID_DIAMOND_HERO_UP_STAR,this.heroLevelCfg.expend),i.soundsUtil.playSoundEffect("sucess_hero_star")):(e=i.lang.getGameText(i.GameTextCode.ENOUGH_DIAMONDS),i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,e)))},callBackMethod:function(){this.updateData(),this.onExpIconFlyEnd(),this.playHeroUpEffect(),this.startRunFlyEffect(1),this.runFlyEffect()},onClickClose:function(){this.closePage()},closePageBegan:function(){i.ttAdManager.hideBannerAd();for(var e=0;e<this.effectItemList.length;e++)this.effectItemList[e].destroy()}}),cc._RF.pop()},{}],WorldGarrisonRewardPopUp:[function(e,t){"use strict";cc._RF.push(t,"2f875IToFBKhbj7GqRJu6FT","WorldGarrisonRewardPopUp");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.SHOW_AD_OVER_DEFEND_DOUBLE_REWARD,function(){return e.onShowAdOver()})},onLoadPage:function(){this.richTextLabel=cc.find("content/RichText",this.node).getComponent(cc.RichText),this.incomeLabel=cc.find("content/incomeLabel",this.node).getComponent(cc.Label),this.vipLabel=cc.find("content/vipLabel",this.node).getComponent(cc.Label),this.adButtonSprite=cc.find("content/adButton/background",this.node).getComponent(cc.Sprite),this.adButtonEffect=cc.find("content/adButton/background/button_light",this.node).getComponent(cc.Animation),this.adButtonEffect.node.active=!1},showPageBegan:function(){this.timeStamp=i.timeUtil.getTime(),this._chapterId=this.data.chapterId,this._chapterHeroInfo=i.player.instanceModule.getChapterHeroById(this._chapterId),this._heroId=this._chapterHeroInfo.heroId,this._defendId=this._chapterHeroInfo.defendId,this._startTime=this._chapterHeroInfo.startTime,this._originalHeroLevel=this._chapterHeroInfo.heroLevel,i.templateManager.getHeroDataById(this._heroId),this._defendCfg=i.templateManager.getDefendDataById(this._defendId),this._needTime=60*this._defendCfg.defendTime;var e=i.player.instanceModule.getRealDefendSecondReward(this._chapterId,this._heroId,this._defendId,this._originalHeroLevel);this.maxValue=new i.BigNumber(this._needTime).times(e);var t=i.player.vipModule.getCurVipLevel();this.curVipCfg=i.templateManager.getVipDataByLevel(t),e=i.player.vipModule.getVipUnlockCfg(i.constant.VIP_PRIVILEGE_TYPE_HEIGHT_DEFEND),this.vipIsUnlock=t>=e.vipLevel,this.incomeLabel.node.active=this.vipIsUnlock,this.vipLabel.node.active=!this.vipIsUnlock,i.lang.updateLabelString(this.incomeLabel,[this.curVipCfg.defendNum[1]/100]),i.lang.updateLabelString(this.vipLabel,[e.vipLevel]),i.lang.updateLabelStringArgs(this.richTextLabel,1806,[this._defendCfg.defendTime,i.Utils.formatBigNumberForLabel(this.maxValue.toFixed(0))]),e="2d-gray-sprite",this.vipIsUnlock&&(e="2d-sprite"),this.adButtonSprite.setMaterial(0,cc.Material.getBuiltinMaterial(e)),this.vipIsUnlock?this.playButtonEffect():this.stopButtonEffect(),i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_IN_MAP_REWARD)},playButtonEffect:function(){this.adButtonEffect.node.active||(this.adButtonEffect.node.active=!0,this.adButtonEffect.stop(),this.adButtonEffect.setCurrentTime(0),this.adButtonEffect.play("button_light"))},stopButtonEffect:function(){this.adButtonEffect.node.active&&(this.adButtonEffect.node.active=!1)},showPageEnded:function(){i.ttAdManager.showBannerAd(cc.find("adNode",this.node),this.getPageType())},closePageBegan:function(){i.ttAdManager.hideBannerAd()},onClickReceive:function(){this.doubleNum=1,this.receiveReward()},onClickDouble:function(){this.vipIsUnlock&&i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,i.GameEventType.SHOW_AD_OVER_DEFEND_DOUBLE_REWARD)},onShowAdOver:function(){this.doubleNum=1+this.curVipCfg.defendNum[1]/1e4,this.receiveReward()},receiveReward:function(){var e=this,t=i.player.instanceModule.getDefendRealTime(this._chapterId);if(t=this._startTime+this._needTime-t,0<this._startTime&&0<t)return this.closePage(),void i.gameScene.showTipsItemRender(i.lang.getGameText(i.GameTextCode.SYSTEM_TIME_ERROR));i.gameScene.checkServerTime(function(){if(e.timeStamp>i.timeUtil.getTime())return e.closePage(),void i.gameScene.showTipsItemRender(i.lang.getGameText(i.GameTextCode.SYSTEM_TIME_ERROR));e.closePage(),i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAP_DEFEND_UP_LEVEL,{chapterId:e._chapterId,heroId:e._heroId,exp:e.maxValue.times(e.doubleNum)});var t=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_WORLD);t&&t.updateQuickGarrisonInfo()},!1,function(){},5)}}),cc._RF.pop()},{}],WorldGarrisonSpeedUpPopUp:[function(e,t){"use strict";cc._RF.push(t,"beafaLLVtZAvb8UNzsHcCdF","WorldGarrisonSpeedUpPopUp");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.SHOW_AD_OVER_DEFEND_SPEED,function(){return e.onShowAdOver()}),this.registerListener(i.GameEventType.REFRESH_SPEED_DEFEND_PAGE,function(){return e.updateData()})},onLoadPage:function(){this.tipsLabel=cc.find("content/tipsLabel",this.node).getComponent(cc.Label),this.lastTimesLabel=cc.find("content/timesLabel",this.node).getComponent(cc.Label),this.timeCdLabel=cc.find("content/timeCdLabel",this.node).getComponent(cc.Label),this.speedBtnNodeSprite=cc.find("content/diamondButton/background",this.node).getComponent(cc.Sprite)},showPageBegan:function(){this.updateData(),i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_IN_MAP_SPEED)},showPageEnded:function(){i.ttAdManager.showBannerAd(cc.find("adNode",this.node),this.getPageType())},closePageBegan:function(){i.ttAdManager.hideBannerAd()},updateData:function(){this.todaySecond=i.timeUtil.getTodayHourTime(0),this.updateTime=0,i.lang.updateLabelString(this.tipsLabel,[i.templateManager.getGameParamValue("defendSpeedTime")]);var e=i.player.instanceModule.checkDefendSpeendTimes()?"2d-sprite":"2d-gray-sprite";this.speedBtnNodeSprite.setMaterial(0,cc.Material.getBuiltinMaterial(e)),i.player.instanceModule.checkDefendSpeendTimes()?(this.lastTimesLabel.node.active=!0,i.lang.updateLabelString(this.lastTimesLabel,[i.player.instanceModule.getTodayLastDefendSpeedTimes()]),this.timeCdLabel.node.active=!1):(this.lastTimesLabel.node.active=!1,this.timeCdLabel.node.active=!0,this.updateCdLabel())},updateCdLabel:function(){var e;this.todaySecond==i.timeUtil.getTodayHourTime(0)?(this.timeCdLabel.node.active=!0,e=i.timeUtil.getTodayHourTime(24)/1e3-i.timeUtil.getSecond(),e=(e=i.timeUtil.secondArrayFormat(e))[1]+":"+e[2]+":"+e[3],i.lang.updateLabelString(this.timeCdLabel,[e])):this.timeCdLabel.node.active=!1},onClickDefend:function(){var e;i.player.instanceModule.checkDefendSpeendTimes()&&(i.player.instanceModule.getHaveCanSpeedDefend()?i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,i.GameEventType.SHOW_AD_OVER_DEFEND_SPEED):(e=i.lang.getGameText(i.GameTextCode.NO_HERO_SPEED),i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,e)))},onShowAdOver:function(){var e=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_WORLD);e&&e.showAllGarrisonFlyExp(),i.player.instanceModule.subAllDefendHeroTime(),this.closePage()},update:function(e){this.timeCdLabel.node.active&&(this.updateTime||(this.updateTime=0),this.updateTime+=e,this.updateTime<=1||(this.updateTime=0,this.updateCdLabel()))}}),cc._RF.pop()},{}],WorldMapGarrisonExpTipsItemRender:[function(e,t){"use strict";cc._RF.push(t,"d4b5bayayFOFYuDovyqRxFQ","WorldMapGarrisonExpTipsItemRender"),cc.Class({extends:aft.BaseUI,properties:{},afterLoad:function(){this.expTipsLevelLabel=cc.find("level",this.node).getComponent(cc.Label),this.expTipsIncomeLabel=cc.find("progressBar/incomeLabel",this.node).getComponent(cc.Label),this.expTipsProgressBar=cc.find("progressBar",this.node).getComponent(cc.ProgressBar)},showTips:function(e,t,i,a){this._chapterCfg=e,this._chapterId=this._chapterCfg.id,this._needTime=t,this.maxValue=i,this._chapterHeroInfo=aft.player.instanceModule.getChapterHeroById(this._chapterId),this._chapterHeroInfo?(this._heroId=this._chapterHeroInfo.heroId,this._defendId=this._chapterHeroInfo.defendId,this._startTime=this._chapterHeroInfo.startTime,this._originalHeroLevel=this._chapterHeroInfo.heroLevel,this._realSecondNum=aft.player.instanceModule.getRealDefendSecondReward(this._chapterId,this._heroId,this._defendId,this._originalHeroLevel),this.updateTime=0,this.node.scale=0,this.node.active=!0,t=cc.scaleTo(.1,1/a*1.2),i=cc.scaleTo(.1,1/a),a=cc.callFunc(function(){},this),a=cc.sequence(t,i,a),this.node.stopAllActions(),this.node.runAction(a),this.updateExpTips()):this.node.active=!1},updateExpTips:function(){var e=aft.player.heroModule.getHeroLevel(this._heroId);this.lastHeroLevel!=e&&(this.lastHeroLevel=e,aft.lang.updateLabelString(this.expTipsLevelLabel,[e])),e=(e=aft.player.instanceModule.getDefendRealTime(this._chapterId)-this._startTime)>this._needTime?this._needTime:e,this.expTipsProgressBar.progress=e/this._needTime,e=new aft.BigNumber(this._realSecondNum).times(e).toFixed(0),aft.lang.updateLabelString(this.expTipsIncomeLabel,[aft.Utils.formatBigNumberForLabel(e),aft.Utils.formatBigNumberForLabel(this.maxValue)])},update:function(e){this.updateTime||(this.updateTime=0),this.updateTime+=e,this.updateTime<1||(this.updateTime=0,this.updateExpTips())}}),cc._RF.pop()},{}],WorldMapGarrisonItemRender:[function(e,t){"use strict";cc._RF.push(t,"e0ff5ZTno1AkZjgA/aFIB2G","WorldMapGarrisonItemRender");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{commonAtlas:{default:null,type:cc.SpriteAtlas}},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.REFRESH_WORLD_DEFEND_ITEM,function(t){t&&e._chapterCfg&&e._chapterCfg.id!=t||e.updateData(!1,!0)}),this.registerListener(i.GameEventType.UPDATE_QUICK_WORLD_DEFEND_TIPS,function(){e.expFlyAction(60*i.templateManager.getGameParamValue("defendSpeedTime"))})},afterLoad:function(){this.nodeAni=this.node.getComponent(cc.Animation),this.expNode=cc.find("exp",this.node),this.expHeroIconSprite=cc.find("mask/head",this.expNode).getComponent(cc.Sprite),this.expProgressBar=cc.find("progressBar",this.expNode).getComponent(cc.ProgressBar),this.expFullNode=cc.find("full",this.expNode),this.expTimeLabel=cc.find("time",this.expNode).getComponent(cc.Label),this.expFlyNode=cc.find("fly/expLayout",this.expNode),this.expFlyLabel=cc.find("number",this.expFlyNode).getComponent(cc.Label),this.expFlyNode.active=!1,this.positionNode=cc.find("position",this.node),this.positionTipsNode=cc.find("tipsLayout",this.positionNode),this.expProgressBar.node.runAction(cc.repeatForever(cc.rotateBy(2,360))),this.nodeAni&&this.nodeAni.play("worldMapGarrison_stand")},initData:function(e,t){this.nodeAni=this.node.getComponent(cc.Animation),this.expNode=cc.find("exp",this.node),this.expHeroIconSprite=cc.find("mask/head",this.expNode).getComponent(cc.Sprite),this.expProgressBar=cc.find("progressBar",this.expNode).getComponent(cc.ProgressBar),this.expFullNode=cc.find("full",this.expNode),this.expTimeLabel=cc.find("time",this.expNode).getComponent(cc.Label),this.expFlyNode=cc.find("fly/expLayout",this.expNode),this.expFlyLabel=cc.find("number",this.expFlyNode).getComponent(cc.Label),this.expFlyNode.active=!1,this.positionNode=cc.find("position",this.node),this.positionTipsNode=cc.find("tipsLayout",this.positionNode),this._chapterCfg=e,this._isShowEffect=t,this.updateDone=!1,this.updateData(this._isShowEffect)},updateData:function(e,t){var a;this.progressTime=0,this._chapterHeroInfo=i.player.instanceModule.getChapterHeroById(this._chapterCfg.id),this._chapterHeroInfo?(this._heroId=this._chapterHeroInfo.heroId,this._defendId=this._chapterHeroInfo.defendId,this._startTime=this._chapterHeroInfo.startTime,this._originalHeroLevel=this._chapterHeroInfo.heroLevel,this._realSecondNum=i.player.instanceModule.getRealDefendSecondReward(this._chapterCfg.id,this._heroId,this._defendId,this._originalHeroLevel),a=i.templateManager.getHeroDataById(this._heroId),this.positionNode.active=!1,this.expNode.active=!0,this._defendCfg=i.templateManager.getDefendDataById(this._defendId),this._needTime=60*this._defendCfg.defendTime,this._defendRewardCfg=i.templateManager.getDefendLevelRewardByLevel(this._originalHeroLevel),this.maxValue=new i.BigNumber(this._needTime).times(this._realSecondNum).toFixed(0),this.expHeroIconSprite.spriteFrame=this.commonAtlas.getSpriteFrame(a.heroHead)):(this.positionNode.active=!0,this.expNode.active=!1,i.player.commonModule.getBubbleIsNotShow(i.constant.BUBBLE_TYPE_WORLD_DEFEND)?(this.positionTipsNode.active=!0,i.player.commonModule.putAreadyShowBubble(i.constant.BUBBLE_TYPE_WORLD_DEFEND)):this.positionTipsNode.active=!1),this.updateDone=!0,this.updateTimeLabel(),this._heroId&&0<this._heroId&&(t||e)&&(this.expFullNode.active?this.nodeAni&&this.nodeAni.play("worldMapGarrison_full"):(t&&this.nodeAni&&this.nodeAni.play("worldMapGarrison_apper"),e&&this.nodeAni&&this.nodeAni.play("worldMapGarrison_stand")))},updateTimeLabel:function(){var e,t;!this._heroId||this._heroId<0||!this.updateDone?this.expTimeLabel.node.active=!1:(t=i.player.instanceModule.getDefendRealTime(this._chapterCfg.id),e=this._startTime+this._needTime-t,0<this._startTime&&0<e?(this.expTimeLabel.string=i.timeUtil.secondFormat(e),this.expTimeLabel.node.active=!0,this.expTimeLabel.node.active||(this.expTimeLabel.node.active=!0),this.expProgressBar.node.active||(this.expProgressBar.node.active=!0),this.expFullNode.active&&(this.expFullNode.active=!1),e=(t-this._startTime)/this._needTime,t=i.templateManager.getGameParamValue("defendInitialPercentage")/100,this.expProgressBar.progress=Math.max(e,t)):(this.expTimeLabel.node.active=!1,this.expTimeLabel.node.active&&(this.expTimeLabel.node.active=!1),this.expProgressBar.node.active&&(this.expProgressBar.node.active=!1),this.expFullNode.active||(this.expFullNode.active=!0,this.nodeAni&&this.nodeAni.play("worldMapGarrison_full"))))},updateProgress:function(e){!this._heroId||this._heroId<0?this.expTimeLabel.node.active&&(this.expTimeLabel.node.active=!1):(this.progressTime||(this.progressTime=0),this.progressTime+=e,i.player.instanceModule.getDefendRealTime(this._chapterCfg.id),10<=this.progressTime&&(this.expFlyAction(),this.progressTime=0))},expFlyAction:function(e){var t,a,n,o,s,r;this.expFullNode.active||(this.expFlyNode.opacity=255,this.expFlyNode.scale=0,this.expFlyNode.active=!0,this.expFlyNode.y=-20,e?(n=i.player.instanceModule.getDefendRealTime(this._chapterCfg.id),o=this._startTime+this._needTime-n,0<this._startTime&&0<o&&(e=e<o?e:o)):e=10,i.lang.updateLabelString(this.expFlyLabel,[i.Utils.formatBigNumberForLabel(Math.floor(this._realSecondNum*e))]),t=cc.delayTime(0),a=cc.callFunc(function(){},this),s=cc.scaleTo(.1,1.2),r=cc.scaleTo(.2,1),n=cc.sequence(s,r),o=cc.moveBy(.3,cc.v2(0,40)),e=cc.delayTime(.4),s=cc.fadeOut(.25),r=cc.callFunc(function(){this.expFlyNode.active=!1},this),r=cc.sequence(e,s,r),r=cc.spawn(n,o,r),r=cc.sequence(t,a,r),this.expFlyNode.stopAllActions(),this.expFlyNode.runAction(r))},onClickExp:function(){var e=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_WORLD);i.player.instanceModule.getDefendRealTime(this._chapterCfg.id)-this._startTime>=this._needTime?(i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAP_DEFEND_REWARD,{chapterId:this._chapterCfg.id}),e&&e.hideGarrisonExpTips()):e&&e.showGarrisonExpTips(this._chapterCfg,this._needTime,this.maxValue,this.node.convertToWorldSpaceAR(cc.v2(0,0)))},onClickAdd:function(){var e;0!=i.player.heroModule.getCanGarrisonHeros().length?(i.gameScene.showPage(i.pageConstant.PAGE_TYPE_MAP_GARRISON_LIST,this._chapterCfg.id),(e=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_WORLD))&&e.hideGarrisonExpTips()):(e=i.lang.getGameText(i.GameTextCode.NO_IDEA_HERO),i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,e))},update:function(e){this.updateProgress(e),this.updateTime||(this.updateTime=0),this.updateTime+=e,this.updateTime<1||(this.updateTime=0,this.updateTimeLabel())}}),cc._RF.pop()},{}],WorldMapItemRender:[function(e,t){"use strict";cc._RF.push(t,"4dea5bzW1lOxrk0iFh/TBuE","WorldMapItemRender");var i=e("Aft");cc.Class({extends:cc.Component,properties:{mapGarrisonItemPrefab:cc.Prefab,mapUiAtlas:cc.SpriteAtlas},onLoad:function(){this.campFontSprite=cc.find("font",this.node).getComponent(cc.Sprite),this.fontPosNode=cc.find("fontPos",this.node),this.knifeNode=cc.find("check_knife",this.node),this.flagUnlockedNode=cc.find("flagUnlocked",this.node),this.progressNode=cc.find("progress",this.node),this.starNumLabel=cc.find("starNumber",this.progressNode).getComponent(cc.Label)},initInfo:function(e,t,i){this.mapAtlas=i,this.chapterData=e,this.campTagData=t,this.updateItem(),this.updateWorldGarrison(!0)},updateItem:function(){if(this.campFontSprite||(this.campFontSprite=cc.find("font",this.node).getComponent(cc.Sprite)),this.campFontSprite&&this.mapUiAtlas&&this.chapterData)try{this.campFontSprite.spriteFrame=this.mapUiAtlas.getSpriteFrame(this.chapterData.areaLogo)}catch(e){}},updateWorldGarrison:function(e){var t;i.player.instanceModule.chapterIsPass(this.chapterData.id)&&(this.mapGarrisonObj||(t=cc.instantiate(this.mapGarrisonItemPrefab),this.node.addChild(t),t.position=cc.v2(this.chapterData.headOffset[0],this.chapterData.headOffset[1]),this.mapGarrisonObj=t.getComponent("WorldMapGarrisonItemRender")),this.mapGarrisonObj.node.active=!0,this.mapGarrisonObj.initData(this.chapterData,e))},showGarrisonFlyExp:function(){this.mapGarrisonObj&&this.mapGarrisonObj.expFlyAction(60*i.templateManager.getGameParamValue("defendSpeedTime"))},updateItemState:function(e){var t=i.player.instanceModule,a=t.chapterIsUnlock(this.chapterData.id),n=this.chapterData.id===t.getCurChapter();this.isUnlock=a,this.updateMapSprite(n),this.updateArrowActive(),this.updateWorldGarrison(e);var o=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_WORLD);if(o&&o.showBtnNode(),this.progressNode.active=a,this.flagUnlockedNode.active=a,this.knifeNode.active=n,this.campFontSprite.node.position=a?cc.v2(this.chapterData.nameOffset[0],this.chapterData.nameOffset[1]):this.flagUnlockedNode.position,n&&e&&i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_WORLD).scrollToPoint(this.node.position,!0,.5),this.campTagData.sprite.setMaterial(0,cc.Material.getBuiltinMaterial(a?"2d-sprite":"2d-gray-sprite")),this.campTagData.arrowNode){o=this.chapterData.id===t.getMaxChapter(),n=cc.find("arrow",this.campTagData.arrowNode),e=cc.find("arrow1",this.campTagData.arrowNode);try{n&&(n.active=!o),e&&(e.active=o)}catch(e){}}a&&(t.chapterIsPass(this.chapterData.id),t=t.getChapterAllStarNum(this.chapterData.id),this.chapterData.maxStar,i.lang.updateLabelString(this.starNumLabel,[t,this.chapterData.maxStar]))},updateMapSprite:function(e){var t;this.campTagData.sprite.node.active&&(t=this.chapterData.normal,e&&(t=this.chapterData.selected,this.campTagData.sprite.setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite"))),this.campTagData.sprite.spriteFrame=this.mapAtlas.getSpriteFrame(t))},updateArrowActive:function(){this.campTagData.arrowNode&&(this.campTagData.arrowNode.active=this.isUnlock)},updateSelect:function(e){this.updateMapSprite(e),this.campTagData.arrowNode&&(this.campTagData.arrowNode.active=!1),this.progressNode.active=!1,this.knifeNode.active=!1,this.mapGarrisonObj&&(this.mapGarrisonObj.node.active=!1);var t=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_WORLD);t&&t.hideBtnNode(),this.node.active=e}}),cc._RF.pop()},{}],WorldQuickGarrisonHeroItemRender:[function(e,t){"use strict";cc._RF.push(t,"f295dHRXIZAUrN2MixYV5eP","WorldQuickGarrisonHeroItemRender");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{heroItemPrefab:{type:cc.Prefab,default:null}},afterLoad:function(){this.heroNode=cc.find("hero",this.node),this.expTotalLabel=cc.find("expLayout/label",this.node).getComponent(cc.Label),this.buttonNode=cc.find("button",this.node),this.descLabel=cc.find("desc",this.node).getComponent(cc.Label)},initData:function(e,t,a){this._chapterId=e,this._heroId=t,this._oldHeroId=a,this._heroCfg=i.templateManager.getHeroDataById(this._heroId),this._defendId=i.player.heroModule.getHeroDefendInfo(t),this._defendCfg=i.templateManager.getDefendDataById(this._defendId),this._heroLevel=i.player.heroModule.getHeroLevel(this._heroId),this.updateHeroItem(),t=i.player.instanceModule.getLevelAddRatio(this._heroId),i.Logger.debug("AppointGarrisonHeroItemRender addNum : "+t),0==t?this.descLabel.node.active=!1:(this.descLabel.node.active=!0,i.lang.updateLabelString(this.descLabel,[i.lang.getGameText(this._heroCfg.name),Math.floor(100*t)])),t=i.player.instanceModule.getRealDefendSecondReward(0,this._heroId,this._defendId,this._heroLevel),this.expTotalLabel.string=i.Utils.formatNumberForLabel(Math.floor(3600*t))+"/h"},updateHeroItem:function(){var e;this.heroItemObj||((e=cc.instantiate(this.heroItemPrefab)).scale=.6,this.heroNode.addChild(e),this.heroItemObj=e.getComponent("MainHeroItemRender")),this.heroItemObj.initData(this,i.constant.HERO_ITEM_TYPE_MAP,this._heroId)},onClickOk:function(){i.player.heroModule.setOneKeyHero(this._chapterId,this._heroId,this._oldHeroId),i.gameScene.closePage(i.pageConstant.PAGE_TYPE_QUICK_DEFEND_CHOOSE_HERO),i.eventBus.dispatchEvent(i.GameEventType.REFRESH_WORLD_QUICK_DEFEND_ITEM)}}),cc._RF.pop()},{}],WorldQuickGarrisonHeroPopUp:[function(e,t){"use strict";cc._RF.push(t,"973ccjrZs1ICrcQ5cs+BzZc","WorldQuickGarrisonHeroPopUp");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{itemPrefab:{type:cc.Prefab,default:null}},onLoadPage:function(){this.contentNode=cc.find("content/scrollView/view/content",this.node),this.itemIndex=0,this.itemObjList=[]},showPageBegan:function(){this._chapterId=this.data.chapterId,this._changeHeroId=this.data.heroId,this.allHeroList=i.player.heroModule.getOneKeyHeroList(this._changeHeroId),this.hideAllItem(),this.itemIndex=0,i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_IN_MAP)},hideAllItem:function(){for(var e=0;e<this.itemObjList.length;e++)this.itemObjList[e].node.active=!1},update:function(){var e,t;this.itemIndex<this.allHeroList.length&&(e=this.allHeroList[this.itemIndex],this.itemIndex>=this.itemObjList.length&&(t=cc.instantiate(this.itemPrefab),this.contentNode.addChild(t),t=t.getComponent("WorldQuickGarrisonHeroItemRender"),this.itemObjList.push(t)),(t=this.itemObjList[this.itemIndex]).node.active=!0,t.initData(this._chapterId,e,this._changeHeroId),this.itemIndex++)}}),cc._RF.pop()},{}],WorldQuickGarrisonItemRender:[function(e,t){"use strict";cc._RF.push(t,"315beqMZHZJcIUqKlxQUdq0","WorldQuickGarrisonItemRender");var i=e("Aft");cc.Class({extends:i.BaseUI,properties:{iconAtlas:{type:cc.SpriteAtlas,default:null},bgAtlas:{type:cc.SpriteAtlas,default:null}},registerGameListener:function(){},afterLoad:function(){this.headNode=cc.find("head",this.node),this.lockNode=cc.find("locked",this.node),this.noHeroNode=cc.find("empty",this.node),this.heroIconNode=cc.find("hero",this.headNode),this.heroIconSprite=this.heroIconNode.getComponent(cc.Sprite),this.heroBgSprite=cc.find("bg",this.headNode).getComponent(cc.Sprite),this.levelLabel=cc.find("level",this.headNode).getComponent(cc.Label),this.unlockLabel=cc.find("level",this.lockNode).getComponent(cc.Label)},initData:function(e,t,a){this.chapterData=e,this.chapterId=this.chapterData.id,this.itemIndex=t,this.heroList=a,this.heroId=null,t<a.length&&(this.heroId=a[t]),this.headNode.active=!1,this.lockNode.active=!1,this.noHeroNode.active=!1,i.player.instanceModule.chapterIsPass(this.chapterId)?this.heroId?(this.headNode.active=!0,t=i.player.heroModule.getHeroLevel(this.heroId),i.lang.updateLabelString(this.levelLabel,[t]),(t=i.templateManager.getHeroDataById(this.heroId))&&(this.heroIconSprite.spriteFrame=this.iconAtlas.getSpriteFrame(t.heroHead)),this.updateBg()):this.noHeroNode.active=!0:(this.lockNode.active=!0,i.lang.updateLabelString(this.unlockLabel,[i.lang.getGameText(this.chapterData.name)]))},updateBg:function(){var e="Head_Bg_Green";switch(i.player.heroModule.getHeroQuality(this.heroId)){case i.constant.QUALITY_TYPE_1:e="Head_Bg_Green";break;case i.constant.QUALITY_TYPE_2:e="Head_Bg_Blue";break;case i.constant.QUALITY_TYPE_3:e="Head_Bg_Purple";break;case i.constant.QUALITY_TYPE_4:e="Head_Bg_Orange"}this.heroBgSprite.spriteFrame=this.bgAtlas.getSpriteFrame(e)},onClickChange:function(){var e;this.host.hideTip(),this.heroId&&(this.heroList.length<=1?(e=i.lang.getGameText(i.GameTextCode.HERO_NOT_ENOUGH),i.eventBus.dispatchEvent(i.GameEventType.SHOW_SYSTEM_TIPS,e)):i.gameScene.showPage(i.pageConstant.PAGE_TYPE_QUICK_DEFEND_CHOOSE_HERO,{chapterId:this.chapterId,heroId:this.heroId}))},onClickHead:function(){var e;this.host.hideTip(),this.heroId&&((e=this.node.convertToWorldSpaceAR(cc.v2(0,0))).y+=this.node.height/2,this.host.showTip(e,this.heroId))}}),cc._RF.pop()},{}],WorldQuickGarrisonPopUp:[function(e,t){"use strict";cc._RF.push(t,"75948Az2GtOq4gxKxS4m/OL","WorldQuickGarrisonPopUp");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{itemPrefab:{type:cc.Prefab,default:null}},onLoadPage:function(){this.contentNode=cc.find("content/scrollView/view/content",this.node),this.itemIndex=0,this.itemObjList=[],this.tipNode=cc.find("content/oneClickGarrisonTips",this.node),this.timeLabel=cc.find("bg/time",this.tipNode).getComponent(cc.Label),this.coinLabel=cc.find("bg/income",this.tipNode).getComponent(cc.Label),this.node.on("touchstart",this.hideTip,this),this.contentNode.on("touchstart",this.hideTip,this)},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.REFRESH_WORLD_QUICK_DEFEND_ITEM,function(){e.initData()})},showPageBegan:function(){this.hideTip(),this.allChapterList=[];for(var e=0;e<i.JsonData.Chapter.length;e++)e<10&&this.allChapterList.push(i.JsonData.Chapter[e]);this.initData()},initData:function(){this.heroList=i.player.heroModule.getOneKeyHeroList(),this.hideAllItem(),this.itemIndex=0,i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_ONE_KEY_IN_MAP)},hideAllItem:function(){for(var e=0;e<this.itemObjList.length;e++)this.itemObjList[e].node.active=!1},onClickDefend:function(){i.player.instanceModule.quickChapterDefend();var e=i.gameScene.getPage(i.pageConstant.PAGE_TYPE_MAIN_WORLD);e&&e.updateQuickGarrisonInfo(),this.closePage(),i.BI.onEvent(i.biConstant.EVENT_TYPE_CLICK,i.biConstant.EVENT_ID_CLICK_ONE_KEY_IN_MAP)},showTip:function(e,t){e=this.node.convertToNodeSpaceAR(e),this.tipNode.position=e,this.tipNode.active=!0,this._defendId=i.player.heroModule.getHeroDefendInfo(t),this._defendCfg=i.templateManager.getDefendDataById(this._defendId),this._heroLevel=i.player.heroModule.getHeroLevel(t),i.lang.updateLabelString(this.timeLabel,[this._defendCfg.defendTime]),t=i.player.instanceModule.getRealDefendSecondReward(0,t,this._defendId,this._heroLevel),i.lang.updateLabelString(this.coinLabel,[i.Utils.formatNumberForLabel(Math.floor(60*this._defendCfg.defendTime*t))])},hideTip:function(){this.tipNode.active=!1},update:function(){var e,t;this.itemIndex<this.allChapterList.length&&(e=this.allChapterList[this.itemIndex],this.itemIndex>=this.itemObjList.length&&(t=cc.instantiate(this.itemPrefab),this.contentNode.addChild(t),((t=t.getComponent("WorldQuickGarrisonItemRender")).host=this).itemObjList.push(t)),(t=this.itemObjList[this.itemIndex]).node.active=!0,t.initData(e,this.itemIndex,this.heroList),this.itemIndex++)}}),cc._RF.pop()},{}],YearMonsterPage:[function(e,t){"use strict";cc._RF.push(t,"aa8bfl7hgpKtIzxO5DVgaOi","YearMonsterPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{},onLoadPage:function(){this.ruleLayoutNode=cc.find("content/ruleLayout",this.node),this.touchNode=cc.find("content/touchNode",this.node),this.ruleLabel=cc.find("content/ruleLayout/bgLayout/label1",this.node).getComponent(cc.Label),this.adNode=cc.find("content/challengeButton/Background/adLayout/ad",this.node),this.challengeButton=cc.find("content/challengeButton",this.node).getComponent(cc.Button),this.rewardLabelList=[],this.rewardCheckList=[],this.taskLabelList=[],this.gotNodeList=[],this.rewardButtonList=[],this.canRewardList=[],this.noRewardList=[];for(var e=1;e<=4;e++){var t=cc.find("content/everyDayReward/reward/reward"+e+"/rewards/label",this.node).getComponent(cc.Label),i=cc.find("content/everyDayReward/reward/reward"+e+"/rewards/check",this.node),a=cc.find("content/everyDayReward/reward/reward"+e+"/task",this.node).getComponent(cc.Label),n=cc.find("content/everyDayReward/reward/reward"+e+"/got",this.node),o=cc.find("content/everyDayReward/reward/reward"+e+"/button",this.node).getComponent(cc.Button),s=cc.find("content/everyDayReward/reward/reward"+e+"/button/Background/label",this.node),r=cc.find("content/everyDayReward/reward/reward"+e+"/button/Background/no",this.node);this.rewardLabelList.push(t),this.rewardCheckList.push(i),this.taskLabelList.push(a),this.gotNodeList.push(n),this.rewardButtonList.push(o),this.canRewardList.push(s),this.noRewardList.push(r)}this.challengeLeftTimeLabel=cc.find("content/challengeLeftTime",this.node).getComponent(cc.Label),this.timeLabel=cc.find("content/label",this.node).getComponent(cc.Label),this.killLabel=cc.find("content/monster/labelBg/label",this.node).getComponent(cc.Label),this.monsterSpine=cc.find("content/monster/spine",this.node).getComponent("sp.Skeleton")},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.SHOW_AD_OVER_YEAR_MONSTER,function(){return e.showAdOver()}),this.registerListener(i.GameEventType.REFRESH_YEAR_MONSTER_PAGE,function(){return e.updateYearMonsterPage()})},updateYearMonsterPage:function(){this.initData()},initData:function(){var e=i.timeUtil.getTime(),t=i.player.newYearModule.getActivityEndTime();this.overTime=Math.max(0,t-e)/1e3,this.curTime=0,this.ruleLayoutNode.active=!1,this.touchNode.active=!1,this.updateButtonShow(),this.updateRewardShow(),i.lang.updateLabelString(this.challengeLeftTimeLabel,[this.maxEnterNum-this.curEnterNum]),this.updateOverTime(),i.lang.updateLabelString(this.killLabel,[this.curKillNum])},showPageBegan:function(){var e=this;i.player.newYearModule.addNewYearTodayShowRed(),this.monsterSpine.node.active=!1;var t=i.constant.SPINE_PATH_ENEMY+"boss8";i.mainScene.getTowerSpineData(t,function(t){t&&(e.monsterSpine.node.active=!0,e.monsterSpine.skeletonData=t,e.monsterSpine.setAnimation(0,"stand_right",!0),e.monsterSpine.premultipliedAlpha=!0)}),this.initData()},showPageEnded:function(){},updateButtonShow:function(){this.curEnterNum=i.player.newYearModule.getEnterBattleCount();var e=i.templateManager.getGameParamValue("nianInstanceTimes");this.freeEnterNum=e[0],this.adEnterNum=e[1],this.maxEnterNum=this.freeEnterNum+this.adEnterNum,this.curEnterNum>=this.maxEnterNum?(this.adNode.active=!0,this.challengeButton.interactable=!1):(this.challengeButton.interactable=!0,this.curEnterNum<this.freeEnterNum?this.adNode.active=!1:this.adNode.active=!0)},updateRewardShow:function(){var e=i.player.newYearModule.getKillYearMonsterCount();this.curKillNum=e;var t=i.templateManager.getGameParamValue("nianKillNumReward");this.rewardNumList=[];for(var a=0;a<t.length;a++){var n=(l=t[a])[0],o=l[1],s=l[2],r=i.player.newYearModule.isReceiveOver(a),c=n<=e,l=i.player.commonModule.getHangUpReceiveExp(s);s=i.Utils.formatBigNumberForLabel(l),this.rewardLabelList[a].string=s,this.rewardNumList.push({itemId:o,value:l}),i.lang.updateLabelString(this.taskLabelList[a],[n]),r?(this.rewardCheckList[a].active=!0,this.gotNodeList[a].active=!0,this.rewardButtonList[a].node.active=!1,this.canRewardList[a].active=!1,this.noRewardList[a].active=!1):c?(this.rewardCheckList[a].active=!1,this.gotNodeList[a].active=!1,this.rewardButtonList[a].node.active=!0,this.rewardButtonList[a].interactable=!0,this.canRewardList[a].active=!0,this.noRewardList[a].active=!1):(this.rewardCheckList[a].active=!1,this.gotNodeList[a].active=!1,this.rewardButtonList[a].node.active=!0,this.rewardButtonList[a].interactable=!1,this.canRewardList[a].active=!1,this.noRewardList[a].active=!0)}},updateOverTime:function(){var e,t=this.overTime;0<t&&(e=Math.floor(t/86400),i.lang.updateLabelString(this.timeLabel,[e,i.timeUtil.secondFormat(t%86400,!0)]))},onClickRule:function(){this.ruleLayoutNode.active=!0,this.ruleLayoutNode.scale=0;var e=cc.scaleTo(.1,1.1),t=cc.scaleTo(.1,1);t=cc.sequence(e,t),this.ruleLayoutNode.stopAllActions(),this.ruleLayoutNode.runAction(t),this.touchNode.active=!0,i.lang.updateLabelString(this.ruleLabel,[this.freeEnterNum+this.adEnterNum,this.freeEnterNum,this.adEnterNum])},onClickTouchNode:function(){this.ruleLayoutNode.active=!1,this.touchNode.active=!1},onClickChallenge:function(){i.Logger.debug("onClickChallenge"),this.curEnterNum<this.freeEnterNum?this.enterBattle():i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,i.GameEventType.SHOW_AD_OVER_YEAR_MONSTER)},enterBattle:function(){this.closePage(),i.player.newYearModule.addEnterBattleCount(),this.instanceDataList=i.templateManager.getInstanceListByChapterId(i.constant.YEAR_MONSTER_CHAPTER_ID);var e=i.Utils.getRandomInt(1,this.instanceDataList.length);i.Logger.debug("enterBattle instance = "+e),i.gameScene.gotoBattleScene(i.constant.YEAR_MONSTER_CHAPTER_ID,e)},onClickReward1:function(){this.getReward(0)},onClickReward2:function(){this.getReward(1)},onClickReward3:function(){this.getReward(2)},onClickReward4:function(){this.getReward(3)},getReward:function(e){var t=i.templateManager.getGameParamValue("nianKillNumReward")[e],a=i.player.newYearModule.isReceiveOver(e);t=t[0],t=this.curKillNum>=t,!a&&t&&(i.Logger.debug("getReward index = "+e),t=(a=this.rewardNumList[e]).itemId,a=a.value,i.player.itemModule.dropItem(t,a,!0,i.constant.ITEM_ADD_SOURCE_YEAR_MONSTER),i.player.newYearModule.saveReceiveOver(e),this.updateRewardShow())},showAdOver:function(){i.Logger.debug("showAdOver"),this.enterBattle()},onClickClose:function(){i.Logger.debug("onClickClose"),this.closePage()},closePageEnded:function(){i.eventBus.dispatchEvent(i.GameEventType.YEAR_MONSTER_UPDATE_RED)},update:function(e){this.overTime-=e,this.curTime+=e,1<=this.curTime&&(--this.curTime,this.updateOverTime())}}),cc._RF.pop()},{}],YearMonsterResultPage:[function(e,t){"use strict";cc._RF.push(t,"f5c7fiZVItHQKloc9xnVWbo","YearMonsterResultPage");var i=e("Aft");cc.Class({extends:i.BasePage,properties:{commonItemRenderPrefab:{default:null,type:cc.Prefab},commonTipsPrefab:{default:null,type:cc.Prefab}},registerGameListener:function(){var e=this;this.registerListener(i.GameEventType.SHOW_AD_OVER_GAME_RESULT_SUCCESS,function(){return e.showAdOver()}),this.registerListener(i.GameEventType.SHOW_AD_OVER_GAME_RESULT_FAIL,function(){return e.showAdOver()})},onLoadPage:function(){this.winNode=cc.find("winNode",this.node),this.loseNode=cc.find("loseNode",this.node),this.rewardNode=cc.find("rewardNode",this.node),this.tipsNode=cc.find("tipsNode",this.node),this.rewardLayout=cc.find("rewardNode/rewardLayout",this.node),this.rewardChildrenList=[],this.adButtonNode=cc.find("adButton",this.node),this.adButtonRatioLabel=cc.find("background/layout/label",this.adButtonNode).getComponent(cc.Label),this.backLabelNode=cc.find("label",this.node),this.nodeAnimation=this.node.getComponent(cc.Animation),this.origanPosY=this.rewardNode.y,this.shareNode=cc.find("shareButton",this.node),this.killMonsterLabel=cc.find("killMonstersNumber/label",this.node).getComponent(cc.Label)},showPageBegan:function(){var e=this;i.battleScene.curChapter==i.constant.YEAR_MONSTER_CHAPTER_ID&&0<i.battleScene.killMonsterCount&&i.player.newYearModule.addKillYearMonsterCount(i.battleScene.killMonsterCount);var t=i.player.newYearModule.getKillYearMonsterCount();i.lang.updateLabelString(this.killMonsterLabel,[t]),i.battleScene.revertBattleSpeedPercent(),this.notShowDone=!0,this.itemTipsNode&&(this.itemTipsNode.active=!1),i.gameScene.removeAllBubble(),this.endBattleTime=i.timeUtil.getTime(),i.gameScene.closeAllBattlePage(),i.battleScene.cleanTryHeros(),i.battleScene.dealTaskCacheData(),this.canClickBtn=!0,this.adButtonNode.active=!1,this.backLabelNode.active=!1,this._isWin=this.data.isWin,this._star=this.data.star,this._rewardList=this.data.rewards,this._isFirst=!1,this._isBack=this.data.isBack,this.addReward(),this.winNode.active=this._isWin,this.loseNode.active=!this._isWin,this.tipsNode.active=!1,this.shareNode.active=!1,t="GameResultPage_lose_newYear";var a,n="GameResultPage_lose_stand_newYear";this._isWin?(t="GameResultPage_win_newYear",n="GameResultPage_win_stand_newYear",i.soundsUtil.playSoundEffect("game_win")):i.soundsUtil.playSoundEffect("game_lose"),this.rewardNode.y=this.origanPosY,this.nodeAnimation.stop(),this.nodeAnimation.setCurrentTime(0),this.nodeAnimation.play(t),this.nodeAnimation.on("finished",function(){e.nodeAnimation.play(n),e._isWin,e.adButtonNode.active=!0,e.backLabelNode.active=!0,e.notShowDone=!1},this),this.resultAdRate=i.templateManager.getGameParamValue("nianInstanceRewardRate"),i.lang.updateLabelString(this.adButtonRatioLabel,[this.resultAdRate]),this.updateRewardNode(),i.player.taskModule.onNewYearTaskEvent(i.constant.NEW_YEAR_TASK_TYPE_BATTLE_MONSTER,i.battleScene.killMonsterCount),Math.floor((this.endBattleTime-i.battleScene.enterBattleTime)/1e3),t=i.player.instanceModule.getTempInstanceId(i.battleScene.curChapter,i.battleScene.curInstance),this._isWin?(i.BI.onEvent(i.biConstant.EVENT_TYPE_BATTLE,i.biConstant.EVENT_ID_BATTLE_SUCCESS,t),i.tdManager.onMissionCompleted(i.battleScene.instanceData.id)):(i.BI.onEvent(i.biConstant.EVENT_TYPE_BATTLE,i.biConstant.EVENT_ID_BATTLE_FAIL,t),i.tdManager.onMissionFailed(i.battleScene.instanceData.id)),i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_MONSTER_RESULT,i.player.newYearModule.getEnterBattleCount()),i.battleScene.sendBattleDoneInfo(this._isWin,this._star),i.player.taskModule.onTaskEvent(i.constant.TASK_TYPE_HERO_BATTLE,1,i.player.heroModule.getBattlePioneerHero()),i.player.taskModule.onTaskEvent(i.constant.TASK_TYPE_HERO_BATTLE,1,i.player.heroModule.getBattleAdPioneerHero()),i.player.commonModule.addPioneerHeroBattleCount(i.player.heroModule.getBattlePioneerHero()),i.player.commonModule.addPioneerHeroBattleCount(i.player.heroModule.getBattleAdPioneerHero()),t=i.battleScene.curChapter+"-"+i.battleScene.curInstance+"-"+i.battleScene.killMonsterCount,i.BI.onEvent(i.biConstant.EVENT_TYPE_COUNT,i.biConstant.EVENT_ID_COUNT_KILL_MONSTER,t),t=i.battleScene.curChapter+"-"+i.battleScene.curInstance+"-"+i.battleScene.showAdCount,i.BI.onEvent(i.biConstant.EVENT_TYPE_COUNT,i.biConstant.EVENT_ID_COUNT_MONSTER_AD,t),i.BI.onEvent(i.biConstant.EVENT_TYPE_OPEN_PAGE,i.biConstant.EVENT_ID_OPEN_MONSTER_RESULT,i.player.newYearModule.getEnterBattleCount()),(1!==i.battleScene.curChapter||1!==i.battleScene.curInstance)&&i.debugControl&&i.debugControl.isQuitWin()&&0<(a=i.player.guideModule.getOtherGuideType())&&(i.guideManager.stopGuide(!0),i.guideManager.setOtherGuideFinished(a),i.guideManager.setOtherGuideRecord(a))},showPageEnded:function(){i.player.taskModule.dealCacheBattleMap()},showTips:function(e,t,i){this.notShowDone||(this.itemTipsNode||(this.itemTipsNode=cc.instantiate(this.commonTipsPrefab),this.itemTipsObj=this.itemTipsNode.getComponent("CommonSkillTipsItemRender"),this.node.addChild(this.itemTipsNode)),this.tipsNode.active=!0,this.showTipsId=e,this.itemTipsObj.showNode(e,t,i))},hideTips:function(){this.tipsNode.active=!1,this.showTipsId=null,this.itemTipsObj&&this.itemTipsObj.hideNode()},addReward:function(){var e=i.battleScene.getWaveRatio();this._isWin&&(e=1),e<(a=i.templateManager.getGameParamValue("instanceRewardMinNum")/1e4)&&(e=a);var t=i.battleScene.getStartBuffs(),a=i.templateManager.getGameParamValue("nianInstanceReward")[1];a=i.player.commonModule.getHangUpReceiveCoin(a),0<(e=parseInt(a*e))&&(t.hasOwnProperty(i.constant.START_BUFF_GOLD)&&(e*=1+t[i.constant.START_BUFF_GOLD]/1e4,e=parseInt(e)),this._rewardList.push({itemId:i.constant.COIN_TYPE_SILVER,number:e,isFirst:this._isFirst})),i.player.instanceModule.addRewardCache(this._rewardList)},updateRewardNode:function(){var e;this.rewardChildrenList.length<this._rewardList.length&&(e=this._rewardList.length-this.rewardChildrenList.length,this.buildRewardItem(e));for(var t=0;t<this._rewardList.length;t++){var i=this.rewardChildrenList[t];i.initData(this._rewardList[t].itemId,this._rewardList[t].number,this._rewardList[t].isFirst),i.node.scale=.9,i.node.active=!0}},buildRewardItem:function(e){for(var t=0;t<e;t++){var i=cc.instantiate(this.commonItemRenderPrefab);this.rewardLayout.addChild(i),i.active=!1,((i=i.getComponent("CommonItemRender")).host=this).rewardChildrenList.push(i)}},hideAllRewardChildren:function(){for(var e=0;e<this.rewardChildrenList.length;e++)this.rewardChildrenList[e].node.active=!1},onClickBack:function(e){if(this.canClickBtn){this.hideTips(),i.soundsUtil.playSoundEffect("common_button_click"),this.canClickBtn=!1,this.closePage(),this.hideAllRewardChildren();var t=null;switch(e){case i.constant.LOSE_JUMP_HERO_UP:case i.constant.LOSE_JUMP_HERO_CHANGE:t=i.constant.MAIN_PAGE_TAG_HERO;break;case i.constant.LOSE_JUMP_TOWER_UP:case i.constant.LOSE_JUMP_TOWER_CHANGE:t=i.constant.MAIN_PAGE_TAG_TOWER;break;case i.constant.LOSE_JUMP_SKILL:t=i.constant.MAIN_PAGE_TAG_SKILL}i.gameScene.gotoMainScene(!1,t)}},onClickAd:function(){this.canClickBtn&&(this.hideTips(),i.soundsUtil.playSoundEffect("common_button_click"),this._isWin?i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,i.GameEventType.SHOW_AD_OVER_GAME_RESULT_SUCCESS):i.eventBus.dispatchEvent(i.GameEventType.SHOW_AD,i.GameEventType.SHOW_AD_OVER_GAME_RESULT_FAIL))},showAdOver:function(){if(this.node.active){for(var e=[],t=this.resultAdRate-1,a=0;a<this._rewardList.length;a++){var n,o=this._rewardList[a];o.itemId!=i.constant.COIN_TYPE_HERO_EXP&&o.itemId!=i.constant.COIN_TYPE_SILVER||(n=o.number*t,e.push({itemId:o.itemId,number:n,isFirst:o.isFirst}))}i.player.instanceModule.addRewardCache(e),this.closePage(),this.hideAllRewardChildren(),i.gameScene.gotoMainScene(),i.player.taskModule.onTaskEvent(i.constant.TASK_TYPE_RESULT_AD_DOUBLE,1)}},closePageBegan:function(){i.battleScene.showOverBoxPage=!1,i.battleScene.gameBattleUIObj.setBoxNodeActive(!0),this.itemTipsNode&&(this.itemTipsNode.active=!1)},onClickShare:function(){i.player.commonModule.addShareStartCount(i.constant.SHARE_TYPE_WIN),i.nativeManager.weChatShareMiniProgram()},update:function(){}}),cc._RF.pop()},{}],algo:[function(e,t){"use strict";cc._RF.push(t,"dafaaItHYtBjIp4lKgogmd7","algo");var i=t,a={cipher:function(e,t){for(var i=t.length/4-1,n=[[],[],[],[]],o=0;o<16;o++)n[o%4][Math.floor(o/4)]=e[o];n=a.addRoundKey(n,t,0,4);for(var s=1;s<i;s++)n=a.subBytes(n,4),n=a.shiftRows(n,4),n=a.mixColumns(n,4),n=a.addRoundKey(n,t,s,4);n=a.subBytes(n,4),n=a.shiftRows(n,4),n=a.addRoundKey(n,t,i,4);var r=new Array(16);for(o=0;o<16;o++)r[o]=n[o%4][Math.floor(o/4)];return r},keyExpansion:function(e){for(var t=e.length/4,i=6+t,n=new Array(4*(1+i)),o=new Array(4),s=0;s<t;s++){var r=[e[4*s],e[4*s+1],e[4*s+2],e[4*s+3]];n[s]=r}for(s=t;s<4*(1+i);s++){n[s]=new Array(4);for(var c=0;c<4;c++)o[c]=n[s-1][c];if(s%t==0)for(o=a.subWord(a.rotWord(o)),c=0;c<4;c++)o[c]^=a.rCon[s/t][c];else 6<t&&s%t==4&&(o=a.subWord(o));for(c=0;c<4;c++)n[s][c]=n[s-t][c]^o[c]}return n},subBytes:function(e,t){for(var i=0;i<4;i++)for(var n=0;n<t;n++)e[i][n]=a.sBox[e[i][n]];return e},shiftRows:function(e,t){for(var i=new Array(4),a=1;a<4;a++){for(var n=0;n<4;n++)i[n]=e[a][(n+a)%t];for(n=0;n<4;n++)e[a][n]=i[n]}return e},mixColumns:function(e){for(var t=0;t<4;t++){for(var i=new Array(4),a=new Array(4),n=0;n<4;n++)i[n]=e[n][t],a[n]=128&e[n][t]?e[n][t]<<1^283:e[n][t]<<1;e[0][t]=a[0]^i[1]^a[1]^i[2]^i[3],e[1][t]=i[0]^a[1]^i[2]^a[2]^i[3],e[2][t]=i[0]^i[1]^a[2]^i[3]^a[3],e[3][t]=i[0]^a[0]^i[1]^i[2]^a[3]}return e},addRoundKey:function(e,t,i,a){for(var n=0;n<4;n++)for(var o=0;o<a;o++)e[n][o]^=t[4*i+o][n];return e},subWord:function(e){for(var t=0;t<4;t++)e[t]=a.sBox[e[t]];return e},rotWord:function(e){for(var t=e[0],i=0;i<3;i++)e[i]=e[i+1];return e[3]=t,e},sBox:[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],rCon:[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]]};void 0!==i&&i.exports&&(i.exports=a),"function"==typeof define&&define.amd&&define([],function(){return a}),cc._RF.pop()},{}],"base64-js":[function(e,t,i){"use strict";cc._RF.push(t,"66761c2gg1COJlBiA7QC7GW","base64-js");var a=i;a.byteLength=function(e){var t;return 3*((e=(t=d(e))[0])+(t=t[1]))/4-t},a.toByteArray=function(e){for(var t,i=(a=d(e))[0],a=a[1],n=new s(3*(i+a)/4-a),r=0,c=0<a?i-4:i,l=0;l<c;l+=4)t=o[e.charCodeAt(l)]<<18|o[e.charCodeAt(l+1)]<<12|o[e.charCodeAt(l+2)]<<6|o[e.charCodeAt(l+3)],n[r++]=t>>16&255,n[r++]=t>>8&255,n[r++]=255&t;return 2===a&&(t=o[e.charCodeAt(l)]<<2|o[e.charCodeAt(l+1)]>>4,n[r++]=255&t),1===a&&(t=o[e.charCodeAt(l)]<<10|o[e.charCodeAt(l+1)]<<4|o[e.charCodeAt(l+2)]>>2,n[r++]=t>>8&255,n[r++]=255&t),n},a.fromByteArray=function(e){for(var t,i=e.length,a=i%3,o=[],s=0,r=i-a;s<r;s+=16383)o.push(function(e,t,i){for(var a,o=[],s=t;s<i;s+=3)a=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(function(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[63&e]}(a));return o.join("")}(e,s,r<s+16383?r:s+16383));return 1==a?(t=e[i-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2==a&&(t=(e[i-2]<<8)+e[i-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),o.join("")};for(var n=[],o=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,l=r.length;c<l;++c)n[c]=r[c],o[r.charCodeAt(c)]=c;function d(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");return[e=-1===(e=e.indexOf("="))?t:e,e===t?0:4-e%4]}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63,cc._RF.pop()},{}],"bignumber.min":[function(e,t){"use strict";cc._RF.push(t,"e78e4UqqxhMSbl+L3VvHsqJ","bignumber.min");var i,a,n,o,s,r,c,l,d,h,u=t;function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e){var t=0|e;return 0<e||e===t?t:t-1}function _(e){for(var t,i,a=1,n=e.length,o=e[0]+"";a<n;){for(i=14-(t=e[a++]+"").length;i--;t="0"+t);o+=t}for(n=o.length;48===o.charCodeAt(--n););return o.slice(0,n+1||1)}function m(e,t){var i,a=e.c,n=t.c,o=e.s,s=t.s,r=e.e;if(e=t.e,!o||!s)return null;if(i=a&&!a[0],t=n&&!n[0],i||t)return i?t?0:-s:o;if(o!=s)return o;if(i=o<0,t=r==e,!a||!n)return t?0:!a^i?1:-1;if(!t)return e<r^i?1:-1;for(s=(r=a.length)<(e=n.length)?r:e,o=0;o<s;o++)if(a[o]!=n[o])return a[o]>n[o]^i?1:-1;return r==e?0:e<r^i?1:-1}function E(e,t,i,a){if(e<t||i<e||e!==s(e))throw Error(r+(a||"Argument")+("number"==typeof e?e<t||i<e?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function T(e){var t=e.c.length-1;return g(e.e/14)==t&&e.c[t]%2!=0}function f(e,t){return(1<e.length?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function S(e,t,i){var a,n;if(t<0){for(n=i+".";++t;n+=i);e=n+e}else if(++t>(a=e.length)){for(n=i,t-=a;--t;n+=i);e+=n}else t<a&&(e=e.slice(0,t)+"."+e.slice(t));return e}i=void 0,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,o=Math.ceil,s=Math.floor,c=(r="[BigNumber Error] ")+"Number primitive has more than 15 significant digits: ",l=1e14,d=9007199254740991,h=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],(a=function e(t){var i,a,u,A,I,y,P,v,L,N,b,R=Y.prototype={constructor:Y,toString:null,valueOf:null},C=new Y(1),D=20,k=4,O=-7,w=21,M=-1e7,B=1e7,H=!1,G=1,U=0,x={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xa0",suffix:""},F="0123456789abcdefghijklmnopqrstuvwxyz";function Y(e,t){var i,o,r,l,h,p,g,_,m=this;if(!(m instanceof Y))return new Y(e,t);if(null==t){if(e&&!0===e._isBigNumber)return m.s=e.s,void(!e.c||e.e>B?m.c=m.e=null:e.e<M?m.c=[m.e=0]:(m.e=e.e,m.c=e.c.slice()));if((p="number"==typeof e)&&0*e==0){if(m.s=1/e<0?(e=-e,-1):1,e===~~e){for(l=0,h=e;10<=h;h/=10,l++);return void(m.c=B<l?m.e=null:(m.e=l,[e]))}_=String(e)}else{if(!n.test(_=String(e)))return u(m,_,p);m.s=45==_.charCodeAt(0)?(_=_.slice(1),-1):1}0<(h=(_=-1<(l=_.indexOf("."))?_.replace(".",""):_).search(/e/i))?(l<0&&(l=h),l+=+_.slice(h+1),_=_.substring(0,h)):l<0&&(l=_.length)}else{if(E(t,2,F.length,"Base"),10==t)return j(m=new Y(e),D+m.e+1,k);if(_=String(e),p="number"==typeof e){if(0*e!=0)return u(m,_,p,t);if(m.s=1/e<0?(_=_.slice(1),-1):1,Y.DEBUG&&15<_.replace(/^0\.0*|\./,"").length)throw Error(c+e)}else m.s=45===_.charCodeAt(0)?(_=_.slice(1),-1):1;for(i=F.slice(0,t),l=h=0,g=_.length;h<g;h++)if(i.indexOf(o=_.charAt(h))<0){if("."==o){if(l<h){l=g;continue}}else if(!r&&(_==_.toUpperCase()&&(_=_.toLowerCase())||_==_.toLowerCase()&&(_=_.toUpperCase()))){r=!0,h=-1,l=0;continue}return u(m,String(e),p,t)}p=!1,-1<(l=(_=a(_,t,10,m.s)).indexOf("."))?_=_.replace(".",""):l=_.length}for(h=0;48===_.charCodeAt(h);h++);for(g=_.length;48===_.charCodeAt(--g););if(_=_.slice(h,++g)){if(g-=h,p&&Y.DEBUG&&15<g&&(d<e||e!==s(e)))throw Error(c+m.s*e);if((l=l-h-1)>B)m.c=m.e=null;else if(l<M)m.c=[m.e=0];else{if(m.e=l,m.c=[],h=(l+1)%14,l<0&&(h+=14),h<g){for(h&&m.c.push(+_.slice(0,h)),g-=14;h<g;)m.c.push(+_.slice(h,h+=14));h=14-(_=_.slice(h)).length}else h-=g;for(;h--;_+="0");m.c.push(+_)}}else m.c=[m.e=0]}function V(e,t,i,a){var n,o,s,r;if(null==i?i=k:E(i,0,8),!e.c)return e.toString();if(n=e.c[0],o=e.e,null==t)r=_(e.c),r=1==a||2==a&&(o<=O||w<=o)?f(r,o):S(r,o,"0");else if(i=(e=j(new Y(e),t,i)).e,s=(r=_(e.c)).length,1==a||2==a&&(t<=i||i<=O)){for(;s<t;r+="0",s++);r=f(r,i)}else if(t-=o,r=S(r,i,"0"),s<i+1){if(0<--t)for(r+=".";t--;r+="0");}else if(0<(t+=i-s))for(i+1==s&&(r+=".");t--;r+="0");return e.s<0&&n?"-"+r:r}function W(e,t){for(var i,a=1,n=new Y(e[0]);a<e.length;a++){if(!(i=new Y(e[a])).s){n=i;break}t.call(n,i)&&(n=i)}return n}function K(e,t,i){for(var a=1,n=t.length;!t[--n];t.pop());for(n=t[0];10<=n;n/=10,a++);return(i=a+14*i-1)>B?e.c=e.e=null:e.c=i<M?[e.e=0]:(e.e=i,t),e}function j(e,t,i,a){var n,r,c,d,u,p,g,_=e.c,m=h;if(_){e:{for(n=1,d=_[0];10<=d;d/=10,n++);if((r=t-n)<0)r+=14,c=t,g=(u=_[p=0])/m[n-c-1]%10|0;else if((p=o((r+1)/14))>=_.length){if(!a)break e;for(;_.length<=p;_.push(0));u=g=0,c=(r%=14)-14+(n=1)}else{for(u=d=_[p],n=1;10<=d;d/=10,n++);g=(c=(r%=14)-14+n)<0?0:u/m[n-c-1]%10|0}if(a=a||t<0||null!=_[p+1]||(c<0?u:u%m[n-c-1]),a=i<4?(g||a)&&(0==i||i==(e.s<0?3:2)):5<g||5==g&&(4==i||a||6==i&&(0<r?0<c?u/m[n-c]:0:_[p-1])%10&1||i==(e.s<0?8:7)),t<1||!_[0])return _.length=0,a?(t-=e.e+1,_[0]=m[(14-t%14)%14],e.e=-t||0):_[0]=e.e=0,e;if(0==r?(_.length=p,d=1,p--):(_.length=p+1,d=m[14-r],_[p]=0<c?s(u/m[n-c]%m[c])*d:0),a)for(;;){if(0==p){for(r=1,c=_[0];10<=c;c/=10,r++);for(c=_[0]+=d,d=1;10<=c;c/=10,d++);r!=d&&(e.e++,_[0]==l&&(_[0]=1));break}if(_[p]+=d,_[p]!=l)break;_[p--]=0,d=1}for(r=_.length;0===_[--r];_.pop());}e.e>B?e.c=e.e=null:e.e<M&&(e.c=[e.e=0])}return e}function Q(e){var t,i=e.e;return null===i?e.toString():(t=_(e.c),t=i<=O||w<=i?f(t,i):S(t,i,"0"),e.s<0?"-"+t:t)}return Y.clone=e,Y.ROUND_UP=0,Y.ROUND_DOWN=1,Y.ROUND_CEIL=2,Y.ROUND_FLOOR=3,Y.ROUND_HALF_UP=4,Y.ROUND_HALF_DOWN=5,Y.ROUND_HALF_EVEN=6,Y.ROUND_HALF_CEIL=7,Y.ROUND_HALF_FLOOR=8,Y.EUCLID=9,Y.config=Y.set=function(e){var t,i;if(null!=e){if("object"!=p(e))throw Error(r+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(E(i=e[t],0,1e9,t),D=i),e.hasOwnProperty(t="ROUNDING_MODE")&&(E(i=e[t],0,8,t),k=i),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((i=e[t])&&i.pop?(E(i[0],-1e9,0,t),E(i[1],0,1e9,t),O=i[0],w=i[1]):(E(i,-1e9,1e9,t),O=-(w=i<0?-i:i))),e.hasOwnProperty(t="RANGE"))if((i=e[t])&&i.pop)E(i[0],-1e9,-1,t),E(i[1],1,1e9,t),M=i[0],B=i[1];else{if(E(i,-1e9,1e9,t),!i)throw Error(r+t+" cannot be zero: "+i);M=-(B=i<0?-i:i)}if(e.hasOwnProperty(t="CRYPTO")){if((i=e[t])!==!!i)throw Error(r+t+" not true or false: "+i);if(i){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw H=!i,Error(r+"crypto unavailable");H=i}else H=i}if(e.hasOwnProperty(t="MODULO_MODE")&&(E(i=e[t],0,9,t),G=i),e.hasOwnProperty(t="POW_PRECISION")&&(E(i=e[t],0,1e9,t),U=i),e.hasOwnProperty(t="FORMAT")){if("object"!=p(i=e[t]))throw Error(r+t+" not an object: "+i);x=i}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(i=e[t])||/^.$|[+-.\s]|(.).*\1/.test(i))throw Error(r+t+" invalid: "+i);F=i}}return{DECIMAL_PLACES:D,ROUNDING_MODE:k,EXPONENTIAL_AT:[O,w],RANGE:[M,B],CRYPTO:H,MODULO_MODE:G,POW_PRECISION:U,FORMAT:x,ALPHABET:F}},Y.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!Y.DEBUG)return!0;var t,i,a=e.c,n=e.e,o=e.s;e:if("[object Array]"=={}.toString.call(a)){if((1===o||-1===o)&&-1e9<=n&&n<=1e9&&n===s(n))if(0!==a[0]){if((t=(n+1)%14)<1&&(t+=14),String(a[0]).length==t){for(t=0;t<a.length;t++)if((i=a[t])<0||l<=i||i!==s(i))break e;if(0!==i)return!0}}else if(0===n&&1===a.length)return!0}else if(null===a&&null===n&&(null===o||1===o||-1===o))return!0;throw Error(r+"Invalid BigNumber: "+e)},Y.maximum=Y.max=function(){return W(arguments,R.lt)},Y.minimum=Y.min=function(){return W(arguments,R.gt)},Y.random=(A=9007199254740992,I=Math.random()*A&2097151?function(){return s(Math.random()*A)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,i,a,n,c,l=0,d=[],u=new Y(C);if(null==e?e=D:E(e,0,1e9),n=o(e/14),H)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(n*=2));l<n;)9e15<=(c=131072*t[l]+(t[l+1]>>>11))?(i=crypto.getRandomValues(new Uint32Array(2)),t[l]=i[0],t[l+1]=i[1]):(d.push(c%1e14),l+=2);l=n/2}else{if(!crypto.randomBytes)throw H=!1,Error(r+"crypto unavailable");for(t=crypto.randomBytes(n*=7);l<n;)9e15<=(c=281474976710656*(31&t[l])+1099511627776*t[l+1]+4294967296*t[l+2]+16777216*t[l+3]+(t[l+4]<<16)+(t[l+5]<<8)+t[l+6])?crypto.randomBytes(7).copy(t,l):(d.push(c%1e14),l+=7);l=n/7}if(!H)for(;l<n;)(c=I())<9e15&&(d[l++]=c%1e14);for(e%=14,(n=d[--l])&&e&&(d[l]=s(n/(c=h[14-e]))*c);0===d[l];d.pop(),l--);if(l<0)d=[a=0];else{for(a=-1;0===d[0];d.splice(0,1),a-=14);for(l=1,c=d[0];10<=c;c/=10,l++);l<14&&(a-=14-l)}return u.e=a,u.c=d,u}),Y.sum=function(){for(var e=1,t=arguments,i=new Y(t[0]);e<t.length;)i=i.plus(t[e++]);return i},b="0123456789",a=function(e,t,a,n,o){var s,r,c,l,d,h,u,p,g=e.indexOf("."),m=D,E=k;for(0<=g&&(l=U,U=0,e=e.replace(".",""),h=(p=new Y(t)).pow(e.length-g),U=l,p.c=z(S(_(h.c),h.e,"0"),10,a,b),p.e=p.c.length),c=l=(u=z(e,t,a,o?(s=F,b):(s=b,F))).length;0==u[--l];u.pop());if(!u[0])return s.charAt(0);if(g<0?--c:(h.c=u,h.e=c,h.s=n,u=(h=i(h,p,m,E,a)).c,d=h.r,c=h.e),g=u[r=c+m+1],l=a/2,d=d||r<0||null!=u[r+1],d=E<4?(null!=g||d)&&(0==E||E==(h.s<0?3:2)):l<g||g==l&&(4==E||d||6==E&&1&u[r-1]||E==(h.s<0?8:7)),r<1||!u[0])e=d?S(s.charAt(1),-m,s.charAt(0)):s.charAt(0);else{if(u.length=r,d)for(--a;++u[--r]>a;)u[r]=0,r||(++c,u=[1].concat(u));for(l=u.length;!u[--l];);for(g=0,e="";g<=l;e+=s.charAt(u[g++]));e=S(e,c,s.charAt(0))}return e},i=function(e,t,i,a,n){var o,r,c,d,h,u,p,_,m,E,T,f,S,A,I,y,P,v=e.s==t.s?1:-1,L=e.c,N=t.c;if(!(L&&L[0]&&N&&N[0]))return new Y(e.s&&t.s&&(L?!N||L[0]!=N[0]:N)?L&&0==L[0]||!N?0*v:v/0:NaN);for(m=(_=new Y(v)).c=[],v=i+(r=e.e-t.e)+1,n||(n=l,r=g(e.e/14)-g(t.e/14),v=v/14|0),c=0;N[c]==(L[c]||0);c++);if(N[c]>(L[c]||0)&&r--,v<0)m.push(1),d=!0;else{for(A=L.length,y=N.length,v+=2,1<(h=s(n/(N[c=0]+1)))&&(N=q(N,h,n),L=q(L,h,n),y=N.length,A=L.length),S=y,T=(E=L.slice(0,y)).length;T<y;E[T++]=0);P=N.slice(),P=[0].concat(P),I=N[0],N[1]>=n/2&&I++;do{if(h=0,(o=J(N,E,y,T))<0){if(f=E[0],y!=T&&(f=f*n+(E[1]||0)),1<(h=s(f/I)))for(p=(u=q(N,h=n<=h?n-1:h,n)).length,T=E.length;1==J(u,E,p,T);)h--,X(u,y<p?P:N,p,n),p=u.length,o=1;else 0==h&&(o=h=1),p=(u=N.slice()).length;if(X(E,u=p<T?[0].concat(u):u,T,n),T=E.length,-1==o)for(;J(N,E,y,T)<1;)h++,X(E,y<T?P:N,T,n),T=E.length}else 0===o&&(h++,E=[0])}while(m[c++]=h,E[0]?E[T++]=L[S]||0:(E=[L[S]],T=1),(S++<A||null!=E[0])&&v--);d=null!=E[0],m[0]||m.splice(0,1)}if(n==l){for(c=1,v=m[0];10<=v;v/=10,c++);j(_,i+(_.e=c+14*r-1)+1,a,d)}else _.e=r,_.r=+d;return _},y=/^(-?)0([xbo])(?=\w[\w.]*$)/i,P=/^([^.]+)\.$/,v=/^\.([^.]+)$/,L=/^-?(Infinity|NaN)$/,N=/^\s*\+(?=[\w.])|^\s+|\s+$/g,u=function(e,t,i,a){var n,o=i?t:t.replace(N,"");if(L.test(o))e.s=isNaN(o)?null:o<0?-1:1;else{if(!i&&(o=o.replace(y,function(e,t,i){return n="x"==(i=i.toLowerCase())?16:"b"==i?2:8,a&&a!=n?e:t}),a&&(n=a,o=o.replace(P,"$1").replace(v,"0.$1")),t!=o))return new Y(o,n);if(Y.DEBUG)throw Error(r+"Not a"+(a?" base "+a:"")+" number: "+t);e.s=null}e.c=e.e=null},R.absoluteValue=R.abs=function(){var e=new Y(this);return e.s<0&&(e.s=1),e},R.comparedTo=function(e,t){return m(this,new Y(e,t))},R.decimalPlaces=R.dp=function(e,t){var i,a;if(null!=e)return E(e,0,1e9),null==t?t=k:E(t,0,8),j(new Y(this),e+this.e+1,t);if(!(t=this.c))return null;if(i=14*((a=t.length-1)-g(this.e/14)),a=t[a])for(;a%10==0;a/=10,i--);return i<0?0:i},R.dividedBy=R.div=function(e,t){return i(this,new Y(e,t),D,k)},R.dividedToIntegerBy=R.idiv=function(e,t){return i(this,new Y(e,t),0,1)},R.exponentiatedBy=R.pow=function(e,t){var i,a,n,c,l,d,h,u,p=this;if((e=new Y(e)).c&&!e.isInteger())throw Error(r+"Exponent not an integer: "+Q(e));if(null!=t&&(t=new Y(t)),l=14<e.e,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!e.c||!e.c[0])return u=new Y(Math.pow(+Q(p),l?2-T(e):+Q(e))),t?u.mod(t):u;if(d=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new Y(NaN);(a=!d&&p.isInteger()&&t.isInteger())&&(p=p.mod(t))}else{if(9<e.e&&(0<p.e||p.e<-1||(0==p.e?1<p.c[0]||l&&24e7<=p.c[1]:p.c[0]<8e13||l&&p.c[0]<=9999975e7)))return c=p.s<0&&T(e)?-0:0,-1<p.e&&(c=1/c),new Y(d?1/c:c);U&&(c=o(U/14+2))}for(h=l?(i=new Y(.5),d&&(e.s=1),T(e)):(n=Math.abs(+Q(e)))%2,u=new Y(C);;){if(h){if(!(u=u.times(p)).c)break;c?u.c.length>c&&(u.c.length=c):a&&(u=u.mod(t))}if(n){if(0===(n=s(n/2)))break;h=n%2}else if(j(e=e.times(i),e.e+1,1),14<e.e)h=T(e);else{if(0==(n=+Q(e)))break;h=n%2}p=p.times(p),c?p.c&&p.c.length>c&&(p.c.length=c):a&&(p=p.mod(t))}return a?u:(d&&(u=C.div(u)),t?u.mod(t):c?j(u,U,k,void 0):u)},R.integerValue=function(e){var t=new Y(this);return null==e?e=k:E(e,0,8),j(t,t.e+1,e)},R.isEqualTo=R.eq=function(e,t){return 0===m(this,new Y(e,t))},R.isFinite=function(){return!!this.c},R.isGreaterThan=R.gt=function(e,t){return 0<m(this,new Y(e,t))},R.isGreaterThanOrEqualTo=R.gte=function(e,t){return 1===(t=m(this,new Y(e,t)))||0===t},R.isInteger=function(){return!!this.c&&g(this.e/14)>this.c.length-2},R.isLessThan=R.lt=function(e,t){return m(this,new Y(e,t))<0},R.isLessThanOrEqualTo=R.lte=function(e,t){return-1===(t=m(this,new Y(e,t)))||0===t},R.isNaN=function(){return!this.s},R.isNegative=function(){return this.s<0},R.isPositive=function(){return 0<this.s},R.isZero=function(){return!!this.c&&0==this.c[0]},R.minus=function(e,t){var i,a,n,o,s=this.s;if(t=(e=new Y(e,t)).s,!s||!t)return new Y(NaN);if(s!=t)return e.s=-t,this.plus(e);var r=this.e/14,c=e.e/14,d=this.c,h=e.c;if(!r||!c){if(!d||!h)return d?(e.s=-t,e):new Y(h?this:NaN);if(!d[0]||!h[0])return h[0]?(e.s=-t,e):new Y(d[0]?this:3==k?-0:0)}if(r=g(r),c=g(c),d=d.slice(),s=r-c){for((n=(o=s<0)?(s=-s,d):(c=r,h)).reverse(),t=s;t--;n.push(0));n.reverse()}else for(a=(o=(s=d.length)<(t=h.length))?s:t,s=t=0;t<a;t++)if(d[t]!=h[t]){o=d[t]<h[t];break}if(o&&(n=d,d=h,h=n,e.s=-e.s),0<(t=(a=h.length)-(i=d.length)))for(;t--;d[i++]=0);for(t=l-1;s<a;){if(d[--a]<h[a]){for(i=a;i&&!d[--i];d[i]=t);--d[i],d[a]+=l}d[a]-=h[a]}for(;0==d[0];d.splice(0,1),--c);return d[0]?K(e,d,c):(e.s=3==k?-1:1,e.c=[e.e=0],e)},R.modulo=R.mod=function(e,t){var a;return e=new Y(e,t),!this.c||!e.s||e.c&&!e.c[0]?new Y(NaN):!e.c||this.c&&!this.c[0]?new Y(this):(9==G?(t=e.s,e.s=1,a=i(this,e,0,3),e.s=t,a.s*=t):a=i(this,e,0,G),(e=this.minus(a.times(e))).c[0]||1!=G||(e.s=this.s),e)},R.multipliedBy=R.times=function(e,t){var i,a,n,o,s,r,c,l,d,h,u,p,_=this.c,m=(e=new Y(e,t)).c;if(!(_&&m&&_[0]&&m[0]))return!this.s||!e.s||_&&!_[0]&&!m||m&&!m[0]&&!_?e.c=e.e=e.s=null:(e.s*=this.s,_&&m?(e.c=[0],e.e=0):e.c=e.e=null),e;for(a=g(this.e/14)+g(e.e/14),e.s*=this.s,(c=_.length)<(t=m.length)&&(p=_,_=m,m=p,n=c,c=t,t=n),n=c+t,p=[];n--;p.push(0));for(n=t;0<=--n;){for(h=m[n]%1e7,u=m[n]/1e7|(i=0),o=n+(s=c);n<o;)i=((l=h*(l=_[--s]%1e7)+(r=u*l+(d=_[s]/1e7|0)*h)%1e7*1e7+p[o]+i)/1e14|0)+(r/1e7|0)+u*d,p[o--]=l%1e14;p[o]=i}return i?++a:p.splice(0,1),K(e,p,a)},R.negated=function(){var e=new Y(this);return e.s=-e.s||null,e},R.plus=function(e,t){var i,a=this.s;if(t=(e=new Y(e,t)).s,!a||!t)return new Y(NaN);if(a!=t)return e.s=-t,this.minus(e);var n=this.e/14,o=e.e/14,s=this.c,r=e.c;if(!n||!o){if(!s||!r)return new Y(a/0);if(!s[0]||!r[0])return r[0]?e:new Y(s[0]?this:0*a)}if(n=g(n),o=g(o),s=s.slice(),a=n-o){for((i=0<a?(o=n,r):(a=-a,s)).reverse();a--;i.push(0));i.reverse()}for((a=s.length)-(t=r.length)<0&&(i=r,r=s,s=i,t=a),a=0;t;)a=(s[--t]=s[t]+r[t]+a)/l|0,s[t]=l===s[t]?0:s[t]%l;return a&&(s=[a].concat(s),++o),K(e,s,o)},R.precision=R.sd=function(e,t){var i,a;if(null!=e&&e!==!!e)return E(e,1,1e9),null==t?t=k:E(t,0,8),j(new Y(this),e,t);if(!(t=this.c))return null;if(i=14*(a=t.length-1)+1,a=t[a]){for(;a%10==0;a/=10,i--);for(a=t[0];10<=a;a/=10,i++);}return e&&this.e+1>i?this.e+1:i},R.shiftedBy=function(e){return E(e,-d,d),this.times("1e"+e)},R.squareRoot=R.sqrt=function(){var e,t,a,n,o,s=this.c,r=this.s,c=this.e,l=D+4,d=new Y("0.5");if(1!==r||!s||!s[0])return new Y(!r||r<0&&(!s||s[0])?NaN:s?this:1/0);if((a=0==(r=Math.sqrt(+Q(this)))||r==1/0?(((t=_(s)).length+c)%2==0&&(t+="0"),r=Math.sqrt(+t),c=g((c+1)/2)-(c<0||c%2),new Y(t=r==1/0?"1e"+c:(t=r.toExponential()).slice(0,t.indexOf("e")+1)+c)):new Y(r+"")).c[0])for((r=(c=a.e)+l)<3&&(r=0);;)if(o=a,a=d.times(o.plus(i(this,o,l,1))),_(o.c).slice(0,r)===(t=_(a.c)).slice(0,r)){if(a.e<c&&--r,"9999"!=(t=t.slice(r-3,r+1))&&(n||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(j(a,a.e+D+2,1),e=!a.times(a).eq(this));break}if(!n&&(j(o,o.e+D+2,0),o.times(o).eq(this))){a=o;break}l+=4,r+=4,n=1}return j(a,a.e+D+1,k,e)},R.toExponential=function(e,t){return null!=e&&(E(e,0,1e9),e++),V(this,e,t,1)},R.toFixed=function(e,t){return null!=e&&(E(e,0,1e9),e=e+this.e+1),V(this,e,t)},R.toFormat=function(e,t,i){var a;if(null==i)null!=e&&t&&"object"==p(t)?(i=t,t=null):e&&"object"==p(e)?(i=e,e=t=null):i=x;else if("object"!=p(i))throw Error(r+"Argument not an object: "+i);if(a=this.toFixed(e,t),this.c){var n,o=a.split("."),s=+i.groupSize,c=(e=+i.secondaryGroupSize,i.groupSeparator||""),l=o[0],d=(t=o[1],(o=this.s<0)?l.slice(1):l),h=d.length;if(e&&(n=s,s=e,h-=e=n),0<s&&0<h){for(l=d.substr(0,n=h%s||s);n<h;n+=s)l+=c+d.substr(n,s);0<e&&(l+=c+d.slice(n)),o&&(l="-"+l)}a=t?l+(i.decimalSeparator||"")+((e=+i.fractionGroupSize)?t.replace(new RegExp("d{"+e+"}\\B","g"),"$&"+(i.fractionGroupSeparator||"")):t):l}return(i.prefix||"")+a+(i.suffix||"")},R.toFraction=function(e){var t,a,n,o,s,c,l,d,u,p,g=this.c;if(null!=e&&(!(s=new Y(e)).isInteger()&&(s.c||1!==s.s)||s.lt(C)))throw Error(r+"Argument "+(s.isInteger()?"out of range: ":"not an integer: ")+Q(s));if(!g)return new Y(this);for(t=new Y(C),l=a=new Y(C),n=c=new Y(C),p=_(g),u=t.e=p.length-this.e-1,t.c[0]=h[(g=u%14)<0?14+g:g],e=!e||0<s.comparedTo(t)?0<u?t:l:s,g=B,B=1/0,s=new Y(p),c.c[0]=0;d=i(s,t,0,1),1!=(o=a.plus(d.times(n))).comparedTo(e);)a=n,n=o,l=c.plus(d.times(o=l)),c=o,t=s.minus(d.times(o=t)),s=o;return o=i(e.minus(a),n,0,1),c=c.plus(o.times(l)),a=a.plus(o.times(n)),c.s=l.s=this.s,u=i(l,n,u*=2,k).minus(this).abs().comparedTo(i(c,a,u,k).minus(this).abs())<1?[l,n]:[c,a],B=g,u},R.toNumber=function(){return+Q(this)},R.toPrecision=function(e,t){return null!=e&&E(e,1,1e9),V(this,e,t,2)},R.toString=function(e){var t,i=this,n=i.s,o=i.e;return null===o?n?(t="Infinity",n<0&&(t="-"+t)):t="NaN":(t=null==e?o<=O||w<=o?f(_(i.c),o):S(_(i.c),o,"0"):10===e?S(_((i=j(new Y(i),D+o+1,k)).c),i.e,"0"):(E(e,2,F.length,"Base"),a(S(_(i.c),o,"0"),10,e,n,!0)),n<0&&i.c[0]&&(t="-"+t)),t},R.valueOf=R.toJSON=function(){return Q(this)},R._isBigNumber=!0,null!=t&&Y.set(t),Y;function q(e,t,i){var a,n,o,s=0,r=e.length,c=t%1e7,l=t/1e7|0;for(e=e.slice();r--;)s=((n=c*(n=e[r]%1e7)+(a=l*n+(o=e[r]/1e7|0)*c)%1e7*1e7+s)/i|0)+(a/1e7|0)+l*o,e[r]=n%i;return s?[s].concat(e):e}function J(e,t,i,a){var n,o;if(i!=a)o=a<i?1:-1;else for(n=o=0;n<i;n++)if(e[n]!=t[n]){o=e[n]>t[n]?1:-1;break}return o}function X(e,t,i,a){for(var n=0;i--;)e[i]-=n,n=e[i]<t[i]?1:0,e[i]=n*a+e[i]-t[i];for(;!e[0]&&1<e.length;e.splice(0,1));}function z(e,t,i,a){for(var n,o,s=[0],r=0,c=e.length;r<c;){for(o=s.length;o--;s[o]*=t);for(s[0]+=a.indexOf(e.charAt(r++)),n=0;n<s.length;n++)s[n]>i-1&&(null==s[n+1]&&(s[n+1]=0),s[n+1]+=s[n]/i|0,s[n]%=i)}return s.reverse()}}()).default=a.BigNumber=a,"function"==typeof define&&define.amd?define(function(){return a}):void 0!==u&&u.exports?u.exports=a:(i=i||("undefined"!=typeof self&&self?self:window)).BigNumber=a,cc._RF.pop()},{}],buffer:[function(e,t,i){(function(a){"use strict";cc._RF.push(t,"c11036c5IVEL4bSv3n2GNEy","buffer");var n=e,o=i;(function(e){var t=n("base64-js"),i=n("ieee754"),a=n("isarray");function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function r(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(e=null===e?new c(t):e).length=t,e}function c(e,t,i){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,i);if("number"!=typeof e)return l(this,e,t,i);if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}function l(e,t,i,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,i,a){if(t.byteLength,i<0||t.byteLength<i)throw new RangeError("'offset' is out of bounds");if(t.byteLength<i+(a||0))throw new RangeError("'length' is out of bounds");return t=void 0===i&&void 0===a?new Uint8Array(t):void 0===a?new Uint8Array(t,i):new Uint8Array(t,i,a),c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=u(e,t),e}(e,t,i,n):"string"==typeof t?function(e,t,i){if(!c.isEncoding(i="string"!=typeof i||""===i?"utf8":i))throw new TypeError('"encoding" must be a valid string encoding');var a=0|g(t,i);return(i=(e=r(e,a)).write(t,i))!==a?e.slice(0,i):e}(e,t,i):function(e,t){if(c.isBuffer(t)){var i=0|p(t.length);return 0===(e=r(e,i)).length||t.copy(e,0,0,i),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function(e){return e!=e}(t.length)?r(e,0):u(e,t);if("Buffer"===t.type&&a(t.data))return u(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function d(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function h(e,t){if(d(t),e=r(e,t<0?0:0|p(t)),!c.TYPED_ARRAY_SUPPORT)for(var i=0;i<t;++i)e[i]=0;return e}function u(e,t){var i=t.length<0?0:0|p(t.length);e=r(e,i);for(var a=0;a<i;a+=1)e[a]=255&t[a];return e}function p(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function g(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;var i=(e="string"!=typeof e?""+e:e).length;if(0===i)return 0;for(var a=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return D(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return k(e).length;default:if(a)return D(e).length;t=(""+t).toLowerCase(),a=!0}}function _(e,i,a){var n,o,s,r=!1;if((i=void 0===i||i<0?0:i)>this.length)return"";if((a=void 0===a||a>this.length?this.length:a)<=0)return"";if((a>>>=0)<=(i>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return function(e,t,i){var a=e.length;(!i||i<0||a<i)&&(i=a);for(var n="",o=t=!t||t<0?0:t;o<i;++o)n+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(e[o]);return n}(this,i,a);case"utf8":case"utf-8":return A(this,i,a);case"ascii":return function(e,t,i){var a="";i=Math.min(e.length,i);for(var n=t;n<i;++n)a+=String.fromCharCode(127&e[n]);return a}(this,i,a);case"latin1":case"binary":return function(e,t,i){var a="";i=Math.min(e.length,i);for(var n=t;n<i;++n)a+=String.fromCharCode(e[n]);return a}(this,i,a);case"base64":return n=this,s=a,0===(o=i)&&s===n.length?t.fromByteArray(n):t.fromByteArray(n.slice(o,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,i){for(var a=e.slice(t,i),n="",o=0;o<a.length;o+=2)n+=String.fromCharCode(a[o]+256*a[o+1]);return n}(this,i,a);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function m(e,t,i){var a=e[t];e[t]=e[i],e[i]=a}function E(e,t,i,a,n){if(0===e.length)return-1;if("string"==typeof i?(a=i,i=0):2147483647<i?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,(i=(i=isNaN(i)?n?0:e.length-1:i)<0?e.length+i:i)>=e.length){if(n)return-1;i=e.length-1}else if(i<0){if(!n)return-1;i=0}if("string"==typeof t&&(t=c.from(t,a)),c.isBuffer(t))return 0===t.length?-1:T(e,t,i,a,n);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(n?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,i):T(e,[t],i,a,n);throw new TypeError("val must be string, number or Buffer")}function T(e,t,i,a,n){var o=1,s=e.length,r=t.length;if(void 0!==a&&("ucs2"===(a=String(a).toLowerCase())||"ucs-2"===a||"utf16le"===a||"utf-16le"===a)){if(e.length<2||t.length<2)return-1;s/=o=2,r/=2,i/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(n)for(var l=-1,d=i;d<s;d++)if(c(e,d)===c(t,-1===l?0:d-l)){if(d-(l=-1===l?d:l)+1===r)return l*o}else-1!==l&&(d-=d-l),l=-1;else for(d=i=s<i+r?s-r:i;0<=d;d--){for(var h=!0,u=0;u<r;u++)if(c(e,d+u)!==c(t,u)){h=!1;break}if(h)return d}return-1}function f(e,t,i,a){return O(function(e){for(var t=[],i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}(t),e,i,a)}function S(e,t,i,a){return O(function(e,t){for(var i,a,n=[],o=0;o<e.length&&!((t-=2)<0);++o)i=(a=e.charCodeAt(o))>>8,a%=256,n.push(a),n.push(i);return n}(t,e.length-i),e,i,a)}function A(e,t,i){i=Math.min(e.length,i);for(var a=[],n=t;n<i;){var o,s,r,c,l=e[n],d=null,h=239<l?4:223<l?3:191<l?2:1;if(n+h<=i)switch(h){case 1:l<128&&(d=l);break;case 2:128==(192&(o=e[n+1]))&&127<(c=(31&l)<<6|63&o)&&(d=c);break;case 3:o=e[n+1],s=e[n+2],128==(192&o)&&128==(192&s)&&2047<(c=(15&l)<<12|(63&o)<<6|63&s)&&(c<55296||57343<c)&&(d=c);break;case 4:o=e[n+1],s=e[n+2],r=e[n+3],128==(192&o)&&128==(192&s)&&128==(192&r)&&65535<(c=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&r)&&c<1114112&&(d=c)}null===d?(d=65533,h=1):65535<d&&(d-=65536,a.push(d>>>10&1023|55296),d=56320|1023&d),a.push(d),n+=h}return function(e){var t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);for(var i="",a=0;a<t;)i+=String.fromCharCode.apply(String,e.slice(a,a+=I));return i}(a)}o.Buffer=c,o.SlowBuffer=function(e){return c.alloc(+(e=+e!=e?0:e))},o.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),o.kMaxLength=s(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,i){return l(null,e,t,i)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,i){return a=null,t=t,i=i,d(e=e),e<=0||void 0===t?r(a,e):"string"==typeof i?r(a,e).fill(t,i):r(a,e).fill(t);var a},c.allocUnsafe=function(e){return h(null,e)},c.allocUnsafeSlow=function(e){return h(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var i=e.length,a=t.length,n=0,o=Math.min(i,a);n<o;++n)if(e[n]!==t[n]){i=e[n],a=t[n];break}return i<a?-1:a<i?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);if(void 0===t)for(o=t=0;o<e.length;++o)t+=e[o].length;for(var i=c.allocUnsafe(t),n=0,o=0;o<e.length;++o){var s=e[o];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,n),n+=s.length}return i},c.byteLength=g,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?A(this,0,e):_.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",t=o.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,i,a,n){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===i&&(i=e?e.length:0),void 0===a&&(a=0),void 0===n&&(n=this.length),(t=void 0===t?0:t)<0||i>e.length||a<0||n>this.length)throw new RangeError("out of range index");if(n<=a&&i<=t)return 0;if(n<=a)return-1;if(i<=t)return 1;if(this===e)return 0;for(var o=(n>>>=0)-(a>>>=0),s=(i>>>=0)-(t>>>=0),r=Math.min(o,s),l=this.slice(a,n),d=e.slice(t,i),h=0;h<r;++h)if(l[h]!==d[h]){o=l[h],s=d[h];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(e,t,i){return-1!==this.indexOf(e,t,i)},c.prototype.indexOf=function(e,t,i){return E(this,e,t,i,!0)},c.prototype.lastIndexOf=function(e,t,i){return E(this,e,t,i,!1)},c.prototype.write=function(e,t,i,a){if(void 0===t)a="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)a=t,i=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(i)?(i|=0,void 0===a&&(a="utf8")):(a=i,i=void 0)}var n=this.length-t;if((void 0===i||n<i)&&(i=n),0<e.length&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");a=a||"utf8";for(var o,s,r,c=!1;;)switch(a){case"hex":return function(e,t,i,a){i=Number(i)||0;var n=e.length-i;if((!a||(a=Number(a))>n)&&(a=n),(n=t.length)%2!=0)throw new TypeError("Invalid hex string");n/2<a&&(a=n/2);for(var o=0;o<a;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[i+o]=s}return o}(this,e,t,i);case"utf8":case"utf-8":return s=t,r=i,O(D(e,(o=this).length-s),o,s,r);case"ascii":return f(this,e,t,i);case"latin1":case"binary":return f(this,e,t,i);case"base64":return o=this,s=t,r=i,O(k(e),o,s,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,i);default:if(c)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase(),c=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function y(e,t,i){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(i<e+t)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,i,a,n,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(n<t||t<o)throw new RangeError('"value" argument is out of bounds');if(i+a>e.length)throw new RangeError("Index out of range")}function v(e,t,i,a){t<0&&(t=65535+t+1);for(var n=0,o=Math.min(e.length-i,2);n<o;++n)e[i+n]=(t&255<<8*(a?n:1-n))>>>8*(a?n:1-n)}function L(e,t,i,a){t<0&&(t=4294967295+t+1);for(var n=0,o=Math.min(e.length-i,4);n<o;++n)e[i+n]=t>>>8*(a?n:3-n)&255}function N(e,t,i,a){if(i+a>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function b(e,t,a,n,o){return o||N(e,0,a,4),i.write(e,t,a,n,23,4),a+4}function R(e,t,a,n,o){return o||N(e,0,a,8),i.write(e,t,a,n,52,8),a+8}c.prototype.slice=function(e,t){var i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):i<e&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):i<t&&(t=i),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else for(var a=t-e,n=new c(a,void 0),o=0;o<a;++o)n[o]=this[o+e];return n},c.prototype.readUIntLE=function(e,t,i){e|=0,t|=0,i||y(e,t,this.length);for(var a=this[e],n=1,o=0;++o<t&&(n*=256);)a+=this[e+o]*n;return a},c.prototype.readUIntBE=function(e,t,i){e|=0,t|=0,i||y(e,t,this.length);for(var a=this[e+--t],n=1;0<t&&(n*=256);)a+=this[e+--t]*n;return a},c.prototype.readUInt8=function(e,t){return t||y(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||y(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||y(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||y(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||y(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,i){e|=0,t|=0,i||y(e,t,this.length);for(var a=this[e],n=1,o=0;++o<t&&(n*=256);)a+=this[e+o]*n;return a>=(n*=128)&&(a-=Math.pow(2,8*t)),a},c.prototype.readIntBE=function(e,t,i){e|=0,t|=0,i||y(e,t,this.length);for(var a=t,n=1,o=this[e+--a];0<a&&(n*=256);)o+=this[e+--a]*n;return o>=(n*=128)&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return t||y(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){return t||y(e,2,this.length),32768&(e=this[e]|this[e+1]<<8)?4294901760|e:e},c.prototype.readInt16BE=function(e,t){return t||y(e,2,this.length),32768&(e=this[e+1]|this[e]<<8)?4294901760|e:e},c.prototype.readInt32LE=function(e,t){return t||y(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||y(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||y(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||y(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||y(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||y(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,i,a){e=+e,t|=0,i|=0,a||P(this,e,t,i,Math.pow(2,8*i)-1,0);var n=1,o=0;for(this[t]=255&e;++o<i&&(n*=256);)this[t+o]=e/n&255;return t+i},c.prototype.writeUIntBE=function(e,t,i,a){e=+e,t|=0,i|=0,a||P(this,e,t,i,Math.pow(2,8*i)-1,0);var n=i-1,o=1;for(this[t+n]=255&e;0<=--n&&(o*=256);)this[t+n]=e/o&255;return t+i},c.prototype.writeUInt8=function(e,t,i){return e=+e,t|=0,i||P(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,i){return e=+e,t|=0,i||P(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):v(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,i){return e=+e,t|=0,i||P(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):v(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,i){return e=+e,t|=0,i||P(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):L(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,i){return e=+e,t|=0,i||P(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,i,a){e=+e,t|=0,a||P(this,e,t,i,(a=Math.pow(2,8*i-1))-1,-a);var n=0,o=1,s=0;for(this[t]=255&e;++n<i&&(o*=256);)e<0&&0===s&&0!==this[t+n-1]&&(s=1),this[t+n]=(e/o>>0)-s&255;return t+i},c.prototype.writeIntBE=function(e,t,i,a){e=+e,t|=0,a||P(this,e,t,i,(a=Math.pow(2,8*i-1))-1,-a);var n=i-1,o=1,s=0;for(this[t+n]=255&e;0<=--n&&(o*=256);)e<0&&0===s&&0!==this[t+n+1]&&(s=1),this[t+n]=(e/o>>0)-s&255;return t+i},c.prototype.writeInt8=function(e,t,i){return e=+e,t|=0,i||P(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&(e=e<0?255+e+1:e),t+1},c.prototype.writeInt16LE=function(e,t,i){return e=+e,t|=0,i||P(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):v(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,i){return e=+e,t|=0,i||P(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):v(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,i){return e=+e,t|=0,i||P(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):L(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,i){return e=+e,t|=0,i||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,i){return b(this,e,t,!0,i)},c.prototype.writeFloatBE=function(e,t,i){return b(this,e,t,!1,i)},c.prototype.writeDoubleLE=function(e,t,i){return R(this,e,t,!0,i)},c.prototype.writeDoubleBE=function(e,t,i){return R(this,e,t,!1,i)},c.prototype.copy=function(e,t,i,a){if(i=i||0,a||0===a||(a=this.length),t>=e.length&&(t=e.length),(a=0<a&&a<i?i:a)===i)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(a<0)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length);var n,o=(a=e.length-t<a-i?e.length-t+i:a)-i;if(this===e&&i<t&&t<a)for(n=o-1;0<=n;--n)e[n+t]=this[n+i];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(n=0;n<o;++n)e[n+t]=this[n+i];else Uint8Array.prototype.set.call(e,this.subarray(i,i+o),t);return o},c.prototype.fill=function(e,t,i,a){if("string"==typeof e){var n;if("string"==typeof t?(a=t,t=0,i=this.length):"string"==typeof i&&(a=i,i=this.length),1===e.length&&(n=e.charCodeAt(0))<256&&(e=n),void 0!==a&&"string"!=typeof a)throw new TypeError("encoding must be a string");if("string"==typeof a&&!c.isEncoding(a))throw new TypeError("Unknown encoding: "+a)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;if(t>>>=0,i=void 0===i?this.length:i>>>0,"number"==typeof(e=e||0))for(r=t;r<i;++r)this[r]=e;else for(var o=c.isBuffer(e)?e:D(new c(e,a).toString()),s=o.length,r=0;r<i-t;++r)this[r+t]=o[r%s];return this};var C=/[^+\/0-9A-Za-z-_]/g;function D(e,t){var i;t=t||1/0;for(var a=e.length,n=null,o=[],s=0;s<a;++s){if(55295<(i=e.charCodeAt(s))&&i<57344){if(!n){if(56319<i){-1<(t-=3)&&o.push(239,191,189);continue}if(s+1===a){-1<(t-=3)&&o.push(239,191,189);continue}n=i;continue}if(i<56320){-1<(t-=3)&&o.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&-1<(t-=3)&&o.push(239,191,189);if(n=null,i<128){if(--t<0)break;o.push(i)}else if(i<2048){if((t-=2)<0)break;o.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;o.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return o}function k(e){return t.toByteArray(function(e){if((e=((t=e).trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(C,"")).length<2)return"";for(var t;e.length%4!=0;)e+="=";return e}(e))}function O(e,t,i,a){for(var n=0;n<a&&!(n+i>=t.length||n>=e.length);++n)t[n+i]=e[n];return n}}).call(void 0,void 0!==a?a:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),cc._RF.pop()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],encryptjs:[function(e,t,i){"use strict";cc._RF.push(t,"7c5a6OCG1NLwolB4bAuf6hN","encryptjs");var a=e,n=t,o=i;(function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){void 0!==o&&void 0!==n?n.exports=e():"function"==typeof define&&"object"===t(define.amd)?define(e):"function"==typeof define&&"object"===t(define.petal)?define("encryptjs",[],e):this.encryptjs=e()}(function(i){return(i={version:"1.0.0"}).init=function(){},void 0!==n&&n.exports&&a("algo"),i.encrypt=function(e){return e},i.decrypt=function(e){return e},i.getTextEncryptAndSaveToTextFile=function(){throw Error("Command line not supported on this platform")},i.getTextEncryptAndSaveToJSONFile=function(){throw Error("Command line not supported on this platform")},i.writeCipherTextToJSON=function(e,i,a,n){null==n&&(n=a,a={});var o=("object"===t(a)&&null!==a&&"spaces"in a?a:this).spaces,s="";try{s=JSON.stringify(i,a?a.replacer:null,o)+"\n"}catch(e){if(n)return n(e,null)}fs.writeFile(e,s,a,n)},void 0===String.prototype.utf8Encode&&(String.prototype.utf8Encode=function(){return unescape(encodeURIComponent(this))}),void 0===String.prototype.utf8Decode&&(String.prototype.utf8Decode=function(){try{return decodeURIComponent(escape(this))}catch(i){return this}}),void 0===String.prototype.base64Encode&&(String.prototype.base64Encode=function(){if(void 0!==e)return new e(this,"utf8").toString("base64");throw new Error("No Base64 Encode")}),void 0===String.prototype.base64Decode&&(String.prototype.base64Decode=function(){if(void 0!==e)return new e(this,"base64").toString("utf8");throw new Error("No Base64 Decode")}),i.init(),i})}).call(void 0,a("buffer").Buffer),cc._RF.pop()},{}],ieee754:[function(e,t,i){"use strict";cc._RF.push(t,"b6fd4bcXqNOUK8lgEIO1TV8","ieee754");var a=i;a.read=function(e,t,i,a,n){var o,s,r=8*n-a-1,c=(1<<r)-1,l=c>>1,d=-7,h=i?n-1:0,u=i?-1:1;for(i=e[t+h],h+=u,o=i&(1<<-d)-1,i>>=-d,d+=r;0<d;o=256*o+e[t+h],h+=u,d-=8);for(s=o&(1<<-d)-1,o>>=-d,d+=a;0<d;s=256*s+e[t+h],h+=u,d-=8);if(0===o)o=1-l;else{if(o===c)return s?NaN:1/0*(i?-1:1);s+=Math.pow(2,a),o-=l}return(i?-1:1)*s*Math.pow(2,o-a)},a.write=function(e,t,i,a,n,o){var s,r,c=8*o-n-1,l=(1<<c)-1,d=l>>1,h=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,u=a?0:o-1,p=a?1:-1;for(o=t<0||0===t&&1/t<0?1:0,t=Math.abs(t),isNaN(t)||t===1/0?(r=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(a=Math.pow(2,-s))<1&&(s--,a*=2),2<=(t+=1<=s+d?h/a:h*Math.pow(2,1-d))*a&&(s++,a/=2),l<=s+d?(r=0,s=l):1<=s+d?(r=(t*a-1)*Math.pow(2,n),s+=d):(r=t*Math.pow(2,d-1)*Math.pow(2,n),s=0));8<=n;e[i+u]=255&r,u+=p,r/=256,n-=8);for(s=s<<n|r,c+=n;0<c;e[i+u]=255&s,u+=p,s/=256,c-=8);e[i+u-p]|=128*o},cc._RF.pop()},{}],isarray:[function(e,t){"use strict";cc._RF.push(t,"cc0bffPUm9AJKgYzCXRvdVC","isarray");var i={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==i.call(e)},cc._RF.pop()},{}],"polyglot.min":[function(e,t,i){"use strict";cc._RF.push(t,"e26fd9yy65A4q3/JkpVnFYg","polyglot.min");var a,n,o=t,s=i;function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}a=void 0,n=function(e){function t(e){e=e||{},this.phrases={},this.extend(e.phrases||{}),this.currentLocale=e.locale||"en",this.allowMissing=!!e.allowMissing,this.warn=e.warn||a}function i(e,t,i){var a;return null!=i&&e?((a=e.split(n))[(i=i,o[function(e){var t=function(e){var t,i,a,n={};for(t in e)if(e.hasOwnProperty(t))for(a in i=e[t])n[i[a]]=t;return n}(s);return t[e]||t.en}(t)](i))]||a[0]).replace(/^\s+|\s+$/g,""):e}function a(t){e.console&&e.console.warn&&e.console.warn("WARNING: "+t)}t.VERSION="0.4.3",t.prototype.locale=function(e){return e&&(this.currentLocale=e),this.currentLocale},t.prototype.extend=function(e,t){var i,a;for(a in e)e.hasOwnProperty(a)&&(i=e[a],t&&(a=t+"."+a),"object"==r(i)?this.extend(i,a):this.phrases[a]=i)},t.prototype.clear=function(){this.phrases={}},t.prototype.replace=function(e){this.clear(),this.extend(e)},t.prototype.t=function(e,t){var a,n;return"number"==typeof(t=null==t?{}:t)&&(t={smart_count:t}),"string"==typeof this.phrases[e]?a=this.phrases[e]:"string"==typeof t._?a=t._:this.allowMissing?a=e:(this.warn('Missing translation for key: "'+e+'"'),n=e),"string"==typeof a&&(t=function(e){var t,i={};for(t in e)i[t]=e[t];return i}(t),n=function(e,t){for(var i in t)"_"!==i&&t.hasOwnProperty(i)&&(e=e.replace(new RegExp("%{"+i+"\\}","g"),t[i]));return e}(n=i(a,this.currentLocale,t.smart_count),t)),n},t.prototype.has=function(e){return e in this.phrases};var n="||||",o={chinese:function(){return 0},german:function(e){return 1!==e?1:0},french:function(e){return 1<e?1:0},russian:function(e){return e%10==1&&e%100!=11?0:2<=e%10&&e%10<=4&&(e%100<10||20<=e%100)?1:2},czech:function(e){return 1===e?0:2<=e&&e<=4?1:2},polish:function(e){return 1===e?0:2<=e%10&&e%10<=4&&(e%100<10||20<=e%100)?1:2},icelandic:function(e){return e%10!=1||e%100==11?1:0}},s={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs"],polish:["pl"],icelandic:["is"]};return t},"function"==typeof define&&define.amd?define([],function(){return n(a)}):"object"==(void 0===s?"undefined":r(s))?o.exports=n(a):a.Polyglot=n(a),cc._RF.pop()},{}],"qqmap-wx-jssdk.min":[function(e,t){"use strict";cc._RF.push(t,"ffaccEi4MNFWao1Wj50Y0tt","qqmap-wx-jssdk.min");var i=t;var a,n="https://apis.map.qq.com/ws/place/v1/suggestion",o={safeAdd:function(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i},bitRotateLeft:function(e,t){return e<<t|e>>>32-t},md5cmn:function(e,t,i,a,n,o){return this.safeAdd(this.bitRotateLeft(this.safeAdd(this.safeAdd(t,e),this.safeAdd(a,o)),n),i)},md5ff:function(e,t,i,a,n,o,s){return this.md5cmn(t&i|~t&a,e,t,n,o,s)},md5gg:function(e,t,i,a,n,o,s){return this.md5cmn(t&a|i&~a,e,t,n,o,s)},md5hh:function(e,t,i,a,n,o,s){return this.md5cmn(t^i^a,e,t,n,o,s)},md5ii:function(e,t,i,a,n,o,s){return this.md5cmn(i^(t|~a),e,t,n,o,s)},binlMD5:function(e,t){var i,a,n,o;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var s=1732584193,r=-271733879,c=-1732584194,l=271733878,d=0;d<e.length;d+=16)i=s,a=r,n=c,o=l,s=this.md5ff(s,r,c,l,e[d],7,-680876936),l=this.md5ff(l,s,r,c,e[d+1],12,-389564586),c=this.md5ff(c,l,s,r,e[d+2],17,606105819),r=this.md5ff(r,c,l,s,e[d+3],22,-1044525330),s=this.md5ff(s,r,c,l,e[d+4],7,-176418897),l=this.md5ff(l,s,r,c,e[d+5],12,1200080426),c=this.md5ff(c,l,s,r,e[d+6],17,-1473231341),r=this.md5ff(r,c,l,s,e[d+7],22,-45705983),s=this.md5ff(s,r,c,l,e[d+8],7,1770035416),l=this.md5ff(l,s,r,c,e[d+9],12,-1958414417),c=this.md5ff(c,l,s,r,e[d+10],17,-42063),r=this.md5ff(r,c,l,s,e[d+11],22,-1990404162),s=this.md5ff(s,r,c,l,e[d+12],7,1804603682),l=this.md5ff(l,s,r,c,e[d+13],12,-40341101),c=this.md5ff(c,l,s,r,e[d+14],17,-1502002290),r=this.md5ff(r,c,l,s,e[d+15],22,1236535329),s=this.md5gg(s,r,c,l,e[d+1],5,-165796510),l=this.md5gg(l,s,r,c,e[d+6],9,-1069501632),c=this.md5gg(c,l,s,r,e[d+11],14,643717713),r=this.md5gg(r,c,l,s,e[d],20,-373897302),s=this.md5gg(s,r,c,l,e[d+5],5,-701558691),l=this.md5gg(l,s,r,c,e[d+10],9,38016083),c=this.md5gg(c,l,s,r,e[d+15],14,-660478335),r=this.md5gg(r,c,l,s,e[d+4],20,-405537848),s=this.md5gg(s,r,c,l,e[d+9],5,568446438),l=this.md5gg(l,s,r,c,e[d+14],9,-1019803690),c=this.md5gg(c,l,s,r,e[d+3],14,-187363961),r=this.md5gg(r,c,l,s,e[d+8],20,1163531501),s=this.md5gg(s,r,c,l,e[d+13],5,-1444681467),l=this.md5gg(l,s,r,c,e[d+2],9,-51403784),c=this.md5gg(c,l,s,r,e[d+7],14,1735328473),r=this.md5gg(r,c,l,s,e[d+12],20,-1926607734),s=this.md5hh(s,r,c,l,e[d+5],4,-378558),l=this.md5hh(l,s,r,c,e[d+8],11,-2022574463),c=this.md5hh(c,l,s,r,e[d+11],16,1839030562),r=this.md5hh(r,c,l,s,e[d+14],23,-35309556),s=this.md5hh(s,r,c,l,e[d+1],4,-1530992060),l=this.md5hh(l,s,r,c,e[d+4],11,1272893353),c=this.md5hh(c,l,s,r,e[d+7],16,-155497632),r=this.md5hh(r,c,l,s,e[d+10],23,-1094730640),s=this.md5hh(s,r,c,l,e[d+13],4,681279174),l=this.md5hh(l,s,r,c,e[d],11,-358537222),c=this.md5hh(c,l,s,r,e[d+3],16,-722521979),r=this.md5hh(r,c,l,s,e[d+6],23,76029189),s=this.md5hh(s,r,c,l,e[d+9],4,-640364487),l=this.md5hh(l,s,r,c,e[d+12],11,-421815835),c=this.md5hh(c,l,s,r,e[d+15],16,530742520),r=this.md5hh(r,c,l,s,e[d+2],23,-995338651),s=this.md5ii(s,r,c,l,e[d],6,-198630844),l=this.md5ii(l,s,r,c,e[d+7],10,1126891415),c=this.md5ii(c,l,s,r,e[d+14],15,-1416354905),r=this.md5ii(r,c,l,s,e[d+5],21,-57434055),s=this.md5ii(s,r,c,l,e[d+12],6,1700485571),l=this.md5ii(l,s,r,c,e[d+3],10,-1894986606),c=this.md5ii(c,l,s,r,e[d+10],15,-1051523),r=this.md5ii(r,c,l,s,e[d+1],21,-2054922799),s=this.md5ii(s,r,c,l,e[d+8],6,1873313359),l=this.md5ii(l,s,r,c,e[d+15],10,-30611744),c=this.md5ii(c,l,s,r,e[d+6],15,-1560198380),r=this.md5ii(r,c,l,s,e[d+13],21,1309151649),s=this.md5ii(s,r,c,l,e[d+4],6,-145523070),l=this.md5ii(l,s,r,c,e[d+11],10,-1120210379),c=this.md5ii(c,l,s,r,e[d+2],15,718787259),r=this.md5ii(r,c,l,s,e[d+9],21,-343485551),s=this.safeAdd(s,i),r=this.safeAdd(r,a),c=this.safeAdd(c,n),l=this.safeAdd(l,o);return[s,r,c,l]},binl2rstr:function(e){for(var t="",i=32*e.length,a=0;a<i;a+=8)t+=String.fromCharCode(e[a>>5]>>>a%32&255);return t},rstr2binl:function(e){var t=[];for(t[(e.length>>2)-1]=void 0,a=0;a<t.length;a+=1)t[a]=0;for(var i=8*e.length,a=0;a<i;a+=8)t[a>>5]|=(255&e.charCodeAt(a/8))<<a%32;return t},rstrMD5:function(e){return this.binl2rstr(this.binlMD5(this.rstr2binl(e),8*e.length))},rstrHMACMD5:function(e,t){var i,a=this.rstr2binl(e),n=[],o=[];for(n[15]=o[15]=void 0,16<a.length&&(a=this.binlMD5(a,8*e.length)),i=0;i<16;i+=1)n[i]=909522486^a[i],o[i]=1549556828^a[i];return t=this.binlMD5(n.concat(this.rstr2binl(t)),512+8*t.length),this.binl2rstr(this.binlMD5(o.concat(t),640))},rstr2hex:function(e){for(var t,i="",a=0;a<e.length;a+=1)t=e.charCodeAt(a),i+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return i},str2rstrUTF8:function(e){return unescape(encodeURIComponent(e))},rawMD5:function(e){return this.rstrMD5(this.str2rstrUTF8(e))},hexMD5:function(e){return this.rstr2hex(this.rawMD5(e))},rawHMACMD5:function(e,t){return this.rstrHMACMD5(this.str2rstrUTF8(e),str2rstrUTF8(t))},hexHMACMD5:function(e,t){return this.rstr2hex(this.rawHMACMD5(e,t))},md5:function(e,t,i){return t?i?this.rawHMACMD5(t,e):this.hexHMACMD5(t,e):i?this.rawMD5(e):this.hexMD5(e)},getSig:function(e,t,i,a){var n=null,o=[];return Object.keys(e).sort().forEach(function(t){o.push(t+"="+e[t])}),"search"==i&&(n="/ws/place/v1/search?"+o.join("&")+t),"suggest"==i&&(n="/ws/place/v1/suggestion?"+o.join("&")+t),"reverseGeocoder"==i&&(n="/ws/geocoder/v1/?"+o.join("&")+t),"geocoder"==i&&(n="/ws/geocoder/v1/?"+o.join("&")+t),"getCityList"==i&&(n="/ws/district/v1/list?"+o.join("&")+t),"getDistrictByCityId"==i&&(n="/ws/district/v1/getchildren?"+o.join("&")+t),"calculateDistance"==i&&(n="/ws/distance/v1/?"+o.join("&")+t),"direction"==i&&(n="/ws/direction/v1/"+a+"?"+o.join("&")+t),this.md5(n)},location2query:function(e){if("string"==typeof e)return e;for(var t="",i=0;i<e.length;i++){var a=e[i];t&&(t+=";"),a.location&&(t=t+a.location.lat+","+a.location.lng),a.latitude&&a.longitude&&(t=t+a.latitude+","+a.longitude)}return t},rad:function(e){return e*Math.PI/180},getEndLocation:function(e){for(var t=e.split(";"),i=[],a=0;a<t.length;a++)i.push({lat:parseFloat(t[a].split(",")[0]),lng:parseFloat(t[a].split(",")[1])});return i},getDistance:function(e,t,i,a){var n=this.rad(e);return i=n-(e=this.rad(i)),a=this.rad(t)-this.rad(a),a=2*Math.asin(Math.sqrt(Math.pow(Math.sin(i/2),2)+Math.cos(n)*Math.cos(e)*Math.pow(Math.sin(a/2),2))),a*=6378136.49,a=Math.round(1e4*a)/1e4,parseFloat(a.toFixed(0))},getWXLocation:function(e,t,i){wx.getFuzzyLocation({type:"gcj02",success:e,fail:t,complete:i})},getLocationParam:function(e){return"string"==typeof e?2===e.split(",").length?{latitude:e.split(",")[0],longitude:e.split(",")[1]}:{}:e},polyfillParam:function(e){e.success=e.success||function(){},e.fail=e.fail||function(){},e.complete=e.complete||function(){}},checkParamKeyEmpty:function(e,t){return!e[t]&&(t=this.buildErrorConfig(310,"\u8bf7\u6c42\u53c2\u6570\u4fe1\u606f\u6709\u8bef"+t+"\u53c2\u6570\u683c\u5f0f\u6709\u8bef"),e.fail(t),e.complete(t),!0)},checkKeyword:function(e){return!this.checkParamKeyEmpty(e,"keyword")},checkLocation:function(e){var t=this.getLocationParam(e.location);return!!(t&&t.latitude&&t.longitude)||(t=this.buildErrorConfig(310,"\u8bf7\u6c42\u53c2\u6570\u4fe1\u606f\u6709\u8bef location\u53c2\u6570\u683c\u5f0f\u6709\u8bef"),e.fail(t),e.complete(t),!1)},buildErrorConfig:function(e,t){return{status:e,message:t}},handleData:function(e,t,i){if("search"==i){for(var a=t.data,n=[],o=0;o<a.length;o++)n.push({id:a[o].id||null,title:a[o].title||null,latitude:a[o].location&&a[o].location.lat||null,longitude:a[o].location&&a[o].location.lng||null,address:a[o].address||null,category:a[o].category||null,tel:a[o].tel||null,adcode:a[o].ad_info&&a[o].ad_info.adcode||null,city:a[o].ad_info&&a[o].ad_info.city||null,district:a[o].ad_info&&a[o].ad_info.district||null,province:a[o].ad_info&&a[o].ad_info.province||null});e.success(t,{searchResult:a,searchSimplify:n})}else if("suggest"==i){var s=t.data,r=[];for(o=0;o<s.length;o++)r.push({adcode:s[o].adcode||null,address:s[o].address||null,category:s[o].category||null,city:s[o].city||null,district:s[o].district||null,id:s[o].id||null,latitude:s[o].location&&s[o].location.lat||null,longitude:s[o].location&&s[o].location.lng||null,province:s[o].province||null,title:s[o].title||null,type:s[o].type||null});e.success(t,{suggestResult:s,suggestSimplify:r})}else if("reverseGeocoder"==i){var c=t.result,l={address:c.address||null,latitude:c.location&&c.location.lat||null,longitude:c.location&&c.location.lng||null,adcode:c.ad_info&&c.ad_info.adcode||null,city:c.address_component&&c.address_component.city||null,district:c.address_component&&c.address_component.district||null,nation:c.address_component&&c.address_component.nation||null,province:c.address_component&&c.address_component.province||null,street:c.address_component&&c.address_component.street||null,street_number:c.address_component&&c.address_component.street_number||null,recommend:c.formatted_addresses&&c.formatted_addresses.recommend||null,rough:c.formatted_addresses&&c.formatted_addresses.rough||null};if(c.pois){var d=c.pois,h=[];for(o=0;o<d.length;o++)h.push({id:d[o].id||null,title:d[o].title||null,latitude:d[o].location&&d[o].location.lat||null,longitude:d[o].location&&d[o].location.lng||null,address:d[o].address||null,category:d[o].category||null,adcode:d[o].ad_info&&d[o].ad_info.adcode||null,city:d[o].ad_info&&d[o].ad_info.city||null,district:d[o].ad_info&&d[o].ad_info.district||null,province:d[o].ad_info&&d[o].ad_info.province||null});e.success(t,{reverseGeocoderResult:c,reverseGeocoderSimplify:l,pois:d,poisSimplify:h})}else e.success(t,{reverseGeocoderResult:c,reverseGeocoderSimplify:l})}else if("geocoder"==i){var u={title:(p=t.result).title||null,latitude:p.location&&p.location.lat||null,longitude:p.location&&p.location.lng||null,adcode:p.ad_info&&p.ad_info.adcode||null,province:p.address_components&&p.address_components.province||null,city:p.address_components&&p.address_components.city||null,district:p.address_components&&p.address_components.district||null,street:p.address_components&&p.address_components.street||null,street_number:p.address_components&&p.address_components.street_number||null,level:p.level||null};e.success(t,{geocoderResult:p,geocoderSimplify:u})}else if("getCityList"==i){var p=t.result[0],g=(u=t.result[1],t.result[2]);e.success(t,{provinceResult:p,cityResult:u,districtResult:g})}else if("getDistrictByCityId"==i)g=t.result[0],e.success(t,g);else if("calculateDistance"==i){var _=t.result.elements,m=[];for(o=0;o<_.length;o++)m.push(_[o].distance);e.success(t,{calculateDistanceResult:_,distance:m})}else"direction"==i?(i=t.result.routes,e.success(t,i)):e.success(t)},buildWxRequestConfig:function(e,t,i){var a=this;return t.header={"content-type":"application/json"},t.method="GET",t.success=function(t){0===(t=t.data).status?a.handleData(e,t,i):e.fail(t)},t.fail=function(t){t.statusCode=1e3,e.fail(a.buildErrorConfig(1e3,t.errMsg))},t.complete=function(t){switch(+t.statusCode){case 1e3:e.complete(a.buildErrorConfig(1e3,t.errMsg));break;case 200:var i=t.data;0===i.status?e.complete(i):e.complete(a.buildErrorConfig(i.status,i.message));break;default:e.complete(a.buildErrorConfig(600,"\u7cfb\u7edf\u9519\u8bef"))}},t},locationProcess:function(e,t,i,a){var n=this;i=i||function(t){t.statusCode=1e3,e.fail(n.buildErrorConfig(1e3,t.errMsg))},a=a||function(t){1e3==t.statusCode&&e.complete(n.buildErrorConfig(1e3,t.errMsg))},e.location?n.checkLocation(e)&&t(o.getLocationParam(e.location)):n.getWXLocation(t,i,a)}},s=((a=[{key:"search",value:function(e){var t,i,a,n,s;e=e||{},o.polyfillParam(e),o.checkKeyword(e)&&(t={keyword:e.keyword,orderby:e.orderby||"_distance",page_size:e.page_size||10,page_index:e.page_index||1,output:"json",key:this.key},e.address_format&&(t.address_format=e.address_format),e.filter&&(t.filter=e.filter),i=e.distance||"1000",a=e.auto_extend||1,s=n=null,e.region&&(n=e.region),e.rectangle&&(s=e.rectangle),o.locationProcess(e,function(r){t.boundary=n&&!s?"region("+n+","+a+","+r.latitude+","+r.longitude+")":s&&!n?"rectangle("+s+")":"nearby("+r.latitude+","+r.longitude+","+i+","+a+")",e.sig&&(t.sig=o.getSig(t,e.sig,"search")),wx.request(o.buildWxRequestConfig(e,{url:"https://apis.map.qq.com/ws/place/v1/search",data:t},"search"))}))}},{key:"getSuggestion",value:function(e){var t;e=e||{},o.polyfillParam(e),o.checkKeyword(e)&&(t={keyword:e.keyword,region:e.region||"\u5168\u56fd",region_fix:e.region_fix||0,policy:e.policy||0,page_size:e.page_size||10,page_index:e.page_index||1,get_subpois:e.get_subpois||0,output:"json",key:this.key},e.address_format&&(t.address_format=e.address_format),e.filter&&(t.filter=e.filter),e.location?o.locationProcess(e,function(i){t.location=i.latitude+","+i.longitude,e.sig&&(t.sig=o.getSig(t,e.sig,"suggest")),wx.request(o.buildWxRequestConfig(e,{url:n,data:t},"suggest"))}):(e.sig&&(t.sig=o.getSig(t,e.sig,"suggest")),wx.request(o.buildWxRequestConfig(e,{url:n,data:t},"suggest"))))}},{key:"reverseGeocoder",value:function(e){e=e||{},o.polyfillParam(e);var t={coord_type:e.coord_type||5,get_poi:e.get_poi||0,output:"json",key:this.key};e.poi_options&&(t.poi_options=e.poi_options),o.locationProcess(e,function(i){t.location=i.latitude+","+i.longitude,e.sig&&(t.sig=o.getSig(t,e.sig,"reverseGeocoder")),wx.request(o.buildWxRequestConfig(e,{url:"https://apis.map.qq.com/ws/geocoder/v1/",data:t},"reverseGeocoder"))})}},{key:"geocoder",value:function(e){var t;o.polyfillParam(e=e||{}),o.checkParamKeyEmpty(e,"address")||(t={address:e.address,output:"json",key:this.key},e.region&&(t.region=e.region),e.sig&&(t.sig=o.getSig(t,e.sig,"geocoder")),wx.request(o.buildWxRequestConfig(e,{url:"https://apis.map.qq.com/ws/geocoder/v1/",data:t},"geocoder")))}},{key:"getCityList",value:function(e){o.polyfillParam(e=e||{});var t={output:"json",key:this.key};e.sig&&(t.sig=o.getSig(t,e.sig,"getCityList")),wx.request(o.buildWxRequestConfig(e,{url:"https://apis.map.qq.com/ws/district/v1/list",data:t},"getCityList"))}},{key:"getDistrictByCityId",value:function(e){var t;o.polyfillParam(e=e||{}),o.checkParamKeyEmpty(e,"id")||(t={id:e.id||"",output:"json",key:this.key},e.sig&&(t.sig=o.getSig(t,e.sig,"getDistrictByCityId")),wx.request(o.buildWxRequestConfig(e,{url:"https://apis.map.qq.com/ws/district/v1/getchildren",data:t},"getDistrictByCityId")))}},{key:"calculateDistance",value:function(e){var t,i;e=e||{},o.polyfillParam(e),o.checkParamKeyEmpty(e,"to")||(t={mode:e.mode||"walking",to:o.location2query(e.to),output:"json",key:this.key},e.from&&(e.location=e.from),i="straight"==t.mode?function(i){for(var a=o.getEndLocation(t.to),n={message:"query ok",result:{elements:[]},status:0},s=0;s<a.length;s++)n.result.elements.push({distance:o.getDistance(i.latitude,i.longitude,a[s].lat,a[s].lng),duration:0,from:{lat:i.latitude,lng:i.longitude},to:{lat:a[s].lat,lng:a[s].lng}});var r=n.result.elements,c=[];for(s=0;s<r.length;s++)c.push(r[s].distance);return e.success(n,{calculateResult:r,distanceResult:c})}:function(i){t.from=i.latitude+","+i.longitude,e.sig&&(t.sig=o.getSig(t,e.sig,"calculateDistance")),wx.request(o.buildWxRequestConfig(e,{url:"https://apis.map.qq.com/ws/distance/v1/",data:t},"calculateDistance"))},o.locationProcess(e,i))}},{key:"direction",value:function(e){var t,i;e=e||{},o.polyfillParam(e),o.checkParamKeyEmpty(e,"to")||(t={output:"json",key:this.key},"string"==typeof e.to?t.to=e.to:t.to=e.to.latitude+","+e.to.longitude,e.mode=e.mode||"driving",i="https://apis.map.qq.com/ws/direction/v1/"+e.mode,e.from&&(e.location=e.from),"driving"==e.mode&&(e.from_poi&&(t.from_poi=e.from_poi),e.heading&&(t.heading=e.heading),e.speed&&(t.speed=e.speed),e.accuracy&&(t.accuracy=e.accuracy),e.road_type&&(t.road_type=e.road_type),e.to_poi&&(t.to_poi=e.to_poi),e.from_track&&(t.from_track=e.from_track),e.waypoints&&(t.waypoints=e.waypoints),e.policy&&(t.policy=e.policy),e.plate_number&&(t.plate_number=e.plate_number)),"transit"==e.mode&&(e.departure_time&&(t.departure_time=e.departure_time),e.policy&&(t.policy=e.policy)),o.locationProcess(e,function(a){t.from=a.latitude+","+a.longitude,e.sig&&(t.sig=o.getSig(t,e.sig,"direction",e.mode)),wx.request(o.buildWxRequestConfig(e,{url:i,data:t},"direction"))}))}}])&&function(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}(r.prototype,a),r);function r(e){if(function(e){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),!e.key)throw Error("key\u503c\u4e0d\u80fd\u4e3a\u7a7a");this.key=e.key}i.exports=s,cc._RF.pop()},{}],"qqmap-wx-jssdk":[function(e,t){"use strict";cc._RF.push(t,"f4d980kCHpHF4QvjXS9ulk8","qqmap-wx-jssdk");var i=t;var a,n="https://apis.map.qq.com/ws/place/v1/suggestion",o={safeAdd:function(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i},bitRotateLeft:function(e,t){return e<<t|e>>>32-t},md5cmn:function(e,t,i,a,n,o){return this.safeAdd(this.bitRotateLeft(this.safeAdd(this.safeAdd(t,e),this.safeAdd(a,o)),n),i)},md5ff:function(e,t,i,a,n,o,s){return this.md5cmn(t&i|~t&a,e,t,n,o,s)},md5gg:function(e,t,i,a,n,o,s){return this.md5cmn(t&a|i&~a,e,t,n,o,s)},md5hh:function(e,t,i,a,n,o,s){return this.md5cmn(t^i^a,e,t,n,o,s)},md5ii:function(e,t,i,a,n,o,s){return this.md5cmn(i^(t|~a),e,t,n,o,s)},binlMD5:function(e,t){var i,a,n,o;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var s=1732584193,r=-271733879,c=-1732584194,l=271733878,d=0;d<e.length;d+=16)i=s,a=r,n=c,o=l,s=this.md5ff(s,r,c,l,e[d],7,-680876936),l=this.md5ff(l,s,r,c,e[d+1],12,-389564586),c=this.md5ff(c,l,s,r,e[d+2],17,606105819),r=this.md5ff(r,c,l,s,e[d+3],22,-1044525330),s=this.md5ff(s,r,c,l,e[d+4],7,-176418897),l=this.md5ff(l,s,r,c,e[d+5],12,1200080426),c=this.md5ff(c,l,s,r,e[d+6],17,-1473231341),r=this.md5ff(r,c,l,s,e[d+7],22,-45705983),s=this.md5ff(s,r,c,l,e[d+8],7,1770035416),l=this.md5ff(l,s,r,c,e[d+9],12,-1958414417),c=this.md5ff(c,l,s,r,e[d+10],17,-42063),r=this.md5ff(r,c,l,s,e[d+11],22,-1990404162),s=this.md5ff(s,r,c,l,e[d+12],7,1804603682),l=this.md5ff(l,s,r,c,e[d+13],12,-40341101),c=this.md5ff(c,l,s,r,e[d+14],17,-1502002290),r=this.md5ff(r,c,l,s,e[d+15],22,1236535329),s=this.md5gg(s,r,c,l,e[d+1],5,-165796510),l=this.md5gg(l,s,r,c,e[d+6],9,-1069501632),c=this.md5gg(c,l,s,r,e[d+11],14,643717713),r=this.md5gg(r,c,l,s,e[d],20,-373897302),s=this.md5gg(s,r,c,l,e[d+5],5,-701558691),l=this.md5gg(l,s,r,c,e[d+10],9,38016083),c=this.md5gg(c,l,s,r,e[d+15],14,-660478335),r=this.md5gg(r,c,l,s,e[d+4],20,-405537848),s=this.md5gg(s,r,c,l,e[d+9],5,568446438),l=this.md5gg(l,s,r,c,e[d+14],9,-1019803690),c=this.md5gg(c,l,s,r,e[d+3],14,-187363961),r=this.md5gg(r,c,l,s,e[d+8],20,1163531501),s=this.md5gg(s,r,c,l,e[d+13],5,-1444681467),l=this.md5gg(l,s,r,c,e[d+2],9,-51403784),c=this.md5gg(c,l,s,r,e[d+7],14,1735328473),r=this.md5gg(r,c,l,s,e[d+12],20,-1926607734),s=this.md5hh(s,r,c,l,e[d+5],4,-378558),l=this.md5hh(l,s,r,c,e[d+8],11,-2022574463),c=this.md5hh(c,l,s,r,e[d+11],16,1839030562),r=this.md5hh(r,c,l,s,e[d+14],23,-35309556),s=this.md5hh(s,r,c,l,e[d+1],4,-1530992060),l=this.md5hh(l,s,r,c,e[d+4],11,1272893353),c=this.md5hh(c,l,s,r,e[d+7],16,-155497632),r=this.md5hh(r,c,l,s,e[d+10],23,-1094730640),s=this.md5hh(s,r,c,l,e[d+13],4,681279174),l=this.md5hh(l,s,r,c,e[d],11,-358537222),c=this.md5hh(c,l,s,r,e[d+3],16,-722521979),r=this.md5hh(r,c,l,s,e[d+6],23,76029189),s=this.md5hh(s,r,c,l,e[d+9],4,-640364487),l=this.md5hh(l,s,r,c,e[d+12],11,-421815835),c=this.md5hh(c,l,s,r,e[d+15],16,530742520),r=this.md5hh(r,c,l,s,e[d+2],23,-995338651),s=this.md5ii(s,r,c,l,e[d],6,-198630844),l=this.md5ii(l,s,r,c,e[d+7],10,1126891415),c=this.md5ii(c,l,s,r,e[d+14],15,-1416354905),r=this.md5ii(r,c,l,s,e[d+5],21,-57434055),s=this.md5ii(s,r,c,l,e[d+12],6,1700485571),l=this.md5ii(l,s,r,c,e[d+3],10,-1894986606),c=this.md5ii(c,l,s,r,e[d+10],15,-1051523),r=this.md5ii(r,c,l,s,e[d+1],21,-2054922799),s=this.md5ii(s,r,c,l,e[d+8],6,1873313359),l=this.md5ii(l,s,r,c,e[d+15],10,-30611744),c=this.md5ii(c,l,s,r,e[d+6],15,-1560198380),r=this.md5ii(r,c,l,s,e[d+13],21,1309151649),s=this.md5ii(s,r,c,l,e[d+4],6,-145523070),l=this.md5ii(l,s,r,c,e[d+11],10,-1120210379),c=this.md5ii(c,l,s,r,e[d+2],15,718787259),r=this.md5ii(r,c,l,s,e[d+9],21,-343485551),s=this.safeAdd(s,i),r=this.safeAdd(r,a),c=this.safeAdd(c,n),l=this.safeAdd(l,o);return[s,r,c,l]},binl2rstr:function(e){for(var t="",i=32*e.length,a=0;a<i;a+=8)t+=String.fromCharCode(e[a>>5]>>>a%32&255);return t},rstr2binl:function(e){var t=[];for(t[(e.length>>2)-1]=void 0,a=0;a<t.length;a+=1)t[a]=0;for(var i=8*e.length,a=0;a<i;a+=8)t[a>>5]|=(255&e.charCodeAt(a/8))<<a%32;return t},rstrMD5:function(e){return this.binl2rstr(this.binlMD5(this.rstr2binl(e),8*e.length))},rstrHMACMD5:function(e,t){var i,a=this.rstr2binl(e),n=[],o=[];for(n[15]=o[15]=void 0,16<a.length&&(a=this.binlMD5(a,8*e.length)),i=0;i<16;i+=1)n[i]=909522486^a[i],o[i]=1549556828^a[i];return t=this.binlMD5(n.concat(this.rstr2binl(t)),512+8*t.length),this.binl2rstr(this.binlMD5(o.concat(t),640))},rstr2hex:function(e){for(var t,i="",a=0;a<e.length;a+=1)t=e.charCodeAt(a),i+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return i},str2rstrUTF8:function(e){return unescape(encodeURIComponent(e))},rawMD5:function(e){return this.rstrMD5(this.str2rstrUTF8(e))},hexMD5:function(e){return this.rstr2hex(this.rawMD5(e))},rawHMACMD5:function(e,t){return this.rstrHMACMD5(this.str2rstrUTF8(e),str2rstrUTF8(t))},hexHMACMD5:function(e,t){return this.rstr2hex(this.rawHMACMD5(e,t))},md5:function(e,t,i){return t?i?this.rawHMACMD5(t,e):this.hexHMACMD5(t,e):i?this.rawMD5(e):this.hexMD5(e)},getSig:function(e,t,i,a){var n=null,o=[];return Object.keys(e).sort().forEach(function(t){o.push(t+"="+e[t])}),"search"==i&&(n="/ws/place/v1/search?"+o.join("&")+t),"suggest"==i&&(n="/ws/place/v1/suggestion?"+o.join("&")+t),"reverseGeocoder"==i&&(n="/ws/geocoder/v1/?"+o.join("&")+t),"geocoder"==i&&(n="/ws/geocoder/v1/?"+o.join("&")+t),"getCityList"==i&&(n="/ws/district/v1/list?"+o.join("&")+t),"getDistrictByCityId"==i&&(n="/ws/district/v1/getchildren?"+o.join("&")+t),"calculateDistance"==i&&(n="/ws/distance/v1/?"+o.join("&")+t),"direction"==i&&(n="/ws/direction/v1/"+a+"?"+o.join("&")+t),this.md5(n)},location2query:function(e){if("string"==typeof e)return e;for(var t="",i=0;i<e.length;i++){var a=e[i];t&&(t+=";"),a.location&&(t=t+a.location.lat+","+a.location.lng),a.latitude&&a.longitude&&(t=t+a.latitude+","+a.longitude)}return t},rad:function(e){return e*Math.PI/180},getEndLocation:function(e){for(var t=e.split(";"),i=[],a=0;a<t.length;a++)i.push({lat:parseFloat(t[a].split(",")[0]),lng:parseFloat(t[a].split(",")[1])});return i},getDistance:function(e,t,i,a){var n=this.rad(e);return i=n-(e=this.rad(i)),a=this.rad(t)-this.rad(a),a=2*Math.asin(Math.sqrt(Math.pow(Math.sin(i/2),2)+Math.cos(n)*Math.cos(e)*Math.pow(Math.sin(a/2),2))),a*=6378136.49,a=Math.round(1e4*a)/1e4,parseFloat(a.toFixed(0))},getWXLocation:function(e,t,i){wx.getFuzzyLocation({type:"gcj02",success:e,fail:t,complete:i})},getLocationParam:function(e){return"string"==typeof e?2===e.split(",").length?{latitude:e.split(",")[0],longitude:e.split(",")[1]}:{}:e},polyfillParam:function(e){e.success=e.success||function(){},e.fail=e.fail||function(){},e.complete=e.complete||function(){}},checkParamKeyEmpty:function(e,t){return!e[t]&&(t=this.buildErrorConfig(310,"\u8bf7\u6c42\u53c2\u6570\u4fe1\u606f\u6709\u8bef"+t+"\u53c2\u6570\u683c\u5f0f\u6709\u8bef"),e.fail(t),e.complete(t),!0)},checkKeyword:function(e){return!this.checkParamKeyEmpty(e,"keyword")},checkLocation:function(e){var t=this.getLocationParam(e.location);return!!(t&&t.latitude&&t.longitude)||(t=this.buildErrorConfig(310,"\u8bf7\u6c42\u53c2\u6570\u4fe1\u606f\u6709\u8bef location\u53c2\u6570\u683c\u5f0f\u6709\u8bef"),e.fail(t),e.complete(t),!1)},buildErrorConfig:function(e,t){return{status:e,message:t}},handleData:function(e,t,i){if("search"==i){for(var a=t.data,n=[],o=0;o<a.length;o++)n.push({id:a[o].id||null,title:a[o].title||null,latitude:a[o].location&&a[o].location.lat||null,longitude:a[o].location&&a[o].location.lng||null,address:a[o].address||null,category:a[o].category||null,tel:a[o].tel||null,adcode:a[o].ad_info&&a[o].ad_info.adcode||null,city:a[o].ad_info&&a[o].ad_info.city||null,district:a[o].ad_info&&a[o].ad_info.district||null,province:a[o].ad_info&&a[o].ad_info.province||null});e.success(t,{searchResult:a,searchSimplify:n})}else if("suggest"==i){var s=t.data,r=[];for(o=0;o<s.length;o++)r.push({adcode:s[o].adcode||null,address:s[o].address||null,category:s[o].category||null,city:s[o].city||null,district:s[o].district||null,id:s[o].id||null,latitude:s[o].location&&s[o].location.lat||null,longitude:s[o].location&&s[o].location.lng||null,province:s[o].province||null,title:s[o].title||null,type:s[o].type||null});e.success(t,{suggestResult:s,suggestSimplify:r})}else if("reverseGeocoder"==i){var c=t.result,l={address:c.address||null,latitude:c.location&&c.location.lat||null,longitude:c.location&&c.location.lng||null,adcode:c.ad_info&&c.ad_info.adcode||null,city:c.address_component&&c.address_component.city||null,district:c.address_component&&c.address_component.district||null,nation:c.address_component&&c.address_component.nation||null,province:c.address_component&&c.address_component.province||null,street:c.address_component&&c.address_component.street||null,street_number:c.address_component&&c.address_component.street_number||null,recommend:c.formatted_addresses&&c.formatted_addresses.recommend||null,rough:c.formatted_addresses&&c.formatted_addresses.rough||null};if(c.pois){var d=c.pois,h=[];for(o=0;o<d.length;o++)h.push({id:d[o].id||null,title:d[o].title||null,latitude:d[o].location&&d[o].location.lat||null,longitude:d[o].location&&d[o].location.lng||null,address:d[o].address||null,category:d[o].category||null,adcode:d[o].ad_info&&d[o].ad_info.adcode||null,city:d[o].ad_info&&d[o].ad_info.city||null,district:d[o].ad_info&&d[o].ad_info.district||null,province:d[o].ad_info&&d[o].ad_info.province||null});e.success(t,{reverseGeocoderResult:c,reverseGeocoderSimplify:l,pois:d,poisSimplify:h})}else e.success(t,{reverseGeocoderResult:c,reverseGeocoderSimplify:l})}else if("geocoder"==i){var u={title:(p=t.result).title||null,latitude:p.location&&p.location.lat||null,longitude:p.location&&p.location.lng||null,adcode:p.ad_info&&p.ad_info.adcode||null,province:p.address_components&&p.address_components.province||null,city:p.address_components&&p.address_components.city||null,district:p.address_components&&p.address_components.district||null,street:p.address_components&&p.address_components.street||null,street_number:p.address_components&&p.address_components.street_number||null,level:p.level||null};e.success(t,{geocoderResult:p,geocoderSimplify:u})}else if("getCityList"==i){var p=t.result[0],g=(u=t.result[1],t.result[2]);e.success(t,{provinceResult:p,cityResult:u,districtResult:g})}else if("getDistrictByCityId"==i)g=t.result[0],e.success(t,g);else if("calculateDistance"==i){var _=t.result.elements,m=[];for(o=0;o<_.length;o++)m.push(_[o].distance);e.success(t,{calculateDistanceResult:_,distance:m})}else"direction"==i?(i=t.result.routes,e.success(t,i)):e.success(t)},buildWxRequestConfig:function(e,t,i){var a=this;return t.header={"content-type":"application/json"},t.method="GET",t.success=function(t){0===(t=t.data).status?a.handleData(e,t,i):e.fail(t)},t.fail=function(t){t.statusCode=1e3,e.fail(a.buildErrorConfig(1e3,t.errMsg))},t.complete=function(t){switch(+t.statusCode){case 1e3:e.complete(a.buildErrorConfig(1e3,t.errMsg));break;case 200:var i=t.data;0===i.status?e.complete(i):e.complete(a.buildErrorConfig(i.status,i.message));break;default:e.complete(a.buildErrorConfig(600,"\u7cfb\u7edf\u9519\u8bef"))}},t},locationProcess:function(e,t,i,a){var n=this;i=i||function(t){t.statusCode=1e3,e.fail(n.buildErrorConfig(1e3,t.errMsg))},a=a||function(t){1e3==t.statusCode&&e.complete(n.buildErrorConfig(1e3,t.errMsg))},e.location?n.checkLocation(e)&&t(o.getLocationParam(e.location)):n.getWXLocation(t,i,a)}},s=((a=[{key:"search",value:function(e){var t,i,a,n,s;e=e||{},o.polyfillParam(e),o.checkKeyword(e)&&(t={keyword:e.keyword,orderby:e.orderby||"_distance",page_size:e.page_size||10,page_index:e.page_index||1,output:"json",key:this.key},e.address_format&&(t.address_format=e.address_format),e.filter&&(t.filter=e.filter),i=e.distance||"1000",a=e.auto_extend||1,s=n=null,e.region&&(n=e.region),e.rectangle&&(s=e.rectangle),o.locationProcess(e,function(r){t.boundary=n&&!s?"region("+n+","+a+","+r.latitude+","+r.longitude+")":s&&!n?"rectangle("+s+")":"nearby("+r.latitude+","+r.longitude+","+i+","+a+")",e.sig&&(t.sig=o.getSig(t,e.sig,"search")),wx.request(o.buildWxRequestConfig(e,{url:"https://apis.map.qq.com/ws/place/v1/search",data:t},"search"))}))}},{key:"getSuggestion",value:function(e){var t;e=e||{},o.polyfillParam(e),o.checkKeyword(e)&&(t={keyword:e.keyword,region:e.region||"\u5168\u56fd",region_fix:e.region_fix||0,policy:e.policy||0,page_size:e.page_size||10,page_index:e.page_index||1,get_subpois:e.get_subpois||0,output:"json",key:this.key},e.address_format&&(t.address_format=e.address_format),e.filter&&(t.filter=e.filter),e.location?o.locationProcess(e,function(i){t.location=i.latitude+","+i.longitude,e.sig&&(t.sig=o.getSig(t,e.sig,"suggest")),wx.request(o.buildWxRequestConfig(e,{url:n,data:t},"suggest"))}):(e.sig&&(t.sig=o.getSig(t,e.sig,"suggest")),wx.request(o.buildWxRequestConfig(e,{url:n,data:t},"suggest"))))}},{key:"reverseGeocoder",value:function(e){e=e||{},o.polyfillParam(e);var t={coord_type:e.coord_type||5,get_poi:e.get_poi||0,output:"json",key:this.key};e.poi_options&&(t.poi_options=e.poi_options),o.locationProcess(e,function(i){t.location=i.latitude+","+i.longitude,e.sig&&(t.sig=o.getSig(t,e.sig,"reverseGeocoder")),wx.request(o.buildWxRequestConfig(e,{url:"https://apis.map.qq.com/ws/geocoder/v1/",data:t},"reverseGeocoder"))})}},{key:"geocoder",value:function(e){var t;o.polyfillParam(e=e||{}),o.checkParamKeyEmpty(e,"address")||(t={address:e.address,output:"json",key:this.key},e.region&&(t.region=e.region),e.sig&&(t.sig=o.getSig(t,e.sig,"geocoder")),wx.request(o.buildWxRequestConfig(e,{url:"https://apis.map.qq.com/ws/geocoder/v1/",data:t},"geocoder")))}},{key:"getCityList",value:function(e){o.polyfillParam(e=e||{});var t={output:"json",key:this.key};e.sig&&(t.sig=o.getSig(t,e.sig,"getCityList")),wx.request(o.buildWxRequestConfig(e,{url:"https://apis.map.qq.com/ws/district/v1/list",data:t},"getCityList"))}},{key:"getDistrictByCityId",value:function(e){var t;o.polyfillParam(e=e||{}),o.checkParamKeyEmpty(e,"id")||(t={id:e.id||"",output:"json",key:this.key},e.sig&&(t.sig=o.getSig(t,e.sig,"getDistrictByCityId")),wx.request(o.buildWxRequestConfig(e,{url:"https://apis.map.qq.com/ws/district/v1/getchildren",data:t},"getDistrictByCityId")))}},{key:"calculateDistance",value:function(e){var t,i;e=e||{},o.polyfillParam(e),o.checkParamKeyEmpty(e,"to")||(t={mode:e.mode||"walking",to:o.location2query(e.to),output:"json",key:this.key},e.from&&(e.location=e.from),i="straight"==t.mode?function(i){for(var a=o.getEndLocation(t.to),n={message:"query ok",result:{elements:[]},status:0},s=0;s<a.length;s++)n.result.elements.push({distance:o.getDistance(i.latitude,i.longitude,a[s].lat,a[s].lng),duration:0,from:{lat:i.latitude,lng:i.longitude},to:{lat:a[s].lat,lng:a[s].lng}});var r=n.result.elements,c=[];for(s=0;s<r.length;s++)c.push(r[s].distance);return e.success(n,{calculateResult:r,distanceResult:c})}:function(i){t.from=i.latitude+","+i.longitude,e.sig&&(t.sig=o.getSig(t,e.sig,"calculateDistance")),wx.request(o.buildWxRequestConfig(e,{url:"https://apis.map.qq.com/ws/distance/v1/",data:t},"calculateDistance"))},o.locationProcess(e,i))}},{key:"direction",value:function(e){var t,i;e=e||{},o.polyfillParam(e),o.checkParamKeyEmpty(e,"to")||(t={output:"json",key:this.key},"string"==typeof e.to?t.to=e.to:t.to=e.to.latitude+","+e.to.longitude,e.mode=e.mode||"driving",i="https://apis.map.qq.com/ws/direction/v1/"+e.mode,e.from&&(e.location=e.from),"driving"==e.mode&&(e.from_poi&&(t.from_poi=e.from_poi),e.heading&&(t.heading=e.heading),e.speed&&(t.speed=e.speed),e.accuracy&&(t.accuracy=e.accuracy),e.road_type&&(t.road_type=e.road_type),e.to_poi&&(t.to_poi=e.to_poi),e.from_track&&(t.from_track=e.from_track),e.waypoints&&(t.waypoints=e.waypoints),e.policy&&(t.policy=e.policy),e.plate_number&&(t.plate_number=e.plate_number)),"transit"==e.mode&&(e.departure_time&&(t.departure_time=e.departure_time),e.policy&&(t.policy=e.policy)),o.locationProcess(e,function(a){t.from=a.latitude+","+a.longitude,e.sig&&(t.sig=o.getSig(t,e.sig,"direction",e.mode)),wx.request(o.buildWxRequestConfig(e,{url:i,data:t},"direction"))}))}}])&&function(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}(r.prototype,a),r);function r(e){if(function(e){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),!e.key)throw Error("key\u503c\u4e0d\u80fd\u4e3a\u7a7a");this.key=e.key}i.exports=s,cc._RF.pop()},{}],use_reversed_rotateTo:[function(e,t){"use strict";cc._RF.push(t,"1d4b93nVJZE2rNJtcAtRvl+","use_reversed_rotateTo"),cc.RotateTo._reverse=!0,cc._RF.pop()},{}],zh:[function(e,t){"use strict";cc._RF.push(t,"17630yWJQ5IZqU0BMq5xsw2","zh"),window.i18n||(window.i18n={}),window.i18n.languages||(window.i18n.languages={}),window.i18n.languages.zh={GameText:{2001:"\u5173\u7fbd",2002:"\u5f20\u98de",2003:"\u5218\u5907",2004:"\u8c82\u8749",2005:"\u9ec4\u5fe0",2006:"\u5415\u5e03",2007:"\u8bf8\u845b\u4eae",2008:"\u5b59\u5c1a\u9999",2009:"\u5c0f\u4e54",2010:"\u8d75\u4e91",2011:"\u66f9\u64cd",2012:"\u5f20\u89d2",2013:"\u5468\u745c",2014:"\u5178\u97e6",2015:"\u53f8\u9a6c\u61ff",2016:"\u9a6c\u8d85",2017:"\u5e9e\u5fb7",2018:"\u5b59\u6743",2019:"\u8463\u5353",2020:"\u9646\u900a",2021:"\u771f\xb7\u5173\u7fbd",2022:"\u771f\xb7\u5f20\u98de",2023:"\u771f\xb7\u8bf8\u845b\u4eae",2101:"\u7528\u4e8e\u96c6\u5e02\u4e2d\u62bd\u53d6\u82f1\u96c4\u788e\u7247\u3001\u5151\u6362\u901a\u7528\u8d27\u5e01\u3001\u8d2d\u4e70\u4f53\u529b\u7b49\uff0c\u901a\u8fc7\u96c6\u5e02\u3001\u5173\u5361\u3001\u5b98\u804c\u3001\u7b7e\u5230\u3001\u4efb\u52a1\u83b7\u5f97",2102:"\u7528\u4e8e\u63d0\u5347\u9632\u5fa1\u5854\u7b49\u7ea7\uff0c\u901a\u8fc7\u5173\u5361\u3001\u96c6\u5e02\u3001\u4efb\u52a1\u3001\u6302\u673a\u83b7\u5f97",2103:"\u5173\u5361\u5185\u8d27\u5e01\uff0c\u7528\u4e8e\u6218\u6597\u4e2d\u5efa\u9020\u548c\u5347\u7ea7\u9632\u5fa1\u5854\uff0c\u901a\u8fc7\u6218\u6597\u4e2d\u6740\u602a\u83b7\u5f97",2104:"\u6218\u6597\u751f\u547d\u503c\uff0c\u7528\u4e8e\u5224\u5b9a\u6218\u6597\u80dc\u8d1f",2105:"\u5347\u7ea7\u5b98\u804c\u6240\u9700\uff0c\u9996\u6b21\u901a\u5173\u83b7\u5f97",2106:"\u7528\u4e8e\u63d0\u5347\u82f1\u96c4\u7b49\u7ea7\uff0c\u901a\u8fc7\u5173\u5361\u3001\u96c6\u5e02\u3001\u6302\u673a\u83b7\u5f97",2107:"\u7528\u4e8e\u6218\u6597\u6d88\u8017\uff0c\u6bcf\u6b21\u6218\u6597\u9700\u89815\u4f53\u529b\u503c\uff0c\u56fa\u5b9a\u65f6\u95f4\u6062\u590d1\u70b9\u4f53\u529b\uff0c\u53ef\u5143\u5b9d\u8d2d\u4e70",2108:"\u81f3\u5c0a\u5b9d\u7bb1\u62bd\u5956\u5238\uff0c\u53ef\u5728\u96c6\u5e02\u4e2d\u5f00\u542f\u5b9d\u7bb1\uff0c\u901a\u8fc7\u661f\u661f\u5b9d\u7bb1\u3001\u4efb\u52a1\u3001\u6218\u4e2d\u5b9d\u7bb1\u83b7\u5f97",2201:"4\u7ea7\u7bad\u5854-\u5c0f\u4e54",2202:"4\u7ea7\u7bad\u5854-\u9ec4\u5fe0",2203:"4\u7ea7\u5175\u8425-\u5f20\u98de",2204:"4\u7ea7\u5175\u8425-\u5415\u5e03",2205:"4\u7ea7\u5175\u8425-\u771f\xb7\u5f20\u98de",2206:"4\u7ea7\u70ae\u5854-\u5173\u7fbd",2207:"4\u7ea7\u70ae\u5854-\u5218\u5907",2208:"4\u7ea7\u70ae\u5854-\u771f\xb7\u5173\u7fbd",2209:"4\u7ea7\u6cd5\u5e08\u5854-\u8bf8\u845b\u4eae",2210:"4\u7ea7\u6cd5\u5e08\u5854-\u8c82\u8749",2211:"4\u7ea7\u6cd5\u5e08\u5854-\u771f\xb7\u8bf8\u845b\u4eae",2212:"4\u7ea7\u7bad\u5854-\u5b59\u5c1a\u9999",2213:"4\u7ea7\u5175\u8425-\u8d75\u4e91",2214:"4\u7ea7\u70ae\u5854-\u66f9\u64cd",2215:"4\u7ea7\u6cd5\u5e08\u5854-\u5f20\u89d2",2216:"4\u7ea7\u5175\u8425-\u5178\u97e6",2301:"\u5979\u7684\u7bad\u77e2\u4e0a\u6d82\u6ee1\u4e86\u6bd2\u836f\uff0c\u53ef\u4ee5\u5bf9\u76ee\u6807\u9020\u6210\u6301\u7eed\u4f24\u5bb3\uff0c\u679c\u7136\u201c\u6700\u6bd2\u5987\u4eba\u5fc3\u201d",2302:"\u4e09\u56fd\u65f6\u671f\u8457\u540d\u7684\u7684\u795e\u5c04\u624b\uff0c\u4ed6\u5c04\u51fa\u53bb\u7684\u7bad\u77e2\u66f4\u5f3a\u66f4\u8fdc\uff0c\u80fd\u591f\u6709\u6548\u7684\u963b\u6b62\u654c\u4eba\u9760\u8fd1\u7ec8\u70b9",2303:"\u751f\u5b58\u80fd\u529b\u6700\u51fa\u4f17\u7684\u82f1\u96c4\uff0c\u4e00\u58f0\u6012\u543c\u7fa4\u654c\u9000\u6563",2304:"\u4e09\u56fd\u6700\u5f3a\uff0c\u53ef\u8fdc\u653b\u53ef\u8fd1\u6218\uff0c\u53ef\u8c13\u201c\u9a81\u52c7\u65e0\u654c\uff0c\u5584\u6218\u65e0\u524d\u201d",2305:"\u751f\u5b58\u80fd\u529b\u6700\u51fa\u4f17\u7684\u82f1\u96c4\uff0c\u4e00\u58f0\u6012\u543c\u7fa4\u654c\u9000\u6563",2306:"\u5fe0\u4e49\u8fc7\u4eba\uff0c\u4e07\u4eba\u654c\uff0c\u540e\u4e16\u79f0\u4e3a\u201c\u6b66\u5723\u201d\uff0c\u4ed6\u7684\u6280\u80fd\u62e5\u6709\u6700\u5927\u7684\u4f24\u5bb3\u8303\u56f4",2307:"\u7d20\u4ee5\u4ec1\u5fb7\u4e3a\u4e16\u4eba\u79f0\u8d5e\uff0c\u4f46\u662f\u4ed6\u4e3a\u4ec0\u4e48\u8981\u5077\u5077\u57cb\u96f7",2308:"\u5fe0\u4e49\u8fc7\u4eba\uff0c\u4e07\u4eba\u654c\uff0c\u540e\u4e16\u79f0\u4e3a\u201c\u6b66\u5723\u201d\uff0c\u4ed6\u7684\u6280\u80fd\u62e5\u6709\u6700\u5927\u7684\u4f24\u5bb3\u8303\u56f4",2309:"\u667a\u8c0b\u65e0\u53cc\uff0c\u638c\u63a7\u96f7\u706b\uff0c\u53ef\u79f0\u201c\u4e24\u6c49\u4ee5\u6765\u65e0\u53cc\u58eb\uff0c\u4e09\u4ee3\u800c\u540e\u7b2c\u4e00\u4eba\u201d",2310:"\u7edd\u4e16\u4e4b\u59ff\uff0c\u9b45\u60d1\u4f17\u751f\uff0c\u6b63\u5982\u201c\u7f8e\u8c8c\u662f\u79cd\u7f6a\u5b7d\uff0c\u66b4\u96ea\u4e5f\u65e0\u6cd5\u63a9\u57cb\u201d",2311:"\u667a\u8c0b\u65e0\u53cc\uff0c\u638c\u63a7\u96f7\u706b\uff0c\u53ef\u79f0\u201c\u4e24\u6c49\u4ee5\u6765\u65e0\u53cc\u58eb\uff0c\u4e09\u4ee3\u800c\u540e\u7b2c\u4e00\u4eba\u201d",2312:"\u957f\u4e8e\u6b66\u827a\uff0c\u4e0d\u670d\u8f93\u7684\u6027\u683c\uff0c\u5728\u6218\u573a\u4e0a\u603b\u662f\u8eab\u5148\u58eb\u5352\uff0c\u4e0d\u8ba9\u987b\u7709\u3002\u517c\u5177\u9ad8\u5f3a\u6b66\u827a\u4e0e\u8fc7\u4eba\u7f8e\u8c8c\uff0c\u4eba\u79f0\u201c\u5f13\u8170\u59ec\u201d",2313:"\u4e94\u864e\u5c06\u4e4b\u4e00\uff0c\u540e\u4e16\u8bc4\u4ef7\u201c\u667a\u52c7\u517c\u5168\u3002\u5b50\u9f99\u53ef\u8c13\u6709\u53e4\u5927\u81e3\u4e4b\u98ce\u201d",2314:"\u5e1d\u4ee5\u96c4\u6b66\u4e4b\u59ff\uff0c\u5e38\u8270\u96be\u4e4b\u8fd0\u3002\u680b\u6881\u4e4b\u4efb\uff0c\u540c\u4e4e\u66e9\u65f6\uff1b\u5321\u6b63\u4e4b\u529f\uff0c\u5f02\u4e4e\u5f80\u4ee3",2315:"\u82cd\u5929\u5df2\u6b7b\uff0c\u9ec4\u5929\u5f53\u7acb\uff0c\u5c81\u5728\u7532\u5b50\uff0c\u5929\u4e0b\u5927\u5409",82316:"\u5f62\u8c8c\u9b41\u68a7\uff0c\u8182\u529b\u8fc7\u4eba\uff0c\u6709\u5927\u5fd7\u6c14\u8282\uff0c\u6027\u683c\u4efb\u4fa0",200001:"<outline\xa0color=#000000\xa0width=1><color=#ffffff>\u58eb\u5175\u653b\u51fb<color=#fff000>+{0}%</color></color></outline>",200002:"<outline\xa0color=#000000\xa0width=1><color=#ffffff>\u5168\u90e8\u653b\u51fb<color=#fff000>+{0}%</color></color></outline>",200003:"<outline\xa0color=#000000\xa0width=1><color=#ffffff>\u653b\u901f<color=#fff000>+{0}%</color></color></outline>",200004:"<outline\xa0color=#000000\xa0width=1><color=#ffffff>\u5168\u90e8\u653b\u901f<color=#fff000>+{0}%</color></color></outline>",200005:"<outline\xa0color=#000000\xa0width=1><color=#ffffff>\u653b\u51fb\u8303\u56f4<color=#fff000>+{0}%</color></color></outline>",200006:"<outline\xa0color=#000000\xa0width=1><color=#ffffff>\u5168\u90e8\u653b\u51fb\u8303\u56f4<color=#fff000>+{0}%</color></color></outline>",200007:"<outline\xa0color=#000000\xa0width=1><color=#ffffff>\u66b4\u51fb\u6982\u7387<color=#fff000>+{0}%</color></color></outline>",200008:"<outline\xa0color=#000000\xa0width=1><color=#ffffff>\u5168\u90e8\u66b4\u51fb\u6982\u7387<color=#fff000>+{0}%</color></color></outline>",200009:"<outline\xa0color=#000000\xa0width=1><color=#ffffff>\u5168\u90e8\u66b4\u51fb\u4f24\u5bb3<color=#fff000>+{0}%</color></color></outline>",200010:"<color=#3f200c>\u7bad\u5854\u653b\u51fb\u6709<color=#409800>{1}%</color>\u6982\u7387\u4f7f\u76ee\u6807\u7729\u6655<color=#409800>{2}</color>\u79d2</color>",200011:"<color=#3f200c>\u6cd5\u672f\u5854\u653b\u51fb\u6709<color=#409800>{1}%</color>\u6982\u7387\u4f7f\u76ee\u6807\u7729\u6655<color=#409800>{2}</color>\u79d2</color>",200012:"<color=#3f200c>\u62db\u52df\u7684\u58eb\u5175\u88ab\u653b\u51fb\u6709<color=#409800>{1}%</color>\u6982\u7387\u5c06\u53d7\u5230\u4f24\u5bb3\u7684<color=#409800>{0}%</color>\u53cd\u4f24\u5230\u653b\u51fb\u8005</color>",200013:"<color=#3f200c>\u7bad\u5854\u653b\u51fb\u65f6\u6709<color=#409800>{1}%</color>\u7684\u6982\u7387\u53d1\u5c04\u4e00\u53ea\u706b\u7bad\u9020\u6210<color=#409800>{0}%</color>\u7206\u70b8\u4f24\u5bb3</color>",200014:"<color=#3f200c>\u70ae\u5854\u653b\u51fb\u65f6\u6709<color=#409800>{1}%</color>\u7684\u51e0\u7387\u89e6\u53d1\u8fde\u5c04\u6548\u679c</color>",200015:"<color=#3f200c>\u6cd5\u672f\u5854\u653b\u51fb\u65f6\u4f1a\u51cf\u5c11\u76ee\u6807<color=#409800>{0}%</color>\u7684\u7269\u7406\u9632\u5fa1\uff0c\u6700\u591a\u51cf\u5c11<color=#409800>{3}%</color></color>",200016:"<color=#3f200c>\u51fb\u6740\u602a\u7269\u83b7\u5f97\u7684\u9668\u94c1\u6709<color=#409800>{1}%</color>\u6982\u7387\u589e\u52a0<color=#409800>{0}%</color></color>",200017:"<color=#3f200c>\u51fa\u552e\u9632\u5fa1\u5854\u65f6\u6240\u5f97\u9668\u94c1\u589e\u52a0<color=#409800>{0}%</color></color>",200018:"<color=#3f200c>\u6211\u65b9\u5355\u4f4d\u6218\u4e2d\u53ef\u56de\u8840</color>",200019:"<color=#3f200c>\u5929\u8d4b\u6280\u80fd\u51b7\u5374\u65f6\u95f4\u51cf\u5c11<color=#409800>{0}%</color></color>",200020:"<color=#006cff>\u83b7\u5f97\u65b0\u82f1\u96c4 </color><color=#b925e9>{0}</color>",200021:"<color=#000>\u5546\u5e97\u5e7f\u544a\u5f97\u5143\u5b9d\u6b21\u6570:</color><outline\xa0color=#000000\xa0width=2><color=#3cff00>{0}</color><color=#fff000>\uff08+{1}\uff09</color></outline>",200022:"<color=#000>\u5546\u5e97\u5e7f\u544a\u5f00\u5b9d\u7bb1\u6b21\u6570:</color><outline\xa0color=#000000\xa0width=2><color=#3cff00>{0}</color><color=#fff000>\uff08+{1}\uff09</color></outline>",200023:"<color=#000>\u5546\u5e97\u5e7f\u544a\u5f97\u94dc\u5e01\u6b21\u6570:<outline\xa0color=#000000\xa0width=2><color=#3cff00>{0}</color><color=#fff000>\uff08+{1}\uff09</color></outline></color>",200024:"<color=#000>\u5546\u5e97\u5e7f\u544a\u5f97\u7ecf\u9a8c\u6b21\u6570:<outline\xa0color=#000000\xa0width=2><color=#3cff00>{0}</color><color=#fff000>\uff08+{1}\uff09</color></outline></color>",200025:"<color=#000>\u6218\u4e2d\u5b9d\u7bb1\u6bcf\u65e5\u6b21\u6570:<outline\xa0color=#000000\xa0width=2><color=#3cff00>{0}</color><color=#fff000>\uff08+{1}\uff09</color></outline></color>",200026:"<color=#000>\u6218\u6597\u7ed3\u7b97\u5e7f\u544a\u9886\u53d6\u500d\u6570:<outline\xa0color=#000000\xa0width=2><color=#3cff00>{0}</color><color=#fff000>\uff08+{1}\uff09</color></outline></color>",200027:"<color=#000>\u5e7f\u544a\u6302\u673a\u6536\u76ca\u6bcf\u65e5\u6b21\u6570:<outline\xa0color=#000000\xa0width=2><color=#3cff00>{0}</color><color=#fff000>\uff08+{1}\uff09</color></outline></color>",200028:"<color=#000>\u6218\u4e2d\u6ce2\u6b21\u53ec\u5524\u654c\u4eba\u9668\u94c1\u76f4\u63a5\u83b7\u5f97</color>",200029:"<color=#000>\u8fdb\u5165\u6218\u6597\u989d\u5916\u83b7\u5f97\u9668\u94c1:<outline\xa0color=#000000\xa0width=2><color=#3cff00>{0}</color><color=#fff000>\uff08+{1}\uff09</color></color></outline>",200030:"<color=#000>\u6218\u6597\u52a0\u901f\u500d\u6570:</color><outline\xa0color=#000000\xa0width=2><color=#3cff00>{0}</color><color=#fff000>\uff08+{1}\uff09</color></color></outline>",200031:"<color=#000>\u6218\u6597\u4e2d\u53ef\u4f7f\u75282\u4e2a\u5148\u950b</color>",200032:"<color=#000>\u5546\u5e97\u62bd\u6280\u80fd\u788e\u7247\u6b21\u6570:<outline\xa0color=#000000\xa0width=2><color=#3cff00>{0}</color><color=#fff000>\uff08+{1}\uff09</color></color></outline></color>",200033:"<color=#000>\u5feb\u901f\u6302\u673a\u5e7f\u544a\u9886\u53d6\u500d\u6570:<outline\xa0color=#000000\xa0width=2><color=#3cff00>{0}</color><color=#fff000>\uff08+{1}\uff09</color></color></outline></color>",200034:"<color=#000>\u6218\u6597\u4e2d\u76f4\u63a5\u5efa\u9020\u8bd5\u7528\u5c06\u5854</color>",200035:"<color=#000>\u9a7b\u5b88\u9ad8\u7ea7\u9886\u53d6\u52a0\u6210:<outline\xa0color=#000000\xa0width=2><color=#3cff00>{0}</color><color=#fff000>\uff08+{1}\uff09</color></color></outline></color>",200036:"<color=#000>\u4e00\u952e\u9a7b\u5b88\u9886\u5730</color>",3e3:"\u5173\u7fbd\u788e\u7247",3001:"\u5f20\u98de\u788e\u7247",3002:"\u5218\u5907\u788e\u7247",3003:"\u5c0f\u4e54\u788e\u7247",3004:"\u9ec4\u5fe0\u788e\u7247",3005:"\u5415\u5e03\u788e\u7247",3006:"\u8bf8\u845b\u4eae\u788e\u7247",3007:"\u8c82\u8749\u788e\u7247",3008:"\u771f\xb7\u5173\u7fbd\u788e\u7247",3009:"\u771f\xb7\u5f20\u98de\u788e\u7247",3010:"\u771f\xb7\u8bf8\u845b\u4eae\u788e\u7247",3011:"\u5b59\u5c1a\u9999\u788e\u7247",3012:"\u8d75\u4e91\u788e\u7247",3013:"\u66f9\u64cd\u788e\u7247",3014:"\u5f20\u89d2\u788e\u7247",3015:"\u5178\u97e6\u788e\u7247",3101:"\u5175\u8425\u58eb\u5175\u653b\u51fb\u63d0\u5347{0}%",3102:"\u6240\u6709\u5854\u653b\u51fb\u63d0\u5347{0}%",3103:"\u6cd5\u5e08\u5854\u653b\u901f\u63d0\u5347{0}%",3104:"\u6240\u6709\u5854\u653b\u901f\u63d0\u5347{0}%",3105:"\u70ae\u5854\u653b\u51fb\u8303\u56f4\u63d0\u5347{0}%",3106:"\u6240\u6709\u5854\u653b\u51fb\u8303\u56f4\u63d0\u5347{0}%",3107:"\u7bad\u5854\u66b4\u51fb\u6982\u7387\u589e\u52a0{0}%",3108:"\u6240\u6709\u5854\u66b4\u51fb\u6982\u7387\u589e\u52a0{0}%",3109:"\u6240\u6709\u5854\u66b4\u51fb\u4f24\u5bb3\u589e\u52a0{0}%",3110:"\u7bad\u5854\u653b\u51fb\u6709{1}%\u6982\u7387\u7729\u6655\u76ee\u6807",3111:"\u6cd5\u5e08\u5854\u653b\u51fb\u6709{1}%\u6982\u7387\u7729\u6655\u76ee\u6807",3112:"\u5175\u8425\u58eb\u5175\u4f24\u5bb3\u7684{0}%\u53cd\u4f24\u7ed9\u653b\u51fb\u8005",3113:"\u7bad\u5854\u6982\u7387\u989d\u5916\u53d1\u5c04\u4e00\u53ea\u7206\u70b8\u7bad",3114:"\u70ae\u5854\u6982\u7387\u989d\u5916\u53d1\u5c04\u4e00\u679a\u70ae\u5f39",3115:"\u6cd5\u5e08\u5854\u964d\u4f4e\u5bf9\u65b9{0}%\u7684\u7269\u7406\u9632\u5fa1",3116:"\u9668\u94c1\u6389\u843d\u6709{1}%\u6982\u7387\u7ffb\u500d",3117:"\u5854\u51fa\u552e\u4ef7\u683c\u63d0\u5347{0}%",3118:"\u6211\u65b9\u5355\u4f4d\u6218\u4e2d\u53ef\u56de\u8840",3119:"\u6280\u80fd\u51b7\u5374\u65f6\u95f4\u51cf\u5c11{0}%",3120:"\u4f60\u7684\u6302\u673a\u6536\u76ca\u5df2\u6ee1\uff0c\u5feb\u53bb\u9886\u53d6{0}\u94dc\u5e01\u3001{1}\u82f1\u96c4\u7ecf\u9a8c\uff01",3121:"\u4f60\u7684\u82f1\u96c4\u5df2\u7ecf\u6574\u88c5\u5f85\u53d1\uff0c\u7b49\u5f85\u4f60\u7684\u4e00\u58f0\u4ee4\u4e0b\uff01",3122:"\u4f60\u67091\u4e2a\u514d\u8d39\u81f3\u5c0a\u5b9d\u7bb1\u53ef\u4f7f\u7528\uff01",3123:"\u4f60\u4eca\u65e5\u8fd8\u6709{0}\u6b21\u514d\u8d39\u9886\u53d6\u8d44\u6e90\u7684\u673a\u4f1a\u54e6\uff01\u522b\u6d6a\u8d39\u6389\u5566\uff01",3124:"\u4f60\u7684\u6302\u673a\u6536\u76ca\u589e\u52a0\u4e86\uff0c\u5feb\u53bb\u9886\u53d6{0}\u94dc\u5e01\u3001{1}\u82f1\u96c4\u7ecf\u9a8c\uff01",3125:"\u5b8c\u6210\u4eca\u65e5VIP\u4efb\u52a1\uff0c\u5373\u53ef\u5347\u7ea7\u5230VIP{0}\uff0c\u62e5\u6709\u66f4\u591a\u7279\u6743\uff01",3126:"\u8fdb\u519b\u56e2\uff0c\u6253\u5e74\u517d\uff0c\u9886\u82f1\u96c4\uff01\u4f60\u4eca\u65e5\u7684\u6625\u8282\u5927\u793c\u5305\u8fd8\u672a\u9886\u53d6\u54e6\uff01",3201:"\u95ea\u7535\u98ce\u66b4",3202:"\u62db\u5175(\u6b65)",3203:"\u4f20\u9001",3204:"\u62db\u5175(\u5f13)",3205:"\u5e03\u96f7",3206:"\u6bd2\u7bad\u96e8",3207:"\u51db\u51ac\u5df2\u81f3",3208:"\u9006\u8f6c\u5929\u673a",3301:"\u4ece\u5929\u800c\u964d\u7684\u95ea\u7535\u5bf9\u8303\u56f4\u5185\u7684\u76ee\u6807\u9020\u6210{1}\u70b9\u4f24\u5bb3\uff0c\u6700\u591a\u843d\u4e0b{0}\u9053\u95ea\u7535",3302:"\u53ec\u5524{0}\u4e2a\u6b65\u5175\u52a9\u6218\uff0c\u6280\u80fd\u7b49\u7ea7\u8d8a\u9ad8\u6b65\u5175\u5c5e\u6027\u8d8a\u5f3a",3303:"\u4f7f\u8303\u56f4\u5185\u6700\u591a{2}\u4e2a\u76ee\u6807\u56de\u9000{0}\u7801\u8ddd\u79bb\uff0c\u5e76\u7729\u6655{1}\u79d2",3304:"\u53ec\u5524{0}\u4e2a\u5f13\u5175\u52a9\u6218\uff0c\u6280\u80fd\u7b49\u7ea7\u8d8a\u9ad8\u5f13\u5175\u5c5e\u6027\u8d8a\u5f3a",3305:"\u5e03\u7f6e{0}\u9897\u5730\u96f7\uff0c\u6bcf\u9897\u5730\u96f7\u7206\u70b8\u5bf9\u8303\u56f4\u5185\u654c\u4eba\u9020\u6210{1}\u70b9\u4f24\u5bb3\uff0c\u5e76\u7729\u6655\u654c\u4eba{2}\u79d2",3306:"\u4ece\u5929\u800c\u964d\u7684{0}\u53ea\u6bd2\u7bad\uff0c\u88ab\u6bd2\u7bad\u51fb\u4e2d\u7684\u76ee\u6807\u4f1a\u53d7\u5230{1}\u70b9\u4f24\u5bb3\uff0c\u5e76\u6bcf\u79d2\u4f1a\u9020\u6210{2}\u70b9\u4f24\u5bb3\uff0c\u6301\u7eed{3}\u79d2",3307:"\u654c\u65b9\u5168\u90e8\u5355\u4f4d\u653b\u51fb\u901f\u5ea6\u964d\u4f4e{0}%\uff0c\u79fb\u52a8\u901f\u5ea6\u964d\u4f4e{1}%\uff0c\u6301\u7eed{2}\u79d2",3308:"\u6211\u65b9\u5168\u90e8\u5355\u4f4d\u653b\u51fb\u529b\u63d0\u5347{0}%\uff0c\u653b\u51fb\u901f\u5ea6\u63d0\u5347{1}%\uff0c\u6301\u7eed{2}\u79d2",3309:"\u4f7f\u8303\u56f4\u5185\u6700\u591a{2}\u4e2a\u76ee\u6807\u56de\u9000{0}\u7801\u8ddd\u79bb",3401:"\u95ea\u7535\u98ce\u66b4\u788e\u7247",3402:"\u62db\u5175(\u6b65)\u788e\u7247",3403:"\u4f20\u9001\u788e\u7247",3404:"\u62db\u5175(\u5f13)\u788e\u7247",3405:"\u5e03\u96f7\u788e\u7247",3406:"\u6bd2\u7bad\u96e8\u788e\u7247",3407:"\u51db\u51ac\u5df2\u81f3\u788e\u7247",3408:"\u9006\u8f6c\u5929\u673a\u788e\u7247",3501:"\u5347\u7ea7\u95ea\u7535\u98ce\u66b4\u6240\u9700\u788e\u7247",3502:"\u5347\u7ea7\u62db\u5175(\u6b65)\u6240\u9700\u788e\u7247",3503:"\u5347\u7ea7\u4f20\u9001\u6240\u9700\u788e\u7247",3504:"\u5347\u7ea7\u62db\u5175(\u5f13)\u6240\u9700\u788e\u7247",3505:"\u5347\u7ea7\u5e03\u96f7\u6240\u9700\u788e\u7247",3506:"\u5347\u7ea7\u6bd2\u7bad\u96e8\u6240\u9700\u788e\u7247",3507:"\u5347\u7ea7\u51db\u51ac\u5df2\u81f3\u6240\u9700\u788e\u7247",3508:"\u5347\u7ea7\u9006\u8f6c\u5929\u673a\u6240\u9700\u788e\u7247",4001:"\u621f\u5175(\u7eff)",4002:"\u86ee\u5175(\u7eff)",4003:"\u98ce\u7b5d\u5175(\u7eff)",4004:"\u533b\u5b98(\u7eff)",4005:"\u5f29\u5175(\u7eff)",4006:"\u76fe\u5175(\u7eff)",4007:"\u8c0b\u7565\u5bb6(\u7eff)",4008:"\u5996\u672f\u5e08(\u7eff)",4009:"\u5200\u5175(\u7eff)",4010:"\u9aa0\u5200\u9a91(\u7eff)",4011:"\u5b54\u660e\u98de\u5175(\u7eff)",4012:"\u85e4\u7532\u5175(\u7eff)",4013:"\u6295\u77f3\u8f66(\u7eff)",4014:"\u767d\u8033\u519b(\u7eff)",4015:"\u6478\u91d1\u6821\u5c09(\u7eff)",4016:"\u81ea\u7206\u5175(\u7eff)",4017:"\u997f\u72fc(\u7070)",4018:"\u621f\u5175(\u84dd)",4019:"\u86ee\u5175(\u84dd)",4020:"\u98ce\u7b5d\u5175(\u84dd)",4021:"\u533b\u5b98(\u84dd)",4022:"\u5f29\u5175(\u84dd)",4023:"\u76fe\u5175(\u84dd)",4024:"\u8c0b\u7565\u5bb6(\u84dd)",4025:"\u5996\u672f\u5e08(\u84dd)",4026:"\u5200\u5175(\u84dd)",4027:"\u9aa0\u5200\u9a91(\u84dd)",4028:"\u5b54\u660e\u98de\u5175(\u84dd)",4029:"\u85e4\u7532\u5175(\u84dd)",4030:"\u6295\u77f3\u8f66(\u84dd)",4031:"\u767d\u8033\u519b(\u84dd)",4032:"\u6478\u91d1\u6821\u5c09(\u84dd)",4033:"\u81ea\u7206\u5175(\u84dd)",4034:"\u997f\u72fc(\u767d)",4035:"\u621f\u5175(\u6df1\u84dd)",4036:"\u86ee\u5175(\u6df1\u84dd)",4037:"\u98ce\u7b5d\u5175(\u6df1\u84dd)",4038:"\u533b\u5b98(\u6df1\u84dd)",4039:"\u5f29\u5175(\u6df1\u84dd)",4040:"\u76fe\u5175(\u6df1\u84dd)",4041:"\u8c0b\u7565\u5bb6(\u6df1\u84dd)",4042:"\u5996\u672f\u5e08(\u6df1\u84dd)",4043:"\u5200\u5175(\u6df1\u84dd)",4044:"\u9aa0\u5200\u9a91(\u6df1\u84dd)",4045:"\u5b54\u660e\u98de\u5175(\u6df1\u84dd)",4046:"\u85e4\u7532\u5175(\u6df1\u84dd)",4047:"\u6295\u77f3\u8f66(\u6df1\u84dd)",4048:"\u767d\u8033\u519b(\u6df1\u84dd)",4049:"\u6478\u91d1\u6821\u5c09(\u6df1\u84dd)",4050:"\u81ea\u7206\u5175(\u6df1\u84dd)",4051:"\u997f\u72fc(\u9ed1)",4052:"\u621f\u5175(\u7d2b)",4053:"\u86ee\u5175(\u7d2b)",4054:"\u98ce\u7b5d\u5175(\u7d2b)",4055:"\u533b\u5b98(\u7d2b)",4056:"\u5f29\u5175(\u7d2b)",4057:"\u76fe\u5175(\u7d2b)",4058:"\u8c0b\u7565\u5bb6(\u7d2b)",4059:"\u5996\u672f\u5e08(\u7d2b)",4060:"\u5200\u5175(\u7d2b)",4061:"\u9aa0\u5200\u9a91(\u7d2b)",4062:"\u5b54\u660e\u98de\u5175(\u7d2b)",4063:"\u85e4\u7532\u5175(\u7d2b)",4064:"\u6295\u77f3\u8f66(\u7d2b)",4065:"\u767d\u8033\u519b(\u7d2b)",4066:"\u6478\u91d1\u6821\u5c09(\u7d2b)",4067:"\u81ea\u7206\u5175(\u7d2b)",4068:"\u997f\u72fc(\u68d5)",4101:"[\u7cbe\u82f1]\u621f\u5175",4102:"[\u7cbe\u82f1]\u86ee\u5175",4103:"[\u7cbe\u82f1]\u533b\u5b98",4104:"[\u7cbe\u82f1]\u5f29\u5175",4105:"[\u7cbe\u82f1]\u76fe\u5175",4106:"[\u7cbe\u82f1]\u8c0b\u7565\u5bb6",4107:"[\u7cbe\u82f1]\u5996\u672f\u5e08",4108:"[\u7cbe\u82f1]\u5200\u5175",4109:"[\u7cbe\u82f1]\u9aa0\u5200\u9a91",4110:"[\u7cbe\u82f1]\u85e4\u7532\u5175",4111:"[\u7cbe\u82f1]\u767d\u8033\u519b",4201:"[BOSS]\u86ee\u5175",4202:"[BOSS]\u5f29\u5175",4203:"[BOSS]\u76fe\u5175",4204:"[BOSS]\u767d\u8033\u519b",4205:"[BOSS]\u5996\u672f\u5e08",4206:"[BOSS]\u85e4\u7532\u5175",4207:"[BOSS]\u81ea\u7206\u5175",4208:"[BOSS]\u6295\u77f3\u8f66",4301:"\u4e2d\u77ed\u7a0b\u8089\u640f\u5175\u79cd\uff0c\u957f\u621f\u5177\u6709\u4e00\u5b9a\u8ddd\u79bb\u4f18\u52bf",4302:"\u5f3a\u608d\u7684\u8089\u640f\u5175\u79cd\uff0c\u80fd\u6d88\u706d\u4e00\u5207\u8bd5\u56fe\u59a8\u788d\u4ed6\u7684\u519b\u961f",4303:"\u80cc\u7740\u98ce\u7b5d\u7684\u5175\u79cd\uff0c\u80fd\u98de\u8d8a\u5175\u5854\u548c\u70ae\u5854",4304:"\u6218\u573a\u8f85\u52a9\u5175\u79cd\uff0c\u6cbb\u7597\u81ea\u8eab\u9644\u8fd1\u7684\u58eb\u5175",4305:"\u8fdc\u7a0b\u5175\u79cd\uff0c\u4f1a\u5bf9\u6cbf\u8def\u7684\u58eb\u5175\u53d1\u5c04\u7bad\u77e2",4306:"\u624b\u4e2d\u7684\u76fe\u724c\u80fd\u8d77\u5230\u5f88\u597d\u7684\u9632\u5fa1\u4f5c\u7528\uff0c\u62b5\u6321\u5927\u91cf\u7684\u7269\u7406\u653b\u51fb",4307:"\u6218\u573a\u8f85\u52a9\u5175\u79cd\uff0c\u8ba9\u8eab\u5468\u519b\u961f\u79fb\u52a8\u901f\u5ea6\u66f4\u5feb",4308:"\u6218\u573a\u8f85\u52a9\u5175\u79cd\uff0c\u80fd\u53ec\u5524\u519b\u961f\u8fdb\u884c\u6218\u6597",4309:"\u77ed\u7a0b\u8089\u640f\u5175\u79cd\uff0c\u624b\u6301\u53cc\u5200\u79fb\u52a8\u66f4\u8fc5\u901f",4310:"\u9a81\u52c7\u65e0\u754f\uff0c\u79fb\u52a8\u8fc5\u901f",4311:"\u98de\u884c\u5175\u79cd\uff0c\u5f53\u80cc\u540e\u7684\u5b54\u660e\u706f\u7834\u6389\u540e\uff0c\u58eb\u5175\u843d\u5730\u540e\u53ef\u4ee5\u7ee7\u7eed\u6218\u6597",4312:"\u85e4\u7532\u8986\u76d6\u5168\u8eab\uff0c\u8ba9\u8fd9\u652f\u519b\u961f\u8fd1\u4e4e\u4e0d\u53d7\u7269\u7406\u4f24\u5bb3",4313:"\u65e0\u751f\u547d\u7684\u6218\u4e89\u673a\u5668\uff0c\u65e0\u89c6\u63a7\u5236\u548c\u5404\u79cd\u6548\u679c\uff0c\u6cd5\u672f\u4f24\u5bb3\u8fd1\u4e4e\u65e0\u6548",4314:"\u624b\u4e2d\u7684\u94f6\u95ea\u95ea\u7684\u76fe\u724c\u683c\u6321\u5927\u90e8\u5206\u6cd5\u672f\u4f24\u5bb3\uff0c\u8ba9\u4ed6\u663e\u7684\u683c\u5916\u8ff7\u4eba",4315:"\u4e3a\u4e86\u5bfb\u627e\u5730\u4e0b\u9057\u7559\u7684\u5b9d\u85cf\uff0c\u4ed6\u4f1a\u5077\u5077\u7684\u7a7f\u8fc7\u9632\u5fa1\u5854",4316:"\u52c7\u731b\u65e0\u754f\u7684\u5175\u79cd\uff0c\u4e34\u6b7b\u524d\u4f1a\u5f15\u7206\u81ea\u8eab\u4e0e\u76ee\u6807\u540c\u5f52\u4e8e\u5c3d",4317:"\u901f\u5ea6\u975e\u5e38\u5feb\u7684\u51f6\u731b\u91ce\u517d\uff0c\u80fd\u95ea\u907f\u8fd1\u6218\u653b\u51fb",4401:"\u66f4\u5f3a\u5927\u621f\u5175\uff0c\u4e2d\u77ed\u7a0b\u8089\u640f\u5175\u79cd\uff0c\u957f\u621f\u5177\u6709\u4e00\u5b9a\u8ddd\u79bb\u4f18\u52bf",4402:"\u66f4\u5f3a\u5927\u86ee\u5175\uff0c\u5f3a\u608d\u7684\u8089\u640f\u5175\u79cd\uff0c\u80fd\u6d88\u706d\u4e00\u5207\u8bd5\u56fe\u59a8\u788d\u4ed6\u7684\u519b\u961f",4403:"\u66f4\u5f3a\u5927\u533b\u5b98\uff0c\u6218\u573a\u8f85\u52a9\u5175\u79cd\uff0c\u6cbb\u7597\u81ea\u8eab\u9644\u8fd1\u7684\u58eb\u5175",4404:"\u66f4\u5f3a\u5927\u5f29\u5175\uff0c\u8fdc\u7a0b\u5175\u79cd\uff0c\u4f1a\u5bf9\u6cbf\u8def\u7684\u58eb\u5175\u53d1\u5c04\u7bad\u77e2",4405:"\u66f4\u5f3a\u5927\u76fe\u5175\uff0c\u624b\u4e2d\u7684\u76fe\u724c\u80fd\u8d77\u5230\u5f88\u597d\u7684\u9632\u5fa1\u4f5c\u7528\uff0c\u62b5\u6321\u5927\u91cf\u7684\u7269\u7406\u653b\u51fb",4406:"\u66f4\u5f3a\u5927\u8c0b\u7565\u5bb6\uff0c\u6218\u573a\u8f85\u52a9\u5175\u79cd\uff0c\u8ba9\u8eab\u5468\u519b\u961f\u79fb\u52a8\u901f\u5ea6\u66f4\u5feb",4407:"\u66f4\u5f3a\u5927\u5996\u672f\u5e08\uff0c\u6218\u573a\u8f85\u52a9\u5175\u79cd\uff0c\u80fd\u53ec\u5524\u519b\u961f\u8fdb\u884c\u6218\u6597",4408:"\u66f4\u5f3a\u5927\u5200\u5175\uff0c\u77ed\u7a0b\u8089\u640f\u5175\u79cd\uff0c\u624b\u6301\u53cc\u5200\u79fb\u52a8\u66f4\u8fc5\u901f",4409:"\u66f4\u5f3a\u5927\u9aa0\u5200\u9a91\uff0c\u9a81\u52c7\u65e0\u754f\uff0c\u79fb\u52a8\u8fc5\u901f",4410:"\u66f4\u5f3a\u5927\u85e4\u7532\u5175\uff0c\u85e4\u7532\u8986\u76d6\u5168\u8eab\uff0c\u8ba9\u8fd9\u652f\u519b\u961f\u8fd1\u4e4e\u4e0d\u53d7\u7269\u7406\u4f24\u5bb3",4411:"\u66f4\u5f3a\u5927\u767d\u8033\u519b\uff0c\u624b\u4e2d\u7684\u94f6\u95ea\u95ea\u7684\u76fe\u724c\u683c\u6321\u5927\u90e8\u5206\u6cd5\u672f\u4f24\u5bb3\uff0c\u8ba9\u4ed6\u663e\u7684\u683c\u5916\u8ff7\u4eba",4501:"\u86ee\u5175\u4e2d\u7684\u9996\u9886\uff0c\u80fd\u53ec\u5524\u5927\u91cf\u7684\u86ee\u5175\u4e00\u8d77\u4f5c\u6218",4502:"\u5f29\u5175\u4e2d\u7684\u9996\u9886\uff0c\u80fd\u53ec\u5524\u5927\u91cf\u7684\u5f29\u5175\u4e00\u8d77\u4f5c\u6218",4503:"\u76fe\u5175\u4e2d\u7684\u9996\u9886\uff0c\u80fd\u53ec\u5524\u5927\u91cf\u7684\u76fe\u5175\u4e00\u8d77\u4f5c\u6218",4504:"\u767d\u8033\u519b\u4e2d\u7684\u9996\u9886\uff0c\u80fd\u53ec\u5524\u5927\u91cf\u7684\u767d\u8033\u519b\u4e00\u8d77\u4f5c\u6218",4505:"\u767d\u8033\u519b\u4e2d\u7684\u9996\u9886\uff0c\u80fd\u53ec\u5524\u5927\u91cf\u7684\u997f\u72fc\u4e00\u8d77\u4f5c\u6218",4506:"\u85e4\u7532\u5175\u4e2d\u7684\u9996\u9886\uff0c\u80fd\u53ec\u5524\u5927\u91cf\u7684\u85e4\u7532\u5175\u4e00\u8d77\u4f5c\u6218",4507:"\u81ea\u7206\u5175\u4e2d\u7684\u9996\u9886\uff0c\u80fd\u53ec\u5524\u5927\u91cf\u7684\u81ea\u7206\u5175\u4e00\u8d77\u4f5c\u6218",40101:"\u9752\u9f99\u65a9",40102:"\u9738\u738b",40103:"\u6fc0\u6602",40104:"\u6b66\u5723",40105:"\u7fa4\u4f53\u8f70\u70b8",40201:"\u72ee\u543c\u529f",40202:"\u5a01\u98ce",40203:"\u91d1\u521a",40204:"\u4e0d\u5c48",40205:"\u5486\u54ee",40301:"\u5468\u8eab\u5251",40302:"\u79d8\u672f",40303:"\u5947\u7565",40304:"\u8d2a\u5a6a",40305:"\u5929\u7384\u96f7\u7834",40401:"\u5929\u964d\u6bd2\u7bad",40402:"\u6bd2\u7978",40403:"\u6bd2\u8ba1",40404:"\u6bd2\u86ca",40405:"\u81f4\u547d\u6bd2\u836f",40501:"\u4e07\u7bad\u9f50\u53d1",40502:"\u770b\u7834",40503:"\u7834\u7532",40504:"\u7bad\u795e",40505:"\u81f4\u547d\u72d9\u51fb",40601:"\u65b9\u5929\u65a9",40602:"\u79d2\u6740",40603:"\u6597\u795e",40604:"\u6012\u53d1",40605:"\u72c2\u66b4",40701:"\u96f7\u4e91\u516b\u5366",40702:"\u706b\u96f7\u5f39",40703:"\u706b\u96f7\u8ba1",40704:"\u519b\u5e08",40705:"\u661f\u4e4b\u9668\u843d",40801:"\u9b45\u60d1\u4f17\u751f",40802:"\u591a\u91cd",40803:"\u7834\u9b42",40804:"\u503e\u56fd",40805:"\u51b0\u5c01\u7981\u9522",40901:"\u7834\u9f99\u67aa",40902:"\u7834\u519b",40903:"\u8d2a\u72fc",40904:"\u7d2b\u8587",40905:"\u94f6\u9f99\u67aa",43001:"\u501a\u5929\u5251\u9635",43002:"\u60e9\u6212",43003:"\u7eb5\u6a2a",43004:"\u67ad\u96c4",43005:"\u78d0\u77f3\u51b2\u51fb",43101:"\u96f7\u9706\u4e07\u94a7",43102:"\u7978\u4e71",43103:"\u9ec4\u5929",43104:"\u5929\u516c",43105:"\u95ea\u7535\u94fe",43201:"\u706b\u51e4\u964d\u4e34",43202:"\u8776\u821e",43203:"\u7ea2\u83b2",43204:"\u67ad\u59ec",43205:"\u706b\u51e4\u51b2\u51fb",43301:"\u65cb\u98ce\u65a7",43302:"\u91cd\u51fb",43303:"\u6b8b\u66b4",43304:"\u55dc\u8840",43305:"\u65cb\u98ce\u65a9",41101:"\u6325\u821e\u9752\u9f99\u5927\u5200\uff0c\u5bf9\u5468\u8eab\u654c\u4eba\u9020\u6210\u5927\u91cf\u4f24\u5bb3",41102:"\u3010\u9752\u9f99\u65a9\u3011\u7684\u6280\u80fd\u4f24\u5bb3\u63d0\u534720%\n\u3010\u7fa4\u4f53\u8f70\u70b8\u3011\u7684\u6280\u80fd\u4f24\u5bb3\u63d0\u534720%",41103:"\u66b4\u51fb\u540e\uff0c\u63d0\u5347\u81ea\u8eab\u653b\u51fb\u901f\u5ea630%\uff0c\u6700\u591a\u6301\u7eed4\u79d2\uff0c\u6280\u80fd\u6548\u679c\u53ef\u66f4\u65b0",41104:"\u6bcf\u5efa\u9020\u4e00\u4e2a\u5c06\u5854\uff0c\u653b\u51fb\u529b\u63d0\u534710%",41105:"\u53d1\u5c04\u70b8\u5f39\uff0c\u70b8\u5f39\u5728\u7a7a\u4e2d\u7206\u70b8\uff0c\u7206\u70b8\u4ea7\u751f\u7684\u788e\u7247\u80fd\u591f\u653b\u51fb\u5230\u66f4\u591a\u7684\u654c\u4eba",41201:"\u5bf9\u654c\u65b9\u5355\u4f4d\u9020\u6210\u8303\u56f4\u6050\u60e7\uff0c\u6700\u591a\u6050\u60e77\u4e2a\u76ee\u6807",41202:"\u6050\u60e7\u9644\u5e26\u4f24\u5bb3",41203:"\u81ea\u8eab\u751f\u547d\u6bcf\u51cf\u5c1110%\uff0c\u6240\u53d7\u5230\u4f24\u5bb3\u51cf\u5c112%",41204:"\u5f53\u5df1\u65b9\u5355\u4f4d\u6b7b\u4ea1\u65f6\uff0c\u56de\u590d\u81ea\u8eab\u8840\u91cf20%",41205:"\u5bf9\u654c\u65b9\u5355\u4f4d\u9020\u6210\u8303\u56f4\u6050\u60e7\uff0c\u6700\u591a\u6050\u60e73\u4e2a\u76ee\u6807",41301:"\u5728\u8eab\u5468\u5f62\u6210\u5251\u9635\uff0c\u9760\u8fd1\u7684\u654c\u4eba\u4f1a\u88ab\u653b\u51fb",41302:"\u3010\u5468\u8eab\u5251\u3011\u6280\u80fd\u6301\u7eed\u65f6\u95f4\u589e\u52a02\u79d2\n\u3010\u5929\u7384\u96f7\u7834\u3011\u5730\u96f7\u7684\u6301\u7eed\u65f6\u95f4\u589e\u52a05\u79d2",41303:"\u3010\u5468\u8eab\u5251\u3011\u6280\u80fd\u5251\u7684\u6570\u91cf\u589e\u52a02\u628a\n\u3010\u5929\u7384\u96f7\u7834\u3011\u5730\u96f7\u7684\u6570\u91cf\u589e\u52a02\u679a",41304:"\u51fb\u6740\u654c\u4eba\u6240\u83b7\u5f97\u7684\u9668\u94c1\u6570\u91cf\u589e\u52a020%",41305:"\u5728\u9632\u5fa1\u5854\u9644\u8fd1\u57cb\u4e0b\u591a\u9897\u5730\u96f7\uff0c\u654c\u4eba\u78b0\u89e6\u5230\u5730\u96f7\u6216\u5012\u8ba1\u65f6\u7ed3\u675f\u540e\u4f1a\u53d1\u751f\u7206\u70b8\uff0c\u53d7\u5230\u4f24\u5bb3\u7684\u654c\u4eba\u4f1a\u88ab\u7729\u6655",41401:"\u4ece\u5929\u800c\u964d\u7684\u591a\u53ea\u6bd2\u7bad\uff0c\u88ab\u6bd2\u7bad\u51fb\u4e2d\u7684\u76ee\u6807\u4f1a\u53d7\u5230\u4f24\u5bb3\uff0c\u5e76\u9644\u52a0\u6301\u7eed\u7684\u4e2d\u6bd2\u4f24\u5bb3",41402:"\u3010\u5929\u964d\u6bd2\u7bad\u3011\u9020\u6210\u7684\u9644\u52a0\u4f24\u5bb3\u63d0\u534750%\n\u3010\u81f4\u547d\u6bd2\u836f\u3011\u9020\u6210\u7684\u4f24\u5bb3\u63d0\u534750%",41403:"\u3010\u5929\u964d\u6bd2\u7bad\u3011\u843d\u4e0b\u7684\u6bd2\u7bad\u589e\u52a04\u652f\n\u3010\u81f4\u547d\u6bd2\u836f\u3011\u7684\u6301\u7eed\u65f6\u95f4\u589e\u52a02\u79d2",41404:"\u8ba9\u4e2d\u6bd2\u7684\u76ee\u6807\u66f4\u52a0\u865a\u5f31\uff0c\u88ab\u653b\u51fb\u4f1a\u53d7\u5230\u66f4\u591a\u4f24\u5bb3",41405:"\u53ec\u5524\u51fa\u5267\u6bd2\u6cbc\u6cfd\uff0c\u654c\u4eba\u8fdb\u5165\u8be5\u533a\u57df\u4f1a\u53d7\u5230\u4f24\u5bb3\uff0c\u5e76\u4e14\u4f1a\u5927\u5e45\u5ea6\u964d\u4f4e\u79fb\u52a8\u901f\u5ea6",41501:"\u5411\u76ee\u6807\u65b9\u5411\u8fde\u7eed\u5c04\u51fa5\u53ea\u5f13\u7bad\uff0c\u5f13\u7bad\u80fd\u591f\u7a7f\u900f\u6240\u653b\u51fb\u76ee\u6807\u5bf9\u8eab\u540e\u7684\u654c\u4eba\u7ee7\u7eed\u9020\u6210\u4f24\u5bb3",41502:"\u653b\u51fb\u540c\u4e00\u4e2a\u76ee\u6807\u6b21\u6570\u8d8a\u591a\u4f24\u5bb3\u8d8a\u9ad8",41503:"\u653b\u51fb\u6709\u6982\u7387\u65e0\u89c6\u76ee\u6807\u7269\u7406\u9632\u5fa1",41504:"\u6bcf\u5efa\u9020\u4e00\u4e2a\u5f13\u5854\uff0c\u653b\u51fb\u529b\u63d0\u53475%",41505:"\u72d9\u6740\u5984\u60f3\u9003\u8dd1\u7684\u654c\u4eba\uff0c\u5982\u679c\u76ee\u6807\u6ca1\u88ab\u72d9\u6740\u6210\u529f\u4f1a\u9020\u6210\u5927\u91cf\u4f24\u5bb3",41601:"\u4ece\u5929\u800c\u964d\u65b9\u5929\u753b\u621f\uff0c\u5bf9\u8303\u56f4\u5185\u654c\u4eba\u9020\u6210\u5927\u91cf\u4f24\u5bb3\uff0c\u5e76\u4f7f\u8303\u56f4\u5185\u76ee\u6807\u51cf\u901f",41602:"\u653b\u51fb\u6709\u6982\u7387\u79d2\u6740\u8840\u91cf\u4f4e\u4e8e50%\u7684\u5c0f\u602a",41603:"\u66b4\u51fb\u7387\u63d0\u534710%",41604:"\u66b4\u51fb\u540e\uff0c\u81ea\u8eab\u653b\u51fb\u529b\u63d0\u534720%\uff0c\u6700\u591a\u6301\u7eed3\u79d2\uff0c\u6280\u80fd\u6548\u679c\u53ef\u66f4\u65b0",41605:"\u8fdb\u5165\u72c2\u66b4\u72b6\u6001\uff0c\u5927\u5e45\u5ea6\u63d0\u5347\u653b\u51fb\u901f\u5ea6\u548c\u653b\u51fb\u529b",41701:"\u53ec\u5524\u96f7\u4e91\u5728\u4e00\u5b9a\u8303\u56f4\u5185\u8fdb\u884c\u6301\u7eed\u653b\u51fb\uff0c\u5e76\u6709\u51e0\u7387\u7729\u6655\u654c\u4eba",41702:"\u6cd5\u7403\u653b\u51fb\u6e85\u5c04\u4f24\u5bb3\u63d0\u5347",41703:"\u6cd5\u7403\u653b\u51fb\u6e85\u5c04\u8303\u56f4\u63d0\u5347",41704:"\u63d0\u5347\u5168\u90e8\u6cd5\u5e08\u5854\uff0c\u653b\u51fb\u529b\u63d0\u53475%",41705:"\u53ec\u5524\u9668\u77f3\u653b\u51fb\u8303\u56f4\u5185\u76ee\u6807\uff0c\u88ab\u653b\u51fb\u7684\u76ee\u6807\u4f1a\u53d7\u5230\u6301\u7eed\u6027\u706b\u653b\u4f24\u5bb3",41801:"\u65bd\u5c55\u9b45\u60d1\u4e4b\u672f\uff0c\u4f7f\u8303\u56f4\u5185\u7684\u654c\u4eba\u88ab\u9b45\u60d1\uff0c\u88ab\u9b45\u60d1\u7684\u654c\u4eba\u65e0\u6cd5\u884c\u52a8\uff0c\u90e8\u5206\u88ab\u9b45\u60d1\u7684\u654c\u4eba\u4f1a\u53d8\u4e3a\u6211\u65b9\u58eb\u5175\u8fdb\u884c\u6218\u6597",41802:"\u6709\u6982\u7387\u540c\u65f6\u653b\u51fb\u4e24\u4e2a\u76ee\u6807",41803:"\u88ab\u9b45\u60d1\u6216\u8005\u51b0\u51bb\u7684\u654c\u4eba\u53d7\u5230\u4f24\u5bb3\u63d0\u534750%",41804:"\u6bcf\u5efa\u9020\u4e00\u4e2a\u6cd5\u5e08\u5854\uff0c\u653b\u51fb\u901f\u5ea6\u63d0\u53475%",41805:"\u5728\u76ee\u6807\u8303\u56f4\u91ca\u653e\u66b4\u98ce\u96ea\uff0c\u8fdb\u5165\u66b4\u98ce\u96ea\u533a\u57df\u7684\u654c\u4eba\u4f1a\u53d7\u5230\u4f24\u5bb3\uff0c\u5e76\u4e14\u88ab\u51b0\u51bb",41901:"\u5411\u6307\u5b9a\u65b9\u5411\u8fde\u7eed\u523a\u51fa5\u67aa\uff0c\u6bcf\u67aa\u547d\u4e2d\u9020\u6210\u7684\u4f24\u5bb3\u8d8a\u6765\u8d8a\u9ad8",41902:"\u6280\u80fd\u4f24\u5bb3\u63d0\u534720%",41903:"\u6280\u80fd\u653b\u51fb\u95f4\u9694\u7f29\u77ed",41904:"\u6280\u80fd\u547d\u4e2d\u56de\u590d\u81ea\u8eab\u8840\u91cf",41905:"\u5411\u6307\u5b9a\u65b9\u5411\u8fde\u7eed\u523a\u51fa5\u67aa\uff0c\u6bcf\u67aa\u547d\u4e2d\u9020\u6210\u7684\u4f24\u5bb3\u8d8a\u6765\u8d8a\u9ad8",44001:"\u5728\u8eab\u5468\u53ec\u5524\u501a\u5929\u5251\u9635\uff0c\u5bf9\u5251\u9635\u5185\u654c\u4eba\u9020\u6210\u591a\u6b21\u4f24\u5bb3",44002:"\u6280\u80fd\u9020\u6210\u4f24\u5bb3\u7684\u654c\u4eba\u9644\u52a0\u51cf\u901f\u6548\u679c",44003:"\u6280\u80fd\u4f24\u5bb3\u63d0\u534730%",44004:"\u6bcf\u5efa\u9020\u4e00\u4e2a\u70ae\u5854\uff0c\u653b\u51fb\u529b\u63d0\u53475%",44005:"\u5de8\u5927\u78d0\u77f3\u6eda\u5411\u524d\u65b9\uff0c\u5bf9\u78b0\u5230\u7684\u654c\u4eba\u9020\u6210\u4f24\u5bb3\u5e76\u51fb\u9000",44101:"\u5728\u8eab\u5468\u8fb9\u53ec\u5524\u591a\u9053\u96f7\u7535\uff0c\u88ab\u96f7\u7535\u51fb\u4e2d\u7684\u76ee\u6807\u6709\u6982\u7387\u88ab\u79d2\u6740",44102:"\u6280\u80fd\u9644\u5e26\u7729\u6655\u6548\u679c",44103:"\u6280\u80fd\u79d2\u6740\u6982\u7387\u63d0\u5347",44104:"\u6280\u80fd\u653b\u51fb\u95f4\u9694\u7f29\u77ed",44105:"\u5411\u654c\u4eba\u6295\u63b7\u4e00\u53d1\u95ea\u7535\u7bad\uff0c\u5bf9\u654c\u4eba\u9020\u6210\u4f24\u5bb3\u540e\u8dc3\u5411\u9644\u8fd1\u7684\u654c\u4eba\uff0c\u6700\u591a\u5f71\u54cd8\u4e2a\u654c\u4eba",44201:"\u53ec\u5524\u4e24\u53ea\u706b\u51e4\u534f\u52a9\u5b59\u5c1a\u9999\u653b\u51fb\uff0c\u5b58\u5728\u4e00\u6bb5\u65f6\u95f4\u540e\u6d88\u5931",44202:"\u6280\u80fd\u4f24\u5bb3\u63d0\u534720%",44203:"\u5b59\u5c1a\u9999\u51fb\u6740\u7684\u654c\u4eba\u4f1a\u53d1\u751f\u7206\u70b8\uff0c\u5bf9\u5468\u8fb9\u654c\u4eba\u9020\u6210\u4f24\u5bb3",44204:"\u6bcf\u5efa\u9020\u4e00\u4e2a\u5f13\u5854\uff0c\u66b4\u51fb\u4f24\u5bb3\u63d0\u534710%",44205:"\u53ec\u5524\u706b\u51e4\u51f0\u5411\u7740\u76ee\u6807\u65b9\u5411\u51b2\u51fb\uff0c\u98de\u884c\u4e00\u5b9a\u8ddd\u79bb\u540e\u539f\u8def\u8fd4\u56de\uff0c\u5bf9\u8def\u5f84\u4e0a\u7684\u654c\u4eba\u9020\u6210\u4f24\u5bb3",44301:"\u624b\u6301\u65a7\u5b50\u65cb\u8f6c\uff0c\u5bf9\u9644\u8fd1\u654c\u4eba\u9020\u6210\u4f24\u5bb3",44302:"\u6280\u80fd\u9644\u5e262\u79d2\u7729\u6655\u6548\u679c",44303:"\u81ea\u8eab\u8840\u91cf\u8d8a\u5c11\u4f24\u5bb3\u8d8a\u9ad8",44304:"\u51fb\u6740\u76ee\u6807\u540e\u6062\u590d\u81ea\u8eab20%\u8840\u91cf",44305:"\u624b\u6301\u65a7\u5b50\u65cb\u8f6c\uff0c\u5bf9\u9644\u8fd1\u654c\u4eba\u9020\u6210\u4f24\u5bb3",42001:"\u8700\u6c49",42002:"\u5357\u86ee",42003:"\u8346\u5dde",42004:"\u4e1c\u5434",42005:"\u66f9\u9b4f",42006:"\u6c49\u5ba4",42007:"\u897f\u51c9",42008:"\u9ec4\u5dfe",42009:"\u5180\u5dde",42010:"\u8fbd\u4e1c",42011:"\u8700\u6c49\u52bf\u529b\uff0c\u516c\u5143221\u5e74\uff0c\u5218\u5907\u5728\u6210\u90fd\u79f0\u5e1d\u3002\u5360\u6709\u4eca\u4e91\u5357\u5168\u7701\uff0c\u56db\u5ddd\u3001\u8d35\u5dde\u4e8c\u7701\u7684\u5927\u90e8\uff0c\u9655\u897f\uff0c\u7518\u8083\u5357\u90e8\u3001\u5e7f\u897f\u897f\u5317\u90e8\u53ca\u7f05\u7538\u4e1c\u5317\u90e8\u3001\u8d8a\u5357\u897f\u5317\u90e8\u3002",42012:"\u5357\u86ee\u9996\u9886\u5b5f\u83b7\uff0c\u4e09\u56fd\u65f6\u671f\u5357\u4e2d\u5730\u533a\u7684\u9996\u9886\uff0c\u516c\u5143225\u5e74\u8d77\u5175\u53cd\u53db\u8700\u6c49\uff0c\u88ab\u8bf8\u845b\u4eae\u7387\u9886\u5927\u519b\u4e03\u64d2\u4e03\u7eb5\u540e\u964d\u670d\uff0c\u6b64\u540e\u4e0d\u518d\u53db\u4e71\u3002",42013:"\u8346\u5dde\u52bf\u529b\u7531\u5218\u8868\u7edf\u9886\uff0c\u8fdc\u4ea4\u8881\u7ecd\uff0c\u8fd1\u7ed3\u5f20\u7ee3\uff0c\u5185\u7eb3\u5218\u5907\uff0c\u636e\u5730\u6570\u5343\u91cc\uff0c\u5e26\u7532\u5341\u4f59\u4e07\uff0c\u79f0\u96c4\u8346\u6c5f\u3002",42014:"\u5434\u56fd\u52bf\u529b\uff0c\u662f\u5b59\u6743\u5728\u4e2d\u56fd\u4e1c\u5357\u90e8\u5efa\u7acb\u7684\u653f\u6743\uff0c\u56fd\u53f7\u4e3a\u201c\u5434\u201d\uff0c\u53f2\u5b66\u754c\u79f0\u4e4b\u4e3a\u5b59\u5434\u3002\u7531\u4e8e\u4e0e\u66f9\u9b4f\u3001\u8700\u6c49\u5448\u9f0e\u7acb\u4e4b\u52bf\uff0c\u6240\u7edf\u6cbb\u5730\u533a\u53c8\u5c45\u4e8e\u4e09\u56fd\u4e4b\u4e1c\uff0c\u6545\u4ea6\u79f0\u4e1c\u5434\u3002",42015:"\u9b4f\u56fd\u52bf\u529b\uff0c\u540e\u4e16\u53f2\u5bb6\u591a\u79f0\u66f9\u9b4f\uff0c\u7531\u4e8e\u4e4b\u540e\u7684\u5317\u9b4f\u88ab\u79f0\u4f5c\u201c\u540e\u9b4f\u201d\uff0c\u6545\u66f9\u9b4f\u4e5f\u79f0\u4e3a\u201c\u524d\u9b4f\u201d\u6216\u8005\u201c\u5148\u9b4f\u201d\uff0c\u662f\u4e09\u56fd\u4e4b\u4e2d\u6700\u5f3a\u5927\u7684\u56fd\u5bb6\u3002",42016:"\u4e1c\u6c49\u672b\u5e74\uff0c\u7687\u5e1d\u660f\u5eb8\u65e0\u9053\uff0c\u5916\u621a\u5e72\u653f\uff0c\u519c\u6c11\u4e0d\u582a\u91cd\u8d1f\u7206\u53d1\u9ec4\u5dfe\u4e4b\u4e71\uff0c\u5e73\u5b9a\u53db\u4e71\u8fc7\u7a0b\u4e2d\uff0c\u5404\u5927\u5730\u65b9\u52bf\u529b\u53d1\u5c55\u58ee\u5927\uff0c\u7687\u6743\u540d\u5b58\u5b9e\u4ea1\u3002",42017:"\u897f\u51c9\u52bf\u529b\uff0c\u51c9\u5dde\u5730\u5904\u6c49\u3001\u7f8c\u8fb9\u754c\uff0c\u6c11\u98ce\u527d\u608d\uff0c\u608d\u4e0d\u754f\u6b7b\uff0c\u53f2\u79f0\u201c\u51c9\u5dde\u5927\u9a6c\uff0c\u6a2a\u884c\u5929\u4e0b\u201d\u3002",42018:"\u9ec4\u5dfe\u52bf\u529b\u4ee5\u592a\u5e73\u9053\u9996\u9886\u5f20\u89d2\u4e3a\u9886\u8896\uff0c\u501f\u4f20\u9053\u548c\u6cbb\u75c5\uff0c\u5728\u519c\u6c11\u4e2d\u5ba3\u626c\u6559\u4e49\uff0c\u8fdb\u884c\u79d8\u5bc6\u884c\u52a8\u3002",42019:"\u5180\u5dde\u52bf\u529b\u7531\u8881\u7ecd\u7edf\u6cbb\uff0c\u65e9\u5e74\u88ab\u63a8\u4e3e\u4e3a\u5173\u4e1c\u8054\u519b\u9996\u9886\uff0c\u5728\u7fa4\u96c4\u5272\u636e\u8fc7\u7a0b\u4e2d\uff0c\u5148\u540e\u593a\u53d6\u9752\u5dde\u3001\u5e76\u5dde\u4ee5\u53ca\u5e7d\u5dde\u3002",42020:"\u8fbd\u4e1c\u52bf\u529b\u7531\u516c\u5b59\u6c0f\u5bb6\u65cf\u4e16\u4ee3\u638c\u63e1\uff0c\u5e76\u4ee5\u6c49\u8fbd\u4e1c\u90e1\u4e3a\u4e2d\u5fc3\uff0c\u4e60\u60ef\u4e0a\u79f0\u4e3a\u8fbd\u4e1c\u516c\u5b59\u6c0f\u653f\u6743\u3002",50001:"\u8001\u592b\u6390\u6307\u4e00\u7b97\uff01(\u6390\u6307\u4e2d\u2026\u2026)",50002:"\u5509\u5440\u5988\u5440\uff0c\u4f60\u4e0d\u662f\u6211\u4eec\u8fd9\u4e2a\u4e16\u754c\u7684\u4eba\uff01\u5fc5\u5b9a\u662f\u4e0a\u5929\u6d3e\u6765\u62ef\u6551\u6211\u4eec\u7684",50003:"\u544a\u8bc9\u4f60\u4e2a\u79d8\u5bc6\uff0c\u4e0d\u8fdc\u5904\u6709\u4e00\u770b\u95e8\u4eba\uff0c\u8eab\u9ad8\u516b\u5c3a\uff0c\u7a7f\u7740\u5927\u62d6\u978b\u3002\u8d81\u4ed6\u8fd8\u662f\u8349\u6839\uff0c\u8d76\u7d27\u628a\u4ed6\u62db\u5165\u9ebe\u4e0b",50004:"\u89e3\u9501\u201c\u95ea\u7535\u98ce\u66b4\u201d\u6280\u80fd\uff0c\u5728\u5173\u952e\u65f6\u523b\u53ef\u89e3\u4f60\u71c3\u7709\u4e4b\u6025",50005:"\u5bf9\u4ed8\u654c\u4eba\uff0c\u53ef\u7528\u201c\u62db\u5175\u201d\u6280\u80fd\u62e6\u622a\u4ed6\u4eec",50006:"\u89e3\u9501\u201c\u4f20\u9001\u7b26\u6587\u201d\u6280\u80fd\uff0c\u8ba9\u654c\u4eba\u9000\u519b\u5341\u91cc",50007:"\u8bf8\u845b\u5148\u751f\u8ba9\u6211\u7b49\u7684\u4eba\u5c31\u662f\u4ed6\uff1f\u5148\u5e2e\u4ed6\u4e00\u628a\uff0c\u6df7\u4e2a\u597d\u5370\u8c61",50008:"\u542c\u8bf4\u4f60\u4e0d\u662f\u6b63\u5e38\u4eba\u2026\u2026\u54e6\uff0c\u54e6\uff0c\u4e0d\u662f\u4e00\u822c\u4eba\u3002\u6211\u770b\u95e8\u591a\u5e74\u4e86\uff0c\u518d\u8fd9\u6837\u4e0b\u53bb\u5c31\u6210\u770b\u95e8\u5927\u7237\u4e86\uff0c\u80fd\u8ddf\u7740\u4f60\u6df7\u4e0d",50009:"\u5e74\u7eaa\u5927\u4e86\uff0c\u8be5\u6d3b\u52a8\u6d3b\u52a8\u7b4b\u9aa8\u4e86\u3002\u6211\u4e5f\u6765\u51d1\u4e2a\u70ed\u95f9",50010:"\u6211\u89c9\u5f97\u4f60\u4eec\u8fd9\u4e2a\u961f\u4f0d\u7f3a\u5c11\u4e00\u4e2a\u6709\u667a\u6167\u6709\u9605\u5386\u7684\u4eba\uff0c\u5c31\u50cf\u6211\u8fd9\u6837\u7684",50011:"\u8bf8\u845b\u5148\u751f\u6c42\u6211\u6765\u5e2e\u4f60\uff0c\u8981\u4e0d\u662f\u770b\u5728\u8c82\u8749\u59b9\u59b9\u7684\u9762\u5b50\u4e0a\uff0c\u6211\u624d\u61d2\u5f97\u7406\u4f60\u2026\u2026",50012:"\u5bf9\u4ed8\u8fd9\u5e2e\u5c0f\u6df7\u6df7\uff0c\u4e5f\u914d\u8ba9\u6211\u51fa\u624b\uff017\u65e5\u4e4b\u540e\u4e0e\u4f60\u4eec\u4f1a\u5408",50013:"\u4e0a\u6b21\u8ba9\u4f60\u4eec\u9003\u8131\u4e86\uff0c\u8fd9\u6b21\u53ef\u6ca1\u90a3\u4e48\u5bb9\u6613",50014:"\u606d\u559c\u89e3\u9501\u4e86\u65b0\u7684\u9632\u5fa1\u5854\u2014\u2014\u70ae\u5854\uff0c\u70ae\u5854\u53ef\u4ee5\u5bf9\u654c\u4eba\u9020\u6210\u8303\u56f4\u4f24\u5bb3",50015:"\u9632\u5fa1\u5854\u53ef\u4ee5\u5347\u7ea7\uff0c\u63d0\u9ad8\u653b\u51fb\u8303\u56f4\u548c\u653b\u51fb\u529b",50016:"\u6211\u65e2\u662f\u5148\u950b\uff0c\u4e5f\u662f\u5b88\u5c06\uff0c\u5c06\u6211\u653e\u8fdb\u70ae\u5854\uff0c\u53ef\u5927\u5e45\u63d0\u5347\u70ae\u5854\u5a01\u529b",50017:"\u4e0d\u540c\u82f1\u96c4\u53ef\u4ee5\u8fdb\u9a7b\u4e0d\u540c\u9632\u5fa1\u5854\uff0c\u6211\u7684\u4e09\u5f1f\u5f20\u98de\u53ef\u4ee5\u8fdb\u9a7b\u5175\u8425\uff0c\u4ed6\u5728\u524d\u65b9\u7b49\u6211\u4eec",50018:"\u4ee5\u591a\u6b3a\u5c11\uff0c\u8ba9\u6211\u6765\u52a9\u4f60\u4e00\u81c2\u4e4b\u529b",50019:"\u7ec8\u4e8e\u7a81\u56f4\u6210\u529f\uff0c\u5728\u4e0b\u6709\u8981\u4e8b\u8981\u529e\uff0c7\u65e5\u4e4b\u540e\u4e0e\u4f60\u4eec\u4f1a\u5408",50020:"\u606d\u559c\u89e3\u9501\u201c\u62db\u5175\u201d\u6280\u80fd",50021:"\u606d\u559c\u89e3\u9501\u201c\u4f20\u9001\u201d\u6280\u80fd",51001:"\u4f60\u7ec8\u4e8e\u6765\u4e86\uff01\u6211\u662f\u8c82\u8749\uff0c\u4e00\u4f4d\u96c6\u7f8e\u8c8c\u4e0e\u667a\u6167\u4e8e\u4e00\u8eab\u7684\u5973\u5b50",51002:"\u522b\u603b\u76ef\u7740\u4eba\u5bb6\u770b\uff0c\u6211\u4f1a\u5bb3\u7f9e\u7684\u2026\u2026\u6765\u770b\u770b\u6211\u7ed9\u4f60\u51c6\u5907\u7684\u89c1\u9762\u793c",51003:"\u8fd9\u662f\u4e00\u4e2a\u9760\u5b9e\u529b\u8bf4\u8bdd\u7684\u4e16\u754c\uff0c\u4e5f\u662f\u4e00\u4e2a\u516c\u5e73\u7684\u4e16\u754c\u3002\u53ea\u9700\u8981\u9075\u5faa\u4e0b\u9762\u7684\u89c4\u5219\u2026\u2026",51004:"\u6123\u7740\u5e72\u561b\uff0c\u52a8\u8d77\u6765\u554a\uff01\u5b66\u4e60\u4e0b\u9632\u5fa1\u5854\u7684\u5efa\u9020",51005:"<color=#604543>\u5f13\u7bad\u5854<img src='Battle_TowerBuilding_icon3' click='bar' align=center height=45  />\u5c04\u7a0b\u8f83\u8fdc\uff0c\u653b\u51fb\u901f\u5ea6\u5feb\u3002\u5148\u5efa\u9020\u4e00\u4e2a\u5f13\u7bad\u5854<img src='Battle_TowerBuilding_icon3' click='bar' align=center height=45  />\u5427</color>",51006:"<color=#604543>\u5efa\u9020\u5f13\u7bad\u5854<img src='Battle_TowerBuilding_icon3' click='bar' align=center height=45  />\u9700\u8981\u6d88\u801770\u9668\u94c1<img src='Battle_Icon2' click='bar' align=center height=45  />\uff0c\u786e\u8ba4\u5efa\u9020</color>",51007:"<color=#604543>\u5175\u8425<img src='Battle_TowerBuilding_icon1' click='bar' align=center height=45  />\u53ef\u4ee5\u96c6\u7ed3\u58eb\u5175\uff0c\u963b\u62e6\u654c\u4eba\u524d\u884c\u3002\u5728\u8fd9\u4e2a\u4f4d\u7f6e\u5efa\u9020\u5175\u8425<img src='Battle_TowerBuilding_icon1' click='bar' align=center height=45  /></color>",51008:"<color=#604543>\u518d\u5efa\u9020\u4e00\u5ea7\u5f13\u7bad\u5854<img src='Battle_TowerBuilding_icon3' click='bar' align=center height=45  />\uff0c\u652f\u63f4\u6211\u4eec\u7684\u58eb\u5175</color>",51009:"\u5dee\u4e0d\u591a\u4e86\uff01\u5f00\u59cb\u4f60\u7684\u7b2c\u4e00\u6b21\u6218\u6597\u5427\uff01",51010:"\u8fd8\u4e0d\u9519\uff01\u8bf8\u845b\u5148\u751f\u51c6\u5907\u89c1\u4f60\u4e00\u9762",51011:"\u5347\u7ea7\u9632\u5fa1\u5854\uff0c\u53ef\u4ee5\u53d8\u5f97\u66f4\u5f3a",51012:"<color=#604543>\u4f7f\u7528\u94dc\u5e01<img src='Main_Money_Icon1' click='bar' align=center height=45  />\uff0c\u63d0\u5347\u7bad\u5854\u7b49\u7ea7</color>",51013:"\u7ee7\u7eed\u5347\u7ea7\u7bad\u5854",51014:"<color=#604543>\u94dc\u5e01<img src='Main_Money_Icon1' click='bar' align=center height=45  />\u6709\u9650\uff0c\u53bb\u527f\u706d\u654c\u5bc7\u83b7\u53d6\u66f4\u591a\u7269\u8d44</color>",51015:"<color=#604543>\u7bad\u5854<img src='Battle_TowerBuilding_icon3' click='bar' align=center height=45  />\u66f4\u5389\u5bb3\u4e86\uff0c\u53bb\u8bd5\u8bd5\u5a01\u529b</color>",51016:"<color=#604543>\u89c1\u4f60\u5929\u8d4b\u5f02\u7980\uff0c\u672c\u59d1\u5a18\u8fd9\u6b21\u518d\u9001\u4f60\u70ae\u5854<img src='Battle_TowerBuilding_icon4' click='bar' align=center height=45  />\u548c\u6cd5\u5e08\u5854<img src='Battle_TowerBuilding_icon2' click='bar' align=center height=45  /></color>",51017:"\u4e00\u56de\u751f\u4e8c\u56de\u719f\uff0c\u4e4b\u524d\u5b66\u4e60\u7684\u518d\u590d\u4e60\u4e00\u904d",51018:"<color=#604543>\u6cd5\u5e08\u5854<img src='Battle_TowerBuilding_icon2' click='bar' align=center height=45  />\u653b\u51fb\u9ad8\uff0c\u518d\u539a\u7684\u94e0\u7532\u90fd\u80fd\u7a7f\u900f</color>",51019:"<color=#604543>\u5efa\u9020\u6cd5\u5e08\u5854<img src='Battle_TowerBuilding_icon2' click='bar' align=center height=45  />\u9700\u8981\u6d88\u8017100\u9668\u94c1<img src='Battle_Icon2' click='bar' align=center height=45  />\uff0c\u786e\u8ba4\u5efa\u9020</color>",51020:"<color=#604543>\u518d\u5efa\u4e00\u5ea7\u6cd5\u5e08\u5854<img src='Battle_TowerBuilding_icon2' click='bar' align=center height=45  />\uff0c\u4ee5\u514d\u540e\u987e\u4e4b\u5fe7</color>",51021:"<color=#604543>\u9047\u5230\u624e\u5806\u7684\u654c\u4eba\uff0c\u5efa\u4e2a\u70ae\u5854<img src='Battle_TowerBuilding_icon4' click='bar' align=center height=45  />\u6700\u5408\u9002\uff0c\u4e00\u6253\u4e00\u5927\u7247</color>",51022:"\u7ee7\u7eed\u52a0\u56fa\u5176\u4ed6\u9632\u5fa1\u5854",51023:"\u4f7f\u7528\u94dc\u5e01\uff0c\u63d0\u5347\u5175\u8425\u7b49\u7ea7",51024:"\u7ee7\u7eed\u5347\u7ea7\u5175\u8425",51025:"\u5175\u8425\u7b49\u7ea7\u63d0\u5347\u4e86\uff0c\u53bb\u8bd5\u8bd5\u5a01\u529b",51026:"\u5854\u53ef\u4ee5\u5347\u52302\u7ea7\uff0c\u5854\u53ef\u4ee5\u5347\u52302\u7ea7\uff0c\u91cd\u8981\u7684\u4e8b\u60c5\u8bf4\u4e24\u904d\uff01",51027:"\u542c\u8d77\u6765\u5f88\u5389\u5bb3\u7684\u6837\u5b50\uff0c\u62d6\u52a8\u91ca\u653e\u201c\u95ea\u7535\u98ce\u66b4\u201d\u6280\u80fd",51028:"\u6740\u6389\u4e86\u4e0d\u5c11\u654c\u4eba\uff0c\u8bb0\u5f97\u5728\u654c\u4eba\u624e\u5806\u7684\u65f6\u5019\u4f7f\u7528\u201c\u95ea\u7535\u98ce\u66b4\u201d\u54e6",51029:"\u4efb\u52a1\u529f\u80fd\u5df2\u5f00\u542f",51030:"\u5b8c\u6210\u65e5\u5e38\u4efb\u52a1\u53ef\u4ee5\u83b7\u5f97\u5b9d\u7bb1\u62bd\u5956\u5238",51031:"\u5173\u5c06\u519b\u613f\u8ffd\u968f\u4e8e\u4f60\uff0c\u5feb\u53bb\u62db\u52df\u4ed6",51032:"\u96c6\u9f50\u82f1\u96c4\u788e\u7247\uff0c\u5373\u53ef\u62db\u52df\u8be5\u82f1\u96c4",51033:"\u4f7f\u7528\u82f1\u96c4\u7ecf\u9a8c\uff0c\u63d0\u5347\u5173\u5c06\u519b\u7684\u7b49\u7ea7",51034:"\u7ee7\u7eed\u5347\u7ea7\u5173\u5c06\u519b",51035:"\u5148\u950b\u82f1\u96c4\u53ef\u4ee5\u53c2\u4e0e\u6218\u6597\uff0c\u8bbe\u7f6e\u5173\u5c06\u519b\u4e3a\u5148\u950b",51036:"\u5173\u5c06\u519b\u65e2\u662f\u5148\u950b\uff0c\u540c\u65f6\u8fd8\u53ef\u4ee5\u4f5c\u4e3a\u70ae\u5854\u5b88\u5c06\u3002",51037:"\u70b9\u51fb\u8fd9\u91cc\u4e0a\u9635\u5173\u5c06\u519b",51038:"\u56de\u5230\u5f81\u6218\u754c\u9762",51039:"\u5feb\u53bb\u6218\u6597\u4e2d\u8bd5\u8bd5\u5148\u950b\u82f1\u96c4",51040:"\u6709\u65b0\u7684\u82f1\u96c4\u53ef\u4ee5\u62db\u52df\u4e86",51041:"\u96c6\u9f50\u82f1\u96c4\u788e\u7247\uff0c\u5373\u53ef\u62db\u52df\u8be5\u82f1\u96c4",51042:"\u53ef\u4ee5\u4efb\u547d\u65b0\u82f1\u96c4\u4e3a\u5148\u950b\u54e6\uff01\u5148\u62db\u52df\u5427",51043:"\u654c\u5bc7\u5df2\u7ecf\u6e05\u7406\u5b8c\u6bd5\uff0c\u6253\u5f00\u4e16\u754c\u5730\u56fe\uff0c\u6d3e\u5c06\u9886\u9a7b\u5b88",51044:"\u6d3e\u82f1\u96c4\u9a7b\u5b88\u53ef\u63d0\u5347\u8be5\u82f1\u96c4\u7b49\u7ea7",51045:"\u606d\u559c\u53ef\u4ee5\u9886\u53d6\u661f\u661f\u5b9d\u7bb1\u4e86",51046:"\u83b7\u5f97\u4e86\u81f3\u5c0a\u5b9d\u7bb1\u62bd\u5956\u5238",51047:"\u53bb\u96c6\u5e02\u62bd\u53d6\u82f1\u96c4",51048:"\u4f7f\u7528\u62bd\u5956\u5238\u514d\u8d39\u5f00\u542f\u5b9d\u7bb1",51049:"\u706b\u5149\u51b2\u5929\uff0c\u9f13\u58f0\u9707\u5730",51050:"\u5230\u5904\u662f\u53ae\u6740\u58f0\u3001\u5175\u5668\u58f0",51051:"\u770b\u7740\u8eab\u4e0a\u7684\u94e0\u7532\uff0c\u624b\u91cc\u7684\u957f\u77db\uff0c\u6ee1\u5730\u7684\u7fa4\u6f14\u2026\u2026",51052:"\u5988\u5440\uff01\u53c8\u505a\u5669\u68a6\u4e86\u2026\u2026",51053:"\u83b7\u5f97\u4e86\u65b0\u82f1\u96c4\u788e\u7247\uff0c\u96c6\u9f50\u788e\u7247\u53ef\u62db\u52df\u66f4\u591a\u82f1\u96c4",51054:"\u62db\u52df\u58eb\u5175\u963b\u622a\u654c\u4eba\uff0c\u62d6\u52a8\u91ca\u653e\u201c\u62db\u5175\u201d\u6280\u80fd",51055:"\u5c06\u654c\u4eba\u4f20\u9001\u56de\u9000\u4e00\u6bb5\u8ddd\u79bb\uff0c\u62d6\u52a8\u91ca\u653e\u201c\u4f20\u9001\u201d\u6280\u80fd",51056:"\u654c\u4eba\u7a7f\u8fc7\u9632\u7ebf\u4e86\uff0c\u62db\u52df\u58eb\u5175\u963b\u622a\u654c\u4eba",51057:"\u654c\u4eba\u5c31\u8981\u5230\u8fbe\u7ec8\u70b9\u4e86\uff0c\u62d6\u52a8\u91ca\u653e\u201c\u4f20\u9001\u201d\u6280\u80fd",51058:"\u201c\u95ea\u7535\u98ce\u66b4\u201d\u6280\u80fd\u5df2\u5c31\u7eea\uff0c\u62d6\u52a8\u91ca\u653e",51059:"\u7bad\u5854\u53ef\u8bbe\u7f6e\u5b88\u5c06\u4e86",51060:"\u70b9\u51fb\u8fd9\u91cc\u4e0a\u9635\u5b88\u5c06",51061:"\u5175\u8425\u53ef\u8bbe\u7f6e\u5b88\u5c06\u4e86",51062:"\u70b9\u51fb\u8fd9\u91cc\u4e0a\u9635\u5b88\u5c06",51063:"\u6cd5\u5e08\u5854\u53ef\u8bbe\u7f6e\u5b88\u5c06\u4e86",51064:"\u70b9\u51fb\u8fd9\u91cc\u4e0a\u9635\u5b88\u5c06",51065:"\u6709\u65b0\u7684\u6280\u80fd\u53ef\u4ee5\u5347\u7ea7\u4e86",51066:"\u5347\u7ea7\u9700\u8981\u788e\u7247\uff0c\u53ef\u901a\u8fc7\u5546\u5e97\u6216\u8005\u51fb\u6740boss\u83b7\u5f97\u3002\u7ee7\u7eed\u5347\u7ea7\u6280\u80fd",51067:"\u6709\u65b0\u7684\u6280\u80fd\u53ef\u4ee5\u89e3\u9501\u4e86\uff0c\u53bb\u770b\u770b",51068:"\u4f60\u53ef\u4ee5\u70b9\u51fb\u3010\u4f7f\u7528\u3011\uff0c\u6362\u4e0a\u65b0\u6280\u80fd",51069:"\u9009\u62e9\u8981\u66ff\u6362\u7684\u6280\u80fd",51070:"vip\u529f\u80fd\u5df2\u5f00\u542f\uff0c\u67e5\u770bvip\u5347\u7ea7\u6761\u4ef6\u548c\u7279\u6743",51071:"\u5b8c\u6210\u6307\u5b9aVIP\u4efb\u52a1\u5373\u53ef\u5347\u7ea7VIP\uff0c\u5347\u7ea7VIP\u53ef\u83b7\u5f97\u7279\u6743\u4ee5\u53ca\u65b0\u82f1\u96c4\u5956\u52b1",51072:"\u82f1\u96c4\u673a\u7f18\u5df2\u5f00\u542f\uff0c\u53bb\u770b\u770b",51073:"\u96c6\u9f50\u82f1\u96c4\u5e76\u8fbe\u5230\u4e00\u5b9a\u7b49\u7ea7\uff0c\u5373\u53ef\u89e3\u9501\u673a\u7f18\uff0c\u5feb\u53bb\u6536\u96c6\u66f4\u591a\u82f1\u96c4\u5427\uff01",51074:"\u4f60\u53ef\u4ee5\u70b9\u51fb\u3010\u4f7f\u7528\u3011\uff0c\u4f7f\u7528\u5df2\u89e3\u9501\u7684\u673a\u7f18",51075:"\u53ef\u53bb\u6218\u6597\u4e2d\u8bd5\u8bd5\u673a\u7f18\u6548\u679c\u5427\uff01",51076:"\u6709\u65b0\u7684\u673a\u7f18\u53ef\u5347\u7ea7\u4e86\uff0c\u53bb\u770b\u770b\u5427",51077:"\u7ee7\u7eed\u5f00\u7586\u6269\u571f\uff0c\u5411\u5357\u86ee\u65b9\u5411\u8fc8\u8fdb",51078:"\u606d\u559c\u89e3\u9501\u7b2c\u4e8c\u4e2a\u82f1\u96c4\u51fa\u6218\u4f4d\uff0c\u5feb\u53bb\u8bbe\u7f6e\u51fa\u6218\u82f1\u96c4\u5427",51079:"\u9009\u62e9\u51fa\u6218\u82f1\u96c4",52001:"\u8f7b\u6309\u4e24\u6b21\u63d0\u524d\u53ec\u5524\u654c\u519b",52002:"\u5728\u6b64\u5efa\u9020\u4e00\u5ea7\u5175\u8425",52003:"\u5728\u6b64\u5efa\u9020\u4e00\u5ea7\u6cd5\u5e08\u5854",52004:"\u5728\u6b64\u5efa\u9020\u4e00\u5ea7\u70ae\u5854",52005:"\u5f00\u59cb\u6218\u6597",52006:"\u7bad\u5854\u53ef\u5347\u7ea7",52007:"\u7ee7\u7eed\u6218\u6597",52008:"\u5175\u8425\u53ef\u5347\u7ea7",52009:"\u6cd5\u5e08\u5854\u53ef\u5347\u7ea7",52010:"\u70ae\u5854\u53ef\u5347\u7ea7",52011:"\u62d6\u52a8\u91ca\u653e\u6280\u80fd",52012:"\u5347\u7ea7\u70ae\u5854\u52304\u7ea7",52013:"\u62d6\u52a8\u79fb\u52a8\u82f1\u96c4",52014:"\u6740\u654c\u6389\u843d\u94a5\u5319\u53ef\u5f00\u5b9d\u7bb1",52015:"\u6218\u6597\u52a0\u901f{0}\u500d",52016:"\u6700\u540e\u4e00\u73ed\u5730\u94c1\u4e0a\u7a7a\u65e0\u4e00\u4eba",52017:"\u8ff7\u8ff7\u7cca\u7cca\u7761\u7740\u4e86",52018:"\u4e00\u7741\u773c\u2026\u2026",52019:"\u53ef\u4e0a\u9635\u7b2c\u4e8c\u4e2a\u5148\u950b",1001:"\u5b98\u6e21\u4e4b\u6218",1002:"\u5e7f\u544a\u7ffb\u500d",1003:"\u9886\u53d6",1004:"{0}/{1}",1005:"\u83b7\u5f97\u5956\u52b1",1006:"\u9668\u94c1\u4e0d\u8db3",1007:"\u6682\u505c",1008:"\u5df2\u5b66\u9526\u56ca",1009:"{0}\u7ea7",1010:"\u91cd\u65b0\u5f00\u59cb",1011:"\u7ee7\u7eed\u6e38\u620f",1012:"\u653e\u5f03\u6311\u6218",1013:"\u751f\u547d",1014:"\u7269\u7406\u653b\u51fb",1015:"\u6cd5\u672f\u653b\u51fb",1016:"\u7269\u7406\u9632\u5fa1",1017:"\u6cd5\u672f\u9632\u5fa1",1018:"\u66b4\u51fb\u6982\u7387",1019:"\u66b4\u51fb\u4f24\u5bb3",1020:"\u95ea\u907f\u6982\u7387",1021:"\u56de\u8840\u7cfb\u6570",1022:"\u653b\u901f",1023:"\u653b\u51fb\u8303\u56f4",1024:"\u7729\u6655\u6982\u7387",1025:"\u7834\u7532\u6548\u679c",1026:"\u4f24\u5bb3",1027:"\u79fb\u901f",1028:"\u5175\u5854\u653b\u51fb\u589e\u52a0{0}%",1029:"\u9632\u5fa1\u5854\u653b\u51fb\u589e\u52a0{0}%",1030:"\u9526\u56ca",1031:"(\u9009\u62e9\u4e00\u4e2a\u9526\u56ca)",1032:"\u5237\u65b0",1033:"\u5173\u7fbd",1034:"\u5f20\u98de",1035:"\u5218\u5907",1036:"<color=#3f200c>\u5175\u5854\u62db\u52df\u58eb\u5175\u653b\u51fb\u63d0\u9ad8<color=#409800>{0}%</color></color>",1037:"<color=#3f200c>\u5168\u90e8\u7c7b\u578b\u9632\u5fa1\u5854\u653b\u51fb\u63d0\u9ad8<color=#409800>{0}%</color></color>",1038:"<color=#3f200c>\u6cd5\u672f\u5854\u653b\u901f\u63d0\u9ad8<color=#409800>{0}%</color></color>",1039:"<color=#3f200c>\u5168\u90e8\u7c7b\u578b\u9632\u5fa1\u5854\u653b\u901f\u63d0\u9ad8<color=#409800>{0}%</color></color>",1040:"<color=#3f200c>\u70ae\u5854\u653b\u51fb\u8303\u56f4\u63d0\u9ad8<color=#409800>{0}%</color></color>",1041:"<color=#3f200c>\u5168\u90e8\u7c7b\u578b\u9632\u5fa1\u5854\u653b\u51fb\u8303\u56f4\u63d0\u9ad8<color=#409800>{0}%</color></color>",1042:"<color=#3f200c>\u7bad\u5854\u66b4\u51fb\u6982\u7387\u589e\u52a0<color=#409800>{0}%</color></color>",1043:"<color=#3f200c>\u5168\u90e8\u7c7b\u578b\u9632\u5fa1\u5854\u66b4\u51fb\u6982\u7387\u589e\u52a0<color=#409800>{0}%</color></color>",1044:"<color=#3f200c>\u7bad\u5854\u66b4\u51fb\u4f24\u5bb3\u589e\u52a0<color=#409800>{0}%</color></color>",1045:"<color=#3f200c>\u5168\u90e8\u7c7b\u578b\u9632\u5fa1\u5854\u66b4\u51fb\u4f24\u5bb3\u589e\u52a0<color=#409800>{0}%</color></color>",1046:"<color=#3f200c>\u7bad\u5854\u653b\u51fb\u6709<color=#409800>{1}%</color>\u6982\u7387\u4f7f\u76ee\u6807\u7729\u6655<color=#409800>{2}</color>\u79d2</color>",1047:"<color=#3f200c>\u6cd5\u672f\u5854\u653b\u51fb\u6709<color=#409800>{1}%</color>\u6982\u7387\u4f7f\u76ee\u6807\u7729\u6655<color=#409800>{2}</color>\u79d2</color>",1048:"<color=#3f200c>\u62db\u52df\u7684\u58eb\u5175\u88ab\u653b\u51fb\u6709<color=#409800>{1}%</color>\u6982\u7387\u5c06\u53d7\u5230\u4f24\u5bb3\u7684<color=#409800>{0}%</color>\u53cd\u4f24\u5230\u653b\u51fb\u8005</color>",1049:"<color=#3f200c>\u7bad\u5854\u653b\u51fb\u65f6\u6709<color=#409800>{1}%</color>\u7684\u6982\u7387\u53d1\u5c04\u4e00\u53ea\u706b\u7bad\u9020\u6210<color=#409800>{0}%</color>\u7206\u70b8\u4f24\u5bb3</color>",1050:"<color=#3f200c>\u70ae\u5854\u653b\u51fb\u65f6\u6709<color=#409800>{1}%</color>\u7684\u51e0\u7387\u89e6\u53d1\u8fde\u5c04\u6548\u679c</color>",1051:"<color=#3f200c>\u6cd5\u672f\u5854\u653b\u51fb\u65f6\u4f1a\u51cf\u5c11\u76ee\u6807<color=#409800>{0}%</color>\u7684\u7269\u7406\u9632\u5fa1\uff0c\u6700\u591a\u51cf\u5c11<color=#409800>{3}%</color></color>",1052:"1\u7ea7\u7bad\u5854",1053:"2\u7ea7\u7bad\u5854",1054:"3\u7ea7\u7bad\u5854",1055:"1\u7ea7\u5175\u5854",1056:"2\u7ea7\u5175\u5854",1057:"3\u7ea7\u5175\u5854",1058:"1\u7ea7\u70ae\u5854",1059:"2\u7ea7\u70ae\u5854",1060:"3\u7ea7\u70ae\u5854",1061:"1\u7ea7\u6cd5\u5e08\u5854",1062:"2\u7ea7\u6cd5\u5e08\u5854",1063:"3\u7ea7\u6cd5\u5e08\u5854",1064:"\u4f8b\u65e0\u865a\u53d1\u7684\u5f13\u7bad\u624b\uff0c\u4ed6\u4eec\u4f1a\u8003\u8651\u4f18\u5148\u653b\u51fb\u8840\u91cf\u6700\u5c11\u7684\u654c\u4eba",1065:"\u62db\u52df\u5f3a\u58ee\u7684\u58eb\u5175\u4e3a\u4f60\u963b\u6321\u654c\u4eba\uff0c\u76ee\u6807\u662f\u8ba9\u81ea\u5df1\u6d3b\u4e0b\u6765",1066:"\u6700\u5177\u5a01\u6151\u529b\u7684\u9632\u5fa1\u5854\uff0c\u4f18\u5148\u653b\u51fb\u6700\u8fdc\u7684\u654c\u4eba\u5e76\u5ffd\u89c6\u654c\u4eba\u4e00\u90e8\u5206\u7269\u7406\u9632\u5fa1",1067:"\u6700\u806a\u660e\u7684\u89d2\u8272\uff0c\u8bd5\u56fe\u9760\u8fd1\u4ed6\u7684\u654c\u4eba\u4f1a\u88ab\u4f18\u5148\u6d88\u706d",1068:"\u96c6\u5e02",1069:"\u4e00\u5927\u5806\u5143\u5b9d",1070:"\u5269\u4f59\u6b21\u6570:{0}",1071:"\u514d\u8d39",1072:"\u81f3\u5c0a\u5b9d\u7bb1",1073:"\u6709\u51e0\u7387\u5f00\u51fa\u7a00\u6709\u82f1\u96c4",1074:"\u661f\u661f\u5b9d\u7bb1",1075:"\u5927\u6982\u7387\u5f00\u51fa\u53f2\u8bd7\u7ea7\u788e\u7247",1076:"\u81f3\u5c0a\u5b9d\u7bb1",1077:"\u5927\u6982\u7387\u5f00\u51fa\u53f2\u8bd7\u7ea7\u82f1\u96c4\u548c\u788e\u7247",1078:"\u5b9d\u7bb1",1079:"\u95ea\u7535\u98ce\u66b4",1080:"\u4f20\u9001",1081:"\u62db\u5175",1082:"\u91ca\u653e5\u9053\u95ea\u7535\u5bf9\u8303\u56f4\u5185\u654c\u4eba\u9020\u6210\u5927\u91cf\u4f24\u5bb3",1083:"\u4f7f\u8303\u56f4\u5185\u6700\u591a5\u4e2a\u76ee\u6807\u56de\u9000400\u7801\u8ddd\u79bb",1084:"\u53ec\u55242\u4e2a\u5f3a\u58ee\u7684\u8fd1\u536b\u5e2e\u52a9\u62b5\u6321\u654c\u4eba\uff0c\u6301\u7eed12\u79d2",1085:"\u82f1\u96c4",1086:"\u6218\u5f79",1087:"\u9632\u5fa1\u5854",1088:"\u96c6\u5e02",1089:"\u672a\u89e3\u9501",1090:"\u58eb\u5175\u751f\u547d",1091:"\u653b\u51fb\u4f24\u5bb3",1092:"\u7269\u7406\u9632\u5fa1",1093:"\u62db\u52df\u901f\u5ea6",1094:"+{0}",1095:"{0}/{1}",1096:"\u6218\u6597\u529b",1097:"\u5c5e\u6027\u63d0\u5347",1098:"\u6fc0\u6d3b",1099:"\u5347\u661f",1100:"\u70ae\u5854",1101:"\u5175\u8425",1102:"\u6cd5\u5e08\u5854",1103:"\u94dc\u5e01\u6570\u91cf\u4e0d\u8db3\uff0c\u662f\u5426\u76f4\u63a5\u4f7f\u7528\u5143\u5b9d\u8865\u9f50",1104:"\u7f3a\u5931\u94dc\u5e01:",1105:"\u53d6\u6d88",1106:"\u653b\u51fb\u63d0\u9ad8(\u5168)",1107:"\u653b\u51fb\u63d0\u9ad8(\u5175)",1108:"\u653b\u901f\u63d0\u9ad8(\u5168)",1109:"\u653b\u901f\u63d0\u9ad8(\u6cd5)",1110:"\u8303\u56f4\u63d0\u9ad8(\u5168)",1111:"\u8303\u56f4\u63d0\u9ad8(\u70ae)",1112:"\u66b4\u51fb\u63d0\u9ad8(\u5168)",1113:"\u66b4\u51fb\u63d0\u9ad8(\u7bad)",1114:"\u66b4\u4f24\u63d0\u9ad8(\u5168)",1115:"\u9644\u52a0\u7729\u6655(\u7bad)",1116:"\u9644\u52a0\u7729\u6655(\u6cd5)",1117:"\u82f1\u52c7\u53cd\u51fb(\u5175)",1118:"\u706b\u7130\u7bad\u77e2(\u7bad)",1119:"\u706b\u70ae\u8fde\u5c04(\u70ae)",1120:"\u7269\u9632\u4fb5\u8680(\u6cd5)",1121:"\u7bad\u5854",1122:"\u66f4\u591a",1123:"\u4e00\u6ce2\u654c\u4eba\u5373\u5c06\u5230\u6765",1124:"{0}x{1}",1125:"\u518d\u6b21\u70b9\u51fb\u6765\u63d0\u524d\u53ec\u5524\u4e0b\u4e00\u6ce2",1126:"\u653b\u51fb\u901f\u5ea6",1127:"\u653b\u51fb\u8303\u56f4",1128:"\u653b\u51fb\u4f24\u5bb3+{0}",1129:"\u5143\u5b9d\u4e0d\u8db3",1130:"\u82f1\u96c4\u5df2\u9635\u4ea1",1131:"\u6750\u6599\u4e0d\u8db3",1132:"\u8be6\u60c5",1133:"{0}\u7ea7\u89e3\u9501",1134:"\u653b\u51fb",1135:"\u7269\u9632",1136:"\u7b49\u7ea7",1137:"\u4e0a\u9635",1138:"\u5347\u7ea7",1139:"\u6302\u673a\u6536\u76ca",1140:"\u6302\u673a\u65f6\u957f:",1141:"{0}/h",1142:"\u5f53\u524d\u5b98\u804c\uff1a{0}",1143:"\u94dc\u5e01:",1144:"{0}/h",1145:"\u82f1\u96c4\u7ecf\u9a8c:",1146:"\u4e0b\u4e00\u5b98\u804c\uff1a{0}",1147:"\u82f1\u96c4\u52a0\u6210:\u5f53\u524d\u6536\u76ca\u589e\u52a0{0}%(\u82f1\u96c4\u8d8a\u591a\u52a0\u6210\u8d8a\u591a)",1148:"\u9632\u5fa1\u5854\u5c01\u5370\u4e2d",1149:"x{0}",1150:"\u6b63\u5728\u52a0\u8f7d\u4e2d...",1151:"\u8bf7\u68c0\u67e5\u7f51\u7edc...",1152:"\u901a\u5173{0}\u7b2c{1}\u5173\u540e\u89e3\u9501{2}\u529f\u80fd",1153:"\u4f60\u8fd8\u6ca1\u6709\u82f1\u96c4\uff0c\u5feb\u53bb\u96c6\u5e02\u62db\u52df\u5427\uff01",1154:"\u5e7f\u544a\u672a\u51c6\u5907\u597d",1155:"\u5e7f\u544a\u64ad\u653e\u5931\u8d25",1156:"\u91cc\u957f",1157:"\u5c6f\u957f",1158:"\u519b\u4faf",1159:"\u519b\u53f8\u9a6c",1160:"\u90fd\u5c09",1161:"\u6821\u5c09",1162:"\u4e2d\u90ce\u5c06",1163:"\u88e8\u5c06\u519b",1164:"\u504f\u5c06\u519b",1165:"\u7259\u95e8\u5c06\u519b",1166:"\u4f0f\u6ce2\u5c06\u519b",1167:"\u7fca\u6b66\u5c06\u519b",1168:"\u7fca\u5e08\u5c06\u519b",1169:"\u5efa\u5a01\u5c06\u519b",1170:"\u5efa\u6b66\u5c06\u519b",1171:"\u632f\u5a01\u5c06\u519b",1172:"\u632f\u6b66\u5c06\u519b",1173:"\u9886\u519b\u5c06\u519b",1174:"\u62a4\u519b\u5c06\u519b",1175:"\u6b66\u536b\u5c06\u519b",1176:"\u4e2d\u5792\u5c06\u519b",1177:"\u9547\u519b\u5c06\u519b",1178:"\u629a\u519b\u5c06\u519b",1179:"\u9547\u56fd\u5c06\u519b",1180:"\u9f99\u9aa7\u5c06\u519b",1181:"\u5e73\u4e1c\u5c06\u519b",1182:"\u5e73\u5357\u5c06\u519b",1183:"\u5e73\u897f\u5c06\u519b",1184:"\u5e73\u5317\u5c06\u519b",1185:"\u5b89\u4e1c\u5c06\u519b",1186:"\u5b89\u5357\u5c06\u519b",1187:"\u5b89\u897f\u5c06\u519b",1188:"\u5b89\u5317\u5c06\u519b",1189:"\u9547\u4e1c\u5c06\u519b",1190:"\u9547\u5357\u5c06\u519b",1191:"\u9547\u897f\u5c06\u519b",1192:"\u9547\u5317\u5c06\u519b",1193:"\u5f81\u4e1c\u5c06\u519b",1194:"\u5f81\u5357\u5c06\u519b",1195:"\u5f81\u897f\u5c06\u519b",1196:"\u5f81\u5317\u5c06\u519b",1197:"\u524d\u5c06\u519b",1198:"\u540e\u5c06\u519b",1199:"\u5de6\u5c06\u519b",1200:"\u53f3\u5c06\u519b",1201:"\u9aa0\u9a91\u5c06\u519b",1202:"\u8f66\u9a91\u5c06\u519b",1203:"\u536b\u5c06\u519b",1204:"\u5b89\u56fd\u5c06\u519b",1205:"\u5927\u5c06\u519b",1206:"\u8bf7\u9009\u62e9\u4f60\u7684\u82f1\u96c4",1207:"\u5f00\u59cb\u6e38\u620f",1208:"\u901a\u8fc7\u7b2c{0}\u7ae0\u89e3\u9501",1209:"\u4e0a\u9635\u5b88\u5c06",1210:"\u786e\u5b9a",1211:"\u5df2\u4e0a\u9635\u5b88\u5c06<color=#da281a>{0}</color>/{1}",1212:"\u5168\u90e8",1213:"\u961f\u957f",1214:"\u88ab\u52a8",1215:"\u788e\u7247\u6765\u6e90",1216:"\u91cd\u590d\u7684\u82f1\u96c4\u788e\u7247\u53ef\u7528\u4e8e\u82f1\u96c4\u89c9\u9192",1217:"\u524d\u5f80",1218:"\u5168\u90e8",1219:"\u6709\u673a\u4f1a\u83b7\u5f97",1220:"{0}\u6b21\u5fc5\u5b9a\u83b7\u5f97{1}\u4e2a\u82f1\u96c4",1221:"\u62db\u52dfx{0}",1222:"\u5fc5\u5b9a\u83b7\u5f97{0}\u4e2a\u82f1\u96c4",1223:"\u901a\u8fc7\u89c2\u770b\u5e7f\u544a\u83b7\u5f97\u94dc\u5e01",1224:"\u901a\u8fc7\u89c2\u770b\u5e7f\u544a\u83b7\u5f97\u5143\u5b9d",1225:"\u597d\u7684",1226:"\u65b0\u83b7\u5f97",1227:"{0}\u661f",1228:"\u8ddd\u79bb",1229:"\u4e3b\u52a8",1230:"{0}\u661f\u6fc0\u6d3b",1231:"\u9668\u94c1\u589e\u52a0",1232:"\u51fa\u552e\u4ef7\u683c",1233:"\u6218\u4e2d\u56de\u8840",1234:"\u6280\u80fd\u51b7\u5374",1235:"<color=#3f200c>\u51fb\u6740\u602a\u7269\u83b7\u5f97\u7684\u9668\u94c1\u6709<color=#409800>{1}%</color>\u6982\u7387\u589e\u52a0<color=#409800>{0}%</color></color>",1236:"<color=#3f200c>\u51fa\u552e\u9632\u5fa1\u5854\u65f6\u6240\u5f97\u9668\u94c1\u589e\u52a0<color=#409800>{0}%</color></color>",1237:"<color=#3f200c>\u6211\u65b9\u5355\u4f4d\u6218\u4e2d\u53ef\u56de\u8840</color>",1238:"<color=#3f200c>\u5929\u8d4b\u6280\u80fd\u51b7\u5374\u65f6\u95f4\u51cf\u5c11<color=#409800>{0}%</color></color>",1239:"\u4efb\u52a1",1240:"\u79ef\u5206\u5956\u52b1\u5c06\u4e8e{0}\u540e\u5237\u65b0",1241:"({0}/{1})",1242:"\u5956\u52b1:",1243:"\u5df2\u9886\u53d6",1244:"\u606d\u559c\u83b7\u5f97\u5956\u52b1",1245:"\u606d\u559c\u664b\u5347",1246:"\u53cc\u500d",1247:"\u8bbe\u7f6e",1248:"\u97f3\u4e50",1249:"\u97f3\u6548",1250:"\u9707\u52a8",1251:"\u6635\u79f0:{0}",1252:"\u4f53\u9a8c\u53cd\u9988",1253:"\u8bed\u8a00\u5207\u6362",1254:"ID:{0}",1255:"\u6635\u79f0\u4fee\u6539",1256:"\u8bf7\u8f93\u5165{0}\u4e2a\u6c49\u5b57\u6216{1}\u4e2a\u82f1\u6587\u5b57\u7b26",1257:"\u8bf7\u8f93\u5165\u60a8\u7684\u5efa\u8bae",1258:"\u5efa\u8bae",1259:"\u83b7\u5f97\u82f1\u96c4\u788e\u7247{0}\u4e2a",1260:"\u96c6\u5e02\u62bd\u5361{0}\u6b21",1261:"\u51fb\u6740{0}\u4e2a\u654c\u4eba",1262:"\u51fb\u6740{1}\u4e2a{0}",1263:"\u4efb\u610f\u82f1\u96c4\u5347\u7ea7{0}\u6b21",1264:"\u4efb\u610f\u9632\u5fa1\u5854\u5347\u7ea7{0}\u6b21",1265:"\u5e7f\u544a\u83b7\u5f97\u94dc\u5e01{0}\u6b21",1266:"\u5e7f\u544a\u5f97\u5143\u5b9d{0}\u6b21",1267:"\u5e7f\u544a\u7ed3\u7b97\u5956\u52b1\u7ffb\u500d{0}\u6b21",1268:"\u6302\u673a\u6536\u76ca{0}\u94dc\u5e01",1269:"\u6302\u673a\u6536\u76ca{0}\u82f1\u96c4\u7ecf\u9a8c",1270:"\u6218\u6597\u4e2d\u5efa\u9020\u82f1\u96c4\u5854{0}{1}\u6b21",1271:"\u6218\u6597\u4e2d\u63d0\u524d\u53ec\u5524{0}\u6ce2\u654c\u4eba",1272:"\u6218\u6597\u4e2d\u5efa\u7b51{0}\u5ea7\u9632\u5fa1\u5854",1273:"\u624b\u52a8\u91ca\u653e\u4efb\u610f\u6280\u80fd{0}\u6b21",1274:"\u6218\u6597\u4e2d\u5175\u8425\u9020\u5175{0}\u4e2a",1275:"\u621f\u5175",1276:"\u86ee\u5175",1277:"\u98ce\u7b5d\u5175",1278:"\u533b\u5b98",1279:"\u5f29\u5175",1280:"\u6cd5\u5e081",1281:"\u6cd5\u5e082",1282:"\u6cd5\u5e083",1283:"\u6cd5\u5e084",1284:"\u6cd5\u5e085",1285:"\u6cd5\u5e086",1286:"\u6b66\u5723",1287:"\u6b66\u5723",1288:"\u56de\u6625\u672f",1289:"\u75be\u884c",1290:"\u5168\u519b\u51fa\u51fb",1291:"\u64bc\u5730",1292:"\u4ec1\u5fb7",1293:"\u4ec1\u5fb7",1294:"\u63f4\u519b",1295:"\u67ad\u59ec",1296:"\u67ad\u59ec",1297:"\u67ad\u59ec",1298:"\u70c8\u5f13",1299:"\u70c8\u5f13",1300:"\u70c8\u5f13",1301:"\u8bdb\u5fc3",1302:"\u8bdb\u5fc3",1303:"\u8bdb\u5fc3",1304:"\u86ee\u88d4",1305:"\u86ee\u88d4",1306:"\u86ee\u88d4",1307:"\u70c8\u98ce",1308:"\u70c8\u98ce",1309:"\u70c8\u98ce",1310:"\u6392\u884c\u699c",1311:"\u5173\u5361",1312:"\u661f\u661f\u6570",1313:"\u5f53\u524d\u7f51\u7edc\u4e0d\u53ef\u7528\uff0c\u8bf7\u68c0\u67e5\u4f60\u7684\u7f51\u7edc\u8bbe\u7f6e",1314:"\u8ddd\u79bb\u4e0b\u6b21\u5237\u65b0  {0}",1315:"{0}\u7b2c{2}\u5173",1316:"\u5305\u542b\u654f\u611f\u5b57\u7b26\uff0c\u8bf7\u4fee\u6539\u540e\u518d\u8bd5",1317:"\u5305\u542b\u975e\u6cd5\u6587\u5b57\uff0c\u8bf7\u4fee\u6539\u540e\u518d\u8bd5",1318:"\u8bf7\u8f93\u5165",1319:"\u6700\u591a\u652f\u6301{0}\u4e2a\u4e2d\u6587\u6216{1}\u4e2a\u82f1\u6587\u5b57\u7b26",1320:"\u53cd\u9988\u6210\u529f\uff0c\u8bf7\u5173\u6ce8\u90ae\u4ef6\uff01",1321:"\u7ee7\u7eed",1322:"\u65b0\u654c\u4eba",1323:"\u4e16\u754c",1324:"\u4f53\u529b\u8d2d\u4e70",1325:"\u83b7\u5f97",1326:"\u4f53\u529b\u4e0d\u8db3",1327:"\u76fe\u5175",1328:"\u3010\u5148\u950b\u3011",1329:"\u82f1\u96c4\u63d0\u5347",1330:"{0}\u89e3\u9501",1331:"\u89c9\u9192",1332:"\u53d8\u5f3a",1333:"{0}\u7ea7\u53ef\u89c9\u9192",1334:"\u7a81\u7834",1335:"\u89e3\u9501",1336:"\u5b88\u5c06\u4f4d",1337:"\u94dc\u5e01\u4e0d\u8db3",1338:"({0}\u89e3\u9501)",1339:"\u666e\u901a",1340:"\u7a00\u6709",1341:"\u53f2\u8bd7",1342:"\u4f20\u5947",1343:"\u5b98\u804c\u5230\u8fbe{0}\u89e3\u9501",1344:"\u5c5e\u6027",1345:"\u6cd5\u9632",1346:"\u6280\u80fd",1347:"(\u5df2\u89e3\u9501)",1348:"\u968f\u673a\u83b7\u5f97",1349:"{0}\u5143\u5b9d",1350:"{0}\u82f1\u96c4\u788e\u7247",1351:"{0}\u540e\u514d\u8d39",1352:"{0}\u5c0f\u65f6",1353:"\u94dc\u5e01",1354:"\u4e00\u5806\u94dc\u5e01",1355:"\u4e00\u888b\u94dc\u5e01",1356:"\u4e00\u7bb1\u94dc\u5e01",1357:"\u62db\u52df",1358:"\u518d\u62bd\u4e00\u6b21",1359:"\u53ef\u4e0a\u9635\u65b0\u5b88\u5c06",1360:"\u9632\u5fa1\u5854\u53ef\u4e0a\u9635\u65b0\u5b88\u5c06\uff0c\u662f\u5426\u524d\u5f80\u8bbe\u7f6e\uff1f",1361:"\u524d\u5f80\u8bbe\u7f6e",1362:"\u76f4\u63a5\u6218\u6597",1363:"\u4e0b\u6b21\u514d\u8d39\u9886\u53d6",1364:"\u82f1\u96c4\u7ecf\u9a8c",1365:"\u5c11\u91cf\u7ecf\u9a8c",1366:"\u5927\u91cf\u7ecf\u9a8c",1367:"\u8d85\u5927\u91cf\u7ecf\u9a8c",1368:"+{0}%",1369:"\u5347\u7ea7\u9526\u56ca",1370:"\u514d\u8d39\u5347\u7ea7",1371:"\u76f4\u63a5\u9886\u53d6",1372:"\u514d\u8d39\u590d\u6d3b",1373:"\u590d\u6d3b",1374:"\u6bcf\u5c40\u6e38\u620f\u53ea\u6709\u4e00\u6b21\u590d\u6d3b\u673a\u4f1a",1375:"\u8c82\u8749\u7684\u9988\u8d60",1376:"\u8bf7\u9009\u62e9\u4e00\u4e2a\u9988\u8d60",1377:"\u6211\u90fd\u8981",1378:"\u4e0d\u7528\u4e86\uff0c\u8c22\u8c22",1379:"\u9668\u94c1",1380:"\u83b7\u5f97{0}\u9668\u94c1\uff0c\u5f53\u5c40\u5173\u5361\u6709\u6548",1381:"\u6218\u6597\u7ed3\u7b97\u94dc\u94b1\u52a0\u6210{0}%",1382:"\u6218\u6597\u7ed3\u7b97\u82f1\u96c4\u7ecf\u9a8c\u52a0\u6210{0}%",1383:"\u6700\u597d\u7684\u5956\u52b1",1384:"\u5269\u4f59{0}\u6b21",1385:"{0}\u5c0f\u65f6\u6536\u76ca",1386:"\u6682\u65e0{0}\u5b88\u5c06",1387:"\u62db\u52df{0}\u540e\u89e3\u9501\u8be5\u5934\u50cf",1388:"\u4e3b\u516c\u8be6\u60c5",1389:"\u6635\u79f0:",1390:"\u5b98\u804c:",1391:"\u6218\u529f:",1392:"\u66f4\u6362\u5934\u50cf",1393:"\u8bf7\u9009\u62e9\u5934\u50cf",1394:"\u5df2\u89e3\u9501\u5934\u50cf",1395:"\u672a\u89e3\u9501\u5934\u50cf",1396:"\u7b49\u7ea7\u4e0d\u8db3",1397:"\u788e\u7247\u4e0d\u8db3",1398:"\u654c\u4eba\u58eb\u5175",1399:"\u4efb\u547d\u5148\u950b",1400:"\u7ecf\u9a8c\u4e0d\u8db3",1401:"\u6218\u529f",1402:"\u4f53\u529b",1403:"\u5143\u5b9d",1404:"\u52bf\u529b\u8be6\u60c5",1405:"\u5f81\u4f10",1406:"\u672a\u62b5\u8fbe",1407:"\u7b7e\u5230",1408:"\u81f3\u5c0a\u5b9d\u7bb1\u53ef\u6982\u7387\u83b7\u5f97\u65b0\u82f1\u96c4\u788e\u7247\uff1b",1409:"\u4efb\u52a1\u79ef\u5206\u5b9d\u7bb1\u53ef\u83b7\u5f97\u82f1\u96c4\u788e\u7247",1410:"\u661f\u661f\u5b9d\u7bb1\u53ef\u83b7\u5f97\u82f1\u96c4\u788e\u7247",1411:"7\u65e5\u9001\u5415\u5e03\u788e\u7247",1412:"\u6218\u6597\u4e2d\u83b7\u5f97\u94a5\u5319\uff0c\u5f00\u5b9d\u7bb1\u53ef\u5f97\u788e\u7247",1413:"\u656c\u8bf7\u671f\u5f85",1414:"\u7b2c{0}\u5929",1417:"\u9886\u53d6\u53cc\u500d",1418:"\u4eca\u65e5\u5df2\u9886\u53d6\uff0c\u660e\u65e5\u518d\u6765^_^",1419:"\u6700\u9ad8\u7ea7\u4e86",1420:"\u6700\u5389\u5bb3\u4e86",1421:"\u7f51\u7edc\u9519\u8bef",1422:"\u7cfb\u7edf\u65f6\u95f4\u5f02\u5e38",1423:"7\u65e5\u9001\u5415\u5e03",1424:" / {0}",1425:"\u6ca1\u6709\u94a5\u5319\u4e86",1426:"\u950b",1427:"\u5854",1428:"\u8f85",1429:"\u7b2c{0}\u6ce2",1430:"\u62bd\u5956\u5238",1431:"\u660e\u65e5",1432:"\u9886\u53d6{0}",1433:"\u968f\u673a\u83b7\u5f973\u5f20\u82f1\u96c4\u788e\u7247",1434:"<color=#000><color=#0066ff>{0}</color>\u6b21\u5185\u5fc5\u5b9a\u83b7\u5f97<color=#ff7200>\u65b0\u82f1\u96c4</color>\u788e\u7247</color>",1435:"\u514d\u8d39\u5143\u5b9d",1436:"\u901a\u8fc7{0}\u7b2c{1}\u5173\u540e\u89e3\u9501",1437:"<color=#000>\u672c\u6b21\u5fc5\u5b9a\u83b7\u5f97\u540d\u5c06<color=#ff7200>{1}</color>\u788e\u7247</color>",1438:"\u8bd5\u7528\u5b88\u5c06",1439:"{0}\u5347\u52303\u7ea7\u53ef\u8bd5\u7528{1}",1440:"\u8bd5\u7528",1441:"{0}\u9001{1}",1442:"\u6302\u673a\u6536\u76ca\u589e\u52a0{0}%",1443:"\u4efb\u547d{0}\u4e3a\u5148\u950b\uff0c\u5e76\u53c2\u52a0{1}\u6b21\u6218\u6597",1444:"\u6b22\u8fce\u6765\u5230\u4e09\u56fd\u4e16\u754c\uff0c\u5b8f\u56fe\u9738\u4e1a\u5373\u5c06\u5f00\u542f",1445:"\u9996\u6b21\u901a\u5173\u53ef\u83b7\u5f97\u6218\u529f\uff0c\u63d0\u5347\u5b98\u804c\uff0c\u589e\u52a0\u6302\u673a\u6536\u76ca",1446:"\u5173\u5361\u901a\u5173\u53ef\u83b7\u5f97\u8bc4\u661f\uff0c\u7d2f\u8ba1\u661f\u661f\u53ef\u5f00\u542f\u661f\u661f\u5b9d\u7bb1",1447:"\u82f1\u96c4\u5347\u661f\u53ef\u63d0\u5347\u7b49\u7ea7\u4e0a\u9650",1448:"\u82f1\u96c4\u89c9\u9192\u53ef\u63d0\u5347\u54c1\u8d28\uff0c\u89e3\u9501\u65b0\u6280\u80fd",1449:"\u62db\u52df\u65b0\u82f1\u96c4\uff0c\u53ef\u589e\u52a0\u6302\u673a\u6536\u76ca",1450:"\u83b7\u5f97\u65b0\u82f1\u96c4\u540e\uff0c\u8bb0\u5f97\u53bb\u9632\u5fa1\u5854\u754c\u9762\u4e0a\u9635\u5b88\u5c06",1451:"\u82f1\u96c4\u5347\u7ea7\u53ef\u63d0\u5347\u6218\u529b",1452:"\u96c6\u5e02\u5f00\u5b9d\u7bb1\u53ef\u83b7\u5f97\u82f1\u96c4\u788e\u7247",1453:"\u661f\u661f\u5b9d\u7bb1\u53ef\u83b7\u5f97\u62bd\u5956\u5238",1454:"\u4efb\u52a1\u79ef\u5206\u5b9d\u7bb1\u53ef\u83b7\u5f97\u62bd\u5956\u5238",1455:"\u6218\u4e2d\u5b9d\u7bb1\u53ef\u83b7\u5f97\u62bd\u5956\u5238",1456:"\u9632\u5fa1\u5854\u5347\u7ea7\u53ef\u63d0\u5347\u5854\u7684\u6218\u529b",1457:"\u9632\u5fa1\u5854\u89c9\u9192\u53ef\u589e\u52a0\u5b88\u5c06\u4f4d",1458:"\u6218\u6597\u590d\u6d3b\u540e\uff0c\u4f1a\u6062\u590d\u4e00\u5b9a\u751f\u547d\u503c",1459:"\u7bad\u5854\u4f18\u5148\u653b\u51fb\u98de\u884c\u654c\u4eba\uff0c\u653b\u901f\u6700\u5feb",1460:"\u70ae\u5854\u5bf9\u8303\u56f4\u5185\u654c\u4eba\u9020\u6210\u4f24\u5bb3\uff0c\u653b\u901f\u6162",1461:"\u6cd5\u5e08\u5854\u53ef\u653b\u51fb\u98de\u884c\u654c\u4eba\uff0c\u4f24\u5bb3\u6700\u9ad8",1462:"\u5175\u8425\u53ef\u62db\u52df\u58eb\u5175\u62e6\u622a\u654c\u4eba",1463:"\u6211\u4e43\u70ae\u5854\u5b88\u5c06\uff0c\u4eba\u9001\u5916\u53f7\u5173\u4e8c\u70ae",1464:"\u6211\u6709\u5148\u950b\u6280\u80fd-\u65cb\u98ce\u65a9\uff0c\u5e78\u798f\u9b54\u529b\u8f6c\u5708\u5708",1465:"\u6211\u6709\u70ae\u5854\u6280\u80fd-\u6563\u5f39\u70ae\uff0c\u70ae\u5854\u5f00\u70ae\u65f6\u53d1\u5c04\u5927\u91cf\u5c0f\u70ae\u5f39",1466:"\u6211\u4e43\u5175\u5854\u5b88\u5c06\uff0c\u4eba\u9001\u5916\u53f7\u5f20\u5927\u5634",1467:"\u6211\u6709\u5148\u950b\u6280\u80fd-\u72ee\u543c\u529f\uff0c\u80fd\u628a\u654c\u519b\u5413\u50bb",1468:"\u6211\u6709\u5175\u8425\u6280\u80fd-\u5486\u54ee\uff0c\u5175\u8425\u58eb\u5175\u4e2a\u4e2a\u53d8\u8eab\u5c0f\u5f20\u98de",1469:"\u6211\u4e43\u70ae\u5854\u5b88\u5c06\uff0c\u4eba\u9001\u5916\u53f7\u5218\u5927\u70ae",1470:"\u6211\u6709\u5148\u950b\u6280\u80fd-\u5468\u8eab\u5251\uff0c\u8d70\u5230\u54ea\u6740\u5230\u54ea",1471:"\u6211\u6709\u70ae\u5854\u6280\u80fd-\u5730\u96f7\u6218\uff0c\u70ae\u5854\u6254\u5730\u96f7\uff0c\u654c\u519b\u70b8\u5f00\u82b1",1472:"\u6211\u4e43\u7bad\u5854\u5b88\u5c06\uff0c\u4eba\u9001\u5916\u53f7\u5c0f\u841d\u8389",1473:"\u6211\u6709\u5148\u950b\u6280\u80fd-\u6bd2\u7bad\u96e8\uff0c\u5973\u5b69\u72e0\u8d77\u6765\u8fde\u81ea\u5df1\u90fd\u6253",1474:"\u6211\u6709\u7bad\u5854\u6280\u80fd-\u6bd2\u6db2\u5f39\uff0c\u8ba9\u654c\u519b\u8eab\u9677\u6bd2\u6db2\u6cbc\u6cfd",1475:"\u6211\u4e43\u7bad\u5854\u5b88\u5c06\uff0c\u4eba\u9001\u5916\u53f7\u9ec4\u53d4\u53d4",1476:"\u6211\u6709\u5148\u950b\u6280\u80fd-\u516d\u8fde\u5c04\uff0c\u4e13\u6253\u76ae\u7cd9\u8089\u539a\u7684\u574f\u86cb",1477:"\u6211\u6709\u7bad\u5854\u6280\u80fd-\u72d9\u51fb\uff0c\u5c31\u559c\u6b22\u7206\u5934\u7684\u611f\u89c9",1478:"\u6211\u4e43\u5175\u5854\u5b88\u5c06\uff0c\u4eba\u9001\u5916\u53f7\u5415\u9c9c\u8089",1479:"\u6211\u6709\u5148\u950b\u6280\u80fd-\u65b9\u5929\u65a9\uff0c\u65b9\u5929\u753b\u621f\u4ece\u5929\u964d",1480:"\u6211\u6709\u5175\u8425\u6280\u80fd-\u72c2\u66b4\uff0c\u5175\u8425\u58eb\u5175\u4e2a\u4e2a\u5316\u8eab\u5c0f\u5415\u5e03",1481:"\u6211\u4e43\u6cd5\u5e08\u5854\u5b88\u5c06\uff0c\u4eba\u9001\u5916\u53f7\u806a\u660e\u4eae",1482:"\u6211\u6709\u5148\u950b\u6280\u80fd-\u96f7\u4e91\u516b\u5366\uff0c\u96f7\u96e8\u95ea\u7535\u8ffd\u7740\u654c\u4eba\u6253",1483:"\u6211\u6709\u6cd5\u5e08\u5854\u6280\u80fd-\u53ec\u5524\u706b\u7130\u9668\u77f3\uff0c\u6211\u53ef\u662f\u73a9\u706b\u9ad8\u624b",1484:"\u6211\u4e43\u6cd5\u5e08\u5854\u5b88\u5c06\uff0c\u4eba\u9001\u5916\u53f7\u4e07\u4eba\u8ff7",1485:"\u6211\u6709\u5148\u950b\u6280\u80fd-\u9b45\u60d1\u654c\u519b\uff0c\u7f8e\u8c8c\u662f\u6211\u6700\u5f3a\u5927\u7684\u6b66\u5668",1486:"\u6211\u6709\u6cd5\u5e08\u5854\u6280\u80fd-\u66b4\u98ce\u96ea\uff0c\u51b0\u96ea\u7f8e\u4eba\u5c31\u662f\u6211",1487:"\u65e0",1488:"\u5230\u8fbe\u7ec8\u70b9-{0}",1489:"\u63d0\u793a",1490:"\u662f\u5426\u66ff\u6362\u3010{0}\u3011\u7684\u5148\u950b\u4f4d\u7f6e\uff1f",1491:"\u66ff\u6362",1492:"\u53ef\u901a\u8fc7\u4ee5\u4e0b\u9014\u5f84\u63d0\u5347\u6218\u529b",1493:"\u82f1\u96c4\u517b\u6210",1494:"\u9632\u5fa1\u5854\u517b\u6210",1495:"\u8c03\u6362\u5148\u950b",1496:"\u8bbe\u7f6e\u5b88\u5c06",1497:"\u901a\u5173{0}\u7b2c{1}\u5173\u540e\u89e3\u9501{2}\u6280\u80fd",1498:"\u52a0\u901f",1499:"\u5373\u5c06\u89e3\u9501{0}\u6280\u80fd",1500:"\u5f03\u6697\u6295\u660e",1501:"\u5f81\u4f10{0}\u4ee5\u62b5\u8fbe\u6b64\u533a\u57df",1502:"\u5feb\u901f\u6302\u673a",1503:"\u6709\u7269\u7406\u9632\u5fa1\u7684\u654c\u4eba\u548c\u58eb\u5175\u53d7\u5230\u7684\u7269\u7406\u4f24\u5bb3\u8f83\u5c11",1504:"\u7528\u8fdc\u7a0b\u653b\u51fb\u6765\u652f\u63f4\u5175\u8425\uff0c\u53ef\u6700\u5927\u9650\u5ea6\u5730\u8ba9\u654c\u4eba\u66b4\u9732\u5728\u653b\u51fb\u4e0b",1505:"\u62db\u5175\u662f\u5206\u5272\u654c\u4eba\u90e8\u961f\u7684\u597d\u65b9\u6cd5",1506:"\u70ae\u5854\u5728\u5bf9\u4ed8\u5bc6\u96c6\u654c\u4eba\u65f6\u6700\u6709\u6548",1507:"\u8fde\u7eed\u5229\u7528\u62db\u5175\u6280\u80fd\u6765\u51cf\u7f13\u5e76\u4f24\u5bb3\u654c\u4eba",1508:"\u4f7f\u7528\u95ea\u7535\u98ce\u66b4\u6280\u80fd\u65f6\u8981\u7784\u51c6\u654c\u4eba\u524d\u8fdb\u7684\u4f4d\u7f6e",1509:"\u5bf9\u4ed8\u6709\u7269\u7406\u9632\u5fa1\u7684\u654c\u4eba\uff0c\u6cd5\u5e08\u5854\u662f\u6700\u4f73\u7684\u529e\u6cd5",1510:"\u8c03\u6574\u58eb\u5175\u96c6\u7ed3\u70b9\u7684\u4f4d\u7f6e\uff0c\u4ee5\u5236\u5b9a\u66f4\u4f73\u7684\u7b56\u7565",1511:"\u6709\u65f6\u591a\u9020\u51e0\u5ea7\u9632\u5fa1\u5854\u597d\u8fc7\u53ea\u5347\u7ea7\u51e0\u5ea7\u5854",1512:"\u63d0\u524d\u53ec\u5524\u4e00\u6ce2\u654c\u4eba\u53ef\u83b7\u5f97\u9668\u94c1\u5956\u52b1\uff0c\u5e76\u51cf\u5c11\u6280\u80fd\u51b7\u5374\u65f6\u95f4",1513:"\u6302\u673a",1514:"\u5148\u950b",1515:"\u5165\u5854",1516:"\u5929\u8d4b",1517:"\u5feb\u901f\u626b\u8361\u5f53\u524d\u6700\u9ad8\u5173\u5361",1518:"{0}\u7b2c{1}\u5173",1519:"1.\u4f53\u529b\u8fbe\u5230\u4e0a\u9650\u540e\u5c06\u8f6c\u5316\u4e3a\u5b58\u50a8\u4f53\u529b",1520:"2.\u4f53\u529b\u52a0\u901f\u6302\u673a\u65f6\uff0c\u4f18\u5148\u6d88\u8017\u5b58\u50a8\u4f53\u529b",1521:"1.\u5feb\u901f\u83b7\u5f97\u5173\u5361\u6218\u6597\u5956\u52b1",1522:"2.\u6302\u673a\u6b21\u6570\u7528\u5b8c\u540e2\u5c0f\u65f6\u6062\u590d\uff0c\u4e5f\u53ef\u5e7f\u544a\u7acb\u5373\u6062\u590d",1523:"\u7acb\u5373\u6062\u590d",1524:"{0}",1525:"\u5269\u4f59\u6302\u673a\u6b21\u6570:{0}",1526:"{0}\u540e\u6062\u590d\u6302\u673a\u6b21\u6570",1527:"\u901a\u8fc7\u7b2c<color=#66ff00>{0}</color>\u5173\u9001<color=#ffea00>{1}</color>\u788e\u7247<color=#66ff00>x{2}</color>",1528:"\u9632\u5fa1\u5854{0}\u7ea7",1529:"\u7b49\u7ea7{0}\u9632\u5fa1\u5854\u53ef\u7528",1530:"\u4f60\u73b0\u5728\u53ef\u5c06\u9632\u5fa1\u5854\u5347\u7ea7\u81f3\u7b49\u7ea7{0}",1531:"\u57fa\u7840\u9632\u5fa1\u5854",1532:"\u57fa\u7840\u9632\u5fa1\u5854\u7c7b\u578b",1533:"\u67092\u79cd\u57fa\u672c\u7684\u9632\u5fa1\u5854\u7c7b\u578b\u53ef\u7528",1534:"\u4e86\u89e3\u4e86\uff01",1535:"\u6211\u51c6\u5907\u597d\u4e86\uff0c\u73b0\u5728\u6765\u5427\uff01",1536:"\u65b0\u6280\u80fd",1537:"\u826f\u597d\u7684\u653b\u51fb\u901f\u5ea6",1538:"\u58eb\u5175\u80fd\u963b\u622a\u654c\u4eba",1539:"\u4f24\u5bb3\u9ad8\uff0c\u7269\u9632\u7a7f\u900f",1540:"\u9020\u6210\u8303\u56f4\u4f24\u5bb3",1541:"\u751f\u5b58\u6cd5\u5219",1542:"\u76ee\u6807",1543:"\u4fdd\u62a4\u5927\u672c\u8425\u514d\u53d7\u654c\u4eba\u653b\u51fb",1544:"\u6cbf\u7740\u9053\u8def\u5efa\u8bbe\u9632\u5fa1\u5854\u6765\u963b\u6b62\u4ed6\u4eec",1545:"\u957f\u67aa\u5175",1546:"\u7cbe\u9510\u957f\u67aa\u5175",1547:"\u957f\u67aa\u7fbd\u6797\u519b",1548:"\u65b0\u5c06\u5854\u89e3\u9501",1549:"{0}\u7ea7{1}-{2}",1550:"\u4eca\u65e5\u8fd8\u53ef\u9886\u53d6{0}\u6b21",1551:"\u8fd1\u536b\u519b",1552:"\u53ef{0}\u500d\u9886\u53d6",1553:"\u770b\u5e7f\u544a\u83b7\u5f97{0}\u500d\u6536\u76ca(\u4eca\u65e5\u5269\u4f59{1}\u6b21)",1554:"\u518d\u9886\u4e00\u6b21",1555:"\u590d\u5236\u6210\u529f",1556:"\u672a\u5b89\u88c5\u624bQ\u6216\u5b89\u88c5\u7684\u7248\u672c\u4e0d\u652f\u6301",1557:"\u52a0\u7fa4\u53cd\u9988",1558:"\u5220\u53f7\u91cd\u73a9",1559:"\u5b98\u65b9QQ\u7fa4:{0}",1560:"\u590d\u5236\u7fa4\u53f7",1561:"\u5220\u9664\u5f53\u524d\u8d26\u53f7\u540e\uff0c\u5c06\u6e05\u7a7a\u6240\u6709\u6570\u636e\u3002\u662f\u5426\u786e\u8ba4\u5220\u53f7\uff1f",1562:"\u786e\u5b9a\u5220\u53f7",1563:"\u518d\u60f3\u60f3",1564:"\u90ae\u4ef6",1565:"{0}\u5929\u524d",1566:"{0}\u5c0f\u65f6\u524d",1567:"{0}\u5206\u949f\u524d",1568:"\u5220\u9664\u5df2\u8bfb",1569:"\u4e00\u952e\u9886\u53d6",1570:"\u516c\u544a",1571:"\u90ae\u4ef6\u8be6\u60c5",1572:"\u5956\u52b1",1573:"\u53cd\u9988\u56de\u590d",1574:"\u60a8\u7684\u53cd\u9988:",1575:"\u5ba2\u670d\u56de\u590d:",1576:"\u611f\u8c22\u60a8\u7684\u53cd\u9988\u5efa\u8bae\uff0c\u795d\u60a8\u6e38\u620f\u6109\u5feb\uff01\u53ef\u52a0QQ\u7fa4",1577:"\u4e0e\u670d\u52a1\u5668\u8fde\u63a5\u5f02\u5e38\uff0c\u8bf7\u786e\u8ba4\u7f51\u7edc\u901a\u7545\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u90e8\u5206\u529f\u80fd\u4e0d\u80fd\u6b63\u5e38\u4f7f\u7528",1578:"\u7cfb\u7edf\u65f6\u95f4\u68c0\u6d4b\u5f02\u5e38\uff0c\u4e0e\u670d\u52a1\u5668\u65f6\u95f4\u76f8\u5dee{0}\u5206\u949f\uff0c\u8bf7\u8c03\u6574\u8bbe\u5907\u65f6\u95f4\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u90e8\u5206\u529f\u80fd\u4e0d\u80fd\u6b63\u5e38\u4f7f\u7528",1579:"\u670d\u52a1\u5668\u65f6\u95f4:{0}",1580:"\u901a\u8fc7{0}\u7b2c{1}\u5173\u624d\u53ef\u8bbe\u7f6e{2}\u4e3a\u5148\u950b",1581:"\u56fe\u9274",1582:"\u654c\u4eba",1583:"\u6682\u65e0\u90ae\u4ef6",1584:"\u57fa\u7840\u7b49\u7ea7:",1585:"\u54c1\u8d28:",1586:"\u9668\u94c1:",1587:"\u7279\u6b8a",1588:"\u968f\u5173\u5361\u6210\u957f",1589:"{0}\u751f\u547d",1590:"{0}%",1591:"\u63a8\u8350\u5854:{0}",1592:"\u62d2\u7edd",1593:"\u652f\u63f4",1594:"\u654c\u519b\u5f3a\u5927\uff0c\u4e3b\u516c\u662f\u5426\u9700\u8981\u4e00\u4e2a\u5148\u950b\u5927\u5c06\u524d\u6765\u652f\u63f4\uff1f",1595:"\u8be6\u60c5",1596:"(\u63a8\u8350\u7b49\u7ea7:{0})",1597:"\u5220\u9664",1598:"\u63a8\u8350\u9635\u5bb9",1599:"\u654c\u4eba\u7c7b\u578b({0})",1600:"\u5173\u5361\u6311\u6218",1601:"\u63a8\u8350:{0}\u7ea7",1602:"\u5c06\u5854",1603:"\u8303\u56f4\u4f24\u5bb3",1604:"\u53ef\u5bf9\u7a7a\u653b\u51fb",1605:"\u65e0\u89c6\u654c\u4eba{0}\u7269\u7406\u9632\u5fa1",1606:"\u65e0\u89c6\u654c\u4eba{0}\u6cd5\u672f\u9632\u5fa1",1607:"\u98de\u884c\u654c\u4eba",1608:"\u8fdc\u7a0b\u653b\u51fb",1609:"\u5bf9\u63a7\u5236\u7c7b\u6280\u80fd\u514d\u75ab",1610:"\u5bf9\u6301\u7eed\u4f24\u5bb3\u6548\u679c\u514d\u75ab",1611:"\u5173\u5361\u80dc\u5229{0}\u6b21",1612:"{0}\u5929\u540e\u8fc7\u671f",1613:"{0}\u5c0f\u65f6\u540e\u8fc7\u671f",1614:"{0}\u5206\u949f\u540e\u8fc7\u671f",1615:"\u968f\u6ce2\u6b21\u6210\u957f",1616:"\u4e3b\u516c\uff0c\u6211\u4f1a\u53d8\u5f97\u66f4\u52a0\u5f3a\u5927",1617:"\u4e3b\u516c\uff0c\u6211\u4eec\u7684\u961f\u4f0d\u66f4\u52a0\u5f3a\u5927\u4e86",1618:"<outline\xa0color=#000000\xa0width=1>\u606d\u559c\u73a9\u5bb6<color=#66ff00>{0}</color>VIP\u63d0\u5347\u81f3<color=#66ff00>{1}</color>\u7ea7\uff0c\u4eab\u53d7\u66f4\u591a\u7279\u6743\uff01</outline></color>",1619:"<outline\xa0color=#000000\xa0width=1>\u606d\u559c\u73a9\u5bb6<color=#66ff00>{0}</color>\u83b7\u5f97\u65b0\u82f1\u96c4<color=#66ff00>{1}</color></outline></color>",1620:"<outline\xa0color=#000000\xa0width=1>\u606d\u559c\u73a9\u5bb6<color=#66ff00>{0}</color>\u5c06<color=#66ff00>{1}</color>\u5347\u5230<color=#66ff00>{2}</color>\u7ea7</outline></color>",1621:"<outline\xa0color=#000000\xa0width=1>\u606d\u559c\u73a9\u5bb6<color=#66ff00>{0}</color>\u5c06\u82f1\u96c4<color=#66ff00>{1}</color>\u5347\u5230<color=#66ff00>{2}</color>\u661f</outline></color>",1622:"<outline\xa0color=#000000\xa0width=1>\u606d\u559c\u73a9\u5bb6<color=#66ff00>{0}</color>\u5c06\u82f1\u96c4<color=#66ff00>{1}</color>\u5347\u5230<color=#66ff00>{2}</color>\u54c1\u8d28</outline></color>",1623:"<outline\xa0color=#000000\xa0width=1>\u606d\u559c\u73a9\u5bb6<color=#66ff00>{0}</color>\u5c06<color=#66ff00>{1}</color>\u5347\u5230<color=#66ff00>{2}</color>\u7ea7</outline></color>",1624:"<outline\xa0color=#000000\xa0width=1>\u606d\u559c\u73a9\u5bb6<color=#66ff00>{0}</color>\u5c06<color=#66ff00>{1}</color>\u5347\u5230<color=#66ff00>{2}</color>\u54c1\u8d28</outline></color>",1625:"<outline\xa0color=#000000\xa0width=1>\u606d\u559c\u73a9\u5bb6<color=#66ff00>{0}</color>\u901a\u5173<color=#66ff00>{1}</color>\u6240\u6709\u5173\u5361</outline></color>",1626:"\u8fdb\u5ea6",1627:"\u767b\u5f55\u5929\u6570",1628:"\u4efb\u52a1\u6d3b\u8dc3",1629:"\u5e7f\u544a\u6b21\u6570",1630:"VIP",1631:"\u6bcf\u65e5{0}\u6b21",1632:"\u798f\u5229:",1633:"\u83b7\u5f97\u82f1\u96c4{0}\u540e\u89e3\u9501",1634:"<color=#006cff>\u83b7\u5f97\u65b0\u82f1\u96c4 </color><color=#b925e9>{0}</color>",1635:"<color=#000>\u5546\u5e97\u5e7f\u544a\u5f97\u5143\u5b9d\u6b21\u6570:</color><outline\xa0color=#000000\xa0width=2><color=#3cff00>{0}</color></outline>",1636:"<color=#000>\u5546\u5e97\u5e7f\u544a\u5f00\u5b9d\u7bb1\u6b21\u6570:</color><outline\xa0color=#000000\xa0width=2><color=#3cff00>{0}</color></outline>",1637:"<color=#000>\u5546\u5e97\u5e7f\u544a\u5f97\u94dc\u5e01\u6b21\u6570:<outline\xa0color=#000000\xa0width=2><color=#3cff00>{0}</color></outline></color>",1638:"<color=#000>\u5546\u5e97\u5e7f\u544a\u5f97\u7ecf\u9a8c\u6b21\u6570:<outline\xa0color=#000000\xa0width=2><color=#3cff00>{0}</color></outline></color>",1639:"<color=#000>\u6218\u4e2d\u5b9d\u7bb1\u6bcf\u65e5\u6b21\u6570:<outline\xa0color=#000000\xa0width=2><color=#3cff00>{0}</color></outline></color>",1640:"<color=#000>\u6218\u6597\u7ed3\u7b97\u5e7f\u544a\u9886\u53d6\u500d\u6570:<outline\xa0color=#000000\xa0width=2><color=#3cff00>{0}</color></outline></color>",1641:"<color=#000>\u5e7f\u544a\u6302\u673a\u6536\u76ca\u6bcf\u65e5\u6b21\u6570:<outline\xa0color=#000000\xa0width=2><color=#3cff00>{0}</color></outline></color>",1642:"<color=#000>\u6218\u4e2d\u6ce2\u6b21\u53ec\u5524\u654c\u4eba\u9668\u94c1\u76f4\u63a5\u83b7\u5f97</color>",1643:"<color=#000>\u8fdb\u5165\u6218\u6597\u989d\u5916\u83b7\u5f97\u9668\u94c1:<outline\xa0color=#000000\xa0width=2><color=#3cff00>{0}</color></outline></color>",1644:"<color=#000>\u6218\u6597\u52a0\u901f\u500d\u6570:<outline\xa0color=#000000\xa0width=2><color=#3cff00>{0}</color></outline></color>",1645:"<color=#000>\u6218\u6597\u4e2d\u53ef\u4f7f\u75282\u4e2a\u5148\u950b</color>",1646:"\u6cd5\u672f\u653b\u51fb",1647:"\u7269\u7406\u653b\u51fb",1648:"\u653b\u51fb\u901f\u5ea6",1649:"\u653b\u51fb\u8303\u56f4",1650:"\u52df\u5175\u95f4\u9694",1651:"\u751f\u547d",1652:"\u7269\u7406\u9632\u5fa1",1653:"\u6cd5\u672f\u9632\u5fa1",1654:"\u79fb\u52a8\u901f\u5ea6",1655:"\u7ea2\u5fc3\u4f24\u5bb3",1656:"\u95ea\u907f",1657:"\u65e0",1658:"\u6ca1\u6709\u53ef\u5220\u9664\u7684\u90ae\u4ef6",1659:"\u6ca1\u6709\u53ef\u9886\u53d6\u7684\u5956\u52b1",1660:"vip\u5df2\u8fbe\u6700\u5927\u7b49\u7ea7",1661:"VIP{0}\u5f00\u542f\u6218\u6597\u52a0\u901f\u529f\u80fd",1662:"\u70b9\u51fb\u4ee5\u8bc4\u5206",1663:"\u559c\u6b22\u8fd9\u4e2a\u6e38\u620f\u561b\uff1f\n\u7ed9\u4e2a5\u661f\u597d\u8bc4\u5427\uff01",1664:"\u975e\u5e38\u611f\u8c22\uff01\u80fd\u8bf7\u60a8\u6307\u51fa\u6211\u4eec\u7684\u4e0d\u8db3\u5417?",1665:"\u95ee\u9898\u53cd\u9988",1666:"\u6b8b\u5fcd\u62d2\u7edd",1667:"\u73b0\u5728\u5c31\u53bb",1668:"\u5230\u671f\u5012\u8ba1\u65f6:",1669:"\u77e5\u9053\u5566",1670:"\u6253\u5f00\u5b83",1671:"\u53ef\u5f00\u542f",1672:"\u4f60\u83b7\u5f97\u4e86\u4e00\u4e2a\u5b58\u94b1\u7f50\uff01",1673:"\u4f60\u7684\u5b58\u94b1\u7f50\u53ef\u4ee5\u6253\u5f00\u4e86\uff01",1674:"\u4f60\u7684\u5b58\u94b1\u7f50\u5df2\u6ee1\uff01",1675:"\u901a\u8fc7\u65b0\u5173\u5361\u53ef\u5411\u5b58\u94b1\u7f50\u4e2d\u5b58\u5165\u5143\u5b9d\uff0c\u5b58\u94b1\u7f50\u5b58\u5165\u81f3\u5c11<color=#78ff00>{0}</color>\u5143\u5b9d\uff0c\u5373\u53ef\u9886\u53d6\u5143\u5b9d\u5956\u52b1\u3002",1676:"\u4f60\u73b0\u5728\u53ef\u4ee5\u6253\u5f00\u4f60\u7684\u5b58\u94b1\u7f50\u53d6\u51fa\u6240\u6709\u5143\u5b9d\uff0c\u4e5f\u53ef\u4ee5\u7ee7\u7eed\u6536\u96c6\u5143\u5b9d\uff0c\u83b7\u53d6\u66f4\u5927\u5956\u52b1\u3002",1677:"\u4f60\u7684\u5b58\u94b1\u7f50\u5c06\u5728\u5230\u671f\u540e\u6d88\u5931\uff0c\u8bf7\u53ca\u65f6\u6253\u5f00\uff01",1678:"\u5b58\u94b1\u7f50",1679:"{0}\u6280\u80fd\u788e\u7247",1680:"\u4e09\u987e\u8305\u5e90",1681:"\u6843\u56ed\u7ed3\u4e49",1682:"\u82f1\u96c4\u7f8e\u4eba",1683:"\u4e09\u82f1\u6218\u5415\u5e03",1684:"\u8f95\u95e8\u5c04\u621f",1685:"\u771f\u7537\u4eba",1686:"<outline\xa0color=#000000\xa0width=1>\u606d\u559c\u73a9\u5bb6<color=#66ff00>{0}</color>\u89e3\u9501<color=#66ff00>{1}</color>\u673a\u7f18</outline></color>",1687:"<outline\xa0color=#000000\xa0width=1>\u606d\u559c\u73a9\u5bb6<color=#66ff00>{0}</color>\u5347\u7ea7<color=#66ff00>{1}</color>\u6280\u80fd\u5230{2}\u661f</outline></color>",1688:"\u51fa\u6218\u6280\u80fd",1689:"\u6211\u7684\u6280\u80fd",1690:"\u4f7f\u7528",1691:"\u6682\u65e0\u90ae\u4ef6",1692:"\u6280\u80fd\u8be6\u60c5",1693:"\u7b49\u7ea7 {0}/{1}",1694:"\u5f53\u524d\u6548\u679c",1695:"\u89e3\u9501\u540e\u6548\u679c",1696:"\u4e0b\u4e00\u7ea7\u6548\u679c",1697:"\u5347\u661f\u6761\u4ef6",1698:"{0} {1}\u7ea7",1699:"\u89e3\u9501\u6761\u4ef6",1700:"({0})",1701:"<color=#000>\u5546\u5e97\u62bd\u6280\u80fd\u788e\u7247\u6b21\u6570:<outline\xa0color=#000000\xa0width=2><color=#3cff00>{0}</color></outline></color>",1702:"(v{0}\u53ef\u6253\u5f00\u5b83)",1703:"\u9009\u62e9\u8981\u66ff\u6362\u7684\u6280\u80fd",1704:"\u70b9\u51fb\u4efb\u610f\u7a7a\u767d\u5904\u5173\u95ed",1705:"\u673a\u7f18",1706:"\u51fa\u6218\u673a\u7f18",1707:"\u82f1\u96c4\u673a\u7f18",1708:"\u5df2\u6536\u96c6:",1709:"\u589e\u52a01\u4e2a",1710:"\u672a\u89e3\u9501({0}/{1})",1711:"<color=#57b809>{0}</color><color=#7e7e7e>{1}</color><color=#e92222>{2}</color>",1712:"\u62db\u52df\u82f1\u96c4:",1713:"\u51fa\u6218",1714:"\u5b8c\u6210vip\u4efb\u52a1\uff0c\u53ef\u6c38\u4e45\u83b7\u5f97vip\u7279\u6743",1715:"\u6536\u96c6\u66f4\u591a\u82f1\u96c4\uff0c\u53ef\u89e3\u9501\u66f4\u591a\u6280\u80fd\u548c\u82f1\u96c4\u673a\u7f18",1716:"\u56fe\u9274\u53ef\u67e5\u770b\u6240\u6709\u654c\u4eba\u7684\u7279\u6027",1717:"\u6280\u80fd\u517b\u6210",1718:"\u76f8\u540c\u5c06\u5854\u5efa\u9020\u8d8a\u591a\u6240\u9700\u9668\u94c1\u8d8a\u591a",1719:"\u5df2\u62db\u52df",1720:"\u672a\u62db\u52df",1721:"\u82f1\u96c4\u7b49\u7ea7\u4e0d\u8db3",1722:"\u82f1\u96c4\u6682\u672a\u62db\u52df",1723:"\u6280\u80fd\u788e\u7247\u4e0d\u8db3",1724:"\u7edd\u4e16\u7f8e\u4eba",1725:"\u60fa\u60fa\u76f8\u60dc",1726:"<color=#57b809>{0}</c><color=#e92222>{1}</color>",1727:" \u5347\u661f\u6548\u679c",1728:"\u5175\u8425\u58eb\u5175\u4eba\u6570+{0}",1729:"\u82f1\u96c4\u3001\u5c0f\u5175\u6218\u6597\u4e2d\u56de\u8840\uff0c\u6bcf\u79d2\u56de\u8840{0}%",1730:"\u964d\u4f4e\u666e\u901a\u654c\u4eba\u751f\u547d\u503c{0}%",1731:"\u964d\u4f4e\u7cbe\u82f1\u654c\u4eba\u3001BOSS\u751f\u547d\u503c{0}%",1732:"{0}{1}\u63d0\u5347{2}%",1733:"\u6240\u6709\u5c06\u5854{1}\u63d0\u5347{2}%",1734:"<outline\xa0color=#000000\xa0width=1>\u606d\u559c\u73a9\u5bb6<color=#66ff00>{0}</color>\u89e3\u9501<color=#66ff00>{1}</color>\u6280\u80fd</outline></color>",1735:"\u5df2\u9009\u62e9\u540c\u7c7b\u82f1\u96c4",1736:"\u89e3\u9501\u65b0\u7279\u6743",1737:"\u53bb\u770b\u770b",1738:"\u77e5\u9053\u4e86",1739:"\u5f00\u542f\u6218\u6597\u52a0\u901f\u529f\u80fd",1740:"\u53ef\u9886\u53d6\u5b58\u94b1\u7f50\u5143\u5b9d",1741:"\u53ef\u9886\u53d6\u65b0\u82f1\u96c4-\u771f\xb7\u5173\u7fbd",1742:"\u53ef\u9886\u53d6\u65b0\u82f1\u96c4-\u771f\xb7\u5f20\u98de",1743:"\u53ef\u9886\u53d6\u65b0\u82f1\u96c4-\u771f\xb7\u8bf8\u845b\u4eae",1744:"\u8fdb\u5173\u5361\u83b7\u5f97\u66f4\u591a\u9668\u94c1",1745:"\u6218\u6597\u4e2d\u53ef\u4f7f\u75282\u4e2a\u5148\u950b",1746:"\u5546\u5e97\u5956\u52b1\u6b21\u6570\u589e\u52a0",1747:"\u7ed3\u7b97\u5956\u52b1\u500d\u6570\u589e\u52a0",1748:"\u6218\u6597\u52a0\u901f2\u500d",1749:"\u53ec\u5524\u654c\u4eba\u9668\u94c1\u5168\u90e8\u83b7\u5f97",1750:"\u6218\u6597\u5b9d\u7bb1\u6b21\u6570\u589e\u52a0",1751:"\u6302\u673a\u6536\u76ca\u6b21\u6570\u589e\u52a0",1752:"\u76f8\u5173\u5956\u52b1\u6b21\u6570\u589e\u52a0",1753:"\u7ee7\u7eed\u6536\u96c6",1754:"\u70b9\u51fb\u4efb\u610f\u5173\u95ed",1755:"\u6fc0\u6d3b\u6761\u4ef6\uff1a\u4ee5\u4e0b\u82f1\u96c4\u8fbe\u5230{0}\u7ea7",1756:"\u957f\u5f13\u5175",1757:"\u4f60\u73b0\u5728\u53ef\u5c06{0}\u548c{1}\u5347\u7ea7\u81f3\u7b49\u7ea7{2}",1758:"{0}\u500d\u9886\u53d6",1759:"\u6ce2\u6b21\u53ec\u5524VIP\u76f4\u63a5\u83b7\u5f97",1760:"\u5b88\u5c06\u5df2\u8fbe\u4e0a\u9650",1761:"\u8bd5\u7528\u6218\u6597\u52a0\u901f",1762:"\u6218\u6597\u52a0\u901f",1763:" \u5347\u661f\u6548\u679c",1764:"\u58eb\u5175\u4eba\u6570\u589e\u52a0",1765:"\u6218\u6597\u4e2d\u56de\u8840",1766:"\u654c\u4eba\u751f\u547d\u964d\u4f4e",1767:"BOSS\u751f\u547d\u964d\u4f4e",1768:"{0}\u63d0\u5347",1769:"\u5c06\u5854{0}\u63d0\u5347",1770:"<color=#000>\u5feb\u901f\u6302\u673a\u5e7f\u544a\u9886\u53d6\u500d\u6570:<outline\xa0color=#000000\xa0width=2><color=#3cff00>{0}</color></outline></color>",1771:"\u6700\u540e\u4e00\u6b21\u9886\u53d6\u673a\u4f1a",1772:"\u5f02\u5e38\u63d0\u793a",1773:"\u4f60\u7684\u8d26\u53f7\u5b58\u5728\u8fdd\u89c4\u64cd\u4f5c\uff0c\u5df2\u505c\u6b62\u4f7f\u7528\uff01",1774:"\u52a0\u7fa4\u7533\u8bc9",1775:"\u5151\u6362",1776:"\u8bf7\u8f93\u5165\u5151\u6362\u7801",1777:"\u5151\u6362\u7801\u5df2\u8fc7\u671f",1778:"\u5151\u6362\u7801\u5df2\u4f7f\u7528",1779:"\u5151\u6362\u7801\u65e0\u6548",1780:"\u5151\u6362\u7801\u65e0\u6548",1781:"\u8f6c\u5316",1782:"\u653e\u5165\u4e24\u4e2a\u788e\u7247\u53ef\u4ee5\u5408\u6210\u4e00\u4e2a\u65b0\u7684\u788e\u7247",1783:"{0}",1784:"\u5151\u6362\u6210\u529f\uff0c{0}",1785:"\u62bd\u5956\u6b21\u6570\u4e0d\u8db3",1786:"\u51fa\u6218\u82f1\u96c4",1787:"\u5df2\u7ecf\u62e5\u6709\u7684\u82f1\u96c4",1788:"\u5c1a\u672a\u62e5\u6709\u7684\u82f1\u96c4",1789:"VIP{0}\u5f00\u542f",1790:"\u63d0\u5347VIP",1791:"\u52a0{0}\u4e2a\u5c0f\u65f6",1792:"\u89e3\u5c01\u5c06\u5854",1793:"\u89e3\u5c01\u540e\u7b49\u7ea7{0}\u7ea7",1794:"\u653e\u5f03\u89e3\u5c01",1795:"{0}\u540e\u5c01\u5370",1796:"VIP\u5f97\u5c06\u5854",1797:"\u52a0\u901f2\u5c0f\u65f6",1798:"\u4f7f\u75284\u7ea7{1}-{0}\u540e\u8be5\u5854\u63d0\u5347\u4e3a{2}\u7ea7",1799:"<color=#000>\u6218\u6597\u4e2d\u76f4\u63a5\u5efa\u9020\u8bd5\u7528\u5c06\u5854</color>",1800:"<color=#000>\u9a7b\u5b88\u9ad8\u7ea7\u9886\u53d6\u52a0\u6210:<outline\xa0color=#000000\xa0width=2><color=#3cff00>{0}</color></outline></color>",1801:"<color=#000>\u4e00\u952e\u9a7b\u5b88\u9886\u5730</color>",1802:"\u8bbe\u7f6e\u9a7b\u5b88\u82f1\u96c4",1803:"\u65f6\u95f4\u52a0\u901f",1804:"\u89c2\u770b\u4e00\u6bb5\u89c6\u9891\uff0c\u4f7f\u6240\u6709\u9a7b\u5b88\u65f6\u95f4\u7f29\u77ed60\u5206\u949f\uff0c\u5e76\u83b7\u5f97\u76f8\u5e94\u6536\u76ca",1805:"\u4eca\u65e5\u8fd8\u53ef\u52a0\u901f{0}\u6b21",1806:"\u9a7b\u5b88{0}\u5206\u949f\u671f\u95f4\u5171\u83b7\u5f97<color=#ff8a00>{1}</c>\u7ecf\u9a8c",1807:"\u9a7b\u5b88\u5956\u52b1",1808:"\u9ad8\u7ea7\u9886\u53d6",1809:"\u6536\u76ca+{0}%",1810:"VIP{0}\u53ef\u7528",1811:"\u4e00\u952e\u9a7b\u5b88",1812:"\u7a7a\u95f2\u82f1\u96c4\u6309\u7167\u7b49\u7ea7\u4ece\u4f4e\u5230\u9ad8\u9a7b\u5b88\u5230\u7a7a\u95f2\u9886\u5730\u4e0a",1813:"\u786e\u8ba4",1814:"\u6307\u6d3e\u82f1\u96c4",1815:"\u7ecf\u9a8c\u6536\u5165:",1816:"{0}\u5206\u949f",1817:"\u7acb\u5373\u9a7b\u5b88",1818:"V{0}\u53ef\u7528",1819:"\u82f1\u96c4\u7b49\u7ea7:{0}\u7ea7",1820:"\u9a7b\u5b88\u6536\u76ca",1821:"\u70b9\u51fb\u8fd9\u91cc\u9009\u62e9\u9a7b\u5b88\u82f1\u96c4",1822:"\u82f1\u96c4\u5347\u7ea7",1823:"\u7a81\u7834",1824:"\u653e\u5f03\u540e\u7eed\u7ecf\u9a8c",1825:"\u5df2\u6ee1\u7ea7",1826:"{0}({1}\u661f)\u5347\u7ea7\u6761\u4ef6",1827:"\u4ee5\u4e0b\u82f1\u96c4\u8fbe\u5230{0}\u7ea7",1828:"\u6280\u80fd{0}",1829:"\u624b\u901f\u592a\u5feb\uff0c\u7a0d\u540e\u518d\u8bd5",1830:"\u82f1\u96c4\u3001\u5c0f\u5175\u6218\u6597\u4e2d\u590d\u6d3b\u65f6\u95f4\u51cf\u5c11{0}%",1831:"\u51fa\u6218\u6280\u80fd\u51b7\u5374\u51cf\u5c11{0}%",1832:"\u964d\u4f4e\u666e\u901a\u654c\u4eba\u653b\u51fb\u4f24\u5bb3{0}%",1833:"\u964d\u4f4e\u666e\u901a\u654c\u4eba\u79fb\u52a8\u901f\u5ea6{0}%",1834:"\u964d\u4f4e\u7cbe\u82f1\u654c\u4eba\u3001BOSS\u653b\u51fb\u4f24\u5bb3{0}%",1835:"\u964d\u4f4e\u7cbe\u82f1\u654c\u4eba\u3001BOSS\u79fb\u52a8\u901f\u5ea6{0}%",1836:"\u70ae\u5854\u5bf9\u94bb\u5730\u76ee\u6807\u4f24\u5bb3\u63d0\u5347{0}%",1837:"\u6cd5\u5e08\u5854\u5bf9\u98de\u884c\u76ee\u6807\u4f24\u5bb3\u63d0\u5347{0}%",1838:"{0}{1}\u964d\u4f4e{2}%\uff0c{3}{4}\u63d0\u5347{5}%",1839:"\u58eb\u5175\u751f\u547d\u589e\u52a0",1840:"\u58eb\u5175\u4f24\u5bb3\u589e\u52a0",1841:"\u590d\u6d3b\u65f6\u95f4\u51cf\u5c11",1842:"\u51fa\u6218\u6280\u80fd\u51b7\u5374\u65f6\u95f4\u51cf\u5c11",1843:"\u654c\u4eba\u4f24\u5bb3\u964d\u4f4e",1844:"\u654c\u4eba\u79fb\u52a8\u901f\u5ea6\u964d\u4f4e",1845:"BOSS\u4f24\u5bb3\u964d\u4f4e",1846:"BOSS\u79fb\u52a8\u901f\u5ea6\u964d\u4f4e",1847:"\u5efa\u9020\u548c\u5347\u7ea7\u6d88\u8017\u964d\u4f4e",1848:"\u5bf9\u94bb\u5730\u76ee\u6807\u4f24\u5bb3\u63d0\u5347",1849:"\u5bf9\u98de\u884c\u76ee\u6807\u4f24\u5bb3\u63d0\u5347",1850:"\u4f24\u5bb3\u964d\u4f4e\uff0c\u66b4\u51fb\u4f24\u5bb3\u63d0\u5347",1851:"<color=#ffffff>\u901a\u8fc7\u7b2c<color=#66ff00>5</color>\u5173\u83b7\u5f97<color=#66ff00>\u5173\u7fbd</color></color>",1852:"\u70b9\u51fb\u7ee7\u7eed",1853:"\u6570\u636e\u5f02\u5e38",1854:"\u4f60\u8fc7\u6765\u5440",1855:"\u716e\u9152\u8bba\u82f1\u96c4",1856:"\u95ed\u6708\u7f9e\u82b1",1857:"\u5973\u4e2d\u8c6a\u6770",1858:"\u4e00\u4ee3\u67ad\u96c4",1859:"\u795e\u5175\u5929\u964d",1860:"\u65e0\u89c6\u654c\u4eba\u7269\u7406\u9632\u5fa1\u589e\u52a0{0}",1861:"\u65e0\u89c6\u7269\u9632\u6548\u679c\u63d0\u5347",1862:"\u5148\u950b{0}\u63d0\u5347{1}%",1863:"\u5148\u950b\u9635\u4ea1\u540e\u6709{0}%\u6982\u7387\u7acb\u5373\u590d\u6d3b",1864:"\u6709\u6982\u7387\u7acb\u5373\u590d\u6d3b",1865:"\u5148\u950b{0}{1}\u63d0\u5347{2}%",1866:"\u5c06\u5854{0}{1}\u63d0\u5347{2}%",1867:"\u89e3\u5c01",1868:"\u82f1\u96c4\u5df2\u6ee1\u7ea7\u65e0\u9700\u9a7b\u5b88",1869:"\u65e0\u82f1\u96c4\u53ef\u4ee5\u8fdb\u884c\u9a7b\u5b88",1870:"\u9700\u8981{0}\u8fbe\u5230{1}\u7ea7",1871:"\u9700\u8981{0}\u6216{1}\u8fbe\u5230{2}\u7ea7",1872:"{0}\u7b49\u7ea7\u8f83\u4f4e\u9a7b\u5b88\u6240\u83b7\u7ecf\u9a8c\u589e\u52a0{1}%",1873:"\u5c06\u58544\u7ea7\u5175\u5854-\u8d75\u4e91\u4f24\u5bb3\u63d0\u534720%",1874:"\u5c06\u58544\u7ea7\u5175\u5854-\u8d75\u4e91\u4f24\u5bb3\u63d0\u534730%",1875:"\u5c06\u58544\u7ea7\u5175\u5854-\u8d75\u4e91\u751f\u547d\u63d0\u534720%",1876:"\u5c06\u58544\u7ea7\u5175\u5854-\u8d75\u4e91\u751f\u547d\u63d0\u534730%",1877:"\u65e0\u9a7b\u5b88\u82f1\u96c4\u9700\u8981\u52a0\u901f",1878:"\u65b0\u76ee\u6807",1879:"\u9632\u5fa1\u5854\u7b49\u7ea7\u5347\u5230{0}\u7ea7",1880:"\u9886\u53d6\u5956\u52b1",1881:"\u9632\u5fa1\u5854\u7b49\u7ea7",1882:"\u901a\u8fc7{0}\u7b2c{1}\u5173",1883:"\u62db\u52df\u82f1\u96c4{0}",1884:"\u62db\u52df{0}\u4e2a\u82f1\u96c4",1885:"{0}\u505a\u4e3a\u5148\u950b\u6218\u6597{1}\u6b21",1886:"\u6218\u6597\u4e2d\u5efa\u9020{1}\u6b21{0}\u5c06\u5854",1887:"\u83b7\u5f97{0}\u673a\u7f18",1888:"\u62e5\u6709{0}\u4e2a\u673a\u7f18",1889:"{0}\u9a7b\u5b88\u9886\u5730{1}\u6b21",1890:"\u9a7b\u5b88\u9886\u5730{0}\u6b21",1891:"{0}\u5347\u5230{1}\u7ea7",1892:"\u6240\u6709\u5854\u5347\u5230{0}\u7ea7",1893:"{0}\u7a81\u7834{1}\u6b21",1894:"{0}\u89c9\u9192\u5230{1}\u54c1\u8d28",1895:"\u6240\u6709\u5854\u89c9\u9192\u5230{0}\u54c1\u8d28",1896:"{0}\u5347\u5230{1}\u7ea7",1897:"\u62e5\u6709{0}\u4e2a{1}\u7ea7\u7684\u82f1\u96c4",1898:"{0}\u7a81\u7834{1}\u6b21",1899:"{0}\u5347\u5230{1}\u661f",1900:"\u62e5\u6709{0}\u4e2a{1}\u661f\u82f1\u96c4",1901:"{0}\u89c9\u9192\u5230{1}\u54c1\u8d28",1902:"\u62e5\u6709{0}\u4e2a{1}\u54c1\u8d28\u82f1\u96c4",1903:"\u89e3\u9501{0}\u6280\u80fd",1904:"\u62e5\u6709{0}\u4e2a\u6280\u80fd",1905:"\u6280\u80fd{0}\u5347\u5230{1}\u7ea7",1906:"\u62e5\u6709{0}\u4e2a{1}\u7ea7\u6280\u80fd",1907:"\u6280\u80fd{0}\u5347\u5230{1}\u661f",1908:"\u62e5\u6709{0}\u4e2a{1}\u661f\u6280\u80fd",1909:"\u5173\u5361\u6311\u6218",1910:"\u62db\u52df\u82f1\u96c4",1911:"\u82f1\u96c4\u51fa\u6218",1912:"\u5c06\u5854\u6218\u6597",1913:"\u82f1\u96c4\u673a\u7f18",1914:"\u9886\u5730\u9a7b\u5b88",1915:"\u9632\u5fa1\u5854\u5347\u7ea7",1916:"\u9632\u5fa1\u5854\u7a81\u7834",1917:"\u9632\u5fa1\u5854\u89c9\u9192",1918:"\u82f1\u96c4\u5347\u7ea7",1919:"\u82f1\u96c4\u7a81\u7834",1920:"\u82f1\u96c4\u5347\u661f",1921:"\u82f1\u96c4\u89c9\u9192",1922:"\u89e3\u9501\u6280\u80fd",1923:"\u6280\u80fd\u5347\u7ea7",1924:"\u6280\u80fd\u5347\u661f",1925:"\u6536\u76ca+{0}",1926:"\u666e\u901a",1927:"\u7a00\u6709",1928:"\u7a00\u67091\u661f",1929:"\u7a00\u67092\u661f",1930:"\u53f2\u8bd7",1931:"\u53f2\u8bd71\u661f",1932:"\u53f2\u8bd72\u661f",1933:"\u53f2\u8bd73\u661f",1934:"\u4f20\u5947",1935:"\u58eb\u5175\u6570\u91cf",1936:"\u751f\u547d\u63d0\u5347",1937:"\u4f24\u5bb3\u63d0\u5347",1938:"\u6218\u4e2d\u56de\u8840",1939:"\u590d\u6d3b\u63d0\u5347",1940:"\u6280\u80fd\u63d0\u5347",1941:"\u654c\u5175\u8870\u5f31",1942:"\u654c\u5175\u865a\u5f31",1943:"\u654c\u5175\u51cf\u901f",1944:"\u654c\u5c06\u8870\u5f31",1945:"\u654c\u5c06\u865a\u5f31",1946:"\u654c\u5c06\u51cf\u901f",1947:"\u8303\u56f4\u63d0\u5347",1948:"\u6d88\u8017\u964d\u4f4e",1949:"\u5bf9\u5730\u63d0\u5347",1950:"\u4f24\u5bb3\u63d0\u5347",1951:"\u8303\u56f4\u63d0\u5347",1952:"\u653b\u901f\u63d0\u5347",1953:"\u4f24\u5bb3\u63d0\u5347",1954:"\u6d88\u8017\u964d\u4f4e",1955:"\u5bf9\u5929\u63d0\u5347",1956:"\u7206\u7387\u63d0\u5347",1957:"\u7206\u4f24\u63d0\u5347",1958:"\u653b\u901f\u63d0\u5347",1959:"\u4f24\u5bb3\u63d0\u5347",1960:"\u751f\u547d\u63d0\u5347",1961:"\u91cd\u751f",1962:"\u4f24\u5bb3\u63d0\u5347",1963:"\u653b\u901f\u63d0\u5347",1964:"\u5ffd\u89c6\u7269\u9632",1965:"\u5148\u950b\u4f24\u5bb3",1966:"\u5c06\u5854\u4f24\u5bb3",1967:"\u5c06\u5854\u653b\u901f",1968:"\u5148\u950b\u66b4\u51fb",1969:"\u5c06\u5854\u66b4\u51fb",1970:"\u5c06\u5854\u653b\u901f",1971:"\u5148\u950b\u4f24\u5bb3",1972:"\u5c06\u5854\u4f24\u5bb3",1973:"\u5c06\u5854\u653b\u901f",1974:"\u5148\u950b\u4f24\u5bb3",1975:"\u5c06\u5854\u751f\u547d",1976:"\u5c06\u5854\u4f24\u5bb3",1977:"{0}\u540e\u6062\u590d\u52a0\u901f\u6b21\u6570",1978:"\u4e00\u952e\u9a7b\u5b88\u9886\u5730",1979:"\u8be5\u82f1\u96c4\u4eca\u65e5\u9a7b\u5b88\u6b21\u6570\u5df2\u8fbe\u4e0a\u9650",1980:"\u79bb\u7ebf\u6536\u76ca\u8fbe\u5230\u4e0a\u9650\u63d0\u9192",1981:"\u4f53\u529b\u6062\u590d\u8fbe\u5230\u4e0a\u9650\u63d0\u9192",1982:"\u7b7e\u5230\u63d0\u9192",1983:"\u7248\u672c\u66f4\u65b0\u63d0\u9192",1984:"\u9996\u6b21\u8ba2\u9605\u53ef\u83b7\u5f97\u5956\u52b1",1985:"\u8ba2\u9605",1986:"\u5df2\u8ba2\u9605",1987:"\u9080\u8bf7\u597d\u53cb",1988:"\u6210\u529f\u9080\u8bf7{0}\u540d\u597d\u53cb\u8fdb\u5165\u6e38\u620f({1}/{2})",1989:"\u9080\u8bf7",1990:"\u64ad\u653e\u5e7f\u544a\u6b21\u6570\u5df2\u8fbe\u9650\u5236",1991:"\u52a0\u8f7d\u8d44\u6e90\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc",1992:"\u6ce8\u610f\uff01\u8bf7\u60a8\u6362\u4e2a\u7fa4\u91cd\u8bd5",1993:"\u6ce8\u610f\uff01\u8bf7\u5206\u4eab\u5230\u4e0d\u540c\u7684\u7fa4",1994:"\u6ce8\u610f\uff01\u7fa4\u4eba\u6570\u9700\u8981\u8fbe\u523020\u4eba",1995:"\u5206\u4eab\u6210\u529f",1996:"\u5206\u4eab\u5931\u8d25",1997:"\u63a8\u8350",1998:"\u597d\u53cb",1999:"\u5730\u533a",2e3:"\u70ab\u8000\u4e00\u4e0b",2316:"\u514d\u8d39\u83b7\u5f97\u4f53\u529b",2317:"\u6218\u6597\u901f\u5ea6\u63d0\u9ad8{0}\u500d\uff08\u672c\u5c40\u751f\u6548\uff09",2318:"\u514d\u8d39\u4f7f\u7528",2319:"\u6211\u8981\u52a0\u901f",2320:"{0}-{1}\u500d",2321:"\u7ffb\u500d\u5956\u52b1",2322:"\u514d\u8d39\u4f53\u529b",2323:"\u6dfb\u52a0\u5230\u6211\u7684\u5c0f\u7a0b\u5e8f\u5f97\u4f53\u529b",2324:"\u542f\u7528\u6d6e\u7a97\u5f97\u4f53\u529b",2325:"\u6dfb\u52a0\u684c\u9762\u5f97\u4f53\u529b",2326:"\u6dfb\u52a0\u5230\u6211\u7684\u5c0f\u7a0b\u5e8f\u5f97\u4f53\u529b",2327:"\u4ece\u6211\u7684\u5c0f\u7a0b\u5e8f\u8fdb\u5165\u5f97\u4f53\u529b",2328:"\u6dfb\u52a0\u684c\u9762\u5f97\u4f53\u529b",2329:"\u4ece\u684c\u9762\u8fdb\u5165\u5f97\u4f53\u529b",2330:"\u4ece\u6211\u7684\u5c0f\u7a0b\u5e8f\u8fdb\u5165\u83b7\u5f97\u5956\u52b1",2331:"\u4ece\u684c\u9762\u8fdb\u5165\u83b7\u5f97\u5956\u52b1",2332:"\u5ba2\u670d\u4f1a\u8bdd\u6bcf\u65e5\u4f53\u529b",2333:"\u9886\u4f53\u529b",2334:"\u6e38\u620f\u72b6\u6001\u53d8\u66f4\u8ba2\u9605",2335:"\u662f\u5426\u5f00\u542f\u6e38\u620f\u72b6\u6001\u53d8\u66f4\u901a\u77e5\uff1f",2336:"\u8d60\u9001:",2337:"\u5728\u4e0b\u4e00\u6b21\u6e38\u620f\u72b6\u6001\u53d8\u66f4\u65f6\u901a\u77e5\u6211",2338:"\u5f00\u542f\u901a\u77e5",2339:"\u597d\u53cb\u52a9\u529b\u5f97\u4f53\u529b",2340:"\u6bcf\u65e5\u9080\u8bf7\u597d\u53cb\u52a9\u529b\uff0c\u53ef\u83b7\u5f97\u514d\u8d39\u4f53\u529b",2341:"\u6bcf\u65e5{0}\u6d3b\u52a8\u91cd\u7f6e",2342:"\u597d\u53cb\u83b7\u5f97\u4e86\u4f53\u529b",2343:"\u83b7\u5f97\u4e86\u4f53\u529b",2344:"\u597d\u53cb\u5f97\u5230\u52a9\u529b",2345:"\u597d\u53cb\u6210\u529f\u52a9\u529b",2346:"\u8ba9\u597d\u53cb\u70b9\u51fb\u521a\u521a\u5206\u4eab\u7684\u94fe\u63a5\u5373\u53ef\u9886\u53d6\u5956\u52b1",2347:"\u8ba2\u9605\u66f4\u65b0\u63d0\u9192",2348:"\u8ba2\u9605",2349:"\u4ece\u6d6e\u7a97\u8fdb\u5165\u5f97\u4f53\u529b",2350:"\u4ece\u6d6e\u7a97\u8fdb\u5165\u83b7\u5f97\u5956\u52b1",2351:"\u597d\u53cb\u4f53\u529b\u8d60\u9001",2352:"\u4f53\u529b\u8d2d\u4e70",2353:"\u4e0e\u5ba2\u670d\u4f1a\u8bdd\u83b7\u5f97\u5956\u52b1",2354:"\u82f1\u96c4\u8bd5\u7528",2355:"\u8bd5\u7528{0}\u4f5c\u4e3a\u5148\u950b\u548c\u5854\u5c06",2356:"\u5206\u4eab\u5230",2357:"\u5206\u4eab\u5230\u5fae\u4fe1",2358:"\u5206\u4eab\u5230\u670b\u53cb\u5708",2359:"\u9009\u62e9\u82f1\u96c4",2360:"\u901a\u8fc7{0}\u89e3\u9501",2361:"\u66f4\u6362",2362:"\u9a7b\u5b88\u65f6\u95f4:{0}\u5206\u949f",2363:"\u7ecf\u9a8c\u6536\u5165:{0}",2364:"\u9009\u62e9\u673a\u7f18",2365:"\u9009\u62e9\u4e0a\u9635\u82f1\u96c4",2366:"\u51fa\u6218\u4f4d\u5df2\u5931\u6548",2367:"\u9009\u62e9\u4e0a\u9635\u673a\u7f18",30001:"\u53bb\u6e38\u620f\u5708\u5206\u4eab\u653b\u7565",30002:"\u53bb\u6e38\u620f\u5708\u770b\u901a\u5173\u653b\u7565",20001:"\u4eca\u65e5\u8fd8\u53ef\u8d60\u9001{0}\u6b21\u4f53\u529b",20002:"\u4eca\u65e5\u8fd8\u53ef\u9886\u53d6{0}\u70b9\u4f53\u529b\uff08\u6700\u591a\u53ef\u9886\u53d6{1}\u70b9\uff09",20003:"\u4eca\u65e5\u9886\u53d6\u5df2\u8fbe\u4e0a\u9650",20004:"\u4e0d\u5728\u597d\u53cb\u6392\u884c\u699c\u4e2d\u663e\u793a\u81ea\u5df1",20005:"\u597d\u53cb\u6392\u884c",20006:"\u5730\u533a\u6392\u884c",20007:"\u4e16\u754c\u6392\u884c",20008:"\u5730\u533a\u6392\u884c\u9700\u8981\u83b7\u53d6\u4f60\u7684\u5730\u7406\u4f4d\u7f6e\uff0c\u662f\u5426\u5141\u8bb8",20009:"\u662f\u5426\u5f00\u542f\u597d\u53cb\u4e92\u52a8\u63d0\u9192\uff1f",20010:"\u662f\u5426\u5f00\u542f\u6392\u884c\u699c\u597d\u53cb\u8d85\u8d8a\u63d0\u9192\uff1f",20011:"\u662f\u5426\u5f00\u542f\u597d\u53cb\u4e92\u52a8\u63d0\u9192\u548c\u6392\u884c\u699c\u597d\u53cb\u8d85\u8d8a\u63d0\u9192\uff1f",20012:"\u4eca\u65e5\u53cd\u9988\u6b21\u6570\u5df2\u8fbe\u4e0a\u9650",20013:"<outline\xa0color=#000000\xa0width=1>\u4eca\u65e5\u5df2\u6709<color=#fff600>{0}</color>\u4eba\u9886\u53d6\u4e86\u6700\u597d\u7684\u5956\u52b1</outline></color>",20014:"\u7edf\u9886\u4f60\u7684\u90e8\u961f\uff01",20015:"\u4f60\u53ef\u4ee5\u66f4\u6539\u58eb\u5175\u7684\u96c6\u7ed3\u70b9\u6765\u4f7f\u4ed6\u4eec\u9632\u5fa1\u4e0d\u540c\u7684\u533a\u57df",20016:"\u65b0\u63d0\u793a",20017:"\u6ca1\u6709\u5176\u4ed6\u82f1\u96c4\u53ef\u8bbe\u7f6e",20018:"<color=#000>\u6218\u6597\u4e2d\u53ef\u4f7f\u75282\u4e2a\u673a\u7f18</color>",20019:"<color=#000>\u5e7f\u544a\u4f53\u529b\u6b21\u6570:</color><outline\xa0color=#000000\xa0width=2><color=#3cff00>{0}</color><color=#fff000>\uff08+{1}\uff09</color></outline>",20020:"<color=#000>\u6218\u6597\u4e2d\u53ef\u4f7f\u75282\u4e2a\u673a\u7f18</color>",20021:"<color=#000>\u5e7f\u544a\u4f53\u529b\u6b21\u6570:</color><outline\xa0color=#000000\xa0width=2><color=#3cff00>{0}</color></outline>",20022:"\u6309\u7167\u8bbe\u7f6e\u987a\u5e8f\u9a7b\u5b88\u5230\u7a7a\u95f2\u4f4d\u7f6e",20023:"\u6682\u65e0\u82f1\u96c4",20024:"\u4eca\u65e5\u7d2f\u8ba1\u51fb\u6740\u5e74\u517d\u6570\u91cf:{0}",20025:"\u4eca\u65e5\u5df2\u51fb\u6740{0}\u53ea",20026:"\u4eca\u65e5\u5269\u4f59\u6311\u6218\u6b21\u6570:{0}",20027:"\u6311\u6218",20028:"\u6bcf\u65e5\u5956\u52b1",20029:"\u51fb\u6740{0}\u53ea\u5e74\u517d",20030:"\u9886\u5956",20031:"\u672a\u8fbe\u6210",20032:"\u6d3b\u52a8\u5269\u4f59\u65f6\u95f4:{0}\u5929{1}",20033:"1.\u6bcf\u65e5\u53ef\u6311\u6218{0}\u6b21\uff0c\u524d{1}\u6b21\u514d\u8d39\u6311\u6218\uff0c\u540e{2}\u6b21\u6311\u6218\u9700\u89c2\u770b\u89c6\u9891",20034:"2.\u8fdb\u5165\u6218\u6597\u540e\uff0c\u9632\u5fa1\u5854\u3001\u82f1\u96c4\u3001\u6280\u80fd\u7b49\u7ea7\u5c5e\u6027\u4e0d\u751f\u6548\uff0c\u6309\u71671\u7ea7\u751f\u6548",20035:"3.\u6bcf\u65e5\u51fb\u6740\u4e00\u5b9a\u6570\u91cf\u5e74\u517d\u53ef\u9886\u53d6\u76f8\u5e94\u5956\u52b1",20036:"1.\u5b8c\u6210\u6bcf\u65e5\u4efb\u52a1\u5373\u53ef\u6fc0\u6d3b\u5f53\u65e5\u5956\u52b1\uff1b\n2.\u6bcf\u65e5\u770b\u5e7f\u544a\u53ef\u83b7\u5f97\u52cb\u7ae0\uff1b\n3.\u9ad8\u7ea7\u52cb\u7ae0\u53ef\u9886\u53d6\u66f4\u591a\u5956\u52b1\uff1b\n4.\u52cb\u7ae0\u5f53\u65e5\u6709\u6548\uff1b",20037:"\u6bcf\u65e5\u4efb\u52a1",20038:"\u52cb\u7ae0\u5956\u52b1",20039:"\u4eca\u65e5\u52cb\u7ae0\u8fdb\u5ea6",20040:"{0}\u5e7f\u544a={1}\u79ef\u5206",20041:"\u6d3b\u52a8\u5012\u8ba1\u65f6:{0}\u5929{1}",20042:"\u83b7\u5f97{0}",20043:"\u5b8c\u6210\u6bcf\u65e5\u4efb\u52a1\u53ef\u6fc0\u6d3b\u52cb\u7ae0\u5956\u52b1",20044:"\u9000\u51fa\u519b\u56e2\u540e\u9700\u81f3\u591a12\u5c0f\u65f6\u624d\u80fd\u518d\u6b21\u8fdb\u5165\u519b\u56e2\uff1f",20045:"\u786e\u5b9a\u5c06{0}\u8e22\u51fa\u519b\u56e2\u4e48\uff1f",20046:"\u52a0\u5165\u519b\u56e2",20047:"\u52a0\u5165\u519b\u56e2\u540e\u53ef\u9886\u53d6\u519b\u56e2\u798f\u5229\uff01",20048:"\u5feb\u901f\u52a0\u5165",20049:"\u8d21\u732e\u6392\u540d",20050:"\u519b\u56e2\u6392\u540d:{0}",20051:"\u7d2f\u8ba1\u8d21\u732e:{0}",20052:"\u519b\u56e2\u4fe1\u606f",20053:"\u519b\u56e2\u6210\u5458",20054:"\u519b\u56e2\u6392\u884c",20055:"\u7b49\u7ea7:{0}",20056:"\u6210\u5458:{0}/{1}",20057:"1.\u519b\u56e2\u6210\u5458\u901a\u8fc7\u5206\u4eab\u52a9\u529b\u548c\u89c6\u9891\u52a9\u529b\u83b7\u5f97\u519b\u56e2\u8d21\u732e\uff0c\u519b\u56e2\u8d21\u732e\u80fd\u591f\u63d0\u5347\u519b\u56e2\u7b49\u7ea7",20058:"2.\u519b\u56e2\u7b49\u7ea7\u8d8a\u9ad8\u6bcf\u65e5\u7ea2\u5305\u798f\u5229\u5956\u52b1\u8d8a\u597d",20059:"3.\u519b\u56e2\u957f\u7531\u6628\u65e5\u519b\u56e2\u8d21\u732e\u6700\u9ad8\u7684\u73a9\u5bb6\u62c5\u4efb\uff0c\u519b\u56e2\u957f\u53ef\u4ee5\u8bf7\u79bb\u6628\u65e5\u65e0\u519b\u56e2\u8d21\u732e\u5e76\u4e14\u8fdb\u5165\u519b\u56e2\u65f6\u95f4\u5927\u4e8e24\u5c0f\u65f6\u7684\u73a9\u5bb6",20060:"4.\u8fde\u7eed\u4e09\u5929\u65e0\u519b\u56e2\u8d21\u732e\u7684\u73a9\u5bb6\u4f1a\u88ab\u7cfb\u7edf\u8bf7\u79bb\u519b\u56e2",20061:"\u6bcf\u65e55:00\u91cd\u7f6e\u52a9\u529b\u8fdb\u5ea6\u548c\u5df2\u52a9\u529b\u6b21\u6570",20062:"\u9000\u51fa\u519b\u56e2",20063:"\u6bcf\u65e55:00\u66f4\u65b0\u6210\u5458\u6628\u65e5\u8d21\u732e",20064:"\u770b\u770b\u5927\u5bb6\u624b\u6c14",20065:"\u6253\u5f00\u7ea2\u5305\u6700\u9ad8\u53ef\u83b7\u5f97{0}\u5143\u5b9d",20066:"\u7ea2\u5305\u603b\u8ba1{0}\u5143\u5b9d",20067:"\u4e0e\u7ea2\u5305\u64e6\u80a9\u800c\u8fc7",20068:"\u4e0b\u6b21\u6293\u4f4f\u55bd\uff0c\u522b\u8ba9\u5b83\u6e9c\u6389",20069:"[\u56e2\u957f]",20070:"\u7d2f\u8ba1\u8d21\u732e:{0}",20071:"\u6628\u65e5\u8d21\u732e:{0}",20072:"\u8e22\u51fa",20073:"\u519b\u56e2\u957f:{0}",20074:"\u7d2f\u8ba1\u8d21\u732e",20075:"\u52cb\u7ae0\u8fdb\u5ea6\u63d0\u793a",20076:"\u65b0\u6625\u6d3b\u52a8",20077:"\u519b\u56e2",20078:"[\u6211]",20079:"5.\u66f4\u6362\u519b\u56e2\u4f1a\u6709\u81f3\u591a12\u5c0f\u65f6\u51b7\u5374\u65f6\u95f4\u9700\u6c42\uff0c\u66f4\u6362\u519b\u56e2\u4e0d\u4f1a\u91cd\u7f6e\u5df2\u9886\u53d6\u7684\u7ea2\u5305\u72b6\u6001",20080:"{0}\u540e\u53ef\u8fdb\u5165\u519b\u56e2",20081:"\u7f51\u7edc\u5f02\u5e38..",20082:"\u7f51\u7edc\u5f02\u5e38",20083:"\u8bf7\u6c42\u53c2\u6570\u6709\u8bef",20084:"\u73a9\u5bb6\u4e0d\u5b58\u5728",20085:"\u6ca1\u6709\u519b\u56e2",20086:"\u5df2\u7ecf\u52a0\u5165\u519b\u56e2",20087:"\u6ca1\u6709\u53ef\u4ee5\u52a0\u5165\u7684\u519b\u56e2",20088:"\u8e22\u4eba\u5931\u8d25",20089:"\u6ca1\u6709\u519b\u56e2..",20090:"\u5df2\u7ecf\u8d85\u8fc7\u5206\u4eab/\u89c6\u9891\u9650\u5236\u6b21\u6570",20091:"\u5df2\u7ecf\u9886\u53d6\u8fc7\u8be5\u6863\u7ea2\u5305",20092:"\u7ea2\u5305\u5143\u5b9d\u6570\u91cf\u5f02\u5e38",20093:"\u519b\u56e2\u8d21\u732e\u4e0d\u8db3",20094:"\u52a0\u5165\u519b\u56e2\u8fc7\u4e8e\u9891\u7e41\uff0c\u52a0\u5165\u51b7\u5374\u4e2d",20095:"\u8bf7\u79bb\u73a9\u5bb6\u4e0d\u5728\u519b\u56e2",20096:"\u8bf7\u79bb\u73a9\u5bb6\u4e0d\u5728\u519b\u56e2...",20097:"\u8bf7\u5148\u6210\u4e3a\u519b\u56e2\u957f...",20098:"\u4e0d\u80fd\u8bf7\u79bb\u8be5\u73a9\u5bb6",20099:"\u8fdb\u5ea6/\u8d21\u732e\u503c\u5f02\u5e38",20100:"\u5fae\u4fe1\u5df2\u7ed1\u5b9a\u5176\u5b83\u7528\u6237",20101:"\u5fae\u4fe1\u7ed1\u5b9a\u5931\u8d25\u8bf7\u91cd\u8bd5",20102:"\u4eca\u65e5\u4e2a\u4eba\u519b\u56e2\u8d21\u732e\u8fbe\u5230{0}\u53ef\u5f00\u542f\u7ea2\u5305",20103:"\u519b\u56e2\u8fdb\u5ea6\u672a\u6ee1\u8db3\u9886\u53d6\u6761\u4ef6",20104:"{0}\u53ef\u9886\u53d6",20105:"\u6682\u65f6\u7a7a\u7f3a",20106:"\u8bf7\u5b89\u88c5\u5fae\u4fe1",20107:"\u6d3b\u52a8\u672a\u5f00\u542f",20108:"\u5206\u4eab\u52a9\u529b",20109:"\u519b\u56e2\u8d21\u732e+{0}",20110:"\u52a9\u529b\u8fdb\u5ea6+{0}",20111:"\u5df2\u52a9\u529b:{0}/{1}\u6b21",20112:"\u89c6\u9891\u52a9\u529b",20113:"\u89c2\u770b",20114:"\u5206\u4eab",20115:"\u52a9\u529b\u8fdb\u5ea6",20116:"\u4eca\u65e5\u52a9\u529b\u4eba\u6570:{0}",20117:"\u6d3b\u52a8\u5df2\u7ed3\u675f",20118:"\u622a\u56fe\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",20119:"\u6d3b\u52a8\u5f00\u542f\u65e5\u671f:{0}",20120:"\u51fb\u6740\u5e74\u517d",20121:"\u519b\u56e2\u5206\u4eab",20122:"\u519b\u56e2\u52a9\u529b",20123:"\u5173\u5361\u80dc\u5229",20124:"\u9632\u5fa1\u5854\u7a81\u7834",20125:"\u82f1\u96c4\u7a81\u7834",20126:"\u81f3\u5c0a\u5b9d\u7bb1",20127:"\u96c6\u5e02\u5143\u5b9d",20128:"\u9ad8\u7ea7\u9a7b\u5b88\u5956\u52b1\u500d\u6570\u589e\u52a0",20129:"\u6218\u6597\u52a0\u901f2.5\u500d",20130:"\u53d8\u5316\u4efb\u52a1",20131:"2.\u6bcf\u65e5\u770b\u5e7f\u544a\u53ef\u83b7\u5f97\u52cb\u7ae0\uff0c\u9886\u53d6\u52cb\u7ae0\u5927\u793c",20132:"\u798f",20133:"\u725b",20134:"\u6625\u8282\u8c6a\u793c\u6d3b\u52a8\u4e2d\u83b7\u5f97{0}\u5934\u50cf\u540e\u89e3\u9501",20135:"\u7ed1\u5b9a\u5fae\u4fe1",20136:"\u6625\u8282\u6d3b\u52a8\u5956\u52b1",20137:"{0}\u5df2\u7ed3\u675f\uff0c\u4f60\u7684\u5956\u52b1\u5df2\u53d1\u653e\uff0c\u8bf7\u67e5\u6536\uff01",20138:"\u9752\u94dc\u52cb\u7ae0",20139:"\u767d\u94f6\u52cb\u7ae0",20140:"\u9ec4\u91d1\u52cb\u7ae0",20141:"\u65b0\u6625\u6d3b\u52a8",20142:"\u6bcf\u65e55:00\u66f4\u65b0\u519b\u56e2\u6392\u884c",20143:"\u83b7\u5f97\u540e\u53ef\u89e3\u9501{0}\u5934\u50cf",20144:"{0}{1}\u964d\u4f4e{2}%",20145:"\u5efa\u9020\u548c\u5347\u7ea7\u6d88\u8017",20146:"\u53ef\u4e0a\u96352\u4e2a\u673a\u7f18",20147:"\u672c\u5173\u9632\u5fa1\u5854\u9650\u5236\u7c7b\u578b",20148:"{0}\u5173\u89e3\u9501",20149:"\u5269\u4f59",20150:"\u6b21",20151:"\u662f\u5426\u653e\u5f03\u591a\u500d\u5956\u52b1\uff1f",20152:"\u9632\u5fa1\u5854\u3001\u82f1\u96c4\u3001\u6280\u80fd\u7b49\u7ea7\u6309\u71671\u7ea7\u751f\u6548",20153:"\u6682\u65e0\u53ef\u7528\u673a\u7f18\uff0c\u5347\u7ea7\u82f1\u96c4\u89e3\u9501\u66f4\u591a\u673a\u7f18\uff01"}},cc._RF.pop()},{}]},{},["Aft","AllianceModule","BIManager","BaseHandler","BasePage","BaseScrollView","BaseUI","BiConstant","BroadcastModule","ByteBuf","CommonModule","CryptoJS","EventBus","FunctionModule","GMModule","GameConfig","GameConst","GameEventType","GameTextCode","Global","Grid","GuideModule","HeroModule","HotUpdateScene","HttpClient","InstanceModule","InviteFriendModule","ItemModule","Json_Box","Json_BoxType","Json_Broadcast","Json_Bubble","Json_Bullet","Json_Chapter","Json_DefendEffect","Json_DefendLevel","Json_DefendLevelReward","Json_Drop","Json_EnemySkill","Json_Expression","Json_FailureAdvice","Json_FreePower","Json_Function","Json_GameLevel","Json_GameLink","Json_GameParams","Json_Goal","Json_GoalRewardRatio","Json_Guide","Json_Guild","Json_GuildRewardRatio","Json_Head","Json_Hero","Json_HeroBattleNum","Json_HeroCard","Json_HeroQuality","Json_HeroRestrain","Json_HeroSkillType","Json_HeroStar","Json_HeroType","Json_InstanceBoxReward","Json_InstanceDailog","Json_InviteFriends","Json_Item","Json_Language","Json_Level","Json_MaskWord","Json_Medal","Json_Nature","Json_PushText","Json_Route","Json_Share","Json_SignIn","Json_SkillCard","Json_Soldier","Json_StartBuff","Json_Subscribe","Json_Task","Json_TaskReward","Json_TipsSkill","Json_Tower","Json_TowerQualityType","Json_TowerType","Json_Troop","Json_Vip","Json_YearTask","Json_YearTaskReward","Json_YearTaskRewardBox","LanguageData","LanguageUtils","LocalizedLabel","LocalizedRichText","LocalizedSprite","Logger","MapPath","NativeManager","NewYearModule","OneClickEnterGroupManager","PageConstant","PageManager","PakoCompression","PiggyBankModule","Player","PlayerBaseModule","PushModule","ServiceModule","SettingModule","ShopModule","SignModule","SkillModule","SoundsUtil","SpriteFrameSet","StarNode","StorageUtil","TTAdManager","TalkingDataManager","TaskModule","TemplateManager","TimeUtil","TowerModule","Utils","VipModule","algo","bignumber.min","encryptjs","base64-js","buffer","ieee754","isarray","polyglot.min","qqmap-wx-jssdk","qqmap-wx-jssdk.min","use_reversed_rotateTo","zh","AllianceExitPage","AllianceJoinPage","AlliancePage","AlliancePageMember","AlliancePageMemberItemRender","AlliancePageRank","AlliancePageRankItemRender","AllianceRedpackLookItemRender","AllianceRedpackLookPage","AllianceRedpackPage","AppointGarrisonHeroItemRender","AppointGarrisonHeroPopUp","AppointGayFriendItemRender","AppointGayFriendPopUp","AppointHeroItemRender","AppointHeroPopUp","AttributeItem","BattleBoxPage","BattleGayFriendItemRender","BattlePiggyBankPage","BattleScene","BoxItemRender","BroadcastItemRender","BuffItemRender","CaptureImagePage","ClearAccountPage","CommonBlackPage","CommonCardItemRender","CommonItemRender","CommonItemRender1","CommonSelectNode","CommonSkillItemRender","CommonSkillTipsItemRender","CommonTipItemRender","DebugConstant","DebugItemRender","DebugPage","DropItemRender","DropTips","EmailFeedbackPage","EmailGlobalPage","EmailItemRender","EmailPage","EnemyDetailItem","EnterBattleTipPage","FeedBackPage","FreePowerAddPopup","FreePowerRewardItemrender","FreePowerRewardPopup","GameBattleSkillAdUpPage","GameBattleSkillItemRender","GameBattleSkillPage","GameBattleUI","GameBullet","GameBulletEffect","GameEnemy","GameFlyHp","GameHero","GameHeroHalo","GameHeroOperate","GameHeroSkillPage","GameIconTips","GameMap","GameMapEffect","GameMapEffectDown","GamePauseItemRender","GamePausePage","GameResultPage","GameRevivalPage","GameScene","GameSkillTips","GameTower","GameTowerControl","GameTowerControlItemRender","GayFriendDetailPage","GayFriendHeroHeadItemRender","GayFriendHeroItemRender","GayFriendItemRender","GayFriendUnlockPage","GiftCodePage","GuideBubble","GuideDialog","GuideHand","GuideHandAndDialog","GuideManager","GuidePopUp_1","GuidePopUp_2","GuidePopUp_3","GuidePopUp_4","GuidePopUp_5","HangUpPage","Head","HeroTowerUnlockPage","InstanceBoxRewardPopUp","InstanceBoxRewardTipsItemRender","InstanceEnemyItemRender","InstanceRecommendItemRender","InviteItemRender","InvitePopUp","LackOfMaterialPopUp","LanguageItemRender","LanguagePage","LimitTowerPage","MainChildPage","MainHangUpBattleItemRender","MainHeroChooseConfirmPage","MainHeroChoosePopUp","MainHeroConfirmPage","MainHeroDetailPopUp","MainHeroItemRender","MainHeroObtainedPopUp","MainHeroPage","MainHeroPieceSourceItemRender","MainHeroPieceSourcePopUp","MainHeroSkillItemRender","MainHeroSkillTypeItemRender","MainHeroWakePage","MainInstanceItemRender","MainPage","MainPowerPage","MainScene","MainTaskLotteryItemRender","MainTaskPage","MainTopItemRender","MainTowerHeroItemRender","MainTowerItemRender","MainTowerPage","MainWorldPage","MarkPage","NewEnemyPage","NewFunctionPage","NewTargetLotteryPage","NewTargetPage","NewYearActivityPage","PictorialEnemyDetailPage","PictorialItemRender","PictorialPage","PictorialTowerDetailPage","PieceChangeItemRender","PieceChangePage","PiggyBankPage","PlayerLockPopUp","PlayerOfficialPopUp","PromoteItemRender","QuicklyBattlePage","RankItemRender","RankPage","RankScrollNode","RenamePage","RoleIconItemRender","RoleIconPage","RoleInfoPage","SecondHeroChoosePopUp","SecondHeroConfirmPopUp","SettingPage","ShopExpNode","ShopFreeNode","ShopHeroTips","ShopHeroTipsItemRender","ShopPage","ShopPieceItemRender","ShopRewardItemRender","ShopRewardPage","ShopSilverNode","SignItemRender","SignPage","Skill","SkillDetailPage","SkillItemRender","SkillPage","SkillStarPage","SoldierTrialPage","SoldierTrialPageNew","SpeedAdTryPage","SpeedTryPage","SpringDailyRewardItemRender","SpringGiftMedalUpPage","SpringGiftPage","SpringGiftTopTipItemRender","StartBuffPage","SubscribeItemRender","SubscribePopUp","SwitchChapterCloudPopUp","TaskItemRender","TaskPage","TaskTipItemRender","TaskTopTipItemRender","TimeErrorPage","TowerVanGuardsItemRender","VersionUpdatePage","VipItemRender","VipPage","VipUpPage","WaveItemRender","WaveStartTipsIntroduceItemRender","WaveStartTipsItemRender","WorldForceDetailPage","WorldGarrisonHeroUpgradePopUp","WorldGarrisonRewardPopUp","WorldGarrisonSpeedUpPopUp","WorldMapGarrisonExpTipsItemRender","WorldMapGarrisonItemRender","WorldMapItemRender","WorldQuickGarrisonHeroItemRender","WorldQuickGarrisonHeroPopUp","WorldQuickGarrisonItemRender","WorldQuickGarrisonPopUp","YearMonsterPage","YearMonsterResultPage"]);